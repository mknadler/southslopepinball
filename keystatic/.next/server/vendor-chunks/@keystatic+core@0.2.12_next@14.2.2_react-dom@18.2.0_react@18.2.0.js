"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0";
exports.ids = ["vendor-chunks/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/api-5f8911b5.node.esm.js":
/*!********************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/api-5f8911b5.node.esm.js ***!
  \********************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   c: () => (/* binding */ component)\n/* harmony export */ });\n/* harmony import */ var _keystar_ui_checkbox__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @keystar/ui/checkbox */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/checkbox/dist/keystar-ui-checkbox.esm.js\");\n/* harmony import */ var _keystar_ui_typography__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @keystar/ui/typography */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/typography/dist/keystar-ui-typography.esm.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/.pnpm/next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _keystar_ui_text_field__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @keystar/ui/text-field */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/text-field/dist/keystar-ui-text-field.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./index-fbab32f7.node.esm.js */ \"(ssr)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/index-fbab32f7.node.esm.js\");\n/* harmony import */ var emery__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! emery */ \"(ssr)/./node_modules/.pnpm/emery@1.4.3/node_modules/emery/dist/emery.esm.js\");\n/* harmony import */ var _keystar_ui_button__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @keystar/ui/button */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/button/dist/keystar-ui-button.esm.js\");\n/* harmony import */ var _keystar_ui_field__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @keystar/ui/field */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/field/dist/keystar-ui-field.esm.js\");\n/* harmony import */ var _keystar_ui_layout__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @keystar/ui/layout */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/layout/dist/keystar-ui-layout.esm.js\");\n/* harmony import */ var _keystar_ui_style__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @keystar/ui/style */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/style/dist/keystar-ui-style.esm.js\");\n/* harmony import */ var _keystar_ui_number_field__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @keystar/ui/number-field */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/number-field/dist/keystar-ui-number-field.esm.js\");\n/* harmony import */ var _keystar_ui_combobox__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @keystar/ui/combobox */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/combobox/dist/keystar-ui-combobox.esm.js\");\n/* harmony import */ var minimatch__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! minimatch */ \"(ssr)/./node_modules/.pnpm/minimatch@7.4.6/node_modules/minimatch/dist/mjs/index.js\");\n/* harmony import */ var _keystar_ui_picker__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @keystar/ui/picker */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/picker/dist/keystar-ui-picker.esm.js\");\n/* harmony import */ var _sindresorhus_slugify__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @sindresorhus/slugify */ \"(ssr)/./node_modules/.pnpm/@sindresorhus+slugify@1.1.2/node_modules/@sindresorhus/slugify/index.js\");\n/* harmony import */ var _sindresorhus_slugify__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_sindresorhus_slugify__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _braintree_sanitize_url__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @braintree/sanitize-url */ \"(ssr)/./node_modules/.pnpm/@braintree+sanitize-url@6.0.4/node_modules/@braintree/sanitize-url/dist/index.js\");\n/* harmony import */ var _keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @keystar/ui/dialog */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/dialog/dist/keystar-ui-dialog.esm.js\");\n/* harmony import */ var _keystar_ui_slots__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @keystar/ui/slots */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/slots/dist/keystar-ui-slots.esm.js\");\n/* harmony import */ var _keystar_ui_drag_and_drop__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @keystar/ui/drag-and-drop */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/drag-and-drop/dist/keystar-ui-drag-and-drop.esm.js\");\n/* harmony import */ var _keystar_ui_icon__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @keystar/ui/icon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/dist/keystar-ui-icon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_trash2Icon__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @keystar/ui/icon/icons/trash2Icon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/trash2Icon/dist/keystar-ui-icon-icons-trash2Icon.esm.js\");\n/* harmony import */ var _keystar_ui_list_view__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @keystar/ui/list-view */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/list-view/dist/keystar-ui-list-view.esm.js\");\n/* harmony import */ var _keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @keystar/ui/tooltip */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/tooltip/dist/keystar-ui-tooltip.esm.js\");\n/* harmony import */ var _keystar_ui_split_view__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @keystar/ui/split-view */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/split-view/dist/keystar-ui-split-view.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_panelLeftOpenIcon__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @keystar/ui/icon/icons/panelLeftOpenIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/panelLeftOpenIcon/dist/keystar-ui-icon-icons-panelLeftOpenIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_panelLeftCloseIcon__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @keystar/ui/icon/icons/panelLeftCloseIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/panelLeftCloseIcon/dist/keystar-ui-icon-icons-panelLeftCloseIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_panelRightOpenIcon__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @keystar/ui/icon/icons/panelRightOpenIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/panelRightOpenIcon/dist/keystar-ui-icon-icons-panelRightOpenIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_panelRightCloseIcon__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @keystar/ui/icon/icons/panelRightCloseIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/panelRightCloseIcon/dist/keystar-ui-icon-icons-panelRightCloseIcon.esm.js\");\n/* harmony import */ var _keystar_ui_menu__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @keystar/ui/menu */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/menu/dist/keystar-ui-menu.esm.js\");\n/* harmony import */ var _keystar_ui_link__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @keystar/ui/link */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/link/dist/keystar-ui-link.esm.js\");\n/* harmony import */ var _keystar_ui_progress__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @keystar/ui/progress */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/progress/dist/keystar-ui-progress.esm.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// this is written like this rather than ArrayField<ComponentSchema> to avoid TypeScript erroring about circularity\nfunction component(options) {\n  return options;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGtleXN0YXRpYytjb3JlQDAuMi4xMl9uZXh0QDE0LjIuMl9yZWFjdC1kb21AMTguMi4wX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvYXBpLTVmODkxMWI1Lm5vZGUuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE4QjtBQUNFO0FBQ0w7QUFDSztBQUNqQjtBQUN1QjtBQUN2QjtBQUNhO0FBQ0Q7QUFDQztBQUNEO0FBQ087QUFDSjtBQUNYO0FBQ2lCO0FBQ1I7QUFDRztBQUNFO0FBQ1A7QUFDRTtBQUNEO0FBQ1E7QUFDVDtBQUNpQjtBQUNaO0FBQ0Y7QUFDZDtBQUNNO0FBQ1c7QUFDa0I7QUFDQztBQUNBO0FBQ0M7QUFDMUI7QUFDQTtBQUNJOztBQUU5QjtBQUNBO0FBQ0E7QUFDQTs7QUFFMEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Aa2V5c3RhdGljL3RlbXBsYXRlcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvLnBucG0vQGtleXN0YXRpYytjb3JlQDAuMi4xMl9uZXh0QDE0LjIuMl9yZWFjdC1kb21AMTguMi4wX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvYXBpLTVmODkxMWI1Lm5vZGUuZXNtLmpzPzFiNzYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICdAa2V5c3Rhci91aS9jaGVja2JveCc7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL3R5cG9ncmFwaHknO1xuaW1wb3J0ICdyZWFjdC9qc3gtcnVudGltZSc7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL3RleHQtZmllbGQnO1xuaW1wb3J0ICdyZWFjdCc7XG5pbXBvcnQgJy4vaW5kZXgtZmJhYjMyZjcubm9kZS5lc20uanMnO1xuaW1wb3J0ICdlbWVyeSc7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2J1dHRvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ZpZWxkJztcbmltcG9ydCAnQGtleXN0YXIvdWkvbGF5b3V0JztcbmltcG9ydCAnQGtleXN0YXIvdWkvc3R5bGUnO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9udW1iZXItZmllbGQnO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9jb21ib2JveCc7XG5pbXBvcnQgJ21pbmltYXRjaCc7XG5pbXBvcnQgJ0ByZWFjdC1zdGF0ZWx5L2NvbGxlY3Rpb25zJztcbmltcG9ydCAnQGtleXN0YXIvdWkvcGlja2VyJztcbmltcG9ydCAnQHNpbmRyZXNvcmh1cy9zbHVnaWZ5JztcbmltcG9ydCAnQGJyYWludHJlZS9zYW5pdGl6ZS11cmwnO1xuaW1wb3J0ICdAcmVhY3QtYXJpYS9pMThuJztcbmltcG9ydCAnQGtleXN0YXIvdWkvZGlhbG9nJztcbmltcG9ydCAnQGtleXN0YXIvdWkvc2xvdHMnO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9kcmFnLWFuZC1kcm9wJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvdHJhc2gySWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2xpc3Qtdmlldyc7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL3Rvb2x0aXAnO1xuaW1wb3J0ICdzbGF0ZSc7XG5pbXBvcnQgJ3NsYXRlLXJlYWN0JztcbmltcG9ydCAnQGtleXN0YXIvdWkvc3BsaXQtdmlldyc7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvcGFuZWxMZWZ0T3Blbkljb24nO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL3BhbmVsTGVmdENsb3NlSWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvcGFuZWxSaWdodE9wZW5JY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9wYW5lbFJpZ2h0Q2xvc2VJY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvbWVudSc7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2xpbmsnO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9wcm9ncmVzcyc7XG5cbi8vIHRoaXMgaXMgd3JpdHRlbiBsaWtlIHRoaXMgcmF0aGVyIHRoYW4gQXJyYXlGaWVsZDxDb21wb25lbnRTY2hlbWE+IHRvIGF2b2lkIFR5cGVTY3JpcHQgZXJyb3JpbmcgYWJvdXQgY2lyY3VsYXJpdHlcbmZ1bmN0aW9uIGNvbXBvbmVudChvcHRpb25zKSB7XG4gIHJldHVybiBvcHRpb25zO1xufVxuXG5leHBvcnQgeyBjb21wb25lbnQgYXMgYyB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/api-5f8911b5.node.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/index-20a81495.node.esm.js":
/*!**********************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/index-20a81495.node.esm.js ***!
  \**********************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   i: () => (/* binding */ integer)\n/* harmony export */ });\n/* harmony import */ var _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-fbab32f7.node.esm.js */ \"(ssr)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/index-fbab32f7.node.esm.js\");\n/* harmony import */ var _keystar_ui_number_field__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @keystar/ui/number-field */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/number-field/dist/keystar-ui-number-field.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/.pnpm/next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\n\nfunction validateInteger(validation, value, label) {\n  if (value !== null && (typeof value !== 'number' || !Number.isInteger(value))) {\n    return `${label} must be a whole number`;\n  }\n  if (validation !== null && validation !== void 0 && validation.isRequired && value === null) {\n    return `${label} is required`;\n  }\n  if (value !== null) {\n    if ((validation === null || validation === void 0 ? void 0 : validation.min) !== undefined && value < validation.min) {\n      return `${label} must be at least ${validation.min}`;\n    }\n    if ((validation === null || validation === void 0 ? void 0 : validation.max) !== undefined && value > validation.max) {\n      return `${label} must be at most ${validation.max}`;\n    }\n  }\n}\n\nfunction IntegerFieldInput(props) {\n  var _props$validation;\n  const [blurred, onBlur] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useReducer)(() => true, false);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_keystar_ui_number_field__WEBPACK_IMPORTED_MODULE_1__.NumberField, {\n    label: props.label,\n    description: props.description,\n    isRequired: (_props$validation = props.validation) === null || _props$validation === void 0 ? void 0 : _props$validation.isRequired,\n    errorMessage: props.forceValidation || blurred ? validateInteger(props.validation, props.value, props.label) : undefined,\n    onBlur: onBlur,\n    autoFocus: props.autoFocus,\n    value: props.value === null ? undefined : props.value,\n    onChange: val => {\n      props.onChange(val === undefined ? null : val);\n    }\n  });\n}\n\nfunction integer({\n  label,\n  defaultValue,\n  validation,\n  description\n}) {\n  return (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aw)({\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(IntegerFieldInput, {\n        label: label,\n        description: description,\n        validation: validation,\n        ...props\n      });\n    },\n    defaultValue() {\n      return defaultValue !== null && defaultValue !== void 0 ? defaultValue : null;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value === 'number') {\n        return value;\n      }\n      throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax('Must be a number');\n    },\n    validate(value) {\n      const message = validateInteger(validation, value, label);\n      if (message !== undefined) {\n        throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax(message);\n      }\n      (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ay)(value, validation, label);\n      return value;\n    },\n    serialize(value) {\n      return {\n        value: value === null ? undefined : value\n      };\n    }\n  });\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGtleXN0YXRpYytjb3JlQDAuMi4xMl9uZXh0QDE0LjIuMl9yZWFjdC1kb21AMTguMi4wX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvaW5kZXgtMjBhODE0OTUubm9kZS5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFxSTtBQUM5RTtBQUNwQjtBQUNLOztBQUV4QztBQUNBO0FBQ0EsY0FBYyxPQUFPO0FBQ3JCO0FBQ0E7QUFDQSxjQUFjLE9BQU87QUFDckI7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLE9BQU8sbUJBQW1CLGVBQWU7QUFDekQ7QUFDQTtBQUNBLGdCQUFnQixPQUFPLGtCQUFrQixlQUFlO0FBQ3hEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsNEJBQTRCLGlEQUFVO0FBQ3RDLHNCQUFzQixzREFBRyxDQUFDLGlFQUFXO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsU0FBUywrREFBbUM7QUFDNUM7QUFDQSwwQkFBMEIsc0RBQUc7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMkRBQWM7QUFDOUIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwyREFBYztBQUNoQztBQUNBLE1BQU0sK0RBQWM7QUFDcEI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFd0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Aa2V5c3RhdGljL3RlbXBsYXRlcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvLnBucG0vQGtleXN0YXRpYytjb3JlQDAuMi4xMl9uZXh0QDE0LjIuMl9yZWFjdC1kb21AMTguMi4wX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvaW5kZXgtMjBhODE0OTUubm9kZS5lc20uanM/YzI4MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhdyBhcyBiYXNpY0Zvcm1GaWVsZFdpdGhTaW1wbGVSZWFkZXJQYXJzZSwgYXggYXMgRmllbGREYXRhRXJyb3IsIGF5IGFzIGFzc2VydFJlcXVpcmVkIH0gZnJvbSAnLi9pbmRleC1mYmFiMzJmNy5ub2RlLmVzbS5qcyc7XG5pbXBvcnQgeyBOdW1iZXJGaWVsZCB9IGZyb20gJ0BrZXlzdGFyL3VpL251bWJlci1maWVsZCc7XG5pbXBvcnQgeyB1c2VSZWR1Y2VyIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsganN4IH0gZnJvbSAncmVhY3QvanN4LXJ1bnRpbWUnO1xuXG5mdW5jdGlvbiB2YWxpZGF0ZUludGVnZXIodmFsaWRhdGlvbiwgdmFsdWUsIGxhYmVsKSB7XG4gIGlmICh2YWx1ZSAhPT0gbnVsbCAmJiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJyB8fCAhTnVtYmVyLmlzSW50ZWdlcih2YWx1ZSkpKSB7XG4gICAgcmV0dXJuIGAke2xhYmVsfSBtdXN0IGJlIGEgd2hvbGUgbnVtYmVyYDtcbiAgfVxuICBpZiAodmFsaWRhdGlvbiAhPT0gbnVsbCAmJiB2YWxpZGF0aW9uICE9PSB2b2lkIDAgJiYgdmFsaWRhdGlvbi5pc1JlcXVpcmVkICYmIHZhbHVlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGAke2xhYmVsfSBpcyByZXF1aXJlZGA7XG4gIH1cbiAgaWYgKHZhbHVlICE9PSBudWxsKSB7XG4gICAgaWYgKCh2YWxpZGF0aW9uID09PSBudWxsIHx8IHZhbGlkYXRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbGlkYXRpb24ubWluKSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlIDwgdmFsaWRhdGlvbi5taW4pIHtcbiAgICAgIHJldHVybiBgJHtsYWJlbH0gbXVzdCBiZSBhdCBsZWFzdCAke3ZhbGlkYXRpb24ubWlufWA7XG4gICAgfVxuICAgIGlmICgodmFsaWRhdGlvbiA9PT0gbnVsbCB8fCB2YWxpZGF0aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWxpZGF0aW9uLm1heCkgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSA+IHZhbGlkYXRpb24ubWF4KSB7XG4gICAgICByZXR1cm4gYCR7bGFiZWx9IG11c3QgYmUgYXQgbW9zdCAke3ZhbGlkYXRpb24ubWF4fWA7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIEludGVnZXJGaWVsZElucHV0KHByb3BzKSB7XG4gIHZhciBfcHJvcHMkdmFsaWRhdGlvbjtcbiAgY29uc3QgW2JsdXJyZWQsIG9uQmx1cl0gPSB1c2VSZWR1Y2VyKCgpID0+IHRydWUsIGZhbHNlKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goTnVtYmVyRmllbGQsIHtcbiAgICBsYWJlbDogcHJvcHMubGFiZWwsXG4gICAgZGVzY3JpcHRpb246IHByb3BzLmRlc2NyaXB0aW9uLFxuICAgIGlzUmVxdWlyZWQ6IChfcHJvcHMkdmFsaWRhdGlvbiA9IHByb3BzLnZhbGlkYXRpb24pID09PSBudWxsIHx8IF9wcm9wcyR2YWxpZGF0aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcHJvcHMkdmFsaWRhdGlvbi5pc1JlcXVpcmVkLFxuICAgIGVycm9yTWVzc2FnZTogcHJvcHMuZm9yY2VWYWxpZGF0aW9uIHx8IGJsdXJyZWQgPyB2YWxpZGF0ZUludGVnZXIocHJvcHMudmFsaWRhdGlvbiwgcHJvcHMudmFsdWUsIHByb3BzLmxhYmVsKSA6IHVuZGVmaW5lZCxcbiAgICBvbkJsdXI6IG9uQmx1cixcbiAgICBhdXRvRm9jdXM6IHByb3BzLmF1dG9Gb2N1cyxcbiAgICB2YWx1ZTogcHJvcHMudmFsdWUgPT09IG51bGwgPyB1bmRlZmluZWQgOiBwcm9wcy52YWx1ZSxcbiAgICBvbkNoYW5nZTogdmFsID0+IHtcbiAgICAgIHByb3BzLm9uQ2hhbmdlKHZhbCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHZhbCk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gaW50ZWdlcih7XG4gIGxhYmVsLFxuICBkZWZhdWx0VmFsdWUsXG4gIHZhbGlkYXRpb24sXG4gIGRlc2NyaXB0aW9uXG59KSB7XG4gIHJldHVybiBiYXNpY0Zvcm1GaWVsZFdpdGhTaW1wbGVSZWFkZXJQYXJzZSh7XG4gICAgSW5wdXQocHJvcHMpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KEludGVnZXJGaWVsZElucHV0LCB7XG4gICAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICB2YWxpZGF0aW9uOiB2YWxpZGF0aW9uLFxuICAgICAgICAuLi5wcm9wc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWZhdWx0VmFsdWUoKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdFZhbHVlICE9PSBudWxsICYmIGRlZmF1bHRWYWx1ZSAhPT0gdm9pZCAwID8gZGVmYXVsdFZhbHVlIDogbnVsbDtcbiAgICB9LFxuICAgIHBhcnNlKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIG51bWJlcicpO1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSB2YWxpZGF0ZUludGVnZXIodmFsaWRhdGlvbiwgdmFsdWUsIGxhYmVsKTtcbiAgICAgIGlmIChtZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKG1lc3NhZ2UpO1xuICAgICAgfVxuICAgICAgYXNzZXJ0UmVxdWlyZWQodmFsdWUsIHZhbGlkYXRpb24sIGxhYmVsKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHZhbHVlID09PSBudWxsID8gdW5kZWZpbmVkIDogdmFsdWVcbiAgICAgIH07XG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IHsgaW50ZWdlciBhcyBpIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/index-20a81495.node.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/index-fbab32f7.node.esm.js":
/*!**********************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/index-fbab32f7.node.esm.js ***!
  \**********************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $: () => (/* binding */ getRepoUrl),\n/* harmony export */   A: () => (/* binding */ getSyncAuth),\n/* harmony export */   B: () => (/* binding */ redirectToCloudAuth),\n/* harmony export */   C: () => (/* binding */ CloudAppShellQuery),\n/* harmony export */   D: () => (/* binding */ serializeProps),\n/* harmony export */   E: () => (/* binding */ BranchInfoContext),\n/* harmony export */   F: () => (/* binding */ useSetTreeSha),\n/* harmony export */   G: () => (/* binding */ GitHubAppShellQuery),\n/* harmony export */   H: () => (/* binding */ useCurrentUnscopedTree),\n/* harmony export */   I: () => (/* binding */ updateTreeWithChanges),\n/* harmony export */   J: () => (/* binding */ hydrateTreeCacheWithEntries),\n/* harmony export */   K: () => (/* binding */ KEYSTATIC_CLOUD_API_URL),\n/* harmony export */   L: () => (/* binding */ LOADING),\n/* harmony export */   M: () => (/* binding */ scopeEntriesWithPathPrefix),\n/* harmony export */   N: () => (/* binding */ fetchGitHubTreeData),\n/* harmony export */   O: () => (/* binding */ treeSha),\n/* harmony export */   P: () => (/* binding */ PageRoot),\n/* harmony export */   Q: () => (/* binding */ getSlugFromState),\n/* harmony export */   R: () => (/* binding */ RepoWithWriteAccessContext),\n/* harmony export */   S: () => (/* binding */ useConfig),\n/* harmony export */   T: () => (/* binding */ ThemeProvider),\n/* harmony export */   U: () => (/* binding */ getSlugGlobForCollection),\n/* harmony export */   V: () => (/* binding */ getCollectionFormat),\n/* harmony export */   W: () => (/* binding */ getCollectionItemPath),\n/* harmony export */   X: () => (/* binding */ PageBody),\n/* harmony export */   Y: () => (/* binding */ containerWidthForEntryLayout),\n/* harmony export */   Z: () => (/* binding */ createGetPreviewProps),\n/* harmony export */   _: () => (/* binding */ useEventCallback),\n/* harmony export */   a: () => (/* binding */ PageHeader),\n/* harmony export */   a$: () => (/* binding */ text),\n/* harmony export */   a0: () => (/* binding */ getDataFileExtension),\n/* harmony export */   a1: () => (/* binding */ clientSideValidateProp),\n/* harmony export */   a2: () => (/* binding */ FormForEntry),\n/* harmony export */   a3: () => (/* binding */ useRepositoryId),\n/* harmony export */   a4: () => (/* binding */ useCreateBranchMutation),\n/* harmony export */   a5: () => (/* binding */ getBranchPrefix),\n/* harmony export */   a6: () => (/* binding */ prettyErrorForCreateBranchMutation),\n/* harmony export */   a7: () => (/* binding */ getInitialPropsValue),\n/* harmony export */   a8: () => (/* binding */ CreateBranchDialog),\n/* harmony export */   a9: () => (/* binding */ useNavItems),\n/* harmony export */   aA: () => (/* binding */ collection),\n/* harmony export */   aB: () => (/* binding */ singleton),\n/* harmony export */   aC: () => (/* binding */ BlockWrapper),\n/* harmony export */   aD: () => (/* binding */ NotEditable),\n/* harmony export */   aE: () => (/* binding */ ToolbarSeparator),\n/* harmony export */   aF: () => (/* binding */ ImageFieldInput),\n/* harmony export */   aG: () => (/* binding */ getSrcPrefix),\n/* harmony export */   aH: () => (/* binding */ fixPath),\n/* harmony export */   aI: () => (/* binding */ useIsInDocumentEditor),\n/* harmony export */   aJ: () => (/* binding */ useObjectURL),\n/* harmony export */   aK: () => (/* binding */ getUploadedFile),\n/* harmony export */   aL: () => (/* binding */ useFieldContext),\n/* harmony export */   aM: () => (/* binding */ SlugFieldContext),\n/* harmony export */   aN: () => (/* binding */ PathContext),\n/* harmony export */   aO: () => (/* binding */ validateText),\n/* harmony export */   aP: () => (/* binding */ isValidURL),\n/* harmony export */   aQ: () => (/* binding */ ArrayFieldListView),\n/* harmony export */   aR: () => (/* binding */ previewPropsToValue),\n/* harmony export */   aS: () => (/* binding */ ArrayFieldValidationMessages),\n/* harmony export */   aT: () => (/* binding */ valueToUpdater),\n/* harmony export */   aU: () => (/* binding */ setValueToPreviewProps),\n/* harmony export */   aV: () => (/* binding */ FormValueContentFromPreviewProps),\n/* harmony export */   aW: () => (/* binding */ useImageLibraryURL),\n/* harmony export */   aX: () => (/* binding */ loadImageData),\n/* harmony export */   aY: () => (/* binding */ emptyImageData),\n/* harmony export */   aZ: () => (/* binding */ ImageDimensionsInput),\n/* harmony export */   a_: () => (/* binding */ parseImageData),\n/* harmony export */   aa: () => (/* binding */ pluralize),\n/* harmony export */   ab: () => (/* binding */ useViewer),\n/* harmony export */   ac: () => (/* binding */ useCloudInfo),\n/* harmony export */   ad: () => (/* binding */ useSidebar),\n/* harmony export */   ae: () => (/* binding */ useContentPanelState),\n/* harmony export */   af: () => (/* binding */ ContentPanelProvider),\n/* harmony export */   ag: () => (/* binding */ SidebarDialog),\n/* harmony export */   ah: () => (/* binding */ SidebarPanel),\n/* harmony export */   ai: () => (/* binding */ AppShellErrorContext),\n/* harmony export */   aj: () => (/* binding */ ConfigContext),\n/* harmony export */   ak: () => (/* binding */ AppStateContext),\n/* harmony export */   al: () => (/* binding */ SidebarProvider),\n/* harmony export */   am: () => (/* binding */ GitHubAppShellProvider),\n/* harmony export */   an: () => (/* binding */ LocalAppShellProvider),\n/* harmony export */   ao: () => (/* binding */ getSingletonFormat),\n/* harmony export */   ap: () => (/* binding */ getSingletonPath),\n/* harmony export */   aq: () => (/* binding */ isCloudConfig),\n/* harmony export */   ar: () => (/* binding */ assertValidRepoConfig),\n/* harmony export */   as: () => (/* binding */ RouterProvider),\n/* harmony export */   at: () => (/* binding */ GitHubAppShellDataContext),\n/* harmony export */   au: () => (/* binding */ CloudInfoProvider),\n/* harmony export */   av: () => (/* binding */ GitHubAppShellDataProvider),\n/* harmony export */   aw: () => (/* binding */ basicFormFieldWithSimpleReaderParse),\n/* harmony export */   ax: () => (/* binding */ FieldDataError),\n/* harmony export */   ay: () => (/* binding */ assertRequired),\n/* harmony export */   az: () => (/* binding */ config),\n/* harmony export */   b: () => (/* binding */ useTree),\n/* harmony export */   b0: () => (/* binding */ document$1),\n/* harmony export */   b1: () => (/* binding */ sha1),\n/* harmony export */   b2: () => (/* binding */ getValueAtPropPath),\n/* harmony export */   b3: () => (/* binding */ formatFormDataError),\n/* harmony export */   b4: () => (/* binding */ treeEntriesToTreeNodes),\n/* harmony export */   b5: () => (/* binding */ CloudImagePreview),\n/* harmony export */   b6: () => (/* binding */ cloudImageToolbarIcon),\n/* harmony export */   b7: () => (/* binding */ transformProps),\n/* harmony export */   b8: () => (/* binding */ getUploadedFileObject),\n/* harmony export */   b9: () => (/* binding */ useEntryLayoutSplitPaneContext),\n/* harmony export */   ba: () => (/* binding */ useContentPanelSize),\n/* harmony export */   bb: () => (/* binding */ Prism),\n/* harmony export */   bc: () => (/* binding */ collectDirectoriesUsedInSchema),\n/* harmony export */   bd: () => (/* binding */ CloudImagePreviewForNewEditor),\n/* harmony export */   c: () => (/* binding */ useBranchInfo),\n/* harmony export */   d: () => (/* binding */ getEntriesInCollectionWithTreeKey),\n/* harmony export */   e: () => (/* binding */ getAuth),\n/* harmony export */   f: () => (/* binding */ getEntryDataFilepath),\n/* harmony export */   g: () => (/* binding */ getCollectionPath),\n/* harmony export */   h: () => (/* binding */ parseProps),\n/* harmony export */   i: () => (/* binding */ isLocalConfig),\n/* harmony export */   j: () => (/* binding */ useBaseCommit),\n/* harmony export */   k: () => (/* binding */ useIsRepoPrivate),\n/* harmony export */   l: () => (/* binding */ l10nMessages),\n/* harmony export */   m: () => (/* binding */ getDirectoriesForTreeKey),\n/* harmony export */   n: () => (/* binding */ getTreeKey),\n/* harmony export */   o: () => (/* binding */ object),\n/* harmony export */   p: () => (/* binding */ parseRepoConfig),\n/* harmony export */   q: () => (/* binding */ useData),\n/* harmony export */   r: () => (/* binding */ getTreeNodeAtPath),\n/* harmony export */   s: () => (/* binding */ serializeRepoConfig),\n/* harmony export */   t: () => (/* binding */ toFormattedFormDataError),\n/* harmony export */   u: () => (/* binding */ useRouter),\n/* harmony export */   v: () => (/* binding */ isGitHubConfig),\n/* harmony export */   w: () => (/* binding */ blobSha),\n/* harmony export */   x: () => (/* binding */ getPathPrefix),\n/* harmony export */   y: () => (/* binding */ KEYSTATIC_CLOUD_HEADERS),\n/* harmony export */   z: () => (/* binding */ useTheme)\n/* harmony export */ });\n/* harmony import */ var _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__ = __webpack_require__(/*! @markdoc/markdoc */ \"(ssr)/./node_modules/.pnpm/@markdoc+markdoc@0.3.5_@types+react@18.2.79_react@18.2.0/node_modules/@markdoc/markdoc/dist/index.mjs\");\n/* harmony import */ var slate__WEBPACK_IMPORTED_MODULE_104__ = __webpack_require__(/*! slate */ \"(ssr)/./node_modules/.pnpm/slate@0.91.4/node_modules/slate/dist/index.es.js\");\n/* harmony import */ var emery_assertions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! emery/assertions */ \"(ssr)/./node_modules/.pnpm/emery@1.4.3/node_modules/emery/assertions/dist/emery-assertions.esm.js\");\n/* harmony import */ var emery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! emery */ \"(ssr)/./node_modules/.pnpm/emery@1.4.3/node_modules/emery/dist/emery.esm.js\");\n/* harmony import */ var js_base64__WEBPACK_IMPORTED_MODULE_97__ = __webpack_require__(/*! js-base64 */ \"(ssr)/./node_modules/.pnpm/js-base64@3.7.7/node_modules/js-base64/base64.mjs\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _keystar_ui_text_field__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @keystar/ui/text-field */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/text-field/dist/keystar-ui-text-field.esm.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/.pnpm/next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _keystar_ui_field__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @keystar/ui/field */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/field/dist/keystar-ui-field.esm.js\");\n/* harmony import */ var _keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @keystar/ui/layout */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/layout/dist/keystar-ui-layout.esm.js\");\n/* harmony import */ var _keystar_ui_split_view__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @keystar/ui/split-view */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/split-view/dist/keystar-ui-split-view.esm.js\");\n/* harmony import */ var _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @keystar/ui/style */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/style/dist/keystar-ui-style.esm.js\");\n/* harmony import */ var _keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @keystar/ui/typography */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/typography/dist/keystar-ui-typography.esm.js\");\n/* harmony import */ var _keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @keystar/ui/button */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/button/dist/keystar-ui-button.esm.js\");\n/* harmony import */ var _keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @keystar/ui/dialog */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/dialog/dist/keystar-ui-dialog.esm.js\");\n/* harmony import */ var _keystar_ui_drag_and_drop__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @keystar/ui/drag-and-drop */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/drag-and-drop/dist/keystar-ui-drag-and-drop.esm.js\");\n/* harmony import */ var _keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @keystar/ui/icon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/dist/keystar-ui-icon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_trash2Icon__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @keystar/ui/icon/icons/trash2Icon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/trash2Icon/dist/keystar-ui-icon-icons-trash2Icon.esm.js\");\n/* harmony import */ var _keystar_ui_list_view__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @keystar/ui/list-view */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/list-view/dist/keystar-ui-list-view.esm.js\");\n/* harmony import */ var _keystar_ui_slots__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @keystar/ui/slots */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/slots/dist/keystar-ui-slots.esm.js\");\n/* harmony import */ var _keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @keystar/ui/tooltip */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/tooltip/dist/keystar-ui-tooltip.esm.js\");\n/* harmony import */ var _react_aria_i18n__WEBPACK_IMPORTED_MODULE_102__ = __webpack_require__(/*! @react-aria/i18n */ \"(ssr)/./node_modules/.pnpm/@react-aria+i18n@3.10.2_react@18.2.0/node_modules/@react-aria/i18n/dist/real-module.mjs\");\n/* harmony import */ var slate_react__WEBPACK_IMPORTED_MODULE_103__ = __webpack_require__(/*! slate-react */ \"(ssr)/./node_modules/.pnpm/slate-react@0.91.11_react-dom@18.2.0_react@18.2.0_slate@0.91.4/node_modules/slate-react/dist/index.es.js\");\n/* harmony import */ var is_hotkey__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! is-hotkey */ \"(ssr)/./node_modules/.pnpm/is-hotkey@0.2.0/node_modules/is-hotkey/lib/index.js\");\n/* harmony import */ var _react_aria_utils__WEBPACK_IMPORTED_MODULE_101__ = __webpack_require__(/*! @react-aria/utils */ \"(ssr)/./node_modules/.pnpm/@react-aria+utils@3.23.2_react@18.2.0/node_modules/@react-aria/utils/dist/import.mjs\");\n/* harmony import */ var _keystar_ui_icon_icons_editIcon__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @keystar/ui/icon/icons/editIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/editIcon/dist/keystar-ui-icon-icons-editIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_externalLinkIcon__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @keystar/ui/icon/icons/externalLinkIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/externalLinkIcon/dist/keystar-ui-icon-icons-externalLinkIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_linkIcon__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @keystar/ui/icon/icons/linkIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/linkIcon/dist/keystar-ui-icon-icons-linkIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_unlinkIcon__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @keystar/ui/icon/icons/unlinkIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/unlinkIcon/dist/keystar-ui-icon-icons-unlinkIcon.esm.js\");\n/* harmony import */ var _react_aria_overlays__WEBPACK_IMPORTED_MODULE_106__ = __webpack_require__(/*! @react-aria/overlays */ \"(ssr)/./node_modules/.pnpm/@react-aria+overlays@3.21.1_react-dom@18.2.0_react@18.2.0/node_modules/@react-aria/overlays/dist/import.mjs\");\n/* harmony import */ var _react_stately_overlays__WEBPACK_IMPORTED_MODULE_105__ = __webpack_require__(/*! @react-stately/overlays */ \"(ssr)/./node_modules/.pnpm/@react-stately+overlays@3.6.5_react@18.2.0/node_modules/@react-stately/overlays/dist/import.mjs\");\n/* harmony import */ var _keystar_ui_overlays__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @keystar/ui/overlays */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/overlays/dist/keystar-ui-overlays.esm.js\");\n/* harmony import */ var _braintree_sanitize_url__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @braintree/sanitize-url */ \"(ssr)/./node_modules/.pnpm/@braintree+sanitize-url@6.0.4/node_modules/@braintree/sanitize-url/dist/index.js\");\n/* harmony import */ var _keystar_ui_action_group__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @keystar/ui/action-group */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/action-group/dist/keystar-ui-action-group.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_boldIcon__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @keystar/ui/icon/icons/boldIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/boldIcon/dist/keystar-ui-icon-icons-boldIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_chevronDownIcon__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @keystar/ui/icon/icons/chevronDownIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/chevronDownIcon/dist/keystar-ui-icon-icons-chevronDownIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_codeIcon__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @keystar/ui/icon/icons/codeIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/codeIcon/dist/keystar-ui-icon-icons-codeIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_italicIcon__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @keystar/ui/icon/icons/italicIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/italicIcon/dist/keystar-ui-icon-icons-italicIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_maximizeIcon__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @keystar/ui/icon/icons/maximizeIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/maximizeIcon/dist/keystar-ui-icon-icons-maximizeIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_minimizeIcon__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! @keystar/ui/icon/icons/minimizeIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/minimizeIcon/dist/keystar-ui-icon-icons-minimizeIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_plusIcon__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! @keystar/ui/icon/icons/plusIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/plusIcon/dist/keystar-ui-icon-icons-plusIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_removeFormattingIcon__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! @keystar/ui/icon/icons/removeFormattingIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/removeFormattingIcon/dist/keystar-ui-icon-icons-removeFormattingIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_strikethroughIcon__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! @keystar/ui/icon/icons/strikethroughIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/strikethroughIcon/dist/keystar-ui-icon-icons-strikethroughIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_subscriptIcon__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! @keystar/ui/icon/icons/subscriptIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/subscriptIcon/dist/keystar-ui-icon-icons-subscriptIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_superscriptIcon__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! @keystar/ui/icon/icons/superscriptIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/superscriptIcon/dist/keystar-ui-icon-icons-superscriptIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_typeIcon__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! @keystar/ui/icon/icons/typeIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/typeIcon/dist/keystar-ui-icon-icons-typeIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_underlineIcon__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! @keystar/ui/icon/icons/underlineIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/underlineIcon/dist/keystar-ui-icon-icons-underlineIcon.esm.js\");\n/* harmony import */ var _keystar_ui_menu__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! @keystar/ui/menu */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/menu/dist/keystar-ui-menu.esm.js\");\n/* harmony import */ var _keystar_ui_picker__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! @keystar/ui/picker */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/picker/dist/keystar-ui-picker.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_alignLeftIcon__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! @keystar/ui/icon/icons/alignLeftIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/alignLeftIcon/dist/keystar-ui-icon-icons-alignLeftIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_alignRightIcon__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! @keystar/ui/icon/icons/alignRightIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/alignRightIcon/dist/keystar-ui-icon-icons-alignRightIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_alignCenterIcon__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! @keystar/ui/icon/icons/alignCenterIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/alignCenterIcon/dist/keystar-ui-icon-icons-alignCenterIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_quoteIcon__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! @keystar/ui/icon/icons/quoteIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/quoteIcon/dist/keystar-ui-icon-icons-quoteIcon.esm.js\");\n/* harmony import */ var _react_stately_collections__WEBPACK_IMPORTED_MODULE_107__ = __webpack_require__(/*! @react-stately/collections */ \"(ssr)/./node_modules/.pnpm/@react-stately+collections@3.10.5_react@18.2.0/node_modules/@react-stately/collections/dist/import.mjs\");\n/* harmony import */ var match_sorter__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! match-sorter */ \"(ssr)/./node_modules/.pnpm/match-sorter@6.3.4/node_modules/match-sorter/dist/match-sorter.esm.js\");\n/* harmony import */ var _keystar_ui_combobox__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! @keystar/ui/combobox */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/combobox/dist/keystar-ui-combobox.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_trashIcon__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! @keystar/ui/icon/icons/trashIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/trashIcon/dist/keystar-ui-icon-icons-trashIcon.esm.js\");\n/* harmony import */ var _emotion_weak_memoize__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! @emotion/weak-memoize */ \"(ssr)/./node_modules/.pnpm/@emotion+weak-memoize@0.3.1/node_modules/@emotion/weak-memoize/dist/emotion-weak-memoize.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_minusIcon__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! @keystar/ui/icon/icons/minusIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/minusIcon/dist/keystar-ui-icon-icons-minusIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_columnsIcon__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! @keystar/ui/icon/icons/columnsIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/columnsIcon/dist/keystar-ui-icon-icons-columnsIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_listIcon__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! @keystar/ui/icon/icons/listIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/listIcon/dist/keystar-ui-icon-icons-listIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_listOrderedIcon__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! @keystar/ui/icon/icons/listOrderedIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/listOrderedIcon/dist/keystar-ui-icon-icons-listOrderedIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_fileUpIcon__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! @keystar/ui/icon/icons/fileUpIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/fileUpIcon/dist/keystar-ui-icon-icons-fileUpIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_imageIcon__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! @keystar/ui/icon/icons/imageIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/imageIcon/dist/keystar-ui-icon-icons-imageIcon.esm.js\");\n/* harmony import */ var _keystar_ui_checkbox__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! @keystar/ui/checkbox */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/checkbox/dist/keystar-ui-checkbox.esm.js\");\n/* harmony import */ var _keystar_ui_number_field__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! @keystar/ui/number-field */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/number-field/dist/keystar-ui-number-field.esm.js\");\n/* harmony import */ var minimatch__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! minimatch */ \"(ssr)/./node_modules/.pnpm/minimatch@7.4.6/node_modules/minimatch/dist/mjs/index.js\");\n/* harmony import */ var _ts_gql_tag_no_transform__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! @ts-gql/tag/no-transform */ \"(ssr)/./node_modules/.pnpm/@ts-gql+tag@0.7.3_graphql@16.8.1/node_modules/@ts-gql/tag/no-transform/dist/tag.esm.js\");\n/* harmony import */ var urql__WEBPACK_IMPORTED_MODULE_99__ = __webpack_require__(/*! urql */ \"(ssr)/./node_modules/.pnpm/urql@4.0.7_graphql@16.8.1_react@18.2.0/node_modules/urql/dist/urql.es.js\");\n/* harmony import */ var lru_cache__WEBPACK_IMPORTED_MODULE_100__ = __webpack_require__(/*! lru-cache */ \"(ssr)/./node_modules/.pnpm/lru-cache@7.18.3/node_modules/lru-cache/index.mjs\");\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! cookie */ \"(ssr)/./node_modules/.pnpm/cookie@0.5.0/node_modules/cookie/index.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_98__ = __webpack_require__(/*! zod */ \"(ssr)/./node_modules/.pnpm/zod@3.22.5/node_modules/zod/lib/index.mjs\");\n/* harmony import */ var _sindresorhus_slugify__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! @sindresorhus/slugify */ \"(ssr)/./node_modules/.pnpm/@sindresorhus+slugify@1.1.2/node_modules/@sindresorhus/slugify/index.js\");\n/* harmony import */ var _sindresorhus_slugify__WEBPACK_IMPORTED_MODULE_61___default = /*#__PURE__*/__webpack_require__.n(_sindresorhus_slugify__WEBPACK_IMPORTED_MODULE_61__);\n/* harmony import */ var _keystar_ui_link__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! @keystar/ui/link */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/link/dist/keystar-ui-link.esm.js\");\n/* harmony import */ var _keystar_ui_progress__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(/*! @keystar/ui/progress */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/progress/dist/keystar-ui-progress.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_link2Icon__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(/*! @keystar/ui/icon/icons/link2Icon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/link2Icon/dist/keystar-ui-icon-icons-link2Icon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_link2OffIcon__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(/*! @keystar/ui/icon/icons/link2OffIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/link2OffIcon/dist/keystar-ui-icon-icons-link2OffIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_pencilIcon__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(/*! @keystar/ui/icon/icons/pencilIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/pencilIcon/dist/keystar-ui-icon-icons-pencilIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_undo2Icon__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(/*! @keystar/ui/icon/icons/undo2Icon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/undo2Icon/dist/keystar-ui-icon-icons-undo2Icon.esm.js\");\n/* harmony import */ var _keystar_ui_utils__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(/*! @keystar/ui/utils */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/utils/dist/keystar-ui-utils.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_sheetIcon__WEBPACK_IMPORTED_MODULE_69__ = __webpack_require__(/*! @keystar/ui/icon/icons/sheetIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/sheetIcon/dist/keystar-ui-icon-icons-sheetIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_tableIcon__WEBPACK_IMPORTED_MODULE_70__ = __webpack_require__(/*! @keystar/ui/icon/icons/tableIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/tableIcon/dist/keystar-ui-icon-icons-tableIcon.esm.js\");\n/* harmony import */ var scroll_into_view_if_needed__WEBPACK_IMPORTED_MODULE_110__ = __webpack_require__(/*! scroll-into-view-if-needed */ \"(ssr)/./node_modules/.pnpm/scroll-into-view-if-needed@3.1.0/node_modules/scroll-into-view-if-needed/dist/index.js\");\n/* harmony import */ var _react_stately_list__WEBPACK_IMPORTED_MODULE_109__ = __webpack_require__(/*! @react-stately/list */ \"(ssr)/./node_modules/.pnpm/@react-stately+list@3.10.3_react@18.2.0/node_modules/@react-stately/list/dist/import.mjs\");\n/* harmony import */ var _keystar_ui_listbox__WEBPACK_IMPORTED_MODULE_71__ = __webpack_require__(/*! @keystar/ui/listbox */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/listbox/dist/keystar-ui-listbox.esm.js\");\n/* harmony import */ var slate_history__WEBPACK_IMPORTED_MODULE_111__ = __webpack_require__(/*! slate-history */ \"(ssr)/./node_modules/.pnpm/slate-history@0.86.0_slate@0.91.4/node_modules/slate-history/dist/index.es.js\");\n/* harmony import */ var mdast_util_from_markdown__WEBPACK_IMPORTED_MODULE_72__ = __webpack_require__(/*! mdast-util-from-markdown */ \"(ssr)/./node_modules/.pnpm/mdast-util-from-markdown@0.8.5/node_modules/mdast-util-from-markdown/index.js\");\n/* harmony import */ var mdast_util_from_markdown__WEBPACK_IMPORTED_MODULE_72___default = /*#__PURE__*/__webpack_require__.n(mdast_util_from_markdown__WEBPACK_IMPORTED_MODULE_72__);\n/* harmony import */ var mdast_util_gfm_autolink_literal_from_markdown__WEBPACK_IMPORTED_MODULE_73__ = __webpack_require__(/*! mdast-util-gfm-autolink-literal/from-markdown */ \"(ssr)/./node_modules/.pnpm/mdast-util-gfm-autolink-literal@0.1.3/node_modules/mdast-util-gfm-autolink-literal/from-markdown.js\");\n/* harmony import */ var micromark_extension_gfm_autolink_literal__WEBPACK_IMPORTED_MODULE_74__ = __webpack_require__(/*! micromark-extension-gfm-autolink-literal */ \"(ssr)/./node_modules/.pnpm/micromark-extension-gfm-autolink-literal@0.5.7/node_modules/micromark-extension-gfm-autolink-literal/index.js\");\n/* harmony import */ var mdast_util_gfm_strikethrough_from_markdown__WEBPACK_IMPORTED_MODULE_75__ = __webpack_require__(/*! mdast-util-gfm-strikethrough/from-markdown */ \"(ssr)/./node_modules/.pnpm/mdast-util-gfm-strikethrough@0.2.3/node_modules/mdast-util-gfm-strikethrough/from-markdown.js\");\n/* harmony import */ var micromark_extension_gfm_strikethrough__WEBPACK_IMPORTED_MODULE_76__ = __webpack_require__(/*! micromark-extension-gfm-strikethrough */ \"(ssr)/./node_modules/.pnpm/micromark-extension-gfm-strikethrough@0.6.5/node_modules/micromark-extension-gfm-strikethrough/index.js\");\n/* harmony import */ var micromark_extension_gfm_strikethrough__WEBPACK_IMPORTED_MODULE_76___default = /*#__PURE__*/__webpack_require__.n(micromark_extension_gfm_strikethrough__WEBPACK_IMPORTED_MODULE_76__);\n/* harmony import */ var _keystar_ui_icon_icons_panelLeftOpenIcon__WEBPACK_IMPORTED_MODULE_77__ = __webpack_require__(/*! @keystar/ui/icon/icons/panelLeftOpenIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/panelLeftOpenIcon/dist/keystar-ui-icon-icons-panelLeftOpenIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_panelLeftCloseIcon__WEBPACK_IMPORTED_MODULE_78__ = __webpack_require__(/*! @keystar/ui/icon/icons/panelLeftCloseIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/panelLeftCloseIcon/dist/keystar-ui-icon-icons-panelLeftCloseIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_panelRightOpenIcon__WEBPACK_IMPORTED_MODULE_79__ = __webpack_require__(/*! @keystar/ui/icon/icons/panelRightOpenIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/panelRightOpenIcon/dist/keystar-ui-icon-icons-panelRightOpenIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_panelRightCloseIcon__WEBPACK_IMPORTED_MODULE_80__ = __webpack_require__(/*! @keystar/ui/icon/icons/panelRightCloseIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/panelRightCloseIcon/dist/keystar-ui-icon-icons-panelRightCloseIcon.esm.js\");\n/* harmony import */ var _keystar_ui_badge__WEBPACK_IMPORTED_MODULE_81__ = __webpack_require__(/*! @keystar/ui/badge */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/badge/dist/keystar-ui-badge.esm.js\");\n/* harmony import */ var _keystar_ui_nav_list__WEBPACK_IMPORTED_MODULE_82__ = __webpack_require__(/*! @keystar/ui/nav-list */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/nav-list/dist/keystar-ui-nav-list.esm.js\");\n/* harmony import */ var _keystar_ui_status_light__WEBPACK_IMPORTED_MODULE_83__ = __webpack_require__(/*! @keystar/ui/status-light */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/status-light/dist/keystar-ui-status-light.esm.js\");\n/* harmony import */ var _keystar_ui_core__WEBPACK_IMPORTED_MODULE_84__ = __webpack_require__(/*! @keystar/ui/core */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/core/dist/keystar-ui-core.esm.js\");\n/* harmony import */ var _keystar_ui_avatar__WEBPACK_IMPORTED_MODULE_85__ = __webpack_require__(/*! @keystar/ui/avatar */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/avatar/dist/keystar-ui-avatar.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_logOutIcon__WEBPACK_IMPORTED_MODULE_86__ = __webpack_require__(/*! @keystar/ui/icon/icons/logOutIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/logOutIcon/dist/keystar-ui-icon-icons-logOutIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_gitPullRequestIcon__WEBPACK_IMPORTED_MODULE_87__ = __webpack_require__(/*! @keystar/ui/icon/icons/gitPullRequestIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/gitPullRequestIcon/dist/keystar-ui-icon-icons-gitPullRequestIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_gitBranchPlusIcon__WEBPACK_IMPORTED_MODULE_88__ = __webpack_require__(/*! @keystar/ui/icon/icons/gitBranchPlusIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/gitBranchPlusIcon/dist/keystar-ui-icon-icons-gitBranchPlusIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_githubIcon__WEBPACK_IMPORTED_MODULE_89__ = __webpack_require__(/*! @keystar/ui/icon/icons/githubIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/githubIcon/dist/keystar-ui-icon-icons-githubIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_gitForkIcon__WEBPACK_IMPORTED_MODULE_90__ = __webpack_require__(/*! @keystar/ui/icon/icons/gitForkIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/gitForkIcon/dist/keystar-ui-icon-icons-gitForkIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_monitorIcon__WEBPACK_IMPORTED_MODULE_91__ = __webpack_require__(/*! @keystar/ui/icon/icons/monitorIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/monitorIcon/dist/keystar-ui-icon-icons-monitorIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_moonIcon__WEBPACK_IMPORTED_MODULE_92__ = __webpack_require__(/*! @keystar/ui/icon/icons/moonIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/moonIcon/dist/keystar-ui-icon-icons-moonIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_sunIcon__WEBPACK_IMPORTED_MODULE_93__ = __webpack_require__(/*! @keystar/ui/icon/icons/sunIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/sunIcon/dist/keystar-ui-icon-icons-sunIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_userIcon__WEBPACK_IMPORTED_MODULE_94__ = __webpack_require__(/*! @keystar/ui/icon/icons/userIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/userIcon/dist/keystar-ui-icon-icons-userIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_gitBranchIcon__WEBPACK_IMPORTED_MODULE_95__ = __webpack_require__(/*! @keystar/ui/icon/icons/gitBranchIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/gitBranchIcon/dist/keystar-ui-icon-icons-gitBranchIcon.esm.js\");\n/* harmony import */ var _keystar_ui_radio__WEBPACK_IMPORTED_MODULE_96__ = __webpack_require__(/*! @keystar/ui/radio */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/radio/dist/keystar-ui-radio.esm.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar l10nMessages = {\n\t\"fr-FR\": {\n\t\tbasedOn: \"Basé sur\",\n\t\tadd: \"Ajouter\",\n\t\tbranchName: \"Nom de la filiale\",\n\t\tbranches: \"Branches\",\n\t\tcancel: \"Annuler\",\n\t\tclear: \"Effacer\",\n\t\tcollections: \"Collections\",\n\t\tcollection: \"Collection\",\n\t\tcreate: \"Créer\",\n\t\tcreatePullRequest: \"Créer une demande d'extraction\",\n\t\tdashboard: \"Tableau de bord\",\n\t\tcurrentBranch: \"Succursale actuelle\",\n\t\tdefaultBranch: \"Branche par défaut\",\n\t\tdeleteBranch: \"Supprimer la branche\",\n\t\t\"delete\": \"Supprimer\",\n\t\tedit: \"Modifier\",\n\t\tloading: \"Chargement en cours\",\n\t\tnewBranch: \"Nouvelle branche\",\n\t\totherBranches: \"Autres succursales\",\n\t\tsave: \"Sauvegarder\",\n\t\tpullRequests: \"Demandes d'extraction\",\n\t\tsearch: \"Rechercher\",\n\t\tsingleton: \"Singleton\",\n\t\tsingletons: \"Célibataires\",\n\t\ttheCurrentlyCheckedOutBranch: \"La branche actuellement extraite. Choisissez cette option si vous devez vous appuyer sur le travail existant de la branche actuelle.\",\n\t\tviewPullRequests: \"Afficher les demandes d'extraction\",\n\t\ttheDefaultBranchInYourRepository: \"La branche par défaut de votre référentiel. Choisissez ceci pour commencer quelque chose de nouveau qui ne dépend pas de votre branche actuelle.\"\n\t},\n\t\"he-IL\": {\n\t\tadd: \"לְהוֹסִיף\",\n\t\tbasedOn: \"מבוסס על\",\n\t\tbranchName: \"שם הסניף\",\n\t\tbranches: \"ענפים\",\n\t\tcancel: \"לְבַטֵל\",\n\t\tclear: \"נקי\",\n\t\tcollection: \"אוסף\",\n\t\tcollections: \"אוספים\",\n\t\tcreate: \"לִיצוֹר\",\n\t\tcreatePullRequest: \"צור בקשת משיכה\",\n\t\tcurrentBranch: \"סניף נוכחי\",\n\t\tdashboard: \"לוּחַ מַחווָנִים\",\n\t\tdefaultBranch: \"סניף ברירת מחדל\",\n\t\t\"delete\": \"לִמְחוֹק\",\n\t\tdeleteBranch: \"מחק סניף\",\n\t\tedit: \"לַעֲרוֹך\",\n\t\tloading: \"טוען\",\n\t\tnewBranch: \"סניף חדש\",\n\t\totherBranches: \"סניפים אחרים\",\n\t\tsave: \"להציל\",\n\t\tpullRequests: \"משוך בקשות\",\n\t\tsearch: \"חפש\",\n\t\tsingleton: \"קְלָף בּוֹדֵד\",\n\t\tsingletons: \"רווקים\",\n\t\ttheCurrentlyCheckedOutBranch: \"הסניף שנקבע כעת. בחר באפשרות זו אם אתה צריך לבנות על עבודה קיימת מהסניף הנוכחי.\",\n\t\ttheDefaultBranchInYourRepository: \"סניף ברירת המחדל במאגר שלך. בחר באפשרות זו כדי להתחיל משהו חדש שאינו תלוי בסניף הנוכחי שלך.\",\n\t\tviewPullRequests: \"הצג בקשות משיכה\"\n\t},\n\t\"hr-HR\": {\n\t\tadd: \"Dodati\",\n\t\tbasedOn: \"Na temelju\",\n\t\tbranches: \"Podružnice\",\n\t\tbranchName: \"Naziv podružnice\",\n\t\tcancel: \"Otkazati\",\n\t\tcollection: \"Kolekcija\",\n\t\tclear: \"Izbriši\",\n\t\tcollections: \"Zbirke\",\n\t\tcreate: \"Stvoriti\",\n\t\tcreatePullRequest: \"Kreirajte zahtjev za povlačenjem\",\n\t\tcurrentBranch: \"Trenutna grana\",\n\t\tdefaultBranch: \"Zadana grana\",\n\t\tdashboard: \"Nadzorna ploča\",\n\t\t\"delete\": \"Izbrisati\",\n\t\tedit: \"Uredi\",\n\t\tdeleteBranch: \"Izbriši granu\",\n\t\tloading: \"Učitavam\",\n\t\tnewBranch: \"Nova grana\",\n\t\totherBranches: \"Ostale grane\",\n\t\tpullRequests: \"Zahtjevi za povlačenjem\",\n\t\tsearch: \"Traži\",\n\t\tsave: \"Uštedjeti\",\n\t\tsingleton: \"samac\",\n\t\tsingletons: \"Samci\",\n\t\ttheCurrentlyCheckedOutBranch: \"Trenutno odjavljena poslovnica. Odaberite ovo ako trebate graditi na postojećem radu iz trenutne grane.\",\n\t\ttheDefaultBranchInYourRepository: \"Zadana grana u vašem spremištu. Odaberite ovo da započnete nešto novo što ne ovisi o vašoj trenutnoj grani.\",\n\t\tviewPullRequests: \"Pregledajte zahtjeve za povlačenjem\"\n\t},\n\t\"hu-HU\": {\n\t\tadd: \"Hozzáadás\",\n\t\tbasedOn: \"Alapján\",\n\t\tbranches: \"Ágak\",\n\t\tbranchName: \"Fiók neve\",\n\t\tcancel: \"Megszünteti\",\n\t\tclear: \"Törlés\",\n\t\tcollection: \"Gyűjtemény\",\n\t\tcollections: \"Gyűjtemények\",\n\t\tcreate: \"Teremt\",\n\t\tcreatePullRequest: \"Lehívási kérelem létrehozása\",\n\t\tcurrentBranch: \"Jelenlegi ág\",\n\t\tdashboard: \"Irányítópult\",\n\t\tdefaultBranch: \"Alapértelmezett ág\",\n\t\t\"delete\": \"Töröl\",\n\t\tedit: \"Szerkesztés\",\n\t\tdeleteBranch: \"Elágazás törlése\",\n\t\tloading: \"Betöltés folyamatban\",\n\t\totherBranches: \"Egyéb ágak\",\n\t\tnewBranch: \"Új ág\",\n\t\tpullRequests: \"Lehívási kérések\",\n\t\tsave: \"Megment\",\n\t\tsingleton: \"szingli\",\n\t\tsearch: \"Keresés\",\n\t\ttheCurrentlyCheckedOutBranch: \"A jelenleg kivett fiók. Válassza ezt, ha az aktuális ág meglévő munkájára kell építenie.\",\n\t\tsingletons: \"Singletons\",\n\t\ttheDefaultBranchInYourRepository: \"Az alapértelmezett ág az adattárban. Válassza ezt, ha valami újat szeretne indítani, amely nem függ az aktuális ágtól.\",\n\t\tviewPullRequests: \"Lehívási kérelmek megtekintése\"\n\t},\n\t\"it-IT\": {\n\t\tbasedOn: \"Basato su\",\n\t\tadd: \"Aggiungere\",\n\t\tbranchName: \"Nome ramo\",\n\t\tbranches: \"Rami\",\n\t\tcancel: \"Annulla\",\n\t\tclear: \"Cancella\",\n\t\tcollection: \"Collezione\",\n\t\tcollections: \"Collezioni\",\n\t\tcreatePullRequest: \"Crea richiesta pull\",\n\t\tcreate: \"Creare\",\n\t\tcurrentBranch: \"Ramo attuale\",\n\t\tdefaultBranch: \"Ramo predefinito\",\n\t\tdashboard: \"Pannello di controllo\",\n\t\t\"delete\": \"Eliminare\",\n\t\tdeleteBranch: \"Elimina ramo\",\n\t\tedit: \"Modificare\",\n\t\tloading: \"Caricamento in corso\",\n\t\tnewBranch: \"Nuova filiale\",\n\t\totherBranches: \"Altri rami\",\n\t\tpullRequests: \"Richieste pull\",\n\t\tsave: \"Salva\",\n\t\tsearch: \"Cerca\",\n\t\tsingleton: \"Singleton\",\n\t\tsingletons: \"Singletons\",\n\t\ttheCurrentlyCheckedOutBranch: \"La filiale attualmente verificata. Scegli questa opzione se devi basarti su un lavoro esistente dal ramo corrente.\",\n\t\ttheDefaultBranchInYourRepository: \"Il ramo predefinito nel tuo repository. Scegli questa opzione per iniziare qualcosa di nuovo che non dipenda dal tuo ramo attuale.\",\n\t\tviewPullRequests: \"Visualizza le richieste pull\"\n\t},\n\t\"ja-JP\": {\n\t\tadd: \"追加\",\n\t\tbasedOn: \"に基づく\",\n\t\tbranchName: \"支店名\",\n\t\tcancel: \"キャンセル\",\n\t\tbranches: \"支店\",\n\t\tclear: \"クリア\",\n\t\tcollection: \"コレクション\",\n\t\tcollections: \"コレクション\",\n\t\tcreate: \"作成\",\n\t\tcreatePullRequest: \"プルリクエストを作成\",\n\t\tcurrentBranch: \"現在のブランチ\",\n\t\tdashboard: \"ダッシュボード\",\n\t\t\"delete\": \"消去\",\n\t\tdefaultBranch: \"デフォルトのブランチ\",\n\t\tedit: \"編集\",\n\t\tdeleteBranch: \"ブランチを削除\",\n\t\tloading: \"読み込み中\",\n\t\totherBranches: \"その他の支店\",\n\t\tnewBranch: \"新しい支店\",\n\t\tpullRequests: \"プルリクエスト\",\n\t\tsave: \"保存\",\n\t\tsearch: \"検索\",\n\t\tsingleton: \"シングルトン\",\n\t\tsingletons: \"シングルトン\",\n\t\ttheCurrentlyCheckedOutBranch: \"現在チェックアウトされているブランチ。 現在のブランチの既存の作業に基づいて構築する必要がある場合は、これを選択してください。\",\n\t\ttheDefaultBranchInYourRepository: \"リポジトリのデフォルト ブランチ。 これを選択して、現在のブランチに依存しない新しい何かを開始します。\",\n\t\tviewPullRequests: \"プル リクエストを表示\"\n\t},\n\t\"ko-KR\": {\n\t\tadd: \"추가하다\",\n\t\tbasedOn: \"기반으로\",\n\t\tbranchName: \"지점명\",\n\t\tbranches: \"가지\",\n\t\tcancel: \"취소\",\n\t\tclear: \"지우기\",\n\t\tcollections: \"컬렉션\",\n\t\tcollection: \"수집\",\n\t\tcreate: \"만들다\",\n\t\tcreatePullRequest: \"풀 요청 생성\",\n\t\tcurrentBranch: \"현재 지점\",\n\t\tdashboard: \"계기반\",\n\t\t\"delete\": \"삭제\",\n\t\tdefaultBranch: \"기본 분기\",\n\t\tdeleteBranch: \"분기 삭제\",\n\t\tedit: \"편집하다\",\n\t\tloading: \"로드 중\",\n\t\tnewBranch: \"새 지점\",\n\t\totherBranches: \"기타 지점\",\n\t\tpullRequests: \"풀 리퀘스트\",\n\t\tsearch: \"검색\",\n\t\tsave: \"구하다\",\n\t\tsingleton: \"하나씩 일어나는 것\",\n\t\tsingletons: \"싱글톤\",\n\t\ttheCurrentlyCheckedOutBranch: \"현재 체크아웃된 브랜치. 현재 브랜치의 기존 작업을 기반으로 빌드해야 하는 경우 이 옵션을 선택하세요.\",\n\t\ttheDefaultBranchInYourRepository: \"리포지토리의 기본 브랜치입니다. 현재 분기에 의존하지 않는 새로운 것을 시작하려면 이것을 선택하십시오.\",\n\t\tviewPullRequests: \"풀 요청 보기\"\n\t},\n\t\"el-GR\": {\n\t\tadd: \"Προσθήκη\",\n\t\tbasedOn: \"Βασισμένο στο\",\n\t\tbranchName: \"Όνομα υποκαταστήματος\",\n\t\tbranches: \"Κλαδια δεντρου\",\n\t\tcancel: \"Ματαίωση\",\n\t\tclear: \"Καθαρισμός\",\n\t\tcollection: \"Συλλογή\",\n\t\tcollections: \"Συλλογές\",\n\t\tcreate: \"Δημιουργώ\",\n\t\tcreatePullRequest: \"Δημιουργία αιτήματος έλξης\",\n\t\tcurrentBranch: \"Τρέχον υποκατάστημα\",\n\t\tdashboard: \"Ταμπλό\",\n\t\tdefaultBranch: \"Προεπιλεγμένος κλάδος\",\n\t\t\"delete\": \"Διαγράφω\",\n\t\tdeleteBranch: \"Διαγραφή υποκαταστήματος\",\n\t\tedit: \"Επεξεργασία\",\n\t\tloading: \"Φόρτωση\",\n\t\tnewBranch: \"Νέο υποκατάστημα\",\n\t\totherBranches: \"Άλλα υποκαταστήματα\",\n\t\tpullRequests: \"Τραβήξτε αιτήματα\",\n\t\tsave: \"Αποθηκεύσετε\",\n\t\tsearch: \"Αναζήτηση\",\n\t\tsingleton: \"Μοναδικό χαρτί\",\n\t\tsingletons: \"Singletons\",\n\t\ttheCurrentlyCheckedOutBranch: \"Το υποκατάστημα που ελέγχεται αυτήν τη στιγμή. Επιλέξτε αυτό εάν χρειάζεται να βασιστείτε σε υπάρχουσες εργασίες από τον τρέχοντα κλάδο.\",\n\t\ttheDefaultBranchInYourRepository: \"Ο προεπιλεγμένος κλάδος στο αποθετήριο σας. Επιλέξτε αυτό για να ξεκινήσετε κάτι νέο που δεν εξαρτάται από το τρέχον υποκατάστημά σας.\",\n\t\tviewPullRequests: \"Προβολή αιτημάτων έλξης\"\n\t},\n\t\"ar-AE\": {\n\t\tadd: \"يضيف\",\n\t\tbranchName: \"اسم الفرع\",\n\t\tbranches: \"الفروع\",\n\t\tbasedOn: \"مرتكز على\",\n\t\tcancel: \"يلغي\",\n\t\tclear: \"مسح\",\n\t\tcollection: \"مجموعة\",\n\t\tcollections: \"المجموعات\",\n\t\tcreate: \"يخلق\",\n\t\tcreatePullRequest: \"إنشاء طلب سحب\",\n\t\tcurrentBranch: \"الفرع الحالي\",\n\t\tdashboard: \"لوحة القيادة\",\n\t\tdefaultBranch: \"الفرع الافتراضي\",\n\t\t\"delete\": \"يمسح\",\n\t\tdeleteBranch: \"حذف الفرع\",\n\t\tedit: \"يحرر\",\n\t\tloading: \"جارٍ التحميل\",\n\t\tnewBranch: \"فرع جديد\",\n\t\totherBranches: \"الفروع الأخرى\",\n\t\tpullRequests: \"طلبات السحب\",\n\t\tsave: \"يحفظ\",\n\t\tsearch: \"بحث\",\n\t\tsingleton: \"سينجلتون\",\n\t\ttheCurrentlyCheckedOutBranch: \"الفرع المعاد حاليا. اختر هذا إذا كنت بحاجة إلى البناء على العمل الحالي من الفرع الحالي.\",\n\t\tsingletons: \"الفردي\",\n\t\ttheDefaultBranchInYourRepository: \"الفرع الافتراضي في المستودع الخاص بك. اختر هذا لبدء شيء جديد لا يعتمد على فرعك الحالي.\",\n\t\tviewPullRequests: \"عرض طلبات السحب\"\n\t},\n\t\"cs-CZ\": {\n\t\tadd: \"Přidat\",\n\t\tbasedOn: \"Na základě\",\n\t\tbranchName: \"Jméno pobočky\",\n\t\tbranches: \"Větve\",\n\t\tcancel: \"zrušení\",\n\t\tclear: \"Vymazat\",\n\t\tcollection: \"Sbírka\",\n\t\tcollections: \"Sbírky\",\n\t\tcreate: \"Vytvořit\",\n\t\tcreatePullRequest: \"Vytvořit požadavek na stažení\",\n\t\tcurrentBranch: \"Současná pobočka\",\n\t\tdefaultBranch: \"Výchozí větev\",\n\t\tdashboard: \"Přístrojová deska\",\n\t\t\"delete\": \"Vymazat\",\n\t\tdeleteBranch: \"Smazat větev\",\n\t\tedit: \"Upravit\",\n\t\tloading: \"Načítání\",\n\t\tnewBranch: \"Nová pobočka\",\n\t\totherBranches: \"Ostatní pobočky\",\n\t\tpullRequests: \"Vytáhněte požadavky\",\n\t\tsave: \"Uložit\",\n\t\tsearch: \"Hledat\",\n\t\tsingleton: \"Jedináček\",\n\t\tsingletons: \"Singletons\",\n\t\ttheCurrentlyCheckedOutBranch: \"Aktuálně odhlášená pobočka. Tuto možnost vyberte, pokud potřebujete navázat na stávající práci z aktuální pobočky.\",\n\t\tviewPullRequests: \"Zobrazit žádosti o stažení\",\n\t\ttheDefaultBranchInYourRepository: \"Výchozí větev ve vašem úložišti. Zvolte tuto možnost, chcete-li začít s něčím novým, co není závislé na vaší aktuální větvi.\"\n\t},\n\t\"bg-BG\": {\n\t\tadd: \"Добавете\",\n\t\tbasedOn: \"Базиран на\",\n\t\tbranchName: \"Име на клон\",\n\t\tbranches: \"Клонове\",\n\t\tcancel: \"Отказ\",\n\t\tclear: \"Изчисти\",\n\t\tcollection: \"колекция\",\n\t\tcollections: \"Колекции\",\n\t\tcreate: \"Създавайте\",\n\t\tcreatePullRequest: \"Създайте заявка за изтегляне\",\n\t\tcurrentBranch: \"Текущ клон\",\n\t\tdashboard: \"Табло\",\n\t\t\"delete\": \"Изтрий\",\n\t\tdefaultBranch: \"Клон по подразбиране\",\n\t\tdeleteBranch: \"Изтриване на клон\",\n\t\tedit: \"редактиране\",\n\t\tloading: \"Зареждане\",\n\t\totherBranches: \"Други клонове\",\n\t\tpullRequests: \"Заявки за изтегляне\",\n\t\tnewBranch: \"Нов клон\",\n\t\tsave: \"Запазване\",\n\t\tsearch: \"Търсене\",\n\t\tsingleton: \"Сингълтън\",\n\t\tsingletons: \"Единични\",\n\t\ttheCurrentlyCheckedOutBranch: \"Текущо провереният клон. Изберете това, ако трябва да надграждате върху съществуваща работа от текущия клон.\",\n\t\ttheDefaultBranchInYourRepository: \"Клонът по подразбиране във вашето хранилище. Изберете това, за да започнете с нещо ново, което не зависи от текущия ви клон.\",\n\t\tviewPullRequests: \"Преглед на заявките за изтегляне\"\n\t},\n\t\"da-DK\": {\n\t\tdefaultBranch: \"Standard gren\",\n\t\t\"delete\": \"Slet\",\n\t\tdeleteBranch: \"Slet filial\",\n\t\tedit: \"Redigere\",\n\t\tloading: \"Indlæser\",\n\t\tnewBranch: \"Ny filial\",\n\t\totherBranches: \"Andre grene\",\n\t\tpullRequests: \"Træk anmodninger\",\n\t\tsave: \"Gemme\",\n\t\tsearch: \"Søg\",\n\t\tsingleton: \"Singleton\",\n\t\tsingletons: \"Singletoner\",\n\t\ttheCurrentlyCheckedOutBranch: \"Den aktuelt tjekkede filial. Vælg dette, hvis du skal bygge videre på eksisterende arbejde fra den nuværende filial.\",\n\t\ttheDefaultBranchInYourRepository: \"Standardgrenen i dit lager. Vælg dette for at starte på noget nyt, der ikke er afhængigt af din nuværende filial.\",\n\t\tviewPullRequests: \"Se pull-anmodninger\",\n\t\tadd: \"Tilføje\",\n\t\tbasedOn: \"Baseret på\",\n\t\tbranchName: \"Afdelingsnavn\",\n\t\tbranches: \"Grene\",\n\t\tcancel: \"Afbestille\",\n\t\tclear: \"Ryd\",\n\t\tcollection: \"Kollektion\",\n\t\tcollections: \"Samlinger\",\n\t\tcreatePullRequest: \"Opret pull-anmodning\",\n\t\tcreate: \"skab\",\n\t\tcurrentBranch: \"Nuværende filial\",\n\t\tdashboard: \"Dashboard\"\n\t},\n\t\"de-DE\": {\n\t\tadd: \"Hinzufügen\",\n\t\tbasedOn: \"Bezogen auf\",\n\t\tbranchName: \"Zweigname\",\n\t\tbranches: \"Geäst\",\n\t\tcancel: \"Stornieren\",\n\t\tclear: \"Löschen\",\n\t\tcollection: \"Sammlung\",\n\t\tcollections: \"Sammlungen\",\n\t\tcreate: \"Erstellen\",\n\t\tcreatePullRequest: \"Pull-Request erstellen\",\n\t\tcurrentBranch: \"Aktueller Zweig\",\n\t\tdashboard: \"Armaturenbrett\",\n\t\tdefaultBranch: \"Standardzweig\",\n\t\t\"delete\": \"Löschen\",\n\t\tdeleteBranch: \"Zweig löschen\",\n\t\tedit: \"Bearbeiten\",\n\t\tloading: \"Wird geladen\",\n\t\tnewBranch: \"Neue Zweig\",\n\t\totherBranches: \"Andere Filialen\",\n\t\tpullRequests: \"Pull-Requests\",\n\t\tsave: \"Speichern\",\n\t\ttheCurrentlyCheckedOutBranch: \"Der aktuell ausgecheckte Zweig. Wählen Sie diese Option, wenn Sie auf vorhandener Arbeit aus dem aktuellen Zweig aufbauen müssen.\",\n\t\tsingleton: \"Einzelling\",\n\t\tsearch: \"Suchen\",\n\t\ttheDefaultBranchInYourRepository: \"Der Standard-Branch in Ihrem Repository. Wählen Sie dies, um etwas Neues zu starten, das nicht von Ihrem aktuellen Zweig abhängt.\",\n\t\tsingletons: \"Singles\",\n\t\tviewPullRequests: \"Pull-Requests anzeigen\"\n\t},\n\t\"en-US\": {\n\t\tbasedOn: \"Based on\",\n\t\tadd: \"Add\",\n\t\tbranchName: \"Branch name\",\n\t\tbranches: \"Branches\",\n\t\tcancel: \"Cancel\",\n\t\tclear: \"Clear\",\n\t\tcollections: \"Collections\",\n\t\tcollection: \"Collection\",\n\t\tcreate: \"Create\",\n\t\tcreatePullRequest: \"Create pull request\",\n\t\tdefaultBranch: \"Default branch\",\n\t\tdashboard: \"Dashboard\",\n\t\tcurrentBranch: \"Current branch\",\n\t\tdeleteBranch: \"Delete branch\",\n\t\t\"delete\": \"Delete\",\n\t\tloading: \"Loading\",\n\t\tedit: \"Edit\",\n\t\tnewBranch: \"New branch…\",\n\t\totherBranches: \"Other branches\",\n\t\tpullRequests: \"Pull requests\",\n\t\tsave: \"Save\",\n\t\tsearch: \"Search\",\n\t\tsingleton: \"Singleton\",\n\t\tsingletons: \"Singletons\",\n\t\ttheCurrentlyCheckedOutBranch: \"The currently checked out branch. Choose this if you need to build on existing work from the current branch.\",\n\t\ttheDefaultBranchInYourRepository: \"The default branch in your repository. Choose this to start something new that's not dependent on your current branch.\",\n\t\tviewPullRequests: \"View pull requests\"\n\t},\n\t\"es-ES\": {\n\t\tadd: \"Agregar\",\n\t\tbasedOn: \"Residencia en\",\n\t\tbranchName: \"Nombre de la sucursal\",\n\t\tbranches: \"Sucursales\",\n\t\tcancel: \"Cancelar\",\n\t\tclear: \"Borrar\",\n\t\tcreate: \"Crear\",\n\t\tcollection: \"Colección\",\n\t\tcollections: \"Colecciones\",\n\t\tcurrentBranch: \"Rama actual\",\n\t\tdashboard: \"Panel\",\n\t\tcreatePullRequest: \"Crear solicitud de extracción\",\n\t\tdefaultBranch: \"Rama predeterminada\",\n\t\t\"delete\": \"Borrar\",\n\t\tdeleteBranch: \"Eliminar rama\",\n\t\tedit: \"Editar\",\n\t\tloading: \"Cargando\",\n\t\tnewBranch: \"Nueva sucursal\",\n\t\totherBranches: \"Otras sucursales\",\n\t\tpullRequests: \"Solicitudes de extracción\",\n\t\tsingleton: \"Semifallo\",\n\t\tsearch: \"Buscar\",\n\t\tsave: \"Ahorrar\",\n\t\tsingletons: \"Solteros\",\n\t\ttheCurrentlyCheckedOutBranch: \"La sucursal actualmente desprotegida. Elija esto si necesita desarrollar el trabajo existente de la rama actual.\",\n\t\tviewPullRequests: \"Ver solicitudes de extracción\",\n\t\ttheDefaultBranchInYourRepository: \"La rama predeterminada en su repositorio. Elija esto para comenzar algo nuevo que no dependa de su sucursal actual.\"\n\t},\n\t\"et-EE\": {\n\t\tbasedOn: \"Põhineb\",\n\t\tadd: \"Lisama\",\n\t\tbranchName: \"Filiaali nimi\",\n\t\tbranches: \"Filiaalid\",\n\t\tcancel: \"Tühista\",\n\t\tcollections: \"Kollektsioonid\",\n\t\tclear: \"Puhasta\",\n\t\tcollection: \"Kollektsioon\",\n\t\tcreatePullRequest: \"Loo tõmbamistaotlus\",\n\t\tcreate: \"Loo\",\n\t\tcurrentBranch: \"Praegune filiaal\",\n\t\tdashboard: \"Armatuurlaud\",\n\t\tdefaultBranch: \"Vaikeharu\",\n\t\t\"delete\": \"Kustuta\",\n\t\tdeleteBranch: \"Kustuta haru\",\n\t\tedit: \"Muuda\",\n\t\tloading: \"Laadimine\",\n\t\tnewBranch: \"Uus filiaal\",\n\t\totherBranches: \"Muud oksad\",\n\t\tpullRequests: \"Tõmbetaotlused\",\n\t\tsave: \"Salvesta\",\n\t\tsearch: \"Otsi\",\n\t\tsingleton: \"üksikud\",\n\t\tsingletons: \"Üksikud\",\n\t\ttheCurrentlyCheckedOutBranch: \"Praegu välja registreeritud filiaal. Valige see, kui peate kasutama praeguse haru olemasolevaid töid.\",\n\t\tviewPullRequests: \"Vaadake tõmbamistaotlusi\",\n\t\ttheDefaultBranchInYourRepository: \"Vaikeharu teie hoidlas. Valige see, et alustada midagi uut, mis ei sõltu teie praegusest harust.\"\n\t},\n\t\"fi-FI\": {\n\t\tcreatePullRequest: \"Luo vetopyyntö\",\n\t\tcollections: \"Kokoelmat\",\n\t\tcreate: \"Luoda\",\n\t\tdashboard: \"Kojelauta\",\n\t\t\"delete\": \"Poistaa\",\n\t\tdefaultBranch: \"Oletushaara\",\n\t\tdeleteBranch: \"Poista haara\",\n\t\tedit: \"Muokata\",\n\t\tnewBranch: \"Uusi haara\",\n\t\tloading: \"Ladataan\",\n\t\tsave: \"Tallentaa\",\n\t\totherBranches: \"Muut haarat\",\n\t\tpullRequests: \"Vedä pyyntöjä\",\n\t\tsingleton: \"Singleton\",\n\t\tsearch: \"Hae\",\n\t\tsingletons: \"Singletons\",\n\t\ttheCurrentlyCheckedOutBranch: \"Tällä hetkellä uloskirjautunut sivuliike. Valitse tämä, jos haluat rakentaa nykyisen haaran olemassa olevaan työhön.\",\n\t\ttheDefaultBranchInYourRepository: \"Oletushaara arkistossasi. Valitse tämä aloittaaksesi jotain uutta, joka ei ole riippuvainen nykyisestä haarastasi.\",\n\t\tviewPullRequests: \"Näytä vetopyynnöt\",\n\t\tadd: \"Lisätä\",\n\t\tbasedOn: \"Perustuen\",\n\t\tbranchName: \"Sivukonttorin nimi\",\n\t\tbranches: \"Oksat\",\n\t\tclear: \"Kirkas\",\n\t\tcollection: \"Kokoelma\",\n\t\tcancel: \"Tühista\",\n\t\tcurrentBranch: \"Nykyinen haara\"\n\t},\n\t\"lt-LT\": {\n\t\tadd: \"Papildyti\",\n\t\tbasedOn: \"Remiantis\",\n\t\tbranchName: \"Filialo pavadinimas\",\n\t\tbranches: \"Filialai\",\n\t\tcancel: \"Atšaukti\",\n\t\tcollection: \"Kolekcija\",\n\t\tclear: \"Skaidrus\",\n\t\tcollections: \"Kolekcijos\",\n\t\tcreatePullRequest: \"Sukurti ištraukimo užklausą\",\n\t\tcreate: \"Sukurti\",\n\t\tcurrentBranch: \"Dabartinis filialas\",\n\t\tdashboard: \"Prietaisų skydelis\",\n\t\t\"delete\": \"Ištrinti\",\n\t\tdefaultBranch: \"Numatytoji šaka\",\n\t\tdeleteBranch: \"Ištrinti šaką\",\n\t\tedit: \"Redaguoti\",\n\t\tloading: \"Įkeliama\",\n\t\tnewBranch: \"Naujas filialas\",\n\t\totherBranches: \"Kitos šakos\",\n\t\tpullRequests: \"Ištraukti užklausas\",\n\t\tsingleton: \"vienvietis\",\n\t\tsearch: \"Ieškoti\",\n\t\tsingletons: \"Vienišiai\",\n\t\ttheCurrentlyCheckedOutBranch: \"Šiuo metu išregistruotas filialas. Pasirinkite tai, jei reikia remtis esamu darbu iš dabartinės šakos.\",\n\t\ttheDefaultBranchInYourRepository: \"Numatytoji šaka jūsų saugykloje. Pasirinkite tai, kad pradėtumėte ką nors naujo, nepriklausančio nuo dabartinės šakos.\",\n\t\tsave: \"Sutaupyti\",\n\t\tviewPullRequests: \"Peržiūrėkite ištraukimo užklausas\"\n\t},\n\t\"nb-NO\": {\n\t\tadd: \"Legg til\",\n\t\tbasedOn: \"Basert på\",\n\t\tbranchName: \"Filialnavn\",\n\t\tbranches: \"Grener\",\n\t\tcancel: \"Avbryt\",\n\t\tclear: \"Tøm\",\n\t\tcreate: \"Skape\",\n\t\tcollection: \"Samling\",\n\t\tcollections: \"Samlinger\",\n\t\tcreatePullRequest: \"Opprett pull-forespørsel\",\n\t\tdashboard: \"Dashbord\",\n\t\tcurrentBranch: \"Nåværende gren\",\n\t\tdefaultBranch: \"Standard gren\",\n\t\t\"delete\": \"Slett\",\n\t\tedit: \"Redigere\",\n\t\tdeleteBranch: \"Slett filial\",\n\t\tloading: \"Laster inn\",\n\t\tnewBranch: \"Ny gren\",\n\t\totherBranches: \"Andre grener\",\n\t\tpullRequests: \"Trekk forespørsler\",\n\t\tsave: \"Lagre\",\n\t\tsearch: \"Søk\",\n\t\ttheCurrentlyCheckedOutBranch: \"Den utsjekkede grenen. Velg dette hvis du skal bygge på eksisterende arbeid fra gjeldende gren.\",\n\t\tsingleton: \"Singleton\",\n\t\ttheDefaultBranchInYourRepository: \"Standardgrenen i depotet ditt. Velg dette for å starte noe nytt som ikke er avhengig av din nåværende filial.\",\n\t\tviewPullRequests: \"Se pull-forespørsler\",\n\t\tsingletons: \"Singletoner\"\n\t},\n\t\"lv-LV\": {\n\t\tadd: \"Pievienot\",\n\t\tbasedOn: \"Balstoties uz\",\n\t\tbranchName: \"Filiāles nosaukums\",\n\t\tbranches: \"Nozares\",\n\t\tclear: \"Notīrīt\",\n\t\tcancel: \"Atcelt\",\n\t\tcollection: \"Kolekcija\",\n\t\tcreatePullRequest: \"Izveidot izvilkšanas pieprasījumu\",\n\t\tcreate: \"Izveidot\",\n\t\tcurrentBranch: \"Pašreizējā filiāle\",\n\t\tdashboard: \"Mērinstrumentu panelis\",\n\t\tcollections: \"Kolekcijas\",\n\t\tdefaultBranch: \"Noklusējuma filiāle\",\n\t\t\"delete\": \"Dzēst\",\n\t\tdeleteBranch: \"Dzēst filiāli\",\n\t\tedit: \"Rediģēt\",\n\t\tnewBranch: \"Jauna filiāle\",\n\t\tloading: \"Notiek ielāde\",\n\t\totherBranches: \"Citas filiāles\",\n\t\tsave: \"Saglabāt\",\n\t\tsearch: \"Meklēt\",\n\t\tsingleton: \"Singleton\",\n\t\tsingletons: \"Vientuļi\",\n\t\tpullRequests: \"Izvilkšanas pieprasījumi\",\n\t\ttheCurrentlyCheckedOutBranch: \"Pašlaik izrakstītā filiāle. Izvēlieties šo, ja vēlaties izmantot esošo darbu no pašreizējās filiāles.\",\n\t\ttheDefaultBranchInYourRepository: \"Noklusējuma filiāle jūsu repozitorijā. Izvēlieties šo, lai sāktu kaut ko jaunu, kas nav atkarīgs no jūsu pašreizējās filiāles.\",\n\t\tviewPullRequests: \"Skatīt izvilkšanas pieprasījumus\"\n\t},\n\t\"nl-NL\": {\n\t\tadd: \"Toevoegen\",\n\t\tbasedOn: \"Gebaseerd op\",\n\t\tbranchName: \"Filiaal naam\",\n\t\tbranches: \"Takken\",\n\t\tcancel: \"Annuleren\",\n\t\tclear: \"Helder\",\n\t\tcollection: \"Verzameling\",\n\t\tcollections: \"Collecties\",\n\t\tcreate: \"Creëren\",\n\t\tcreatePullRequest: \"Pull-aanvraag maken\",\n\t\tdashboard: \"Dashboard\",\n\t\tcurrentBranch: \"Huidige tak\",\n\t\tdefaultBranch: \"Standaard filiaal\",\n\t\t\"delete\": \"Verwijderen\",\n\t\tdeleteBranch: \"Filiaal verwijderen\",\n\t\tedit: \"Bewerking\",\n\t\tloading: \"Laden\",\n\t\tnewBranch: \"Nieuwe tak\",\n\t\totherBranches: \"Andere takken\",\n\t\tpullRequests: \"Trek verzoeken\",\n\t\tsave: \"Redden\",\n\t\tsingleton: \"eenling\",\n\t\tsearch: \"Zoeken\",\n\t\tsingletons: \"Eenlingen\",\n\t\ttheCurrentlyCheckedOutBranch: \"Het momenteel uitgecheckte filiaal. Kies dit als u moet voortbouwen op bestaand werk van de huidige branch.\",\n\t\tviewPullRequests: \"Bekijk pull-aanvragen\",\n\t\ttheDefaultBranchInYourRepository: \"De standaard branch in uw repository. Kies dit om iets nieuws te starten dat niet afhankelijk is van uw huidige branche.\"\n\t},\n\t\"pl-PL\": {\n\t\tadd: \"Dodać\",\n\t\tbasedOn: \"Oparte na\",\n\t\tbranchName: \"Nazwa filii\",\n\t\tcancel: \"Anulować\",\n\t\tbranches: \"Gałęzie\",\n\t\tclear: \"Wyczyść\",\n\t\tcollections: \"Kolekcje\",\n\t\tcollection: \"Kolekcja\",\n\t\tcreate: \"Tworzyć\",\n\t\tcurrentBranch: \"Obecny oddział\",\n\t\tcreatePullRequest: \"Utwórz żądanie ściągnięcia\",\n\t\tdefaultBranch: \"Oddział domyślny\",\n\t\tdashboard: \"Panel\",\n\t\t\"delete\": \"Usuwać\",\n\t\tloading: \"Trwa ładowanie\",\n\t\tdeleteBranch: \"Usuń oddział\",\n\t\tedit: \"Edytować\",\n\t\totherBranches: \"Inne gałęzie\",\n\t\tpullRequests: \"Żądania ściągnięcia\",\n\t\tsave: \"Ratować\",\n\t\tnewBranch: \"Nowa gałąź\",\n\t\tsearch: \"Szukaj\",\n\t\tsingleton: \"singel\",\n\t\tsingletons: \"Singletony\",\n\t\ttheDefaultBranchInYourRepository: \"Domyślna gałąź w twoim repozytorium. Wybierz tę opcję, aby rozpocząć coś nowego, co nie jest zależne od bieżącej gałęzi.\",\n\t\ttheCurrentlyCheckedOutBranch: \"Aktualnie wyewidencjonowana gałąź. Wybierz tę opcję, jeśli chcesz oprzeć się na istniejącej pracy z bieżącej gałęzi.\",\n\t\tviewPullRequests: \"Wyświetl żądania ściągnięcia\"\n\t},\n\t\"pt-BR\": {\n\t\tadd: \"Adicionar\",\n\t\tbasedOn: \"Baseado em\",\n\t\tbranches: \"Galhos\",\n\t\tbranchName: \"Nome da filial\",\n\t\tcancel: \"Cancelar\",\n\t\tclear: \"Limpar\",\n\t\tcollection: \"Coleção\",\n\t\tcollections: \"Coleções\",\n\t\tcreate: \"Criar\",\n\t\tcreatePullRequest: \"Criar solicitação pull\",\n\t\tcurrentBranch: \"filial atual\",\n\t\tdefaultBranch: \"ramo padrão\",\n\t\tdashboard: \"Painel\",\n\t\t\"delete\": \"Excluir\",\n\t\tdeleteBranch: \"Excluir ramificação\",\n\t\tedit: \"Editar\",\n\t\tnewBranch: \"Nova filial\",\n\t\totherBranches: \"Outros ramos\",\n\t\tloading: \"Carregando\",\n\t\tsave: \"Guardar\",\n\t\tpullRequests: \"Requisições pull\",\n\t\tsearch: \"Pesquisar\",\n\t\tsingletons: \"Solteiros\",\n\t\tsingleton: \"solteiro\",\n\t\ttheCurrentlyCheckedOutBranch: \"A ramificação atualmente com check-out. Escolha esta opção se precisar criar um trabalho existente na ramificação atual.\",\n\t\ttheDefaultBranchInYourRepository: \"A ramificação padrão em seu repositório. Escolha isso para iniciar algo novo que não dependa de sua ramificação atual.\",\n\t\tviewPullRequests: \"Ver solicitações pull\"\n\t},\n\t\"pt-PT\": {\n\t\tbasedOn: \"Baseado em\",\n\t\tbranchName: \"Nome da filial\",\n\t\tadd: \"Adicionar\",\n\t\tclear: \"Limpar\",\n\t\tbranches: \"Galhos\",\n\t\tcancel: \"Cancelar\",\n\t\tcollections: \"Coleções\",\n\t\tcollection: \"Coleção\",\n\t\tcreate: \"Criar\",\n\t\tcurrentBranch: \"filial atual\",\n\t\tcreatePullRequest: \"Criar solicitação pull\",\n\t\tdashboard: \"Painel\",\n\t\t\"delete\": \"Excluir\",\n\t\tdefaultBranch: \"ramo padrão\",\n\t\tdeleteBranch: \"Excluir ramificação\",\n\t\tedit: \"Editar\",\n\t\tloading: \"A carregar\",\n\t\tnewBranch: \"Nova filial\",\n\t\totherBranches: \"Outros ramos\",\n\t\tsave: \"Guardar\",\n\t\tpullRequests: \"Requisições pull\",\n\t\tsearch: \"Procurar\",\n\t\tsingleton: \"solteiro\",\n\t\tsingletons: \"Solteiros\",\n\t\ttheCurrentlyCheckedOutBranch: \"A ramificação atualmente com check-out. Escolha esta opção se precisar criar um trabalho existente na ramificação atual.\",\n\t\tviewPullRequests: \"Ver solicitações pull\",\n\t\ttheDefaultBranchInYourRepository: \"A ramificação padrão em seu repositório. Escolha isso para iniciar algo novo que não dependa de sua ramificação atual.\"\n\t},\n\t\"ro-RO\": {\n\t\tadd: \"Adăuga\",\n\t\tbranchName: \"Numele sucursalei\",\n\t\tbasedOn: \"Bazat pe\",\n\t\tbranches: \"Ramuri\",\n\t\tclear: \"Golire\",\n\t\tcancel: \"Anulare\",\n\t\tcollection: \"Colectie\",\n\t\tcollections: \"Colecții\",\n\t\tcreate: \"Crea\",\n\t\tcreatePullRequest: \"Creați cerere de tragere\",\n\t\tcurrentBranch: \"Filiala actuală\",\n\t\tdashboard: \"Bord\",\n\t\tdefaultBranch: \"Ramura implicită\",\n\t\t\"delete\": \"Șterge\",\n\t\tdeleteBranch: \"Ștergeți ramura\",\n\t\tedit: \"Editați\",\n\t\tloading: \"Se încarcă\",\n\t\tnewBranch: \"Filiala noua\",\n\t\totherBranches: \"Alte ramuri\",\n\t\tsave: \"Salvați\",\n\t\tpullRequests: \"Solicitări de tragere\",\n\t\tsearch: \"Căutare\",\n\t\tsingleton: \"Singleton\",\n\t\tsingletons: \"Singletons\",\n\t\ttheDefaultBranchInYourRepository: \"Ramura implicită din depozitul dvs. Alegeți acest lucru pentru a începe ceva nou, care nu depinde de ramura dvs. actuală.\",\n\t\ttheCurrentlyCheckedOutBranch: \"Sucursala verificată în prezent. Alegeți acest lucru dacă trebuie să vă bazați pe munca existentă din ramura curentă.\",\n\t\tviewPullRequests: \"Vizualizați solicitările de extragere\"\n\t},\n\t\"ru-RU\": {\n\t\tadd: \"Добавлять\",\n\t\tbasedOn: \"На основе\",\n\t\tbranchName: \"Название филиала\",\n\t\tbranches: \"Ветви\",\n\t\tcancel: \"Отмена\",\n\t\tclear: \"Очистить\",\n\t\tcollection: \"Коллекция\",\n\t\tcollections: \"Коллекции\",\n\t\tcreate: \"Создавать\",\n\t\tcreatePullRequest: \"Создать запрос на включение\",\n\t\tcurrentBranch: \"Текущая ветвь\",\n\t\tdashboard: \"Панель приборов\",\n\t\t\"delete\": \"Удалить\",\n\t\tdefaultBranch: \"Ветка по умолчанию\",\n\t\tdeleteBranch: \"Удалить ветку\",\n\t\tedit: \"Редактировать\",\n\t\tloading: \"Загрузка\",\n\t\tnewBranch: \"Новая ветка\",\n\t\tpullRequests: \"Пулл-реквесты\",\n\t\totherBranches: \"Другие филиалы\",\n\t\tsave: \"Сохранять\",\n\t\tsearch: \"Поиск\",\n\t\tsingletons: \"Одиночки\",\n\t\tsingleton: \"Синглтон\",\n\t\ttheDefaultBranchInYourRepository: \"Ветка по умолчанию в вашем репозитории. Выберите это, чтобы начать что-то новое, не зависящее от вашей текущей ветки.\",\n\t\tviewPullRequests: \"Посмотреть пул-реквесты\",\n\t\ttheCurrentlyCheckedOutBranch: \"Текущая проверенная ветвь. Выберите это, если вам нужно опираться на существующую работу из текущей ветки.\"\n\t},\n\t\"sl-SI\": {\n\t\tadd: \"Dodaj\",\n\t\tbasedOn: \"Temelji na\",\n\t\tbranchName: \"Ime podružnice\",\n\t\tbranches: \"Podružnice\",\n\t\tcancel: \"Prekliči\",\n\t\tclear: \"Jasen\",\n\t\tcollection: \"Zbirka\",\n\t\tcollections: \"Zbirke\",\n\t\tcreatePullRequest: \"Ustvari zahtevo za vleko\",\n\t\tcreate: \"Ustvari\",\n\t\tcurrentBranch: \"Trenutna veja\",\n\t\tdashboard: \"Nadzorna plošča\",\n\t\tdefaultBranch: \"Privzeta veja\",\n\t\t\"delete\": \"Izbriši\",\n\t\tdeleteBranch: \"Izbriši vejo\",\n\t\tedit: \"Uredi\",\n\t\tloading: \"Nalaganje\",\n\t\tnewBranch: \"Nova podružnica\",\n\t\totherBranches: \"Druge veje\",\n\t\tpullRequests: \"Zahteve za vlečenje\",\n\t\tsave: \"Shrani\",\n\t\tsearch: \"Iskanje\",\n\t\tsingleton: \"Singleton\",\n\t\tsingletons: \"Samski\",\n\t\ttheCurrentlyCheckedOutBranch: \"Trenutno odjavljena podružnica. To izberite, če morate graditi na obstoječem delu iz trenutne veje.\",\n\t\ttheDefaultBranchInYourRepository: \"Privzeta veja v vašem skladišču. Izberite to, da začnete nekaj novega, kar ni odvisno od vaše trenutne veje.\",\n\t\tviewPullRequests: \"Oglejte si zahteve za vlečenje\"\n\t},\n\t\"sr-SP\": {\n\t\tadd: \"Додати\",\n\t\tbasedOn: \"На бази\",\n\t\tbranchName: \"Назив огранка\",\n\t\tbranches: \"Огранци\",\n\t\tcancel: \"Поништити, отказати\",\n\t\tclear: \"Izbriši\",\n\t\tcollection: \"Цоллецтион\",\n\t\tcollections: \"Збирке\",\n\t\tcreatePullRequest: \"Креирајте захтев за повлачење\",\n\t\tcreate: \"Креирај\",\n\t\tcurrentBranch: \"Тренутна грана\",\n\t\tdefaultBranch: \"Подразумевана грана\",\n\t\tdashboard: \"Командна табла\",\n\t\t\"delete\": \"Избриши\",\n\t\tdeleteBranch: \"Обриши грану\",\n\t\tedit: \"Уредити\",\n\t\tloading: \"Učitavam\",\n\t\tnewBranch: \"Нова грана\",\n\t\totherBranches: \"Остале гране\",\n\t\tpullRequests: \"Захтеви за повлачење\",\n\t\tsearch: \"Pretraga\",\n\t\tsave: \"сачувати\",\n\t\tsingleton: \"Синглетон\",\n\t\ttheCurrentlyCheckedOutBranch: \"Тренутно одјављена филијала. Изаберите ово ако треба да надоградите постојећи рад из тренутне гране.\",\n\t\tsingletons: \"Синглетонс\",\n\t\ttheDefaultBranchInYourRepository: \"Подразумевана грана у вашем спремишту. Изаберите ово да започнете нешто ново што не зависи од ваше тренутне гране.\",\n\t\tviewPullRequests: \"Прегледајте захтеве за повлачењем\"\n\t},\n\t\"tr-TR\": {\n\t\tadd: \"Avbryt\",\n\t\tbasedOn: \"Dayalı\",\n\t\tbranchName: \"şube adı\",\n\t\tbranches: \"Şubeler\",\n\t\tcancel: \"iptal etmek\",\n\t\tclear: \"Temizle\",\n\t\tcollection: \"Toplamak\",\n\t\tcollections: \"Koleksiyonlar\",\n\t\tcreate: \"Yaratmak\",\n\t\tcreatePullRequest: \"Çekme isteği oluştur\",\n\t\tcurrentBranch: \"Mevcut şube\",\n\t\tdefaultBranch: \"varsayılan dal\",\n\t\tdashboard: \"Gösterge Paneli\",\n\t\t\"delete\": \"Silmek\",\n\t\tloading: \"Yükleniyor\",\n\t\tedit: \"Düzenlemek\",\n\t\tdeleteBranch: \"Şubeyi sil\",\n\t\tnewBranch: \"Yeni dal\",\n\t\tpullRequests: \"Çekme istekleri\",\n\t\totherBranches: \"Diğer şubeler\",\n\t\tsave: \"Kaydetmek\",\n\t\tsearch: \"Ara\",\n\t\tsingleton: \"Tekil\",\n\t\tsingletons: \"Singleton'lar\",\n\t\ttheCurrentlyCheckedOutBranch: \"Şu anda kontrol edilen şube. Geçerli daldaki mevcut işi geliştirmeniz gerekiyorsa bunu seçin.\",\n\t\ttheDefaultBranchInYourRepository: \"Deponuzdaki varsayılan şube. Mevcut şubenize bağlı olmayan yeni bir şey başlatmak için bunu seçin.\",\n\t\tviewPullRequests: \"Çekme isteklerini görüntüle\"\n\t},\n\t\"sv-SE\": {\n\t\tbasedOn: \"Baserat på\",\n\t\tadd: \"Lägg till\",\n\t\tbranchName: \"Filialens namn\",\n\t\tcancel: \"Поништити, отказати\",\n\t\tbranches: \"Grenar\",\n\t\tclear: \"Rensa\",\n\t\tcollections: \"Samlingar\",\n\t\tcollection: \"Samling\",\n\t\tcreate: \"Skapa\",\n\t\tcreatePullRequest: \"Skapa pull-förfrågan\",\n\t\tcurrentBranch: \"Nuvarande gren\",\n\t\tdashboard: \"instrumentbräda\",\n\t\tdefaultBranch: \"Standardgren\",\n\t\t\"delete\": \"Radera\",\n\t\tdeleteBranch: \"Ta bort gren\",\n\t\tedit: \"Redigera\",\n\t\tloading: \"Läser in\",\n\t\tnewBranch: \"Ny gren\",\n\t\tpullRequests: \"Dra förfrågningar\",\n\t\totherBranches: \"Andra grenar\",\n\t\tsave: \"Spara\",\n\t\tsearch: \"Sök\",\n\t\tsingleton: \"Singleton\",\n\t\tsingletons: \"Singlar\",\n\t\ttheCurrentlyCheckedOutBranch: \"Den utcheckade filialen. Välj detta om du behöver bygga på befintligt arbete från den aktuella grenen.\",\n\t\ttheDefaultBranchInYourRepository: \"Standardgrenen i ditt arkiv. Välj detta för att starta något nytt som inte är beroende av din nuvarande filial.\",\n\t\tviewPullRequests: \"Visa pull-förfrågningar\"\n\t},\n\t\"uk-UA\": {\n\t\tbasedOn: \"На основі\",\n\t\tadd: \"додати\",\n\t\tbranchName: \"Назва гілки\",\n\t\tbranches: \"Відділення\",\n\t\tcancel: \"скасувати\",\n\t\tclear: \"Очистити\",\n\t\tcollection: \"Колекція\",\n\t\tcollections: \"Колекції\",\n\t\tcreate: \"Створити\",\n\t\tcreatePullRequest: \"Створити запит на отримання\",\n\t\tdashboard: \"Панель приладів\",\n\t\tcurrentBranch: \"Поточне відділення\",\n\t\tdefaultBranch: \"Гілка за замовчуванням\",\n\t\t\"delete\": \"Видалити\",\n\t\tdeleteBranch: \"Видалити гілку\",\n\t\tedit: \"Редагувати\",\n\t\tloading: \"Завантаження\",\n\t\tnewBranch: \"Нова гілка\",\n\t\totherBranches: \"Інші гілки\",\n\t\tpullRequests: \"Запити на витягування\",\n\t\tsave: \"зберегти\",\n\t\tsearch: \"Пошук\",\n\t\tsingletons: \"Одиночки\",\n\t\tsingleton: \"Синглтон\",\n\t\ttheCurrentlyCheckedOutBranch: \"Поточна перевірена гілка. Виберіть це, якщо вам потрібно створити на основі існуючої роботи з поточної гілки.\",\n\t\ttheDefaultBranchInYourRepository: \"Стандартна гілка у вашому сховищі. Виберіть це, щоб почати щось нове, що не залежить від вашої поточної гілки.\",\n\t\tviewPullRequests: \"Перегляд запитів на отримання\"\n\t},\n\t\"zh-CN\": {\n\t\tadd: \"添加\",\n\t\tbasedOn: \"基于\",\n\t\tbranchName: \"分店名称\",\n\t\tcancel: \"取消\",\n\t\tbranches: \"分支机构\",\n\t\tclear: \"透明\",\n\t\tcreate: \"创造\",\n\t\tcollection: \"收藏\",\n\t\tcollections: \"收藏品\",\n\t\tcreatePullRequest: \"创建拉取请求\",\n\t\tcurrentBranch: \"当前分支\",\n\t\tdashboard: \"仪表板\",\n\t\tdefaultBranch: \"默认分支\",\n\t\t\"delete\": \"删除\",\n\t\tdeleteBranch: \"删除分支\",\n\t\tedit: \"编辑\",\n\t\tloading: \"正在加载\",\n\t\tnewBranch: \"新分行\",\n\t\totherBranches: \"其他分行\",\n\t\tsave: \"节省\",\n\t\tpullRequests: \"拉取请求\",\n\t\tsearch: \"搜索\",\n\t\tsingletons: \"单例\",\n\t\tsingleton: \"单例\",\n\t\ttheCurrentlyCheckedOutBranch: \"当前签出的分支。 如果您需要在当前分支的现有工作的基础上构建，请选择此项。\",\n\t\ttheDefaultBranchInYourRepository: \"存储库中的默认分支。 选择此选项可开始一些不依赖于当前分支的新操作。\",\n\t\tviewPullRequests: \"查看拉取请求\"\n\t},\n\t\"zh-TW\": {\n\t\tadd: \"添加\",\n\t\tbasedOn: \"基於\",\n\t\tbranchName: \"分店名稱\",\n\t\tbranches: \"分支機構\",\n\t\tclear: \"清除\",\n\t\tcancel: \"取消\",\n\t\tcollection: \"收藏\",\n\t\tcollections: \"收藏品\",\n\t\tcreate: \"創造\",\n\t\tcreatePullRequest: \"創建拉取請求\",\n\t\tcurrentBranch: \"當前分支\",\n\t\tdashboard: \"儀表板\",\n\t\t\"delete\": \"刪除\",\n\t\tdeleteBranch: \"刪除分支\",\n\t\tedit: \"編輯\",\n\t\tloading: \"正在載入\",\n\t\tnewBranch: \"新分行\",\n\t\tdefaultBranch: \"默認分支\",\n\t\totherBranches: \"其他分行\",\n\t\tpullRequests: \"拉取請求\",\n\t\tsave: \"節省\",\n\t\tsearch: \"搜尋\",\n\t\tsingleton: \"單例\",\n\t\tsingletons: \"單例\",\n\t\ttheCurrentlyCheckedOutBranch: \"當前簽出的分支。 如果您需要在當前分支的現有工作的基礎上構建，請選擇此項。\",\n\t\ttheDefaultBranchInYourRepository: \"存儲庫中的默認分支。 選擇此選項可開始一些不依賴於當前分支的新操作。\",\n\t\tviewPullRequests: \"查看拉取請求\"\n\t},\n\t\"sk-SK\": {\n\t\tadd: \"Pridať\",\n\t\tbasedOn: \"Založené na\",\n\t\tbranchName: \"Meno pobočky\",\n\t\tbranches: \"Pobočky\",\n\t\tclear: \"Vymazať\",\n\t\tcancel: \"Zrušiť\",\n\t\tcollections: \"zbierky\",\n\t\tcollection: \"Zbierka\",\n\t\tcreate: \"Vytvorte\",\n\t\tdashboard: \"Dashboard\",\n\t\tcurrentBranch: \"Aktuálna pobočka\",\n\t\tdefaultBranch: \"Predvolená vetva\",\n\t\t\"delete\": \"Odstrániť\",\n\t\tdeleteBranch: \"Odstrániť vetvu\",\n\t\tedit: \"Upraviť\",\n\t\tloading: \"Načítava sa\",\n\t\tnewBranch: \"Nová pobočka\",\n\t\totherBranches: \"Ostatné pobočky\",\n\t\tpullRequests: \"Vytiahnite žiadosti\",\n\t\tsave: \"Uložiť\",\n\t\tsearch: \"Vyhľadávať\",\n\t\tsingleton: \"Singleton\",\n\t\tsingletons: \"Singletons\",\n\t\ttheCurrentlyCheckedOutBranch: \"Aktuálne odhlásená pobočka. Túto možnosť vyberte, ak potrebujete stavať na existujúcej práci z aktuálnej pobočky.\",\n\t\ttheDefaultBranchInYourRepository: \"Predvolená vetva vo vašom úložisku. Zvoľte túto možnosť, ak chcete začať niečo nové, čo nezávisí od vašej aktuálnej pobočky.\",\n\t\tviewPullRequests: \"Zobraziť požiadavky na stiahnutie\",\n\t\tcreatePullRequest: \"Vytvorte požiadavku na stiahnutie\"\n\t}\n};\n\nconst RouterContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)(null);\nfunction RouterProvider(props) {\n  const [url, setUrl] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(() => window.location.href);\n  const router = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {\n    function navigate(url, replace) {\n      const newUrl = new URL(url, window.location.href);\n      if (newUrl.origin !== window.location.origin || !newUrl.pathname.startsWith('/keystatic')) {\n        window.location.assign(newUrl);\n        return;\n      }\n      window.history[replace ? 'replaceState' : 'pushState'](null, '', newUrl);\n      (0,react__WEBPACK_IMPORTED_MODULE_3__.startTransition)(() => {\n        setUrl(newUrl.toString());\n      });\n    }\n    const replaced = location.pathname.replace(/^\\/keystatic\\/?/, '');\n    const params = replaced === '' ? [] : replaced.split('/').map(decodeURIComponent);\n    const parsedUrl = new URL(url);\n    return {\n      href: parsedUrl.pathname + parsedUrl.search,\n      replace(path) {\n        navigate(path, true);\n      },\n      push(path) {\n        navigate(path, false);\n      },\n      params\n    };\n  }, [url]);\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    const handleNavigate = () => {\n      (0,react__WEBPACK_IMPORTED_MODULE_3__.startTransition)(() => {\n        setUrl(window.location.href);\n      });\n    };\n    window.addEventListener('popstate', handleNavigate);\n    return () => {\n      window.removeEventListener('popstate', handleNavigate);\n    };\n  }, []);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(RouterContext.Provider, {\n    value: router,\n    children: props.children\n  });\n}\nfunction useRouter() {\n  const router = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(RouterContext);\n  if (router == null) {\n    throw new Error('useRouter must be used within a RouterProvider');\n  }\n  return router;\n}\n\nfunction fixPath(path) {\n  return path.replace(/^\\.?\\/+/, '').replace(/\\/*$/, '');\n}\nconst collectionPath = /\\/\\*\\*?(?:$|\\/)/;\nfunction getConfiguredCollectionPath(config, collection) {\n  var _collectionConfig$pat;\n  const collectionConfig = config.collections[collection];\n  const path = (_collectionConfig$pat = collectionConfig.path) !== null && _collectionConfig$pat !== void 0 ? _collectionConfig$pat : `${collection}/*/`;\n  if (!collectionPath.test(path)) {\n    throw new Error(`Collection path must end with /* or /** or include /*/ or /**/ but ${collection} has ${path}`);\n  }\n  return path;\n}\nfunction getCollectionPath(config, collection) {\n  const configuredPath = getConfiguredCollectionPath(config, collection);\n  const path = fixPath(configuredPath.replace(/\\*\\*?.*$/, ''));\n  return path;\n}\nfunction getCollectionFormat(config, collection) {\n  var _collectionConfig$for;\n  const collectionConfig = config.collections[collection];\n  return getFormatInfo((_collectionConfig$for = collectionConfig.format) !== null && _collectionConfig$for !== void 0 ? _collectionConfig$for : 'yaml', collectionConfig.schema, getConfiguredCollectionPath(config, collection));\n}\nfunction getSingletonFormat(config, singleton) {\n  var _singletonConfig$form, _singletonConfig$path;\n  const singletonConfig = config.singletons[singleton];\n  return getFormatInfo((_singletonConfig$form = singletonConfig.format) !== null && _singletonConfig$form !== void 0 ? _singletonConfig$form : 'yaml', singletonConfig.schema, (_singletonConfig$path = singletonConfig.path) !== null && _singletonConfig$path !== void 0 ? _singletonConfig$path : `${singleton}/`);\n}\nfunction getCollectionItemPath(config, collection, slug) {\n  const basePath = getCollectionPath(config, collection);\n  const suffix = getCollectionItemSlugSuffix(config, collection);\n  return `${basePath}/${slug}${suffix}`;\n}\nfunction getEntryDataFilepath(dir, formatInfo) {\n  return `${dir}${formatInfo.dataLocation === 'index' ? '/index' : ''}${getDataFileExtension(formatInfo)}`;\n}\nfunction getSlugGlobForCollection(config, collection) {\n  const collectionPath = getConfiguredCollectionPath(config, collection);\n  return collectionPath.includes('**') ? '**' : '*';\n}\nfunction getCollectionItemSlugSuffix(config, collection) {\n  const configuredPath = getConfiguredCollectionPath(config, collection);\n  const path = fixPath(configuredPath.replace(/^[^*]+\\*\\*?/, ''));\n  return path ? `/${path}` : '';\n}\nfunction getSingletonPath(config, singleton) {\n  var _singleton$path, _singleton$path2;\n  if ((_singleton$path = config.singletons[singleton].path) !== null && _singleton$path !== void 0 && _singleton$path.includes('*')) {\n    throw new Error(`Singleton paths cannot include * but ${singleton} has ${config.singletons[singleton].path}`);\n  }\n  return fixPath((_singleton$path2 = config.singletons[singleton].path) !== null && _singleton$path2 !== void 0 ? _singleton$path2 : singleton);\n}\nfunction getDataFileExtension(formatInfo) {\n  return formatInfo.contentField ? formatInfo.contentField.config.contentExtension : '.' + formatInfo.data;\n}\nfunction getFormatInfo(format, schema, path) {\n  var _format$data;\n  const dataLocation = path.endsWith('/') ? 'index' : 'outer';\n  if (typeof format === 'string') {\n    return {\n      dataLocation,\n      contentField: undefined,\n      data: format\n    };\n  }\n  let contentField;\n  if (format.contentField) {\n    const field = schema[format.contentField];\n    (0,emery__WEBPACK_IMPORTED_MODULE_1__.assert)((field === null || field === void 0 ? void 0 : field.kind) === 'form', `${format.contentField} is not a form field`);\n    (0,emery__WEBPACK_IMPORTED_MODULE_1__.assert)(field.formKind === 'content', `${format.contentField} is not a content field`);\n    contentField = {\n      key: format.contentField,\n      config: field\n    };\n  }\n  return {\n    data: (_format$data = format.data) !== null && _format$data !== void 0 ? _format$data : 'yaml',\n    contentField,\n    dataLocation\n  };\n}\nfunction getPathPrefix(storage) {\n  if (storage.kind === 'local' || !storage.pathPrefix) {\n    return undefined;\n  }\n  return fixPath(storage.pathPrefix) + '/';\n}\n\nasync function sha1(content) {\n  return (0,crypto__WEBPACK_IMPORTED_MODULE_2__.createHash)('sha1').update(content).digest('hex');\n}\n\nconst textEncoder$2 = new TextEncoder();\nfunction blobSha(contents) {\n  const blobPrefix = textEncoder$2.encode('blob ' + contents.length + '\\0');\n  const array = new Uint8Array(blobPrefix.byteLength + contents.byteLength);\n  array.set(blobPrefix, 0);\n  array.set(contents, blobPrefix.byteLength);\n  return sha1(array);\n}\nfunction getTreeNodeAtPath(root, path) {\n  const parts = path.split('/');\n  let node = root.get(parts[0]);\n  for (const part of parts.slice(1)) {\n    if (!node) return undefined;\n    if (!node.children) return undefined;\n    node = node.children.get(part);\n  }\n  return node;\n}\nfunction getNodeAtPath(tree, path) {\n  let node = tree;\n  for (const part of path.split('/')) {\n    if (!node.has(part)) {\n      node.set(part, new Map());\n    }\n    const innerNode = node.get(part);\n    (0,emery__WEBPACK_IMPORTED_MODULE_1__.assert)(innerNode instanceof Map, 'expected tree');\n    node = innerNode;\n  }\n  return node;\n}\nfunction getFilename(path) {\n  return path.replace(/.*\\//, '');\n}\nfunction getDirname(path) {\n  return path.replace(/\\/[^/]+$/, '');\n}\nfunction toTreeChanges(changes) {\n  const changesRoot = new Map();\n  for (const deletion of changes.deletions) {\n    const parentTree = getNodeAtPath(changesRoot, getDirname(deletion));\n    parentTree.set(getFilename(deletion), 'delete');\n  }\n  for (const addition of changes.additions) {\n    const parentTree = getNodeAtPath(changesRoot, getDirname(addition.path));\n    parentTree.set(getFilename(addition.path), addition.contents);\n  }\n  return changesRoot;\n}\nconst SPACE_CHAR_CODE = 32;\nconst space = new Uint8Array([SPACE_CHAR_CODE]);\nconst nullchar = new Uint8Array([0]);\nconst tree = textEncoder$2.encode('tree ');\n\n// based on https://github.com/isomorphic-git/isomorphic-git/blob/c09dfa20ffe0ab9e6602e0fa172d72ba8994e443/src/models/GitTree.js#L108-L122\nfunction treeSha(children) {\n  const entries = [...children].map(([name, node]) => ({\n    name,\n    sha: node.entry.sha,\n    mode: node.entry.mode\n  }));\n  entries.sort((a, b) => {\n    const aName = a.mode === '040000' ? a.name + '/' : a.name;\n    const bName = b.mode === '040000' ? b.name + '/' : b.name;\n    return aName === bName ? 0 : aName < bName ? -1 : 1;\n  });\n  const treeObject = entries.flatMap(entry => {\n    const mode = textEncoder$2.encode(entry.mode.replace(/^0/, ''));\n    const name = textEncoder$2.encode(entry.name);\n    const sha = hexToBytes(entry.sha);\n    return [mode, space, name, nullchar, sha];\n  });\n  return sha1(concatBytes([tree, textEncoder$2.encode(treeObject.reduce((sum, val) => sum + val.byteLength, 0).toString()), nullchar, ...treeObject]));\n}\nfunction concatBytes(byteArrays) {\n  const totalLength = byteArrays.reduce((sum, arr) => sum + arr.byteLength, 0);\n  const result = new Uint8Array(totalLength);\n  let offset = 0;\n  for (const arr of byteArrays) {\n    result.set(arr, offset);\n    offset += arr.byteLength;\n  }\n  return result;\n}\nfunction hexToBytes(str) {\n  const bytes = new Uint8Array(str.length / 2);\n  for (var i = 0; i < bytes.byteLength; i += 1) {\n    const start = i * 2;\n    bytes[i] = parseInt(str.slice(start, start + 2), 16);\n  }\n  return bytes;\n}\nasync function createTreeNodeEntry(path, children) {\n  const sha = await treeSha(children);\n  return {\n    path,\n    mode: '040000',\n    type: 'tree',\n    sha\n  };\n}\nasync function createBlobNodeEntry(path, contents) {\n  const sha = 'sha' in contents ? contents.sha : await blobSha(contents);\n  return {\n    path,\n    mode: '100644',\n    type: 'blob',\n    sha,\n    size: contents.byteLength\n  };\n}\nasync function updateTreeWithChanges(tree, changes) {\n  var _await$updateTree;\n  const newTree = (_await$updateTree = await updateTree(tree, toTreeChanges(changes), [])) !== null && _await$updateTree !== void 0 ? _await$updateTree : new Map();\n  return {\n    entries: treeToEntries(newTree),\n    sha: await treeSha(newTree !== null && newTree !== void 0 ? newTree : new Map())\n  };\n}\nfunction treeToEntries(tree) {\n  return [...tree.values()].flatMap(x => x.children ? [x.entry, ...treeToEntries(x.children)] : [x.entry]);\n}\nasync function updateTree(tree, changedTree, path) {\n  const newTree = new Map(tree);\n  for (const [key, value] of changedTree) {\n    if (value === 'delete') {\n      newTree.delete(key);\n    }\n    if (value instanceof Map) {\n      var _newTree$get$children, _newTree$get;\n      const existingChildren = (_newTree$get$children = (_newTree$get = newTree.get(key)) === null || _newTree$get === void 0 ? void 0 : _newTree$get.children) !== null && _newTree$get$children !== void 0 ? _newTree$get$children : new Map();\n      const children = await updateTree(existingChildren, value, path.concat(key));\n      if (children === undefined) {\n        newTree.delete(key);\n        continue;\n      }\n      const entry = await createTreeNodeEntry(path.concat(key).join('/'), children);\n      newTree.set(key, {\n        entry,\n        children\n      });\n    }\n    if (value instanceof Uint8Array || typeof value === 'object' && 'sha' in value) {\n      const entry = await createBlobNodeEntry(path.concat(key).join('/'), value);\n      newTree.set(key, {\n        entry\n      });\n    }\n  }\n  if (newTree.size === 0) {\n    return undefined;\n  }\n  return newTree;\n}\nfunction treeEntriesToTreeNodes(entries) {\n  const root = new Map();\n  const getChildrenAtPath = parts => {\n    var _node;\n    if (parts.length === 0) {\n      return root;\n    }\n    let node = root.get(parts[0]);\n    for (const part of parts.slice(1)) {\n      if (!node) return undefined;\n      if (!node.children) return undefined;\n      node = node.children.get(part);\n    }\n    return (_node = node) === null || _node === void 0 ? void 0 : _node.children;\n  };\n  for (const entry of entries) {\n    const split = entry.path.split('/');\n    const children = getChildrenAtPath(split.slice(0, -1));\n    if (children) {\n      children.set(split[split.length - 1], {\n        entry,\n        children: entry.type === 'tree' ? new Map() : undefined\n      });\n    }\n  }\n  return root;\n}\n\nconst LOADING = Symbol('loading');\nfunction isThenable(value) {\n  return value && typeof value.then === 'function';\n}\nfunction useData(func) {\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)({\n    kind: 'loading'\n  });\n  let stateToReturn = state;\n  const result = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {\n    try {\n      const result = func();\n      // this avoids unhandled promise rejections\n      // we actually handle the result in an effect\n      if (isThenable(result)) {\n        result.then(() => {}, () => {});\n      }\n      return {\n        kind: 'result',\n        result\n      };\n    } catch (error) {\n      return {\n        kind: 'error',\n        error: error\n      };\n    }\n  }, [func]);\n  const resultState = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {\n    if (result.kind === 'error' && (state.kind !== 'error' || state.error !== result.error)) {\n      return {\n        kind: 'error',\n        error: result.error\n      };\n    }\n    if (result.kind === 'result' && !isThenable(result.result) && result.result !== LOADING && (state.kind !== 'loaded' || state.data !== result.result)) {\n      return {\n        kind: 'loaded',\n        data: result.result\n      };\n    }\n  }, [result, state]);\n  if (resultState && resultState !== state) {\n    stateToReturn = resultState;\n    setState(resultState);\n  }\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    if (result.kind === 'result' && isThenable(result.result)) {\n      setState({\n        kind: 'loading'\n      });\n      let isActive = true;\n      result.result.then(result => {\n        if (result === LOADING || !isActive) return;\n        setState({\n          kind: 'loaded',\n          data: result\n        });\n      }, error => {\n        if (!isActive) return;\n        setState({\n          kind: 'error',\n          error\n        });\n      });\n      return () => {\n        isActive = false;\n      };\n    }\n  }, [result]);\n  return stateToReturn;\n}\nfunction mapDataState(state, func) {\n  if (state.kind === 'error' || state.kind === 'loading') {\n    return state;\n  }\n  return {\n    kind: 'loaded',\n    data: func(state.data)\n  };\n}\nfunction mergeDataStates(input) {\n  const entries = Object.entries(input);\n  for (const [, value] of entries) {\n    if (value.kind === 'error') {\n      return {\n        kind: 'error',\n        error: value.error\n      };\n    }\n  }\n  for (const [, value] of entries) {\n    if (value.kind === 'loading') {\n      return {\n        kind: 'loading'\n      };\n    }\n  }\n  return {\n    kind: 'loaded',\n    data: Object.fromEntries(entries.map(([key, val]) => {\n      return [key, val.data];\n    }))\n  };\n}\n\nfunction collectDirectoriesUsedInSchemaInner(schema, directories, seenSchemas) {\n  if (seenSchemas.has(schema)) {\n    return;\n  }\n  seenSchemas.add(schema);\n  if (schema.kind === 'array') {\n    return collectDirectoriesUsedInSchemaInner(schema.element, directories, seenSchemas);\n  }\n  if (schema.kind === 'child') {\n    return;\n  }\n  if (schema.kind === 'form') {\n    if (schema.formKind === 'asset' && schema.directory !== undefined) {\n      directories.add(fixPath(schema.directory));\n    }\n    if (schema.formKind === 'content' && schema.directories !== undefined) {\n      for (const directory of schema.directories) {\n        directories.add(fixPath(directory));\n      }\n    }\n    return;\n  }\n  if (schema.kind === 'object') {\n    for (const field of Object.values(schema.fields)) {\n      collectDirectoriesUsedInSchemaInner(field, directories, seenSchemas);\n    }\n    return;\n  }\n  if (schema.kind === 'conditional') {\n    for (const innerSchema of Object.values(schema.values)) {\n      collectDirectoriesUsedInSchemaInner(innerSchema, directories, seenSchemas);\n    }\n    return;\n  }\n  (0,emery__WEBPACK_IMPORTED_MODULE_1__.assertNever)(schema);\n}\nfunction collectDirectoriesUsedInSchema(schema) {\n  const directories = new Set();\n  collectDirectoriesUsedInSchemaInner(schema, directories, new Set());\n  return directories;\n}\nfunction getDirectoriesForTreeKey(schema, directory, slug, format) {\n  const directories = [fixPath(directory)];\n  if (format.dataLocation === 'outer') {\n    directories.push(fixPath(directory) + getDataFileExtension(format));\n  }\n  const toAdd = slug === undefined ? '' : `/${slug}`;\n  for (const directory of collectDirectoriesUsedInSchema(schema)) {\n    directories.push(directory + toAdd);\n  }\n  return directories;\n}\nfunction getTreeKey(directories, tree) {\n  return directories.map(d => {\n    var _getTreeNodeAtPath;\n    return (_getTreeNodeAtPath = getTreeNodeAtPath(tree, d)) === null || _getTreeNodeAtPath === void 0 ? void 0 : _getTreeNodeAtPath.entry.sha;\n  }).join('-');\n}\n\nvar pkgJson = {\n\tname: \"@keystatic/core\",\n\tversion: \"0.2.12\",\n\tlicense: \"MIT\",\n\trepository: {\n\t\ttype: \"git\",\n\t\turl: \"https://github.com/Thinkmill/keystatic/\",\n\t\tdirectory: \"packages/keystatic\"\n\t},\n\texports: {\n\t\t\"./ui\": {\n\t\t\ttypes: {\n\t\t\t\t\"import\": \"./ui/dist/keystatic-core-ui.cjs.mjs\",\n\t\t\t\t\"default\": \"./ui/dist/keystatic-core-ui.cjs.js\"\n\t\t\t},\n\t\t\tnode: {\n\t\t\t\t\"react-server\": {\n\t\t\t\t\tmodule: \"./ui/dist/keystatic-core-ui.node.react-server.esm.js\",\n\t\t\t\t\t\"import\": \"./ui/dist/keystatic-core-ui.node.react-server.cjs.mjs\",\n\t\t\t\t\t\"default\": \"./ui/dist/keystatic-core-ui.node.react-server.cjs.js\"\n\t\t\t\t},\n\t\t\t\tmodule: \"./ui/dist/keystatic-core-ui.node.esm.js\",\n\t\t\t\t\"import\": \"./ui/dist/keystatic-core-ui.node.cjs.mjs\",\n\t\t\t\t\"default\": \"./ui/dist/keystatic-core-ui.node.cjs.js\"\n\t\t\t},\n\t\t\t\"react-server\": {\n\t\t\t\tmodule: \"./ui/dist/keystatic-core-ui.react-server.esm.js\",\n\t\t\t\t\"import\": \"./ui/dist/keystatic-core-ui.react-server.cjs.mjs\",\n\t\t\t\t\"default\": \"./ui/dist/keystatic-core-ui.react-server.cjs.js\"\n\t\t\t},\n\t\t\tmodule: \"./ui/dist/keystatic-core-ui.esm.js\",\n\t\t\t\"import\": \"./ui/dist/keystatic-core-ui.cjs.mjs\",\n\t\t\t\"default\": \"./ui/dist/keystatic-core-ui.cjs.js\"\n\t\t},\n\t\t\".\": {\n\t\t\ttypes: {\n\t\t\t\t\"import\": \"./dist/keystatic-core.cjs.mjs\",\n\t\t\t\t\"default\": \"./dist/keystatic-core.cjs.js\"\n\t\t\t},\n\t\t\tnode: {\n\t\t\t\t\"react-server\": {\n\t\t\t\t\tmodule: \"./dist/keystatic-core.node.react-server.esm.js\",\n\t\t\t\t\t\"import\": \"./dist/keystatic-core.node.react-server.cjs.mjs\",\n\t\t\t\t\t\"default\": \"./dist/keystatic-core.node.react-server.cjs.js\"\n\t\t\t\t},\n\t\t\t\tmodule: \"./dist/keystatic-core.node.esm.js\",\n\t\t\t\t\"import\": \"./dist/keystatic-core.node.cjs.mjs\",\n\t\t\t\t\"default\": \"./dist/keystatic-core.node.cjs.js\"\n\t\t\t},\n\t\t\t\"react-server\": {\n\t\t\t\tmodule: \"./dist/keystatic-core.react-server.esm.js\",\n\t\t\t\t\"import\": \"./dist/keystatic-core.react-server.cjs.mjs\",\n\t\t\t\t\"default\": \"./dist/keystatic-core.react-server.cjs.js\"\n\t\t\t},\n\t\t\tmodule: \"./dist/keystatic-core.esm.js\",\n\t\t\t\"import\": \"./dist/keystatic-core.cjs.mjs\",\n\t\t\t\"default\": \"./dist/keystatic-core.cjs.js\"\n\t\t},\n\t\t\"./api/utils\": {\n\t\t\ttypes: {\n\t\t\t\t\"import\": \"./api/utils/dist/keystatic-core-api-utils.cjs.mjs\",\n\t\t\t\t\"default\": \"./api/utils/dist/keystatic-core-api-utils.cjs.js\"\n\t\t\t},\n\t\t\tnode: {\n\t\t\t\t\"react-server\": {\n\t\t\t\t\tmodule: \"./api/utils/dist/keystatic-core-api-utils.node.react-server.esm.js\",\n\t\t\t\t\t\"import\": \"./api/utils/dist/keystatic-core-api-utils.node.react-server.cjs.mjs\",\n\t\t\t\t\t\"default\": \"./api/utils/dist/keystatic-core-api-utils.node.react-server.cjs.js\"\n\t\t\t\t},\n\t\t\t\tmodule: \"./api/utils/dist/keystatic-core-api-utils.node.esm.js\",\n\t\t\t\t\"import\": \"./api/utils/dist/keystatic-core-api-utils.node.cjs.mjs\",\n\t\t\t\t\"default\": \"./api/utils/dist/keystatic-core-api-utils.node.cjs.js\"\n\t\t\t},\n\t\t\t\"react-server\": {\n\t\t\t\tmodule: \"./api/utils/dist/keystatic-core-api-utils.react-server.esm.js\",\n\t\t\t\t\"import\": \"./api/utils/dist/keystatic-core-api-utils.react-server.cjs.mjs\",\n\t\t\t\t\"default\": \"./api/utils/dist/keystatic-core-api-utils.react-server.cjs.js\"\n\t\t\t},\n\t\t\tmodule: \"./api/utils/dist/keystatic-core-api-utils.esm.js\",\n\t\t\t\"import\": \"./api/utils/dist/keystatic-core-api-utils.cjs.mjs\",\n\t\t\t\"default\": \"./api/utils/dist/keystatic-core-api-utils.cjs.js\"\n\t\t},\n\t\t\"./renderer\": {\n\t\t\ttypes: {\n\t\t\t\t\"import\": \"./renderer/dist/keystatic-core-renderer.cjs.mjs\",\n\t\t\t\t\"default\": \"./renderer/dist/keystatic-core-renderer.cjs.js\"\n\t\t\t},\n\t\t\tnode: {\n\t\t\t\t\"react-server\": {\n\t\t\t\t\tmodule: \"./renderer/dist/keystatic-core-renderer.node.react-server.esm.js\",\n\t\t\t\t\t\"import\": \"./renderer/dist/keystatic-core-renderer.node.react-server.cjs.mjs\",\n\t\t\t\t\t\"default\": \"./renderer/dist/keystatic-core-renderer.node.react-server.cjs.js\"\n\t\t\t\t},\n\t\t\t\tmodule: \"./renderer/dist/keystatic-core-renderer.node.esm.js\",\n\t\t\t\t\"import\": \"./renderer/dist/keystatic-core-renderer.node.cjs.mjs\",\n\t\t\t\t\"default\": \"./renderer/dist/keystatic-core-renderer.node.cjs.js\"\n\t\t\t},\n\t\t\t\"react-server\": {\n\t\t\t\tmodule: \"./renderer/dist/keystatic-core-renderer.react-server.esm.js\",\n\t\t\t\t\"import\": \"./renderer/dist/keystatic-core-renderer.react-server.cjs.mjs\",\n\t\t\t\t\"default\": \"./renderer/dist/keystatic-core-renderer.react-server.cjs.js\"\n\t\t\t},\n\t\t\tmodule: \"./renderer/dist/keystatic-core-renderer.esm.js\",\n\t\t\t\"import\": \"./renderer/dist/keystatic-core-renderer.cjs.mjs\",\n\t\t\t\"default\": \"./renderer/dist/keystatic-core-renderer.cjs.js\"\n\t\t},\n\t\t\"./api/generic\": {\n\t\t\ttypes: {\n\t\t\t\t\"import\": \"./api/generic/dist/keystatic-core-api-generic.cjs.mjs\",\n\t\t\t\t\"default\": \"./api/generic/dist/keystatic-core-api-generic.cjs.js\"\n\t\t\t},\n\t\t\tnode: {\n\t\t\t\t\"react-server\": {\n\t\t\t\t\tmodule: \"./api/generic/dist/keystatic-core-api-generic.node.react-server.esm.js\",\n\t\t\t\t\t\"import\": \"./api/generic/dist/keystatic-core-api-generic.node.react-server.cjs.mjs\",\n\t\t\t\t\t\"default\": \"./api/generic/dist/keystatic-core-api-generic.node.react-server.cjs.js\"\n\t\t\t\t},\n\t\t\t\tmodule: \"./api/generic/dist/keystatic-core-api-generic.node.esm.js\",\n\t\t\t\t\"import\": \"./api/generic/dist/keystatic-core-api-generic.node.cjs.mjs\",\n\t\t\t\t\"default\": \"./api/generic/dist/keystatic-core-api-generic.node.cjs.js\"\n\t\t\t},\n\t\t\t\"react-server\": {\n\t\t\t\tmodule: \"./api/generic/dist/keystatic-core-api-generic.react-server.esm.js\",\n\t\t\t\t\"import\": \"./api/generic/dist/keystatic-core-api-generic.react-server.cjs.mjs\",\n\t\t\t\t\"default\": \"./api/generic/dist/keystatic-core-api-generic.react-server.cjs.js\"\n\t\t\t},\n\t\t\tmodule: \"./api/generic/dist/keystatic-core-api-generic.esm.js\",\n\t\t\t\"import\": \"./api/generic/dist/keystatic-core-api-generic.cjs.mjs\",\n\t\t\t\"default\": \"./api/generic/dist/keystatic-core-api-generic.cjs.js\"\n\t\t},\n\t\t\"./reader\": {\n\t\t\ttypes: {\n\t\t\t\t\"import\": \"./reader/dist/keystatic-core-reader.cjs.mjs\",\n\t\t\t\t\"default\": \"./reader/dist/keystatic-core-reader.cjs.js\"\n\t\t\t},\n\t\t\tnode: {\n\t\t\t\t\"react-server\": {\n\t\t\t\t\tmodule: \"./reader/dist/keystatic-core-reader.node.react-server.esm.js\",\n\t\t\t\t\t\"import\": \"./reader/dist/keystatic-core-reader.node.react-server.cjs.mjs\",\n\t\t\t\t\t\"default\": \"./reader/dist/keystatic-core-reader.node.react-server.cjs.js\"\n\t\t\t\t},\n\t\t\t\tmodule: \"./reader/dist/keystatic-core-reader.node.esm.js\",\n\t\t\t\t\"import\": \"./reader/dist/keystatic-core-reader.node.cjs.mjs\",\n\t\t\t\t\"default\": \"./reader/dist/keystatic-core-reader.node.cjs.js\"\n\t\t\t},\n\t\t\t\"react-server\": {\n\t\t\t\tmodule: \"./reader/dist/keystatic-core-reader.react-server.esm.js\",\n\t\t\t\t\"import\": \"./reader/dist/keystatic-core-reader.react-server.cjs.mjs\",\n\t\t\t\t\"default\": \"./reader/dist/keystatic-core-reader.react-server.cjs.js\"\n\t\t\t},\n\t\t\tmodule: \"./reader/dist/keystatic-core-reader.esm.js\",\n\t\t\t\"import\": \"./reader/dist/keystatic-core-reader.cjs.mjs\",\n\t\t\t\"default\": \"./reader/dist/keystatic-core-reader.cjs.js\"\n\t\t},\n\t\t\"./reader/github\": {\n\t\t\ttypes: {\n\t\t\t\t\"import\": \"./reader/github/dist/keystatic-core-reader-github.cjs.mjs\",\n\t\t\t\t\"default\": \"./reader/github/dist/keystatic-core-reader-github.cjs.js\"\n\t\t\t},\n\t\t\tnode: {\n\t\t\t\t\"react-server\": {\n\t\t\t\t\tmodule: \"./reader/github/dist/keystatic-core-reader-github.node.react-server.esm.js\",\n\t\t\t\t\t\"import\": \"./reader/github/dist/keystatic-core-reader-github.node.react-server.cjs.mjs\",\n\t\t\t\t\t\"default\": \"./reader/github/dist/keystatic-core-reader-github.node.react-server.cjs.js\"\n\t\t\t\t},\n\t\t\t\tmodule: \"./reader/github/dist/keystatic-core-reader-github.node.esm.js\",\n\t\t\t\t\"import\": \"./reader/github/dist/keystatic-core-reader-github.node.cjs.mjs\",\n\t\t\t\t\"default\": \"./reader/github/dist/keystatic-core-reader-github.node.cjs.js\"\n\t\t\t},\n\t\t\t\"react-server\": {\n\t\t\t\tmodule: \"./reader/github/dist/keystatic-core-reader-github.react-server.esm.js\",\n\t\t\t\t\"import\": \"./reader/github/dist/keystatic-core-reader-github.react-server.cjs.mjs\",\n\t\t\t\t\"default\": \"./reader/github/dist/keystatic-core-reader-github.react-server.cjs.js\"\n\t\t\t},\n\t\t\tmodule: \"./reader/github/dist/keystatic-core-reader-github.esm.js\",\n\t\t\t\"import\": \"./reader/github/dist/keystatic-core-reader-github.cjs.mjs\",\n\t\t\t\"default\": \"./reader/github/dist/keystatic-core-reader-github.cjs.js\"\n\t\t},\n\t\t\"./content-components\": {\n\t\t\ttypes: {\n\t\t\t\t\"import\": \"./content-components/dist/keystatic-core-content-components.cjs.mjs\",\n\t\t\t\t\"default\": \"./content-components/dist/keystatic-core-content-components.cjs.js\"\n\t\t\t},\n\t\t\tnode: {\n\t\t\t\t\"react-server\": {\n\t\t\t\t\tmodule: \"./content-components/dist/keystatic-core-content-components.node.react-server.esm.js\",\n\t\t\t\t\t\"import\": \"./content-components/dist/keystatic-core-content-components.node.react-server.cjs.mjs\",\n\t\t\t\t\t\"default\": \"./content-components/dist/keystatic-core-content-components.node.react-server.cjs.js\"\n\t\t\t\t},\n\t\t\t\tmodule: \"./content-components/dist/keystatic-core-content-components.node.esm.js\",\n\t\t\t\t\"import\": \"./content-components/dist/keystatic-core-content-components.node.cjs.mjs\",\n\t\t\t\t\"default\": \"./content-components/dist/keystatic-core-content-components.node.cjs.js\"\n\t\t\t},\n\t\t\t\"react-server\": {\n\t\t\t\tmodule: \"./content-components/dist/keystatic-core-content-components.react-server.esm.js\",\n\t\t\t\t\"import\": \"./content-components/dist/keystatic-core-content-components.react-server.cjs.mjs\",\n\t\t\t\t\"default\": \"./content-components/dist/keystatic-core-content-components.react-server.cjs.js\"\n\t\t\t},\n\t\t\tmodule: \"./content-components/dist/keystatic-core-content-components.esm.js\",\n\t\t\t\"import\": \"./content-components/dist/keystatic-core-content-components.cjs.mjs\",\n\t\t\t\"default\": \"./content-components/dist/keystatic-core-content-components.cjs.js\"\n\t\t},\n\t\t\"./component-blocks\": {\n\t\t\ttypes: {\n\t\t\t\t\"import\": \"./component-blocks/dist/keystatic-core-component-blocks.cjs.mjs\",\n\t\t\t\t\"default\": \"./component-blocks/dist/keystatic-core-component-blocks.cjs.js\"\n\t\t\t},\n\t\t\tnode: {\n\t\t\t\t\"react-server\": {\n\t\t\t\t\tmodule: \"./component-blocks/dist/keystatic-core-component-blocks.node.react-server.esm.js\",\n\t\t\t\t\t\"import\": \"./component-blocks/dist/keystatic-core-component-blocks.node.react-server.cjs.mjs\",\n\t\t\t\t\t\"default\": \"./component-blocks/dist/keystatic-core-component-blocks.node.react-server.cjs.js\"\n\t\t\t\t},\n\t\t\t\tmodule: \"./component-blocks/dist/keystatic-core-component-blocks.node.esm.js\",\n\t\t\t\t\"import\": \"./component-blocks/dist/keystatic-core-component-blocks.node.cjs.mjs\",\n\t\t\t\t\"default\": \"./component-blocks/dist/keystatic-core-component-blocks.node.cjs.js\"\n\t\t\t},\n\t\t\t\"react-server\": {\n\t\t\t\tmodule: \"./component-blocks/dist/keystatic-core-component-blocks.react-server.esm.js\",\n\t\t\t\t\"import\": \"./component-blocks/dist/keystatic-core-component-blocks.react-server.cjs.mjs\",\n\t\t\t\t\"default\": \"./component-blocks/dist/keystatic-core-component-blocks.react-server.cjs.js\"\n\t\t\t},\n\t\t\tmodule: \"./component-blocks/dist/keystatic-core-component-blocks.esm.js\",\n\t\t\t\"import\": \"./component-blocks/dist/keystatic-core-component-blocks.cjs.mjs\",\n\t\t\t\"default\": \"./component-blocks/dist/keystatic-core-component-blocks.cjs.js\"\n\t\t},\n\t\t\"./form/fields/markdoc\": {\n\t\t\ttypes: {\n\t\t\t\t\"import\": \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.cjs.mjs\",\n\t\t\t\t\"default\": \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.cjs.js\"\n\t\t\t},\n\t\t\tnode: {\n\t\t\t\t\"react-server\": {\n\t\t\t\t\tmodule: \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.node.react-server.esm.js\",\n\t\t\t\t\t\"import\": \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.node.react-server.cjs.mjs\",\n\t\t\t\t\t\"default\": \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.node.react-server.cjs.js\"\n\t\t\t\t},\n\t\t\t\tmodule: \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.node.esm.js\",\n\t\t\t\t\"import\": \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.node.cjs.mjs\",\n\t\t\t\t\"default\": \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.node.cjs.js\"\n\t\t\t},\n\t\t\t\"react-server\": {\n\t\t\t\tmodule: \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.react-server.esm.js\",\n\t\t\t\t\"import\": \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.react-server.cjs.mjs\",\n\t\t\t\t\"default\": \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.react-server.cjs.js\"\n\t\t\t},\n\t\t\tmodule: \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.esm.js\",\n\t\t\t\"import\": \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.cjs.mjs\",\n\t\t\t\"default\": \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.cjs.js\"\n\t\t},\n\t\t\"./package.json\": \"./package.json\"\n\t},\n\tmain: \"dist/keystatic-core.cjs.js\",\n\tmodule: \"dist/keystatic-core.esm.js\",\n\tfiles: [\n\t\t\"dist\",\n\t\t\"api\",\n\t\t\"reader\",\n\t\t\"renderer\",\n\t\t\"ui\",\n\t\t\"form\",\n\t\t\"component-blocks\",\n\t\t\"content-components\"\n\t],\n\tscripts: {\n\t\tsetup: \"ts-gql build && tsx scripts/l10n.ts && tsx scripts/build-prism.ts\",\n\t\tbuild: \"pnpm run setup && next build\",\n\t\tdev: \"next dev\",\n\t\tstart: \"next start\"\n\t},\n\tdependencies: {\n\t\t\"@babel/runtime\": \"^7.18.3\",\n\t\t\"@braintree/sanitize-url\": \"^6.0.2\",\n\t\t\"@emotion/css\": \"^11.9.0\",\n\t\t\"@emotion/weak-memoize\": \"^0.3.0\",\n\t\t\"@floating-ui/react\": \"^0.24.0\",\n\t\t\"@internationalized/string\": \"^3.1.1\",\n\t\t\"@keystar/ui\": \"^0.4.9\",\n\t\t\"@markdoc/markdoc\": \"^0.3.0\",\n\t\t\"@react-aria/focus\": \"^3.14.3\",\n\t\t\"@react-aria/i18n\": \"^3.8.0\",\n\t\t\"@react-aria/interactions\": \"^3.19.1\",\n\t\t\"@react-aria/overlays\": \"^3.18.1\",\n\t\t\"@react-aria/selection\": \"^3.17.1\",\n\t\t\"@react-aria/utils\": \"^3.21.1\",\n\t\t\"@react-aria/visually-hidden\": \"^3.8.6\",\n\t\t\"@react-stately/collections\": \"^3.10.2\",\n\t\t\"@react-stately/list\": \"^3.10.0\",\n\t\t\"@react-stately/overlays\": \"^3.6.3\",\n\t\t\"@react-stately/utils\": \"^3.8.0\",\n\t\t\"@react-types/shared\": \"^3.21.0\",\n\t\t\"@sindresorhus/slugify\": \"^1.1.2\",\n\t\t\"@ts-gql/tag\": \"^0.7.0\",\n\t\t\"@types/node\": \"16.11.13\",\n\t\t\"@types/react\": \"^18.2.8\",\n\t\t\"@types/react-dom\": \"^18.0.11\",\n\t\t\"@urql/core\": \"^4.1.3\",\n\t\t\"@urql/exchange-auth\": \"^2.1.6\",\n\t\t\"@urql/exchange-graphcache\": \"^6.3.3\",\n\t\t\"@urql/exchange-persisted\": \"^4.1.0\",\n\t\tcookie: \"^0.5.0\",\n\t\temery: \"^1.4.1\",\n\t\t\"escape-string-regexp\": \"^4.0.0\",\n\t\t\"fast-deep-equal\": \"^3.1.3\",\n\t\tgraphql: \"^16.6.0\",\n\t\t\"idb-keyval\": \"^6.2.1\",\n\t\tignore: \"^5.2.4\",\n\t\t\"iron-webcrypto\": \"^0.10.1\",\n\t\t\"is-hotkey\": \"^0.2.0\",\n\t\t\"js-base64\": \"^3.7.5\",\n\t\t\"js-yaml\": \"^4.1.0\",\n\t\t\"lru-cache\": \"^7.14.1\",\n\t\t\"match-sorter\": \"^6.3.1\",\n\t\t\"mdast-util-from-markdown\": \"^0.8.5\",\n\t\t\"mdast-util-gfm-autolink-literal\": \"^0.1.3\",\n\t\t\"mdast-util-gfm-strikethrough\": \"^0.2.3\",\n\t\t\"micromark-extension-gfm-autolink-literal\": \"0.5.7\",\n\t\t\"micromark-extension-gfm-strikethrough\": \"0.6.5\",\n\t\tminimatch: \"^7.1.0\",\n\t\t\"prosemirror-commands\": \"^1.5.1\",\n\t\t\"prosemirror-history\": \"^1.3.0\",\n\t\t\"prosemirror-keymap\": \"^1.2.1\",\n\t\t\"prosemirror-model\": \"^1.19.0\",\n\t\t\"prosemirror-state\": \"^1.4.2\",\n\t\t\"prosemirror-tables\": \"^1.3.4\",\n\t\t\"prosemirror-transform\": \"^1.7.1\",\n\t\t\"prosemirror-view\": \"^1.30.2\",\n\t\t\"scroll-into-view-if-needed\": \"^3.0.3\",\n\t\tslate: \"^0.91.4\",\n\t\t\"slate-history\": \"^0.86.0\",\n\t\t\"slate-react\": \"^0.91.9\",\n\t\turql: \"^4.0.0\",\n\t\tzod: \"^3.20.2\"\n\t},\n\tdevDependencies: {\n\t\t\"@jest/expect\": \"^29.7.0\",\n\t\t\"@jest/globals\": \"^29.7.0\",\n\t\t\"@testing-library/user-event\": \"^14.4.3\",\n\t\t\"@ts-gql/compiler\": \"^0.16.1\",\n\t\t\"@ts-gql/eslint-plugin\": \"^0.8.5\",\n\t\t\"@ts-gql/next\": \"^17.0.0\",\n\t\t\"@types/cookie\": \"^0.5.1\",\n\t\t\"@types/is-hotkey\": \"^0.1.7\",\n\t\t\"@types/js-yaml\": \"^4.0.5\",\n\t\t\"@types/prismjs\": \"^1.26.0\",\n\t\t\"@types/signal-exit\": \"^3.0.1\",\n\t\teslint: \"^8.18.0\",\n\t\t\"fast-glob\": \"^3.2.12\",\n\t\t\"jest-diff\": \"^29.0.1\",\n\t\toutdent: \"^0.8.0\",\n\t\t\"pretty-format\": \"^29.0.1\",\n\t\tprismjs: \"^1.29.0\",\n\t\treact: \"^18.2.0\",\n\t\t\"react-dom\": \"^18.2.0\",\n\t\t\"react-element-to-jsx-string\": \"^15.0.0\",\n\t\t\"resize-observer-polyfill\": \"^1.5.1\",\n\t\t\"signal-exit\": \"^3.0.7\",\n\t\t\"slate-hyperscript\": \"^0.77.0\",\n\t\ttsx: \"^3.8.0\",\n\t\ttypescript: \"^5.2.2\"\n\t},\n\tpeerDependencies: {\n\t\treact: \"^18.2.0\",\n\t\t\"react-dom\": \"^18.2.0\"\n\t},\n\tpreconstruct: {\n\t\tentrypoints: [\n\t\t\t\"index.ts\",\n\t\t\t\"api/generic.ts\",\n\t\t\t\"api/utils.ts\",\n\t\t\t\"reader/index.ts\",\n\t\t\t\"reader/github.ts\",\n\t\t\t\"renderer.tsx\",\n\t\t\t\"ui.tsx\",\n\t\t\t\"form/fields/markdoc/index.tsx\",\n\t\t\t\"component-blocks/index.tsx\",\n\t\t\t\"content-components.ts\"\n\t\t]\n\t},\n\t\"ts-gql\": {\n\t\tschema: \"./github.graphql\",\n\t\tmode: \"no-transform\",\n\t\taddTypename: false,\n\t\tscalars: {\n\t\t\tGitObjectID: \"string\"\n\t\t}\n\t},\n\timports: {\n\t\t\"#react-cache-in-react-server\": {\n\t\t\t\"react-server\": \"./src/reader/react-server-cache.ts\",\n\t\t\t\"default\": \"./src/reader/noop-cache.ts\"\n\t\t},\n\t\t\"#sha1\": {\n\t\t\tnode: \"./src/sha1/node.ts\",\n\t\t\t\"default\": \"./src/sha1/webcrypto.ts\"\n\t\t},\n\t\t\"#webcrypto\": {\n\t\t\tnode: \"./src/api/webcrypto/node.ts\",\n\t\t\t\"default\": \"./src/api/webcrypto/default.ts\"\n\t\t},\n\t\t\"#api-handler\": {\n\t\t\tnode: \"./src/api/api-node.ts\",\n\t\t\t\"default\": \"./src/api/api-noop.ts\"\n\t\t},\n\t\t\"#field-ui/*\": {\n\t\t\t\"react-server\": \"./src/form/fields/empty-field-ui.tsx\",\n\t\t\t\"default\": \"./src/form/fields/*/ui.tsx\"\n\t\t},\n\t\t\"#component-block-primitives\": {\n\t\t\t\"react-server\": \"./src/form/fields/document/DocumentEditor/primitives/blank-for-react-server.tsx\",\n\t\t\t\"default\": \"./src/form/fields/document/DocumentEditor/primitives/index.tsx\"\n\t\t},\n\t\t\"#cloud-image-preview\": {\n\t\t\t\"react-server\": \"./src/component-blocks/blank-for-react-server.tsx\",\n\t\t\t\"default\": \"./src/component-blocks/cloud-image-preview.tsx\"\n\t\t}\n\t}\n};\n\nfunction object(fields, opts) {\n  return {\n    ...opts,\n    kind: 'object',\n    fields\n  };\n}\n\nfunction pluralize(count, options) {\n  const {\n    singular,\n    plural = singular + 's',\n    inclusive = true\n  } = options;\n  const variant = count === 1 ? singular : plural;\n  return inclusive ? `${count} ${variant}` : variant;\n}\nfunction getBranchPrefix(config) {\n  return config.storage.kind !== 'local' ? config.storage.branchPrefix : undefined;\n}\nfunction isGitHubConfig(config) {\n  return config.storage.kind === 'github';\n}\nfunction isLocalConfig(config) {\n  return config.storage.kind === 'local';\n}\nfunction isCloudConfig(config) {\n  var _config$cloud;\n  if (config.storage.kind !== 'cloud') return false;\n  if (!((_config$cloud = config.cloud) !== null && _config$cloud !== void 0 && _config$cloud.project) || !config.cloud.project.includes('/')) {\n    throw new Error(`Keystatic is set to \\`storage: { kind: 'cloud' }\\` but \\`cloud.project\\` isn't set.\nconfig({\n  storage: { kind: 'cloud' },\n  cloud: { project: 'team/project' },\n})`);\n  }\n  return true;\n}\nfunction getSplitCloudProject(config) {\n  var _config$cloud2;\n  if (!((_config$cloud2 = config.cloud) !== null && _config$cloud2 !== void 0 && _config$cloud2.project)) return undefined;\n  const [team, project] = config.cloud.project.split('/');\n  return {\n    team,\n    project\n  };\n}\nfunction getRepoPath(config) {\n  return `${config.mainOwner}/${config.mainRepo}`;\n}\nfunction getRepoUrl(config) {\n  return `https://github.com/${getRepoPath(config)}`;\n}\nfunction getSlugFromState(collectionConfig, state) {\n  const value = state[collectionConfig.slugField];\n  const field = collectionConfig.schema[collectionConfig.slugField];\n  if (field.kind !== 'form' || field.formKind !== 'slug') {\n    throw new Error(`slugField is not a slug field`);\n  }\n  return field.serializeWithSlug(value).slug;\n}\nfunction getEntriesInCollectionWithTreeKey(config, collection, rootTree) {\n  var _getTreeNodeAtPath$ch, _getTreeNodeAtPath;\n  const collectionConfig = config.collections[collection];\n  const schema = object(collectionConfig.schema);\n  const formatInfo = getCollectionFormat(config, collection);\n  const extension = getDataFileExtension(formatInfo);\n  const glob = getSlugGlobForCollection(config, collection);\n  const collectionPath = getCollectionPath(config, collection);\n  const directory = (_getTreeNodeAtPath$ch = (_getTreeNodeAtPath = getTreeNodeAtPath(rootTree, collectionPath)) === null || _getTreeNodeAtPath === void 0 ? void 0 : _getTreeNodeAtPath.children) !== null && _getTreeNodeAtPath$ch !== void 0 ? _getTreeNodeAtPath$ch : new Map();\n  const entries = [];\n  const directoriesUsedInSchema = [...collectDirectoriesUsedInSchema(schema)];\n  const suffix = getCollectionItemSlugSuffix(config, collection);\n  const possibleEntries = new Map(directory);\n  if (glob === '**') {\n    const handleDirectory = (dir, prefix) => {\n      for (const [key, entry] of dir) {\n        if (entry.children) {\n          possibleEntries.set(`${prefix}${key}`, entry);\n          handleDirectory(entry.children, `${prefix}${key}/`);\n        } else {\n          possibleEntries.set(`${prefix}${key}`, entry);\n        }\n      }\n    };\n    handleDirectory(directory, '');\n  }\n  for (const [key, entry] of possibleEntries) {\n    if (formatInfo.dataLocation === 'index') {\n      var _actualEntry$children;\n      const actualEntry = getTreeNodeAtPath(rootTree, getCollectionItemPath(config, collection, key));\n      if (!(actualEntry !== null && actualEntry !== void 0 && (_actualEntry$children = actualEntry.children) !== null && _actualEntry$children !== void 0 && _actualEntry$children.has('index' + extension))) continue;\n      entries.push({\n        key: getTreeKey([actualEntry.entry.path, ...directoriesUsedInSchema.map(x => `${x}/${key}`)], rootTree),\n        slug: key\n      });\n    } else {\n      if (suffix) {\n        const newEntry = getTreeNodeAtPath(rootTree, getCollectionItemPath(config, collection, key) + extension);\n        if (!newEntry || newEntry.children) continue;\n        entries.push({\n          key: getTreeKey([entry.entry.path, getCollectionItemPath(config, collection, key), ...directoriesUsedInSchema.map(x => `${x}/${key}`)], rootTree),\n          slug: key\n        });\n      }\n      if (entry.children || !key.endsWith(extension)) continue;\n      const slug = key.slice(0, -extension.length);\n      entries.push({\n        key: getTreeKey([entry.entry.path, getCollectionItemPath(config, collection, slug), ...directoriesUsedInSchema.map(x => `${x}/${slug}`)], rootTree),\n        slug\n      });\n    }\n  }\n  return entries;\n}\nconst KEYSTATIC_CLOUD_API_URL = 'https://api.keystatic.cloud';\nconst KEYSTATIC_CLOUD_HEADERS = {\n  'x-keystatic-version': pkgJson.version\n};\nconst textEncoder$1 = new TextEncoder();\nasync function redirectToCloudAuth(from, config) {\n  var _config$cloud3;\n  if (!((_config$cloud3 = config.cloud) !== null && _config$cloud3 !== void 0 && _config$cloud3.project)) {\n    throw new Error('Not a cloud config');\n  }\n  const code_verifier = (0,js_base64__WEBPACK_IMPORTED_MODULE_97__.fromUint8Array)(crypto.getRandomValues(new Uint8Array(32)), true);\n  const code_challenge = (0,js_base64__WEBPACK_IMPORTED_MODULE_97__.fromUint8Array)(new Uint8Array(await crypto.subtle.digest('SHA-256', textEncoder$1.encode(code_verifier))), true);\n  const state = (0,js_base64__WEBPACK_IMPORTED_MODULE_97__.fromUint8Array)(crypto.getRandomValues(new Uint8Array(32)), true);\n  localStorage.setItem('keystatic-cloud-state', JSON.stringify({\n    state,\n    from,\n    code_verifier\n  }));\n  const url = new URL(`${KEYSTATIC_CLOUD_API_URL}/oauth/authorize`);\n  url.searchParams.set('state', state);\n  url.searchParams.set('client_id', config.cloud.project);\n  url.searchParams.set('redirect_uri', `${window.location.origin}/keystatic/cloud/oauth/callback`);\n  url.searchParams.set('response_type', 'code');\n  url.searchParams.set('code_challenge_method', 'S256');\n  url.searchParams.set('code_challenge', code_challenge);\n  url.searchParams.set('keystatic_version', pkgJson.version);\n  window.location.href = url.toString();\n}\n\nconst storedTokenSchema = zod__WEBPACK_IMPORTED_MODULE_98__.z.object({\n  token: zod__WEBPACK_IMPORTED_MODULE_98__.z.string(),\n  project: zod__WEBPACK_IMPORTED_MODULE_98__.z.string(),\n  validUntil: zod__WEBPACK_IMPORTED_MODULE_98__.z.number().transform(val => new Date(val))\n});\nfunction getSyncAuth(config) {\n  if (typeof document === 'undefined') {\n    return null;\n  }\n  if (config.storage.kind === 'github') {\n    const cookies = (0,cookie__WEBPACK_IMPORTED_MODULE_60__.parse)(document.cookie);\n    const accessToken = cookies['keystatic-gh-access-token'];\n    if (!accessToken) {\n      return null;\n    }\n    return {\n      accessToken\n    };\n  }\n  if (config.storage.kind === 'cloud') {\n    return getCloudAuth(config);\n  }\n  return null;\n}\nfunction getCloudAuth(config) {\n  var _config$cloud;\n  if (!((_config$cloud = config.cloud) !== null && _config$cloud !== void 0 && _config$cloud.project)) return null;\n  const unparsedTokenData = localStorage.getItem('keystatic-cloud-access-token');\n  let tokenData;\n  try {\n    tokenData = storedTokenSchema.parse(JSON.parse(unparsedTokenData));\n  } catch (err) {\n    return null;\n  }\n  if (!tokenData || tokenData.validUntil < new Date() || tokenData.project !== config.cloud.project) {\n    return null;\n  }\n  return {\n    accessToken: tokenData.token\n  };\n}\nasync function getAuth(config) {\n  const token = getSyncAuth(config);\n  if (config.storage.kind === 'github' && !token) {\n    try {\n      const res = await fetch('/api/keystatic/github/refresh-token', {\n        method: 'POST'\n      });\n      if (res.status === 200) {\n        const cookies = (0,cookie__WEBPACK_IMPORTED_MODULE_60__.parse)(document.cookie);\n        const accessToken = cookies['keystatic-gh-access-token'];\n        if (accessToken) {\n          return {\n            accessToken\n          };\n        }\n      }\n    } catch {}\n    return null;\n  }\n  return token;\n}\n\nconst SidebarFooter_viewer = (0,_ts_gql_tag_no_transform__WEBPACK_IMPORTED_MODULE_59__.gql)`\n  fragment SidebarFooter_viewer on User {\n    id\n    name\n    login\n    avatarUrl\n    databaseId\n  }\n`;\nconst ViewerContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)(undefined);\nfunction useViewer() {\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(ViewerContext);\n}\n\nfunction parseRepoConfig(repo) {\n  if (typeof repo === 'string') {\n    const [owner, name] = repo.split('/');\n    return {\n      owner,\n      name\n    };\n  }\n  return repo;\n}\nfunction serializeRepoConfig(repo) {\n  if (typeof repo === 'string') {\n    return repo;\n  }\n  return `${repo.owner}/${repo.name}`;\n}\nfunction assertValidRepoConfig(repo) {\n  if (typeof repo === 'string') {\n    if (!repo.includes('/')) {\n      throw new Error(`Invalid repo config: ${repo}. It must be in the form owner/name`);\n    }\n  }\n  if (typeof repo === 'object') {\n    if (!repo.owner && !repo.name) {\n      throw new Error(`Invalid repo config: owner and name are missing`);\n    }\n    if (!repo.owner) {\n      throw new Error(`Invalid repo config: owner is missing`);\n    }\n    if (!repo.name) {\n      throw new Error(`Invalid repo config: name is missing`);\n    }\n  }\n}\n\nfunction scopeEntriesWithPathPrefix(tree, config) {\n  const prefix = getPathPrefix(config.storage);\n  if (!prefix) return tree;\n  const newEntries = [];\n  for (const entry of tree.entries.values()) {\n    if (entry.path.startsWith(prefix)) {\n      newEntries.push({\n        ...entry,\n        path: entry.path.slice(prefix.length)\n      });\n    }\n  }\n  return {\n    entries: new Map(newEntries.map(entry => [entry.path, entry])),\n    tree: treeEntriesToTreeNodes(newEntries)\n  };\n}\n\nfunction fetchLocalTree(sha) {\n  if (treeCache.has(sha)) {\n    return treeCache.get(sha);\n  }\n  const promise = fetch('/api/keystatic/tree', {\n    headers: {\n      'no-cors': '1'\n    }\n  }).then(x => x.json()).then(async entries => hydrateTreeCacheWithEntries(entries));\n  treeCache.set(sha, promise);\n  return promise;\n}\nfunction useSetTreeSha() {\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(SetTreeShaContext);\n}\nconst SetTreeShaContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)(() => {\n  throw new Error('SetTreeShaContext not set');\n});\nfunction LocalAppShellProvider(props) {\n  const [currentTreeSha, setCurrentTreeSha] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)('initial');\n  const tree = useData((0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => fetchLocalTree(currentTreeSha), [currentTreeSha]));\n  const allTreeData = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => ({\n    unscopedDefault: tree,\n    scoped: {\n      default: tree,\n      current: tree,\n      merged: mergeDataStates({\n        default: tree,\n        current: tree\n      })\n    }\n  }), [tree]);\n  const changedData = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {\n    if (allTreeData.scoped.merged.kind !== 'loaded') {\n      return {\n        collections: new Map(),\n        singletons: new Set()\n      };\n    }\n    return getChangedData(props.config, allTreeData.scoped.merged.data);\n  }, [allTreeData, props.config]);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(SetTreeShaContext.Provider, {\n    value: setCurrentTreeSha,\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ChangedContext.Provider, {\n      value: changedData,\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(TreeContext.Provider, {\n        value: allTreeData,\n        children: props.children\n      })\n    })\n  });\n}\nconst cloudInfoSchema = zod__WEBPACK_IMPORTED_MODULE_98__.z.object({\n  user: zod__WEBPACK_IMPORTED_MODULE_98__.z.object({\n    name: zod__WEBPACK_IMPORTED_MODULE_98__.z.string(),\n    email: zod__WEBPACK_IMPORTED_MODULE_98__.z.string(),\n    avatarUrl: zod__WEBPACK_IMPORTED_MODULE_98__.z.string().optional()\n  }),\n  project: zod__WEBPACK_IMPORTED_MODULE_98__.z.object({\n    name: zod__WEBPACK_IMPORTED_MODULE_98__.z.string()\n  }),\n  team: zod__WEBPACK_IMPORTED_MODULE_98__.z.object({\n    name: zod__WEBPACK_IMPORTED_MODULE_98__.z.string(),\n    slug: zod__WEBPACK_IMPORTED_MODULE_98__.z.string(),\n    images: zod__WEBPACK_IMPORTED_MODULE_98__.z.boolean()\n  })\n});\nconst CloudInfo = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)(null);\nfunction useCloudInfo() {\n  const context = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(CloudInfo);\n  return context === 'unauthorized' ? null : context;\n}\nfunction useRawCloudInfo() {\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(CloudInfo);\n}\nfunction CloudInfoProvider(props) {\n  const data = useData((0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(async () => {\n    var _props$config$cloud, _getCloudAuth;\n    if (!((_props$config$cloud = props.config.cloud) !== null && _props$config$cloud !== void 0 && _props$config$cloud.project)) throw new Error('no cloud project set');\n    const token = (_getCloudAuth = getCloudAuth(props.config)) === null || _getCloudAuth === void 0 ? void 0 : _getCloudAuth.accessToken;\n    if (!token) {\n      return 'unauthorized';\n    }\n    const res = await fetch(`${KEYSTATIC_CLOUD_API_URL}/v1/info`, {\n      headers: {\n        ...KEYSTATIC_CLOUD_HEADERS,\n        Authorization: `Bearer ${token}`\n      }\n    });\n    if (res.status === 401) return 'unauthorized';\n    return cloudInfoSchema.parse(await res.json());\n  }, [props.config]));\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(CloudInfo.Provider, {\n    value: data.kind === 'loaded' ? data.data : null,\n    children: props.children\n  });\n}\nconst GitHubAppShellDataContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)(null);\nfunction GitHubAppShellDataProvider(props) {\n  const [state] = (0,urql__WEBPACK_IMPORTED_MODULE_99__.useQuery)({\n    query: props.config.storage.kind === 'github' ? GitHubAppShellQuery : CloudAppShellQuery,\n    variables: props.config.storage.kind === 'github' ? parseRepoConfig(props.config.storage.repo) : {\n      name: 'repo-name',\n      owner: 'repo-owner'\n    }\n  });\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(GitHubAppShellDataContext.Provider, {\n    value: state,\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ViewerContext.Provider, {\n      value: state.data && 'viewer' in state.data ? state.data.viewer : undefined,\n      children: props.children\n    })\n  });\n}\nconst writePermissions = new Set(['WRITE', 'ADMIN', 'MAINTAIN']);\nfunction GitHubAppShellProvider(props) {\n  var _repo, _repo3, _defaultBranchRef$tar, _currentBranchRef$tar, _currentBranchRef$tar2, _currentBranchRef$tar3, _repo5, _repo8, _repo9, _currentBranchRef$ass, _repo15, _repo16, _repo17, _data$repository3, _data$repository4, _repo18;\n  const router = useRouter();\n  const {\n    data,\n    error\n  } = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(GitHubAppShellDataContext);\n  let repo = data === null || data === void 0 ? void 0 : data.repository;\n  if (repo && 'viewerPermission' in repo && repo.viewerPermission && !writePermissions.has(repo.viewerPermission) && 'forks' in repo) {\n    var _repo$forks$nodes$, _repo$forks;\n    repo = (_repo$forks$nodes$ = (_repo$forks = repo.forks) === null || _repo$forks === void 0 || (_repo$forks = _repo$forks.nodes) === null || _repo$forks === void 0 ? void 0 : _repo$forks[0]) !== null && _repo$forks$nodes$ !== void 0 ? _repo$forks$nodes$ : repo;\n  }\n  const defaultBranchRef = (_repo = repo) === null || _repo === void 0 || (_repo = _repo.refs) === null || _repo === void 0 || (_repo = _repo.nodes) === null || _repo === void 0 ? void 0 : _repo.find(x => {\n    var _repo2;\n    return (x === null || x === void 0 ? void 0 : x.name) === ((_repo2 = repo) === null || _repo2 === void 0 || (_repo2 = _repo2.defaultBranchRef) === null || _repo2 === void 0 ? void 0 : _repo2.name);\n  });\n  const currentBranchRef = (_repo3 = repo) === null || _repo3 === void 0 || (_repo3 = _repo3.refs) === null || _repo3 === void 0 || (_repo3 = _repo3.nodes) === null || _repo3 === void 0 ? void 0 : _repo3.find(x => (x === null || x === void 0 ? void 0 : x.name) === props.currentBranch);\n  const defaultBranchTreeSha = (_defaultBranchRef$tar = defaultBranchRef === null || defaultBranchRef === void 0 ? void 0 : defaultBranchRef.target.tree.oid) !== null && _defaultBranchRef$tar !== void 0 ? _defaultBranchRef$tar : null;\n  const currentBranchTreeSha = (_currentBranchRef$tar = currentBranchRef === null || currentBranchRef === void 0 ? void 0 : currentBranchRef.target.tree.oid) !== null && _currentBranchRef$tar !== void 0 ? _currentBranchRef$tar : null;\n  const baseCommit = (_currentBranchRef$tar2 = currentBranchRef === null || currentBranchRef === void 0 || (_currentBranchRef$tar3 = currentBranchRef.target) === null || _currentBranchRef$tar3 === void 0 ? void 0 : _currentBranchRef$tar3.oid) !== null && _currentBranchRef$tar2 !== void 0 ? _currentBranchRef$tar2 : null;\n  const defaultBranchTree = useGitHubTreeData(defaultBranchTreeSha, props.config);\n  const currentBranchTree = useGitHubTreeData(currentBranchTreeSha, props.config);\n  const allTreeData = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {\n    const scopedDefault = mapDataState(defaultBranchTree, tree => scopeEntriesWithPathPrefix(tree, props.config));\n    const scopedCurrent = mapDataState(currentBranchTree, tree => scopeEntriesWithPathPrefix(tree, props.config));\n    return {\n      unscopedDefault: currentBranchTree,\n      scoped: {\n        default: scopedDefault,\n        current: scopedCurrent,\n        merged: mergeDataStates({\n          default: scopedDefault,\n          current: scopedCurrent\n        })\n      }\n    };\n  }, [currentBranchTree, defaultBranchTree, props.config]);\n  const changedData = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {\n    if (allTreeData.scoped.merged.kind !== 'loaded') {\n      return {\n        collections: new Map(),\n        singletons: new Set()\n      };\n    }\n    return getChangedData(props.config, allTreeData.scoped.merged.data);\n  }, [allTreeData, props.config]);\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    var _error$response, _repo4;\n    if ((error === null || error === void 0 || (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n      if (isGitHubConfig(props.config)) {\n        window.location.href = `/api/keystatic/github/login?from=${router.params.map(encodeURIComponent).join('/')}`;\n      } else {\n        redirectToCloudAuth(router.params.map(encodeURIComponent).join('/'), props.config);\n      }\n    }\n    if (!((_repo4 = repo) !== null && _repo4 !== void 0 && _repo4.id) && error !== null && error !== void 0 && error.graphQLErrors.some(err => {\n      var _err$originalError, _err$originalError2;\n      return (err === null || err === void 0 || (_err$originalError = err.originalError) === null || _err$originalError === void 0 ? void 0 : _err$originalError.type) === 'NOT_FOUND' || (err === null || err === void 0 || (_err$originalError2 = err.originalError) === null || _err$originalError2 === void 0 ? void 0 : _err$originalError2.type) === 'FORBIDDEN';\n    })) {\n      window.location.href = `/api/keystatic/github/repo-not-found?from=${router.params.map(encodeURIComponent).join('/')}`;\n    }\n  }, [error, router, (_repo5 = repo) === null || _repo5 === void 0 ? void 0 : _repo5.id, props.config]);\n  const baseInfo = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {\n    var _repo$id, _repo6, _repo$isPrivate, _repo7;\n    return {\n      baseCommit: baseCommit || '',\n      repositoryId: (_repo$id = (_repo6 = repo) === null || _repo6 === void 0 ? void 0 : _repo6.id) !== null && _repo$id !== void 0 ? _repo$id : '',\n      isPrivate: (_repo$isPrivate = (_repo7 = repo) === null || _repo7 === void 0 ? void 0 : _repo7.isPrivate) !== null && _repo$isPrivate !== void 0 ? _repo$isPrivate : true\n    };\n  }, [baseCommit, (_repo8 = repo) === null || _repo8 === void 0 ? void 0 : _repo8.id, (_repo9 = repo) === null || _repo9 === void 0 ? void 0 : _repo9.isPrivate]);\n  const pullRequestNumber = currentBranchRef === null || currentBranchRef === void 0 || (_currentBranchRef$ass = currentBranchRef.associatedPullRequests.nodes) === null || _currentBranchRef$ass === void 0 || (_currentBranchRef$ass = _currentBranchRef$ass[0]) === null || _currentBranchRef$ass === void 0 ? void 0 : _currentBranchRef$ass.number;\n  const branchInfo = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {\n    var _repo$defaultBranchRe, _repo10, _repo$id2, _repo11, _repo$refs$nodes$map$, _repo12, _repo13, _repo14, _data$repository$owne, _data$repository, _data$repository$name, _data$repository2;\n    return {\n      defaultBranch: (_repo$defaultBranchRe = (_repo10 = repo) === null || _repo10 === void 0 || (_repo10 = _repo10.defaultBranchRef) === null || _repo10 === void 0 ? void 0 : _repo10.name) !== null && _repo$defaultBranchRe !== void 0 ? _repo$defaultBranchRe : '',\n      currentBranch: props.currentBranch,\n      baseCommit: baseCommit || '',\n      repositoryId: (_repo$id2 = (_repo11 = repo) === null || _repo11 === void 0 ? void 0 : _repo11.id) !== null && _repo$id2 !== void 0 ? _repo$id2 : '',\n      allBranches: (_repo$refs$nodes$map$ = (_repo12 = repo) === null || _repo12 === void 0 || (_repo12 = _repo12.refs) === null || _repo12 === void 0 || (_repo12 = _repo12.nodes) === null || _repo12 === void 0 ? void 0 : _repo12.map(x => x === null || x === void 0 ? void 0 : x.name).filter(emery__WEBPACK_IMPORTED_MODULE_1__.isDefined)) !== null && _repo$refs$nodes$map$ !== void 0 ? _repo$refs$nodes$map$ : [],\n      pullRequestNumber,\n      branchNameToId: new Map((_repo13 = repo) === null || _repo13 === void 0 || (_repo13 = _repo13.refs) === null || _repo13 === void 0 || (_repo13 = _repo13.nodes) === null || _repo13 === void 0 ? void 0 : _repo13.filter(emery__WEBPACK_IMPORTED_MODULE_1__.isDefined).map(x => [x.name, x.id])),\n      branchNameToBaseCommit: new Map((_repo14 = repo) === null || _repo14 === void 0 || (_repo14 = _repo14.refs) === null || _repo14 === void 0 || (_repo14 = _repo14.nodes) === null || _repo14 === void 0 ? void 0 : _repo14.flatMap(x => x !== null && x !== void 0 && x.target ? [[x.name, x.target.oid]] : [])),\n      mainOwner: (_data$repository$owne = data === null || data === void 0 || (_data$repository = data.repository) === null || _data$repository === void 0 ? void 0 : _data$repository.owner.login) !== null && _data$repository$owne !== void 0 ? _data$repository$owne : '',\n      mainRepo: (_data$repository$name = data === null || data === void 0 || (_data$repository2 = data.repository) === null || _data$repository2 === void 0 ? void 0 : _data$repository2.name) !== null && _data$repository$name !== void 0 ? _data$repository$name : ''\n    };\n  }, [(_repo15 = repo) === null || _repo15 === void 0 || (_repo15 = _repo15.defaultBranchRef) === null || _repo15 === void 0 ? void 0 : _repo15.name, (_repo16 = repo) === null || _repo16 === void 0 ? void 0 : _repo16.id, (_repo17 = repo) === null || _repo17 === void 0 || (_repo17 = _repo17.refs) === null || _repo17 === void 0 ? void 0 : _repo17.nodes, props.currentBranch, baseCommit, pullRequestNumber, data === null || data === void 0 || (_data$repository3 = data.repository) === null || _data$repository3 === void 0 ? void 0 : _data$repository3.owner.login, data === null || data === void 0 || (_data$repository4 = data.repository) === null || _data$repository4 === void 0 ? void 0 : _data$repository4.name]);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(RepoWithWriteAccessContext.Provider, {\n    value: repo && (props.config.storage.kind === 'cloud' || 'viewerPermission' in repo && (_repo18 = repo) !== null && _repo18 !== void 0 && _repo18.viewerPermission && writePermissions.has(repo.viewerPermission)) ? {\n      name: repo.name,\n      owner: repo.owner.login\n    } : null,\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(AppShellErrorContext.Provider, {\n      value: error,\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(BranchInfoContext.Provider, {\n        value: branchInfo,\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(BaseInfoContext.Provider, {\n          value: baseInfo,\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ChangedContext.Provider, {\n            value: changedData,\n            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(TreeContext.Provider, {\n              value: allTreeData,\n              children: props.children\n            })\n          })\n        })\n      })\n    })\n  });\n}\nconst AppShellErrorContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)(undefined);\nconst BaseInfoContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)({\n  baseCommit: '',\n  repositoryId: '',\n  isPrivate: true\n});\nconst ChangedContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)({\n  collections: new Map(),\n  singletons: new Set()\n});\nconst TreeContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)({\n  unscopedDefault: {\n    kind: 'loading'\n  },\n  scoped: {\n    current: {\n      kind: 'loading'\n    },\n    default: {\n      kind: 'loading'\n    },\n    merged: {\n      kind: 'loading'\n    }\n  }\n});\nfunction useTree() {\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(TreeContext).scoped;\n}\nfunction useCurrentUnscopedTree() {\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(TreeContext).unscopedDefault;\n}\nfunction useChanged() {\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(ChangedContext);\n}\nfunction useBaseCommit() {\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(BaseInfoContext).baseCommit;\n}\nfunction useIsRepoPrivate() {\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(BaseInfoContext).isPrivate;\n}\nfunction useRepositoryId() {\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(BaseInfoContext).repositoryId;\n}\nconst Ref_base = (0,_ts_gql_tag_no_transform__WEBPACK_IMPORTED_MODULE_59__.gql)`\n  fragment Ref_base on Ref {\n    id\n    name\n    target {\n      __typename\n      id\n      oid\n      ... on Commit {\n        tree {\n          id\n          oid\n        }\n      }\n    }\n    associatedPullRequests(states: [OPEN], first: 1) {\n      nodes {\n        id\n        number\n      }\n    }\n  }\n`;\nconst BaseRepo = (0,_ts_gql_tag_no_transform__WEBPACK_IMPORTED_MODULE_59__.gql)`\n  fragment Repo_base on Repository {\n    id\n    isPrivate\n    owner {\n      id\n      login\n    }\n    name\n    defaultBranchRef {\n      id\n      name\n    }\n    refs(refPrefix: \"refs/heads/\", first: 100) {\n      nodes {\n        ...Ref_base\n      }\n    }\n  }\n  ${Ref_base}\n`;\nconst CloudAppShellQuery = (0,_ts_gql_tag_no_transform__WEBPACK_IMPORTED_MODULE_59__.gql)`\n  query CloudAppShell($name: String!, $owner: String!) {\n    repository(owner: $owner, name: $name) {\n      id\n      ...Repo_base\n    }\n  }\n  ${BaseRepo}\n`;\nconst Repo_ghDirect = (0,_ts_gql_tag_no_transform__WEBPACK_IMPORTED_MODULE_59__.gql)`\n  fragment Repo_ghDirect on Repository {\n    id\n    ...Repo_base\n    viewerPermission\n  }\n  ${BaseRepo}\n`;\nconst Repo_primary = (0,_ts_gql_tag_no_transform__WEBPACK_IMPORTED_MODULE_59__.gql)`\n  fragment Repo_primary on Repository {\n    id\n    ...Repo_ghDirect\n    forks(affiliations: [OWNER], first: 1) {\n      nodes {\n        ...Repo_ghDirect\n      }\n    }\n  }\n  ${Repo_ghDirect}\n`;\nconst GitHubAppShellQuery = (0,_ts_gql_tag_no_transform__WEBPACK_IMPORTED_MODULE_59__.gql)`\n  query GitHubAppShell($name: String!, $owner: String!) {\n    repository(owner: $owner, name: $name) {\n      id\n      ...Repo_primary\n    }\n    viewer {\n      ...SidebarFooter_viewer\n    }\n  }\n  ${Repo_primary}\n  ${SidebarFooter_viewer}\n`;\nconst treeCache = new lru_cache__WEBPACK_IMPORTED_MODULE_100__[\"default\"]({\n  max: 40\n});\nasync function hydrateTreeCacheWithEntries(entries) {\n  const data = {\n    entries: new Map(entries.map(entry => [entry.path, entry])),\n    tree: treeEntriesToTreeNodes(entries)\n  };\n  const sha = await treeSha(data.tree);\n  treeCache.set(sha, data);\n  return data;\n}\nfunction fetchGitHubTreeData(sha, config) {\n  const cached = treeCache.get(sha);\n  if (cached) return cached;\n  const promise = getAuth(config).then(auth => {\n    if (!auth) throw new Error('Not authorized');\n    return fetch(config.storage.kind === 'github' ? `https://api.github.com/repos/${serializeRepoConfig(config.storage.repo)}/git/trees/${sha}?recursive=1` : `${KEYSTATIC_CLOUD_API_URL}/v1/github/trees/${sha}`, {\n      headers: {\n        Authorization: `Bearer ${auth.accessToken}`,\n        ...(config.storage.kind === 'cloud' ? KEYSTATIC_CLOUD_HEADERS : {})\n      }\n    }).then(x => x.json());\n  }).then(res => hydrateTreeCacheWithEntries(res.tree.map(({\n    url,\n    ...rest\n  }) => rest)));\n  treeCache.set(sha, promise);\n  return promise;\n}\nfunction useGitHubTreeData(sha, config) {\n  return useData((0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => sha ? fetchGitHubTreeData(sha, config) : LOADING, [sha, config]));\n}\nconst RepoWithWriteAccessContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)(null);\nconst BranchInfoContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)({\n  currentBranch: '',\n  allBranches: [],\n  defaultBranch: '',\n  pullRequestNumber: undefined,\n  branchNameToId: new Map(),\n  branchNameToBaseCommit: new Map(),\n  mainOwner: '',\n  mainRepo: ''\n});\nfunction useBranchInfo() {\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(BranchInfoContext);\n}\nfunction getChangedData(config, trees) {\n  var _config$collections, _config$singletons;\n  return {\n    collections: new Map(Object.keys((_config$collections = config.collections) !== null && _config$collections !== void 0 ? _config$collections : {}).map(collection => {\n      const currentBranch = new Map(getEntriesInCollectionWithTreeKey(config, collection, trees.current.tree).map(x => [x.slug, x.key]));\n      const defaultBranch = new Map(getEntriesInCollectionWithTreeKey(config, collection, trees.default.tree).map(x => [x.slug, x.key]));\n      const changed = new Set();\n      const added = new Set();\n      for (const [key, entry] of currentBranch) {\n        const defaultBranchEntry = defaultBranch.get(key);\n        if (defaultBranchEntry === undefined) {\n          added.add(key);\n          continue;\n        }\n        if (entry !== defaultBranchEntry) {\n          changed.add(key);\n        }\n      }\n      const removed = new Set([...defaultBranch.keys()].filter(key => !currentBranch.has(key)));\n      return [collection, {\n        removed,\n        added,\n        changed,\n        totalCount: currentBranch.size\n      }];\n    })),\n    singletons: new Set(Object.keys((_config$singletons = config.singletons) !== null && _config$singletons !== void 0 ? _config$singletons : {}).filter(singleton => {\n      var _getTreeNodeAtPath, _getTreeNodeAtPath2;\n      const singletonPath = getSingletonPath(config, singleton);\n      return ((_getTreeNodeAtPath = getTreeNodeAtPath(trees.current.tree, singletonPath)) === null || _getTreeNodeAtPath === void 0 ? void 0 : _getTreeNodeAtPath.entry.sha) !== ((_getTreeNodeAtPath2 = getTreeNodeAtPath(trees.default.tree, singletonPath)) === null || _getTreeNodeAtPath2 === void 0 ? void 0 : _getTreeNodeAtPath2.entry.sha);\n    }))\n  };\n}\n\nconst SIDE_PANEL_ID = 'keystatic-side-panel';\nconst MAIN_PANEL_ID = 'keystatic-main-panel';\n\nconst View = props => {\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Box, {\n    height: \"100%\",\n    minHeight: 0,\n    minWidth: 0,\n    ...props\n  });\n};\nconst ScrollView = props => {\n  let {\n    isDisabled,\n    ...otherProps\n  } = props;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(View, {\n    \"data-scrollable\": isDisabled ? undefined : true,\n    UNSAFE_className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n      '&[data-scrollable]': {\n        overflowY: 'auto',\n        WebkitOverflowScrolling: 'touch'\n      }\n    }),\n    ...otherProps\n  });\n};\n\n// Common\n// ----------------------------------------------------------------------------\n\n// Interface\n// ----------------------------------------------------------------------------\n\nconst NAVIGATION_DIVIDER_KEY = '---';\n\n// Storage\n// ----------------------------------------------------------------------------\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction config(config) {\n  return config;\n}\nfunction collection(collection) {\n  return collection;\n}\nfunction singleton(collection) {\n  return collection;\n}\n\n// Config context\n// -----------------------------------------------------------------------------\n\nconst ConfigContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)(null);\nfunction useConfig() {\n  const config = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(ConfigContext);\n  if (!config) {\n    throw new Error('ConfigContext.Provider not found');\n  }\n  return config;\n}\n\n// Meta context\n// -----------------------------------------------------------------------------\n\nconst AppStateContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)({\n  basePath: '/keystatic'\n});\nfunction useAppState() {\n  const appState = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(AppStateContext);\n  if (!appState) {\n    throw new Error('AppStateContext.Provider not found');\n  }\n  return appState;\n}\n\n// Page context\n// -----------------------------------------------------------------------------\n\nconst ContentPanelContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)('mobile');\nconst ContentPanelProvider = ContentPanelContext.Provider;\nfunction useContentPanelSize() {\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(ContentPanelContext);\n}\nfunction useContentPanelQuery(options) {\n  const sizes = ['mobile', 'tablet', 'desktop', 'wide'];\n  const size = useContentPanelSize();\n  const startIndex = 'above' in options ? sizes.indexOf(options.above) + 1 : 0;\n  const endIndex = 'below' in options ? sizes.indexOf(options.below) - 1 : sizes.length - 1;\n  const range = sizes.slice(startIndex, endIndex + 1);\n  return range.includes(size);\n}\n\n/** @private only used to initialize context */\nfunction useContentPanelState(ref) {\n  let [contentSize, setContentSize] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)('mobile');\n  const onResize = () => {\n    setContentSize(size => {\n      let contentPane = ref.current;\n      if (!contentPane) {\n        return size;\n      }\n      if (contentPane.offsetWidth >= _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.breakpoints.wide) {\n        return 'wide';\n      }\n      if (contentPane.offsetWidth >= _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.breakpoints.desktop) {\n        return 'desktop';\n      }\n      if (contentPane.offsetWidth >= _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.breakpoints.tablet) {\n        return 'tablet';\n      }\n      return 'mobile';\n    });\n  };\n  (0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_101__.useResizeObserver)({\n    ref,\n    onResize\n  });\n  return contentSize;\n}\n\nfunction useNavItems() {\n  var _config$ui;\n  let {\n    basePath\n  } = useAppState();\n  let config = useConfig();\n  let stringFormatter = (0,_react_aria_i18n__WEBPACK_IMPORTED_MODULE_102__.useLocalizedStringFormatter)(l10nMessages);\n  let changeMap = useChanged();\n  const collectionKeys = Object.keys(config.collections || {});\n  const singletonKeys = Object.keys(config.singletons || {});\n  const items = ((_config$ui = config.ui) === null || _config$ui === void 0 ? void 0 : _config$ui.navigation) || {\n    ...(!!collectionKeys.length && {\n      [stringFormatter.format('collections')]: collectionKeys\n    }),\n    ...(!!singletonKeys.length && {\n      [stringFormatter.format('singletons')]: singletonKeys\n    })\n  };\n  const options = {\n    basePath,\n    changeMap,\n    config\n  };\n  if (Array.isArray(items)) {\n    return items.map(key => populateItemData(key, options));\n  }\n  return Object.entries(items).map(([section, keys]) => ({\n    title: section,\n    children: keys.map(key => populateItemData(key, options))\n  }));\n}\nfunction populateItemData(key, options) {\n  let {\n    basePath,\n    changeMap,\n    config\n  } = options;\n\n  // divider\n  if (key === NAVIGATION_DIVIDER_KEY) {\n    return {\n      isDivider: true\n    };\n  }\n\n  // collection\n  if (config.collections && key in config.collections) {\n    const href = `${basePath}/collection/${encodeURIComponent(key)}`;\n    const changes = changeMap.collections.get(key);\n    const changed = changes ? changes.changed.size + changes.added.size + changes.removed.size : 0;\n    const label = config.collections[key].label;\n    return {\n      key,\n      href,\n      label,\n      changed,\n      entryCount: changes === null || changes === void 0 ? void 0 : changes.totalCount\n    };\n  }\n\n  // singleton\n  if (config.singletons && key in config.singletons) {\n    const href = `${basePath}/singleton/${encodeURIComponent(key)}`;\n    const changed = changeMap.singletons.has(key);\n    const label = config.singletons[key].label;\n    return {\n      key,\n      href,\n      label,\n      changed\n    };\n  }\n  throw new Error(`Unknown navigation key: \"${key}\".`);\n}\n\nfunction useBrand() {\n  var _config$ui, _config$ui2;\n  let {\n    colorScheme\n  } = (0,_keystar_ui_core__WEBPACK_IMPORTED_MODULE_84__.useProvider)();\n  let config = useConfig();\n  let prefersDark = (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.useMediaQuery)('(prefers-color-scheme: dark)');\n  let brandMark = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ZapLogo, {});\n  let brandName = 'Keystatic';\n  if ((_config$ui = config.ui) !== null && _config$ui !== void 0 && (_config$ui = _config$ui.brand) !== null && _config$ui !== void 0 && _config$ui.mark) {\n    let BrandMark = config.ui.brand.mark;\n    let resolvedColorScheme = colorScheme === 'auto' ? prefersDark ? 'dark' : 'light' : colorScheme;\n    brandMark = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(BrandMark, {\n      colorScheme: resolvedColorScheme\n    });\n  }\n  if ('repo' in config.storage) {\n    brandName = serializeRepoConfig(config.storage.repo);\n  }\n  if (config.cloud) {\n    brandName = config.cloud.project;\n  }\n  if ((_config$ui2 = config.ui) !== null && _config$ui2 !== void 0 && (_config$ui2 = _config$ui2.brand) !== null && _config$ui2 !== void 0 && _config$ui2.name) {\n    brandName = config.ui.brand.name;\n  }\n  return {\n    brandMark,\n    brandName\n  };\n}\nfunction ZapLogo() {\n  let id = 'brand-mark-gradient';\n  let size = 24;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(\"svg\", {\n    width: size,\n    height: size,\n    viewBox: \"0 0 32 32\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"path\", {\n      d: \"M18 8L14 24L12 32L30 14L18 8Z\",\n      fill: \"currentColor\"\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"path\", {\n      d: \"M2 18L20 0L18 8L2 18Z\",\n      fill: \"currentColor\"\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"path\", {\n      d: \"M18 8L2 18L14 24L18 8Z\",\n      fill: `url(#${id})`\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"defs\", {\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(\"linearGradient\", {\n        id: id,\n        x1: \"2\",\n        y1: \"18\",\n        x2: \"20\",\n        y2: \"14\",\n        gradientUnits: \"userSpaceOnUse\",\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"stop\", {\n          stopColor: \"currentColor\",\n          stopOpacity: \"0.2\"\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"stop\", {\n          offset: \"1\",\n          stopColor: \"currentColor\"\n        })]\n      })\n    })]\n  });\n}\n\nfunction BranchPicker() {\n  const {\n    allBranches,\n    currentBranch,\n    defaultBranch\n  } = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(BranchInfoContext);\n  const stringFormatter = (0,_react_aria_i18n__WEBPACK_IMPORTED_MODULE_102__.useLocalizedStringFormatter)(l10nMessages);\n  const router = useRouter();\n  const config = useConfig();\n  const branchPrefix = getBranchPrefix(config);\n  const items = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {\n    let defaultItems = allBranches.map(name => ({\n      id: name,\n      name\n    }));\n    if (defaultBranch) {\n      return [{\n        id: defaultBranch,\n        name: defaultBranch,\n        description: stringFormatter.format('defaultBranch')\n      }, ...defaultItems.filter(i => i.name !== defaultBranch)];\n    }\n    return defaultItems;\n  }, [allBranches, defaultBranch, stringFormatter]);\n  const filteredBranches = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => items.filter(item => item.name === defaultBranch || !branchPrefix || item.name.startsWith(branchPrefix) || item.name === currentBranch), [branchPrefix, currentBranch, defaultBranch, items]);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_combobox__WEBPACK_IMPORTED_MODULE_47__.Combobox, {\n    \"aria-label\": stringFormatter.format('currentBranch'),\n    defaultItems: filteredBranches // use `defaultItems` so the component handles filtering\n    ,\n    loadingState: filteredBranches.length === 0 ? 'loading' : undefined,\n    selectedKey: currentBranch,\n    onSelectionChange: key => {\n      if (typeof key === 'string') {\n        router.push(router.href.replace(/\\/branch\\/[^/]+/, '/branch/' + encodeURIComponent(key)));\n      }\n    },\n    menuTrigger: \"focus\",\n    flex: true,\n    children: item => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_combobox__WEBPACK_IMPORTED_MODULE_47__.Item, {\n      textValue: item.name,\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n        src: _keystar_ui_icon_icons_gitBranchIcon__WEBPACK_IMPORTED_MODULE_95__.gitBranchIcon\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n        truncate: true,\n        children: item.name\n      }), 'description' in item && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n        slot: \"description\",\n        children: item.description\n      })]\n    }, item.id)\n  });\n}\nfunction CreateBranchDialog(props) {\n  const config = useConfig();\n  const branchInfo = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(BranchInfoContext);\n  const isDefaultBranch = branchInfo.defaultBranch === branchInfo.currentBranch;\n  const stringFormatter = (0,_react_aria_i18n__WEBPACK_IMPORTED_MODULE_102__.useLocalizedStringFormatter)(l10nMessages);\n  const [{\n    error,\n    fetching\n  }, createBranch] = useCreateBranchMutation();\n  const repositoryId = useRepositoryId();\n  const createBranchSubmitButtonId = 'create-branch-submit-button';\n  const [branchName, setBranchName] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)('');\n  const [baseBranch, setBaseBranch] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(branchInfo.defaultBranch);\n  const branchPrefix = getBranchPrefix(config);\n  const propsForBranchPrefix = branchPrefix ? {\n    UNSAFE_className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n      '& input': {\n        paddingInlineStart: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.space.xsmall\n      }\n    }),\n    startElement: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n      alignItems: \"center\",\n      paddingStart: \"regular\",\n      justifyContent: \"center\",\n      pointerEvents: \"none\",\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n        color: \"neutralSecondary\",\n        children: branchPrefix\n      })\n    })\n  } : {};\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_12__.Dialog, {\n    size: \"small\",\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(\"form\", {\n      style: {\n        display: 'contents'\n      },\n      onSubmit: async event => {\n        var _result$data;\n        if (event.target !== event.currentTarget) return;\n        event.preventDefault();\n        const fullBranchName = (branchPrefix !== null && branchPrefix !== void 0 ? branchPrefix : '') + branchName;\n        const name = `refs/heads/${fullBranchName}`;\n        const result = await createBranch({\n          input: {\n            name,\n            oid: branchInfo.branchNameToBaseCommit.get(baseBranch),\n            repositoryId\n          }\n        });\n        if ((_result$data = result.data) !== null && _result$data !== void 0 && (_result$data = _result$data.createRef) !== null && _result$data !== void 0 && _result$data.__typename) {\n          props.onCreate(fullBranchName);\n        }\n      },\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Heading, {\n        children: stringFormatter.format('newBranch')\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_slots__WEBPACK_IMPORTED_MODULE_17__.Content, {\n        children: isDefaultBranch ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_text_field__WEBPACK_IMPORTED_MODULE_4__.TextField, {\n          value: branchName,\n          onChange: setBranchName,\n          label: stringFormatter.format('branchName')\n          // description=\"Your new branch will be based on the currently checked out branch, which is the default branch for this repository.\"\n          ,\n          autoFocus: true,\n          errorMessage: prettyErrorForCreateBranchMutation(error),\n          ...propsForBranchPrefix\n        }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Grid, {\n          gap: \"xlarge\",\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_text_field__WEBPACK_IMPORTED_MODULE_4__.TextField, {\n            label: stringFormatter.format('branchName'),\n            value: branchName,\n            onChange: setBranchName,\n            autoFocus: true,\n            errorMessage: prettyErrorForCreateBranchMutation(error),\n            ...propsForBranchPrefix\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_radio__WEBPACK_IMPORTED_MODULE_96__.RadioGroup, {\n            label: stringFormatter.format('basedOn'),\n            value: baseBranch,\n            onChange: setBaseBranch,\n            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_radio__WEBPACK_IMPORTED_MODULE_96__.Radio, {\n              value: branchInfo.defaultBranch,\n              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n                children: [branchInfo.defaultBranch, /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n                  visuallyHidden: true,\n                  children: \".\"\n                })]\n              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n                slot: \"description\",\n                children: stringFormatter.format('theDefaultBranchInYourRepository')\n              })]\n            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_radio__WEBPACK_IMPORTED_MODULE_96__.Radio, {\n              value: branchInfo.currentBranch,\n              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n                children: [branchInfo.currentBranch, /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n                  visuallyHidden: true,\n                  children: \".\"\n                })]\n              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n                slot: \"description\",\n                children: stringFormatter.format('theCurrentlyCheckedOutBranch')\n              })]\n            })]\n          })]\n        })\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_slots__WEBPACK_IMPORTED_MODULE_17__.Footer, {\n        UNSAFE_style: {\n          justifyContent: 'flex-end'\n        },\n        children: fetching && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_progress__WEBPACK_IMPORTED_MODULE_63__.ProgressCircle, {\n          \"aria-labelledby\": createBranchSubmitButtonId,\n          isIndeterminate: true,\n          size: \"small\"\n        })\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ButtonGroup, {\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.Button, {\n          onPress: props.onDismiss,\n          isDisabled: fetching,\n          children: stringFormatter.format('cancel')\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.Button, {\n          isDisabled: fetching,\n          prominence: \"high\",\n          type: \"submit\",\n          id: createBranchSubmitButtonId,\n          children: stringFormatter.format('create')\n        })]\n      })]\n    })\n  });\n}\n\n// Data\n// -----------------------------------------------------------------------------\n\n// https://git-scm.com/docs/git-check-ref-format\nconst invalidAnywhere = [' ', '~', '^', ':', '*', '?', '[', '..', '@{', '\\\\'];\nconst invalidStart = ['.', '/'];\nconst invalidEnd = ['.', '/', '.lock'];\nfunction prettyErrorForCreateBranchMutation(error) {\n  if (!error) {\n    return undefined;\n  }\n  if (error.message.includes('is not a valid ref name')) {\n    let refnameMatch = error.message.match(/\"([^\"]+)\"/);\n    let branchname = refnameMatch ? refnameMatch[1].replace('refs/heads/', '') : '';\n\n    // start rules\n    for (let char of invalidStart) {\n      if (branchname.startsWith(char)) {\n        return `Cannot start with \"${char}\"`;\n      }\n    }\n\n    // end rules\n    for (let char of invalidEnd) {\n      if (branchname.endsWith(char)) {\n        return `Cannot end with \"${char}\"`;\n      }\n    }\n\n    // anywhere rules\n    let invalidMatches = invalidAnywhere.filter(c => branchname.includes(c));\n    if (invalidMatches.length > 0) {\n      let options = {\n        style: 'long',\n        type: 'conjunction'\n      };\n      let formatter = new Intl.ListFormat('en-US', options);\n      let list = invalidMatches.map(char => `\"${char}\"`);\n      return `Some characters are not allowed: ${formatter.format(list)}`;\n    }\n\n    // unknown\n    return 'Invalid branch name';\n  }\n  return error.message;\n}\nfunction useCreateBranchMutation() {\n  return (0,urql__WEBPACK_IMPORTED_MODULE_99__.useMutation)((0,_ts_gql_tag_no_transform__WEBPACK_IMPORTED_MODULE_59__.gql)`\n      mutation CreateBranch($input: CreateRefInput!) {\n        createRef(input: $input) {\n          __typename\n          ref {\n            ...Ref_base\n          }\n        }\n      }\n      ${Ref_base}\n    `);\n}\n\nconst ThemeContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)({\n  theme: 'auto',\n  setTheme: () => {\n    throw new Error('ThemeContext was not initialized.');\n  }\n});\nconst ThemeProvider = ThemeContext.Provider;\nconst STORAGE_KEY = 'keystatic-color-scheme';\n\n// only for initializing the provider, for consumption use `useThemeContext()`\nfunction useTheme() {\n  let [theme, setThemeValue] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(() => {\n    let storedValue = localStorage.getItem(STORAGE_KEY);\n    if (storedValue === 'light' || storedValue === 'dark') {\n      return storedValue;\n    }\n    return 'auto';\n  });\n  let setTheme = theme => {\n    localStorage.setItem(STORAGE_KEY, theme);\n    setThemeValue(theme);\n  };\n  return {\n    theme,\n    setTheme\n  };\n}\nfunction useThemeContext() {\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(ThemeContext);\n}\n\nfunction focusWithPreviousSelection(editor) {\n  const selection = window.getSelection();\n  if (selection) {\n    selection.removeAllRanges();\n    selection.addRange(slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.toDOMRange(editor, editor.selection));\n  }\n  slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.focus(editor);\n}\nconst blockElementSpacing = (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n  marginBlock: '0.75em',\n  '&:first-child': {\n    marginBlockStart: 0\n  },\n  '&:last-child': {\n    marginBlockEnd: 0\n  }\n});\nconst ForceValidationContext = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createContext(false);\nForceValidationContext.Provider;\n\n// this ensures that when changes happen, they are immediately shown\n// this stops the problem of a cursor resetting to the end when a change is made\n// because the changes are applied asynchronously\nfunction useElementWithSetNodes(editor, element) {\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)({\n    element,\n    elementWithChanges: element\n  });\n  if (state.element !== element) {\n    setState({\n      element,\n      elementWithChanges: element\n    });\n  }\n  const elementRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(element);\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    elementRef.current = element;\n  });\n  const setNodes = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(changesOrCallback => {\n    const currentElement = elementRef.current;\n    const changes = typeof changesOrCallback === 'function' ? changesOrCallback(currentElement) : changesOrCallback;\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.setNodes(editor, changes, {\n      at: slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.findPath(editor, currentElement)\n    });\n    setState({\n      element: currentElement,\n      elementWithChanges: {\n        ...currentElement,\n        ...changes\n      }\n    });\n  }, [editor]);\n  return [state.elementWithChanges, setNodes];\n}\nfunction useEventCallback(callback) {\n  const callbackRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(callback);\n  const cb = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((...args) => {\n    return callbackRef.current(...args);\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    callbackRef.current = callback;\n  });\n  return cb;\n}\nfunction insertNodesButReplaceIfSelectionIsAtEmptyParagraphOrHeading(editor, nodes) {\n  var _pathRefForEmptyNodeA;\n  let pathRefForEmptyNodeAtCursor;\n  const entry = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n    match: node => node.type === 'heading' || node.type === 'paragraph'\n  });\n  if (entry && slate__WEBPACK_IMPORTED_MODULE_104__.Node.string(entry[0]) === '') {\n    pathRefForEmptyNodeAtCursor = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.pathRef(editor, entry[1]);\n  }\n  slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.insertNodes(editor, nodes);\n  let path = (_pathRefForEmptyNodeA = pathRefForEmptyNodeAtCursor) === null || _pathRefForEmptyNodeA === void 0 ? void 0 : _pathRefForEmptyNodeA.unref();\n  if (path) {\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n      at: path\n    });\n    // even though the selection is in the right place after the removeNodes\n    // for some reason the editor blurs so we need to focus it again\n    slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.focus(editor);\n  }\n}\n\nconst tableCellChildren = ['paragraph', 'code', 'heading', 'ordered-list', 'unordered-list', 'divider', 'image'];\nconst blockquoteChildren = [...tableCellChildren, 'table'];\nconst paragraphLike = [...blockquoteChildren, 'blockquote'];\nconst insideOfLayouts = [...paragraphLike, 'component-block'];\nfunction blockContainer(args) {\n  return {\n    kind: 'blocks',\n    allowedChildren: new Set(args.allowedChildren),\n    blockToWrapInlinesIn: args.allowedChildren[0],\n    invalidPositionHandleMode: args.invalidPositionHandleMode\n  };\n}\nfunction inlineContainer(args) {\n  return {\n    kind: 'inlines',\n    invalidPositionHandleMode: args.invalidPositionHandleMode\n  };\n}\nconst editorSchema = {\n  editor: blockContainer({\n    allowedChildren: [...insideOfLayouts, 'layout'],\n    invalidPositionHandleMode: 'move'\n  }),\n  layout: blockContainer({\n    allowedChildren: ['layout-area'],\n    invalidPositionHandleMode: 'move'\n  }),\n  'layout-area': blockContainer({\n    allowedChildren: insideOfLayouts,\n    invalidPositionHandleMode: 'unwrap'\n  }),\n  blockquote: blockContainer({\n    allowedChildren: blockquoteChildren,\n    invalidPositionHandleMode: 'move'\n  }),\n  paragraph: inlineContainer({\n    invalidPositionHandleMode: 'unwrap'\n  }),\n  code: inlineContainer({\n    invalidPositionHandleMode: 'move'\n  }),\n  divider: inlineContainer({\n    invalidPositionHandleMode: 'move'\n  }),\n  heading: inlineContainer({\n    invalidPositionHandleMode: 'unwrap'\n  }),\n  'component-block': blockContainer({\n    allowedChildren: ['component-block-prop', 'component-inline-prop'],\n    invalidPositionHandleMode: 'move'\n  }),\n  'component-inline-prop': inlineContainer({\n    invalidPositionHandleMode: 'unwrap'\n  }),\n  'component-block-prop': blockContainer({\n    allowedChildren: insideOfLayouts,\n    invalidPositionHandleMode: 'unwrap'\n  }),\n  'ordered-list': blockContainer({\n    allowedChildren: ['list-item'],\n    invalidPositionHandleMode: 'move'\n  }),\n  'unordered-list': blockContainer({\n    allowedChildren: ['list-item'],\n    invalidPositionHandleMode: 'move'\n  }),\n  'list-item': blockContainer({\n    allowedChildren: ['list-item-content', 'ordered-list', 'unordered-list'],\n    invalidPositionHandleMode: 'unwrap'\n  }),\n  'list-item-content': inlineContainer({\n    invalidPositionHandleMode: 'unwrap'\n  }),\n  image: inlineContainer({\n    invalidPositionHandleMode: 'move'\n  }),\n  table: blockContainer({\n    invalidPositionHandleMode: 'move',\n    allowedChildren: ['table-head', 'table-body']\n  }),\n  'table-body': blockContainer({\n    invalidPositionHandleMode: 'move',\n    allowedChildren: ['table-row']\n  }),\n  'table-row': blockContainer({\n    invalidPositionHandleMode: 'move',\n    allowedChildren: ['table-cell']\n  }),\n  'table-cell': blockContainer({\n    invalidPositionHandleMode: 'move',\n    allowedChildren: tableCellChildren\n  }),\n  'table-head': blockContainer({\n    invalidPositionHandleMode: 'move',\n    allowedChildren: ['table-row']\n  })\n};\nconst inlineContainerTypes = new Set(Object.entries(editorSchema).filter(([, value]) => value.kind === 'inlines').map(([type]) => type));\nfunction isInlineContainer(node) {\n  return node.type !== undefined && inlineContainerTypes.has(node.type);\n}\nconst blockTypes = new Set(Object.keys(editorSchema).filter(x => x !== 'editor'));\nfunction isBlock(node) {\n  return blockTypes.has(node.type);\n}\n\n// to print the editor schema in Graphviz if you want to visualize it\n// function printEditorSchema(editorSchema: EditorSchema) {\n//   return `digraph G {\n//   concentrate=true;\n//   ${Object.keys(editorSchema)\n//     .map(key => {\n//       let val = editorSchema[key];\n//       if (val.kind === 'inlines') {\n//         return `\"${key}\" -> inlines`;\n//       }\n//       if (val.kind === 'blocks') {\n//         return `\"${key}\" -> {${[...val.allowedChildren].map(x => JSON.stringify(x)).join(' ')}}`;\n//       }\n//     })\n//     .join('\\n  ')}\n// }`;\n// }\n\nfunction getWholeDocumentFeaturesForChildField(editorDocumentFeatures, options) {\n  var _options$formatting, _options$formatting2, _options$formatting3, _options$formatting4, _options$formatting5, _options$formatting6, _options$formatting7;\n  const inlineMarksFromOptions = (_options$formatting = options.formatting) === null || _options$formatting === void 0 ? void 0 : _options$formatting.inlineMarks;\n  const inlineMarks = Object.fromEntries(Object.keys(editorDocumentFeatures.formatting.inlineMarks).map(_mark => {\n    const mark = _mark;\n    return [mark, inlineMarksFromOptions === 'inherit' || (inlineMarksFromOptions === null || inlineMarksFromOptions === void 0 ? void 0 : inlineMarksFromOptions[mark]) === 'inherit' ? editorDocumentFeatures.formatting.inlineMarks[mark] : false];\n  }));\n  const headingLevels = (_options$formatting2 = options.formatting) === null || _options$formatting2 === void 0 ? void 0 : _options$formatting2.headingLevels;\n  return {\n    formatting: {\n      inlineMarks,\n      softBreaks: ((_options$formatting3 = options.formatting) === null || _options$formatting3 === void 0 ? void 0 : _options$formatting3.softBreaks) === 'inherit' && editorDocumentFeatures.formatting.softBreaks,\n      alignment: {\n        center: editorDocumentFeatures.formatting.alignment.center && ((_options$formatting4 = options.formatting) === null || _options$formatting4 === void 0 ? void 0 : _options$formatting4.alignment) === 'inherit',\n        end: editorDocumentFeatures.formatting.alignment.end && ((_options$formatting5 = options.formatting) === null || _options$formatting5 === void 0 ? void 0 : _options$formatting5.alignment) === 'inherit'\n      },\n      blockTypes: ((_options$formatting6 = options.formatting) === null || _options$formatting6 === void 0 ? void 0 : _options$formatting6.blockTypes) === 'inherit' ? editorDocumentFeatures.formatting.blockTypes : {\n        blockquote: false,\n        code: false\n      },\n      headings: headingLevels === 'inherit' ? editorDocumentFeatures.formatting.headings : {\n        levels: headingLevels ? editorDocumentFeatures.formatting.headings.levels.filter(level => headingLevels.includes(level)) : [],\n        schema: editorDocumentFeatures.formatting.headings.schema\n      },\n      listTypes: ((_options$formatting7 = options.formatting) === null || _options$formatting7 === void 0 ? void 0 : _options$formatting7.listTypes) === 'inherit' ? editorDocumentFeatures.formatting.listTypes : {\n        ordered: false,\n        unordered: false\n      }\n    },\n    dividers: options.dividers === 'inherit' ? editorDocumentFeatures.dividers : false,\n    images: options.images === 'inherit' && editorDocumentFeatures.images,\n    layouts: [],\n    links: options.links === 'inherit' && editorDocumentFeatures.links,\n    tables: options.tables === 'inherit' && editorDocumentFeatures.tables\n  };\n}\nfunction getDocumentFeaturesForChildField(editorDocumentFeatures, options) {\n  var _options$formatting8, _options$formatting10, _options$formatting11, _options$formatting12, _options$formatting13, _options$formatting14;\n  // an important note for this: normalization based on document features\n  // is done based on the document features returned here\n  // and the editor document features\n  // so the result for any given child prop will be the things that are\n  // allowed by both these document features\n  // AND the editor document features\n  const inlineMarksFromOptions = (_options$formatting8 = options.formatting) === null || _options$formatting8 === void 0 ? void 0 : _options$formatting8.inlineMarks;\n  const inlineMarks = inlineMarksFromOptions === 'inherit' ? 'inherit' : Object.fromEntries(Object.keys(editorDocumentFeatures.formatting.inlineMarks).map(mark => {\n    return [mark, !!(inlineMarksFromOptions || {})[mark]];\n  }));\n  if (options.kind === 'inline') {\n    var _options$formatting9;\n    return {\n      kind: 'inline',\n      inlineMarks,\n      documentFeatures: {\n        links: options.links === 'inherit'\n      },\n      softBreaks: ((_options$formatting9 = options.formatting) === null || _options$formatting9 === void 0 ? void 0 : _options$formatting9.softBreaks) === 'inherit'\n    };\n  }\n  const headingLevels = (_options$formatting10 = options.formatting) === null || _options$formatting10 === void 0 ? void 0 : _options$formatting10.headingLevels;\n  return {\n    kind: 'block',\n    inlineMarks,\n    softBreaks: ((_options$formatting11 = options.formatting) === null || _options$formatting11 === void 0 ? void 0 : _options$formatting11.softBreaks) === 'inherit',\n    documentFeatures: {\n      layouts: [],\n      dividers: options.dividers === 'inherit' ? editorDocumentFeatures.dividers : false,\n      formatting: {\n        alignment: ((_options$formatting12 = options.formatting) === null || _options$formatting12 === void 0 ? void 0 : _options$formatting12.alignment) === 'inherit' ? editorDocumentFeatures.formatting.alignment : {\n          center: false,\n          end: false\n        },\n        blockTypes: ((_options$formatting13 = options.formatting) === null || _options$formatting13 === void 0 ? void 0 : _options$formatting13.blockTypes) === 'inherit' ? editorDocumentFeatures.formatting.blockTypes : {\n          blockquote: false,\n          code: false\n        },\n        headings: headingLevels === 'inherit' ? editorDocumentFeatures.formatting.headings : {\n          levels: headingLevels ? editorDocumentFeatures.formatting.headings.levels.filter(level => headingLevels.includes(level)) : [],\n          schema: editorDocumentFeatures.formatting.headings.schema\n        },\n        listTypes: ((_options$formatting14 = options.formatting) === null || _options$formatting14 === void 0 ? void 0 : _options$formatting14.listTypes) === 'inherit' ? editorDocumentFeatures.formatting.listTypes : {\n          ordered: false,\n          unordered: false\n        }\n      },\n      links: options.links === 'inherit',\n      images: options.images === 'inherit' ? editorDocumentFeatures.images : false,\n      tables: options.tables === 'inherit'\n    },\n    componentBlocks: options.componentBlocks === 'inherit'\n  };\n}\nfunction getSchemaAtPropPathInner(path, value, schema) {\n  // because we're checking the length here\n  // the non-null asserts on shift below are fine\n  if (path.length === 0) {\n    return schema;\n  }\n  if (schema.kind === 'child' || schema.kind === 'form') {\n    return;\n  }\n  if (schema.kind === 'conditional') {\n    const key = path.shift();\n    if (key === 'discriminant') {\n      return getSchemaAtPropPathInner(path, value.discriminant, schema.discriminant);\n    }\n    if (key === 'value') {\n      const propVal = schema.values[value.discriminant];\n      return getSchemaAtPropPathInner(path, value.value, propVal);\n    }\n    return;\n  }\n  if (schema.kind === 'object') {\n    const key = path.shift();\n    return getSchemaAtPropPathInner(path, value[key], schema.fields[key]);\n  }\n  if (schema.kind === 'array') {\n    const index = path.shift();\n    return getSchemaAtPropPathInner(path, value[index], schema.element);\n  }\n  (0,emery__WEBPACK_IMPORTED_MODULE_1__.assertNever)(schema);\n}\nfunction getSchemaAtPropPath(path, value, props) {\n  return getSchemaAtPropPathInner([...path], value, {\n    kind: 'object',\n    fields: props\n  });\n}\nfunction getAncestorSchemas(rootSchema, path, value) {\n  const ancestors = [];\n  const currentPath = [...path];\n  let currentProp = rootSchema;\n  let currentValue = value;\n  while (currentPath.length) {\n    ancestors.push(currentProp);\n    const key = currentPath.shift(); // this code only runs when path.length is truthy so this non-null assertion is fine\n    if (currentProp.kind === 'array') {\n      currentProp = currentProp.element;\n      currentValue = currentValue[key];\n    } else if (currentProp.kind === 'conditional') {\n      currentProp = currentProp.values[value.discriminant];\n      currentValue = currentValue.value;\n    } else if (currentProp.kind === 'object') {\n      currentValue = currentValue[key];\n      currentProp = currentProp.fields[key];\n    } else if (currentProp.kind === 'child' || currentProp.kind === 'form') {\n      throw new Error(`unexpected prop \"${key}\"`);\n    } else {\n      (0,emery__WEBPACK_IMPORTED_MODULE_1__.assertNever)(currentProp);\n    }\n  }\n  return ancestors;\n}\nfunction getPlaceholderTextForPropPath(propPath, fields, formProps) {\n  const field = getSchemaAtPropPath(propPath, formProps, fields);\n  if ((field === null || field === void 0 ? void 0 : field.kind) === 'child' && (field.options.kind === 'block' && field.options.editIn !== 'modal' || field.options.kind === 'inline')) {\n    return field.options.placeholder;\n  }\n  return '';\n}\nfunction cloneDescendent(node) {\n  if (slate__WEBPACK_IMPORTED_MODULE_104__.Element.isElement(node)) {\n    return {\n      ...node,\n      children: node.children.map(cloneDescendent)\n    };\n  }\n  return {\n    ...node\n  };\n}\n\nconst allMarks = ['bold', 'italic', 'underline', 'strikethrough', 'code', 'superscript', 'subscript', 'keyboard'];\nconst isElementActive = (editor, format) => {\n  const [match] = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.nodes(editor, {\n    match: n => n.type === format\n  });\n  return !!match;\n};\nfunction clearFormatting(editor) {\n  slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n    match: node => node.type === 'heading' || node.type === 'blockquote' || node.type === 'code'\n  });\n  slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unsetNodes(editor, allMarks, {\n    match: slate__WEBPACK_IMPORTED_MODULE_104__.Text.isText\n  });\n}\nfunction moveChildren(editor, parent, to, shouldMoveNode = () => true) {\n  const parentPath = slate__WEBPACK_IMPORTED_MODULE_104__.Path.isPath(parent) ? parent : parent[1];\n  const parentNode = slate__WEBPACK_IMPORTED_MODULE_104__.Path.isPath(parent) ? slate__WEBPACK_IMPORTED_MODULE_104__.Node.get(editor, parentPath) : parent[0];\n  if (!isBlock(parentNode)) return;\n  for (let i = parentNode.children.length - 1; i >= 0; i--) {\n    if (shouldMoveNode(parentNode.children[i], i)) {\n      const childPath = [...parentPath, i];\n      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.moveNodes(editor, {\n        at: childPath,\n        to\n      });\n    }\n  }\n}\n\n/**\n * This is equivalent to Editor.after except that it ignores points that have no content\n * like the point in a void text node, an empty text node and the last point in a text node\n */\n// TODO: this would probably break if you were trying to get the last point in the editor?\nfunction EditorAfterButIgnoringingPointsWithNoContent(editor, at, {\n  distance = 1\n} = {}) {\n  const anchor = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.point(editor, at, {\n    edge: 'end'\n  });\n  const focus = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.end(editor, []);\n  const range = {\n    anchor,\n    focus\n  };\n  let d = 0;\n  let target;\n  for (const p of slate__WEBPACK_IMPORTED_MODULE_104__.Editor.positions(editor, {\n    at: range\n  })) {\n    if (d > distance) {\n      break;\n    }\n\n    // this is the important change\n    const node = slate__WEBPACK_IMPORTED_MODULE_104__.Node.get(editor, p.path);\n    if (node.text.length === p.offset) {\n      continue;\n    }\n    if (d !== 0) {\n      target = p;\n    }\n    d++;\n  }\n  return target;\n}\nfunction nodeTypeMatcher(...args) {\n  if (args.length === 1) {\n    const type = args[0];\n    return node => node.type === type;\n  }\n  const set = new Set(args);\n  return node => typeof node.type === 'string' && set.has(node.type);\n}\nfunction getAncestorComponentChildFieldDocumentFeatures(editor, editorDocumentFeatures, componentBlocks) {\n  const ancestorComponentProp = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n    match: nodeTypeMatcher('component-block-prop', 'component-inline-prop')\n  });\n  if (ancestorComponentProp) {\n    const propPath = ancestorComponentProp[0].propPath;\n    const ancestorComponent = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.parent(editor, ancestorComponentProp[1]);\n    if (ancestorComponent[0].type === 'component-block') {\n      const component = ancestorComponent[0].component;\n      const componentBlock = componentBlocks[component];\n      if (componentBlock && propPath) {\n        const childField = getSchemaAtPropPath(propPath, ancestorComponent[0].props, componentBlock.schema);\n        if ((childField === null || childField === void 0 ? void 0 : childField.kind) === 'child') {\n          return getDocumentFeaturesForChildField(editorDocumentFeatures, childField.options);\n        }\n      }\n    }\n  }\n}\n\nconst BlockPopoverContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)(null);\nfunction useBlockPopoverContext() {\n  const context = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(BlockPopoverContext);\n  if (!context) {\n    throw new Error('useBlockPopoverContext must be used within a BlockPopoverTrigger');\n  }\n  return context;\n}\nconst typeMatcher = nodeTypeMatcher('code', 'component-block', 'image', 'layout', 'link', 'table', 'heading');\nconst ActiveBlockPopoverContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)(undefined);\nfunction useActiveBlockPopover() {\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(ActiveBlockPopoverContext);\n}\nfunction ActiveBlockPopoverProvider(props) {\n  const nodeWithPopover = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(props.editor, {\n    match: typeMatcher\n  });\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ActiveBlockPopoverContext.Provider, {\n    value: nodeWithPopover === null || nodeWithPopover === void 0 ? void 0 : nodeWithPopover[0],\n    children: props.children\n  });\n}\nconst BlockPopoverTrigger = ({\n  children,\n  element\n}) => {\n  const [trigger, popover] = children;\n  const activePopoverElement = useActiveBlockPopover();\n  const triggerRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n  const state = (0,_react_stately_overlays__WEBPACK_IMPORTED_MODULE_105__.useOverlayTriggerState)({\n    isOpen: activePopoverElement === element\n  });\n  const context = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => ({\n    state,\n    triggerRef\n  }), [state, triggerRef]);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(BlockPopoverContext.Provider, {\n    value: context,\n    children: [/*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.cloneElement)(trigger, {\n      ref: triggerRef\n    }), popover]\n  });\n};\nfunction BlockPopover(props) {\n  const {\n    state\n  } = useBlockPopoverContext();\n  let wrapperRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n  return (\n    /*#__PURE__*/\n    /* @ts-expect-error FIXME: resolve ref inconsistencies */\n    (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_overlays__WEBPACK_IMPORTED_MODULE_24__.Overlay, {\n      isOpen: state.isOpen,\n      nodeRef: wrapperRef,\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(BlockPopoverWrapper, {\n        wrapperRef: wrapperRef,\n        ...props\n      })\n    })\n  );\n}\nconst BlockPopoverWrapper = ({\n  children,\n  placement: preferredPlacement = 'bottom'\n}) => {\n  let popoverRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n  let {\n    state,\n    triggerRef\n  } = useBlockPopoverContext();\n  let {\n    placement,\n    popoverProps\n  } = useBlockPopover({\n    isNonModal: true,\n    isKeyboardDismissDisabled: false,\n    placement: preferredPlacement,\n    triggerRef,\n    popoverRef\n  }, state);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n    ref: popoverRef,\n    ...popoverProps,\n    \"data-open\": state.isOpen,\n    \"data-placement\": placement,\n    contentEditable: false,\n    className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n      backgroundColor: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.background.surface,\n      // TODO: component token?\n      borderRadius: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.radius.medium,\n      // TODO: component token?\n      border: `${_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.border.regular} solid ${_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.border.emphasis}`,\n      boxSizing: 'content-box',\n      // resolves measurement/scroll issues related to border\n      // boxShadow: `0 0 0 ${tokenSchema.size.border.regular} ${tokenSchema.color.border.emphasis}`,\n      minHeight: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.element.regular,\n      minWidth: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.element.regular,\n      opacity: 0,\n      outline: 0,\n      pointerEvents: 'auto',\n      position: 'absolute',\n      // use filter:drop-shadow instead of box-shadow so the arrow is included\n      filter: `drop-shadow(0 1px 4px ${_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.shadow.regular})`,\n      // filter bug in safari: https://stackoverflow.com/questions/56478925/safari-drop-shadow-filter-remains-visible-even-with-hidden-element\n      willChange: 'filter',\n      userSelect: 'none',\n      // placement\n      '&[data-placement=\"top\"]': {\n        marginBottom: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.space.regular,\n        transform: `translateY(${_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.space.regular})`\n      },\n      '&[data-placement=\"bottom\"]': {\n        marginTop: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.space.regular,\n        transform: `translateY(calc(${_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.space.regular} * -1))`\n      },\n      '&[data-open=\"true\"]': {\n        opacity: 1,\n        transform: `translateX(0) translateY(0)`,\n        // enter animation\n        transition: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.transition)(['opacity', 'transform'], {\n          easing: 'easeOut'\n        })\n      }\n    }),\n    children: typeof children === 'function' ? children(state.close) : children\n  });\n};\n\n/**\n * Provides the behavior and accessibility implementation for a popover component.\n * A popover is an overlay element positioned relative to a trigger.\n */\nfunction useBlockPopover(props, state) {\n  var _triggerRef$current2;\n  let {\n    triggerRef,\n    popoverRef,\n    isNonModal,\n    isKeyboardDismissDisabled,\n    ...otherProps\n  } = props;\n  let [isSticky, setSticky] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n  let {\n    overlayProps,\n    underlayProps\n  } = (0,_react_aria_overlays__WEBPACK_IMPORTED_MODULE_106__.useOverlay)({\n    isOpen: state.isOpen,\n    onClose: state.close,\n    shouldCloseOnBlur: true,\n    isDismissable: !isNonModal,\n    isKeyboardDismissDisabled: false\n  }, popoverRef);\n\n  // stick the popover to the bottom of the viewport instead of flipping\n  const containerPadding = 8;\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    if (state.isOpen) {\n      const checkForStickiness = () => {\n        var _popoverRef$current, _triggerRef$current;\n        const vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);\n        let popoverRect = (_popoverRef$current = popoverRef.current) === null || _popoverRef$current === void 0 ? void 0 : _popoverRef$current.getBoundingClientRect();\n        let triggerRect = (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : _triggerRef$current.getBoundingClientRect();\n        if (popoverRect && triggerRect) {\n          setSticky(triggerRect.bottom + popoverRect.height + containerPadding * 2 > vh && triggerRect.top < vh);\n        }\n      };\n      checkForStickiness();\n      window.addEventListener('scroll', checkForStickiness);\n      return () => {\n        checkForStickiness();\n        window.removeEventListener('scroll', checkForStickiness);\n      };\n    }\n  }, [popoverRef, triggerRef, state.isOpen]);\n  let {\n    overlayProps: positionProps,\n    arrowProps,\n    placement,\n    updatePosition\n  } = (0,_react_aria_overlays__WEBPACK_IMPORTED_MODULE_106__.useOverlayPosition)({\n    ...otherProps,\n    containerPadding,\n    shouldFlip: false,\n    targetRef: triggerRef,\n    overlayRef: popoverRef,\n    isOpen: state.isOpen,\n    onClose: undefined\n  });\n\n  // force update position when the trigger changes\n  let previousBoundingRect = usePrevious((_triggerRef$current2 = triggerRef.current) === null || _triggerRef$current2 === void 0 ? void 0 : _triggerRef$current2.getBoundingClientRect());\n  (0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_101__.useLayoutEffect)(() => {\n    if (previousBoundingRect) {\n      var _triggerRef$current3;\n      const currentBoundingRect = (_triggerRef$current3 = triggerRef.current) === null || _triggerRef$current3 === void 0 ? void 0 : _triggerRef$current3.getBoundingClientRect();\n      if (currentBoundingRect) {\n        const hasChanged = previousBoundingRect.height !== currentBoundingRect.height || previousBoundingRect.width !== currentBoundingRect.width || previousBoundingRect.x !== currentBoundingRect.x || previousBoundingRect.y !== currentBoundingRect.y;\n        if (hasChanged) {\n          updatePosition();\n        }\n      }\n    }\n  }, [previousBoundingRect, triggerRef, updatePosition]);\n\n  // make sure popovers are below modal dialogs and their blanket\n  if (positionProps.style) {\n    positionProps.style.zIndex = 1;\n  }\n\n  // switching to position: fixed will undoubtedly bite me later, but this hack works for now\n  if (isSticky) {\n    positionProps.style = {\n      ...positionProps.style,\n      // @ts-expect-error\n      maxHeight: null,\n      position: 'fixed',\n      // @ts-expect-error\n      top: null,\n      bottom: containerPadding\n    };\n  }\n  return {\n    arrowProps,\n    placement,\n    popoverProps: (0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_101__.mergeProps)(overlayProps, positionProps),\n    underlayProps,\n    updatePosition\n  };\n}\nfunction usePrevious(value) {\n  const ref = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)();\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\n\nconst BlockWrapper = props => {\n  let {\n    attributes,\n    children,\n    draggable = false\n  } = props;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n    draggable: draggable,\n    className: blockElementSpacing,\n    ...attributes,\n    children: children\n  });\n};\n\nconst NotEditable = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function NotEditable({\n  className,\n  ...props\n}, ref) {\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n    ...props,\n    ref: ref,\n    className: [(0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n      userSelect: 'none',\n      whiteSpace: 'initial'\n    }), className].join(' '),\n    contentEditable: false\n  });\n});\n\nconst ToolbarSeparator = () => {\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Divider, {\n    orientation: \"vertical\",\n    flexShrink: 0\n  });\n};\n\nfunction parseImageData(data) {\n  try {\n    const parsed = JSON.parse(data);\n    if (typeof parsed === 'object' && parsed !== null && 'src' in parsed && typeof parsed.src === 'string') {\n      return {\n        src: parsed.src,\n        alt: 'alt' in parsed && typeof parsed.alt === 'string' ? parsed.alt : '',\n        height: 'height' in parsed && typeof parsed.height === 'number' && Number.isInteger(parsed.height) ? parsed.height : undefined,\n        width: 'width' in parsed && typeof parsed.width === 'number' && Number.isInteger(parsed.width) ? parsed.width : undefined\n      };\n    }\n  } catch (err) {}\n  const pattern = /^\\s*!\\[(.*)\\]\\(([a-z0-9_\\-/:.]+)\\)\\s*$/;\n  const match = data.match(pattern);\n  if (match) {\n    return {\n      src: match[2],\n      alt: match[1]\n    };\n  }\n  return {\n    src: data,\n    alt: ''\n  };\n}\nfunction useImageDimensions(src) {\n  const [dimensions, setDimensions] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)({});\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    if (!src || !isValidURL$1(src)) {\n      setDimensions({});\n      return;\n    }\n    let shouldSet = true;\n    loadImageDimensions(src).then(dimensions => {\n      if (shouldSet) setDimensions(dimensions);\n    });\n    return () => {\n      shouldSet = false;\n    };\n  }, [src]);\n  return dimensions;\n}\nfunction loadImageDimensions(url) {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => {\n      resolve({\n        width: img.width,\n        height: img.height\n      });\n    };\n    img.onerror = () => {\n      reject();\n    };\n    img.src = url;\n  });\n}\nconst imageDataSchema = zod__WEBPACK_IMPORTED_MODULE_98__.z.object({\n  src: zod__WEBPACK_IMPORTED_MODULE_98__.z.string(),\n  alt: zod__WEBPACK_IMPORTED_MODULE_98__.z.string(),\n  width: zod__WEBPACK_IMPORTED_MODULE_98__.z.number(),\n  height: zod__WEBPACK_IMPORTED_MODULE_98__.z.number()\n});\nasync function loadImageData(url, config) {\n  const auth = getCloudAuth(config);\n  if (auth) {\n    const res = await fetch(`${KEYSTATIC_CLOUD_API_URL}/v1/image?${new URLSearchParams({\n      url\n    })}`, {\n      headers: {\n        Authorization: `Bearer ${auth.accessToken}`,\n        ...KEYSTATIC_CLOUD_HEADERS\n      }\n    });\n    if (res.ok) {\n      const data = await res.json();\n      const parsed = imageDataSchema.safeParse(data);\n      if (parsed.success) {\n        return parsed.data;\n      }\n    }\n  }\n  return loadImageDimensions(url).then(dimensions => ({\n    src: url,\n    alt: '',\n    ...dimensions\n  }));\n}\nfunction ImageDimensionsInput(props) {\n  const dimensions = useImageDimensions(props.src);\n  const [constrainProportions, setConstrainProportions] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(true);\n  const revertLabel = `Revert to original (${dimensions.width} × ${dimensions.height})`;\n  const dimensionsMatchOriginal = dimensions.width === props.image.width && dimensions.height === props.image.height;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.HStack, {\n    gap: \"regular\",\n    alignItems: \"end\",\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_number_field__WEBPACK_IMPORTED_MODULE_57__.NumberField, {\n      label: \"Width\",\n      width: \"scale.1600\",\n      formatOptions: {\n        maximumFractionDigits: 0\n      },\n      value: props.image.width,\n      onChange: width => {\n        if (constrainProportions) {\n          props.onChange({\n            width,\n            height: Math.round(width / getAspectRatio(props.image))\n          });\n        } else {\n          props.onChange({\n            width\n          });\n        }\n      }\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ToggleButton, {\n        isSelected: constrainProportions,\n        \"aria-label\": \"Constrain proportions\",\n        prominence: \"low\",\n        onPress: () => {\n          setConstrainProportions(state => !state);\n        },\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n          src: constrainProportions ? _keystar_ui_icon_icons_link2Icon__WEBPACK_IMPORTED_MODULE_64__.link2Icon : _keystar_ui_icon_icons_link2OffIcon__WEBPACK_IMPORTED_MODULE_65__.link2OffIcon\n        })\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n        children: \"Constrain proportions\"\n      })]\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_number_field__WEBPACK_IMPORTED_MODULE_57__.NumberField, {\n      label: \"Height\",\n      width: \"scale.1600\",\n      formatOptions: {\n        maximumFractionDigits: 0\n      },\n      value: props.image.height,\n      onChange: height => {\n        if (constrainProportions) {\n          props.onChange({\n            height,\n            width: Math.round(height * getAspectRatio(props.image))\n          });\n        } else {\n          props.onChange({\n            height\n          });\n        }\n      }\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n        \"aria-label\": revertLabel,\n        isDisabled: dimensionsMatchOriginal || !dimensions.width || !dimensions.height,\n        onPress: () => {\n          props.onChange({\n            height: dimensions.height,\n            width: dimensions.width\n          });\n        },\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n          src: _keystar_ui_icon_icons_undo2Icon__WEBPACK_IMPORTED_MODULE_67__.undo2Icon\n        })\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n        maxWidth: \"100%\",\n        children: revertLabel\n      })]\n    })]\n  });\n}\nconst emptyImageData = {\n  src: '',\n  alt: ''\n};\nfunction ImageDialog$1(props) {\n  const {\n    image,\n    onCancel,\n    onChange,\n    onClose\n  } = props;\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(image !== null && image !== void 0 ? image : emptyImageData);\n  const [status, setStatus] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(image ? 'good' : '');\n  const formId = (0,_keystar_ui_utils__WEBPACK_IMPORTED_MODULE_68__.useId)();\n  const imageLibraryURL = useImageLibraryURL();\n  const onPaste = event => {\n    event.preventDefault();\n    const text = event.clipboardData.getData('text/plain');\n    setState(parseImageData(text));\n  };\n  const config = useConfig();\n  const hasSetFields = !!(state.alt || state.width || state.height);\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    if (!state.src) {\n      setStatus('');\n      return;\n    }\n    if (!isValidURL$1(state.src)) {\n      return;\n    }\n    if (hasSetFields) {\n      setStatus('good');\n      return;\n    }\n    setStatus('loading');\n    loadImageData(state.src, config).then(newData => {\n      setState(state => ({\n        ...state,\n        ...newData\n      }));\n      setStatus('good');\n    }).catch(() => {\n      setStatus('error');\n    });\n  }, [config, hasSetFields, state.src]);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_12__.Dialog, {\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Heading, {\n      children: \"Cloud image\"\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_slots__WEBPACK_IMPORTED_MODULE_17__.Content, {\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.VStack, {\n        elementType: \"form\",\n        id: formId,\n        gap: \"xlarge\",\n        onSubmit: e => {\n          e.preventDefault();\n          if (status !== 'good') return;\n          onChange(state);\n          onClose();\n        },\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_text_field__WEBPACK_IMPORTED_MODULE_4__.TextField, {\n          label: \"Image URL\",\n          autoFocus: true,\n          onPaste: onPaste,\n          onKeyDown: e => {\n            if (e.code === 'Backspace' || e.code === 'Delete') {\n              setState(emptyImageData);\n            } else {\n              e.continuePropagation();\n            }\n          },\n          value: state.src,\n          description: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n            children: [\"Copy an image URL from the\", ' ', /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_link__WEBPACK_IMPORTED_MODULE_62__.TextLink, {\n              prominence: \"high\",\n              href: imageLibraryURL,\n              target: \"_blank\",\n              rel: \"noreferrer\",\n              children: \"Image Library\"\n            }), ' ', \"and paste it into this field.\"]\n          }),\n          endElement: status === 'loading' ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n            height: \"element.regular\",\n            width: \"element.regular\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_progress__WEBPACK_IMPORTED_MODULE_63__.ProgressCircle, {\n              size: \"small\",\n              \"aria-label\": \"Checking\\u2026\",\n              isIndeterminate: true\n            })\n          }) : state.src ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ClearButton, {\n            onPress: () => setState(emptyImageData),\n            preventFocus: true\n          }) : null\n        }), status === 'good' ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.Fragment, {\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_text_field__WEBPACK_IMPORTED_MODULE_4__.TextArea, {\n            label: \"Alt text\",\n            value: state.alt,\n            onChange: alt => setState(state => ({\n              ...state,\n              alt\n            }))\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ImageDimensionsInput, {\n            src: state.src,\n            image: state,\n            onChange: dimensions => {\n              setState(state => ({\n                ...state,\n                ...dimensions\n              }));\n            }\n          })]\n        }) : null]\n      })\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ButtonGroup, {\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.Button, {\n        onPress: onCancel,\n        children: \"Cancel\"\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.Button, {\n        prominence: \"high\",\n        type: \"submit\",\n        form: formId,\n        isDisabled: status !== 'good',\n        children: image ? 'Done' : 'Insert'\n      })]\n    })]\n  });\n}\nfunction Placeholder$1(props) {\n  const state = (0,_react_stately_overlays__WEBPACK_IMPORTED_MODULE_105__.useOverlayTriggerState)({\n    defaultOpen: false\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    if (props.selected) {\n      state.open();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.selected]);\n  const closeAndCleanup = () => {\n    state.close();\n    props.onRemove();\n  };\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(NotEditable, {\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n      alignItems: \"center\",\n      backgroundColor: \"surface\",\n      borderRadius: \"regular\",\n      gap: \"regular\",\n      height: \"element.large\",\n      paddingX: \"large\",\n      onClick: () => state.open(),\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n        src: _keystar_ui_icon_icons_imageIcon__WEBPACK_IMPORTED_MODULE_55__.imageIcon\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n        children: [\"Cloud image\", state.isOpen ? '' : '(click to configure)']\n      })]\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_12__.DialogContainer, {\n      onDismiss: closeAndCleanup,\n      children: state.isOpen && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ImageDialog$1, {\n        onChange: props.onChange,\n        onCancel: closeAndCleanup,\n        onClose: state.close\n      })\n    })]\n  });\n}\nfunction ImagePreview({\n  image,\n  onChange,\n  onRemove,\n  selected\n}) {\n  const maxHeight = 368; // size.scale.4600 — TODO: it'd be nice to get this from some token artefact\n  const maxWidth = 734; // roughly the max width that an editor container will allow\n\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.Fragment, {\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(NotEditable, {\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.VStack, {\n        backgroundColor: selected ? 'accent' : 'surface',\n        borderRadius: \"medium\",\n        border: selected ? 'color.alias.borderFocused' : 'neutral',\n        overflow: \"hidden\",\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n          backgroundColor: \"canvas\",\n          justifyContent: \"center\",\n          UNSAFE_style: {\n            maxHeight\n          },\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"img\", {\n            alt: image.alt,\n            src: imageWithTransforms({\n              source: image.src,\n              // 2x for retina etc.\n              height: maxHeight * 2,\n              width: maxWidth * 2\n            }),\n            style: {\n              objectFit: 'contain'\n            }\n          })\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.HStack, {\n          padding: \"large\",\n          gap: \"xlarge\",\n          borderTop: selected ? 'color.alias.borderFocused' : 'neutral',\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.VStack, {\n            flex: \"1\",\n            gap: \"medium\",\n            justifyContent: \"center\",\n            children: [image.alt ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n              truncate: 2,\n              children: image.alt\n            }) : null, /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n              color: \"neutralTertiary\",\n              size: \"small\",\n              children: [image.width, \" \\xD7 \", image.height]\n            })]\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.HStack, {\n            gap: \"regular\",\n            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_12__.DialogTrigger, {\n              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n                children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n                  children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n                    src: _keystar_ui_icon_icons_pencilIcon__WEBPACK_IMPORTED_MODULE_66__.pencilIcon\n                  })\n                }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n                  children: \"Edit Image Options\"\n                })]\n              }), onClose => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ImageDialog$1, {\n                image: image,\n                onChange: onChange,\n                onCancel: onClose,\n                onClose: onClose\n              })]\n            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n                onPress: onRemove,\n                children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n                  src: _keystar_ui_icon_icons_trash2Icon__WEBPACK_IMPORTED_MODULE_15__.trash2Icon\n                })\n              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n                children: \"Remove Image\"\n              })]\n            })]\n          })]\n        })]\n      })\n    })\n  });\n}\nfunction CloudImagePreview(props) {\n  var _props$fields$width$v, _props$fields$height$;\n  const selected = (0,slate_react__WEBPACK_IMPORTED_MODULE_103__.useSelected)();\n  const editor = (0,slate_react__WEBPACK_IMPORTED_MODULE_103__.useSlateStatic)();\n  if (!props.fields.src.value) {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(Placeholder$1, {\n      onChange: props.onChange,\n      onRemove: () => {\n        focusWithPreviousSelection(editor);\n        props.onRemove();\n      },\n      selected: selected\n    });\n  }\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ImagePreview, {\n    image: {\n      src: props.fields.src.value,\n      alt: props.fields.alt.value,\n      width: (_props$fields$width$v = props.fields.width.value) !== null && _props$fields$width$v !== void 0 ? _props$fields$width$v : undefined,\n      height: (_props$fields$height$ = props.fields.height.value) !== null && _props$fields$height$ !== void 0 ? _props$fields$height$ : undefined\n    },\n    onChange: props.onChange,\n    onRemove: props.onRemove,\n    selected: selected\n  });\n}\nfunction CloudImagePreviewForNewEditor(props) {\n  var _props$value$width, _props$value$height;\n  if (!props.value.src) {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(Placeholder$1\n    // @ts-ignore\n    , {\n      onChange: props.onChange,\n      onRemove: props.onRemove,\n      selected: props.isSelected\n    });\n  }\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ImagePreview, {\n    image: {\n      src: props.value.src,\n      alt: props.value.alt,\n      width: (_props$value$width = props.value.width) !== null && _props$value$width !== void 0 ? _props$value$width : undefined,\n      height: (_props$value$height = props.value.height) !== null && _props$value$height !== void 0 ? _props$value$height : undefined\n    }\n    // @ts-ignore\n    ,\n    onChange: props.onChange,\n    onRemove: props.onRemove,\n    selected: props.isSelected\n  });\n}\n\n// Utils\n// -----------------------------------------------------------------------------\n\nfunction imageWithTransforms(options) {\n  let {\n    fit = 'scale-down',\n    source,\n    height,\n    width\n  } = options;\n  if (!/^https?:\\/\\/[^\\.]+\\.keystatic\\.net/.test(source)) {\n    return source;\n  }\n  return `${source}?` + new URLSearchParams({\n    fit,\n    height: height.toString(),\n    width: width.toString()\n  }).toString();\n}\nfunction isValidURL$1(str) {\n  try {\n    new URL(str);\n    return true;\n  } catch {\n    return false;\n  }\n}\nfunction useImageLibraryURL() {\n  const config = useConfig();\n  const split = getSplitCloudProject(config);\n  if (!split) return 'https://keystatic.cloud/';\n  return `https://keystatic.cloud/teams/${split.team}/project/${split.project}/images`;\n}\nfunction getAspectRatio(state) {\n  if (!state.width || !state.height) return 1;\n  return state.width / state.height;\n}\nconst cloudImageToolbarIcon = _keystar_ui_icon_icons_imageIcon__WEBPACK_IMPORTED_MODULE_55__.imageIcon;\n\n// Theme controls\n// -----------------------------------------------------------------------------\n\nconst THEME_MODE = {\n  light: {\n    icon: _keystar_ui_icon_icons_sunIcon__WEBPACK_IMPORTED_MODULE_93__.sunIcon,\n    label: 'Light'\n  },\n  dark: {\n    icon: _keystar_ui_icon_icons_moonIcon__WEBPACK_IMPORTED_MODULE_92__.moonIcon,\n    label: 'Dark'\n  },\n  auto: {\n    icon: _keystar_ui_icon_icons_monitorIcon__WEBPACK_IMPORTED_MODULE_91__.monitorIcon,\n    label: 'System'\n  }\n};\nconst themeItems = Object.entries(THEME_MODE).map(([id, {\n  icon,\n  label\n}]) => ({\n  id,\n  icon,\n  label\n}));\nfunction ThemeMenu() {\n  let {\n    theme,\n    setTheme\n  } = useThemeContext();\n  let matchesDark = (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.useMediaQuery)('(prefers-color-scheme: dark)');\n  let icon = THEME_MODE[theme].icon;\n  if (theme === 'auto') {\n    icon = matchesDark ? _keystar_ui_icon_icons_moonIcon__WEBPACK_IMPORTED_MODULE_92__.moonIcon : _keystar_ui_icon_icons_sunIcon__WEBPACK_IMPORTED_MODULE_93__.sunIcon;\n  }\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_menu__WEBPACK_IMPORTED_MODULE_40__.MenuTrigger, {\n    align: \"end\",\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n      \"aria-label\": \"theme\",\n      prominence: \"low\",\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n        src: icon\n      })\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_menu__WEBPACK_IMPORTED_MODULE_40__.Menu, {\n      items: themeItems,\n      onSelectionChange: ([key]) => setTheme(key),\n      disallowEmptySelection: true,\n      selectedKeys: [theme],\n      selectionMode: \"single\",\n      children: item => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_react_stately_collections__WEBPACK_IMPORTED_MODULE_107__.Item, {\n        textValue: item.label,\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n          src: item.icon\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n          children: item.label\n        })]\n      })\n    })]\n  });\n}\n\n// User controls\n// -----------------------------------------------------------------------------\n\nfunction UserActions() {\n  let config = useConfig();\n  let userData = useUserData();\n  let router = useRouter();\n  if (!userData) {\n    return null;\n  }\n  if (userData === 'unauthorized') {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n      onPress: () => {\n        redirectToCloudAuth(router.params.map(encodeURIComponent).join('/'), config);\n      },\n      flex: true,\n      children: \"Sign into Cloud\"\n    });\n  }\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(UserMenu, {\n    ...userData\n  });\n}\nfunction UserMenu(user) {\n  let config = useConfig();\n  const cloudInfo = useCloudInfo();\n  const imageLibraryUrl = useImageLibraryURL();\n  const menuItems = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {\n    var _config$cloud;\n    let items = [{\n      key: 'logout',\n      label: 'Log out',\n      icon: _keystar_ui_icon_icons_logOutIcon__WEBPACK_IMPORTED_MODULE_86__.logOutIcon\n    }];\n    if ((_config$cloud = config.cloud) !== null && _config$cloud !== void 0 && _config$cloud.project) {\n      items.unshift({\n        key: 'manage',\n        label: 'Account',\n        icon: _keystar_ui_icon_icons_userIcon__WEBPACK_IMPORTED_MODULE_94__.userIcon,\n        href: 'https://keystatic.cloud/account',\n        target: '_blank',\n        rel: 'noopener noreferrer'\n      });\n    }\n    if (cloudInfo !== null && cloudInfo !== void 0 && cloudInfo.team.images) {\n      items.unshift({\n        key: 'image-library',\n        label: 'Image library',\n        icon: _keystar_ui_icon_icons_imageIcon__WEBPACK_IMPORTED_MODULE_55__.imageIcon,\n        href: imageLibraryUrl,\n        target: '_blank',\n        rel: 'noopener noreferrer'\n      });\n    }\n    return items;\n  }, [cloudInfo, config, imageLibraryUrl]);\n  if (!user) {\n    return null;\n  }\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_menu__WEBPACK_IMPORTED_MODULE_40__.MenuTrigger, {\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(UserDetailsButton, {\n      ...user\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.Fragment, {\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_menu__WEBPACK_IMPORTED_MODULE_40__.Menu, {\n        items: menuItems,\n        minWidth: \"scale.2400\",\n        onAction: key => {\n          switch (key) {\n            case 'logout':\n              switch (config.storage.kind) {\n                case 'github':\n                  window.location.href = '/api/keystatic/github/logout';\n                  break;\n                case 'cloud':\n                case 'local':\n                  localStorage.removeItem('keystatic-cloud-access-token');\n                  window.location.reload();\n                  break;\n              }\n          }\n        },\n        children: item => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_react_stately_collections__WEBPACK_IMPORTED_MODULE_107__.Item, {\n          textValue: item.label,\n          href: item.href,\n          rel: item.rel,\n          target: item.target,\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n            src: item.icon\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n            children: item.label\n          })]\n        }, item.key)\n      })\n    })]\n  });\n}\nconst UserDetailsButton = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function UserDetailsButton(props, ref) {\n  let {\n    avatarUrl,\n    login,\n    name,\n    ...otherProps\n  } = props;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n    ...otherProps,\n    ref: ref,\n    \"aria-label\": \"User menu\",\n    prominence: \"low\",\n    flexGrow: 1,\n    UNSAFE_className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n      justifyContent: 'start',\n      textAlign: 'start'\n    }),\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n      alignItems: \"center\",\n      gap: \"regular\",\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_avatar__WEBPACK_IMPORTED_MODULE_85__.Avatar, {\n        src: avatarUrl,\n        name: name !== null && name !== void 0 ? name : undefined,\n        size: \"small\"\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_slots__WEBPACK_IMPORTED_MODULE_17__.ClearSlots, {\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n          direction: \"column\",\n          gap: \"small\",\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n            size: \"small\",\n            weight: \"semibold\",\n            color: \"neutralEmphasis\",\n            children: name\n          }), name === login ? null : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n            size: \"small\",\n            color: \"neutralTertiary\",\n            children: login\n          })]\n        })\n      })]\n    })\n  });\n});\n\n// Git controls\n// -----------------------------------------------------------------------------\n\nfunction GitMenu() {\n  var _appShellData$data, _appShellData$data$re;\n  const stringFormatter = (0,_react_aria_i18n__WEBPACK_IMPORTED_MODULE_102__.useLocalizedStringFormatter)(l10nMessages);\n  const data = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(BranchInfoContext);\n  const [newBranchDialogVisible, toggleNewBranchDialog] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useReducer)(v => !v, false);\n  const [deleteBranchDialogVisible, toggleDeleteBranchDialog] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useReducer)(v => !v, false);\n  const [, deleteBranch] = (0,urql__WEBPACK_IMPORTED_MODULE_99__.useMutation)((0,_ts_gql_tag_no_transform__WEBPACK_IMPORTED_MODULE_59__.gql)`\n      mutation DeleteBranch($refId: ID!) {\n        deleteRef(input: { refId: $refId }) {\n          __typename\n        }\n      }\n    `);\n  const repoURL = getRepoUrl(data);\n  const appShellData = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(GitHubAppShellDataContext);\n  const fork = (appShellData === null || appShellData === void 0 || (_appShellData$data = appShellData.data) === null || _appShellData$data === void 0 ? void 0 : _appShellData$data.repository) && 'forks' in appShellData.data.repository && ((_appShellData$data$re = appShellData.data.repository.forks.nodes) === null || _appShellData$data$re === void 0 ? void 0 : _appShellData$data$re[0]);\n  const gitMenuItems = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {\n    let isDefaultBranch = data.currentBranch === data.defaultBranch;\n    let items = [];\n    let branchSection = [{\n      key: 'new-branch',\n      icon: _keystar_ui_icon_icons_gitBranchPlusIcon__WEBPACK_IMPORTED_MODULE_88__.gitBranchPlusIcon,\n      label: stringFormatter.format('newBranch')\n    }];\n    let prSection = [];\n    let repoSection = [{\n      key: 'repo',\n      icon: _keystar_ui_icon_icons_githubIcon__WEBPACK_IMPORTED_MODULE_89__.githubIcon,\n      href: repoURL,\n      target: '_blank',\n      rel: 'noopener noreferrer',\n      label: 'Github repo' // TODO: l10n\n    }];\n    if (!isDefaultBranch) {\n      if (data.pullRequestNumber === undefined) {\n        prSection.push({\n          key: 'create-pull-request',\n          icon: _keystar_ui_icon_icons_gitPullRequestIcon__WEBPACK_IMPORTED_MODULE_87__.gitPullRequestIcon,\n          href: `${repoURL}/pull/new/${data.currentBranch}`,\n          target: '_blank',\n          rel: 'noopener noreferrer',\n          label: stringFormatter.format('createPullRequest')\n        });\n      } else {\n        prSection.push({\n          key: 'view-pull-request',\n          icon: _keystar_ui_icon_icons_gitPullRequestIcon__WEBPACK_IMPORTED_MODULE_87__.gitPullRequestIcon,\n          href: `${repoURL}/pull/${data.pullRequestNumber}`,\n          target: '_blank',\n          rel: 'noopener noreferrer',\n          label: `Pull Request #${data.pullRequestNumber}`\n        });\n      }\n      if (data.pullRequestNumber === undefined) {\n        branchSection.push({\n          key: 'delete-branch',\n          icon: _keystar_ui_icon_icons_trash2Icon__WEBPACK_IMPORTED_MODULE_15__.trash2Icon,\n          label: stringFormatter.format('deleteBranch')\n        });\n      }\n    }\n    if (fork) {\n      repoSection.push({\n        key: 'fork',\n        icon: _keystar_ui_icon_icons_gitForkIcon__WEBPACK_IMPORTED_MODULE_90__.gitForkIcon,\n        href: `https://github.com/${fork.owner.login}/${fork.name}`,\n        target: '_blank',\n        rel: 'noopener noreferrer',\n        label: 'View fork' // TODO: l10n\n      });\n    }\n    if (branchSection.length) {\n      items.push({\n        key: 'branch-section',\n        label: stringFormatter.format('branches'),\n        children: branchSection\n      });\n    }\n    if (prSection.length) {\n      items.push({\n        key: 'pr-section',\n        label: stringFormatter.format('pullRequests'),\n        children: prSection\n      });\n    }\n    if (repoSection.length) {\n      items.push({\n        key: 'repo-section',\n        label: 'Repository',\n        // TODO: l10n\n        children: repoSection\n      });\n    }\n    return items;\n  }, [fork, data.currentBranch, data.defaultBranch, data.pullRequestNumber, repoURL, stringFormatter]);\n  const router = useRouter();\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.Fragment, {\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_menu__WEBPACK_IMPORTED_MODULE_40__.ActionMenu, {\n      \"aria-label\": \"git actions\",\n      align: \"end\",\n      items: gitMenuItems,\n      onAction: key => {\n        switch (key) {\n          case 'new-branch':\n            toggleNewBranchDialog();\n            break;\n          case 'delete-branch':\n            {\n              toggleDeleteBranchDialog();\n              break;\n            }\n        }\n      },\n      children: item => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_react_stately_collections__WEBPACK_IMPORTED_MODULE_107__.Section, {\n        items: item.children,\n        \"aria-label\": item.label,\n        children: item => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_react_stately_collections__WEBPACK_IMPORTED_MODULE_107__.Item, {\n          textValue: item.label,\n          href: item.href,\n          rel: item.rel,\n          target: item.target,\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n            src: item.icon\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n            children: item.label\n          })]\n        }, item.key)\n      }, item.key)\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_12__.DialogContainer, {\n      onDismiss: toggleNewBranchDialog,\n      children: newBranchDialogVisible && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(CreateBranchDialog, {\n        onDismiss: toggleNewBranchDialog,\n        onCreate: branchName => {\n          toggleNewBranchDialog();\n          router.push(router.href.replace(/\\/branch\\/[^/]+/, '/branch/' + encodeURIComponent(branchName)));\n        }\n      })\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_12__.DialogContainer, {\n      onDismiss: toggleDeleteBranchDialog,\n      children: deleteBranchDialogVisible && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_12__.AlertDialog, {\n        title: \"Delete branch\",\n        tone: \"critical\",\n        cancelLabel: \"Cancel\",\n        primaryActionLabel: \"Yes, delete\",\n        autoFocusButton: \"cancel\",\n        onPrimaryAction: async () => {\n          await deleteBranch({\n            refId: data.branchNameToId.get(data.currentBranch)\n          });\n          router.push(router.href.replace(/\\/branch\\/[^/]+/, '/branch/' + encodeURIComponent(data.defaultBranch)));\n        },\n        children: [\"Are you sure you want to delete the \\\"\", data.currentBranch, \"\\\" branch? This cannot be undone.\"]\n      })\n    })]\n  });\n}\n\n// Utils\n// -----------------------------------------------------------------------------\n\nfunction useUserData() {\n  const config = useConfig();\n  const user = useViewer();\n  const rawCloudInfo = useRawCloudInfo();\n  if (rawCloudInfo) {\n    if (rawCloudInfo === 'unauthorized') {\n      return rawCloudInfo;\n    }\n    return {\n      avatarUrl: rawCloudInfo.user.avatarUrl,\n      login: rawCloudInfo.user.email,\n      name: rawCloudInfo.user.name\n    };\n  }\n  if (isGitHubConfig(config) && user) {\n    var _user$name;\n    return {\n      avatarUrl: user.avatarUrl,\n      login: user.login,\n      name: (_user$name = user.name) !== null && _user$name !== void 0 ? _user$name : user.login\n    };\n  }\n  return undefined;\n}\n\nconst SidebarContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)(null);\nfunction useSidebar() {\n  let context = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(SidebarContext);\n  if (!context) {\n    throw new Error('useSidebar must be within a SidebarProvider');\n  }\n  return context;\n}\nconst breakpointNames = (0,emery__WEBPACK_IMPORTED_MODULE_1__.typedKeys)(_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.breakpoints);\nfunction SidebarProvider(props) {\n  const matchedBreakpoints = (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.useBreakpoint)();\n  const state = (0,_react_stately_overlays__WEBPACK_IMPORTED_MODULE_105__.useOverlayTriggerState)({\n    defaultOpen: matchedBreakpoints.includes('desktop')\n  });\n  let breakpointIndex = breakpointNames.indexOf(matchedBreakpoints[0]);\n  let previousIndex = (0,_keystar_ui_utils__WEBPACK_IMPORTED_MODULE_68__.usePrevious)(breakpointIndex) || 0;\n  (0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_101__.useUpdateEffect)(() => {\n    let larger = previousIndex < breakpointIndex;\n    if (larger && breakpointIndex >= 2) {\n      state.open();\n    } else if (breakpointIndex < 2) {\n      state.close();\n    }\n  }, [matchedBreakpoints]);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(SidebarContext.Provider, {\n    value: state,\n    children: props.children\n  });\n}\nfunction SidebarPanel() {\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.VStack, {\n    backgroundColor: \"surface\",\n    height: \"100%\",\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(SidebarHeader, {}), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(SidebarGitActions, {}), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(SidebarNav, {}), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(SidebarFooter, {})]\n  });\n}\nfunction SidebarHeader() {\n  let isLocalNoCloud = useIsLocalNoCloud();\n  let {\n    brandMark,\n    brandName\n  } = useBrand();\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.HStack, {\n    alignItems: \"center\",\n    gap: \"regular\",\n    paddingY: \"regular\",\n    paddingX: \"medium\",\n    height: {\n      mobile: 'element.large',\n      tablet: 'element.xlarge'\n    },\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.HStack, {\n      flex: true,\n      alignItems: \"center\",\n      gap: \"regular\",\n      UNSAFE_className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n        // let consumers use \"currentColor\" in SVG for their brand mark\n        color: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.foreground.neutralEmphasis,\n        // ensure that the brand mark doesn't get squashed\n        '& :first-child': {\n          flexShrink: 0\n        }\n      }),\n      children: [brandMark, /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n        color: \"inherit\",\n        weight: \"medium\",\n        truncate: true,\n        children: brandName\n      })]\n    }), isLocalNoCloud && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ThemeMenu, {})]\n  });\n}\n\n// when local mode w/o cloud there's no user actions, so we hide the footer and\n// move the theme menu to the header\nfunction SidebarFooter() {\n  let isLocalNoCloud = useIsLocalNoCloud();\n  if (isLocalNoCloud) {\n    return null;\n  }\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.HStack, {\n    alignItems: \"center\",\n    paddingY: \"regular\",\n    paddingX: \"medium\",\n    gap: \"regular\",\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(UserActions, {}), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ThemeMenu, {})]\n  });\n}\n\n// no git actions in local mode\nfunction SidebarGitActions() {\n  let config = useConfig();\n  if (isLocalConfig(config)) {\n    return null;\n  }\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.HStack, {\n    gap: \"regular\",\n    paddingY: \"regular\",\n    paddingX: \"medium\",\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(BranchPicker, {}), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(GitMenu, {})]\n  });\n}\nfunction SidebarDialog() {\n  const state = useSidebar();\n  const router = useRouter();\n\n  // close the sidebar when the route changes\n  (0,_react_aria_utils__WEBPACK_IMPORTED_MODULE_101__.useUpdateEffect)(() => {\n    state.close();\n  }, [router.href]);\n  let dialogRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n  let {\n    modalProps,\n    underlayProps\n  } = (0,_react_aria_overlays__WEBPACK_IMPORTED_MODULE_106__.useModalOverlay)({\n    isDismissable: true\n  }, state, dialogRef);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.Fragment, {\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_overlays__WEBPACK_IMPORTED_MODULE_24__.Blanket, {\n      ...underlayProps,\n      isOpen: state.isOpen,\n      zIndex: 10\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(\"div\", {\n      \"data-visible\": state.isOpen,\n      id: SIDE_PANEL_ID,\n      ref: dialogRef,\n      ...modalProps,\n      // styles\n      className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n        backgroundColor: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.background.surface,\n        boxShadow: `${_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.shadow.large} ${_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.shadow.regular}`,\n        display: 'flex',\n        flexDirection: 'column',\n        inset: 0,\n        insetInlineEnd: 'auto',\n        // ensure that there's always enough of gutter for the user to press\n        // and exit the sidebar\n        maxWidth: `calc(100% - ${_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.element.medium})`,\n        minWidth: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.scale[3000],\n        outline: 0,\n        pointerEvents: 'none',\n        position: 'fixed',\n        transform: 'translateX(-100%)',\n        visibility: 'hidden',\n        zIndex: 10,\n        // exit animation\n        transition: [(0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.transition)('transform', {\n          easing: 'easeIn',\n          duration: 'short'\n          // delay: 'short',\n        }), (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.transition)('visibility', {\n          delay: 'regular',\n          duration: 0,\n          easing: 'linear'\n        })].join(', '),\n        '&[data-visible=true]': {\n          transform: 'translateX(0)',\n          // enter animation\n          transition: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.transition)('transform', {\n            easing: 'easeOut'\n          }),\n          pointerEvents: 'auto',\n          visibility: 'visible'\n        }\n      }),\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(SidebarHeader, {}), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(SidebarGitActions, {}), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(SidebarNav, {}), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(SidebarFooter, {}), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_react_aria_overlays__WEBPACK_IMPORTED_MODULE_106__.DismissButton, {\n        onDismiss: state.close\n      })]\n    })]\n  });\n}\nfunction SidebarNav() {\n  const {\n    basePath\n  } = useAppState();\n  const stringFormatter = (0,_react_aria_i18n__WEBPACK_IMPORTED_MODULE_102__.useLocalizedStringFormatter)(l10nMessages);\n  const navItems = useNavItems();\n  const isCurrent = useIsCurrent();\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.ScrollView, {\n    flex: true,\n    paddingY: \"large\",\n    paddingEnd: \"medium\",\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_nav_list__WEBPACK_IMPORTED_MODULE_82__.NavList, {\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_nav_list__WEBPACK_IMPORTED_MODULE_82__.NavItem, {\n        href: basePath,\n        \"aria-current\": isCurrent(basePath, {\n          exact: true\n        }),\n        children: stringFormatter.format('dashboard')\n      }), navItems.map(item => renderItemOrGroup(item, isCurrent))]\n    })\n  });\n}\n\n// Utils\n// ----------------------------------------------------------------------------\n\nfunction useIsLocalNoCloud() {\n  const config = useConfig();\n  return isLocalConfig(config) && !config.cloud;\n}\nfunction useIsCurrent() {\n  const router = useRouter();\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((href, {\n    exact = false\n  } = {}) => {\n    if (exact) {\n      return href === router.href ? 'page' : undefined;\n    }\n    return href === router.href || router.href.startsWith(`${href}/`) ? 'page' : undefined;\n  }, [router.href]);\n}\n\n// Renderers\n// ----------------------------------------------------------------------------\nlet dividerCount = 0;\nfunction renderItemOrGroup(itemOrGroup, isCurrent) {\n  if ('isDivider' in itemOrGroup) {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Divider, {}, dividerCount++);\n  }\n  if ('children' in itemOrGroup) {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_nav_list__WEBPACK_IMPORTED_MODULE_82__.NavGroup, {\n      title: itemOrGroup.title,\n      children: itemOrGroup.children.map(child => renderItemOrGroup(child, isCurrent))\n    }, itemOrGroup.title);\n  }\n  let changeElement = (() => {\n    if (!itemOrGroup.changed) {\n      return null;\n    }\n    return typeof itemOrGroup.changed === 'number' ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_badge__WEBPACK_IMPORTED_MODULE_81__.Badge, {\n      tone: \"accent\",\n      marginStart: \"auto\",\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n        children: itemOrGroup.changed\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n        visuallyHidden: true,\n        children: pluralize(itemOrGroup.changed, {\n          singular: 'change',\n          plural: 'changes',\n          inclusive: false\n        })\n      })]\n    }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_status_light__WEBPACK_IMPORTED_MODULE_83__.StatusLight, {\n      tone: \"accent\",\n      marginStart: \"auto\",\n      \"aria-label\": \"Changed\",\n      role: \"status\"\n    });\n  })();\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_nav_list__WEBPACK_IMPORTED_MODULE_82__.NavItem, {\n    href: itemOrGroup.href,\n    \"aria-current\": isCurrent(itemOrGroup.href),\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n      truncate: true,\n      title: itemOrGroup.label,\n      children: itemOrGroup.label\n    }), changeElement]\n  }, itemOrGroup.key);\n}\n\nconst PageContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)({\n  containerWidth: 'medium'\n});\nconst PageRoot = ({\n  children,\n  containerWidth = 'medium'\n}) => {\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(PageContext.Provider, {\n    value: {\n      containerWidth\n    },\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n      elementType: \"main\",\n      direction: \"column\",\n      id: MAIN_PANEL_ID,\n      flex: true,\n      height: \"100%\"\n      // fix flexbox issues\n      ,\n      minHeight: 0,\n      minWidth: 0,\n      children: children\n    })\n  });\n};\nconst PageHeader = ({\n  children\n}) => {\n  const sidebarState = useSidebar();\n  const menuButtonRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n  const {\n    direction\n  } = (0,_react_aria_i18n__WEBPACK_IMPORTED_MODULE_102__.useLocale)();\n  let icon = sidebarState.isOpen ? _keystar_ui_icon_icons_panelLeftCloseIcon__WEBPACK_IMPORTED_MODULE_78__.panelLeftCloseIcon : _keystar_ui_icon_icons_panelLeftOpenIcon__WEBPACK_IMPORTED_MODULE_77__.panelLeftOpenIcon;\n  if (direction === 'rtl') {\n    icon = sidebarState.isOpen ? _keystar_ui_icon_icons_panelRightCloseIcon__WEBPACK_IMPORTED_MODULE_80__.panelRightCloseIcon : _keystar_ui_icon_icons_panelRightOpenIcon__WEBPACK_IMPORTED_MODULE_79__.panelRightOpenIcon;\n  }\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Box, {\n    borderBottom: \"muted\",\n    elementType: \"header\",\n    height: {\n      mobile: 'element.large',\n      tablet: 'element.xlarge'\n    },\n    flexShrink: 0,\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Box, {\n      minHeight: 0,\n      minWidth: 0,\n      paddingX: {\n        mobile: 'medium',\n        tablet: 'xlarge',\n        desktop: 'xxlarge'\n      },\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n        alignItems: \"center\",\n        gap: {\n          mobile: 'small',\n          tablet: 'regular'\n        },\n        height: {\n          mobile: 'element.large',\n          tablet: 'element.xlarge'\n        },\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n          prominence: \"low\",\n          \"aria-label\": \"Open app navigation\",\n          \"aria-pressed\": sidebarState.isOpen,\n          isHidden: sidebarState.isOpen ? {\n            above: 'tablet'\n          } : undefined,\n          onPress: sidebarState.toggle,\n          ref: menuButtonRef,\n          UNSAFE_className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n            marginInlineStart: `calc(${_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.space.regular} * -1)`\n          }),\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n            src: icon\n          })\n        }), children]\n      })\n    })\n  });\n};\nconst PageBody = ({\n  children,\n  isScrollable\n}) => {\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ScrollView, {\n    isDisabled: !isScrollable,\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(PageContainer\n    // padding on the container so descendants can use sticky positioning\n    // with simple relative offsets\n    , {\n      paddingY: \"xxlarge\",\n      children: children\n    })\n  });\n};\nconst PageContainer = props => {\n  const {\n    containerWidth\n  } = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(PageContext);\n  const maxWidth = containerWidth === 'none' ? undefined : `container.${containerWidth}`;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Box, {\n    minHeight: 0,\n    minWidth: 0,\n    maxWidth: maxWidth\n    // marginX=\"auto\"\n    ,\n    paddingX: {\n      mobile: 'medium',\n      tablet: 'xlarge',\n      desktop: 'xxlarge'\n    },\n    ...props\n  });\n};\n\nclass FieldDataError extends Error {\n  constructor(message) {\n    super(message);\n    this.name = 'FieldDataError';\n  }\n}\n\nfunction assertRequired(value, validation, label) {\n  if (value === null && validation !== null && validation !== void 0 && validation.isRequired) {\n    throw new FieldDataError(`${label} is required`);\n  }\n}\nfunction basicFormFieldWithSimpleReaderParse(config) {\n  return {\n    kind: 'form',\n    Input: config.Input,\n    defaultValue: config.defaultValue,\n    parse: config.parse,\n    serialize: config.serialize,\n    validate: config.validate,\n    reader: {\n      parse(value) {\n        return config.validate(config.parse(value));\n      }\n    }\n  };\n}\n\nconst arrayValuesToElementKeys = new WeakMap();\nlet counter = 0;\nfunction getKeysForArrayValue(value) {\n  if (!arrayValuesToElementKeys.has(value)) {\n    arrayValuesToElementKeys.set(value, Array.from({\n      length: value.length\n    }, getNewArrayElementKey));\n  }\n  return arrayValuesToElementKeys.get(value);\n}\nfunction setKeysForArrayValue(value, elementIds) {\n  arrayValuesToElementKeys.set(value, elementIds);\n}\nfunction getNewArrayElementKey() {\n  return (counter++).toString();\n}\nconst getInitialPropsValue = _getInitialPropsValue;\nfunction _getInitialPropsValue(schema) {\n  switch (schema.kind) {\n    case 'form':\n      return schema.defaultValue();\n    case 'child':\n      return schema.options.kind === 'block' ? [{\n        type: 'paragraph',\n        children: [{\n          text: ''\n        }]\n      }] : null;\n    case 'conditional':\n      {\n        const defaultValue = schema.discriminant.defaultValue();\n        return {\n          discriminant: defaultValue,\n          value: getInitialPropsValue(schema.values[defaultValue.toString()])\n        };\n      }\n    case 'object':\n      {\n        const obj = {};\n        for (const key of Object.keys(schema.fields)) {\n          obj[key] = getInitialPropsValue(schema.fields[key]);\n        }\n        return obj;\n      }\n    case 'array':\n      {\n        return [];\n      }\n  }\n  (0,emery__WEBPACK_IMPORTED_MODULE_1__.assertNever)(schema);\n}\nfunction getInitialPropsValueFromInitializer(schema, initializer) {\n  switch (schema.kind) {\n    case 'form':\n      return initializer === undefined ? schema.defaultValue() : initializer;\n    case 'child':\n      return initializer !== null && initializer !== void 0 ? initializer : schema.options.kind === 'block' ? [{\n        type: 'paragraph',\n        children: [{\n          text: ''\n        }]\n      }] : null;\n    case 'conditional':\n      {\n        const defaultValue = initializer === undefined ? schema.discriminant.defaultValue() : initializer.discriminant;\n        return {\n          discriminant: defaultValue,\n          value: getInitialPropsValueFromInitializer(schema.values[defaultValue.toString()], initializer === undefined ? undefined : initializer.value)\n        };\n      }\n    case 'object':\n      {\n        const obj = {};\n        for (const key of Object.keys(schema.fields)) {\n          obj[key] = getInitialPropsValueFromInitializer(schema.fields[key], initializer === undefined ? undefined : initializer[key]);\n        }\n        return obj;\n      }\n    case 'array':\n      {\n        return (initializer !== null && initializer !== void 0 ? initializer : []).map(x => getInitialPropsValueFromInitializer(schema.element, x.value));\n      }\n  }\n  (0,emery__WEBPACK_IMPORTED_MODULE_1__.assertNever)(schema);\n}\nfunction updateValue(schema, currentValue, updater) {\n  if (updater === undefined) return currentValue;\n  switch (schema.kind) {\n    case 'form':\n      return updater;\n    case 'child':\n      return updater;\n    case 'conditional':\n      {\n        return {\n          discriminant: updater.discriminant,\n          value: updater.discriminant === currentValue.discriminant ? updateValue(schema.values[updater.discriminant.toString()], currentValue.value, updater.value) : getInitialPropsValueFromInitializer(schema.values[updater.discriminant.toString()], updater.value)\n        };\n      }\n    case 'object':\n      {\n        const obj = {};\n        for (const key of Object.keys(schema.fields)) {\n          obj[key] = updateValue(schema.fields[key], currentValue[key], updater[key]);\n        }\n        return obj;\n      }\n    case 'array':\n      {\n        const currentArrVal = currentValue;\n        const newVal = updater;\n        const uniqueKeys = new Set();\n        for (const x of newVal) {\n          if (x.key !== undefined) {\n            if (uniqueKeys.has(x.key)) {\n              throw new Error('Array elements must have unique keys');\n            }\n            uniqueKeys.add(x.key);\n          }\n        }\n        const keys = newVal.map(x => {\n          if (x.key !== undefined) return x.key;\n          let elementKey = getNewArrayElementKey();\n          // just in case someone gives a key that is above our counter\n          while (uniqueKeys.has(elementKey)) {\n            elementKey = getNewArrayElementKey();\n          }\n          uniqueKeys.add(elementKey);\n          return elementKey;\n        });\n        const prevKeys = getKeysForArrayValue(currentArrVal);\n        const prevValuesByKey = new Map(currentArrVal.map((value, i) => {\n          return [prevKeys[i], value];\n        }));\n        const val = newVal.map((x, i) => {\n          const id = keys[i];\n          if (prevValuesByKey.has(id)) {\n            return updateValue(schema.element, prevValuesByKey.get(id), x.value);\n          }\n          return getInitialPropsValueFromInitializer(schema.element, x.value);\n        });\n        setKeysForArrayValue(val, keys);\n        return val;\n      }\n  }\n  (0,emery__WEBPACK_IMPORTED_MODULE_1__.assertNever)(schema);\n}\n\nfunction getValueAtPropPath(value, inputPath) {\n  const path = [...inputPath];\n  while (path.length) {\n    const key = path.shift();\n    value = value[key];\n  }\n  return value;\n}\nfunction traverseProps(schema, value, visitor, path = []) {\n  if (schema.kind === 'form' || schema.kind === 'child') {\n    visitor(schema, value, path);\n    return;\n  }\n  if (schema.kind === 'object') {\n    for (const [key, childProp] of Object.entries(schema.fields)) {\n      traverseProps(childProp, value[key], visitor, [...path, key]);\n    }\n    visitor(schema, value, path);\n    return;\n  }\n  if (schema.kind === 'array') {\n    for (const [idx, val] of value.entries()) {\n      traverseProps(schema.element, val, visitor, path.concat(idx));\n    }\n    return visitor(schema, value, path);\n  }\n  if (schema.kind === 'conditional') {\n    const discriminant = value.discriminant;\n    visitor(schema, discriminant, path.concat('discriminant'));\n    traverseProps(schema.values[discriminant.toString()], value.value, visitor, path.concat('value'));\n    visitor(schema, value, path);\n    return;\n  }\n  (0,emery_assertions__WEBPACK_IMPORTED_MODULE_0__.assertNever)(schema);\n}\nfunction transformProps(schema, value, visitors, path = []) {\n  if (schema.kind === 'form' || schema.kind === 'child') {\n    if (visitors[schema.kind]) {\n      return visitors[schema.kind](schema, value, path);\n    }\n    return value;\n  }\n  if (schema.kind === 'object') {\n    const val = Object.fromEntries(Object.entries(schema.fields).map(([key, val]) => {\n      return [key, transformProps(val, value[key], visitors, [...path, key])];\n    }));\n    if (visitors.object) {\n      return visitors[schema.kind](schema, val, path);\n    }\n    return val;\n  }\n  if (schema.kind === 'array') {\n    const val = value.map((val, idx) => transformProps(schema.element, val, visitors, path.concat(idx)));\n    if (visitors.array) {\n      return visitors[schema.kind](schema, val, path);\n    }\n    return val;\n  }\n  if (schema.kind === 'conditional') {\n    const discriminant = transformProps(schema.discriminant, value.discriminant, visitors, path.concat('discriminant'));\n    const conditionalVal = transformProps(schema.values[discriminant.toString()], value.value, visitors, path.concat('value'));\n    const val = {\n      discriminant,\n      value: conditionalVal\n    };\n    if (visitors.conditional) {\n      return visitors[schema.kind](schema, val, path);\n    }\n    return val;\n  }\n  (0,emery_assertions__WEBPACK_IMPORTED_MODULE_0__.assertNever)(schema);\n}\nfunction replaceValueAtPropPath(schema, value, newValue, path) {\n  if (path.length === 0) {\n    return newValue;\n  }\n  const [key, ...newPath] = path;\n  if (schema.kind === 'object') {\n    return {\n      ...value,\n      [key]: replaceValueAtPropPath(schema.fields[key], value[key], newValue, newPath)\n    };\n  }\n  if (schema.kind === 'conditional') {\n    const conditionalValue = value;\n    // replaceValueAtPropPath should not be used to only update the discriminant of a conditional field\n    // if you want to update the discriminant of a conditional field, replace the value of the whole conditional field\n    (0,emery_assertions__WEBPACK_IMPORTED_MODULE_0__.assert)(key === 'value');\n    return {\n      discriminant: conditionalValue.discriminant,\n      value: replaceValueAtPropPath(schema.values[key], conditionalValue.value, newValue, newPath)\n    };\n  }\n  if (schema.kind === 'array') {\n    const prevVal = value;\n    const newVal = [...prevVal];\n    setKeysForArrayValue(newVal, getKeysForArrayValue(prevVal));\n    newVal[key] = replaceValueAtPropPath(schema.element, newVal[key], newValue, newPath);\n    return newVal;\n  }\n\n  // we should never reach here since form or child fields don't contain other fields\n  // so the only thing that can happen to them is to be replaced which happens at the start of this function when path.length === 0\n  (0,emery_assertions__WEBPACK_IMPORTED_MODULE_0__.assert)(schema.kind !== 'form' && schema.kind !== 'child');\n  (0,emery_assertions__WEBPACK_IMPORTED_MODULE_0__.assertNever)(schema);\n}\n\n// a v important note\n// marks in the markdown ast/html are represented quite differently to how they are in slate\n// if you had the markdown **something https://keystonejs.com something**\n// the bold node is the parent of the link node\n// but in slate, marks are only represented on text nodes\n\nconst currentlyActiveMarks = new Set();\nconst currentlyDisabledMarks = new Set();\nlet currentLink = null;\nfunction addMarkToChildren(mark, cb) {\n  const wasPreviouslyActive = currentlyActiveMarks.has(mark);\n  currentlyActiveMarks.add(mark);\n  try {\n    return cb();\n  } finally {\n    if (!wasPreviouslyActive) {\n      currentlyActiveMarks.delete(mark);\n    }\n  }\n}\nfunction setLinkForChildren(href, cb) {\n  // we'll only use the outer link\n  if (currentLink !== null) {\n    return cb();\n  }\n  currentLink = href;\n  try {\n    return cb();\n  } finally {\n    currentLink = null;\n  }\n}\nfunction addMarksToChildren(marks, cb) {\n  const marksToRemove = new Set();\n  for (const mark of marks) {\n    if (!currentlyActiveMarks.has(mark)) {\n      marksToRemove.add(mark);\n    }\n    currentlyActiveMarks.add(mark);\n  }\n  try {\n    return cb();\n  } finally {\n    for (const mark of marksToRemove) {\n      currentlyActiveMarks.delete(mark);\n    }\n  }\n}\nfunction forceDisableMarkForChildren(mark, cb) {\n  const wasPreviouslyDisabled = currentlyDisabledMarks.has(mark);\n  currentlyDisabledMarks.add(mark);\n  try {\n    return cb();\n  } finally {\n    if (!wasPreviouslyDisabled) {\n      currentlyDisabledMarks.delete(mark);\n    }\n  }\n}\n\n/**\n * This type is more strict than `Element & { type: 'link'; }` because `children`\n * is constrained to only contain Text nodes. This can't be assumed generally around the editor\n * (because of potentially future inline components or nested links(which are normalized away but the editor needs to not break if it happens))\n * but where this type is used, we're only going to allow links to contain Text and that's important\n * so that we know a block will never be inside an inline because Slate gets unhappy when that happens\n * (really the link inline should probably be a mark rather than an inline,\n * non-void inlines are probably always bad but that would imply changing the document\n * structure which would be such unnecessary breakage)\n */\n\nfunction getInlineNodes(text) {\n  const node = {\n    text\n  };\n  for (const mark of currentlyActiveMarks) {\n    if (!currentlyDisabledMarks.has(mark)) {\n      node[mark] = true;\n    }\n  }\n  if (currentLink !== null) {\n    return [{\n      text: ''\n    }, {\n      type: 'link',\n      href: currentLink,\n      children: [node]\n    }, {\n      text: ''\n    }];\n  }\n  return [node];\n}\n\nclass VariableChildFields extends Error {\n  constructor() {\n    super('There are a variable number of child fields');\n  }\n}\nfunction findSingleChildField(schema) {\n  try {\n    const result = _findConstantChildFields(schema, [], new Set());\n    if (result.length === 1) {\n      return result[0];\n    }\n    return;\n  } catch (err) {\n    if (err instanceof VariableChildFields) {\n      return;\n    }\n    throw err;\n  }\n}\nfunction _findConstantChildFields(schema, path, seenSchemas) {\n  if (seenSchemas.has(schema)) {\n    return [];\n  }\n  seenSchemas.add(schema);\n  switch (schema.kind) {\n    case 'form':\n      return [];\n    case 'child':\n      return [{\n        relativePath: path,\n        options: schema.options,\n        kind: 'child'\n      }];\n    case 'conditional':\n      {\n        if (couldContainChildField(schema)) {\n          throw new VariableChildFields();\n        }\n        return [];\n      }\n    case 'array':\n      {\n        if (schema.asChildTag) {\n          const child = _findConstantChildFields(schema.element, [], seenSchemas);\n          if (child.length > 1) {\n            return [];\n          }\n          return [{\n            kind: 'array',\n            asChildTag: schema.asChildTag,\n            field: schema,\n            relativePath: path,\n            child: child[0]\n          }];\n        }\n        if (couldContainChildField(schema)) {\n          throw new VariableChildFields();\n        }\n        return [];\n      }\n    case 'object':\n      {\n        const paths = [];\n        for (const [key, value] of Object.entries(schema.fields)) {\n          paths.push(..._findConstantChildFields(value, path.concat(key), seenSchemas));\n        }\n        return paths;\n      }\n  }\n}\nfunction couldContainChildField(schema, seen = new Set()) {\n  if (seen.has(schema)) {\n    return false;\n  }\n  seen.add(schema);\n  switch (schema.kind) {\n    case 'form':\n      return false;\n    case 'child':\n      return true;\n    case 'conditional':\n      return Object.values(schema.values).some(value => couldContainChildField(value, seen));\n    case 'object':\n      return Object.keys(schema.fields).some(key => couldContainChildField(schema.fields[key], seen));\n    case 'array':\n      return couldContainChildField(schema.element, seen);\n  }\n}\n\nfunction inlineNodeFromMarkdoc(node) {\n  if (node.type === 'inline') {\n    return inlineChildrenFromMarkdoc(node.children);\n  }\n  if (node.type === 'link') {\n    return setLinkForChildren(node.attributes.href, () => inlineChildrenFromMarkdoc(node.children));\n  }\n  if (node.type === 'text') {\n    return getInlineNodes(node.attributes.content);\n  }\n  if (node.type === 'strong') {\n    return addMarkToChildren('bold', () => inlineChildrenFromMarkdoc(node.children));\n  }\n  if (node.type === 'code') {\n    return addMarkToChildren('code', () => getInlineNodes(node.attributes.content));\n  }\n  if (node.type === 'em') {\n    return addMarkToChildren('italic', () => inlineChildrenFromMarkdoc(node.children));\n  }\n  if (node.type === 's') {\n    return addMarkToChildren('strikethrough', () => inlineChildrenFromMarkdoc(node.children));\n  }\n  if (node.type === 'tag') {\n    if (node.tag === 'u') {\n      return addMarkToChildren('underline', () => inlineChildrenFromMarkdoc(node.children));\n    }\n    if (node.tag === 'kbd') {\n      return addMarkToChildren('keyboard', () => inlineChildrenFromMarkdoc(node.children));\n    }\n    if (node.tag === 'sub') {\n      return addMarkToChildren('subscript', () => inlineChildrenFromMarkdoc(node.children));\n    }\n    if (node.tag === 'sup') {\n      return addMarkToChildren('superscript', () => inlineChildrenFromMarkdoc(node.children));\n    }\n  }\n  if (node.type === 'softbreak') {\n    return getInlineNodes(' ');\n  }\n  if (node.type === 'hardbreak') {\n    return getInlineNodes('\\n');\n  }\n  if (node.tag === 'component-inline-prop' && Array.isArray(node.attributes.propPath) && node.attributes.propPath.every(x => typeof x === 'string' || typeof x === 'number')) {\n    return {\n      type: 'component-inline-prop',\n      children: inlineFromMarkdoc(node.children),\n      propPath: node.attributes.propPath\n    };\n  }\n  throw new Error(`Unknown inline node type: ${node.type}`);\n}\nfunction inlineChildrenFromMarkdoc(nodes) {\n  return nodes.flatMap(inlineNodeFromMarkdoc);\n}\nfunction inlineFromMarkdoc(nodes) {\n  const transformedNodes = nodes.flatMap(inlineNodeFromMarkdoc);\n  const nextNodes = [];\n  let lastNode;\n  for (const [idx, node] of transformedNodes.entries()) {\n    var _lastNode;\n    if (node.type === undefined && node.text === '' && ((_lastNode = lastNode) === null || _lastNode === void 0 ? void 0 : _lastNode.type) === undefined && idx !== transformedNodes.length - 1) {\n      continue;\n    }\n    nextNodes.push(node);\n    lastNode = node;\n  }\n  if (!nextNodes.length) {\n    nextNodes.push({\n      text: ''\n    });\n  }\n  return nextNodes;\n}\nfunction fromMarkdoc(node, componentBlocks) {\n  const nodes = node.children.flatMap(x => fromMarkdocNode(x, componentBlocks));\n  if (nodes.length === 0) {\n    return [{\n      type: 'paragraph',\n      children: [{\n        text: ''\n      }]\n    }];\n  }\n  if (nodes[nodes.length - 1].type !== 'paragraph') {\n    nodes.push({\n      type: 'paragraph',\n      children: [{\n        text: ''\n      }]\n    });\n  }\n  return nodes;\n}\nfunction fromMarkdocNode(node, componentBlocks) {\n  if (node.type === 'blockquote') {\n    return {\n      type: 'blockquote',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'fence') {\n    const {\n      language,\n      content,\n      ...rest\n    } = node.attributes;\n    return {\n      type: 'code',\n      children: [{\n        text: content.replace(/\\n$/, '')\n      }],\n      ...(typeof language === 'string' ? {\n        language\n      } : {}),\n      ...rest\n    };\n  }\n  if (node.type === 'heading') {\n    return {\n      ...node.attributes,\n      level: node.attributes.level,\n      type: 'heading',\n      children: inlineFromMarkdoc(node.children)\n    };\n  }\n  if (node.type === 'list') {\n    return {\n      type: node.attributes.ordered ? 'ordered-list' : 'unordered-list',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'item') {\n    var _node$children$;\n    const children = [{\n      type: 'list-item-content',\n      children: node.children.length ? inlineFromMarkdoc([node.children[0]]) : [{\n        text: ''\n      }]\n    }];\n    if (((_node$children$ = node.children[1]) === null || _node$children$ === void 0 ? void 0 : _node$children$.type) === 'list') {\n      const list = node.children[1];\n      children.push({\n        type: list.attributes.ordered ? 'ordered-list' : 'unordered-list',\n        children: list.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n      });\n    }\n    return {\n      type: 'list-item',\n      children\n    };\n  }\n  if (node.type === 'paragraph') {\n    if (node.children.length === 1 && node.children[0].type === 'inline' && node.children[0].children.length === 1 && node.children[0].children[0].type === 'image') {\n      var _image$attributes$tit;\n      const image = node.children[0].children[0];\n      return {\n        type: 'image',\n        src: decodeURI(image.attributes.src),\n        alt: image.attributes.alt,\n        title: (_image$attributes$tit = image.attributes.title) !== null && _image$attributes$tit !== void 0 ? _image$attributes$tit : '',\n        children: [{\n          text: ''\n        }]\n      };\n    }\n    const children = inlineFromMarkdoc(node.children);\n    if (children.length === 1 && children[0].type === 'component-inline-prop') {\n      return children[0];\n    }\n    return {\n      type: 'paragraph',\n      children,\n      textAlign: node.attributes.textAlign\n    };\n  }\n  if (node.type === 'hr') {\n    return {\n      type: 'divider',\n      children: [{\n        text: ''\n      }]\n    };\n  }\n  if (node.type === 'table') {\n    return {\n      type: 'table',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'tbody') {\n    return {\n      type: 'table-body',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'thead') {\n    if (!node.children.length) return [];\n    return {\n      type: 'table-head',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'tr') {\n    return {\n      type: 'table-row',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'td') {\n    return {\n      type: 'table-cell',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'th') {\n    return {\n      type: 'table-cell',\n      header: true,\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'tag') {\n    if (node.tag === 'table') {\n      return fromMarkdocNode(node.children[0], componentBlocks);\n    }\n    if (node.tag === 'layout') {\n      return {\n        type: 'layout',\n        layout: node.attributes.layout,\n        children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n      };\n    }\n    if (node.tag === 'layout-area') {\n      return {\n        type: 'layout-area',\n        children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n      };\n    }\n    if (node.tag === 'component-block') {\n      return {\n        type: 'component-block',\n        component: node.attributes.component,\n        props: node.attributes.props,\n        children: node.children.length === 0 ? [{\n          type: 'component-inline-prop',\n          children: [{\n            text: ''\n          }]\n        }] : node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n      };\n    }\n    if (node.tag === 'component-block-prop' && Array.isArray(node.attributes.propPath) && node.attributes.propPath.every(x => typeof x === 'string' || typeof x === 'number')) {\n      return {\n        type: 'component-block-prop',\n        children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks)),\n        propPath: node.attributes.propPath\n      };\n    }\n    if (node.tag) {\n      const componentBlock = componentBlocks[node.tag];\n      if (componentBlock) {\n        const singleChildField = findSingleChildField({\n          kind: 'object',\n          fields: componentBlock.schema\n        });\n        if (singleChildField) {\n          const newAttributes = JSON.parse(JSON.stringify(node.attributes));\n          const children = [];\n          toChildrenAndProps$1(node.children, children, newAttributes, singleChildField, [], componentBlocks);\n          return {\n            type: 'component-block',\n            component: node.tag,\n            props: newAttributes,\n            children\n          };\n        }\n        return {\n          type: 'component-block',\n          component: node.tag,\n          props: node.attributes,\n          children: node.children.length === 0 ? [{\n            type: 'component-inline-prop',\n            children: [{\n              text: ''\n            }]\n          }] : node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n        };\n      }\n    }\n    throw new Error(`Unknown tag: ${node.tag}`);\n  }\n  return inlineNodeFromMarkdoc(node);\n}\nfunction toChildrenAndProps$1(fromMarkdoc, resultingChildren, value, singleChildField, parentPropPath, componentBlocks) {\n  if (singleChildField.kind === 'child') {\n    const children = fromMarkdoc.flatMap(x => fromMarkdocNode(x, componentBlocks));\n    resultingChildren.push({\n      type: `component-${singleChildField.options.kind}-prop`,\n      propPath: [...parentPropPath, ...singleChildField.relativePath],\n      children\n    });\n  }\n  if (singleChildField.kind === 'array') {\n    const arr = [];\n    for (let [idx, child] of fromMarkdoc.entries()) {\n      if (child.type === 'paragraph') {\n        child = child.children[0].children[0];\n      }\n      if (child.type !== 'tag') {\n        throw new Error(`expected tag ${singleChildField.asChildTag}, found type: ${child.type}`);\n      }\n      if (child.tag !== singleChildField.asChildTag) {\n        throw new Error(`expected tag ${singleChildField.asChildTag}, found tag: ${child.tag}`);\n      }\n      const attributes = JSON.parse(JSON.stringify(child.attributes));\n      if (singleChildField.child) {\n        toChildrenAndProps$1(child.children, resultingChildren, attributes, singleChildField.child, [...parentPropPath, ...singleChildField.relativePath, idx], componentBlocks);\n      }\n      arr.push(attributes);\n    }\n    const key = singleChildField.relativePath[singleChildField.relativePath.length - 1];\n    const parent = getValueAtPropPath(value, singleChildField.relativePath.slice(0, -1));\n    parent[key] = arr;\n  }\n}\n\nfunction areArraysEqual(a, b) {\n  return a.length === b.length && a.every((x, i) => x === b[i]);\n}\nfunction normalizeTextBasedOnInlineMarksAndSoftBreaks([node, path], editor, inlineMarks, softBreaks) {\n  const marksToRemove = Object.keys(node).filter(x => x !== 'text' && x !== 'insertMenu' && inlineMarks[x] !== true);\n  if (marksToRemove.length) {\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unsetNodes(editor, marksToRemove, {\n      at: path\n    });\n    return true;\n  }\n  if (!softBreaks) {\n    const hasSoftBreaks = node.text.includes('\\n');\n    if (hasSoftBreaks) {\n      const [parentNode] = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.parent(editor, path);\n      if (parentNode.type !== 'code') {\n        for (const position of slate__WEBPACK_IMPORTED_MODULE_104__.Editor.positions(editor, {\n          at: path\n        })) {\n          const character = slate__WEBPACK_IMPORTED_MODULE_104__.Node.get(editor, position.path).text[position.offset];\n          if (character === '\\n') {\n            slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.delete(editor, {\n              at: position\n            });\n            return true;\n          }\n        }\n      }\n    }\n  }\n  return false;\n}\nfunction normalizeInlineBasedOnLinks([node, path], editor, links) {\n  if (node.type === 'link' && !links) {\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.insertText(editor, ` (${node.href})`, {\n      at: slate__WEBPACK_IMPORTED_MODULE_104__.Editor.end(editor, path)\n    });\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n      at: path\n    });\n    return true;\n  }\n  return false;\n}\nfunction normalizeElementBasedOnDocumentFeatures([node, path], editor, {\n  formatting,\n  dividers,\n  layouts,\n  links,\n  images,\n  tables\n}) {\n  if (node.type === 'heading' && (!formatting.headings.levels.length || !formatting.headings.levels.includes(node.level)) || node.type === 'ordered-list' && !formatting.listTypes.ordered || node.type === 'unordered-list' && !formatting.listTypes.unordered || node.type === 'code' && !formatting.blockTypes.code || node.type === 'blockquote' && !formatting.blockTypes.blockquote || node.type === 'image' && !images || node.type === 'table' && !tables || node.type === 'layout' && (layouts.length === 0 || !layouts.some(layout => areArraysEqual(layout, node.layout)))) {\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n      at: path\n    });\n    return true;\n  }\n  if ((node.type === 'paragraph' || node.type === 'heading') && (!formatting.alignment.center && node.textAlign === 'center' || !formatting.alignment.end && node.textAlign === 'end' || 'textAlign' in node && node.textAlign !== 'center' && node.textAlign !== 'end')) {\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unsetNodes(editor, 'textAlign', {\n      at: path\n    });\n    return true;\n  }\n  if (node.type === 'divider' && !dividers) {\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n      at: path\n    });\n    return true;\n  }\n  return normalizeInlineBasedOnLinks([node, path], editor, links);\n}\nfunction withDocumentFeaturesNormalization(documentFeatures, editor) {\n  const {\n    normalizeNode\n  } = editor;\n  editor.normalizeNode = ([node, path]) => {\n    if (slate__WEBPACK_IMPORTED_MODULE_104__.Text.isText(node)) {\n      normalizeTextBasedOnInlineMarksAndSoftBreaks([node, path], editor, documentFeatures.formatting.inlineMarks, documentFeatures.formatting.softBreaks);\n    } else if (slate__WEBPACK_IMPORTED_MODULE_104__.Element.isElement(node)) {\n      normalizeElementBasedOnDocumentFeatures([node, path], editor, documentFeatures);\n    }\n    normalizeNode([node, path]);\n  };\n  return editor;\n}\n\nfunction getSrcPrefix(publicPath, slug) {\n  return typeof publicPath === 'string' ? `${publicPath.replace(/\\/*$/, '')}/${slug === undefined ? '' : slug + '/'}` : '';\n}\n\nfunction deserializeFiles(nodes, componentBlocks, files, otherFiles, mode, documentFeatures, slug) {\n  return nodes.map(node => {\n    if (node.type === 'component-block') {\n      const componentBlock = componentBlocks[node.component];\n      if (!componentBlock) return node;\n      const schema = object(componentBlock.schema);\n      return {\n        ...node,\n        props: deserializeProps(schema, node.props, files, otherFiles, mode, slug)\n      };\n    }\n    if (node.type === 'image' && typeof node.src === 'string' && mode === 'edit') {\n      var _ref;\n      const prefix = getSrcPrefixForImageBlock(documentFeatures, slug);\n      const filename = node.src.slice(prefix.length);\n      const content = (_ref = typeof documentFeatures.images === 'object' && typeof documentFeatures.images.directory === 'string' ? otherFiles.get(fixPath(documentFeatures.images.directory)) : files) === null || _ref === void 0 ? void 0 : _ref.get(filename);\n      if (!content) {\n        return {\n          type: 'paragraph',\n          children: [{\n            text: `Missing image ${filename}`\n          }]\n        };\n      }\n      return {\n        type: 'image',\n        src: {\n          filename,\n          content\n        },\n        alt: node.alt,\n        title: node.title,\n        children: [{\n          text: ''\n        }]\n      };\n    }\n    if (typeof node.type === 'string') {\n      const children = deserializeFiles(node.children, componentBlocks, files, otherFiles, mode, documentFeatures, slug);\n      return {\n        ...node,\n        children\n      };\n    }\n    return node;\n  });\n}\nfunction deserializeProps(schema, value, files, otherFiles, mode, slug) {\n  return transformProps(schema, value, {\n    form: (schema, value) => {\n      if (schema.formKind === 'asset') {\n        var _otherFiles$get;\n        if (mode === 'read') {\n          return schema.reader.parse(value);\n        }\n        const filename = schema.filename(value, {\n          slug,\n          suggestedFilenamePrefix: undefined\n        });\n        return schema.parse(value, {\n          asset: filename ? schema.directory ? (_otherFiles$get = otherFiles.get(schema.directory)) === null || _otherFiles$get === void 0 ? void 0 : _otherFiles$get.get(filename) : files.get(filename) : undefined,\n          slug\n        });\n      }\n      if (schema.formKind === 'content') {\n        throw new Error('Not implemented');\n      }\n      if (mode === 'read') {\n        return schema.reader.parse(value);\n      }\n      return schema.parse(value, undefined);\n    }\n  });\n}\nfunction getSrcPrefixForImageBlock(documentFeatures, slug) {\n  return getSrcPrefix(typeof documentFeatures.images === 'object' ? documentFeatures.images.publicPath : undefined, slug);\n}\n\nfunction serializeProps(rootValue, rootSchema,\n// note you might have a slug without a slug field when serializing props inside a component block or etc. in the editor\nslugField, slug, shouldSuggestFilenamePrefix) {\n  const extraFiles = [];\n  return {\n    value: transformProps(rootSchema, rootValue, {\n      form(schema, value, propPath) {\n        if (propPath.length === 1 && slugField === propPath[0]) {\n          if (schema.formKind !== 'slug') {\n            throw new Error('slugField is a not a slug field');\n          }\n          return schema.serializeWithSlug(value).value;\n        }\n        if (schema.formKind === 'asset') {\n          const {\n            asset,\n            value: forYaml\n          } = schema.serialize(value, {\n            suggestedFilenamePrefix: shouldSuggestFilenamePrefix ? getPropPathPortion(propPath, rootSchema, rootValue) : undefined,\n            slug\n          });\n          if (asset) {\n            extraFiles.push({\n              path: asset.filename,\n              contents: asset.content,\n              parent: schema.directory\n            });\n          }\n          return forYaml;\n        }\n        if (schema.formKind === 'content') {\n          const {\n            other,\n            external,\n            content,\n            value: forYaml\n          } = schema.serialize(value, {\n            slug\n          });\n          if (content) {\n            extraFiles.push({\n              path: getPropPathPortion(propPath, rootSchema, rootValue) + schema.contentExtension,\n              contents: content,\n              parent: undefined\n            });\n          }\n          for (const [key, contents] of other) {\n            extraFiles.push({\n              path: getPropPathPortion(propPath, rootSchema, rootValue) + '/' + key,\n              contents,\n              parent: undefined\n            });\n          }\n          const allowedDirectories = new Set(schema.directories);\n          for (const [directory, contents] of external) {\n            if (!allowedDirectories.has(directory)) {\n              throw new Error(`Invalid directory ${directory} in content field serialization`);\n            }\n            for (const [filename, fileContents] of contents) {\n              extraFiles.push({\n                path: filename,\n                contents: fileContents,\n                parent: directory\n              });\n            }\n          }\n          return forYaml;\n        }\n        return schema.serialize(value).value;\n      },\n      object(_schema, value) {\n        return Object.fromEntries(Object.entries(value).filter(([_, val]) => val !== undefined));\n      },\n      array(_schema, value) {\n        return value.map(val => val === undefined ? null : val);\n      },\n      child() {\n        return undefined;\n      }\n    }),\n    extraFiles\n  };\n}\nfunction getPropPathPortion(path, schema, value) {\n  const end = [];\n  for (const portion of path) {\n    if (schema.kind === 'array') {\n      value = value[portion];\n      if (schema.slugField && schema.element.kind === 'object') {\n        const slug = getSlugFromState({\n          schema: schema.element.fields,\n          slugField: schema.slugField\n        }, value);\n        end.push(slug);\n      } else {\n        end.push(portion);\n      }\n      schema = schema.element;\n      continue;\n    }\n    end.push(portion);\n    if (schema.kind === 'object') {\n      value = value[portion];\n      schema = schema.fields[portion];\n      continue;\n    }\n    if (schema.kind === 'conditional') {\n      if (portion === 'discriminant') {\n        schema = schema.discriminant;\n      } else if (portion === 'value') {\n        schema = schema.values[value.discriminant];\n      }\n      value = value[portion];\n      continue;\n    }\n    throw new Error(`unexpected ${schema.kind}`);\n  }\n  return end.join('/');\n}\n\nfunction toInline(nodes) {\n  return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('inline', {}, nodes.flatMap(toMarkdocInline));\n}\nconst markToMarkdoc = {\n  bold: {\n    type: 'strong'\n  },\n  code: {\n    type: 'code'\n  },\n  italic: {\n    type: 'em'\n  },\n  underline: {\n    type: 'tag',\n    tag: 'u'\n  },\n  keyboard: {\n    type: 'tag',\n    tag: 'kbd'\n  },\n  strikethrough: {\n    type: 's'\n  },\n  subscript: {\n    type: 'tag',\n    tag: 'sub'\n  },\n  superscript: {\n    type: 'tag',\n    tag: 'sup'\n  }\n};\nfunction toMarkdocInline(node) {\n  var _exec, _exec2;\n  if (node.type === 'link') {\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('link', {\n      href: node.href\n    }, node.children.flatMap(toMarkdocInline));\n  }\n  if (node.type !== undefined) {\n    throw new Error(`unexpected inline node type: ${node.type}`);\n  }\n  const marks = Object.keys(node).filter(mark => mark !== 'text' && mark !== 'code').sort();\n  const leadingWhitespace = (_exec = /^\\s+/.exec(node.text)) === null || _exec === void 0 ? void 0 : _exec[0];\n  const trailingWhitespace = (_exec2 = /\\s+$/.exec(node.text)) === null || _exec2 === void 0 ? void 0 : _exec2[0];\n  let children = node.code ? [new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('code', {\n    content: node.text.trim()\n  }, [])] : [new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('text', {\n    content: node.text.trim()\n  })];\n  for (const mark of marks) {\n    const config = markToMarkdoc[mark];\n    if (config) {\n      children = [new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node(config.type, {}, children, config.tag)];\n    }\n  }\n  if (leadingWhitespace !== null && leadingWhitespace !== void 0 && leadingWhitespace.length) {\n    children.unshift(new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('text', {\n      content: leadingWhitespace\n    }, []));\n  }\n  if (trailingWhitespace !== null && trailingWhitespace !== void 0 && trailingWhitespace.length) {\n    children.push(new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('text', {\n      content: trailingWhitespace\n    }, []));\n  }\n  return children;\n}\nfunction toMarkdocDocument(nodes, _config) {\n  const extraFiles = [];\n  const config = {\n    ..._config,\n    extraFiles\n  };\n  const node = new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('document', {}, nodes.flatMap(x => toMarkdoc(x, config)));\n  return {\n    node,\n    extraFiles\n  };\n}\nfunction toChildrenAndProps(childrenAsMarkdoc, resultingChildren, value, singleChildField) {\n  if (singleChildField.kind === 'child') {\n    const child = childrenAsMarkdoc.find(x => areArraysEqual(x.propPath, singleChildField.relativePath));\n    if (child) {\n      resultingChildren.push(...child.children);\n    }\n    return;\n  }\n  if (singleChildField.kind === 'array') {\n    const key = singleChildField.relativePath[singleChildField.relativePath.length - 1];\n    const parent = getValueAtPropPath(value, singleChildField.relativePath.slice(0, -1));\n    const valueAtPropPath = parent[key];\n    delete parent[key];\n    const childNodes = new Map();\n    for (const child of childrenAsMarkdoc) {\n      const innerPropPath = child.propPath.slice(singleChildField.relativePath.length + 1);\n      const num = child.propPath[singleChildField.relativePath.length];\n      if (childNodes.get(num) === undefined) {\n        childNodes.set(num, []);\n      }\n      childNodes.get(num).push({\n        children: child.children,\n        propPath: innerPropPath\n      });\n    }\n    resultingChildren.push(...valueAtPropPath.map((x, i) => {\n      var _childNodes$get;\n      const newChildrenAsMarkdoc = (_childNodes$get = childNodes.get(i)) !== null && _childNodes$get !== void 0 ? _childNodes$get : [];\n      const children = [];\n      toChildrenAndProps(newChildrenAsMarkdoc, children, x, singleChildField.child);\n      return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('tag', x, children, singleChildField.asChildTag);\n    }));\n  }\n}\nfunction toMarkdoc(node, config) {\n  if (node.type === 'paragraph') {\n    const markdocNode = new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('paragraph', node.textAlign ? {\n      textAlign: node.textAlign\n    } : {}, [toInline(node.children)]);\n    if (node.textAlign) {\n      markdocNode.annotations.push({\n        name: 'textAlign',\n        value: node.textAlign,\n        type: 'attribute'\n      });\n    }\n    return markdocNode;\n  }\n  if (node.type === 'image') {\n    config.extraFiles.push({\n      contents: node.src.content,\n      path: node.src.filename,\n      parent: typeof config.documentFeatures.images === 'object' && typeof config.documentFeatures.images.directory === 'string' ? fixPath(config.documentFeatures.images.directory) : undefined\n    });\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('paragraph', {}, [new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('inline', {}, [new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('image', {\n      src: encodeURI(`${getSrcPrefixForImageBlock(config.documentFeatures, config.slug)}${node.src.filename}`),\n      alt: node.alt,\n      title: node.title\n    })])]);\n  }\n  if (node.type === 'code') {\n    const extraAttributes = {};\n    const {\n      children,\n      language,\n      type,\n      ...rest\n    } = node;\n    const schema = typeof config.documentFeatures.formatting.blockTypes.code === 'object' ? config.documentFeatures.formatting.blockTypes.code.schema : undefined;\n    if (schema && Object.keys(schema.fields).length > 0) {\n      const serialized = serializeProps(getInitialPropsValueFromInitializer(schema, rest), schema, undefined, config.slug, false);\n      Object.assign(extraAttributes, serialized.value);\n      config.extraFiles.push(...serialized.extraFiles);\n    }\n    let content = children[0].text + '\\n';\n    const markdocNode = new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('fence', {\n      content,\n      language,\n      ...extraAttributes\n    }, [new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('text', {\n      content\n    })]);\n    for (const [key, value] of Object.entries(extraAttributes)) {\n      markdocNode.annotations.push({\n        name: key,\n        value,\n        type: 'attribute'\n      });\n    }\n    return markdocNode;\n  }\n  const _toMarkdoc = node => toMarkdoc(node, config);\n  if (node.type === 'blockquote') {\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('blockquote', {}, node.children.map(_toMarkdoc));\n  }\n  if (node.type === 'divider') {\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('hr');\n  }\n  if (node.type === 'table') {\n    const head = node.children.find(x => x.type === 'table-head');\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('tag', {}, [new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('table', {}, [new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('thead', {}, head ? head.children.map(_toMarkdoc) : []), _toMarkdoc(node.children.find(x => x.type === 'table-body'))])], 'table');\n  }\n  if (node.type === 'table-body') {\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('tbody', {}, node.children.map(_toMarkdoc));\n  }\n  if (node.type === 'table-row') {\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('tr', {}, node.children.map(_toMarkdoc));\n  }\n  if (node.type === 'table-cell') {\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node(node.header ? 'th' : 'td', {}, node.children.map(_toMarkdoc));\n  }\n  if (node.type === 'heading') {\n    const extraAttributes = {};\n    if (node.textAlign) {\n      extraAttributes.textAlign = node.textAlign;\n    }\n    const {\n      children,\n      level,\n      textAlign,\n      type,\n      ...rest\n    } = node;\n    const schema = config.documentFeatures.formatting.headings.schema;\n    if (Object.keys(schema.fields).length > 0) {\n      Object.assign(extraAttributes, serializeProps(getInitialPropsValueFromInitializer(schema, rest), schema, undefined, config.slug, false).value);\n    }\n    const markdocNode = new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('heading', {\n      level: node.level,\n      ...extraAttributes\n    }, [toInline(node.children)]);\n    for (const [key, value] of Object.entries(extraAttributes)) {\n      markdocNode.annotations.push({\n        name: key,\n        value,\n        type: 'attribute'\n      });\n    }\n    return markdocNode;\n  }\n  if (node.type === 'ordered-list') {\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('list', {\n      ordered: true\n    }, node.children.map(_toMarkdoc));\n  }\n  if (node.type === 'unordered-list') {\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('list', {\n      ordered: false\n    }, node.children.map(_toMarkdoc));\n  }\n  if (node.type === 'layout') {\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('tag', {\n      layout: node.layout\n    }, node.children.map(_toMarkdoc), 'layout');\n  }\n  if (node.type === 'layout-area') {\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('tag', {}, node.children.flatMap(_toMarkdoc), 'layout-area');\n  }\n  if (node.type === 'component-block') {\n    const isVoid = node.children.length === 1 && node.children[0].type === 'component-inline-prop' && node.children[0].propPath === undefined;\n    const componentBlock = config.componentBlocks[node.component];\n    const childrenAsMarkdoc = [];\n    for (const child of node.children) {\n      if ((child.type === 'component-block-prop' || child.type === 'component-inline-prop') && child.propPath !== undefined) {\n        childrenAsMarkdoc.push({\n          type: child.type,\n          propPath: child.propPath,\n          children: child.type === 'component-block-prop' ? child.children.flatMap(_toMarkdoc) : [toInline(child.children)]\n        });\n      }\n    }\n    let attributes = node.props;\n    if (componentBlock) {\n      const serialized = serializeProps(node.props, {\n        kind: 'object',\n        fields: componentBlock.schema\n      }, undefined, config.slug, false);\n      attributes = serialized.value;\n      config.extraFiles.push(...serialized.extraFiles);\n      const singleChildField = findSingleChildField({\n        kind: 'object',\n        fields: componentBlock.schema\n      });\n      if (singleChildField) {\n        const children = [];\n        toChildrenAndProps(childrenAsMarkdoc, children, attributes, singleChildField);\n        return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('tag', attributes, children, node.component);\n      }\n    }\n    const children = isVoid ? [] : childrenAsMarkdoc.map(x => new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('tag', {\n      propPath: x.propPath\n    }, x.children, x.type));\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('tag', attributes, children, node.component);\n  }\n  if (node.type === 'component-block-prop' || node.type === 'component-inline-prop') {\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('tag', {\n      propPath: node.propPath\n    }, node.type === 'component-inline-prop' ? [toInline(node.children)] : node.children.flatMap(_toMarkdoc), node.type);\n  }\n  if (node.type === 'list-item') {\n    const listItemContent = node.children[0];\n    if (listItemContent.type !== 'list-item-content') {\n      throw new Error('list item content must contain a list-item-content');\n    }\n    const inline = toInline(listItemContent.children);\n    const children = [inline];\n    const nestedList = node.children[1];\n    if (nestedList) {\n      children.push(toMarkdoc(nestedList, config));\n    }\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__.Ast.Node('item', {}, children);\n  }\n  if (node.type === 'list-item-content') {\n    throw new Error('list-item-content in unexpected position');\n  }\n  debugger;\n  throw new Error(`unexpected node type: ${node.type}`);\n}\n\nfunction validateText(val, min, max, fieldLabel, slugInfo) {\n  if (val.length < min) {\n    if (min === 1) {\n      return `${fieldLabel} must not be empty`;\n    } else {\n      return `${fieldLabel} must be at least ${min} characters long`;\n    }\n  }\n  if (val.length > max) {\n    return `${fieldLabel} must be no longer than ${max} characters`;\n  }\n  if (slugInfo) {\n    if (val === '') {\n      return `${fieldLabel} must not be empty`;\n    }\n    if (val === '..') {\n      return `${fieldLabel} must not be ..`;\n    }\n    if (val === '.') {\n      return `${fieldLabel} must not be .`;\n    }\n    if (slugInfo.glob === '**') {\n      const split = val.split('/');\n      if (split.some(s => s === '..')) {\n        return `${fieldLabel} must not contain ..`;\n      }\n      if (split.some(s => s === '.')) {\n        return `${fieldLabel} must not be .`;\n      }\n    }\n    if ((slugInfo.glob === '*' ? /[\\\\/]/ : /[\\\\]/).test(val)) {\n      return `${fieldLabel} must not contain slashes`;\n    }\n    if (/^\\s|\\s$/.test(val)) {\n      return `${fieldLabel} must not start or end with spaces`;\n    }\n    if (slugInfo.slugs.has(val)) {\n      return `${fieldLabel} must be unique`;\n    }\n  }\n}\n\nfunction AddToPathProvider(props) {\n  const path = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(PathContext);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(PathContext.Provider, {\n    value: (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => path.concat(props.part), [path, props.part]),\n    children: props.children\n  });\n}\nconst SlugFieldContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)(undefined);\nconst SlugFieldProvider = SlugFieldContext.Provider;\nconst PathContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)([]);\nconst PathContextProvider = PathContext.Provider;\n\nfunction TextFieldInput(props) {\n  const TextFieldComponent = props.multiline ? _keystar_ui_text_field__WEBPACK_IMPORTED_MODULE_4__.TextArea : _keystar_ui_text_field__WEBPACK_IMPORTED_MODULE_4__.TextField;\n  const [blurred, setBlurred] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n  const slugContext = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(SlugFieldContext);\n  const path = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(PathContext);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(TextFieldComponent, {\n    label: props.label,\n    description: props.description,\n    autoFocus: props.autoFocus,\n    value: props.value,\n    onChange: props.onChange,\n    onBlur: () => setBlurred(true),\n    isRequired: props.min > 0,\n    errorMessage: props.forceValidation || blurred ? validateText(props.value, props.min, props.max, props.label, path.length === 1 && (slugContext === null || slugContext === void 0 ? void 0 : slugContext.field) === path[0] ? slugContext : undefined) : undefined\n  });\n}\n\nfunction parseAsNormalField(value) {\n  if (value === undefined) {\n    return '';\n  }\n  if (typeof value !== 'string') {\n    throw new FieldDataError('Must be a string');\n  }\n  return value;\n}\nconst emptySet = new Set();\nfunction text({\n  label,\n  defaultValue = '',\n  validation: {\n    length: {\n      max = Infinity,\n      min = 0\n    } = {}\n  } = {},\n  description,\n  multiline = false\n}) {\n  function validate(value, slugField) {\n    const message = validateText(value, min, max, label, slugField);\n    if (message !== undefined) {\n      throw new FieldDataError(message);\n    }\n    return value;\n  }\n  return {\n    kind: 'form',\n    formKind: 'slug',\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(TextFieldInput, {\n        label: label,\n        description: description,\n        min: min,\n        max: max,\n        multiline: multiline,\n        ...props\n      });\n    },\n    defaultValue() {\n      return typeof defaultValue === 'string' ? defaultValue : defaultValue();\n    },\n    parse(value, args) {\n      if ((args === null || args === void 0 ? void 0 : args.slug) !== undefined) {\n        return args.slug;\n      }\n      return parseAsNormalField(value);\n    },\n    serialize(value) {\n      return {\n        value: value === '' ? undefined : value\n      };\n    },\n    serializeWithSlug(value) {\n      return {\n        slug: value,\n        value: undefined\n      };\n    },\n    reader: {\n      parse(value) {\n        const parsed = parseAsNormalField(value);\n        return validate(parsed, undefined);\n      },\n      parseWithSlug(_value, args) {\n        validate(parseAsNormalField(args.slug), {\n          glob: args.glob,\n          slugs: emptySet\n        });\n        return null;\n      }\n    },\n    validate(value, args) {\n      return validate(value, args === null || args === void 0 ? void 0 : args.slugField);\n    }\n  };\n}\n\nconst FIELD_GRID_COLUMNS = 12;\nconst FieldContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)({\n  span: FIELD_GRID_COLUMNS\n});\nconst useFieldContext = () => (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(FieldContext);\nconst FieldContextProvider = FieldContext.Provider;\n\nfunction ObjectFieldInput({\n  schema,\n  autoFocus,\n  fields,\n  forceValidation\n}) {\n  validateLayout(schema);\n  const firstFocusable = autoFocus ? findFocusableObjectFieldKey(schema) : undefined;\n  const inner = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Grid, {\n    columns: `repeat(${FIELD_GRID_COLUMNS}, minmax(auto, 1fr))`,\n    columnGap: \"medium\",\n    rowGap: \"xlarge\",\n    children: Object.entries(fields).map(([key, propVal], index) => {\n      var _schema$layout$index, _schema$layout;\n      let span = (_schema$layout$index = (_schema$layout = schema.layout) === null || _schema$layout === void 0 ? void 0 : _schema$layout[index]) !== null && _schema$layout$index !== void 0 ? _schema$layout$index : FIELD_GRID_COLUMNS;\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(FieldContextProvider, {\n        value: {\n          span\n        },\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n          className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n            gridColumn: `span ${span}`,\n            [_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.containerQueries.below.tablet]: {\n              gridColumn: `span ${FIELD_GRID_COLUMNS}`\n            }\n          }),\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(AddToPathProvider, {\n            part: key,\n            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(InnerFormValueContentFromPreviewProps, {\n              forceValidation: forceValidation,\n              autoFocus: key === firstFocusable,\n              marginBottom: \"xlarge\",\n              ...propVal\n            })\n          })\n        })\n      }, key);\n    })\n  });\n  const id = (0,react__WEBPACK_IMPORTED_MODULE_3__.useId)();\n  if (!schema.label) {\n    return inner;\n  }\n  const labelId = `${id}-label`;\n  const descriptionId = `${id}-description`;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Grid, {\n    role: \"group\",\n    gap: \"medium\",\n    marginY: \"xlarge\",\n    \"aria-labelledby\": labelId,\n    \"aria-describedby\": schema.description ? descriptionId : undefined,\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n      color: \"neutralEmphasis\",\n      size: \"medium\",\n      weight: \"semibold\",\n      id: labelId,\n      children: schema.label\n    }), !!schema.description && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n      id: descriptionId,\n      size: \"regular\",\n      color: \"neutralSecondary\",\n      children: schema.description\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {}), inner]\n  });\n}\nfunction validateLayout(schema) {\n  if (!schema.layout) {\n    return;\n  }\n  (0,emery__WEBPACK_IMPORTED_MODULE_1__.assert)(schema.layout.length === Object.keys(schema.fields).length, 'A column \"span\" is required for every field in the layout');\n  (0,emery__WEBPACK_IMPORTED_MODULE_1__.assert)(schema.layout.every(span => span > 0), 'The layout must not contain empty columns');\n  (0,emery__WEBPACK_IMPORTED_MODULE_1__.assert)(schema.layout.every(span => span <= 12), 'Fields may not span more than 12 columns');\n  (0,emery__WEBPACK_IMPORTED_MODULE_1__.assert)(schema.layout.reduce((acc, cur) => acc + cur, 0) % 12 === 0, 'The layout must span exactly 12 columns');\n}\nfunction findFocusableObjectFieldKey(schema) {\n  for (const [key, innerProp] of Object.entries(schema.fields)) {\n    const childFocusable = canFieldBeFocused(innerProp);\n    if (childFocusable) {\n      return key;\n    }\n  }\n  return undefined;\n}\nfunction canFieldBeFocused(schema) {\n  if (schema.kind === 'array' || schema.kind === 'conditional' || schema.kind === 'form') {\n    return true;\n  }\n  if (schema.kind === 'child') {\n    return false;\n  }\n  if (schema.kind === 'object') {\n    for (const innerProp of Object.values(schema.fields)) {\n      if (canFieldBeFocused(innerProp)) {\n        return true;\n      }\n    }\n    return false;\n  }\n  (0,emery__WEBPACK_IMPORTED_MODULE_1__.assertNever)(schema);\n}\n\nfunction ConditionalFieldInput({\n  schema,\n  autoFocus,\n  discriminant,\n  onChange,\n  value,\n  forceValidation\n}) {\n  const schemaDiscriminant = schema.discriminant;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n    gap: \"xlarge\",\n    direction: \"column\",\n    children: [(0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(AddToPathProvider, {\n      part: \"discriminant\",\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(schemaDiscriminant.Input, {\n        autoFocus: !!autoFocus,\n        value: discriminant,\n        onChange: onChange,\n        forceValidation: forceValidation\n      })\n    }), [autoFocus, schemaDiscriminant, discriminant, onChange, forceValidation]), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(AddToPathProvider, {\n      part: \"value\",\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(InnerFormValueContentFromPreviewProps, {\n        forceValidation: forceValidation,\n        ...value\n      })\n    })]\n  });\n}\n\nfunction castToMemoizedInfoForSchema(val) {\n  return val;\n}\nfunction getOrInsert(map, key, val) {\n  if (!map.has(key)) {\n    map.set(key, val(key));\n  }\n  return map.get(key);\n}\nconst childFieldData = new WeakMap();\nfunction storeChildFieldData(value) {\n  let key = {};\n  childFieldData.set(key, value);\n  return key;\n}\nfunction getChildFieldData(props) {\n  const val = childFieldData.get(props._);\n  if (!val) {\n    throw new Error('expected child field data to exist');\n  }\n  return val;\n}\nfunction createGetPreviewProps(rootSchema, rootOnChange, getChildFieldElement) {\n  const memoizedInfoForSchema = castToMemoizedInfoForSchema({\n    form(schema, onChange) {\n      return newVal => onChange(() => newVal);\n    },\n    array(schema, onChange) {\n      return {\n        rawOnChange: onChange,\n        inner: new Map(),\n        onChange(updater) {\n          onChange(value => updateValue(schema, value, updater));\n        }\n      };\n    },\n    child(schema, onChange) {\n      return newVal => onChange(() => newVal);\n    },\n    conditional(schema, onChange) {\n      return {\n        onChange: (discriminant, value) => onChange(val => updateValue(schema, val, {\n          discriminant,\n          value\n        })),\n        onChangeForValue: cb => onChange(val => ({\n          discriminant: val.discriminant,\n          value: cb(val.value)\n        }))\n      };\n    },\n    object(schema, onChange) {\n      return {\n        onChange: updater => {\n          onChange(value => updateValue(schema, value, updater));\n        },\n        innerOnChanges: Object.fromEntries(Object.keys(schema.fields).map(key => {\n          return [key, newVal => {\n            onChange(val => ({\n              ...val,\n              [key]: newVal(val[key])\n            }));\n          }];\n        }))\n      };\n    }\n  });\n  const previewPropsFactories = {\n    form(schema, value, onChange) {\n      return {\n        value: value,\n        onChange,\n        schema: schema\n      };\n    },\n    child(schema, value, onChange, path) {\n      return {\n        element: getChildFieldElement(path),\n        schema: schema,\n        _: storeChildFieldData({\n          value,\n          onChange\n        })\n      };\n    },\n    object(schema, value, memoized, path, getInnerProp) {\n      const fields = {};\n      for (const key of Object.keys(schema.fields)) {\n        fields[key] = getInnerProp(schema.fields[key], value[key], memoized.innerOnChanges[key], key);\n      }\n      const previewProps = {\n        fields,\n        onChange: memoized.onChange,\n        schema: schema\n      };\n      return previewProps;\n    },\n    array(schema, value, memoized, path, getInnerProp) {\n      const arrayValue = value;\n      const keys = getKeysForArrayValue(arrayValue);\n      const unusedKeys = new Set(getKeysForArrayValue(value));\n      const props = {\n        elements: arrayValue.map((val, i) => {\n          const key = keys[i];\n          unusedKeys.delete(key);\n          const element = getOrInsert(memoized.inner, key, () => {\n            const onChange = val => {\n              memoized.rawOnChange(prev => {\n                const keys = getKeysForArrayValue(prev);\n                const index = keys.indexOf(key);\n                const newValue = [...prev];\n                newValue[index] = val(newValue[index]);\n                setKeysForArrayValue(newValue, keys);\n                return newValue;\n              });\n            };\n            const element = getInnerProp(schema.element, val, onChange, key);\n            return {\n              element,\n              elementWithKey: {\n                ...element,\n                key\n              },\n              onChange\n            };\n          });\n          const currentInnerProp = getInnerProp(schema.element, val, element.onChange, key);\n          if (element.element !== currentInnerProp) {\n            element.element = currentInnerProp;\n            element.elementWithKey = {\n              ...currentInnerProp,\n              key\n            };\n          }\n          return element.elementWithKey;\n        }),\n        schema: schema,\n        onChange: memoized.onChange\n      };\n      for (const key of unusedKeys) {\n        memoized.inner.delete(key);\n      }\n      return props;\n    },\n    conditional(schema, value, memoized, path, getInnerProp) {\n      const props = {\n        discriminant: value.discriminant,\n        onChange: memoized.onChange,\n        value: getInnerProp(schema.values[value.discriminant.toString()], value.value, memoized.onChangeForValue, 'value'),\n        schema: schema\n      };\n      return props;\n    }\n  };\n  function getPreviewPropsForProp(schema, value, memoedThing, path, getInnerProp) {\n    return previewPropsFactories[schema.kind](schema, value, memoedThing, path, getInnerProp);\n  }\n  function getInitialMemoState(schema, value, onChange, path) {\n    const innerState = new Map();\n    const memoizedInfo = memoizedInfoForSchema[schema.kind](schema, onChange);\n    const state = {\n      value,\n      inner: innerState,\n      props: getPreviewPropsForProp(schema, value, memoizedInfo, path, (schema, value, onChange, key) => {\n        const state = getInitialMemoState(schema, value, onChange, path.concat(key));\n        innerState.set(key, state);\n        return state.props;\n      }),\n      schema: schema,\n      cached: memoizedInfo\n    };\n    return state;\n  }\n  function getUpToDateProps(schema, value, onChange, memoState, path) {\n    if (memoState.schema !== schema) {\n      Object.assign(memoState, getInitialMemoState(schema, value, onChange, path));\n      return memoState.props;\n    }\n    if (memoState.value === value) {\n      return memoState.props;\n    }\n    memoState.value = value;\n    const unusedKeys = new Set(memoState.inner.keys());\n    memoState.props = getPreviewPropsForProp(schema, value, memoState.cached, path, (schema, value, onChange, innerMemoStateKey) => {\n      unusedKeys.delete(innerMemoStateKey);\n      if (!memoState.inner.has(innerMemoStateKey)) {\n        const innerState = getInitialMemoState(schema, value, onChange, path.concat(innerMemoStateKey));\n        memoState.inner.set(innerMemoStateKey, innerState);\n        return innerState.props;\n      }\n      return getUpToDateProps(schema, value, onChange, memoState.inner.get(innerMemoStateKey), path.concat(innerMemoStateKey));\n    });\n    for (const key of unusedKeys) {\n      memoState.inner.delete(key);\n    }\n    return memoState.props;\n  }\n  let memoState;\n  return value => {\n    if (memoState === undefined) {\n      memoState = getInitialMemoState(rootSchema, value, rootOnChange, []);\n      return memoState.props;\n    }\n    return getUpToDateProps(rootSchema, value, rootOnChange, memoState, []);\n  };\n}\n\nconst previewPropsToValueConverter = {\n  child(props) {\n    const childFieldData = getChildFieldData(props);\n    return childFieldData.value;\n  },\n  form(props) {\n    return props.value;\n  },\n  array(props) {\n    const values = props.elements.map(x => previewPropsToValue(x));\n    setKeysForArrayValue(values, props.elements.map(x => x.key));\n    return values;\n  },\n  conditional(props) {\n    return {\n      discriminant: props.discriminant,\n      value: previewPropsToValue(props.value)\n    };\n  },\n  object(props) {\n    return Object.fromEntries(Object.entries(props.fields).map(([key, val]) => [key, previewPropsToValue(val)]));\n  }\n};\nfunction previewPropsToValue(props) {\n  return previewPropsToValueConverter[props.schema.kind](props);\n}\nconst valueToUpdaters = {\n  child(value) {\n    return value !== null && value !== void 0 ? value : undefined;\n  },\n  form(value) {\n    return value;\n  },\n  array(value, schema) {\n    const keys = getKeysForArrayValue(value);\n    return value.map((x, i) => ({\n      key: keys[i],\n      value: valueToUpdater(x, schema.element)\n    }));\n  },\n  conditional(value, schema) {\n    return {\n      discriminant: value.discriminant,\n      value: valueToUpdater(value.value, schema.values[value.discriminant.toString()])\n    };\n  },\n  object(value, schema) {\n    return Object.fromEntries(Object.entries(schema.fields).map(([key, schema]) => [key, valueToUpdater(value[key], schema)]));\n  }\n};\nfunction valueToUpdater(value, schema) {\n  return valueToUpdaters[schema.kind](value, schema);\n}\nfunction setValueToPreviewProps(value, props) {\n  if (isKind(props, 'child')) {\n    const {\n      onChange\n    } = getChildFieldData(props);\n    onChange(value);\n    return;\n  }\n  if (isKind(props, 'form') || isKind(props, 'object') || isKind(props, 'array')) {\n    props.onChange(valueToUpdater(value, props.schema));\n    return;\n  }\n  if (isKind(props, 'conditional')) {\n    const updater = valueToUpdater(value, props.schema);\n    props.onChange(updater.discriminant, updater.value);\n    return;\n  }\n  (0,emery__WEBPACK_IMPORTED_MODULE_1__.assertNever)(props);\n}\n\n// this exists because for props.schema.kind === 'form', ts doesn't narrow props, only props.schema\nfunction isKind(props, kind) {\n  return props.schema.kind === kind;\n}\n\nfunction validateArrayLength(schema, val, path) {\n  var _schema$validation, _schema$validation2;\n  if (((_schema$validation = schema.validation) === null || _schema$validation === void 0 || (_schema$validation = _schema$validation.length) === null || _schema$validation === void 0 ? void 0 : _schema$validation.min) !== undefined && val.length < schema.validation.length.min) {\n    return new PropValidationError(new FieldDataError(`Must have at least ${schema.validation.length.min} element${schema.validation.length.min === 1 ? '' : 's'}`), path, schema);\n  }\n  if (((_schema$validation2 = schema.validation) === null || _schema$validation2 === void 0 || (_schema$validation2 = _schema$validation2.length) === null || _schema$validation2 === void 0 ? void 0 : _schema$validation2.max) !== undefined && val.length > schema.validation.length.max) {\n    return new PropValidationError(new FieldDataError(`Must have at most ${schema.validation.length.max} element${schema.validation.length.max === 1 ? '' : 's'}}`), path, schema);\n  }\n}\n\nclass PropValidationError extends Error {\n  constructor(cause, path, schema) {\n    super(`field error at ${path.join('.')}`, {\n      cause\n    });\n    this.path = path;\n    this.schema = schema;\n    this.cause = cause;\n  }\n}\nfunction toFormFieldStoredValue(val) {\n  if (val === null) {\n    return undefined;\n  }\n  return val;\n}\nconst isArray = Array.isArray;\nfunction parseProps(schema, _value, path, pathWithArrayFieldSlugs, parseFormField, /** This should be true for the reader and false elsewhere */\nvalidateArrayFieldLength) {\n  let value = toFormFieldStoredValue(_value);\n  if (schema.kind === 'form') {\n    try {\n      return parseFormField(schema, value, path, pathWithArrayFieldSlugs);\n    } catch (err) {\n      throw new PropValidationError(err, path, schema);\n    }\n  }\n  if (schema.kind === 'child') {\n    return null;\n  }\n  if (schema.kind === 'conditional') {\n    if (value === undefined) {\n      return getInitialPropsValue(schema);\n    }\n    try {\n      if (typeof value !== 'object' || value === null || isArray(value)) {\n        throw new FieldDataError('Must be an object');\n      }\n      for (const key of Object.keys(value)) {\n        if (key !== 'discriminant' && key !== 'value') {\n          throw new FieldDataError(`Must only contain keys \"discriminant\" and \"value\", not \"${key}\"`);\n        }\n      }\n    } catch (err) {\n      throw new PropValidationError(err, path, schema);\n    }\n    const parsedDiscriminant = parseProps(schema.discriminant, value.discriminant, path.concat('discriminant'), pathWithArrayFieldSlugs.concat('discriminant'), parseFormField, validateArrayFieldLength);\n    return {\n      discriminant: parsedDiscriminant,\n      value: parseProps(schema.values[parsedDiscriminant], value.value, path.concat('value'), pathWithArrayFieldSlugs.concat('value'), parseFormField, validateArrayFieldLength)\n    };\n  }\n  if (schema.kind === 'object') {\n    if (value === undefined) {\n      value = {};\n    }\n    try {\n      if (typeof value !== 'object' || value === null || isArray(value)) {\n        throw new FieldDataError('Must be an object');\n      }\n      const allowedKeysSet = new Set(Object.keys(schema.fields));\n      for (const key of Object.keys(value)) {\n        if (!allowedKeysSet.has(key)) {\n          throw new FieldDataError(`Key on object value \"${key}\" is not allowed`);\n        }\n      }\n    } catch (err) {\n      throw new PropValidationError(err, path, schema);\n    }\n    const val = {};\n    const errors = [];\n    for (const key of Object.keys(schema.fields)) {\n      let individualVal = value[key];\n      try {\n        const propVal = parseProps(schema.fields[key], individualVal, path.concat(key), pathWithArrayFieldSlugs.concat(key), parseFormField, validateArrayFieldLength);\n        val[key] = propVal;\n      } catch (err) {\n        errors.push(err);\n      }\n    }\n    if (errors.length) {\n      throw new AggregateError(errors);\n    }\n    return val;\n  }\n  if (schema.kind === 'array') {\n    if (value === undefined) {\n      return [];\n    }\n    try {\n      if (!isArray(value)) {\n        throw new FieldDataError('Must be an array');\n      }\n    } catch (err) {\n      throw new PropValidationError(err, path, schema);\n    }\n    const errors = [];\n    try {\n      if (validateArrayFieldLength) {\n        const error = validateArrayLength(schema, value, path);\n        if (error !== undefined) {\n          errors.push(error);\n        }\n      }\n      return value.map((innerVal, i) => {\n        try {\n          let slug = i.toString();\n          if (schema.slugField && typeof innerVal === 'object' && innerVal !== null && !isArray(innerVal)) {\n            if (schema.element.kind !== 'object') {\n              throw new Error('slugField on array fields requires the an object field element');\n            }\n            const slugField = schema.element.fields[schema.slugField];\n            if (!slugField) {\n              throw new Error(`slugField \"${schema.slugField}\" does not exist on object field`);\n            }\n            if (slugField.kind !== 'form') {\n              throw new Error(`slugField \"${schema.slugField}\" is not a form field`);\n            }\n            if (slugField.formKind !== 'slug') {\n              throw new Error(`slugField \"${schema.slugField}\" is not a slug field`);\n            }\n            let parsedSlugFieldValue;\n            try {\n              parsedSlugFieldValue = slugField.parse(toFormFieldStoredValue(innerVal[schema.slugField]), undefined);\n            } catch (err) {\n              throw new AggregateError([err]);\n            }\n            slug = slugField.serializeWithSlug(parsedSlugFieldValue).slug;\n          }\n          return parseProps(schema.element, innerVal, path.concat(i), pathWithArrayFieldSlugs.concat(slug), parseFormField, validateArrayFieldLength);\n        } catch (err) {\n          errors.push(err);\n        }\n      });\n    } finally {\n      if (errors.length) {\n        throw new AggregateError(errors);\n      }\n    }\n  }\n  (0,emery__WEBPACK_IMPORTED_MODULE_1__.assertNever)(schema);\n}\n\nfunction flattenErrors(error) {\n  if (error instanceof AggregateError) {\n    return error.errors.flatMap(flattenErrors);\n  }\n  return [error];\n}\nfunction formatFormDataError(error) {\n  const flatErrors = flattenErrors(error);\n  return flatErrors.map(error => {\n    if (error instanceof PropValidationError) {\n      const path = error.path.join('.');\n      return `${path}: ${error.cause instanceof FieldDataError ? error.cause.message : `Unexpected error: ${error.cause}`}`;\n    }\n    return `Unexpected error: ${error}`;\n  }).join('\\n');\n}\nfunction toFormattedFormDataError(error) {\n  const formatted = formatFormDataError(error);\n  return new Error(`Field validation failed:\\n` + formatted);\n}\n\nfunction clientSideValidateProp(schema, value, slugField) {\n  try {\n    validateValueWithSchema(schema, value, slugField);\n    return true;\n  } catch (error) {\n    console.warn(toFormattedFormDataError(error));\n    return false;\n  }\n}\nfunction validateValueWithSchema(schema, value, slugField, path = []) {\n  switch (schema.kind) {\n    case 'child':\n      {\n        return;\n      }\n    case 'form':\n      {\n        try {\n          if (slugField && path[path.length - 1] === (slugField === null || slugField === void 0 ? void 0 : slugField.field)) {\n            schema.validate(value, {\n              slugField: {\n                slugs: slugField.slugs,\n                glob: slugField.glob\n              }\n            });\n            return;\n          }\n          schema.validate(value, undefined);\n        } catch (err) {\n          throw new PropValidationError(err, path, schema);\n        }\n        return;\n      }\n    case 'conditional':\n      {\n        schema.discriminant.validate(value.discriminant);\n        validateValueWithSchema(schema.values[value.discriminant], value.value, undefined, path.concat('value'));\n        return;\n      }\n    case 'object':\n      {\n        const errors = [];\n        for (const [key, childProp] of Object.entries(schema.fields)) {\n          try {\n            validateValueWithSchema(childProp, value[key], key === (slugField === null || slugField === void 0 ? void 0 : slugField.field) ? slugField : undefined, path.concat(key));\n          } catch (err) {\n            errors.push(err);\n          }\n        }\n        if (errors.length > 0) {\n          throw new AggregateError(errors);\n        }\n        return;\n      }\n    case 'array':\n      {\n        let slugInfo;\n        if (schema.slugField !== undefined && schema.element.kind === 'object') {\n          const innerSchema = schema.element.fields;\n          const {\n            slugField\n          } = schema;\n          slugInfo = {\n            slugField,\n            slugs: value.map(val => getSlugFromState({\n              schema: innerSchema,\n              slugField\n            }, val))\n          };\n        }\n        const errors = [];\n        const val = value;\n        const error = validateArrayLength(schema, value, path);\n        if (error !== undefined) {\n          errors.push(error);\n        }\n        for (const [idx, innerVal] of val.entries()) {\n          try {\n            validateValueWithSchema(schema.element, innerVal, slugInfo === undefined ? undefined : {\n              field: slugInfo.slugField,\n              slugs: new Set(slugInfo.slugs.filter((_, i) => idx !== i)),\n              glob: '*'\n            }, path.concat(idx));\n          } catch (err) {\n            errors.push(err);\n          }\n        }\n        if (errors.length > 0) {\n          throw new AggregateError(errors);\n        }\n        return;\n      }\n  }\n}\n\nfunction ArrayFieldInput(props) {\n  const labelId = (0,react__WEBPACK_IMPORTED_MODULE_3__.useId)();\n  const descriptionId = (0,react__WEBPACK_IMPORTED_MODULE_3__.useId)();\n  const stringFormatter = (0,_react_aria_i18n__WEBPACK_IMPORTED_MODULE_102__.useLocalizedStringFormatter)(l10nMessages);\n  const [modalState, setModalState] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)({\n    state: 'closed'\n  });\n  const onModalChange = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(cb => {\n    setModalState(state => {\n      if (state.state === 'open') {\n        return {\n          state: 'open',\n          forceValidation: state.forceValidation,\n          value: cb(state.value),\n          index: state.index\n        };\n      }\n      return state;\n    });\n  }, [setModalState]);\n  const formId = (0,react__WEBPACK_IMPORTED_MODULE_3__.useId)();\n  const modalStateIndex = modalState.state === 'open' ? modalState.index : undefined;\n  const slugInfo = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {\n    if (props.schema.slugField === undefined || modalState.state !== 'open' || props.schema.element.kind !== 'object') {\n      return;\n    }\n    const val = previewPropsToValue(props);\n    const schema = props.schema.element.fields;\n    const slugField = props.schema.slugField;\n    const slugs = new Set(val.filter((x, i) => i !== modalStateIndex).map(x => getSlugFromState({\n      schema,\n      slugField\n    }, x)));\n    return {\n      slugs,\n      field: slugField,\n      glob: '*'\n    };\n  }, [modalStateIndex, props, modalState.state]);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n    elementType: \"section\",\n    gap: \"medium\",\n    role: \"group\",\n    \"aria-labelledby\": labelId,\n    \"aria-describedby\": props.schema.description ? descriptionId : undefined,\n    direction: \"column\",\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_field__WEBPACK_IMPORTED_MODULE_6__.FieldLabel, {\n      elementType: \"h3\",\n      id: labelId,\n      children: props.schema.label\n    }), props.schema.description && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n      id: descriptionId,\n      size: \"small\",\n      color: \"neutralSecondary\",\n      children: props.schema.description\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n      autoFocus: props.autoFocus,\n      onPress: () => {\n        setModalState({\n          state: 'open',\n          value: getInitialPropsValue(props.schema.element),\n          forceValidation: false,\n          index: undefined\n        });\n      },\n      alignSelf: \"start\",\n      children: stringFormatter.format('add')\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ArrayFieldListView, {\n      ...props,\n      labelId: labelId,\n      onOpenItem: idx => {\n        console.log(previewPropsToValue(props.elements[idx]));\n        setModalState({\n          state: 'open',\n          value: previewPropsToValue(props.elements[idx]),\n          forceValidation: false,\n          index: idx\n        });\n      }\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ArrayFieldValidationMessages, {\n      ...props\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_12__.DialogContainer, {\n      onDismiss: () => {\n        setModalState({\n          state: 'closed'\n        });\n      },\n      children: (() => {\n        if (modalState.state !== 'open' || props.schema.element.kind === 'child') {\n          return;\n        }\n        return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_12__.Dialog, {\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Heading, {\n            children: \"Edit item\"\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_slots__WEBPACK_IMPORTED_MODULE_17__.Content, {\n            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n              id: formId,\n              elementType: \"form\",\n              onSubmit: event => {\n                if (event.target !== event.currentTarget) return;\n                event.preventDefault();\n                if (modalState.state !== 'open') return;\n                if (!clientSideValidateProp(props.schema.element, modalState.value, undefined)) {\n                  setModalState(state => ({\n                    ...state,\n                    forceValidation: true\n                  }));\n                  return;\n                }\n                if (modalState.index === undefined) {\n                  props.onChange([...props.elements.map(x => ({\n                    key: x.key\n                  })), {\n                    key: undefined,\n                    value: valueToUpdater(modalState.value, props.schema.element)\n                  }]);\n                } else {\n                  setValueToPreviewProps(modalState.value, props.elements[modalState.index]);\n                }\n                setModalState({\n                  state: 'closed'\n                });\n              },\n              direction: \"column\",\n              gap: \"xxlarge\",\n              children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ArrayFieldItemModalContent, {\n                onChange: onModalChange,\n                schema: props.schema.element,\n                value: modalState.value,\n                slugField: slugInfo\n              })\n            })\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ButtonGroup, {\n            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.Button, {\n              onPress: () => {\n                setModalState({\n                  state: 'closed'\n                });\n              },\n              children: stringFormatter.format('cancel')\n            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.Button, {\n              form: formId,\n              prominence: \"high\",\n              type: \"submit\",\n              children: modalState.index === undefined ? stringFormatter.format('add') : 'Done'\n            })]\n          })]\n        });\n      })()\n    })]\n  });\n}\nfunction ArrayFieldValidationMessages(props) {\n  var _props$schema$validat, _props$schema$validat2;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.Fragment, {\n    children: props.forceValidation && (((_props$schema$validat = props.schema.validation) === null || _props$schema$validat === void 0 || (_props$schema$validat = _props$schema$validat.length) === null || _props$schema$validat === void 0 ? void 0 : _props$schema$validat.min) !== undefined && props.elements.length < props.schema.validation.length.min ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_field__WEBPACK_IMPORTED_MODULE_6__.FieldMessage, {\n      children: [\"Must have at least \", props.schema.validation.length.min, \" item\", props.schema.validation.length.min === 1 ? '' : 's']\n    }) : ((_props$schema$validat2 = props.schema.validation) === null || _props$schema$validat2 === void 0 || (_props$schema$validat2 = _props$schema$validat2.length) === null || _props$schema$validat2 === void 0 ? void 0 : _props$schema$validat2.max) !== undefined && props.elements.length > props.schema.validation.length.max ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_field__WEBPACK_IMPORTED_MODULE_6__.FieldMessage, {\n      children: [\"Must have at most \", props.schema.validation.length.max, \" item\", props.schema.validation.length.max === 1 ? '' : 's']\n    }) : undefined)\n  });\n}\nfunction ArrayFieldListView(props) {\n  let onMove = (keys, target) => {\n    const targetIndex = props.elements.findIndex(x => x.key === target.key);\n    if (targetIndex === -1) return;\n    const allKeys = props.elements.map(x => ({\n      key: x.key\n    }));\n    const indexToMoveTo = target.dropPosition === 'before' ? targetIndex : targetIndex + 1;\n    const indices = keys.map(key => allKeys.findIndex(x => x.key === key));\n    props.onChange(move(allKeys, indices, indexToMoveTo));\n  };\n  const dragType = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => Math.random().toString(36), []);\n  let {\n    dragAndDropHooks\n  } = (0,_keystar_ui_drag_and_drop__WEBPACK_IMPORTED_MODULE_13__.useDragAndDrop)({\n    getItems(keys) {\n      // Use a drag type so the items can only be reordered within this list\n      // and not dragged elsewhere.\n      return [...keys].map(key => {\n        key = JSON.stringify(key);\n        return {\n          [dragType]: key,\n          'text/plain': key\n        };\n      });\n    },\n    getAllowedDropOperations() {\n      return ['move', 'cancel'];\n    },\n    async onDrop(e) {\n      if (e.target.type !== 'root' && e.target.dropPosition !== 'on') {\n        let keys = [];\n        for (let item of e.items) {\n          if (item.kind === 'text') {\n            let key;\n            if (item.types.has(dragType)) {\n              key = JSON.parse(await item.getText(dragType));\n              keys.push(key);\n            } else if (item.types.has('text/plain')) {\n              // Fallback for Chrome Android case: https://bugs.chromium.org/p/chromium/issues/detail?id=1293803\n              // Multiple drag items are contained in a single string so we need to split them out\n              key = await item.getText('text/plain');\n              keys = key.split('\\n').map(val => val.replaceAll('\"', ''));\n            }\n          }\n        }\n        onMove(keys, e.target);\n      }\n    },\n    getDropOperation(target) {\n      if (target.type === 'root' || target.dropPosition === 'on') {\n        return 'cancel';\n      }\n      return 'move';\n    }\n  });\n  const onRemoveKey = useEventCallback(key => {\n    props.onChange(props.elements.map(x => ({\n      key: x.key\n    })).filter(val => val.key !== key));\n  });\n  const stringFormatter = (0,_react_aria_i18n__WEBPACK_IMPORTED_MODULE_102__.useLocalizedStringFormatter)(l10nMessages);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_list_view__WEBPACK_IMPORTED_MODULE_16__.ListView, {\n    \"aria-labelledby\": props.labelId,\n    items: props.elements,\n    dragAndDropHooks: dragAndDropHooks,\n    height: props.elements.length ? undefined : 'scale.2000',\n    renderEmptyState: () => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n      direction: \"column\",\n      gap: \"large\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      height: \"100%\",\n      padding: \"regular\",\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n        elementType: \"h3\",\n        align: \"center\",\n        color: \"neutralSecondary\",\n        size: \"large\",\n        weight: \"medium\",\n        children: \"Empty list\"\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n        align: \"center\",\n        color: \"neutralTertiary\",\n        children: \"Add the first item to see it here.\"\n      })]\n    }),\n    onAction: key => {\n      const idx = props.elements.findIndex(x => x.key === key);\n      if (idx === -1) return;\n      props.onOpenItem(idx);\n    },\n    children: item => {\n      var _props$schema$itemLab, _props$schema;\n      const label = ((_props$schema$itemLab = (_props$schema = props.schema).itemLabel) === null || _props$schema$itemLab === void 0 ? void 0 : _props$schema$itemLab.call(_props$schema, item)) || `Item ${props.elements.indexOf(item) + 1}`;\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_list_view__WEBPACK_IMPORTED_MODULE_16__.Item, {\n        textValue: label,\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n          children: label\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n          placement: \"start\",\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n            onPress: () => {\n              onRemoveKey(item.key);\n            },\n            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n              src: _keystar_ui_icon_icons_trash2Icon__WEBPACK_IMPORTED_MODULE_15__.trash2Icon\n            })\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n            tone: \"critical\",\n            children: stringFormatter.format('delete')\n          })]\n        })]\n      }, item.key);\n    }\n  });\n}\n\n// https://github.com/adobe/react-spectrum/blob/97ff9f95d91befaf87251e52ea484f81daae8f3a/packages/%40react-stately/data/src/useListData.ts#L263\nfunction move(items, indices, toIndex) {\n  // Shift the target down by the number of items being moved from before the target\n  toIndex -= indices.filter(index => index < toIndex).length;\n  let moves = indices.map(from => ({\n    from,\n    to: toIndex++\n  }));\n\n  // Shift later from indices down if they have a larger index\n  for (let i = 0; i < moves.length; i++) {\n    let a = moves[i].from;\n    for (let j = i; j < moves.length; j++) {\n      let b = moves[j].from;\n      if (b > a) {\n        moves[j].from--;\n      }\n    }\n  }\n\n  // Interleave the moves so they can be applied one by one rather than all at once\n  for (let i = 0; i < moves.length; i++) {\n    let a = moves[i];\n    for (let j = moves.length - 1; j > i; j--) {\n      let b = moves[j];\n      if (b.from < a.to) {\n        a.to++;\n      } else {\n        b.from++;\n      }\n    }\n  }\n  let copy = items.slice();\n  for (let move of moves) {\n    let [item] = copy.splice(move.from, 1);\n    copy.splice(move.to, 0, item);\n  }\n  return copy;\n}\nfunction ArrayFieldItemModalContent(props) {\n  const previewProps = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => createGetPreviewProps(props.schema, props.onChange, () => undefined), [props.schema, props.onChange])(props.value);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(FormValueContentFromPreviewProps, {\n    slugField: props.slugField,\n    autoFocus: true,\n    ...previewProps\n  });\n}\n\nconst isListType = type => type === 'ordered-list' || type === 'unordered-list';\nconst isListNode = node => isListType(node.type);\nfunction getAncestorList(editor) {\n  if (editor.selection) {\n    const listItem = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n      match: nodeTypeMatcher('list-item')\n    });\n    const list = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n      match: isListNode\n    });\n    if (listItem && list) {\n      return {\n        isInside: true,\n        listItem,\n        list\n      };\n    }\n  }\n  return {\n    isInside: false\n  };\n}\nfunction withList(editor) {\n  const {\n    insertBreak,\n    normalizeNode,\n    deleteBackward\n  } = editor;\n  editor.deleteBackward = unit => {\n    if (editor.selection) {\n      const ancestorList = getAncestorList(editor);\n      if (ancestorList.isInside && slate__WEBPACK_IMPORTED_MODULE_104__.Range.isCollapsed(editor.selection) && slate__WEBPACK_IMPORTED_MODULE_104__.Editor.isStart(editor, editor.selection.anchor, ancestorList.list[1])) {\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n          match: isListNode,\n          split: true\n        });\n        return;\n      }\n    }\n    deleteBackward(unit);\n  };\n  editor.insertBreak = () => {\n    const [listItem] = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.nodes(editor, {\n      match: node => node.type === 'list-item',\n      mode: 'lowest'\n    });\n    if (listItem && slate__WEBPACK_IMPORTED_MODULE_104__.Node.string(listItem[0]) === '') {\n      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n        match: isListNode,\n        split: true\n      });\n      return;\n    }\n    insertBreak();\n  };\n  editor.normalizeNode = entry => {\n    const [node, path] = entry;\n    if (slate__WEBPACK_IMPORTED_MODULE_104__.Element.isElement(node) || slate__WEBPACK_IMPORTED_MODULE_104__.Editor.isEditor(node)) {\n      const isElementBeingNormalizedAList = isListNode(node);\n      for (const [childNode, childPath] of slate__WEBPACK_IMPORTED_MODULE_104__.Node.children(editor, path)) {\n        const index = childPath[childPath.length - 1];\n        // merge sibling lists\n        if (isListNode(childNode)) {\n          var _node$children;\n          if (((_node$children = node.children[childPath[childPath.length - 1] + 1]) === null || _node$children === void 0 ? void 0 : _node$children.type) === childNode.type) {\n            const siblingNodePath = slate__WEBPACK_IMPORTED_MODULE_104__.Path.next(childPath);\n            moveChildren(editor, siblingNodePath, [...childPath, childNode.children.length]);\n            slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n              at: siblingNodePath\n            });\n            return;\n          }\n          if (isElementBeingNormalizedAList) {\n            const previousChild = node.children[index - 1];\n            if (slate__WEBPACK_IMPORTED_MODULE_104__.Element.isElement(previousChild)) {\n              slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.moveNodes(editor, {\n                at: childPath,\n                to: [...slate__WEBPACK_IMPORTED_MODULE_104__.Path.previous(childPath), previousChild.children.length - 1]\n              });\n            } else {\n              slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n                at: childPath\n              });\n            }\n            return;\n          }\n        }\n        if (node.type === 'list-item' && childNode.type !== 'list-item-content' && index === 0 && isBlock(childNode)) {\n          if (path[path.length - 1] !== 0) {\n            const previousChild = slate__WEBPACK_IMPORTED_MODULE_104__.Node.get(editor, slate__WEBPACK_IMPORTED_MODULE_104__.Path.previous(path));\n            if (slate__WEBPACK_IMPORTED_MODULE_104__.Element.isElement(previousChild)) {\n              slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.moveNodes(editor, {\n                at: path,\n                to: [...slate__WEBPACK_IMPORTED_MODULE_104__.Path.previous(path), previousChild.children.length]\n              });\n              return;\n            }\n          }\n          slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n            at: childPath\n          });\n          return;\n        }\n        if (node.type === 'list-item' && childNode.type === 'list-item-content' && index !== 0) {\n          slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.splitNodes(editor, {\n            at: childPath\n          });\n          return;\n        }\n      }\n    }\n    normalizeNode(entry);\n  };\n  return editor;\n}\n\nconst ToolbarStateContext = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createContext(null);\nfunction useToolbarState() {\n  const toolbarState = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(ToolbarStateContext);\n  if (!toolbarState) {\n    throw new Error('ToolbarStateProvider must be used to use useToolbarState');\n  }\n  return toolbarState;\n}\nconst createToolbarState = (editor, componentBlocks, editorDocumentFeatures) => {\n  const locationDocumentFeatures = getAncestorComponentChildFieldDocumentFeatures(editor, editorDocumentFeatures, componentBlocks) || {\n    kind: 'block',\n    inlineMarks: 'inherit',\n    documentFeatures: {\n      dividers: true,\n      formatting: {\n        alignment: {\n          center: true,\n          end: true\n        },\n        blockTypes: {\n          blockquote: true,\n          code: editorDocumentFeatures.formatting.blockTypes.code\n        },\n        headings: editorDocumentFeatures.formatting.headings,\n        listTypes: {\n          ordered: true,\n          unordered: true\n        }\n      },\n      layouts: editorDocumentFeatures.layouts,\n      links: true,\n      images: editorDocumentFeatures.images,\n      tables: true\n    },\n    softBreaks: true,\n    componentBlocks: true\n  };\n  let [maybeCodeBlockEntry] = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.nodes(editor, {\n    match: node => node.type !== 'code' && isBlock(node)\n  });\n  const editorMarks = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.marks(editor) || {};\n  const marks = Object.fromEntries(allMarks.map(mark => [mark, {\n    isDisabled: locationDocumentFeatures.inlineMarks !== 'inherit' && !locationDocumentFeatures.inlineMarks[mark] || !maybeCodeBlockEntry,\n    isSelected: !!editorMarks[mark]\n  }]));\n\n  // Editor.marks is \"what are the marks that would be applied if text was inserted now\"\n  // that's not really the UX we want, if we have some a document like this\n  // <paragraph>\n  //   <text>\n  //     <anchor />\n  //     content\n  //   </text>\n  //   <text bold>bold</text>\n  //   <text>\n  //     content\n  //     <focus />\n  //   </text>\n  // </paragraph>\n\n  // we want bold to be shown as selected even though if you inserted text from that selection, it wouldn't be bold\n  // so we look at all the text nodes in the selection to get their marks\n  // but only if the selection is expanded because if you're in the middle of some text\n  // with your selection collapsed with a mark but you've removed it(i.e. editor.removeMark)\n  // the text nodes you're in will have the mark but the ui should show the mark as not being selected\n  if (editor.selection && slate__WEBPACK_IMPORTED_MODULE_104__.Range.isExpanded(editor.selection)) {\n    for (const node of slate__WEBPACK_IMPORTED_MODULE_104__.Editor.nodes(editor, {\n      match: slate__WEBPACK_IMPORTED_MODULE_104__.Text.isText\n    })) {\n      for (const key of Object.keys(node[0])) {\n        if (key === 'insertMenu' || key === 'text') {\n          continue;\n        }\n        if (key in marks) {\n          marks[key].isSelected = true;\n        }\n      }\n    }\n  }\n  let [headingEntry] = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.nodes(editor, {\n    match: nodeTypeMatcher('heading')\n  });\n  let [listEntry] = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.nodes(editor, {\n    match: isListNode\n  });\n  let [alignableEntry] = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.nodes(editor, {\n    match: nodeTypeMatcher('paragraph', 'heading')\n  });\n\n  // (we're gonna use markdown here because the equivelant slate structure is quite large and doesn't add value here)\n  // let's imagine a document that looks like this:\n  // - thing\n  //   1. something<cursor />\n  // in the toolbar, you don't want to see that both ordered and unordered lists are selected\n  // you want to see only ordered list selected, because\n  // - you want to know what list you're actually in, you don't really care about the outer list\n  // - when you want to change the list to a unordered list, the unordered list button should be inactive to show you can change to it\n  const listTypeAbove = getListTypeAbove(editor);\n  return {\n    marks,\n    textStyles: {\n      selected: headingEntry ? headingEntry[0].level : 'normal',\n      allowedHeadingLevels: locationDocumentFeatures.kind === 'block' && !listEntry ? locationDocumentFeatures.documentFeatures.formatting.headings.levels : []\n    },\n    code: {\n      isSelected: isElementActive(editor, 'code'),\n      isDisabled: !(locationDocumentFeatures.kind === 'block' && locationDocumentFeatures.documentFeatures.formatting.blockTypes.code)\n    },\n    lists: {\n      ordered: {\n        isSelected: isElementActive(editor, 'ordered-list') && (listTypeAbove === 'none' || listTypeAbove === 'ordered-list'),\n        isDisabled: !(locationDocumentFeatures.kind === 'block' && locationDocumentFeatures.documentFeatures.formatting.listTypes.ordered && !headingEntry)\n      },\n      unordered: {\n        isSelected: isElementActive(editor, 'unordered-list') && (listTypeAbove === 'none' || listTypeAbove === 'unordered-list'),\n        isDisabled: !(locationDocumentFeatures.kind === 'block' && locationDocumentFeatures.documentFeatures.formatting.listTypes.unordered && !headingEntry)\n      }\n    },\n    alignment: {\n      isDisabled: !alignableEntry && !(locationDocumentFeatures.kind === 'block' && locationDocumentFeatures.documentFeatures.formatting.alignment),\n      selected: (alignableEntry === null || alignableEntry === void 0 ? void 0 : alignableEntry[0].textAlign) || 'start'\n    },\n    blockquote: {\n      isDisabled: !(locationDocumentFeatures.kind === 'block' && locationDocumentFeatures.documentFeatures.formatting.blockTypes.blockquote),\n      isSelected: isElementActive(editor, 'blockquote')\n    },\n    layouts: {\n      isSelected: isElementActive(editor, 'layout')\n    },\n    links: {\n      isDisabled: !editor.selection || slate__WEBPACK_IMPORTED_MODULE_104__.Range.isCollapsed(editor.selection) || !locationDocumentFeatures.documentFeatures.links,\n      isSelected: isElementActive(editor, 'link')\n    },\n    editor,\n    dividers: {\n      isDisabled: locationDocumentFeatures.kind === 'inline' || !locationDocumentFeatures.documentFeatures.dividers\n    },\n    clearFormatting: {\n      isDisabled: !(Object.values(marks).some(x => x.isSelected) || !!hasBlockThatClearsOnClearFormatting(editor))\n    },\n    editorDocumentFeatures\n  };\n};\nfunction hasBlockThatClearsOnClearFormatting(editor) {\n  const [node] = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.nodes(editor, {\n    match: node => node.type === 'heading' || node.type === 'code' || node.type === 'blockquote'\n  });\n  return !!node;\n}\nfunction getListTypeAbove(editor) {\n  const listAbove = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n    match: isListNode\n  });\n  if (!listAbove) {\n    return 'none';\n  }\n  return listAbove[0].type;\n}\nconst DocumentEditorConfigContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)(null);\nfunction useDocumentEditorConfig() {\n  const context = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(DocumentEditorConfigContext);\n  if (!context) {\n    throw new Error('useDocumentEditorConfig must be used within a DocumentEditorConfigContext.Provider');\n  }\n  return context;\n}\nconst ToolbarStateProvider = ({\n  children,\n  componentBlocks,\n  editorDocumentFeatures\n}) => {\n  const editor = (0,slate_react__WEBPACK_IMPORTED_MODULE_103__.useSlate)();\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(DocumentEditorConfigContext.Provider, {\n    value: (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => ({\n      componentBlocks,\n      documentFeatures: editorDocumentFeatures\n    }), [componentBlocks, editorDocumentFeatures]),\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ToolbarStateContext.Provider, {\n      value: createToolbarState(editor, componentBlocks, editorDocumentFeatures),\n      children: children\n    })\n  });\n};\n\n/* eslint-disable */\nglobalThis.Prism = {\n  manual: true\n};\n\n/* **********************************************\n     Begin prism-core.js\n********************************************** */\n\n/// <reference lib=\"WebWorker\"/>\n\nvar _self = globalThis;\n\n/**\n * Prism: Lightweight, robust, elegant syntax highlighting\n *\n * @license MIT <https://opensource.org/licenses/MIT>\n * @author Lea Verou <https://lea.verou.me>\n * @namespace\n * @public\n */\nvar Prism = function (_self) {\n  // Private helper vars\n  var lang = /(?:^|\\s)lang(?:uage)?-([\\w-]+)(?=\\s|$)/i;\n  var uniqueId = 0;\n\n  // The grammar object for plaintext\n  var plainTextGrammar = {};\n  var _ = {\n    /**\n     * By default, Prism will attempt to highlight all code elements (by calling {@link Prism.highlightAll}) on the\n     * current page after the page finished loading. This might be a problem if e.g. you wanted to asynchronously load\n     * additional languages or plugins yourself.\n     *\n     * By setting this value to `true`, Prism will not automatically highlight all code elements on the page.\n     *\n     * You obviously have to change this value before the automatic highlighting started. To do this, you can add an\n     * empty Prism object into the global scope before loading the Prism script like this:\n     *\n     * ```js\n     * window.Prism = window.Prism || {};\n     * Prism.manual = true;\n     * // add a new <script> to load Prism's script\n     * ```\n     *\n     * @default false\n     * @type {boolean}\n     * @memberof Prism\n     * @public\n     */\n    manual: _self.Prism && _self.Prism.manual,\n    /**\n     * By default, if Prism is in a web worker, it assumes that it is in a worker it created itself, so it uses\n     * `addEventListener` to communicate with its parent instance. However, if you're using Prism manually in your\n     * own worker, you don't want it to do this.\n     *\n     * By setting this value to `true`, Prism will not add its own listeners to the worker.\n     *\n     * You obviously have to change this value before Prism executes. To do this, you can add an\n     * empty Prism object into the global scope before loading the Prism script like this:\n     *\n     * ```js\n     * window.Prism = window.Prism || {};\n     * Prism.disableWorkerMessageHandler = true;\n     * // Load Prism's script\n     * ```\n     *\n     * @default false\n     * @type {boolean}\n     * @memberof Prism\n     * @public\n     */\n    disableWorkerMessageHandler: _self.Prism && _self.Prism.disableWorkerMessageHandler,\n    /**\n     * A namespace for utility methods.\n     *\n     * All function in this namespace that are not explicitly marked as _public_ are for __internal use only__ and may\n     * change or disappear at any time.\n     *\n     * @namespace\n     * @memberof Prism\n     */\n    util: {\n      encode: function encode(tokens) {\n        if (tokens instanceof Token) {\n          return new Token(tokens.type, encode(tokens.content), tokens.alias);\n        } else if (Array.isArray(tokens)) {\n          return tokens.map(encode);\n        } else {\n          return tokens.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\\u00a0/g, ' ');\n        }\n      },\n      /**\n       * Returns the name of the type of the given value.\n       *\n       * @param {any} o\n       * @returns {string}\n       * @example\n       * type(null)      === 'Null'\n       * type(undefined) === 'Undefined'\n       * type(123)       === 'Number'\n       * type('foo')     === 'String'\n       * type(true)      === 'Boolean'\n       * type([1, 2])    === 'Array'\n       * type({})        === 'Object'\n       * type(String)    === 'Function'\n       * type(/abc+/)    === 'RegExp'\n       */\n      type: function (o) {\n        return Object.prototype.toString.call(o).slice(8, -1);\n      },\n      /**\n       * Returns a unique number for the given object. Later calls will still return the same number.\n       *\n       * @param {Object} obj\n       * @returns {number}\n       */\n      objId: function (obj) {\n        if (!obj['__id']) {\n          Object.defineProperty(obj, '__id', {\n            value: ++uniqueId\n          });\n        }\n        return obj['__id'];\n      },\n      /**\n       * Creates a deep clone of the given object.\n       *\n       * The main intended use of this function is to clone language definitions.\n       *\n       * @param {T} o\n       * @param {Record<number, any>} [visited]\n       * @returns {T}\n       * @template T\n       */\n      clone: function deepClone(o, visited) {\n        visited = visited || {};\n        var clone;\n        var id;\n        switch (_.util.type(o)) {\n          case 'Object':\n            id = _.util.objId(o);\n            if (visited[id]) {\n              return visited[id];\n            }\n            clone = /** @type {Record<string, any>} */{};\n            visited[id] = clone;\n            for (var key in o) {\n              if (o.hasOwnProperty(key)) {\n                clone[key] = deepClone(o[key], visited);\n              }\n            }\n            return /** @type {any} */clone;\n          case 'Array':\n            id = _.util.objId(o);\n            if (visited[id]) {\n              return visited[id];\n            }\n            clone = [];\n            visited[id] = clone;\n            ( /** @type {Array} */ /** @type {any} */o).forEach(function (v, i) {\n              clone[i] = deepClone(v, visited);\n            });\n            return /** @type {any} */clone;\n          default:\n            return o;\n        }\n      },\n      /**\n       * Returns the Prism language of the given element set by a `language-xxxx` or `lang-xxxx` class.\n       *\n       * If no language is set for the element or the element is `null` or `undefined`, `none` will be returned.\n       *\n       * @param {Element} element\n       * @returns {string}\n       */\n      getLanguage: function (element) {\n        while (element) {\n          var m = lang.exec(element.className);\n          if (m) {\n            return m[1].toLowerCase();\n          }\n          element = element.parentElement;\n        }\n        return 'none';\n      },\n      /**\n       * Sets the Prism `language-xxxx` class of the given element.\n       *\n       * @param {Element} element\n       * @param {string} language\n       * @returns {void}\n       */\n      setLanguage: function (element, language) {\n        // remove all `language-xxxx` classes\n        // (this might leave behind a leading space)\n        element.className = element.className.replace(RegExp(lang, 'gi'), '');\n\n        // add the new `language-xxxx` class\n        // (using `classList` will automatically clean up spaces for us)\n        element.classList.add('language-' + language);\n      },\n      /**\n       * Returns the script element that is currently executing.\n       *\n       * This does __not__ work for line script element.\n       *\n       * @returns {HTMLScriptElement | null}\n       */\n      currentScript: function () {\n        if (typeof document === 'undefined') {\n          return null;\n        }\n        if ('currentScript' in document && 1 < 2 /* hack to trip TS' flow analysis */) {\n          return /** @type {any} */document.currentScript;\n        }\n\n        // IE11 workaround\n        // we'll get the src of the current script by parsing IE11's error stack trace\n        // this will not work for inline scripts\n\n        try {\n          throw new Error();\n        } catch (err) {\n          // Get file src url from stack. Specifically works with the format of stack traces in IE.\n          // A stack will look like this:\n          //\n          // Error\n          //    at _.util.currentScript (http://localhost/components/prism-core.js:119:5)\n          //    at Global code (http://localhost/components/prism-core.js:606:1)\n\n          var src = (/at [^(\\r\\n]*\\((.*):[^:]+:[^:]+\\)$/i.exec(err.stack) || [])[1];\n          if (src) {\n            var scripts = document.getElementsByTagName('script');\n            for (var i in scripts) {\n              if (scripts[i].src == src) {\n                return scripts[i];\n              }\n            }\n          }\n          return null;\n        }\n      },\n      /**\n       * Returns whether a given class is active for `element`.\n       *\n       * The class can be activated if `element` or one of its ancestors has the given class and it can be deactivated\n       * if `element` or one of its ancestors has the negated version of the given class. The _negated version_ of the\n       * given class is just the given class with a `no-` prefix.\n       *\n       * Whether the class is active is determined by the closest ancestor of `element` (where `element` itself is\n       * closest ancestor) that has the given class or the negated version of it. If neither `element` nor any of its\n       * ancestors have the given class or the negated version of it, then the default activation will be returned.\n       *\n       * In the paradoxical situation where the closest ancestor contains __both__ the given class and the negated\n       * version of it, the class is considered active.\n       *\n       * @param {Element} element\n       * @param {string} className\n       * @param {boolean} [defaultActivation=false]\n       * @returns {boolean}\n       */\n      isActive: function (element, className, defaultActivation) {\n        var no = 'no-' + className;\n        while (element) {\n          var classList = element.classList;\n          if (classList.contains(className)) {\n            return true;\n          }\n          if (classList.contains(no)) {\n            return false;\n          }\n          element = element.parentElement;\n        }\n        return !!defaultActivation;\n      }\n    },\n    /**\n     * This namespace contains all currently loaded languages and the some helper functions to create and modify languages.\n     *\n     * @namespace\n     * @memberof Prism\n     * @public\n     */\n    languages: {\n      /**\n       * The grammar for plain, unformatted text.\n       */\n      plain: plainTextGrammar,\n      plaintext: plainTextGrammar,\n      text: plainTextGrammar,\n      txt: plainTextGrammar,\n      /**\n       * Creates a deep copy of the language with the given id and appends the given tokens.\n       *\n       * If a token in `redef` also appears in the copied language, then the existing token in the copied language\n       * will be overwritten at its original position.\n       *\n       * ## Best practices\n       *\n       * Since the position of overwriting tokens (token in `redef` that overwrite tokens in the copied language)\n       * doesn't matter, they can technically be in any order. However, this can be confusing to others that trying to\n       * understand the language definition because, normally, the order of tokens matters in Prism grammars.\n       *\n       * Therefore, it is encouraged to order overwriting tokens according to the positions of the overwritten tokens.\n       * Furthermore, all non-overwriting tokens should be placed after the overwriting ones.\n       *\n       * @param {string} id The id of the language to extend. This has to be a key in `Prism.languages`.\n       * @param {Grammar} redef The new tokens to append.\n       * @returns {Grammar} The new language created.\n       * @public\n       * @example\n       * Prism.languages['css-with-colors'] = Prism.languages.extend('css', {\n       *     // Prism.languages.css already has a 'comment' token, so this token will overwrite CSS' 'comment' token\n       *     // at its original position\n       *     'comment': { ... },\n       *     // CSS doesn't have a 'color' token, so this token will be appended\n       *     'color': /\\b(?:red|green|blue)\\b/\n       * });\n       */\n      extend: function (id, redef) {\n        var lang = _.util.clone(_.languages[id]);\n        for (var key in redef) {\n          lang[key] = redef[key];\n        }\n        return lang;\n      },\n      /**\n       * Inserts tokens _before_ another token in a language definition or any other grammar.\n       *\n       * ## Usage\n       *\n       * This helper method makes it easy to modify existing languages. For example, the CSS language definition\n       * not only defines CSS highlighting for CSS documents, but also needs to define highlighting for CSS embedded\n       * in HTML through `<style>` elements. To do this, it needs to modify `Prism.languages.markup` and add the\n       * appropriate tokens. However, `Prism.languages.markup` is a regular JavaScript object literal, so if you do\n       * this:\n       *\n       * ```js\n       * Prism.languages.markup.style = {\n       *     // token\n       * };\n       * ```\n       *\n       * then the `style` token will be added (and processed) at the end. `insertBefore` allows you to insert tokens\n       * before existing tokens. For the CSS example above, you would use it like this:\n       *\n       * ```js\n       * Prism.languages.insertBefore('markup', 'cdata', {\n       *     'style': {\n       *         // token\n       *     }\n       * });\n       * ```\n       *\n       * ## Special cases\n       *\n       * If the grammars of `inside` and `insert` have tokens with the same name, the tokens in `inside`'s grammar\n       * will be ignored.\n       *\n       * This behavior can be used to insert tokens after `before`:\n       *\n       * ```js\n       * Prism.languages.insertBefore('markup', 'comment', {\n       *     'comment': Prism.languages.markup.comment,\n       *     // tokens after 'comment'\n       * });\n       * ```\n       *\n       * ## Limitations\n       *\n       * The main problem `insertBefore` has to solve is iteration order. Since ES2015, the iteration order for object\n       * properties is guaranteed to be the insertion order (except for integer keys) but some browsers behave\n       * differently when keys are deleted and re-inserted. So `insertBefore` can't be implemented by temporarily\n       * deleting properties which is necessary to insert at arbitrary positions.\n       *\n       * To solve this problem, `insertBefore` doesn't actually insert the given tokens into the target object.\n       * Instead, it will create a new object and replace all references to the target object with the new one. This\n       * can be done without temporarily deleting properties, so the iteration order is well-defined.\n       *\n       * However, only references that can be reached from `Prism.languages` or `insert` will be replaced. I.e. if\n       * you hold the target object in a variable, then the value of the variable will not change.\n       *\n       * ```js\n       * var oldMarkup = Prism.languages.markup;\n       * var newMarkup = Prism.languages.insertBefore('markup', 'comment', { ... });\n       *\n       * assert(oldMarkup !== Prism.languages.markup);\n       * assert(newMarkup === Prism.languages.markup);\n       * ```\n       *\n       * @param {string} inside The property of `root` (e.g. a language id in `Prism.languages`) that contains the\n       * object to be modified.\n       * @param {string} before The key to insert before.\n       * @param {Grammar} insert An object containing the key-value pairs to be inserted.\n       * @param {Object<string, any>} [root] The object containing `inside`, i.e. the object that contains the\n       * object to be modified.\n       *\n       * Defaults to `Prism.languages`.\n       * @returns {Grammar} The new grammar object.\n       * @public\n       */\n      insertBefore: function (inside, before, insert, root) {\n        root = root || ( /** @type {any} */_.languages);\n        var grammar = root[inside];\n        /** @type {Grammar} */\n        var ret = {};\n        for (var token in grammar) {\n          if (grammar.hasOwnProperty(token)) {\n            if (token == before) {\n              for (var newToken in insert) {\n                if (insert.hasOwnProperty(newToken)) {\n                  ret[newToken] = insert[newToken];\n                }\n              }\n            }\n\n            // Do not insert token which also occur in insert. See #1525\n            if (!insert.hasOwnProperty(token)) {\n              ret[token] = grammar[token];\n            }\n          }\n        }\n        var old = root[inside];\n        root[inside] = ret;\n\n        // Update references in other language definitions\n        _.languages.DFS(_.languages, function (key, value) {\n          if (value === old && key != inside) {\n            this[key] = ret;\n          }\n        });\n        return ret;\n      },\n      // Traverse a language definition with Depth First Search\n      DFS: function DFS(o, callback, type, visited) {\n        visited = visited || {};\n        var objId = _.util.objId;\n        for (var i in o) {\n          if (o.hasOwnProperty(i)) {\n            callback.call(o, i, o[i], type || i);\n            var property = o[i];\n            var propertyType = _.util.type(property);\n            if (propertyType === 'Object' && !visited[objId(property)]) {\n              visited[objId(property)] = true;\n              DFS(property, callback, null, visited);\n            } else if (propertyType === 'Array' && !visited[objId(property)]) {\n              visited[objId(property)] = true;\n              DFS(property, callback, i, visited);\n            }\n          }\n        }\n      }\n    },\n    plugins: {},\n    /**\n     * This is the most high-level function in Prism’s API.\n     * It fetches all the elements that have a `.language-xxxx` class and then calls {@link Prism.highlightElement} on\n     * each one of them.\n     *\n     * This is equivalent to `Prism.highlightAllUnder(document, async, callback)`.\n     *\n     * @param {boolean} [async=false] Same as in {@link Prism.highlightAllUnder}.\n     * @param {HighlightCallback} [callback] Same as in {@link Prism.highlightAllUnder}.\n     * @memberof Prism\n     * @public\n     */\n    highlightAll: function (async, callback) {\n      _.highlightAllUnder(document, async, callback);\n    },\n    /**\n     * Fetches all the descendants of `container` that have a `.language-xxxx` class and then calls\n     * {@link Prism.highlightElement} on each one of them.\n     *\n     * The following hooks will be run:\n     * 1. `before-highlightall`\n     * 2. `before-all-elements-highlight`\n     * 3. All hooks of {@link Prism.highlightElement} for each element.\n     *\n     * @param {ParentNode} container The root element, whose descendants that have a `.language-xxxx` class will be highlighted.\n     * @param {boolean} [async=false] Whether each element is to be highlighted asynchronously using Web Workers.\n     * @param {HighlightCallback} [callback] An optional callback to be invoked on each element after its highlighting is done.\n     * @memberof Prism\n     * @public\n     */\n    highlightAllUnder: function (container, async, callback) {\n      var env = {\n        callback: callback,\n        container: container,\n        selector: 'code[class*=\"language-\"], [class*=\"language-\"] code, code[class*=\"lang-\"], [class*=\"lang-\"] code'\n      };\n      _.hooks.run('before-highlightall', env);\n      env.elements = Array.prototype.slice.apply(env.container.querySelectorAll(env.selector));\n      _.hooks.run('before-all-elements-highlight', env);\n      for (var i = 0, element; element = env.elements[i++];) {\n        _.highlightElement(element, async === true, env.callback);\n      }\n    },\n    /**\n     * Highlights the code inside a single element.\n     *\n     * The following hooks will be run:\n     * 1. `before-sanity-check`\n     * 2. `before-highlight`\n     * 3. All hooks of {@link Prism.highlight}. These hooks will be run by an asynchronous worker if `async` is `true`.\n     * 4. `before-insert`\n     * 5. `after-highlight`\n     * 6. `complete`\n     *\n     * Some the above hooks will be skipped if the element doesn't contain any text or there is no grammar loaded for\n     * the element's language.\n     *\n     * @param {Element} element The element containing the code.\n     * It must have a class of `language-xxxx` to be processed, where `xxxx` is a valid language identifier.\n     * @param {boolean} [async=false] Whether the element is to be highlighted asynchronously using Web Workers\n     * to improve performance and avoid blocking the UI when highlighting very large chunks of code. This option is\n     * [disabled by default](https://prismjs.com/faq.html#why-is-asynchronous-highlighting-disabled-by-default).\n     *\n     * Note: All language definitions required to highlight the code must be included in the main `prism.js` file for\n     * asynchronous highlighting to work. You can build your own bundle on the\n     * [Download page](https://prismjs.com/download.html).\n     * @param {HighlightCallback} [callback] An optional callback to be invoked after the highlighting is done.\n     * Mostly useful when `async` is `true`, since in that case, the highlighting is done asynchronously.\n     * @memberof Prism\n     * @public\n     */\n    highlightElement: function (element, async, callback) {\n      // Find language\n      var language = _.util.getLanguage(element);\n      var grammar = _.languages[language];\n\n      // Set language on the element, if not present\n      _.util.setLanguage(element, language);\n\n      // Set language on the parent, for styling\n      var parent = element.parentElement;\n      if (parent && parent.nodeName.toLowerCase() === 'pre') {\n        _.util.setLanguage(parent, language);\n      }\n      var code = element.textContent;\n      var env = {\n        element: element,\n        language: language,\n        grammar: grammar,\n        code: code\n      };\n      function insertHighlightedCode(highlightedCode) {\n        env.highlightedCode = highlightedCode;\n        _.hooks.run('before-insert', env);\n        env.element.innerHTML = env.highlightedCode;\n        _.hooks.run('after-highlight', env);\n        _.hooks.run('complete', env);\n        callback && callback.call(env.element);\n      }\n      _.hooks.run('before-sanity-check', env);\n\n      // plugins may change/add the parent/element\n      parent = env.element.parentElement;\n      if (parent && parent.nodeName.toLowerCase() === 'pre' && !parent.hasAttribute('tabindex')) {\n        parent.setAttribute('tabindex', '0');\n      }\n      if (!env.code) {\n        _.hooks.run('complete', env);\n        callback && callback.call(env.element);\n        return;\n      }\n      _.hooks.run('before-highlight', env);\n      if (!env.grammar) {\n        insertHighlightedCode(_.util.encode(env.code));\n        return;\n      }\n      if (async && _self.Worker) {\n        var worker = new Worker(_.filename);\n        worker.onmessage = function (evt) {\n          insertHighlightedCode(evt.data);\n        };\n        worker.postMessage(JSON.stringify({\n          language: env.language,\n          code: env.code,\n          immediateClose: true\n        }));\n      } else {\n        insertHighlightedCode(_.highlight(env.code, env.grammar, env.language));\n      }\n    },\n    /**\n     * Low-level function, only use if you know what you’re doing. It accepts a string of text as input\n     * and the language definitions to use, and returns a string with the HTML produced.\n     *\n     * The following hooks will be run:\n     * 1. `before-tokenize`\n     * 2. `after-tokenize`\n     * 3. `wrap`: On each {@link Token}.\n     *\n     * @param {string} text A string with the code to be highlighted.\n     * @param {Grammar} grammar An object containing the tokens to use.\n     *\n     * Usually a language definition like `Prism.languages.markup`.\n     * @param {string} language The name of the language definition passed to `grammar`.\n     * @returns {string} The highlighted HTML.\n     * @memberof Prism\n     * @public\n     * @example\n     * Prism.highlight('var foo = true;', Prism.languages.javascript, 'javascript');\n     */\n    highlight: function (text, grammar, language) {\n      var env = {\n        code: text,\n        grammar: grammar,\n        language: language\n      };\n      _.hooks.run('before-tokenize', env);\n      if (!env.grammar) {\n        throw new Error('The language \"' + env.language + '\" has no grammar.');\n      }\n      env.tokens = _.tokenize(env.code, env.grammar);\n      _.hooks.run('after-tokenize', env);\n      return Token.stringify(_.util.encode(env.tokens), env.language);\n    },\n    /**\n     * This is the heart of Prism, and the most low-level function you can use. It accepts a string of text as input\n     * and the language definitions to use, and returns an array with the tokenized code.\n     *\n     * When the language definition includes nested tokens, the function is called recursively on each of these tokens.\n     *\n     * This method could be useful in other contexts as well, as a very crude parser.\n     *\n     * @param {string} text A string with the code to be highlighted.\n     * @param {Grammar} grammar An object containing the tokens to use.\n     *\n     * Usually a language definition like `Prism.languages.markup`.\n     * @returns {TokenStream} An array of strings and tokens, a token stream.\n     * @memberof Prism\n     * @public\n     * @example\n     * let code = `var foo = 0;`;\n     * let tokens = Prism.tokenize(code, Prism.languages.javascript);\n     * tokens.forEach(token => {\n     *     if (token instanceof Prism.Token && token.type === 'number') {\n     *         console.log(`Found numeric literal: ${token.content}`);\n     *     }\n     * });\n     */\n    tokenize: function (text, grammar) {\n      var rest = grammar.rest;\n      if (rest) {\n        for (var token in rest) {\n          grammar[token] = rest[token];\n        }\n        delete grammar.rest;\n      }\n      var tokenList = new LinkedList();\n      addAfter(tokenList, tokenList.head, text);\n      matchGrammar(text, tokenList, grammar, tokenList.head, 0);\n      return toArray(tokenList);\n    },\n    /**\n     * @namespace\n     * @memberof Prism\n     * @public\n     */\n    hooks: {\n      all: {},\n      /**\n       * Adds the given callback to the list of callbacks for the given hook.\n       *\n       * The callback will be invoked when the hook it is registered for is run.\n       * Hooks are usually directly run by a highlight function but you can also run hooks yourself.\n       *\n       * One callback function can be registered to multiple hooks and the same hook multiple times.\n       *\n       * @param {string} name The name of the hook.\n       * @param {HookCallback} callback The callback function which is given environment variables.\n       * @public\n       */\n      add: function (name, callback) {\n        var hooks = _.hooks.all;\n        hooks[name] = hooks[name] || [];\n        hooks[name].push(callback);\n      },\n      /**\n       * Runs a hook invoking all registered callbacks with the given environment variables.\n       *\n       * Callbacks will be invoked synchronously and in the order in which they were registered.\n       *\n       * @param {string} name The name of the hook.\n       * @param {Object<string, any>} env The environment variables of the hook passed to all callbacks registered.\n       * @public\n       */\n      run: function (name, env) {\n        var callbacks = _.hooks.all[name];\n        if (!callbacks || !callbacks.length) {\n          return;\n        }\n        for (var i = 0, callback; callback = callbacks[i++];) {\n          callback(env);\n        }\n      }\n    },\n    Token: Token\n  };\n  _self.Prism = _;\n\n  // Typescript note:\n  // The following can be used to import the Token type in JSDoc:\n  //\n  //   @typedef {InstanceType<import(\"./prism-core\")[\"Token\"]>} Token\n\n  /**\n   * Creates a new token.\n   *\n   * @param {string} type See {@link Token#type type}\n   * @param {string | TokenStream} content See {@link Token#content content}\n   * @param {string|string[]} [alias] The alias(es) of the token.\n   * @param {string} [matchedStr=\"\"] A copy of the full string this token was created from.\n   * @class\n   * @global\n   * @public\n   */\n  function Token(type, content, alias, matchedStr) {\n    /**\n     * The type of the token.\n     *\n     * This is usually the key of a pattern in a {@link Grammar}.\n     *\n     * @type {string}\n     * @see GrammarToken\n     * @public\n     */\n    this.type = type;\n    /**\n     * The strings or tokens contained by this token.\n     *\n     * This will be a token stream if the pattern matched also defined an `inside` grammar.\n     *\n     * @type {string | TokenStream}\n     * @public\n     */\n    this.content = content;\n    /**\n     * The alias(es) of the token.\n     *\n     * @type {string|string[]}\n     * @see GrammarToken\n     * @public\n     */\n    this.alias = alias;\n    // Copy of the full string this token was created from\n    this.length = (matchedStr || '').length | 0;\n  }\n\n  /**\n   * A token stream is an array of strings and {@link Token Token} objects.\n   *\n   * Token streams have to fulfill a few properties that are assumed by most functions (mostly internal ones) that process\n   * them.\n   *\n   * 1. No adjacent strings.\n   * 2. No empty strings.\n   *\n   *    The only exception here is the token stream that only contains the empty string and nothing else.\n   *\n   * @typedef {Array<string | Token>} TokenStream\n   * @global\n   * @public\n   */\n\n  /**\n   * Converts the given token or token stream to an HTML representation.\n   *\n   * The following hooks will be run:\n   * 1. `wrap`: On each {@link Token}.\n   *\n   * @param {string | Token | TokenStream} o The token or token stream to be converted.\n   * @param {string} language The name of current language.\n   * @returns {string} The HTML representation of the token or token stream.\n   * @memberof Token\n   * @static\n   */\n  Token.stringify = function stringify(o, language) {\n    if (typeof o == 'string') {\n      return o;\n    }\n    if (Array.isArray(o)) {\n      var s = '';\n      o.forEach(function (e) {\n        s += stringify(e, language);\n      });\n      return s;\n    }\n    var env = {\n      type: o.type,\n      content: stringify(o.content, language),\n      tag: 'span',\n      classes: ['token', o.type],\n      attributes: {},\n      language: language\n    };\n    var aliases = o.alias;\n    if (aliases) {\n      if (Array.isArray(aliases)) {\n        Array.prototype.push.apply(env.classes, aliases);\n      } else {\n        env.classes.push(aliases);\n      }\n    }\n    _.hooks.run('wrap', env);\n    var attributes = '';\n    for (var name in env.attributes) {\n      attributes += ' ' + name + '=\"' + (env.attributes[name] || '').replace(/\"/g, '&quot;') + '\"';\n    }\n    return '<' + env.tag + ' class=\"' + env.classes.join(' ') + '\"' + attributes + '>' + env.content + '</' + env.tag + '>';\n  };\n\n  /**\n   * @param {RegExp} pattern\n   * @param {number} pos\n   * @param {string} text\n   * @param {boolean} lookbehind\n   * @returns {RegExpExecArray | null}\n   */\n  function matchPattern(pattern, pos, text, lookbehind) {\n    pattern.lastIndex = pos;\n    var match = pattern.exec(text);\n    if (match && lookbehind && match[1]) {\n      // change the match to remove the text matched by the Prism lookbehind group\n      var lookbehindLength = match[1].length;\n      match.index += lookbehindLength;\n      match[0] = match[0].slice(lookbehindLength);\n    }\n    return match;\n  }\n\n  /**\n   * @param {string} text\n   * @param {LinkedList<string | Token>} tokenList\n   * @param {any} grammar\n   * @param {LinkedListNode<string | Token>} startNode\n   * @param {number} startPos\n   * @param {RematchOptions} [rematch]\n   * @returns {void}\n   * @private\n   *\n   * @typedef RematchOptions\n   * @property {string} cause\n   * @property {number} reach\n   */\n  function matchGrammar(text, tokenList, grammar, startNode, startPos, rematch) {\n    for (var token in grammar) {\n      if (!grammar.hasOwnProperty(token) || !grammar[token]) {\n        continue;\n      }\n      var patterns = grammar[token];\n      patterns = Array.isArray(patterns) ? patterns : [patterns];\n      for (var j = 0; j < patterns.length; ++j) {\n        if (rematch && rematch.cause == token + ',' + j) {\n          return;\n        }\n        var patternObj = patterns[j];\n        var inside = patternObj.inside;\n        var lookbehind = !!patternObj.lookbehind;\n        var greedy = !!patternObj.greedy;\n        var alias = patternObj.alias;\n        if (greedy && !patternObj.pattern.global) {\n          // Without the global flag, lastIndex won't work\n          var flags = patternObj.pattern.toString().match(/[imsuy]*$/)[0];\n          patternObj.pattern = RegExp(patternObj.pattern.source, flags + 'g');\n        }\n\n        /** @type {RegExp} */\n        var pattern = patternObj.pattern || patternObj;\n        for (\n        // iterate the token list and keep track of the current token/string position\n        var currentNode = startNode.next, pos = startPos; currentNode !== tokenList.tail; pos += currentNode.value.length, currentNode = currentNode.next) {\n          if (rematch && pos >= rematch.reach) {\n            break;\n          }\n          var str = currentNode.value;\n          if (tokenList.length > text.length) {\n            // Something went terribly wrong, ABORT, ABORT!\n            return;\n          }\n          if (str instanceof Token) {\n            continue;\n          }\n          var removeCount = 1; // this is the to parameter of removeBetween\n          var match;\n          if (greedy) {\n            match = matchPattern(pattern, pos, text, lookbehind);\n            if (!match || match.index >= text.length) {\n              break;\n            }\n            var from = match.index;\n            var to = match.index + match[0].length;\n            var p = pos;\n\n            // find the node that contains the match\n            p += currentNode.value.length;\n            while (from >= p) {\n              currentNode = currentNode.next;\n              p += currentNode.value.length;\n            }\n            // adjust pos (and p)\n            p -= currentNode.value.length;\n            pos = p;\n\n            // the current node is a Token, then the match starts inside another Token, which is invalid\n            if (currentNode.value instanceof Token) {\n              continue;\n            }\n\n            // find the last node which is affected by this match\n            for (var k = currentNode; k !== tokenList.tail && (p < to || typeof k.value === 'string'); k = k.next) {\n              removeCount++;\n              p += k.value.length;\n            }\n            removeCount--;\n\n            // replace with the new match\n            str = text.slice(pos, p);\n            match.index -= pos;\n          } else {\n            match = matchPattern(pattern, 0, str, lookbehind);\n            if (!match) {\n              continue;\n            }\n          }\n\n          // eslint-disable-next-line no-redeclare\n          var from = match.index;\n          var matchStr = match[0];\n          var before = str.slice(0, from);\n          var after = str.slice(from + matchStr.length);\n          var reach = pos + str.length;\n          if (rematch && reach > rematch.reach) {\n            rematch.reach = reach;\n          }\n          var removeFrom = currentNode.prev;\n          if (before) {\n            removeFrom = addAfter(tokenList, removeFrom, before);\n            pos += before.length;\n          }\n          removeRange(tokenList, removeFrom, removeCount);\n          var wrapped = new Token(token, inside ? _.tokenize(matchStr, inside) : matchStr, alias, matchStr);\n          currentNode = addAfter(tokenList, removeFrom, wrapped);\n          if (after) {\n            addAfter(tokenList, currentNode, after);\n          }\n          if (removeCount > 1) {\n            // at least one Token object was removed, so we have to do some rematching\n            // this can only happen if the current pattern is greedy\n\n            /** @type {RematchOptions} */\n            var nestedRematch = {\n              cause: token + ',' + j,\n              reach: reach\n            };\n            matchGrammar(text, tokenList, grammar, currentNode.prev, pos, nestedRematch);\n\n            // the reach might have been extended because of the rematching\n            if (rematch && nestedRematch.reach > rematch.reach) {\n              rematch.reach = nestedRematch.reach;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * @typedef LinkedListNode\n   * @property {T} value\n   * @property {LinkedListNode<T> | null} prev The previous node.\n   * @property {LinkedListNode<T> | null} next The next node.\n   * @template T\n   * @private\n   */\n\n  /**\n   * @template T\n   * @private\n   */\n  function LinkedList() {\n    /** @type {LinkedListNode<T>} */\n    var head = {\n      value: null,\n      prev: null,\n      next: null\n    };\n    /** @type {LinkedListNode<T>} */\n    var tail = {\n      value: null,\n      prev: head,\n      next: null\n    };\n    head.next = tail;\n\n    /** @type {LinkedListNode<T>} */\n    this.head = head;\n    /** @type {LinkedListNode<T>} */\n    this.tail = tail;\n    this.length = 0;\n  }\n\n  /**\n   * Adds a new node with the given value to the list.\n   *\n   * @param {LinkedList<T>} list\n   * @param {LinkedListNode<T>} node\n   * @param {T} value\n   * @returns {LinkedListNode<T>} The added node.\n   * @template T\n   */\n  function addAfter(list, node, value) {\n    // assumes that node != list.tail && values.length >= 0\n    var next = node.next;\n    var newNode = {\n      value: value,\n      prev: node,\n      next: next\n    };\n    node.next = newNode;\n    next.prev = newNode;\n    list.length++;\n    return newNode;\n  }\n  /**\n   * Removes `count` nodes after the given node. The given node will not be removed.\n   *\n   * @param {LinkedList<T>} list\n   * @param {LinkedListNode<T>} node\n   * @param {number} count\n   * @template T\n   */\n  function removeRange(list, node, count) {\n    var next = node.next;\n    for (var i = 0; i < count && next !== list.tail; i++) {\n      next = next.next;\n    }\n    node.next = next;\n    next.prev = node;\n    list.length -= i;\n  }\n  /**\n   * @param {LinkedList<T>} list\n   * @returns {T[]}\n   * @template T\n   */\n  function toArray(list) {\n    var array = [];\n    var node = list.head.next;\n    while (node !== list.tail) {\n      array.push(node.value);\n      node = node.next;\n    }\n    return array;\n  }\n  if (!_self.document) {\n    if (!_self.addEventListener) {\n      // in Node.js\n      return _;\n    }\n    if (!_.disableWorkerMessageHandler) {\n      // In worker\n      _self.addEventListener('message', function (evt) {\n        var message = JSON.parse(evt.data);\n        var lang = message.language;\n        var code = message.code;\n        var immediateClose = message.immediateClose;\n        _self.postMessage(_.highlight(code, _.languages[lang], lang));\n        if (immediateClose) {\n          _self.close();\n        }\n      }, false);\n    }\n    return _;\n  }\n\n  // Get current script and highlight\n  var script = _.util.currentScript();\n  if (script) {\n    _.filename = script.src;\n    if (script.hasAttribute('data-manual')) {\n      _.manual = true;\n    }\n  }\n  function highlightAutomaticallyCallback() {\n    if (!_.manual) {\n      _.highlightAll();\n    }\n  }\n  if (!_.manual) {\n    // If the document state is \"loading\", then we'll use DOMContentLoaded.\n    // If the document state is \"interactive\" and the prism.js script is deferred, then we'll also use the\n    // DOMContentLoaded event because there might be some plugins or languages which have also been deferred and they\n    // might take longer one animation frame to execute which can create a race condition where only some plugins have\n    // been loaded when Prism.highlightAll() is executed, depending on how fast resources are loaded.\n    // See https://github.com/PrismJS/prism/issues/2102\n    var readyState = document.readyState;\n    if (readyState === 'loading' || readyState === 'interactive' && script && script.defer) {\n      document.addEventListener('DOMContentLoaded', highlightAutomaticallyCallback);\n    } else {\n      if (window.requestAnimationFrame) {\n        window.requestAnimationFrame(highlightAutomaticallyCallback);\n      } else {\n        window.setTimeout(highlightAutomaticallyCallback, 16);\n      }\n    }\n  }\n  return _;\n}(_self);\n\n// some additional documentation/types\n\n/**\n * The expansion of a simple `RegExp` literal to support additional properties.\n *\n * @typedef GrammarToken\n * @property {RegExp} pattern The regular expression of the token.\n * @property {boolean} [lookbehind=false] If `true`, then the first capturing group of `pattern` will (effectively)\n * behave as a lookbehind group meaning that the captured text will not be part of the matched text of the new token.\n * @property {boolean} [greedy=false] Whether the token is greedy.\n * @property {string|string[]} [alias] An optional alias or list of aliases.\n * @property {Grammar} [inside] The nested grammar of this token.\n *\n * The `inside` grammar will be used to tokenize the text value of each token of this kind.\n *\n * This can be used to make nested and even recursive language definitions.\n *\n * Note: This can cause infinite recursion. Be careful when you embed different languages or even the same language into\n * each another.\n * @global\n * @public\n */\n\n/**\n * @typedef Grammar\n * @type {Object<string, RegExp | GrammarToken | Array<RegExp | GrammarToken>>}\n * @property {Grammar} [rest] An optional grammar object that will be appended to this grammar.\n * @global\n * @public\n */\n\n/**\n * A function which will invoked after an element was successfully highlighted.\n *\n * @callback HighlightCallback\n * @param {Element} element The element successfully highlighted.\n * @returns {void}\n * @global\n * @public\n */\n\n/**\n * @callback HookCallback\n * @param {Object<string, any>} env The environment variables of the hook.\n * @returns {void}\n * @global\n * @public\n */\n\n/* **********************************************\n     Begin prism-markup.js\n********************************************** */\n\nPrism.languages.markup = {\n  'comment': {\n    pattern: /<!--(?:(?!<!--)[\\s\\S])*?-->/,\n    greedy: true\n  },\n  'prolog': {\n    pattern: /<\\?[\\s\\S]+?\\?>/,\n    greedy: true\n  },\n  'doctype': {\n    // https://www.w3.org/TR/xml/#NT-doctypedecl\n    pattern: /<!DOCTYPE(?:[^>\"'[\\]]|\"[^\"]*\"|'[^']*')+(?:\\[(?:[^<\"'\\]]|\"[^\"]*\"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\\]\\s*)?>/i,\n    greedy: true,\n    inside: {\n      'internal-subset': {\n        pattern: /(^[^\\[]*\\[)[\\s\\S]+(?=\\]>$)/,\n        lookbehind: true,\n        greedy: true,\n        inside: null // see below\n      },\n      'string': {\n        pattern: /\"[^\"]*\"|'[^']*'/,\n        greedy: true\n      },\n      'punctuation': /^<!|>$|[[\\]]/,\n      'doctype-tag': /^DOCTYPE/i,\n      'name': /[^\\s<>'\"]+/\n    }\n  },\n  'cdata': {\n    pattern: /<!\\[CDATA\\[[\\s\\S]*?\\]\\]>/i,\n    greedy: true\n  },\n  'tag': {\n    pattern: /<\\/?(?!\\d)[^\\s>\\/=$<%]+(?:\\s(?:\\s*[^\\s>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+(?=[\\s>]))|(?=[\\s/>])))+)?\\s*\\/?>/,\n    greedy: true,\n    inside: {\n      'tag': {\n        pattern: /^<\\/?[^\\s>\\/]+/,\n        inside: {\n          'punctuation': /^<\\/?/,\n          'namespace': /^[^\\s>\\/:]+:/\n        }\n      },\n      'special-attr': [],\n      'attr-value': {\n        pattern: /=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+)/,\n        inside: {\n          'punctuation': [{\n            pattern: /^=/,\n            alias: 'attr-equals'\n          }, {\n            pattern: /^(\\s*)[\"']|[\"']$/,\n            lookbehind: true\n          }]\n        }\n      },\n      'punctuation': /\\/?>/,\n      'attr-name': {\n        pattern: /[^\\s>\\/]+/,\n        inside: {\n          'namespace': /^[^\\s>\\/:]+:/\n        }\n      }\n    }\n  },\n  'entity': [{\n    pattern: /&[\\da-z]{1,8};/i,\n    alias: 'named-entity'\n  }, /&#x?[\\da-f]{1,8};/i]\n};\nPrism.languages.markup['tag'].inside['attr-value'].inside['entity'] = Prism.languages.markup['entity'];\nPrism.languages.markup['doctype'].inside['internal-subset'].inside = Prism.languages.markup;\n\n// Plugin to make entity title show the real entity, idea by Roman Komarov\nPrism.hooks.add('wrap', function (env) {\n  if (env.type === 'entity') {\n    env.attributes['title'] = env.content.replace(/&amp;/, '&');\n  }\n});\nObject.defineProperty(Prism.languages.markup.tag, 'addInlined', {\n  /**\n   * Adds an inlined language to markup.\n   *\n   * An example of an inlined language is CSS with `<style>` tags.\n   *\n   * @param {string} tagName The name of the tag that contains the inlined language. This name will be treated as\n   * case insensitive.\n   * @param {string} lang The language key.\n   * @example\n   * addInlined('style', 'css');\n   */\n  value: function addInlined(tagName, lang) {\n    var includedCdataInside = {};\n    includedCdataInside['language-' + lang] = {\n      pattern: /(^<!\\[CDATA\\[)[\\s\\S]+?(?=\\]\\]>$)/i,\n      lookbehind: true,\n      inside: Prism.languages[lang]\n    };\n    includedCdataInside['cdata'] = /^<!\\[CDATA\\[|\\]\\]>$/i;\n    var inside = {\n      'included-cdata': {\n        pattern: /<!\\[CDATA\\[[\\s\\S]*?\\]\\]>/i,\n        inside: includedCdataInside\n      }\n    };\n    inside['language-' + lang] = {\n      pattern: /[\\s\\S]+/,\n      inside: Prism.languages[lang]\n    };\n    var def = {};\n    def[tagName] = {\n      pattern: RegExp(/(<__[^>]*>)(?:<!\\[CDATA\\[(?:[^\\]]|\\](?!\\]>))*\\]\\]>|(?!<!\\[CDATA\\[)[\\s\\S])*?(?=<\\/__>)/.source.replace(/__/g, function () {\n        return tagName;\n      }), 'i'),\n      lookbehind: true,\n      greedy: true,\n      inside: inside\n    };\n    Prism.languages.insertBefore('markup', 'cdata', def);\n  }\n});\nObject.defineProperty(Prism.languages.markup.tag, 'addAttribute', {\n  /**\n   * Adds an pattern to highlight languages embedded in HTML attributes.\n   *\n   * An example of an inlined language is CSS with `style` attributes.\n   *\n   * @param {string} attrName The name of the tag that contains the inlined language. This name will be treated as\n   * case insensitive.\n   * @param {string} lang The language key.\n   * @example\n   * addAttribute('style', 'css');\n   */\n  value: function (attrName, lang) {\n    Prism.languages.markup.tag.inside['special-attr'].push({\n      pattern: RegExp(/(^|[\"'\\s])/.source + '(?:' + attrName + ')' + /\\s*=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+(?=[\\s>]))/.source, 'i'),\n      lookbehind: true,\n      inside: {\n        'attr-name': /^[^\\s=]+/,\n        'attr-value': {\n          pattern: /=[\\s\\S]+/,\n          inside: {\n            'value': {\n              pattern: /(^=\\s*([\"']|(?![\"'])))\\S[\\s\\S]*(?=\\2$)/,\n              lookbehind: true,\n              alias: [lang, 'language-' + lang],\n              inside: Prism.languages[lang]\n            },\n            'punctuation': [{\n              pattern: /^=/,\n              alias: 'attr-equals'\n            }, /\"|'/]\n          }\n        }\n      }\n    });\n  }\n});\nPrism.languages.html = Prism.languages.markup;\nPrism.languages.mathml = Prism.languages.markup;\nPrism.languages.svg = Prism.languages.markup;\nPrism.languages.xml = Prism.languages.extend('markup', {});\nPrism.languages.ssml = Prism.languages.xml;\nPrism.languages.atom = Prism.languages.xml;\nPrism.languages.rss = Prism.languages.xml;\n\n/* **********************************************\n     Begin prism-css.js\n********************************************** */\n\n(function (Prism) {\n  var string = /(?:\"(?:\\\\(?:\\r\\n|[\\s\\S])|[^\"\\\\\\r\\n])*\"|'(?:\\\\(?:\\r\\n|[\\s\\S])|[^'\\\\\\r\\n])*')/;\n  Prism.languages.css = {\n    'comment': /\\/\\*[\\s\\S]*?\\*\\//,\n    'atrule': {\n      pattern: RegExp('@[\\\\w-](?:' + /[^;{\\s\"']|\\s+(?!\\s)/.source + '|' + string.source + ')*?' + /(?:;|(?=\\s*\\{))/.source),\n      inside: {\n        'rule': /^@[\\w-]+/,\n        'selector-function-argument': {\n          pattern: /(\\bselector\\s*\\(\\s*(?![\\s)]))(?:[^()\\s]|\\s+(?![\\s)])|\\((?:[^()]|\\([^()]*\\))*\\))+(?=\\s*\\))/,\n          lookbehind: true,\n          alias: 'selector'\n        },\n        'keyword': {\n          pattern: /(^|[^\\w-])(?:and|not|only|or)(?![\\w-])/,\n          lookbehind: true\n        }\n        // See rest below\n      }\n    },\n    'url': {\n      // https://drafts.csswg.org/css-values-3/#urls\n      pattern: RegExp('\\\\burl\\\\((?:' + string.source + '|' + /(?:[^\\\\\\r\\n()\"']|\\\\[\\s\\S])*/.source + ')\\\\)', 'i'),\n      greedy: true,\n      inside: {\n        'function': /^url/i,\n        'punctuation': /^\\(|\\)$/,\n        'string': {\n          pattern: RegExp('^' + string.source + '$'),\n          alias: 'url'\n        }\n      }\n    },\n    'selector': {\n      pattern: RegExp('(^|[{}\\\\s])[^{}\\\\s](?:[^{};\"\\'\\\\s]|\\\\s+(?![\\\\s{])|' + string.source + ')*(?=\\\\s*\\\\{)'),\n      lookbehind: true\n    },\n    'string': {\n      pattern: string,\n      greedy: true\n    },\n    'property': {\n      pattern: /(^|[^-\\w\\xA0-\\uFFFF])(?!\\s)[-_a-z\\xA0-\\uFFFF](?:(?!\\s)[-\\w\\xA0-\\uFFFF])*(?=\\s*:)/i,\n      lookbehind: true\n    },\n    'important': /!important\\b/i,\n    'function': {\n      pattern: /(^|[^-a-z0-9])[-a-z0-9]+(?=\\()/i,\n      lookbehind: true\n    },\n    'punctuation': /[(){};:,]/\n  };\n  Prism.languages.css['atrule'].inside.rest = Prism.languages.css;\n  var markup = Prism.languages.markup;\n  if (markup) {\n    markup.tag.addInlined('style', 'css');\n    markup.tag.addAttribute('style', 'css');\n  }\n})(Prism);\n\n/* **********************************************\n     Begin prism-clike.js\n********************************************** */\n\nPrism.languages.clike = {\n  'comment': [{\n    pattern: /(^|[^\\\\])\\/\\*[\\s\\S]*?(?:\\*\\/|$)/,\n    lookbehind: true,\n    greedy: true\n  }, {\n    pattern: /(^|[^\\\\:])\\/\\/.*/,\n    lookbehind: true,\n    greedy: true\n  }],\n  'string': {\n    pattern: /([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\1)[^\\\\\\r\\n])*\\1/,\n    greedy: true\n  },\n  'class-name': {\n    pattern: /(\\b(?:class|extends|implements|instanceof|interface|new|trait)\\s+|\\bcatch\\s+\\()[\\w.\\\\]+/i,\n    lookbehind: true,\n    inside: {\n      'punctuation': /[.\\\\]/\n    }\n  },\n  'keyword': /\\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\\b/,\n  'boolean': /\\b(?:false|true)\\b/,\n  'function': /\\b\\w+(?=\\()/,\n  'number': /\\b0x[\\da-f]+\\b|(?:\\b\\d+(?:\\.\\d*)?|\\B\\.\\d+)(?:e[+-]?\\d+)?/i,\n  'operator': /[<>]=?|[!=]=?=?|--?|\\+\\+?|&&?|\\|\\|?|[?*/~^%]/,\n  'punctuation': /[{}[\\];(),.:]/\n};\n\n/* **********************************************\n     Begin prism-javascript.js\n********************************************** */\n\nPrism.languages.javascript = Prism.languages.extend('clike', {\n  'class-name': [Prism.languages.clike['class-name'], {\n    pattern: /(^|[^$\\w\\xA0-\\uFFFF])(?!\\s)[_$A-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\.(?:constructor|prototype))/,\n    lookbehind: true\n  }],\n  'keyword': [{\n    pattern: /((?:^|\\})\\s*)catch\\b/,\n    lookbehind: true\n  }, {\n    pattern: /(^|[^.]|\\.\\.\\.\\s*)\\b(?:as|assert(?=\\s*\\{)|async(?=\\s*(?:function\\b|\\(|[$\\w\\xA0-\\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\\s*(?:\\{|$))|for|from(?=\\s*(?:['\"]|$))|function|(?:get|set)(?=\\s*(?:[#\\[$\\w\\xA0-\\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\\b/,\n    lookbehind: true\n  }],\n  // Allow for all non-ASCII characters (See http://stackoverflow.com/a/2008444)\n  'function': /#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*(?:\\.\\s*(?:apply|bind|call)\\s*)?\\()/,\n  'number': {\n    pattern: RegExp(/(^|[^\\w$])/.source + '(?:' + (\n    // constant\n    /NaN|Infinity/.source + '|' +\n    // binary integer\n    /0[bB][01]+(?:_[01]+)*n?/.source + '|' +\n    // octal integer\n    /0[oO][0-7]+(?:_[0-7]+)*n?/.source + '|' +\n    // hexadecimal integer\n    /0[xX][\\dA-Fa-f]+(?:_[\\dA-Fa-f]+)*n?/.source + '|' +\n    // decimal bigint\n    /\\d+(?:_\\d+)*n/.source + '|' +\n    // decimal number (integer or float) but no bigint\n    /(?:\\d+(?:_\\d+)*(?:\\.(?:\\d+(?:_\\d+)*)?)?|\\.\\d+(?:_\\d+)*)(?:[Ee][+-]?\\d+(?:_\\d+)*)?/.source) + ')' + /(?![\\w$])/.source),\n    lookbehind: true\n  },\n  'operator': /--|\\+\\+|\\*\\*=?|=>|&&=?|\\|\\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\\.{3}|\\?\\?=?|\\?\\.?|[~:]/\n});\nPrism.languages.javascript['class-name'][0].pattern = /(\\b(?:class|extends|implements|instanceof|interface|new)\\s+)[\\w.\\\\]+/;\nPrism.languages.insertBefore('javascript', 'keyword', {\n  'regex': {\n    pattern: RegExp(\n    // lookbehind\n    // eslint-disable-next-line regexp/no-dupe-characters-character-class\n    /((?:^|[^$\\w\\xA0-\\uFFFF.\"'\\])\\s]|\\b(?:return|yield))\\s*)/.source +\n    // Regex pattern:\n    // There are 2 regex patterns here. The RegExp set notation proposal added support for nested character\n    // classes if the `v` flag is present. Unfortunately, nested CCs are both context-free and incompatible\n    // with the only syntax, so we have to define 2 different regex patterns.\n    /\\//.source + '(?:' + /(?:\\[(?:[^\\]\\\\\\r\\n]|\\\\.)*\\]|\\\\.|[^/\\\\\\[\\r\\n])+\\/[dgimyus]{0,7}/.source + '|' +\n    // `v` flag syntax. This supports 3 levels of nested character classes.\n    /(?:\\[(?:[^[\\]\\\\\\r\\n]|\\\\.|\\[(?:[^[\\]\\\\\\r\\n]|\\\\.|\\[(?:[^[\\]\\\\\\r\\n]|\\\\.)*\\])*\\])*\\]|\\\\.|[^/\\\\\\[\\r\\n])+\\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source + ')' +\n    // lookahead\n    /(?=(?:\\s|\\/\\*(?:[^*]|\\*(?!\\/))*\\*\\/)*(?:$|[\\r\\n,.;:})\\]]|\\/\\/))/.source),\n    lookbehind: true,\n    greedy: true,\n    inside: {\n      'regex-source': {\n        pattern: /^(\\/)[\\s\\S]+(?=\\/[a-z]*$)/,\n        lookbehind: true,\n        alias: 'language-regex',\n        inside: Prism.languages.regex\n      },\n      'regex-delimiter': /^\\/|\\/$/,\n      'regex-flags': /^[a-z]+$/\n    }\n  },\n  // This must be declared before keyword because we use \"function\" inside the look-forward\n  'function-variable': {\n    pattern: /#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*[=:]\\s*(?:async\\s*)?(?:\\bfunction\\b|(?:\\((?:[^()]|\\([^()]*\\))*\\)|(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*)\\s*=>))/,\n    alias: 'function'\n  },\n  'parameter': [{\n    pattern: /(function(?:\\s+(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*)?\\s*\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\))/,\n    lookbehind: true,\n    inside: Prism.languages.javascript\n  }, {\n    pattern: /(^|[^$\\w\\xA0-\\uFFFF])(?!\\s)[_$a-z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*=>)/i,\n    lookbehind: true,\n    inside: Prism.languages.javascript\n  }, {\n    pattern: /(\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\)\\s*=>)/,\n    lookbehind: true,\n    inside: Prism.languages.javascript\n  }, {\n    pattern: /((?:\\b|\\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\\w\\xA0-\\uFFFF]))(?:(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*\\s*)\\(\\s*|\\]\\s*\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\)\\s*\\{)/,\n    lookbehind: true,\n    inside: Prism.languages.javascript\n  }],\n  'constant': /\\b[A-Z](?:[A-Z_]|\\dx?)*\\b/\n});\nPrism.languages.insertBefore('javascript', 'string', {\n  'hashbang': {\n    pattern: /^#!.*/,\n    greedy: true,\n    alias: 'comment'\n  },\n  'template-string': {\n    pattern: /`(?:\\\\[\\s\\S]|\\$\\{(?:[^{}]|\\{(?:[^{}]|\\{[^}]*\\})*\\})+\\}|(?!\\$\\{)[^\\\\`])*`/,\n    greedy: true,\n    inside: {\n      'template-punctuation': {\n        pattern: /^`|`$/,\n        alias: 'string'\n      },\n      'interpolation': {\n        pattern: /((?:^|[^\\\\])(?:\\\\{2})*)\\$\\{(?:[^{}]|\\{(?:[^{}]|\\{[^}]*\\})*\\})+\\}/,\n        lookbehind: true,\n        inside: {\n          'interpolation-punctuation': {\n            pattern: /^\\$\\{|\\}$/,\n            alias: 'punctuation'\n          },\n          rest: Prism.languages.javascript\n        }\n      },\n      'string': /[\\s\\S]+/\n    }\n  },\n  'string-property': {\n    pattern: /((?:^|[,{])[ \\t]*)([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\2)[^\\\\\\r\\n])*\\2(?=\\s*:)/m,\n    lookbehind: true,\n    greedy: true,\n    alias: 'property'\n  }\n});\nPrism.languages.insertBefore('javascript', 'operator', {\n  'literal-property': {\n    pattern: /((?:^|[,{])[ \\t]*)(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*:)/m,\n    lookbehind: true,\n    alias: 'property'\n  }\n});\nif (Prism.languages.markup) {\n  Prism.languages.markup.tag.addInlined('script', 'javascript');\n\n  // add attribute support for all DOM events.\n  // https://developer.mozilla.org/en-US/docs/Web/Events#Standard_events\n  Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source, 'javascript');\n}\nPrism.languages.js = Prism.languages.javascript;\n\n/* **********************************************\n     Begin prism-file-highlight.js\n********************************************** */\n\n(function () {\n  if (typeof Prism === 'undefined' || typeof document === 'undefined') {\n    return;\n  }\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/Element/matches#Polyfill\n  if (!Element.prototype.matches) {\n    Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n  }\n  var LOADING_MESSAGE = 'Loading…';\n  var FAILURE_MESSAGE = function (status, message) {\n    return '✖ Error ' + status + ' while fetching file: ' + message;\n  };\n  var FAILURE_EMPTY_MESSAGE = '✖ Error: File does not exist or is empty';\n  var EXTENSIONS = {\n    'js': 'javascript',\n    'py': 'python',\n    'rb': 'ruby',\n    'ps1': 'powershell',\n    'psm1': 'powershell',\n    'sh': 'bash',\n    'bat': 'batch',\n    'h': 'c',\n    'tex': 'latex'\n  };\n  var STATUS_ATTR = 'data-src-status';\n  var STATUS_LOADING = 'loading';\n  var STATUS_LOADED = 'loaded';\n  var STATUS_FAILED = 'failed';\n  var SELECTOR = 'pre[data-src]:not([' + STATUS_ATTR + '=\"' + STATUS_LOADED + '\"])' + ':not([' + STATUS_ATTR + '=\"' + STATUS_LOADING + '\"])';\n\n  /**\n   * Loads the given file.\n   *\n   * @param {string} src The URL or path of the source file to load.\n   * @param {(result: string) => void} success\n   * @param {(reason: string) => void} error\n   */\n  function loadFile(src, success, error) {\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', src, true);\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState == 4) {\n        if (xhr.status < 400 && xhr.responseText) {\n          success(xhr.responseText);\n        } else {\n          if (xhr.status >= 400) {\n            error(FAILURE_MESSAGE(xhr.status, xhr.statusText));\n          } else {\n            error(FAILURE_EMPTY_MESSAGE);\n          }\n        }\n      }\n    };\n    xhr.send(null);\n  }\n\n  /**\n   * Parses the given range.\n   *\n   * This returns a range with inclusive ends.\n   *\n   * @param {string | null | undefined} range\n   * @returns {[number, number | undefined] | undefined}\n   */\n  function parseRange(range) {\n    var m = /^\\s*(\\d+)\\s*(?:(,)\\s*(?:(\\d+)\\s*)?)?$/.exec(range || '');\n    if (m) {\n      var start = Number(m[1]);\n      var comma = m[2];\n      var end = m[3];\n      if (!comma) {\n        return [start, start];\n      }\n      if (!end) {\n        return [start, undefined];\n      }\n      return [start, Number(end)];\n    }\n    return undefined;\n  }\n  Prism.hooks.add('before-highlightall', function (env) {\n    env.selector += ', ' + SELECTOR;\n  });\n  Prism.hooks.add('before-sanity-check', function (env) {\n    var pre = /** @type {HTMLPreElement} */env.element;\n    if (pre.matches(SELECTOR)) {\n      env.code = ''; // fast-path the whole thing and go to complete\n\n      pre.setAttribute(STATUS_ATTR, STATUS_LOADING); // mark as loading\n\n      // add code element with loading message\n      var code = pre.appendChild(document.createElement('CODE'));\n      code.textContent = LOADING_MESSAGE;\n      var src = pre.getAttribute('data-src');\n      var language = env.language;\n      if (language === 'none') {\n        // the language might be 'none' because there is no language set;\n        // in this case, we want to use the extension as the language\n        var extension = (/\\.(\\w+)$/.exec(src) || [, 'none'])[1];\n        language = EXTENSIONS[extension] || extension;\n      }\n\n      // set language classes\n      Prism.util.setLanguage(code, language);\n      Prism.util.setLanguage(pre, language);\n\n      // preload the language\n      var autoloader = Prism.plugins.autoloader;\n      if (autoloader) {\n        autoloader.loadLanguages(language);\n      }\n\n      // load file\n      loadFile(src, function (text) {\n        // mark as loaded\n        pre.setAttribute(STATUS_ATTR, STATUS_LOADED);\n\n        // handle data-range\n        var range = parseRange(pre.getAttribute('data-range'));\n        if (range) {\n          var lines = text.split(/\\r\\n?|\\n/g);\n\n          // the range is one-based and inclusive on both ends\n          var start = range[0];\n          var end = range[1] == null ? lines.length : range[1];\n          if (start < 0) {\n            start += lines.length;\n          }\n          start = Math.max(0, Math.min(start - 1, lines.length));\n          if (end < 0) {\n            end += lines.length;\n          }\n          end = Math.max(0, Math.min(end, lines.length));\n          text = lines.slice(start, end).join('\\n');\n\n          // add data-start for line numbers\n          if (!pre.hasAttribute('data-start')) {\n            pre.setAttribute('data-start', String(start + 1));\n          }\n        }\n\n        // highlight code\n        code.textContent = text;\n        Prism.highlightElement(code);\n      }, function (error) {\n        // mark as failed\n        pre.setAttribute(STATUS_ATTR, STATUS_FAILED);\n        code.textContent = error;\n      });\n    }\n  });\n  Prism.plugins.fileHighlight = {\n    /**\n     * Executes the File Highlight plugin for all matching `pre` elements under the given container.\n     *\n     * Note: Elements which are already loaded or currently loading will not be touched by this method.\n     *\n     * @param {ParentNode} [container=document]\n     */\n    highlight: function highlight(container) {\n      var elements = (container || document).querySelectorAll(SELECTOR);\n      for (var i = 0, element; element = elements[i++];) {\n        Prism.highlightElement(element);\n      }\n    }\n  };\n  var logged = false;\n  /** @deprecated Use `Prism.plugins.fileHighlight.highlight` instead. */\n  Prism.fileHighlight = function () {\n    if (!logged) {\n      console.warn('Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead.');\n      logged = true;\n    }\n    Prism.plugins.fileHighlight.highlight.apply(this, arguments);\n  };\n})();\nPrism.languages.clike = {\n  'comment': [{\n    pattern: /(^|[^\\\\])\\/\\*[\\s\\S]*?(?:\\*\\/|$)/,\n    lookbehind: true,\n    greedy: true\n  }, {\n    pattern: /(^|[^\\\\:])\\/\\/.*/,\n    lookbehind: true,\n    greedy: true\n  }],\n  'string': {\n    pattern: /([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\1)[^\\\\\\r\\n])*\\1/,\n    greedy: true\n  },\n  'class-name': {\n    pattern: /(\\b(?:class|extends|implements|instanceof|interface|new|trait)\\s+|\\bcatch\\s+\\()[\\w.\\\\]+/i,\n    lookbehind: true,\n    inside: {\n      'punctuation': /[.\\\\]/\n    }\n  },\n  'keyword': /\\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\\b/,\n  'boolean': /\\b(?:false|true)\\b/,\n  'function': /\\b\\w+(?=\\()/,\n  'number': /\\b0x[\\da-f]+\\b|(?:\\b\\d+(?:\\.\\d*)?|\\B\\.\\d+)(?:e[+-]?\\d+)?/i,\n  'operator': /[<>]=?|[!=]=?=?|--?|\\+\\+?|&&?|\\|\\|?|[?*/~^%]/,\n  'punctuation': /[{}[\\];(),.:]/\n};\nPrism.languages.c = Prism.languages.extend('clike', {\n  'comment': {\n    pattern: /\\/\\/(?:[^\\r\\n\\\\]|\\\\(?:\\r\\n?|\\n|(?![\\r\\n])))*|\\/\\*[\\s\\S]*?(?:\\*\\/|$)/,\n    greedy: true\n  },\n  'string': {\n    // https://en.cppreference.com/w/c/language/string_literal\n    pattern: /\"(?:\\\\(?:\\r\\n|[\\s\\S])|[^\"\\\\\\r\\n])*\"/,\n    greedy: true\n  },\n  'class-name': {\n    pattern: /(\\b(?:enum|struct)\\s+(?:__attribute__\\s*\\(\\([\\s\\S]*?\\)\\)\\s*)?)\\w+|\\b[a-z]\\w*_t\\b/,\n    lookbehind: true\n  },\n  'keyword': /\\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\\b/,\n  'function': /\\b[a-z_]\\w*(?=\\s*\\()/i,\n  'number': /(?:\\b0x(?:[\\da-f]+(?:\\.[\\da-f]*)?|\\.[\\da-f]+)(?:p[+-]?\\d+)?|(?:\\b\\d+(?:\\.\\d*)?|\\B\\.\\d+)(?:e[+-]?\\d+)?)[ful]{0,4}/i,\n  'operator': />>=?|<<=?|->|([-+&|:])\\1|[?:~]|[-+*/%&|^!=<>]=?/\n});\nPrism.languages.insertBefore('c', 'string', {\n  'char': {\n    // https://en.cppreference.com/w/c/language/character_constant\n    pattern: /'(?:\\\\(?:\\r\\n|[\\s\\S])|[^'\\\\\\r\\n]){0,32}'/,\n    greedy: true\n  }\n});\nPrism.languages.insertBefore('c', 'string', {\n  'macro': {\n    // allow for multiline macro definitions\n    // spaces after the # character compile fine with gcc\n    pattern: /(^[\\t ]*)#\\s*[a-z](?:[^\\r\\n\\\\/]|\\/(?!\\*)|\\/\\*(?:[^*]|\\*(?!\\/))*\\*\\/|\\\\(?:\\r\\n|[\\s\\S]))*/im,\n    lookbehind: true,\n    greedy: true,\n    alias: 'property',\n    inside: {\n      'string': [{\n        // highlight the path of the include statement as a string\n        pattern: /^(#\\s*include\\s*)<[^>]+>/,\n        lookbehind: true\n      }, Prism.languages.c['string']],\n      'char': Prism.languages.c['char'],\n      'comment': Prism.languages.c['comment'],\n      'macro-name': [{\n        pattern: /(^#\\s*define\\s+)\\w+\\b(?!\\()/i,\n        lookbehind: true\n      }, {\n        pattern: /(^#\\s*define\\s+)\\w+\\b(?=\\()/i,\n        lookbehind: true,\n        alias: 'function'\n      }],\n      // highlight macro directives as keywords\n      'directive': {\n        pattern: /^(#\\s*)[a-z]+/,\n        lookbehind: true,\n        alias: 'keyword'\n      },\n      'directive-hash': /^#/,\n      'punctuation': /##|\\\\(?=[\\r\\n])/,\n      'expression': {\n        pattern: /\\S[\\s\\S]*/,\n        inside: Prism.languages.c\n      }\n    }\n  }\n});\nPrism.languages.insertBefore('c', 'function', {\n  // highlight predefined macros as constants\n  'constant': /\\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\\b/\n});\ndelete Prism.languages.c['boolean'];\n(function (Prism) {\n  var keyword = /\\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\\b/;\n  var modName = /\\b(?!<keyword>)\\w+(?:\\s*\\.\\s*\\w+)*\\b/.source.replace(/<keyword>/g, function () {\n    return keyword.source;\n  });\n  Prism.languages.cpp = Prism.languages.extend('c', {\n    'class-name': [{\n      pattern: RegExp(/(\\b(?:class|concept|enum|struct|typename)\\s+)(?!<keyword>)\\w+/.source.replace(/<keyword>/g, function () {\n        return keyword.source;\n      })),\n      lookbehind: true\n    },\n    // This is intended to capture the class name of method implementations like:\n    //   void foo::bar() const {}\n    // However! The `foo` in the above example could also be a namespace, so we only capture the class name if\n    // it starts with an uppercase letter. This approximation should give decent results.\n    /\\b[A-Z]\\w*(?=\\s*::\\s*\\w+\\s*\\()/,\n    // This will capture the class name before destructors like:\n    //   Foo::~Foo() {}\n    /\\b[A-Z_]\\w*(?=\\s*::\\s*~\\w+\\s*\\()/i,\n    // This also intends to capture the class name of method implementations but here the class has template\n    // parameters, so it can't be a namespace (until C++ adds generic namespaces).\n    /\\b\\w+(?=\\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\\s*::\\s*\\w+\\s*\\()/],\n    'keyword': keyword,\n    'number': {\n      pattern: /(?:\\b0b[01']+|\\b0x(?:[\\da-f']+(?:\\.[\\da-f']*)?|\\.[\\da-f']+)(?:p[+-]?[\\d']+)?|(?:\\b[\\d']+(?:\\.[\\d']*)?|\\B\\.[\\d']+)(?:e[+-]?[\\d']+)?)[ful]{0,4}/i,\n      greedy: true\n    },\n    'operator': />>=?|<<=?|->|--|\\+\\+|&&|\\|\\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\\b/,\n    'boolean': /\\b(?:false|true)\\b/\n  });\n  Prism.languages.insertBefore('cpp', 'string', {\n    'module': {\n      // https://en.cppreference.com/w/cpp/language/modules\n      pattern: RegExp(/(\\b(?:import|module)\\s+)/.source + '(?:' +\n      // header-name\n      /\"(?:\\\\(?:\\r\\n|[\\s\\S])|[^\"\\\\\\r\\n])*\"|<[^<>\\r\\n]*>/.source + '|' +\n      // module name or partition or both\n      /<mod-name>(?:\\s*:\\s*<mod-name>)?|:\\s*<mod-name>/.source.replace(/<mod-name>/g, function () {\n        return modName;\n      }) + ')'),\n      lookbehind: true,\n      greedy: true,\n      inside: {\n        'string': /^[<\"][\\s\\S]+/,\n        'operator': /:/,\n        'punctuation': /\\./\n      }\n    },\n    'raw-string': {\n      pattern: /R\"([^()\\\\ ]{0,16})\\([\\s\\S]*?\\)\\1\"/,\n      alias: 'string',\n      greedy: true\n    }\n  });\n  Prism.languages.insertBefore('cpp', 'keyword', {\n    'generic-function': {\n      pattern: /\\b(?!operator\\b)[a-z_]\\w*\\s*<(?:[^<>]|<[^<>]*>)*>(?=\\s*\\()/i,\n      inside: {\n        'function': /^\\w+/,\n        'generic': {\n          pattern: /<[\\s\\S]+/,\n          alias: 'class-name',\n          inside: Prism.languages.cpp\n        }\n      }\n    }\n  });\n  Prism.languages.insertBefore('cpp', 'operator', {\n    'double-colon': {\n      pattern: /::/,\n      alias: 'punctuation'\n    }\n  });\n  Prism.languages.insertBefore('cpp', 'class-name', {\n    // the base clause is an optional list of parent classes\n    // https://en.cppreference.com/w/cpp/language/class\n    'base-clause': {\n      pattern: /(\\b(?:class|struct)\\s+\\w+\\s*:\\s*)[^;{}\"'\\s]+(?:\\s+[^;{}\"'\\s]+)*(?=\\s*[;{])/,\n      lookbehind: true,\n      greedy: true,\n      inside: Prism.languages.extend('cpp', {})\n    }\n  });\n  Prism.languages.insertBefore('inside', 'double-colon', {\n    // All untokenized words that are not namespaces should be class names\n    'class-name': /\\b[a-z_]\\w*\\b(?!\\s*::)/i\n  }, Prism.languages.cpp['base-clause']);\n})(Prism);\nPrism.languages.arduino = Prism.languages.extend('cpp', {\n  'keyword': /\\b(?:String|array|bool|boolean|break|byte|case|catch|continue|default|do|double|else|finally|for|function|goto|if|in|instanceof|int|integer|long|loop|new|null|return|setup|string|switch|throw|try|void|while|word)\\b/,\n  'constant': /\\b(?:ANALOG_MESSAGE|DEFAULT|DIGITAL_MESSAGE|EXTERNAL|FIRMATA_STRING|HIGH|INPUT|INPUT_PULLUP|INTERNAL|INTERNAL1V1|INTERNAL2V56|LED_BUILTIN|LOW|OUTPUT|REPORT_ANALOG|REPORT_DIGITAL|SET_PIN_MODE|SYSEX_START|SYSTEM_RESET)\\b/,\n  'builtin': /\\b(?:Audio|BSSID|Bridge|Client|Console|EEPROM|Esplora|EsploraTFT|Ethernet|EthernetClient|EthernetServer|EthernetUDP|File|FileIO|FileSystem|Firmata|GPRS|GSM|GSMBand|GSMClient|GSMModem|GSMPIN|GSMScanner|GSMServer|GSMVoiceCall|GSM_SMS|HttpClient|IPAddress|IRread|Keyboard|KeyboardController|LiquidCrystal|LiquidCrystal_I2C|Mailbox|Mouse|MouseController|PImage|Process|RSSI|RobotControl|RobotMotor|SD|SPI|SSID|Scheduler|Serial|Server|Servo|SoftwareSerial|Stepper|Stream|TFT|Task|USBHost|WiFi|WiFiClient|WiFiServer|WiFiUDP|Wire|YunClient|YunServer|abs|addParameter|analogRead|analogReadResolution|analogReference|analogWrite|analogWriteResolution|answerCall|attach|attachGPRS|attachInterrupt|attached|autoscroll|available|background|beep|begin|beginPacket|beginSD|beginSMS|beginSpeaker|beginTFT|beginTransmission|beginWrite|bit|bitClear|bitRead|bitSet|bitWrite|blink|blinkVersion|buffer|changePIN|checkPIN|checkPUK|checkReg|circle|cityNameRead|cityNameWrite|clear|clearScreen|click|close|compassRead|config|connect|connected|constrain|cos|countryNameRead|countryNameWrite|createChar|cursor|debugPrint|delay|delayMicroseconds|detach|detachInterrupt|digitalRead|digitalWrite|disconnect|display|displayLogos|drawBMP|drawCompass|encryptionType|end|endPacket|endSMS|endTransmission|endWrite|exists|exitValue|fill|find|findUntil|flush|gatewayIP|get|getAsynchronously|getBand|getButton|getCurrentCarrier|getIMEI|getKey|getModifiers|getOemKey|getPINUsed|getResult|getSignalStrength|getSocket|getVoiceCallStatus|getXChange|getYChange|hangCall|height|highByte|home|image|interrupts|isActionDone|isDirectory|isListening|isPIN|isPressed|isValid|keyPressed|keyReleased|keyboardRead|knobRead|leftToRight|line|lineFollowConfig|listen|listenOnLocalhost|loadImage|localIP|lowByte|macAddress|maintain|map|max|messageAvailable|micros|millis|min|mkdir|motorsStop|motorsWrite|mouseDragged|mouseMoved|mousePressed|mouseReleased|move|noAutoscroll|noBlink|noBuffer|noCursor|noDisplay|noFill|noInterrupts|noListenOnLocalhost|noStroke|noTone|onReceive|onRequest|open|openNextFile|overflow|parseCommand|parseFloat|parseInt|parsePacket|pauseMode|peek|pinMode|playFile|playMelody|point|pointTo|position|pow|prepare|press|print|printFirmwareVersion|printVersion|println|process|processInput|pulseIn|put|random|randomSeed|read|readAccelerometer|readBlue|readButton|readBytes|readBytesUntil|readGreen|readJoystickButton|readJoystickSwitch|readJoystickX|readJoystickY|readLightSensor|readMessage|readMicrophone|readNetworks|readRed|readSlider|readString|readStringUntil|readTemperature|ready|rect|release|releaseAll|remoteIP|remoteNumber|remotePort|remove|requestFrom|retrieveCallingNumber|rewindDirectory|rightToLeft|rmdir|robotNameRead|robotNameWrite|run|runAsynchronously|runShellCommand|runShellCommandAsynchronously|running|scanNetworks|scrollDisplayLeft|scrollDisplayRight|seek|sendAnalog|sendDigitalPortPair|sendDigitalPorts|sendString|sendSysex|serialEvent|setBand|setBitOrder|setClockDivider|setCursor|setDNS|setDataMode|setFirmwareVersion|setMode|setPINUsed|setSpeed|setTextSize|setTimeout|shiftIn|shiftOut|shutdown|sin|size|sqrt|startLoop|step|stop|stroke|subnetMask|switchPIN|tan|tempoWrite|text|tone|transfer|tuneWrite|turn|updateIR|userNameRead|userNameWrite|voiceCall|waitContinue|width|write|writeBlue|writeGreen|writeJSON|writeMessage|writeMicroseconds|writeRGB|writeRed|yield)\\b/\n});\nPrism.languages.ino = Prism.languages.arduino;\n(function (Prism) {\n  // $ set | grep '^[A-Z][^[:space:]]*=' | cut -d= -f1 | tr '\\n' '|'\n  // + LC_ALL, RANDOM, REPLY, SECONDS.\n  // + make sure PS1..4 are here as they are not always set,\n  // - some useless things.\n  var envVars = '\\\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\\\b';\n  var commandAfterHeredoc = {\n    pattern: /(^([\"']?)\\w+\\2)[ \\t]+\\S.*/,\n    lookbehind: true,\n    alias: 'punctuation',\n    // this looks reasonably well in all themes\n    inside: null // see below\n  };\n  var insideString = {\n    'bash': commandAfterHeredoc,\n    'environment': {\n      pattern: RegExp('\\\\$' + envVars),\n      alias: 'constant'\n    },\n    'variable': [\n    // [0]: Arithmetic Environment\n    {\n      pattern: /\\$?\\(\\([\\s\\S]+?\\)\\)/,\n      greedy: true,\n      inside: {\n        // If there is a $ sign at the beginning highlight $(( and )) as variable\n        'variable': [{\n          pattern: /(^\\$\\(\\([\\s\\S]+)\\)\\)/,\n          lookbehind: true\n        }, /^\\$\\(\\(/],\n        'number': /\\b0x[\\dA-Fa-f]+\\b|(?:\\b\\d+(?:\\.\\d*)?|\\B\\.\\d+)(?:[Ee]-?\\d+)?/,\n        // Operators according to https://www.gnu.org/software/bash/manual/bashref.html#Shell-Arithmetic\n        'operator': /--|\\+\\+|\\*\\*=?|<<=?|>>=?|&&|\\|\\||[=!+\\-*/%<>^&|]=?|[?~:]/,\n        // If there is no $ sign at the beginning highlight (( and )) as punctuation\n        'punctuation': /\\(\\(?|\\)\\)?|,|;/\n      }\n    },\n    // [1]: Command Substitution\n    {\n      pattern: /\\$\\((?:\\([^)]+\\)|[^()])+\\)|`[^`]+`/,\n      greedy: true,\n      inside: {\n        'variable': /^\\$\\(|^`|\\)$|`$/\n      }\n    },\n    // [2]: Brace expansion\n    {\n      pattern: /\\$\\{[^}]+\\}/,\n      greedy: true,\n      inside: {\n        'operator': /:[-=?+]?|[!\\/]|##?|%%?|\\^\\^?|,,?/,\n        'punctuation': /[\\[\\]]/,\n        'environment': {\n          pattern: RegExp('(\\\\{)' + envVars),\n          lookbehind: true,\n          alias: 'constant'\n        }\n      }\n    }, /\\$(?:\\w+|[#?*!@$])/],\n    // Escape sequences from echo and printf's manuals, and escaped quotes.\n    'entity': /\\\\(?:[abceEfnrtv\\\\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/\n  };\n  Prism.languages.bash = {\n    'shebang': {\n      pattern: /^#!\\s*\\/.*/,\n      alias: 'important'\n    },\n    'comment': {\n      pattern: /(^|[^\"{\\\\$])#.*/,\n      lookbehind: true\n    },\n    'function-name': [\n    // a) function foo {\n    // b) foo() {\n    // c) function foo() {\n    // but not “foo {”\n    {\n      // a) and c)\n      pattern: /(\\bfunction\\s+)[\\w-]+(?=(?:\\s*\\(?:\\s*\\))?\\s*\\{)/,\n      lookbehind: true,\n      alias: 'function'\n    }, {\n      // b)\n      pattern: /\\b[\\w-]+(?=\\s*\\(\\s*\\)\\s*\\{)/,\n      alias: 'function'\n    }],\n    // Highlight variable names as variables in for and select beginnings.\n    'for-or-select': {\n      pattern: /(\\b(?:for|select)\\s+)\\w+(?=\\s+in\\s)/,\n      alias: 'variable',\n      lookbehind: true\n    },\n    // Highlight variable names as variables in the left-hand part\n    // of assignments (“=” and “+=”).\n    'assign-left': {\n      pattern: /(^|[\\s;|&]|[<>]\\()\\w+(?:\\.\\w+)*(?=\\+?=)/,\n      inside: {\n        'environment': {\n          pattern: RegExp('(^|[\\\\s;|&]|[<>]\\\\()' + envVars),\n          lookbehind: true,\n          alias: 'constant'\n        }\n      },\n      alias: 'variable',\n      lookbehind: true\n    },\n    // Highlight parameter names as variables\n    'parameter': {\n      pattern: /(^|\\s)-{1,2}(?:\\w+:[+-]?)?\\w+(?:\\.\\w+)*(?=[=\\s]|$)/,\n      alias: 'variable',\n      lookbehind: true\n    },\n    'string': [\n    // Support for Here-documents https://en.wikipedia.org/wiki/Here_document\n    {\n      pattern: /((?:^|[^<])<<-?\\s*)(\\w+)\\s[\\s\\S]*?(?:\\r?\\n|\\r)\\2/,\n      lookbehind: true,\n      greedy: true,\n      inside: insideString\n    },\n    // Here-document with quotes around the tag\n    // → No expansion (so no “inside”).\n    {\n      pattern: /((?:^|[^<])<<-?\\s*)([\"'])(\\w+)\\2\\s[\\s\\S]*?(?:\\r?\\n|\\r)\\3/,\n      lookbehind: true,\n      greedy: true,\n      inside: {\n        'bash': commandAfterHeredoc\n      }\n    },\n    // “Normal” string\n    {\n      // https://www.gnu.org/software/bash/manual/html_node/Double-Quotes.html\n      pattern: /(^|[^\\\\](?:\\\\\\\\)*)\"(?:\\\\[\\s\\S]|\\$\\([^)]+\\)|\\$(?!\\()|`[^`]+`|[^\"\\\\`$])*\"/,\n      lookbehind: true,\n      greedy: true,\n      inside: insideString\n    }, {\n      // https://www.gnu.org/software/bash/manual/html_node/Single-Quotes.html\n      pattern: /(^|[^$\\\\])'[^']*'/,\n      lookbehind: true,\n      greedy: true\n    }, {\n      // https://www.gnu.org/software/bash/manual/html_node/ANSI_002dC-Quoting.html\n      pattern: /\\$'(?:[^'\\\\]|\\\\[\\s\\S])*'/,\n      greedy: true,\n      inside: {\n        'entity': insideString.entity\n      }\n    }],\n    'environment': {\n      pattern: RegExp('\\\\$?' + envVars),\n      alias: 'constant'\n    },\n    'variable': insideString.variable,\n    'function': {\n      pattern: /(^|[\\s;|&]|[<>]\\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\\s;|&])/,\n      lookbehind: true\n    },\n    'keyword': {\n      pattern: /(^|[\\s;|&]|[<>]\\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\\s;|&])/,\n      lookbehind: true\n    },\n    // https://www.gnu.org/software/bash/manual/html_node/Shell-Builtin-Commands.html\n    'builtin': {\n      pattern: /(^|[\\s;|&]|[<>]\\()(?:\\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\\s;|&])/,\n      lookbehind: true,\n      // Alias added to make those easier to distinguish from strings.\n      alias: 'class-name'\n    },\n    'boolean': {\n      pattern: /(^|[\\s;|&]|[<>]\\()(?:false|true)(?=$|[)\\s;|&])/,\n      lookbehind: true\n    },\n    'file-descriptor': {\n      pattern: /\\B&\\d\\b/,\n      alias: 'important'\n    },\n    'operator': {\n      // Lots of redirections here, but not just that.\n      pattern: /\\d?<>|>\\||\\+=|=[=~]?|!=?|<<[<-]?|[&\\d]?>>|\\d[<>]&?|[<>][&=]?|&[>&]?|\\|[&|]?/,\n      inside: {\n        'file-descriptor': {\n          pattern: /^\\d/,\n          alias: 'important'\n        }\n      }\n    },\n    'punctuation': /\\$?\\(\\(?|\\)\\)?|\\.\\.|[{}[\\];\\\\]/,\n    'number': {\n      pattern: /(^|\\s)(?:[1-9]\\d*|0)(?:[.,]\\d+)?\\b/,\n      lookbehind: true\n    }\n  };\n  commandAfterHeredoc.inside = Prism.languages.bash;\n\n  /* Patterns in command substitution. */\n  var toBeCopied = ['comment', 'function-name', 'for-or-select', 'assign-left', 'parameter', 'string', 'environment', 'function', 'keyword', 'builtin', 'boolean', 'file-descriptor', 'operator', 'punctuation', 'number'];\n  var inside = insideString.variable[1].inside;\n  for (var i = 0; i < toBeCopied.length; i++) {\n    inside[toBeCopied[i]] = Prism.languages.bash[toBeCopied[i]];\n  }\n  Prism.languages.sh = Prism.languages.bash;\n  Prism.languages.shell = Prism.languages.bash;\n})(Prism);\n(function (Prism) {\n  /**\n   * Replaces all placeholders \"<<n>>\" of given pattern with the n-th replacement (zero based).\n   *\n   * Note: This is a simple text based replacement. Be careful when using backreferences!\n   *\n   * @param {string} pattern the given pattern.\n   * @param {string[]} replacements a list of replacement which can be inserted into the given pattern.\n   * @returns {string} the pattern with all placeholders replaced with their corresponding replacements.\n   * @example replace(/a<<0>>a/.source, [/b+/.source]) === /a(?:b+)a/.source\n   */\n  function replace(pattern, replacements) {\n    return pattern.replace(/<<(\\d+)>>/g, function (m, index) {\n      return '(?:' + replacements[+index] + ')';\n    });\n  }\n  /**\n   * @param {string} pattern\n   * @param {string[]} replacements\n   * @param {string} [flags]\n   * @returns {RegExp}\n   */\n  function re(pattern, replacements, flags) {\n    return RegExp(replace(pattern, replacements), flags || '');\n  }\n\n  /**\n   * Creates a nested pattern where all occurrences of the string `<<self>>` are replaced with the pattern itself.\n   *\n   * @param {string} pattern\n   * @param {number} depthLog2\n   * @returns {string}\n   */\n  function nested(pattern, depthLog2) {\n    for (var i = 0; i < depthLog2; i++) {\n      pattern = pattern.replace(/<<self>>/g, function () {\n        return '(?:' + pattern + ')';\n      });\n    }\n    return pattern.replace(/<<self>>/g, '[^\\\\s\\\\S]');\n  }\n\n  // https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/\n  var keywordKinds = {\n    // keywords which represent a return or variable type\n    type: 'bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void',\n    // keywords which are used to declare a type\n    typeDeclaration: 'class enum interface record struct',\n    // contextual keywords\n    // (\"var\" and \"dynamic\" are missing because they are used like types)\n    contextual: 'add alias and ascending async await by descending from(?=\\\\s*(?:\\\\w|$)) get global group into init(?=\\\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\\\s*{)',\n    // all other keywords\n    other: 'abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield'\n  };\n\n  // keywords\n  function keywordsToPattern(words) {\n    return '\\\\b(?:' + words.trim().replace(/ /g, '|') + ')\\\\b';\n  }\n  var typeDeclarationKeywords = keywordsToPattern(keywordKinds.typeDeclaration);\n  var keywords = RegExp(keywordsToPattern(keywordKinds.type + ' ' + keywordKinds.typeDeclaration + ' ' + keywordKinds.contextual + ' ' + keywordKinds.other));\n  var nonTypeKeywords = keywordsToPattern(keywordKinds.typeDeclaration + ' ' + keywordKinds.contextual + ' ' + keywordKinds.other);\n  var nonContextualKeywords = keywordsToPattern(keywordKinds.type + ' ' + keywordKinds.typeDeclaration + ' ' + keywordKinds.other);\n\n  // types\n  var generic = nested(/<(?:[^<>;=+\\-*/%&|^]|<<self>>)*>/.source, 2); // the idea behind the other forbidden characters is to prevent false positives. Same for tupleElement.\n  var nestedRound = nested(/\\((?:[^()]|<<self>>)*\\)/.source, 2);\n  var name = /@?\\b[A-Za-z_]\\w*\\b/.source;\n  var genericName = replace(/<<0>>(?:\\s*<<1>>)?/.source, [name, generic]);\n  var identifier = replace(/(?!<<0>>)<<1>>(?:\\s*\\.\\s*<<1>>)*/.source, [nonTypeKeywords, genericName]);\n  var array = /\\[\\s*(?:,\\s*)*\\]/.source;\n  var typeExpressionWithoutTuple = replace(/<<0>>(?:\\s*(?:\\?\\s*)?<<1>>)*(?:\\s*\\?)?/.source, [identifier, array]);\n  var tupleElement = replace(/[^,()<>[\\];=+\\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source, [generic, nestedRound, array]);\n  var tuple = replace(/\\(<<0>>+(?:,<<0>>+)+\\)/.source, [tupleElement]);\n  var typeExpression = replace(/(?:<<0>>|<<1>>)(?:\\s*(?:\\?\\s*)?<<2>>)*(?:\\s*\\?)?/.source, [tuple, identifier, array]);\n  var typeInside = {\n    'keyword': keywords,\n    'punctuation': /[<>()?,.:[\\]]/\n  };\n\n  // strings & characters\n  // https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/language-specification/lexical-structure#character-literals\n  // https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/language-specification/lexical-structure#string-literals\n  var character = /'(?:[^\\r\\n'\\\\]|\\\\.|\\\\[Uux][\\da-fA-F]{1,8})'/.source; // simplified pattern\n  var regularString = /\"(?:\\\\.|[^\\\\\"\\r\\n])*\"/.source;\n  var verbatimString = /@\"(?:\"\"|\\\\[\\s\\S]|[^\\\\\"])*\"(?!\")/.source;\n  Prism.languages.csharp = Prism.languages.extend('clike', {\n    'string': [{\n      pattern: re(/(^|[^$\\\\])<<0>>/.source, [verbatimString]),\n      lookbehind: true,\n      greedy: true\n    }, {\n      pattern: re(/(^|[^@$\\\\])<<0>>/.source, [regularString]),\n      lookbehind: true,\n      greedy: true\n    }],\n    'class-name': [{\n      // Using static\n      // using static System.Math;\n      pattern: re(/(\\busing\\s+static\\s+)<<0>>(?=\\s*;)/.source, [identifier]),\n      lookbehind: true,\n      inside: typeInside\n    }, {\n      // Using alias (type)\n      // using Project = PC.MyCompany.Project;\n      pattern: re(/(\\busing\\s+<<0>>\\s*=\\s*)<<1>>(?=\\s*;)/.source, [name, typeExpression]),\n      lookbehind: true,\n      inside: typeInside\n    }, {\n      // Using alias (alias)\n      // using Project = PC.MyCompany.Project;\n      pattern: re(/(\\busing\\s+)<<0>>(?=\\s*=)/.source, [name]),\n      lookbehind: true\n    }, {\n      // Type declarations\n      // class Foo<A, B>\n      // interface Foo<out A, B>\n      pattern: re(/(\\b<<0>>\\s+)<<1>>/.source, [typeDeclarationKeywords, genericName]),\n      lookbehind: true,\n      inside: typeInside\n    }, {\n      // Single catch exception declaration\n      // catch(Foo)\n      // (things like catch(Foo e) is covered by variable declaration)\n      pattern: re(/(\\bcatch\\s*\\(\\s*)<<0>>/.source, [identifier]),\n      lookbehind: true,\n      inside: typeInside\n    }, {\n      // Name of the type parameter of generic constraints\n      // where Foo : class\n      pattern: re(/(\\bwhere\\s+)<<0>>/.source, [name]),\n      lookbehind: true\n    }, {\n      // Casts and checks via as and is.\n      // as Foo<A>, is Bar<B>\n      // (things like if(a is Foo b) is covered by variable declaration)\n      pattern: re(/(\\b(?:is(?:\\s+not)?|as)\\s+)<<0>>/.source, [typeExpressionWithoutTuple]),\n      lookbehind: true,\n      inside: typeInside\n    }, {\n      // Variable, field and parameter declaration\n      // (Foo bar, Bar baz, Foo[,,] bay, Foo<Bar, FooBar<Bar>> bax)\n      pattern: re(/\\b<<0>>(?=\\s+(?!<<1>>|with\\s*\\{)<<2>>(?:\\s*[=,;:{)\\]]|\\s+(?:in|when)\\b))/.source, [typeExpression, nonContextualKeywords, name]),\n      inside: typeInside\n    }],\n    'keyword': keywords,\n    // https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/language-specification/lexical-structure#literals\n    'number': /(?:\\b0(?:x[\\da-f_]*[\\da-f]|b[01_]*[01])|(?:\\B\\.\\d+(?:_+\\d+)*|\\b\\d+(?:_+\\d+)*(?:\\.\\d+(?:_+\\d+)*)?)(?:e[-+]?\\d+(?:_+\\d+)*)?)(?:[dflmu]|lu|ul)?\\b/i,\n    'operator': />>=?|<<=?|[-=]>|([-+&|])\\1|~|\\?\\?=?|[-+*/%&|^!=<>]=?/,\n    'punctuation': /\\?\\.?|::|[{}[\\];(),.:]/\n  });\n  Prism.languages.insertBefore('csharp', 'number', {\n    'range': {\n      pattern: /\\.\\./,\n      alias: 'operator'\n    }\n  });\n  Prism.languages.insertBefore('csharp', 'punctuation', {\n    'named-parameter': {\n      pattern: re(/([(,]\\s*)<<0>>(?=\\s*:)/.source, [name]),\n      lookbehind: true,\n      alias: 'punctuation'\n    }\n  });\n  Prism.languages.insertBefore('csharp', 'class-name', {\n    'namespace': {\n      // namespace Foo.Bar {}\n      // using Foo.Bar;\n      pattern: re(/(\\b(?:namespace|using)\\s+)<<0>>(?:\\s*\\.\\s*<<0>>)*(?=\\s*[;{])/.source, [name]),\n      lookbehind: true,\n      inside: {\n        'punctuation': /\\./\n      }\n    },\n    'type-expression': {\n      // default(Foo), typeof(Foo<Bar>), sizeof(int)\n      pattern: re(/(\\b(?:default|sizeof|typeof)\\s*\\(\\s*(?!\\s))(?:[^()\\s]|\\s(?!\\s)|<<0>>)*(?=\\s*\\))/.source, [nestedRound]),\n      lookbehind: true,\n      alias: 'class-name',\n      inside: typeInside\n    },\n    'return-type': {\n      // Foo<Bar> ForBar(); Foo IFoo.Bar() => 0\n      // int this[int index] => 0; T IReadOnlyList<T>.this[int index] => this[index];\n      // int Foo => 0; int Foo { get; set } = 0;\n      pattern: re(/<<0>>(?=\\s+(?:<<1>>\\s*(?:=>|[({]|\\.\\s*this\\s*\\[)|this\\s*\\[))/.source, [typeExpression, identifier]),\n      inside: typeInside,\n      alias: 'class-name'\n    },\n    'constructor-invocation': {\n      // new List<Foo<Bar[]>> { }\n      pattern: re(/(\\bnew\\s+)<<0>>(?=\\s*[[({])/.source, [typeExpression]),\n      lookbehind: true,\n      inside: typeInside,\n      alias: 'class-name'\n    },\n    /*'explicit-implementation': {\n    \t// int IFoo<Foo>.Bar => 0; void IFoo<Foo<Foo>>.Foo<T>();\n    \tpattern: replace(/\\b<<0>>(?=\\.<<1>>)/, className, methodOrPropertyDeclaration),\n    \tinside: classNameInside,\n    \talias: 'class-name'\n    },*/\n    'generic-method': {\n      // foo<Bar>()\n      pattern: re(/<<0>>\\s*<<1>>(?=\\s*\\()/.source, [name, generic]),\n      inside: {\n        'function': re(/^<<0>>/.source, [name]),\n        'generic': {\n          pattern: RegExp(generic),\n          alias: 'class-name',\n          inside: typeInside\n        }\n      }\n    },\n    'type-list': {\n      // The list of types inherited or of generic constraints\n      // class Foo<F> : Bar, IList<FooBar>\n      // where F : Bar, IList<int>\n      pattern: re(/\\b((?:<<0>>\\s+<<1>>|record\\s+<<1>>\\s*<<5>>|where\\s+<<2>>)\\s*:\\s*)(?:<<3>>|<<4>>|<<1>>\\s*<<5>>|<<6>>)(?:\\s*,\\s*(?:<<3>>|<<4>>|<<6>>))*(?=\\s*(?:where|[{;]|=>|$))/.source, [typeDeclarationKeywords, genericName, name, typeExpression, keywords.source, nestedRound, /\\bnew\\s*\\(\\s*\\)/.source]),\n      lookbehind: true,\n      inside: {\n        'record-arguments': {\n          pattern: re(/(^(?!new\\s*\\()<<0>>\\s*)<<1>>/.source, [genericName, nestedRound]),\n          lookbehind: true,\n          greedy: true,\n          inside: Prism.languages.csharp\n        },\n        'keyword': keywords,\n        'class-name': {\n          pattern: RegExp(typeExpression),\n          greedy: true,\n          inside: typeInside\n        },\n        'punctuation': /[,()]/\n      }\n    },\n    'preprocessor': {\n      pattern: /(^[\\t ]*)#.*/m,\n      lookbehind: true,\n      alias: 'property',\n      inside: {\n        // highlight preprocessor directives as keywords\n        'directive': {\n          pattern: /(#)\\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\\b/,\n          lookbehind: true,\n          alias: 'keyword'\n        }\n      }\n    }\n  });\n\n  // attributes\n  var regularStringOrCharacter = regularString + '|' + character;\n  var regularStringCharacterOrComment = replace(/\\/(?![*/])|\\/\\/[^\\r\\n]*[\\r\\n]|\\/\\*(?:[^*]|\\*(?!\\/))*\\*\\/|<<0>>/.source, [regularStringOrCharacter]);\n  var roundExpression = nested(replace(/[^\"'/()]|<<0>>|\\(<<self>>*\\)/.source, [regularStringCharacterOrComment]), 2);\n\n  // https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/attributes/#attribute-targets\n  var attrTarget = /\\b(?:assembly|event|field|method|module|param|property|return|type)\\b/.source;\n  var attr = replace(/<<0>>(?:\\s*\\(<<1>>*\\))?/.source, [identifier, roundExpression]);\n  Prism.languages.insertBefore('csharp', 'class-name', {\n    'attribute': {\n      // Attributes\n      // [Foo], [Foo(1), Bar(2, Prop = \"foo\")], [return: Foo(1), Bar(2)], [assembly: Foo(Bar)]\n      pattern: re(/((?:^|[^\\s\\w>)?])\\s*\\[\\s*)(?:<<0>>\\s*:\\s*)?<<1>>(?:\\s*,\\s*<<1>>)*(?=\\s*\\])/.source, [attrTarget, attr]),\n      lookbehind: true,\n      greedy: true,\n      inside: {\n        'target': {\n          pattern: re(/^<<0>>(?=\\s*:)/.source, [attrTarget]),\n          alias: 'keyword'\n        },\n        'attribute-arguments': {\n          pattern: re(/\\(<<0>>*\\)/.source, [roundExpression]),\n          inside: Prism.languages.csharp\n        },\n        'class-name': {\n          pattern: RegExp(identifier),\n          inside: {\n            'punctuation': /\\./\n          }\n        },\n        'punctuation': /[:,]/\n      }\n    }\n  });\n\n  // string interpolation\n  var formatString = /:[^}\\r\\n]+/.source;\n  // multi line\n  var mInterpolationRound = nested(replace(/[^\"'/()]|<<0>>|\\(<<self>>*\\)/.source, [regularStringCharacterOrComment]), 2);\n  var mInterpolation = replace(/\\{(?!\\{)(?:(?![}:])<<0>>)*<<1>>?\\}/.source, [mInterpolationRound, formatString]);\n  // single line\n  var sInterpolationRound = nested(replace(/[^\"'/()]|\\/(?!\\*)|\\/\\*(?:[^*]|\\*(?!\\/))*\\*\\/|<<0>>|\\(<<self>>*\\)/.source, [regularStringOrCharacter]), 2);\n  var sInterpolation = replace(/\\{(?!\\{)(?:(?![}:])<<0>>)*<<1>>?\\}/.source, [sInterpolationRound, formatString]);\n  function createInterpolationInside(interpolation, interpolationRound) {\n    return {\n      'interpolation': {\n        pattern: re(/((?:^|[^{])(?:\\{\\{)*)<<0>>/.source, [interpolation]),\n        lookbehind: true,\n        inside: {\n          'format-string': {\n            pattern: re(/(^\\{(?:(?![}:])<<0>>)*)<<1>>(?=\\}$)/.source, [interpolationRound, formatString]),\n            lookbehind: true,\n            inside: {\n              'punctuation': /^:/\n            }\n          },\n          'punctuation': /^\\{|\\}$/,\n          'expression': {\n            pattern: /[\\s\\S]+/,\n            alias: 'language-csharp',\n            inside: Prism.languages.csharp\n          }\n        }\n      },\n      'string': /[\\s\\S]+/\n    };\n  }\n  Prism.languages.insertBefore('csharp', 'string', {\n    'interpolation-string': [{\n      pattern: re(/(^|[^\\\\])(?:\\$@|@\\$)\"(?:\"\"|\\\\[\\s\\S]|\\{\\{|<<0>>|[^\\\\{\"])*\"/.source, [mInterpolation]),\n      lookbehind: true,\n      greedy: true,\n      inside: createInterpolationInside(mInterpolation, mInterpolationRound)\n    }, {\n      pattern: re(/(^|[^@\\\\])\\$\"(?:\\\\.|\\{\\{|<<0>>|[^\\\\\"{])*\"/.source, [sInterpolation]),\n      lookbehind: true,\n      greedy: true,\n      inside: createInterpolationInside(sInterpolation, sInterpolationRound)\n    }],\n    'char': {\n      pattern: RegExp(character),\n      greedy: true\n    }\n  });\n  Prism.languages.dotnet = Prism.languages.cs = Prism.languages.csharp;\n})(Prism);\nPrism.languages.markup = {\n  'comment': {\n    pattern: /<!--(?:(?!<!--)[\\s\\S])*?-->/,\n    greedy: true\n  },\n  'prolog': {\n    pattern: /<\\?[\\s\\S]+?\\?>/,\n    greedy: true\n  },\n  'doctype': {\n    // https://www.w3.org/TR/xml/#NT-doctypedecl\n    pattern: /<!DOCTYPE(?:[^>\"'[\\]]|\"[^\"]*\"|'[^']*')+(?:\\[(?:[^<\"'\\]]|\"[^\"]*\"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\\]\\s*)?>/i,\n    greedy: true,\n    inside: {\n      'internal-subset': {\n        pattern: /(^[^\\[]*\\[)[\\s\\S]+(?=\\]>$)/,\n        lookbehind: true,\n        greedy: true,\n        inside: null // see below\n      },\n      'string': {\n        pattern: /\"[^\"]*\"|'[^']*'/,\n        greedy: true\n      },\n      'punctuation': /^<!|>$|[[\\]]/,\n      'doctype-tag': /^DOCTYPE/i,\n      'name': /[^\\s<>'\"]+/\n    }\n  },\n  'cdata': {\n    pattern: /<!\\[CDATA\\[[\\s\\S]*?\\]\\]>/i,\n    greedy: true\n  },\n  'tag': {\n    pattern: /<\\/?(?!\\d)[^\\s>\\/=$<%]+(?:\\s(?:\\s*[^\\s>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+(?=[\\s>]))|(?=[\\s/>])))+)?\\s*\\/?>/,\n    greedy: true,\n    inside: {\n      'tag': {\n        pattern: /^<\\/?[^\\s>\\/]+/,\n        inside: {\n          'punctuation': /^<\\/?/,\n          'namespace': /^[^\\s>\\/:]+:/\n        }\n      },\n      'special-attr': [],\n      'attr-value': {\n        pattern: /=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+)/,\n        inside: {\n          'punctuation': [{\n            pattern: /^=/,\n            alias: 'attr-equals'\n          }, {\n            pattern: /^(\\s*)[\"']|[\"']$/,\n            lookbehind: true\n          }]\n        }\n      },\n      'punctuation': /\\/?>/,\n      'attr-name': {\n        pattern: /[^\\s>\\/]+/,\n        inside: {\n          'namespace': /^[^\\s>\\/:]+:/\n        }\n      }\n    }\n  },\n  'entity': [{\n    pattern: /&[\\da-z]{1,8};/i,\n    alias: 'named-entity'\n  }, /&#x?[\\da-f]{1,8};/i]\n};\nPrism.languages.markup['tag'].inside['attr-value'].inside['entity'] = Prism.languages.markup['entity'];\nPrism.languages.markup['doctype'].inside['internal-subset'].inside = Prism.languages.markup;\n\n// Plugin to make entity title show the real entity, idea by Roman Komarov\nPrism.hooks.add('wrap', function (env) {\n  if (env.type === 'entity') {\n    env.attributes['title'] = env.content.replace(/&amp;/, '&');\n  }\n});\nObject.defineProperty(Prism.languages.markup.tag, 'addInlined', {\n  /**\n   * Adds an inlined language to markup.\n   *\n   * An example of an inlined language is CSS with `<style>` tags.\n   *\n   * @param {string} tagName The name of the tag that contains the inlined language. This name will be treated as\n   * case insensitive.\n   * @param {string} lang The language key.\n   * @example\n   * addInlined('style', 'css');\n   */\n  value: function addInlined(tagName, lang) {\n    var includedCdataInside = {};\n    includedCdataInside['language-' + lang] = {\n      pattern: /(^<!\\[CDATA\\[)[\\s\\S]+?(?=\\]\\]>$)/i,\n      lookbehind: true,\n      inside: Prism.languages[lang]\n    };\n    includedCdataInside['cdata'] = /^<!\\[CDATA\\[|\\]\\]>$/i;\n    var inside = {\n      'included-cdata': {\n        pattern: /<!\\[CDATA\\[[\\s\\S]*?\\]\\]>/i,\n        inside: includedCdataInside\n      }\n    };\n    inside['language-' + lang] = {\n      pattern: /[\\s\\S]+/,\n      inside: Prism.languages[lang]\n    };\n    var def = {};\n    def[tagName] = {\n      pattern: RegExp(/(<__[^>]*>)(?:<!\\[CDATA\\[(?:[^\\]]|\\](?!\\]>))*\\]\\]>|(?!<!\\[CDATA\\[)[\\s\\S])*?(?=<\\/__>)/.source.replace(/__/g, function () {\n        return tagName;\n      }), 'i'),\n      lookbehind: true,\n      greedy: true,\n      inside: inside\n    };\n    Prism.languages.insertBefore('markup', 'cdata', def);\n  }\n});\nObject.defineProperty(Prism.languages.markup.tag, 'addAttribute', {\n  /**\n   * Adds an pattern to highlight languages embedded in HTML attributes.\n   *\n   * An example of an inlined language is CSS with `style` attributes.\n   *\n   * @param {string} attrName The name of the tag that contains the inlined language. This name will be treated as\n   * case insensitive.\n   * @param {string} lang The language key.\n   * @example\n   * addAttribute('style', 'css');\n   */\n  value: function (attrName, lang) {\n    Prism.languages.markup.tag.inside['special-attr'].push({\n      pattern: RegExp(/(^|[\"'\\s])/.source + '(?:' + attrName + ')' + /\\s*=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+(?=[\\s>]))/.source, 'i'),\n      lookbehind: true,\n      inside: {\n        'attr-name': /^[^\\s=]+/,\n        'attr-value': {\n          pattern: /=[\\s\\S]+/,\n          inside: {\n            'value': {\n              pattern: /(^=\\s*([\"']|(?![\"'])))\\S[\\s\\S]*(?=\\2$)/,\n              lookbehind: true,\n              alias: [lang, 'language-' + lang],\n              inside: Prism.languages[lang]\n            },\n            'punctuation': [{\n              pattern: /^=/,\n              alias: 'attr-equals'\n            }, /\"|'/]\n          }\n        }\n      }\n    });\n  }\n});\nPrism.languages.html = Prism.languages.markup;\nPrism.languages.mathml = Prism.languages.markup;\nPrism.languages.svg = Prism.languages.markup;\nPrism.languages.xml = Prism.languages.extend('markup', {});\nPrism.languages.ssml = Prism.languages.xml;\nPrism.languages.atom = Prism.languages.xml;\nPrism.languages.rss = Prism.languages.xml;\n(function (Prism) {\n  var string = /(?:\"(?:\\\\(?:\\r\\n|[\\s\\S])|[^\"\\\\\\r\\n])*\"|'(?:\\\\(?:\\r\\n|[\\s\\S])|[^'\\\\\\r\\n])*')/;\n  Prism.languages.css = {\n    'comment': /\\/\\*[\\s\\S]*?\\*\\//,\n    'atrule': {\n      pattern: RegExp('@[\\\\w-](?:' + /[^;{\\s\"']|\\s+(?!\\s)/.source + '|' + string.source + ')*?' + /(?:;|(?=\\s*\\{))/.source),\n      inside: {\n        'rule': /^@[\\w-]+/,\n        'selector-function-argument': {\n          pattern: /(\\bselector\\s*\\(\\s*(?![\\s)]))(?:[^()\\s]|\\s+(?![\\s)])|\\((?:[^()]|\\([^()]*\\))*\\))+(?=\\s*\\))/,\n          lookbehind: true,\n          alias: 'selector'\n        },\n        'keyword': {\n          pattern: /(^|[^\\w-])(?:and|not|only|or)(?![\\w-])/,\n          lookbehind: true\n        }\n        // See rest below\n      }\n    },\n    'url': {\n      // https://drafts.csswg.org/css-values-3/#urls\n      pattern: RegExp('\\\\burl\\\\((?:' + string.source + '|' + /(?:[^\\\\\\r\\n()\"']|\\\\[\\s\\S])*/.source + ')\\\\)', 'i'),\n      greedy: true,\n      inside: {\n        'function': /^url/i,\n        'punctuation': /^\\(|\\)$/,\n        'string': {\n          pattern: RegExp('^' + string.source + '$'),\n          alias: 'url'\n        }\n      }\n    },\n    'selector': {\n      pattern: RegExp('(^|[{}\\\\s])[^{}\\\\s](?:[^{};\"\\'\\\\s]|\\\\s+(?![\\\\s{])|' + string.source + ')*(?=\\\\s*\\\\{)'),\n      lookbehind: true\n    },\n    'string': {\n      pattern: string,\n      greedy: true\n    },\n    'property': {\n      pattern: /(^|[^-\\w\\xA0-\\uFFFF])(?!\\s)[-_a-z\\xA0-\\uFFFF](?:(?!\\s)[-\\w\\xA0-\\uFFFF])*(?=\\s*:)/i,\n      lookbehind: true\n    },\n    'important': /!important\\b/i,\n    'function': {\n      pattern: /(^|[^-a-z0-9])[-a-z0-9]+(?=\\()/i,\n      lookbehind: true\n    },\n    'punctuation': /[(){};:,]/\n  };\n  Prism.languages.css['atrule'].inside.rest = Prism.languages.css;\n  var markup = Prism.languages.markup;\n  if (markup) {\n    markup.tag.addInlined('style', 'css');\n    markup.tag.addAttribute('style', 'css');\n  }\n})(Prism);\n(function (Prism) {\n  Prism.languages.diff = {\n    'coord': [\n    // Match all kinds of coord lines (prefixed by \"+++\", \"---\" or \"***\").\n    /^(?:\\*{3}|-{3}|\\+{3}).*$/m,\n    // Match \"@@ ... @@\" coord lines in unified diff.\n    /^@@.*@@$/m,\n    // Match coord lines in normal diff (starts with a number).\n    /^\\d.*$/m]\n\n    // deleted, inserted, unchanged, diff\n  };\n\n  /**\n   * A map from the name of a block to its line prefix.\n   *\n   * @type {Object<string, string>}\n   */\n  var PREFIXES = {\n    'deleted-sign': '-',\n    'deleted-arrow': '<',\n    'inserted-sign': '+',\n    'inserted-arrow': '>',\n    'unchanged': ' ',\n    'diff': '!'\n  };\n\n  // add a token for each prefix\n  Object.keys(PREFIXES).forEach(function (name) {\n    var prefix = PREFIXES[name];\n    var alias = [];\n    if (!/^\\w+$/.test(name)) {\n      // \"deleted-sign\" -> \"deleted\"\n      alias.push(/\\w+/.exec(name)[0]);\n    }\n    if (name === 'diff') {\n      alias.push('bold');\n    }\n    Prism.languages.diff[name] = {\n      pattern: RegExp('^(?:[' + prefix + '].*(?:\\r\\n?|\\n|(?![\\\\s\\\\S])))+', 'm'),\n      alias: alias,\n      inside: {\n        'line': {\n          pattern: /(.)(?=[\\s\\S]).*(?:\\r\\n?|\\n)?/,\n          lookbehind: true\n        },\n        'prefix': {\n          pattern: /[\\s\\S]/,\n          alias: /\\w+/.exec(name)[0]\n        }\n      }\n    };\n  });\n\n  // make prefixes available to Diff plugin\n  Object.defineProperty(Prism.languages.diff, 'PREFIXES', {\n    value: PREFIXES\n  });\n})(Prism);\nPrism.languages.go = Prism.languages.extend('clike', {\n  'string': {\n    pattern: /(^|[^\\\\])\"(?:\\\\.|[^\"\\\\\\r\\n])*\"|`[^`]*`/,\n    lookbehind: true,\n    greedy: true\n  },\n  'keyword': /\\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\\b/,\n  'boolean': /\\b(?:_|false|iota|nil|true)\\b/,\n  'number': [\n  // binary and octal integers\n  /\\b0(?:b[01_]+|o[0-7_]+)i?\\b/i,\n  // hexadecimal integers and floats\n  /\\b0x(?:[a-f\\d_]+(?:\\.[a-f\\d_]*)?|\\.[a-f\\d_]+)(?:p[+-]?\\d+(?:_\\d+)*)?i?(?!\\w)/i,\n  // decimal integers and floats\n  /(?:\\b\\d[\\d_]*(?:\\.[\\d_]*)?|\\B\\.\\d[\\d_]*)(?:e[+-]?[\\d_]+)?i?(?!\\w)/i],\n  'operator': /[*\\/%^!=]=?|\\+[=+]?|-[=-]?|\\|[=|]?|&(?:=|&|\\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\\.\\.\\./,\n  'builtin': /\\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\\b/\n});\nPrism.languages.insertBefore('go', 'string', {\n  'char': {\n    pattern: /'(?:\\\\.|[^'\\\\\\r\\n]){0,10}'/,\n    greedy: true\n  }\n});\ndelete Prism.languages.go['class-name'];\nPrism.languages.ini = {\n  /**\n   * The component mimics the behavior of the Win32 API parser.\n   *\n   * @see {@link https://github.com/PrismJS/prism/issues/2775#issuecomment-787477723}\n   */\n\n  'comment': {\n    pattern: /(^[ \\f\\t\\v]*)[#;][^\\n\\r]*/m,\n    lookbehind: true\n  },\n  'section': {\n    pattern: /(^[ \\f\\t\\v]*)\\[[^\\n\\r\\]]*\\]?/m,\n    lookbehind: true,\n    inside: {\n      'section-name': {\n        pattern: /(^\\[[ \\f\\t\\v]*)[^ \\f\\t\\v\\]]+(?:[ \\f\\t\\v]+[^ \\f\\t\\v\\]]+)*/,\n        lookbehind: true,\n        alias: 'selector'\n      },\n      'punctuation': /\\[|\\]/\n    }\n  },\n  'key': {\n    pattern: /(^[ \\f\\t\\v]*)[^ \\f\\n\\r\\t\\v=]+(?:[ \\f\\t\\v]+[^ \\f\\n\\r\\t\\v=]+)*(?=[ \\f\\t\\v]*=)/m,\n    lookbehind: true,\n    alias: 'attr-name'\n  },\n  'value': {\n    pattern: /(=[ \\f\\t\\v]*)[^ \\f\\n\\r\\t\\v]+(?:[ \\f\\t\\v]+[^ \\f\\n\\r\\t\\v]+)*/,\n    lookbehind: true,\n    alias: 'attr-value',\n    inside: {\n      'inner-value': {\n        pattern: /^(\"|').+(?=\\1$)/,\n        lookbehind: true\n      }\n    }\n  },\n  'punctuation': /=/\n};\n(function (Prism) {\n  var keywords = /\\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\\s*[(){}[\\]<>=%~.:,;?+\\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\\b/;\n\n  // full package (optional) + parent classes (optional)\n  var classNamePrefix = /(?:[a-z]\\w*\\s*\\.\\s*)*(?:[A-Z]\\w*\\s*\\.\\s*)*/.source;\n\n  // based on the java naming conventions\n  var className = {\n    pattern: RegExp(/(^|[^\\w.])/.source + classNamePrefix + /[A-Z](?:[\\d_A-Z]*[a-z]\\w*)?\\b/.source),\n    lookbehind: true,\n    inside: {\n      'namespace': {\n        pattern: /^[a-z]\\w*(?:\\s*\\.\\s*[a-z]\\w*)*(?:\\s*\\.)?/,\n        inside: {\n          'punctuation': /\\./\n        }\n      },\n      'punctuation': /\\./\n    }\n  };\n  Prism.languages.java = Prism.languages.extend('clike', {\n    'string': {\n      pattern: /(^|[^\\\\])\"(?:\\\\.|[^\"\\\\\\r\\n])*\"/,\n      lookbehind: true,\n      greedy: true\n    },\n    'class-name': [className, {\n      // variables, parameters, and constructor references\n      // this to support class names (or generic parameters) which do not contain a lower case letter (also works for methods)\n      pattern: RegExp(/(^|[^\\w.])/.source + classNamePrefix + /[A-Z]\\w*(?=\\s+\\w+\\s*[;,=()]|\\s*(?:\\[[\\s,]*\\]\\s*)?::\\s*new\\b)/.source),\n      lookbehind: true,\n      inside: className.inside\n    }, {\n      // class names based on keyword\n      // this to support class names (or generic parameters) which do not contain a lower case letter (also works for methods)\n      pattern: RegExp(/(\\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\\s+)/.source + classNamePrefix + /[A-Z]\\w*\\b/.source),\n      lookbehind: true,\n      inside: className.inside\n    }],\n    'keyword': keywords,\n    'function': [Prism.languages.clike.function, {\n      pattern: /(::\\s*)[a-z_]\\w*/,\n      lookbehind: true\n    }],\n    'number': /\\b0b[01][01_]*L?\\b|\\b0x(?:\\.[\\da-f_p+-]+|[\\da-f_]+(?:\\.[\\da-f_p+-]+)?)\\b|(?:\\b\\d[\\d_]*(?:\\.[\\d_]*)?|\\B\\.\\d[\\d_]*)(?:e[+-]?\\d[\\d_]*)?[dfl]?/i,\n    'operator': {\n      pattern: /(^|[^.])(?:<<=?|>>>?=?|->|--|\\+\\+|&&|\\|\\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,\n      lookbehind: true\n    },\n    'constant': /\\b[A-Z][A-Z_\\d]+\\b/\n  });\n  Prism.languages.insertBefore('java', 'string', {\n    'triple-quoted-string': {\n      // http://openjdk.java.net/jeps/355#Description\n      pattern: /\"\"\"[ \\t]*[\\r\\n](?:(?:\"|\"\")?(?:\\\\.|[^\"\\\\]))*\"\"\"/,\n      greedy: true,\n      alias: 'string'\n    },\n    'char': {\n      pattern: /'(?:\\\\.|[^'\\\\\\r\\n]){1,6}'/,\n      greedy: true\n    }\n  });\n  Prism.languages.insertBefore('java', 'class-name', {\n    'annotation': {\n      pattern: /(^|[^.])@\\w+(?:\\s*\\.\\s*\\w+)*/,\n      lookbehind: true,\n      alias: 'punctuation'\n    },\n    'generics': {\n      pattern: /<(?:[\\w\\s,.?]|&(?!&)|<(?:[\\w\\s,.?]|&(?!&)|<(?:[\\w\\s,.?]|&(?!&)|<(?:[\\w\\s,.?]|&(?!&))*>)*>)*>)*>/,\n      inside: {\n        'class-name': className,\n        'keyword': keywords,\n        'punctuation': /[<>(),.:]/,\n        'operator': /[?&|]/\n      }\n    },\n    'import': [{\n      pattern: RegExp(/(\\bimport\\s+)/.source + classNamePrefix + /(?:[A-Z]\\w*|\\*)(?=\\s*;)/.source),\n      lookbehind: true,\n      inside: {\n        'namespace': className.inside.namespace,\n        'punctuation': /\\./,\n        'operator': /\\*/,\n        'class-name': /\\w+/\n      }\n    }, {\n      pattern: RegExp(/(\\bimport\\s+static\\s+)/.source + classNamePrefix + /(?:\\w+|\\*)(?=\\s*;)/.source),\n      lookbehind: true,\n      alias: 'static',\n      inside: {\n        'namespace': className.inside.namespace,\n        'static': /\\b\\w+$/,\n        'punctuation': /\\./,\n        'operator': /\\*/,\n        'class-name': /\\w+/\n      }\n    }],\n    'namespace': {\n      pattern: RegExp(/(\\b(?:exports|import(?:\\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\\s+)(?!<keyword>)[a-z]\\w*(?:\\.[a-z]\\w*)*\\.?/.source.replace(/<keyword>/g, function () {\n        return keywords.source;\n      })),\n      lookbehind: true,\n      inside: {\n        'punctuation': /\\./\n      }\n    }\n  });\n})(Prism);\n(function (Prism) {\n  var specialEscape = {\n    pattern: /\\\\[\\\\(){}[\\]^$+*?|.]/,\n    alias: 'escape'\n  };\n  var escape = /\\\\(?:x[\\da-fA-F]{2}|u[\\da-fA-F]{4}|u\\{[\\da-fA-F]+\\}|0[0-7]{0,2}|[123][0-7]{2}|c[a-zA-Z]|.)/;\n  var charSet = {\n    pattern: /\\.|\\\\[wsd]|\\\\p\\{[^{}]+\\}/i,\n    alias: 'class-name'\n  };\n  var charSetWithoutDot = {\n    pattern: /\\\\[wsd]|\\\\p\\{[^{}]+\\}/i,\n    alias: 'class-name'\n  };\n  var rangeChar = '(?:[^\\\\\\\\-]|' + escape.source + ')';\n  var range = RegExp(rangeChar + '-' + rangeChar);\n\n  // the name of a capturing group\n  var groupName = {\n    pattern: /(<|')[^<>']+(?=[>']$)/,\n    lookbehind: true,\n    alias: 'variable'\n  };\n  Prism.languages.regex = {\n    'char-class': {\n      pattern: /((?:^|[^\\\\])(?:\\\\\\\\)*)\\[(?:[^\\\\\\]]|\\\\[\\s\\S])*\\]/,\n      lookbehind: true,\n      inside: {\n        'char-class-negation': {\n          pattern: /(^\\[)\\^/,\n          lookbehind: true,\n          alias: 'operator'\n        },\n        'char-class-punctuation': {\n          pattern: /^\\[|\\]$/,\n          alias: 'punctuation'\n        },\n        'range': {\n          pattern: range,\n          inside: {\n            'escape': escape,\n            'range-punctuation': {\n              pattern: /-/,\n              alias: 'operator'\n            }\n          }\n        },\n        'special-escape': specialEscape,\n        'char-set': charSetWithoutDot,\n        'escape': escape\n      }\n    },\n    'special-escape': specialEscape,\n    'char-set': charSet,\n    'backreference': [{\n      // a backreference which is not an octal escape\n      pattern: /\\\\(?![123][0-7]{2})[1-9]/,\n      alias: 'keyword'\n    }, {\n      pattern: /\\\\k<[^<>']+>/,\n      alias: 'keyword',\n      inside: {\n        'group-name': groupName\n      }\n    }],\n    'anchor': {\n      pattern: /[$^]|\\\\[ABbGZz]/,\n      alias: 'function'\n    },\n    'escape': escape,\n    'group': [{\n      // https://docs.oracle.com/javase/10/docs/api/java/util/regex/Pattern.html\n      // https://docs.microsoft.com/en-us/dotnet/standard/base-types/regular-expression-language-quick-reference?view=netframework-4.7.2#grouping-constructs\n\n      // (), (?<name>), (?'name'), (?>), (?:), (?=), (?!), (?<=), (?<!), (?is-m), (?i-m:)\n      pattern: /\\((?:\\?(?:<[^<>']+>|'[^<>']+'|[>:]|<?[=!]|[idmnsuxU]+(?:-[idmnsuxU]+)?:?))?/,\n      alias: 'punctuation',\n      inside: {\n        'group-name': groupName\n      }\n    }, {\n      pattern: /\\)/,\n      alias: 'punctuation'\n    }],\n    'quantifier': {\n      pattern: /(?:[+*?]|\\{\\d+(?:,\\d*)?\\})[?+]?/,\n      alias: 'number'\n    },\n    'alternation': {\n      pattern: /\\|/,\n      alias: 'keyword'\n    }\n  };\n})(Prism);\nPrism.languages.javascript = Prism.languages.extend('clike', {\n  'class-name': [Prism.languages.clike['class-name'], {\n    pattern: /(^|[^$\\w\\xA0-\\uFFFF])(?!\\s)[_$A-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\.(?:constructor|prototype))/,\n    lookbehind: true\n  }],\n  'keyword': [{\n    pattern: /((?:^|\\})\\s*)catch\\b/,\n    lookbehind: true\n  }, {\n    pattern: /(^|[^.]|\\.\\.\\.\\s*)\\b(?:as|assert(?=\\s*\\{)|async(?=\\s*(?:function\\b|\\(|[$\\w\\xA0-\\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\\s*(?:\\{|$))|for|from(?=\\s*(?:['\"]|$))|function|(?:get|set)(?=\\s*(?:[#\\[$\\w\\xA0-\\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\\b/,\n    lookbehind: true\n  }],\n  // Allow for all non-ASCII characters (See http://stackoverflow.com/a/2008444)\n  'function': /#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*(?:\\.\\s*(?:apply|bind|call)\\s*)?\\()/,\n  'number': {\n    pattern: RegExp(/(^|[^\\w$])/.source + '(?:' + (\n    // constant\n    /NaN|Infinity/.source + '|' +\n    // binary integer\n    /0[bB][01]+(?:_[01]+)*n?/.source + '|' +\n    // octal integer\n    /0[oO][0-7]+(?:_[0-7]+)*n?/.source + '|' +\n    // hexadecimal integer\n    /0[xX][\\dA-Fa-f]+(?:_[\\dA-Fa-f]+)*n?/.source + '|' +\n    // decimal bigint\n    /\\d+(?:_\\d+)*n/.source + '|' +\n    // decimal number (integer or float) but no bigint\n    /(?:\\d+(?:_\\d+)*(?:\\.(?:\\d+(?:_\\d+)*)?)?|\\.\\d+(?:_\\d+)*)(?:[Ee][+-]?\\d+(?:_\\d+)*)?/.source) + ')' + /(?![\\w$])/.source),\n    lookbehind: true\n  },\n  'operator': /--|\\+\\+|\\*\\*=?|=>|&&=?|\\|\\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\\.{3}|\\?\\?=?|\\?\\.?|[~:]/\n});\nPrism.languages.javascript['class-name'][0].pattern = /(\\b(?:class|extends|implements|instanceof|interface|new)\\s+)[\\w.\\\\]+/;\nPrism.languages.insertBefore('javascript', 'keyword', {\n  'regex': {\n    pattern: RegExp(\n    // lookbehind\n    // eslint-disable-next-line regexp/no-dupe-characters-character-class\n    /((?:^|[^$\\w\\xA0-\\uFFFF.\"'\\])\\s]|\\b(?:return|yield))\\s*)/.source +\n    // Regex pattern:\n    // There are 2 regex patterns here. The RegExp set notation proposal added support for nested character\n    // classes if the `v` flag is present. Unfortunately, nested CCs are both context-free and incompatible\n    // with the only syntax, so we have to define 2 different regex patterns.\n    /\\//.source + '(?:' + /(?:\\[(?:[^\\]\\\\\\r\\n]|\\\\.)*\\]|\\\\.|[^/\\\\\\[\\r\\n])+\\/[dgimyus]{0,7}/.source + '|' +\n    // `v` flag syntax. This supports 3 levels of nested character classes.\n    /(?:\\[(?:[^[\\]\\\\\\r\\n]|\\\\.|\\[(?:[^[\\]\\\\\\r\\n]|\\\\.|\\[(?:[^[\\]\\\\\\r\\n]|\\\\.)*\\])*\\])*\\]|\\\\.|[^/\\\\\\[\\r\\n])+\\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source + ')' +\n    // lookahead\n    /(?=(?:\\s|\\/\\*(?:[^*]|\\*(?!\\/))*\\*\\/)*(?:$|[\\r\\n,.;:})\\]]|\\/\\/))/.source),\n    lookbehind: true,\n    greedy: true,\n    inside: {\n      'regex-source': {\n        pattern: /^(\\/)[\\s\\S]+(?=\\/[a-z]*$)/,\n        lookbehind: true,\n        alias: 'language-regex',\n        inside: Prism.languages.regex\n      },\n      'regex-delimiter': /^\\/|\\/$/,\n      'regex-flags': /^[a-z]+$/\n    }\n  },\n  // This must be declared before keyword because we use \"function\" inside the look-forward\n  'function-variable': {\n    pattern: /#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*[=:]\\s*(?:async\\s*)?(?:\\bfunction\\b|(?:\\((?:[^()]|\\([^()]*\\))*\\)|(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*)\\s*=>))/,\n    alias: 'function'\n  },\n  'parameter': [{\n    pattern: /(function(?:\\s+(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*)?\\s*\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\))/,\n    lookbehind: true,\n    inside: Prism.languages.javascript\n  }, {\n    pattern: /(^|[^$\\w\\xA0-\\uFFFF])(?!\\s)[_$a-z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*=>)/i,\n    lookbehind: true,\n    inside: Prism.languages.javascript\n  }, {\n    pattern: /(\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\)\\s*=>)/,\n    lookbehind: true,\n    inside: Prism.languages.javascript\n  }, {\n    pattern: /((?:\\b|\\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\\w\\xA0-\\uFFFF]))(?:(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*\\s*)\\(\\s*|\\]\\s*\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\)\\s*\\{)/,\n    lookbehind: true,\n    inside: Prism.languages.javascript\n  }],\n  'constant': /\\b[A-Z](?:[A-Z_]|\\dx?)*\\b/\n});\nPrism.languages.insertBefore('javascript', 'string', {\n  'hashbang': {\n    pattern: /^#!.*/,\n    greedy: true,\n    alias: 'comment'\n  },\n  'template-string': {\n    pattern: /`(?:\\\\[\\s\\S]|\\$\\{(?:[^{}]|\\{(?:[^{}]|\\{[^}]*\\})*\\})+\\}|(?!\\$\\{)[^\\\\`])*`/,\n    greedy: true,\n    inside: {\n      'template-punctuation': {\n        pattern: /^`|`$/,\n        alias: 'string'\n      },\n      'interpolation': {\n        pattern: /((?:^|[^\\\\])(?:\\\\{2})*)\\$\\{(?:[^{}]|\\{(?:[^{}]|\\{[^}]*\\})*\\})+\\}/,\n        lookbehind: true,\n        inside: {\n          'interpolation-punctuation': {\n            pattern: /^\\$\\{|\\}$/,\n            alias: 'punctuation'\n          },\n          rest: Prism.languages.javascript\n        }\n      },\n      'string': /[\\s\\S]+/\n    }\n  },\n  'string-property': {\n    pattern: /((?:^|[,{])[ \\t]*)([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\2)[^\\\\\\r\\n])*\\2(?=\\s*:)/m,\n    lookbehind: true,\n    greedy: true,\n    alias: 'property'\n  }\n});\nPrism.languages.insertBefore('javascript', 'operator', {\n  'literal-property': {\n    pattern: /((?:^|[,{])[ \\t]*)(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*:)/m,\n    lookbehind: true,\n    alias: 'property'\n  }\n});\nif (Prism.languages.markup) {\n  Prism.languages.markup.tag.addInlined('script', 'javascript');\n\n  // add attribute support for all DOM events.\n  // https://developer.mozilla.org/en-US/docs/Web/Events#Standard_events\n  Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source, 'javascript');\n}\nPrism.languages.js = Prism.languages.javascript;\n(function (Prism) {\n  var javascript = Prism.util.clone(Prism.languages.javascript);\n  var space = /(?:\\s|\\/\\/.*(?!.)|\\/\\*(?:[^*]|\\*(?!\\/))\\*\\/)/.source;\n  var braces = /(?:\\{(?:\\{(?:\\{[^{}]*\\}|[^{}])*\\}|[^{}])*\\})/.source;\n  var spread = /(?:\\{<S>*\\.{3}(?:[^{}]|<BRACES>)*\\})/.source;\n\n  /**\n   * @param {string} source\n   * @param {string} [flags]\n   */\n  function re(source, flags) {\n    source = source.replace(/<S>/g, function () {\n      return space;\n    }).replace(/<BRACES>/g, function () {\n      return braces;\n    }).replace(/<SPREAD>/g, function () {\n      return spread;\n    });\n    return RegExp(source, flags);\n  }\n  spread = re(spread).source;\n  Prism.languages.jsx = Prism.languages.extend('markup', javascript);\n  Prism.languages.jsx.tag.pattern = re(/<\\/?(?:[\\w.:-]+(?:<S>+(?:[\\w.:$-]+(?:=(?:\"(?:\\\\[\\s\\S]|[^\\\\\"])*\"|'(?:\\\\[\\s\\S]|[^\\\\'])*'|[^\\s{'\"/>=]+|<BRACES>))?|<SPREAD>))*<S>*\\/?)?>/.source);\n  Prism.languages.jsx.tag.inside['tag'].pattern = /^<\\/?[^\\s>\\/]*/;\n  Prism.languages.jsx.tag.inside['attr-value'].pattern = /=(?!\\{)(?:\"(?:\\\\[\\s\\S]|[^\\\\\"])*\"|'(?:\\\\[\\s\\S]|[^\\\\'])*'|[^\\s'\">]+)/;\n  Prism.languages.jsx.tag.inside['tag'].inside['class-name'] = /^[A-Z]\\w*(?:\\.[A-Z]\\w*)*$/;\n  Prism.languages.jsx.tag.inside['comment'] = javascript['comment'];\n  Prism.languages.insertBefore('inside', 'attr-name', {\n    'spread': {\n      pattern: re(/<SPREAD>/.source),\n      inside: Prism.languages.jsx\n    }\n  }, Prism.languages.jsx.tag);\n  Prism.languages.insertBefore('inside', 'special-attr', {\n    'script': {\n      // Allow for two levels of nesting\n      pattern: re(/=<BRACES>/.source),\n      alias: 'language-javascript',\n      inside: {\n        'script-punctuation': {\n          pattern: /^=(?=\\{)/,\n          alias: 'punctuation'\n        },\n        rest: Prism.languages.jsx\n      }\n    }\n  }, Prism.languages.jsx.tag);\n\n  // The following will handle plain text inside tags\n  var stringifyToken = function (token) {\n    if (!token) {\n      return '';\n    }\n    if (typeof token === 'string') {\n      return token;\n    }\n    if (typeof token.content === 'string') {\n      return token.content;\n    }\n    return token.content.map(stringifyToken).join('');\n  };\n  var walkTokens = function (tokens) {\n    var openedTags = [];\n    for (var i = 0; i < tokens.length; i++) {\n      var token = tokens[i];\n      var notTagNorBrace = false;\n      if (typeof token !== 'string') {\n        if (token.type === 'tag' && token.content[0] && token.content[0].type === 'tag') {\n          // We found a tag, now find its kind\n\n          if (token.content[0].content[0].content === '</') {\n            // Closing tag\n            if (openedTags.length > 0 && openedTags[openedTags.length - 1].tagName === stringifyToken(token.content[0].content[1])) {\n              // Pop matching opening tag\n              openedTags.pop();\n            }\n          } else {\n            if (token.content[token.content.length - 1].content === '/>') ; else {\n              // Opening tag\n              openedTags.push({\n                tagName: stringifyToken(token.content[0].content[1]),\n                openedBraces: 0\n              });\n            }\n          }\n        } else if (openedTags.length > 0 && token.type === 'punctuation' && token.content === '{') {\n          // Here we might have entered a JSX context inside a tag\n          openedTags[openedTags.length - 1].openedBraces++;\n        } else if (openedTags.length > 0 && openedTags[openedTags.length - 1].openedBraces > 0 && token.type === 'punctuation' && token.content === '}') {\n          // Here we might have left a JSX context inside a tag\n          openedTags[openedTags.length - 1].openedBraces--;\n        } else {\n          notTagNorBrace = true;\n        }\n      }\n      if (notTagNorBrace || typeof token === 'string') {\n        if (openedTags.length > 0 && openedTags[openedTags.length - 1].openedBraces === 0) {\n          // Here we are inside a tag, and not inside a JSX context.\n          // That's plain text: drop any tokens matched.\n          var plainText = stringifyToken(token);\n\n          // And merge text with adjacent text\n          if (i < tokens.length - 1 && (typeof tokens[i + 1] === 'string' || tokens[i + 1].type === 'plain-text')) {\n            plainText += stringifyToken(tokens[i + 1]);\n            tokens.splice(i + 1, 1);\n          }\n          if (i > 0 && (typeof tokens[i - 1] === 'string' || tokens[i - 1].type === 'plain-text')) {\n            plainText = stringifyToken(tokens[i - 1]) + plainText;\n            tokens.splice(i - 1, 1);\n            i--;\n          }\n          tokens[i] = new Prism.Token('plain-text', plainText, null, plainText);\n        }\n      }\n      if (token.content && typeof token.content !== 'string') {\n        walkTokens(token.content);\n      }\n    }\n  };\n  Prism.hooks.add('after-tokenize', function (env) {\n    if (env.language !== 'jsx' && env.language !== 'tsx') {\n      return;\n    }\n    walkTokens(env.tokens);\n  });\n})(Prism);\n\n// https://www.json.org/json-en.html\nPrism.languages.json = {\n  'property': {\n    pattern: /(^|[^\\\\])\"(?:\\\\.|[^\\\\\"\\r\\n])*\"(?=\\s*:)/,\n    lookbehind: true,\n    greedy: true\n  },\n  'string': {\n    pattern: /(^|[^\\\\])\"(?:\\\\.|[^\\\\\"\\r\\n])*\"(?!\\s*:)/,\n    lookbehind: true,\n    greedy: true\n  },\n  'comment': {\n    pattern: /\\/\\/.*|\\/\\*[\\s\\S]*?(?:\\*\\/|$)/,\n    greedy: true\n  },\n  'number': /-?\\b\\d+(?:\\.\\d+)?(?:e[+-]?\\d+)?\\b/i,\n  'punctuation': /[{}[\\],]/,\n  'operator': /:/,\n  'boolean': /\\b(?:false|true)\\b/,\n  'null': {\n    pattern: /\\bnull\\b/,\n    alias: 'keyword'\n  }\n};\nPrism.languages.webmanifest = Prism.languages.json;\n(function (Prism) {\n  Prism.languages.kotlin = Prism.languages.extend('clike', {\n    'keyword': {\n      // The lookbehind prevents wrong highlighting of e.g. kotlin.properties.get\n      pattern: /(^|[^.])\\b(?:abstract|actual|annotation|as|break|by|catch|class|companion|const|constructor|continue|crossinline|data|do|dynamic|else|enum|expect|external|final|finally|for|fun|get|if|import|in|infix|init|inline|inner|interface|internal|is|lateinit|noinline|null|object|open|operator|out|override|package|private|protected|public|reified|return|sealed|set|super|suspend|tailrec|this|throw|to|try|typealias|val|var|vararg|when|where|while)\\b/,\n      lookbehind: true\n    },\n    'function': [{\n      pattern: /(?:`[^\\r\\n`]+`|\\b\\w+)(?=\\s*\\()/,\n      greedy: true\n    }, {\n      pattern: /(\\.)(?:`[^\\r\\n`]+`|\\w+)(?=\\s*\\{)/,\n      lookbehind: true,\n      greedy: true\n    }],\n    'number': /\\b(?:0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*|0[bB][01]+(?:_[01]+)*|\\d+(?:_\\d+)*(?:\\.\\d+(?:_\\d+)*)?(?:[eE][+-]?\\d+(?:_\\d+)*)?[fFL]?)\\b/,\n    'operator': /\\+[+=]?|-[-=>]?|==?=?|!(?:!|==?)?|[\\/*%<>]=?|[?:]:?|\\.\\.|&&|\\|\\||\\b(?:and|inv|or|shl|shr|ushr|xor)\\b/\n  });\n  delete Prism.languages.kotlin['class-name'];\n  var interpolationInside = {\n    'interpolation-punctuation': {\n      pattern: /^\\$\\{?|\\}$/,\n      alias: 'punctuation'\n    },\n    'expression': {\n      pattern: /[\\s\\S]+/,\n      inside: Prism.languages.kotlin\n    }\n  };\n  Prism.languages.insertBefore('kotlin', 'string', {\n    // https://kotlinlang.org/spec/expressions.html#string-interpolation-expressions\n    'string-literal': [{\n      pattern: /\"\"\"(?:[^$]|\\$(?:(?!\\{)|\\{[^{}]*\\}))*?\"\"\"/,\n      alias: 'multiline',\n      inside: {\n        'interpolation': {\n          pattern: /\\$(?:[a-z_]\\w*|\\{[^{}]*\\})/i,\n          inside: interpolationInside\n        },\n        'string': /[\\s\\S]+/\n      }\n    }, {\n      pattern: /\"(?:[^\"\\\\\\r\\n$]|\\\\.|\\$(?:(?!\\{)|\\{[^{}]*\\}))*\"/,\n      alias: 'singleline',\n      inside: {\n        'interpolation': {\n          pattern: /((?:^|[^\\\\])(?:\\\\{2})*)\\$(?:[a-z_]\\w*|\\{[^{}]*\\})/i,\n          lookbehind: true,\n          inside: interpolationInside\n        },\n        'string': /[\\s\\S]+/\n      }\n    }],\n    'char': {\n      // https://kotlinlang.org/spec/expressions.html#character-literals\n      pattern: /'(?:[^'\\\\\\r\\n]|\\\\(?:.|u[a-fA-F0-9]{0,4}))'/,\n      greedy: true\n    }\n  });\n  delete Prism.languages.kotlin['string'];\n  Prism.languages.insertBefore('kotlin', 'keyword', {\n    'annotation': {\n      pattern: /\\B@(?:\\w+:)?(?:[A-Z]\\w*|\\[[^\\]]+\\])/,\n      alias: 'builtin'\n    }\n  });\n  Prism.languages.insertBefore('kotlin', 'function', {\n    'label': {\n      pattern: /\\b\\w+@|@\\w+\\b/,\n      alias: 'symbol'\n    }\n  });\n  Prism.languages.kt = Prism.languages.kotlin;\n  Prism.languages.kts = Prism.languages.kotlin;\n})(Prism);\n\n/* FIXME :\n :extend() is not handled specifically : its highlighting is buggy.\n Mixin usage must be inside a ruleset to be highlighted.\n At-rules (e.g. import) containing interpolations are buggy.\n Detached rulesets are highlighted as at-rules.\n A comment before a mixin usage prevents the latter to be properly highlighted.\n */\n\nPrism.languages.less = Prism.languages.extend('css', {\n  'comment': [/\\/\\*[\\s\\S]*?\\*\\//, {\n    pattern: /(^|[^\\\\])\\/\\/.*/,\n    lookbehind: true\n  }],\n  'atrule': {\n    pattern: /@[\\w-](?:\\((?:[^(){}]|\\([^(){}]*\\))*\\)|[^(){};\\s]|\\s+(?!\\s))*?(?=\\s*\\{)/,\n    inside: {\n      'punctuation': /[:()]/\n    }\n  },\n  // selectors and mixins are considered the same\n  'selector': {\n    pattern: /(?:@\\{[\\w-]+\\}|[^{};\\s@])(?:@\\{[\\w-]+\\}|\\((?:[^(){}]|\\([^(){}]*\\))*\\)|[^(){};@\\s]|\\s+(?!\\s))*?(?=\\s*\\{)/,\n    inside: {\n      // mixin parameters\n      'variable': /@+[\\w-]+/\n    }\n  },\n  'property': /(?:@\\{[\\w-]+\\}|[\\w-])+(?:\\+_?)?(?=\\s*:)/,\n  'operator': /[+\\-*\\/]/\n});\nPrism.languages.insertBefore('less', 'property', {\n  'variable': [\n  // Variable declaration (the colon must be consumed!)\n  {\n    pattern: /@[\\w-]+\\s*:/,\n    inside: {\n      'punctuation': /:/\n    }\n  },\n  // Variable usage\n  /@@?[\\w-]+/],\n  'mixin-usage': {\n    pattern: /([{;]\\s*)[.#](?!\\d)[\\w-].*?(?=[(;])/,\n    lookbehind: true,\n    alias: 'function'\n  }\n});\nPrism.languages.lua = {\n  'comment': /^#!.+|--(?:\\[(=*)\\[[\\s\\S]*?\\]\\1\\]|.*)/m,\n  // \\z may be used to skip the following space\n  'string': {\n    pattern: /([\"'])(?:(?!\\1)[^\\\\\\r\\n]|\\\\z(?:\\r\\n|\\s)|\\\\(?:\\r\\n|[^z]))*\\1|\\[(=*)\\[[\\s\\S]*?\\]\\2\\]/,\n    greedy: true\n  },\n  'number': /\\b0x[a-f\\d]+(?:\\.[a-f\\d]*)?(?:p[+-]?\\d+)?\\b|\\b\\d+(?:\\.\\B|(?:\\.\\d*)?(?:e[+-]?\\d+)?\\b)|\\B\\.\\d+(?:e[+-]?\\d+)?\\b/i,\n  'keyword': /\\b(?:and|break|do|else|elseif|end|false|for|function|goto|if|in|local|nil|not|or|repeat|return|then|true|until|while)\\b/,\n  'function': /(?!\\d)\\w+(?=\\s*(?:[({]))/,\n  'operator': [/[-+*%^&|#]|\\/\\/?|<[<=]?|>[>=]?|[=~]=?/, {\n    // Match \"..\" but don't break \"...\"\n    pattern: /(^|[^.])\\.\\.(?!\\.)/,\n    lookbehind: true\n  }],\n  'punctuation': /[\\[\\](){},;]|\\.+|:+/\n};\nPrism.languages.makefile = {\n  'comment': {\n    pattern: /(^|[^\\\\])#(?:\\\\(?:\\r\\n|[\\s\\S])|[^\\\\\\r\\n])*/,\n    lookbehind: true\n  },\n  'string': {\n    pattern: /([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\1)[^\\\\\\r\\n])*\\1/,\n    greedy: true\n  },\n  'builtin-target': {\n    pattern: /\\.[A-Z][^:#=\\s]+(?=\\s*:(?!=))/,\n    alias: 'builtin'\n  },\n  'target': {\n    pattern: /^(?:[^:=\\s]|[ \\t]+(?![\\s:]))+(?=\\s*:(?!=))/m,\n    alias: 'symbol',\n    inside: {\n      'variable': /\\$+(?:(?!\\$)[^(){}:#=\\s]+|(?=[({]))/\n    }\n  },\n  'variable': /\\$+(?:(?!\\$)[^(){}:#=\\s]+|\\([@*%<^+?][DF]\\)|(?=[({]))/,\n  // Directives\n  'keyword': /-include\\b|\\b(?:define|else|endef|endif|export|ifn?def|ifn?eq|include|override|private|sinclude|undefine|unexport|vpath)\\b/,\n  'function': {\n    pattern: /(\\()(?:abspath|addsuffix|and|basename|call|dir|error|eval|file|filter(?:-out)?|findstring|firstword|flavor|foreach|guile|if|info|join|lastword|load|notdir|or|origin|patsubst|realpath|shell|sort|strip|subst|suffix|value|warning|wildcard|word(?:list|s)?)(?=[ \\t])/,\n    lookbehind: true\n  },\n  'operator': /(?:::|[?:+!])?=|[|@]/,\n  'punctuation': /[:;(){}]/\n};\n(function (Prism) {\n  // https://yaml.org/spec/1.2/spec.html#c-ns-anchor-property\n  // https://yaml.org/spec/1.2/spec.html#c-ns-alias-node\n  var anchorOrAlias = /[*&][^\\s[\\]{},]+/;\n  // https://yaml.org/spec/1.2/spec.html#c-ns-tag-property\n  var tag = /!(?:<[\\w\\-%#;/?:@&=+$,.!~*'()[\\]]+>|(?:[a-zA-Z\\d-]*!)?[\\w\\-%#;/?:@&=+$.~*'()]+)?/;\n  // https://yaml.org/spec/1.2/spec.html#c-ns-properties(n,c)\n  var properties = '(?:' + tag.source + '(?:[ \\t]+' + anchorOrAlias.source + ')?|' + anchorOrAlias.source + '(?:[ \\t]+' + tag.source + ')?)';\n  // https://yaml.org/spec/1.2/spec.html#ns-plain(n,c)\n  // This is a simplified version that doesn't support \"#\" and multiline keys\n  // All these long scarry character classes are simplified versions of YAML's characters\n  var plainKey = /(?:[^\\s\\x00-\\x08\\x0e-\\x1f!\"#%&'*,\\-:>?@[\\]`{|}\\x7f-\\x84\\x86-\\x9f\\ud800-\\udfff\\ufffe\\uffff]|[?:-]<PLAIN>)(?:[ \\t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g, function () {\n    return /[^\\s\\x00-\\x08\\x0e-\\x1f,[\\]{}\\x7f-\\x84\\x86-\\x9f\\ud800-\\udfff\\ufffe\\uffff]/.source;\n  });\n  var string = /\"(?:[^\"\\\\\\r\\n]|\\\\.)*\"|'(?:[^'\\\\\\r\\n]|\\\\.)*'/.source;\n\n  /**\n   *\n   * @param {string} value\n   * @param {string} [flags]\n   * @returns {RegExp}\n   */\n  function createValuePattern(value, flags) {\n    flags = (flags || '').replace(/m/g, '') + 'm'; // add m flag\n    var pattern = /([:\\-,[{]\\s*(?:\\s<<prop>>[ \\t]+)?)(?:<<value>>)(?=[ \\t]*(?:$|,|\\]|\\}|(?:[\\r\\n]\\s*)?#))/.source.replace(/<<prop>>/g, function () {\n      return properties;\n    }).replace(/<<value>>/g, function () {\n      return value;\n    });\n    return RegExp(pattern, flags);\n  }\n  Prism.languages.yaml = {\n    'scalar': {\n      pattern: RegExp(/([\\-:]\\s*(?:\\s<<prop>>[ \\t]+)?[|>])[ \\t]*(?:((?:\\r?\\n|\\r)[ \\t]+)\\S[^\\r\\n]*(?:\\2[^\\r\\n]+)*)/.source.replace(/<<prop>>/g, function () {\n        return properties;\n      })),\n      lookbehind: true,\n      alias: 'string'\n    },\n    'comment': /#.*/,\n    'key': {\n      pattern: RegExp(/((?:^|[:\\-,[{\\r\\n?])[ \\t]*(?:<<prop>>[ \\t]+)?)<<key>>(?=\\s*:\\s)/.source.replace(/<<prop>>/g, function () {\n        return properties;\n      }).replace(/<<key>>/g, function () {\n        return '(?:' + plainKey + '|' + string + ')';\n      })),\n      lookbehind: true,\n      greedy: true,\n      alias: 'atrule'\n    },\n    'directive': {\n      pattern: /(^[ \\t]*)%.+/m,\n      lookbehind: true,\n      alias: 'important'\n    },\n    'datetime': {\n      pattern: createValuePattern(/\\d{4}-\\d\\d?-\\d\\d?(?:[tT]|[ \\t]+)\\d\\d?:\\d{2}:\\d{2}(?:\\.\\d*)?(?:[ \\t]*(?:Z|[-+]\\d\\d?(?::\\d{2})?))?|\\d{4}-\\d{2}-\\d{2}|\\d\\d?:\\d{2}(?::\\d{2}(?:\\.\\d*)?)?/.source),\n      lookbehind: true,\n      alias: 'number'\n    },\n    'boolean': {\n      pattern: createValuePattern(/false|true/.source, 'i'),\n      lookbehind: true,\n      alias: 'important'\n    },\n    'null': {\n      pattern: createValuePattern(/null|~/.source, 'i'),\n      lookbehind: true,\n      alias: 'important'\n    },\n    'string': {\n      pattern: createValuePattern(string),\n      lookbehind: true,\n      greedy: true\n    },\n    'number': {\n      pattern: createValuePattern(/[+-]?(?:0x[\\da-f]+|0o[0-7]+|(?:\\d+(?:\\.\\d*)?|\\.\\d+)(?:e[+-]?\\d+)?|\\.inf|\\.nan)/.source, 'i'),\n      lookbehind: true\n    },\n    'tag': tag,\n    'important': anchorOrAlias,\n    'punctuation': /---|[:[\\]{}\\-,|>?]|\\.\\.\\./\n  };\n  Prism.languages.yml = Prism.languages.yaml;\n})(Prism);\n(function (Prism) {\n  // Allow only one line break\n  var inner = /(?:\\\\.|[^\\\\\\n\\r]|(?:\\n|\\r\\n?)(?![\\r\\n]))/.source;\n\n  /**\n   * This function is intended for the creation of the bold or italic pattern.\n   *\n   * This also adds a lookbehind group to the given pattern to ensure that the pattern is not backslash-escaped.\n   *\n   * _Note:_ Keep in mind that this adds a capturing group.\n   *\n   * @param {string} pattern\n   * @returns {RegExp}\n   */\n  function createInline(pattern) {\n    pattern = pattern.replace(/<inner>/g, function () {\n      return inner;\n    });\n    return RegExp(/((?:^|[^\\\\])(?:\\\\{2})*)/.source + '(?:' + pattern + ')');\n  }\n  var tableCell = /(?:\\\\.|``(?:[^`\\r\\n]|`(?!`))+``|`[^`\\r\\n]+`|[^\\\\|\\r\\n`])+/.source;\n  var tableRow = /\\|?__(?:\\|__)+\\|?(?:(?:\\n|\\r\\n?)|(?![\\s\\S]))/.source.replace(/__/g, function () {\n    return tableCell;\n  });\n  var tableLine = /\\|?[ \\t]*:?-{3,}:?[ \\t]*(?:\\|[ \\t]*:?-{3,}:?[ \\t]*)+\\|?(?:\\n|\\r\\n?)/.source;\n  Prism.languages.markdown = Prism.languages.extend('markup', {});\n  Prism.languages.insertBefore('markdown', 'prolog', {\n    'front-matter-block': {\n      pattern: /(^(?:\\s*[\\r\\n])?)---(?!.)[\\s\\S]*?[\\r\\n]---(?!.)/,\n      lookbehind: true,\n      greedy: true,\n      inside: {\n        'punctuation': /^---|---$/,\n        'front-matter': {\n          pattern: /\\S+(?:\\s+\\S+)*/,\n          alias: ['yaml', 'language-yaml'],\n          inside: Prism.languages.yaml\n        }\n      }\n    },\n    'blockquote': {\n      // > ...\n      pattern: /^>(?:[\\t ]*>)*/m,\n      alias: 'punctuation'\n    },\n    'table': {\n      pattern: RegExp('^' + tableRow + tableLine + '(?:' + tableRow + ')*', 'm'),\n      inside: {\n        'table-data-rows': {\n          pattern: RegExp('^(' + tableRow + tableLine + ')(?:' + tableRow + ')*$'),\n          lookbehind: true,\n          inside: {\n            'table-data': {\n              pattern: RegExp(tableCell),\n              inside: Prism.languages.markdown\n            },\n            'punctuation': /\\|/\n          }\n        },\n        'table-line': {\n          pattern: RegExp('^(' + tableRow + ')' + tableLine + '$'),\n          lookbehind: true,\n          inside: {\n            'punctuation': /\\||:?-{3,}:?/\n          }\n        },\n        'table-header-row': {\n          pattern: RegExp('^' + tableRow + '$'),\n          inside: {\n            'table-header': {\n              pattern: RegExp(tableCell),\n              alias: 'important',\n              inside: Prism.languages.markdown\n            },\n            'punctuation': /\\|/\n          }\n        }\n      }\n    },\n    'code': [{\n      // Prefixed by 4 spaces or 1 tab and preceded by an empty line\n      pattern: /((?:^|\\n)[ \\t]*\\n|(?:^|\\r\\n?)[ \\t]*\\r\\n?)(?: {4}|\\t).+(?:(?:\\n|\\r\\n?)(?: {4}|\\t).+)*/,\n      lookbehind: true,\n      alias: 'keyword'\n    }, {\n      // ```optional language\n      // code block\n      // ```\n      pattern: /^```[\\s\\S]*?^```$/m,\n      greedy: true,\n      inside: {\n        'code-block': {\n          pattern: /^(```.*(?:\\n|\\r\\n?))[\\s\\S]+?(?=(?:\\n|\\r\\n?)^```$)/m,\n          lookbehind: true\n        },\n        'code-language': {\n          pattern: /^(```).+/,\n          lookbehind: true\n        },\n        'punctuation': /```/\n      }\n    }],\n    'title': [{\n      // title 1\n      // =======\n\n      // title 2\n      // -------\n      pattern: /\\S.*(?:\\n|\\r\\n?)(?:==+|--+)(?=[ \\t]*$)/m,\n      alias: 'important',\n      inside: {\n        punctuation: /==+$|--+$/\n      }\n    }, {\n      // # title 1\n      // ###### title 6\n      pattern: /(^\\s*)#.+/m,\n      lookbehind: true,\n      alias: 'important',\n      inside: {\n        punctuation: /^#+|#+$/\n      }\n    }],\n    'hr': {\n      // ***\n      // ---\n      // * * *\n      // -----------\n      pattern: /(^\\s*)([*-])(?:[\\t ]*\\2){2,}(?=\\s*$)/m,\n      lookbehind: true,\n      alias: 'punctuation'\n    },\n    'list': {\n      // * item\n      // + item\n      // - item\n      // 1. item\n      pattern: /(^\\s*)(?:[*+-]|\\d+\\.)(?=[\\t ].)/m,\n      lookbehind: true,\n      alias: 'punctuation'\n    },\n    'url-reference': {\n      // [id]: http://example.com \"Optional title\"\n      // [id]: http://example.com 'Optional title'\n      // [id]: http://example.com (Optional title)\n      // [id]: <http://example.com> \"Optional title\"\n      pattern: /!?\\[[^\\]]+\\]:[\\t ]+(?:\\S+|<(?:\\\\.|[^>\\\\])+>)(?:[\\t ]+(?:\"(?:\\\\.|[^\"\\\\])*\"|'(?:\\\\.|[^'\\\\])*'|\\((?:\\\\.|[^)\\\\])*\\)))?/,\n      inside: {\n        'variable': {\n          pattern: /^(!?\\[)[^\\]]+/,\n          lookbehind: true\n        },\n        'string': /(?:\"(?:\\\\.|[^\"\\\\])*\"|'(?:\\\\.|[^'\\\\])*'|\\((?:\\\\.|[^)\\\\])*\\))$/,\n        'punctuation': /^[\\[\\]!:]|[<>]/\n      },\n      alias: 'url'\n    },\n    'bold': {\n      // **strong**\n      // __strong__\n\n      // allow one nested instance of italic text using the same delimiter\n      pattern: createInline(/\\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\\b|\\*\\*(?:(?!\\*)<inner>|\\*(?:(?!\\*)<inner>)+\\*)+\\*\\*/.source),\n      lookbehind: true,\n      greedy: true,\n      inside: {\n        'content': {\n          pattern: /(^..)[\\s\\S]+(?=..$)/,\n          lookbehind: true,\n          inside: {} // see below\n        },\n        'punctuation': /\\*\\*|__/\n      }\n    },\n    'italic': {\n      // *em*\n      // _em_\n\n      // allow one nested instance of bold text using the same delimiter\n      pattern: createInline(/\\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\\b|\\*(?:(?!\\*)<inner>|\\*\\*(?:(?!\\*)<inner>)+\\*\\*)+\\*/.source),\n      lookbehind: true,\n      greedy: true,\n      inside: {\n        'content': {\n          pattern: /(^.)[\\s\\S]+(?=.$)/,\n          lookbehind: true,\n          inside: {} // see below\n        },\n        'punctuation': /[*_]/\n      }\n    },\n    'strike': {\n      // ~~strike through~~\n      // ~strike~\n      // eslint-disable-next-line regexp/strict\n      pattern: createInline(/(~~?)(?:(?!~)<inner>)+\\2/.source),\n      lookbehind: true,\n      greedy: true,\n      inside: {\n        'content': {\n          pattern: /(^~~?)[\\s\\S]+(?=\\1$)/,\n          lookbehind: true,\n          inside: {} // see below\n        },\n        'punctuation': /~~?/\n      }\n    },\n    'code-snippet': {\n      // `code`\n      // ``code``\n      pattern: /(^|[^\\\\`])(?:``[^`\\r\\n]+(?:`[^`\\r\\n]+)*``(?!`)|`[^`\\r\\n]+`(?!`))/,\n      lookbehind: true,\n      greedy: true,\n      alias: ['code', 'keyword']\n    },\n    'url': {\n      // [example](http://example.com \"Optional title\")\n      // [example][id]\n      // [example] [id]\n      pattern: createInline(/!?\\[(?:(?!\\])<inner>)+\\](?:\\([^\\s)]+(?:[\\t ]+\"(?:\\\\.|[^\"\\\\])*\")?\\)|[ \\t]?\\[(?:(?!\\])<inner>)+\\])/.source),\n      lookbehind: true,\n      greedy: true,\n      inside: {\n        'operator': /^!/,\n        'content': {\n          pattern: /(^\\[)[^\\]]+(?=\\])/,\n          lookbehind: true,\n          inside: {} // see below\n        },\n        'variable': {\n          pattern: /(^\\][ \\t]?\\[)[^\\]]+(?=\\]$)/,\n          lookbehind: true\n        },\n        'url': {\n          pattern: /(^\\]\\()[^\\s)]+/,\n          lookbehind: true\n        },\n        'string': {\n          pattern: /(^[ \\t]+)\"(?:\\\\.|[^\"\\\\])*\"(?=\\)$)/,\n          lookbehind: true\n        }\n      }\n    }\n  });\n  ['url', 'bold', 'italic', 'strike'].forEach(function (token) {\n    ['url', 'bold', 'italic', 'strike', 'code-snippet'].forEach(function (inside) {\n      if (token !== inside) {\n        Prism.languages.markdown[token].inside.content.inside[inside] = Prism.languages.markdown[inside];\n      }\n    });\n  });\n  Prism.hooks.add('after-tokenize', function (env) {\n    if (env.language !== 'markdown' && env.language !== 'md') {\n      return;\n    }\n    function walkTokens(tokens) {\n      if (!tokens || typeof tokens === 'string') {\n        return;\n      }\n      for (var i = 0, l = tokens.length; i < l; i++) {\n        var token = tokens[i];\n        if (token.type !== 'code') {\n          walkTokens(token.content);\n          continue;\n        }\n\n        /*\n         * Add the correct `language-xxxx` class to this code block. Keep in mind that the `code-language` token\n         * is optional. But the grammar is defined so that there is only one case we have to handle:\n         *\n         * token.content = [\n         *     <span class=\"punctuation\">```</span>,\n         *     <span class=\"code-language\">xxxx</span>,\n         *     '\\n', // exactly one new lines (\\r or \\n or \\r\\n)\n         *     <span class=\"code-block\">...</span>,\n         *     '\\n', // exactly one new lines again\n         *     <span class=\"punctuation\">```</span>\n         * ];\n         */\n\n        var codeLang = token.content[1];\n        var codeBlock = token.content[3];\n        if (codeLang && codeBlock && codeLang.type === 'code-language' && codeBlock.type === 'code-block' && typeof codeLang.content === 'string') {\n          // this might be a language that Prism does not support\n\n          // do some replacements to support C++, C#, and F#\n          var lang = codeLang.content.replace(/\\b#/g, 'sharp').replace(/\\b\\+\\+/g, 'pp');\n          // only use the first word\n          lang = (/[a-z][\\w-]*/i.exec(lang) || [''])[0].toLowerCase();\n          var alias = 'language-' + lang;\n\n          // add alias\n          if (!codeBlock.alias) {\n            codeBlock.alias = [alias];\n          } else if (typeof codeBlock.alias === 'string') {\n            codeBlock.alias = [codeBlock.alias, alias];\n          } else {\n            codeBlock.alias.push(alias);\n          }\n        }\n      }\n    }\n    walkTokens(env.tokens);\n  });\n  Prism.hooks.add('wrap', function (env) {\n    if (env.type !== 'code-block') {\n      return;\n    }\n    var codeLang = '';\n    for (var i = 0, l = env.classes.length; i < l; i++) {\n      var cls = env.classes[i];\n      var match = /language-(.+)/.exec(cls);\n      if (match) {\n        codeLang = match[1];\n        break;\n      }\n    }\n    var grammar = Prism.languages[codeLang];\n    if (!grammar) {\n      if (codeLang && codeLang !== 'none' && Prism.plugins.autoloader) {\n        var id = 'md-' + new Date().valueOf() + '-' + Math.floor(Math.random() * 1e16);\n        env.attributes['id'] = id;\n        Prism.plugins.autoloader.loadLanguages(codeLang, function () {\n          var ele = document.getElementById(id);\n          if (ele) {\n            ele.innerHTML = Prism.highlight(ele.textContent, Prism.languages[codeLang], codeLang);\n          }\n        });\n      }\n    } else {\n      env.content = Prism.highlight(textContent(env.content), grammar, codeLang);\n    }\n  });\n  var tagPattern = RegExp(Prism.languages.markup.tag.pattern.source, 'gi');\n\n  /**\n   * A list of known entity names.\n   *\n   * This will always be incomplete to save space. The current list is the one used by lowdash's unescape function.\n   *\n   * @see {@link https://github.com/lodash/lodash/blob/2da024c3b4f9947a48517639de7560457cd4ec6c/unescape.js#L2}\n   */\n  var KNOWN_ENTITY_NAMES = {\n    'amp': '&',\n    'lt': '<',\n    'gt': '>',\n    'quot': '\"'\n  };\n\n  // IE 11 doesn't support `String.fromCodePoint`\n  var fromCodePoint = String.fromCodePoint || String.fromCharCode;\n\n  /**\n   * Returns the text content of a given HTML source code string.\n   *\n   * @param {string} html\n   * @returns {string}\n   */\n  function textContent(html) {\n    // remove all tags\n    var text = html.replace(tagPattern, '');\n\n    // decode known entities\n    text = text.replace(/&(\\w{1,8}|#x?[\\da-f]{1,8});/gi, function (m, code) {\n      code = code.toLowerCase();\n      if (code[0] === '#') {\n        var value;\n        if (code[1] === 'x') {\n          value = parseInt(code.slice(2), 16);\n        } else {\n          value = Number(code.slice(1));\n        }\n        return fromCodePoint(value);\n      } else {\n        var known = KNOWN_ENTITY_NAMES[code];\n        if (known) {\n          return known;\n        }\n\n        // unable to decode\n        return m;\n      }\n    });\n    return text;\n  }\n  Prism.languages.md = Prism.languages.markdown;\n})(Prism);\nPrism.languages.objectivec = Prism.languages.extend('c', {\n  'string': {\n    pattern: /@?\"(?:\\\\(?:\\r\\n|[\\s\\S])|[^\"\\\\\\r\\n])*\"/,\n    greedy: true\n  },\n  'keyword': /\\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\\b/,\n  'operator': /-[->]?|\\+\\+?|!=?|<<?=?|>>?=?|==?|&&?|\\|\\|?|[~^%?*\\/@]/\n});\ndelete Prism.languages.objectivec['class-name'];\nPrism.languages.objc = Prism.languages.objectivec;\n(function (Prism) {\n  var brackets = /(?:\\((?:[^()\\\\]|\\\\[\\s\\S])*\\)|\\{(?:[^{}\\\\]|\\\\[\\s\\S])*\\}|\\[(?:[^[\\]\\\\]|\\\\[\\s\\S])*\\]|<(?:[^<>\\\\]|\\\\[\\s\\S])*>)/.source;\n  Prism.languages.perl = {\n    'comment': [{\n      // POD\n      pattern: /(^\\s*)=\\w[\\s\\S]*?=cut.*/m,\n      lookbehind: true,\n      greedy: true\n    }, {\n      pattern: /(^|[^\\\\$])#.*/,\n      lookbehind: true,\n      greedy: true\n    }],\n    // TODO Could be nice to handle Heredoc too.\n    'string': [{\n      pattern: RegExp(/\\b(?:q|qq|qw|qx)(?![a-zA-Z0-9])\\s*/.source + '(?:' + [\n      // q/.../\n      /([^a-zA-Z0-9\\s{(\\[<])(?:(?!\\1)[^\\\\]|\\\\[\\s\\S])*\\1/.source,\n      // q a...a\n      // eslint-disable-next-line regexp/strict\n      /([a-zA-Z0-9])(?:(?!\\2)[^\\\\]|\\\\[\\s\\S])*\\2/.source,\n      // q(...)\n      // q{...}\n      // q[...]\n      // q<...>\n      brackets].join('|') + ')'),\n      greedy: true\n    },\n    // \"...\", `...`\n    {\n      pattern: /(\"|`)(?:(?!\\1)[^\\\\]|\\\\[\\s\\S])*\\1/,\n      greedy: true\n    },\n    // '...'\n    // FIXME Multi-line single-quoted strings are not supported as they would break variables containing '\n    {\n      pattern: /'(?:[^'\\\\\\r\\n]|\\\\.)*'/,\n      greedy: true\n    }],\n    'regex': [{\n      pattern: RegExp(/\\b(?:m|qr)(?![a-zA-Z0-9])\\s*/.source + '(?:' + [\n      // m/.../\n      /([^a-zA-Z0-9\\s{(\\[<])(?:(?!\\1)[^\\\\]|\\\\[\\s\\S])*\\1/.source,\n      // m a...a\n      // eslint-disable-next-line regexp/strict\n      /([a-zA-Z0-9])(?:(?!\\2)[^\\\\]|\\\\[\\s\\S])*\\2/.source,\n      // m(...)\n      // m{...}\n      // m[...]\n      // m<...>\n      brackets].join('|') + ')' + /[msixpodualngc]*/.source),\n      greedy: true\n    },\n    // The lookbehinds prevent -s from breaking\n    {\n      pattern: RegExp(/(^|[^-])\\b(?:s|tr|y)(?![a-zA-Z0-9])\\s*/.source + '(?:' + [\n      // s/.../.../\n      // eslint-disable-next-line regexp/strict\n      /([^a-zA-Z0-9\\s{(\\[<])(?:(?!\\2)[^\\\\]|\\\\[\\s\\S])*\\2(?:(?!\\2)[^\\\\]|\\\\[\\s\\S])*\\2/.source,\n      // s a...a...a\n      // eslint-disable-next-line regexp/strict\n      /([a-zA-Z0-9])(?:(?!\\3)[^\\\\]|\\\\[\\s\\S])*\\3(?:(?!\\3)[^\\\\]|\\\\[\\s\\S])*\\3/.source,\n      // s(...)(...)\n      // s{...}{...}\n      // s[...][...]\n      // s<...><...>\n      // s(...)[...]\n      brackets + /\\s*/.source + brackets].join('|') + ')' + /[msixpodualngcer]*/.source),\n      lookbehind: true,\n      greedy: true\n    },\n    // /.../\n    // The look-ahead tries to prevent two divisions on\n    // the same line from being highlighted as regex.\n    // This does not support multi-line regex.\n    {\n      pattern: /\\/(?:[^\\/\\\\\\r\\n]|\\\\.)*\\/[msixpodualngc]*(?=\\s*(?:$|[\\r\\n,.;})&|\\-+*~<>!?^]|(?:and|cmp|eq|ge|gt|le|lt|ne|not|or|x|xor)\\b))/,\n      greedy: true\n    }],\n    // FIXME Not sure about the handling of ::, ', and #\n    'variable': [\n    // ${^POSTMATCH}\n    /[&*$@%]\\{\\^[A-Z]+\\}/,\n    // $^V\n    /[&*$@%]\\^[A-Z_]/,\n    // ${...}\n    /[&*$@%]#?(?=\\{)/,\n    // $foo\n    /[&*$@%]#?(?:(?:::)*'?(?!\\d)[\\w$]+(?![\\w$]))+(?:::)*/,\n    // $1\n    /[&*$@%]\\d+/,\n    // $_, @_, %!\n    // The negative lookahead prevents from breaking the %= operator\n    /(?!%=)[$@%][!\"#$%&'()*+,\\-.\\/:;<=>?@[\\\\\\]^_`{|}~]/],\n    'filehandle': {\n      // <>, <FOO>, _\n      pattern: /<(?![<=])\\S*?>|\\b_\\b/,\n      alias: 'symbol'\n    },\n    'v-string': {\n      // v1.2, 1.2.3\n      pattern: /v\\d+(?:\\.\\d+)*|\\d+(?:\\.\\d+){2,}/,\n      alias: 'string'\n    },\n    'function': {\n      pattern: /(\\bsub[ \\t]+)\\w+/,\n      lookbehind: true\n    },\n    'keyword': /\\b(?:any|break|continue|default|delete|die|do|else|elsif|eval|for|foreach|given|goto|if|last|local|my|next|our|package|print|redo|require|return|say|state|sub|switch|undef|unless|until|use|when|while)\\b/,\n    'number': /\\b(?:0x[\\dA-Fa-f](?:_?[\\dA-Fa-f])*|0b[01](?:_?[01])*|(?:(?:\\d(?:_?\\d)*)?\\.)?\\d(?:_?\\d)*(?:[Ee][+-]?\\d+)?)\\b/,\n    'operator': /-[rwxoRWXOezsfdlpSbctugkTBMAC]\\b|\\+[+=]?|-[-=>]?|\\*\\*?=?|\\/\\/?=?|=[=~>]?|~[~=]?|\\|\\|?=?|&&?=?|<(?:=>?|<=?)?|>>?=?|![~=]?|[%^]=?|\\.(?:=|\\.\\.?)?|[\\\\?]|\\bx(?:=|\\b)|\\b(?:and|cmp|eq|ge|gt|le|lt|ne|not|or|xor)\\b/,\n    'punctuation': /[{}[\\];(),:]/\n  };\n})(Prism);\n(function (Prism) {\n  /**\n   * Returns the placeholder for the given language id and index.\n   *\n   * @param {string} language\n   * @param {string|number} index\n   * @returns {string}\n   */\n  function getPlaceholder(language, index) {\n    return '___' + language.toUpperCase() + index + '___';\n  }\n  Object.defineProperties(Prism.languages['markup-templating'] = {}, {\n    buildPlaceholders: {\n      /**\n       * Tokenize all inline templating expressions matching `placeholderPattern`.\n       *\n       * If `replaceFilter` is provided, only matches of `placeholderPattern` for which `replaceFilter` returns\n       * `true` will be replaced.\n       *\n       * @param {object} env The environment of the `before-tokenize` hook.\n       * @param {string} language The language id.\n       * @param {RegExp} placeholderPattern The matches of this pattern will be replaced by placeholders.\n       * @param {(match: string) => boolean} [replaceFilter]\n       */\n      value: function (env, language, placeholderPattern, replaceFilter) {\n        if (env.language !== language) {\n          return;\n        }\n        var tokenStack = env.tokenStack = [];\n        env.code = env.code.replace(placeholderPattern, function (match) {\n          if (typeof replaceFilter === 'function' && !replaceFilter(match)) {\n            return match;\n          }\n          var i = tokenStack.length;\n          var placeholder;\n\n          // Check for existing strings\n          while (env.code.indexOf(placeholder = getPlaceholder(language, i)) !== -1) {\n            ++i;\n          }\n\n          // Create a sparse array\n          tokenStack[i] = match;\n          return placeholder;\n        });\n\n        // Switch the grammar to markup\n        env.grammar = Prism.languages.markup;\n      }\n    },\n    tokenizePlaceholders: {\n      /**\n       * Replace placeholders with proper tokens after tokenizing.\n       *\n       * @param {object} env The environment of the `after-tokenize` hook.\n       * @param {string} language The language id.\n       */\n      value: function (env, language) {\n        if (env.language !== language || !env.tokenStack) {\n          return;\n        }\n\n        // Switch the grammar back\n        env.grammar = Prism.languages[language];\n        var j = 0;\n        var keys = Object.keys(env.tokenStack);\n        function walkTokens(tokens) {\n          for (var i = 0; i < tokens.length; i++) {\n            // all placeholders are replaced already\n            if (j >= keys.length) {\n              break;\n            }\n            var token = tokens[i];\n            if (typeof token === 'string' || token.content && typeof token.content === 'string') {\n              var k = keys[j];\n              var t = env.tokenStack[k];\n              var s = typeof token === 'string' ? token : token.content;\n              var placeholder = getPlaceholder(language, k);\n              var index = s.indexOf(placeholder);\n              if (index > -1) {\n                ++j;\n                var before = s.substring(0, index);\n                var middle = new Prism.Token(language, Prism.tokenize(t, env.grammar), 'language-' + language, t);\n                var after = s.substring(index + placeholder.length);\n                var replacement = [];\n                if (before) {\n                  replacement.push.apply(replacement, walkTokens([before]));\n                }\n                replacement.push(middle);\n                if (after) {\n                  replacement.push.apply(replacement, walkTokens([after]));\n                }\n                if (typeof token === 'string') {\n                  tokens.splice.apply(tokens, [i, 1].concat(replacement));\n                } else {\n                  token.content = replacement;\n                }\n              }\n            } else if (token.content /* && typeof token.content !== 'string' */) {\n              walkTokens(token.content);\n            }\n          }\n          return tokens;\n        }\n        walkTokens(env.tokens);\n      }\n    }\n  });\n})(Prism);\n\n/**\n * Original by Aaron Harun: http://aahacreative.com/2012/07/31/php-syntax-highlighting-prism/\n * Modified by Miles Johnson: http://milesj.me\n * Rewritten by Tom Pavelec\n *\n * Supports PHP 5.3 - 8.0\n */\n(function (Prism) {\n  var comment = /\\/\\*[\\s\\S]*?\\*\\/|\\/\\/.*|#(?!\\[).*/;\n  var constant = [{\n    pattern: /\\b(?:false|true)\\b/i,\n    alias: 'boolean'\n  }, {\n    pattern: /(::\\s*)\\b[a-z_]\\w*\\b(?!\\s*\\()/i,\n    greedy: true,\n    lookbehind: true\n  }, {\n    pattern: /(\\b(?:case|const)\\s+)\\b[a-z_]\\w*(?=\\s*[;=])/i,\n    greedy: true,\n    lookbehind: true\n  }, /\\b(?:null)\\b/i, /\\b[A-Z_][A-Z0-9_]*\\b(?!\\s*\\()/];\n  var number = /\\b0b[01]+(?:_[01]+)*\\b|\\b0o[0-7]+(?:_[0-7]+)*\\b|\\b0x[\\da-f]+(?:_[\\da-f]+)*\\b|(?:\\b\\d+(?:_\\d+)*\\.?(?:\\d+(?:_\\d+)*)?|\\B\\.\\d+)(?:e[+-]?\\d+)?/i;\n  var operator = /<?=>|\\?\\?=?|\\.{3}|\\??->|[!=]=?=?|::|\\*\\*=?|--|\\+\\+|&&|\\|\\||<<|>>|[?~]|[/^|%*&<>.+-]=?/;\n  var punctuation = /[{}\\[\\](),:;]/;\n  Prism.languages.php = {\n    'delimiter': {\n      pattern: /\\?>$|^<\\?(?:php(?=\\s)|=)?/i,\n      alias: 'important'\n    },\n    'comment': comment,\n    'variable': /\\$+(?:\\w+\\b|(?=\\{))/,\n    'package': {\n      pattern: /(namespace\\s+|use\\s+(?:function\\s+)?)(?:\\\\?\\b[a-z_]\\w*)+\\b(?!\\\\)/i,\n      lookbehind: true,\n      inside: {\n        'punctuation': /\\\\/\n      }\n    },\n    'class-name-definition': {\n      pattern: /(\\b(?:class|enum|interface|trait)\\s+)\\b[a-z_]\\w*(?!\\\\)\\b/i,\n      lookbehind: true,\n      alias: 'class-name'\n    },\n    'function-definition': {\n      pattern: /(\\bfunction\\s+)[a-z_]\\w*(?=\\s*\\()/i,\n      lookbehind: true,\n      alias: 'function'\n    },\n    'keyword': [{\n      pattern: /(\\(\\s*)\\b(?:array|bool|boolean|float|int|integer|object|string)\\b(?=\\s*\\))/i,\n      alias: 'type-casting',\n      greedy: true,\n      lookbehind: true\n    }, {\n      pattern: /([(,?]\\s*)\\b(?:array(?!\\s*\\()|bool|callable|(?:false|null)(?=\\s*\\|)|float|int|iterable|mixed|object|self|static|string)\\b(?=\\s*\\$)/i,\n      alias: 'type-hint',\n      greedy: true,\n      lookbehind: true\n    }, {\n      pattern: /(\\)\\s*:\\s*(?:\\?\\s*)?)\\b(?:array(?!\\s*\\()|bool|callable|(?:false|null)(?=\\s*\\|)|float|int|iterable|mixed|never|object|self|static|string|void)\\b/i,\n      alias: 'return-type',\n      greedy: true,\n      lookbehind: true\n    }, {\n      pattern: /\\b(?:array(?!\\s*\\()|bool|float|int|iterable|mixed|object|string|void)\\b/i,\n      alias: 'type-declaration',\n      greedy: true\n    }, {\n      pattern: /(\\|\\s*)(?:false|null)\\b|\\b(?:false|null)(?=\\s*\\|)/i,\n      alias: 'type-declaration',\n      greedy: true,\n      lookbehind: true\n    }, {\n      pattern: /\\b(?:parent|self|static)(?=\\s*::)/i,\n      alias: 'static-context',\n      greedy: true\n    }, {\n      // yield from\n      pattern: /(\\byield\\s+)from\\b/i,\n      lookbehind: true\n    },\n    // `class` is always a keyword unlike other keywords\n    /\\bclass\\b/i, {\n      // https://www.php.net/manual/en/reserved.keywords.php\n      //\n      // keywords cannot be preceded by \"->\"\n      // the complex lookbehind means `(?<!(?:->|::)\\s*)`\n      pattern: /((?:^|[^\\s>:]|(?:^|[^-])>|(?:^|[^:]):)\\s*)\\b(?:abstract|and|array|as|break|callable|case|catch|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|enum|eval|exit|extends|final|finally|fn|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|match|namespace|never|new|or|parent|print|private|protected|public|readonly|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield|__halt_compiler)\\b/i,\n      lookbehind: true\n    }],\n    'argument-name': {\n      pattern: /([(,]\\s*)\\b[a-z_]\\w*(?=\\s*:(?!:))/i,\n      lookbehind: true\n    },\n    'class-name': [{\n      pattern: /(\\b(?:extends|implements|instanceof|new(?!\\s+self|\\s+static))\\s+|\\bcatch\\s*\\()\\b[a-z_]\\w*(?!\\\\)\\b/i,\n      greedy: true,\n      lookbehind: true\n    }, {\n      pattern: /(\\|\\s*)\\b[a-z_]\\w*(?!\\\\)\\b/i,\n      greedy: true,\n      lookbehind: true\n    }, {\n      pattern: /\\b[a-z_]\\w*(?!\\\\)\\b(?=\\s*\\|)/i,\n      greedy: true\n    }, {\n      pattern: /(\\|\\s*)(?:\\\\?\\b[a-z_]\\w*)+\\b/i,\n      alias: 'class-name-fully-qualified',\n      greedy: true,\n      lookbehind: true,\n      inside: {\n        'punctuation': /\\\\/\n      }\n    }, {\n      pattern: /(?:\\\\?\\b[a-z_]\\w*)+\\b(?=\\s*\\|)/i,\n      alias: 'class-name-fully-qualified',\n      greedy: true,\n      inside: {\n        'punctuation': /\\\\/\n      }\n    }, {\n      pattern: /(\\b(?:extends|implements|instanceof|new(?!\\s+self\\b|\\s+static\\b))\\s+|\\bcatch\\s*\\()(?:\\\\?\\b[a-z_]\\w*)+\\b(?!\\\\)/i,\n      alias: 'class-name-fully-qualified',\n      greedy: true,\n      lookbehind: true,\n      inside: {\n        'punctuation': /\\\\/\n      }\n    }, {\n      pattern: /\\b[a-z_]\\w*(?=\\s*\\$)/i,\n      alias: 'type-declaration',\n      greedy: true\n    }, {\n      pattern: /(?:\\\\?\\b[a-z_]\\w*)+(?=\\s*\\$)/i,\n      alias: ['class-name-fully-qualified', 'type-declaration'],\n      greedy: true,\n      inside: {\n        'punctuation': /\\\\/\n      }\n    }, {\n      pattern: /\\b[a-z_]\\w*(?=\\s*::)/i,\n      alias: 'static-context',\n      greedy: true\n    }, {\n      pattern: /(?:\\\\?\\b[a-z_]\\w*)+(?=\\s*::)/i,\n      alias: ['class-name-fully-qualified', 'static-context'],\n      greedy: true,\n      inside: {\n        'punctuation': /\\\\/\n      }\n    }, {\n      pattern: /([(,?]\\s*)[a-z_]\\w*(?=\\s*\\$)/i,\n      alias: 'type-hint',\n      greedy: true,\n      lookbehind: true\n    }, {\n      pattern: /([(,?]\\s*)(?:\\\\?\\b[a-z_]\\w*)+(?=\\s*\\$)/i,\n      alias: ['class-name-fully-qualified', 'type-hint'],\n      greedy: true,\n      lookbehind: true,\n      inside: {\n        'punctuation': /\\\\/\n      }\n    }, {\n      pattern: /(\\)\\s*:\\s*(?:\\?\\s*)?)\\b[a-z_]\\w*(?!\\\\)\\b/i,\n      alias: 'return-type',\n      greedy: true,\n      lookbehind: true\n    }, {\n      pattern: /(\\)\\s*:\\s*(?:\\?\\s*)?)(?:\\\\?\\b[a-z_]\\w*)+\\b(?!\\\\)/i,\n      alias: ['class-name-fully-qualified', 'return-type'],\n      greedy: true,\n      lookbehind: true,\n      inside: {\n        'punctuation': /\\\\/\n      }\n    }],\n    'constant': constant,\n    'function': {\n      pattern: /(^|[^\\\\\\w])\\\\?[a-z_](?:[\\w\\\\]*\\w)?(?=\\s*\\()/i,\n      lookbehind: true,\n      inside: {\n        'punctuation': /\\\\/\n      }\n    },\n    'property': {\n      pattern: /(->\\s*)\\w+/,\n      lookbehind: true\n    },\n    'number': number,\n    'operator': operator,\n    'punctuation': punctuation\n  };\n  var string_interpolation = {\n    pattern: /\\{\\$(?:\\{(?:\\{[^{}]+\\}|[^{}]+)\\}|[^{}])+\\}|(^|[^\\\\{])\\$+(?:\\w+(?:\\[[^\\r\\n\\[\\]]+\\]|->\\w+)?)/,\n    lookbehind: true,\n    inside: Prism.languages.php\n  };\n  var string = [{\n    pattern: /<<<'([^']+)'[\\r\\n](?:.*[\\r\\n])*?\\1;/,\n    alias: 'nowdoc-string',\n    greedy: true,\n    inside: {\n      'delimiter': {\n        pattern: /^<<<'[^']+'|[a-z_]\\w*;$/i,\n        alias: 'symbol',\n        inside: {\n          'punctuation': /^<<<'?|[';]$/\n        }\n      }\n    }\n  }, {\n    pattern: /<<<(?:\"([^\"]+)\"[\\r\\n](?:.*[\\r\\n])*?\\1;|([a-z_]\\w*)[\\r\\n](?:.*[\\r\\n])*?\\2;)/i,\n    alias: 'heredoc-string',\n    greedy: true,\n    inside: {\n      'delimiter': {\n        pattern: /^<<<(?:\"[^\"]+\"|[a-z_]\\w*)|[a-z_]\\w*;$/i,\n        alias: 'symbol',\n        inside: {\n          'punctuation': /^<<<\"?|[\";]$/\n        }\n      },\n      'interpolation': string_interpolation\n    }\n  }, {\n    pattern: /`(?:\\\\[\\s\\S]|[^\\\\`])*`/,\n    alias: 'backtick-quoted-string',\n    greedy: true\n  }, {\n    pattern: /'(?:\\\\[\\s\\S]|[^\\\\'])*'/,\n    alias: 'single-quoted-string',\n    greedy: true\n  }, {\n    pattern: /\"(?:\\\\[\\s\\S]|[^\\\\\"])*\"/,\n    alias: 'double-quoted-string',\n    greedy: true,\n    inside: {\n      'interpolation': string_interpolation\n    }\n  }];\n  Prism.languages.insertBefore('php', 'variable', {\n    'string': string,\n    'attribute': {\n      pattern: /#\\[(?:[^\"'\\/#]|\\/(?![*/])|\\/\\/.*$|#(?!\\[).*$|\\/\\*(?:[^*]|\\*(?!\\/))*\\*\\/|\"(?:\\\\[\\s\\S]|[^\\\\\"])*\"|'(?:\\\\[\\s\\S]|[^\\\\'])*')+\\](?=\\s*[a-z$#])/im,\n      greedy: true,\n      inside: {\n        'attribute-content': {\n          pattern: /^(#\\[)[\\s\\S]+(?=\\]$)/,\n          lookbehind: true,\n          // inside can appear subset of php\n          inside: {\n            'comment': comment,\n            'string': string,\n            'attribute-class-name': [{\n              pattern: /([^:]|^)\\b[a-z_]\\w*(?!\\\\)\\b/i,\n              alias: 'class-name',\n              greedy: true,\n              lookbehind: true\n            }, {\n              pattern: /([^:]|^)(?:\\\\?\\b[a-z_]\\w*)+/i,\n              alias: ['class-name', 'class-name-fully-qualified'],\n              greedy: true,\n              lookbehind: true,\n              inside: {\n                'punctuation': /\\\\/\n              }\n            }],\n            'constant': constant,\n            'number': number,\n            'operator': operator,\n            'punctuation': punctuation\n          }\n        },\n        'delimiter': {\n          pattern: /^#\\[|\\]$/,\n          alias: 'punctuation'\n        }\n      }\n    }\n  });\n  Prism.hooks.add('before-tokenize', function (env) {\n    if (!/<\\?/.test(env.code)) {\n      return;\n    }\n    var phpPattern = /<\\?(?:[^\"'/#]|\\/(?![*/])|(\"|')(?:\\\\[\\s\\S]|(?!\\1)[^\\\\])*\\1|(?:\\/\\/|#(?!\\[))(?:[^?\\n\\r]|\\?(?!>))*(?=$|\\?>|[\\r\\n])|#\\[|\\/\\*(?:[^*]|\\*(?!\\/))*(?:\\*\\/|$))*?(?:\\?>|$)/g;\n    Prism.languages['markup-templating'].buildPlaceholders(env, 'php', phpPattern);\n  });\n  Prism.hooks.add('after-tokenize', function (env) {\n    Prism.languages['markup-templating'].tokenizePlaceholders(env, 'php');\n  });\n})(Prism);\nPrism.languages.python = {\n  'comment': {\n    pattern: /(^|[^\\\\])#.*/,\n    lookbehind: true,\n    greedy: true\n  },\n  'string-interpolation': {\n    pattern: /(?:f|fr|rf)(?:(\"\"\"|''')[\\s\\S]*?\\1|(\"|')(?:\\\\.|(?!\\2)[^\\\\\\r\\n])*\\2)/i,\n    greedy: true,\n    inside: {\n      'interpolation': {\n        // \"{\" <expression> <optional \"!s\", \"!r\", or \"!a\"> <optional \":\" format specifier> \"}\"\n        pattern: /((?:^|[^{])(?:\\{\\{)*)\\{(?!\\{)(?:[^{}]|\\{(?!\\{)(?:[^{}]|\\{(?!\\{)(?:[^{}])+\\})+\\})+\\}/,\n        lookbehind: true,\n        inside: {\n          'format-spec': {\n            pattern: /(:)[^:(){}]+(?=\\}$)/,\n            lookbehind: true\n          },\n          'conversion-option': {\n            pattern: /![sra](?=[:}]$)/,\n            alias: 'punctuation'\n          },\n          rest: null\n        }\n      },\n      'string': /[\\s\\S]+/\n    }\n  },\n  'triple-quoted-string': {\n    pattern: /(?:[rub]|br|rb)?(\"\"\"|''')[\\s\\S]*?\\1/i,\n    greedy: true,\n    alias: 'string'\n  },\n  'string': {\n    pattern: /(?:[rub]|br|rb)?(\"|')(?:\\\\.|(?!\\1)[^\\\\\\r\\n])*\\1/i,\n    greedy: true\n  },\n  'function': {\n    pattern: /((?:^|\\s)def[ \\t]+)[a-zA-Z_]\\w*(?=\\s*\\()/g,\n    lookbehind: true\n  },\n  'class-name': {\n    pattern: /(\\bclass\\s+)\\w+/i,\n    lookbehind: true\n  },\n  'decorator': {\n    pattern: /(^[\\t ]*)@\\w+(?:\\.\\w+)*/m,\n    lookbehind: true,\n    alias: ['annotation', 'punctuation'],\n    inside: {\n      'punctuation': /\\./\n    }\n  },\n  'keyword': /\\b(?:_(?=\\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\\b/,\n  'builtin': /\\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\\b/,\n  'boolean': /\\b(?:False|None|True)\\b/,\n  'number': /\\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\\b|(?:\\b\\d+(?:_\\d+)*(?:\\.(?:\\d+(?:_\\d+)*)?)?|\\B\\.\\d+(?:_\\d+)*)(?:e[+-]?\\d+(?:_\\d+)*)?j?(?!\\w)/i,\n  'operator': /[-+%=]=?|!=|:=|\\*\\*?=?|\\/\\/?=?|<[<=>]?|>[=>]?|[&|^~]/,\n  'punctuation': /[{}[\\];(),.:]/\n};\nPrism.languages.python['string-interpolation'].inside['interpolation'].inside.rest = Prism.languages.python;\nPrism.languages.py = Prism.languages.python;\nPrism.languages.r = {\n  'comment': /#.*/,\n  'string': {\n    pattern: /(['\"])(?:\\\\.|(?!\\1)[^\\\\\\r\\n])*\\1/,\n    greedy: true\n  },\n  'percent-operator': {\n    // Includes user-defined operators\n    // and %%, %*%, %/%, %in%, %o%, %x%\n    pattern: /%[^%\\s]*%/,\n    alias: 'operator'\n  },\n  'boolean': /\\b(?:FALSE|TRUE)\\b/,\n  'ellipsis': /\\.\\.(?:\\.|\\d+)/,\n  'number': [/\\b(?:Inf|NaN)\\b/, /(?:\\b0x[\\dA-Fa-f]+(?:\\.\\d*)?|\\b\\d+(?:\\.\\d*)?|\\B\\.\\d+)(?:[EePp][+-]?\\d+)?[iL]?/],\n  'keyword': /\\b(?:NA|NA_character_|NA_complex_|NA_integer_|NA_real_|NULL|break|else|for|function|if|in|next|repeat|while)\\b/,\n  'operator': /->?>?|<(?:=|<?-)?|[>=!]=?|::?|&&?|\\|\\|?|[+*\\/^$@~]/,\n  'punctuation': /[(){}\\[\\],;]/\n};\n\n/**\n * Original by Samuel Flores\n *\n * Adds the following new token classes:\n *     constant, builtin, variable, symbol, regex\n */\n(function (Prism) {\n  Prism.languages.ruby = Prism.languages.extend('clike', {\n    'comment': {\n      pattern: /#.*|^=begin\\s[\\s\\S]*?^=end/m,\n      greedy: true\n    },\n    'class-name': {\n      pattern: /(\\b(?:class|module)\\s+|\\bcatch\\s+\\()[\\w.\\\\]+|\\b[A-Z_]\\w*(?=\\s*\\.\\s*new\\b)/,\n      lookbehind: true,\n      inside: {\n        'punctuation': /[.\\\\]/\n      }\n    },\n    'keyword': /\\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\\b/,\n    'operator': /\\.{2,3}|&\\.|===|<?=>|[!=]?~|(?:&&|\\|\\||<<|>>|\\*\\*|[+\\-*/%<>!^&|=])=?|[?:]/,\n    'punctuation': /[(){}[\\].,;]/\n  });\n  Prism.languages.insertBefore('ruby', 'operator', {\n    'double-colon': {\n      pattern: /::/,\n      alias: 'punctuation'\n    }\n  });\n  var interpolation = {\n    pattern: /((?:^|[^\\\\])(?:\\\\{2})*)#\\{(?:[^{}]|\\{[^{}]*\\})*\\}/,\n    lookbehind: true,\n    inside: {\n      'content': {\n        pattern: /^(#\\{)[\\s\\S]+(?=\\}$)/,\n        lookbehind: true,\n        inside: Prism.languages.ruby\n      },\n      'delimiter': {\n        pattern: /^#\\{|\\}$/,\n        alias: 'punctuation'\n      }\n    }\n  };\n  delete Prism.languages.ruby.function;\n  var percentExpression = '(?:' + [/([^a-zA-Z0-9\\s{(\\[<=])(?:(?!\\1)[^\\\\]|\\\\[\\s\\S])*\\1/.source, /\\((?:[^()\\\\]|\\\\[\\s\\S]|\\((?:[^()\\\\]|\\\\[\\s\\S])*\\))*\\)/.source, /\\{(?:[^{}\\\\]|\\\\[\\s\\S]|\\{(?:[^{}\\\\]|\\\\[\\s\\S])*\\})*\\}/.source, /\\[(?:[^\\[\\]\\\\]|\\\\[\\s\\S]|\\[(?:[^\\[\\]\\\\]|\\\\[\\s\\S])*\\])*\\]/.source, /<(?:[^<>\\\\]|\\\\[\\s\\S]|<(?:[^<>\\\\]|\\\\[\\s\\S])*>)*>/.source].join('|') + ')';\n  var symbolName = /(?:\"(?:\\\\.|[^\"\\\\\\r\\n])*\"|(?:\\b[a-zA-Z_]\\w*|[^\\s\\0-\\x7F]+)[?!]?|\\$.)/.source;\n  Prism.languages.insertBefore('ruby', 'keyword', {\n    'regex-literal': [{\n      pattern: RegExp(/%r/.source + percentExpression + /[egimnosux]{0,6}/.source),\n      greedy: true,\n      inside: {\n        'interpolation': interpolation,\n        'regex': /[\\s\\S]+/\n      }\n    }, {\n      pattern: /(^|[^/])\\/(?!\\/)(?:\\[[^\\r\\n\\]]+\\]|\\\\.|[^[/\\\\\\r\\n])+\\/[egimnosux]{0,6}(?=\\s*(?:$|[\\r\\n,.;})#]))/,\n      lookbehind: true,\n      greedy: true,\n      inside: {\n        'interpolation': interpolation,\n        'regex': /[\\s\\S]+/\n      }\n    }],\n    'variable': /[@$]+[a-zA-Z_]\\w*(?:[?!]|\\b)/,\n    'symbol': [{\n      pattern: RegExp(/(^|[^:]):/.source + symbolName),\n      lookbehind: true,\n      greedy: true\n    }, {\n      pattern: RegExp(/([\\r\\n{(,][ \\t]*)/.source + symbolName + /(?=:(?!:))/.source),\n      lookbehind: true,\n      greedy: true\n    }],\n    'method-definition': {\n      pattern: /(\\bdef\\s+)\\w+(?:\\s*\\.\\s*\\w+)?/,\n      lookbehind: true,\n      inside: {\n        'function': /\\b\\w+$/,\n        'keyword': /^self\\b/,\n        'class-name': /^\\w+/,\n        'punctuation': /\\./\n      }\n    }\n  });\n  Prism.languages.insertBefore('ruby', 'string', {\n    'string-literal': [{\n      pattern: RegExp(/%[qQiIwWs]?/.source + percentExpression),\n      greedy: true,\n      inside: {\n        'interpolation': interpolation,\n        'string': /[\\s\\S]+/\n      }\n    }, {\n      pattern: /(\"|')(?:#\\{[^}]+\\}|#(?!\\{)|\\\\(?:\\r\\n|[\\s\\S])|(?!\\1)[^\\\\#\\r\\n])*\\1/,\n      greedy: true,\n      inside: {\n        'interpolation': interpolation,\n        'string': /[\\s\\S]+/\n      }\n    }, {\n      pattern: /<<[-~]?([a-z_]\\w*)[\\r\\n](?:.*[\\r\\n])*?[\\t ]*\\1/i,\n      alias: 'heredoc-string',\n      greedy: true,\n      inside: {\n        'delimiter': {\n          pattern: /^<<[-~]?[a-z_]\\w*|\\b[a-z_]\\w*$/i,\n          inside: {\n            'symbol': /\\b\\w+/,\n            'punctuation': /^<<[-~]?/\n          }\n        },\n        'interpolation': interpolation,\n        'string': /[\\s\\S]+/\n      }\n    }, {\n      pattern: /<<[-~]?'([a-z_]\\w*)'[\\r\\n](?:.*[\\r\\n])*?[\\t ]*\\1/i,\n      alias: 'heredoc-string',\n      greedy: true,\n      inside: {\n        'delimiter': {\n          pattern: /^<<[-~]?'[a-z_]\\w*'|\\b[a-z_]\\w*$/i,\n          inside: {\n            'symbol': /\\b\\w+/,\n            'punctuation': /^<<[-~]?'|'$/\n          }\n        },\n        'string': /[\\s\\S]+/\n      }\n    }],\n    'command-literal': [{\n      pattern: RegExp(/%x/.source + percentExpression),\n      greedy: true,\n      inside: {\n        'interpolation': interpolation,\n        'command': {\n          pattern: /[\\s\\S]+/,\n          alias: 'string'\n        }\n      }\n    }, {\n      pattern: /`(?:#\\{[^}]+\\}|#(?!\\{)|\\\\(?:\\r\\n|[\\s\\S])|[^\\\\`#\\r\\n])*`/,\n      greedy: true,\n      inside: {\n        'interpolation': interpolation,\n        'command': {\n          pattern: /[\\s\\S]+/,\n          alias: 'string'\n        }\n      }\n    }]\n  });\n  delete Prism.languages.ruby.string;\n  Prism.languages.insertBefore('ruby', 'number', {\n    'builtin': /\\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\\b/,\n    'constant': /\\b[A-Z][A-Z0-9_]*(?:[?!]|\\b)/\n  });\n  Prism.languages.rb = Prism.languages.ruby;\n})(Prism);\n(function (Prism) {\n  var multilineComment = /\\/\\*(?:[^*/]|\\*(?!\\/)|\\/(?!\\*)|<self>)*\\*\\//.source;\n  for (var i = 0; i < 2; i++) {\n    // support 4 levels of nested comments\n    multilineComment = multilineComment.replace(/<self>/g, function () {\n      return multilineComment;\n    });\n  }\n  multilineComment = multilineComment.replace(/<self>/g, function () {\n    return /[^\\s\\S]/.source;\n  });\n  Prism.languages.rust = {\n    'comment': [{\n      pattern: RegExp(/(^|[^\\\\])/.source + multilineComment),\n      lookbehind: true,\n      greedy: true\n    }, {\n      pattern: /(^|[^\\\\:])\\/\\/.*/,\n      lookbehind: true,\n      greedy: true\n    }],\n    'string': {\n      pattern: /b?\"(?:\\\\[\\s\\S]|[^\\\\\"])*\"|b?r(#*)\"(?:[^\"]|\"(?!\\1))*\"\\1/,\n      greedy: true\n    },\n    'char': {\n      pattern: /b?'(?:\\\\(?:x[0-7][\\da-fA-F]|u\\{(?:[\\da-fA-F]_*){1,6}\\}|.)|[^\\\\\\r\\n\\t'])'/,\n      greedy: true\n    },\n    'attribute': {\n      pattern: /#!?\\[(?:[^\\[\\]\"]|\"(?:\\\\[\\s\\S]|[^\\\\\"])*\")*\\]/,\n      greedy: true,\n      alias: 'attr-name',\n      inside: {\n        'string': null // see below\n      }\n    },\n    // Closure params should not be confused with bitwise OR |\n    'closure-params': {\n      pattern: /([=(,:]\\s*|\\bmove\\s*)\\|[^|]*\\||\\|[^|]*\\|(?=\\s*(?:\\{|->))/,\n      lookbehind: true,\n      greedy: true,\n      inside: {\n        'closure-punctuation': {\n          pattern: /^\\||\\|$/,\n          alias: 'punctuation'\n        },\n        rest: null // see below\n      }\n    },\n    'lifetime-annotation': {\n      pattern: /'\\w+/,\n      alias: 'symbol'\n    },\n    'fragment-specifier': {\n      pattern: /(\\$\\w+:)[a-z]+/,\n      lookbehind: true,\n      alias: 'punctuation'\n    },\n    'variable': /\\$\\w+/,\n    'function-definition': {\n      pattern: /(\\bfn\\s+)\\w+/,\n      lookbehind: true,\n      alias: 'function'\n    },\n    'type-definition': {\n      pattern: /(\\b(?:enum|struct|trait|type|union)\\s+)\\w+/,\n      lookbehind: true,\n      alias: 'class-name'\n    },\n    'module-declaration': [{\n      pattern: /(\\b(?:crate|mod)\\s+)[a-z][a-z_\\d]*/,\n      lookbehind: true,\n      alias: 'namespace'\n    }, {\n      pattern: /(\\b(?:crate|self|super)\\s*)::\\s*[a-z][a-z_\\d]*\\b(?:\\s*::(?:\\s*[a-z][a-z_\\d]*\\s*::)*)?/,\n      lookbehind: true,\n      alias: 'namespace',\n      inside: {\n        'punctuation': /::/\n      }\n    }],\n    'keyword': [\n    // https://github.com/rust-lang/reference/blob/master/src/keywords.md\n    /\\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\\b/,\n    // primitives and str\n    // https://doc.rust-lang.org/stable/rust-by-example/primitives.html\n    /\\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\\b/],\n    // functions can technically start with an upper-case letter, but this will introduce a lot of false positives\n    // and Rust's naming conventions recommend snake_case anyway.\n    // https://doc.rust-lang.org/1.0.0/style/style/naming/README.html\n    'function': /\\b[a-z_]\\w*(?=\\s*(?:::\\s*<|\\())/,\n    'macro': {\n      pattern: /\\b\\w+!/,\n      alias: 'property'\n    },\n    'constant': /\\b[A-Z_][A-Z_\\d]+\\b/,\n    'class-name': /\\b[A-Z]\\w*\\b/,\n    'namespace': {\n      pattern: /(?:\\b[a-z][a-z_\\d]*\\s*::\\s*)*\\b[a-z][a-z_\\d]*\\s*::(?!\\s*<)/,\n      inside: {\n        'punctuation': /::/\n      }\n    },\n    // Hex, oct, bin, dec numbers with visual separators and type suffix\n    'number': /\\b(?:0x[\\dA-Fa-f](?:_?[\\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\\d(?:_?\\d)*)?\\.)?\\d(?:_?\\d)*(?:[Ee][+-]?\\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\\b/,\n    'boolean': /\\b(?:false|true)\\b/,\n    'punctuation': /->|\\.\\.=|\\.{1,3}|::|[{}[\\];(),:]/,\n    'operator': /[-+*\\/%!^]=?|=[=>]?|&[&=]?|\\|[|=]?|<<?=?|>>?=?|[@?]/\n  };\n  Prism.languages.rust['closure-params'].inside.rest = Prism.languages.rust;\n  Prism.languages.rust['attribute'].inside['string'] = Prism.languages.rust['string'];\n})(Prism);\n(function (Prism) {\n  Prism.languages.sass = Prism.languages.extend('css', {\n    // Sass comments don't need to be closed, only indented\n    'comment': {\n      pattern: /^([ \\t]*)\\/[\\/*].*(?:(?:\\r?\\n|\\r)\\1[ \\t].+)*/m,\n      lookbehind: true,\n      greedy: true\n    }\n  });\n  Prism.languages.insertBefore('sass', 'atrule', {\n    // We want to consume the whole line\n    'atrule-line': {\n      // Includes support for = and + shortcuts\n      pattern: /^(?:[ \\t]*)[@+=].+/m,\n      greedy: true,\n      inside: {\n        'atrule': /(?:@[\\w-]+|[+=])/\n      }\n    }\n  });\n  delete Prism.languages.sass.atrule;\n  var variable = /\\$[-\\w]+|#\\{\\$[-\\w]+\\}/;\n  var operator = [/[+*\\/%]|[=!]=|<=?|>=?|\\b(?:and|not|or)\\b/, {\n    pattern: /(\\s)-(?=\\s)/,\n    lookbehind: true\n  }];\n  Prism.languages.insertBefore('sass', 'property', {\n    // We want to consume the whole line\n    'variable-line': {\n      pattern: /^[ \\t]*\\$.+/m,\n      greedy: true,\n      inside: {\n        'punctuation': /:/,\n        'variable': variable,\n        'operator': operator\n      }\n    },\n    // We want to consume the whole line\n    'property-line': {\n      pattern: /^[ \\t]*(?:[^:\\s]+ *:.*|:[^:\\s].*)/m,\n      greedy: true,\n      inside: {\n        'property': [/[^:\\s]+(?=\\s*:)/, {\n          pattern: /(:)[^:\\s]+/,\n          lookbehind: true\n        }],\n        'punctuation': /:/,\n        'variable': variable,\n        'operator': operator,\n        'important': Prism.languages.sass.important\n      }\n    }\n  });\n  delete Prism.languages.sass.property;\n  delete Prism.languages.sass.important;\n\n  // Now that whole lines for other patterns are consumed,\n  // what's left should be selectors\n  Prism.languages.insertBefore('sass', 'punctuation', {\n    'selector': {\n      pattern: /^([ \\t]*)\\S(?:,[^,\\r\\n]+|[^,\\r\\n]*)(?:,[^,\\r\\n]+)*(?:,(?:\\r?\\n|\\r)\\1[ \\t]+\\S(?:,[^,\\r\\n]+|[^,\\r\\n]*)(?:,[^,\\r\\n]+)*)*/m,\n      lookbehind: true,\n      greedy: true\n    }\n  });\n})(Prism);\nPrism.languages.scss = Prism.languages.extend('css', {\n  'comment': {\n    pattern: /(^|[^\\\\])(?:\\/\\*[\\s\\S]*?\\*\\/|\\/\\/.*)/,\n    lookbehind: true\n  },\n  'atrule': {\n    pattern: /@[\\w-](?:\\([^()]+\\)|[^()\\s]|\\s+(?!\\s))*?(?=\\s+[{;])/,\n    inside: {\n      'rule': /@[\\w-]+/\n      // See rest below\n    }\n  },\n  // url, compassified\n  'url': /(?:[-a-z]+-)?url(?=\\()/i,\n  // CSS selector regex is not appropriate for Sass\n  // since there can be lot more things (var, @ directive, nesting..)\n  // a selector must start at the end of a property or after a brace (end of other rules or nesting)\n  // it can contain some characters that aren't used for defining rules or end of selector, & (parent selector), or interpolated variable\n  // the end of a selector is found when there is no rules in it ( {} or {\\s}) or if there is a property (because an interpolated var\n  // can \"pass\" as a selector- e.g: proper#{$erty})\n  // this one was hard to do, so please be careful if you edit this one :)\n  'selector': {\n    // Initial look-ahead is used to prevent matching of blank selectors\n    pattern: /(?=\\S)[^@;{}()]?(?:[^@;{}()\\s]|\\s+(?!\\s)|#\\{\\$[-\\w]+\\})+(?=\\s*\\{(?:\\}|\\s|[^}][^:{}]*[:{][^}]))/,\n    inside: {\n      'parent': {\n        pattern: /&/,\n        alias: 'important'\n      },\n      'placeholder': /%[-\\w]+/,\n      'variable': /\\$[-\\w]+|#\\{\\$[-\\w]+\\}/\n    }\n  },\n  'property': {\n    pattern: /(?:[-\\w]|\\$[-\\w]|#\\{\\$[-\\w]+\\})+(?=\\s*:)/,\n    inside: {\n      'variable': /\\$[-\\w]+|#\\{\\$[-\\w]+\\}/\n    }\n  }\n});\nPrism.languages.insertBefore('scss', 'atrule', {\n  'keyword': [/@(?:content|debug|each|else(?: if)?|extend|for|forward|function|if|import|include|mixin|return|use|warn|while)\\b/i, {\n    pattern: /( )(?:from|through)(?= )/,\n    lookbehind: true\n  }]\n});\nPrism.languages.insertBefore('scss', 'important', {\n  // var and interpolated vars\n  'variable': /\\$[-\\w]+|#\\{\\$[-\\w]+\\}/\n});\nPrism.languages.insertBefore('scss', 'function', {\n  'module-modifier': {\n    pattern: /\\b(?:as|hide|show|with)\\b/i,\n    alias: 'keyword'\n  },\n  'placeholder': {\n    pattern: /%[-\\w]+/,\n    alias: 'selector'\n  },\n  'statement': {\n    pattern: /\\B!(?:default|optional)\\b/i,\n    alias: 'keyword'\n  },\n  'boolean': /\\b(?:false|true)\\b/,\n  'null': {\n    pattern: /\\bnull\\b/,\n    alias: 'keyword'\n  },\n  'operator': {\n    pattern: /(\\s)(?:[-+*\\/%]|[=!]=|<=?|>=?|and|not|or)(?=\\s)/,\n    lookbehind: true\n  }\n});\nPrism.languages.scss['atrule'].inside.rest = Prism.languages.scss;\nPrism.languages.sql = {\n  'comment': {\n    pattern: /(^|[^\\\\])(?:\\/\\*[\\s\\S]*?\\*\\/|(?:--|\\/\\/|#).*)/,\n    lookbehind: true\n  },\n  'variable': [{\n    pattern: /@([\"'`])(?:\\\\[\\s\\S]|(?!\\1)[^\\\\])+\\1/,\n    greedy: true\n  }, /@[\\w.$]+/],\n  'string': {\n    pattern: /(^|[^@\\\\])(\"|')(?:\\\\[\\s\\S]|(?!\\2)[^\\\\]|\\2\\2)*\\2/,\n    greedy: true,\n    lookbehind: true\n  },\n  'identifier': {\n    pattern: /(^|[^@\\\\])`(?:\\\\[\\s\\S]|[^`\\\\]|``)*`/,\n    greedy: true,\n    lookbehind: true,\n    inside: {\n      'punctuation': /^`|`$/\n    }\n  },\n  'function': /\\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\\s*\\()/i,\n  // Should we highlight user defined functions too?\n  'keyword': /\\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\\b/i,\n  'boolean': /\\b(?:FALSE|NULL|TRUE)\\b/i,\n  'number': /\\b0x[\\da-f]+\\b|\\b\\d+(?:\\.\\d*)?|\\B\\.\\d+\\b/i,\n  'operator': /[-+*\\/=%^~]|&&?|\\|\\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\\b/i,\n  'punctuation': /[;[\\]()`,.]/\n};\nPrism.languages.swift = {\n  'comment': {\n    // Nested comments are supported up to 2 levels\n    pattern: /(^|[^\\\\:])(?:\\/\\/.*|\\/\\*(?:[^/*]|\\/(?!\\*)|\\*(?!\\/)|\\/\\*(?:[^*]|\\*(?!\\/))*\\*\\/)*\\*\\/)/,\n    lookbehind: true,\n    greedy: true\n  },\n  'string-literal': [\n  // https://docs.swift.org/swift-book/LanguageGuide/StringsAndCharacters.html\n  {\n    pattern: RegExp(/(^|[^\"#])/.source + '(?:'\n    // single-line string\n    + /\"(?:\\\\(?:\\((?:[^()]|\\([^()]*\\))*\\)|\\r\\n|[^(])|[^\\\\\\r\\n\"])*\"/.source + '|'\n    // multi-line string\n    + /\"\"\"(?:\\\\(?:\\((?:[^()]|\\([^()]*\\))*\\)|[^(])|[^\\\\\"]|\"(?!\"\"))*\"\"\"/.source + ')' + /(?![\"#])/.source),\n    lookbehind: true,\n    greedy: true,\n    inside: {\n      'interpolation': {\n        pattern: /(\\\\\\()(?:[^()]|\\([^()]*\\))*(?=\\))/,\n        lookbehind: true,\n        inside: null // see below\n      },\n      'interpolation-punctuation': {\n        pattern: /^\\)|\\\\\\($/,\n        alias: 'punctuation'\n      },\n      'punctuation': /\\\\(?=[\\r\\n])/,\n      'string': /[\\s\\S]+/\n    }\n  }, {\n    pattern: RegExp(/(^|[^\"#])(#+)/.source + '(?:'\n    // single-line string\n    + /\"(?:\\\\(?:#+\\((?:[^()]|\\([^()]*\\))*\\)|\\r\\n|[^#])|[^\\\\\\r\\n])*?\"/.source + '|'\n    // multi-line string\n    + /\"\"\"(?:\\\\(?:#+\\((?:[^()]|\\([^()]*\\))*\\)|[^#])|[^\\\\])*?\"\"\"/.source + ')' + '\\\\2'),\n    lookbehind: true,\n    greedy: true,\n    inside: {\n      'interpolation': {\n        pattern: /(\\\\#+\\()(?:[^()]|\\([^()]*\\))*(?=\\))/,\n        lookbehind: true,\n        inside: null // see below\n      },\n      'interpolation-punctuation': {\n        pattern: /^\\)|\\\\#+\\($/,\n        alias: 'punctuation'\n      },\n      'string': /[\\s\\S]+/\n    }\n  }],\n  'directive': {\n    // directives with conditions\n    pattern: RegExp(/#/.source + '(?:' + (/(?:elseif|if)\\b/.source + '(?:[ \\t]*'\n    // This regex is a little complex. It's equivalent to this:\n    //   (?:![ \\t]*)?(?:\\b\\w+\\b(?:[ \\t]*<round>)?|<round>)(?:[ \\t]*(?:&&|\\|\\|))?\n    // where <round> is a general parentheses expression.\n    + /(?:![ \\t]*)?(?:\\b\\w+\\b(?:[ \\t]*\\((?:[^()]|\\([^()]*\\))*\\))?|\\((?:[^()]|\\([^()]*\\))*\\))(?:[ \\t]*(?:&&|\\|\\|))?/.source + ')+') + '|' + /(?:else|endif)\\b/.source + ')'),\n    alias: 'property',\n    inside: {\n      'directive-name': /^#\\w+/,\n      'boolean': /\\b(?:false|true)\\b/,\n      'number': /\\b\\d+(?:\\.\\d+)*\\b/,\n      'operator': /!|&&|\\|\\||[<>]=?/,\n      'punctuation': /[(),]/\n    }\n  },\n  'literal': {\n    pattern: /#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\\b/,\n    alias: 'constant'\n  },\n  'other-directive': {\n    pattern: /#\\w+\\b/,\n    alias: 'property'\n  },\n  'attribute': {\n    pattern: /@\\w+/,\n    alias: 'atrule'\n  },\n  'function-definition': {\n    pattern: /(\\bfunc\\s+)\\w+/,\n    lookbehind: true,\n    alias: 'function'\n  },\n  'label': {\n    // https://docs.swift.org/swift-book/LanguageGuide/ControlFlow.html#ID141\n    pattern: /\\b(break|continue)\\s+\\w+|\\b[a-zA-Z_]\\w*(?=\\s*:\\s*(?:for|repeat|while)\\b)/,\n    lookbehind: true,\n    alias: 'important'\n  },\n  'keyword': /\\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\\b/,\n  'boolean': /\\b(?:false|true)\\b/,\n  'nil': {\n    pattern: /\\bnil\\b/,\n    alias: 'constant'\n  },\n  'short-argument': /\\$\\d+\\b/,\n  'omit': {\n    pattern: /\\b_\\b/,\n    alias: 'keyword'\n  },\n  'number': /\\b(?:[\\d_]+(?:\\.[\\de_]+)?|0x[a-f0-9_]+(?:\\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\\b/i,\n  // A class name must start with an upper-case letter and be either 1 letter long or contain a lower-case letter.\n  'class-name': /\\b[A-Z](?:[A-Z_\\d]*[a-z]\\w*)?\\b/,\n  'function': /\\b[a-z_]\\w*(?=\\s*\\()/i,\n  'constant': /\\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\\b/,\n  // Operators are generic in Swift. Developers can even create new operators (e.g. +++).\n  // https://docs.swift.org/swift-book/ReferenceManual/zzSummaryOfTheGrammar.html#ID481\n  // This regex only supports ASCII operators.\n  'operator': /[-+*/%=!<>&|^~?]+|\\.[.\\-+*/%=!<>&|^~?]+/,\n  'punctuation': /[{}[\\]();,.:\\\\]/\n};\nPrism.languages.swift['string-literal'].forEach(function (rule) {\n  rule.inside['interpolation'].inside = Prism.languages.swift;\n});\n(function (Prism) {\n  Prism.languages.typescript = Prism.languages.extend('javascript', {\n    'class-name': {\n      pattern: /(\\b(?:class|extends|implements|instanceof|interface|new|type)\\s+)(?!keyof\\b)(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?:\\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,\n      lookbehind: true,\n      greedy: true,\n      inside: null // see below\n    },\n    'builtin': /\\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\\b/\n  });\n\n  // The keywords TypeScript adds to JavaScript\n  Prism.languages.typescript.keyword.push(/\\b(?:abstract|declare|is|keyof|readonly|require)\\b/,\n  // keywords that have to be followed by an identifier\n  /\\b(?:asserts|infer|interface|module|namespace|type)\\b(?=\\s*(?:[{_$a-zA-Z\\xA0-\\uFFFF]|$))/,\n  // This is for `import type *, {}`\n  /\\btype\\b(?=\\s*(?:[\\{*]|$))/);\n\n  // doesn't work with TS because TS is too complex\n  delete Prism.languages.typescript['parameter'];\n  delete Prism.languages.typescript['literal-property'];\n\n  // a version of typescript specifically for highlighting types\n  var typeInside = Prism.languages.extend('typescript', {});\n  delete typeInside['class-name'];\n  Prism.languages.typescript['class-name'].inside = typeInside;\n  Prism.languages.insertBefore('typescript', 'function', {\n    'decorator': {\n      pattern: /@[$\\w\\xA0-\\uFFFF]+/,\n      inside: {\n        'at': {\n          pattern: /^@/,\n          alias: 'operator'\n        },\n        'function': /^[\\s\\S]+/\n      }\n    },\n    'generic-function': {\n      // e.g. foo<T extends \"bar\" | \"baz\">( ...\n      pattern: /#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*\\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\\s*\\()/,\n      greedy: true,\n      inside: {\n        'function': /^#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*/,\n        'generic': {\n          pattern: /<[\\s\\S]+/,\n          // everything after the first <\n          alias: 'class-name',\n          inside: typeInside\n        }\n      }\n    }\n  });\n  Prism.languages.ts = Prism.languages.typescript;\n})(Prism);\n(function (Prism) {\n  var typescript = Prism.util.clone(Prism.languages.typescript);\n  Prism.languages.tsx = Prism.languages.extend('jsx', typescript);\n\n  // doesn't work with TS because TS is too complex\n  delete Prism.languages.tsx['parameter'];\n  delete Prism.languages.tsx['literal-property'];\n\n  // This will prevent collisions between TSX tags and TS generic types.\n  // Idea by https://github.com/karlhorky\n  // Discussion: https://github.com/PrismJS/prism/issues/2594#issuecomment-710666928\n  var tag = Prism.languages.tsx.tag;\n  tag.pattern = RegExp(/(^|[^\\w$]|(?=<\\/))/.source + '(?:' + tag.pattern.source + ')', tag.pattern.flags);\n  tag.lookbehind = true;\n})(Prism);\nPrism.languages.basic = {\n  'comment': {\n    pattern: /(?:!|REM\\b).+/i,\n    inside: {\n      'keyword': /^REM/i\n    }\n  },\n  'string': {\n    pattern: /\"(?:\"\"|[!#$%&'()*,\\/:;<=>?^\\w +\\-.])*\"/,\n    greedy: true\n  },\n  'number': /(?:\\b\\d+(?:\\.\\d*)?|\\B\\.\\d+)(?:E[+-]?\\d+)?/i,\n  'keyword': /\\b(?:AS|BEEP|BLOAD|BSAVE|CALL(?: ABSOLUTE)?|CASE|CHAIN|CHDIR|CLEAR|CLOSE|CLS|COM|COMMON|CONST|DATA|DECLARE|DEF(?: FN| SEG|DBL|INT|LNG|SNG|STR)|DIM|DO|DOUBLE|ELSE|ELSEIF|END|ENVIRON|ERASE|ERROR|EXIT|FIELD|FILES|FOR|FUNCTION|GET|GOSUB|GOTO|IF|INPUT|INTEGER|IOCTL|KEY|KILL|LINE INPUT|LOCATE|LOCK|LONG|LOOP|LSET|MKDIR|NAME|NEXT|OFF|ON(?: COM| ERROR| KEY| TIMER)?|OPEN|OPTION BASE|OUT|POKE|PUT|READ|REDIM|REM|RESTORE|RESUME|RETURN|RMDIR|RSET|RUN|SELECT CASE|SHARED|SHELL|SINGLE|SLEEP|STATIC|STEP|STOP|STRING|SUB|SWAP|SYSTEM|THEN|TIMER|TO|TROFF|TRON|TYPE|UNLOCK|UNTIL|USING|VIEW PRINT|WAIT|WEND|WHILE|WRITE)(?:\\$|\\b)/i,\n  'function': /\\b(?:ABS|ACCESS|ACOS|ANGLE|AREA|ARITHMETIC|ARRAY|ASIN|ASK|AT|ATN|BASE|BEGIN|BREAK|CAUSE|CEIL|CHR|CLIP|COLLATE|COLOR|CON|COS|COSH|COT|CSC|DATE|DATUM|DEBUG|DECIMAL|DEF|DEG|DEGREES|DELETE|DET|DEVICE|DISPLAY|DOT|ELAPSED|EPS|ERASABLE|EXLINE|EXP|EXTERNAL|EXTYPE|FILETYPE|FIXED|FP|GO|GRAPH|HANDLER|IDN|IMAGE|IN|INT|INTERNAL|IP|IS|KEYED|LBOUND|LCASE|LEFT|LEN|LENGTH|LET|LINE|LINES|LOG|LOG10|LOG2|LTRIM|MARGIN|MAT|MAX|MAXNUM|MID|MIN|MISSING|MOD|NATIVE|NUL|NUMERIC|OF|OPTION|ORD|ORGANIZATION|OUTIN|OUTPUT|PI|POINT|POINTER|POINTS|POS|PRINT|PROGRAM|PROMPT|RAD|RADIANS|RANDOMIZE|RECORD|RECSIZE|RECTYPE|RELATIVE|REMAINDER|REPEAT|REST|RETRY|REWRITE|RIGHT|RND|ROUND|RTRIM|SAME|SEC|SELECT|SEQUENTIAL|SET|SETTER|SGN|SIN|SINH|SIZE|SKIP|SQR|STANDARD|STATUS|STR|STREAM|STYLE|TAB|TAN|TANH|TEMPLATE|TEXT|THERE|TIME|TIMEOUT|TRACE|TRANSFORM|TRUNCATE|UBOUND|UCASE|USE|VAL|VARIABLE|VIEWPORT|WHEN|WINDOW|WITH|ZER|ZONEWIDTH)(?:\\$|\\b)/i,\n  'operator': /<[=>]?|>=?|[+\\-*\\/^=&]|\\b(?:AND|EQV|IMP|NOT|OR|XOR)\\b/i,\n  'punctuation': /[,;:()]/\n};\nPrism.languages.vbnet = Prism.languages.extend('basic', {\n  'comment': [{\n    pattern: /(?:!|REM\\b).+/i,\n    inside: {\n      'keyword': /^REM/i\n    }\n  }, {\n    pattern: /(^|[^\\\\:])'.*/,\n    lookbehind: true,\n    greedy: true\n  }],\n  'string': {\n    pattern: /(^|[^\"])\"(?:\"\"|[^\"])*\"(?!\")/,\n    lookbehind: true,\n    greedy: true\n  },\n  'keyword': /(?:\\b(?:ADDHANDLER|ADDRESSOF|ALIAS|AND|ANDALSO|AS|BEEP|BLOAD|BOOLEAN|BSAVE|BYREF|BYTE|BYVAL|CALL(?: ABSOLUTE)?|CASE|CATCH|CBOOL|CBYTE|CCHAR|CDATE|CDBL|CDEC|CHAIN|CHAR|CHDIR|CINT|CLASS|CLEAR|CLNG|CLOSE|CLS|COBJ|COM|COMMON|CONST|CONTINUE|CSBYTE|CSHORT|CSNG|CSTR|CTYPE|CUINT|CULNG|CUSHORT|DATA|DATE|DECIMAL|DECLARE|DEF(?: FN| SEG|DBL|INT|LNG|SNG|STR)|DEFAULT|DELEGATE|DIM|DIRECTCAST|DO|DOUBLE|ELSE|ELSEIF|END|ENUM|ENVIRON|ERASE|ERROR|EVENT|EXIT|FALSE|FIELD|FILES|FINALLY|FOR(?: EACH)?|FRIEND|FUNCTION|GET|GETTYPE|GETXMLNAMESPACE|GLOBAL|GOSUB|GOTO|HANDLES|IF|IMPLEMENTS|IMPORTS|IN|INHERITS|INPUT|INTEGER|INTERFACE|IOCTL|IS|ISNOT|KEY|KILL|LET|LIB|LIKE|LINE INPUT|LOCATE|LOCK|LONG|LOOP|LSET|ME|MKDIR|MOD|MODULE|MUSTINHERIT|MUSTOVERRIDE|MYBASE|MYCLASS|NAME|NAMESPACE|NARROWING|NEW|NEXT|NOT|NOTHING|NOTINHERITABLE|NOTOVERRIDABLE|OBJECT|OF|OFF|ON(?: COM| ERROR| KEY| TIMER)?|OPEN|OPERATOR|OPTION(?: BASE)?|OPTIONAL|OR|ORELSE|OUT|OVERLOADS|OVERRIDABLE|OVERRIDES|PARAMARRAY|PARTIAL|POKE|PRIVATE|PROPERTY|PROTECTED|PUBLIC|PUT|RAISEEVENT|READ|READONLY|REDIM|REM|REMOVEHANDLER|RESTORE|RESUME|RETURN|RMDIR|RSET|RUN|SBYTE|SELECT(?: CASE)?|SET|SHADOWS|SHARED|SHELL|SHORT|SINGLE|SLEEP|STATIC|STEP|STOP|STRING|STRUCTURE|SUB|SWAP|SYNCLOCK|SYSTEM|THEN|THROW|TIMER|TO|TROFF|TRON|TRUE|TRY|TRYCAST|TYPE|TYPEOF|UINTEGER|ULONG|UNLOCK|UNTIL|USHORT|USING|VIEW PRINT|WAIT|WEND|WHEN|WHILE|WIDENING|WITH|WITHEVENTS|WRITE|WRITEONLY|XOR)|\\B(?:#CONST|#ELSE|#ELSEIF|#END|#IF))(?:\\$|\\b)/i,\n  'punctuation': /[,;:(){}]/\n});\n\nfunction isValidURL(url) {\n  return url === (0,_braintree_sanitize_url__WEBPACK_IMPORTED_MODULE_25__.sanitizeUrl)(url);\n}\n\nconst isLinkActive = editor => {\n  return isElementActive(editor, 'link');\n};\nconst wrapLink = (editor, url) => {\n  if (isLinkActive(editor)) {\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n      match: n => n.type === 'link'\n    });\n    return;\n  }\n  const {\n    selection\n  } = editor;\n  const isCollapsed = selection && slate__WEBPACK_IMPORTED_MODULE_104__.Range.isCollapsed(selection);\n  if (isCollapsed) {\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.insertNodes(editor, {\n      type: 'link',\n      href: url,\n      children: [{\n        text: url\n      }]\n    });\n  } else {\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.wrapNodes(editor, {\n      type: 'link',\n      href: url,\n      children: [{\n        text: ''\n      }]\n    }, {\n      split: true\n    });\n  }\n};\nconst LinkElement = ({\n  attributes,\n  children,\n  element: __elementForGettingPath\n}) => {\n  const stringFormatter = (0,_react_aria_i18n__WEBPACK_IMPORTED_MODULE_102__.useLocalizedStringFormatter)(l10nMessages);\n  const editor = (0,slate_react__WEBPACK_IMPORTED_MODULE_103__.useSlateStatic)();\n  const [currentElement, setNode] = useElementWithSetNodes(editor, __elementForGettingPath);\n  const href = currentElement.href;\n  const text = slate__WEBPACK_IMPORTED_MODULE_104__.Node.string(currentElement);\n  const [dialogOpen, setDialogOpen] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n  const activePopoverElement = useActiveBlockPopover();\n  const selected = activePopoverElement === __elementForGettingPath;\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    if (selected && !href) {\n      setDialogOpen(true);\n    }\n  }, [href, selected]);\n  const unlink = useEventCallback(() => {\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n      at: slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.findPath(editor, __elementForGettingPath)\n    });\n    slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.focus(editor);\n  });\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.Fragment, {\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(BlockPopoverTrigger, {\n      element: __elementForGettingPath,\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"a\", {\n        href: href,\n        ...attributes,\n        children: children\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(BlockPopover, {\n        placement: \"bottom start\",\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n          gap: \"small\",\n          padding: \"regular\",\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n              prominence: \"low\",\n              onPress: () => setDialogOpen(true),\n              children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n                src: _keystar_ui_icon_icons_editIcon__WEBPACK_IMPORTED_MODULE_20__.editIcon\n              })\n            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n              children: stringFormatter.format('edit')\n            })]\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n              prominence: \"low\",\n              onPress: () => {\n                window.open(href, '_blank', 'noopener,noreferrer');\n              },\n              children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n                src: _keystar_ui_icon_icons_externalLinkIcon__WEBPACK_IMPORTED_MODULE_21__.externalLinkIcon\n              })\n            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n              children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n                truncate: 3,\n                children: href\n              })\n            })]\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n              prominence: \"low\",\n              onPress: unlink,\n              children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n                src: _keystar_ui_icon_icons_unlinkIcon__WEBPACK_IMPORTED_MODULE_23__.unlinkIcon\n              })\n            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n              children: \"Unlink\"\n            })]\n          })]\n        })\n      })]\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_12__.DialogContainer, {\n      onDismiss: () => {\n        setDialogOpen(false);\n        focusWithPreviousSelection(editor);\n      },\n      children: dialogOpen && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(LinkDialog, {\n        text: text,\n        href: href,\n        onSubmit: ({\n          href\n        }) => {\n          setNode({\n            href\n          });\n        }\n      })\n    })]\n  });\n};\nfunction LinkDialog({\n  onSubmit,\n  ...props\n}) {\n  let [href, setHref] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(props.href || '');\n  let [touched, setTouched] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n  let {\n    dismiss\n  } = (0,_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_12__.useDialogContainer)();\n  let stringFormatter = (0,_react_aria_i18n__WEBPACK_IMPORTED_MODULE_102__.useLocalizedStringFormatter)(l10nMessages);\n  const showInvalidState = touched && !isValidURL(href);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_12__.Dialog, {\n    size: \"small\",\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(\"form\", {\n      style: {\n        display: 'contents'\n      },\n      onSubmit: event => {\n        if (event.target !== event.currentTarget) return;\n        event.preventDefault();\n        if (!showInvalidState) {\n          dismiss();\n          onSubmit({\n            href\n          });\n        }\n      },\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Heading, {\n        children: [props.href ? 'Edit' : 'Add', \" link\"]\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_slots__WEBPACK_IMPORTED_MODULE_17__.Content, {\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n          gap: \"large\",\n          direction: \"column\",\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_text_field__WEBPACK_IMPORTED_MODULE_4__.TextField, {\n            label: \"Text\",\n            value: props.text,\n            isReadOnly: true\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_text_field__WEBPACK_IMPORTED_MODULE_4__.TextField, {\n            autoFocus: true,\n            isRequired: true,\n            onBlur: () => setTouched(true),\n            label: \"Link\",\n            onChange: setHref,\n            value: href,\n            errorMessage: showInvalidState && 'Please provide a valid URL.'\n          })]\n        })\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ButtonGroup, {\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.Button, {\n          onPress: dismiss,\n          children: stringFormatter.format('cancel')\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.Button, {\n          prominence: \"high\",\n          type: \"submit\",\n          children: stringFormatter.format('save')\n        })]\n      })]\n    })\n  });\n}\nlet _linkIcon = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n  src: _keystar_ui_icon_icons_linkIcon__WEBPACK_IMPORTED_MODULE_22__.linkIcon\n});\nfunction LinkButton() {\n  const {\n    editor,\n    links: {\n      isDisabled,\n      isSelected\n    }\n  } = useToolbarState();\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n    prominence: \"low\",\n    isDisabled: isDisabled,\n    isSelected: isSelected,\n    onPress: () => {\n      wrapLink(editor, '');\n      slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.focus(editor);\n    },\n    children: _linkIcon\n  }), [isSelected, isDisabled, editor]);\n}\nconst linkButton = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n  children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(LinkButton, {}), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n      children: \"Link\"\n    })\n  })]\n});\n\nconst values = {\n  start: {\n    key: 'start',\n    label: 'Align Start',\n    icon: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n      src: _keystar_ui_icon_icons_alignLeftIcon__WEBPACK_IMPORTED_MODULE_42__.alignLeftIcon\n    })\n  },\n  center: {\n    key: 'center',\n    label: 'Align Center',\n    icon: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n      src: _keystar_ui_icon_icons_alignCenterIcon__WEBPACK_IMPORTED_MODULE_44__.alignCenterIcon\n    })\n  },\n  end: {\n    key: 'end',\n    label: 'Align End',\n    icon: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n      src: _keystar_ui_icon_icons_alignRightIcon__WEBPACK_IMPORTED_MODULE_43__.alignRightIcon\n    })\n  }\n};\nconst TextAlignMenu = ({\n  alignment\n}) => {\n  const toolbarState = useToolbarState();\n  const items = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => [values.start, ...Object.keys(alignment).map(x => values[x])], [alignment]);\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_menu__WEBPACK_IMPORTED_MODULE_40__.MenuTrigger, {\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n        prominence: \"low\",\n        children: [values[toolbarState.alignment.selected].icon, /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n          src: _keystar_ui_icon_icons_chevronDownIcon__WEBPACK_IMPORTED_MODULE_28__.chevronDownIcon\n        })]\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n          children: \"Text Alignment\"\n        })\n      })]\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_menu__WEBPACK_IMPORTED_MODULE_40__.Menu, {\n      selectionMode: \"single\",\n      selectedKeys: [toolbarState.alignment.selected],\n      items: items,\n      onAction: key => {\n        if (key === 'start') {\n          slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unsetNodes(toolbarState.editor, 'textAlign', {\n            match: node => node.type === 'paragraph' || node.type === 'heading'\n          });\n        } else {\n          slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.setNodes(toolbarState.editor, {\n            textAlign: key\n          }, {\n            match: node => node.type === 'paragraph' || node.type === 'heading'\n          });\n        }\n        slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.focus(toolbarState.editor);\n      },\n      children: item => {\n        return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_action_group__WEBPACK_IMPORTED_MODULE_26__.Item, {\n          textValue: item.label,\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n            children: item.label\n          }), item.icon]\n        }, item.key);\n      }\n    })]\n  }), [items, toolbarState.alignment.selected, toolbarState.editor]);\n};\n\nconst insertBlockquote = editor => {\n  const isActive = isElementActive(editor, 'blockquote');\n  if (isActive) {\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n      match: node => node.type === 'blockquote'\n    });\n  } else {\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.wrapNodes(editor, {\n      type: 'blockquote',\n      children: []\n    });\n  }\n};\nconst BlockquoteButton = () => {\n  const {\n    editor,\n    blockquote: {\n      isDisabled,\n      isSelected\n    }\n  } = useToolbarState();\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n    prominence: \"low\",\n    isSelected: isSelected,\n    isDisabled: isDisabled,\n    onPress: () => {\n      insertBlockquote(editor);\n      slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.focus(editor);\n    },\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n      src: _keystar_ui_icon_icons_quoteIcon__WEBPACK_IMPORTED_MODULE_45__.quoteIcon\n    })\n  }), [editor, isDisabled, isSelected]);\n};\nconst blockquoteButton = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n  children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(BlockquoteButton, {}), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n      children: \"Quote\"\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Kbd, {\n      children: '>⎵'\n    })]\n  })]\n});\n\nconst languages = [{\n  label: 'C',\n  value: 'c'\n}, {\n  label: 'C++',\n  value: 'cpp'\n}, {\n  label: 'Arduino',\n  value: 'arduino'\n}, {\n  label: 'Bash',\n  value: 'bash'\n}, {\n  label: 'C#',\n  value: 'csharp'\n}, {\n  label: 'CSS',\n  value: 'css'\n}, {\n  label: 'Diff',\n  value: 'diff'\n}, {\n  label: 'Go',\n  value: 'go'\n}, {\n  label: 'INI',\n  value: 'ini'\n}, {\n  label: 'Java',\n  value: 'java'\n}, {\n  label: 'JavaScript',\n  value: 'javascript'\n}, {\n  label: 'JSX',\n  value: 'jsx'\n}, {\n  label: 'JSON',\n  value: 'json'\n}, {\n  label: 'Kotlin',\n  value: 'kotlin'\n}, {\n  label: 'Less',\n  value: 'less'\n}, {\n  label: 'Lua',\n  value: 'lua'\n}, {\n  label: 'Makefile',\n  value: 'makefile'\n}, {\n  label: 'Markdown',\n  value: 'markdown'\n}, {\n  label: 'Objective-C',\n  value: 'objectivec'\n}, {\n  label: 'Perl',\n  value: 'perl'\n}, {\n  label: 'PHP',\n  value: 'php'\n}, {\n  label: 'Python',\n  value: 'python'\n}, {\n  label: 'R',\n  value: 'r'\n}, {\n  label: 'Ruby',\n  value: 'ruby'\n}, {\n  label: 'Rust',\n  value: 'rust'\n}, {\n  label: 'Sass',\n  value: 'sass'\n}, {\n  label: 'SCSS',\n  value: 'scss'\n}, {\n  label: 'SQL',\n  value: 'sql'\n}, {\n  label: 'Swift',\n  value: 'swift'\n}, {\n  label: 'TypeScript',\n  value: 'typescript'\n}, {\n  label: 'TSX',\n  value: 'tsx'\n}, {\n  label: 'VB.NET',\n  value: 'vbnet'\n}, {\n  label: 'YAML',\n  value: 'yaml'\n}];\nconst canonicalNameToLabel = new Map(languages.map(x => [x.value, x.label]));\nconst labelToCanonicalName = new Map(languages.map(x => [x.label, x.value]));\nconst languageToCanonicalName = new Map(languages.map(lang => [Prism.languages[lang.value], lang.value]));\nconst aliasesToCanonicalName = new Map(Object.keys(Prism.languages).flatMap(lang => {\n  const canonicalName = languageToCanonicalName.get(Prism.languages[lang]);\n  if (canonicalName === undefined) {\n    return [];\n  }\n  return [[lang, canonicalName]];\n}));\nconst languagesToAliases = new Map(languages.map(lang => [lang.value, []]));\nfor (const [alias, canonicalName] of aliasesToCanonicalName) {\n  languagesToAliases.get(canonicalName).push(alias);\n}\nconst languagesWithAliases = [{\n  label: 'Plain text',\n  value: 'plain',\n  aliases: []\n}, ...[...languagesToAliases].map(([canonicalName, aliases]) => ({\n  label: canonicalNameToLabel.get(canonicalName),\n  value: canonicalName,\n  aliases\n}))];\nconst aliasesToLabel = new Map([...aliasesToCanonicalName].map(([alias, canonicalName]) => [alias, canonicalNameToLabel.get(canonicalName)]));\n\nfunction CustomAttributesDialogInner(props) {\n  const editor = (0,slate_react__WEBPACK_IMPORTED_MODULE_103__.useSlateStatic)();\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(() => {\n    return getInitialPropsValueFromInitializer(props.schema, Object.fromEntries(Object.keys(props.schema.fields).map(key => [key, props.element[key]])));\n  });\n  const [forceValidation, setForceValidation] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n  const previewProps = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => createGetPreviewProps(props.schema, setState, () => undefined), [props.schema])(state);\n  let {\n    dismiss\n  } = (0,_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_12__.useDialogContainer)();\n  const stringFormatter = (0,_react_aria_i18n__WEBPACK_IMPORTED_MODULE_102__.useLocalizedStringFormatter)(l10nMessages);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_12__.Dialog, {\n    size: \"small\",\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(\"form\", {\n      style: {\n        display: 'contents'\n      },\n      onSubmit: event => {\n        if (event.target !== event.currentTarget) return;\n        event.preventDefault();\n        setForceValidation(true);\n        if (clientSideValidateProp(props.schema, state, undefined)) {\n          dismiss();\n          const path = slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.findPath(editor, props.element);\n          console.log(state);\n          slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.setNodes(editor, state, {\n            at: path\n          });\n        }\n      },\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Heading, {\n        children: [props.nodeLabel, \" details\"]\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_slots__WEBPACK_IMPORTED_MODULE_17__.Content, {\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(FormValueContentFromPreviewProps, {\n          forceValidation: forceValidation,\n          autoFocus: true,\n          ...previewProps\n        })\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ButtonGroup, {\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.Button, {\n          onPress: dismiss,\n          children: stringFormatter.format('cancel')\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.Button, {\n          prominence: \"high\",\n          type: \"submit\",\n          children: stringFormatter.format('save')\n        })]\n      })]\n    })\n  });\n}\nfunction CustomAttributesEditButton(props) {\n  const stringFormatter = (0,_react_aria_i18n__WEBPACK_IMPORTED_MODULE_102__.useLocalizedStringFormatter)(l10nMessages);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n      prominence: \"low\",\n      onPress: props.onPress,\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n        src: _keystar_ui_icon_icons_editIcon__WEBPACK_IMPORTED_MODULE_20__.editIcon\n      })\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n      children: stringFormatter.format('edit')\n    })]\n  });\n}\nfunction CustomAttributesDialog(props) {\n  const editor = (0,slate_react__WEBPACK_IMPORTED_MODULE_103__.useSlateStatic)();\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_12__.DialogContainer, {\n    onDismiss: () => {\n      props.onDismiss();\n      focusWithPreviousSelection(editor);\n    },\n    children: props.isOpen && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(CustomAttributesDialogInner, {\n      element: props.element,\n      nodeLabel: props.nodeLabel,\n      schema: props.schema\n    })\n  });\n}\n\nfunction CodeButton() {\n  const {\n    editor,\n    code: {\n      isDisabled,\n      isSelected\n    }\n  } = useToolbarState();\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n    isSelected: isSelected,\n    isDisabled: isDisabled,\n    prominence: \"low\",\n    onPress: () => {\n      if (isSelected) {\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n          match: node => node.type === 'code'\n        });\n      } else {\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.wrapNodes(editor, {\n          type: 'code',\n          children: [{\n            text: ''\n          }]\n        });\n      }\n      slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.focus(editor);\n    },\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n      src: _keystar_ui_icon_icons_codeIcon__WEBPACK_IMPORTED_MODULE_29__.codeIcon\n    })\n  }), [isDisabled, isSelected, editor]);\n}\nconst codeButton = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n  children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(CodeButton, {}), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n      children: \"Code block\"\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Kbd, {\n      children: \"```\"\n    })]\n  })]\n});\nfunction CodeElement({\n  attributes,\n  children,\n  element\n}) {\n  var _aliasesToLabel$get;\n  const editor = (0,slate_react__WEBPACK_IMPORTED_MODULE_103__.useSlateStatic)();\n  const triggerRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n  const [inputValue, setInputValue] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(element.language ? (_aliasesToLabel$get = aliasesToLabel.get(element.language)) !== null && _aliasesToLabel$get !== void 0 ? _aliasesToLabel$get : element.language : 'Plain text');\n  const [dialogOpen, setDialogOpen] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n  const {\n    documentFeatures\n  } = useDocumentEditorConfig();\n  const customAttributesSchema = documentFeatures.formatting.blockTypes.code && Object.keys(documentFeatures.formatting.blockTypes.code.schema.fields).length ? documentFeatures.formatting.blockTypes.code.schema : undefined;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.Fragment, {\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(BlockWrapper, {\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(BlockPopoverTrigger, {\n        element: element,\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"pre\", {\n          spellCheck: \"false\",\n          ref: triggerRef,\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"code\", {\n            ...attributes,\n            children: children\n          })\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(BlockPopover, {\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n            gap: \"regular\",\n            padding: \"regular\",\n            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_combobox__WEBPACK_IMPORTED_MODULE_47__.Combobox, {\n              \"aria-label\": \"Language\",\n              width: \"scale.2000\",\n              allowsCustomValue: true // allow consumers to support other languages\n              ,\n              inputValue: inputValue,\n              onInputChange: setInputValue,\n              onBlur: () => {\n                const path = slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.findPath(editor, element);\n                const canonicalName = aliasesToCanonicalName.get(inputValue);\n                if (canonicalName !== undefined) {\n                  if (canonicalName === 'plain') {\n                    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unsetNodes(editor, 'language', {\n                      at: path\n                    });\n                    return;\n                  }\n                  setInputValue(canonicalNameToLabel.get(canonicalName));\n                  slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.setNodes(editor, {\n                    language: canonicalName\n                  }, {\n                    at: path\n                  });\n                  return;\n                }\n                const nameFromLabel = labelToCanonicalName.get(inputValue);\n                if (nameFromLabel !== undefined) {\n                  if (nameFromLabel === 'plain') {\n                    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unsetNodes(editor, 'language', {\n                      at: path\n                    });\n                    return;\n                  }\n                  slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.setNodes(editor, {\n                    language: nameFromLabel\n                  }, {\n                    at: path\n                  });\n                  return;\n                }\n                if (inputValue === '') {\n                  slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unsetNodes(editor, 'language', {\n                    at: path\n                  });\n                  setInputValue('Plain text');\n                  return;\n                }\n                if (inputValue !== element.language) {\n                  slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.setNodes(editor, {\n                    language: inputValue\n                  }, {\n                    at: path\n                  });\n                }\n              },\n              onSelectionChange: selection => {\n                const path = slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.findPath(editor, element);\n                if (aliasesToCanonicalName.has(inputValue)) {\n                  selection = aliasesToCanonicalName.get(inputValue);\n                }\n                if (selection === null) {\n                  if (inputValue === '') {\n                    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unsetNodes(editor, 'language', {\n                      at: path\n                    });\n                  } else {\n                    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.setNodes(editor, {\n                      language: inputValue\n                    }, {\n                      at: path\n                    });\n                  }\n                } else if (typeof selection === 'string') {\n                  if (selection === 'plain') {\n                    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unsetNodes(editor, 'language', {\n                      at: path\n                    });\n                    setInputValue('Plain text');\n                    return;\n                  }\n                  slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.setNodes(editor, {\n                    language: selection\n                  }, {\n                    at: path\n                  });\n                  const label = canonicalNameToLabel.get(selection);\n                  if (label) {\n                    setInputValue(label);\n                  }\n                }\n              },\n              selectedKey: element.language ? aliasesToCanonicalName.get(element.language) : 'plain',\n              items: (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => inputValue === 'Plain text' || labelToCanonicalName.has(inputValue) ? languagesWithAliases : (0,match_sorter__WEBPACK_IMPORTED_MODULE_46__.matchSorter)(languagesWithAliases, inputValue, {\n                keys: ['label', 'value', 'aliases']\n              }), [inputValue]),\n              children: item => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_react_stately_collections__WEBPACK_IMPORTED_MODULE_107__.Item, {\n                children: item.label\n              }, item.value)\n            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ToolbarSeparator, {}), customAttributesSchema !== undefined && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(CustomAttributesEditButton, {\n              onPress: () => setDialogOpen(true)\n            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n                prominence: \"low\",\n                onPress: () => {\n                  slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n                    at: slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.findPath(editor, element)\n                  });\n                },\n                children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n                  src: _keystar_ui_icon_icons_trash2Icon__WEBPACK_IMPORTED_MODULE_15__.trash2Icon\n                })\n              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n                tone: \"critical\",\n                children: \"Remove\"\n              })]\n            })]\n          })\n        })]\n      })\n    }), customAttributesSchema !== undefined && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(CustomAttributesDialog, {\n      element: element,\n      isOpen: dialogOpen,\n      nodeLabel: \"Code block\",\n      schema: customAttributesSchema,\n      onDismiss: () => {\n        setDialogOpen(false);\n      }\n    })]\n  });\n}\n\nfunction updateComponentBlockElementProps(editor, componentBlock, prevProps, _newProps, basePath, setElement, ignoreChildFields) {\n  slate__WEBPACK_IMPORTED_MODULE_104__.Editor.withoutNormalizing(editor, () => {\n    const propPathsWithNodesToReplace = new Map();\n    const schema = {\n      kind: 'object',\n      fields: componentBlock.schema\n    };\n    const newProps = transformProps(schema, _newProps, {\n      child(schema, value, path) {\n        if (!ignoreChildFields && schema.options.kind === 'block' && value) {\n          try {\n            let prevVal = getValueAtPropPath(prevProps, path);\n            if (prevVal === value) {\n              return null;\n            }\n          } catch {}\n          propPathsWithNodesToReplace.set(JSON.stringify(path), value.map(cloneDescendent));\n        }\n        return null;\n      }\n    });\n    setElement({\n      props: newProps\n    });\n    const childPropPaths = findChildPropPathsWithPrevious(newProps, prevProps, schema, [], [], []);\n    const getNode = () => slate__WEBPACK_IMPORTED_MODULE_104__.Node.get(editor, basePath);\n    const elementForChildren = getNode();\n    if (childPropPaths.length === 0) {\n      const indexes = elementForChildren.children.map((_, i) => i).reverse();\n      for (const idx of indexes) {\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n          at: [...basePath, idx]\n        });\n      }\n      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.insertNodes(editor, {\n        type: 'component-inline-prop',\n        propPath: undefined,\n        children: [{\n          text: ''\n        }]\n      }, {\n        at: [...basePath, 0]\n      });\n      return;\n    }\n    const initialPropPathsToEditorPath = new Map();\n    for (const [idx, node] of elementForChildren.children.entries()) {\n      (0,emery__WEBPACK_IMPORTED_MODULE_1__.assert)(node.type === 'component-block-prop' || node.type === 'component-inline-prop');\n      initialPropPathsToEditorPath.set(node.propPath === undefined ? undefined : JSON.stringify(node.propPath), idx);\n    }\n    const childrenLeftToAdd = new Set(childPropPaths);\n    for (const childProp of childPropPaths) {\n      if (childProp.prevPath === undefined) {\n        continue;\n      }\n      const stringifiedPath = JSON.stringify(childProp.prevPath);\n      const idxInChildren = initialPropPathsToEditorPath.get(stringifiedPath);\n      if (idxInChildren !== undefined) {\n        const prevNode = elementForChildren.children[idxInChildren];\n        (0,emery__WEBPACK_IMPORTED_MODULE_1__.assert)(prevNode.propPath !== undefined);\n        if (!areArraysEqual(childProp.path, prevNode.propPath)) {\n          slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.setNodes(editor, {\n            propPath: childProp.path\n          }, {\n            at: [...basePath, idxInChildren]\n          });\n        }\n        childrenLeftToAdd.delete(childProp);\n        initialPropPathsToEditorPath.delete(stringifiedPath);\n      }\n    }\n    let newIdx = getNode().children.length;\n    for (const childProp of childrenLeftToAdd) {\n      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.insertNodes(editor, {\n        type: `component-${childProp.options.kind}-prop`,\n        propPath: childProp.path,\n        children: [childProp.options.kind === 'block' ? {\n          type: 'paragraph',\n          children: [{\n            text: ''\n          }]\n        } : {\n          text: ''\n        }]\n      }, {\n        at: [...basePath, newIdx]\n      });\n      newIdx++;\n    }\n    const pathsToRemove = [];\n    for (const [, idxInChildren] of initialPropPathsToEditorPath) {\n      pathsToRemove.push(slate__WEBPACK_IMPORTED_MODULE_104__.Editor.pathRef(editor, [...basePath, idxInChildren]));\n    }\n    for (const pathRef of pathsToRemove) {\n      const path = pathRef.unref();\n      (0,emery__WEBPACK_IMPORTED_MODULE_1__.assert)(path !== null);\n      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n        at: path\n      });\n    }\n    const propPathsToExpectedIndexes = new Map();\n    for (const [idx, thing] of childPropPaths.entries()) {\n      propPathsToExpectedIndexes.set(JSON.stringify(thing.path), idx);\n    }\n    outer: while (true) {\n      for (const [idx, childNode] of getNode().children.entries()) {\n        (0,emery__WEBPACK_IMPORTED_MODULE_1__.assert)(childNode.type === 'component-block-prop' || childNode.type === 'component-inline-prop');\n        const expectedIndex = propPathsToExpectedIndexes.get(JSON.stringify(childNode.propPath));\n        (0,emery__WEBPACK_IMPORTED_MODULE_1__.assert)(expectedIndex !== undefined);\n        if (idx === expectedIndex) continue;\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.moveNodes(editor, {\n          at: [...basePath, idx],\n          to: [...basePath, expectedIndex]\n        });\n\n        // start the for-loop again\n        continue outer;\n      }\n      break;\n    }\n    for (const [propPath, val] of propPathsWithNodesToReplace) {\n      const idx = propPathsToExpectedIndexes.get(propPath);\n      if (idx !== undefined) {\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n          at: [...basePath, idx]\n        });\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.insertNodes(editor, {\n          type: 'component-block-prop',\n          propPath: JSON.parse(propPath),\n          children: val\n        }, {\n          at: [...basePath, idx]\n        });\n      }\n    }\n  });\n}\nfunction findChildPropPathsWithPrevious(value, prevValue, schema, newPath, prevPath, pathWithKeys) {\n  switch (schema.kind) {\n    case 'form':\n      return [];\n    case 'child':\n      return [{\n        path: newPath,\n        prevPath,\n        options: schema.options\n      }];\n    case 'conditional':\n      const hasChangedDiscriminant = value.discriminant === prevValue.discriminant;\n      return findChildPropPathsWithPrevious(value.value, hasChangedDiscriminant ? prevValue.value : getInitialPropsValue(schema.values[value.discriminant]), schema.values[value.discriminant], newPath.concat('value'), hasChangedDiscriminant ? undefined : prevPath === null || prevPath === void 0 ? void 0 : prevPath.concat('value'), hasChangedDiscriminant ? undefined : pathWithKeys === null || pathWithKeys === void 0 ? void 0 : pathWithKeys.concat('value'));\n    case 'object':\n      {\n        const paths = [];\n        for (const key of Object.keys(schema.fields)) {\n          paths.push(...findChildPropPathsWithPrevious(value[key], prevValue[key], schema.fields[key], newPath.concat(key), prevPath === null || prevPath === void 0 ? void 0 : prevPath.concat(key), pathWithKeys === null || pathWithKeys === void 0 ? void 0 : pathWithKeys.concat(key)));\n        }\n        return paths;\n      }\n    case 'array':\n      {\n        const paths = [];\n        const prevKeys = getKeysForArrayValue(prevValue);\n        const keys = getKeysForArrayValue(value);\n        for (const [i, val] of value.entries()) {\n          const key = keys[i];\n          const prevIdx = prevKeys.indexOf(key);\n          let prevVal;\n          if (prevIdx === -1) {\n            prevVal = getInitialPropsValue(schema.element);\n          } else {\n            prevVal = prevValue[prevIdx];\n          }\n          paths.push(...findChildPropPathsWithPrevious(val, prevVal, schema.element, newPath.concat(i), prevIdx === -1 ? undefined : prevPath === null || prevPath === void 0 ? void 0 : prevPath.concat(prevIdx), prevIdx === -1 ? undefined : pathWithKeys === null || pathWithKeys === void 0 ? void 0 : pathWithKeys.concat(key)));\n        }\n        return paths;\n      }\n  }\n}\n\nconst ChildrenByPathContext = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createContext({});\nfunction ChildFieldEditable({\n  path\n}) {\n  const childrenByPath = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(ChildrenByPathContext);\n  const child = childrenByPath[JSON.stringify(path)];\n  if (child === undefined) {\n    return null;\n  }\n  return child;\n}\nfunction ComponentBlockRender({\n  componentBlock,\n  element,\n  onChange,\n  children,\n  onRemove\n}) {\n  const getPreviewProps = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {\n    return createGetPreviewProps({\n      kind: 'object',\n      fields: componentBlock.schema\n    }, cb => onChange(cb, true), path => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ChildFieldEditable, {\n      path: path\n    }));\n  }, [onChange, componentBlock]);\n  const previewProps = getPreviewProps(element.props);\n  const childrenByPath = {};\n  let maybeChild;\n  let extraChildren = [];\n  children.forEach(child => {\n    const propPath = child.props.children.props.element.propPath;\n    if (propPath === undefined) {\n      maybeChild = child;\n    } else {\n      const schema = getSchemaAtPropPath(propPath, element.props, componentBlock.schema);\n      if ((schema === null || schema === void 0 ? void 0 : schema.kind) === 'child' && schema.options.kind === 'block' && schema.options.editIn === 'modal') {\n        extraChildren.push(child);\n        return;\n      }\n      childrenByPath[JSON.stringify(propPathWithIndiciesToKeys(propPath, element.props))] = child;\n    }\n  });\n  const ComponentBlockPreview = componentBlock.preview;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(ChildrenByPathContext.Provider, {\n    value: childrenByPath,\n    children: [(0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ComponentBlockPreview, {\n      onRemove: onRemove,\n      ...previewProps\n    }), [ComponentBlockPreview, onRemove, previewProps]), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(\"span\", {\n      className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n        caretColor: 'transparent',\n        '& ::selection': {\n          backgroundColor: 'transparent'\n        },\n        overflow: 'hidden',\n        width: 1,\n        height: 1,\n        position: 'absolute'\n      }),\n      children: [maybeChild, extraChildren]\n    })]\n  });\n}\n\n// note this is written to avoid crashing when the given prop path doesn't exist in the value\n// this is because editor updates happen asynchronously but we have some logic to ensure\n// that updating the props of a component block synchronously updates it\n// (this is primarily to not mess up things like cursors in inputs)\n// this means that sometimes the child elements will be inconsistent with the values\n// so to deal with this, we return a prop path this is \"wrong\" but won't break anything\nfunction propPathWithIndiciesToKeys(propPath, val) {\n  return propPath.map(key => {\n    var _val2;\n    if (typeof key === 'string') {\n      var _val;\n      val = (_val = val) === null || _val === void 0 ? void 0 : _val[key];\n      return key;\n    }\n    if (!Array.isArray(val)) {\n      val = undefined;\n      return '';\n    }\n    const keys = getKeysForArrayValue(val);\n    val = (_val2 = val) === null || _val2 === void 0 ? void 0 : _val2[key];\n    return keys[key];\n  });\n}\n\nfunction ChromefulComponentBlockElement(props) {\n  var _props$componentBlock;\n  const selected = (0,slate_react__WEBPACK_IMPORTED_MODULE_103__.useSelected)();\n  const isValid = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => clientSideValidateProp({\n    kind: 'object',\n    fields: props.componentBlock.schema\n  }, props.elementProps, undefined), [props.componentBlock, props.elementProps]);\n  const [editMode, setEditMode] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n  const onCloseEditMode = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => {\n    setEditMode(false);\n  }, []);\n  const onShowEditMode = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => {\n    setEditMode(true);\n  }, []);\n  const ChromefulToolbar = (_props$componentBlock = props.componentBlock.toolbar) !== null && _props$componentBlock !== void 0 ? _props$componentBlock : DefaultToolbarWithChrome;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(BlockPrimitive, {\n    selected: selected,\n    ...props.attributes,\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n      gap: \"medium\",\n      direction: \"column\",\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(NotEditable, {\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n          casing: \"uppercase\",\n          color: \"neutralSecondary\",\n          weight: \"medium\",\n          size: \"small\",\n          children: props.componentBlock.label\n        })\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(react__WEBPACK_IMPORTED_MODULE_3__.Fragment, {\n        children: [props.renderedBlock, /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ChromefulToolbar, {\n          isValid: isValid,\n          onRemove: props.onRemove,\n          props: props.previewProps,\n          onShowEditMode: onShowEditMode\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_12__.DialogContainer, {\n          onDismiss: () => onCloseEditMode(),\n          children: (() => {\n            if (!editMode) {\n              return;\n            }\n            return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_12__.Dialog, {\n              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Heading, {\n                children: [\"Edit \", props.componentBlock.label]\n              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(FormValue, {\n                props: props.previewProps,\n                onClose: onCloseEditMode\n              })]\n            });\n          })()\n        })]\n      })]\n    })\n  });\n}\n\n/**\n * Wrap block content, delimiting it from surrounding content, and provide a\n * focus indicator because the cursor may not be present.\n */\nconst BlockPrimitive = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function BlockPrimitive({\n  children,\n  selected,\n  ...attributes\n}, ref) {\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n    ...attributes,\n    ref: ref,\n    className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)(blockElementSpacing, {\n      position: 'relative',\n      paddingInlineStart: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.space.xlarge,\n      marginBottom: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.space.xlarge,\n      '::before': {\n        display: 'block',\n        content: '\" \"',\n        backgroundColor: selected ? _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.alias.borderSelected : _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.alias.borderIdle,\n        borderRadius: 4,\n        width: 4,\n        position: 'absolute',\n        left: 0,\n        top: 0,\n        bottom: 0,\n        zIndex: 1\n      }\n    }),\n    children: children\n  });\n});\nfunction DefaultToolbarWithChrome({\n  onShowEditMode,\n  onRemove,\n  isValid\n}) {\n  const stringFormatter = (0,_react_aria_i18n__WEBPACK_IMPORTED_MODULE_102__.useLocalizedStringFormatter)(l10nMessages);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(NotEditable, {\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n      direction: \"column\",\n      gap: \"medium\",\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n        alignItems: \"center\",\n        gap: \"regular\",\n        UNSAFE_style: {\n          userSelect: 'none'\n        },\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n          onPress: () => onShowEditMode(),\n          children: stringFormatter.format('edit')\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n            prominence: \"low\",\n            onPress: onRemove,\n            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n              src: _keystar_ui_icon_icons_trash2Icon__WEBPACK_IMPORTED_MODULE_15__.trash2Icon\n            })\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n            tone: \"critical\",\n            children: stringFormatter.format('delete')\n          })]\n        })]\n      }), !isValid && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_field__WEBPACK_IMPORTED_MODULE_6__.FieldMessage, {\n        children: \"Contains invalid fields. Please edit.\"\n      })]\n    })\n  });\n}\nfunction FormValue({\n  onClose,\n  props\n}) {\n  const stringFormatter = (0,_react_aria_i18n__WEBPACK_IMPORTED_MODULE_102__.useLocalizedStringFormatter)(l10nMessages);\n  const formId = (0,react__WEBPACK_IMPORTED_MODULE_3__.useId)();\n  const [forceValidation, setForceValidation] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(() => previewPropsToValue(props));\n  const previewProps = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => createGetPreviewProps(props.schema, setState, () => undefined), [props.schema])(state);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.Fragment, {\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_slots__WEBPACK_IMPORTED_MODULE_17__.Content, {\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n        id: formId,\n        elementType: \"form\",\n        onSubmit: event => {\n          if (event.target !== event.currentTarget) return;\n          event.preventDefault();\n          if (!clientSideValidateProp(props.schema, state, undefined)) {\n            setForceValidation(true);\n          } else {\n            console.log(valueToUpdater(state, props.schema));\n            setValueToPreviewProps(state, props);\n            onClose();\n          }\n        },\n        direction: \"column\",\n        gap: \"xxlarge\",\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(FormValueContentFromPreviewProps, {\n          ...previewProps,\n          forceValidation: forceValidation\n        })\n      })\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ButtonGroup, {\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.Button, {\n        onPress: onClose,\n        children: stringFormatter.format('cancel')\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.Button, {\n        form: formId,\n        prominence: \"high\",\n        type: \"submit\",\n        children: \"Done\"\n      })]\n    })]\n  });\n}\n\nfunction ChromelessComponentBlockElement(props) {\n  var _props$componentBlock;\n  const hasToolbar = props.componentBlock.toolbar !== null;\n  const ChromelessToolbar = (_props$componentBlock = props.componentBlock.toolbar) !== null && _props$componentBlock !== void 0 ? _props$componentBlock : DefaultToolbarWithoutChrome;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n    ...props.attributes,\n    className: blockElementSpacing,\n    children: hasToolbar ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(BlockPopoverTrigger, {\n      element: props.element,\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n        children: props.renderedBlock\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(BlockPopover, {\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ChromelessToolbar, {\n          onRemove: props.onRemove,\n          props: props.previewProps\n        })\n      })]\n    }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n      children: props.renderedBlock\n    })\n  });\n}\nfunction DefaultToolbarWithoutChrome({\n  onRemove\n}) {\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n      onPress: onRemove,\n      margin: \"regular\",\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n        src: _keystar_ui_icon_icons_trashIcon__WEBPACK_IMPORTED_MODULE_48__.trashIcon\n      })\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n      tone: \"critical\",\n      children: \"Remove\"\n    })]\n  });\n}\n\nfunction findChildPropPathsForProp(value, schema, path) {\n  switch (schema.kind) {\n    case 'form':\n      return [];\n    case 'child':\n      return [{\n        path: path,\n        options: schema.options\n      }];\n    case 'conditional':\n      return findChildPropPathsForProp(value.value, schema.values[value.discriminant], path.concat('value'));\n    case 'object':\n      {\n        const paths = [];\n        Object.keys(schema.fields).forEach(key => {\n          paths.push(...findChildPropPathsForProp(value[key], schema.fields[key], path.concat(key)));\n        });\n        return paths;\n      }\n    case 'array':\n      {\n        const paths = [];\n        value.forEach((val, i) => {\n          paths.push(...findChildPropPathsForProp(val, schema.element, path.concat(i)));\n        });\n        return paths;\n      }\n  }\n}\nfunction findChildPropPaths(value, props) {\n  const propPaths = findChildPropPathsForProp(value, {\n    kind: 'object',\n    fields: props\n  }, []);\n  if (!propPaths.length) {\n    return [{\n      path: undefined,\n      options: {\n        kind: 'inline',\n        placeholder: ''\n      }\n    }];\n  }\n  return propPaths;\n}\n\nfunction getAncestorComponentBlock(editor) {\n  if (editor.selection) {\n    const ancestorEntry = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n      match: node => isBlock(node) && node.type !== 'paragraph'\n    });\n    if (ancestorEntry && (ancestorEntry[0].type === 'component-block-prop' || ancestorEntry[0].type === 'component-inline-prop')) {\n      return {\n        isInside: true,\n        componentBlock: slate__WEBPACK_IMPORTED_MODULE_104__.Editor.parent(editor, ancestorEntry[1]),\n        prop: ancestorEntry\n      };\n    }\n  }\n  return {\n    isInside: false\n  };\n}\nconst alreadyNormalizedThings = new WeakMap();\nfunction normalizeNodeWithinComponentProp([node, path], editor, fieldOptions) {\n  let alreadyNormalizedNodes = alreadyNormalizedThings.get(fieldOptions);\n  if (!alreadyNormalizedNodes) {\n    alreadyNormalizedNodes = new WeakSet();\n    alreadyNormalizedThings.set(fieldOptions, alreadyNormalizedNodes);\n  }\n  if (alreadyNormalizedNodes.has(node)) {\n    return false;\n  }\n  let didNormalization = false;\n  if (fieldOptions.inlineMarks !== 'inherit' && slate__WEBPACK_IMPORTED_MODULE_104__.Text.isText(node)) {\n    didNormalization = normalizeTextBasedOnInlineMarksAndSoftBreaks([node, path], editor, fieldOptions.inlineMarks, fieldOptions.softBreaks);\n  }\n  if (slate__WEBPACK_IMPORTED_MODULE_104__.Element.isElement(node)) {\n    let childrenHasChanged = node.children.map((node, i) => normalizeNodeWithinComponentProp([node, [...path, i]], editor, fieldOptions))\n    // .map then .some because we don't want to exit early\n    .some(x => x);\n    if (fieldOptions.kind === 'block') {\n      if (node.type === 'component-block') {\n        if (!fieldOptions.componentBlocks) {\n          slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n            at: path\n          });\n          didNormalization = true;\n        }\n      } else {\n        didNormalization = normalizeElementBasedOnDocumentFeatures([node, path], editor, fieldOptions.documentFeatures) || childrenHasChanged;\n      }\n    } else {\n      didNormalization = normalizeInlineBasedOnLinks([node, path], editor, fieldOptions.documentFeatures.links);\n    }\n  }\n  if (didNormalization === false) {\n    alreadyNormalizedNodes.add(node);\n  }\n  return didNormalization;\n}\nfunction canSchemaContainChildField(rootSchema) {\n  const queue = new Set([rootSchema]);\n  for (const schema of queue) {\n    if (schema.kind === 'form') ; else if (schema.kind === 'child') {\n      return true;\n    } else if (schema.kind === 'array') {\n      queue.add(schema.element);\n    } else if (schema.kind === 'object') {\n      for (const innerProp of Object.values(schema.fields)) {\n        queue.add(innerProp);\n      }\n    } else if (schema.kind === 'conditional') {\n      for (const innerProp of Object.values(schema.values)) {\n        queue.add(innerProp);\n      }\n    } else {\n      (0,emery__WEBPACK_IMPORTED_MODULE_1__.assertNever)(schema);\n    }\n  }\n  return false;\n}\nfunction doesSchemaOnlyEverContainASingleChildField(rootSchema) {\n  const queue = new Set([rootSchema]);\n  let hasFoundChildField = false;\n  for (const schema of queue) {\n    if (schema.kind === 'form') ; else if (schema.kind === 'child') {\n      if (hasFoundChildField) {\n        return false;\n      }\n      hasFoundChildField = true;\n    } else if (schema.kind === 'array') {\n      if (canSchemaContainChildField(schema.element)) {\n        return false;\n      }\n    } else if (schema.kind === 'object') {\n      for (const innerProp of Object.values(schema.fields)) {\n        queue.add(innerProp);\n      }\n    } else if (schema.kind === 'conditional') {\n      for (const innerProp of Object.values(schema.values)) {\n        queue.add(innerProp);\n      }\n    } else {\n      (0,emery__WEBPACK_IMPORTED_MODULE_1__.assertNever)(schema);\n    }\n  }\n  return hasFoundChildField;\n}\nfunction findArrayFieldsWithSingleChildField(schema, value) {\n  const propPaths = [];\n  traverseProps(schema, value, (schema, value, path) => {\n    if (schema.kind === 'array' && doesSchemaOnlyEverContainASingleChildField(schema.element)) {\n      propPaths.push([path, schema]);\n    }\n  });\n  return propPaths;\n}\nfunction isEmptyChildFieldNode(element) {\n  const firstChild = element.children[0];\n  return element.children.length === 1 && (element.type === 'component-inline-prop' && firstChild.type === undefined && firstChild.text === '' || element.type === 'component-block-prop' && firstChild.type === 'paragraph' && firstChild.children.length === 1 && firstChild.children[0].type === undefined && firstChild.children[0].text === '');\n}\nfunction withComponentBlocks(blockComponents, editorDocumentFeatures, editor) {\n  // note that conflicts between the editor document features\n  // and the child field document features are dealt with elsewhere\n  const memoizedGetDocumentFeaturesForChildField = (0,_emotion_weak_memoize__WEBPACK_IMPORTED_MODULE_49__[\"default\"])(options => {\n    return getDocumentFeaturesForChildField(editorDocumentFeatures, options);\n  });\n  const {\n    normalizeNode,\n    deleteBackward,\n    insertBreak\n  } = editor;\n  editor.deleteBackward = unit => {\n    if (editor.selection) {\n      const ancestorComponentBlock = getAncestorComponentBlock(editor);\n      if (ancestorComponentBlock.isInside && slate__WEBPACK_IMPORTED_MODULE_104__.Range.isCollapsed(editor.selection) && slate__WEBPACK_IMPORTED_MODULE_104__.Editor.isStart(editor, editor.selection.anchor, ancestorComponentBlock.prop[1]) && ancestorComponentBlock.prop[1][ancestorComponentBlock.prop[1].length - 1] === 0) {\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n          at: ancestorComponentBlock.componentBlock[1]\n        });\n        return;\n      }\n    }\n    deleteBackward(unit);\n  };\n  editor.insertBreak = () => {\n    const ancestorComponentBlock = getAncestorComponentBlock(editor);\n    if (editor.selection && ancestorComponentBlock.isInside) {\n      const {\n        prop: [componentPropNode, componentPropPath],\n        componentBlock: [componentBlockNode, componentBlockPath]\n      } = ancestorComponentBlock;\n      const isLastProp = componentPropPath[componentPropPath.length - 1] === componentBlockNode.children.length - 1;\n      if (componentPropNode.type === 'component-block-prop') {\n        const [[paragraphNode, paragraphPath]] = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.nodes(editor, {\n          match: node => node.type === 'paragraph'\n        });\n        const isLastParagraph = paragraphPath[paragraphPath.length - 1] === componentPropNode.children.length - 1;\n        if (slate__WEBPACK_IMPORTED_MODULE_104__.Node.string(paragraphNode) === '' && isLastParagraph) {\n          if (isLastProp) {\n            slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.moveNodes(editor, {\n              at: paragraphPath,\n              to: slate__WEBPACK_IMPORTED_MODULE_104__.Path.next(ancestorComponentBlock.componentBlock[1])\n            });\n          } else {\n            slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.move(editor, {\n              distance: 1,\n              unit: 'line'\n            });\n            slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n              at: paragraphPath\n            });\n          }\n          return;\n        }\n      }\n      if (componentPropNode.type === 'component-inline-prop') {\n        slate__WEBPACK_IMPORTED_MODULE_104__.Editor.withoutNormalizing(editor, () => {\n          const componentBlock = blockComponents[componentBlockNode.component];\n          if (componentPropNode.propPath !== undefined && componentBlock !== undefined) {\n            const rootSchema = {\n              kind: 'object',\n              fields: componentBlock.schema\n            };\n            const ancestorFields = getAncestorSchemas(rootSchema, componentPropNode.propPath, componentBlockNode.props);\n            const idx = [...ancestorFields].reverse().findIndex(item => item.kind === 'array');\n            if (idx !== -1) {\n              const arrayFieldIdx = ancestorFields.length - 1 - idx;\n              const arrayField = ancestorFields[arrayFieldIdx];\n              (0,emery__WEBPACK_IMPORTED_MODULE_1__.assert)(arrayField.kind === 'array');\n              const val = getValueAtPropPath(componentBlockNode.props, componentPropNode.propPath.slice(0, arrayFieldIdx));\n              if (doesSchemaOnlyEverContainASingleChildField(arrayField.element)) {\n                if (slate__WEBPACK_IMPORTED_MODULE_104__.Node.string(componentPropNode) === '' && val.length - 1 === componentPropNode.propPath[arrayFieldIdx]) {\n                  slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n                    at: componentPropPath\n                  });\n                  if (isLastProp) {\n                    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.insertNodes(editor, {\n                      type: 'paragraph',\n                      children: [{\n                        text: ''\n                      }]\n                    }, {\n                      at: slate__WEBPACK_IMPORTED_MODULE_104__.Path.next(componentBlockPath)\n                    });\n                    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.select(editor, slate__WEBPACK_IMPORTED_MODULE_104__.Path.next(componentBlockPath));\n                  } else {\n                    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.move(editor, {\n                      distance: 1,\n                      unit: 'line'\n                    });\n                  }\n                } else {\n                  insertBreak();\n                }\n                return;\n              }\n            }\n          }\n          slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.splitNodes(editor, {\n            always: true\n          });\n          const splitNodePath = slate__WEBPACK_IMPORTED_MODULE_104__.Path.next(componentPropPath);\n          if (isLastProp) {\n            slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.moveNodes(editor, {\n              at: splitNodePath,\n              to: slate__WEBPACK_IMPORTED_MODULE_104__.Path.next(componentBlockPath)\n            });\n          } else {\n            moveChildren(editor, splitNodePath, [...slate__WEBPACK_IMPORTED_MODULE_104__.Path.next(splitNodePath), 0]);\n            slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n              at: splitNodePath\n            });\n          }\n        });\n        return;\n      }\n    }\n    insertBreak();\n  };\n  editor.normalizeNode = entry => {\n    const [node, path] = entry;\n    if (node.type === 'component-inline-prop' && !node.propPath && (node.children.length !== 1 || !slate__WEBPACK_IMPORTED_MODULE_104__.Text.isText(node.children[0]) || node.children[0].text !== '')) {\n      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n        at: path\n      });\n      return;\n    }\n    if (node.type === 'component-block') {\n      const componentBlock = blockComponents[node.component];\n      if (componentBlock) {\n        const rootSchema = {\n          kind: 'object',\n          fields: componentBlock.schema\n        };\n        const updatedProps = addMissingFields(node.props, rootSchema);\n        if (updatedProps !== node.props) {\n          slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.setNodes(editor, {\n            props: updatedProps\n          }, {\n            at: path\n          });\n          return;\n        }\n        for (const [propPath, arrayField] of findArrayFieldsWithSingleChildField(rootSchema, node.props)) {\n          if (node.children.length === 1 && node.children[0].type === 'component-inline-prop' && node.children[0].propPath === undefined) {\n            break;\n          }\n          const nodesWithin = [];\n          for (const [idx, childNode] of node.children.entries()) {\n            if ((childNode.type === 'component-block-prop' || childNode.type === 'component-inline-prop') && childNode.propPath !== undefined) {\n              const subPath = childNode.propPath.concat();\n              while (subPath.length) {\n                if (typeof subPath.pop() === 'number') break;\n              }\n              if (areArraysEqual(propPath, subPath)) {\n                nodesWithin.push([idx, childNode]);\n              }\n            }\n          }\n          const arrVal = getValueAtPropPath(node.props, propPath);\n          const prevKeys = getKeysForArrayValue(arrVal);\n          const prevKeysSet = new Set(prevKeys);\n          const alreadyUsedIndicies = new Set();\n          const newVal = [];\n          const newKeys = [];\n          const getNewKey = () => {\n            let key = getNewArrayElementKey();\n            while (prevKeysSet.has(key)) {\n              key = getNewArrayElementKey();\n            }\n            return key;\n          };\n          for (const [, node] of nodesWithin) {\n            const idxFromValue = node.propPath[propPath.length];\n            (0,emery__WEBPACK_IMPORTED_MODULE_1__.assert)(typeof idxFromValue === 'number');\n            if (arrVal.length <= idxFromValue || alreadyUsedIndicies.has(idxFromValue) && isEmptyChildFieldNode(node)) {\n              newVal.push(getInitialPropsValue(arrayField.element));\n              newKeys.push(getNewKey());\n            } else {\n              alreadyUsedIndicies.add(idxFromValue);\n              newVal.push(arrVal[idxFromValue]);\n              newKeys.push(alreadyUsedIndicies.has(idxFromValue) ? getNewKey() : prevKeys[idxFromValue]);\n            }\n          }\n          setKeysForArrayValue(newVal, newKeys);\n          if (!areArraysEqual(arrVal, newVal)) {\n            const transformedProps = replaceValueAtPropPath(rootSchema, node.props, newVal, propPath);\n            slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.setNodes(editor, {\n              props: transformedProps\n            }, {\n              at: path\n            });\n            for (const [idx, [idxInChildrenOfBlock, nodeWithin]] of nodesWithin.entries()) {\n              const newPropPath = [...nodeWithin.propPath];\n              newPropPath[propPath.length] = idx;\n              slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.setNodes(editor, {\n                propPath: newPropPath\n              }, {\n                at: [...path, idxInChildrenOfBlock]\n              });\n            }\n            return;\n          }\n        }\n        const missingKeys = new Map(findChildPropPaths(node.props, componentBlock.schema).map(x => [JSON.stringify(x.path), x.options.kind]));\n        node.children.forEach(node => {\n          (0,emery__WEBPACK_IMPORTED_MODULE_1__.assert)(node.type === 'component-block-prop' || node.type === 'component-inline-prop');\n          missingKeys.delete(JSON.stringify(node.propPath));\n        });\n        if (missingKeys.size) {\n          slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.insertNodes(editor, [...missingKeys].map(([prop, kind]) => ({\n            type: `component-${kind}-prop`,\n            propPath: prop ? JSON.parse(prop) : prop,\n            children: [{\n              text: ''\n            }]\n          })), {\n            at: [...path, node.children.length]\n          });\n          return;\n        }\n        const foundProps = new Set();\n        const stringifiedInlinePropPaths = {};\n        findChildPropPaths(node.props, blockComponents[node.component].schema).forEach((x, index) => {\n          stringifiedInlinePropPaths[JSON.stringify(x.path)] = {\n            options: x.options,\n            index\n          };\n        });\n        for (const [index, childNode] of node.children.entries()) {\n          if (\n          // children that are not these will be handled by\n          // the generic allowedChildren normalization\n          childNode.type !== 'component-inline-prop' && childNode.type !== 'component-block-prop') {\n            continue;\n          }\n          const childPath = [...path, index];\n          const stringifiedPropPath = JSON.stringify(childNode.propPath);\n          if (stringifiedInlinePropPaths[stringifiedPropPath] === undefined) {\n            slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n              at: childPath\n            });\n            return;\n          }\n          if (foundProps.has(stringifiedPropPath)) {\n            slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n              at: childPath\n            });\n            return;\n          }\n          foundProps.add(stringifiedPropPath);\n          const propInfo = stringifiedInlinePropPaths[stringifiedPropPath];\n          const expectedIndex = propInfo.index;\n          if (index !== expectedIndex) {\n            slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.moveNodes(editor, {\n              at: childPath,\n              to: [...path, expectedIndex]\n            });\n            return;\n          }\n          const expectedChildNodeType = `component-${propInfo.options.kind}-prop`;\n          if (childNode.type !== expectedChildNodeType) {\n            slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.setNodes(editor, {\n              type: expectedChildNodeType\n            }, {\n              at: childPath\n            });\n            return;\n          }\n          const documentFeatures = memoizedGetDocumentFeaturesForChildField(propInfo.options);\n          if (normalizeNodeWithinComponentProp([childNode, childPath], editor, documentFeatures)) {\n            return;\n          }\n        }\n      }\n    }\n    normalizeNode(entry);\n  };\n  return editor;\n}\n\n// the only thing that this will fix is a new field being added to an object field, nothing else.\nfunction addMissingFields(value, schema) {\n  if (schema.kind === 'child' || schema.kind === 'form') {\n    return value;\n  }\n  if (schema.kind === 'conditional') {\n    const conditionalValue = value;\n    const updatedInnerValue = addMissingFields(conditionalValue.value, schema.values[conditionalValue.discriminant.toString()]);\n    if (updatedInnerValue === conditionalValue.value) {\n      return value;\n    }\n    return {\n      discriminant: conditionalValue.discriminant,\n      value: updatedInnerValue\n    };\n  }\n  if (schema.kind === 'array') {\n    const arrValue = value;\n    const newArrValue = arrValue.map(x => addMissingFields(x, schema.element));\n    if (areArraysEqual(arrValue, newArrValue)) {\n      return value;\n    }\n    return newArrValue;\n  }\n  if (schema.kind === 'object') {\n    const objectValue = value;\n    let hasChanged = false;\n    const newObjectValue = {};\n    for (const [key, innerSchema] of Object.entries(schema.fields)) {\n      const innerValue = objectValue[key];\n      if (innerValue === undefined) {\n        hasChanged = true;\n        newObjectValue[key] = getInitialPropsValue(innerSchema);\n        continue;\n      }\n      const newInnerValue = addMissingFields(innerValue, innerSchema);\n      if (newInnerValue !== innerValue) {\n        hasChanged = true;\n      }\n      newObjectValue[key] = newInnerValue;\n    }\n    if (hasChanged) {\n      return newObjectValue;\n    }\n    return value;\n  }\n  (0,emery__WEBPACK_IMPORTED_MODULE_1__.assertNever)(schema);\n}\n\nfunction ComponentInlineProp(props) {\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"span\", {\n    ...props.attributes,\n    children: props.children\n  });\n}\nfunction getInitialValue(type, componentBlock) {\n  const props = getInitialPropsValue({\n    kind: 'object',\n    fields: componentBlock.schema\n  });\n  return {\n    type: 'component-block',\n    component: type,\n    props,\n    children: findChildPropPaths(props, componentBlock.schema).map(x => ({\n      type: `component-${x.options.kind}-prop`,\n      propPath: x.path,\n      children: [x.options.kind === 'block' ? {\n        type: 'paragraph',\n        children: [{\n          text: ''\n        }]\n      } : {\n        text: ''\n      }]\n    }))\n  };\n}\nfunction insertComponentBlock(editor, componentBlocks, componentBlock) {\n  const node = getInitialValue(componentBlock, componentBlocks[componentBlock]);\n  insertNodesButReplaceIfSelectionIsAtEmptyParagraphOrHeading(editor, node);\n  const componentBlockEntry = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n    match: node => node.type === 'component-block'\n  });\n  if (componentBlockEntry) {\n    const start = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.start(editor, componentBlockEntry[1]);\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.setSelection(editor, {\n      anchor: start,\n      focus: start\n    });\n  }\n}\nconst ComponentBlocksElement = ({\n  attributes,\n  children,\n  element: __elementToGetPath\n}) => {\n  const editor = (0,slate_react__WEBPACK_IMPORTED_MODULE_103__.useSlateStatic)();\n  const [currentElement, setElement] = useElementWithSetNodes(editor, __elementToGetPath);\n  const blockComponents = useDocumentEditorConfig().componentBlocks;\n  const componentBlock = blockComponents[currentElement.component];\n  const propsWithChildFields = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {\n    if (!componentBlock) return;\n    const blockChildrenByPath = new Map();\n    for (const child of currentElement.children) {\n      if (child.type === 'component-block-prop' && child.propPath) {\n        blockChildrenByPath.set(JSON.stringify(child.propPath), child.children);\n      }\n    }\n    if (!blockChildrenByPath.size) return currentElement.props;\n    return transformProps({\n      kind: 'object',\n      fields: componentBlock.schema\n    }, currentElement.props, {\n      child(schema, value, propPath) {\n        if (schema.options.kind === 'block') {\n          const key = JSON.stringify(propPath);\n          const children = blockChildrenByPath.get(key);\n          if (children) {\n            return children.map(cloneDescendent);\n          }\n        }\n        return value;\n      }\n    });\n  }, [componentBlock, currentElement]);\n  const elementToGetPathRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)({\n    __elementToGetPath,\n    currentElement,\n    propsWithChildFields\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    elementToGetPathRef.current = {\n      __elementToGetPath,\n      currentElement,\n      propsWithChildFields\n    };\n  });\n  const onRemove = useEventCallback(() => {\n    const path = slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.findPath(editor, __elementToGetPath);\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n      at: path\n    });\n  });\n  const onPropsChange = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((cb, ignoreChildFields) => {\n    const prevProps = elementToGetPathRef.current.propsWithChildFields;\n    updateComponentBlockElementProps(editor, componentBlock, prevProps, cb(prevProps), slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.findPath(editor, elementToGetPathRef.current.__elementToGetPath), setElement, ignoreChildFields);\n  }, [setElement, componentBlock, editor]);\n  const getToolbarPreviewProps = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {\n    if (!componentBlock) {\n      return () => {\n        throw new Error('expected component block to exist when called');\n      };\n    }\n    return createGetPreviewProps({\n      kind: 'object',\n      fields: componentBlock.schema\n    }, cb => onPropsChange(cb, false), () => undefined);\n  }, [componentBlock, onPropsChange]);\n  if (!componentBlock) {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(\"div\", {\n      style: {\n        border: 'red 4px solid',\n        padding: 8\n      },\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"pre\", {\n        contentEditable: false,\n        style: {\n          userSelect: 'none'\n        },\n        children: `The block \"${currentElement.component}\" no longer exists.\n\nProps:\n\n${JSON.stringify(currentElement.props, null, 2)}\n\nContent:`\n      }), children]\n    });\n  }\n  const toolbarPreviewProps = getToolbarPreviewProps(propsWithChildFields);\n  const renderedBlock = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ComponentBlockRender, {\n    children: children,\n    componentBlock: componentBlock,\n    element: currentElement,\n    onChange: onPropsChange,\n    onRemove: onRemove\n  });\n  return componentBlock.chromeless ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ChromelessComponentBlockElement, {\n    element: __elementToGetPath,\n    attributes: attributes,\n    renderedBlock: renderedBlock,\n    componentBlock: componentBlock,\n    onRemove: onRemove,\n    previewProps: toolbarPreviewProps\n  }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ChromefulComponentBlockElement, {\n    attributes: attributes,\n    children: children,\n    componentBlock: componentBlock,\n    onRemove: onRemove,\n    previewProps: toolbarPreviewProps,\n    renderedBlock: renderedBlock,\n    elementProps: currentElement.props\n  });\n};\n\nfunction insertDivider(editor) {\n  insertNodesButReplaceIfSelectionIsAtEmptyParagraphOrHeading(editor, {\n    type: 'divider',\n    children: [{\n      text: ''\n    }]\n  });\n  slate__WEBPACK_IMPORTED_MODULE_104__.Editor.insertNode(editor, {\n    type: 'paragraph',\n    children: [{\n      text: ''\n    }]\n  });\n}\nconst DividerButton = () => {\n  const {\n    editor,\n    dividers: {\n      isDisabled\n    }\n  } = useToolbarState();\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n    prominence: \"low\",\n    isDisabled: isDisabled,\n    onPress: () => {\n      insertDivider(editor);\n    },\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n      src: _keystar_ui_icon_icons_minusIcon__WEBPACK_IMPORTED_MODULE_50__.minusIcon\n    })\n  }), [editor, isDisabled]);\n};\nconst dividerButton = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n  delay: 200,\n  children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(DividerButton, {}), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n      children: \"Divider\"\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Kbd, {\n      children: \"---\"\n    })]\n  })]\n});\nfunction DividerElement({\n  attributes,\n  children\n}) {\n  const selected = (0,slate_react__WEBPACK_IMPORTED_MODULE_103__.useSelected)();\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(\"div\", {\n    ...attributes,\n    style: {\n      caretColor: 'transparent'\n    },\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"hr\", {\n      style: {\n        backgroundColor: selected ? _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.alias.borderSelected : _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.alias.borderIdle\n      }\n    }), children]\n  });\n}\n\nconst LayoutContainer = ({\n  attributes,\n  children,\n  element\n}) => {\n  const editor = (0,slate_react__WEBPACK_IMPORTED_MODULE_103__.useSlateStatic)();\n  const layout = element.layout;\n  const layoutOptions = useDocumentEditorConfig().documentFeatures.layouts;\n  const currentLayoutIndex = layoutOptions.findIndex(x => x.toString() === layout.toString());\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n    className: blockElementSpacing,\n    ...attributes,\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(BlockPopoverTrigger, {\n      element: element,\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n        className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n          columnGap: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.space.regular,\n          display: 'grid'\n        }),\n        style: {\n          gridTemplateColumns: layout.map(x => `${x}fr`).join(' ')\n        },\n        children: children\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(BlockPopover, {\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n          padding: \"regular\",\n          gap: \"regular\",\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_action_group__WEBPACK_IMPORTED_MODULE_26__.ActionGroup, {\n            selectionMode: \"single\",\n            prominence: \"low\",\n            density: \"compact\",\n            onAction: key => {\n              const path = slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.findPath(editor, element);\n              const layoutOption = layoutOptions[key];\n              slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.setNodes(editor, {\n                type: 'layout',\n                layout: layoutOption\n              }, {\n                at: path\n              });\n              slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.focus(editor);\n            },\n            selectedKeys: currentLayoutIndex !== -1 ? [currentLayoutIndex.toString()] : [],\n            children: layoutOptions.map((layoutOption, i) => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_action_group__WEBPACK_IMPORTED_MODULE_26__.Item, {\n              children: makeLayoutIcon(layoutOption)\n            }, i))\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ToolbarSeparator, {}), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n              prominence: \"low\",\n              onPress: () => {\n                const path = slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.findPath(editor, element);\n                slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n                  at: path\n                });\n              },\n              children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n                src: _keystar_ui_icon_icons_trash2Icon__WEBPACK_IMPORTED_MODULE_15__.trash2Icon\n              })\n            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n              tone: \"critical\",\n              children: \"Remove\"\n            })]\n          })]\n        })\n      })]\n    })\n  });\n};\nconst LayoutArea = ({\n  attributes,\n  children\n}) => {\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n    className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n      borderColor: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.border.neutral,\n      borderRadius: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.radius.regular,\n      borderStyle: 'dashed',\n      borderWidth: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.border.regular,\n      padding: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.space.medium\n    }),\n    ...attributes,\n    children: children\n  });\n};\nconst insertLayout = (editor, layout) => {\n  insertNodesButReplaceIfSelectionIsAtEmptyParagraphOrHeading(editor, [{\n    type: 'layout',\n    layout,\n    children: [{\n      type: 'layout-area',\n      children: [{\n        type: 'paragraph',\n        children: [{\n          text: ''\n        }]\n      }]\n    }]\n  }]);\n  const layoutEntry = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n    match: x => x.type === 'layout'\n  });\n  if (layoutEntry) {\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.select(editor, [...layoutEntry[1], 0]);\n  }\n};\n\n// Utils\n// ------------------------------\n\nfunction makeLayoutIcon(ratios) {\n  const size = 16;\n  const element = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n    role: \"img\",\n    className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n      display: 'grid',\n      gridTemplateColumns: ratios.map(r => `${r}fr`).join(' '),\n      gap: 2,\n      width: size,\n      height: size\n    }),\n    children: ratios.map((_, i) => {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n        className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n          backgroundColor: 'currentcolor',\n          borderRadius: 1\n        })\n      }, i);\n    })\n  });\n  return element;\n}\nconst layoutsIcon = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n  src: _keystar_ui_icon_icons_columnsIcon__WEBPACK_IMPORTED_MODULE_51__.columnsIcon\n});\nconst LayoutsButton = ({\n  layouts\n}) => {\n  const {\n    editor,\n    layouts: {\n      isSelected\n    }\n  } = useToolbarState();\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n      prominence: \"low\",\n      isSelected: isSelected,\n      onPress: () => {\n        if (isElementActive(editor, 'layout')) {\n          slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n            match: node => node.type === 'layout'\n          });\n        } else {\n          insertLayout(editor, layouts[0]);\n        }\n        slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.focus(editor);\n      },\n      children: layoutsIcon\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n      children: \"Layouts\"\n    })]\n  }), [editor, isSelected, layouts]);\n};\n\nconst toggleList = (editor, format) => {\n  const listAbove = getListTypeAbove(editor);\n  const isActive = isElementActive(editor, format) && (listAbove === 'none' || listAbove === format);\n  slate__WEBPACK_IMPORTED_MODULE_104__.Editor.withoutNormalizing(editor, () => {\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n      match: isListNode,\n      split: true,\n      mode: isActive ? 'all' : 'lowest'\n    });\n    if (!isActive) {\n      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.wrapNodes(editor, {\n        type: format,\n        children: []\n      }, {\n        match: x => x.type !== 'list-item-content' && isBlock(x)\n      });\n    }\n  });\n};\nfunction ListButtons(props) {\n  const {\n    editor,\n    lists\n  } = useToolbarState();\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {\n    const disabledKeys = [];\n    if (lists.ordered.isDisabled) disabledKeys.push('ordered');\n    if (lists.unordered.isDisabled) disabledKeys.push('unordered');\n    const selectedKeys = [];\n    if (lists.ordered.isSelected) selectedKeys.push('ordered');\n    if (lists.unordered.isSelected) selectedKeys.push('unordered');\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_action_group__WEBPACK_IMPORTED_MODULE_26__.ActionGroup, {\n      flexShrink: 0,\n      \"aria-label\": \"Lists\",\n      selectionMode: \"single\",\n      buttonLabelBehavior: \"hide\",\n      density: \"compact\"\n      // overflowMode=\"collapse\"\n      ,\n      prominence: \"low\",\n      summaryIcon: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n        src: _keystar_ui_icon_icons_listIcon__WEBPACK_IMPORTED_MODULE_52__.listIcon\n      }),\n      selectedKeys: selectedKeys,\n      disabledKeys: disabledKeys,\n      onAction: key => {\n        const format = `${key}-list`;\n        toggleList(editor, format);\n        slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.focus(editor);\n      },\n      children: [props.lists.unordered && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_action_group__WEBPACK_IMPORTED_MODULE_26__.Item, {\n        textValue: \"Bullet List (- )\",\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n          src: _keystar_ui_icon_icons_listIcon__WEBPACK_IMPORTED_MODULE_52__.listIcon\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n          children: \"Bullet List\"\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Kbd, {\n          children: \"-\\u23B5\"\n        })]\n      }, \"unordered\"), props.lists.ordered && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_action_group__WEBPACK_IMPORTED_MODULE_26__.Item, {\n        textValue: \"Numbered List (1.)\",\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n          src: _keystar_ui_icon_icons_listOrderedIcon__WEBPACK_IMPORTED_MODULE_53__.listOrderedIcon\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n          children: \"Numbered List\"\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Kbd, {\n          children: \"1.\\u23B5\"\n        })]\n      }, \"ordered\")].filter(x => x !== false)\n    });\n  }, [editor, lists.ordered.isDisabled, lists.ordered.isSelected, lists.unordered.isDisabled, lists.unordered.isSelected, props.lists.ordered, props.lists.unordered]);\n}\nfunction nestList(editor) {\n  const block = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n    match: isBlock\n  });\n  if (!block || block[0].type !== 'list-item-content') {\n    return false;\n  }\n  const listItemPath = slate__WEBPACK_IMPORTED_MODULE_104__.Path.parent(block[1]);\n  // we're the first item in the list therefore we can't nest\n  if (listItemPath[listItemPath.length - 1] === 0) {\n    return false;\n  }\n  const previousListItemPath = slate__WEBPACK_IMPORTED_MODULE_104__.Path.previous(listItemPath);\n  const previousListItemNode = slate__WEBPACK_IMPORTED_MODULE_104__.Node.get(editor, previousListItemPath);\n  if (previousListItemNode.children.length !== 1) {\n    // there's a list nested inside our previous sibling list item so move there\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.moveNodes(editor, {\n      at: listItemPath,\n      to: [...previousListItemPath, previousListItemNode.children.length - 1, previousListItemNode.children[previousListItemNode.children.length - 1].children.length]\n    });\n    return true;\n  }\n  const type = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.parent(editor, slate__WEBPACK_IMPORTED_MODULE_104__.Path.parent(block[1]))[0].type;\n  slate__WEBPACK_IMPORTED_MODULE_104__.Editor.withoutNormalizing(editor, () => {\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.wrapNodes(editor, {\n      type,\n      children: []\n    }, {\n      at: listItemPath\n    });\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.moveNodes(editor, {\n      to: [...previousListItemPath, previousListItemNode.children.length],\n      at: listItemPath\n    });\n  });\n  return true;\n}\nfunction unnestList(editor) {\n  const block = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n    match: isBlock\n  });\n  if (block && block[0].type === 'list-item-content') {\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n      match: isListNode,\n      split: true\n    });\n    return true;\n  }\n  return false;\n}\n\nfunction getUploadedFileObject(accept) {\n  return new Promise(resolve => {\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.accept = accept;\n    input.onchange = () => {\n      var _input$files;\n      const file = (_input$files = input.files) === null || _input$files === void 0 ? void 0 : _input$files[0];\n      if (file) {\n        resolve(file);\n      }\n    };\n    document.body.appendChild(input);\n    input.click();\n  });\n}\nasync function getUploadedFile(accept) {\n  const file = await getUploadedFileObject(accept);\n  if (!file) return undefined;\n  return {\n    content: new Uint8Array(await file.arrayBuffer()),\n    filename: file.name\n  };\n}\nfunction getUploadedImage() {\n  return getUploadedFile('image/*');\n}\nfunction useObjectURL(data) {\n  const [url, setUrl] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    if (data) {\n      const url = URL.createObjectURL(new Blob([data]));\n      setUrl(url);\n      return () => URL.revokeObjectURL(url);\n    } else {\n      setUrl(null);\n    }\n  }, [data]);\n  return url;\n}\n\n// TODO: button labels (\"Choose file\", \"Remove\") need i18n support\nfunction ImageFieldInput(props) {\n  var _props$validation, _props$validation2;\n  const {\n    value\n  } = props;\n  const [blurred, onBlur] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useReducer)(() => true, false);\n  const isInEditor = useIsInDocumentEditor();\n  const objectUrl = useObjectURL(value === null ? null : value.data);\n  const labelId = (0,react__WEBPACK_IMPORTED_MODULE_3__.useId)();\n  const descriptionId = (0,react__WEBPACK_IMPORTED_MODULE_3__.useId)();\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n    \"aria-describedby\": props.description ? descriptionId : undefined,\n    \"aria-labelledby\": labelId,\n    direction: \"column\",\n    gap: \"medium\",\n    role: \"group\",\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_field__WEBPACK_IMPORTED_MODULE_6__.FieldLabel, {\n      id: labelId,\n      elementType: \"span\",\n      isRequired: (_props$validation = props.validation) === null || _props$validation === void 0 ? void 0 : _props$validation.isRequired,\n      children: props.label\n    }), props.description && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n      size: \"small\",\n      color: \"neutralSecondary\",\n      id: descriptionId,\n      children: props.description\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ButtonGroup, {\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n        onPress: async () => {\n          const image = await getUploadedImage();\n          if (image) {\n            var _image$filename$match;\n            const extension = (_image$filename$match = image.filename.match(/\\.([^.]+$)/)) === null || _image$filename$match === void 0 ? void 0 : _image$filename$match[1];\n            if (extension) {\n              props.onChange({\n                data: image.content,\n                extension,\n                filename: image.filename\n              });\n            }\n          }\n        },\n        children: \"Choose file\"\n      }), value !== null && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n        prominence: \"low\",\n        onPress: () => {\n          props.onChange(null);\n          onBlur();\n        },\n        children: \"Remove\"\n      })]\n    }), objectUrl && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Box, {\n      alignSelf: \"start\",\n      backgroundColor: \"canvas\",\n      borderRadius: \"regular\",\n      border: \"neutral\",\n      padding: \"regular\",\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"img\", {\n        src: objectUrl,\n        alt: \"\",\n        style: {\n          display: 'block',\n          maxHeight: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.alias.singleLineWidth,\n          maxWidth: '100%'\n        }\n      })\n    }), isInEditor && value !== null && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_text_field__WEBPACK_IMPORTED_MODULE_4__.TextField, {\n      label: \"Filename\",\n      onChange: filename => {\n        props.onChange({\n          ...value,\n          filename\n        });\n      },\n      value: value.filename\n    }), (props.forceValidation || blurred) && ((_props$validation2 = props.validation) === null || _props$validation2 === void 0 ? void 0 : _props$validation2.isRequired) && value === null && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_field__WEBPACK_IMPORTED_MODULE_6__.FieldMessage, {\n      children: [props.label, \" is required\"]\n    })]\n  });\n}\n\nconst ImageElement = ({\n  attributes,\n  children,\n  element: __elementForGettingPath\n}) => {\n  const [dialogOpen, setDialogOpen] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n  const [aspectRatio, setAspectRatio] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)();\n  const stringFormatter = (0,_react_aria_i18n__WEBPACK_IMPORTED_MODULE_102__.useLocalizedStringFormatter)(l10nMessages);\n  const editor = (0,slate_react__WEBPACK_IMPORTED_MODULE_103__.useSlateStatic)();\n  const [currentElement, setNode] = useElementWithSetNodes(editor, __elementForGettingPath);\n  const objectUrl = useObjectURL(currentElement.src.content);\n  const activePopoverElement = useActiveBlockPopover();\n  const selected = activePopoverElement === __elementForGettingPath;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.Fragment, {\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(BlockWrapper, {\n      attributes: attributes,\n      children: [children, /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(BlockPopoverTrigger, {\n        element: __elementForGettingPath,\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n          style: {\n            alignItems: 'center',\n            display: 'flex',\n            flexDirection: 'column'\n          },\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(NotEditable, {\n            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"img\", {\n              ...attributes,\n              src: objectUrl,\n              alt: currentElement.alt,\n              \"data-selected\": selected,\n              onLoad: e => {\n                const target = e.target;\n                setAspectRatio(target.width / target.height);\n              },\n              className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n                boxSizing: 'border-box',\n                borderRadius: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.radius.regular,\n                display: 'block',\n                maxHeight: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.scale[3600],\n                maxWidth: '100%',\n                transition: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.transition)('box-shadow'),\n                '&[data-selected=true]': {\n                  boxShadow: `0 0 0 ${_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.border.regular} ${_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.alias.borderSelected}`\n                }\n              })\n            })\n          })\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(BlockPopover, {\n          hideArrow: true,\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n            gap: \"regular\",\n            padding: \"regular\",\n            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n              gap: \"small\",\n              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n                children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n                  prominence: \"low\",\n                  onPress: () => setDialogOpen(true),\n                  children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n                    src: _keystar_ui_icon_icons_editIcon__WEBPACK_IMPORTED_MODULE_20__.editIcon\n                  })\n                }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n                  children: stringFormatter.format('edit')\n                })]\n              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n                children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n                  prominence: \"low\",\n                  onPress: async () => {\n                    const src = await getUploadedImage();\n                    if (src) {\n                      setNode({\n                        src\n                      });\n                    }\n                  },\n                  children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n                    src: _keystar_ui_icon_icons_fileUpIcon__WEBPACK_IMPORTED_MODULE_54__.fileUpIcon\n                  })\n                }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n                  children: \"Choose file\"\n                })]\n              })]\n            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Divider, {\n              orientation: \"vertical\"\n            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n                prominence: \"low\",\n                onPress: () => {\n                  slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n                    at: slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.findPath(editor, __elementForGettingPath)\n                  });\n                },\n                children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n                  src: _keystar_ui_icon_icons_trash2Icon__WEBPACK_IMPORTED_MODULE_15__.trash2Icon\n                })\n              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n                tone: \"critical\",\n                children: \"Remove\"\n              })]\n            })]\n          })\n        })]\n      }, aspectRatio)]\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_12__.DialogContainer, {\n      onDismiss: () => {\n        setDialogOpen(false);\n        focusWithPreviousSelection(editor);\n      },\n      children: dialogOpen && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ImageDialog, {\n        alt: currentElement.alt,\n        title: currentElement.title,\n        filename: currentElement.src.filename,\n        onSubmit: ({\n          alt,\n          filename,\n          title\n        }) => {\n          setNode({\n            alt,\n            title,\n            src: {\n              content: currentElement.src.content,\n              filename\n            }\n          });\n        }\n      })\n    })]\n  });\n};\nfunction ImageDialog(props) {\n  const {\n    images\n  } = useDocumentEditorConfig().documentFeatures;\n  if (!images) {\n    throw new Error('unexpected image rendered when images are disabled');\n  }\n  const schema = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => object(images.schema), [images]);\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)({\n    alt: props.alt,\n    title: props.title\n  });\n  const previewProps = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => createGetPreviewProps(schema, setState, () => undefined), [schema])(state);\n  const [filenameWithoutExtension, filenameExtension] = splitFilename(props.filename);\n  const [forceValidation, setForceValidation] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n  let [fileName, setFileName] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(filenameWithoutExtension);\n  let [fileNameTouched, setFileNameTouched] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n  let {\n    dismiss\n  } = (0,_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_12__.useDialogContainer)();\n  let stringFormatter = (0,_react_aria_i18n__WEBPACK_IMPORTED_MODULE_102__.useLocalizedStringFormatter)(l10nMessages);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_12__.Dialog, {\n    size: \"small\",\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(\"form\", {\n      style: {\n        display: 'contents'\n      },\n      onSubmit: event => {\n        if (event.target !== event.currentTarget) return;\n        event.preventDefault();\n        setForceValidation(true);\n        if (fileName && clientSideValidateProp(schema, state, undefined)) {\n          dismiss();\n          props.onSubmit({\n            alt: state.alt,\n            title: state.title,\n            filename: [fileName, filenameExtension].join('.')\n          });\n        }\n      },\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Heading, {\n        children: \"Image details\"\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_slots__WEBPACK_IMPORTED_MODULE_17__.Content, {\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n          gap: \"large\",\n          direction: \"column\",\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_text_field__WEBPACK_IMPORTED_MODULE_4__.TextField, {\n            label: \"File name\",\n            onChange: setFileName,\n            onBlur: () => setFileNameTouched(true),\n            value: fileName,\n            isRequired: true,\n            errorMessage: (fileNameTouched || forceValidation) && !fileName ? 'Please provide a file name.' : undefined,\n            endElement: filenameExtension ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              paddingEnd: \"regular\",\n              children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n                color: \"neutralTertiary\",\n                children: [\".\", filenameExtension]\n              })\n            }) : null\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(FormValueContentFromPreviewProps, {\n            forceValidation: forceValidation,\n            autoFocus: true,\n            ...previewProps\n          })]\n        })\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ButtonGroup, {\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.Button, {\n          onPress: dismiss,\n          children: stringFormatter.format('cancel')\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.Button, {\n          prominence: \"high\",\n          type: \"submit\",\n          children: stringFormatter.format('save')\n        })]\n      })]\n    })\n  });\n}\nfunction splitFilename(filename) {\n  const dotIndex = filename.lastIndexOf('.');\n  if (dotIndex === -1) {\n    return [filename, ''];\n  }\n  return [filename.substring(0, dotIndex), filename.substring(dotIndex + 1)];\n}\nlet _imageIcon = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n  src: _keystar_ui_icon_icons_imageIcon__WEBPACK_IMPORTED_MODULE_55__.imageIcon\n});\nfunction ImageButton() {\n  const editor = (0,slate_react__WEBPACK_IMPORTED_MODULE_103__.useSlateStatic)();\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.Fragment, {\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n      prominence: \"low\",\n      onPress: async () => {\n        const src = await getUploadedImage();\n        if (src) {\n          slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.insertNodes(editor, {\n            type: 'image',\n            src,\n            alt: '',\n            title: '',\n            children: [{\n              text: ''\n            }]\n          });\n        }\n      },\n      children: _imageIcon\n    })\n  });\n}\nconst imageButton = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n  children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ImageButton, {}), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n      children: \"Image\"\n    })\n  })]\n});\nfunction withImages(editor) {\n  const {\n    insertData\n  } = editor;\n  editor.insertData = data => {\n    const images = Array.from(data.files).filter(x => x.type.startsWith('image/'));\n    if (images.length) {\n      Promise.all(images.map(async file => ({\n        name: file.name,\n        data: new Uint8Array(await file.arrayBuffer())\n      }))).then(images => {\n        insertNodesButReplaceIfSelectionIsAtEmptyParagraphOrHeading(editor, {\n          type: 'image',\n          src: {\n            content: images[0].data,\n            filename: images[0].name\n          },\n          alt: '',\n          title: '',\n          children: [{\n            text: ''\n          }]\n        });\n      });\n      return;\n    }\n    insertData(data);\n  };\n  return editor;\n}\n\nfunction order(a, b) {\n  return {\n    start: Math.min(a, b),\n    end: Math.max(a, b)\n  };\n}\nfunction getRelativeRowPath(hasHead, rowIndex) {\n  return hasHead ? rowIndex === 0 ? [0, 0] : [1, rowIndex - 1] : [0, rowIndex];\n}\nfunction getSelectedTableArea(editor) {\n  var _Editor$above, _editor$selection, _Editor$above2, _editor$selection2;\n  const anchor = (_Editor$above = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n    match: nodeTypeMatcher('table-cell'),\n    at: (_editor$selection = editor.selection) === null || _editor$selection === void 0 ? void 0 : _editor$selection.anchor.path\n  })) === null || _Editor$above === void 0 ? void 0 : _Editor$above[1];\n  const focus = (_Editor$above2 = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n    match: nodeTypeMatcher('table-cell'),\n    at: (_editor$selection2 = editor.selection) === null || _editor$selection2 === void 0 ? void 0 : _editor$selection2.focus.path\n  })) === null || _Editor$above2 === void 0 ? void 0 : _Editor$above2[1];\n  const table = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n    match: nodeTypeMatcher('table')\n  });\n  if (editor.selection && table && slate__WEBPACK_IMPORTED_MODULE_104__.Element.isElement(table[0].children[0]) && anchor && focus && slate__WEBPACK_IMPORTED_MODULE_104__.Path.equals(anchor.slice(0, -3), focus.slice(0, -3))) {\n    const [start, end] = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.edges(editor, editor.selection);\n    return {\n      tablePath: table[1],\n      table: table[0],\n      singleCell: slate__WEBPACK_IMPORTED_MODULE_104__.Path.equals(anchor, focus) ? slate__WEBPACK_IMPORTED_MODULE_104__.Point.equals(slate__WEBPACK_IMPORTED_MODULE_104__.Editor.start(editor, anchor), start) && slate__WEBPACK_IMPORTED_MODULE_104__.Point.equals(slate__WEBPACK_IMPORTED_MODULE_104__.Editor.end(editor, anchor), end) && !slate__WEBPACK_IMPORTED_MODULE_104__.Point.equals(start, end) ? 'selected' : 'not-selected' : 'many',\n      row: order(anchor[anchor.length - 2] + anchor[anchor.length - 3], focus[focus.length - 2] + focus[anchor.length - 3]),\n      column: order(anchor[anchor.length - 1], focus[focus.length - 1])\n    };\n  }\n}\nconst cell = header => ({\n  type: 'table-cell',\n  ...(header ? {\n    header: true\n  } : {}),\n  children: [{\n    type: 'paragraph',\n    children: [{\n      text: ''\n    }]\n  }]\n});\nfunction cloneDescendant(node) {\n  if (slate__WEBPACK_IMPORTED_MODULE_104__.Text.isText(node)) return {\n    ...node\n  };\n  return {\n    ...node,\n    children: node.children.map(cloneDescendant)\n  };\n}\nfunction withTable(editor) {\n  const {\n    deleteFragment,\n    normalizeNode,\n    getFragment,\n    insertFragment,\n    deleteBackward\n  } = editor;\n  editor.insertFragment = fragment => {\n    const selectedTableArea = getSelectedTableArea(editor);\n    if (!selectedTableArea || fragment.length !== 1 || fragment[0].type !== 'table') {\n      insertFragment(fragment);\n      return;\n    }\n    const newRows = fragment[0].children.flatMap(child => child.type === 'table-head' || child.type === 'table-body' ? child.children : []);\n    if (!newRows.every(nodeTypeMatcher('table-row'))) {\n      insertFragment(fragment);\n      return;\n    }\n    let {\n      row,\n      column,\n      tablePath,\n      table\n    } = selectedTableArea;\n    const existingBody = selectedTableArea.table.children[selectedTableArea.table.children.length === 1 ? 0 : 1];\n    if (newRows[0].type !== 'table-row' || existingBody.type !== 'table-body' || existingBody.children[0].type !== 'table-row') {\n      insertFragment(fragment);\n      return;\n    }\n    const hasHead = table.children[0].type === 'table-head';\n    if (selectedTableArea.singleCell !== 'many') {\n      row = {\n        start: row.start,\n        end: Math.min(row.start + newRows.length - 1, existingBody.children.length - 1 + (hasHead ? 1 : 0))\n      };\n      column = {\n        start: column.start,\n        end: Math.min(column.start + newRows[0].children.length - 1, existingBody.children[0].children.length - 1)\n      };\n    }\n    slate__WEBPACK_IMPORTED_MODULE_104__.Editor.withoutNormalizing(editor, () => {\n      for (let rowIndex = row.start; rowIndex <= row.end; rowIndex++) {\n        const newRow = newRows[(rowIndex - row.start) % newRows.length];\n        for (let cellIndex = column.start; cellIndex <= column.end; cellIndex++) {\n          const relativeCellPath = [...getRelativeRowPath(hasHead, rowIndex), cellIndex];\n          const cell = slate__WEBPACK_IMPORTED_MODULE_104__.Node.get(table, relativeCellPath);\n          const newCell = newRow.children[(cellIndex - column.start) % newRow.children.length];\n          if (cell.type !== 'table-cell' || newCell.type !== 'table-cell') {\n            continue;\n          }\n          const cellPath = [...tablePath, ...relativeCellPath];\n          for (const childIdx of [...cell.children.keys()].reverse()) {\n            slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n              at: [...cellPath, childIdx]\n            });\n          }\n          slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.insertNodes(editor, newCell.children.map(cloneDescendant), {\n            at: [...cellPath, 0]\n          });\n        }\n      }\n      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.setSelection(editor, {\n        anchor: slate__WEBPACK_IMPORTED_MODULE_104__.Editor.start(editor, [...tablePath, ...getRelativeRowPath(hasHead, row.start), column.start]),\n        focus: slate__WEBPACK_IMPORTED_MODULE_104__.Editor.end(editor, [...tablePath, ...getRelativeRowPath(hasHead, row.end), column.end])\n      });\n    });\n  };\n  editor.deleteBackward = unit => {\n    if (editor.selection && slate__WEBPACK_IMPORTED_MODULE_104__.Range.isCollapsed(editor.selection) && editor.selection.anchor.offset === 0) {\n      const tableCell = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n        match: nodeTypeMatcher('table-cell')\n      });\n      if (tableCell && tableCell[0].children[0].type === 'paragraph' && tableCell[0].children[0].children[0].type === undefined && slate__WEBPACK_IMPORTED_MODULE_104__.Path.equals(editor.selection.anchor.path, [...tableCell[1], 0, 0])) {\n        return;\n      }\n    }\n    deleteBackward(unit);\n  };\n  editor.getFragment = () => {\n    const selectedTableArea = getSelectedTableArea(editor);\n    if (selectedTableArea && selectedTableArea.singleCell !== 'not-selected') {\n      var _table$children$;\n      const {\n        table\n      } = selectedTableArea;\n      const first = table.children[0].type === 'table-head' || table.children[0].type === 'table-body' ? table.children[0] : undefined;\n      if (!first) {\n        return getFragment();\n      }\n      const second = ((_table$children$ = table.children[1]) === null || _table$children$ === void 0 ? void 0 : _table$children$.type) === 'table-body' ? table.children[1] : undefined;\n      const body = second || first;\n      const hasHead = first.type === 'table-head';\n      const isSelectionInHead = selectedTableArea.row.start === 0 && !!second;\n      const columnLength = selectedTableArea.column.end - selectedTableArea.column.start + 1;\n      return [{\n        type: 'table',\n        children: [...(isSelectionInHead ? [{\n          type: 'table-head',\n          children: [{\n            type: 'table-row',\n            children: Array.from({\n              length: columnLength\n            }).map((_, columnIndex) => first.children[0].children[columnIndex + selectedTableArea.column.start])\n          }]\n        }] : []), {\n          type: 'table-body',\n          children: Array.from({\n            length: selectedTableArea.row.end - selectedTableArea.row.start + (isSelectionInHead ? 0 : 1)\n          }).map((_, rowIndex) => ({\n            type: 'table-row',\n            children: Array.from({\n              length: columnLength\n            }).map((_, columnIndex) => body.children[rowIndex + selectedTableArea.row.start - (hasHead && !isSelectionInHead ? 1 : 0)].children[columnIndex + selectedTableArea.column.start])\n          }))\n        }]\n      }];\n    }\n    return getFragment();\n  };\n  editor.deleteFragment = direction => {\n    if (!editor.selection || slate__WEBPACK_IMPORTED_MODULE_104__.Range.isCollapsed(editor.selection)) {\n      deleteFragment(direction);\n      return;\n    }\n    const selectedTableArea = getSelectedTableArea(editor);\n    if (!selectedTableArea || selectedTableArea.singleCell === 'not-selected') {\n      deleteFragment(direction);\n      return;\n    }\n    const headOrBody = selectedTableArea.table.children[0];\n    if (!slate__WEBPACK_IMPORTED_MODULE_104__.Element.isElement(headOrBody) || !slate__WEBPACK_IMPORTED_MODULE_104__.Element.isElement(headOrBody.children[0])) {\n      deleteFragment(direction);\n      return;\n    }\n    const maxRowIdx = selectedTableArea.table.children.reduce((sum, headOrBody) => sum + (headOrBody.type === 'table-head' || headOrBody.type === 'table-body' ? headOrBody.children.length : 0), 0) - 1;\n    const {\n      row,\n      column,\n      tablePath\n    } = selectedTableArea;\n    // note the fact that hasWholeColumnSelected uses row and hasWholeRowSelected uses column\n    // is not a mistake. if a whole column has been selected, then the starting row is 0 and the end is the last row\n    const hasWholeColumnSelected = row.start === 0 && row.end === maxRowIdx;\n    const hasWholeRowSelected = column.start === 0 && column.end === headOrBody.children[0].children.length - 1;\n    if (hasWholeColumnSelected && hasWholeRowSelected) {\n      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n        at: tablePath\n      });\n      return;\n    }\n    const hasHead = headOrBody.type === 'table-head';\n    if (hasWholeRowSelected) {\n      slate__WEBPACK_IMPORTED_MODULE_104__.Editor.withoutNormalizing(editor, () => {\n        for (let i = row.end; i >= row.start; i--) {\n          if (hasHead) {\n            if (i === 0) {\n              slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n                at: [...tablePath, 0]\n              });\n              continue;\n            }\n            slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n              at: [...tablePath, 1, i - 1]\n            });\n            continue;\n          }\n          slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n            at: [...tablePath, 0, i]\n          });\n        }\n      });\n      return;\n    }\n    if (hasWholeColumnSelected) {\n      slate__WEBPACK_IMPORTED_MODULE_104__.Editor.withoutNormalizing(editor, () => {\n        for (let i = column.end; i >= column.start; i--) {\n          for (let rowIdx = 0; rowIdx <= maxRowIdx; rowIdx++) {\n            slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n              at: [...tablePath, ...getRelativeRowPath(hasHead, rowIdx), i]\n            });\n          }\n        }\n        const selectionPath = [...tablePath, 0, 0, column.start];\n        const point = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.start(editor, column.start === 0 ? selectionPath : slate__WEBPACK_IMPORTED_MODULE_104__.Path.previous(selectionPath));\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.select(editor, point);\n      });\n      return;\n    }\n    const selectionStart = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.start(editor, editor.selection).path;\n    slate__WEBPACK_IMPORTED_MODULE_104__.Editor.withoutNormalizing(editor, () => {\n      for (let rowIndex = row.start; rowIndex <= row.end; rowIndex++) {\n        for (let cellIndex = column.start; cellIndex <= column.end; cellIndex++) {\n          const relativeCellPath = [...getRelativeRowPath(hasHead, rowIndex), cellIndex];\n          const cell = slate__WEBPACK_IMPORTED_MODULE_104__.Node.get(selectedTableArea.table, relativeCellPath);\n          if (!slate__WEBPACK_IMPORTED_MODULE_104__.Element.isElement(cell)) {\n            continue;\n          }\n          const cellPath = [...tablePath, ...relativeCellPath];\n          slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.insertNodes(editor, {\n            type: 'paragraph',\n            children: [{\n              text: ''\n            }]\n          }, {\n            at: [...cellPath, 0]\n          });\n          for (const childIdx of [...cell.children.keys()].reverse()) {\n            slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n              at: [...cellPath, childIdx + 1]\n            });\n          }\n        }\n      }\n      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.select(editor, selectionStart);\n    });\n  };\n  editor.normalizeNode = entry => {\n    const [node, path] = entry;\n    if (node.type === 'table-head' && node.children.length > 1) {\n      moveChildren(editor, path, slate__WEBPACK_IMPORTED_MODULE_104__.Path.next(path), (_, i) => i !== 0);\n      return;\n    }\n    let didUpdateThings = false;\n    for (const parent of ['table-body', 'table-head']) {\n      if (node.type === parent) {\n        for (const [rowIdx, row] of node.children.entries()) {\n          if (row.type === 'table-row') {\n            for (const [cellIdx, cell] of row.children.entries()) {\n              if (cell.type === 'table-cell') {\n                const at = [...path, rowIdx, cellIdx];\n                if (cell.header && parent === 'table-body') {\n                  slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unsetNodes(editor, 'header', {\n                    at\n                  });\n                  didUpdateThings = true;\n                }\n                if (!cell.header && parent === 'table-head') {\n                  slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.setNodes(editor, {\n                    header: true\n                  }, {\n                    at\n                  });\n                  didUpdateThings = true;\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    if (didUpdateThings) {\n      return;\n    }\n    if (node.type === 'table') {\n      const maxRowCount = node.children.reduce((max, node) => node.type === 'table-head' || node.type === 'table-body' ? node.children.reduce((max, node) => node.type === 'table-row' ? Math.max(max, node.children.length) : max, max) : max, 0);\n      let didInsert = false;\n      for (const [idx, child] of node.children.entries()) {\n        if (child.type === 'table-body' || child.type === 'table-head') {\n          for (const [rowIdx, row] of child.children.entries()) {\n            if (row.type === 'table-row' && row.children.length !== maxRowCount) {\n              slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.insertNodes(editor, Array.from({\n                length: maxRowCount - row.children.length\n              }, () => cell(child.type === 'table-head')), {\n                at: [...path, idx, rowIdx, row.children.length]\n              });\n              didInsert = true;\n            }\n          }\n        }\n      }\n      if (didInsert) {\n        return;\n      }\n      if (node.children.length === 1 && node.children[0].type === 'table-head') {\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.insertNodes(editor, {\n          type: 'table-body',\n          children: Array.from({\n            length: node.children[0].children.length\n          }, () => cell(false))\n        }, {\n          at: [...path, 1]\n        });\n        return;\n      }\n      if (node.children.length === 2 && node.children[1].type === 'table-head') {\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.moveNodes(editor, {\n          at: [...path, 1],\n          to: [...path, 0]\n        });\n        return;\n      }\n      if (node.children.length > 2) {\n        moveChildren(editor, path, slate__WEBPACK_IMPORTED_MODULE_104__.Path.next(path), (_, i) => i !== 0 && i !== 1);\n        return;\n      }\n    }\n    normalizeNode(entry);\n  };\n  return editor;\n}\n\nconst insertTable = editor => {\n  slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.insertNodes(editor, {\n    type: 'table',\n    children: [{\n      type: 'table-head',\n      children: [{\n        type: 'table-row',\n        children: [cell(true), cell(true), cell(true)]\n      }]\n    }, {\n      type: 'table-body',\n      children: [{\n        type: 'table-row',\n        children: [cell(false), cell(false), cell(false)]\n      }, {\n        type: 'table-row',\n        children: [cell(false), cell(false), cell(false)]\n      }]\n    }]\n  });\n};\nconst SelectedCellsContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)(undefined);\nfunction getSelectedCells(table, row, column) {\n  var _table$children$;\n  const selectedCells = new Set();\n  const first = table.children[0].type === 'table-head' || table.children[0].type === 'table-body' ? table.children[0] : undefined;\n  if (!first) return selectedCells;\n  const second = ((_table$children$ = table.children[1]) === null || _table$children$ === void 0 ? void 0 : _table$children$.type) === 'table-body' ? table.children[1] : undefined;\n  for (let rowIndex = row.start; rowIndex <= row.end; rowIndex++) {\n    const row = second ? rowIndex === 0 ? first.children[0] : second.children[rowIndex - 1] : first.children[rowIndex];\n    if (!slate__WEBPACK_IMPORTED_MODULE_104__.Element.isElement(row)) continue;\n    for (let cellIndex = column.start; cellIndex <= column.end; cellIndex++) {\n      selectedCells.add(row.children[cellIndex]);\n    }\n  }\n  return selectedCells;\n}\nfunction TableSelectionProvider(props) {\n  const editor = (0,slate_react__WEBPACK_IMPORTED_MODULE_103__.useSlate)();\n  const selectedTableArea = getSelectedTableArea(editor);\n  if (selectedTableArea) {\n    var _Editor$above, _editor$selection;\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(SelectedCellsContext.Provider, {\n      value: {\n        cells: selectedTableArea.singleCell === 'not-selected' ? new Set() : getSelectedCells(selectedTableArea.table, selectedTableArea.row, selectedTableArea.column),\n        table: selectedTableArea.table,\n        focus: (_Editor$above = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n          match: nodeTypeMatcher('table-cell'),\n          at: (_editor$selection = editor.selection) === null || _editor$selection === void 0 ? void 0 : _editor$selection.focus.path\n        })) === null || _Editor$above === void 0 ? void 0 : _Editor$above[0]\n      },\n      children: props.children\n    });\n  }\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(SelectedCellsContext.Provider, {\n    value: undefined,\n    children: props.children\n  });\n}\nconst StartElementsContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)({\n  top: new Map(),\n  left: new Map()\n});\nconst TableElement = ({\n  attributes,\n  children,\n  element\n}) => {\n  var _element$children$;\n  const editor = (0,slate_react__WEBPACK_IMPORTED_MODULE_103__.useSlateStatic)();\n  const selectedCellsContext = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(SelectedCellsContext);\n  const selectedCells = (selectedCellsContext === null || selectedCellsContext === void 0 ? void 0 : selectedCellsContext.table) === element ? selectedCellsContext : undefined;\n  const startElements = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {\n    const firstTableChild = element.children[0];\n    if (!slate__WEBPACK_IMPORTED_MODULE_104__.Element.isElement(firstTableChild) || !slate__WEBPACK_IMPORTED_MODULE_104__.Element.isElement(firstTableChild.children[0])) {\n      return {\n        top: new Map(),\n        left: new Map()\n      };\n    }\n    const top = new Map();\n    const left = new Map();\n    for (const [idx, cell] of firstTableChild.children[0].children.entries()) {\n      if (cell.type !== 'table-cell') continue;\n      top.set(cell, element.children.every(headOrBody => slate__WEBPACK_IMPORTED_MODULE_104__.Element.isElement(headOrBody) ? headOrBody.children.every(row => slate__WEBPACK_IMPORTED_MODULE_104__.Element.isElement(row) && (selectedCells === null || selectedCells === void 0 ? void 0 : selectedCells.cells.has(row.children[idx]))) : false));\n    }\n    for (const headOrBody of element.children) {\n      if (headOrBody.type !== 'table-head' && headOrBody.type !== 'table-body') {\n        continue;\n      }\n      for (const row of headOrBody.children) {\n        if (row.type !== 'table-row' || row.children[0].type !== 'table-cell') {\n          continue;\n        }\n        left.set(row.children[0], row.children.every(element => selectedCells === null || selectedCells === void 0 ? void 0 : selectedCells.cells.has(element)));\n      }\n    }\n    return {\n      top,\n      left\n    };\n  }, [element, selectedCells]);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(StartElementsContext.Provider, {\n    value: startElements,\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(SelectedCellsContext.Provider, {\n      value: selectedCells,\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(BlockWrapper, {\n        attributes: attributes,\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(BlockPopoverTrigger, {\n          element: element,\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"table\", {\n            className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n              width: '100%',\n              tableLayout: 'fixed',\n              position: 'relative',\n              borderSpacing: 0,\n              '& *::selection': selectedCells !== null && selectedCells !== void 0 && selectedCells.cells.size ? {\n                backgroundColor: 'transparent'\n              } : undefined\n            }),\n            children: children\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(BlockPopover, {\n            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n              gap: \"regular\",\n              padding: \"regular\",\n              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n                children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n                  prominence: \"low\",\n                  isSelected: ((_element$children$ = element.children[0]) === null || _element$children$ === void 0 ? void 0 : _element$children$.type) === 'table-head',\n                  onPress: () => {\n                    const tablePath = slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.findPath(editor, element);\n                    slate__WEBPACK_IMPORTED_MODULE_104__.Editor.withoutNormalizing(editor, () => {\n                      if (element.children[0].type === 'table-head') {\n                        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.moveNodes(editor, {\n                          at: [...tablePath, 0, 0],\n                          to: [...tablePath, 1, 0]\n                        });\n                        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n                          at: [...tablePath, 0]\n                        });\n                        return;\n                      }\n                      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.insertNodes(editor, {\n                        type: 'table-head',\n                        children: []\n                      }, {\n                        at: [...tablePath, 0]\n                      });\n                      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.moveNodes(editor, {\n                        at: [...tablePath, 1, 0],\n                        to: [...tablePath, 0, 0]\n                      });\n                    });\n                  },\n                  children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n                    src: _keystar_ui_icon_icons_sheetIcon__WEBPACK_IMPORTED_MODULE_69__.sheetIcon\n                  })\n                }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n                  children: \"Header row\"\n                })]\n              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ToolbarSeparator, {}), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n                children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n                  prominence: \"low\",\n                  onPress: () => {\n                    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n                      at: slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.findPath(editor, element)\n                    });\n                  },\n                  children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n                    src: _keystar_ui_icon_icons_trash2Icon__WEBPACK_IMPORTED_MODULE_15__.trash2Icon\n                  })\n                }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n                  tone: \"critical\",\n                  children: \"Remove\"\n                })]\n              })]\n            })\n          })]\n        })\n      })\n    })\n  });\n};\nconst TableBodyElement = ({\n  attributes,\n  children\n}) => {\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"tbody\", {\n    ...attributes,\n    children: children\n  });\n};\nconst TableHeadElement = ({\n  attributes,\n  children\n}) => {\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"thead\", {\n    ...attributes,\n    children: children\n  });\n};\nconst TableRowElement = ({\n  attributes,\n  children,\n  element\n}) => {\n  var _useContext, _table$children$index;\n  const table = (_useContext = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(SelectedCellsContext)) === null || _useContext === void 0 ? void 0 : _useContext.table;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(RowIndexContext.Provider, {\n    value: (_table$children$index = table === null || table === void 0 ? void 0 : table.children.indexOf(element)) !== null && _table$children$index !== void 0 ? _table$children$index : -1,\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"tr\", {\n      ...attributes,\n      children: children\n    })\n  });\n};\nconst RowIndexContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)(-1);\nfunction TableCellElement({\n  attributes,\n  children,\n  element\n}) {\n  const editor = (0,slate_react__WEBPACK_IMPORTED_MODULE_103__.useSlateStatic)();\n  const selectedCellsContext = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(SelectedCellsContext);\n  const startElements = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(StartElementsContext);\n  const isSelected = selectedCellsContext === null || selectedCellsContext === void 0 ? void 0 : selectedCellsContext.cells.has(element);\n  const size = `calc(100% + 2px)`;\n  const ElementType = element.header ? 'th' : 'td';\n  const borderColor = isSelected ? _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.alias.borderSelected : _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.alias.borderIdle;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(ElementType, {\n    className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n      borderInlineEnd: `1px solid ${borderColor}`,\n      borderBottom: `1px solid ${borderColor}`,\n      borderTop: startElements.top.has(element) ? `1px solid ${borderColor}` : undefined,\n      borderInlineStart: startElements.left.has(element) ? `1px solid ${borderColor}` : undefined,\n      backgroundColor: selectedCellsContext !== null && selectedCellsContext !== void 0 && selectedCellsContext.cells.has(element) ? _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.alias.backgroundSelected : element.header ? _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.scale.slate3 : undefined,\n      position: 'relative',\n      margin: 0,\n      padding: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.space.regular,\n      fontWeight: 'inherit',\n      boxSizing: 'border-box',\n      textAlign: 'start',\n      verticalAlign: 'top'\n    }),\n    ...attributes,\n    children: [isSelected && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.Fragment, {\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n        contentEditable: false,\n        className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n          position: 'absolute',\n          top: -1,\n          insetInlineStart: -1,\n          background: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.alias.borderSelected,\n          height: size,\n          width: 1\n        })\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n        contentEditable: false,\n        className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n          position: 'absolute',\n          top: -1,\n          insetInlineStart: -1,\n          background: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.alias.borderSelected,\n          height: 1,\n          width: size\n        })\n      })]\n    }), startElements.top.has(element) && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(CellSelection, {\n      location: \"top\",\n      selected: !!startElements.top.get(element),\n      label: \"Select Column\",\n      onClick: () => {\n        const path = slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.findPath(editor, element);\n        const table = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n          match: nodeTypeMatcher('table'),\n          at: path\n        });\n        if (!table) return;\n        const lastTableIndex = table[0].children.length - 1;\n        const tableBody = table[0].children[lastTableIndex];\n        if (tableBody.type !== 'table-body') return;\n        const cellIndex = path[path.length - 1];\n        const endPath = [...table[1], table[0].children.length - 1, tableBody.children.length - 1, cellIndex];\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.select(editor, {\n          anchor: slate__WEBPACK_IMPORTED_MODULE_104__.Editor.start(editor, path),\n          focus: slate__WEBPACK_IMPORTED_MODULE_104__.Editor.end(editor, endPath)\n        });\n      }\n    }), startElements.left.has(element) && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(CellSelection, {\n      location: \"left\",\n      selected: !!startElements.left.get(element),\n      label: \"Select Row\",\n      onClick: () => {\n        const path = slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.findPath(editor, element);\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.select(editor, {\n          anchor: slate__WEBPACK_IMPORTED_MODULE_104__.Editor.start(editor, slate__WEBPACK_IMPORTED_MODULE_104__.Path.parent(path)),\n          focus: slate__WEBPACK_IMPORTED_MODULE_104__.Editor.end(editor, slate__WEBPACK_IMPORTED_MODULE_104__.Path.parent(path))\n        });\n      }\n    }), startElements.left.has(element) && startElements.top.has(element) && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(CellSelection, {\n      location: \"top-left\",\n      selected: !!(startElements.top.get(element) && startElements.left.get(element)),\n      label: \"Select Table\",\n      onClick: () => {\n        const path = slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.findPath(editor, element);\n        const table = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n          match: nodeTypeMatcher('table'),\n          at: path\n        });\n        if (!table) return;\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.select(editor, {\n          anchor: slate__WEBPACK_IMPORTED_MODULE_104__.Editor.start(editor, table[1]),\n          focus: slate__WEBPACK_IMPORTED_MODULE_104__.Editor.end(editor, table[1])\n        });\n      }\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n      children: children\n    }), (selectedCellsContext === null || selectedCellsContext === void 0 ? void 0 : selectedCellsContext.focus) === element && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(CellMenu, {\n      cell: element,\n      table: selectedCellsContext.table\n    })]\n  });\n}\nfunction CellSelection(props) {\n  const selectedCellsContext = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(SelectedCellsContext);\n  const editor = (0,slate_react__WEBPACK_IMPORTED_MODULE_103__.useSlateStatic)();\n  let {\n    location,\n    selected\n  } = props;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(\"div\", {\n    contentEditable: false,\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"button\", {\n      tabIndex: -1,\n      type: \"button\",\n      ...(0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.toDataAttributes)({\n        location,\n        selected\n      }),\n      className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n        background: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.scale.slate3,\n        border: `1px solid ${_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.alias.borderIdle}`,\n        margin: 0,\n        padding: 0,\n        position: 'absolute',\n        ':hover': {\n          background: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.scale.slate4\n        },\n        // ever so slightly larger hit area\n        '::before': {\n          content: '\"\"',\n          inset: -1,\n          position: 'absolute'\n        },\n        // location\n        '&[data-location=top]': {\n          top: -9,\n          insetInlineStart: -1,\n          width: 'calc(100% + 2px)',\n          height: 8\n        },\n        '&[data-location=left]': {\n          top: -1,\n          insetInlineStart: -9,\n          width: 8,\n          height: 'calc(100% + 2px)'\n        },\n        '&[data-location=top-left]': {\n          top: -9,\n          insetInlineStart: -9,\n          width: 8,\n          height: 8\n        },\n        '&:not([data-location=top])': {\n          borderInlineEnd: 'none'\n        },\n        '&:not([data-location=left])': {\n          borderBottom: 'none'\n        },\n        // state\n        '&[data-selected=true]': {\n          background: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.scale.indigo8,\n          borderColor: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.alias.borderSelected\n        }\n      }),\n      style: {\n        visibility: selectedCellsContext !== null && selectedCellsContext !== void 0 && selectedCellsContext.focus ? 'visible' : 'hidden'\n      },\n      \"aria-label\": props.label,\n      onClick: () => {\n        slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.focus(editor);\n        props.onClick();\n      }\n    }), props.selected && (props.location === 'top' ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n      className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n        position: 'absolute',\n        top: -9,\n        insetInlineEnd: -1,\n        background: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.alias.borderSelected,\n        height: 8,\n        width: 1,\n        zIndex: 2\n      })\n    }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n      className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n        position: 'absolute',\n        bottom: -1,\n        insetInlineStart: -9,\n        background: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.alias.borderSelected,\n        height: 1,\n        width: 8,\n        zIndex: 2\n      })\n    }))]\n  });\n}\nconst cellActions = {\n  deleteRow: {\n    label: 'Delete row',\n    action: (editor, cellPath) => {\n      const tablePath = cellPath.slice(0, -3);\n      const table = slate__WEBPACK_IMPORTED_MODULE_104__.Node.get(editor, tablePath);\n      if (table.type !== 'table') return;\n      const hasHead = table.children[0].type === 'table-head';\n      const rowPath = slate__WEBPACK_IMPORTED_MODULE_104__.Path.parent(cellPath);\n      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n        at: hasHead && rowPath[cellPath.length - 3] === 0 ? slate__WEBPACK_IMPORTED_MODULE_104__.Path.parent(rowPath) : rowPath\n      });\n    }\n  },\n  deleteColumn: {\n    label: 'Delete column',\n    action: (editor, path) => {\n      const cellIndex = path[path.length - 1];\n      const tablePath = path.slice(0, -3);\n      const table = slate__WEBPACK_IMPORTED_MODULE_104__.Node.get(editor, tablePath);\n      if (table.type !== 'table') return;\n      slate__WEBPACK_IMPORTED_MODULE_104__.Editor.withoutNormalizing(editor, () => {\n        for (const [headOrBodyIdx, headOrBody] of table.children.entries()) {\n          if (headOrBody.type !== 'table-head' && headOrBody.type !== 'table-body') {\n            continue;\n          }\n          for (const idx of headOrBody.children.keys()) {\n            slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n              at: [...tablePath, headOrBodyIdx, idx, cellIndex]\n            });\n          }\n        }\n      });\n    }\n  },\n  insertRowBelow: {\n    label: 'Insert row below',\n    action: (editor, path) => {\n      const tableRow = slate__WEBPACK_IMPORTED_MODULE_104__.Node.get(editor, slate__WEBPACK_IMPORTED_MODULE_104__.Path.parent(path));\n      const tablePath = path.slice(0, -3);\n      const table = slate__WEBPACK_IMPORTED_MODULE_104__.Node.get(editor, tablePath);\n      if (tableRow.type !== 'table-row' || table.type !== 'table') {\n        return;\n      }\n      const hasHead = table.children[0].type === 'table-head';\n      const newRowPath = [...tablePath, hasHead ? 1 : 0, hasHead && path[path.length - 3] === 0 ? 0 : path[path.length - 2] + 1];\n      slate__WEBPACK_IMPORTED_MODULE_104__.Editor.withoutNormalizing(editor, () => {\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.insertNodes(editor, {\n          type: 'table-row',\n          children: tableRow.children.map(() => cell(false))\n        }, {\n          at: newRowPath\n        });\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.select(editor, [...newRowPath, path[path.length - 1]]);\n      });\n    }\n  },\n  insertColumnRight: {\n    label: 'Insert column right',\n    action: (editor, path) => {\n      const newCellIndex = path[path.length - 1] + 1;\n      const tablePath = path.slice(0, -3);\n      const table = slate__WEBPACK_IMPORTED_MODULE_104__.Node.get(editor, tablePath);\n      if (table.type !== 'table') return;\n      slate__WEBPACK_IMPORTED_MODULE_104__.Editor.withoutNormalizing(editor, () => {\n        for (const [headOrBodyIdx, headOrBody] of table.children.entries()) {\n          if (headOrBody.type !== 'table-head' && headOrBody.type !== 'table-body') {\n            continue;\n          }\n          for (const rowIdx of headOrBody.children.keys()) {\n            slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.insertNodes(editor, cell(headOrBody.type === 'table-head'), {\n              at: [...tablePath, headOrBodyIdx, rowIdx, newCellIndex]\n            });\n          }\n        }\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.select(editor, slate__WEBPACK_IMPORTED_MODULE_104__.Editor.start(editor, slate__WEBPACK_IMPORTED_MODULE_104__.Path.next(path)));\n      });\n    }\n  }\n};\nconst _cellActions = cellActions;\nfunction CellMenu(props) {\n  const editor = (0,slate_react__WEBPACK_IMPORTED_MODULE_103__.useSlateStatic)();\n  const gutter = _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.space.small;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n    contentEditable: false,\n    className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n      top: gutter,\n      insetInlineEnd: gutter,\n      position: 'absolute'\n    }),\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_menu__WEBPACK_IMPORTED_MODULE_40__.MenuTrigger, {\n        align: \"end\",\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n          prominence: \"low\",\n          UNSAFE_className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n            borderRadius: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.radius.small,\n            height: 'auto',\n            minWidth: 0,\n            padding: 0,\n            // tiny buttons; increase the hit area\n            '&::before': {\n              content: '\"\"',\n              inset: `calc(${gutter} * -1)`,\n              position: 'absolute'\n            }\n          }),\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n            src: _keystar_ui_icon_icons_chevronDownIcon__WEBPACK_IMPORTED_MODULE_28__.chevronDownIcon\n          })\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_menu__WEBPACK_IMPORTED_MODULE_40__.Menu, {\n          onAction: key => {\n            if (key in _cellActions) {\n              _cellActions[key].action(editor, slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.findPath(editor, props.cell));\n            }\n          },\n          items: Object.entries(_cellActions).map(([key, item]) => ({\n            ...item,\n            key\n          })),\n          children: item => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_menu__WEBPACK_IMPORTED_MODULE_40__.Item, {\n            children: item.label\n          }, item.key)\n        })]\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n        children: \"Options\"\n      })]\n    })\n  });\n}\nconst TableButton = () => {\n  const {\n    editor,\n    blockquote: {\n      isDisabled,\n      isSelected\n    }\n  } = useToolbarState();\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n    prominence: \"low\",\n    isSelected: isSelected,\n    isDisabled: isDisabled,\n    onPress: () => {\n      insertTable(editor);\n      slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.focus(editor);\n    },\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n      src: _keystar_ui_icon_icons_tableIcon__WEBPACK_IMPORTED_MODULE_70__.tableIcon\n    })\n  }), [editor, isDisabled, isSelected]);\n};\nconst tableButton = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n  children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(TableButton, {}), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n      children: \"Table\"\n    })\n  })]\n});\nfunction getCellPathInDirection(editor, path, direction) {\n  if (direction === 'left' || direction === 'right') {\n    const row = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n      match: nodeTypeMatcher('table-row'),\n      at: path\n    });\n    if (!row) return;\n    const currentCellIdx = path[path.length - 1];\n    const diff = direction === 'left' ? -1 : 1;\n    const nextCellIdx = currentCellIdx + diff;\n    const nextCell = row[0].children[nextCellIdx];\n    if (!nextCell) return;\n    return [...row[1], nextCellIdx];\n  }\n  const table = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n    match: nodeTypeMatcher('table'),\n    at: path\n  });\n  if (!table) return;\n  const diff = direction === 'up' ? -1 : 1;\n  const rowIndex = path[path.length - 3] + path[path.length - 2];\n  const nextRowIndex = rowIndex + diff;\n  const relativeRowPath = getRelativeRowPath(table[0].children[0].type === 'table-head', nextRowIndex);\n  if (!slate__WEBPACK_IMPORTED_MODULE_104__.Node.has(table[0], relativeRowPath)) return;\n  return [...table[1], ...relativeRowPath, path[path.length - 1]];\n}\n\nfunction Toolbar({\n  documentFeatures,\n  viewState\n}) {\n  const componentBlocks = useDocumentEditorConfig().componentBlocks;\n  let hasComponentBlocksForInsertMenu = false,\n    hasComponentBlocksForToolbar = false;\n  for (const componentBlock of Object.values(componentBlocks)) {\n    if (componentBlock.toolbarIcon) {\n      hasComponentBlocksForToolbar = true;\n    }\n    if (!componentBlock.toolbarIcon) {\n      hasComponentBlocksForInsertMenu = true;\n    }\n  }\n  const hasMarks = Object.values(documentFeatures.formatting.inlineMarks).some(x => x);\n  const hasAlignment = documentFeatures.formatting.alignment.center || documentFeatures.formatting.alignment.end;\n  const hasLists = documentFeatures.formatting.listTypes.unordered || documentFeatures.formatting.listTypes.ordered;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(ToolbarWrapper, {\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(ToolbarScrollArea, {\n      children: [!!documentFeatures.formatting.headings.levels.length && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(HeadingMenu, {\n        headingLevels: documentFeatures.formatting.headings.levels\n      }), hasMarks && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(InlineMarks, {\n        marks: documentFeatures.formatting.inlineMarks\n      }), (hasAlignment || hasLists) && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(ToolbarGroup, {\n        children: [hasAlignment && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(TextAlignMenu, {\n          alignment: documentFeatures.formatting.alignment\n        }), hasLists && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ListButtons, {\n          lists: documentFeatures.formatting.listTypes\n        })]\n      }), (documentFeatures.dividers || documentFeatures.links || !!documentFeatures.images || documentFeatures.formatting.blockTypes.blockquote || documentFeatures.tables || !!documentFeatures.layouts.length || documentFeatures.formatting.blockTypes.code || hasComponentBlocksForToolbar) && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(ToolbarGroup, {\n        children: [documentFeatures.dividers && dividerButton, documentFeatures.links && linkButton, documentFeatures.images && imageButton, documentFeatures.formatting.blockTypes.blockquote && blockquoteButton, !!documentFeatures.layouts.length && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(LayoutsButton, {\n          layouts: documentFeatures.layouts\n        }), documentFeatures.formatting.blockTypes.code && codeButton, documentFeatures.tables && tableButton, hasComponentBlocksForInsertMenu && insertBlocksInToolbar]\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Box, {\n        flex: true\n      })]\n    }), (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {\n      return viewState && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n        gap: \"xsmall\",\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ToolbarSeparator, {}), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.Button, {\n            prominence: \"low\",\n            onPress: () => {\n              viewState.toggle();\n            },\n            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n              src: viewState.expanded ? _keystar_ui_icon_icons_minimizeIcon__WEBPACK_IMPORTED_MODULE_32__.minimizeIcon : _keystar_ui_icon_icons_maximizeIcon__WEBPACK_IMPORTED_MODULE_31__.maximizeIcon\n            })\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n            children: viewState.expanded ? 'Collapse' : 'Expand'\n          })]\n        })]\n      });\n    }, [viewState]), !!hasComponentBlocksForInsertMenu && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(InsertBlockMenu, {})]\n  });\n}\n\n/** Group buttons together that don't fit into an `ActionGroup` semantically. */\nconst ToolbarGroup = ({\n  children\n}) => {\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n    gap: \"regular\",\n    children: children\n  });\n};\nconst ToolbarContainer = ({\n  children\n}) => {\n  let entryLayoutPane = useEntryLayoutSplitPaneContext();\n  if (entryLayoutPane === 'main') {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n      className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n        boxSizing: 'border-box',\n        display: 'flex',\n        paddingInline: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.space.medium,\n        minWidth: 0,\n        maxWidth: 800,\n        marginInline: 'auto',\n        [_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.breakpointQueries.above.mobile]: {\n          paddingInline: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.space.xlarge\n        },\n        [_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.breakpointQueries.above.tablet]: {\n          paddingInline: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.space.xxlarge\n        }\n      }),\n      children: children\n    });\n  }\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n    className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n      display: 'flex'\n    }),\n    children: children\n  });\n};\nconst ToolbarWrapper = ({\n  children\n}) => {\n  let entryLayoutPane = useEntryLayoutSplitPaneContext();\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.Fragment, {\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n      \"data-layout\": entryLayoutPane,\n      className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n        backdropFilter: 'blur(8px)',\n        backgroundClip: 'padding-box',\n        backgroundColor: `color-mix(in srgb, transparent, ${_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.background.canvas} 90%)`,\n        borderBottom: `${_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.border.regular} solid color-mix(in srgb, transparent, ${_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.foreground.neutral} 10%)`,\n        borderStartEndRadius: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.radius.medium,\n        borderStartStartRadius: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.radius.medium,\n        minWidth: 0,\n        position: 'sticky',\n        top: 0,\n        zIndex: 2,\n        '&[data-layout=\"main\"]': {\n          borderRadius: 0\n        }\n      }),\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ToolbarContainer, {\n        children: children\n      })\n    })\n  });\n};\nconst ToolbarScrollArea = props => {\n  let entryLayoutPane = useEntryLayoutSplitPaneContext();\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n    \"data-layout\": entryLayoutPane,\n    paddingY: \"regular\",\n    paddingX: \"medium\",\n    gap: \"large\",\n    flex: true,\n    minWidth: 0,\n    UNSAFE_className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n      msOverflowStyle: 'none' /* for Internet Explorer, Edge */,\n      scrollbarWidth: 'none' /* for Firefox */,\n      overflowX: 'auto',\n      /* for Chrome, Safari, and Opera */\n      '&::-webkit-scrollbar': {\n        display: 'none'\n      },\n      '&[data-layout=\"main\"]': {\n        paddingInline: 0\n      }\n    }),\n    ...props\n  });\n};\nconst headingMenuVals = new Map([['normal', 'normal'], ['1', 1], ['2', 2], ['3', 3], ['4', 4], ['5', 5], ['6', 6]]);\nconst HeadingMenu = ({\n  headingLevels\n}) => {\n  const {\n    editor,\n    textStyles\n  } = useToolbarState();\n  const isDisabled = textStyles.allowedHeadingLevels.length === 0;\n  const items = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {\n    let resolvedItems = [{\n      name: 'Paragraph',\n      id: 'normal'\n    }];\n    headingLevels.forEach(level => {\n      resolvedItems.push({\n        name: `Heading ${level}`,\n        id: level.toString()\n      });\n    });\n    return resolvedItems;\n  }, [headingLevels]);\n  const selected = textStyles.selected.toString();\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_picker__WEBPACK_IMPORTED_MODULE_41__.Picker, {\n    flexShrink: 0,\n    width: \"scale.1700\",\n    prominence: \"low\",\n    \"aria-label\": \"Text block\",\n    items: items,\n    isDisabled: isDisabled,\n    selectedKey: selected,\n    onSelectionChange: selected => {\n      let key = headingMenuVals.get(selected);\n      if (key === 'normal') {\n        slate__WEBPACK_IMPORTED_MODULE_104__.Editor.withoutNormalizing(editor, () => {\n          slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unsetNodes(editor, 'level', {\n            match: n => n.type === 'heading'\n          });\n          slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.setNodes(editor, {\n            type: 'paragraph'\n          }, {\n            match: n => n.type === 'heading'\n          });\n        });\n      } else if (key) {\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.setNodes(editor, {\n          type: 'heading',\n          level: key\n        }, {\n          match: node => node.type === 'paragraph' || node.type === 'heading'\n        });\n      }\n      slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.focus(editor);\n    },\n    children: item => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_action_group__WEBPACK_IMPORTED_MODULE_26__.Item, {\n      children: item.name\n    }, item.id)\n  }), [editor, isDisabled, items, selected]);\n};\nconst insertBlocksInToolbar = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(InsertBlocksInToolbar, {});\nfunction InsertBlocksInToolbar() {\n  const editor = (0,slate_react__WEBPACK_IMPORTED_MODULE_103__.useSlateStatic)();\n  const componentBlocks = useDocumentEditorConfig().componentBlocks;\n  return Object.entries(componentBlocks).filter(([, val]) => val.toolbarIcon).map(([key, item]) => {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n        prominence: \"low\",\n        onPress: () => {\n          insertComponentBlock(editor, componentBlocks, key);\n          slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.focus(editor);\n        },\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n          src: item.toolbarIcon\n        })\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n        children: item.label\n      })]\n    }, key);\n  });\n}\nfunction InsertBlockMenu() {\n  let entryLayoutPane = useEntryLayoutSplitPaneContext();\n  const editor = (0,slate_react__WEBPACK_IMPORTED_MODULE_103__.useSlateStatic)();\n  const componentBlocks = useDocumentEditorConfig().componentBlocks;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_menu__WEBPACK_IMPORTED_MODULE_40__.MenuTrigger, {\n    align: \"end\",\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n        marginY: \"regular\",\n        marginEnd: entryLayoutPane === 'main' ? undefined : 'medium',\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n          src: _keystar_ui_icon_icons_plusIcon__WEBPACK_IMPORTED_MODULE_33__.plusIcon\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n          src: _keystar_ui_icon_icons_chevronDownIcon__WEBPACK_IMPORTED_MODULE_28__.chevronDownIcon\n        })]\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n          children: \"Insert\"\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Kbd, {\n          children: \"/\"\n        })]\n      })]\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_menu__WEBPACK_IMPORTED_MODULE_40__.Menu, {\n      onAction: key => {\n        insertComponentBlock(editor, componentBlocks, key);\n      },\n      items: Object.entries(componentBlocks).filter(([, val]) => !val.toolbarIcon),\n      children: ([key, item]) => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_action_group__WEBPACK_IMPORTED_MODULE_26__.Item, {\n        children: item.label\n      }, key)\n    })]\n  });\n}\nconst inlineMarks = [{\n  key: 'bold',\n  label: 'Bold',\n  icon: _keystar_ui_icon_icons_boldIcon__WEBPACK_IMPORTED_MODULE_27__.boldIcon,\n  shortcut: `B`\n}, {\n  key: 'italic',\n  label: 'Italic',\n  icon: _keystar_ui_icon_icons_italicIcon__WEBPACK_IMPORTED_MODULE_30__.italicIcon,\n  shortcut: `I`\n}, {\n  key: 'underline',\n  label: 'Underline',\n  icon: _keystar_ui_icon_icons_underlineIcon__WEBPACK_IMPORTED_MODULE_39__.underlineIcon,\n  shortcut: `U`\n}, {\n  key: 'strikethrough',\n  label: 'Strikethrough',\n  icon: _keystar_ui_icon_icons_strikethroughIcon__WEBPACK_IMPORTED_MODULE_35__.strikethroughIcon\n}, {\n  key: 'code',\n  label: 'Code',\n  icon: _keystar_ui_icon_icons_codeIcon__WEBPACK_IMPORTED_MODULE_29__.codeIcon\n}, {\n  key: 'superscript',\n  label: 'Superscript',\n  icon: _keystar_ui_icon_icons_superscriptIcon__WEBPACK_IMPORTED_MODULE_37__.superscriptIcon\n}, {\n  key: 'subscript',\n  label: 'Subscript',\n  icon: _keystar_ui_icon_icons_subscriptIcon__WEBPACK_IMPORTED_MODULE_36__.subscriptIcon\n}, {\n  key: 'clearFormatting',\n  label: 'Clear formatting',\n  icon: _keystar_ui_icon_icons_removeFormattingIcon__WEBPACK_IMPORTED_MODULE_34__.removeFormattingIcon\n}];\nfunction InlineMarks({\n  marks: _marksShown\n}) {\n  const {\n    editor,\n    clearFormatting: {\n      isDisabled\n    },\n    marks\n  } = useToolbarState();\n  const marksShown = useMemoStringified(_marksShown);\n  const selectedKeys = useMemoStringified(Object.keys(marks).filter(key => marks[key].isSelected));\n  const disabledKeys = useMemoStringified(Object.keys(marks).filter(key => marks[key].isDisabled).concat(isDisabled ? 'clearFormatting' : []));\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {\n    const items = inlineMarks.filter(item => item.key === 'clearFormatting' || marksShown[item.key]);\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_action_group__WEBPACK_IMPORTED_MODULE_26__.ActionGroup, {\n      UNSAFE_className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n        minWidth: `calc(${_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.element.medium} * 4)`\n      }),\n      prominence: \"low\",\n      density: \"compact\",\n      buttonLabelBehavior: \"hide\",\n      overflowMode: \"collapse\",\n      summaryIcon: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n        src: _keystar_ui_icon_icons_typeIcon__WEBPACK_IMPORTED_MODULE_38__.typeIcon\n      }),\n      items: items,\n      selectionMode: \"multiple\",\n      selectedKeys: selectedKeys,\n      disabledKeys: disabledKeys,\n      onAction: key => {\n        if (key === 'clearFormatting') {\n          clearFormatting(editor);\n        } else {\n          var _Editor$marks;\n          const mark = key;\n          if ((_Editor$marks = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.marks(editor)) !== null && _Editor$marks !== void 0 && _Editor$marks[mark]) {\n            slate__WEBPACK_IMPORTED_MODULE_104__.Editor.removeMark(editor, mark);\n          } else {\n            slate__WEBPACK_IMPORTED_MODULE_104__.Editor.addMark(editor, mark, true);\n          }\n        }\n        slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.focus(editor);\n      },\n      children: item => {\n        return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_action_group__WEBPACK_IMPORTED_MODULE_26__.Item, {\n          textValue: item.label,\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Text, {\n            children: item.label\n          }), 'shortcut' in item && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Kbd, {\n            meta: true,\n            children: item.shortcut\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n            src: item.icon\n          })]\n        }, item.key);\n      }\n    });\n  }, [disabledKeys, editor, marksShown, selectedKeys]);\n}\nfunction useMemoStringified(value) {\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => value, [JSON.stringify(value)]);\n}\n\nconst HeadingElement = ({\n  attributes,\n  children,\n  element\n}) => {\n  const ElementType = `h${element.level}`;\n  const editor = (0,slate_react__WEBPACK_IMPORTED_MODULE_103__.useSlateStatic)();\n  const {\n    documentFeatures\n  } = useDocumentEditorConfig();\n  const [dialogOpen, setDialogOpen] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n  if (Object.keys(documentFeatures.formatting.headings.schema.fields).length === 0) {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ElementType, {\n      ...attributes,\n      style: {\n        textAlign: element.textAlign\n      },\n      children: children\n    });\n  }\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.Fragment, {\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ElementType, {\n      style: {\n        textAlign: element.textAlign\n      },\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(BlockPopoverTrigger, {\n        element: element,\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n          children: children\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(BlockPopover, {\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Flex, {\n            gap: \"regular\",\n            padding: \"regular\",\n            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(CustomAttributesEditButton, {\n              onPress: () => setDialogOpen(true)\n            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.TooltipTrigger, {\n              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_11__.ActionButton, {\n                prominence: \"low\",\n                onPress: () => {\n                  slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n                    at: slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.findPath(editor, element)\n                  });\n                },\n                children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n                  src: _keystar_ui_icon_icons_trash2Icon__WEBPACK_IMPORTED_MODULE_15__.trash2Icon\n                })\n              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_18__.Tooltip, {\n                tone: \"critical\",\n                children: \"Remove\"\n              })]\n            })]\n          })\n        })]\n      })\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(CustomAttributesDialog, {\n      element: element,\n      schema: documentFeatures.formatting.headings.schema,\n      isOpen: dialogOpen,\n      nodeLabel: \"Heading\",\n      onDismiss: () => setDialogOpen(false)\n    })]\n  });\n};\n\nconst renderElement = props => {\n  switch (props.element.type) {\n    case 'layout':\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(LayoutContainer, {\n        attributes: props.attributes,\n        children: props.children,\n        element: props.element\n      });\n    case 'layout-area':\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(LayoutArea, {\n        ...props\n      });\n    case 'code':\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(CodeElement, {\n        attributes: props.attributes,\n        children: props.children,\n        element: props.element\n      });\n    case 'component-block':\n      {\n        return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ComponentBlocksElement, {\n          attributes: props.attributes,\n          children: props.children,\n          element: props.element\n        });\n      }\n    case 'component-inline-prop':\n    case 'component-block-prop':\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ComponentInlineProp, {\n        ...props\n      });\n    case 'heading':\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(HeadingElement, {\n        attributes: props.attributes,\n        children: props.children,\n        element: props.element\n      });\n    case 'link':\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(LinkElement, {\n        attributes: props.attributes,\n        children: props.children,\n        element: props.element\n      });\n    case 'ordered-list':\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"ol\", {\n        ...props.attributes,\n        children: props.children\n      });\n    case 'unordered-list':\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"ul\", {\n        ...props.attributes,\n        children: props.children\n      });\n    case 'list-item':\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"li\", {\n        ...props.attributes,\n        children: props.children\n      });\n    case 'list-item-content':\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"span\", {\n        ...props.attributes,\n        children: props.children\n      });\n    case 'blockquote':\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"blockquote\", {\n        ...props.attributes,\n        children: props.children\n      });\n    case 'divider':\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(DividerElement, {\n        ...props\n      });\n    case 'image':\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ImageElement, {\n        attributes: props.attributes,\n        children: props.children,\n        element: props.element\n      });\n    case 'table':\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(TableElement, {\n        attributes: props.attributes,\n        children: props.children,\n        element: props.element\n      });\n    case 'table-head':\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(TableHeadElement, {\n        attributes: props.attributes,\n        children: props.children,\n        element: props.element\n      });\n    case 'table-body':\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(TableBodyElement, {\n        attributes: props.attributes,\n        children: props.children,\n        element: props.element\n      });\n    case 'table-row':\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(TableRowElement, {\n        attributes: props.attributes,\n        children: props.children,\n        element: props.element\n      });\n    case 'table-cell':\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(TableCellElement, {\n        attributes: props.attributes,\n        children: props.children,\n        element: props.element\n      });\n    default:\n      let {\n        textAlign\n      } = props.element;\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"p\", {\n        style: {\n          textAlign\n        },\n        ...props.attributes,\n        children: props.children\n      });\n  }\n};\n\nfunction getOptions(toolbarState, componentBlocks) {\n  const options = [...Object.keys(componentBlocks).map(key => ({\n    label: componentBlocks[key].label,\n    insert: editor => {\n      insertComponentBlock(editor, componentBlocks, key);\n    }\n  })), ...toolbarState.textStyles.allowedHeadingLevels.filter(a => toolbarState.editorDocumentFeatures.formatting.headings.levels.includes(a)).map(level => ({\n    label: `Heading ${level}`,\n    insert(editor) {\n      insertNodesButReplaceIfSelectionIsAtEmptyParagraphOrHeading(editor, {\n        type: 'heading',\n        level,\n        children: [{\n          text: ''\n        }]\n      });\n    }\n  })), !toolbarState.blockquote.isDisabled && toolbarState.editorDocumentFeatures.formatting.blockTypes.blockquote && {\n    label: 'Blockquote',\n    insert(editor) {\n      insertNodesButReplaceIfSelectionIsAtEmptyParagraphOrHeading(editor, {\n        type: 'blockquote',\n        children: [{\n          text: ''\n        }]\n      });\n    }\n  }, !toolbarState.code.isDisabled && toolbarState.editorDocumentFeatures.formatting.blockTypes.code && {\n    label: 'Code block',\n    insert(editor) {\n      insertNodesButReplaceIfSelectionIsAtEmptyParagraphOrHeading(editor, {\n        type: 'code',\n        children: [{\n          text: ''\n        }]\n      });\n    }\n  }, !!toolbarState.editorDocumentFeatures.images && {\n    label: 'Image',\n    async insert(editor) {\n      const image = await getUploadedImage();\n      if (image) {\n        insertNodesButReplaceIfSelectionIsAtEmptyParagraphOrHeading(editor, {\n          type: 'image',\n          src: image,\n          alt: '',\n          title: '',\n          children: [{\n            text: ''\n          }]\n        });\n      }\n    }\n  }, !!toolbarState.editorDocumentFeatures.tables && {\n    label: 'Table',\n    insert: insertTable\n  }, !toolbarState.dividers.isDisabled && toolbarState.editorDocumentFeatures.dividers && {\n    label: 'Divider',\n    insert(editor) {\n      insertNodesButReplaceIfSelectionIsAtEmptyParagraphOrHeading(editor, {\n        type: 'divider',\n        children: [{\n          text: ''\n        }]\n      });\n    }\n  }, !!toolbarState.editorDocumentFeatures.layouts.length && {\n    label: 'Layout',\n    insert(editor) {\n      insertLayout(editor, toolbarState.editorDocumentFeatures.layouts[0]);\n    }\n  }, !toolbarState.lists.ordered.isDisabled && toolbarState.editorDocumentFeatures.formatting.listTypes.ordered && {\n    label: 'Numbered List',\n    keywords: ['ordered list'],\n    insert(editor) {\n      insertNodesButReplaceIfSelectionIsAtEmptyParagraphOrHeading(editor, {\n        type: 'ordered-list',\n        children: [{\n          text: ''\n        }]\n      });\n    }\n  }, !toolbarState.lists.unordered.isDisabled && toolbarState.editorDocumentFeatures.formatting.listTypes.unordered && {\n    label: 'Bullet List',\n    keywords: ['unordered list'],\n    insert(editor) {\n      insertNodesButReplaceIfSelectionIsAtEmptyParagraphOrHeading(editor, {\n        type: 'unordered-list',\n        children: [{\n          text: ''\n        }]\n      });\n    }\n  }];\n  return options.filter(x => typeof x !== 'boolean');\n}\nfunction insertOption(editor, text, option) {\n  const path = slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.findPath(editor, text);\n  slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.delete(editor, {\n    at: {\n      focus: slate__WEBPACK_IMPORTED_MODULE_104__.Editor.start(editor, path),\n      anchor: slate__WEBPACK_IMPORTED_MODULE_104__.Editor.end(editor, path)\n    }\n  });\n  option.insert(editor);\n}\nfunction InsertMenu({\n  children,\n  text\n}) {\n  const toolbarState = useToolbarState();\n  const {\n    editor\n  } = toolbarState;\n  const {\n    componentBlocks\n  } = useDocumentEditorConfig();\n  const options = (0,match_sorter__WEBPACK_IMPORTED_MODULE_46__.matchSorter)(getOptions(toolbarState, componentBlocks), text.text.slice(1), {\n    keys: ['label', 'keywords']\n  }).map((option, index) => ({\n    ...option,\n    index\n  }));\n  const stateRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)({\n    options,\n    text\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    stateRef.current = {\n      options,\n      text\n    };\n  });\n  const listenerRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(_event => {});\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    listenerRef.current = event => {\n      if (event.defaultPrevented) return;\n      switch (event.key) {\n        case 'ArrowDown':\n          {\n            if (stateRef.current.options.length) {\n              event.preventDefault();\n              state.selectionManager.setFocused(true);\n              state.selectionManager.setFocusedKey((Number(state.selectionManager.focusedKey) === stateRef.current.options.length - 1 ? 0 : Number(state.selectionManager.focusedKey) + 1).toString());\n            }\n            return;\n          }\n        case 'ArrowUp':\n          {\n            if (stateRef.current.options.length) {\n              event.preventDefault();\n              state.selectionManager.setFocused(true);\n              state.selectionManager.setFocusedKey((state.selectionManager.focusedKey === '0' ? stateRef.current.options.length - 1 : Number(state.selectionManager.focusedKey) - 1).toString());\n            }\n            return;\n          }\n        case 'Enter':\n          {\n            const option = stateRef.current.options[Number(state.selectionManager.focusedKey)];\n            if (option) {\n              insertOption(editor, stateRef.current.text, option);\n              event.preventDefault();\n            }\n            return;\n          }\n        case 'Escape':\n          {\n            const path = slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.findPath(editor, stateRef.current.text);\n            slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unsetNodes(editor, 'insertMenu', {\n              at: path\n            });\n            event.preventDefault();\n            return;\n          }\n      }\n    };\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    const domNode = slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.toDOMNode(editor, editor);\n    let listener = event => listenerRef.current(event);\n    domNode.addEventListener('keydown', listener);\n    return () => {\n      domNode.removeEventListener('keydown', listener);\n    };\n  }, [editor]);\n  const triggerRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n  const overlayState = (0,_react_stately_overlays__WEBPACK_IMPORTED_MODULE_105__.useOverlayTriggerState)({\n    isOpen: true\n  });\n  const {\n    triggerProps: {\n      onPress,\n      ...triggerProps\n    },\n    overlayProps\n  } = (0,_react_aria_overlays__WEBPACK_IMPORTED_MODULE_106__.useOverlayTrigger)({\n    type: 'listbox'\n  }, overlayState, triggerRef);\n  let state = (0,_react_stately_list__WEBPACK_IMPORTED_MODULE_109__.useListState)({\n    items: options,\n    children: item => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_listbox__WEBPACK_IMPORTED_MODULE_71__.Item, {\n      children: item.label\n    }, item.index)\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    if (!state.selectionManager.isFocused && state.collection.size) {\n      state.selectionManager.setFocused(true);\n      state.selectionManager.setFocusedKey('0');\n    }\n  }, [state]);\n  const scrollableRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n    var _scrollableRef$curren;\n    const element = (_scrollableRef$curren = scrollableRef.current) === null || _scrollableRef$curren === void 0 || (_scrollableRef$curren = _scrollableRef$curren.querySelector('[role=\"listbox\"] [role=\"presentation\"]')) === null || _scrollableRef$curren === void 0 ? void 0 : _scrollableRef$curren.children[state.selectionManager.focusedKey];\n    if (element) {\n      (0,scroll_into_view_if_needed__WEBPACK_IMPORTED_MODULE_110__[\"default\"])(element, {\n        scrollMode: 'if-needed',\n        boundary: scrollableRef.current,\n        block: 'nearest'\n      });\n    }\n  }, [state.selectionManager.focusedKey]);\n  const listboxRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n  let layout = (0,_keystar_ui_listbox__WEBPACK_IMPORTED_MODULE_71__.useListBoxLayout)(state);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(react__WEBPACK_IMPORTED_MODULE_3__.Fragment, {\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"span\", {\n      ...triggerProps,\n      role: \"button\",\n      className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n        color: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.foreground.accent,\n        fontWeight: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.typography.fontWeight.medium\n      }),\n      ref: triggerRef,\n      children: children\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_overlays__WEBPACK_IMPORTED_MODULE_24__.Popover, {\n      width: \"alias.singleLineWidth\",\n      placement: \"bottom start\",\n      isNonModal: true,\n      hideArrow: true,\n      ...overlayProps,\n      state: overlayState,\n      triggerRef: triggerRef,\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n        className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n          overflow: 'scroll',\n          maxHeight: 300\n        }),\n        ref: scrollableRef,\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_listbox__WEBPACK_IMPORTED_MODULE_71__.ListBoxBase, {\n          \"aria-label\": \"Insert block\",\n          state: state,\n          shouldUseVirtualFocus: true,\n          layout: layout,\n          ref: listboxRef,\n          onAction: key => {\n            insertOption(editor, text, options[key]);\n          }\n        })\n      })\n    })]\n  });\n}\nconst nodeListsWithoutInsertMenu = new WeakSet();\nconst nodesWithoutInsertMenu = new WeakSet();\nfunction findPathWithInsertMenu(node, path) {\n  if (slate__WEBPACK_IMPORTED_MODULE_104__.Text.isText(node)) {\n    return node.insertMenu ? path : undefined;\n  }\n  if (nodeListsWithoutInsertMenu.has(node.children)) {\n    return;\n  }\n  for (const [index, child] of node.children.entries()) {\n    if (nodesWithoutInsertMenu.has(child)) continue;\n    let maybePath = findPathWithInsertMenu(child, [...path, index]);\n    if (maybePath) {\n      return maybePath;\n    }\n    nodesWithoutInsertMenu.add(child);\n  }\n  nodeListsWithoutInsertMenu.add(node.children);\n}\nfunction removeInsertMenuMarkWhenOutsideOfSelection(editor) {\n  var _Editor$marks;\n  const path = findPathWithInsertMenu(editor, []);\n  if (path && !((_Editor$marks = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.marks(editor)) !== null && _Editor$marks !== void 0 && _Editor$marks.insertMenu) && (!editor.selection || !slate__WEBPACK_IMPORTED_MODULE_104__.Path.equals(editor.selection.anchor.path, path) || !slate__WEBPACK_IMPORTED_MODULE_104__.Path.equals(editor.selection.focus.path, path))) {\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unsetNodes(editor, 'insertMenu', {\n      at: path\n    });\n    return true;\n  }\n  return false;\n}\nfunction withInsertMenu(editor) {\n  const {\n    normalizeNode,\n    apply,\n    insertText\n  } = editor;\n  editor.normalizeNode = ([node, path]) => {\n    if (slate__WEBPACK_IMPORTED_MODULE_104__.Text.isText(node) && node.insertMenu) {\n      if (node.text[0] !== '/') {\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unsetNodes(editor, 'insertMenu', {\n          at: path\n        });\n        return;\n      }\n      const whitespaceMatch = /\\s/.exec(node.text);\n      if (whitespaceMatch) {\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unsetNodes(editor, 'insertMenu', {\n          at: {\n            anchor: {\n              path,\n              offset: whitespaceMatch.index\n            },\n            focus: slate__WEBPACK_IMPORTED_MODULE_104__.Editor.end(editor, path)\n          },\n          match: slate__WEBPACK_IMPORTED_MODULE_104__.Text.isText,\n          split: true\n        });\n        return;\n      }\n    }\n    if (slate__WEBPACK_IMPORTED_MODULE_104__.Editor.isEditor(editor) && removeInsertMenuMarkWhenOutsideOfSelection(editor)) {\n      return;\n    }\n    normalizeNode([node, path]);\n  };\n  editor.apply = op => {\n    apply(op);\n    // we're calling this here AND in normalizeNode\n    // because normalizeNode won't be called on selection changes\n    // but apply will\n    // we're still calling this from normalizeNode though because we want it to happen\n    // when normalization happens\n    if (op.type === 'set_selection') {\n      removeInsertMenuMarkWhenOutsideOfSelection(editor);\n    }\n  };\n  editor.insertText = text => {\n    insertText(text);\n    if (editor.selection && text === '/') {\n      const startOfBlock = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.start(editor, slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n        match: isBlock\n      })[1]);\n      const before = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.before(editor, editor.selection.anchor, {\n        unit: 'character'\n      });\n      if (before && (slate__WEBPACK_IMPORTED_MODULE_104__.Point.equals(startOfBlock, before) || before.offset !== 0 && /\\s/.test(slate__WEBPACK_IMPORTED_MODULE_104__.Node.get(editor, before.path).text[before.offset - 1]))) {\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.setNodes(editor, {\n          insertMenu: true\n        }, {\n          at: {\n            anchor: before,\n            focus: editor.selection.anchor\n          },\n          match: slate__WEBPACK_IMPORTED_MODULE_104__.Text.isText,\n          split: true\n        });\n      }\n    }\n  };\n  return editor;\n}\n\nfunction Placeholder({\n  placeholder,\n  children\n}) {\n  const [width, setWidth] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(0);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(\"span\", {\n    className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n      position: 'relative',\n      display: 'inline-block',\n      width\n    }),\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"span\", {\n      contentEditable: false,\n      className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n        position: 'absolute',\n        pointerEvents: 'none',\n        display: 'inline-block',\n        left: 0,\n        top: 0,\n        maxWidth: '100%',\n        whiteSpace: 'nowrap',\n        opacity: '0.5',\n        userSelect: 'none',\n        fontStyle: 'normal',\n        fontWeight: 'normal',\n        textDecoration: 'none',\n        textAlign: 'left'\n      }),\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"span\", {\n        ref: node => {\n          if (node) {\n            const offsetWidth = node.offsetWidth;\n            if (offsetWidth !== width) {\n              setWidth(offsetWidth);\n            }\n          }\n        },\n        children: placeholder\n      })\n    }), children]\n  });\n}\nconst Leaf = ({\n  leaf,\n  text,\n  children,\n  attributes\n}) => {\n  const {\n    underline,\n    strikethrough,\n    bold,\n    italic,\n    code,\n    keyboard,\n    superscript,\n    subscript,\n    placeholder,\n    insertMenu,\n    ...rest\n  } = leaf;\n  if (placeholder !== undefined) {\n    children = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(Placeholder, {\n      placeholder: placeholder,\n      children: children\n    });\n  }\n  if (insertMenu) {\n    children = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(InsertMenu, {\n      text: text,\n      children: children\n    });\n  }\n  if (code) {\n    children = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"code\", {\n      children: children\n    });\n  }\n  if (bold) {\n    children = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"strong\", {\n      children: children\n    });\n  }\n  if (strikethrough) {\n    children = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"s\", {\n      children: children\n    });\n  }\n  if (italic) {\n    children = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"em\", {\n      children: children\n    });\n  }\n  if (keyboard) {\n    children = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"kbd\", {\n      children: children\n    });\n  }\n  if (superscript) {\n    children = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"sup\", {\n      children: children\n    });\n  }\n  if (subscript) {\n    children = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"sub\", {\n      children: children\n    });\n  }\n  if (underline) {\n    children = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"u\", {\n      children: children\n    });\n  }\n  const prismClassNames = Object.keys(rest).filter(x => x.startsWith('prism_')).map(x => styles$1.get(x.replace('prism_', '')));\n  if (prismClassNames.length) {\n    const className = prismClassNames.join(' ');\n    children = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"span\", {\n      className: className,\n      children: children\n    });\n  }\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"span\", {\n    ...attributes,\n    children: children\n  });\n};\nconst renderLeaf = props => {\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(Leaf, {\n    ...props\n  });\n};\nconst styles$1 = new Map([{\n  types: ['comment', 'prolog', 'doctype', 'cdata'],\n  style: {\n    color: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.foreground.neutralTertiary,\n    fontStyle: 'italic'\n  }\n}, {\n  types: ['atrule', 'attr-name', 'class-name', 'selector'],\n  style: {\n    color: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.scale.amber11\n  }\n}, {\n  types: ['boolean', 'constant', 'inserted-sign', 'entity', 'inserted', 'number', 'regex', 'symbol', 'variable'],\n  style: {\n    color: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.scale.green11\n  }\n}, {\n  types: ['attr-value', 'builtin', 'char', 'constant', 'generics', 'url'],\n  style: {\n    color: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.scale.pink11\n  }\n}, {\n  types: ['string'],\n  style: {\n    color: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.scale.indigo9\n  }\n}, {\n  types: ['annotation', 'deleted', 'deleted-sign', 'decorator', 'important', 'tag'],\n  style: {\n    color: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.scale.red11\n  }\n}, {\n  types: ['function', 'function-variable', 'operator'],\n  style: {\n    color: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.scale.purple11\n  }\n}, {\n  types: ['tag', 'selector', 'keyword'],\n  style: {\n    color: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.scale.indigo11\n  }\n}, {\n  types: ['punctuation'],\n  style: {\n    color: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.foreground.neutralSecondary\n  }\n}].flatMap(style => {\n  const className = (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)(style.style);\n  return style.types.map(x => [x, className]);\n}));\n\nconst codeBlockShortcutPattern = /^```(\\w+)? ?$/;\nfunction withCodeBlock(documentFeatures, componentBlocks, editor) {\n  const {\n    insertBreak,\n    normalizeNode,\n    insertText\n  } = editor;\n  function codeBlockShortcut(block) {\n    var _aliasesToCanonicalNa;\n    if ((block === null || block === void 0 ? void 0 : block[0].type) !== 'paragraph' || block[0].children.length !== 1 || block[0].children[0].type !== undefined) {\n      return false;\n    }\n    const match = codeBlockShortcutPattern.exec(block[0].children[0].text);\n    if (!match) {\n      return false;\n    }\n    const locationDocumentFeatures = getAncestorComponentChildFieldDocumentFeatures(editor, documentFeatures, componentBlocks);\n    if (locationDocumentFeatures && (locationDocumentFeatures.kind === 'inline' || !locationDocumentFeatures.documentFeatures.formatting.blockTypes.code)) {\n      return false;\n    }\n\n    // so that this starts a new undo group\n    editor.history.undos.push({\n      operations: [],\n      selectionBefore: editor.selection\n    });\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.select(editor, block[1]);\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.delete(editor);\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.wrapNodes(editor, {\n      type: 'code',\n      ...(match[1] ? {\n        language: (_aliasesToCanonicalNa = aliasesToCanonicalName.get(match[1].toLowerCase())) !== null && _aliasesToCanonicalNa !== void 0 ? _aliasesToCanonicalNa : match[1]\n      } : {}),\n      children: []\n    }, {\n      match: node => node.type === 'paragraph'\n    });\n    return true;\n  }\n  editor.insertBreak = () => {\n    const block = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n      match: isBlock\n    });\n    if ((block === null || block === void 0 ? void 0 : block[0].type) === 'code' && slate__WEBPACK_IMPORTED_MODULE_104__.Text.isText(block[0].children[0])) {\n      const text = block[0].children[0].text;\n      if (text[text.length - 1] === '\\n' && editor.selection && slate__WEBPACK_IMPORTED_MODULE_104__.Range.isCollapsed(editor.selection) && slate__WEBPACK_IMPORTED_MODULE_104__.Point.equals(slate__WEBPACK_IMPORTED_MODULE_104__.Editor.end(editor, block[1]), editor.selection.anchor)) {\n        insertBreak();\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.setNodes(editor, {\n          type: 'paragraph',\n          children: []\n        });\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.delete(editor, {\n          distance: 1,\n          at: {\n            path: [...block[1], 0],\n            offset: text.length - 1\n          }\n        });\n        return;\n      }\n      editor.insertText('\\n');\n      return;\n    }\n    if (editor.selection && slate__WEBPACK_IMPORTED_MODULE_104__.Range.isCollapsed(editor.selection) && codeBlockShortcut(block)) {\n      return;\n    }\n    insertBreak();\n  };\n  editor.insertText = text => {\n    insertText(text);\n    if (text === ' ' && editor.selection && slate__WEBPACK_IMPORTED_MODULE_104__.Range.isCollapsed(editor.selection)) {\n      codeBlockShortcut(slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n        match: isBlock\n      }));\n    }\n  };\n  editor.normalizeNode = ([node, path]) => {\n    if (node.type === 'code' && slate__WEBPACK_IMPORTED_MODULE_104__.Element.isElement(node)) {\n      for (const [index, childNode] of node.children.entries()) {\n        if (!slate__WEBPACK_IMPORTED_MODULE_104__.Text.isText(childNode)) {\n          if (editor.isVoid(childNode)) {\n            slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n              at: [...path, index]\n            });\n          } else {\n            slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n              at: [...path, index]\n            });\n          }\n          return;\n        }\n        const marks = Object.keys(childNode).filter(x => x !== 'text');\n        if (marks.length) {\n          slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unsetNodes(editor, marks, {\n            at: [...path, index]\n          });\n          return;\n        }\n      }\n    }\n    normalizeNode([node, path]);\n  };\n  return editor;\n}\n\nconst paragraphElement = () => ({\n  type: 'paragraph',\n  children: [{\n    text: ''\n  }]\n});\nfunction withParagraphs(editor) {\n  const {\n    normalizeNode\n  } = editor;\n  editor.normalizeNode = entry => {\n    const [node, path] = entry;\n    if (slate__WEBPACK_IMPORTED_MODULE_104__.Editor.isEditor(node)) {\n      let lastNode = node.children[node.children.length - 1];\n      if ((lastNode === null || lastNode === void 0 ? void 0 : lastNode.type) !== 'paragraph') {\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.insertNodes(editor, paragraphElement(), {\n          at: [...path, node.children.length]\n        });\n        return;\n      }\n    }\n    normalizeNode(entry);\n  };\n  return editor;\n}\n\nfunction withLayouts(editor) {\n  const {\n    normalizeNode,\n    deleteBackward\n  } = editor;\n  editor.deleteBackward = unit => {\n    if (editor.selection && slate__WEBPACK_IMPORTED_MODULE_104__.Range.isCollapsed(editor.selection) &&\n    // this is just an little optimisation\n    // we're only doing things if we're at the start of a layout area\n    // and the start of anything will always be offset 0\n    // so we'll bailout if we're not at offset 0\n    editor.selection.anchor.offset === 0) {\n      const [aboveNode, abovePath] = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n        match: node => node.type === 'layout-area'\n      }) || [editor, []];\n      if (aboveNode.type === 'layout-area' && slate__WEBPACK_IMPORTED_MODULE_104__.Point.equals(slate__WEBPACK_IMPORTED_MODULE_104__.Editor.start(editor, abovePath), editor.selection.anchor)) {\n        return;\n      }\n    }\n    deleteBackward(unit);\n  };\n  editor.normalizeNode = entry => {\n    const [node, path] = entry;\n    if (slate__WEBPACK_IMPORTED_MODULE_104__.Element.isElement(node) && node.type === 'layout') {\n      if (node.layout === undefined) {\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n          at: path\n        });\n        return;\n      }\n      if (node.children.length < node.layout.length) {\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.insertNodes(editor, Array.from({\n          length: node.layout.length - node.children.length\n        }).map(() => ({\n          type: 'layout-area',\n          children: [paragraphElement()]\n        })), {\n          at: [...path, node.children.length]\n        });\n        return;\n      }\n      if (node.children.length > node.layout.length) {\n        Array.from({\n          length: node.children.length - node.layout.length\n        }).map((_, i) => i).reverse().forEach(i => {\n          const layoutAreaToRemovePath = [...path, i + node.layout.length];\n          const child = node.children[i + node.layout.length];\n          moveChildren(editor, layoutAreaToRemovePath, [...path, node.layout.length - 1, node.children[node.layout.length - 1].children.length], node => node.type !== 'paragraph' || slate__WEBPACK_IMPORTED_MODULE_104__.Node.string(child) !== '');\n          slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n            at: layoutAreaToRemovePath\n          });\n        });\n        return;\n      }\n    }\n    normalizeNode(entry);\n  };\n  return editor;\n}\n\nconst markdownLinkPattern = /(^|\\s)\\[(.+?)\\]\\((\\S+)\\)$/;\nfunction withLink(editorDocumentFeatures, componentBlocks, editor) {\n  const {\n    insertText,\n    isInline,\n    normalizeNode\n  } = editor;\n  editor.isInline = element => {\n    return element.type === 'link' ? true : isInline(element);\n  };\n  if (editorDocumentFeatures.links) {\n    editor.insertText = text => {\n      insertText(text);\n      if (text !== ')' || !editor.selection) {\n        return;\n      }\n      const startOfBlock = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.start(editor, slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n        match: isBlock\n      })[1]);\n      const startOfBlockToEndOfShortcutString = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.string(editor, {\n        anchor: editor.selection.anchor,\n        focus: startOfBlock\n      });\n      const match = markdownLinkPattern.exec(startOfBlockToEndOfShortcutString);\n      if (!match) {\n        return;\n      }\n      const ancestorComponentChildFieldDocumentFeatures = getAncestorComponentChildFieldDocumentFeatures(editor, editorDocumentFeatures, componentBlocks);\n      if ((ancestorComponentChildFieldDocumentFeatures === null || ancestorComponentChildFieldDocumentFeatures === void 0 ? void 0 : ancestorComponentChildFieldDocumentFeatures.documentFeatures.links) === false) {\n        return;\n      }\n      const [, maybeWhitespace, linkText, href] = match;\n      // by doing this, the insertText(')') above will happen in a different undo than the link replacement\n      // so that means that when someone does an undo after this\n      // it will undo to the state of \"[content](link)\" rather than \"[content](link\" (note the missing closing bracket)\n      editor.history.undos.push({\n        operations: [],\n        selectionBefore: editor.selection\n      });\n      const startOfShortcut = match.index === 0 ? startOfBlock : EditorAfterButIgnoringingPointsWithNoContent(editor, startOfBlock, {\n        distance: match.index\n      });\n      const startOfLinkText = EditorAfterButIgnoringingPointsWithNoContent(editor, startOfShortcut, {\n        distance: maybeWhitespace === '' ? 1 : 2\n      });\n      const endOfLinkText = EditorAfterButIgnoringingPointsWithNoContent(editor, startOfLinkText, {\n        distance: linkText.length\n      });\n      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.delete(editor, {\n        at: {\n          anchor: endOfLinkText,\n          focus: editor.selection.anchor\n        }\n      });\n      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.delete(editor, {\n        at: {\n          anchor: startOfShortcut,\n          focus: startOfLinkText\n        }\n      });\n      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.wrapNodes(editor, {\n        type: 'link',\n        href,\n        children: []\n      }, {\n        at: {\n          anchor: editor.selection.anchor,\n          focus: startOfShortcut\n        },\n        split: true\n      });\n      const nextNode = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.next(editor);\n      if (nextNode) {\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.select(editor, nextNode[1]);\n      }\n    };\n  }\n  editor.normalizeNode = ([node, path]) => {\n    if (node.type === 'link') {\n      if (slate__WEBPACK_IMPORTED_MODULE_104__.Node.string(node) === '') {\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n          at: path\n        });\n        return;\n      }\n      for (const [idx, child] of node.children.entries()) {\n        if (child.type === 'link') {\n          // links cannot contain links\n          slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n            at: [...path, idx]\n          });\n          return;\n        }\n      }\n    }\n    if (isInlineContainer(node)) {\n      let lastMergableLink = null;\n      for (const [idx, child] of node.children.entries()) {\n        var _lastMergableLink;\n        if (child.type === 'link' && child.href === ((_lastMergableLink = lastMergableLink) === null || _lastMergableLink === void 0 ? void 0 : _lastMergableLink.node.href)) {\n          const firstLinkPath = [...path, lastMergableLink.index];\n          const secondLinkPath = [...path, idx];\n          const to = [...firstLinkPath, lastMergableLink.node.children.length];\n          // note this is going in reverse, js doesn't have double-ended iterators so it's a for(;;)\n          for (let i = child.children.length - 1; i >= 0; i--) {\n            const childPath = [...secondLinkPath, i];\n            slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.moveNodes(editor, {\n              at: childPath,\n              to\n            });\n          }\n          slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.removeNodes(editor, {\n            at: secondLinkPath\n          });\n          return;\n        }\n        if (!slate__WEBPACK_IMPORTED_MODULE_104__.Text.isText(child) || child.text !== '') {\n          lastMergableLink = null;\n        }\n        if (child.type === 'link') {\n          lastMergableLink = {\n            index: idx,\n            node: child\n          };\n        }\n      }\n    }\n    normalizeNode([node, path]);\n  };\n  return editor;\n}\n\nfunction createDocumentEditorForNormalization(documentFeatures, componentBlocks) {\n  return _createDocumentEditor((0,slate__WEBPACK_IMPORTED_MODULE_104__.createEditor)(), documentFeatures, componentBlocks);\n}\nfunction _createDocumentEditor(baseEditor, documentFeatures, componentBlocks) {\n  return withBlocksSchema(withParagraphs(withLink(documentFeatures, componentBlocks, withList(withTable(withComponentBlocks(componentBlocks, documentFeatures, withVoidElements(withLayouts(withCodeBlock(documentFeatures, componentBlocks, withDocumentFeaturesNormalization(documentFeatures, baseEditor))))))))));\n}\nfunction withBlocksSchema(editor) {\n  const {\n    normalizeNode\n  } = editor;\n  editor.normalizeNode = ([node, path]) => {\n    if (!slate__WEBPACK_IMPORTED_MODULE_104__.Text.isText(node) && node.type !== 'link') {\n      const nodeType = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.isEditor(node) ? 'editor' : node.type;\n      if (typeof nodeType !== 'string' || editorSchema[nodeType] === undefined) {\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n          at: path\n        });\n        return;\n      }\n      const info = editorSchema[nodeType];\n      if (info.kind === 'blocks' && node.children.length !== 0 && node.children.every(child => !isBlock(child))) {\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.wrapNodes(editor, {\n          type: info.blockToWrapInlinesIn,\n          children: []\n        }, {\n          at: path,\n          match: node => !isBlock(node)\n        });\n        return;\n      }\n      let didUpdate = false;\n      for (const [index, childNode] of [...node.children.entries()].reverse()) {\n        const childPath = [...path, index];\n        if (info.kind === 'inlines') {\n          if (!slate__WEBPACK_IMPORTED_MODULE_104__.Text.isText(childNode) && isBlock(childNode)) {\n            handleNodeInInvalidPosition(editor, [childNode, childPath], path);\n            didUpdate = true;\n            continue;\n          }\n        } else {\n          if (!isBlock(childNode)) {\n            slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.wrapNodes(editor, {\n              type: info.blockToWrapInlinesIn,\n              children: []\n            }, {\n              at: childPath\n            });\n            didUpdate = true;\n            continue;\n          }\n          if (!info.allowedChildren.has(childNode.type)) {\n            handleNodeInInvalidPosition(editor, [childNode, childPath], path);\n            didUpdate = true;\n            continue;\n          }\n        }\n      }\n      if (didUpdate) {\n        return;\n      }\n    }\n    normalizeNode([node, path]);\n  };\n  return editor;\n}\nfunction handleNodeInInvalidPosition(editor, [node, path], ancestorPath) {\n  const nodeType = node.type;\n  const childNodeInfo = editorSchema[nodeType];\n  // the parent of a block will never be an inline so this casting is okay\n  const ancestorNode = slate__WEBPACK_IMPORTED_MODULE_104__.Node.get(editor, ancestorPath);\n  const parentNodeType = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.isEditor(ancestorNode) ? 'editor' : ancestorNode.type;\n  const parentNodeInfo = editorSchema[parentNodeType];\n  if (!childNodeInfo || childNodeInfo.invalidPositionHandleMode === 'unwrap') {\n    if (parentNodeInfo.kind === 'blocks' && parentNodeInfo.blockToWrapInlinesIn) {\n      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.setNodes(editor, {\n        type: parentNodeInfo.blockToWrapInlinesIn,\n        ...Object.fromEntries(Object.keys(node).filter(key => key !== 'type' && key !== 'children').map(key => [key, null])) // the Slate types don't understand that null is allowed and it will unset properties with setNodes\n      }, {\n        at: path\n      });\n      return;\n    }\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n      at: path\n    });\n    return;\n  }\n  const info = editorSchema[ancestorNode.type || 'editor'];\n  if ((info === null || info === void 0 ? void 0 : info.kind) === 'blocks' && info.allowedChildren.has(nodeType)) {\n    if (ancestorPath.length === 0) {\n      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.moveNodes(editor, {\n        at: path,\n        to: [path[0] + 1]\n      });\n    } else {\n      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.moveNodes(editor, {\n        at: path,\n        to: slate__WEBPACK_IMPORTED_MODULE_104__.Path.next(ancestorPath)\n      });\n    }\n    return;\n  }\n  if (slate__WEBPACK_IMPORTED_MODULE_104__.Editor.isEditor(ancestorNode)) {\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.moveNodes(editor, {\n      at: path,\n      to: [path[0] + 1]\n    });\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n      at: [path[0] + 1]\n    });\n    return;\n  }\n  handleNodeInInvalidPosition(editor, [node, path], ancestorPath.slice(0, -1));\n}\nfunction withVoidElements(editor) {\n  const {\n    isVoid\n  } = editor;\n  editor.isVoid = node => {\n    return node.type === 'divider' || node.type === 'image' || isVoid(node);\n  };\n  return editor;\n}\n\nfunction withBlockMarkdownShortcuts(documentFeatures, componentBlocks, editor) {\n  const {\n    insertText\n  } = editor;\n  const shortcuts = Object.create(null);\n  const editorDocumentFeaturesForNormalizationToCheck = {\n    ...documentFeatures\n  };\n  let addShortcut = (text, insert, shouldBeEnabledInComponentBlock, type = 'paragraph') => {\n    if (!shouldBeEnabledInComponentBlock(editorDocumentFeaturesForNormalizationToCheck)) {\n      return;\n    }\n    const trigger = text[text.length - 1];\n    if (!shortcuts[trigger]) {\n      shortcuts[trigger] = Object.create(null);\n    }\n    shortcuts[trigger][text] = {\n      insert,\n      type,\n      shouldBeEnabledInComponentBlock\n    };\n  };\n  addShortcut('1. ', () => {\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.wrapNodes(editor, {\n      type: 'ordered-list',\n      children: []\n    }, {\n      match: isBlock\n    });\n  }, features => features.formatting.listTypes.ordered);\n  addShortcut('- ', () => {\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.wrapNodes(editor, {\n      type: 'unordered-list',\n      children: []\n    }, {\n      match: isBlock\n    });\n  }, features => features.formatting.listTypes.unordered);\n  addShortcut('* ', () => {\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.wrapNodes(editor, {\n      type: 'unordered-list',\n      children: []\n    }, {\n      match: isBlock\n    });\n  }, features => features.formatting.listTypes.unordered);\n  documentFeatures.formatting.headings.levels.forEach(level => {\n    addShortcut('#'.repeat(level) + ' ', () => {\n      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.setNodes(editor, {\n        type: 'heading',\n        level\n      }, {\n        match: node => node.type === 'paragraph' || node.type === 'heading'\n      });\n    }, features => features.formatting.headings.levels.includes(level), 'heading-or-paragraph');\n  });\n  addShortcut('> ', () => {\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.wrapNodes(editor, {\n      type: 'blockquote',\n      children: []\n    }, {\n      match: node => node.type === 'paragraph'\n    });\n  }, features => features.formatting.blockTypes.blockquote);\n  addShortcut('---', () => {\n    insertDivider(editor);\n  }, features => features.dividers);\n  editor.insertText = text => {\n    insertText(text);\n    const shortcutsForTrigger = shortcuts[text];\n    if (shortcutsForTrigger && editor.selection && slate__WEBPACK_IMPORTED_MODULE_104__.Range.isCollapsed(editor.selection)) {\n      const {\n        anchor\n      } = editor.selection;\n      const block = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n        match: isBlock\n      });\n      if (!block || block[0].type !== 'paragraph' && block[0].type !== 'heading') {\n        return;\n      }\n      const start = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.start(editor, block[1]);\n      const range = {\n        anchor,\n        focus: start\n      };\n      const shortcutText = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.string(editor, range);\n      const shortcut = shortcutsForTrigger[shortcutText];\n      if (!shortcut || shortcut.type === 'paragraph' && block[0].type !== 'paragraph') {\n        return;\n      }\n      const locationDocumentFeatures = getAncestorComponentChildFieldDocumentFeatures(editor, documentFeatures, componentBlocks);\n      if (locationDocumentFeatures && (locationDocumentFeatures.kind === 'inline' || !shortcut.shouldBeEnabledInComponentBlock(locationDocumentFeatures.documentFeatures))) {\n        return;\n      }\n\n      // so that this starts a new undo group\n      editor.history.undos.push({\n        operations: [],\n        selectionBefore: editor.selection\n      });\n      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.select(editor, range);\n      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.delete(editor);\n      shortcut.insert();\n    }\n  };\n  return editor;\n}\n\nfunction getDirectBlockquoteParentFromSelection(editor) {\n  if (!editor.selection) return {\n    isInside: false\n  };\n  const [, parentPath] = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.parent(editor, editor.selection);\n  if (!parentPath.length) {\n    return {\n      isInside: false\n    };\n  }\n  const [maybeBlockquoteParent, maybeBlockquoteParentPath] = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.parent(editor, parentPath);\n  const isBlockquote = maybeBlockquoteParent.type === 'blockquote';\n  return isBlockquote ? {\n    isInside: true,\n    path: maybeBlockquoteParentPath\n  } : {\n    isInside: false\n  };\n}\nfunction withBlockquote(editor) {\n  const {\n    insertBreak,\n    deleteBackward\n  } = editor;\n  editor.deleteBackward = unit => {\n    if (editor.selection) {\n      const parentBlockquote = getDirectBlockquoteParentFromSelection(editor);\n      if (parentBlockquote.isInside && slate__WEBPACK_IMPORTED_MODULE_104__.Range.isCollapsed(editor.selection) &&\n      // the selection is at the start of the paragraph\n      editor.selection.anchor.offset === 0 &&\n      // it's the first paragraph in the panel\n      editor.selection.anchor.path[editor.selection.anchor.path.length - 2] === 0) {\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n          match: node => node.type === 'blockquote',\n          split: true\n        });\n        return;\n      }\n    }\n    deleteBackward(unit);\n  };\n  editor.insertBreak = () => {\n    const panel = getDirectBlockquoteParentFromSelection(editor);\n    if (editor.selection && panel.isInside) {\n      const [node, nodePath] = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.node(editor, editor.selection);\n      if (slate__WEBPACK_IMPORTED_MODULE_104__.Path.isDescendant(nodePath, panel.path) && slate__WEBPACK_IMPORTED_MODULE_104__.Node.string(node) === '') {\n        slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n          match: node => node.type === 'blockquote',\n          split: true\n        });\n        return;\n      }\n    }\n    insertBreak();\n  };\n  return editor;\n}\n\nfunction withHeading(editor) {\n  const {\n    insertBreak\n  } = editor;\n  editor.insertBreak = () => {\n    insertBreak();\n    const entry = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n      match: n => n.type === 'heading'\n    });\n    if (!entry || !editor.selection || !slate__WEBPACK_IMPORTED_MODULE_104__.Range.isCollapsed(editor.selection)) {\n      return;\n    }\n    const path = entry[1];\n    if (\n    // we want to unwrap the heading when the user inserted a break at the end of the heading\n    // when the user inserts a break at the end of a heading, the new heading\n    // that we want to unwrap will be empty so the end will be equal to the selection\n    slate__WEBPACK_IMPORTED_MODULE_104__.Point.equals(slate__WEBPACK_IMPORTED_MODULE_104__.Editor.end(editor, path), editor.selection.anchor)) {\n      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n        at: path\n      });\n      return;\n    }\n    // we also want to unwrap the _previous_ heading when the user inserted a break\n    // at the start of the heading, essentially just inserting an empty paragraph above the heading\n    if (!slate__WEBPACK_IMPORTED_MODULE_104__.Path.hasPrevious(path)) {\n      return;\n    }\n    const previousPath = slate__WEBPACK_IMPORTED_MODULE_104__.Path.previous(path);\n    const previousNode = slate__WEBPACK_IMPORTED_MODULE_104__.Node.get(editor, previousPath);\n    if (previousNode.type === 'heading' && previousNode.children.length === 1 && slate__WEBPACK_IMPORTED_MODULE_104__.Text.isText(previousNode.children[0]) && previousNode.children[0].text === '') {\n      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.unwrapNodes(editor, {\n        at: previousPath\n      });\n    }\n  };\n  return editor;\n}\n\nconst allMarkdownShortcuts = {\n  bold: ['**', '__'],\n  italic: ['*', '_'],\n  strikethrough: ['~~'],\n  code: ['`']\n};\nfunction applyMark(editor, mark, shortcutText, startOfStartPoint) {\n  // so that this starts a new undo group\n  editor.history.undos.push({\n    operations: [],\n    selectionBefore: editor.selection\n  });\n  const startPointRef = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.pointRef(editor, startOfStartPoint);\n  slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.delete(editor, {\n    at: editor.selection.anchor,\n    distance: shortcutText.length,\n    reverse: true\n  });\n  slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.delete(editor, {\n    at: startOfStartPoint,\n    distance: shortcutText.length\n  });\n  slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.setNodes(editor, {\n    [mark]: true\n  }, {\n    match: slate__WEBPACK_IMPORTED_MODULE_104__.Text.isText,\n    split: true,\n    at: {\n      anchor: startPointRef.unref(),\n      focus: editor.selection.anchor\n    }\n  });\n  // once you've ended the shortcut, you're done with the mark\n  // so we need to remove it so the text you insert after doesn't have it\n  editor.removeMark(mark);\n}\nfunction withMarks(editorDocumentFeatures, componentBlocks, editor) {\n  const {\n    insertText,\n    insertBreak\n  } = editor;\n  editor.insertBreak = () => {\n    insertBreak();\n    const marksAfterInsertBreak = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.marks(editor);\n    if (!marksAfterInsertBreak || !editor.selection) return;\n    const parentBlock = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n      match: isBlock\n    });\n    if (!parentBlock) return;\n    const point = EditorAfterButIgnoringingPointsWithNoContent(editor, editor.selection.anchor);\n    const marksAfterInsertBreakArr = Object.keys(marksAfterInsertBreak);\n    if (!point || !slate__WEBPACK_IMPORTED_MODULE_104__.Path.isDescendant(point.path, parentBlock[1])) {\n      for (const mark of marksAfterInsertBreakArr) {\n        editor.removeMark(mark);\n      }\n      return;\n    }\n    const textNode = slate__WEBPACK_IMPORTED_MODULE_104__.Node.get(editor, point.path);\n    for (const mark of marksAfterInsertBreakArr) {\n      if (!textNode[mark]) {\n        editor.removeMark(mark);\n      }\n    }\n  };\n  const selectedMarkdownShortcuts = {};\n  const enabledMarks = editorDocumentFeatures.formatting.inlineMarks;\n  Object.keys(allMarkdownShortcuts).forEach(mark => {\n    if (enabledMarks[mark]) {\n      selectedMarkdownShortcuts[mark] = allMarkdownShortcuts[mark];\n    }\n  });\n  if (Object.keys(selectedMarkdownShortcuts).length === 0) return editor;\n  editor.insertText = text => {\n    insertText(text);\n    if (editor.selection && slate__WEBPACK_IMPORTED_MODULE_104__.Range.isCollapsed(editor.selection)) {\n      for (const [mark, shortcuts] of Object.entries(selectedMarkdownShortcuts)) {\n        for (const shortcutText of shortcuts) {\n          if (text === shortcutText[shortcutText.length - 1]) {\n            // this function is not inlined because\n            // https://github.com/swc-project/swc/issues/2622\n            const startOfBlock = getStartOfBlock(editor);\n            let startOfBlockToEndOfShortcutString = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.string(editor, {\n              anchor: editor.selection.anchor,\n              focus: startOfBlock\n            });\n            const hasWhitespaceBeforeEndOfShortcut = /\\s/.test(startOfBlockToEndOfShortcutString.slice(-shortcutText.length - 1, -shortcutText.length));\n            const endOfShortcutContainsExpectedContent = shortcutText === startOfBlockToEndOfShortcutString.slice(-shortcutText.length);\n            if (hasWhitespaceBeforeEndOfShortcut || !endOfShortcutContainsExpectedContent) {\n              continue;\n            }\n            const strToMatchOn = startOfBlockToEndOfShortcutString.slice(0, -shortcutText.length - 1);\n            // TODO: use regex probs\n            for (const [offsetFromStartOfBlock] of [...strToMatchOn].reverse().entries()) {\n              const expectedShortcutText = strToMatchOn.slice(offsetFromStartOfBlock, offsetFromStartOfBlock + shortcutText.length);\n              if (expectedShortcutText !== shortcutText) {\n                continue;\n              }\n              const startOfStartOfShortcut = offsetFromStartOfBlock === 0 ? startOfBlock : EditorAfterButIgnoringingPointsWithNoContent(editor, startOfBlock, {\n                distance: offsetFromStartOfBlock\n              });\n              const endOfStartOfShortcut = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.after(editor, startOfStartOfShortcut, {\n                distance: shortcutText.length\n              });\n              if (offsetFromStartOfBlock !== 0 && !/\\s/.test(slate__WEBPACK_IMPORTED_MODULE_104__.Editor.string(editor, {\n                anchor: slate__WEBPACK_IMPORTED_MODULE_104__.Editor.before(editor, startOfStartOfShortcut, {\n                  unit: 'character'\n                }),\n                focus: startOfStartOfShortcut\n              }))) {\n                continue;\n              }\n              const contentBetweenShortcuts = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.string(editor, {\n                anchor: endOfStartOfShortcut,\n                focus: editor.selection.anchor\n              }).slice(0, -shortcutText.length);\n              if (contentBetweenShortcuts === '' || /\\s/.test(contentBetweenShortcuts[0])) {\n                continue;\n              }\n\n              // this is a bit of a weird one\n              // let's say you had <text>__thing _<cursor /></text> and you insert `_`.\n              // without the below, that would turn into <text italic>_thing _<cursor /></text>\n              // but it's probably meant to be bold but it's not because of the space before the ending _\n              // there's probably a better way to do this but meh, this works\n              if (mark === 'italic' && (contentBetweenShortcuts[0] === '_' || contentBetweenShortcuts[0] === '*')) {\n                continue;\n              }\n              // this is the start of a code block shortcut\n              if (mark === 'code' && contentBetweenShortcuts === '`') {\n                continue;\n              }\n              const ancestorComponentChildFieldDocumentFeatures = getAncestorComponentChildFieldDocumentFeatures(editor, editorDocumentFeatures, componentBlocks);\n              if (ancestorComponentChildFieldDocumentFeatures && ancestorComponentChildFieldDocumentFeatures.inlineMarks !== 'inherit' && ancestorComponentChildFieldDocumentFeatures.inlineMarks[mark] === false) {\n                continue;\n              }\n              applyMark(editor, mark, shortcutText, startOfStartOfShortcut);\n              return;\n            }\n          }\n        }\n      }\n    }\n  };\n  return editor;\n}\nfunction getStartOfBlock(editor) {\n  return slate__WEBPACK_IMPORTED_MODULE_104__.Editor.start(editor, slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n    match: isBlock\n  })[1]);\n}\n\n// very loosely based on https://github.com/ianstormtaylor/slate/blob/d22c76ae1313fe82111317417912a2670e73f5c9/site/examples/paste-html.tsx\nfunction getAlignmentFromElement(element) {\n  const parent = element.parentElement;\n  // confluence\n  const attribute = parent === null || parent === void 0 ? void 0 : parent.getAttribute('data-align');\n  // note: we don't show html that confluence would parse as alignment\n  // we could change that but meh\n  // (they match on div.fabric-editor-block-mark with data-align)\n  if (attribute === 'center' || attribute === 'end') {\n    return attribute;\n  }\n  if (element instanceof HTMLElement) {\n    // Google docs\n    const textAlign = element.style.textAlign;\n    if (textAlign === 'center') {\n      return 'center';\n    }\n    // TODO: RTL things?\n    if (textAlign === 'right' || textAlign === 'end') {\n      return 'end';\n    }\n  }\n}\nconst headings = {\n  H1: 1,\n  H2: 2,\n  H3: 3,\n  H4: 4,\n  H5: 5,\n  H6: 6\n};\nconst TEXT_TAGS = {\n  CODE: 'code',\n  DEL: 'strikethrough',\n  S: 'strikethrough',\n  STRIKE: 'strikethrough',\n  EM: 'italic',\n  I: 'italic',\n  STRONG: 'bold',\n  U: 'underline',\n  SUP: 'superscript',\n  SUB: 'subscript',\n  KBD: 'keyboard'\n};\nfunction marksFromElementAttributes(element) {\n  const marks = new Set();\n  const style = element.style;\n  const {\n    nodeName\n  } = element;\n  const markFromNodeName = TEXT_TAGS[nodeName];\n  if (markFromNodeName) {\n    marks.add(markFromNodeName);\n  }\n  const {\n    fontWeight,\n    textDecoration,\n    verticalAlign\n  } = style;\n  if (textDecoration === 'underline') {\n    marks.add('underline');\n  } else if (textDecoration === 'line-through') {\n    marks.add('strikethrough');\n  }\n  // confluence\n  if (nodeName === 'SPAN' && element.classList.contains('code')) {\n    marks.add('code');\n  }\n  // Google Docs does weird things with <b>\n  if (nodeName === 'B' && fontWeight !== 'normal') {\n    marks.add('bold');\n  } else if (typeof fontWeight === 'string' && (fontWeight === 'bold' || fontWeight === 'bolder' || fontWeight === '1000' || /^[5-9]\\d{2}$/.test(fontWeight))) {\n    marks.add('bold');\n  }\n  if (style.fontStyle === 'italic') {\n    marks.add('italic');\n  }\n  // Google Docs uses vertical align for subscript and superscript instead of <sup> and <sub>\n  if (verticalAlign === 'super') {\n    marks.add('superscript');\n  } else if (verticalAlign === 'sub') {\n    marks.add('subscript');\n  }\n  return marks;\n}\nfunction deserializeHTML(html) {\n  const parsed = new DOMParser().parseFromString(html, 'text/html');\n  return fixNodesForBlockChildren(deserializeNodes(parsed.body.childNodes));\n}\nfunction deserializeHTMLNode(el) {\n  if (!(el instanceof globalThis.HTMLElement)) {\n    const text = el.textContent;\n    if (!text) {\n      return [];\n    }\n    return getInlineNodes(text);\n  }\n  if (el.nodeName === 'BR') {\n    return getInlineNodes('\\n');\n  }\n  if (el.nodeName === 'IMG') {\n    const alt = el.getAttribute('alt');\n    return getInlineNodes(alt !== null && alt !== void 0 ? alt : '');\n  }\n  if (el.nodeName === 'HR') {\n    return [{\n      type: 'divider',\n      children: [{\n        text: ''\n      }]\n    }];\n  }\n  const marks = marksFromElementAttributes(el);\n\n  // Dropbox Paper displays blockquotes as lists for some reason\n  if (el.classList.contains('listtype-quote')) {\n    marks.delete('italic');\n    return addMarksToChildren(marks, () => [{\n      type: 'blockquote',\n      children: fixNodesForBlockChildren(deserializeNodes(el.childNodes))\n    }]);\n  }\n  return addMarksToChildren(marks, () => {\n    const {\n      nodeName\n    } = el;\n    if (nodeName === 'A') {\n      const href = el.getAttribute('href');\n      if (href) {\n        return setLinkForChildren(href, () => forceDisableMarkForChildren('underline', () => deserializeNodes(el.childNodes)));\n      }\n    }\n    if (nodeName === 'PRE' && el.textContent) {\n      return [{\n        type: 'code',\n        children: [{\n          text: el.textContent || ''\n        }]\n      }];\n    }\n    const deserialized = deserializeNodes(el.childNodes);\n    const children = fixNodesForBlockChildren(deserialized);\n    if (nodeName === 'LI') {\n      let nestedList;\n      const listItemContent = {\n        type: 'list-item-content',\n        children: children.filter(node => {\n          if (nestedList === undefined && (node.type === 'ordered-list' || node.type === 'unordered-list')) {\n            nestedList = node;\n            return false;\n          }\n          return true;\n        })\n      };\n      const listItemChildren = nestedList ? [listItemContent, nestedList] : [listItemContent];\n      return [{\n        type: 'list-item',\n        children: listItemChildren\n      }];\n    }\n    if (nodeName === 'P') {\n      return [{\n        type: 'paragraph',\n        textAlign: getAlignmentFromElement(el),\n        children\n      }];\n    }\n    const headingLevel = headings[nodeName];\n    if (typeof headingLevel === 'number') {\n      return [{\n        type: 'heading',\n        level: headingLevel,\n        textAlign: getAlignmentFromElement(el),\n        children\n      }];\n    }\n    if (nodeName === 'BLOCKQUOTE') {\n      return [{\n        type: 'blockquote',\n        children\n      }];\n    }\n    if (nodeName === 'OL') {\n      return [{\n        type: 'ordered-list',\n        children\n      }];\n    }\n    if (nodeName === 'UL') {\n      return [{\n        type: 'unordered-list',\n        children\n      }];\n    }\n    if (nodeName === 'DIV' && !isBlock(children[0])) {\n      return [{\n        type: 'paragraph',\n        children\n      }];\n    }\n    return deserialized;\n  });\n}\nfunction deserializeNodes(nodes) {\n  const outputNodes = [];\n  for (const node of nodes) {\n    outputNodes.push(...deserializeHTMLNode(node));\n  }\n  return outputNodes;\n}\nfunction fixNodesForBlockChildren(deserializedNodes) {\n  if (!deserializedNodes.length) {\n    // Slate also gets unhappy if an element has no children\n    // the empty text nodes will get normalized away if they're not needed\n    return [{\n      text: ''\n    }];\n  }\n  if (deserializedNodes.some(isBlock)) {\n    const result = [];\n    let queuedInlines = [];\n    const flushInlines = () => {\n      if (queuedInlines.length) {\n        result.push({\n          type: 'paragraph',\n          children: queuedInlines\n        });\n        queuedInlines = [];\n      }\n    };\n    for (const node of deserializedNodes) {\n      if (isBlock(node)) {\n        flushInlines();\n        result.push(node);\n        continue;\n      }\n      // we want to ignore whitespace between block level elements\n      // useful info about whitespace in html:\n      // https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Whitespace\n      if (slate__WEBPACK_IMPORTED_MODULE_104__.Node.string(node).trim() !== '') {\n        queuedInlines.push(node);\n      }\n    }\n    flushInlines();\n    return result;\n  }\n  return deserializedNodes;\n}\n\nconst markdownConfig = {\n  mdastExtensions: [mdast_util_gfm_autolink_literal_from_markdown__WEBPACK_IMPORTED_MODULE_73__, mdast_util_gfm_strikethrough_from_markdown__WEBPACK_IMPORTED_MODULE_75__],\n  extensions: [micromark_extension_gfm_autolink_literal__WEBPACK_IMPORTED_MODULE_74__, micromark_extension_gfm_strikethrough__WEBPACK_IMPORTED_MODULE_76___default()()]\n};\nfunction deserializeMarkdown(markdown) {\n  const root = mdast_util_from_markdown__WEBPACK_IMPORTED_MODULE_72___default()(markdown, markdownConfig);\n  let nodes = root.children;\n  if (nodes.length === 1 && nodes[0].type === 'paragraph') {\n    nodes = nodes[0].children;\n  }\n  return deserializeChildren(nodes, markdown);\n}\nfunction deserializeChildren(nodes, input) {\n  const outputNodes = [];\n  for (const node of nodes) {\n    const result = deserializeMarkdownNode(node, input);\n    if (result.length) {\n      outputNodes.push(...result);\n    }\n  }\n  if (!outputNodes.length) {\n    outputNodes.push({\n      text: ''\n    });\n  }\n  return outputNodes;\n}\nfunction deserializeMarkdownNode(node, input) {\n  switch (node.type) {\n    case 'blockquote':\n      {\n        return [{\n          type: 'blockquote',\n          children: deserializeChildren(node.children, input)\n        }];\n      }\n    case 'link':\n      {\n        // arguably this could just return a link node rather than use setLinkForChildren since the children _should_ only be inlines\n        // but rather than relying on the markdown parser we use being correct in this way since it isn't nicely codified in types\n        // let's be safe since we already have the code to do it the safer way because of html pasting\n        return setLinkForChildren(node.url, () => deserializeChildren(node.children, input));\n      }\n    case 'code':\n      {\n        return [{\n          type: 'code',\n          children: [{\n            text: node.value\n          }]\n        }];\n      }\n    case 'paragraph':\n      {\n        return [{\n          type: 'paragraph',\n          children: deserializeChildren(node.children, input)\n        }];\n      }\n    case 'heading':\n      {\n        return [{\n          type: 'heading',\n          level: node.depth,\n          children: deserializeChildren(node.children, input)\n        }];\n      }\n    case 'list':\n      {\n        return [{\n          type: node.ordered ? 'ordered-list' : 'unordered-list',\n          children: deserializeChildren(node.children, input)\n        }];\n      }\n    case 'listItem':\n      {\n        return [{\n          type: 'list-item',\n          children: deserializeChildren(node.children, input)\n        }];\n      }\n    case 'thematicBreak':\n      {\n        return [{\n          type: 'divider',\n          children: [{\n            text: ''\n          }]\n        }];\n      }\n    case 'break':\n      {\n        return getInlineNodes('\\n');\n      }\n    case 'delete':\n      {\n        return addMarkToChildren('strikethrough', () => deserializeChildren(node.children, input));\n      }\n    case 'strong':\n      {\n        return addMarkToChildren('bold', () => deserializeChildren(node.children, input));\n      }\n    case 'emphasis':\n      {\n        return addMarkToChildren('italic', () => deserializeChildren(node.children, input));\n      }\n    case 'inlineCode':\n      {\n        return addMarkToChildren('code', () => getInlineNodes(node.value));\n      }\n    case 'text':\n      {\n        return getInlineNodes(node.value);\n      }\n  }\n  return getInlineNodes(input.slice(node.position.start.offset, node.position.end.offset));\n}\n\nconst urlPattern = /https?:\\/\\//;\nfunction insertFragmentButDifferent(editor, nodes) {\n  if (isBlock(nodes[0])) {\n    insertNodesButReplaceIfSelectionIsAtEmptyParagraphOrHeading(editor, nodes);\n  } else {\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.insertFragment(editor, nodes);\n  }\n}\nconst clipboardFormatKey = 'x-keystatic-fragment';\nconst getDefaultView = value => {\n  return value && value.ownerDocument && value.ownerDocument.defaultView || null;\n};\nconst isDOMNode = value => {\n  const window = getDefaultView(value);\n  return !!window && value instanceof window.Node;\n};\nconst isDOMText = value => {\n  return isDOMNode(value) && value.nodeType === 3;\n};\nconst isDOMElement = value => {\n  return isDOMNode(value) && value.nodeType === 1;\n};\nconst getPlainText = domNode => {\n  let text = '';\n  if (isDOMText(domNode) && domNode.nodeValue) {\n    return domNode.nodeValue;\n  }\n  if (isDOMElement(domNode)) {\n    for (const childNode of Array.from(domNode.childNodes)) {\n      text += getPlainText(childNode);\n    }\n    const display = getComputedStyle(domNode).getPropertyValue('display');\n    if (display === 'block' || display === 'list' || domNode.tagName === 'BR') {\n      text += '\\n';\n    }\n  }\n  return text;\n};\nfunction setFragmentData(e, data) {\n  const {\n    selection\n  } = e;\n  if (!selection) {\n    return;\n  }\n  const [start, end] = slate__WEBPACK_IMPORTED_MODULE_104__.Range.edges(selection);\n  const startVoid = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.void(e, {\n    at: start.path\n  });\n  const endVoid = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.void(e, {\n    at: end.path\n  });\n  if (slate__WEBPACK_IMPORTED_MODULE_104__.Range.isCollapsed(selection) && !startVoid) {\n    return;\n  }\n\n  // Create a fake selection so that we can add a Base64-encoded copy of the\n  // fragment to the HTML, to decode on future pastes.\n  const domRange = slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.toDOMRange(e, selection);\n  let contents = domRange.cloneContents();\n  let attach = contents.childNodes[0];\n\n  // Make sure attach is non-empty, since empty nodes will not get copied.\n  contents.childNodes.forEach(node => {\n    if (node.textContent && node.textContent.trim() !== '') {\n      attach = node;\n    }\n  });\n\n  // COMPAT: If the end node is a void node, we need to move the end of the\n  // range from the void node's spacer span, to the end of the void node's\n  // content, since the spacer is before void's content in the DOM.\n  if (endVoid) {\n    const [voidNode] = endVoid;\n    const r = domRange.cloneRange();\n    const domNode = slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.toDOMNode(e, voidNode);\n    r.setEndAfter(domNode);\n    contents = r.cloneContents();\n  }\n\n  // COMPAT: If the start node is a void node, we need to attach the encoded\n  // fragment to the void node's content node instead of the spacer, because\n  // attaching it to empty `<div>/<span>` nodes will end up having it erased by\n  // most browsers. (2018/04/27)\n  if (startVoid) {\n    attach = contents.querySelector('[data-slate-spacer]');\n  }\n\n  // Remove any zero-width space spans from the cloned DOM so that they don't\n  // show up elsewhere when pasted.\n  Array.from(contents.querySelectorAll('[data-slate-zero-width]')).forEach(zw => {\n    const isNewline = zw.getAttribute('data-slate-zero-width') === 'n';\n    zw.textContent = isNewline ? '\\n' : '';\n  });\n\n  // Set a `data-slate-fragment` attribute on a non-empty node, so it shows up\n  // in the HTML, and can be used for intra-Slate pasting. If it's a text\n  // node, wrap it in a `<span>` so we have something to set an attribute on.\n  if (isDOMText(attach)) {\n    const span = attach.ownerDocument.createElement('span');\n    // COMPAT: In Chrome and Safari, if we don't add the `white-space` style\n    // then leading and trailing spaces will be ignored. (2017/09/21)\n    span.style.whiteSpace = 'pre';\n    span.appendChild(attach);\n    contents.appendChild(span);\n    attach = span;\n  }\n  const fragment = e.getFragment();\n  const string = JSON.stringify(fragment, (key, val) => {\n    if (val instanceof Uint8Array) {\n      return {\n        [bytesName]: (0,js_base64__WEBPACK_IMPORTED_MODULE_97__.fromUint8Array)(val)\n      };\n    }\n    return val;\n  });\n  const encoded = window.btoa(encodeURIComponent(string));\n  attach.setAttribute('data-keystatic-fragment', encoded);\n  data.setData(`application/${clipboardFormatKey}`, encoded);\n\n  // Add the content to a <div> so that we can get its inner HTML.\n  const div = contents.ownerDocument.createElement('div');\n  div.appendChild(contents);\n  div.setAttribute('hidden', 'true');\n  contents.ownerDocument.body.appendChild(div);\n  data.setData('text/html', div.innerHTML);\n  data.setData('text/plain', getPlainText(div));\n  contents.ownerDocument.body.removeChild(div);\n}\nconst catchSlateFragment = /data-keystatic-fragment=\"(.+?)\"/m;\nconst getSlateFragmentAttribute = dataTransfer => {\n  const htmlData = dataTransfer.getData('text/html');\n  const [, fragment] = htmlData.match(catchSlateFragment) || [];\n  return fragment;\n};\nconst bytesName = '$$keystaticUint8Array$$';\nfunction withPasting(editor) {\n  const {\n    insertTextData\n  } = editor;\n  editor.setFragmentData = data => {\n    setFragmentData(editor, data);\n  };\n  editor.insertFragmentData = data => {\n    /**\n     * Checking copied fragment from application/x-slate-fragment or data-slate-fragment\n     */\n    const fragment = data.getData(`application/${clipboardFormatKey}`) || getSlateFragmentAttribute(data);\n    if (fragment) {\n      const decoded = decodeURIComponent(window.atob(fragment));\n      const parsed = JSON.parse(decoded, (key, val) => typeof val === 'object' && val !== null && bytesName in val && typeof val[bytesName] === 'string' ? (0,js_base64__WEBPACK_IMPORTED_MODULE_97__.toUint8Array)(val[bytesName]) : val);\n      editor.insertFragment(parsed);\n      return true;\n    }\n    return false;\n  };\n  editor.insertTextData = data => {\n    const blockAbove = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n      match: isBlock\n    });\n    if ((blockAbove === null || blockAbove === void 0 ? void 0 : blockAbove[0].type) === 'code') {\n      const plain = data.getData('text/plain');\n      editor.insertText(plain);\n      return true;\n    }\n    let vsCodeEditorData = data.getData('vscode-editor-data');\n    if (vsCodeEditorData) {\n      try {\n        const vsCodeData = JSON.parse(vsCodeEditorData);\n        if ((vsCodeData === null || vsCodeData === void 0 ? void 0 : vsCodeData.mode) === 'markdown' || (vsCodeData === null || vsCodeData === void 0 ? void 0 : vsCodeData.mode) === 'mdx') {\n          const plain = data.getData('text/plain');\n          if (plain) {\n            const fragment = deserializeMarkdown(plain);\n            insertFragmentButDifferent(editor, fragment);\n            return true;\n          }\n        }\n      } catch (err) {\n        console.log(err);\n      }\n    }\n    const plain = data.getData('text/plain');\n    if (\n    // isValidURL is a bit more permissive than a user might expect\n    // so for pasting, we'll constrain it to starting with https:// or http://\n    urlPattern.test(plain) && isValidURL(plain) && editor.selection && !slate__WEBPACK_IMPORTED_MODULE_104__.Range.isCollapsed(editor.selection) &&\n    // we only want to turn the selected text into a link if the selection is within the same block\n    slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n      match: node => isBlock(node) && !isBlock(node.children[0])\n    }) &&\n    // and there is only text(potentially with marks) in the selection\n    // no other links\n    slate__WEBPACK_IMPORTED_MODULE_104__.Editor.nodes(editor, {\n      match: node => node.type === 'link'\n    }).next().done) {\n      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.wrapNodes(editor, {\n        type: 'link',\n        href: plain,\n        children: []\n      }, {\n        split: true\n      });\n      return true;\n    }\n    const html = data.getData('text/html');\n    if (html) {\n      const fragment = deserializeHTML(html);\n      insertFragmentButDifferent(editor, fragment);\n      return true;\n    }\n    if (plain) {\n      const fragment = deserializeMarkdown(plain);\n      insertFragmentButDifferent(editor, fragment);\n      return true;\n    }\n    return insertTextData(data);\n  };\n  return editor;\n}\n\nconst shortcuts = {\n  '...': '…',\n  '-->': '→',\n  '->': '→',\n  '<-': '←',\n  '<--': '←',\n  '--': '–'\n};\nfunction withShortcuts(editor) {\n  const {\n    insertText\n  } = editor;\n  editor.insertText = text => {\n    insertText(text);\n    if (text === ' ' && editor.selection && slate__WEBPACK_IMPORTED_MODULE_104__.Range.isCollapsed(editor.selection)) {\n      const selectionPoint = editor.selection.anchor;\n      const ancestorBlock = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n        match: isBlock\n      });\n      if (ancestorBlock) {\n        Object.keys(shortcuts).forEach(shortcut => {\n          const pointBefore = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.before(editor, selectionPoint, {\n            unit: 'character',\n            distance: shortcut.length + 1\n          });\n          if (pointBefore && slate__WEBPACK_IMPORTED_MODULE_104__.Path.isDescendant(pointBefore.path, ancestorBlock[1])) {\n            const range = {\n              anchor: selectionPoint,\n              focus: pointBefore\n            };\n            const str = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.string(editor, range);\n            if (str.slice(0, shortcut.length) === shortcut) {\n              editor.history.undos.push({\n                operations: [],\n                selectionBefore: editor.selection\n              });\n              slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.select(editor, range);\n              editor.insertText(shortcuts[shortcut] + ' ');\n            }\n          }\n        });\n      }\n    }\n  };\n  return editor;\n}\n\nfunction withSoftBreaks(editor) {\n  // TODO: should soft breaks only work in particular places\n  editor.insertSoftBreak = () => {\n    slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.insertText(editor, '\\n');\n  };\n  return editor;\n}\n\nconst HOTKEYS = {\n  'mod+b': 'bold',\n  'mod+i': 'italic',\n  'mod+u': 'underline'\n};\nfunction isMarkActive(editor, mark) {\n  const marks = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.marks(editor);\n  if (marks !== null && marks !== void 0 && marks[mark]) {\n    return true;\n  }\n  // see the stuff about marks in toolbar-state for why this is here\n  for (const entry of slate__WEBPACK_IMPORTED_MODULE_104__.Editor.nodes(editor, {\n    match: slate__WEBPACK_IMPORTED_MODULE_104__.Text.isText\n  })) {\n    if (entry[0][mark]) {\n      return true;\n    }\n  }\n  return false;\n}\nconst arrowKeyToDirection = new Map([['ArrowUp', 'up'], ['ArrowDown', 'down'], ['ArrowLeft', 'left'], ['ArrowRight', 'right']]);\nconst getKeyDownHandler = (editor, documentFeatures) => event => {\n  if (event.defaultPrevented) return;\n  for (const hotkey in HOTKEYS) {\n    if (documentFeatures.formatting.inlineMarks[HOTKEYS[hotkey]] && (0,is_hotkey__WEBPACK_IMPORTED_MODULE_19__[\"default\"])(hotkey, event.nativeEvent)) {\n      event.preventDefault();\n      const mark = HOTKEYS[hotkey];\n      const isActive = isMarkActive(editor, mark);\n      if (isActive) {\n        slate__WEBPACK_IMPORTED_MODULE_104__.Editor.removeMark(editor, mark);\n      } else {\n        slate__WEBPACK_IMPORTED_MODULE_104__.Editor.addMark(editor, mark, true);\n      }\n      return;\n    }\n  }\n  if ((0,is_hotkey__WEBPACK_IMPORTED_MODULE_19__[\"default\"])('mod+\\\\', event.nativeEvent)) {\n    clearFormatting(editor);\n    return;\n  }\n  if (documentFeatures.links && (0,is_hotkey__WEBPACK_IMPORTED_MODULE_19__[\"default\"])('mod+k', event.nativeEvent)) {\n    event.preventDefault();\n    wrapLink(editor, '');\n    return;\n  }\n  if (event.key === 'Tab') {\n    const didAction = event.shiftKey ? unnestList(editor) : nestList(editor);\n    if (didAction) {\n      event.preventDefault();\n      return;\n    }\n  }\n  if (event.key === 'Tab' && editor.selection) {\n    const layoutArea = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n      match: node => node.type === 'layout-area' || node.type === 'table-cell'\n    });\n    if (layoutArea) {\n      const layoutAreaToEnter = event.shiftKey ? slate__WEBPACK_IMPORTED_MODULE_104__.Editor.before(editor, layoutArea[1], {\n        unit: 'block'\n      }) : slate__WEBPACK_IMPORTED_MODULE_104__.Editor.after(editor, layoutArea[1], {\n        unit: 'block'\n      });\n      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.setSelection(editor, {\n        anchor: layoutAreaToEnter,\n        focus: layoutAreaToEnter\n      });\n      event.preventDefault();\n    }\n  }\n  if ((0,is_hotkey__WEBPACK_IMPORTED_MODULE_19__[\"default\"])('mod+a', event)) {\n    const parentTable = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n      match: nodeTypeMatcher('table')\n    });\n    if (parentTable) {\n      slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.select(editor, parentTable[1]);\n      event.preventDefault();\n      return;\n    }\n  }\n  const direction = arrowKeyToDirection.get(event.key);\n  const {\n    selection\n  } = editor;\n  if (direction && selection) {\n    const selectedTableArea = getSelectedTableArea(editor);\n    if (selectedTableArea) {\n      var _Editor$above, _Editor$above2;\n      const focusCellPath = (_Editor$above = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n        match: nodeTypeMatcher('table-cell'),\n        at: selection.focus.path\n      })) === null || _Editor$above === void 0 ? void 0 : _Editor$above[1];\n      const anchorCellPath = (_Editor$above2 = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n        match: nodeTypeMatcher('table-cell'),\n        at: selection.anchor.path\n      })) === null || _Editor$above2 === void 0 ? void 0 : _Editor$above2[1];\n      if (!focusCellPath || !anchorCellPath) return;\n      const newCellPath = getCellPathInDirection(editor, focusCellPath, direction);\n      if (newCellPath) {\n        if (selectedTableArea.singleCell === 'not-selected') {\n          if (direction !== 'up' && direction !== 'down') return;\n          const [node, offset] = slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.toDOMPoint(editor, selection.focus);\n          const blockElement = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.above(editor, {\n            match: isBlock,\n            at: selection.focus.path\n          });\n          if (!blockElement) return;\n          if (direction === 'up' && blockElement[1].slice(focusCellPath.length).some(idx => idx !== 0)) {\n            return;\n          }\n          if (direction === 'down') {\n            const [parentNode] = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.parent(editor, blockElement[1]);\n            if (parentNode.children.length - 1 !== blockElement[1][blockElement[1].length - 1]) {\n              return;\n            }\n            for (const [node, path] of slate__WEBPACK_IMPORTED_MODULE_104__.Node.ancestors(editor, blockElement[1], {\n              reverse: true\n            })) {\n              if (node.type === 'table-cell') break;\n              const [parentNode] = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.parent(editor, path);\n              if (parentNode.children.length - 1 === path[path.length - 1]) {\n                continue;\n              }\n              return;\n            }\n          }\n          const domNodeForBlockElement = slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.toDOMNode(editor, blockElement[0]);\n          const rangeOfWholeBlock = document.createRange();\n          rangeOfWholeBlock.selectNodeContents(domNodeForBlockElement);\n          const rectsOfRangeOfWholeBlock = Array.from(rangeOfWholeBlock.getClientRects());\n          const newRange = document.createRange();\n          newRange.setStart(node, offset);\n          newRange.setEnd(node, offset);\n          const rangeRects = Array.from(newRange.getClientRects());\n          const lastRangeRect = rangeRects[rangeRects.length - 1];\n          const key = direction === 'up' ? 'top' : 'bottom';\n          const expected = key === 'top' ? Math.min(...rectsOfRangeOfWholeBlock.map(x => x.top)) : Math.max(...rectsOfRangeOfWholeBlock.map(x => x.bottom));\n          if (lastRangeRect[key] === expected) {\n            const focus = slate__WEBPACK_IMPORTED_MODULE_104__.Editor[direction === 'up' ? 'end' : 'start'](editor, newCellPath);\n            slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.select(editor, {\n              focus,\n              anchor: event.shiftKey ? selection.anchor : focus\n            });\n            event.preventDefault();\n          }\n          return;\n        }\n        if (!event.shiftKey) return;\n        if (slate__WEBPACK_IMPORTED_MODULE_104__.Path.equals(newCellPath, anchorCellPath)) {\n          slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.select(editor, newCellPath);\n        } else {\n          slate__WEBPACK_IMPORTED_MODULE_104__.Transforms.select(editor, {\n            anchor: selection.anchor,\n            focus: slate__WEBPACK_IMPORTED_MODULE_104__.Editor.start(editor, newCellPath)\n          });\n        }\n        event.preventDefault();\n      }\n    }\n  }\n};\nfunction createDocumentEditor(documentFeatures, componentBlocks) {\n  return withPasting(withImages(withSoftBreaks(withInsertMenu(withShortcuts(withHeading(withBlockquote(withMarks(documentFeatures, componentBlocks, withBlockMarkdownShortcuts(documentFeatures, componentBlocks, _createDocumentEditor((0,slate_history__WEBPACK_IMPORTED_MODULE_111__.withHistory)((0,slate_react__WEBPACK_IMPORTED_MODULE_103__.withReact)((0,slate__WEBPACK_IMPORTED_MODULE_104__.createEditor)())), documentFeatures, componentBlocks))))))))));\n}\nfunction DocumentEditor({\n  onChange,\n  value,\n  componentBlocks,\n  documentFeatures,\n  ...props\n}) {\n  let entryLayoutPane = useEntryLayoutSplitPaneContext();\n  const editor = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => createDocumentEditor(documentFeatures, componentBlocks), [documentFeatures, componentBlocks]);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"div\", {\n    \"data-layout\": entryLayoutPane,\n    className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.classNames)((0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n      backgroundColor: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.background.canvas,\n      minWidth: 0,\n      '&[data-layout=\"main\"]': {\n        flex: 1,\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      '&:not([data-layout=\"main\"])': {\n        border: `${_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.border.regular} solid ${_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.border.neutral}`,\n        borderRadius: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.radius.medium\n      }\n    }), 'keystar-document-editor'),\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(DocumentEditorProvider, {\n      componentBlocks: componentBlocks,\n      documentFeatures: documentFeatures,\n      editor: editor,\n      value: value,\n      onChange: value => {\n        onChange === null || onChange === void 0 || onChange(value);\n        // this fixes a strange issue in Safari where the selection stays inside of the editor\n        // after a blur event happens but the selection is still in the editor\n        // so the cursor is visually in the wrong place and it inserts text backwards\n        const selection = window.getSelection();\n        if (selection && !slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.isFocused(editor)) {\n          const editorNode = slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.toDOMNode(editor, editor);\n          if (selection.anchorNode === editorNode) {\n            slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.focus(editor);\n          }\n        }\n      },\n      children: [(0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => onChange !== undefined && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(Toolbar, {\n        documentFeatures: documentFeatures\n      }), [documentFeatures, onChange]), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(DocumentEditorEditable, {\n        ...props,\n        readOnly: onChange === undefined\n      }),\n      // for debugging\n      false ]\n    })\n  });\n}\nconst IsInEditorContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)(false);\nfunction useIsInDocumentEditor() {\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(IsInEditorContext);\n}\nfunction DocumentEditorProvider({\n  children,\n  editor,\n  onChange,\n  value,\n  componentBlocks,\n  documentFeatures\n}) {\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const identity = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => Math.random().toString(36), [editor]);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(IsInEditorContext.Provider, {\n    value: true,\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(slate_react__WEBPACK_IMPORTED_MODULE_103__.Slate\n    // this fixes issues with Slate crashing when a fast refresh occcurs\n    , {\n      editor: editor,\n      value: value,\n      onChange: value => {\n        onChange(value);\n        // this fixes a strange issue in Safari where the selection stays inside of the editor\n        // after a blur event happens but the selection is still in the editor\n        // so the cursor is visually in the wrong place and it inserts text backwards\n        const selection = window.getSelection();\n        if (selection && !slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.isFocused(editor)) {\n          const editorNode = slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.toDOMNode(editor, editor);\n          if (selection.anchorNode === editorNode) {\n            slate_react__WEBPACK_IMPORTED_MODULE_103__.ReactEditor.focus(editor);\n          }\n        }\n      },\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(TableSelectionProvider, {\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ToolbarStateProvider, {\n          componentBlocks: componentBlocks,\n          editorDocumentFeatures: documentFeatures,\n          children: children\n        })\n      })\n    }, identity)\n  });\n}\nfunction getPrismTokenLength(token) {\n  if (typeof token === 'string') {\n    return token.length;\n  } else if (Array.isArray(token.content)) {\n    return token.content.reduce((l, t) => l + getPrismTokenLength(t), 0);\n  } else {\n    return getPrismTokenLength(token.content);\n  }\n}\nfunction DocumentEditorEditable(props) {\n  const containerSize = useContentPanelSize();\n  const entryLayoutPane = useEntryLayoutSplitPaneContext();\n  const editor = (0,slate_react__WEBPACK_IMPORTED_MODULE_103__.useSlate)();\n  const {\n    componentBlocks,\n    documentFeatures\n  } = useDocumentEditorConfig();\n  const onKeyDown = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => getKeyDownHandler(editor, documentFeatures), [editor, documentFeatures]);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ActiveBlockPopoverProvider, {\n    editor: editor,\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_10__.Prose, {\n      size: entryLayoutPane === 'main' ? 'medium' : 'regular',\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(slate_react__WEBPACK_IMPORTED_MODULE_103__.Editable, {\n        placeholder: \"Start writing or press \\\"/\\\" for commands...\",\n        decorate: (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(([node, path]) => {\n          let decorations = [];\n          if (node.type === 'component-block') {\n            if (node.children.length === 1 && slate__WEBPACK_IMPORTED_MODULE_104__.Element.isElement(node.children[0]) && node.children[0].type === 'component-inline-prop' && node.children[0].propPath === undefined) {\n              return decorations;\n            }\n            node.children.forEach((child, index) => {\n              if (slate__WEBPACK_IMPORTED_MODULE_104__.Node.string(child) === '' && slate__WEBPACK_IMPORTED_MODULE_104__.Element.isElement(child) && (child.type === 'component-block-prop' || child.type === 'component-inline-prop') && child.propPath !== undefined) {\n                const start = slate__WEBPACK_IMPORTED_MODULE_104__.Editor.start(editor, [...path, index]);\n                const placeholder = getPlaceholderTextForPropPath(child.propPath, componentBlocks[node.component].schema, node.props);\n                if (placeholder) {\n                  decorations.push({\n                    placeholder,\n                    anchor: start,\n                    focus: start\n                  });\n                }\n              }\n            });\n          }\n          if (node.type === 'code' && node.children.length === 1 && node.children[0].type === undefined && node.language && node.language in Prism.languages) {\n            const textPath = [...path, 0];\n            const tokens = Prism.tokenize(node.children[0].text, Prism.languages[node.language]);\n            function consumeTokens(start, tokens) {\n              for (const token of tokens) {\n                const length = getPrismTokenLength(token);\n                const end = start + length;\n                if (typeof token !== 'string') {\n                  decorations.push({\n                    ['prism_' + token.type]: true,\n                    anchor: {\n                      path: textPath,\n                      offset: start\n                    },\n                    focus: {\n                      path: textPath,\n                      offset: end\n                    }\n                  });\n                  consumeTokens(start, Array.isArray(token.content) ? token.content : [token.content]);\n                }\n                start = end;\n              }\n            }\n            consumeTokens(0, tokens);\n          }\n          return decorations;\n        }, [editor, componentBlocks]),\n        onKeyDown: onKeyDown,\n        renderElement: renderElement,\n        renderLeaf: renderLeaf,\n        ...props,\n        ...(0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.toDataAttributes)({\n          container: containerSize,\n          layout: entryLayoutPane\n        }),\n        className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.classNames)(editableStyles, props.className)\n      })\n    })\n  });\n}\nlet styles = {\n  flex: 1,\n  height: 'auto',\n  minHeight: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.scale[2000],\n  minWidth: 0,\n  padding: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.space.medium,\n  '&[data-layout=\"main\"]': {\n    boxSizing: 'border-box',\n    height: '100%',\n    padding: 0,\n    paddingTop: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.space.medium,\n    minHeight: 0,\n    minWidth: 0,\n    maxWidth: 800,\n    marginInline: 'auto',\n    [_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.breakpointQueries.above.mobile]: {\n      padding: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.space.xlarge\n    },\n    [_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.breakpointQueries.above.tablet]: {\n      padding: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.space.xxlarge\n    },\n    '&[data-container=\"wide\"]': {\n      padding: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.size.scale[600]\n    }\n  }\n};\nconst editableStyles = (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.css)({\n  ...styles,\n  a: {\n    color: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_9__.tokenSchema.color.foreground.accent\n  }\n});\n\nconst emptyObj = {};\nlet i$1 = 0;\nfunction newKey$1() {\n  return i$1++;\n}\nfunction InnerChildFieldInput(props) {\n  const outerConfig = useDocumentEditorConfig();\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(() => ({\n    key: newKey$1(),\n    value: props.value\n  }));\n  const documentFeatures = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {\n    return getWholeDocumentFeaturesForChildField(outerConfig.documentFeatures, props.schema.options);\n  }, [props.schema, outerConfig.documentFeatures]);\n  if (state.value !== props.value) {\n    setState({\n      key: newKey$1(),\n      value: props.value\n    });\n  }\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ResetEntryLayoutContext, {\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_field__WEBPACK_IMPORTED_MODULE_6__.Field, {\n      label: props.schema.options.label,\n      children: inputProps => /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createElement)(DocumentEditor, {\n        ...inputProps,\n        key: state.key,\n        componentBlocks: props.schema.options.componentBlocks === 'inherit' ? outerConfig.componentBlocks : emptyObj,\n        documentFeatures: documentFeatures,\n        onChange: val => {\n          setState(state => ({\n            key: state.key,\n            value: val\n          }));\n          props.onChange(val);\n        },\n        value: state.value\n      })\n    })\n  });\n}\nfunction ChildFieldInput(props) {\n  const data = getChildFieldData(props);\n  if (props.schema.options.kind === 'block' && (props.schema.options.editIn === 'both' || props.schema.options.editIn === 'modal') && data.value) {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(InnerChildFieldInput, {\n      schema: props.schema,\n      ...data\n    });\n  }\n  return null;\n}\n\nfunction getInputComponent(schema) {\n  if (schema.kind === 'object') {\n    var _schema$Input;\n    return (_schema$Input = schema.Input) !== null && _schema$Input !== void 0 ? _schema$Input : ObjectFieldInput;\n  }\n  if (schema.kind === 'conditional') {\n    var _schema$Input2;\n    return (_schema$Input2 = schema.Input) !== null && _schema$Input2 !== void 0 ? _schema$Input2 : ConditionalFieldInput;\n  }\n  if (schema.kind === 'array') {\n    var _schema$Input3;\n    return (_schema$Input3 = schema.Input) !== null && _schema$Input3 !== void 0 ? _schema$Input3 : ArrayFieldInput;\n  }\n  if (schema.kind === 'child') {\n    return ChildFieldInput;\n  }\n  return schema.Input;\n}\nconst InnerFormValueContentFromPreviewProps = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.memo)(function InnerFormValueContentFromPreview(props) {\n  let Input = getInputComponent(props.schema);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(Input, {\n    ...props,\n    autoFocus: !!props.autoFocus,\n    forceValidation: !!props.forceValidation\n  });\n});\nconst emptyArray$1 = [];\nconst FormValueContentFromPreviewProps = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.memo)(function FormValueContentFromPreview({\n  slugField,\n  ...props\n}) {\n  let Input = getInputComponent(props.schema);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(PathContextProvider, {\n    value: emptyArray$1,\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(SlugFieldProvider, {\n      value: slugField,\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(Input, {\n        ...props,\n        autoFocus: !!props.autoFocus,\n        forceValidation: !!props.forceValidation\n      })\n    })\n  });\n});\n\nconst emptyArray = [];\nconst RESPONSIVE_PADDING = {\n  mobile: 'medium',\n  tablet: 'xlarge',\n  desktop: 'xxlarge'\n};\nfunction containerWidthForEntryLayout(config) {\n  return config.entryLayout === 'content' ? 'none' : 'medium';\n}\nconst EntryLayoutSplitPaneContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)(null);\nfunction useEntryLayoutSplitPaneContext() {\n  return (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(EntryLayoutSplitPaneContext);\n}\nfunction ResetEntryLayoutContext(props) {\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(EntryLayoutSplitPaneContext.Provider, {\n    value: null,\n    children: props.children\n  });\n}\nfunction FormForEntry({\n  formatInfo,\n  forceValidation,\n  slugField,\n  entryLayout,\n  previewProps: props\n}) {\n  const isAboveMobile = useContentPanelQuery({\n    above: 'mobile'\n  });\n  if (entryLayout === 'content' && formatInfo.contentField && isAboveMobile) {\n    const {\n      contentField\n    } = formatInfo;\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(PathContextProvider, {\n      value: emptyArray,\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(SlugFieldProvider, {\n        value: slugField,\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_split_view__WEBPACK_IMPORTED_MODULE_8__.SplitView, {\n          autoSaveId: \"keystatic-content-split-view\",\n          defaultSize: 320,\n          minSize: 240,\n          maxSize: 480,\n          flex: true,\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_split_view__WEBPACK_IMPORTED_MODULE_8__.SplitPaneSecondary, {\n            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(EntryLayoutSplitPaneContext.Provider, {\n              value: \"main\",\n              children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ScrollView, {\n                children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(AddToPathProvider, {\n                  part: contentField.key,\n                  children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(InnerFormValueContentFromPreviewProps, {\n                    forceValidation: forceValidation,\n                    ...props.fields[contentField.key]\n                  })\n                })\n              })\n            })\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_split_view__WEBPACK_IMPORTED_MODULE_8__.SplitPanePrimary, {\n            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(EntryLayoutSplitPaneContext.Provider, {\n              value: \"side\",\n              children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ScrollView, {\n                children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_7__.Grid, {\n                  gap: \"xlarge\",\n                  padding: RESPONSIVE_PADDING,\n                  children: Object.entries(props.fields).map(([key, propVal]) => key === contentField.key ? null : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(AddToPathProvider, {\n                    part: key,\n                    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(InnerFormValueContentFromPreviewProps, {\n                      forceValidation: forceValidation,\n                      ...propVal\n                    })\n                  }, key))\n                })\n              })\n            })\n          })]\n        })\n      })\n    });\n  }\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ScrollView, {\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(PageContainer, {\n      paddingY: RESPONSIVE_PADDING,\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(FormValueContentFromPreviewProps\n      // autoFocus\n      , {\n        forceValidation: forceValidation,\n        slugField: slugField,\n        ...props\n      })\n    })\n  });\n}\n\nlet i = 0;\nfunction newKey() {\n  return i++;\n}\nfunction DocumentFieldInput(props) {\n  let entryLayoutPane = useEntryLayoutSplitPaneContext();\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(() => ({\n    key: newKey(),\n    value: props.value\n  }));\n  if (state.value !== props.value) {\n    setState({\n      key: newKey(),\n      value: props.value\n    });\n  }\n  let fieldProps = {\n    label: props.label,\n    labelElementType: 'span',\n    // the editor element isn't an input, so we need to use a span for the label\n    description: props.description\n  };\n  if (entryLayoutPane === 'main') {\n    fieldProps = {\n      'aria-label': props.label\n      // `aria-description` is still in W3C Editor's Draft for ARIA 1.3.\n    };\n  }\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_field__WEBPACK_IMPORTED_MODULE_6__.Field, {\n    height: entryLayoutPane === 'main' ? '100%' : undefined,\n    ...fieldProps,\n    children: inputProps => /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.createElement)(DocumentEditor, {\n      ...inputProps,\n      key: state.key,\n      componentBlocks: props.componentBlocks,\n      documentFeatures: props.documentFeatures,\n      onChange: val => {\n        setState(state => ({\n          key: state.key,\n          value: val\n        }));\n        props.onChange(val);\n      },\n      value: state.value\n    })\n  });\n}\n\nconst textEncoder = new TextEncoder();\nconst textDecoder = new TextDecoder();\nconst defaultAltField = text({\n  label: 'Alt text',\n  description: 'This text will be used by screen readers and search engines.'\n});\nconst emptyTitleField = basicFormFieldWithSimpleReaderParse({\n  Input() {\n    return null;\n  },\n  defaultValue() {\n    return '';\n  },\n  parse(value) {\n    if (value === undefined) return '';\n    if (typeof value !== 'string') {\n      throw new FieldDataError('Must be string');\n    }\n    return value;\n  },\n  validate(value) {\n    return value;\n  },\n  serialize(value) {\n    return {\n      value\n    };\n  }\n});\nfunction normaliseDocumentFeatures(config) {\n  var _config$formatting, _formatting$alignment, _formatting$alignment2, _formatting$blockType, _formatting$inlineMar, _formatting$inlineMar2, _formatting$inlineMar3, _formatting$inlineMar4, _formatting$inlineMar5, _formatting$inlineMar6, _formatting$inlineMar7, _formatting$inlineMar8, _formatting$listTypes, _formatting$listTypes2, _imagesConfig$schema$, _imagesConfig$schema, _imagesConfig$schema$2, _imagesConfig$schema2;\n  const formatting = config.formatting === true ? {\n    // alignment: true, // not supported natively in markdown\n    blockTypes: true,\n    headingLevels: true,\n    inlineMarks: true,\n    listTypes: true,\n    softBreaks: true\n  } : (_config$formatting = config.formatting) !== null && _config$formatting !== void 0 ? _config$formatting : {};\n  const imagesConfig = config.images === true ? {} : config.images;\n  return {\n    formatting: {\n      alignment: formatting.alignment === true ? {\n        center: true,\n        end: true\n      } : {\n        center: !!((_formatting$alignment = formatting.alignment) !== null && _formatting$alignment !== void 0 && _formatting$alignment.center),\n        end: !!((_formatting$alignment2 = formatting.alignment) !== null && _formatting$alignment2 !== void 0 && _formatting$alignment2.end)\n      },\n      blockTypes: (formatting === null || formatting === void 0 ? void 0 : formatting.blockTypes) === true ? {\n        blockquote: true,\n        code: {\n          schema: object({})\n        }\n      } : {\n        blockquote: !!((_formatting$blockType = formatting.blockTypes) !== null && _formatting$blockType !== void 0 && _formatting$blockType.blockquote),\n        code: (_formatting$blockType2 => {\n          if (((_formatting$blockType2 = formatting.blockTypes) === null || _formatting$blockType2 === void 0 ? void 0 : _formatting$blockType2.code) === undefined) {\n            return false;\n          }\n          if (formatting.blockTypes.code === true || !formatting.blockTypes.code.schema) {\n            return {\n              schema: object({})\n            };\n          }\n          for (const key of ['type', 'children', 'language']) {\n            if (key in formatting.blockTypes.code.schema) {\n              throw new Error(`\"${key}\" cannot be a key in the schema for code blocks`);\n            }\n          }\n          return {\n            schema: object(formatting.blockTypes.code.schema)\n          };\n        })()\n      },\n      headings: (_obj$schema => {\n        const opt = formatting === null || formatting === void 0 ? void 0 : formatting.headingLevels;\n        const obj = typeof opt === 'object' && 'levels' in opt ? opt : {\n          levels: opt,\n          schema: undefined\n        };\n        if (obj.schema) {\n          for (const key of ['type', 'children', 'level', 'textAlign']) {\n            if (key in obj.schema) {\n              throw new Error(`\"${key}\" cannot be a key in the schema for headings`);\n            }\n          }\n        }\n        return {\n          levels: [...new Set(obj.levels === true ? [1, 2, 3, 4, 5, 6] : obj.levels)],\n          schema: object((_obj$schema = obj.schema) !== null && _obj$schema !== void 0 ? _obj$schema : {})\n        };\n      })(),\n      inlineMarks: formatting.inlineMarks === true ? {\n        bold: true,\n        code: true,\n        italic: true,\n        keyboard: false,\n        // not supported natively in markdown\n        strikethrough: true,\n        subscript: false,\n        // not supported natively in markdown\n        superscript: false,\n        // not supported natively in markdown\n        underline: false // not supported natively in markdown\n      } : {\n        bold: !!((_formatting$inlineMar = formatting.inlineMarks) !== null && _formatting$inlineMar !== void 0 && _formatting$inlineMar.bold),\n        code: !!((_formatting$inlineMar2 = formatting.inlineMarks) !== null && _formatting$inlineMar2 !== void 0 && _formatting$inlineMar2.code),\n        italic: !!((_formatting$inlineMar3 = formatting.inlineMarks) !== null && _formatting$inlineMar3 !== void 0 && _formatting$inlineMar3.italic),\n        strikethrough: !!((_formatting$inlineMar4 = formatting.inlineMarks) !== null && _formatting$inlineMar4 !== void 0 && _formatting$inlineMar4.strikethrough),\n        underline: !!((_formatting$inlineMar5 = formatting.inlineMarks) !== null && _formatting$inlineMar5 !== void 0 && _formatting$inlineMar5.underline),\n        keyboard: !!((_formatting$inlineMar6 = formatting.inlineMarks) !== null && _formatting$inlineMar6 !== void 0 && _formatting$inlineMar6.keyboard),\n        subscript: !!((_formatting$inlineMar7 = formatting.inlineMarks) !== null && _formatting$inlineMar7 !== void 0 && _formatting$inlineMar7.subscript),\n        superscript: !!((_formatting$inlineMar8 = formatting.inlineMarks) !== null && _formatting$inlineMar8 !== void 0 && _formatting$inlineMar8.superscript)\n      },\n      listTypes: formatting.listTypes === true ? {\n        ordered: true,\n        unordered: true\n      } : {\n        ordered: !!((_formatting$listTypes = formatting.listTypes) !== null && _formatting$listTypes !== void 0 && _formatting$listTypes.ordered),\n        unordered: !!((_formatting$listTypes2 = formatting.listTypes) !== null && _formatting$listTypes2 !== void 0 && _formatting$listTypes2.unordered)\n      },\n      softBreaks: !!formatting.softBreaks\n    },\n    links: !!config.links,\n    layouts: [...new Set((config.layouts || []).map(x => JSON.stringify(x)))].map(x => JSON.parse(x)),\n    dividers: !!config.dividers,\n    images: imagesConfig === undefined ? false : {\n      ...imagesConfig,\n      schema: {\n        alt: (_imagesConfig$schema$ = (_imagesConfig$schema = imagesConfig.schema) === null || _imagesConfig$schema === void 0 ? void 0 : _imagesConfig$schema.alt) !== null && _imagesConfig$schema$ !== void 0 ? _imagesConfig$schema$ : defaultAltField,\n        title: (_imagesConfig$schema$2 = (_imagesConfig$schema2 = imagesConfig.schema) === null || _imagesConfig$schema2 === void 0 ? void 0 : _imagesConfig$schema2.title) !== null && _imagesConfig$schema$2 !== void 0 ? _imagesConfig$schema$2 : emptyTitleField\n      }\n    },\n    tables: !!config.tables\n  };\n}\nfunction document$1({\n  label,\n  componentBlocks = {},\n  description,\n  ...documentFeaturesConfig\n}) {\n  const documentFeatures = normaliseDocumentFeatures(documentFeaturesConfig);\n  const parse = mode => (_value, data) => {\n    const markdoc = textDecoder.decode(data.content);\n    const document = fromMarkdoc(_markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__[\"default\"].parse(markdoc), componentBlocks);\n    const editor = createDocumentEditorForNormalization(documentFeatures, componentBlocks);\n    editor.children = document;\n    slate__WEBPACK_IMPORTED_MODULE_104__.Editor.normalize(editor, {\n      force: true\n    });\n    return deserializeFiles(editor.children, componentBlocks, data.other, data.external || new Map(), mode, documentFeatures, data.slug);\n  };\n  return {\n    kind: 'form',\n    formKind: 'content',\n    defaultValue() {\n      return [{\n        type: 'paragraph',\n        children: [{\n          text: ''\n        }]\n      }];\n    },\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(DocumentFieldInput, {\n        componentBlocks: componentBlocks,\n        description: description,\n        label: label,\n        documentFeatures: documentFeatures,\n        ...props\n      });\n    },\n    parse: parse('edit'),\n    contentExtension: '.mdoc',\n    validate(value) {\n      return value;\n    },\n    directories: [...collectDirectoriesUsedInSchema(object(Object.fromEntries(Object.entries(componentBlocks).map(([name, block]) => [name, object(block.schema)])))), ...(typeof documentFeatures.images === 'object' && typeof documentFeatures.images.directory === 'string' ? [fixPath(documentFeatures.images.directory)] : [])],\n    serialize(value, opts) {\n      const {\n        extraFiles,\n        node\n      } = toMarkdocDocument(value, {\n        componentBlocks,\n        documentFeatures,\n        slug: opts.slug\n      });\n      const other = new Map();\n      const external = new Map();\n      for (const file of extraFiles) {\n        if (file.parent === undefined) {\n          other.set(file.path, file.contents);\n          continue;\n        }\n        if (!external.has(file.parent)) {\n          external.set(file.parent, new Map());\n        }\n        external.get(file.parent).set(file.path, file.contents);\n      }\n      return {\n        content: textEncoder.encode(_markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__[\"default\"].format(_markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__[\"default\"].parse(_markdoc_markdoc__WEBPACK_IMPORTED_MODULE_108__[\"default\"].format(node)))),\n        other,\n        external,\n        value: undefined\n      };\n    },\n    reader: {\n      parse: parse('read')\n    }\n  };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGtleXN0YXRpYytjb3JlQDAuMi4xMl9uZXh0QDE0LjIuMl9yZWFjdC1kb21AMTguMi4wX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvaW5kZXgtZmJhYjMyZjcubm9kZS5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFnRDtBQUN5RTtBQUNyQztBQUNsQjtBQUNUO0FBQ3JCO0FBQzhMO0FBQ3JLO0FBQ0w7QUFDWTtBQUNzQztBQUNqQjtBQUNzRjtBQUM1RztBQUMrQjtBQUNXO0FBQ2xEO0FBQ25CO0FBQ3VCO0FBQ0U7QUFDRDtBQUNGO0FBQ1k7QUFDbUM7QUFDNUU7QUFDbUU7QUFDekM7QUFDZ0I7QUFDaEI7QUFDSTtBQUMwRDtBQUN4RDtBQUNBO0FBQ1g7QUFDaUI7QUFDWjtBQUNjO0FBQ2Q7QUFDSTtBQUNJO0FBQ0E7QUFDUjtBQUN3QjtBQUNOO0FBQ1I7QUFDSTtBQUNkO0FBQ1U7QUFDWTtBQUNyQztBQUN5QjtBQUNFO0FBQ0U7QUFDWjtBQUNRO0FBQzFCO0FBQ1c7QUFDTztBQUNiO0FBQ2E7QUFDSTtBQUNOO0FBQ2M7QUFDVjtBQUNGO0FBQy9CO0FBQ3lCO0FBQ3BDO0FBQzRCO0FBQ0Y7QUFDakI7QUFDRztBQUNQO0FBQ087QUFDYTtBQUNVO0FBQ087QUFDTTtBQUNKO0FBQ0Y7QUFDVztBQUNYO0FBQ0E7QUFDTDtBQUNMO0FBQ2lDO0FBQ3hDO0FBQ2lCO0FBQ29DO0FBQ1o7QUFDVTtBQUNaO0FBQ047QUFDRTtBQUNBO0FBQ0U7QUFDdkM7QUFDd0I7QUFDWDtBQUNSO0FBQ0g7QUFDbUI7QUFDZ0I7QUFDRjtBQUNkO0FBQ0U7QUFDQTtBQUNOO0FBQ0Y7QUFDRTtBQUNVO0FBQ2Y7O0FBRXREO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FB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LFNBQVMsa0RBQVU7QUFDbkI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDZDQUFNO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHNCQUFzQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLCtDQUFRO0FBQ3BDO0FBQ0EsR0FBRztBQUNIO0FBQ0EsaUJBQWlCLDhDQUFPO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsVUFBVTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsc0JBQXNCLDhDQUFPO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsZ0RBQVM7QUFDWDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxrREFBVztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsS0FBSztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0Esd0JBQXdCLE9BQU8sRUFBRSxRQUFRO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLGtEQUFXO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsa0RBQVc7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsa0RBQVc7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLDZEQUFhO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLDZEQUFhO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHdEQUFRO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFLHdEQUFRO0FBQ1YsRUFBRSw2REFBYTtBQUNmOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsOENBQThDLGVBQWU7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxVQUFVO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsUUFBUSxJQUFJO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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Q0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFdBQVc7QUFDWCxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxzREFBc0Q7QUFDdEQ7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLGlDQUFpQyxFQUFFO0FBQ25DLHdCQUF3QixTQUFTO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsT0FBTyxLQUFLLElBQUksSUFBSSxLQUFLLEtBQUssS0FBSyxLQUFLLFNBQVM7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsb0RBQW9ELG1DQUFtQztBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRDtBQUN0RDtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGdGQUFnRjtBQUM3RiwyQkFBMkIsT0FBTyxFQUFFLEtBQUssS0FBSyxRQUFRLElBQUksS0FBSyxRQUFRLElBQUksS0FBSyxRQUFRLEtBQUssSUFBSSxJQUFJO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxPQUFPO0FBQ3ZDO0FBQ0EsV0FBVztBQUNYO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLElBQUk7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsTUFBTTtBQUM3Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLG9CQUFvQixJQUFJO0FBQ3hCLHlCQUF5QixNQUFNO0FBQy9CLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsZ0NBQWdDLEVBQUUsTUFBTSxPQUFPLElBQUksSUFBSSxJQUFJLElBQUk7QUFDL0Q7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGFBQWE7QUFDcEM7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLHNCQUFzQixHQUFHO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsNkdBQTZHLE9BQU8sZUFBZSxPQUFPLGdCQUFnQixJQUFJO0FBQ2pOO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSxJQUFJO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsaUZBQWlGLElBQUksb0JBQW9CO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsMkJBQTJCLEdBQUcsSUFBSSxPQUFPO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsdUJBQXVCLEdBQUcsSUFBSSxPQUFPO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxrQkFBa0IsT0FBTztBQUN6QjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLCtDQUErQyxpQkFBaUIsSUFBSSxFQUFFO0FBQ3RFO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxtRUFBbUU7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxJQUFJLE9BQU8sSUFBSTtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsOEJBQThCLFVBQVU7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSwrREFBK0Q7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0VBQXNFLElBQUksR0FBRztBQUM3RSw0Q0FBNEMsTUFBTTtBQUNsRDtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsYUFBYSxtQkFBbUIsVUFBVSxVQUFVLEtBQUssT0FBTyxNQUFNLEtBQUssSUFBSTtBQUN6RztBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLCtCQUErQixVQUFVO0FBQ3pDO0FBQ0EsR0FBRztBQUNIO0FBQ0Esa0NBQWtDLFVBQVU7QUFDNUM7QUFDQSwrQkFBK0IsVUFBVTtBQUN6QztBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0EsMkJBQTJCLFVBQVU7QUFDckMsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLEdBQUc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsTUFBTTtBQUMzQjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLG1FQUFtRTtBQUNuRSxtQ0FBbUM7QUFDbkMsdUJBQXVCOztBQUV2QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwwREFBMEQ7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EscUJBQXFCLEtBQUs7QUFDMUIsQ0FBQzs7QUFFRDtBQUNBLGlCQUFpQixxRUFBVztBQUM1Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSwrQ0FBVTtBQUNkO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLG1DQUFtQywwQ0FBSztBQUN4QztBQUNBLElBQUksK0NBQVU7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0wsSUFBSTtBQUNKLElBQUksK0NBQVU7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELDBCQUEwQiwrRUFBMkI7QUFDckQsaUJBQWlCLDZEQUFjO0FBQy9CO0FBQ0E7QUFDQSxlQUFlLHlDQUFJO0FBQ25CLHNDQUFzQywrQ0FBUTtBQUM5QztBQUNBO0FBQ0EsRUFBRSxnREFBUztBQUNYO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLElBQUksK0NBQVU7QUFDZCxVQUFVLHNEQUFXO0FBQ3JCLEtBQUs7QUFDTCxJQUFJLHNEQUFXO0FBQ2YsR0FBRztBQUNILHNCQUFzQix1REFBSSxDQUFDLHVEQUFRO0FBQ25DLDRCQUE0Qix1REFBSTtBQUNoQztBQUNBLDhCQUE4QixzREFBRztBQUNqQztBQUNBO0FBQ0E7QUFDQSxPQUFPLGdCQUFnQixzREFBRztBQUMxQjtBQUNBLCtCQUErQix1REFBSSxDQUFDLG9EQUFJO0FBQ3hDO0FBQ0E7QUFDQSxrQ0FBa0MsdURBQUksQ0FBQyxnRUFBYztBQUNyRCxvQ0FBb0Msc0RBQUcsQ0FBQyw2REFBWTtBQUNwRDtBQUNBO0FBQ0EscUNBQXFDLHNEQUFHLENBQUMsbURBQUk7QUFDN0MscUJBQXFCLHNFQUFRO0FBQzdCLGVBQWU7QUFDZixhQUFhLGdCQUFnQixzREFBRyxDQUFDLHlEQUFPO0FBQ3hDO0FBQ0EsYUFBYTtBQUNiLFdBQVcsZ0JBQWdCLHVEQUFJLENBQUMsZ0VBQWM7QUFDOUMsb0NBQW9DLHNEQUFHLENBQUMsNkRBQVk7QUFDcEQ7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmLHFDQUFxQyxzREFBRyxDQUFDLG1EQUFJO0FBQzdDLHFCQUFxQixzRkFBZ0I7QUFDckMsZUFBZTtBQUNmLGFBQWEsZ0JBQWdCLHNEQUFHLENBQUMseURBQU87QUFDeEMscUNBQXFDLHNEQUFHLENBQUMseURBQUk7QUFDN0M7QUFDQTtBQUNBLGVBQWU7QUFDZixhQUFhO0FBQ2IsV0FBVyxnQkFBZ0IsdURBQUksQ0FBQyxnRUFBYztBQUM5QyxvQ0FBb0Msc0RBQUcsQ0FBQyw2REFBWTtBQUNwRDtBQUNBO0FBQ0EscUNBQXFDLHNEQUFHLENBQUMsbURBQUk7QUFDN0MscUJBQXFCLDBFQUFVO0FBQy9CLGVBQWU7QUFDZixhQUFhLGdCQUFnQixzREFBRyxDQUFDLHlEQUFPO0FBQ3hDO0FBQ0EsYUFBYTtBQUNiLFdBQVc7QUFDWCxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUssZ0JBQWdCLHNEQUFHLENBQUMsZ0VBQWU7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLDJDQUEyQyxzREFBRztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsd0JBQXdCLCtDQUFRO0FBQ2hDLDhCQUE4QiwrQ0FBUTtBQUN0QztBQUNBO0FBQ0EsSUFBSSxFQUFFLHVFQUFrQjtBQUN4Qix3QkFBd0IsK0VBQTJCO0FBQ25EO0FBQ0Esc0JBQXNCLHNEQUFHLENBQUMsdURBQU07QUFDaEM7QUFDQSwyQkFBMkIsdURBQUk7QUFDL0I7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLE9BQU87QUFDUCw4QkFBOEIsdURBQUksQ0FBQyw0REFBTztBQUMxQztBQUNBLE9BQU8sZ0JBQWdCLHNEQUFHLENBQUMsdURBQU87QUFDbEMsK0JBQStCLHVEQUFJLENBQUMsb0RBQUk7QUFDeEM7QUFDQTtBQUNBLGtDQUFrQyxzREFBRyxDQUFDLDZEQUFTO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLFdBQVcsZ0JBQWdCLHNEQUFHLENBQUMsNkRBQVM7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNULE9BQU8sZ0JBQWdCLHVEQUFJLENBQUMsNERBQVc7QUFDdkMsZ0NBQWdDLHNEQUFHLENBQUMsdURBQU07QUFDMUM7QUFDQTtBQUNBLFNBQVMsZ0JBQWdCLHNEQUFHLENBQUMsdURBQU07QUFDbkM7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0EsNkJBQTZCLHNEQUFHLENBQUMsbURBQUk7QUFDckMsT0FBTyxzRUFBUTtBQUNmLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixTQUFTLDhDQUFPLG9CQUFvQixzREFBRyxDQUFDLDZEQUFZO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHNEQUFXO0FBQ2pCLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBLGdDQUFnQyx1REFBSSxDQUFDLGdFQUFjO0FBQ25ELDBCQUEwQixzREFBRyxlQUFlLGdCQUFnQixzREFBRyxDQUFDLHlEQUFPO0FBQ3ZFLDJCQUEyQixzREFBRyxDQUFDLHlEQUFJO0FBQ25DO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHNEQUFHLENBQUMsbURBQUk7QUFDL0IsV0FBVyxnRkFBYTtBQUN4QixLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixzREFBRyxDQUFDLG1EQUFJO0FBQy9CLFdBQVcsb0ZBQWU7QUFDMUIsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsc0RBQUcsQ0FBQyxtREFBSTtBQUMvQixXQUFXLGtGQUFjO0FBQ3pCLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLGdCQUFnQiw4Q0FBTztBQUN2QixTQUFTLDhDQUFPLG9CQUFvQix1REFBSSxDQUFDLDBEQUFXO0FBQ3BELDRCQUE0Qix1REFBSSxDQUFDLGdFQUFjO0FBQy9DLDhCQUE4Qix1REFBSSxDQUFDLDZEQUFZO0FBQy9DO0FBQ0EsOEVBQThFLHNEQUFHLENBQUMsbURBQUk7QUFDdEYsZUFBZSxvRkFBZTtBQUM5QixTQUFTO0FBQ1QsT0FBTyxnQkFBZ0Isc0RBQUcsQ0FBQyx5REFBTztBQUNsQywrQkFBK0Isc0RBQUcsQ0FBQyx5REFBSTtBQUN2QztBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSyxnQkFBZ0Isc0RBQUcsQ0FBQyxtREFBSTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSwrQ0FBVTtBQUNwQjtBQUNBLFdBQVc7QUFDWCxVQUFVO0FBQ1YsVUFBVSwrQ0FBVTtBQUNwQjtBQUNBLFdBQVc7QUFDWDtBQUNBLFdBQVc7QUFDWDtBQUNBLFFBQVEsc0RBQVc7QUFDbkIsT0FBTztBQUNQO0FBQ0EsNEJBQTRCLHVEQUFJLENBQUMsMkRBQU07QUFDdkM7QUFDQSxrQ0FBa0Msc0RBQUcsQ0FBQyx5REFBSTtBQUMxQztBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUksK0NBQVU7QUFDZDtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0osSUFBSSwrQ0FBVTtBQUNkO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLFNBQVMsOENBQU8sb0JBQW9CLHNEQUFHLENBQUMsNkRBQVk7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sc0RBQVc7QUFDakIsS0FBSztBQUNMLDJCQUEyQixzREFBRyxDQUFDLG1EQUFJO0FBQ25DLFdBQVcsd0VBQVM7QUFDcEIsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBLHNDQUFzQyx1REFBSSxDQUFDLGdFQUFjO0FBQ3pELDBCQUEwQixzREFBRyxxQkFBcUIsZ0JBQWdCLHVEQUFJLENBQUMseURBQU87QUFDOUUsNEJBQTRCLHNEQUFHLENBQUMseURBQUk7QUFDcEM7QUFDQSxLQUFLLGdCQUFnQixzREFBRyxDQUFDLHdEQUFHO0FBQzVCO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBO0FBQ0EsaUJBQWlCLDZEQUFjO0FBQy9CLDRCQUE0QiwrQ0FBUTtBQUNwQztBQUNBLEdBQUc7QUFDSCxnREFBZ0QsK0NBQVE7QUFDeEQsdUJBQXVCLDhDQUFPO0FBQzlCO0FBQ0E7QUFDQSxJQUFJLEVBQUUsdUVBQWtCO0FBQ3hCLDBCQUEwQiwrRUFBMkI7QUFDckQsc0JBQXNCLHNEQUFHLENBQUMsdURBQU07QUFDaEM7QUFDQSwyQkFBMkIsdURBQUk7QUFDL0I7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsc0RBQVc7QUFDbEM7QUFDQSxVQUFVLCtDQUFVO0FBQ3BCO0FBQ0EsV0FBVztBQUNYO0FBQ0EsT0FBTztBQUNQLDhCQUE4Qix1REFBSSxDQUFDLDREQUFPO0FBQzFDO0FBQ0EsT0FBTyxnQkFBZ0Isc0RBQUcsQ0FBQyx1REFBTztBQUNsQywrQkFBK0Isc0RBQUc7QUFDbEM7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU8sZ0JBQWdCLHVEQUFJLENBQUMsNERBQVc7QUFDdkMsZ0NBQWdDLHNEQUFHLENBQUMsdURBQU07QUFDMUM7QUFDQTtBQUNBLFNBQVMsZ0JBQWdCLHNEQUFHLENBQUMsdURBQU07QUFDbkM7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQSwwQkFBMEIsK0VBQTJCO0FBQ3JELHNCQUFzQix1REFBSSxDQUFDLGdFQUFjO0FBQ3pDLDRCQUE0QixzREFBRyxDQUFDLDZEQUFZO0FBQzVDO0FBQ0E7QUFDQSw2QkFBNkIsc0RBQUcsQ0FBQyxtREFBSTtBQUNyQyxhQUFhLHNFQUFRO0FBQ3JCLE9BQU87QUFDUCxLQUFLLGdCQUFnQixzREFBRyxDQUFDLHlEQUFPO0FBQ2hDO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0EsaUJBQWlCLDZEQUFjO0FBQy9CLHNCQUFzQixzREFBRyxDQUFDLGdFQUFlO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCwyQ0FBMkMsc0RBQUc7QUFDOUM7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixTQUFTLDhDQUFPLG9CQUFvQixzREFBRyxDQUFDLDZEQUFZO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLCtDQUFVO0FBQ2xCO0FBQ0EsU0FBUztBQUNULFFBQVE7QUFDUixRQUFRLCtDQUFVO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1Q7QUFDQSxNQUFNLHNEQUFXO0FBQ2pCLEtBQUs7QUFDTCwyQkFBMkIsc0RBQUcsQ0FBQyxtREFBSTtBQUNuQyxXQUFXLHNFQUFRO0FBQ25CLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQSxnQ0FBZ0MsdURBQUksQ0FBQyxnRUFBYztBQUNuRCwwQkFBMEIsc0RBQUcsZUFBZSxnQkFBZ0IsdURBQUksQ0FBQyx5REFBTztBQUN4RSw0QkFBNEIsc0RBQUcsQ0FBQyx5REFBSTtBQUNwQztBQUNBLEtBQUssZ0JBQWdCLHNEQUFHLENBQUMsd0RBQUc7QUFDNUI7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLGlCQUFpQiw2REFBYztBQUMvQixxQkFBcUIsNkNBQU07QUFDM0Isc0NBQXNDLCtDQUFRO0FBQzlDLHNDQUFzQywrQ0FBUTtBQUM5QztBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0Esc0JBQXNCLHVEQUFJLENBQUMsdURBQVE7QUFDbkMsNEJBQTRCLHNEQUFHO0FBQy9CLDZCQUE2Qix1REFBSTtBQUNqQztBQUNBLGdDQUFnQyxzREFBRztBQUNuQztBQUNBO0FBQ0EsaUNBQWlDLHNEQUFHO0FBQ3BDO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUyxnQkFBZ0Isc0RBQUc7QUFDNUIsaUNBQWlDLHVEQUFJLENBQUMsb0RBQUk7QUFDMUM7QUFDQTtBQUNBLG9DQUFvQyxzREFBRyxDQUFDLDJEQUFRO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHNEQUFXO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwrQ0FBVTtBQUM5QjtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsK0NBQVU7QUFDNUI7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwrQ0FBVTtBQUM5QjtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0Esa0JBQWtCLCtDQUFVO0FBQzVCO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwrQ0FBVTtBQUM1QjtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwrQ0FBVTtBQUM1QjtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBLGVBQWU7QUFDZjtBQUNBLDZCQUE2QixzREFBVztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLCtDQUFVO0FBQzlCO0FBQ0EscUJBQXFCO0FBQ3JCLG9CQUFvQjtBQUNwQixvQkFBb0IsK0NBQVU7QUFDOUI7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQSxvQkFBb0IsK0NBQVU7QUFDOUI7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLCtDQUFVO0FBQzVCO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxxQkFBcUIsOENBQU8sb0dBQW9HLDBEQUFXO0FBQzNJO0FBQ0EsZUFBZTtBQUNmLDZDQUE2QyxzREFBRyxDQUFDLDhEQUFNO0FBQ3ZEO0FBQ0EsZUFBZTtBQUNmLGFBQWEsZ0JBQWdCLHNEQUFHLHFCQUFxQix3REFBd0Qsc0RBQUc7QUFDaEg7QUFDQSxhQUFhLGdCQUFnQix1REFBSSxDQUFDLGdFQUFjO0FBQ2hELHNDQUFzQyxzREFBRyxDQUFDLDZEQUFZO0FBQ3REO0FBQ0E7QUFDQSxrQkFBa0IsK0NBQVU7QUFDNUIsd0JBQXdCLHNEQUFXO0FBQ25DLG1CQUFtQjtBQUNuQixpQkFBaUI7QUFDakIsdUNBQXVDLHNEQUFHLENBQUMsbURBQUk7QUFDL0MsdUJBQXVCLDBFQUFVO0FBQ2pDLGlCQUFpQjtBQUNqQixlQUFlLGdCQUFnQixzREFBRyxDQUFDLHlEQUFPO0FBQzFDO0FBQ0E7QUFDQSxlQUFlO0FBQ2YsYUFBYTtBQUNiLFdBQVc7QUFDWCxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUssd0RBQXdELHNEQUFHO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDs7QUFFQTtBQUNBLEVBQUUsMkNBQU07QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsMEJBQTBCLHlDQUFJO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwrQ0FBVTtBQUNsQjtBQUNBLFNBQVM7QUFDVDtBQUNBLE1BQU0sK0NBQVU7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSw2Q0FBTTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDZDQUFNO0FBQ2Q7QUFDQSxVQUFVLCtDQUFVO0FBQ3BCO0FBQ0EsV0FBVztBQUNYO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSwrQ0FBVTtBQUNoQiwyQkFBMkIsdUJBQXVCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsVUFBVTtBQUNWO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwyQ0FBTTtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxNQUFNLDZDQUFNO0FBQ1osTUFBTSwrQ0FBVTtBQUNoQjtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsNkNBQU07QUFDZDtBQUNBLFFBQVEsNkNBQU07QUFDZDtBQUNBLFFBQVEsK0NBQVU7QUFDbEI7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsK0NBQVU7QUFDbEI7QUFDQSxTQUFTO0FBQ1QsUUFBUSwrQ0FBVTtBQUNsQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDJDQUEyQywwREFBbUIsR0FBRztBQUNqRTtBQUNBO0FBQ0EsQ0FBQztBQUNELHlCQUF5QixpREFBVTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsMEJBQTBCLDhDQUFPO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLEtBQUssaURBQWlELHNEQUFHO0FBQ3pEO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esc0JBQXNCLHVEQUFJO0FBQzFCO0FBQ0EsZUFBZSw4Q0FBTyxvQkFBb0Isc0RBQUc7QUFDN0M7QUFDQTtBQUNBLEtBQUssa0VBQWtFLHVEQUFJO0FBQzNFLGlCQUFpQixzREFBRztBQUNwQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0EsbUJBQW1CLDBEQUFXO0FBQzlCLGtCQUFrQiw4Q0FBTztBQUN6QjtBQUNBO0FBQ0EsR0FBRztBQUNILGtDQUFrQywrQ0FBUTtBQUMxQywwQkFBMEIsa0RBQVc7QUFDckM7QUFDQSxHQUFHO0FBQ0gseUJBQXlCLGtEQUFXO0FBQ3BDO0FBQ0EsR0FBRztBQUNIO0FBQ0Esc0JBQXNCLHNEQUFHO0FBQ3pCO0FBQ0E7QUFDQSwyQkFBMkIsdURBQUksQ0FBQyxvREFBSTtBQUNwQztBQUNBO0FBQ0EsOEJBQThCLHNEQUFHO0FBQ2pDLCtCQUErQixzREFBRyxDQUFDLHlEQUFJO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTyxnQkFBZ0IsdURBQUksQ0FBQywyQ0FBVTtBQUN0QyxxREFBcUQsc0RBQUc7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGdCQUFnQixzREFBRyxDQUFDLGdFQUFlO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsdURBQUksQ0FBQyx1REFBTTtBQUMzQyxzQ0FBc0MsdURBQUksQ0FBQyw0REFBTztBQUNsRDtBQUNBLGVBQWUsZ0JBQWdCLHNEQUFHO0FBQ2xDO0FBQ0E7QUFDQSxlQUFlO0FBQ2YsYUFBYTtBQUNiLFdBQVc7QUFDWCxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsaURBQVU7QUFDOUM7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELHNCQUFzQixzREFBRztBQUN6QjtBQUNBO0FBQ0EsZUFBZSxzREFBRztBQUNsQjtBQUNBLDBCQUEwQiwwREFBVztBQUNyQyxvQkFBb0IsMERBQVc7QUFDL0I7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDBEQUFXLDhCQUE4QiwwREFBVztBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCwwQkFBMEIsK0VBQTJCO0FBQ3JELHNCQUFzQixzREFBRztBQUN6QiwyQkFBMkIsdURBQUksQ0FBQyxvREFBSTtBQUNwQztBQUNBO0FBQ0EsOEJBQThCLHVEQUFJLENBQUMsb0RBQUk7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsZ0NBQWdDLHNEQUFHLENBQUMsNkRBQVk7QUFDaEQ7QUFDQTtBQUNBLFNBQVMsZ0JBQWdCLHVEQUFJLENBQUMsZ0VBQWM7QUFDNUMsa0NBQWtDLHNEQUFHLENBQUMsNkRBQVk7QUFDbEQ7QUFDQTtBQUNBLG1DQUFtQyxzREFBRyxDQUFDLG1EQUFJO0FBQzNDLG1CQUFtQiwwRUFBVTtBQUM3QixhQUFhO0FBQ2IsV0FBVyxnQkFBZ0Isc0RBQUcsQ0FBQyx5REFBTztBQUN0QztBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVCxPQUFPLDRCQUE0QixzREFBRyxDQUFDLDJEQUFZO0FBQ25EO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsMEJBQTBCLCtFQUEyQjtBQUNyRCxpQkFBaUIsNENBQU87QUFDeEIsZ0RBQWdELCtDQUFRO0FBQ3hELDRCQUE0QiwrQ0FBUTtBQUNwQyx1QkFBdUIsOENBQU87QUFDOUIsc0JBQXNCLHVEQUFJLENBQUMsdURBQVE7QUFDbkMsNEJBQTRCLHNEQUFHLENBQUMsdURBQU87QUFDdkMsNkJBQTZCLHNEQUFHLENBQUMsb0RBQUk7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLCtCQUErQixzREFBRztBQUNsQztBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLLGdCQUFnQix1REFBSSxDQUFDLDREQUFXO0FBQ3JDLDhCQUE4QixzREFBRyxDQUFDLHVEQUFNO0FBQ3hDO0FBQ0E7QUFDQSxPQUFPLGdCQUFnQixzREFBRyxDQUFDLHVEQUFNO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isc0RBQUc7QUFDekI7QUFDQTtBQUNBLHdDQUF3Qyx1REFBSTtBQUM1QztBQUNBLDhCQUE4QixzREFBRztBQUNqQztBQUNBLE9BQU8sZ0JBQWdCLHNEQUFHO0FBQzFCLCtCQUErQixzREFBRztBQUNsQztBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLLGlCQUFpQixzREFBRztBQUN6QjtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELHNCQUFzQix1REFBSSxDQUFDLGdFQUFjO0FBQ3pDLDRCQUE0QixzREFBRyxDQUFDLDZEQUFZO0FBQzVDO0FBQ0E7QUFDQSw2QkFBNkIsc0RBQUcsQ0FBQyxtREFBSTtBQUNyQyxhQUFhLHdFQUFTO0FBQ3RCLE9BQU87QUFDUCxLQUFLLGdCQUFnQixzREFBRyxDQUFDLHlEQUFPO0FBQ2hDO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDBCQUEwQiwyQ0FBTTtBQUNoQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMkNBQU07QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QseUNBQU07QUFDdEQ7QUFDQTtBQUNBLE1BQU0sNENBQVM7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLCtDQUFVO0FBQ3BCO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sTUFBTSxrREFBVztBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLE1BQU0sa0RBQVc7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELGtFQUFXO0FBQzlEO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QywwQ0FBSyxrQ0FBa0MsMkNBQU07QUFDMUYsUUFBUSwrQ0FBVTtBQUNsQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxpREFBaUQsMkNBQU07QUFDdkQ7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxZQUFZLHlDQUFJO0FBQ2hCO0FBQ0EsWUFBWSwrQ0FBVTtBQUN0QjtBQUNBLGtCQUFrQix5Q0FBSTtBQUN0QixhQUFhO0FBQ2IsWUFBWTtBQUNaLFlBQVksK0NBQVU7QUFDdEI7QUFDQTtBQUNBLGFBQWE7QUFDYixZQUFZLCtDQUFVO0FBQ3RCO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDJDQUFNO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsNkNBQU07QUFDcEI7QUFDQTtBQUNBLG9CQUFvQix5Q0FBSTtBQUN4QixrQkFBa0IsK0NBQVU7QUFDNUI7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQSxvQkFBb0IsK0NBQVU7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCLHFCQUFxQjtBQUNyQiwwQkFBMEIseUNBQUk7QUFDOUIscUJBQXFCO0FBQ3JCLG9CQUFvQiwrQ0FBVSxnQkFBZ0IseUNBQUk7QUFDbEQsb0JBQW9CO0FBQ3BCLG9CQUFvQiwrQ0FBVTtBQUM5QjtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsK0NBQVU7QUFDcEI7QUFDQSxXQUFXO0FBQ1gsZ0NBQWdDLHlDQUFJO0FBQ3BDO0FBQ0EsWUFBWSwrQ0FBVTtBQUN0QjtBQUNBLGtCQUFrQix5Q0FBSTtBQUN0QixhQUFhO0FBQ2IsWUFBWTtBQUNaLG9EQUFvRCx5Q0FBSTtBQUN4RCxZQUFZLCtDQUFVO0FBQ3RCO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUdBQW1HLHlDQUFNO0FBQ3pHLE1BQU0sK0NBQVU7QUFDaEI7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsK0NBQVU7QUFDcEI7QUFDQSxXQUFXO0FBQ1g7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw2Q0FBTTtBQUNsQjtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksK0NBQVU7QUFDdEI7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsY0FBYywrQ0FBVTtBQUN4QjtBQUNBLGVBQWU7QUFDZjtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLDZDQUFNO0FBQ2hCO0FBQ0EsU0FBUztBQUNUO0FBQ0EsVUFBVSwrQ0FBVTtBQUNwQiwrQkFBK0IsS0FBSztBQUNwQztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsV0FBVztBQUNYO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksK0NBQVU7QUFDdEI7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsWUFBWSwrQ0FBVTtBQUN0QjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLCtDQUFVO0FBQ3RCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLHFEQUFxRCxzQkFBc0I7QUFDM0U7QUFDQSxZQUFZLCtDQUFVO0FBQ3RCO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxrREFBVztBQUNiOztBQUVBO0FBQ0Esc0JBQXNCLHNEQUFHO0FBQ3pCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGVBQWU7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxRQUFRO0FBQ1I7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsMkNBQU07QUFDcEM7QUFDQSxHQUFHO0FBQ0g7QUFDQSxrQkFBa0IsMkNBQU07QUFDeEIsSUFBSSwrQ0FBVTtBQUNkO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGlCQUFpQiw2REFBYztBQUMvQjtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsOENBQU87QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsOEJBQThCLDZDQUFNO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLGlCQUFpQixzREFBVztBQUM1QixJQUFJLCtDQUFVO0FBQ2Q7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILHdCQUF3QixrREFBVztBQUNuQztBQUNBLHVGQUF1RixzREFBVztBQUNsRyxHQUFHO0FBQ0gsaUNBQWlDLDhDQUFPO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0Esd0JBQXdCLHVEQUFJO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCw4QkFBOEIsc0RBQUc7QUFDakM7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULGdDQUFnQyx5QkFBeUI7O0FBRXpEOztBQUVBLEVBQUU7O0FBRUY7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSxxQ0FBcUMsc0RBQUc7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxrREFBa0Qsc0RBQUc7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxpQkFBaUIsc0RBQUc7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsRUFBRSwyQ0FBTTtBQUNSO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osU0FBUyw4Q0FBTyxvQkFBb0Isc0RBQUcsQ0FBQyw2REFBWTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCwyQkFBMkIsc0RBQUcsQ0FBQyxtREFBSTtBQUNuQyxXQUFXLHdFQUFTO0FBQ3BCLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQSxtQ0FBbUMsdURBQUksQ0FBQyxnRUFBYztBQUN0RDtBQUNBLDBCQUEwQixzREFBRyxrQkFBa0IsZ0JBQWdCLHVEQUFJLENBQUMseURBQU87QUFDM0UsNEJBQTRCLHNEQUFHLENBQUMseURBQUk7QUFDcEM7QUFDQSxLQUFLLGdCQUFnQixzREFBRyxDQUFDLHdEQUFHO0FBQzVCO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELG1CQUFtQiwwREFBVztBQUM5QixzQkFBc0IsdURBQUk7QUFDMUI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLDRCQUE0QixzREFBRztBQUMvQjtBQUNBLG9DQUFvQywwREFBVyw4QkFBOEIsMERBQVc7QUFDeEY7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGlCQUFpQiw2REFBYztBQUMvQjtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isc0RBQUc7QUFDekI7QUFDQTtBQUNBLDJCQUEyQix1REFBSTtBQUMvQjtBQUNBLDhCQUE4QixzREFBRztBQUNqQyxtQkFBbUIsc0RBQUc7QUFDdEIscUJBQXFCLDBEQUFXO0FBQ2hDO0FBQ0EsU0FBUztBQUNUO0FBQ0Esa0RBQWtELEVBQUU7QUFDcEQsU0FBUztBQUNUO0FBQ0EsT0FBTyxnQkFBZ0Isc0RBQUc7QUFDMUIsK0JBQStCLHVEQUFJLENBQUMsb0RBQUk7QUFDeEM7QUFDQTtBQUNBLGtDQUFrQyxzREFBRyxDQUFDLGtFQUFXO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHNEQUFXO0FBQ3RDO0FBQ0EsY0FBYywrQ0FBVTtBQUN4QjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsZUFBZTtBQUNmLGNBQWMsc0RBQVc7QUFDekIsYUFBYTtBQUNiO0FBQ0EsMEVBQTBFLHNEQUFHLENBQUMsMkRBQU07QUFDcEY7QUFDQSxhQUFhO0FBQ2IsV0FBVyxnQkFBZ0Isc0RBQUcscUJBQXFCLGdCQUFnQix1REFBSSxDQUFDLGdFQUFjO0FBQ3RGLG9DQUFvQyxzREFBRyxDQUFDLDZEQUFZO0FBQ3BEO0FBQ0E7QUFDQSw2QkFBNkIsc0RBQVc7QUFDeEMsZ0JBQWdCLCtDQUFVO0FBQzFCO0FBQ0EsaUJBQWlCO0FBQ2pCLGVBQWU7QUFDZixxQ0FBcUMsc0RBQUcsQ0FBQyxtREFBSTtBQUM3QyxxQkFBcUIsMEVBQVU7QUFDL0IsZUFBZTtBQUNmLGFBQWEsZ0JBQWdCLHNEQUFHLENBQUMseURBQU87QUFDeEM7QUFDQTtBQUNBLGFBQWE7QUFDYixXQUFXO0FBQ1gsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELHNCQUFzQixzREFBRztBQUN6QixlQUFlLHNEQUFHO0FBQ2xCLG1CQUFtQiwwREFBVztBQUM5QixvQkFBb0IsMERBQVc7QUFDL0I7QUFDQSxtQkFBbUIsMERBQVc7QUFDOUIsZUFBZSwwREFBVztBQUMxQixLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNILHNCQUFzQiwyQ0FBTTtBQUM1QjtBQUNBLEdBQUc7QUFDSDtBQUNBLElBQUksK0NBQVU7QUFDZDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLCtCQUErQixzREFBRztBQUNsQztBQUNBLGVBQWUsc0RBQUc7QUFDbEI7QUFDQSw4Q0FBOEMsRUFBRTtBQUNoRDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSwwQkFBMEIsc0RBQUc7QUFDN0IsbUJBQW1CLHNEQUFHO0FBQ3RCO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBLGlDQUFpQyxzREFBRyxDQUFDLG1EQUFJO0FBQ3pDLE9BQU8sNEVBQVc7QUFDbEIsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixTQUFTLDhDQUFPLG9CQUFvQix1REFBSSxDQUFDLGdFQUFjO0FBQ3ZELDRCQUE0QixzREFBRyxDQUFDLDZEQUFZO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSwrQ0FBVTtBQUNwQjtBQUNBLFdBQVc7QUFDWCxVQUFVO0FBQ1Y7QUFDQTtBQUNBLFFBQVEsc0RBQVc7QUFDbkIsT0FBTztBQUNQO0FBQ0EsS0FBSyxnQkFBZ0Isc0RBQUcsQ0FBQyx5REFBTztBQUNoQztBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRSwyQ0FBTTtBQUNSLElBQUksK0NBQVU7QUFDZDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxNQUFNLCtDQUFVO0FBQ2hCO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixTQUFTLDhDQUFPO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixzREFBRyxDQUFDLGtFQUFXO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msc0RBQUcsQ0FBQyxtREFBSTtBQUN4QyxhQUFhLHNFQUFRO0FBQ3JCLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsSUFBSTtBQUM5QjtBQUNBLFFBQVEsc0RBQVc7QUFDbkIsT0FBTztBQUNQLHVEQUF1RCx1REFBSSxDQUFDLDJEQUFNO0FBQ2xFO0FBQ0EsZ0NBQWdDLHNEQUFHLENBQUMsbURBQUk7QUFDeEMsZUFBZSxzRUFBUTtBQUN2QixTQUFTLGdCQUFnQixzREFBRyxDQUFDLHlEQUFJO0FBQ2pDO0FBQ0EsU0FBUyxnQkFBZ0Isc0RBQUcsQ0FBQyx3REFBRztBQUNoQztBQUNBLFNBQVM7QUFDVCxPQUFPLG9EQUFvRCx1REFBSSxDQUFDLDJEQUFNO0FBQ3RFO0FBQ0EsZ0NBQWdDLHNEQUFHLENBQUMsbURBQUk7QUFDeEMsZUFBZSxvRkFBZTtBQUM5QixTQUFTLGdCQUFnQixzREFBRyxDQUFDLHlEQUFJO0FBQ2pDO0FBQ0EsU0FBUyxnQkFBZ0Isc0RBQUcsQ0FBQyx3REFBRztBQUNoQztBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0EsZ0JBQWdCLDJDQUFNO0FBQ3RCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix5Q0FBSTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQix5Q0FBSTtBQUNuQywrQkFBK0IseUNBQUk7QUFDbkM7QUFDQTtBQUNBLElBQUksK0NBQVU7QUFDZDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxlQUFlLDJDQUFNLGdCQUFnQix5Q0FBSTtBQUN6QyxFQUFFLDJDQUFNO0FBQ1IsSUFBSSwrQ0FBVTtBQUNkO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0wsSUFBSSwrQ0FBVTtBQUNkO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwyQ0FBTTtBQUN0QjtBQUNBLEdBQUc7QUFDSDtBQUNBLElBQUksK0NBQVU7QUFDZDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsK0NBQVE7QUFDaEMsRUFBRSxnREFBUztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLDRCQUE0QixpREFBVTtBQUN0QztBQUNBO0FBQ0Esa0JBQWtCLDRDQUFPO0FBQ3pCLHdCQUF3Qiw0Q0FBTztBQUMvQixzQkFBc0IsdURBQUksQ0FBQyxvREFBSTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHNEQUFHLENBQUMseURBQVU7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLHFDQUFxQyxzREFBRyxDQUFDLHlEQUFJO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxnQkFBZ0IsdURBQUksQ0FBQyw0REFBVztBQUNyQyw4QkFBOEIsc0RBQUcsQ0FBQyw2REFBWTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsT0FBTyxrQ0FBa0Msc0RBQUcsQ0FBQyw2REFBWTtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUCxLQUFLLDZCQUE2QixzREFBRyxDQUFDLG1EQUFHO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsc0RBQUc7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMERBQVc7QUFDaEM7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLLGdEQUFnRCxzREFBRyxDQUFDLDZEQUFTO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0EsS0FBSyx3TUFBd00sdURBQUksQ0FBQywyREFBWTtBQUM5TjtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsc0NBQXNDLCtDQUFRO0FBQzlDLHdDQUF3QywrQ0FBUTtBQUNoRCwwQkFBMEIsK0VBQTJCO0FBQ3JELGlCQUFpQiw2REFBYztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix1REFBSSxDQUFDLHVEQUFRO0FBQ25DLDRCQUE0Qix1REFBSTtBQUNoQztBQUNBLHdDQUF3Qyx1REFBSTtBQUM1QztBQUNBLGdDQUFnQyxzREFBRztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxpQ0FBaUMsc0RBQUc7QUFDcEMsbUNBQW1DLHNEQUFHO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmLHlCQUF5QixzREFBRztBQUM1QjtBQUNBLDhCQUE4QiwwREFBVztBQUN6QztBQUNBLDJCQUEyQiwwREFBVztBQUN0QztBQUNBLDRCQUE0Qiw2REFBVTtBQUN0QztBQUNBLHNDQUFzQywwREFBVyxzQkFBc0IsRUFBRSwwREFBVyw0QkFBNEI7QUFDaEg7QUFDQSxlQUFlO0FBQ2YsYUFBYTtBQUNiLFdBQVc7QUFDWCxTQUFTLGdCQUFnQixzREFBRztBQUM1QjtBQUNBLGlDQUFpQyx1REFBSSxDQUFDLG9EQUFJO0FBQzFDO0FBQ0E7QUFDQSxvQ0FBb0MsdURBQUksQ0FBQyxvREFBSTtBQUM3QztBQUNBLHNDQUFzQyx1REFBSSxDQUFDLGdFQUFjO0FBQ3pELHdDQUF3QyxzREFBRyxDQUFDLDZEQUFZO0FBQ3hEO0FBQ0E7QUFDQSx5Q0FBeUMsc0RBQUcsQ0FBQyxtREFBSTtBQUNqRCx5QkFBeUIsc0VBQVE7QUFDakMsbUJBQW1CO0FBQ25CLGlCQUFpQixnQkFBZ0Isc0RBQUcsQ0FBQyx5REFBTztBQUM1QztBQUNBLGlCQUFpQjtBQUNqQixlQUFlLGdCQUFnQix1REFBSSxDQUFDLGdFQUFjO0FBQ2xELHdDQUF3QyxzREFBRyxDQUFDLDZEQUFZO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBLG1CQUFtQjtBQUNuQix5Q0FBeUMsc0RBQUcsQ0FBQyxtREFBSTtBQUNqRCx5QkFBeUIsMEVBQVU7QUFDbkMsbUJBQW1CO0FBQ25CLGlCQUFpQixnQkFBZ0Isc0RBQUcsQ0FBQyx5REFBTztBQUM1QztBQUNBLGlCQUFpQjtBQUNqQixlQUFlO0FBQ2YsYUFBYSxnQkFBZ0Isc0RBQUcsQ0FBQyx1REFBTztBQUN4QztBQUNBLGFBQWEsZ0JBQWdCLHVEQUFJLENBQUMsZ0VBQWM7QUFDaEQsc0NBQXNDLHNEQUFHLENBQUMsNkRBQVk7QUFDdEQ7QUFDQTtBQUNBLGtCQUFrQiwrQ0FBVTtBQUM1Qix3QkFBd0Isc0RBQVc7QUFDbkMsbUJBQW1CO0FBQ25CLGlCQUFpQjtBQUNqQix1Q0FBdUMsc0RBQUcsQ0FBQyxtREFBSTtBQUMvQyx1QkFBdUIsMEVBQVU7QUFDakMsaUJBQWlCO0FBQ2pCLGVBQWUsZ0JBQWdCLHNEQUFHLENBQUMseURBQU87QUFDMUM7QUFDQTtBQUNBLGVBQWU7QUFDZixhQUFhO0FBQ2IsV0FBVztBQUNYLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSyxnQkFBZ0Isc0RBQUcsQ0FBQyxnRUFBZTtBQUN4QztBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsMkNBQTJDLHNEQUFHO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDhDQUFPO0FBQ3hCLDRCQUE0QiwrQ0FBUTtBQUNwQztBQUNBO0FBQ0EsR0FBRztBQUNILHVCQUF1Qiw4Q0FBTztBQUM5QjtBQUNBLGdEQUFnRCwrQ0FBUTtBQUN4RCxnQ0FBZ0MsK0NBQVE7QUFDeEMsOENBQThDLCtDQUFRO0FBQ3REO0FBQ0E7QUFDQSxJQUFJLEVBQUUsdUVBQWtCO0FBQ3hCLHdCQUF3QiwrRUFBMkI7QUFDbkQsc0JBQXNCLHNEQUFHLENBQUMsdURBQU07QUFDaEM7QUFDQSwyQkFBMkIsdURBQUk7QUFDL0I7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLE9BQU87QUFDUCw4QkFBOEIsc0RBQUcsQ0FBQyw0REFBTztBQUN6QztBQUNBLE9BQU8sZ0JBQWdCLHNEQUFHLENBQUMsdURBQU87QUFDbEMsK0JBQStCLHVEQUFJLENBQUMsb0RBQUk7QUFDeEM7QUFDQTtBQUNBLGtDQUFrQyxzREFBRyxDQUFDLDZEQUFTO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCxzREFBRyxDQUFDLG9EQUFJO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyx1REFBSSxDQUFDLHlEQUFJO0FBQzlDO0FBQ0E7QUFDQSxlQUFlO0FBQ2YsYUFBYTtBQUNiLFdBQVcsZ0JBQWdCLHNEQUFHO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1QsT0FBTyxnQkFBZ0IsdURBQUksQ0FBQyw0REFBVztBQUN2QyxnQ0FBZ0Msc0RBQUcsQ0FBQyx1REFBTTtBQUMxQztBQUNBO0FBQ0EsU0FBUyxnQkFBZ0Isc0RBQUcsQ0FBQyx1REFBTTtBQUNuQztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixzREFBRyxDQUFDLG1EQUFJO0FBQ3RDLE9BQU8sd0VBQVM7QUFDaEIsQ0FBQztBQUNEO0FBQ0EsaUJBQWlCLDZEQUFjO0FBQy9CLHNCQUFzQixzREFBRyxDQUFDLHVEQUFRO0FBQ2xDLDJCQUEyQixzREFBRyxDQUFDLDZEQUFZO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSwrQ0FBVTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsV0FBVztBQUNYO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBLGlDQUFpQyx1REFBSSxDQUFDLGdFQUFjO0FBQ3BELDBCQUEwQixzREFBRyxnQkFBZ0IsZ0JBQWdCLHNEQUFHLENBQUMseURBQU87QUFDeEUsMkJBQTJCLHNEQUFHLENBQUMseURBQUk7QUFDbkM7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQywyQ0FBTTtBQUN4QztBQUNBO0FBQ0EsR0FBRztBQUNILGtDQUFrQywyQ0FBTTtBQUN4QztBQUNBO0FBQ0EsR0FBRztBQUNILGdCQUFnQiwyQ0FBTTtBQUN0QjtBQUNBLEdBQUc7QUFDSCxtQ0FBbUMsNENBQVMsdURBQXVELHlDQUFJO0FBQ3ZHLHlCQUF5QiwyQ0FBTTtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IseUNBQUkseUJBQXlCLDBDQUFLLFFBQVEsMkNBQU0sa0NBQWtDLDBDQUFLLFFBQVEsMkNBQU0sK0JBQStCLDBDQUFLO0FBQzNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksSUFBSTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQSxNQUFNLHlDQUFNO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksMkNBQU07QUFDVixxQ0FBcUMscUJBQXFCO0FBQzFEO0FBQ0EsMkNBQTJDLHlCQUF5QjtBQUNwRTtBQUNBLHVCQUF1Qix5Q0FBSTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLCtDQUFVO0FBQ3RCO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsVUFBVSwrQ0FBVTtBQUNwQjtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsTUFBTSwrQ0FBVTtBQUNoQixnQkFBZ0IsMkNBQU07QUFDdEIsZUFBZSwyQ0FBTTtBQUNyQixPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSw0QkFBNEIsMENBQUs7QUFDakMsd0JBQXdCLDJDQUFNO0FBQzlCO0FBQ0EsT0FBTztBQUNQLG1JQUFtSSx5Q0FBSTtBQUN2STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsV0FBVztBQUNYLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFdBQVc7QUFDWCxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDBDQUFLO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsNENBQVMsMkJBQTJCLDRDQUFTO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sK0NBQVU7QUFDaEI7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLDJDQUFNO0FBQ1osOEJBQThCLGdCQUFnQjtBQUM5QztBQUNBO0FBQ0EsY0FBYywrQ0FBVTtBQUN4QjtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0EsWUFBWSwrQ0FBVTtBQUN0QjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsVUFBVSwrQ0FBVTtBQUNwQjtBQUNBLFdBQVc7QUFDWDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxNQUFNLDJDQUFNO0FBQ1osaUNBQWlDLG1CQUFtQjtBQUNwRCwrQkFBK0IscUJBQXFCO0FBQ3BELFlBQVksK0NBQVU7QUFDdEI7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDJDQUFNLG9EQUFvRCx5Q0FBSTtBQUNwRixRQUFRLCtDQUFVO0FBQ2xCLE9BQU87QUFDUDtBQUNBO0FBQ0EsMkJBQTJCLDJDQUFNO0FBQ2pDLElBQUksMkNBQU07QUFDVixxQ0FBcUMscUJBQXFCO0FBQzFELDJDQUEyQyx5QkFBeUI7QUFDcEU7QUFDQSx1QkFBdUIseUNBQUk7QUFDM0IsZUFBZSw0Q0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQSxVQUFVLCtDQUFVO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixXQUFXO0FBQ1g7QUFDQSxXQUFXO0FBQ1g7QUFDQSxZQUFZLCtDQUFVO0FBQ3RCO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLE1BQU0sK0NBQVU7QUFDaEIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLHlDQUFJO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsK0NBQVU7QUFDNUI7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLCtDQUFVO0FBQzVCO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsK0NBQVU7QUFDeEI7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwrQ0FBVTtBQUNsQjtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFFBQVEsK0NBQVU7QUFDbEI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMseUNBQUk7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFLCtDQUFVO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQSwwQ0FBMEMsb0RBQWE7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLHFCQUFxQjtBQUN0RDtBQUNBLFNBQVMsNENBQVM7QUFDbEIsdUNBQXVDLHlCQUF5QjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsdURBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHNEQUFHO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQywyQ0FBTTtBQUN0QztBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBLHNCQUFzQixzREFBRztBQUN6QjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsMENBQTBDLG9EQUFhO0FBQ3ZEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxpQkFBaUIsNkRBQWM7QUFDL0IsK0JBQStCLGlEQUFVO0FBQ3pDO0FBQ0Esd0JBQXdCLDhDQUFPO0FBQy9CO0FBQ0EsU0FBUyw0Q0FBUyxnQ0FBZ0MsNENBQVM7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELDRDQUFTLDBEQUEwRCw0Q0FBUztBQUNySTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxzQkFBc0Isc0RBQUc7QUFDekI7QUFDQSwyQkFBMkIsc0RBQUc7QUFDOUI7QUFDQSw2QkFBNkIsc0RBQUc7QUFDaEM7QUFDQSwrQkFBK0IsdURBQUk7QUFDbkM7QUFDQSxrQ0FBa0Msc0RBQUc7QUFDckMsdUJBQXVCLHNEQUFHO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQixhQUFhO0FBQ2I7QUFDQSxXQUFXLGdCQUFnQixzREFBRztBQUM5QixtQ0FBbUMsdURBQUksQ0FBQyxvREFBSTtBQUM1QztBQUNBO0FBQ0Esc0NBQXNDLHVEQUFJLENBQUMsZ0VBQWM7QUFDekQsd0NBQXdDLHNEQUFHLENBQUMsNkRBQVk7QUFDeEQ7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLHNEQUFXO0FBQ2pELG9CQUFvQiwyQ0FBTTtBQUMxQjtBQUNBLHdCQUF3QiwrQ0FBVTtBQUNsQztBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCLHdCQUF3QiwrQ0FBVTtBQUNsQztBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0Esc0JBQXNCLCtDQUFVO0FBQ2hDO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQSx1QkFBdUI7QUFDdkIsc0JBQXNCLCtDQUFVO0FBQ2hDO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkIscUJBQXFCO0FBQ3JCLG1CQUFtQjtBQUNuQix5Q0FBeUMsc0RBQUcsQ0FBQyxtREFBSTtBQUNqRCx5QkFBeUIsd0VBQVM7QUFDbEMsbUJBQW1CO0FBQ25CLGlCQUFpQixnQkFBZ0Isc0RBQUcsQ0FBQyx5REFBTztBQUM1QztBQUNBLGlCQUFpQjtBQUNqQixlQUFlLGdCQUFnQixzREFBRyxxQkFBcUIsZ0JBQWdCLHVEQUFJLENBQUMsZ0VBQWM7QUFDMUYsd0NBQXdDLHNEQUFHLENBQUMsNkRBQVk7QUFDeEQ7QUFDQTtBQUNBLG9CQUFvQiwrQ0FBVTtBQUM5QiwwQkFBMEIsc0RBQVc7QUFDckMscUJBQXFCO0FBQ3JCLG1CQUFtQjtBQUNuQix5Q0FBeUMsc0RBQUcsQ0FBQyxtREFBSTtBQUNqRCx5QkFBeUIsMEVBQVU7QUFDbkMsbUJBQW1CO0FBQ25CLGlCQUFpQixnQkFBZ0Isc0RBQUcsQ0FBQyx5REFBTztBQUM1QztBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGVBQWU7QUFDZixhQUFhO0FBQ2IsV0FBVztBQUNYLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxzQkFBc0Isc0RBQUc7QUFDekI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxzQkFBc0Isc0RBQUc7QUFDekI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsK0JBQStCLGlEQUFVO0FBQ3pDLHNCQUFzQixzREFBRztBQUN6QjtBQUNBLDJCQUEyQixzREFBRztBQUM5QjtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBLHFDQUFxQyxvREFBYTtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxpQkFBaUIsNkRBQWM7QUFDL0IsK0JBQStCLGlEQUFVO0FBQ3pDLHdCQUF3QixpREFBVTtBQUNsQztBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsMERBQVcsOEJBQThCLDBEQUFXO0FBQ3ZGLHNCQUFzQix1REFBSTtBQUMxQixlQUFlLHNEQUFHO0FBQ2xCLG9DQUFvQyxZQUFZO0FBQ2hELGlDQUFpQyxZQUFZO0FBQzdDLCtEQUErRCxZQUFZO0FBQzNFLHdFQUF3RSxZQUFZO0FBQ3BGLHFJQUFxSSwwREFBVyxtREFBbUQsMERBQVc7QUFDOU07QUFDQTtBQUNBLGVBQWUsMERBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSwwQ0FBMEMsdURBQUksQ0FBQyx1REFBUTtBQUN2RCw4QkFBOEIsc0RBQUc7QUFDakM7QUFDQSxtQkFBbUIsc0RBQUc7QUFDdEI7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDBEQUFXO0FBQ2pDO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTyxnQkFBZ0Isc0RBQUc7QUFDMUI7QUFDQSxtQkFBbUIsc0RBQUc7QUFDdEI7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDBEQUFXO0FBQ2pDO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUssa0RBQWtELHNEQUFHO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHNEQUFXO0FBQ2hDLHNCQUFzQiwyQ0FBTTtBQUM1QjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsK0NBQVU7QUFDbEIsa0JBQWtCLDJDQUFNO0FBQ3hCLGlCQUFpQiwyQ0FBTTtBQUN2QixTQUFTO0FBQ1Q7QUFDQSxLQUFLLG1EQUFtRCxzREFBRztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixzREFBVztBQUNoQyxRQUFRLCtDQUFVO0FBQ2xCLGtCQUFrQiwyQ0FBTSxlQUFlLHlDQUFJO0FBQzNDLGlCQUFpQiwyQ0FBTSxhQUFhLHlDQUFJO0FBQ3hDLFNBQVM7QUFDVDtBQUNBLEtBQUsscUZBQXFGLHNEQUFHO0FBQzdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHNEQUFXO0FBQ2hDLHNCQUFzQiwyQ0FBTTtBQUM1QjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsUUFBUSwrQ0FBVTtBQUNsQixrQkFBa0IsMkNBQU07QUFDeEIsaUJBQWlCLDJDQUFNO0FBQ3ZCLFNBQVM7QUFDVDtBQUNBLEtBQUssZ0JBQWdCLHNEQUFHO0FBQ3hCO0FBQ0EsS0FBSyx3SUFBd0ksc0RBQUc7QUFDaEo7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBLCtCQUErQixpREFBVTtBQUN6QyxpQkFBaUIsNkRBQWM7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLHNCQUFzQix1REFBSTtBQUMxQjtBQUNBLDRCQUE0QixzREFBRztBQUMvQjtBQUNBO0FBQ0EsU0FBUyxtRUFBZ0I7QUFDekI7QUFDQTtBQUNBLE9BQU87QUFDUCxpQkFBaUIsc0RBQUc7QUFDcEIsb0JBQW9CLDBEQUFXO0FBQy9CLDZCQUE2QiwwREFBVyx3QkFBd0I7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsMERBQVc7QUFDakMsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHNCQUFzQiwwREFBVztBQUNqQyx1QkFBdUIsMERBQVc7QUFDbEM7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsUUFBUSxzREFBVztBQUNuQjtBQUNBO0FBQ0EsS0FBSyw4REFBOEQsc0RBQUc7QUFDdEUsaUJBQWlCLHNEQUFHO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwwREFBVztBQUMvQjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSyxpQkFBaUIsc0RBQUc7QUFDekIsaUJBQWlCLHNEQUFHO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwwREFBVztBQUMvQjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IseUNBQUk7QUFDeEI7QUFDQTtBQUNBLHNCQUFzQix5Q0FBSTtBQUMxQixNQUFNLCtDQUFVO0FBQ2hCLDREQUE0RCx5Q0FBSTtBQUNoRSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix5Q0FBSTtBQUN4QjtBQUNBLE1BQU0sMkNBQU07QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwrQ0FBVTtBQUN0QjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix5Q0FBSSxhQUFhLHlDQUFJO0FBQzVDO0FBQ0Esb0JBQW9CLHlDQUFJO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLDJDQUFNO0FBQ1osUUFBUSwrQ0FBVTtBQUNsQjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNULFFBQVEsK0NBQVU7QUFDbEIsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IseUNBQUk7QUFDeEI7QUFDQSxNQUFNLDJDQUFNO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksK0NBQVU7QUFDdEI7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFFBQVEsK0NBQVUsZ0JBQWdCLDJDQUFNLGVBQWUseUNBQUk7QUFDM0QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsNkRBQWM7QUFDL0IsaUJBQWlCLDBEQUFXO0FBQzVCLHNCQUFzQixzREFBRztBQUN6QjtBQUNBLGVBQWUsc0RBQUc7QUFDbEI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLDJCQUEyQix1REFBSSxDQUFDLGdFQUFjO0FBQzlDLDhCQUE4Qix1REFBSSxDQUFDLDBEQUFXO0FBQzlDO0FBQ0EsZ0NBQWdDLHNEQUFHLENBQUMsNkRBQVk7QUFDaEQ7QUFDQSw0QkFBNEIsc0RBQUc7QUFDL0IsMEJBQTBCLDBEQUFXO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0EsNkJBQTZCLFFBQVE7QUFDckM7QUFDQTtBQUNBLFdBQVc7QUFDWCxpQ0FBaUMsc0RBQUcsQ0FBQyxtREFBSTtBQUN6QyxpQkFBaUIsb0ZBQWU7QUFDaEMsV0FBVztBQUNYLFNBQVMsZ0JBQWdCLHNEQUFHLENBQUMsbURBQUk7QUFDakM7QUFDQTtBQUNBLCtDQUErQyxzREFBVztBQUMxRDtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gseUNBQXlDLHNEQUFHLENBQUMsbURBQU07QUFDbkQ7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNULE9BQU8sZ0JBQWdCLHNEQUFHLENBQUMseURBQU87QUFDbEM7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLFNBQVMsOENBQU8sb0JBQW9CLHNEQUFHLENBQUMsNkRBQVk7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sc0RBQVc7QUFDakIsS0FBSztBQUNMLDJCQUEyQixzREFBRyxDQUFDLG1EQUFJO0FBQ25DLFdBQVcsd0VBQVM7QUFDcEIsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBLGlDQUFpQyx1REFBSSxDQUFDLGdFQUFjO0FBQ3BELDBCQUEwQixzREFBRyxnQkFBZ0IsZ0JBQWdCLHNEQUFHLENBQUMseURBQU87QUFDeEUsMkJBQTJCLHNEQUFHLENBQUMseURBQUk7QUFDbkM7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0EsZ0JBQWdCLDJDQUFNO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwyQ0FBTTtBQUN0QjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLHlDQUFJO0FBQ1g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix1REFBSTtBQUMxQiw0QkFBNEIsdURBQUk7QUFDaEMsc0ZBQXNGLHNEQUFHO0FBQ3pGO0FBQ0EsT0FBTyw0QkFBNEIsc0RBQUc7QUFDdEM7QUFDQSxPQUFPLDhDQUE4Qyx1REFBSTtBQUN6RCxnREFBZ0Qsc0RBQUc7QUFDbkQ7QUFDQSxTQUFTLDRCQUE0QixzREFBRztBQUN4QztBQUNBLFNBQVM7QUFDVCxPQUFPLDBTQUEwUyx1REFBSTtBQUNyVCxzUUFBc1Esc0RBQUc7QUFDelE7QUFDQSxTQUFTO0FBQ1QsT0FBTyxnQkFBZ0Isc0RBQUcsQ0FBQyxtREFBRztBQUM5QjtBQUNBLE9BQU87QUFDUCxLQUFLLEdBQUcsOENBQU87QUFDZix1Q0FBdUMsdURBQUksQ0FBQyxvREFBSTtBQUNoRDtBQUNBLGdDQUFnQyxzREFBRyxxQkFBcUIsZ0JBQWdCLHVEQUFJLENBQUMsZ0VBQWM7QUFDM0Ysa0NBQWtDLHNEQUFHLENBQUMsdURBQU07QUFDNUM7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLG1DQUFtQyxzREFBRyxDQUFDLG1EQUFJO0FBQzNDLHdDQUF3Qyw4RUFBWSxHQUFHLDhFQUFZO0FBQ25FLGFBQWE7QUFDYixXQUFXLGdCQUFnQixzREFBRyxDQUFDLHlEQUFPO0FBQ3RDO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSyxrRUFBa0Usc0RBQUcsb0JBQW9CO0FBQzlGLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsc0JBQXNCLHNEQUFHLENBQUMsb0RBQUk7QUFDOUI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLHdCQUF3QixzREFBRztBQUMzQixpQkFBaUIsc0RBQUc7QUFDcEI7QUFDQTtBQUNBLHVCQUF1QiwwREFBVztBQUNsQztBQUNBO0FBQ0E7QUFDQSxTQUFTLGdFQUFpQjtBQUMxQix5QkFBeUIsMERBQVc7QUFDcEMsU0FBUztBQUNULFNBQVMsZ0VBQWlCO0FBQzFCLHlCQUF5QiwwREFBVztBQUNwQztBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBLHNCQUFzQixzREFBRztBQUN6QixlQUFlLHNEQUFHO0FBQ2xCO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLHNCQUFzQixzREFBRyxDQUFDLHVEQUFRO0FBQ2xDLDJCQUEyQixzREFBRztBQUM5QjtBQUNBLGlCQUFpQixzREFBRztBQUNwQjtBQUNBO0FBQ0EsNERBQTRELDBEQUFXLDBCQUEwQjtBQUNqRyx5QkFBeUIsMERBQVcsc0JBQXNCLHdDQUF3QywwREFBVywyQkFBMkI7QUFDeEksOEJBQThCLDBEQUFXO0FBQ3pDLGdDQUFnQywwREFBVztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCw2QkFBNkIsc0RBQUc7QUFDaEM7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isc0RBQUcsQ0FBQyxvREFBSTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isc0RBQUc7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxnQkFBZ0IsOENBQU87QUFDdkI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSx5QkFBeUIsTUFBTTtBQUMvQjtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQSxTQUFTLDhDQUFPLG9CQUFvQixzREFBRyxDQUFDLHVEQUFNO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwyQ0FBTTtBQUNkLFVBQVUsK0NBQVU7QUFDcEI7QUFDQSxXQUFXO0FBQ1gsVUFBVSwrQ0FBVTtBQUNwQjtBQUNBLFdBQVc7QUFDWDtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1QsUUFBUTtBQUNSLFFBQVEsK0NBQVU7QUFDbEI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBLE1BQU0sc0RBQVc7QUFDakIsS0FBSztBQUNMLG1DQUFtQyxzREFBRyxDQUFDLDJEQUFNO0FBQzdDO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBLDJDQUEyQyxzREFBRywwQkFBMEI7QUFDeEU7QUFDQSxpQkFBaUIsNkRBQWM7QUFDL0I7QUFDQTtBQUNBLHdCQUF3Qix1REFBSSxDQUFDLGdFQUFjO0FBQzNDLDhCQUE4QixzREFBRyxDQUFDLDZEQUFZO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLFVBQVUsc0RBQVc7QUFDckIsU0FBUztBQUNULCtCQUErQixzREFBRyxDQUFDLG1EQUFJO0FBQ3ZDO0FBQ0EsU0FBUztBQUNULE9BQU8sZ0JBQWdCLHNEQUFHLENBQUMseURBQU87QUFDbEM7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsNkRBQWM7QUFDL0I7QUFDQSxzQkFBc0IsdURBQUksQ0FBQywwREFBVztBQUN0QztBQUNBLDRCQUE0Qix1REFBSSxDQUFDLGdFQUFjO0FBQy9DLDhCQUE4Qix1REFBSSxDQUFDLDZEQUFZO0FBQy9DO0FBQ0E7QUFDQSxnQ0FBZ0Msc0RBQUcsQ0FBQyxtREFBSTtBQUN4QyxlQUFlLHNFQUFRO0FBQ3ZCLFNBQVMsZ0JBQWdCLHNEQUFHLENBQUMsbURBQUk7QUFDakMsZUFBZSxvRkFBZTtBQUM5QixTQUFTO0FBQ1QsT0FBTyxnQkFBZ0IsdURBQUksQ0FBQyx5REFBTztBQUNuQyxnQ0FBZ0Msc0RBQUcsQ0FBQyx5REFBSTtBQUN4QztBQUNBLFNBQVMsZ0JBQWdCLHNEQUFHLENBQUMsd0RBQUc7QUFDaEM7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUssZ0JBQWdCLHNEQUFHLENBQUMsbURBQUk7QUFDN0I7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLDhDQUE4QyxzREFBRyxDQUFDLDJEQUFNO0FBQ3hEO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNFQUFRO0FBQ2hCO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxRQUFRLDBFQUFVO0FBQ2xCO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxRQUFRLGdGQUFhO0FBQ3JCO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxRQUFRLHdGQUFpQjtBQUN6QixDQUFDO0FBQ0Q7QUFDQTtBQUNBLFFBQVEsc0VBQVE7QUFDaEIsQ0FBQztBQUNEO0FBQ0E7QUFDQSxRQUFRLG9GQUFlO0FBQ3ZCLENBQUM7QUFDRDtBQUNBO0FBQ0EsUUFBUSxnRkFBYTtBQUNyQixDQUFDO0FBQ0Q7QUFDQTtBQUNBLFFBQVEsOEZBQW9CO0FBQzVCLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLFNBQVMsOENBQU87QUFDaEI7QUFDQSx3QkFBd0Isc0RBQUcsQ0FBQyxrRUFBVztBQUN2Qyx3QkFBd0Isc0RBQUc7QUFDM0IsMEJBQTBCLDBEQUFXLHNCQUFzQjtBQUMzRCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msc0RBQUcsQ0FBQyxtREFBSTtBQUN4QyxhQUFhLHNFQUFRO0FBQ3JCLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsK0JBQStCLDJDQUFNO0FBQ3JDLFlBQVksMkNBQU07QUFDbEIsWUFBWTtBQUNaLFlBQVksMkNBQU07QUFDbEI7QUFDQTtBQUNBLFFBQVEsc0RBQVc7QUFDbkIsT0FBTztBQUNQO0FBQ0EsNEJBQTRCLHVEQUFJLENBQUMsMkRBQU07QUFDdkM7QUFDQSxrQ0FBa0Msc0RBQUcsQ0FBQyx5REFBSTtBQUMxQztBQUNBLFdBQVcsc0NBQXNDLHNEQUFHLENBQUMsd0RBQUc7QUFDeEQ7QUFDQTtBQUNBLFdBQVcsZ0JBQWdCLHNEQUFHLENBQUMsbURBQUk7QUFDbkM7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxTQUFTLDhDQUFPO0FBQ2hCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELDBCQUEwQixjQUFjO0FBQ3hDLGlCQUFpQiw2REFBYztBQUMvQjtBQUNBO0FBQ0EsSUFBSTtBQUNKLHNDQUFzQywrQ0FBUTtBQUM5QztBQUNBLHdCQUF3QixzREFBRztBQUMzQjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQSxzQkFBc0IsdURBQUksQ0FBQyx1REFBUTtBQUNuQyw0QkFBNEIsc0RBQUc7QUFDL0I7QUFDQTtBQUNBLE9BQU87QUFDUCw2QkFBNkIsdURBQUk7QUFDakM7QUFDQSxnQ0FBZ0Msc0RBQUc7QUFDbkM7QUFDQSxTQUFTLGdCQUFnQixzREFBRztBQUM1QixpQ0FBaUMsdURBQUksQ0FBQyxvREFBSTtBQUMxQztBQUNBO0FBQ0Esb0NBQW9DLHNEQUFHO0FBQ3ZDO0FBQ0EsYUFBYSxnQkFBZ0IsdURBQUksQ0FBQyxnRUFBYztBQUNoRCxzQ0FBc0Msc0RBQUcsQ0FBQyw2REFBWTtBQUN0RDtBQUNBO0FBQ0Esa0JBQWtCLCtDQUFVO0FBQzVCLHdCQUF3QixzREFBVztBQUNuQyxtQkFBbUI7QUFDbkIsaUJBQWlCO0FBQ2pCLHVDQUF1QyxzREFBRyxDQUFDLG1EQUFJO0FBQy9DLHVCQUF1QiwwRUFBVTtBQUNqQyxpQkFBaUI7QUFDakIsZUFBZSxnQkFBZ0Isc0RBQUcsQ0FBQyx5REFBTztBQUMxQztBQUNBO0FBQ0EsZUFBZTtBQUNmLGFBQWE7QUFDYixXQUFXO0FBQ1gsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLLGdCQUFnQixzREFBRztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsc0RBQUc7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsMEJBQTBCLHNEQUFHO0FBQzdCO0FBQ0EsT0FBTztBQUNQO0FBQ0EsMEJBQTBCLHNEQUFHO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsNEJBQTRCLHNEQUFHO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsc0RBQUc7QUFDN0I7QUFDQSxPQUFPO0FBQ1A7QUFDQSwwQkFBMEIsc0RBQUc7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsMEJBQTBCLHNEQUFHO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLDBCQUEwQixzREFBRztBQUM3QjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsMEJBQTBCLHNEQUFHO0FBQzdCO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSwwQkFBMEIsc0RBQUc7QUFDN0I7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLDBCQUEwQixzREFBRztBQUM3QjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsMEJBQTBCLHNEQUFHO0FBQzdCO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSwwQkFBMEIsc0RBQUc7QUFDN0I7QUFDQSxPQUFPO0FBQ1A7QUFDQSwwQkFBMEIsc0RBQUc7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsMEJBQTBCLHNEQUFHO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLDBCQUEwQixzREFBRztBQUM3QjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSwwQkFBMEIsc0RBQUc7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsMEJBQTBCLHNEQUFHO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLDBCQUEwQixzREFBRztBQUM3QjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSLDBCQUEwQixzREFBRztBQUM3QjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsc0JBQXNCLE1BQU07QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksbUlBQW1JLEVBQUU7QUFDekk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FB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U0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQSwwQkFBMEIsc0RBQUc7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsaUVBQWMsQ0FBQyxnRUFBYSxDQUFDLGlFQUFjO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRXdsRyIsInNvdXJjZXMiOlsid2VicGFjazovL0BrZXlzdGF0aWMvdGVtcGxhdGVzLW5leHRqcy8uL25vZGVfbW9kdWxlcy8ucG5wbS9Aa2V5c3RhdGljK2NvcmVAMC4yLjEyX25leHRAMTQuMi4yX3JlYWN0LWRvbUAxOC4yLjBfcmVhY3RAMTguMi4wL25vZGVfbW9kdWxlcy9Aa2V5c3RhdGljL2NvcmUvZGlzdC9pbmRleC1mYmFiMzJmNy5ub2RlLmVzbS5qcz82ODFjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBNYXJrZG9jLCB7IEFzdCB9IGZyb20gJ0BtYXJrZG9jL21hcmtkb2MnO1xuaW1wb3J0IHsgVHJhbnNmb3JtcywgRWRpdG9yLCBOb2RlLCBFbGVtZW50IGFzIEVsZW1lbnQkMSwgVGV4dCBhcyBUZXh0JDEsIFBhdGgsIFJhbmdlLCBQb2ludCwgY3JlYXRlRWRpdG9yIH0gZnJvbSAnc2xhdGUnO1xuaW1wb3J0IHsgYXNzZXJ0TmV2ZXIgYXMgYXNzZXJ0TmV2ZXIkMSwgYXNzZXJ0IGFzIGFzc2VydCQxIH0gZnJvbSAnZW1lcnkvYXNzZXJ0aW9ucyc7XG5pbXBvcnQgeyBhc3NlcnQsIGFzc2VydE5ldmVyLCBpc0RlZmluZWQsIHR5cGVkS2V5cyB9IGZyb20gJ2VtZXJ5JztcbmltcG9ydCB7IGZyb21VaW50OEFycmF5LCB0b1VpbnQ4QXJyYXkgfSBmcm9tICdqcy1iYXNlNjQnO1xuaW1wb3J0IHsgY3JlYXRlSGFzaCB9IGZyb20gJ2NyeXB0byc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZU1lbW8sIHVzZUVmZmVjdCwgdXNlQ29udGV4dCwgY3JlYXRlQ29udGV4dCwgc3RhcnRUcmFuc2l0aW9uLCB1c2VDYWxsYmFjaywgdXNlUmVmLCBjbG9uZUVsZW1lbnQsIGZvcndhcmRSZWYsIHVzZVJlZHVjZXIsIHVzZUlkIGFzIHVzZUlkJDEsIEZyYWdtZW50IGFzIEZyYWdtZW50JDEsIGNyZWF0ZUVsZW1lbnQsIG1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBUZXh0RmllbGQsIFRleHRBcmVhIH0gZnJvbSAnQGtleXN0YXIvdWkvdGV4dC1maWVsZCc7XG5pbXBvcnQgeyBqc3gsIGpzeHMsIEZyYWdtZW50IH0gZnJvbSAncmVhY3QvanN4LXJ1bnRpbWUnO1xuaW1wb3J0IHsgRmllbGRNZXNzYWdlLCBGaWVsZExhYmVsLCBGaWVsZCB9IGZyb20gJ0BrZXlzdGFyL3VpL2ZpZWxkJztcbmltcG9ydCB7IEJveCwgRmxleCwgR3JpZCwgRGl2aWRlciwgVlN0YWNrLCBIU3RhY2ssIFNjcm9sbFZpZXcgYXMgU2Nyb2xsVmlldyQxIH0gZnJvbSAnQGtleXN0YXIvdWkvbGF5b3V0JztcbmltcG9ydCB7IFNwbGl0VmlldywgU3BsaXRQYW5lU2Vjb25kYXJ5LCBTcGxpdFBhbmVQcmltYXJ5IH0gZnJvbSAnQGtleXN0YXIvdWkvc3BsaXQtdmlldyc7XG5pbXBvcnQgeyBjc3MsIGJyZWFrcG9pbnRzLCB1c2VNZWRpYVF1ZXJ5LCB0b2tlblNjaGVtYSwgdHJhbnNpdGlvbiwgdXNlQnJlYWtwb2ludCwgY29udGFpbmVyUXVlcmllcywgdG9EYXRhQXR0cmlidXRlcywgYnJlYWtwb2ludFF1ZXJpZXMsIGNsYXNzTmFtZXMgfSBmcm9tICdAa2V5c3Rhci91aS9zdHlsZSc7XG5pbXBvcnQgeyBUZXh0LCBIZWFkaW5nLCBLYmQsIFByb3NlIH0gZnJvbSAnQGtleXN0YXIvdWkvdHlwb2dyYXBoeSc7XG5pbXBvcnQgeyBCdXR0b25Hcm91cCwgQnV0dG9uLCBBY3Rpb25CdXR0b24sIFRvZ2dsZUJ1dHRvbiwgQ2xlYXJCdXR0b24gfSBmcm9tICdAa2V5c3Rhci91aS9idXR0b24nO1xuaW1wb3J0IHsgRGlhbG9nLCBEaWFsb2dDb250YWluZXIsIERpYWxvZ1RyaWdnZXIsIEFsZXJ0RGlhbG9nLCB1c2VEaWFsb2dDb250YWluZXIgfSBmcm9tICdAa2V5c3Rhci91aS9kaWFsb2cnO1xuaW1wb3J0IHsgdXNlRHJhZ0FuZERyb3AgfSBmcm9tICdAa2V5c3Rhci91aS9kcmFnLWFuZC1kcm9wJztcbmltcG9ydCB7IEljb24gfSBmcm9tICdAa2V5c3Rhci91aS9pY29uJztcbmltcG9ydCB7IHRyYXNoMkljb24gfSBmcm9tICdAa2V5c3Rhci91aS9pY29uL2ljb25zL3RyYXNoMkljb24nO1xuaW1wb3J0IHsgTGlzdFZpZXcsIEl0ZW0gYXMgSXRlbSQyIH0gZnJvbSAnQGtleXN0YXIvdWkvbGlzdC12aWV3JztcbmltcG9ydCB7IENvbnRlbnQsIEZvb3RlciwgQ2xlYXJTbG90cyB9IGZyb20gJ0BrZXlzdGFyL3VpL3Nsb3RzJztcbmltcG9ydCB7IFRvb2x0aXBUcmlnZ2VyLCBUb29sdGlwIH0gZnJvbSAnQGtleXN0YXIvdWkvdG9vbHRpcCc7XG5pbXBvcnQgeyB1c2VMb2NhbGl6ZWRTdHJpbmdGb3JtYXR0ZXIsIHVzZUxvY2FsZSB9IGZyb20gJ0ByZWFjdC1hcmlhL2kxOG4nO1xuaW1wb3J0IHsgUmVhY3RFZGl0b3IsIHVzZVNlbGVjdGVkLCB1c2VTbGF0ZVN0YXRpYywgdXNlU2xhdGUsIFNsYXRlLCBFZGl0YWJsZSwgd2l0aFJlYWN0IH0gZnJvbSAnc2xhdGUtcmVhY3QnO1xuaW1wb3J0IGlzSG90a2V5IGZyb20gJ2lzLWhvdGtleSc7XG5pbXBvcnQgeyB1c2VSZXNpemVPYnNlcnZlciwgdXNlTGF5b3V0RWZmZWN0LCBtZXJnZVByb3BzLCB1c2VVcGRhdGVFZmZlY3QgfSBmcm9tICdAcmVhY3QtYXJpYS91dGlscyc7XG5pbXBvcnQgeyBlZGl0SWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvZWRpdEljb24nO1xuaW1wb3J0IHsgZXh0ZXJuYWxMaW5rSWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvZXh0ZXJuYWxMaW5rSWNvbic7XG5pbXBvcnQgeyBsaW5rSWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvbGlua0ljb24nO1xuaW1wb3J0IHsgdW5saW5rSWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvdW5saW5rSWNvbic7XG5pbXBvcnQgeyB1c2VPdmVybGF5LCB1c2VPdmVybGF5UG9zaXRpb24sIHVzZU1vZGFsT3ZlcmxheSwgRGlzbWlzc0J1dHRvbiwgdXNlT3ZlcmxheVRyaWdnZXIgfSBmcm9tICdAcmVhY3QtYXJpYS9vdmVybGF5cyc7XG5pbXBvcnQgeyB1c2VPdmVybGF5VHJpZ2dlclN0YXRlIH0gZnJvbSAnQHJlYWN0LXN0YXRlbHkvb3ZlcmxheXMnO1xuaW1wb3J0IHsgT3ZlcmxheSwgQmxhbmtldCwgUG9wb3ZlciB9IGZyb20gJ0BrZXlzdGFyL3VpL292ZXJsYXlzJztcbmltcG9ydCB7IHNhbml0aXplVXJsIH0gZnJvbSAnQGJyYWludHJlZS9zYW5pdGl6ZS11cmwnO1xuaW1wb3J0IHsgSXRlbSBhcyBJdGVtJDMsIEFjdGlvbkdyb3VwIH0gZnJvbSAnQGtleXN0YXIvdWkvYWN0aW9uLWdyb3VwJztcbmltcG9ydCB7IGJvbGRJY29uIH0gZnJvbSAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9ib2xkSWNvbic7XG5pbXBvcnQgeyBjaGV2cm9uRG93bkljb24gfSBmcm9tICdAa2V5c3Rhci91aS9pY29uL2ljb25zL2NoZXZyb25Eb3duSWNvbic7XG5pbXBvcnQgeyBjb2RlSWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvY29kZUljb24nO1xuaW1wb3J0IHsgaXRhbGljSWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvaXRhbGljSWNvbic7XG5pbXBvcnQgeyBtYXhpbWl6ZUljb24gfSBmcm9tICdAa2V5c3Rhci91aS9pY29uL2ljb25zL21heGltaXplSWNvbic7XG5pbXBvcnQgeyBtaW5pbWl6ZUljb24gfSBmcm9tICdAa2V5c3Rhci91aS9pY29uL2ljb25zL21pbmltaXplSWNvbic7XG5pbXBvcnQgeyBwbHVzSWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvcGx1c0ljb24nO1xuaW1wb3J0IHsgcmVtb3ZlRm9ybWF0dGluZ0ljb24gfSBmcm9tICdAa2V5c3Rhci91aS9pY29uL2ljb25zL3JlbW92ZUZvcm1hdHRpbmdJY29uJztcbmltcG9ydCB7IHN0cmlrZXRocm91Z2hJY29uIH0gZnJvbSAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9zdHJpa2V0aHJvdWdoSWNvbic7XG5pbXBvcnQgeyBzdWJzY3JpcHRJY29uIH0gZnJvbSAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9zdWJzY3JpcHRJY29uJztcbmltcG9ydCB7IHN1cGVyc2NyaXB0SWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvc3VwZXJzY3JpcHRJY29uJztcbmltcG9ydCB7IHR5cGVJY29uIH0gZnJvbSAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy90eXBlSWNvbic7XG5pbXBvcnQgeyB1bmRlcmxpbmVJY29uIH0gZnJvbSAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy91bmRlcmxpbmVJY29uJztcbmltcG9ydCB7IE1lbnVUcmlnZ2VyLCBNZW51LCBBY3Rpb25NZW51LCBJdGVtIGFzIEl0ZW0kNCB9IGZyb20gJ0BrZXlzdGFyL3VpL21lbnUnO1xuaW1wb3J0IHsgUGlja2VyIH0gZnJvbSAnQGtleXN0YXIvdWkvcGlja2VyJztcbmltcG9ydCB7IGFsaWduTGVmdEljb24gfSBmcm9tICdAa2V5c3Rhci91aS9pY29uL2ljb25zL2FsaWduTGVmdEljb24nO1xuaW1wb3J0IHsgYWxpZ25SaWdodEljb24gfSBmcm9tICdAa2V5c3Rhci91aS9pY29uL2ljb25zL2FsaWduUmlnaHRJY29uJztcbmltcG9ydCB7IGFsaWduQ2VudGVySWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvYWxpZ25DZW50ZXJJY29uJztcbmltcG9ydCB7IHF1b3RlSWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvcXVvdGVJY29uJztcbmltcG9ydCB7IEl0ZW0gYXMgSXRlbSQxLCBTZWN0aW9uIH0gZnJvbSAnQHJlYWN0LXN0YXRlbHkvY29sbGVjdGlvbnMnO1xuaW1wb3J0IHsgbWF0Y2hTb3J0ZXIgfSBmcm9tICdtYXRjaC1zb3J0ZXInO1xuaW1wb3J0IHsgQ29tYm9ib3gsIEl0ZW0gfSBmcm9tICdAa2V5c3Rhci91aS9jb21ib2JveCc7XG5pbXBvcnQgeyB0cmFzaEljb24gfSBmcm9tICdAa2V5c3Rhci91aS9pY29uL2ljb25zL3RyYXNoSWNvbic7XG5pbXBvcnQgd2Vha01lbW9pemUgZnJvbSAnQGVtb3Rpb24vd2Vhay1tZW1vaXplJztcbmltcG9ydCB7IG1pbnVzSWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvbWludXNJY29uJztcbmltcG9ydCB7IGNvbHVtbnNJY29uIH0gZnJvbSAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9jb2x1bW5zSWNvbic7XG5pbXBvcnQgeyBsaXN0SWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvbGlzdEljb24nO1xuaW1wb3J0IHsgbGlzdE9yZGVyZWRJY29uIH0gZnJvbSAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9saXN0T3JkZXJlZEljb24nO1xuaW1wb3J0IHsgZmlsZVVwSWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvZmlsZVVwSWNvbic7XG5pbXBvcnQgeyBpbWFnZUljb24gfSBmcm9tICdAa2V5c3Rhci91aS9pY29uL2ljb25zL2ltYWdlSWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2NoZWNrYm94JztcbmltcG9ydCB7IE51bWJlckZpZWxkIH0gZnJvbSAnQGtleXN0YXIvdWkvbnVtYmVyLWZpZWxkJztcbmltcG9ydCAnbWluaW1hdGNoJztcbmltcG9ydCB7IGdxbCB9IGZyb20gJ0B0cy1ncWwvdGFnL25vLXRyYW5zZm9ybSc7XG5pbXBvcnQgeyB1c2VRdWVyeSwgdXNlTXV0YXRpb24gfSBmcm9tICd1cnFsJztcbmltcG9ydCBMUlUgZnJvbSAnbHJ1LWNhY2hlJztcbmltcG9ydCB7IHBhcnNlIH0gZnJvbSAnY29va2llJztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0ICdAc2luZHJlc29yaHVzL3NsdWdpZnknO1xuaW1wb3J0IHsgVGV4dExpbmsgfSBmcm9tICdAa2V5c3Rhci91aS9saW5rJztcbmltcG9ydCB7IFByb2dyZXNzQ2lyY2xlIH0gZnJvbSAnQGtleXN0YXIvdWkvcHJvZ3Jlc3MnO1xuaW1wb3J0IHsgbGluazJJY29uIH0gZnJvbSAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9saW5rMkljb24nO1xuaW1wb3J0IHsgbGluazJPZmZJY29uIH0gZnJvbSAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9saW5rMk9mZkljb24nO1xuaW1wb3J0IHsgcGVuY2lsSWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvcGVuY2lsSWNvbic7XG5pbXBvcnQgeyB1bmRvMkljb24gfSBmcm9tICdAa2V5c3Rhci91aS9pY29uL2ljb25zL3VuZG8ySWNvbic7XG5pbXBvcnQgeyB1c2VJZCwgdXNlUHJldmlvdXMgYXMgdXNlUHJldmlvdXMkMSB9IGZyb20gJ0BrZXlzdGFyL3VpL3V0aWxzJztcbmltcG9ydCB7IHNoZWV0SWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvc2hlZXRJY29uJztcbmltcG9ydCB7IHRhYmxlSWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvdGFibGVJY29uJztcbmltcG9ydCBzY3JvbGxJbnRvVmlldyBmcm9tICdzY3JvbGwtaW50by12aWV3LWlmLW5lZWRlZCc7XG5pbXBvcnQgeyB1c2VMaXN0U3RhdGUgfSBmcm9tICdAcmVhY3Qtc3RhdGVseS9saXN0JztcbmltcG9ydCB7IEl0ZW0gYXMgSXRlbSQ1LCB1c2VMaXN0Qm94TGF5b3V0LCBMaXN0Qm94QmFzZSB9IGZyb20gJ0BrZXlzdGFyL3VpL2xpc3Rib3gnO1xuaW1wb3J0IHsgd2l0aEhpc3RvcnkgfSBmcm9tICdzbGF0ZS1oaXN0b3J5JztcbmltcG9ydCBtZEFTVFV0aWxGcm9tTWFya2Rvd24gZnJvbSAnbWRhc3QtdXRpbC1mcm9tLW1hcmtkb3duJztcbmltcG9ydCBhdXRvTGlua0xpdGVyYWxGcm9tTWFya2Rvd25FeHRlbnNpb24gZnJvbSAnbWRhc3QtdXRpbC1nZm0tYXV0b2xpbmstbGl0ZXJhbC9mcm9tLW1hcmtkb3duJztcbmltcG9ydCBhdXRvTGlua0xpdGVyYWxNYXJrZG93blN5bnRheCBmcm9tICdtaWNyb21hcmstZXh0ZW5zaW9uLWdmbS1hdXRvbGluay1saXRlcmFsJztcbmltcG9ydCBnZm1TdHJpa2V0aHJvdWdoRnJvbU1hcmtkb3duRXh0ZW5zaW9uIGZyb20gJ21kYXN0LXV0aWwtZ2ZtLXN0cmlrZXRocm91Z2gvZnJvbS1tYXJrZG93bic7XG5pbXBvcnQgZ2ZtU3RyaWtldGhyb3VnaE1hcmtkb3duU3ludGF4IGZyb20gJ21pY3JvbWFyay1leHRlbnNpb24tZ2ZtLXN0cmlrZXRocm91Z2gnO1xuaW1wb3J0IHsgcGFuZWxMZWZ0T3Blbkljb24gfSBmcm9tICdAa2V5c3Rhci91aS9pY29uL2ljb25zL3BhbmVsTGVmdE9wZW5JY29uJztcbmltcG9ydCB7IHBhbmVsTGVmdENsb3NlSWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvcGFuZWxMZWZ0Q2xvc2VJY29uJztcbmltcG9ydCB7IHBhbmVsUmlnaHRPcGVuSWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvcGFuZWxSaWdodE9wZW5JY29uJztcbmltcG9ydCB7IHBhbmVsUmlnaHRDbG9zZUljb24gfSBmcm9tICdAa2V5c3Rhci91aS9pY29uL2ljb25zL3BhbmVsUmlnaHRDbG9zZUljb24nO1xuaW1wb3J0IHsgQmFkZ2UgfSBmcm9tICdAa2V5c3Rhci91aS9iYWRnZSc7XG5pbXBvcnQgeyBOYXZMaXN0LCBOYXZJdGVtLCBOYXZHcm91cCB9IGZyb20gJ0BrZXlzdGFyL3VpL25hdi1saXN0JztcbmltcG9ydCB7IFN0YXR1c0xpZ2h0IH0gZnJvbSAnQGtleXN0YXIvdWkvc3RhdHVzLWxpZ2h0JztcbmltcG9ydCB7IHVzZVByb3ZpZGVyIH0gZnJvbSAnQGtleXN0YXIvdWkvY29yZSc7XG5pbXBvcnQgeyBBdmF0YXIgfSBmcm9tICdAa2V5c3Rhci91aS9hdmF0YXInO1xuaW1wb3J0IHsgbG9nT3V0SWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvbG9nT3V0SWNvbic7XG5pbXBvcnQgeyBnaXRQdWxsUmVxdWVzdEljb24gfSBmcm9tICdAa2V5c3Rhci91aS9pY29uL2ljb25zL2dpdFB1bGxSZXF1ZXN0SWNvbic7XG5pbXBvcnQgeyBnaXRCcmFuY2hQbHVzSWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvZ2l0QnJhbmNoUGx1c0ljb24nO1xuaW1wb3J0IHsgZ2l0aHViSWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvZ2l0aHViSWNvbic7XG5pbXBvcnQgeyBnaXRGb3JrSWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvZ2l0Rm9ya0ljb24nO1xuaW1wb3J0IHsgbW9uaXRvckljb24gfSBmcm9tICdAa2V5c3Rhci91aS9pY29uL2ljb25zL21vbml0b3JJY29uJztcbmltcG9ydCB7IG1vb25JY29uIH0gZnJvbSAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9tb29uSWNvbic7XG5pbXBvcnQgeyBzdW5JY29uIH0gZnJvbSAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9zdW5JY29uJztcbmltcG9ydCB7IHVzZXJJY29uIH0gZnJvbSAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy91c2VySWNvbic7XG5pbXBvcnQgeyBnaXRCcmFuY2hJY29uIH0gZnJvbSAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9naXRCcmFuY2hJY29uJztcbmltcG9ydCB7IFJhZGlvR3JvdXAsIFJhZGlvIH0gZnJvbSAnQGtleXN0YXIvdWkvcmFkaW8nO1xuXG52YXIgbDEwbk1lc3NhZ2VzID0ge1xuXHRcImZyLUZSXCI6IHtcblx0XHRiYXNlZE9uOiBcIkJhc8OpIHN1clwiLFxuXHRcdGFkZDogXCJBam91dGVyXCIsXG5cdFx0YnJhbmNoTmFtZTogXCJOb20gZGUgbGEgZmlsaWFsZVwiLFxuXHRcdGJyYW5jaGVzOiBcIkJyYW5jaGVzXCIsXG5cdFx0Y2FuY2VsOiBcIkFubnVsZXJcIixcblx0XHRjbGVhcjogXCJFZmZhY2VyXCIsXG5cdFx0Y29sbGVjdGlvbnM6IFwiQ29sbGVjdGlvbnNcIixcblx0XHRjb2xsZWN0aW9uOiBcIkNvbGxlY3Rpb25cIixcblx0XHRjcmVhdGU6IFwiQ3LDqWVyXCIsXG5cdFx0Y3JlYXRlUHVsbFJlcXVlc3Q6IFwiQ3LDqWVyIHVuZSBkZW1hbmRlIGQnZXh0cmFjdGlvblwiLFxuXHRcdGRhc2hib2FyZDogXCJUYWJsZWF1IGRlIGJvcmRcIixcblx0XHRjdXJyZW50QnJhbmNoOiBcIlN1Y2N1cnNhbGUgYWN0dWVsbGVcIixcblx0XHRkZWZhdWx0QnJhbmNoOiBcIkJyYW5jaGUgcGFyIGTDqWZhdXRcIixcblx0XHRkZWxldGVCcmFuY2g6IFwiU3VwcHJpbWVyIGxhIGJyYW5jaGVcIixcblx0XHRcImRlbGV0ZVwiOiBcIlN1cHByaW1lclwiLFxuXHRcdGVkaXQ6IFwiTW9kaWZpZXJcIixcblx0XHRsb2FkaW5nOiBcIkNoYXJnZW1lbnQgZW4gY291cnNcIixcblx0XHRuZXdCcmFuY2g6IFwiTm91dmVsbGUgYnJhbmNoZVwiLFxuXHRcdG90aGVyQnJhbmNoZXM6IFwiQXV0cmVzIHN1Y2N1cnNhbGVzXCIsXG5cdFx0c2F2ZTogXCJTYXV2ZWdhcmRlclwiLFxuXHRcdHB1bGxSZXF1ZXN0czogXCJEZW1hbmRlcyBkJ2V4dHJhY3Rpb25cIixcblx0XHRzZWFyY2g6IFwiUmVjaGVyY2hlclwiLFxuXHRcdHNpbmdsZXRvbjogXCJTaW5nbGV0b25cIixcblx0XHRzaW5nbGV0b25zOiBcIkPDqWxpYmF0YWlyZXNcIixcblx0XHR0aGVDdXJyZW50bHlDaGVja2VkT3V0QnJhbmNoOiBcIkxhIGJyYW5jaGUgYWN0dWVsbGVtZW50IGV4dHJhaXRlLiBDaG9pc2lzc2V6IGNldHRlIG9wdGlvbiBzaSB2b3VzIGRldmV6IHZvdXMgYXBwdXllciBzdXIgbGUgdHJhdmFpbCBleGlzdGFudCBkZSBsYSBicmFuY2hlIGFjdHVlbGxlLlwiLFxuXHRcdHZpZXdQdWxsUmVxdWVzdHM6IFwiQWZmaWNoZXIgbGVzIGRlbWFuZGVzIGQnZXh0cmFjdGlvblwiLFxuXHRcdHRoZURlZmF1bHRCcmFuY2hJbllvdXJSZXBvc2l0b3J5OiBcIkxhIGJyYW5jaGUgcGFyIGTDqWZhdXQgZGUgdm90cmUgcsOpZsOpcmVudGllbC4gQ2hvaXNpc3NleiBjZWNpIHBvdXIgY29tbWVuY2VyIHF1ZWxxdWUgY2hvc2UgZGUgbm91dmVhdSBxdWkgbmUgZMOpcGVuZCBwYXMgZGUgdm90cmUgYnJhbmNoZSBhY3R1ZWxsZS5cIlxuXHR9LFxuXHRcImhlLUlMXCI6IHtcblx0XHRhZGQ6IFwi15zWsNeU15XWudeh1rTXmdejXCIsXG5cdFx0YmFzZWRPbjogXCLXnteR15XXodehINei15xcIixcblx0XHRicmFuY2hOYW1lOiBcItep150g15TXodeg15nXo1wiLFxuXHRcdGJyYW5jaGVzOiBcItei16DXpNeZ151cIixcblx0XHRjYW5jZWw6IFwi15zWsNeR1rfXmNa115xcIixcblx0XHRjbGVhcjogXCLXoNen15lcIixcblx0XHRjb2xsZWN0aW9uOiBcIteQ15XXodejXCIsXG5cdFx0Y29sbGVjdGlvbnM6IFwi15DXldeh16TXmdedXCIsXG5cdFx0Y3JlYXRlOiBcItec1rTXmdem15XWudeoXCIsXG5cdFx0Y3JlYXRlUHVsbFJlcXVlc3Q6IFwi16bXldeoINeR16fXqdeqINee16nXmdeb15RcIixcblx0XHRjdXJyZW50QnJhbmNoOiBcIteh16DXmdejINeg15XXm9eX15lcIixcblx0XHRkYXNoYm9hcmQ6IFwi15zXlda815fWtyDXnta315fXldeV1rjXoNa015nXnVwiLFxuXHRcdGRlZmF1bHRCcmFuY2g6IFwi16HXoNeZ16Mg15HXqNeZ16jXqiDXnteX15PXnFwiLFxuXHRcdFwiZGVsZXRlXCI6IFwi15zWtNee1rDXl9eV1rnXp1wiLFxuXHRcdGRlbGV0ZUJyYW5jaDogXCLXnteX16cg16HXoNeZ16NcIixcblx0XHRlZGl0OiBcItec1rfXotay16jXlda515pcIixcblx0XHRsb2FkaW5nOiBcIteY15XXotefXCIsXG5cdFx0bmV3QnJhbmNoOiBcIteh16DXmdejINeX15PXqVwiLFxuXHRcdG90aGVyQnJhbmNoZXM6IFwi16HXoNeZ16TXmdedINeQ15fXqNeZ151cIixcblx0XHRzYXZlOiBcItec15TXpteZ15xcIixcblx0XHRwdWxsUmVxdWVzdHM6IFwi157XqdeV15og15HXp9ep15XXqlwiLFxuXHRcdHNlYXJjaDogXCLXl9ek16lcIixcblx0XHRzaW5nbGV0b246IFwi16fWsNec1rjXoyDXkda815XWudeT1rXXk1wiLFxuXHRcdHNpbmdsZXRvbnM6IFwi16jXldeV16fXmdedXCIsXG5cdFx0dGhlQ3VycmVudGx5Q2hlY2tlZE91dEJyYW5jaDogXCLXlNeh16DXmdejINep16DXp9eR16Ig15vXoteqLiDXkdeX16gg15HXkNek16nXqNeV16og15bXlSDXkNedINeQ16rXlCDXpteo15nXmiDXnNeR16DXldeqINei15wg16LXkdeV15PXlCDXp9eZ15nXnteqINee15TXodeg15nXoyDXlNeg15XXm9eX15kuXCIsXG5cdFx0dGhlRGVmYXVsdEJyYW5jaEluWW91clJlcG9zaXRvcnk6IFwi16HXoNeZ16Mg15HXqNeZ16jXqiDXlNee15fXk9ecINeR157XkNeS16gg16nXnNeaLiDXkdeX16gg15HXkNek16nXqNeV16og15bXlSDXm9eT15kg15zXlNeq15fXmdecINee16nXlNeVINeX15PXqSDXqdeQ15nXoNeVINeq15zXldeZINeR16HXoNeZ16Mg15TXoNeV15vXl9eZINep15zXmi5cIixcblx0XHR2aWV3UHVsbFJlcXVlc3RzOiBcIteU16bXkiDXkden16nXldeqINee16nXmdeb15RcIlxuXHR9LFxuXHRcImhyLUhSXCI6IHtcblx0XHRhZGQ6IFwiRG9kYXRpXCIsXG5cdFx0YmFzZWRPbjogXCJOYSB0ZW1lbGp1XCIsXG5cdFx0YnJhbmNoZXM6IFwiUG9kcnXFvm5pY2VcIixcblx0XHRicmFuY2hOYW1lOiBcIk5heml2IHBvZHJ1xb5uaWNlXCIsXG5cdFx0Y2FuY2VsOiBcIk90a2F6YXRpXCIsXG5cdFx0Y29sbGVjdGlvbjogXCJLb2xla2NpamFcIixcblx0XHRjbGVhcjogXCJJemJyacWhaVwiLFxuXHRcdGNvbGxlY3Rpb25zOiBcIlpiaXJrZVwiLFxuXHRcdGNyZWF0ZTogXCJTdHZvcml0aVwiLFxuXHRcdGNyZWF0ZVB1bGxSZXF1ZXN0OiBcIktyZWlyYWp0ZSB6YWh0amV2IHphIHBvdmxhxI1lbmplbVwiLFxuXHRcdGN1cnJlbnRCcmFuY2g6IFwiVHJlbnV0bmEgZ3JhbmFcIixcblx0XHRkZWZhdWx0QnJhbmNoOiBcIlphZGFuYSBncmFuYVwiLFxuXHRcdGRhc2hib2FyZDogXCJOYWR6b3JuYSBwbG/EjWFcIixcblx0XHRcImRlbGV0ZVwiOiBcIkl6YnJpc2F0aVwiLFxuXHRcdGVkaXQ6IFwiVXJlZGlcIixcblx0XHRkZWxldGVCcmFuY2g6IFwiSXpicmnFoWkgZ3JhbnVcIixcblx0XHRsb2FkaW5nOiBcIlXEjWl0YXZhbVwiLFxuXHRcdG5ld0JyYW5jaDogXCJOb3ZhIGdyYW5hXCIsXG5cdFx0b3RoZXJCcmFuY2hlczogXCJPc3RhbGUgZ3JhbmVcIixcblx0XHRwdWxsUmVxdWVzdHM6IFwiWmFodGpldmkgemEgcG92bGHEjWVuamVtXCIsXG5cdFx0c2VhcmNoOiBcIlRyYcW+aVwiLFxuXHRcdHNhdmU6IFwiVcWhdGVkamV0aVwiLFxuXHRcdHNpbmdsZXRvbjogXCJzYW1hY1wiLFxuXHRcdHNpbmdsZXRvbnM6IFwiU2FtY2lcIixcblx0XHR0aGVDdXJyZW50bHlDaGVja2VkT3V0QnJhbmNoOiBcIlRyZW51dG5vIG9kamF2bGplbmEgcG9zbG92bmljYS4gT2RhYmVyaXRlIG92byBha28gdHJlYmF0ZSBncmFkaXRpIG5hIHBvc3RvamXEh2VtIHJhZHUgaXogdHJlbnV0bmUgZ3JhbmUuXCIsXG5cdFx0dGhlRGVmYXVsdEJyYW5jaEluWW91clJlcG9zaXRvcnk6IFwiWmFkYW5hIGdyYW5hIHUgdmHFoWVtIHNwcmVtacWhdHUuIE9kYWJlcml0ZSBvdm8gZGEgemFwb8SNbmV0ZSBuZcWhdG8gbm92byDFoXRvIG5lIG92aXNpIG8gdmHFoW9qIHRyZW51dG5vaiBncmFuaS5cIixcblx0XHR2aWV3UHVsbFJlcXVlc3RzOiBcIlByZWdsZWRhanRlIHphaHRqZXZlIHphIHBvdmxhxI1lbmplbVwiXG5cdH0sXG5cdFwiaHUtSFVcIjoge1xuXHRcdGFkZDogXCJIb3p6w6FhZMOhc1wiLFxuXHRcdGJhc2VkT246IFwiQWxhcGrDoW5cIixcblx0XHRicmFuY2hlczogXCLDgWdha1wiLFxuXHRcdGJyYW5jaE5hbWU6IFwiRmnDs2sgbmV2ZVwiLFxuXHRcdGNhbmNlbDogXCJNZWdzesO8bnRldGlcIixcblx0XHRjbGVhcjogXCJUw7ZybMOpc1wiLFxuXHRcdGNvbGxlY3Rpb246IFwiR3nFsWp0ZW3DqW55XCIsXG5cdFx0Y29sbGVjdGlvbnM6IFwiR3nFsWp0ZW3DqW55ZWtcIixcblx0XHRjcmVhdGU6IFwiVGVyZW10XCIsXG5cdFx0Y3JlYXRlUHVsbFJlcXVlc3Q6IFwiTGVow612w6FzaSBrw6lyZWxlbSBsw6l0cmVob3rDoXNhXCIsXG5cdFx0Y3VycmVudEJyYW5jaDogXCJKZWxlbmxlZ2kgw6FnXCIsXG5cdFx0ZGFzaGJvYXJkOiBcIklyw6FuecOtdMOzcHVsdFwiLFxuXHRcdGRlZmF1bHRCcmFuY2g6IFwiQWxhcMOpcnRlbG1lemV0dCDDoWdcIixcblx0XHRcImRlbGV0ZVwiOiBcIlTDtnLDtmxcIixcblx0XHRlZGl0OiBcIlN6ZXJrZXN6dMOpc1wiLFxuXHRcdGRlbGV0ZUJyYW5jaDogXCJFbMOhZ2F6w6FzIHTDtnJsw6lzZVwiLFxuXHRcdGxvYWRpbmc6IFwiQmV0w7ZsdMOpcyBmb2x5YW1hdGJhblwiLFxuXHRcdG90aGVyQnJhbmNoZXM6IFwiRWd5w6liIMOhZ2FrXCIsXG5cdFx0bmV3QnJhbmNoOiBcIsOaaiDDoWdcIixcblx0XHRwdWxsUmVxdWVzdHM6IFwiTGVow612w6FzaSBrw6lyw6lzZWtcIixcblx0XHRzYXZlOiBcIk1lZ21lbnRcIixcblx0XHRzaW5nbGV0b246IFwic3ppbmdsaVwiLFxuXHRcdHNlYXJjaDogXCJLZXJlc8Opc1wiLFxuXHRcdHRoZUN1cnJlbnRseUNoZWNrZWRPdXRCcmFuY2g6IFwiQSBqZWxlbmxlZyBraXZldHQgZmnDs2suIFbDoWxhc3N6YSBlenQsIGhhIGF6IGFrdHXDoWxpcyDDoWcgbWVnbMOpdsWRIG11bmvDoWrDoXJhIGtlbGwgw6lww610ZW5pZS5cIixcblx0XHRzaW5nbGV0b25zOiBcIlNpbmdsZXRvbnNcIixcblx0XHR0aGVEZWZhdWx0QnJhbmNoSW5Zb3VyUmVwb3NpdG9yeTogXCJBeiBhbGFww6lydGVsbWV6ZXR0IMOhZyBheiBhZGF0dMOhcmJhbi4gVsOhbGFzc3phIGV6dCwgaGEgdmFsYW1pIMO6amF0IHN6ZXJldG5lIGluZMOtdGFuaSwgYW1lbHkgbmVtIGbDvGdnIGF6IGFrdHXDoWxpcyDDoWd0w7NsLlwiLFxuXHRcdHZpZXdQdWxsUmVxdWVzdHM6IFwiTGVow612w6FzaSBrw6lyZWxtZWsgbWVndGVraW50w6lzZVwiXG5cdH0sXG5cdFwiaXQtSVRcIjoge1xuXHRcdGJhc2VkT246IFwiQmFzYXRvIHN1XCIsXG5cdFx0YWRkOiBcIkFnZ2l1bmdlcmVcIixcblx0XHRicmFuY2hOYW1lOiBcIk5vbWUgcmFtb1wiLFxuXHRcdGJyYW5jaGVzOiBcIlJhbWlcIixcblx0XHRjYW5jZWw6IFwiQW5udWxsYVwiLFxuXHRcdGNsZWFyOiBcIkNhbmNlbGxhXCIsXG5cdFx0Y29sbGVjdGlvbjogXCJDb2xsZXppb25lXCIsXG5cdFx0Y29sbGVjdGlvbnM6IFwiQ29sbGV6aW9uaVwiLFxuXHRcdGNyZWF0ZVB1bGxSZXF1ZXN0OiBcIkNyZWEgcmljaGllc3RhIHB1bGxcIixcblx0XHRjcmVhdGU6IFwiQ3JlYXJlXCIsXG5cdFx0Y3VycmVudEJyYW5jaDogXCJSYW1vIGF0dHVhbGVcIixcblx0XHRkZWZhdWx0QnJhbmNoOiBcIlJhbW8gcHJlZGVmaW5pdG9cIixcblx0XHRkYXNoYm9hcmQ6IFwiUGFubmVsbG8gZGkgY29udHJvbGxvXCIsXG5cdFx0XCJkZWxldGVcIjogXCJFbGltaW5hcmVcIixcblx0XHRkZWxldGVCcmFuY2g6IFwiRWxpbWluYSByYW1vXCIsXG5cdFx0ZWRpdDogXCJNb2RpZmljYXJlXCIsXG5cdFx0bG9hZGluZzogXCJDYXJpY2FtZW50byBpbiBjb3Jzb1wiLFxuXHRcdG5ld0JyYW5jaDogXCJOdW92YSBmaWxpYWxlXCIsXG5cdFx0b3RoZXJCcmFuY2hlczogXCJBbHRyaSByYW1pXCIsXG5cdFx0cHVsbFJlcXVlc3RzOiBcIlJpY2hpZXN0ZSBwdWxsXCIsXG5cdFx0c2F2ZTogXCJTYWx2YVwiLFxuXHRcdHNlYXJjaDogXCJDZXJjYVwiLFxuXHRcdHNpbmdsZXRvbjogXCJTaW5nbGV0b25cIixcblx0XHRzaW5nbGV0b25zOiBcIlNpbmdsZXRvbnNcIixcblx0XHR0aGVDdXJyZW50bHlDaGVja2VkT3V0QnJhbmNoOiBcIkxhIGZpbGlhbGUgYXR0dWFsbWVudGUgdmVyaWZpY2F0YS4gU2NlZ2xpIHF1ZXN0YSBvcHppb25lIHNlIGRldmkgYmFzYXJ0aSBzdSB1biBsYXZvcm8gZXNpc3RlbnRlIGRhbCByYW1vIGNvcnJlbnRlLlwiLFxuXHRcdHRoZURlZmF1bHRCcmFuY2hJbllvdXJSZXBvc2l0b3J5OiBcIklsIHJhbW8gcHJlZGVmaW5pdG8gbmVsIHR1byByZXBvc2l0b3J5LiBTY2VnbGkgcXVlc3RhIG9wemlvbmUgcGVyIGluaXppYXJlIHF1YWxjb3NhIGRpIG51b3ZvIGNoZSBub24gZGlwZW5kYSBkYWwgdHVvIHJhbW8gYXR0dWFsZS5cIixcblx0XHR2aWV3UHVsbFJlcXVlc3RzOiBcIlZpc3VhbGl6emEgbGUgcmljaGllc3RlIHB1bGxcIlxuXHR9LFxuXHRcImphLUpQXCI6IHtcblx0XHRhZGQ6IFwi6L+95YqgXCIsXG5cdFx0YmFzZWRPbjogXCLjgavln7rjgaXjgY9cIixcblx0XHRicmFuY2hOYW1lOiBcIuaUr+W6l+WQjVwiLFxuXHRcdGNhbmNlbDogXCLjgq3jg6Pjg7Pjgrvjg6tcIixcblx0XHRicmFuY2hlczogXCLmlK/lupdcIixcblx0XHRjbGVhcjogXCLjgq/jg6rjgqJcIixcblx0XHRjb2xsZWN0aW9uOiBcIuOCs+ODrOOCr+OCt+ODp+ODs1wiLFxuXHRcdGNvbGxlY3Rpb25zOiBcIuOCs+ODrOOCr+OCt+ODp+ODs1wiLFxuXHRcdGNyZWF0ZTogXCLkvZzmiJBcIixcblx0XHRjcmVhdGVQdWxsUmVxdWVzdDogXCLjg5fjg6vjg6rjgq/jgqjjgrnjg4jjgpLkvZzmiJBcIixcblx0XHRjdXJyZW50QnJhbmNoOiBcIuePvuWcqOOBruODluODqeODs+ODgVwiLFxuXHRcdGRhc2hib2FyZDogXCLjg4Djg4Pjgrfjg6Xjg5zjg7zjg4lcIixcblx0XHRcImRlbGV0ZVwiOiBcIua2iOWOu1wiLFxuXHRcdGRlZmF1bHRCcmFuY2g6IFwi44OH44OV44Kp44Or44OI44Gu44OW44Op44Oz44OBXCIsXG5cdFx0ZWRpdDogXCLnt6jpm4ZcIixcblx0XHRkZWxldGVCcmFuY2g6IFwi44OW44Op44Oz44OB44KS5YmK6ZmkXCIsXG5cdFx0bG9hZGluZzogXCLoqq3jgb/ovrzjgb/kuK1cIixcblx0XHRvdGhlckJyYW5jaGVzOiBcIuOBneOBruS7luOBruaUr+W6l1wiLFxuXHRcdG5ld0JyYW5jaDogXCLmlrDjgZfjgYTmlK/lupdcIixcblx0XHRwdWxsUmVxdWVzdHM6IFwi44OX44Or44Oq44Kv44Ko44K544OIXCIsXG5cdFx0c2F2ZTogXCLkv53lrZhcIixcblx0XHRzZWFyY2g6IFwi5qSc57SiXCIsXG5cdFx0c2luZ2xldG9uOiBcIuOCt+ODs+OCsOODq+ODiOODs1wiLFxuXHRcdHNpbmdsZXRvbnM6IFwi44K344Oz44Kw44Or44OI44OzXCIsXG5cdFx0dGhlQ3VycmVudGx5Q2hlY2tlZE91dEJyYW5jaDogXCLnj77lnKjjg4Hjgqfjg4Pjgq/jgqLjgqbjg4jjgZXjgozjgabjgYTjgovjg5bjg6njg7Pjg4HjgIIg54++5Zyo44Gu44OW44Op44Oz44OB44Gu5pei5a2Y44Gu5L2c5qWt44Gr5Z+644Gl44GE44Gm5qeL56+J44GZ44KL5b+F6KaB44GM44GC44KL5aC05ZCI44Gv44CB44GT44KM44KS6YG45oqe44GX44Gm44GP44Gg44GV44GE44CCXCIsXG5cdFx0dGhlRGVmYXVsdEJyYW5jaEluWW91clJlcG9zaXRvcnk6IFwi44Oq44Od44K444OI44Oq44Gu44OH44OV44Kp44Or44OIIOODluODqeODs+ODgeOAgiDjgZPjgozjgpLpgbjmip7jgZfjgabjgIHnj77lnKjjga7jg5bjg6njg7Pjg4Hjgavkvp3lrZjjgZfjgarjgYTmlrDjgZfjgYTkvZXjgYvjgpLplovlp4vjgZfjgb7jgZnjgIJcIixcblx0XHR2aWV3UHVsbFJlcXVlc3RzOiBcIuODl+ODqyDjg6rjgq/jgqjjgrnjg4jjgpLooajnpLpcIlxuXHR9LFxuXHRcImtvLUtSXCI6IHtcblx0XHRhZGQ6IFwi7LaU6rCA7ZWY64ukXCIsXG5cdFx0YmFzZWRPbjogXCLquLDrsJjsnLzroZxcIixcblx0XHRicmFuY2hOYW1lOiBcIuyngOygkOuqhVwiLFxuXHRcdGJyYW5jaGVzOiBcIuqwgOyngFwiLFxuXHRcdGNhbmNlbDogXCLst6jshoxcIixcblx0XHRjbGVhcjogXCLsp4DsmrDquLBcIixcblx0XHRjb2xsZWN0aW9uczogXCLsu6zroInshZhcIixcblx0XHRjb2xsZWN0aW9uOiBcIuyImOynkVwiLFxuXHRcdGNyZWF0ZTogXCLrp4zrk6Tri6RcIixcblx0XHRjcmVhdGVQdWxsUmVxdWVzdDogXCLtkoAg7JqU7LKtIOyDneyEsVwiLFxuXHRcdGN1cnJlbnRCcmFuY2g6IFwi7ZiE7J6sIOyngOygkFwiLFxuXHRcdGRhc2hib2FyZDogXCLqs4TquLDrsJhcIixcblx0XHRcImRlbGV0ZVwiOiBcIuyCreygnFwiLFxuXHRcdGRlZmF1bHRCcmFuY2g6IFwi6riw67O4IOu2hOq4sFwiLFxuXHRcdGRlbGV0ZUJyYW5jaDogXCLrtoTquLAg7IKt7KCcXCIsXG5cdFx0ZWRpdDogXCLtjrjsp5HtlZjri6RcIixcblx0XHRsb2FkaW5nOiBcIuuhnOuTnCDspJFcIixcblx0XHRuZXdCcmFuY2g6IFwi7IOIIOyngOygkFwiLFxuXHRcdG90aGVyQnJhbmNoZXM6IFwi6riw7YOAIOyngOygkFwiLFxuXHRcdHB1bGxSZXF1ZXN0czogXCLtkoAg66as7YCY7Iqk7Yq4XCIsXG5cdFx0c2VhcmNoOiBcIuqygOyDiVwiLFxuXHRcdHNhdmU6IFwi6rWs7ZWY64ukXCIsXG5cdFx0c2luZ2xldG9uOiBcIu2VmOuCmOyUqSDsnbzslrTrgpjripQg6rKDXCIsXG5cdFx0c2luZ2xldG9uczogXCLsi7HquIDthqRcIixcblx0XHR0aGVDdXJyZW50bHlDaGVja2VkT3V0QnJhbmNoOiBcIu2YhOyerCDssrTtgazslYTsm4PrkJwg67iM656c7LmYLiDtmITsnqwg67iM656c7LmY7J2YIOq4sOyhtCDsnpHsl4XsnYQg6riw67CY7Jy866GcIOu5jOuTnO2VtOyVvCDtlZjripQg6rK97JqwIOydtCDsmLXshZjsnYQg7ISg7YOd7ZWY7IS47JqULlwiLFxuXHRcdHRoZURlZmF1bHRCcmFuY2hJbllvdXJSZXBvc2l0b3J5OiBcIuumrO2PrOyngO2GoOumrOydmCDquLDrs7gg67iM656c7LmY7J6F64uI64ukLiDtmITsnqwg67aE6riw7JeQIOydmOyhtO2VmOyngCDslYrripQg7IOI66Gc7Jq0IOqyg+ydhCDsi5zsnpHtlZjroKTrqbQg7J206rKD7J2EIOyEoO2Dne2VmOyLreyLnOyYpC5cIixcblx0XHR2aWV3UHVsbFJlcXVlc3RzOiBcIu2SgCDsmpTssq0g67O06riwXCJcblx0fSxcblx0XCJlbC1HUlwiOiB7XG5cdFx0YWRkOiBcIs6gz4HOv8+DzrjOrs66zrdcIixcblx0XHRiYXNlZE9uOiBcIs6SzrHPg865z4POvM6tzr3OvyDPg8+Ezr9cIixcblx0XHRicmFuY2hOYW1lOiBcIs6Mzr3Ov868zrEgz4XPgM6/zrrOsc+EzrHPg8+Ezq7OvM6xz4TOv8+CXCIsXG5cdFx0YnJhbmNoZXM6IFwizprOu86xzrTOuc6xIM60zrXOvc+Ez4HOv8+FXCIsXG5cdFx0Y2FuY2VsOiBcIs6czrHPhM6xzq/Pic+DzrdcIixcblx0XHRjbGVhcjogXCLOms6xzrjOsc+BzrnPg868z4zPglwiLFxuXHRcdGNvbGxlY3Rpb246IFwizqPPhc67zrvOv86zzq5cIixcblx0XHRjb2xsZWN0aW9uczogXCLOo8+FzrvOu86/zrPOrc+CXCIsXG5cdFx0Y3JlYXRlOiBcIs6UzrfOvM65zr/Phc+BzrPPjlwiLFxuXHRcdGNyZWF0ZVB1bGxSZXF1ZXN0OiBcIs6UzrfOvM65zr/Phc+BzrPOr86xIM6xzrnPhM6uzrzOsc+Ezr/PgiDOrc67zr7Ot8+CXCIsXG5cdFx0Y3VycmVudEJyYW5jaDogXCLOpM+Bzq3Ph86/zr0gz4XPgM6/zrrOsc+EzqzPg8+EzrfOvM6xXCIsXG5cdFx0ZGFzaGJvYXJkOiBcIs6kzrHOvM+AzrvPjFwiLFxuXHRcdGRlZmF1bHRCcmFuY2g6IFwizqDPgc6/zrXPgM65zrvOtc6zzrzOrc69zr/PgiDOus67zqzOtM6/z4JcIixcblx0XHRcImRlbGV0ZVwiOiBcIs6UzrnOsc6zz4HOrM+Gz4lcIixcblx0XHRkZWxldGVCcmFuY2g6IFwizpTOuc6xzrPPgc6xz4bOriDPhc+Azr/Ous6xz4TOsc+Dz4TOrs68zrHPhM6/z4JcIixcblx0XHRlZGl0OiBcIs6Vz4DOtc6+zrXPgc6zzrHPg86vzrFcIixcblx0XHRsb2FkaW5nOiBcIs6mz4zPgc+Ez4nPg863XCIsXG5cdFx0bmV3QnJhbmNoOiBcIs6dzq3OvyDPhc+Azr/Ous6xz4TOrM+Dz4TOt868zrFcIixcblx0XHRvdGhlckJyYW5jaGVzOiBcIs6GzrvOu86xIM+Fz4DOv866zrHPhM6xz4PPhM6uzrzOsc+EzrFcIixcblx0XHRwdWxsUmVxdWVzdHM6IFwizqTPgc6xzrLOrs6+z4TOtSDOsc65z4TOrs68zrHPhM6xXCIsXG5cdFx0c2F2ZTogXCLOkc+Azr/OuM63zrrOtc+Nz4POtc+EzrVcIixcblx0XHRzZWFyY2g6IFwizpHOvc6xzrbOrs+EzrfPg863XCIsXG5cdFx0c2luZ2xldG9uOiBcIs6czr/Ovc6xzrTOuc66z4wgz4fOsc+Bz4TOr1wiLFxuXHRcdHNpbmdsZXRvbnM6IFwiU2luZ2xldG9uc1wiLFxuXHRcdHRoZUN1cnJlbnRseUNoZWNrZWRPdXRCcmFuY2g6IFwizqTOvyDPhc+Azr/Ous6xz4TOrM+Dz4TOt868zrEgz4DOv8+FIM61zrvOrc6zz4fOtc+EzrHOuSDOsc+Fz4TOrs69IM+Ezrcgz4PPhM65zrPOvM6uLiDOlc+AzrnOu86tzr7PhM61IM6xz4XPhM+MIM61zqzOvSDPh8+BzrXOuc6szrbOtc+EzrHOuSDOvc6xIM6yzrHPg865z4PPhM61zq/PhM61IM+DzrUgz4XPgM6sz4HPh86/z4XPg861z4IgzrXPgc6zzrHPg86vzrXPgiDOsc+Az4wgz4TOv869IM+Ez4HOrc+Hzr/Ovc+EzrEgzrrOu86szrTOvy5cIixcblx0XHR0aGVEZWZhdWx0QnJhbmNoSW5Zb3VyUmVwb3NpdG9yeTogXCLOnyDPgM+Bzr/Otc+AzrnOu861zrPOvM6tzr3Ov8+CIM66zrvOrM60zr/PgiDPg8+Ezr8gzrHPgM6/zrjOtc+Ezq7Pgc65zr8gz4POsc+CLiDOlc+AzrnOu86tzr7PhM61IM6xz4XPhM+MIM6zzrnOsSDOvc6xIM6+zrXOus65zr3Ors+DzrXPhM61IM66zqzPhM65IM69zq3OvyDPgM6/z4UgzrTOtc69IM61zr7Osc+Bz4TOrM+EzrHOuSDOsc+Az4wgz4TOvyDPhM+Bzq3Ph86/zr0gz4XPgM6/zrrOsc+EzqzPg8+EzrfOvM6sIM+DzrHPgi5cIixcblx0XHR2aWV3UHVsbFJlcXVlc3RzOiBcIs6gz4HOv86yzr/Ou86uIM6xzrnPhM63zrzOrM+Ez4nOvSDOrc67zr7Ot8+CXCJcblx0fSxcblx0XCJhci1BRVwiOiB7XG5cdFx0YWRkOiBcItmK2LbZitmBXCIsXG5cdFx0YnJhbmNoTmFtZTogXCLYp9iz2YUg2KfZhNmB2LHYuVwiLFxuXHRcdGJyYW5jaGVzOiBcItin2YTZgdix2YjYuVwiLFxuXHRcdGJhc2VkT246IFwi2YXYsdiq2YPYsiDYudmE2YlcIixcblx0XHRjYW5jZWw6IFwi2YrZhNi62YpcIixcblx0XHRjbGVhcjogXCLZhdiz2K1cIixcblx0XHRjb2xsZWN0aW9uOiBcItmF2KzZhdmI2LnYqVwiLFxuXHRcdGNvbGxlY3Rpb25zOiBcItin2YTZhdis2YXZiNi52KfYqlwiLFxuXHRcdGNyZWF0ZTogXCLZitiu2YTZglwiLFxuXHRcdGNyZWF0ZVB1bGxSZXF1ZXN0OiBcItil2YbYtNin2KEg2LfZhNioINiz2K3YqFwiLFxuXHRcdGN1cnJlbnRCcmFuY2g6IFwi2KfZhNmB2LHYuSDYp9mE2K3Yp9mE2YpcIixcblx0XHRkYXNoYm9hcmQ6IFwi2YTZiNit2Kkg2KfZhNmC2YrYp9iv2KlcIixcblx0XHRkZWZhdWx0QnJhbmNoOiBcItin2YTZgdix2Lkg2KfZhNin2YHYqtix2KfYttmKXCIsXG5cdFx0XCJkZWxldGVcIjogXCLZitmF2LPYrVwiLFxuXHRcdGRlbGV0ZUJyYW5jaDogXCLYrdiw2YEg2KfZhNmB2LHYuVwiLFxuXHRcdGVkaXQ6IFwi2YrYrdix2LFcIixcblx0XHRsb2FkaW5nOiBcItis2KfYsdmNINin2YTYqtit2YXZitmEXCIsXG5cdFx0bmV3QnJhbmNoOiBcItmB2LHYuSDYrNiv2YrYr1wiLFxuXHRcdG90aGVyQnJhbmNoZXM6IFwi2KfZhNmB2LHZiNi5INin2YTYo9iu2LHZiVwiLFxuXHRcdHB1bGxSZXF1ZXN0czogXCLYt9mE2KjYp9iqINin2YTYs9it2KhcIixcblx0XHRzYXZlOiBcItmK2K3Zgdi4XCIsXG5cdFx0c2VhcmNoOiBcItio2K3Yq1wiLFxuXHRcdHNpbmdsZXRvbjogXCLYs9mK2YbYrNmE2KrZiNmGXCIsXG5cdFx0dGhlQ3VycmVudGx5Q2hlY2tlZE91dEJyYW5jaDogXCLYp9mE2YHYsdi5INin2YTZhdi52KfYryDYrdin2YTZitinLiDYp9iu2KrYsSDZh9iw2Kcg2KXYsNinINmD2YbYqiDYqNit2KfYrNipINil2YTZiSDYp9mE2KjZhtin2KEg2LnZhNmJINin2YTYudmF2YQg2KfZhNit2KfZhNmKINmF2YYg2KfZhNmB2LHYuSDYp9mE2K3Yp9mE2YouXCIsXG5cdFx0c2luZ2xldG9uczogXCLYp9mE2YHYsdiv2YpcIixcblx0XHR0aGVEZWZhdWx0QnJhbmNoSW5Zb3VyUmVwb3NpdG9yeTogXCLYp9mE2YHYsdi5INin2YTYp9mB2KrYsdin2LbZiiDZgdmKINin2YTZhdiz2KrZiNiv2Lkg2KfZhNiu2KfYtSDYqNmDLiDYp9iu2KrYsSDZh9iw2Kcg2YTYqNiv2KEg2LTZitihINis2K/ZitivINmE2Kcg2YrYudiq2YXYryDYudmE2Ykg2YHYsdi52YMg2KfZhNit2KfZhNmKLlwiLFxuXHRcdHZpZXdQdWxsUmVxdWVzdHM6IFwi2LnYsdi2INi32YTYqNin2Kog2KfZhNiz2K3YqFwiXG5cdH0sXG5cdFwiY3MtQ1pcIjoge1xuXHRcdGFkZDogXCJQxZlpZGF0XCIsXG5cdFx0YmFzZWRPbjogXCJOYSB6w6FrbGFkxJtcIixcblx0XHRicmFuY2hOYW1lOiBcIkptw6lubyBwb2JvxI1reVwiLFxuXHRcdGJyYW5jaGVzOiBcIlbEm3R2ZVwiLFxuXHRcdGNhbmNlbDogXCJ6cnXFoWVuw61cIixcblx0XHRjbGVhcjogXCJWeW1hemF0XCIsXG5cdFx0Y29sbGVjdGlvbjogXCJTYsOtcmthXCIsXG5cdFx0Y29sbGVjdGlvbnM6IFwiU2LDrXJreVwiLFxuXHRcdGNyZWF0ZTogXCJWeXR2b8WZaXRcIixcblx0XHRjcmVhdGVQdWxsUmVxdWVzdDogXCJWeXR2b8WZaXQgcG/FvmFkYXZlayBuYSBzdGHFvmVuw61cIixcblx0XHRjdXJyZW50QnJhbmNoOiBcIlNvdcSNYXNuw6EgcG9ib8SNa2FcIixcblx0XHRkZWZhdWx0QnJhbmNoOiBcIlbDvWNob3rDrSB2xJt0ZXZcIixcblx0XHRkYXNoYm9hcmQ6IFwiUMWZw61zdHJvam92w6EgZGVza2FcIixcblx0XHRcImRlbGV0ZVwiOiBcIlZ5bWF6YXRcIixcblx0XHRkZWxldGVCcmFuY2g6IFwiU21hemF0IHbEm3RldlwiLFxuXHRcdGVkaXQ6IFwiVXByYXZpdFwiLFxuXHRcdGxvYWRpbmc6IFwiTmHEjcOtdMOhbsOtXCIsXG5cdFx0bmV3QnJhbmNoOiBcIk5vdsOhIHBvYm/EjWthXCIsXG5cdFx0b3RoZXJCcmFuY2hlczogXCJPc3RhdG7DrSBwb2JvxI1reVwiLFxuXHRcdHB1bGxSZXF1ZXN0czogXCJWeXTDoWhuxJt0ZSBwb8W+YWRhdmt5XCIsXG5cdFx0c2F2ZTogXCJVbG/Fvml0XCIsXG5cdFx0c2VhcmNoOiBcIkhsZWRhdFwiLFxuXHRcdHNpbmdsZXRvbjogXCJKZWRpbsOhxI1la1wiLFxuXHRcdHNpbmdsZXRvbnM6IFwiU2luZ2xldG9uc1wiLFxuXHRcdHRoZUN1cnJlbnRseUNoZWNrZWRPdXRCcmFuY2g6IFwiQWt0dcOhbG7EmyBvZGhsw6HFoWVuw6EgcG9ib8SNa2EuIFR1dG8gbW/Fvm5vc3QgdnliZXJ0ZSwgcG9rdWQgcG90xZllYnVqZXRlIG5hdsOhemF0IG5hIHN0w6F2YWrDrWPDrSBwcsOhY2kgeiBha3R1w6FsbsOtIHBvYm/EjWt5LlwiLFxuXHRcdHZpZXdQdWxsUmVxdWVzdHM6IFwiWm9icmF6aXQgxb7DoWRvc3RpIG8gc3Rhxb5lbsOtXCIsXG5cdFx0dGhlRGVmYXVsdEJyYW5jaEluWW91clJlcG9zaXRvcnk6IFwiVsO9Y2hvesOtIHbEm3RldiB2ZSB2YcWhZW0gw7psb8W+acWhdGkuIFp2b2x0ZSB0dXRvIG1vxb5ub3N0LCBjaGNldGUtbGkgemHEjcOtdCBzIG7Em8SNw61tIG5vdsO9bSwgY28gbmVuw60gesOhdmlzbMOpIG5hIHZhxaHDrSBha3R1w6FsbsOtIHbEm3R2aS5cIlxuXHR9LFxuXHRcImJnLUJHXCI6IHtcblx0XHRhZGQ6IFwi0JTQvtCx0LDQstC10YLQtVwiLFxuXHRcdGJhc2VkT246IFwi0JHQsNC30LjRgNCw0L0g0L3QsFwiLFxuXHRcdGJyYW5jaE5hbWU6IFwi0JjQvNC1INC90LAg0LrQu9C+0L1cIixcblx0XHRicmFuY2hlczogXCLQmtC70L7QvdC+0LLQtVwiLFxuXHRcdGNhbmNlbDogXCLQntGC0LrQsNC3XCIsXG5cdFx0Y2xlYXI6IFwi0JjQt9GH0LjRgdGC0LhcIixcblx0XHRjb2xsZWN0aW9uOiBcItC60L7Qu9C10LrRhtC40Y9cIixcblx0XHRjb2xsZWN0aW9uczogXCLQmtC+0LvQtdC60YbQuNC4XCIsXG5cdFx0Y3JlYXRlOiBcItCh0YrQt9C00LDQstCw0LnRgtC1XCIsXG5cdFx0Y3JlYXRlUHVsbFJlcXVlc3Q6IFwi0KHRitC30LTQsNC50YLQtSDQt9Cw0Y/QstC60LAg0LfQsCDQuNC30YLQtdCz0LvRj9C90LVcIixcblx0XHRjdXJyZW50QnJhbmNoOiBcItCi0LXQutGD0Ykg0LrQu9C+0L1cIixcblx0XHRkYXNoYm9hcmQ6IFwi0KLQsNCx0LvQvlwiLFxuXHRcdFwiZGVsZXRlXCI6IFwi0JjQt9GC0YDQuNC5XCIsXG5cdFx0ZGVmYXVsdEJyYW5jaDogXCLQmtC70L7QvSDQv9C+INC/0L7QtNGA0LDQt9Cx0LjRgNCw0L3QtVwiLFxuXHRcdGRlbGV0ZUJyYW5jaDogXCLQmNC30YLRgNC40LLQsNC90LUg0L3QsCDQutC70L7QvVwiLFxuXHRcdGVkaXQ6IFwi0YDQtdC00LDQutGC0LjRgNCw0L3QtVwiLFxuXHRcdGxvYWRpbmc6IFwi0JfQsNGA0LXQttC00LDQvdC1XCIsXG5cdFx0b3RoZXJCcmFuY2hlczogXCLQlNGA0YPQs9C4INC60LvQvtC90L7QstC1XCIsXG5cdFx0cHVsbFJlcXVlc3RzOiBcItCX0LDRj9Cy0LrQuCDQt9CwINC40LfRgtC10LPQu9GP0L3QtVwiLFxuXHRcdG5ld0JyYW5jaDogXCLQndC+0LIg0LrQu9C+0L1cIixcblx0XHRzYXZlOiBcItCX0LDQv9Cw0LfQstCw0L3QtVwiLFxuXHRcdHNlYXJjaDogXCLQotGK0YDRgdC10L3QtVwiLFxuXHRcdHNpbmdsZXRvbjogXCLQodC40L3Qs9GK0LvRgtGK0L1cIixcblx0XHRzaW5nbGV0b25zOiBcItCV0LTQuNC90LjRh9C90LhcIixcblx0XHR0aGVDdXJyZW50bHlDaGVja2VkT3V0QnJhbmNoOiBcItCi0LXQutGD0YnQviDQv9GA0L7QstC10YDQtdC90LjRj9GCINC60LvQvtC9LiDQmNC30LHQtdGA0LXRgtC1INGC0L7QstCwLCDQsNC60L4g0YLRgNGP0LHQstCwINC00LAg0L3QsNC00LPRgNCw0LbQtNCw0YLQtSDQstGK0YDRhdGDINGB0YrRidC10YHRgtCy0YPQstCw0YnQsCDRgNCw0LHQvtGC0LAg0L7RgiDRgtC10LrRg9GJ0LjRjyDQutC70L7QvS5cIixcblx0XHR0aGVEZWZhdWx0QnJhbmNoSW5Zb3VyUmVwb3NpdG9yeTogXCLQmtC70L7QvdGK0YIg0L/QviDQv9C+0LTRgNCw0LfQsdC40YDQsNC90LUg0LLRitCyINCy0LDRiNC10YLQviDRhdGA0LDQvdC40LvQuNGJ0LUuINCY0LfQsdC10YDQtdGC0LUg0YLQvtCy0LAsINC30LAg0LTQsCDQt9Cw0L/QvtGH0L3QtdGC0LUg0YEg0L3QtdGJ0L4g0L3QvtCy0L4sINC60L7QtdGC0L4g0L3QtSDQt9Cw0LLQuNGB0Lgg0L7RgiDRgtC10LrRg9GJ0LjRjyDQstC4INC60LvQvtC9LlwiLFxuXHRcdHZpZXdQdWxsUmVxdWVzdHM6IFwi0J/RgNC10LPQu9C10LQg0L3QsCDQt9Cw0Y/QstC60LjRgtC1INC30LAg0LjQt9GC0LXQs9C70Y/QvdC1XCJcblx0fSxcblx0XCJkYS1ES1wiOiB7XG5cdFx0ZGVmYXVsdEJyYW5jaDogXCJTdGFuZGFyZCBncmVuXCIsXG5cdFx0XCJkZWxldGVcIjogXCJTbGV0XCIsXG5cdFx0ZGVsZXRlQnJhbmNoOiBcIlNsZXQgZmlsaWFsXCIsXG5cdFx0ZWRpdDogXCJSZWRpZ2VyZVwiLFxuXHRcdGxvYWRpbmc6IFwiSW5kbMOmc2VyXCIsXG5cdFx0bmV3QnJhbmNoOiBcIk55IGZpbGlhbFwiLFxuXHRcdG90aGVyQnJhbmNoZXM6IFwiQW5kcmUgZ3JlbmVcIixcblx0XHRwdWxsUmVxdWVzdHM6IFwiVHLDpmsgYW5tb2RuaW5nZXJcIixcblx0XHRzYXZlOiBcIkdlbW1lXCIsXG5cdFx0c2VhcmNoOiBcIlPDuGdcIixcblx0XHRzaW5nbGV0b246IFwiU2luZ2xldG9uXCIsXG5cdFx0c2luZ2xldG9uczogXCJTaW5nbGV0b25lclwiLFxuXHRcdHRoZUN1cnJlbnRseUNoZWNrZWRPdXRCcmFuY2g6IFwiRGVuIGFrdHVlbHQgdGpla2tlZGUgZmlsaWFsLiBWw6ZsZyBkZXR0ZSwgaHZpcyBkdSBza2FsIGJ5Z2dlIHZpZGVyZSBww6UgZWtzaXN0ZXJlbmRlIGFyYmVqZGUgZnJhIGRlbiBudXbDpnJlbmRlIGZpbGlhbC5cIixcblx0XHR0aGVEZWZhdWx0QnJhbmNoSW5Zb3VyUmVwb3NpdG9yeTogXCJTdGFuZGFyZGdyZW5lbiBpIGRpdCBsYWdlci4gVsOmbGcgZGV0dGUgZm9yIGF0IHN0YXJ0ZSBww6Ugbm9nZXQgbnl0LCBkZXIgaWtrZSBlciBhZmjDpm5naWd0IGFmIGRpbiBudXbDpnJlbmRlIGZpbGlhbC5cIixcblx0XHR2aWV3UHVsbFJlcXVlc3RzOiBcIlNlIHB1bGwtYW5tb2RuaW5nZXJcIixcblx0XHRhZGQ6IFwiVGlsZsO4amVcIixcblx0XHRiYXNlZE9uOiBcIkJhc2VyZXQgcMOlXCIsXG5cdFx0YnJhbmNoTmFtZTogXCJBZmRlbGluZ3NuYXZuXCIsXG5cdFx0YnJhbmNoZXM6IFwiR3JlbmVcIixcblx0XHRjYW5jZWw6IFwiQWZiZXN0aWxsZVwiLFxuXHRcdGNsZWFyOiBcIlJ5ZFwiLFxuXHRcdGNvbGxlY3Rpb246IFwiS29sbGVrdGlvblwiLFxuXHRcdGNvbGxlY3Rpb25zOiBcIlNhbWxpbmdlclwiLFxuXHRcdGNyZWF0ZVB1bGxSZXF1ZXN0OiBcIk9wcmV0IHB1bGwtYW5tb2RuaW5nXCIsXG5cdFx0Y3JlYXRlOiBcInNrYWJcIixcblx0XHRjdXJyZW50QnJhbmNoOiBcIk51dsOmcmVuZGUgZmlsaWFsXCIsXG5cdFx0ZGFzaGJvYXJkOiBcIkRhc2hib2FyZFwiXG5cdH0sXG5cdFwiZGUtREVcIjoge1xuXHRcdGFkZDogXCJIaW56dWbDvGdlblwiLFxuXHRcdGJhc2VkT246IFwiQmV6b2dlbiBhdWZcIixcblx0XHRicmFuY2hOYW1lOiBcIlp3ZWlnbmFtZVwiLFxuXHRcdGJyYW5jaGVzOiBcIkdlw6RzdFwiLFxuXHRcdGNhbmNlbDogXCJTdG9ybmllcmVuXCIsXG5cdFx0Y2xlYXI6IFwiTMO2c2NoZW5cIixcblx0XHRjb2xsZWN0aW9uOiBcIlNhbW1sdW5nXCIsXG5cdFx0Y29sbGVjdGlvbnM6IFwiU2FtbWx1bmdlblwiLFxuXHRcdGNyZWF0ZTogXCJFcnN0ZWxsZW5cIixcblx0XHRjcmVhdGVQdWxsUmVxdWVzdDogXCJQdWxsLVJlcXVlc3QgZXJzdGVsbGVuXCIsXG5cdFx0Y3VycmVudEJyYW5jaDogXCJBa3R1ZWxsZXIgWndlaWdcIixcblx0XHRkYXNoYm9hcmQ6IFwiQXJtYXR1cmVuYnJldHRcIixcblx0XHRkZWZhdWx0QnJhbmNoOiBcIlN0YW5kYXJkendlaWdcIixcblx0XHRcImRlbGV0ZVwiOiBcIkzDtnNjaGVuXCIsXG5cdFx0ZGVsZXRlQnJhbmNoOiBcIlp3ZWlnIGzDtnNjaGVuXCIsXG5cdFx0ZWRpdDogXCJCZWFyYmVpdGVuXCIsXG5cdFx0bG9hZGluZzogXCJXaXJkIGdlbGFkZW5cIixcblx0XHRuZXdCcmFuY2g6IFwiTmV1ZSBad2VpZ1wiLFxuXHRcdG90aGVyQnJhbmNoZXM6IFwiQW5kZXJlIEZpbGlhbGVuXCIsXG5cdFx0cHVsbFJlcXVlc3RzOiBcIlB1bGwtUmVxdWVzdHNcIixcblx0XHRzYXZlOiBcIlNwZWljaGVyblwiLFxuXHRcdHRoZUN1cnJlbnRseUNoZWNrZWRPdXRCcmFuY2g6IFwiRGVyIGFrdHVlbGwgYXVzZ2VjaGVja3RlIFp3ZWlnLiBXw6RobGVuIFNpZSBkaWVzZSBPcHRpb24sIHdlbm4gU2llIGF1ZiB2b3JoYW5kZW5lciBBcmJlaXQgYXVzIGRlbSBha3R1ZWxsZW4gWndlaWcgYXVmYmF1ZW4gbcO8c3Nlbi5cIixcblx0XHRzaW5nbGV0b246IFwiRWluemVsbGluZ1wiLFxuXHRcdHNlYXJjaDogXCJTdWNoZW5cIixcblx0XHR0aGVEZWZhdWx0QnJhbmNoSW5Zb3VyUmVwb3NpdG9yeTogXCJEZXIgU3RhbmRhcmQtQnJhbmNoIGluIElocmVtIFJlcG9zaXRvcnkuIFfDpGhsZW4gU2llIGRpZXMsIHVtIGV0d2FzIE5ldWVzIHp1IHN0YXJ0ZW4sIGRhcyBuaWNodCB2b24gSWhyZW0gYWt0dWVsbGVuIFp3ZWlnIGFiaMOkbmd0LlwiLFxuXHRcdHNpbmdsZXRvbnM6IFwiU2luZ2xlc1wiLFxuXHRcdHZpZXdQdWxsUmVxdWVzdHM6IFwiUHVsbC1SZXF1ZXN0cyBhbnplaWdlblwiXG5cdH0sXG5cdFwiZW4tVVNcIjoge1xuXHRcdGJhc2VkT246IFwiQmFzZWQgb25cIixcblx0XHRhZGQ6IFwiQWRkXCIsXG5cdFx0YnJhbmNoTmFtZTogXCJCcmFuY2ggbmFtZVwiLFxuXHRcdGJyYW5jaGVzOiBcIkJyYW5jaGVzXCIsXG5cdFx0Y2FuY2VsOiBcIkNhbmNlbFwiLFxuXHRcdGNsZWFyOiBcIkNsZWFyXCIsXG5cdFx0Y29sbGVjdGlvbnM6IFwiQ29sbGVjdGlvbnNcIixcblx0XHRjb2xsZWN0aW9uOiBcIkNvbGxlY3Rpb25cIixcblx0XHRjcmVhdGU6IFwiQ3JlYXRlXCIsXG5cdFx0Y3JlYXRlUHVsbFJlcXVlc3Q6IFwiQ3JlYXRlIHB1bGwgcmVxdWVzdFwiLFxuXHRcdGRlZmF1bHRCcmFuY2g6IFwiRGVmYXVsdCBicmFuY2hcIixcblx0XHRkYXNoYm9hcmQ6IFwiRGFzaGJvYXJkXCIsXG5cdFx0Y3VycmVudEJyYW5jaDogXCJDdXJyZW50IGJyYW5jaFwiLFxuXHRcdGRlbGV0ZUJyYW5jaDogXCJEZWxldGUgYnJhbmNoXCIsXG5cdFx0XCJkZWxldGVcIjogXCJEZWxldGVcIixcblx0XHRsb2FkaW5nOiBcIkxvYWRpbmdcIixcblx0XHRlZGl0OiBcIkVkaXRcIixcblx0XHRuZXdCcmFuY2g6IFwiTmV3IGJyYW5jaOKAplwiLFxuXHRcdG90aGVyQnJhbmNoZXM6IFwiT3RoZXIgYnJhbmNoZXNcIixcblx0XHRwdWxsUmVxdWVzdHM6IFwiUHVsbCByZXF1ZXN0c1wiLFxuXHRcdHNhdmU6IFwiU2F2ZVwiLFxuXHRcdHNlYXJjaDogXCJTZWFyY2hcIixcblx0XHRzaW5nbGV0b246IFwiU2luZ2xldG9uXCIsXG5cdFx0c2luZ2xldG9uczogXCJTaW5nbGV0b25zXCIsXG5cdFx0dGhlQ3VycmVudGx5Q2hlY2tlZE91dEJyYW5jaDogXCJUaGUgY3VycmVudGx5IGNoZWNrZWQgb3V0IGJyYW5jaC4gQ2hvb3NlIHRoaXMgaWYgeW91IG5lZWQgdG8gYnVpbGQgb24gZXhpc3Rpbmcgd29yayBmcm9tIHRoZSBjdXJyZW50IGJyYW5jaC5cIixcblx0XHR0aGVEZWZhdWx0QnJhbmNoSW5Zb3VyUmVwb3NpdG9yeTogXCJUaGUgZGVmYXVsdCBicmFuY2ggaW4geW91ciByZXBvc2l0b3J5LiBDaG9vc2UgdGhpcyB0byBzdGFydCBzb21ldGhpbmcgbmV3IHRoYXQncyBub3QgZGVwZW5kZW50IG9uIHlvdXIgY3VycmVudCBicmFuY2guXCIsXG5cdFx0dmlld1B1bGxSZXF1ZXN0czogXCJWaWV3IHB1bGwgcmVxdWVzdHNcIlxuXHR9LFxuXHRcImVzLUVTXCI6IHtcblx0XHRhZGQ6IFwiQWdyZWdhclwiLFxuXHRcdGJhc2VkT246IFwiUmVzaWRlbmNpYSBlblwiLFxuXHRcdGJyYW5jaE5hbWU6IFwiTm9tYnJlIGRlIGxhIHN1Y3Vyc2FsXCIsXG5cdFx0YnJhbmNoZXM6IFwiU3VjdXJzYWxlc1wiLFxuXHRcdGNhbmNlbDogXCJDYW5jZWxhclwiLFxuXHRcdGNsZWFyOiBcIkJvcnJhclwiLFxuXHRcdGNyZWF0ZTogXCJDcmVhclwiLFxuXHRcdGNvbGxlY3Rpb246IFwiQ29sZWNjacOzblwiLFxuXHRcdGNvbGxlY3Rpb25zOiBcIkNvbGVjY2lvbmVzXCIsXG5cdFx0Y3VycmVudEJyYW5jaDogXCJSYW1hIGFjdHVhbFwiLFxuXHRcdGRhc2hib2FyZDogXCJQYW5lbFwiLFxuXHRcdGNyZWF0ZVB1bGxSZXF1ZXN0OiBcIkNyZWFyIHNvbGljaXR1ZCBkZSBleHRyYWNjacOzblwiLFxuXHRcdGRlZmF1bHRCcmFuY2g6IFwiUmFtYSBwcmVkZXRlcm1pbmFkYVwiLFxuXHRcdFwiZGVsZXRlXCI6IFwiQm9ycmFyXCIsXG5cdFx0ZGVsZXRlQnJhbmNoOiBcIkVsaW1pbmFyIHJhbWFcIixcblx0XHRlZGl0OiBcIkVkaXRhclwiLFxuXHRcdGxvYWRpbmc6IFwiQ2FyZ2FuZG9cIixcblx0XHRuZXdCcmFuY2g6IFwiTnVldmEgc3VjdXJzYWxcIixcblx0XHRvdGhlckJyYW5jaGVzOiBcIk90cmFzIHN1Y3Vyc2FsZXNcIixcblx0XHRwdWxsUmVxdWVzdHM6IFwiU29saWNpdHVkZXMgZGUgZXh0cmFjY2nDs25cIixcblx0XHRzaW5nbGV0b246IFwiU2VtaWZhbGxvXCIsXG5cdFx0c2VhcmNoOiBcIkJ1c2NhclwiLFxuXHRcdHNhdmU6IFwiQWhvcnJhclwiLFxuXHRcdHNpbmdsZXRvbnM6IFwiU29sdGVyb3NcIixcblx0XHR0aGVDdXJyZW50bHlDaGVja2VkT3V0QnJhbmNoOiBcIkxhIHN1Y3Vyc2FsIGFjdHVhbG1lbnRlIGRlc3Byb3RlZ2lkYS4gRWxpamEgZXN0byBzaSBuZWNlc2l0YSBkZXNhcnJvbGxhciBlbCB0cmFiYWpvIGV4aXN0ZW50ZSBkZSBsYSByYW1hIGFjdHVhbC5cIixcblx0XHR2aWV3UHVsbFJlcXVlc3RzOiBcIlZlciBzb2xpY2l0dWRlcyBkZSBleHRyYWNjacOzblwiLFxuXHRcdHRoZURlZmF1bHRCcmFuY2hJbllvdXJSZXBvc2l0b3J5OiBcIkxhIHJhbWEgcHJlZGV0ZXJtaW5hZGEgZW4gc3UgcmVwb3NpdG9yaW8uIEVsaWphIGVzdG8gcGFyYSBjb21lbnphciBhbGdvIG51ZXZvIHF1ZSBubyBkZXBlbmRhIGRlIHN1IHN1Y3Vyc2FsIGFjdHVhbC5cIlxuXHR9LFxuXHRcImV0LUVFXCI6IHtcblx0XHRiYXNlZE9uOiBcIlDDtWhpbmViXCIsXG5cdFx0YWRkOiBcIkxpc2FtYVwiLFxuXHRcdGJyYW5jaE5hbWU6IFwiRmlsaWFhbGkgbmltaVwiLFxuXHRcdGJyYW5jaGVzOiBcIkZpbGlhYWxpZFwiLFxuXHRcdGNhbmNlbDogXCJUw7xoaXN0YVwiLFxuXHRcdGNvbGxlY3Rpb25zOiBcIktvbGxla3RzaW9vbmlkXCIsXG5cdFx0Y2xlYXI6IFwiUHVoYXN0YVwiLFxuXHRcdGNvbGxlY3Rpb246IFwiS29sbGVrdHNpb29uXCIsXG5cdFx0Y3JlYXRlUHVsbFJlcXVlc3Q6IFwiTG9vIHTDtW1iYW1pc3Rhb3RsdXNcIixcblx0XHRjcmVhdGU6IFwiTG9vXCIsXG5cdFx0Y3VycmVudEJyYW5jaDogXCJQcmFlZ3VuZSBmaWxpYWFsXCIsXG5cdFx0ZGFzaGJvYXJkOiBcIkFybWF0dXVybGF1ZFwiLFxuXHRcdGRlZmF1bHRCcmFuY2g6IFwiVmFpa2VoYXJ1XCIsXG5cdFx0XCJkZWxldGVcIjogXCJLdXN0dXRhXCIsXG5cdFx0ZGVsZXRlQnJhbmNoOiBcIkt1c3R1dGEgaGFydVwiLFxuXHRcdGVkaXQ6IFwiTXV1ZGFcIixcblx0XHRsb2FkaW5nOiBcIkxhYWRpbWluZVwiLFxuXHRcdG5ld0JyYW5jaDogXCJVdXMgZmlsaWFhbFwiLFxuXHRcdG90aGVyQnJhbmNoZXM6IFwiTXV1ZCBva3NhZFwiLFxuXHRcdHB1bGxSZXF1ZXN0czogXCJUw7VtYmV0YW90bHVzZWRcIixcblx0XHRzYXZlOiBcIlNhbHZlc3RhXCIsXG5cdFx0c2VhcmNoOiBcIk90c2lcIixcblx0XHRzaW5nbGV0b246IFwiw7xrc2lrdWRcIixcblx0XHRzaW5nbGV0b25zOiBcIsOca3Npa3VkXCIsXG5cdFx0dGhlQ3VycmVudGx5Q2hlY2tlZE91dEJyYW5jaDogXCJQcmFlZ3UgdsOkbGphIHJlZ2lzdHJlZXJpdHVkIGZpbGlhYWwuIFZhbGlnZSBzZWUsIGt1aSBwZWF0ZSBrYXN1dGFtYSBwcmFlZ3VzZSBoYXJ1IG9sZW1hc29sZXZhaWQgdMO2aWQuXCIsXG5cdFx0dmlld1B1bGxSZXF1ZXN0czogXCJWYWFkYWtlIHTDtW1iYW1pc3Rhb3RsdXNpXCIsXG5cdFx0dGhlRGVmYXVsdEJyYW5jaEluWW91clJlcG9zaXRvcnk6IFwiVmFpa2VoYXJ1IHRlaWUgaG9pZGxhcy4gVmFsaWdlIHNlZSwgZXQgYWx1c3RhZGEgbWlkYWdpIHV1dCwgbWlzIGVpIHPDtWx0dSB0ZWllIHByYWVndXNlc3QgaGFydXN0LlwiXG5cdH0sXG5cdFwiZmktRklcIjoge1xuXHRcdGNyZWF0ZVB1bGxSZXF1ZXN0OiBcIkx1byB2ZXRvcHl5bnTDtlwiLFxuXHRcdGNvbGxlY3Rpb25zOiBcIktva29lbG1hdFwiLFxuXHRcdGNyZWF0ZTogXCJMdW9kYVwiLFxuXHRcdGRhc2hib2FyZDogXCJLb2plbGF1dGFcIixcblx0XHRcImRlbGV0ZVwiOiBcIlBvaXN0YWFcIixcblx0XHRkZWZhdWx0QnJhbmNoOiBcIk9sZXR1c2hhYXJhXCIsXG5cdFx0ZGVsZXRlQnJhbmNoOiBcIlBvaXN0YSBoYWFyYVwiLFxuXHRcdGVkaXQ6IFwiTXVva2F0YVwiLFxuXHRcdG5ld0JyYW5jaDogXCJVdXNpIGhhYXJhXCIsXG5cdFx0bG9hZGluZzogXCJMYWRhdGFhblwiLFxuXHRcdHNhdmU6IFwiVGFsbGVudGFhXCIsXG5cdFx0b3RoZXJCcmFuY2hlczogXCJNdXV0IGhhYXJhdFwiLFxuXHRcdHB1bGxSZXF1ZXN0czogXCJWZWTDpCBweXludMO2asOkXCIsXG5cdFx0c2luZ2xldG9uOiBcIlNpbmdsZXRvblwiLFxuXHRcdHNlYXJjaDogXCJIYWVcIixcblx0XHRzaW5nbGV0b25zOiBcIlNpbmdsZXRvbnNcIixcblx0XHR0aGVDdXJyZW50bHlDaGVja2VkT3V0QnJhbmNoOiBcIlTDpGxsw6QgaGV0a2VsbMOkIHVsb3NraXJqYXV0dW51dCBzaXZ1bGlpa2UuIFZhbGl0c2UgdMOkbcOkLCBqb3MgaGFsdWF0IHJha2VudGFhIG55a3lpc2VuIGhhYXJhbiBvbGVtYXNzYSBvbGV2YWFuIHR5w7Zow7ZuLlwiLFxuXHRcdHRoZURlZmF1bHRCcmFuY2hJbllvdXJSZXBvc2l0b3J5OiBcIk9sZXR1c2hhYXJhIGFya2lzdG9zc2FzaS4gVmFsaXRzZSB0w6Rtw6QgYWxvaXR0YWFrc2VzaSBqb3RhaW4gdXV0dGEsIGpva2EgZWkgb2xlIHJpaXBwdXZhaW5lbiBueWt5aXNlc3TDpCBoYWFyYXN0YXNpLlwiLFxuXHRcdHZpZXdQdWxsUmVxdWVzdHM6IFwiTsOkeXTDpCB2ZXRvcHl5bm7DtnRcIixcblx0XHRhZGQ6IFwiTGlzw6R0w6RcIixcblx0XHRiYXNlZE9uOiBcIlBlcnVzdHVlblwiLFxuXHRcdGJyYW5jaE5hbWU6IFwiU2l2dWtvbnR0b3JpbiBuaW1pXCIsXG5cdFx0YnJhbmNoZXM6IFwiT2tzYXRcIixcblx0XHRjbGVhcjogXCJLaXJrYXNcIixcblx0XHRjb2xsZWN0aW9uOiBcIktva29lbG1hXCIsXG5cdFx0Y2FuY2VsOiBcIlTDvGhpc3RhXCIsXG5cdFx0Y3VycmVudEJyYW5jaDogXCJOeWt5aW5lbiBoYWFyYVwiXG5cdH0sXG5cdFwibHQtTFRcIjoge1xuXHRcdGFkZDogXCJQYXBpbGR5dGlcIixcblx0XHRiYXNlZE9uOiBcIlJlbWlhbnRpc1wiLFxuXHRcdGJyYW5jaE5hbWU6IFwiRmlsaWFsbyBwYXZhZGluaW1hc1wiLFxuXHRcdGJyYW5jaGVzOiBcIkZpbGlhbGFpXCIsXG5cdFx0Y2FuY2VsOiBcIkF0xaFhdWt0aVwiLFxuXHRcdGNvbGxlY3Rpb246IFwiS29sZWtjaWphXCIsXG5cdFx0Y2xlYXI6IFwiU2thaWRydXNcIixcblx0XHRjb2xsZWN0aW9uczogXCJLb2xla2Npam9zXCIsXG5cdFx0Y3JlYXRlUHVsbFJlcXVlc3Q6IFwiU3VrdXJ0aSBpxaF0cmF1a2ltbyB1xb5rbGF1c8SFXCIsXG5cdFx0Y3JlYXRlOiBcIlN1a3VydGlcIixcblx0XHRjdXJyZW50QnJhbmNoOiBcIkRhYmFydGluaXMgZmlsaWFsYXNcIixcblx0XHRkYXNoYm9hcmQ6IFwiUHJpZXRhaXPFsyBza3lkZWxpc1wiLFxuXHRcdFwiZGVsZXRlXCI6IFwiScWhdHJpbnRpXCIsXG5cdFx0ZGVmYXVsdEJyYW5jaDogXCJOdW1hdHl0b2ppIMWhYWthXCIsXG5cdFx0ZGVsZXRlQnJhbmNoOiBcIknFoXRyaW50aSDFoWFrxIVcIixcblx0XHRlZGl0OiBcIlJlZGFndW90aVwiLFxuXHRcdGxvYWRpbmc6IFwixK5rZWxpYW1hXCIsXG5cdFx0bmV3QnJhbmNoOiBcIk5hdWphcyBmaWxpYWxhc1wiLFxuXHRcdG90aGVyQnJhbmNoZXM6IFwiS2l0b3MgxaFha29zXCIsXG5cdFx0cHVsbFJlcXVlc3RzOiBcIknFoXRyYXVrdGkgdcW+a2xhdXNhc1wiLFxuXHRcdHNpbmdsZXRvbjogXCJ2aWVudmlldGlzXCIsXG5cdFx0c2VhcmNoOiBcIkllxaFrb3RpXCIsXG5cdFx0c2luZ2xldG9uczogXCJWaWVuacWhaWFpXCIsXG5cdFx0dGhlQ3VycmVudGx5Q2hlY2tlZE91dEJyYW5jaDogXCLFoGl1byBtZXR1IGnFoXJlZ2lzdHJ1b3RhcyBmaWxpYWxhcy4gUGFzaXJpbmtpdGUgdGFpLCBqZWkgcmVpa2lhIHJlbXRpcyBlc2FtdSBkYXJidSBpxaEgZGFiYXJ0aW7El3MgxaFha29zLlwiLFxuXHRcdHRoZURlZmF1bHRCcmFuY2hJbllvdXJSZXBvc2l0b3J5OiBcIk51bWF0eXRvamkgxaFha2EgasWrc8WzIHNhdWd5a2xvamUuIFBhc2lyaW5raXRlIHRhaSwga2FkIHByYWTEl3R1bcSXdGUga8SFIG5vcnMgbmF1am8sIG5lcHJpa2xhdXNhbsSNaW8gbnVvIGRhYmFydGluxJdzIMWhYWtvcy5cIixcblx0XHRzYXZlOiBcIlN1dGF1cHl0aVwiLFxuXHRcdHZpZXdQdWxsUmVxdWVzdHM6IFwiUGVyxb5pxatyxJdraXRlIGnFoXRyYXVraW1vIHXFvmtsYXVzYXNcIlxuXHR9LFxuXHRcIm5iLU5PXCI6IHtcblx0XHRhZGQ6IFwiTGVnZyB0aWxcIixcblx0XHRiYXNlZE9uOiBcIkJhc2VydCBww6VcIixcblx0XHRicmFuY2hOYW1lOiBcIkZpbGlhbG5hdm5cIixcblx0XHRicmFuY2hlczogXCJHcmVuZXJcIixcblx0XHRjYW5jZWw6IFwiQXZicnl0XCIsXG5cdFx0Y2xlYXI6IFwiVMO4bVwiLFxuXHRcdGNyZWF0ZTogXCJTa2FwZVwiLFxuXHRcdGNvbGxlY3Rpb246IFwiU2FtbGluZ1wiLFxuXHRcdGNvbGxlY3Rpb25zOiBcIlNhbWxpbmdlclwiLFxuXHRcdGNyZWF0ZVB1bGxSZXF1ZXN0OiBcIk9wcHJldHQgcHVsbC1mb3Jlc3DDuHJzZWxcIixcblx0XHRkYXNoYm9hcmQ6IFwiRGFzaGJvcmRcIixcblx0XHRjdXJyZW50QnJhbmNoOiBcIk7DpXbDpnJlbmRlIGdyZW5cIixcblx0XHRkZWZhdWx0QnJhbmNoOiBcIlN0YW5kYXJkIGdyZW5cIixcblx0XHRcImRlbGV0ZVwiOiBcIlNsZXR0XCIsXG5cdFx0ZWRpdDogXCJSZWRpZ2VyZVwiLFxuXHRcdGRlbGV0ZUJyYW5jaDogXCJTbGV0dCBmaWxpYWxcIixcblx0XHRsb2FkaW5nOiBcIkxhc3RlciBpbm5cIixcblx0XHRuZXdCcmFuY2g6IFwiTnkgZ3JlblwiLFxuXHRcdG90aGVyQnJhbmNoZXM6IFwiQW5kcmUgZ3JlbmVyXCIsXG5cdFx0cHVsbFJlcXVlc3RzOiBcIlRyZWtrIGZvcmVzcMO4cnNsZXJcIixcblx0XHRzYXZlOiBcIkxhZ3JlXCIsXG5cdFx0c2VhcmNoOiBcIlPDuGtcIixcblx0XHR0aGVDdXJyZW50bHlDaGVja2VkT3V0QnJhbmNoOiBcIkRlbiB1dHNqZWtrZWRlIGdyZW5lbi4gVmVsZyBkZXR0ZSBodmlzIGR1IHNrYWwgYnlnZ2UgcMOlIGVrc2lzdGVyZW5kZSBhcmJlaWQgZnJhIGdqZWxkZW5kZSBncmVuLlwiLFxuXHRcdHNpbmdsZXRvbjogXCJTaW5nbGV0b25cIixcblx0XHR0aGVEZWZhdWx0QnJhbmNoSW5Zb3VyUmVwb3NpdG9yeTogXCJTdGFuZGFyZGdyZW5lbiBpIGRlcG90ZXQgZGl0dC4gVmVsZyBkZXR0ZSBmb3Igw6Ugc3RhcnRlIG5vZSBueXR0IHNvbSBpa2tlIGVyIGF2aGVuZ2lnIGF2IGRpbiBuw6V2w6ZyZW5kZSBmaWxpYWwuXCIsXG5cdFx0dmlld1B1bGxSZXF1ZXN0czogXCJTZSBwdWxsLWZvcmVzcMO4cnNsZXJcIixcblx0XHRzaW5nbGV0b25zOiBcIlNpbmdsZXRvbmVyXCJcblx0fSxcblx0XCJsdi1MVlwiOiB7XG5cdFx0YWRkOiBcIlBpZXZpZW5vdFwiLFxuXHRcdGJhc2VkT246IFwiQmFsc3RvdGllcyB1elwiLFxuXHRcdGJyYW5jaE5hbWU6IFwiRmlsacSBbGVzIG5vc2F1a3Vtc1wiLFxuXHRcdGJyYW5jaGVzOiBcIk5vemFyZXNcIixcblx0XHRjbGVhcjogXCJOb3TEq3LEq3RcIixcblx0XHRjYW5jZWw6IFwiQXRjZWx0XCIsXG5cdFx0Y29sbGVjdGlvbjogXCJLb2xla2NpamFcIixcblx0XHRjcmVhdGVQdWxsUmVxdWVzdDogXCJJenZlaWRvdCBpenZpbGvFoWFuYXMgcGllcHJhc8SranVtdVwiLFxuXHRcdGNyZWF0ZTogXCJJenZlaWRvdFwiLFxuXHRcdGN1cnJlbnRCcmFuY2g6IFwiUGHFoXJlaXrEk2rEgSBmaWxpxIFsZVwiLFxuXHRcdGRhc2hib2FyZDogXCJNxJNyaW5zdHJ1bWVudHUgcGFuZWxpc1wiLFxuXHRcdGNvbGxlY3Rpb25zOiBcIktvbGVrY2lqYXNcIixcblx0XHRkZWZhdWx0QnJhbmNoOiBcIk5va2x1c8STanVtYSBmaWxpxIFsZVwiLFxuXHRcdFwiZGVsZXRlXCI6IFwiRHrEk3N0XCIsXG5cdFx0ZGVsZXRlQnJhbmNoOiBcIkR6xJNzdCBmaWxpxIFsaVwiLFxuXHRcdGVkaXQ6IFwiUmVkacSjxJN0XCIsXG5cdFx0bmV3QnJhbmNoOiBcIkphdW5hIGZpbGnEgWxlXCIsXG5cdFx0bG9hZGluZzogXCJOb3RpZWsgaWVsxIFkZVwiLFxuXHRcdG90aGVyQnJhbmNoZXM6IFwiQ2l0YXMgZmlsacSBbGVzXCIsXG5cdFx0c2F2ZTogXCJTYWdsYWLEgXRcIixcblx0XHRzZWFyY2g6IFwiTWVrbMSTdFwiLFxuXHRcdHNpbmdsZXRvbjogXCJTaW5nbGV0b25cIixcblx0XHRzaW5nbGV0b25zOiBcIlZpZW50dcS8aVwiLFxuXHRcdHB1bGxSZXF1ZXN0czogXCJJenZpbGvFoWFuYXMgcGllcHJhc8SranVtaVwiLFxuXHRcdHRoZUN1cnJlbnRseUNoZWNrZWRPdXRCcmFuY2g6IFwiUGHFoWxhaWsgaXpyYWtzdMSrdMSBIGZpbGnEgWxlLiBJenbEk2xpZXRpZXMgxaFvLCBqYSB2xJNsYXRpZXMgaXptYW50b3QgZXNvxaFvIGRhcmJ1IG5vIHBhxaFyZWl6xJNqxIFzIGZpbGnEgWxlcy5cIixcblx0XHR0aGVEZWZhdWx0QnJhbmNoSW5Zb3VyUmVwb3NpdG9yeTogXCJOb2tsdXPEk2p1bWEgZmlsacSBbGUgasWrc3UgcmVwb3ppdG9yaWrEgS4gSXp2xJNsaWV0aWVzIMWhbywgbGFpIHPEgWt0dSBrYXV0IGtvIGphdW51LCBrYXMgbmF2IGF0a2FyxKtncyBubyBqxatzdSBwYcWhcmVpesSTasSBcyBmaWxpxIFsZXMuXCIsXG5cdFx0dmlld1B1bGxSZXF1ZXN0czogXCJTa2F0xKt0IGl6dmlsa8WhYW5hcyBwaWVwcmFzxKtqdW11c1wiXG5cdH0sXG5cdFwibmwtTkxcIjoge1xuXHRcdGFkZDogXCJUb2V2b2VnZW5cIixcblx0XHRiYXNlZE9uOiBcIkdlYmFzZWVyZCBvcFwiLFxuXHRcdGJyYW5jaE5hbWU6IFwiRmlsaWFhbCBuYWFtXCIsXG5cdFx0YnJhbmNoZXM6IFwiVGFra2VuXCIsXG5cdFx0Y2FuY2VsOiBcIkFubnVsZXJlblwiLFxuXHRcdGNsZWFyOiBcIkhlbGRlclwiLFxuXHRcdGNvbGxlY3Rpb246IFwiVmVyemFtZWxpbmdcIixcblx0XHRjb2xsZWN0aW9uczogXCJDb2xsZWN0aWVzXCIsXG5cdFx0Y3JlYXRlOiBcIkNyZcOrcmVuXCIsXG5cdFx0Y3JlYXRlUHVsbFJlcXVlc3Q6IFwiUHVsbC1hYW52cmFhZyBtYWtlblwiLFxuXHRcdGRhc2hib2FyZDogXCJEYXNoYm9hcmRcIixcblx0XHRjdXJyZW50QnJhbmNoOiBcIkh1aWRpZ2UgdGFrXCIsXG5cdFx0ZGVmYXVsdEJyYW5jaDogXCJTdGFuZGFhcmQgZmlsaWFhbFwiLFxuXHRcdFwiZGVsZXRlXCI6IFwiVmVyd2lqZGVyZW5cIixcblx0XHRkZWxldGVCcmFuY2g6IFwiRmlsaWFhbCB2ZXJ3aWpkZXJlblwiLFxuXHRcdGVkaXQ6IFwiQmV3ZXJraW5nXCIsXG5cdFx0bG9hZGluZzogXCJMYWRlblwiLFxuXHRcdG5ld0JyYW5jaDogXCJOaWV1d2UgdGFrXCIsXG5cdFx0b3RoZXJCcmFuY2hlczogXCJBbmRlcmUgdGFra2VuXCIsXG5cdFx0cHVsbFJlcXVlc3RzOiBcIlRyZWsgdmVyem9la2VuXCIsXG5cdFx0c2F2ZTogXCJSZWRkZW5cIixcblx0XHRzaW5nbGV0b246IFwiZWVubGluZ1wiLFxuXHRcdHNlYXJjaDogXCJab2VrZW5cIixcblx0XHRzaW5nbGV0b25zOiBcIkVlbmxpbmdlblwiLFxuXHRcdHRoZUN1cnJlbnRseUNoZWNrZWRPdXRCcmFuY2g6IFwiSGV0IG1vbWVudGVlbCB1aXRnZWNoZWNrdGUgZmlsaWFhbC4gS2llcyBkaXQgYWxzIHUgbW9ldCB2b29ydGJvdXdlbiBvcCBiZXN0YWFuZCB3ZXJrIHZhbiBkZSBodWlkaWdlIGJyYW5jaC5cIixcblx0XHR2aWV3UHVsbFJlcXVlc3RzOiBcIkJla2lqayBwdWxsLWFhbnZyYWdlblwiLFxuXHRcdHRoZURlZmF1bHRCcmFuY2hJbllvdXJSZXBvc2l0b3J5OiBcIkRlIHN0YW5kYWFyZCBicmFuY2ggaW4gdXcgcmVwb3NpdG9yeS4gS2llcyBkaXQgb20gaWV0cyBuaWV1d3MgdGUgc3RhcnRlbiBkYXQgbmlldCBhZmhhbmtlbGlqayBpcyB2YW4gdXcgaHVpZGlnZSBicmFuY2hlLlwiXG5cdH0sXG5cdFwicGwtUExcIjoge1xuXHRcdGFkZDogXCJEb2RhxIdcIixcblx0XHRiYXNlZE9uOiBcIk9wYXJ0ZSBuYVwiLFxuXHRcdGJyYW5jaE5hbWU6IFwiTmF6d2EgZmlsaWlcIixcblx0XHRjYW5jZWw6IFwiQW51bG93YcSHXCIsXG5cdFx0YnJhbmNoZXM6IFwiR2HFgsSZemllXCIsXG5cdFx0Y2xlYXI6IFwiV3ljennFm8SHXCIsXG5cdFx0Y29sbGVjdGlvbnM6IFwiS29sZWtjamVcIixcblx0XHRjb2xsZWN0aW9uOiBcIktvbGVrY2phXCIsXG5cdFx0Y3JlYXRlOiBcIlR3b3J6ecSHXCIsXG5cdFx0Y3VycmVudEJyYW5jaDogXCJPYmVjbnkgb2RkemlhxYJcIixcblx0XHRjcmVhdGVQdWxsUmVxdWVzdDogXCJVdHfDs3J6IMW8xIVkYW5pZSDFm2NpxIVnbmnEmWNpYVwiLFxuXHRcdGRlZmF1bHRCcmFuY2g6IFwiT2RkemlhxYIgZG9tecWbbG55XCIsXG5cdFx0ZGFzaGJvYXJkOiBcIlBhbmVsXCIsXG5cdFx0XCJkZWxldGVcIjogXCJVc3V3YcSHXCIsXG5cdFx0bG9hZGluZzogXCJUcndhIMWCYWRvd2FuaWVcIixcblx0XHRkZWxldGVCcmFuY2g6IFwiVXN1xYQgb2RkemlhxYJcIixcblx0XHRlZGl0OiBcIkVkeXRvd2HEh1wiLFxuXHRcdG90aGVyQnJhbmNoZXM6IFwiSW5uZSBnYcWCxJl6aWVcIixcblx0XHRwdWxsUmVxdWVzdHM6IFwixbvEhWRhbmlhIMWbY2nEhWduacSZY2lhXCIsXG5cdFx0c2F2ZTogXCJSYXRvd2HEh1wiLFxuXHRcdG5ld0JyYW5jaDogXCJOb3dhIGdhxYLEhcW6XCIsXG5cdFx0c2VhcmNoOiBcIlN6dWthalwiLFxuXHRcdHNpbmdsZXRvbjogXCJzaW5nZWxcIixcblx0XHRzaW5nbGV0b25zOiBcIlNpbmdsZXRvbnlcIixcblx0XHR0aGVEZWZhdWx0QnJhbmNoSW5Zb3VyUmVwb3NpdG9yeTogXCJEb215xZtsbmEgZ2HFgsSFxbogdyB0d29pbSByZXBvenl0b3JpdW0uIFd5YmllcnogdMSZIG9wY2rEmSwgYWJ5IHJvenBvY3rEhcSHIGNvxZsgbm93ZWdvLCBjbyBuaWUgamVzdCB6YWxlxbxuZSBvZCBiaWXFvMSFY2VqIGdhxYLEmXppLlwiLFxuXHRcdHRoZUN1cnJlbnRseUNoZWNrZWRPdXRCcmFuY2g6IFwiQWt0dWFsbmllIHd5ZXdpZGVuY2pvbm93YW5hIGdhxYLEhcW6LiBXeWJpZXJ6IHTEmSBvcGNqxJksIGplxZtsaSBjaGNlc3ogb3ByemXEhyBzacSZIG5hIGlzdG5pZWrEhWNlaiBwcmFjeSB6IGJpZcW8xIVjZWogZ2HFgsSZemkuXCIsXG5cdFx0dmlld1B1bGxSZXF1ZXN0czogXCJXecWbd2lldGwgxbzEhWRhbmlhIMWbY2nEhWduacSZY2lhXCJcblx0fSxcblx0XCJwdC1CUlwiOiB7XG5cdFx0YWRkOiBcIkFkaWNpb25hclwiLFxuXHRcdGJhc2VkT246IFwiQmFzZWFkbyBlbVwiLFxuXHRcdGJyYW5jaGVzOiBcIkdhbGhvc1wiLFxuXHRcdGJyYW5jaE5hbWU6IFwiTm9tZSBkYSBmaWxpYWxcIixcblx0XHRjYW5jZWw6IFwiQ2FuY2VsYXJcIixcblx0XHRjbGVhcjogXCJMaW1wYXJcIixcblx0XHRjb2xsZWN0aW9uOiBcIkNvbGXDp8Ojb1wiLFxuXHRcdGNvbGxlY3Rpb25zOiBcIkNvbGXDp8O1ZXNcIixcblx0XHRjcmVhdGU6IFwiQ3JpYXJcIixcblx0XHRjcmVhdGVQdWxsUmVxdWVzdDogXCJDcmlhciBzb2xpY2l0YcOnw6NvIHB1bGxcIixcblx0XHRjdXJyZW50QnJhbmNoOiBcImZpbGlhbCBhdHVhbFwiLFxuXHRcdGRlZmF1bHRCcmFuY2g6IFwicmFtbyBwYWRyw6NvXCIsXG5cdFx0ZGFzaGJvYXJkOiBcIlBhaW5lbFwiLFxuXHRcdFwiZGVsZXRlXCI6IFwiRXhjbHVpclwiLFxuXHRcdGRlbGV0ZUJyYW5jaDogXCJFeGNsdWlyIHJhbWlmaWNhw6fDo29cIixcblx0XHRlZGl0OiBcIkVkaXRhclwiLFxuXHRcdG5ld0JyYW5jaDogXCJOb3ZhIGZpbGlhbFwiLFxuXHRcdG90aGVyQnJhbmNoZXM6IFwiT3V0cm9zIHJhbW9zXCIsXG5cdFx0bG9hZGluZzogXCJDYXJyZWdhbmRvXCIsXG5cdFx0c2F2ZTogXCJHdWFyZGFyXCIsXG5cdFx0cHVsbFJlcXVlc3RzOiBcIlJlcXVpc2nDp8O1ZXMgcHVsbFwiLFxuXHRcdHNlYXJjaDogXCJQZXNxdWlzYXJcIixcblx0XHRzaW5nbGV0b25zOiBcIlNvbHRlaXJvc1wiLFxuXHRcdHNpbmdsZXRvbjogXCJzb2x0ZWlyb1wiLFxuXHRcdHRoZUN1cnJlbnRseUNoZWNrZWRPdXRCcmFuY2g6IFwiQSByYW1pZmljYcOnw6NvIGF0dWFsbWVudGUgY29tIGNoZWNrLW91dC4gRXNjb2xoYSBlc3RhIG9ww6fDo28gc2UgcHJlY2lzYXIgY3JpYXIgdW0gdHJhYmFsaG8gZXhpc3RlbnRlIG5hIHJhbWlmaWNhw6fDo28gYXR1YWwuXCIsXG5cdFx0dGhlRGVmYXVsdEJyYW5jaEluWW91clJlcG9zaXRvcnk6IFwiQSByYW1pZmljYcOnw6NvIHBhZHLDo28gZW0gc2V1IHJlcG9zaXTDs3Jpby4gRXNjb2xoYSBpc3NvIHBhcmEgaW5pY2lhciBhbGdvIG5vdm8gcXVlIG7Do28gZGVwZW5kYSBkZSBzdWEgcmFtaWZpY2HDp8OjbyBhdHVhbC5cIixcblx0XHR2aWV3UHVsbFJlcXVlc3RzOiBcIlZlciBzb2xpY2l0YcOnw7VlcyBwdWxsXCJcblx0fSxcblx0XCJwdC1QVFwiOiB7XG5cdFx0YmFzZWRPbjogXCJCYXNlYWRvIGVtXCIsXG5cdFx0YnJhbmNoTmFtZTogXCJOb21lIGRhIGZpbGlhbFwiLFxuXHRcdGFkZDogXCJBZGljaW9uYXJcIixcblx0XHRjbGVhcjogXCJMaW1wYXJcIixcblx0XHRicmFuY2hlczogXCJHYWxob3NcIixcblx0XHRjYW5jZWw6IFwiQ2FuY2VsYXJcIixcblx0XHRjb2xsZWN0aW9uczogXCJDb2xlw6fDtWVzXCIsXG5cdFx0Y29sbGVjdGlvbjogXCJDb2xlw6fDo29cIixcblx0XHRjcmVhdGU6IFwiQ3JpYXJcIixcblx0XHRjdXJyZW50QnJhbmNoOiBcImZpbGlhbCBhdHVhbFwiLFxuXHRcdGNyZWF0ZVB1bGxSZXF1ZXN0OiBcIkNyaWFyIHNvbGljaXRhw6fDo28gcHVsbFwiLFxuXHRcdGRhc2hib2FyZDogXCJQYWluZWxcIixcblx0XHRcImRlbGV0ZVwiOiBcIkV4Y2x1aXJcIixcblx0XHRkZWZhdWx0QnJhbmNoOiBcInJhbW8gcGFkcsOjb1wiLFxuXHRcdGRlbGV0ZUJyYW5jaDogXCJFeGNsdWlyIHJhbWlmaWNhw6fDo29cIixcblx0XHRlZGl0OiBcIkVkaXRhclwiLFxuXHRcdGxvYWRpbmc6IFwiQSBjYXJyZWdhclwiLFxuXHRcdG5ld0JyYW5jaDogXCJOb3ZhIGZpbGlhbFwiLFxuXHRcdG90aGVyQnJhbmNoZXM6IFwiT3V0cm9zIHJhbW9zXCIsXG5cdFx0c2F2ZTogXCJHdWFyZGFyXCIsXG5cdFx0cHVsbFJlcXVlc3RzOiBcIlJlcXVpc2nDp8O1ZXMgcHVsbFwiLFxuXHRcdHNlYXJjaDogXCJQcm9jdXJhclwiLFxuXHRcdHNpbmdsZXRvbjogXCJzb2x0ZWlyb1wiLFxuXHRcdHNpbmdsZXRvbnM6IFwiU29sdGVpcm9zXCIsXG5cdFx0dGhlQ3VycmVudGx5Q2hlY2tlZE91dEJyYW5jaDogXCJBIHJhbWlmaWNhw6fDo28gYXR1YWxtZW50ZSBjb20gY2hlY2stb3V0LiBFc2NvbGhhIGVzdGEgb3DDp8OjbyBzZSBwcmVjaXNhciBjcmlhciB1bSB0cmFiYWxobyBleGlzdGVudGUgbmEgcmFtaWZpY2HDp8OjbyBhdHVhbC5cIixcblx0XHR2aWV3UHVsbFJlcXVlc3RzOiBcIlZlciBzb2xpY2l0YcOnw7VlcyBwdWxsXCIsXG5cdFx0dGhlRGVmYXVsdEJyYW5jaEluWW91clJlcG9zaXRvcnk6IFwiQSByYW1pZmljYcOnw6NvIHBhZHLDo28gZW0gc2V1IHJlcG9zaXTDs3Jpby4gRXNjb2xoYSBpc3NvIHBhcmEgaW5pY2lhciBhbGdvIG5vdm8gcXVlIG7Do28gZGVwZW5kYSBkZSBzdWEgcmFtaWZpY2HDp8OjbyBhdHVhbC5cIlxuXHR9LFxuXHRcInJvLVJPXCI6IHtcblx0XHRhZGQ6IFwiQWTEg3VnYVwiLFxuXHRcdGJyYW5jaE5hbWU6IFwiTnVtZWxlIHN1Y3Vyc2FsZWlcIixcblx0XHRiYXNlZE9uOiBcIkJhemF0IHBlXCIsXG5cdFx0YnJhbmNoZXM6IFwiUmFtdXJpXCIsXG5cdFx0Y2xlYXI6IFwiR29saXJlXCIsXG5cdFx0Y2FuY2VsOiBcIkFudWxhcmVcIixcblx0XHRjb2xsZWN0aW9uOiBcIkNvbGVjdGllXCIsXG5cdFx0Y29sbGVjdGlvbnM6IFwiQ29sZWPIm2lpXCIsXG5cdFx0Y3JlYXRlOiBcIkNyZWFcIixcblx0XHRjcmVhdGVQdWxsUmVxdWVzdDogXCJDcmVhyJtpIGNlcmVyZSBkZSB0cmFnZXJlXCIsXG5cdFx0Y3VycmVudEJyYW5jaDogXCJGaWxpYWxhIGFjdHVhbMSDXCIsXG5cdFx0ZGFzaGJvYXJkOiBcIkJvcmRcIixcblx0XHRkZWZhdWx0QnJhbmNoOiBcIlJhbXVyYSBpbXBsaWNpdMSDXCIsXG5cdFx0XCJkZWxldGVcIjogXCLImHRlcmdlXCIsXG5cdFx0ZGVsZXRlQnJhbmNoOiBcIsiYdGVyZ2XIm2kgcmFtdXJhXCIsXG5cdFx0ZWRpdDogXCJFZGl0YcibaVwiLFxuXHRcdGxvYWRpbmc6IFwiU2Ugw65uY2FyY8SDXCIsXG5cdFx0bmV3QnJhbmNoOiBcIkZpbGlhbGEgbm91YVwiLFxuXHRcdG90aGVyQnJhbmNoZXM6IFwiQWx0ZSByYW11cmlcIixcblx0XHRzYXZlOiBcIlNhbHZhyJtpXCIsXG5cdFx0cHVsbFJlcXVlc3RzOiBcIlNvbGljaXTEg3JpIGRlIHRyYWdlcmVcIixcblx0XHRzZWFyY2g6IFwiQ8SDdXRhcmVcIixcblx0XHRzaW5nbGV0b246IFwiU2luZ2xldG9uXCIsXG5cdFx0c2luZ2xldG9uczogXCJTaW5nbGV0b25zXCIsXG5cdFx0dGhlRGVmYXVsdEJyYW5jaEluWW91clJlcG9zaXRvcnk6IFwiUmFtdXJhIGltcGxpY2l0xIMgZGluIGRlcG96aXR1bCBkdnMuIEFsZWdlyJtpIGFjZXN0IGx1Y3J1IHBlbnRydSBhIMOubmNlcGUgY2V2YSBub3UsIGNhcmUgbnUgZGVwaW5kZSBkZSByYW11cmEgZHZzLiBhY3R1YWzEgy5cIixcblx0XHR0aGVDdXJyZW50bHlDaGVja2VkT3V0QnJhbmNoOiBcIlN1Y3Vyc2FsYSB2ZXJpZmljYXTEgyDDrm4gcHJlemVudC4gQWxlZ2XIm2kgYWNlc3QgbHVjcnUgZGFjxIMgdHJlYnVpZSBzxIMgdsSDIGJhemHIm2kgcGUgbXVuY2EgZXhpc3RlbnTEgyBkaW4gcmFtdXJhIGN1cmVudMSDLlwiLFxuXHRcdHZpZXdQdWxsUmVxdWVzdHM6IFwiVml6dWFsaXphyJtpIHNvbGljaXTEg3JpbGUgZGUgZXh0cmFnZXJlXCJcblx0fSxcblx0XCJydS1SVVwiOiB7XG5cdFx0YWRkOiBcItCU0L7QsdCw0LLQu9GP0YLRjFwiLFxuXHRcdGJhc2VkT246IFwi0J3QsCDQvtGB0L3QvtCy0LVcIixcblx0XHRicmFuY2hOYW1lOiBcItCd0LDQt9Cy0LDQvdC40LUg0YTQuNC70LjQsNC70LBcIixcblx0XHRicmFuY2hlczogXCLQktC10YLQstC4XCIsXG5cdFx0Y2FuY2VsOiBcItCe0YLQvNC10L3QsFwiLFxuXHRcdGNsZWFyOiBcItCe0YfQuNGB0YLQuNGC0YxcIixcblx0XHRjb2xsZWN0aW9uOiBcItCa0L7Qu9C70LXQutGG0LjRj1wiLFxuXHRcdGNvbGxlY3Rpb25zOiBcItCa0L7Qu9C70LXQutGG0LjQuFwiLFxuXHRcdGNyZWF0ZTogXCLQodC+0LfQtNCw0LLQsNGC0YxcIixcblx0XHRjcmVhdGVQdWxsUmVxdWVzdDogXCLQodC+0LfQtNCw0YLRjCDQt9Cw0L/RgNC+0YEg0L3QsCDQstC60LvRjtGH0LXQvdC40LVcIixcblx0XHRjdXJyZW50QnJhbmNoOiBcItCi0LXQutGD0YnQsNGPINCy0LXRgtCy0YxcIixcblx0XHRkYXNoYm9hcmQ6IFwi0J/QsNC90LXQu9GMINC/0YDQuNCx0L7RgNC+0LJcIixcblx0XHRcImRlbGV0ZVwiOiBcItCj0LTQsNC70LjRgtGMXCIsXG5cdFx0ZGVmYXVsdEJyYW5jaDogXCLQktC10YLQutCwINC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOXCIsXG5cdFx0ZGVsZXRlQnJhbmNoOiBcItCj0LTQsNC70LjRgtGMINCy0LXRgtC60YNcIixcblx0XHRlZGl0OiBcItCg0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMXCIsXG5cdFx0bG9hZGluZzogXCLQl9Cw0LPRgNGD0LfQutCwXCIsXG5cdFx0bmV3QnJhbmNoOiBcItCd0L7QstCw0Y8g0LLQtdGC0LrQsFwiLFxuXHRcdHB1bGxSZXF1ZXN0czogXCLQn9GD0LvQuy3RgNC10LrQstC10YHRgtGLXCIsXG5cdFx0b3RoZXJCcmFuY2hlczogXCLQlNGA0YPQs9C40LUg0YTQuNC70LjQsNC70YtcIixcblx0XHRzYXZlOiBcItCh0L7RhdGA0LDQvdGP0YLRjFwiLFxuXHRcdHNlYXJjaDogXCLQn9C+0LjRgdC6XCIsXG5cdFx0c2luZ2xldG9uczogXCLQntC00LjQvdC+0YfQutC4XCIsXG5cdFx0c2luZ2xldG9uOiBcItCh0LjQvdCz0LvRgtC+0L1cIixcblx0XHR0aGVEZWZhdWx0QnJhbmNoSW5Zb3VyUmVwb3NpdG9yeTogXCLQktC10YLQutCwINC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOINCyINCy0LDRiNC10Lwg0YDQtdC/0L7Qt9C40YLQvtGA0LjQuC4g0JLRi9Cx0LXRgNC40YLQtSDRjdGC0L4sINGH0YLQvtCx0Ysg0L3QsNGH0LDRgtGMINGH0YLQvi3RgtC+INC90L7QstC+0LUsINC90LUg0LfQsNCy0LjRgdGP0YnQtdC1INC+0YIg0LLQsNGI0LXQuSDRgtC10LrRg9GJ0LXQuSDQstC10YLQutC4LlwiLFxuXHRcdHZpZXdQdWxsUmVxdWVzdHM6IFwi0J/QvtGB0LzQvtGC0YDQtdGC0Ywg0L/Rg9C7LdGA0LXQutCy0LXRgdGC0YtcIixcblx0XHR0aGVDdXJyZW50bHlDaGVja2VkT3V0QnJhbmNoOiBcItCi0LXQutGD0YnQsNGPINC/0YDQvtCy0LXRgNC10L3QvdCw0Y8g0LLQtdGC0LLRjC4g0JLRi9Cx0LXRgNC40YLQtSDRjdGC0L4sINC10YHQu9C4INCy0LDQvCDQvdGD0LbQvdC+INC+0L/QuNGA0LDRgtGM0YHRjyDQvdCwINGB0YPRidC10YHRgtCy0YPRjtGJ0YPRjiDRgNCw0LHQvtGC0YMg0LjQtyDRgtC10LrRg9GJ0LXQuSDQstC10YLQutC4LlwiXG5cdH0sXG5cdFwic2wtU0lcIjoge1xuXHRcdGFkZDogXCJEb2RhalwiLFxuXHRcdGJhc2VkT246IFwiVGVtZWxqaSBuYVwiLFxuXHRcdGJyYW5jaE5hbWU6IFwiSW1lIHBvZHJ1xb5uaWNlXCIsXG5cdFx0YnJhbmNoZXM6IFwiUG9kcnXFvm5pY2VcIixcblx0XHRjYW5jZWw6IFwiUHJla2xpxI1pXCIsXG5cdFx0Y2xlYXI6IFwiSmFzZW5cIixcblx0XHRjb2xsZWN0aW9uOiBcIlpiaXJrYVwiLFxuXHRcdGNvbGxlY3Rpb25zOiBcIlpiaXJrZVwiLFxuXHRcdGNyZWF0ZVB1bGxSZXF1ZXN0OiBcIlVzdHZhcmkgemFodGV2byB6YSB2bGVrb1wiLFxuXHRcdGNyZWF0ZTogXCJVc3R2YXJpXCIsXG5cdFx0Y3VycmVudEJyYW5jaDogXCJUcmVudXRuYSB2ZWphXCIsXG5cdFx0ZGFzaGJvYXJkOiBcIk5hZHpvcm5hIHBsb8WhxI1hXCIsXG5cdFx0ZGVmYXVsdEJyYW5jaDogXCJQcml2emV0YSB2ZWphXCIsXG5cdFx0XCJkZWxldGVcIjogXCJJemJyacWhaVwiLFxuXHRcdGRlbGV0ZUJyYW5jaDogXCJJemJyacWhaSB2ZWpvXCIsXG5cdFx0ZWRpdDogXCJVcmVkaVwiLFxuXHRcdGxvYWRpbmc6IFwiTmFsYWdhbmplXCIsXG5cdFx0bmV3QnJhbmNoOiBcIk5vdmEgcG9kcnXFvm5pY2FcIixcblx0XHRvdGhlckJyYW5jaGVzOiBcIkRydWdlIHZlamVcIixcblx0XHRwdWxsUmVxdWVzdHM6IFwiWmFodGV2ZSB6YSB2bGXEjWVuamVcIixcblx0XHRzYXZlOiBcIlNocmFuaVwiLFxuXHRcdHNlYXJjaDogXCJJc2thbmplXCIsXG5cdFx0c2luZ2xldG9uOiBcIlNpbmdsZXRvblwiLFxuXHRcdHNpbmdsZXRvbnM6IFwiU2Ftc2tpXCIsXG5cdFx0dGhlQ3VycmVudGx5Q2hlY2tlZE91dEJyYW5jaDogXCJUcmVudXRubyBvZGphdmxqZW5hIHBvZHJ1xb5uaWNhLiBUbyBpemJlcml0ZSwgxI1lIG1vcmF0ZSBncmFkaXRpIG5hIG9ic3RvamXEjWVtIGRlbHUgaXogdHJlbnV0bmUgdmVqZS5cIixcblx0XHR0aGVEZWZhdWx0QnJhbmNoSW5Zb3VyUmVwb3NpdG9yeTogXCJQcml2emV0YSB2ZWphIHYgdmHFoWVtIHNrbGFkacWhxI11LiBJemJlcml0ZSB0bywgZGEgemHEjW5ldGUgbmVrYWogbm92ZWdhLCBrYXIgbmkgb2R2aXNubyBvZCB2YcWhZSB0cmVudXRuZSB2ZWplLlwiLFxuXHRcdHZpZXdQdWxsUmVxdWVzdHM6IFwiT2dsZWp0ZSBzaSB6YWh0ZXZlIHphIHZsZcSNZW5qZVwiXG5cdH0sXG5cdFwic3ItU1BcIjoge1xuXHRcdGFkZDogXCLQlNC+0LTQsNGC0LhcIixcblx0XHRiYXNlZE9uOiBcItCd0LAg0LHQsNC30LhcIixcblx0XHRicmFuY2hOYW1lOiBcItCd0LDQt9C40LIg0L7Qs9GA0LDQvdC60LBcIixcblx0XHRicmFuY2hlczogXCLQntCz0YDQsNC90YbQuFwiLFxuXHRcdGNhbmNlbDogXCLQn9C+0L3QuNGI0YLQuNGC0LgsINC+0YLQutCw0LfQsNGC0LhcIixcblx0XHRjbGVhcjogXCJJemJyacWhaVwiLFxuXHRcdGNvbGxlY3Rpb246IFwi0KbQvtC70LvQtdGG0YLQuNC+0L1cIixcblx0XHRjb2xsZWN0aW9uczogXCLQl9Cx0LjRgNC60LVcIixcblx0XHRjcmVhdGVQdWxsUmVxdWVzdDogXCLQmtGA0LXQuNGA0LDRmNGC0LUg0LfQsNGF0YLQtdCyINC30LAg0L/QvtCy0LvQsNGH0LXRmtC1XCIsXG5cdFx0Y3JlYXRlOiBcItCa0YDQtdC40YDQsNGYXCIsXG5cdFx0Y3VycmVudEJyYW5jaDogXCLQotGA0LXQvdGD0YLQvdCwINCz0YDQsNC90LBcIixcblx0XHRkZWZhdWx0QnJhbmNoOiBcItCf0L7QtNGA0LDQt9GD0LzQtdCy0LDQvdCwINCz0YDQsNC90LBcIixcblx0XHRkYXNoYm9hcmQ6IFwi0JrQvtC80LDQvdC00L3QsCDRgtCw0LHQu9CwXCIsXG5cdFx0XCJkZWxldGVcIjogXCLQmNC30LHRgNC40YjQuFwiLFxuXHRcdGRlbGV0ZUJyYW5jaDogXCLQntCx0YDQuNGI0Lgg0LPRgNCw0L3Rg1wiLFxuXHRcdGVkaXQ6IFwi0KPRgNC10LTQuNGC0LhcIixcblx0XHRsb2FkaW5nOiBcIlXEjWl0YXZhbVwiLFxuXHRcdG5ld0JyYW5jaDogXCLQndC+0LLQsCDQs9GA0LDQvdCwXCIsXG5cdFx0b3RoZXJCcmFuY2hlczogXCLQntGB0YLQsNC70LUg0LPRgNCw0L3QtVwiLFxuXHRcdHB1bGxSZXF1ZXN0czogXCLQl9Cw0YXRgtC10LLQuCDQt9CwINC/0L7QstC70LDRh9C10ZrQtVwiLFxuXHRcdHNlYXJjaDogXCJQcmV0cmFnYVwiLFxuXHRcdHNhdmU6IFwi0YHQsNGH0YPQstCw0YLQuFwiLFxuXHRcdHNpbmdsZXRvbjogXCLQodC40L3Qs9C70LXRgtC+0L1cIixcblx0XHR0aGVDdXJyZW50bHlDaGVja2VkT3V0QnJhbmNoOiBcItCi0YDQtdC90YPRgtC90L4g0L7QtNGY0LDQstGZ0LXQvdCwINGE0LjQu9C40ZjQsNC70LAuINCY0LfQsNCx0LXRgNC40YLQtSDQvtCy0L4g0LDQutC+INGC0YDQtdCx0LAg0LTQsCDQvdCw0LTQvtCz0YDQsNC00LjRgtC1INC/0L7RgdGC0L7RmNC10ZvQuCDRgNCw0LQg0LjQtyDRgtGA0LXQvdGD0YLQvdC1INCz0YDQsNC90LUuXCIsXG5cdFx0c2luZ2xldG9uczogXCLQodC40L3Qs9C70LXRgtC+0L3RgVwiLFxuXHRcdHRoZURlZmF1bHRCcmFuY2hJbllvdXJSZXBvc2l0b3J5OiBcItCf0L7QtNGA0LDQt9GD0LzQtdCy0LDQvdCwINCz0YDQsNC90LAg0YMg0LLQsNGI0LXQvCDRgdC/0YDQtdC80LjRiNGC0YMuINCY0LfQsNCx0LXRgNC40YLQtSDQvtCy0L4g0LTQsCDQt9Cw0L/QvtGH0L3QtdGC0LUg0L3QtdGI0YLQviDQvdC+0LLQviDRiNGC0L4g0L3QtSDQt9Cw0LLQuNGB0Lgg0L7QtCDQstCw0YjQtSDRgtGA0LXQvdGD0YLQvdC1INCz0YDQsNC90LUuXCIsXG5cdFx0dmlld1B1bGxSZXF1ZXN0czogXCLQn9GA0LXQs9C70LXQtNCw0ZjRgtC1INC30LDRhdGC0LXQstC1INC30LAg0L/QvtCy0LvQsNGH0LXRmtC10LxcIlxuXHR9LFxuXHRcInRyLVRSXCI6IHtcblx0XHRhZGQ6IFwiQXZicnl0XCIsXG5cdFx0YmFzZWRPbjogXCJEYXlhbMSxXCIsXG5cdFx0YnJhbmNoTmFtZTogXCLFn3ViZSBhZMSxXCIsXG5cdFx0YnJhbmNoZXM6IFwixZ51YmVsZXJcIixcblx0XHRjYW5jZWw6IFwiaXB0YWwgZXRtZWtcIixcblx0XHRjbGVhcjogXCJUZW1pemxlXCIsXG5cdFx0Y29sbGVjdGlvbjogXCJUb3BsYW1ha1wiLFxuXHRcdGNvbGxlY3Rpb25zOiBcIktvbGVrc2l5b25sYXJcIixcblx0XHRjcmVhdGU6IFwiWWFyYXRtYWtcIixcblx0XHRjcmVhdGVQdWxsUmVxdWVzdDogXCLDh2VrbWUgaXN0ZcSfaSBvbHXFn3R1clwiLFxuXHRcdGN1cnJlbnRCcmFuY2g6IFwiTWV2Y3V0IMWfdWJlXCIsXG5cdFx0ZGVmYXVsdEJyYW5jaDogXCJ2YXJzYXnEsWxhbiBkYWxcIixcblx0XHRkYXNoYm9hcmQ6IFwiR8O2c3RlcmdlIFBhbmVsaVwiLFxuXHRcdFwiZGVsZXRlXCI6IFwiU2lsbWVrXCIsXG5cdFx0bG9hZGluZzogXCJZw7xrbGVuaXlvclwiLFxuXHRcdGVkaXQ6IFwiRMO8emVubGVtZWtcIixcblx0XHRkZWxldGVCcmFuY2g6IFwixZ51YmV5aSBzaWxcIixcblx0XHRuZXdCcmFuY2g6IFwiWWVuaSBkYWxcIixcblx0XHRwdWxsUmVxdWVzdHM6IFwiw4dla21lIGlzdGVrbGVyaVwiLFxuXHRcdG90aGVyQnJhbmNoZXM6IFwiRGnEn2VyIMWfdWJlbGVyXCIsXG5cdFx0c2F2ZTogXCJLYXlkZXRtZWtcIixcblx0XHRzZWFyY2g6IFwiQXJhXCIsXG5cdFx0c2luZ2xldG9uOiBcIlRla2lsXCIsXG5cdFx0c2luZ2xldG9uczogXCJTaW5nbGV0b24nbGFyXCIsXG5cdFx0dGhlQ3VycmVudGx5Q2hlY2tlZE91dEJyYW5jaDogXCLFnnUgYW5kYSBrb250cm9sIGVkaWxlbiDFn3ViZS4gR2XDp2VybGkgZGFsZGFraSBtZXZjdXQgacWfaSBnZWxpxZ90aXJtZW5peiBnZXJla2l5b3JzYSBidW51IHNlw6dpbi5cIixcblx0XHR0aGVEZWZhdWx0QnJhbmNoSW5Zb3VyUmVwb3NpdG9yeTogXCJEZXBvbnV6ZGFraSB2YXJzYXnEsWxhbiDFn3ViZS4gTWV2Y3V0IMWfdWJlbml6ZSBiYcSfbMSxIG9sbWF5YW4geWVuaSBiaXIgxZ9leSBiYcWfbGF0bWFrIGnDp2luIGJ1bnUgc2XDp2luLlwiLFxuXHRcdHZpZXdQdWxsUmVxdWVzdHM6IFwiw4dla21lIGlzdGVrbGVyaW5pIGfDtnLDvG50w7xsZVwiXG5cdH0sXG5cdFwic3YtU0VcIjoge1xuXHRcdGJhc2VkT246IFwiQmFzZXJhdCBww6VcIixcblx0XHRhZGQ6IFwiTMOkZ2cgdGlsbFwiLFxuXHRcdGJyYW5jaE5hbWU6IFwiRmlsaWFsZW5zIG5hbW5cIixcblx0XHRjYW5jZWw6IFwi0J/QvtC90LjRiNGC0LjRgtC4LCDQvtGC0LrQsNC30LDRgtC4XCIsXG5cdFx0YnJhbmNoZXM6IFwiR3JlbmFyXCIsXG5cdFx0Y2xlYXI6IFwiUmVuc2FcIixcblx0XHRjb2xsZWN0aW9uczogXCJTYW1saW5nYXJcIixcblx0XHRjb2xsZWN0aW9uOiBcIlNhbWxpbmdcIixcblx0XHRjcmVhdGU6IFwiU2thcGFcIixcblx0XHRjcmVhdGVQdWxsUmVxdWVzdDogXCJTa2FwYSBwdWxsLWbDtnJmcsOlZ2FuXCIsXG5cdFx0Y3VycmVudEJyYW5jaDogXCJOdXZhcmFuZGUgZ3JlblwiLFxuXHRcdGRhc2hib2FyZDogXCJpbnN0cnVtZW50YnLDpGRhXCIsXG5cdFx0ZGVmYXVsdEJyYW5jaDogXCJTdGFuZGFyZGdyZW5cIixcblx0XHRcImRlbGV0ZVwiOiBcIlJhZGVyYVwiLFxuXHRcdGRlbGV0ZUJyYW5jaDogXCJUYSBib3J0IGdyZW5cIixcblx0XHRlZGl0OiBcIlJlZGlnZXJhXCIsXG5cdFx0bG9hZGluZzogXCJMw6RzZXIgaW5cIixcblx0XHRuZXdCcmFuY2g6IFwiTnkgZ3JlblwiLFxuXHRcdHB1bGxSZXF1ZXN0czogXCJEcmEgZsO2cmZyw6VnbmluZ2FyXCIsXG5cdFx0b3RoZXJCcmFuY2hlczogXCJBbmRyYSBncmVuYXJcIixcblx0XHRzYXZlOiBcIlNwYXJhXCIsXG5cdFx0c2VhcmNoOiBcIlPDtmtcIixcblx0XHRzaW5nbGV0b246IFwiU2luZ2xldG9uXCIsXG5cdFx0c2luZ2xldG9uczogXCJTaW5nbGFyXCIsXG5cdFx0dGhlQ3VycmVudGx5Q2hlY2tlZE91dEJyYW5jaDogXCJEZW4gdXRjaGVja2FkZSBmaWxpYWxlbi4gVsOkbGogZGV0dGEgb20gZHUgYmVow7Z2ZXIgYnlnZ2EgcMOlIGJlZmludGxpZ3QgYXJiZXRlIGZyw6VuIGRlbiBha3R1ZWxsYSBncmVuZW4uXCIsXG5cdFx0dGhlRGVmYXVsdEJyYW5jaEluWW91clJlcG9zaXRvcnk6IFwiU3RhbmRhcmRncmVuZW4gaSBkaXR0IGFya2l2LiBWw6RsaiBkZXR0YSBmw7ZyIGF0dCBzdGFydGEgbsOlZ290IG55dHQgc29tIGludGUgw6RyIGJlcm9lbmRlIGF2IGRpbiBudXZhcmFuZGUgZmlsaWFsLlwiLFxuXHRcdHZpZXdQdWxsUmVxdWVzdHM6IFwiVmlzYSBwdWxsLWbDtnJmcsOlZ25pbmdhclwiXG5cdH0sXG5cdFwidWstVUFcIjoge1xuXHRcdGJhc2VkT246IFwi0J3QsCDQvtGB0L3QvtCy0ZZcIixcblx0XHRhZGQ6IFwi0LTQvtC00LDRgtC4XCIsXG5cdFx0YnJhbmNoTmFtZTogXCLQndCw0LfQstCwINCz0ZbQu9C60LhcIixcblx0XHRicmFuY2hlczogXCLQktGW0LTQtNGW0LvQtdC90L3Rj1wiLFxuXHRcdGNhbmNlbDogXCLRgdC60LDRgdGD0LLQsNGC0LhcIixcblx0XHRjbGVhcjogXCLQntGH0LjRgdGC0LjRgtC4XCIsXG5cdFx0Y29sbGVjdGlvbjogXCLQmtC+0LvQtdC60YbRltGPXCIsXG5cdFx0Y29sbGVjdGlvbnM6IFwi0JrQvtC70LXQutGG0ZbRl1wiLFxuXHRcdGNyZWF0ZTogXCLQodGC0LLQvtGA0LjRgtC4XCIsXG5cdFx0Y3JlYXRlUHVsbFJlcXVlc3Q6IFwi0KHRgtCy0L7RgNC40YLQuCDQt9Cw0L/QuNGCINC90LAg0L7RgtGA0LjQvNCw0L3QvdGPXCIsXG5cdFx0ZGFzaGJvYXJkOiBcItCf0LDQvdC10LvRjCDQv9GA0LjQu9Cw0LTRltCyXCIsXG5cdFx0Y3VycmVudEJyYW5jaDogXCLQn9C+0YLQvtGH0L3QtSDQstGW0LTQtNGW0LvQtdC90L3Rj1wiLFxuXHRcdGRlZmF1bHRCcmFuY2g6IFwi0JPRltC70LrQsCDQt9CwINC30LDQvNC+0LLRh9GD0LLQsNC90L3Rj9C8XCIsXG5cdFx0XCJkZWxldGVcIjogXCLQktC40LTQsNC70LjRgtC4XCIsXG5cdFx0ZGVsZXRlQnJhbmNoOiBcItCS0LjQtNCw0LvQuNGC0Lgg0LPRltC70LrRg1wiLFxuXHRcdGVkaXQ6IFwi0KDQtdC00LDQs9GD0LLQsNGC0LhcIixcblx0XHRsb2FkaW5nOiBcItCX0LDQstCw0L3RgtCw0LbQtdC90L3Rj1wiLFxuXHRcdG5ld0JyYW5jaDogXCLQndC+0LLQsCDQs9GW0LvQutCwXCIsXG5cdFx0b3RoZXJCcmFuY2hlczogXCLQhtC90YjRliDQs9GW0LvQutC4XCIsXG5cdFx0cHVsbFJlcXVlc3RzOiBcItCX0LDQv9C40YLQuCDQvdCwINCy0LjRgtGP0LPRg9Cy0LDQvdC90Y9cIixcblx0XHRzYXZlOiBcItC30LHQtdGA0LXQs9GC0LhcIixcblx0XHRzZWFyY2g6IFwi0J/QvtGI0YPQulwiLFxuXHRcdHNpbmdsZXRvbnM6IFwi0J7QtNC40L3QvtGH0LrQuFwiLFxuXHRcdHNpbmdsZXRvbjogXCLQodC40L3Qs9C70YLQvtC9XCIsXG5cdFx0dGhlQ3VycmVudGx5Q2hlY2tlZE91dEJyYW5jaDogXCLQn9C+0YLQvtGH0L3QsCDQv9C10YDQtdCy0ZbRgNC10L3QsCDQs9GW0LvQutCwLiDQktC40LHQtdGA0ZbRgtGMINGG0LUsINGP0LrRidC+INCy0LDQvCDQv9C+0YLRgNGW0LHQvdC+INGB0YLQstC+0YDQuNGC0Lgg0L3QsCDQvtGB0L3QvtCy0ZYg0ZbRgdC90YPRjtGH0L7RlyDRgNC+0LHQvtGC0Lgg0Lcg0L/QvtGC0L7Rh9C90L7RlyDQs9GW0LvQutC4LlwiLFxuXHRcdHRoZURlZmF1bHRCcmFuY2hJbllvdXJSZXBvc2l0b3J5OiBcItCh0YLQsNC90LTQsNGA0YLQvdCwINCz0ZbQu9C60LAg0YMg0LLQsNGI0L7QvNGDINGB0YXQvtCy0LjRidGWLiDQktC40LHQtdGA0ZbRgtGMINGG0LUsINGJ0L7QsSDQv9C+0YfQsNGC0Lgg0YnQvtGB0Ywg0L3QvtCy0LUsINGJ0L4g0L3QtSDQt9Cw0LvQtdC20LjRgtGMINCy0ZbQtCDQstCw0YjQvtGXINC/0L7RgtC+0YfQvdC+0Zcg0LPRltC70LrQuC5cIixcblx0XHR2aWV3UHVsbFJlcXVlc3RzOiBcItCf0LXRgNC10LPQu9GP0LQg0LfQsNC/0LjRgtGW0LIg0L3QsCDQvtGC0YDQuNC80LDQvdC90Y9cIlxuXHR9LFxuXHRcInpoLUNOXCI6IHtcblx0XHRhZGQ6IFwi5re75YqgXCIsXG5cdFx0YmFzZWRPbjogXCLln7rkuo5cIixcblx0XHRicmFuY2hOYW1lOiBcIuWIhuW6l+WQjeensFwiLFxuXHRcdGNhbmNlbDogXCLlj5bmtohcIixcblx0XHRicmFuY2hlczogXCLliIbmlK/mnLrmnoRcIixcblx0XHRjbGVhcjogXCLpgI/mmI5cIixcblx0XHRjcmVhdGU6IFwi5Yib6YCgXCIsXG5cdFx0Y29sbGVjdGlvbjogXCLmlLbol49cIixcblx0XHRjb2xsZWN0aW9uczogXCLmlLbol4/lk4FcIixcblx0XHRjcmVhdGVQdWxsUmVxdWVzdDogXCLliJvlu7rmi4nlj5bor7fmsYJcIixcblx0XHRjdXJyZW50QnJhbmNoOiBcIuW9k+WJjeWIhuaUr1wiLFxuXHRcdGRhc2hib2FyZDogXCLku6rooajmnb9cIixcblx0XHRkZWZhdWx0QnJhbmNoOiBcIum7mOiupOWIhuaUr1wiLFxuXHRcdFwiZGVsZXRlXCI6IFwi5Yig6ZmkXCIsXG5cdFx0ZGVsZXRlQnJhbmNoOiBcIuWIoOmZpOWIhuaUr1wiLFxuXHRcdGVkaXQ6IFwi57yW6L6RXCIsXG5cdFx0bG9hZGluZzogXCLmraPlnKjliqDovb1cIixcblx0XHRuZXdCcmFuY2g6IFwi5paw5YiG6KGMXCIsXG5cdFx0b3RoZXJCcmFuY2hlczogXCLlhbbku5bliIbooYxcIixcblx0XHRzYXZlOiBcIuiKguecgVwiLFxuXHRcdHB1bGxSZXF1ZXN0czogXCLmi4nlj5bor7fmsYJcIixcblx0XHRzZWFyY2g6IFwi5pCc57SiXCIsXG5cdFx0c2luZ2xldG9uczogXCLljZXkvotcIixcblx0XHRzaW5nbGV0b246IFwi5Y2V5L6LXCIsXG5cdFx0dGhlQ3VycmVudGx5Q2hlY2tlZE91dEJyYW5jaDogXCLlvZPliY3nrb7lh7rnmoTliIbmlK/jgIIg5aaC5p6c5oKo6ZyA6KaB5Zyo5b2T5YmN5YiG5pSv55qE546w5pyJ5bel5L2c55qE5Z+656GA5LiK5p6E5bu677yM6K+36YCJ5oup5q2k6aG544CCXCIsXG5cdFx0dGhlRGVmYXVsdEJyYW5jaEluWW91clJlcG9zaXRvcnk6IFwi5a2Y5YKo5bqT5Lit55qE6buY6K6k5YiG5pSv44CCIOmAieaLqeatpOmAiemhueWPr+W8gOWni+S4gOS6m+S4jeS+nei1luS6juW9k+WJjeWIhuaUr+eahOaWsOaTjeS9nOOAglwiLFxuXHRcdHZpZXdQdWxsUmVxdWVzdHM6IFwi5p+l55yL5ouJ5Y+W6K+35rGCXCJcblx0fSxcblx0XCJ6aC1UV1wiOiB7XG5cdFx0YWRkOiBcIua3u+WKoFwiLFxuXHRcdGJhc2VkT246IFwi5Z+65pa8XCIsXG5cdFx0YnJhbmNoTmFtZTogXCLliIblupflkI3nqLFcIixcblx0XHRicmFuY2hlczogXCLliIbmlK/mqZ/mp4tcIixcblx0XHRjbGVhcjogXCLmuIXpmaRcIixcblx0XHRjYW5jZWw6IFwi5Y+W5raIXCIsXG5cdFx0Y29sbGVjdGlvbjogXCLmlLbol49cIixcblx0XHRjb2xsZWN0aW9uczogXCLmlLbol4/lk4FcIixcblx0XHRjcmVhdGU6IFwi5Ym16YCgXCIsXG5cdFx0Y3JlYXRlUHVsbFJlcXVlc3Q6IFwi5Ym15bu65ouJ5Y+W6KuL5rGCXCIsXG5cdFx0Y3VycmVudEJyYW5jaDogXCLnlbbliY3liIbmlK9cIixcblx0XHRkYXNoYm9hcmQ6IFwi5YSA6KGo5p2/XCIsXG5cdFx0XCJkZWxldGVcIjogXCLliKrpmaRcIixcblx0XHRkZWxldGVCcmFuY2g6IFwi5Yiq6Zmk5YiG5pSvXCIsXG5cdFx0ZWRpdDogXCLnt6jovK9cIixcblx0XHRsb2FkaW5nOiBcIuato+WcqOi8ieWFpVwiLFxuXHRcdG5ld0JyYW5jaDogXCLmlrDliIbooYxcIixcblx0XHRkZWZhdWx0QnJhbmNoOiBcIum7mOiqjeWIhuaUr1wiLFxuXHRcdG90aGVyQnJhbmNoZXM6IFwi5YW25LuW5YiG6KGMXCIsXG5cdFx0cHVsbFJlcXVlc3RzOiBcIuaLieWPluiri+axglwiLFxuXHRcdHNhdmU6IFwi56+A55yBXCIsXG5cdFx0c2VhcmNoOiBcIuaQnOWwi1wiLFxuXHRcdHNpbmdsZXRvbjogXCLllq7kvotcIixcblx0XHRzaW5nbGV0b25zOiBcIuWWruS+i1wiLFxuXHRcdHRoZUN1cnJlbnRseUNoZWNrZWRPdXRCcmFuY2g6IFwi55W25YmN57C95Ye655qE5YiG5pSv44CCIOWmguaenOaCqOmcgOimgeWcqOeVtuWJjeWIhuaUr+eahOePvuacieW3peS9nOeahOWfuuekjuS4iuani+W7uu+8jOiri+mBuOaTh+atpOmgheOAglwiLFxuXHRcdHRoZURlZmF1bHRCcmFuY2hJbllvdXJSZXBvc2l0b3J5OiBcIuWtmOWEsuW6q+S4reeahOm7mOiqjeWIhuaUr+OAgiDpgbjmk4fmraTpgbjpoIXlj6/plovlp4vkuIDkupvkuI3kvp3os7TmlrznlbbliY3liIbmlK/nmoTmlrDmk43kvZzjgIJcIixcblx0XHR2aWV3UHVsbFJlcXVlc3RzOiBcIuafpeeci+aLieWPluiri+axglwiXG5cdH0sXG5cdFwic2stU0tcIjoge1xuXHRcdGFkZDogXCJQcmlkYcWlXCIsXG5cdFx0YmFzZWRPbjogXCJaYWxvxb5lbsOpIG5hXCIsXG5cdFx0YnJhbmNoTmFtZTogXCJNZW5vIHBvYm/EjWt5XCIsXG5cdFx0YnJhbmNoZXM6IFwiUG9ib8SNa3lcIixcblx0XHRjbGVhcjogXCJWeW1hemHFpVwiLFxuXHRcdGNhbmNlbDogXCJacnXFoWnFpVwiLFxuXHRcdGNvbGxlY3Rpb25zOiBcInpiaWVya3lcIixcblx0XHRjb2xsZWN0aW9uOiBcIlpiaWVya2FcIixcblx0XHRjcmVhdGU6IFwiVnl0dm9ydGVcIixcblx0XHRkYXNoYm9hcmQ6IFwiRGFzaGJvYXJkXCIsXG5cdFx0Y3VycmVudEJyYW5jaDogXCJBa3R1w6FsbmEgcG9ib8SNa2FcIixcblx0XHRkZWZhdWx0QnJhbmNoOiBcIlByZWR2b2xlbsOhIHZldHZhXCIsXG5cdFx0XCJkZWxldGVcIjogXCJPZHN0csOhbmnFpVwiLFxuXHRcdGRlbGV0ZUJyYW5jaDogXCJPZHN0csOhbmnFpSB2ZXR2dVwiLFxuXHRcdGVkaXQ6IFwiVXByYXZpxaVcIixcblx0XHRsb2FkaW5nOiBcIk5hxI3DrXRhdmEgc2FcIixcblx0XHRuZXdCcmFuY2g6IFwiTm92w6EgcG9ib8SNa2FcIixcblx0XHRvdGhlckJyYW5jaGVzOiBcIk9zdGF0bsOpIHBvYm/EjWt5XCIsXG5cdFx0cHVsbFJlcXVlc3RzOiBcIlZ5dGlhaG5pdGUgxb5pYWRvc3RpXCIsXG5cdFx0c2F2ZTogXCJVbG/FvmnFpVwiLFxuXHRcdHNlYXJjaDogXCJWeWjEvmFkw6F2YcWlXCIsXG5cdFx0c2luZ2xldG9uOiBcIlNpbmdsZXRvblwiLFxuXHRcdHNpbmdsZXRvbnM6IFwiU2luZ2xldG9uc1wiLFxuXHRcdHRoZUN1cnJlbnRseUNoZWNrZWRPdXRCcmFuY2g6IFwiQWt0dcOhbG5lIG9kaGzDoXNlbsOhIHBvYm/EjWthLiBUw7p0byBtb8W+bm9zxaUgdnliZXJ0ZSwgYWsgcG90cmVidWpldGUgc3RhdmHFpSBuYSBleGlzdHVqw7pjZWogcHLDoWNpIHogYWt0dcOhbG5laiBwb2JvxI1reS5cIixcblx0XHR0aGVEZWZhdWx0QnJhbmNoSW5Zb3VyUmVwb3NpdG9yeTogXCJQcmVkdm9sZW7DoSB2ZXR2YSB2byB2YcWhb20gw7psb8W+aXNrdS4gWnZvxL50ZSB0w7p0byBtb8W+bm9zxaUsIGFrIGNoY2V0ZSB6YcSNYcWlIG5pZcSNbyBub3bDqSwgxI1vIG5lesOhdmlzw60gb2QgdmHFoWVqIGFrdHXDoWxuZWogcG9ib8SNa3kuXCIsXG5cdFx0dmlld1B1bGxSZXF1ZXN0czogXCJab2JyYXppxaUgcG/FvmlhZGF2a3kgbmEgc3RpYWhudXRpZVwiLFxuXHRcdGNyZWF0ZVB1bGxSZXF1ZXN0OiBcIlZ5dHZvcnRlIHBvxb5pYWRhdmt1IG5hIHN0aWFobnV0aWVcIlxuXHR9XG59O1xuXG5jb25zdCBSb3V0ZXJDb250ZXh0ID0gLyojX19QVVJFX18qL2NyZWF0ZUNvbnRleHQobnVsbCk7XG5mdW5jdGlvbiBSb3V0ZXJQcm92aWRlcihwcm9wcykge1xuICBjb25zdCBbdXJsLCBzZXRVcmxdID0gdXNlU3RhdGUoKCkgPT4gd2luZG93LmxvY2F0aW9uLmhyZWYpO1xuICBjb25zdCByb3V0ZXIgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBmdW5jdGlvbiBuYXZpZ2F0ZSh1cmwsIHJlcGxhY2UpIHtcbiAgICAgIGNvbnN0IG5ld1VybCA9IG5ldyBVUkwodXJsLCB3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gICAgICBpZiAobmV3VXJsLm9yaWdpbiAhPT0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiB8fCAhbmV3VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9rZXlzdGF0aWMnKSkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uYXNzaWduKG5ld1VybCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHdpbmRvdy5oaXN0b3J5W3JlcGxhY2UgPyAncmVwbGFjZVN0YXRlJyA6ICdwdXNoU3RhdGUnXShudWxsLCAnJywgbmV3VXJsKTtcbiAgICAgIHN0YXJ0VHJhbnNpdGlvbigoKSA9PiB7XG4gICAgICAgIHNldFVybChuZXdVcmwudG9TdHJpbmcoKSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgcmVwbGFjZWQgPSBsb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKC9eXFwva2V5c3RhdGljXFwvPy8sICcnKTtcbiAgICBjb25zdCBwYXJhbXMgPSByZXBsYWNlZCA9PT0gJycgPyBbXSA6IHJlcGxhY2VkLnNwbGl0KCcvJykubWFwKGRlY29kZVVSSUNvbXBvbmVudCk7XG4gICAgY29uc3QgcGFyc2VkVXJsID0gbmV3IFVSTCh1cmwpO1xuICAgIHJldHVybiB7XG4gICAgICBocmVmOiBwYXJzZWRVcmwucGF0aG5hbWUgKyBwYXJzZWRVcmwuc2VhcmNoLFxuICAgICAgcmVwbGFjZShwYXRoKSB7XG4gICAgICAgIG5hdmlnYXRlKHBhdGgsIHRydWUpO1xuICAgICAgfSxcbiAgICAgIHB1c2gocGF0aCkge1xuICAgICAgICBuYXZpZ2F0ZShwYXRoLCBmYWxzZSk7XG4gICAgICB9LFxuICAgICAgcGFyYW1zXG4gICAgfTtcbiAgfSwgW3VybF0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZU5hdmlnYXRlID0gKCkgPT4ge1xuICAgICAgc3RhcnRUcmFuc2l0aW9uKCgpID0+IHtcbiAgICAgICAgc2V0VXJsKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgaGFuZGxlTmF2aWdhdGUpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCBoYW5kbGVOYXZpZ2F0ZSk7XG4gICAgfTtcbiAgfSwgW10pO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChSb3V0ZXJDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IHJvdXRlcixcbiAgICBjaGlsZHJlbjogcHJvcHMuY2hpbGRyZW5cbiAgfSk7XG59XG5mdW5jdGlvbiB1c2VSb3V0ZXIoKSB7XG4gIGNvbnN0IHJvdXRlciA9IHVzZUNvbnRleHQoUm91dGVyQ29udGV4dCk7XG4gIGlmIChyb3V0ZXIgPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFcnJvcigndXNlUm91dGVyIG11c3QgYmUgdXNlZCB3aXRoaW4gYSBSb3V0ZXJQcm92aWRlcicpO1xuICB9XG4gIHJldHVybiByb3V0ZXI7XG59XG5cbmZ1bmN0aW9uIGZpeFBhdGgocGF0aCkge1xuICByZXR1cm4gcGF0aC5yZXBsYWNlKC9eXFwuP1xcLysvLCAnJykucmVwbGFjZSgvXFwvKiQvLCAnJyk7XG59XG5jb25zdCBjb2xsZWN0aW9uUGF0aCA9IC9cXC9cXCpcXCo/KD86JHxcXC8pLztcbmZ1bmN0aW9uIGdldENvbmZpZ3VyZWRDb2xsZWN0aW9uUGF0aChjb25maWcsIGNvbGxlY3Rpb24pIHtcbiAgdmFyIF9jb2xsZWN0aW9uQ29uZmlnJHBhdDtcbiAgY29uc3QgY29sbGVjdGlvbkNvbmZpZyA9IGNvbmZpZy5jb2xsZWN0aW9uc1tjb2xsZWN0aW9uXTtcbiAgY29uc3QgcGF0aCA9IChfY29sbGVjdGlvbkNvbmZpZyRwYXQgPSBjb2xsZWN0aW9uQ29uZmlnLnBhdGgpICE9PSBudWxsICYmIF9jb2xsZWN0aW9uQ29uZmlnJHBhdCAhPT0gdm9pZCAwID8gX2NvbGxlY3Rpb25Db25maWckcGF0IDogYCR7Y29sbGVjdGlvbn0vKi9gO1xuICBpZiAoIWNvbGxlY3Rpb25QYXRoLnRlc3QocGF0aCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENvbGxlY3Rpb24gcGF0aCBtdXN0IGVuZCB3aXRoIC8qIG9yIC8qKiBvciBpbmNsdWRlIC8qLyBvciAvKiovIGJ1dCAke2NvbGxlY3Rpb259IGhhcyAke3BhdGh9YCk7XG4gIH1cbiAgcmV0dXJuIHBhdGg7XG59XG5mdW5jdGlvbiBnZXRDb2xsZWN0aW9uUGF0aChjb25maWcsIGNvbGxlY3Rpb24pIHtcbiAgY29uc3QgY29uZmlndXJlZFBhdGggPSBnZXRDb25maWd1cmVkQ29sbGVjdGlvblBhdGgoY29uZmlnLCBjb2xsZWN0aW9uKTtcbiAgY29uc3QgcGF0aCA9IGZpeFBhdGgoY29uZmlndXJlZFBhdGgucmVwbGFjZSgvXFwqXFwqPy4qJC8sICcnKSk7XG4gIHJldHVybiBwYXRoO1xufVxuZnVuY3Rpb24gZ2V0Q29sbGVjdGlvbkZvcm1hdChjb25maWcsIGNvbGxlY3Rpb24pIHtcbiAgdmFyIF9jb2xsZWN0aW9uQ29uZmlnJGZvcjtcbiAgY29uc3QgY29sbGVjdGlvbkNvbmZpZyA9IGNvbmZpZy5jb2xsZWN0aW9uc1tjb2xsZWN0aW9uXTtcbiAgcmV0dXJuIGdldEZvcm1hdEluZm8oKF9jb2xsZWN0aW9uQ29uZmlnJGZvciA9IGNvbGxlY3Rpb25Db25maWcuZm9ybWF0KSAhPT0gbnVsbCAmJiBfY29sbGVjdGlvbkNvbmZpZyRmb3IgIT09IHZvaWQgMCA/IF9jb2xsZWN0aW9uQ29uZmlnJGZvciA6ICd5YW1sJywgY29sbGVjdGlvbkNvbmZpZy5zY2hlbWEsIGdldENvbmZpZ3VyZWRDb2xsZWN0aW9uUGF0aChjb25maWcsIGNvbGxlY3Rpb24pKTtcbn1cbmZ1bmN0aW9uIGdldFNpbmdsZXRvbkZvcm1hdChjb25maWcsIHNpbmdsZXRvbikge1xuICB2YXIgX3NpbmdsZXRvbkNvbmZpZyRmb3JtLCBfc2luZ2xldG9uQ29uZmlnJHBhdGg7XG4gIGNvbnN0IHNpbmdsZXRvbkNvbmZpZyA9IGNvbmZpZy5zaW5nbGV0b25zW3NpbmdsZXRvbl07XG4gIHJldHVybiBnZXRGb3JtYXRJbmZvKChfc2luZ2xldG9uQ29uZmlnJGZvcm0gPSBzaW5nbGV0b25Db25maWcuZm9ybWF0KSAhPT0gbnVsbCAmJiBfc2luZ2xldG9uQ29uZmlnJGZvcm0gIT09IHZvaWQgMCA/IF9zaW5nbGV0b25Db25maWckZm9ybSA6ICd5YW1sJywgc2luZ2xldG9uQ29uZmlnLnNjaGVtYSwgKF9zaW5nbGV0b25Db25maWckcGF0aCA9IHNpbmdsZXRvbkNvbmZpZy5wYXRoKSAhPT0gbnVsbCAmJiBfc2luZ2xldG9uQ29uZmlnJHBhdGggIT09IHZvaWQgMCA/IF9zaW5nbGV0b25Db25maWckcGF0aCA6IGAke3NpbmdsZXRvbn0vYCk7XG59XG5mdW5jdGlvbiBnZXRDb2xsZWN0aW9uSXRlbVBhdGgoY29uZmlnLCBjb2xsZWN0aW9uLCBzbHVnKSB7XG4gIGNvbnN0IGJhc2VQYXRoID0gZ2V0Q29sbGVjdGlvblBhdGgoY29uZmlnLCBjb2xsZWN0aW9uKTtcbiAgY29uc3Qgc3VmZml4ID0gZ2V0Q29sbGVjdGlvbkl0ZW1TbHVnU3VmZml4KGNvbmZpZywgY29sbGVjdGlvbik7XG4gIHJldHVybiBgJHtiYXNlUGF0aH0vJHtzbHVnfSR7c3VmZml4fWA7XG59XG5mdW5jdGlvbiBnZXRFbnRyeURhdGFGaWxlcGF0aChkaXIsIGZvcm1hdEluZm8pIHtcbiAgcmV0dXJuIGAke2Rpcn0ke2Zvcm1hdEluZm8uZGF0YUxvY2F0aW9uID09PSAnaW5kZXgnID8gJy9pbmRleCcgOiAnJ30ke2dldERhdGFGaWxlRXh0ZW5zaW9uKGZvcm1hdEluZm8pfWA7XG59XG5mdW5jdGlvbiBnZXRTbHVnR2xvYkZvckNvbGxlY3Rpb24oY29uZmlnLCBjb2xsZWN0aW9uKSB7XG4gIGNvbnN0IGNvbGxlY3Rpb25QYXRoID0gZ2V0Q29uZmlndXJlZENvbGxlY3Rpb25QYXRoKGNvbmZpZywgY29sbGVjdGlvbik7XG4gIHJldHVybiBjb2xsZWN0aW9uUGF0aC5pbmNsdWRlcygnKionKSA/ICcqKicgOiAnKic7XG59XG5mdW5jdGlvbiBnZXRDb2xsZWN0aW9uSXRlbVNsdWdTdWZmaXgoY29uZmlnLCBjb2xsZWN0aW9uKSB7XG4gIGNvbnN0IGNvbmZpZ3VyZWRQYXRoID0gZ2V0Q29uZmlndXJlZENvbGxlY3Rpb25QYXRoKGNvbmZpZywgY29sbGVjdGlvbik7XG4gIGNvbnN0IHBhdGggPSBmaXhQYXRoKGNvbmZpZ3VyZWRQYXRoLnJlcGxhY2UoL15bXipdK1xcKlxcKj8vLCAnJykpO1xuICByZXR1cm4gcGF0aCA/IGAvJHtwYXRofWAgOiAnJztcbn1cbmZ1bmN0aW9uIGdldFNpbmdsZXRvblBhdGgoY29uZmlnLCBzaW5nbGV0b24pIHtcbiAgdmFyIF9zaW5nbGV0b24kcGF0aCwgX3NpbmdsZXRvbiRwYXRoMjtcbiAgaWYgKChfc2luZ2xldG9uJHBhdGggPSBjb25maWcuc2luZ2xldG9uc1tzaW5nbGV0b25dLnBhdGgpICE9PSBudWxsICYmIF9zaW5nbGV0b24kcGF0aCAhPT0gdm9pZCAwICYmIF9zaW5nbGV0b24kcGF0aC5pbmNsdWRlcygnKicpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBTaW5nbGV0b24gcGF0aHMgY2Fubm90IGluY2x1ZGUgKiBidXQgJHtzaW5nbGV0b259IGhhcyAke2NvbmZpZy5zaW5nbGV0b25zW3NpbmdsZXRvbl0ucGF0aH1gKTtcbiAgfVxuICByZXR1cm4gZml4UGF0aCgoX3NpbmdsZXRvbiRwYXRoMiA9IGNvbmZpZy5zaW5nbGV0b25zW3NpbmdsZXRvbl0ucGF0aCkgIT09IG51bGwgJiYgX3NpbmdsZXRvbiRwYXRoMiAhPT0gdm9pZCAwID8gX3NpbmdsZXRvbiRwYXRoMiA6IHNpbmdsZXRvbik7XG59XG5mdW5jdGlvbiBnZXREYXRhRmlsZUV4dGVuc2lvbihmb3JtYXRJbmZvKSB7XG4gIHJldHVybiBmb3JtYXRJbmZvLmNvbnRlbnRGaWVsZCA/IGZvcm1hdEluZm8uY29udGVudEZpZWxkLmNvbmZpZy5jb250ZW50RXh0ZW5zaW9uIDogJy4nICsgZm9ybWF0SW5mby5kYXRhO1xufVxuZnVuY3Rpb24gZ2V0Rm9ybWF0SW5mbyhmb3JtYXQsIHNjaGVtYSwgcGF0aCkge1xuICB2YXIgX2Zvcm1hdCRkYXRhO1xuICBjb25zdCBkYXRhTG9jYXRpb24gPSBwYXRoLmVuZHNXaXRoKCcvJykgPyAnaW5kZXgnIDogJ291dGVyJztcbiAgaWYgKHR5cGVvZiBmb3JtYXQgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGFMb2NhdGlvbixcbiAgICAgIGNvbnRlbnRGaWVsZDogdW5kZWZpbmVkLFxuICAgICAgZGF0YTogZm9ybWF0XG4gICAgfTtcbiAgfVxuICBsZXQgY29udGVudEZpZWxkO1xuICBpZiAoZm9ybWF0LmNvbnRlbnRGaWVsZCkge1xuICAgIGNvbnN0IGZpZWxkID0gc2NoZW1hW2Zvcm1hdC5jb250ZW50RmllbGRdO1xuICAgIGFzc2VydCgoZmllbGQgPT09IG51bGwgfHwgZmllbGQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZpZWxkLmtpbmQpID09PSAnZm9ybScsIGAke2Zvcm1hdC5jb250ZW50RmllbGR9IGlzIG5vdCBhIGZvcm0gZmllbGRgKTtcbiAgICBhc3NlcnQoZmllbGQuZm9ybUtpbmQgPT09ICdjb250ZW50JywgYCR7Zm9ybWF0LmNvbnRlbnRGaWVsZH0gaXMgbm90IGEgY29udGVudCBmaWVsZGApO1xuICAgIGNvbnRlbnRGaWVsZCA9IHtcbiAgICAgIGtleTogZm9ybWF0LmNvbnRlbnRGaWVsZCxcbiAgICAgIGNvbmZpZzogZmllbGRcbiAgICB9O1xuICB9XG4gIHJldHVybiB7XG4gICAgZGF0YTogKF9mb3JtYXQkZGF0YSA9IGZvcm1hdC5kYXRhKSAhPT0gbnVsbCAmJiBfZm9ybWF0JGRhdGEgIT09IHZvaWQgMCA/IF9mb3JtYXQkZGF0YSA6ICd5YW1sJyxcbiAgICBjb250ZW50RmllbGQsXG4gICAgZGF0YUxvY2F0aW9uXG4gIH07XG59XG5mdW5jdGlvbiBnZXRQYXRoUHJlZml4KHN0b3JhZ2UpIHtcbiAgaWYgKHN0b3JhZ2Uua2luZCA9PT0gJ2xvY2FsJyB8fCAhc3RvcmFnZS5wYXRoUHJlZml4KSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gZml4UGF0aChzdG9yYWdlLnBhdGhQcmVmaXgpICsgJy8nO1xufVxuXG5hc3luYyBmdW5jdGlvbiBzaGExKGNvbnRlbnQpIHtcbiAgcmV0dXJuIGNyZWF0ZUhhc2goJ3NoYTEnKS51cGRhdGUoY29udGVudCkuZGlnZXN0KCdoZXgnKTtcbn1cblxuY29uc3QgdGV4dEVuY29kZXIkMiA9IG5ldyBUZXh0RW5jb2RlcigpO1xuZnVuY3Rpb24gYmxvYlNoYShjb250ZW50cykge1xuICBjb25zdCBibG9iUHJlZml4ID0gdGV4dEVuY29kZXIkMi5lbmNvZGUoJ2Jsb2IgJyArIGNvbnRlbnRzLmxlbmd0aCArICdcXDAnKTtcbiAgY29uc3QgYXJyYXkgPSBuZXcgVWludDhBcnJheShibG9iUHJlZml4LmJ5dGVMZW5ndGggKyBjb250ZW50cy5ieXRlTGVuZ3RoKTtcbiAgYXJyYXkuc2V0KGJsb2JQcmVmaXgsIDApO1xuICBhcnJheS5zZXQoY29udGVudHMsIGJsb2JQcmVmaXguYnl0ZUxlbmd0aCk7XG4gIHJldHVybiBzaGExKGFycmF5KTtcbn1cbmZ1bmN0aW9uIGdldFRyZWVOb2RlQXRQYXRoKHJvb3QsIHBhdGgpIHtcbiAgY29uc3QgcGFydHMgPSBwYXRoLnNwbGl0KCcvJyk7XG4gIGxldCBub2RlID0gcm9vdC5nZXQocGFydHNbMF0pO1xuICBmb3IgKGNvbnN0IHBhcnQgb2YgcGFydHMuc2xpY2UoMSkpIHtcbiAgICBpZiAoIW5vZGUpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgaWYgKCFub2RlLmNoaWxkcmVuKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIG5vZGUgPSBub2RlLmNoaWxkcmVuLmdldChwYXJ0KTtcbiAgfVxuICByZXR1cm4gbm9kZTtcbn1cbmZ1bmN0aW9uIGdldE5vZGVBdFBhdGgodHJlZSwgcGF0aCkge1xuICBsZXQgbm9kZSA9IHRyZWU7XG4gIGZvciAoY29uc3QgcGFydCBvZiBwYXRoLnNwbGl0KCcvJykpIHtcbiAgICBpZiAoIW5vZGUuaGFzKHBhcnQpKSB7XG4gICAgICBub2RlLnNldChwYXJ0LCBuZXcgTWFwKCkpO1xuICAgIH1cbiAgICBjb25zdCBpbm5lck5vZGUgPSBub2RlLmdldChwYXJ0KTtcbiAgICBhc3NlcnQoaW5uZXJOb2RlIGluc3RhbmNlb2YgTWFwLCAnZXhwZWN0ZWQgdHJlZScpO1xuICAgIG5vZGUgPSBpbm5lck5vZGU7XG4gIH1cbiAgcmV0dXJuIG5vZGU7XG59XG5mdW5jdGlvbiBnZXRGaWxlbmFtZShwYXRoKSB7XG4gIHJldHVybiBwYXRoLnJlcGxhY2UoLy4qXFwvLywgJycpO1xufVxuZnVuY3Rpb24gZ2V0RGlybmFtZShwYXRoKSB7XG4gIHJldHVybiBwYXRoLnJlcGxhY2UoL1xcL1teL10rJC8sICcnKTtcbn1cbmZ1bmN0aW9uIHRvVHJlZUNoYW5nZXMoY2hhbmdlcykge1xuICBjb25zdCBjaGFuZ2VzUm9vdCA9IG5ldyBNYXAoKTtcbiAgZm9yIChjb25zdCBkZWxldGlvbiBvZiBjaGFuZ2VzLmRlbGV0aW9ucykge1xuICAgIGNvbnN0IHBhcmVudFRyZWUgPSBnZXROb2RlQXRQYXRoKGNoYW5nZXNSb290LCBnZXREaXJuYW1lKGRlbGV0aW9uKSk7XG4gICAgcGFyZW50VHJlZS5zZXQoZ2V0RmlsZW5hbWUoZGVsZXRpb24pLCAnZGVsZXRlJyk7XG4gIH1cbiAgZm9yIChjb25zdCBhZGRpdGlvbiBvZiBjaGFuZ2VzLmFkZGl0aW9ucykge1xuICAgIGNvbnN0IHBhcmVudFRyZWUgPSBnZXROb2RlQXRQYXRoKGNoYW5nZXNSb290LCBnZXREaXJuYW1lKGFkZGl0aW9uLnBhdGgpKTtcbiAgICBwYXJlbnRUcmVlLnNldChnZXRGaWxlbmFtZShhZGRpdGlvbi5wYXRoKSwgYWRkaXRpb24uY29udGVudHMpO1xuICB9XG4gIHJldHVybiBjaGFuZ2VzUm9vdDtcbn1cbmNvbnN0IFNQQUNFX0NIQVJfQ09ERSA9IDMyO1xuY29uc3Qgc3BhY2UgPSBuZXcgVWludDhBcnJheShbU1BBQ0VfQ0hBUl9DT0RFXSk7XG5jb25zdCBudWxsY2hhciA9IG5ldyBVaW50OEFycmF5KFswXSk7XG5jb25zdCB0cmVlID0gdGV4dEVuY29kZXIkMi5lbmNvZGUoJ3RyZWUgJyk7XG5cbi8vIGJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS9pc29tb3JwaGljLWdpdC9pc29tb3JwaGljLWdpdC9ibG9iL2MwOWRmYTIwZmZlMGFiOWU2NjAyZTBmYTE3MmQ3MmJhODk5NGU0NDMvc3JjL21vZGVscy9HaXRUcmVlLmpzI0wxMDgtTDEyMlxuZnVuY3Rpb24gdHJlZVNoYShjaGlsZHJlbikge1xuICBjb25zdCBlbnRyaWVzID0gWy4uLmNoaWxkcmVuXS5tYXAoKFtuYW1lLCBub2RlXSkgPT4gKHtcbiAgICBuYW1lLFxuICAgIHNoYTogbm9kZS5lbnRyeS5zaGEsXG4gICAgbW9kZTogbm9kZS5lbnRyeS5tb2RlXG4gIH0pKTtcbiAgZW50cmllcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgY29uc3QgYU5hbWUgPSBhLm1vZGUgPT09ICcwNDAwMDAnID8gYS5uYW1lICsgJy8nIDogYS5uYW1lO1xuICAgIGNvbnN0IGJOYW1lID0gYi5tb2RlID09PSAnMDQwMDAwJyA/IGIubmFtZSArICcvJyA6IGIubmFtZTtcbiAgICByZXR1cm4gYU5hbWUgPT09IGJOYW1lID8gMCA6IGFOYW1lIDwgYk5hbWUgPyAtMSA6IDE7XG4gIH0pO1xuICBjb25zdCB0cmVlT2JqZWN0ID0gZW50cmllcy5mbGF0TWFwKGVudHJ5ID0+IHtcbiAgICBjb25zdCBtb2RlID0gdGV4dEVuY29kZXIkMi5lbmNvZGUoZW50cnkubW9kZS5yZXBsYWNlKC9eMC8sICcnKSk7XG4gICAgY29uc3QgbmFtZSA9IHRleHRFbmNvZGVyJDIuZW5jb2RlKGVudHJ5Lm5hbWUpO1xuICAgIGNvbnN0IHNoYSA9IGhleFRvQnl0ZXMoZW50cnkuc2hhKTtcbiAgICByZXR1cm4gW21vZGUsIHNwYWNlLCBuYW1lLCBudWxsY2hhciwgc2hhXTtcbiAgfSk7XG4gIHJldHVybiBzaGExKGNvbmNhdEJ5dGVzKFt0cmVlLCB0ZXh0RW5jb2RlciQyLmVuY29kZSh0cmVlT2JqZWN0LnJlZHVjZSgoc3VtLCB2YWwpID0+IHN1bSArIHZhbC5ieXRlTGVuZ3RoLCAwKS50b1N0cmluZygpKSwgbnVsbGNoYXIsIC4uLnRyZWVPYmplY3RdKSk7XG59XG5mdW5jdGlvbiBjb25jYXRCeXRlcyhieXRlQXJyYXlzKSB7XG4gIGNvbnN0IHRvdGFsTGVuZ3RoID0gYnl0ZUFycmF5cy5yZWR1Y2UoKHN1bSwgYXJyKSA9PiBzdW0gKyBhcnIuYnl0ZUxlbmd0aCwgMCk7XG4gIGNvbnN0IHJlc3VsdCA9IG5ldyBVaW50OEFycmF5KHRvdGFsTGVuZ3RoKTtcbiAgbGV0IG9mZnNldCA9IDA7XG4gIGZvciAoY29uc3QgYXJyIG9mIGJ5dGVBcnJheXMpIHtcbiAgICByZXN1bHQuc2V0KGFyciwgb2Zmc2V0KTtcbiAgICBvZmZzZXQgKz0gYXJyLmJ5dGVMZW5ndGg7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGhleFRvQnl0ZXMoc3RyKSB7XG4gIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoc3RyLmxlbmd0aCAvIDIpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVzLmJ5dGVMZW5ndGg7IGkgKz0gMSkge1xuICAgIGNvbnN0IHN0YXJ0ID0gaSAqIDI7XG4gICAgYnl0ZXNbaV0gPSBwYXJzZUludChzdHIuc2xpY2Uoc3RhcnQsIHN0YXJ0ICsgMiksIDE2KTtcbiAgfVxuICByZXR1cm4gYnl0ZXM7XG59XG5hc3luYyBmdW5jdGlvbiBjcmVhdGVUcmVlTm9kZUVudHJ5KHBhdGgsIGNoaWxkcmVuKSB7XG4gIGNvbnN0IHNoYSA9IGF3YWl0IHRyZWVTaGEoY2hpbGRyZW4pO1xuICByZXR1cm4ge1xuICAgIHBhdGgsXG4gICAgbW9kZTogJzA0MDAwMCcsXG4gICAgdHlwZTogJ3RyZWUnLFxuICAgIHNoYVxuICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlQmxvYk5vZGVFbnRyeShwYXRoLCBjb250ZW50cykge1xuICBjb25zdCBzaGEgPSAnc2hhJyBpbiBjb250ZW50cyA/IGNvbnRlbnRzLnNoYSA6IGF3YWl0IGJsb2JTaGEoY29udGVudHMpO1xuICByZXR1cm4ge1xuICAgIHBhdGgsXG4gICAgbW9kZTogJzEwMDY0NCcsXG4gICAgdHlwZTogJ2Jsb2InLFxuICAgIHNoYSxcbiAgICBzaXplOiBjb250ZW50cy5ieXRlTGVuZ3RoXG4gIH07XG59XG5hc3luYyBmdW5jdGlvbiB1cGRhdGVUcmVlV2l0aENoYW5nZXModHJlZSwgY2hhbmdlcykge1xuICB2YXIgX2F3YWl0JHVwZGF0ZVRyZWU7XG4gIGNvbnN0IG5ld1RyZWUgPSAoX2F3YWl0JHVwZGF0ZVRyZWUgPSBhd2FpdCB1cGRhdGVUcmVlKHRyZWUsIHRvVHJlZUNoYW5nZXMoY2hhbmdlcyksIFtdKSkgIT09IG51bGwgJiYgX2F3YWl0JHVwZGF0ZVRyZWUgIT09IHZvaWQgMCA/IF9hd2FpdCR1cGRhdGVUcmVlIDogbmV3IE1hcCgpO1xuICByZXR1cm4ge1xuICAgIGVudHJpZXM6IHRyZWVUb0VudHJpZXMobmV3VHJlZSksXG4gICAgc2hhOiBhd2FpdCB0cmVlU2hhKG5ld1RyZWUgIT09IG51bGwgJiYgbmV3VHJlZSAhPT0gdm9pZCAwID8gbmV3VHJlZSA6IG5ldyBNYXAoKSlcbiAgfTtcbn1cbmZ1bmN0aW9uIHRyZWVUb0VudHJpZXModHJlZSkge1xuICByZXR1cm4gWy4uLnRyZWUudmFsdWVzKCldLmZsYXRNYXAoeCA9PiB4LmNoaWxkcmVuID8gW3guZW50cnksIC4uLnRyZWVUb0VudHJpZXMoeC5jaGlsZHJlbildIDogW3guZW50cnldKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVRyZWUodHJlZSwgY2hhbmdlZFRyZWUsIHBhdGgpIHtcbiAgY29uc3QgbmV3VHJlZSA9IG5ldyBNYXAodHJlZSk7XG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGNoYW5nZWRUcmVlKSB7XG4gICAgaWYgKHZhbHVlID09PSAnZGVsZXRlJykge1xuICAgICAgbmV3VHJlZS5kZWxldGUoa2V5KTtcbiAgICB9XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgTWFwKSB7XG4gICAgICB2YXIgX25ld1RyZWUkZ2V0JGNoaWxkcmVuLCBfbmV3VHJlZSRnZXQ7XG4gICAgICBjb25zdCBleGlzdGluZ0NoaWxkcmVuID0gKF9uZXdUcmVlJGdldCRjaGlsZHJlbiA9IChfbmV3VHJlZSRnZXQgPSBuZXdUcmVlLmdldChrZXkpKSA9PT0gbnVsbCB8fCBfbmV3VHJlZSRnZXQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9uZXdUcmVlJGdldC5jaGlsZHJlbikgIT09IG51bGwgJiYgX25ld1RyZWUkZ2V0JGNoaWxkcmVuICE9PSB2b2lkIDAgPyBfbmV3VHJlZSRnZXQkY2hpbGRyZW4gOiBuZXcgTWFwKCk7XG4gICAgICBjb25zdCBjaGlsZHJlbiA9IGF3YWl0IHVwZGF0ZVRyZWUoZXhpc3RpbmdDaGlsZHJlbiwgdmFsdWUsIHBhdGguY29uY2F0KGtleSkpO1xuICAgICAgaWYgKGNoaWxkcmVuID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmV3VHJlZS5kZWxldGUoa2V5KTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBlbnRyeSA9IGF3YWl0IGNyZWF0ZVRyZWVOb2RlRW50cnkocGF0aC5jb25jYXQoa2V5KS5qb2luKCcvJyksIGNoaWxkcmVuKTtcbiAgICAgIG5ld1RyZWUuc2V0KGtleSwge1xuICAgICAgICBlbnRyeSxcbiAgICAgICAgY2hpbGRyZW5cbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBVaW50OEFycmF5IHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgJ3NoYScgaW4gdmFsdWUpIHtcbiAgICAgIGNvbnN0IGVudHJ5ID0gYXdhaXQgY3JlYXRlQmxvYk5vZGVFbnRyeShwYXRoLmNvbmNhdChrZXkpLmpvaW4oJy8nKSwgdmFsdWUpO1xuICAgICAgbmV3VHJlZS5zZXQoa2V5LCB7XG4gICAgICAgIGVudHJ5XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgaWYgKG5ld1RyZWUuc2l6ZSA9PT0gMCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIG5ld1RyZWU7XG59XG5mdW5jdGlvbiB0cmVlRW50cmllc1RvVHJlZU5vZGVzKGVudHJpZXMpIHtcbiAgY29uc3Qgcm9vdCA9IG5ldyBNYXAoKTtcbiAgY29uc3QgZ2V0Q2hpbGRyZW5BdFBhdGggPSBwYXJ0cyA9PiB7XG4gICAgdmFyIF9ub2RlO1xuICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiByb290O1xuICAgIH1cbiAgICBsZXQgbm9kZSA9IHJvb3QuZ2V0KHBhcnRzWzBdKTtcbiAgICBmb3IgKGNvbnN0IHBhcnQgb2YgcGFydHMuc2xpY2UoMSkpIHtcbiAgICAgIGlmICghbm9kZSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIGlmICghbm9kZS5jaGlsZHJlbikgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIG5vZGUgPSBub2RlLmNoaWxkcmVuLmdldChwYXJ0KTtcbiAgICB9XG4gICAgcmV0dXJuIChfbm9kZSA9IG5vZGUpID09PSBudWxsIHx8IF9ub2RlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfbm9kZS5jaGlsZHJlbjtcbiAgfTtcbiAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgY29uc3Qgc3BsaXQgPSBlbnRyeS5wYXRoLnNwbGl0KCcvJyk7XG4gICAgY29uc3QgY2hpbGRyZW4gPSBnZXRDaGlsZHJlbkF0UGF0aChzcGxpdC5zbGljZSgwLCAtMSkpO1xuICAgIGlmIChjaGlsZHJlbikge1xuICAgICAgY2hpbGRyZW4uc2V0KHNwbGl0W3NwbGl0Lmxlbmd0aCAtIDFdLCB7XG4gICAgICAgIGVudHJ5LFxuICAgICAgICBjaGlsZHJlbjogZW50cnkudHlwZSA9PT0gJ3RyZWUnID8gbmV3IE1hcCgpIDogdW5kZWZpbmVkXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJvb3Q7XG59XG5cbmNvbnN0IExPQURJTkcgPSBTeW1ib2woJ2xvYWRpbmcnKTtcbmZ1bmN0aW9uIGlzVGhlbmFibGUodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nO1xufVxuZnVuY3Rpb24gdXNlRGF0YShmdW5jKSB7XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGUoe1xuICAgIGtpbmQ6ICdsb2FkaW5nJ1xuICB9KTtcbiAgbGV0IHN0YXRlVG9SZXR1cm4gPSBzdGF0ZTtcbiAgY29uc3QgcmVzdWx0ID0gdXNlTWVtbygoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGZ1bmMoKTtcbiAgICAgIC8vIHRoaXMgYXZvaWRzIHVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbnNcbiAgICAgIC8vIHdlIGFjdHVhbGx5IGhhbmRsZSB0aGUgcmVzdWx0IGluIGFuIGVmZmVjdFxuICAgICAgaWYgKGlzVGhlbmFibGUocmVzdWx0KSkge1xuICAgICAgICByZXN1bHQudGhlbigoKSA9PiB7fSwgKCkgPT4ge30pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAga2luZDogJ3Jlc3VsdCcsXG4gICAgICAgIHJlc3VsdFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAga2luZDogJ2Vycm9yJyxcbiAgICAgICAgZXJyb3I6IGVycm9yXG4gICAgICB9O1xuICAgIH1cbiAgfSwgW2Z1bmNdKTtcbiAgY29uc3QgcmVzdWx0U3RhdGUgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAocmVzdWx0LmtpbmQgPT09ICdlcnJvcicgJiYgKHN0YXRlLmtpbmQgIT09ICdlcnJvcicgfHwgc3RhdGUuZXJyb3IgIT09IHJlc3VsdC5lcnJvcikpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtpbmQ6ICdlcnJvcicsXG4gICAgICAgIGVycm9yOiByZXN1bHQuZXJyb3JcbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChyZXN1bHQua2luZCA9PT0gJ3Jlc3VsdCcgJiYgIWlzVGhlbmFibGUocmVzdWx0LnJlc3VsdCkgJiYgcmVzdWx0LnJlc3VsdCAhPT0gTE9BRElORyAmJiAoc3RhdGUua2luZCAhPT0gJ2xvYWRlZCcgfHwgc3RhdGUuZGF0YSAhPT0gcmVzdWx0LnJlc3VsdCkpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtpbmQ6ICdsb2FkZWQnLFxuICAgICAgICBkYXRhOiByZXN1bHQucmVzdWx0XG4gICAgICB9O1xuICAgIH1cbiAgfSwgW3Jlc3VsdCwgc3RhdGVdKTtcbiAgaWYgKHJlc3VsdFN0YXRlICYmIHJlc3VsdFN0YXRlICE9PSBzdGF0ZSkge1xuICAgIHN0YXRlVG9SZXR1cm4gPSByZXN1bHRTdGF0ZTtcbiAgICBzZXRTdGF0ZShyZXN1bHRTdGF0ZSk7XG4gIH1cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAocmVzdWx0LmtpbmQgPT09ICdyZXN1bHQnICYmIGlzVGhlbmFibGUocmVzdWx0LnJlc3VsdCkpIHtcbiAgICAgIHNldFN0YXRlKHtcbiAgICAgICAga2luZDogJ2xvYWRpbmcnXG4gICAgICB9KTtcbiAgICAgIGxldCBpc0FjdGl2ZSA9IHRydWU7XG4gICAgICByZXN1bHQucmVzdWx0LnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgaWYgKHJlc3VsdCA9PT0gTE9BRElORyB8fCAhaXNBY3RpdmUpIHJldHVybjtcbiAgICAgICAgc2V0U3RhdGUoe1xuICAgICAgICAgIGtpbmQ6ICdsb2FkZWQnLFxuICAgICAgICAgIGRhdGE6IHJlc3VsdFxuICAgICAgICB9KTtcbiAgICAgIH0sIGVycm9yID0+IHtcbiAgICAgICAgaWYgKCFpc0FjdGl2ZSkgcmV0dXJuO1xuICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAga2luZDogJ2Vycm9yJyxcbiAgICAgICAgICBlcnJvclxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgaXNBY3RpdmUgPSBmYWxzZTtcbiAgICAgIH07XG4gICAgfVxuICB9LCBbcmVzdWx0XSk7XG4gIHJldHVybiBzdGF0ZVRvUmV0dXJuO1xufVxuZnVuY3Rpb24gbWFwRGF0YVN0YXRlKHN0YXRlLCBmdW5jKSB7XG4gIGlmIChzdGF0ZS5raW5kID09PSAnZXJyb3InIHx8IHN0YXRlLmtpbmQgPT09ICdsb2FkaW5nJykge1xuICAgIHJldHVybiBzdGF0ZTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGtpbmQ6ICdsb2FkZWQnLFxuICAgIGRhdGE6IGZ1bmMoc3RhdGUuZGF0YSlcbiAgfTtcbn1cbmZ1bmN0aW9uIG1lcmdlRGF0YVN0YXRlcyhpbnB1dCkge1xuICBjb25zdCBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMoaW5wdXQpO1xuICBmb3IgKGNvbnN0IFssIHZhbHVlXSBvZiBlbnRyaWVzKSB7XG4gICAgaWYgKHZhbHVlLmtpbmQgPT09ICdlcnJvcicpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtpbmQ6ICdlcnJvcicsXG4gICAgICAgIGVycm9yOiB2YWx1ZS5lcnJvclxuICAgICAgfTtcbiAgICB9XG4gIH1cbiAgZm9yIChjb25zdCBbLCB2YWx1ZV0gb2YgZW50cmllcykge1xuICAgIGlmICh2YWx1ZS5raW5kID09PSAnbG9hZGluZycpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtpbmQ6ICdsb2FkaW5nJ1xuICAgICAgfTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBraW5kOiAnbG9hZGVkJyxcbiAgICBkYXRhOiBPYmplY3QuZnJvbUVudHJpZXMoZW50cmllcy5tYXAoKFtrZXksIHZhbF0pID0+IHtcbiAgICAgIHJldHVybiBba2V5LCB2YWwuZGF0YV07XG4gICAgfSkpXG4gIH07XG59XG5cbmZ1bmN0aW9uIGNvbGxlY3REaXJlY3Rvcmllc1VzZWRJblNjaGVtYUlubmVyKHNjaGVtYSwgZGlyZWN0b3JpZXMsIHNlZW5TY2hlbWFzKSB7XG4gIGlmIChzZWVuU2NoZW1hcy5oYXMoc2NoZW1hKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBzZWVuU2NoZW1hcy5hZGQoc2NoZW1hKTtcbiAgaWYgKHNjaGVtYS5raW5kID09PSAnYXJyYXknKSB7XG4gICAgcmV0dXJuIGNvbGxlY3REaXJlY3Rvcmllc1VzZWRJblNjaGVtYUlubmVyKHNjaGVtYS5lbGVtZW50LCBkaXJlY3Rvcmllcywgc2VlblNjaGVtYXMpO1xuICB9XG4gIGlmIChzY2hlbWEua2luZCA9PT0gJ2NoaWxkJykge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdmb3JtJykge1xuICAgIGlmIChzY2hlbWEuZm9ybUtpbmQgPT09ICdhc3NldCcgJiYgc2NoZW1hLmRpcmVjdG9yeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBkaXJlY3Rvcmllcy5hZGQoZml4UGF0aChzY2hlbWEuZGlyZWN0b3J5KSk7XG4gICAgfVxuICAgIGlmIChzY2hlbWEuZm9ybUtpbmQgPT09ICdjb250ZW50JyAmJiBzY2hlbWEuZGlyZWN0b3JpZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZm9yIChjb25zdCBkaXJlY3Rvcnkgb2Ygc2NoZW1hLmRpcmVjdG9yaWVzKSB7XG4gICAgICAgIGRpcmVjdG9yaWVzLmFkZChmaXhQYXRoKGRpcmVjdG9yeSkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnb2JqZWN0Jykge1xuICAgIGZvciAoY29uc3QgZmllbGQgb2YgT2JqZWN0LnZhbHVlcyhzY2hlbWEuZmllbGRzKSkge1xuICAgICAgY29sbGVjdERpcmVjdG9yaWVzVXNlZEluU2NoZW1hSW5uZXIoZmllbGQsIGRpcmVjdG9yaWVzLCBzZWVuU2NoZW1hcyk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdjb25kaXRpb25hbCcpIHtcbiAgICBmb3IgKGNvbnN0IGlubmVyU2NoZW1hIG9mIE9iamVjdC52YWx1ZXMoc2NoZW1hLnZhbHVlcykpIHtcbiAgICAgIGNvbGxlY3REaXJlY3Rvcmllc1VzZWRJblNjaGVtYUlubmVyKGlubmVyU2NoZW1hLCBkaXJlY3Rvcmllcywgc2VlblNjaGVtYXMpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cbiAgYXNzZXJ0TmV2ZXIoc2NoZW1hKTtcbn1cbmZ1bmN0aW9uIGNvbGxlY3REaXJlY3Rvcmllc1VzZWRJblNjaGVtYShzY2hlbWEpIHtcbiAgY29uc3QgZGlyZWN0b3JpZXMgPSBuZXcgU2V0KCk7XG4gIGNvbGxlY3REaXJlY3Rvcmllc1VzZWRJblNjaGVtYUlubmVyKHNjaGVtYSwgZGlyZWN0b3JpZXMsIG5ldyBTZXQoKSk7XG4gIHJldHVybiBkaXJlY3Rvcmllcztcbn1cbmZ1bmN0aW9uIGdldERpcmVjdG9yaWVzRm9yVHJlZUtleShzY2hlbWEsIGRpcmVjdG9yeSwgc2x1ZywgZm9ybWF0KSB7XG4gIGNvbnN0IGRpcmVjdG9yaWVzID0gW2ZpeFBhdGgoZGlyZWN0b3J5KV07XG4gIGlmIChmb3JtYXQuZGF0YUxvY2F0aW9uID09PSAnb3V0ZXInKSB7XG4gICAgZGlyZWN0b3JpZXMucHVzaChmaXhQYXRoKGRpcmVjdG9yeSkgKyBnZXREYXRhRmlsZUV4dGVuc2lvbihmb3JtYXQpKTtcbiAgfVxuICBjb25zdCB0b0FkZCA9IHNsdWcgPT09IHVuZGVmaW5lZCA/ICcnIDogYC8ke3NsdWd9YDtcbiAgZm9yIChjb25zdCBkaXJlY3Rvcnkgb2YgY29sbGVjdERpcmVjdG9yaWVzVXNlZEluU2NoZW1hKHNjaGVtYSkpIHtcbiAgICBkaXJlY3Rvcmllcy5wdXNoKGRpcmVjdG9yeSArIHRvQWRkKTtcbiAgfVxuICByZXR1cm4gZGlyZWN0b3JpZXM7XG59XG5mdW5jdGlvbiBnZXRUcmVlS2V5KGRpcmVjdG9yaWVzLCB0cmVlKSB7XG4gIHJldHVybiBkaXJlY3Rvcmllcy5tYXAoZCA9PiB7XG4gICAgdmFyIF9nZXRUcmVlTm9kZUF0UGF0aDtcbiAgICByZXR1cm4gKF9nZXRUcmVlTm9kZUF0UGF0aCA9IGdldFRyZWVOb2RlQXRQYXRoKHRyZWUsIGQpKSA9PT0gbnVsbCB8fCBfZ2V0VHJlZU5vZGVBdFBhdGggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9nZXRUcmVlTm9kZUF0UGF0aC5lbnRyeS5zaGE7XG4gIH0pLmpvaW4oJy0nKTtcbn1cblxudmFyIHBrZ0pzb24gPSB7XG5cdG5hbWU6IFwiQGtleXN0YXRpYy9jb3JlXCIsXG5cdHZlcnNpb246IFwiMC4yLjEyXCIsXG5cdGxpY2Vuc2U6IFwiTUlUXCIsXG5cdHJlcG9zaXRvcnk6IHtcblx0XHR0eXBlOiBcImdpdFwiLFxuXHRcdHVybDogXCJodHRwczovL2dpdGh1Yi5jb20vVGhpbmttaWxsL2tleXN0YXRpYy9cIixcblx0XHRkaXJlY3Rvcnk6IFwicGFja2FnZXMva2V5c3RhdGljXCJcblx0fSxcblx0ZXhwb3J0czoge1xuXHRcdFwiLi91aVwiOiB7XG5cdFx0XHR0eXBlczoge1xuXHRcdFx0XHRcImltcG9ydFwiOiBcIi4vdWkvZGlzdC9rZXlzdGF0aWMtY29yZS11aS5janMubWpzXCIsXG5cdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vdWkvZGlzdC9rZXlzdGF0aWMtY29yZS11aS5janMuanNcIlxuXHRcdFx0fSxcblx0XHRcdG5vZGU6IHtcblx0XHRcdFx0XCJyZWFjdC1zZXJ2ZXJcIjoge1xuXHRcdFx0XHRcdG1vZHVsZTogXCIuL3VpL2Rpc3Qva2V5c3RhdGljLWNvcmUtdWkubm9kZS5yZWFjdC1zZXJ2ZXIuZXNtLmpzXCIsXG5cdFx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL3VpL2Rpc3Qva2V5c3RhdGljLWNvcmUtdWkubm9kZS5yZWFjdC1zZXJ2ZXIuY2pzLm1qc1wiLFxuXHRcdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vdWkvZGlzdC9rZXlzdGF0aWMtY29yZS11aS5ub2RlLnJlYWN0LXNlcnZlci5janMuanNcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRtb2R1bGU6IFwiLi91aS9kaXN0L2tleXN0YXRpYy1jb3JlLXVpLm5vZGUuZXNtLmpzXCIsXG5cdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi91aS9kaXN0L2tleXN0YXRpYy1jb3JlLXVpLm5vZGUuY2pzLm1qc1wiLFxuXHRcdFx0XHRcImRlZmF1bHRcIjogXCIuL3VpL2Rpc3Qva2V5c3RhdGljLWNvcmUtdWkubm9kZS5janMuanNcIlxuXHRcdFx0fSxcblx0XHRcdFwicmVhY3Qtc2VydmVyXCI6IHtcblx0XHRcdFx0bW9kdWxlOiBcIi4vdWkvZGlzdC9rZXlzdGF0aWMtY29yZS11aS5yZWFjdC1zZXJ2ZXIuZXNtLmpzXCIsXG5cdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi91aS9kaXN0L2tleXN0YXRpYy1jb3JlLXVpLnJlYWN0LXNlcnZlci5janMubWpzXCIsXG5cdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vdWkvZGlzdC9rZXlzdGF0aWMtY29yZS11aS5yZWFjdC1zZXJ2ZXIuY2pzLmpzXCJcblx0XHRcdH0sXG5cdFx0XHRtb2R1bGU6IFwiLi91aS9kaXN0L2tleXN0YXRpYy1jb3JlLXVpLmVzbS5qc1wiLFxuXHRcdFx0XCJpbXBvcnRcIjogXCIuL3VpL2Rpc3Qva2V5c3RhdGljLWNvcmUtdWkuY2pzLm1qc1wiLFxuXHRcdFx0XCJkZWZhdWx0XCI6IFwiLi91aS9kaXN0L2tleXN0YXRpYy1jb3JlLXVpLmNqcy5qc1wiXG5cdFx0fSxcblx0XHRcIi5cIjoge1xuXHRcdFx0dHlwZXM6IHtcblx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL2Rpc3Qva2V5c3RhdGljLWNvcmUuY2pzLm1qc1wiLFxuXHRcdFx0XHRcImRlZmF1bHRcIjogXCIuL2Rpc3Qva2V5c3RhdGljLWNvcmUuY2pzLmpzXCJcblx0XHRcdH0sXG5cdFx0XHRub2RlOiB7XG5cdFx0XHRcdFwicmVhY3Qtc2VydmVyXCI6IHtcblx0XHRcdFx0XHRtb2R1bGU6IFwiLi9kaXN0L2tleXN0YXRpYy1jb3JlLm5vZGUucmVhY3Qtc2VydmVyLmVzbS5qc1wiLFxuXHRcdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi9kaXN0L2tleXN0YXRpYy1jb3JlLm5vZGUucmVhY3Qtc2VydmVyLmNqcy5tanNcIixcblx0XHRcdFx0XHRcImRlZmF1bHRcIjogXCIuL2Rpc3Qva2V5c3RhdGljLWNvcmUubm9kZS5yZWFjdC1zZXJ2ZXIuY2pzLmpzXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0bW9kdWxlOiBcIi4vZGlzdC9rZXlzdGF0aWMtY29yZS5ub2RlLmVzbS5qc1wiLFxuXHRcdFx0XHRcImltcG9ydFwiOiBcIi4vZGlzdC9rZXlzdGF0aWMtY29yZS5ub2RlLmNqcy5tanNcIixcblx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9kaXN0L2tleXN0YXRpYy1jb3JlLm5vZGUuY2pzLmpzXCJcblx0XHRcdH0sXG5cdFx0XHRcInJlYWN0LXNlcnZlclwiOiB7XG5cdFx0XHRcdG1vZHVsZTogXCIuL2Rpc3Qva2V5c3RhdGljLWNvcmUucmVhY3Qtc2VydmVyLmVzbS5qc1wiLFxuXHRcdFx0XHRcImltcG9ydFwiOiBcIi4vZGlzdC9rZXlzdGF0aWMtY29yZS5yZWFjdC1zZXJ2ZXIuY2pzLm1qc1wiLFxuXHRcdFx0XHRcImRlZmF1bHRcIjogXCIuL2Rpc3Qva2V5c3RhdGljLWNvcmUucmVhY3Qtc2VydmVyLmNqcy5qc1wiXG5cdFx0XHR9LFxuXHRcdFx0bW9kdWxlOiBcIi4vZGlzdC9rZXlzdGF0aWMtY29yZS5lc20uanNcIixcblx0XHRcdFwiaW1wb3J0XCI6IFwiLi9kaXN0L2tleXN0YXRpYy1jb3JlLmNqcy5tanNcIixcblx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vZGlzdC9rZXlzdGF0aWMtY29yZS5janMuanNcIlxuXHRcdH0sXG5cdFx0XCIuL2FwaS91dGlsc1wiOiB7XG5cdFx0XHR0eXBlczoge1xuXHRcdFx0XHRcImltcG9ydFwiOiBcIi4vYXBpL3V0aWxzL2Rpc3Qva2V5c3RhdGljLWNvcmUtYXBpLXV0aWxzLmNqcy5tanNcIixcblx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9hcGkvdXRpbHMvZGlzdC9rZXlzdGF0aWMtY29yZS1hcGktdXRpbHMuY2pzLmpzXCJcblx0XHRcdH0sXG5cdFx0XHRub2RlOiB7XG5cdFx0XHRcdFwicmVhY3Qtc2VydmVyXCI6IHtcblx0XHRcdFx0XHRtb2R1bGU6IFwiLi9hcGkvdXRpbHMvZGlzdC9rZXlzdGF0aWMtY29yZS1hcGktdXRpbHMubm9kZS5yZWFjdC1zZXJ2ZXIuZXNtLmpzXCIsXG5cdFx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL2FwaS91dGlscy9kaXN0L2tleXN0YXRpYy1jb3JlLWFwaS11dGlscy5ub2RlLnJlYWN0LXNlcnZlci5janMubWpzXCIsXG5cdFx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9hcGkvdXRpbHMvZGlzdC9rZXlzdGF0aWMtY29yZS1hcGktdXRpbHMubm9kZS5yZWFjdC1zZXJ2ZXIuY2pzLmpzXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0bW9kdWxlOiBcIi4vYXBpL3V0aWxzL2Rpc3Qva2V5c3RhdGljLWNvcmUtYXBpLXV0aWxzLm5vZGUuZXNtLmpzXCIsXG5cdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi9hcGkvdXRpbHMvZGlzdC9rZXlzdGF0aWMtY29yZS1hcGktdXRpbHMubm9kZS5janMubWpzXCIsXG5cdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vYXBpL3V0aWxzL2Rpc3Qva2V5c3RhdGljLWNvcmUtYXBpLXV0aWxzLm5vZGUuY2pzLmpzXCJcblx0XHRcdH0sXG5cdFx0XHRcInJlYWN0LXNlcnZlclwiOiB7XG5cdFx0XHRcdG1vZHVsZTogXCIuL2FwaS91dGlscy9kaXN0L2tleXN0YXRpYy1jb3JlLWFwaS11dGlscy5yZWFjdC1zZXJ2ZXIuZXNtLmpzXCIsXG5cdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi9hcGkvdXRpbHMvZGlzdC9rZXlzdGF0aWMtY29yZS1hcGktdXRpbHMucmVhY3Qtc2VydmVyLmNqcy5tanNcIixcblx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9hcGkvdXRpbHMvZGlzdC9rZXlzdGF0aWMtY29yZS1hcGktdXRpbHMucmVhY3Qtc2VydmVyLmNqcy5qc1wiXG5cdFx0XHR9LFxuXHRcdFx0bW9kdWxlOiBcIi4vYXBpL3V0aWxzL2Rpc3Qva2V5c3RhdGljLWNvcmUtYXBpLXV0aWxzLmVzbS5qc1wiLFxuXHRcdFx0XCJpbXBvcnRcIjogXCIuL2FwaS91dGlscy9kaXN0L2tleXN0YXRpYy1jb3JlLWFwaS11dGlscy5janMubWpzXCIsXG5cdFx0XHRcImRlZmF1bHRcIjogXCIuL2FwaS91dGlscy9kaXN0L2tleXN0YXRpYy1jb3JlLWFwaS11dGlscy5janMuanNcIlxuXHRcdH0sXG5cdFx0XCIuL3JlbmRlcmVyXCI6IHtcblx0XHRcdHR5cGVzOiB7XG5cdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi9yZW5kZXJlci9kaXN0L2tleXN0YXRpYy1jb3JlLXJlbmRlcmVyLmNqcy5tanNcIixcblx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9yZW5kZXJlci9kaXN0L2tleXN0YXRpYy1jb3JlLXJlbmRlcmVyLmNqcy5qc1wiXG5cdFx0XHR9LFxuXHRcdFx0bm9kZToge1xuXHRcdFx0XHRcInJlYWN0LXNlcnZlclwiOiB7XG5cdFx0XHRcdFx0bW9kdWxlOiBcIi4vcmVuZGVyZXIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZW5kZXJlci5ub2RlLnJlYWN0LXNlcnZlci5lc20uanNcIixcblx0XHRcdFx0XHRcImltcG9ydFwiOiBcIi4vcmVuZGVyZXIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZW5kZXJlci5ub2RlLnJlYWN0LXNlcnZlci5janMubWpzXCIsXG5cdFx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9yZW5kZXJlci9kaXN0L2tleXN0YXRpYy1jb3JlLXJlbmRlcmVyLm5vZGUucmVhY3Qtc2VydmVyLmNqcy5qc1wiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdG1vZHVsZTogXCIuL3JlbmRlcmVyL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVuZGVyZXIubm9kZS5lc20uanNcIixcblx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL3JlbmRlcmVyL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVuZGVyZXIubm9kZS5janMubWpzXCIsXG5cdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vcmVuZGVyZXIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZW5kZXJlci5ub2RlLmNqcy5qc1wiXG5cdFx0XHR9LFxuXHRcdFx0XCJyZWFjdC1zZXJ2ZXJcIjoge1xuXHRcdFx0XHRtb2R1bGU6IFwiLi9yZW5kZXJlci9kaXN0L2tleXN0YXRpYy1jb3JlLXJlbmRlcmVyLnJlYWN0LXNlcnZlci5lc20uanNcIixcblx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL3JlbmRlcmVyL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVuZGVyZXIucmVhY3Qtc2VydmVyLmNqcy5tanNcIixcblx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9yZW5kZXJlci9kaXN0L2tleXN0YXRpYy1jb3JlLXJlbmRlcmVyLnJlYWN0LXNlcnZlci5janMuanNcIlxuXHRcdFx0fSxcblx0XHRcdG1vZHVsZTogXCIuL3JlbmRlcmVyL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVuZGVyZXIuZXNtLmpzXCIsXG5cdFx0XHRcImltcG9ydFwiOiBcIi4vcmVuZGVyZXIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZW5kZXJlci5janMubWpzXCIsXG5cdFx0XHRcImRlZmF1bHRcIjogXCIuL3JlbmRlcmVyL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVuZGVyZXIuY2pzLmpzXCJcblx0XHR9LFxuXHRcdFwiLi9hcGkvZ2VuZXJpY1wiOiB7XG5cdFx0XHR0eXBlczoge1xuXHRcdFx0XHRcImltcG9ydFwiOiBcIi4vYXBpL2dlbmVyaWMvZGlzdC9rZXlzdGF0aWMtY29yZS1hcGktZ2VuZXJpYy5janMubWpzXCIsXG5cdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vYXBpL2dlbmVyaWMvZGlzdC9rZXlzdGF0aWMtY29yZS1hcGktZ2VuZXJpYy5janMuanNcIlxuXHRcdFx0fSxcblx0XHRcdG5vZGU6IHtcblx0XHRcdFx0XCJyZWFjdC1zZXJ2ZXJcIjoge1xuXHRcdFx0XHRcdG1vZHVsZTogXCIuL2FwaS9nZW5lcmljL2Rpc3Qva2V5c3RhdGljLWNvcmUtYXBpLWdlbmVyaWMubm9kZS5yZWFjdC1zZXJ2ZXIuZXNtLmpzXCIsXG5cdFx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL2FwaS9nZW5lcmljL2Rpc3Qva2V5c3RhdGljLWNvcmUtYXBpLWdlbmVyaWMubm9kZS5yZWFjdC1zZXJ2ZXIuY2pzLm1qc1wiLFxuXHRcdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vYXBpL2dlbmVyaWMvZGlzdC9rZXlzdGF0aWMtY29yZS1hcGktZ2VuZXJpYy5ub2RlLnJlYWN0LXNlcnZlci5janMuanNcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRtb2R1bGU6IFwiLi9hcGkvZ2VuZXJpYy9kaXN0L2tleXN0YXRpYy1jb3JlLWFwaS1nZW5lcmljLm5vZGUuZXNtLmpzXCIsXG5cdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi9hcGkvZ2VuZXJpYy9kaXN0L2tleXN0YXRpYy1jb3JlLWFwaS1nZW5lcmljLm5vZGUuY2pzLm1qc1wiLFxuXHRcdFx0XHRcImRlZmF1bHRcIjogXCIuL2FwaS9nZW5lcmljL2Rpc3Qva2V5c3RhdGljLWNvcmUtYXBpLWdlbmVyaWMubm9kZS5janMuanNcIlxuXHRcdFx0fSxcblx0XHRcdFwicmVhY3Qtc2VydmVyXCI6IHtcblx0XHRcdFx0bW9kdWxlOiBcIi4vYXBpL2dlbmVyaWMvZGlzdC9rZXlzdGF0aWMtY29yZS1hcGktZ2VuZXJpYy5yZWFjdC1zZXJ2ZXIuZXNtLmpzXCIsXG5cdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi9hcGkvZ2VuZXJpYy9kaXN0L2tleXN0YXRpYy1jb3JlLWFwaS1nZW5lcmljLnJlYWN0LXNlcnZlci5janMubWpzXCIsXG5cdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vYXBpL2dlbmVyaWMvZGlzdC9rZXlzdGF0aWMtY29yZS1hcGktZ2VuZXJpYy5yZWFjdC1zZXJ2ZXIuY2pzLmpzXCJcblx0XHRcdH0sXG5cdFx0XHRtb2R1bGU6IFwiLi9hcGkvZ2VuZXJpYy9kaXN0L2tleXN0YXRpYy1jb3JlLWFwaS1nZW5lcmljLmVzbS5qc1wiLFxuXHRcdFx0XCJpbXBvcnRcIjogXCIuL2FwaS9nZW5lcmljL2Rpc3Qva2V5c3RhdGljLWNvcmUtYXBpLWdlbmVyaWMuY2pzLm1qc1wiLFxuXHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9hcGkvZ2VuZXJpYy9kaXN0L2tleXN0YXRpYy1jb3JlLWFwaS1nZW5lcmljLmNqcy5qc1wiXG5cdFx0fSxcblx0XHRcIi4vcmVhZGVyXCI6IHtcblx0XHRcdHR5cGVzOiB7XG5cdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi9yZWFkZXIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZWFkZXIuY2pzLm1qc1wiLFxuXHRcdFx0XHRcImRlZmF1bHRcIjogXCIuL3JlYWRlci9kaXN0L2tleXN0YXRpYy1jb3JlLXJlYWRlci5janMuanNcIlxuXHRcdFx0fSxcblx0XHRcdG5vZGU6IHtcblx0XHRcdFx0XCJyZWFjdC1zZXJ2ZXJcIjoge1xuXHRcdFx0XHRcdG1vZHVsZTogXCIuL3JlYWRlci9kaXN0L2tleXN0YXRpYy1jb3JlLXJlYWRlci5ub2RlLnJlYWN0LXNlcnZlci5lc20uanNcIixcblx0XHRcdFx0XHRcImltcG9ydFwiOiBcIi4vcmVhZGVyL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVhZGVyLm5vZGUucmVhY3Qtc2VydmVyLmNqcy5tanNcIixcblx0XHRcdFx0XHRcImRlZmF1bHRcIjogXCIuL3JlYWRlci9kaXN0L2tleXN0YXRpYy1jb3JlLXJlYWRlci5ub2RlLnJlYWN0LXNlcnZlci5janMuanNcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRtb2R1bGU6IFwiLi9yZWFkZXIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZWFkZXIubm9kZS5lc20uanNcIixcblx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL3JlYWRlci9kaXN0L2tleXN0YXRpYy1jb3JlLXJlYWRlci5ub2RlLmNqcy5tanNcIixcblx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9yZWFkZXIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZWFkZXIubm9kZS5janMuanNcIlxuXHRcdFx0fSxcblx0XHRcdFwicmVhY3Qtc2VydmVyXCI6IHtcblx0XHRcdFx0bW9kdWxlOiBcIi4vcmVhZGVyL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVhZGVyLnJlYWN0LXNlcnZlci5lc20uanNcIixcblx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL3JlYWRlci9kaXN0L2tleXN0YXRpYy1jb3JlLXJlYWRlci5yZWFjdC1zZXJ2ZXIuY2pzLm1qc1wiLFxuXHRcdFx0XHRcImRlZmF1bHRcIjogXCIuL3JlYWRlci9kaXN0L2tleXN0YXRpYy1jb3JlLXJlYWRlci5yZWFjdC1zZXJ2ZXIuY2pzLmpzXCJcblx0XHRcdH0sXG5cdFx0XHRtb2R1bGU6IFwiLi9yZWFkZXIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZWFkZXIuZXNtLmpzXCIsXG5cdFx0XHRcImltcG9ydFwiOiBcIi4vcmVhZGVyL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVhZGVyLmNqcy5tanNcIixcblx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vcmVhZGVyL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVhZGVyLmNqcy5qc1wiXG5cdFx0fSxcblx0XHRcIi4vcmVhZGVyL2dpdGh1YlwiOiB7XG5cdFx0XHR0eXBlczoge1xuXHRcdFx0XHRcImltcG9ydFwiOiBcIi4vcmVhZGVyL2dpdGh1Yi9kaXN0L2tleXN0YXRpYy1jb3JlLXJlYWRlci1naXRodWIuY2pzLm1qc1wiLFxuXHRcdFx0XHRcImRlZmF1bHRcIjogXCIuL3JlYWRlci9naXRodWIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZWFkZXItZ2l0aHViLmNqcy5qc1wiXG5cdFx0XHR9LFxuXHRcdFx0bm9kZToge1xuXHRcdFx0XHRcInJlYWN0LXNlcnZlclwiOiB7XG5cdFx0XHRcdFx0bW9kdWxlOiBcIi4vcmVhZGVyL2dpdGh1Yi9kaXN0L2tleXN0YXRpYy1jb3JlLXJlYWRlci1naXRodWIubm9kZS5yZWFjdC1zZXJ2ZXIuZXNtLmpzXCIsXG5cdFx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL3JlYWRlci9naXRodWIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZWFkZXItZ2l0aHViLm5vZGUucmVhY3Qtc2VydmVyLmNqcy5tanNcIixcblx0XHRcdFx0XHRcImRlZmF1bHRcIjogXCIuL3JlYWRlci9naXRodWIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZWFkZXItZ2l0aHViLm5vZGUucmVhY3Qtc2VydmVyLmNqcy5qc1wiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdG1vZHVsZTogXCIuL3JlYWRlci9naXRodWIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZWFkZXItZ2l0aHViLm5vZGUuZXNtLmpzXCIsXG5cdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi9yZWFkZXIvZ2l0aHViL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVhZGVyLWdpdGh1Yi5ub2RlLmNqcy5tanNcIixcblx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9yZWFkZXIvZ2l0aHViL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVhZGVyLWdpdGh1Yi5ub2RlLmNqcy5qc1wiXG5cdFx0XHR9LFxuXHRcdFx0XCJyZWFjdC1zZXJ2ZXJcIjoge1xuXHRcdFx0XHRtb2R1bGU6IFwiLi9yZWFkZXIvZ2l0aHViL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVhZGVyLWdpdGh1Yi5yZWFjdC1zZXJ2ZXIuZXNtLmpzXCIsXG5cdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi9yZWFkZXIvZ2l0aHViL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVhZGVyLWdpdGh1Yi5yZWFjdC1zZXJ2ZXIuY2pzLm1qc1wiLFxuXHRcdFx0XHRcImRlZmF1bHRcIjogXCIuL3JlYWRlci9naXRodWIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZWFkZXItZ2l0aHViLnJlYWN0LXNlcnZlci5janMuanNcIlxuXHRcdFx0fSxcblx0XHRcdG1vZHVsZTogXCIuL3JlYWRlci9naXRodWIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZWFkZXItZ2l0aHViLmVzbS5qc1wiLFxuXHRcdFx0XCJpbXBvcnRcIjogXCIuL3JlYWRlci9naXRodWIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZWFkZXItZ2l0aHViLmNqcy5tanNcIixcblx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vcmVhZGVyL2dpdGh1Yi9kaXN0L2tleXN0YXRpYy1jb3JlLXJlYWRlci1naXRodWIuY2pzLmpzXCJcblx0XHR9LFxuXHRcdFwiLi9jb250ZW50LWNvbXBvbmVudHNcIjoge1xuXHRcdFx0dHlwZXM6IHtcblx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL2NvbnRlbnQtY29tcG9uZW50cy9kaXN0L2tleXN0YXRpYy1jb3JlLWNvbnRlbnQtY29tcG9uZW50cy5janMubWpzXCIsXG5cdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vY29udGVudC1jb21wb25lbnRzL2Rpc3Qva2V5c3RhdGljLWNvcmUtY29udGVudC1jb21wb25lbnRzLmNqcy5qc1wiXG5cdFx0XHR9LFxuXHRcdFx0bm9kZToge1xuXHRcdFx0XHRcInJlYWN0LXNlcnZlclwiOiB7XG5cdFx0XHRcdFx0bW9kdWxlOiBcIi4vY29udGVudC1jb21wb25lbnRzL2Rpc3Qva2V5c3RhdGljLWNvcmUtY29udGVudC1jb21wb25lbnRzLm5vZGUucmVhY3Qtc2VydmVyLmVzbS5qc1wiLFxuXHRcdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi9jb250ZW50LWNvbXBvbmVudHMvZGlzdC9rZXlzdGF0aWMtY29yZS1jb250ZW50LWNvbXBvbmVudHMubm9kZS5yZWFjdC1zZXJ2ZXIuY2pzLm1qc1wiLFxuXHRcdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vY29udGVudC1jb21wb25lbnRzL2Rpc3Qva2V5c3RhdGljLWNvcmUtY29udGVudC1jb21wb25lbnRzLm5vZGUucmVhY3Qtc2VydmVyLmNqcy5qc1wiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdG1vZHVsZTogXCIuL2NvbnRlbnQtY29tcG9uZW50cy9kaXN0L2tleXN0YXRpYy1jb3JlLWNvbnRlbnQtY29tcG9uZW50cy5ub2RlLmVzbS5qc1wiLFxuXHRcdFx0XHRcImltcG9ydFwiOiBcIi4vY29udGVudC1jb21wb25lbnRzL2Rpc3Qva2V5c3RhdGljLWNvcmUtY29udGVudC1jb21wb25lbnRzLm5vZGUuY2pzLm1qc1wiLFxuXHRcdFx0XHRcImRlZmF1bHRcIjogXCIuL2NvbnRlbnQtY29tcG9uZW50cy9kaXN0L2tleXN0YXRpYy1jb3JlLWNvbnRlbnQtY29tcG9uZW50cy5ub2RlLmNqcy5qc1wiXG5cdFx0XHR9LFxuXHRcdFx0XCJyZWFjdC1zZXJ2ZXJcIjoge1xuXHRcdFx0XHRtb2R1bGU6IFwiLi9jb250ZW50LWNvbXBvbmVudHMvZGlzdC9rZXlzdGF0aWMtY29yZS1jb250ZW50LWNvbXBvbmVudHMucmVhY3Qtc2VydmVyLmVzbS5qc1wiLFxuXHRcdFx0XHRcImltcG9ydFwiOiBcIi4vY29udGVudC1jb21wb25lbnRzL2Rpc3Qva2V5c3RhdGljLWNvcmUtY29udGVudC1jb21wb25lbnRzLnJlYWN0LXNlcnZlci5janMubWpzXCIsXG5cdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vY29udGVudC1jb21wb25lbnRzL2Rpc3Qva2V5c3RhdGljLWNvcmUtY29udGVudC1jb21wb25lbnRzLnJlYWN0LXNlcnZlci5janMuanNcIlxuXHRcdFx0fSxcblx0XHRcdG1vZHVsZTogXCIuL2NvbnRlbnQtY29tcG9uZW50cy9kaXN0L2tleXN0YXRpYy1jb3JlLWNvbnRlbnQtY29tcG9uZW50cy5lc20uanNcIixcblx0XHRcdFwiaW1wb3J0XCI6IFwiLi9jb250ZW50LWNvbXBvbmVudHMvZGlzdC9rZXlzdGF0aWMtY29yZS1jb250ZW50LWNvbXBvbmVudHMuY2pzLm1qc1wiLFxuXHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9jb250ZW50LWNvbXBvbmVudHMvZGlzdC9rZXlzdGF0aWMtY29yZS1jb250ZW50LWNvbXBvbmVudHMuY2pzLmpzXCJcblx0XHR9LFxuXHRcdFwiLi9jb21wb25lbnQtYmxvY2tzXCI6IHtcblx0XHRcdHR5cGVzOiB7XG5cdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi9jb21wb25lbnQtYmxvY2tzL2Rpc3Qva2V5c3RhdGljLWNvcmUtY29tcG9uZW50LWJsb2Nrcy5janMubWpzXCIsXG5cdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vY29tcG9uZW50LWJsb2Nrcy9kaXN0L2tleXN0YXRpYy1jb3JlLWNvbXBvbmVudC1ibG9ja3MuY2pzLmpzXCJcblx0XHRcdH0sXG5cdFx0XHRub2RlOiB7XG5cdFx0XHRcdFwicmVhY3Qtc2VydmVyXCI6IHtcblx0XHRcdFx0XHRtb2R1bGU6IFwiLi9jb21wb25lbnQtYmxvY2tzL2Rpc3Qva2V5c3RhdGljLWNvcmUtY29tcG9uZW50LWJsb2Nrcy5ub2RlLnJlYWN0LXNlcnZlci5lc20uanNcIixcblx0XHRcdFx0XHRcImltcG9ydFwiOiBcIi4vY29tcG9uZW50LWJsb2Nrcy9kaXN0L2tleXN0YXRpYy1jb3JlLWNvbXBvbmVudC1ibG9ja3Mubm9kZS5yZWFjdC1zZXJ2ZXIuY2pzLm1qc1wiLFxuXHRcdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vY29tcG9uZW50LWJsb2Nrcy9kaXN0L2tleXN0YXRpYy1jb3JlLWNvbXBvbmVudC1ibG9ja3Mubm9kZS5yZWFjdC1zZXJ2ZXIuY2pzLmpzXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0bW9kdWxlOiBcIi4vY29tcG9uZW50LWJsb2Nrcy9kaXN0L2tleXN0YXRpYy1jb3JlLWNvbXBvbmVudC1ibG9ja3Mubm9kZS5lc20uanNcIixcblx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL2NvbXBvbmVudC1ibG9ja3MvZGlzdC9rZXlzdGF0aWMtY29yZS1jb21wb25lbnQtYmxvY2tzLm5vZGUuY2pzLm1qc1wiLFxuXHRcdFx0XHRcImRlZmF1bHRcIjogXCIuL2NvbXBvbmVudC1ibG9ja3MvZGlzdC9rZXlzdGF0aWMtY29yZS1jb21wb25lbnQtYmxvY2tzLm5vZGUuY2pzLmpzXCJcblx0XHRcdH0sXG5cdFx0XHRcInJlYWN0LXNlcnZlclwiOiB7XG5cdFx0XHRcdG1vZHVsZTogXCIuL2NvbXBvbmVudC1ibG9ja3MvZGlzdC9rZXlzdGF0aWMtY29yZS1jb21wb25lbnQtYmxvY2tzLnJlYWN0LXNlcnZlci5lc20uanNcIixcblx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL2NvbXBvbmVudC1ibG9ja3MvZGlzdC9rZXlzdGF0aWMtY29yZS1jb21wb25lbnQtYmxvY2tzLnJlYWN0LXNlcnZlci5janMubWpzXCIsXG5cdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vY29tcG9uZW50LWJsb2Nrcy9kaXN0L2tleXN0YXRpYy1jb3JlLWNvbXBvbmVudC1ibG9ja3MucmVhY3Qtc2VydmVyLmNqcy5qc1wiXG5cdFx0XHR9LFxuXHRcdFx0bW9kdWxlOiBcIi4vY29tcG9uZW50LWJsb2Nrcy9kaXN0L2tleXN0YXRpYy1jb3JlLWNvbXBvbmVudC1ibG9ja3MuZXNtLmpzXCIsXG5cdFx0XHRcImltcG9ydFwiOiBcIi4vY29tcG9uZW50LWJsb2Nrcy9kaXN0L2tleXN0YXRpYy1jb3JlLWNvbXBvbmVudC1ibG9ja3MuY2pzLm1qc1wiLFxuXHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9jb21wb25lbnQtYmxvY2tzL2Rpc3Qva2V5c3RhdGljLWNvcmUtY29tcG9uZW50LWJsb2Nrcy5janMuanNcIlxuXHRcdH0sXG5cdFx0XCIuL2Zvcm0vZmllbGRzL21hcmtkb2NcIjoge1xuXHRcdFx0dHlwZXM6IHtcblx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL2Zvcm0vZmllbGRzL21hcmtkb2MvZGlzdC9rZXlzdGF0aWMtY29yZS1mb3JtLWZpZWxkcy1tYXJrZG9jLmNqcy5tanNcIixcblx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9mb3JtL2ZpZWxkcy9tYXJrZG9jL2Rpc3Qva2V5c3RhdGljLWNvcmUtZm9ybS1maWVsZHMtbWFya2RvYy5janMuanNcIlxuXHRcdFx0fSxcblx0XHRcdG5vZGU6IHtcblx0XHRcdFx0XCJyZWFjdC1zZXJ2ZXJcIjoge1xuXHRcdFx0XHRcdG1vZHVsZTogXCIuL2Zvcm0vZmllbGRzL21hcmtkb2MvZGlzdC9rZXlzdGF0aWMtY29yZS1mb3JtLWZpZWxkcy1tYXJrZG9jLm5vZGUucmVhY3Qtc2VydmVyLmVzbS5qc1wiLFxuXHRcdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi9mb3JtL2ZpZWxkcy9tYXJrZG9jL2Rpc3Qva2V5c3RhdGljLWNvcmUtZm9ybS1maWVsZHMtbWFya2RvYy5ub2RlLnJlYWN0LXNlcnZlci5janMubWpzXCIsXG5cdFx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9mb3JtL2ZpZWxkcy9tYXJrZG9jL2Rpc3Qva2V5c3RhdGljLWNvcmUtZm9ybS1maWVsZHMtbWFya2RvYy5ub2RlLnJlYWN0LXNlcnZlci5janMuanNcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRtb2R1bGU6IFwiLi9mb3JtL2ZpZWxkcy9tYXJrZG9jL2Rpc3Qva2V5c3RhdGljLWNvcmUtZm9ybS1maWVsZHMtbWFya2RvYy5ub2RlLmVzbS5qc1wiLFxuXHRcdFx0XHRcImltcG9ydFwiOiBcIi4vZm9ybS9maWVsZHMvbWFya2RvYy9kaXN0L2tleXN0YXRpYy1jb3JlLWZvcm0tZmllbGRzLW1hcmtkb2Mubm9kZS5janMubWpzXCIsXG5cdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vZm9ybS9maWVsZHMvbWFya2RvYy9kaXN0L2tleXN0YXRpYy1jb3JlLWZvcm0tZmllbGRzLW1hcmtkb2Mubm9kZS5janMuanNcIlxuXHRcdFx0fSxcblx0XHRcdFwicmVhY3Qtc2VydmVyXCI6IHtcblx0XHRcdFx0bW9kdWxlOiBcIi4vZm9ybS9maWVsZHMvbWFya2RvYy9kaXN0L2tleXN0YXRpYy1jb3JlLWZvcm0tZmllbGRzLW1hcmtkb2MucmVhY3Qtc2VydmVyLmVzbS5qc1wiLFxuXHRcdFx0XHRcImltcG9ydFwiOiBcIi4vZm9ybS9maWVsZHMvbWFya2RvYy9kaXN0L2tleXN0YXRpYy1jb3JlLWZvcm0tZmllbGRzLW1hcmtkb2MucmVhY3Qtc2VydmVyLmNqcy5tanNcIixcblx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9mb3JtL2ZpZWxkcy9tYXJrZG9jL2Rpc3Qva2V5c3RhdGljLWNvcmUtZm9ybS1maWVsZHMtbWFya2RvYy5yZWFjdC1zZXJ2ZXIuY2pzLmpzXCJcblx0XHRcdH0sXG5cdFx0XHRtb2R1bGU6IFwiLi9mb3JtL2ZpZWxkcy9tYXJrZG9jL2Rpc3Qva2V5c3RhdGljLWNvcmUtZm9ybS1maWVsZHMtbWFya2RvYy5lc20uanNcIixcblx0XHRcdFwiaW1wb3J0XCI6IFwiLi9mb3JtL2ZpZWxkcy9tYXJrZG9jL2Rpc3Qva2V5c3RhdGljLWNvcmUtZm9ybS1maWVsZHMtbWFya2RvYy5janMubWpzXCIsXG5cdFx0XHRcImRlZmF1bHRcIjogXCIuL2Zvcm0vZmllbGRzL21hcmtkb2MvZGlzdC9rZXlzdGF0aWMtY29yZS1mb3JtLWZpZWxkcy1tYXJrZG9jLmNqcy5qc1wiXG5cdFx0fSxcblx0XHRcIi4vcGFja2FnZS5qc29uXCI6IFwiLi9wYWNrYWdlLmpzb25cIlxuXHR9LFxuXHRtYWluOiBcImRpc3Qva2V5c3RhdGljLWNvcmUuY2pzLmpzXCIsXG5cdG1vZHVsZTogXCJkaXN0L2tleXN0YXRpYy1jb3JlLmVzbS5qc1wiLFxuXHRmaWxlczogW1xuXHRcdFwiZGlzdFwiLFxuXHRcdFwiYXBpXCIsXG5cdFx0XCJyZWFkZXJcIixcblx0XHRcInJlbmRlcmVyXCIsXG5cdFx0XCJ1aVwiLFxuXHRcdFwiZm9ybVwiLFxuXHRcdFwiY29tcG9uZW50LWJsb2Nrc1wiLFxuXHRcdFwiY29udGVudC1jb21wb25lbnRzXCJcblx0XSxcblx0c2NyaXB0czoge1xuXHRcdHNldHVwOiBcInRzLWdxbCBidWlsZCAmJiB0c3ggc2NyaXB0cy9sMTBuLnRzICYmIHRzeCBzY3JpcHRzL2J1aWxkLXByaXNtLnRzXCIsXG5cdFx0YnVpbGQ6IFwicG5wbSBydW4gc2V0dXAgJiYgbmV4dCBidWlsZFwiLFxuXHRcdGRldjogXCJuZXh0IGRldlwiLFxuXHRcdHN0YXJ0OiBcIm5leHQgc3RhcnRcIlxuXHR9LFxuXHRkZXBlbmRlbmNpZXM6IHtcblx0XHRcIkBiYWJlbC9ydW50aW1lXCI6IFwiXjcuMTguM1wiLFxuXHRcdFwiQGJyYWludHJlZS9zYW5pdGl6ZS11cmxcIjogXCJeNi4wLjJcIixcblx0XHRcIkBlbW90aW9uL2Nzc1wiOiBcIl4xMS45LjBcIixcblx0XHRcIkBlbW90aW9uL3dlYWstbWVtb2l6ZVwiOiBcIl4wLjMuMFwiLFxuXHRcdFwiQGZsb2F0aW5nLXVpL3JlYWN0XCI6IFwiXjAuMjQuMFwiLFxuXHRcdFwiQGludGVybmF0aW9uYWxpemVkL3N0cmluZ1wiOiBcIl4zLjEuMVwiLFxuXHRcdFwiQGtleXN0YXIvdWlcIjogXCJeMC40LjlcIixcblx0XHRcIkBtYXJrZG9jL21hcmtkb2NcIjogXCJeMC4zLjBcIixcblx0XHRcIkByZWFjdC1hcmlhL2ZvY3VzXCI6IFwiXjMuMTQuM1wiLFxuXHRcdFwiQHJlYWN0LWFyaWEvaTE4blwiOiBcIl4zLjguMFwiLFxuXHRcdFwiQHJlYWN0LWFyaWEvaW50ZXJhY3Rpb25zXCI6IFwiXjMuMTkuMVwiLFxuXHRcdFwiQHJlYWN0LWFyaWEvb3ZlcmxheXNcIjogXCJeMy4xOC4xXCIsXG5cdFx0XCJAcmVhY3QtYXJpYS9zZWxlY3Rpb25cIjogXCJeMy4xNy4xXCIsXG5cdFx0XCJAcmVhY3QtYXJpYS91dGlsc1wiOiBcIl4zLjIxLjFcIixcblx0XHRcIkByZWFjdC1hcmlhL3Zpc3VhbGx5LWhpZGRlblwiOiBcIl4zLjguNlwiLFxuXHRcdFwiQHJlYWN0LXN0YXRlbHkvY29sbGVjdGlvbnNcIjogXCJeMy4xMC4yXCIsXG5cdFx0XCJAcmVhY3Qtc3RhdGVseS9saXN0XCI6IFwiXjMuMTAuMFwiLFxuXHRcdFwiQHJlYWN0LXN0YXRlbHkvb3ZlcmxheXNcIjogXCJeMy42LjNcIixcblx0XHRcIkByZWFjdC1zdGF0ZWx5L3V0aWxzXCI6IFwiXjMuOC4wXCIsXG5cdFx0XCJAcmVhY3QtdHlwZXMvc2hhcmVkXCI6IFwiXjMuMjEuMFwiLFxuXHRcdFwiQHNpbmRyZXNvcmh1cy9zbHVnaWZ5XCI6IFwiXjEuMS4yXCIsXG5cdFx0XCJAdHMtZ3FsL3RhZ1wiOiBcIl4wLjcuMFwiLFxuXHRcdFwiQHR5cGVzL25vZGVcIjogXCIxNi4xMS4xM1wiLFxuXHRcdFwiQHR5cGVzL3JlYWN0XCI6IFwiXjE4LjIuOFwiLFxuXHRcdFwiQHR5cGVzL3JlYWN0LWRvbVwiOiBcIl4xOC4wLjExXCIsXG5cdFx0XCJAdXJxbC9jb3JlXCI6IFwiXjQuMS4zXCIsXG5cdFx0XCJAdXJxbC9leGNoYW5nZS1hdXRoXCI6IFwiXjIuMS42XCIsXG5cdFx0XCJAdXJxbC9leGNoYW5nZS1ncmFwaGNhY2hlXCI6IFwiXjYuMy4zXCIsXG5cdFx0XCJAdXJxbC9leGNoYW5nZS1wZXJzaXN0ZWRcIjogXCJeNC4xLjBcIixcblx0XHRjb29raWU6IFwiXjAuNS4wXCIsXG5cdFx0ZW1lcnk6IFwiXjEuNC4xXCIsXG5cdFx0XCJlc2NhcGUtc3RyaW5nLXJlZ2V4cFwiOiBcIl40LjAuMFwiLFxuXHRcdFwiZmFzdC1kZWVwLWVxdWFsXCI6IFwiXjMuMS4zXCIsXG5cdFx0Z3JhcGhxbDogXCJeMTYuNi4wXCIsXG5cdFx0XCJpZGIta2V5dmFsXCI6IFwiXjYuMi4xXCIsXG5cdFx0aWdub3JlOiBcIl41LjIuNFwiLFxuXHRcdFwiaXJvbi13ZWJjcnlwdG9cIjogXCJeMC4xMC4xXCIsXG5cdFx0XCJpcy1ob3RrZXlcIjogXCJeMC4yLjBcIixcblx0XHRcImpzLWJhc2U2NFwiOiBcIl4zLjcuNVwiLFxuXHRcdFwianMteWFtbFwiOiBcIl40LjEuMFwiLFxuXHRcdFwibHJ1LWNhY2hlXCI6IFwiXjcuMTQuMVwiLFxuXHRcdFwibWF0Y2gtc29ydGVyXCI6IFwiXjYuMy4xXCIsXG5cdFx0XCJtZGFzdC11dGlsLWZyb20tbWFya2Rvd25cIjogXCJeMC44LjVcIixcblx0XHRcIm1kYXN0LXV0aWwtZ2ZtLWF1dG9saW5rLWxpdGVyYWxcIjogXCJeMC4xLjNcIixcblx0XHRcIm1kYXN0LXV0aWwtZ2ZtLXN0cmlrZXRocm91Z2hcIjogXCJeMC4yLjNcIixcblx0XHRcIm1pY3JvbWFyay1leHRlbnNpb24tZ2ZtLWF1dG9saW5rLWxpdGVyYWxcIjogXCIwLjUuN1wiLFxuXHRcdFwibWljcm9tYXJrLWV4dGVuc2lvbi1nZm0tc3RyaWtldGhyb3VnaFwiOiBcIjAuNi41XCIsXG5cdFx0bWluaW1hdGNoOiBcIl43LjEuMFwiLFxuXHRcdFwicHJvc2VtaXJyb3ItY29tbWFuZHNcIjogXCJeMS41LjFcIixcblx0XHRcInByb3NlbWlycm9yLWhpc3RvcnlcIjogXCJeMS4zLjBcIixcblx0XHRcInByb3NlbWlycm9yLWtleW1hcFwiOiBcIl4xLjIuMVwiLFxuXHRcdFwicHJvc2VtaXJyb3ItbW9kZWxcIjogXCJeMS4xOS4wXCIsXG5cdFx0XCJwcm9zZW1pcnJvci1zdGF0ZVwiOiBcIl4xLjQuMlwiLFxuXHRcdFwicHJvc2VtaXJyb3ItdGFibGVzXCI6IFwiXjEuMy40XCIsXG5cdFx0XCJwcm9zZW1pcnJvci10cmFuc2Zvcm1cIjogXCJeMS43LjFcIixcblx0XHRcInByb3NlbWlycm9yLXZpZXdcIjogXCJeMS4zMC4yXCIsXG5cdFx0XCJzY3JvbGwtaW50by12aWV3LWlmLW5lZWRlZFwiOiBcIl4zLjAuM1wiLFxuXHRcdHNsYXRlOiBcIl4wLjkxLjRcIixcblx0XHRcInNsYXRlLWhpc3RvcnlcIjogXCJeMC44Ni4wXCIsXG5cdFx0XCJzbGF0ZS1yZWFjdFwiOiBcIl4wLjkxLjlcIixcblx0XHR1cnFsOiBcIl40LjAuMFwiLFxuXHRcdHpvZDogXCJeMy4yMC4yXCJcblx0fSxcblx0ZGV2RGVwZW5kZW5jaWVzOiB7XG5cdFx0XCJAamVzdC9leHBlY3RcIjogXCJeMjkuNy4wXCIsXG5cdFx0XCJAamVzdC9nbG9iYWxzXCI6IFwiXjI5LjcuMFwiLFxuXHRcdFwiQHRlc3RpbmctbGlicmFyeS91c2VyLWV2ZW50XCI6IFwiXjE0LjQuM1wiLFxuXHRcdFwiQHRzLWdxbC9jb21waWxlclwiOiBcIl4wLjE2LjFcIixcblx0XHRcIkB0cy1ncWwvZXNsaW50LXBsdWdpblwiOiBcIl4wLjguNVwiLFxuXHRcdFwiQHRzLWdxbC9uZXh0XCI6IFwiXjE3LjAuMFwiLFxuXHRcdFwiQHR5cGVzL2Nvb2tpZVwiOiBcIl4wLjUuMVwiLFxuXHRcdFwiQHR5cGVzL2lzLWhvdGtleVwiOiBcIl4wLjEuN1wiLFxuXHRcdFwiQHR5cGVzL2pzLXlhbWxcIjogXCJeNC4wLjVcIixcblx0XHRcIkB0eXBlcy9wcmlzbWpzXCI6IFwiXjEuMjYuMFwiLFxuXHRcdFwiQHR5cGVzL3NpZ25hbC1leGl0XCI6IFwiXjMuMC4xXCIsXG5cdFx0ZXNsaW50OiBcIl44LjE4LjBcIixcblx0XHRcImZhc3QtZ2xvYlwiOiBcIl4zLjIuMTJcIixcblx0XHRcImplc3QtZGlmZlwiOiBcIl4yOS4wLjFcIixcblx0XHRvdXRkZW50OiBcIl4wLjguMFwiLFxuXHRcdFwicHJldHR5LWZvcm1hdFwiOiBcIl4yOS4wLjFcIixcblx0XHRwcmlzbWpzOiBcIl4xLjI5LjBcIixcblx0XHRyZWFjdDogXCJeMTguMi4wXCIsXG5cdFx0XCJyZWFjdC1kb21cIjogXCJeMTguMi4wXCIsXG5cdFx0XCJyZWFjdC1lbGVtZW50LXRvLWpzeC1zdHJpbmdcIjogXCJeMTUuMC4wXCIsXG5cdFx0XCJyZXNpemUtb2JzZXJ2ZXItcG9seWZpbGxcIjogXCJeMS41LjFcIixcblx0XHRcInNpZ25hbC1leGl0XCI6IFwiXjMuMC43XCIsXG5cdFx0XCJzbGF0ZS1oeXBlcnNjcmlwdFwiOiBcIl4wLjc3LjBcIixcblx0XHR0c3g6IFwiXjMuOC4wXCIsXG5cdFx0dHlwZXNjcmlwdDogXCJeNS4yLjJcIlxuXHR9LFxuXHRwZWVyRGVwZW5kZW5jaWVzOiB7XG5cdFx0cmVhY3Q6IFwiXjE4LjIuMFwiLFxuXHRcdFwicmVhY3QtZG9tXCI6IFwiXjE4LjIuMFwiXG5cdH0sXG5cdHByZWNvbnN0cnVjdDoge1xuXHRcdGVudHJ5cG9pbnRzOiBbXG5cdFx0XHRcImluZGV4LnRzXCIsXG5cdFx0XHRcImFwaS9nZW5lcmljLnRzXCIsXG5cdFx0XHRcImFwaS91dGlscy50c1wiLFxuXHRcdFx0XCJyZWFkZXIvaW5kZXgudHNcIixcblx0XHRcdFwicmVhZGVyL2dpdGh1Yi50c1wiLFxuXHRcdFx0XCJyZW5kZXJlci50c3hcIixcblx0XHRcdFwidWkudHN4XCIsXG5cdFx0XHRcImZvcm0vZmllbGRzL21hcmtkb2MvaW5kZXgudHN4XCIsXG5cdFx0XHRcImNvbXBvbmVudC1ibG9ja3MvaW5kZXgudHN4XCIsXG5cdFx0XHRcImNvbnRlbnQtY29tcG9uZW50cy50c1wiXG5cdFx0XVxuXHR9LFxuXHRcInRzLWdxbFwiOiB7XG5cdFx0c2NoZW1hOiBcIi4vZ2l0aHViLmdyYXBocWxcIixcblx0XHRtb2RlOiBcIm5vLXRyYW5zZm9ybVwiLFxuXHRcdGFkZFR5cGVuYW1lOiBmYWxzZSxcblx0XHRzY2FsYXJzOiB7XG5cdFx0XHRHaXRPYmplY3RJRDogXCJzdHJpbmdcIlxuXHRcdH1cblx0fSxcblx0aW1wb3J0czoge1xuXHRcdFwiI3JlYWN0LWNhY2hlLWluLXJlYWN0LXNlcnZlclwiOiB7XG5cdFx0XHRcInJlYWN0LXNlcnZlclwiOiBcIi4vc3JjL3JlYWRlci9yZWFjdC1zZXJ2ZXItY2FjaGUudHNcIixcblx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vc3JjL3JlYWRlci9ub29wLWNhY2hlLnRzXCJcblx0XHR9LFxuXHRcdFwiI3NoYTFcIjoge1xuXHRcdFx0bm9kZTogXCIuL3NyYy9zaGExL25vZGUudHNcIixcblx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vc3JjL3NoYTEvd2ViY3J5cHRvLnRzXCJcblx0XHR9LFxuXHRcdFwiI3dlYmNyeXB0b1wiOiB7XG5cdFx0XHRub2RlOiBcIi4vc3JjL2FwaS93ZWJjcnlwdG8vbm9kZS50c1wiLFxuXHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9zcmMvYXBpL3dlYmNyeXB0by9kZWZhdWx0LnRzXCJcblx0XHR9LFxuXHRcdFwiI2FwaS1oYW5kbGVyXCI6IHtcblx0XHRcdG5vZGU6IFwiLi9zcmMvYXBpL2FwaS1ub2RlLnRzXCIsXG5cdFx0XHRcImRlZmF1bHRcIjogXCIuL3NyYy9hcGkvYXBpLW5vb3AudHNcIlxuXHRcdH0sXG5cdFx0XCIjZmllbGQtdWkvKlwiOiB7XG5cdFx0XHRcInJlYWN0LXNlcnZlclwiOiBcIi4vc3JjL2Zvcm0vZmllbGRzL2VtcHR5LWZpZWxkLXVpLnRzeFwiLFxuXHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9zcmMvZm9ybS9maWVsZHMvKi91aS50c3hcIlxuXHRcdH0sXG5cdFx0XCIjY29tcG9uZW50LWJsb2NrLXByaW1pdGl2ZXNcIjoge1xuXHRcdFx0XCJyZWFjdC1zZXJ2ZXJcIjogXCIuL3NyYy9mb3JtL2ZpZWxkcy9kb2N1bWVudC9Eb2N1bWVudEVkaXRvci9wcmltaXRpdmVzL2JsYW5rLWZvci1yZWFjdC1zZXJ2ZXIudHN4XCIsXG5cdFx0XHRcImRlZmF1bHRcIjogXCIuL3NyYy9mb3JtL2ZpZWxkcy9kb2N1bWVudC9Eb2N1bWVudEVkaXRvci9wcmltaXRpdmVzL2luZGV4LnRzeFwiXG5cdFx0fSxcblx0XHRcIiNjbG91ZC1pbWFnZS1wcmV2aWV3XCI6IHtcblx0XHRcdFwicmVhY3Qtc2VydmVyXCI6IFwiLi9zcmMvY29tcG9uZW50LWJsb2Nrcy9ibGFuay1mb3ItcmVhY3Qtc2VydmVyLnRzeFwiLFxuXHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9zcmMvY29tcG9uZW50LWJsb2Nrcy9jbG91ZC1pbWFnZS1wcmV2aWV3LnRzeFwiXG5cdFx0fVxuXHR9XG59O1xuXG5mdW5jdGlvbiBvYmplY3QoZmllbGRzLCBvcHRzKSB7XG4gIHJldHVybiB7XG4gICAgLi4ub3B0cyxcbiAgICBraW5kOiAnb2JqZWN0JyxcbiAgICBmaWVsZHNcbiAgfTtcbn1cblxuZnVuY3Rpb24gcGx1cmFsaXplKGNvdW50LCBvcHRpb25zKSB7XG4gIGNvbnN0IHtcbiAgICBzaW5ndWxhcixcbiAgICBwbHVyYWwgPSBzaW5ndWxhciArICdzJyxcbiAgICBpbmNsdXNpdmUgPSB0cnVlXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCB2YXJpYW50ID0gY291bnQgPT09IDEgPyBzaW5ndWxhciA6IHBsdXJhbDtcbiAgcmV0dXJuIGluY2x1c2l2ZSA/IGAke2NvdW50fSAke3ZhcmlhbnR9YCA6IHZhcmlhbnQ7XG59XG5mdW5jdGlvbiBnZXRCcmFuY2hQcmVmaXgoY29uZmlnKSB7XG4gIHJldHVybiBjb25maWcuc3RvcmFnZS5raW5kICE9PSAnbG9jYWwnID8gY29uZmlnLnN0b3JhZ2UuYnJhbmNoUHJlZml4IDogdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gaXNHaXRIdWJDb25maWcoY29uZmlnKSB7XG4gIHJldHVybiBjb25maWcuc3RvcmFnZS5raW5kID09PSAnZ2l0aHViJztcbn1cbmZ1bmN0aW9uIGlzTG9jYWxDb25maWcoY29uZmlnKSB7XG4gIHJldHVybiBjb25maWcuc3RvcmFnZS5raW5kID09PSAnbG9jYWwnO1xufVxuZnVuY3Rpb24gaXNDbG91ZENvbmZpZyhjb25maWcpIHtcbiAgdmFyIF9jb25maWckY2xvdWQ7XG4gIGlmIChjb25maWcuc3RvcmFnZS5raW5kICE9PSAnY2xvdWQnKSByZXR1cm4gZmFsc2U7XG4gIGlmICghKChfY29uZmlnJGNsb3VkID0gY29uZmlnLmNsb3VkKSAhPT0gbnVsbCAmJiBfY29uZmlnJGNsb3VkICE9PSB2b2lkIDAgJiYgX2NvbmZpZyRjbG91ZC5wcm9qZWN0KSB8fCAhY29uZmlnLmNsb3VkLnByb2plY3QuaW5jbHVkZXMoJy8nKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgS2V5c3RhdGljIGlzIHNldCB0byBcXGBzdG9yYWdlOiB7IGtpbmQ6ICdjbG91ZCcgfVxcYCBidXQgXFxgY2xvdWQucHJvamVjdFxcYCBpc24ndCBzZXQuXG5jb25maWcoe1xuICBzdG9yYWdlOiB7IGtpbmQ6ICdjbG91ZCcgfSxcbiAgY2xvdWQ6IHsgcHJvamVjdDogJ3RlYW0vcHJvamVjdCcgfSxcbn0pYCk7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBnZXRTcGxpdENsb3VkUHJvamVjdChjb25maWcpIHtcbiAgdmFyIF9jb25maWckY2xvdWQyO1xuICBpZiAoISgoX2NvbmZpZyRjbG91ZDIgPSBjb25maWcuY2xvdWQpICE9PSBudWxsICYmIF9jb25maWckY2xvdWQyICE9PSB2b2lkIDAgJiYgX2NvbmZpZyRjbG91ZDIucHJvamVjdCkpIHJldHVybiB1bmRlZmluZWQ7XG4gIGNvbnN0IFt0ZWFtLCBwcm9qZWN0XSA9IGNvbmZpZy5jbG91ZC5wcm9qZWN0LnNwbGl0KCcvJyk7XG4gIHJldHVybiB7XG4gICAgdGVhbSxcbiAgICBwcm9qZWN0XG4gIH07XG59XG5mdW5jdGlvbiBnZXRSZXBvUGF0aChjb25maWcpIHtcbiAgcmV0dXJuIGAke2NvbmZpZy5tYWluT3duZXJ9LyR7Y29uZmlnLm1haW5SZXBvfWA7XG59XG5mdW5jdGlvbiBnZXRSZXBvVXJsKGNvbmZpZykge1xuICByZXR1cm4gYGh0dHBzOi8vZ2l0aHViLmNvbS8ke2dldFJlcG9QYXRoKGNvbmZpZyl9YDtcbn1cbmZ1bmN0aW9uIGdldFNsdWdGcm9tU3RhdGUoY29sbGVjdGlvbkNvbmZpZywgc3RhdGUpIHtcbiAgY29uc3QgdmFsdWUgPSBzdGF0ZVtjb2xsZWN0aW9uQ29uZmlnLnNsdWdGaWVsZF07XG4gIGNvbnN0IGZpZWxkID0gY29sbGVjdGlvbkNvbmZpZy5zY2hlbWFbY29sbGVjdGlvbkNvbmZpZy5zbHVnRmllbGRdO1xuICBpZiAoZmllbGQua2luZCAhPT0gJ2Zvcm0nIHx8IGZpZWxkLmZvcm1LaW5kICE9PSAnc2x1ZycpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYHNsdWdGaWVsZCBpcyBub3QgYSBzbHVnIGZpZWxkYCk7XG4gIH1cbiAgcmV0dXJuIGZpZWxkLnNlcmlhbGl6ZVdpdGhTbHVnKHZhbHVlKS5zbHVnO1xufVxuZnVuY3Rpb24gZ2V0RW50cmllc0luQ29sbGVjdGlvbldpdGhUcmVlS2V5KGNvbmZpZywgY29sbGVjdGlvbiwgcm9vdFRyZWUpIHtcbiAgdmFyIF9nZXRUcmVlTm9kZUF0UGF0aCRjaCwgX2dldFRyZWVOb2RlQXRQYXRoO1xuICBjb25zdCBjb2xsZWN0aW9uQ29uZmlnID0gY29uZmlnLmNvbGxlY3Rpb25zW2NvbGxlY3Rpb25dO1xuICBjb25zdCBzY2hlbWEgPSBvYmplY3QoY29sbGVjdGlvbkNvbmZpZy5zY2hlbWEpO1xuICBjb25zdCBmb3JtYXRJbmZvID0gZ2V0Q29sbGVjdGlvbkZvcm1hdChjb25maWcsIGNvbGxlY3Rpb24pO1xuICBjb25zdCBleHRlbnNpb24gPSBnZXREYXRhRmlsZUV4dGVuc2lvbihmb3JtYXRJbmZvKTtcbiAgY29uc3QgZ2xvYiA9IGdldFNsdWdHbG9iRm9yQ29sbGVjdGlvbihjb25maWcsIGNvbGxlY3Rpb24pO1xuICBjb25zdCBjb2xsZWN0aW9uUGF0aCA9IGdldENvbGxlY3Rpb25QYXRoKGNvbmZpZywgY29sbGVjdGlvbik7XG4gIGNvbnN0IGRpcmVjdG9yeSA9IChfZ2V0VHJlZU5vZGVBdFBhdGgkY2ggPSAoX2dldFRyZWVOb2RlQXRQYXRoID0gZ2V0VHJlZU5vZGVBdFBhdGgocm9vdFRyZWUsIGNvbGxlY3Rpb25QYXRoKSkgPT09IG51bGwgfHwgX2dldFRyZWVOb2RlQXRQYXRoID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZ2V0VHJlZU5vZGVBdFBhdGguY2hpbGRyZW4pICE9PSBudWxsICYmIF9nZXRUcmVlTm9kZUF0UGF0aCRjaCAhPT0gdm9pZCAwID8gX2dldFRyZWVOb2RlQXRQYXRoJGNoIDogbmV3IE1hcCgpO1xuICBjb25zdCBlbnRyaWVzID0gW107XG4gIGNvbnN0IGRpcmVjdG9yaWVzVXNlZEluU2NoZW1hID0gWy4uLmNvbGxlY3REaXJlY3Rvcmllc1VzZWRJblNjaGVtYShzY2hlbWEpXTtcbiAgY29uc3Qgc3VmZml4ID0gZ2V0Q29sbGVjdGlvbkl0ZW1TbHVnU3VmZml4KGNvbmZpZywgY29sbGVjdGlvbik7XG4gIGNvbnN0IHBvc3NpYmxlRW50cmllcyA9IG5ldyBNYXAoZGlyZWN0b3J5KTtcbiAgaWYgKGdsb2IgPT09ICcqKicpIHtcbiAgICBjb25zdCBoYW5kbGVEaXJlY3RvcnkgPSAoZGlyLCBwcmVmaXgpID0+IHtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgZW50cnldIG9mIGRpcikge1xuICAgICAgICBpZiAoZW50cnkuY2hpbGRyZW4pIHtcbiAgICAgICAgICBwb3NzaWJsZUVudHJpZXMuc2V0KGAke3ByZWZpeH0ke2tleX1gLCBlbnRyeSk7XG4gICAgICAgICAgaGFuZGxlRGlyZWN0b3J5KGVudHJ5LmNoaWxkcmVuLCBgJHtwcmVmaXh9JHtrZXl9L2ApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBvc3NpYmxlRW50cmllcy5zZXQoYCR7cHJlZml4fSR7a2V5fWAsIGVudHJ5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgaGFuZGxlRGlyZWN0b3J5KGRpcmVjdG9yeSwgJycpO1xuICB9XG4gIGZvciAoY29uc3QgW2tleSwgZW50cnldIG9mIHBvc3NpYmxlRW50cmllcykge1xuICAgIGlmIChmb3JtYXRJbmZvLmRhdGFMb2NhdGlvbiA9PT0gJ2luZGV4Jykge1xuICAgICAgdmFyIF9hY3R1YWxFbnRyeSRjaGlsZHJlbjtcbiAgICAgIGNvbnN0IGFjdHVhbEVudHJ5ID0gZ2V0VHJlZU5vZGVBdFBhdGgocm9vdFRyZWUsIGdldENvbGxlY3Rpb25JdGVtUGF0aChjb25maWcsIGNvbGxlY3Rpb24sIGtleSkpO1xuICAgICAgaWYgKCEoYWN0dWFsRW50cnkgIT09IG51bGwgJiYgYWN0dWFsRW50cnkgIT09IHZvaWQgMCAmJiAoX2FjdHVhbEVudHJ5JGNoaWxkcmVuID0gYWN0dWFsRW50cnkuY2hpbGRyZW4pICE9PSBudWxsICYmIF9hY3R1YWxFbnRyeSRjaGlsZHJlbiAhPT0gdm9pZCAwICYmIF9hY3R1YWxFbnRyeSRjaGlsZHJlbi5oYXMoJ2luZGV4JyArIGV4dGVuc2lvbikpKSBjb250aW51ZTtcbiAgICAgIGVudHJpZXMucHVzaCh7XG4gICAgICAgIGtleTogZ2V0VHJlZUtleShbYWN0dWFsRW50cnkuZW50cnkucGF0aCwgLi4uZGlyZWN0b3JpZXNVc2VkSW5TY2hlbWEubWFwKHggPT4gYCR7eH0vJHtrZXl9YCldLCByb290VHJlZSksXG4gICAgICAgIHNsdWc6IGtleVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChzdWZmaXgpIHtcbiAgICAgICAgY29uc3QgbmV3RW50cnkgPSBnZXRUcmVlTm9kZUF0UGF0aChyb290VHJlZSwgZ2V0Q29sbGVjdGlvbkl0ZW1QYXRoKGNvbmZpZywgY29sbGVjdGlvbiwga2V5KSArIGV4dGVuc2lvbik7XG4gICAgICAgIGlmICghbmV3RW50cnkgfHwgbmV3RW50cnkuY2hpbGRyZW4pIGNvbnRpbnVlO1xuICAgICAgICBlbnRyaWVzLnB1c2goe1xuICAgICAgICAgIGtleTogZ2V0VHJlZUtleShbZW50cnkuZW50cnkucGF0aCwgZ2V0Q29sbGVjdGlvbkl0ZW1QYXRoKGNvbmZpZywgY29sbGVjdGlvbiwga2V5KSwgLi4uZGlyZWN0b3JpZXNVc2VkSW5TY2hlbWEubWFwKHggPT4gYCR7eH0vJHtrZXl9YCldLCByb290VHJlZSksXG4gICAgICAgICAgc2x1Zzoga2V5XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGVudHJ5LmNoaWxkcmVuIHx8ICFrZXkuZW5kc1dpdGgoZXh0ZW5zaW9uKSkgY29udGludWU7XG4gICAgICBjb25zdCBzbHVnID0ga2V5LnNsaWNlKDAsIC1leHRlbnNpb24ubGVuZ3RoKTtcbiAgICAgIGVudHJpZXMucHVzaCh7XG4gICAgICAgIGtleTogZ2V0VHJlZUtleShbZW50cnkuZW50cnkucGF0aCwgZ2V0Q29sbGVjdGlvbkl0ZW1QYXRoKGNvbmZpZywgY29sbGVjdGlvbiwgc2x1ZyksIC4uLmRpcmVjdG9yaWVzVXNlZEluU2NoZW1hLm1hcCh4ID0+IGAke3h9LyR7c2x1Z31gKV0sIHJvb3RUcmVlKSxcbiAgICAgICAgc2x1Z1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBlbnRyaWVzO1xufVxuY29uc3QgS0VZU1RBVElDX0NMT1VEX0FQSV9VUkwgPSAnaHR0cHM6Ly9hcGkua2V5c3RhdGljLmNsb3VkJztcbmNvbnN0IEtFWVNUQVRJQ19DTE9VRF9IRUFERVJTID0ge1xuICAneC1rZXlzdGF0aWMtdmVyc2lvbic6IHBrZ0pzb24udmVyc2lvblxufTtcbmNvbnN0IHRleHRFbmNvZGVyJDEgPSBuZXcgVGV4dEVuY29kZXIoKTtcbmFzeW5jIGZ1bmN0aW9uIHJlZGlyZWN0VG9DbG91ZEF1dGgoZnJvbSwgY29uZmlnKSB7XG4gIHZhciBfY29uZmlnJGNsb3VkMztcbiAgaWYgKCEoKF9jb25maWckY2xvdWQzID0gY29uZmlnLmNsb3VkKSAhPT0gbnVsbCAmJiBfY29uZmlnJGNsb3VkMyAhPT0gdm9pZCAwICYmIF9jb25maWckY2xvdWQzLnByb2plY3QpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgYSBjbG91ZCBjb25maWcnKTtcbiAgfVxuICBjb25zdCBjb2RlX3ZlcmlmaWVyID0gZnJvbVVpbnQ4QXJyYXkoY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheSgzMikpLCB0cnVlKTtcbiAgY29uc3QgY29kZV9jaGFsbGVuZ2UgPSBmcm9tVWludDhBcnJheShuZXcgVWludDhBcnJheShhd2FpdCBjcnlwdG8uc3VidGxlLmRpZ2VzdCgnU0hBLTI1NicsIHRleHRFbmNvZGVyJDEuZW5jb2RlKGNvZGVfdmVyaWZpZXIpKSksIHRydWUpO1xuICBjb25zdCBzdGF0ZSA9IGZyb21VaW50OEFycmF5KGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoMzIpKSwgdHJ1ZSk7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdrZXlzdGF0aWMtY2xvdWQtc3RhdGUnLCBKU09OLnN0cmluZ2lmeSh7XG4gICAgc3RhdGUsXG4gICAgZnJvbSxcbiAgICBjb2RlX3ZlcmlmaWVyXG4gIH0pKTtcbiAgY29uc3QgdXJsID0gbmV3IFVSTChgJHtLRVlTVEFUSUNfQ0xPVURfQVBJX1VSTH0vb2F1dGgvYXV0aG9yaXplYCk7XG4gIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdzdGF0ZScsIHN0YXRlKTtcbiAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2NsaWVudF9pZCcsIGNvbmZpZy5jbG91ZC5wcm9qZWN0KTtcbiAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3JlZGlyZWN0X3VyaScsIGAke3dpbmRvdy5sb2NhdGlvbi5vcmlnaW59L2tleXN0YXRpYy9jbG91ZC9vYXV0aC9jYWxsYmFja2ApO1xuICB1cmwuc2VhcmNoUGFyYW1zLnNldCgncmVzcG9uc2VfdHlwZScsICdjb2RlJyk7XG4gIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdjb2RlX2NoYWxsZW5nZV9tZXRob2QnLCAnUzI1NicpO1xuICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnY29kZV9jaGFsbGVuZ2UnLCBjb2RlX2NoYWxsZW5nZSk7XG4gIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdrZXlzdGF0aWNfdmVyc2lvbicsIHBrZ0pzb24udmVyc2lvbik7XG4gIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsLnRvU3RyaW5nKCk7XG59XG5cbmNvbnN0IHN0b3JlZFRva2VuU2NoZW1hID0gei5vYmplY3Qoe1xuICB0b2tlbjogei5zdHJpbmcoKSxcbiAgcHJvamVjdDogei5zdHJpbmcoKSxcbiAgdmFsaWRVbnRpbDogei5udW1iZXIoKS50cmFuc2Zvcm0odmFsID0+IG5ldyBEYXRlKHZhbCkpXG59KTtcbmZ1bmN0aW9uIGdldFN5bmNBdXRoKGNvbmZpZykge1xuICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlmIChjb25maWcuc3RvcmFnZS5raW5kID09PSAnZ2l0aHViJykge1xuICAgIGNvbnN0IGNvb2tpZXMgPSBwYXJzZShkb2N1bWVudC5jb29raWUpO1xuICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gY29va2llc1sna2V5c3RhdGljLWdoLWFjY2Vzcy10b2tlbiddO1xuICAgIGlmICghYWNjZXNzVG9rZW4pIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgYWNjZXNzVG9rZW5cbiAgICB9O1xuICB9XG4gIGlmIChjb25maWcuc3RvcmFnZS5raW5kID09PSAnY2xvdWQnKSB7XG4gICAgcmV0dXJuIGdldENsb3VkQXV0aChjb25maWcpO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gZ2V0Q2xvdWRBdXRoKGNvbmZpZykge1xuICB2YXIgX2NvbmZpZyRjbG91ZDtcbiAgaWYgKCEoKF9jb25maWckY2xvdWQgPSBjb25maWcuY2xvdWQpICE9PSBudWxsICYmIF9jb25maWckY2xvdWQgIT09IHZvaWQgMCAmJiBfY29uZmlnJGNsb3VkLnByb2plY3QpKSByZXR1cm4gbnVsbDtcbiAgY29uc3QgdW5wYXJzZWRUb2tlbkRhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgna2V5c3RhdGljLWNsb3VkLWFjY2Vzcy10b2tlbicpO1xuICBsZXQgdG9rZW5EYXRhO1xuICB0cnkge1xuICAgIHRva2VuRGF0YSA9IHN0b3JlZFRva2VuU2NoZW1hLnBhcnNlKEpTT04ucGFyc2UodW5wYXJzZWRUb2tlbkRhdGEpKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKCF0b2tlbkRhdGEgfHwgdG9rZW5EYXRhLnZhbGlkVW50aWwgPCBuZXcgRGF0ZSgpIHx8IHRva2VuRGF0YS5wcm9qZWN0ICE9PSBjb25maWcuY2xvdWQucHJvamVjdCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiB7XG4gICAgYWNjZXNzVG9rZW46IHRva2VuRGF0YS50b2tlblxuICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0QXV0aChjb25maWcpIHtcbiAgY29uc3QgdG9rZW4gPSBnZXRTeW5jQXV0aChjb25maWcpO1xuICBpZiAoY29uZmlnLnN0b3JhZ2Uua2luZCA9PT0gJ2dpdGh1YicgJiYgIXRva2VuKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCcvYXBpL2tleXN0YXRpYy9naXRodWIvcmVmcmVzaC10b2tlbicsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCdcbiAgICAgIH0pO1xuICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICBjb25zdCBjb29raWVzID0gcGFyc2UoZG9jdW1lbnQuY29va2llKTtcbiAgICAgICAgY29uc3QgYWNjZXNzVG9rZW4gPSBjb29raWVzWydrZXlzdGF0aWMtZ2gtYWNjZXNzLXRva2VuJ107XG4gICAgICAgIGlmIChhY2Nlc3NUb2tlbikge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhY2Nlc3NUb2tlblxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIHt9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIHRva2VuO1xufVxuXG5jb25zdCBTaWRlYmFyRm9vdGVyX3ZpZXdlciA9IGdxbGBcbiAgZnJhZ21lbnQgU2lkZWJhckZvb3Rlcl92aWV3ZXIgb24gVXNlciB7XG4gICAgaWRcbiAgICBuYW1lXG4gICAgbG9naW5cbiAgICBhdmF0YXJVcmxcbiAgICBkYXRhYmFzZUlkXG4gIH1cbmA7XG5jb25zdCBWaWV3ZXJDb250ZXh0ID0gLyojX19QVVJFX18qL2NyZWF0ZUNvbnRleHQodW5kZWZpbmVkKTtcbmZ1bmN0aW9uIHVzZVZpZXdlcigpIHtcbiAgcmV0dXJuIHVzZUNvbnRleHQoVmlld2VyQ29udGV4dCk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlUmVwb0NvbmZpZyhyZXBvKSB7XG4gIGlmICh0eXBlb2YgcmVwbyA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25zdCBbb3duZXIsIG5hbWVdID0gcmVwby5zcGxpdCgnLycpO1xuICAgIHJldHVybiB7XG4gICAgICBvd25lcixcbiAgICAgIG5hbWVcbiAgICB9O1xuICB9XG4gIHJldHVybiByZXBvO1xufVxuZnVuY3Rpb24gc2VyaWFsaXplUmVwb0NvbmZpZyhyZXBvKSB7XG4gIGlmICh0eXBlb2YgcmVwbyA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gcmVwbztcbiAgfVxuICByZXR1cm4gYCR7cmVwby5vd25lcn0vJHtyZXBvLm5hbWV9YDtcbn1cbmZ1bmN0aW9uIGFzc2VydFZhbGlkUmVwb0NvbmZpZyhyZXBvKSB7XG4gIGlmICh0eXBlb2YgcmVwbyA9PT0gJ3N0cmluZycpIHtcbiAgICBpZiAoIXJlcG8uaW5jbHVkZXMoJy8nKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHJlcG8gY29uZmlnOiAke3JlcG99LiBJdCBtdXN0IGJlIGluIHRoZSBmb3JtIG93bmVyL25hbWVgKTtcbiAgICB9XG4gIH1cbiAgaWYgKHR5cGVvZiByZXBvID09PSAnb2JqZWN0Jykge1xuICAgIGlmICghcmVwby5vd25lciAmJiAhcmVwby5uYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcmVwbyBjb25maWc6IG93bmVyIGFuZCBuYW1lIGFyZSBtaXNzaW5nYCk7XG4gICAgfVxuICAgIGlmICghcmVwby5vd25lcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHJlcG8gY29uZmlnOiBvd25lciBpcyBtaXNzaW5nYCk7XG4gICAgfVxuICAgIGlmICghcmVwby5uYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcmVwbyBjb25maWc6IG5hbWUgaXMgbWlzc2luZ2ApO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBzY29wZUVudHJpZXNXaXRoUGF0aFByZWZpeCh0cmVlLCBjb25maWcpIHtcbiAgY29uc3QgcHJlZml4ID0gZ2V0UGF0aFByZWZpeChjb25maWcuc3RvcmFnZSk7XG4gIGlmICghcHJlZml4KSByZXR1cm4gdHJlZTtcbiAgY29uc3QgbmV3RW50cmllcyA9IFtdO1xuICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRyZWUuZW50cmllcy52YWx1ZXMoKSkge1xuICAgIGlmIChlbnRyeS5wYXRoLnN0YXJ0c1dpdGgocHJlZml4KSkge1xuICAgICAgbmV3RW50cmllcy5wdXNoKHtcbiAgICAgICAgLi4uZW50cnksXG4gICAgICAgIHBhdGg6IGVudHJ5LnBhdGguc2xpY2UocHJlZml4Lmxlbmd0aClcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4ge1xuICAgIGVudHJpZXM6IG5ldyBNYXAobmV3RW50cmllcy5tYXAoZW50cnkgPT4gW2VudHJ5LnBhdGgsIGVudHJ5XSkpLFxuICAgIHRyZWU6IHRyZWVFbnRyaWVzVG9UcmVlTm9kZXMobmV3RW50cmllcylcbiAgfTtcbn1cblxuZnVuY3Rpb24gZmV0Y2hMb2NhbFRyZWUoc2hhKSB7XG4gIGlmICh0cmVlQ2FjaGUuaGFzKHNoYSkpIHtcbiAgICByZXR1cm4gdHJlZUNhY2hlLmdldChzaGEpO1xuICB9XG4gIGNvbnN0IHByb21pc2UgPSBmZXRjaCgnL2FwaS9rZXlzdGF0aWMvdHJlZScsIHtcbiAgICBoZWFkZXJzOiB7XG4gICAgICAnbm8tY29ycyc6ICcxJ1xuICAgIH1cbiAgfSkudGhlbih4ID0+IHguanNvbigpKS50aGVuKGFzeW5jIGVudHJpZXMgPT4gaHlkcmF0ZVRyZWVDYWNoZVdpdGhFbnRyaWVzKGVudHJpZXMpKTtcbiAgdHJlZUNhY2hlLnNldChzaGEsIHByb21pc2UpO1xuICByZXR1cm4gcHJvbWlzZTtcbn1cbmZ1bmN0aW9uIHVzZVNldFRyZWVTaGEoKSB7XG4gIHJldHVybiB1c2VDb250ZXh0KFNldFRyZWVTaGFDb250ZXh0KTtcbn1cbmNvbnN0IFNldFRyZWVTaGFDb250ZXh0ID0gLyojX19QVVJFX18qL2NyZWF0ZUNvbnRleHQoKCkgPT4ge1xuICB0aHJvdyBuZXcgRXJyb3IoJ1NldFRyZWVTaGFDb250ZXh0IG5vdCBzZXQnKTtcbn0pO1xuZnVuY3Rpb24gTG9jYWxBcHBTaGVsbFByb3ZpZGVyKHByb3BzKSB7XG4gIGNvbnN0IFtjdXJyZW50VHJlZVNoYSwgc2V0Q3VycmVudFRyZWVTaGFdID0gdXNlU3RhdGUoJ2luaXRpYWwnKTtcbiAgY29uc3QgdHJlZSA9IHVzZURhdGEodXNlQ2FsbGJhY2soKCkgPT4gZmV0Y2hMb2NhbFRyZWUoY3VycmVudFRyZWVTaGEpLCBbY3VycmVudFRyZWVTaGFdKSk7XG4gIGNvbnN0IGFsbFRyZWVEYXRhID0gdXNlTWVtbygoKSA9PiAoe1xuICAgIHVuc2NvcGVkRGVmYXVsdDogdHJlZSxcbiAgICBzY29wZWQ6IHtcbiAgICAgIGRlZmF1bHQ6IHRyZWUsXG4gICAgICBjdXJyZW50OiB0cmVlLFxuICAgICAgbWVyZ2VkOiBtZXJnZURhdGFTdGF0ZXMoe1xuICAgICAgICBkZWZhdWx0OiB0cmVlLFxuICAgICAgICBjdXJyZW50OiB0cmVlXG4gICAgICB9KVxuICAgIH1cbiAgfSksIFt0cmVlXSk7XG4gIGNvbnN0IGNoYW5nZWREYXRhID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKGFsbFRyZWVEYXRhLnNjb3BlZC5tZXJnZWQua2luZCAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNvbGxlY3Rpb25zOiBuZXcgTWFwKCksXG4gICAgICAgIHNpbmdsZXRvbnM6IG5ldyBTZXQoKVxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGdldENoYW5nZWREYXRhKHByb3BzLmNvbmZpZywgYWxsVHJlZURhdGEuc2NvcGVkLm1lcmdlZC5kYXRhKTtcbiAgfSwgW2FsbFRyZWVEYXRhLCBwcm9wcy5jb25maWddKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goU2V0VHJlZVNoYUNvbnRleHQuUHJvdmlkZXIsIHtcbiAgICB2YWx1ZTogc2V0Q3VycmVudFRyZWVTaGEsXG4gICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goQ2hhbmdlZENvbnRleHQuUHJvdmlkZXIsIHtcbiAgICAgIHZhbHVlOiBjaGFuZ2VkRGF0YSxcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KFRyZWVDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgICAgIHZhbHVlOiBhbGxUcmVlRGF0YSxcbiAgICAgICAgY2hpbGRyZW46IHByb3BzLmNoaWxkcmVuXG4gICAgICB9KVxuICAgIH0pXG4gIH0pO1xufVxuY29uc3QgY2xvdWRJbmZvU2NoZW1hID0gei5vYmplY3Qoe1xuICB1c2VyOiB6Lm9iamVjdCh7XG4gICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICBlbWFpbDogei5zdHJpbmcoKSxcbiAgICBhdmF0YXJVcmw6IHouc3RyaW5nKCkub3B0aW9uYWwoKVxuICB9KSxcbiAgcHJvamVjdDogei5vYmplY3Qoe1xuICAgIG5hbWU6IHouc3RyaW5nKClcbiAgfSksXG4gIHRlYW06IHoub2JqZWN0KHtcbiAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgIHNsdWc6IHouc3RyaW5nKCksXG4gICAgaW1hZ2VzOiB6LmJvb2xlYW4oKVxuICB9KVxufSk7XG5jb25zdCBDbG91ZEluZm8gPSAvKiNfX1BVUkVfXyovY3JlYXRlQ29udGV4dChudWxsKTtcbmZ1bmN0aW9uIHVzZUNsb3VkSW5mbygpIHtcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoQ2xvdWRJbmZvKTtcbiAgcmV0dXJuIGNvbnRleHQgPT09ICd1bmF1dGhvcml6ZWQnID8gbnVsbCA6IGNvbnRleHQ7XG59XG5mdW5jdGlvbiB1c2VSYXdDbG91ZEluZm8oKSB7XG4gIHJldHVybiB1c2VDb250ZXh0KENsb3VkSW5mbyk7XG59XG5mdW5jdGlvbiBDbG91ZEluZm9Qcm92aWRlcihwcm9wcykge1xuICBjb25zdCBkYXRhID0gdXNlRGF0YSh1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgdmFyIF9wcm9wcyRjb25maWckY2xvdWQsIF9nZXRDbG91ZEF1dGg7XG4gICAgaWYgKCEoKF9wcm9wcyRjb25maWckY2xvdWQgPSBwcm9wcy5jb25maWcuY2xvdWQpICE9PSBudWxsICYmIF9wcm9wcyRjb25maWckY2xvdWQgIT09IHZvaWQgMCAmJiBfcHJvcHMkY29uZmlnJGNsb3VkLnByb2plY3QpKSB0aHJvdyBuZXcgRXJyb3IoJ25vIGNsb3VkIHByb2plY3Qgc2V0Jyk7XG4gICAgY29uc3QgdG9rZW4gPSAoX2dldENsb3VkQXV0aCA9IGdldENsb3VkQXV0aChwcm9wcy5jb25maWcpKSA9PT0gbnVsbCB8fCBfZ2V0Q2xvdWRBdXRoID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZ2V0Q2xvdWRBdXRoLmFjY2Vzc1Rva2VuO1xuICAgIGlmICghdG9rZW4pIHtcbiAgICAgIHJldHVybiAndW5hdXRob3JpemVkJztcbiAgICB9XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7S0VZU1RBVElDX0NMT1VEX0FQSV9VUkx9L3YxL2luZm9gLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIC4uLktFWVNUQVRJQ19DTE9VRF9IRUFERVJTLFxuICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW59YFxuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChyZXMuc3RhdHVzID09PSA0MDEpIHJldHVybiAndW5hdXRob3JpemVkJztcbiAgICByZXR1cm4gY2xvdWRJbmZvU2NoZW1hLnBhcnNlKGF3YWl0IHJlcy5qc29uKCkpO1xuICB9LCBbcHJvcHMuY29uZmlnXSkpO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChDbG91ZEluZm8uUHJvdmlkZXIsIHtcbiAgICB2YWx1ZTogZGF0YS5raW5kID09PSAnbG9hZGVkJyA/IGRhdGEuZGF0YSA6IG51bGwsXG4gICAgY2hpbGRyZW46IHByb3BzLmNoaWxkcmVuXG4gIH0pO1xufVxuY29uc3QgR2l0SHViQXBwU2hlbGxEYXRhQ29udGV4dCA9IC8qI19fUFVSRV9fKi9jcmVhdGVDb250ZXh0KG51bGwpO1xuZnVuY3Rpb24gR2l0SHViQXBwU2hlbGxEYXRhUHJvdmlkZXIocHJvcHMpIHtcbiAgY29uc3QgW3N0YXRlXSA9IHVzZVF1ZXJ5KHtcbiAgICBxdWVyeTogcHJvcHMuY29uZmlnLnN0b3JhZ2Uua2luZCA9PT0gJ2dpdGh1YicgPyBHaXRIdWJBcHBTaGVsbFF1ZXJ5IDogQ2xvdWRBcHBTaGVsbFF1ZXJ5LFxuICAgIHZhcmlhYmxlczogcHJvcHMuY29uZmlnLnN0b3JhZ2Uua2luZCA9PT0gJ2dpdGh1YicgPyBwYXJzZVJlcG9Db25maWcocHJvcHMuY29uZmlnLnN0b3JhZ2UucmVwbykgOiB7XG4gICAgICBuYW1lOiAncmVwby1uYW1lJyxcbiAgICAgIG93bmVyOiAncmVwby1vd25lcidcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChHaXRIdWJBcHBTaGVsbERhdGFDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IHN0YXRlLFxuICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KFZpZXdlckNvbnRleHQuUHJvdmlkZXIsIHtcbiAgICAgIHZhbHVlOiBzdGF0ZS5kYXRhICYmICd2aWV3ZXInIGluIHN0YXRlLmRhdGEgPyBzdGF0ZS5kYXRhLnZpZXdlciA6IHVuZGVmaW5lZCxcbiAgICAgIGNoaWxkcmVuOiBwcm9wcy5jaGlsZHJlblxuICAgIH0pXG4gIH0pO1xufVxuY29uc3Qgd3JpdGVQZXJtaXNzaW9ucyA9IG5ldyBTZXQoWydXUklURScsICdBRE1JTicsICdNQUlOVEFJTiddKTtcbmZ1bmN0aW9uIEdpdEh1YkFwcFNoZWxsUHJvdmlkZXIocHJvcHMpIHtcbiAgdmFyIF9yZXBvLCBfcmVwbzMsIF9kZWZhdWx0QnJhbmNoUmVmJHRhciwgX2N1cnJlbnRCcmFuY2hSZWYkdGFyLCBfY3VycmVudEJyYW5jaFJlZiR0YXIyLCBfY3VycmVudEJyYW5jaFJlZiR0YXIzLCBfcmVwbzUsIF9yZXBvOCwgX3JlcG85LCBfY3VycmVudEJyYW5jaFJlZiRhc3MsIF9yZXBvMTUsIF9yZXBvMTYsIF9yZXBvMTcsIF9kYXRhJHJlcG9zaXRvcnkzLCBfZGF0YSRyZXBvc2l0b3J5NCwgX3JlcG8xODtcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gIGNvbnN0IHtcbiAgICBkYXRhLFxuICAgIGVycm9yXG4gIH0gPSB1c2VDb250ZXh0KEdpdEh1YkFwcFNoZWxsRGF0YUNvbnRleHQpO1xuICBsZXQgcmVwbyA9IGRhdGEgPT09IG51bGwgfHwgZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGF0YS5yZXBvc2l0b3J5O1xuICBpZiAocmVwbyAmJiAndmlld2VyUGVybWlzc2lvbicgaW4gcmVwbyAmJiByZXBvLnZpZXdlclBlcm1pc3Npb24gJiYgIXdyaXRlUGVybWlzc2lvbnMuaGFzKHJlcG8udmlld2VyUGVybWlzc2lvbikgJiYgJ2ZvcmtzJyBpbiByZXBvKSB7XG4gICAgdmFyIF9yZXBvJGZvcmtzJG5vZGVzJCwgX3JlcG8kZm9ya3M7XG4gICAgcmVwbyA9IChfcmVwbyRmb3JrcyRub2RlcyQgPSAoX3JlcG8kZm9ya3MgPSByZXBvLmZvcmtzKSA9PT0gbnVsbCB8fCBfcmVwbyRmb3JrcyA9PT0gdm9pZCAwIHx8IChfcmVwbyRmb3JrcyA9IF9yZXBvJGZvcmtzLm5vZGVzKSA9PT0gbnVsbCB8fCBfcmVwbyRmb3JrcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlcG8kZm9ya3NbMF0pICE9PSBudWxsICYmIF9yZXBvJGZvcmtzJG5vZGVzJCAhPT0gdm9pZCAwID8gX3JlcG8kZm9ya3Mkbm9kZXMkIDogcmVwbztcbiAgfVxuICBjb25zdCBkZWZhdWx0QnJhbmNoUmVmID0gKF9yZXBvID0gcmVwbykgPT09IG51bGwgfHwgX3JlcG8gPT09IHZvaWQgMCB8fCAoX3JlcG8gPSBfcmVwby5yZWZzKSA9PT0gbnVsbCB8fCBfcmVwbyA9PT0gdm9pZCAwIHx8IChfcmVwbyA9IF9yZXBvLm5vZGVzKSA9PT0gbnVsbCB8fCBfcmVwbyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlcG8uZmluZCh4ID0+IHtcbiAgICB2YXIgX3JlcG8yO1xuICAgIHJldHVybiAoeCA9PT0gbnVsbCB8fCB4ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB4Lm5hbWUpID09PSAoKF9yZXBvMiA9IHJlcG8pID09PSBudWxsIHx8IF9yZXBvMiA9PT0gdm9pZCAwIHx8IChfcmVwbzIgPSBfcmVwbzIuZGVmYXVsdEJyYW5jaFJlZikgPT09IG51bGwgfHwgX3JlcG8yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVwbzIubmFtZSk7XG4gIH0pO1xuICBjb25zdCBjdXJyZW50QnJhbmNoUmVmID0gKF9yZXBvMyA9IHJlcG8pID09PSBudWxsIHx8IF9yZXBvMyA9PT0gdm9pZCAwIHx8IChfcmVwbzMgPSBfcmVwbzMucmVmcykgPT09IG51bGwgfHwgX3JlcG8zID09PSB2b2lkIDAgfHwgKF9yZXBvMyA9IF9yZXBvMy5ub2RlcykgPT09IG51bGwgfHwgX3JlcG8zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVwbzMuZmluZCh4ID0+ICh4ID09PSBudWxsIHx8IHggPT09IHZvaWQgMCA/IHZvaWQgMCA6IHgubmFtZSkgPT09IHByb3BzLmN1cnJlbnRCcmFuY2gpO1xuICBjb25zdCBkZWZhdWx0QnJhbmNoVHJlZVNoYSA9IChfZGVmYXVsdEJyYW5jaFJlZiR0YXIgPSBkZWZhdWx0QnJhbmNoUmVmID09PSBudWxsIHx8IGRlZmF1bHRCcmFuY2hSZWYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRlZmF1bHRCcmFuY2hSZWYudGFyZ2V0LnRyZWUub2lkKSAhPT0gbnVsbCAmJiBfZGVmYXVsdEJyYW5jaFJlZiR0YXIgIT09IHZvaWQgMCA/IF9kZWZhdWx0QnJhbmNoUmVmJHRhciA6IG51bGw7XG4gIGNvbnN0IGN1cnJlbnRCcmFuY2hUcmVlU2hhID0gKF9jdXJyZW50QnJhbmNoUmVmJHRhciA9IGN1cnJlbnRCcmFuY2hSZWYgPT09IG51bGwgfHwgY3VycmVudEJyYW5jaFJlZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3VycmVudEJyYW5jaFJlZi50YXJnZXQudHJlZS5vaWQpICE9PSBudWxsICYmIF9jdXJyZW50QnJhbmNoUmVmJHRhciAhPT0gdm9pZCAwID8gX2N1cnJlbnRCcmFuY2hSZWYkdGFyIDogbnVsbDtcbiAgY29uc3QgYmFzZUNvbW1pdCA9IChfY3VycmVudEJyYW5jaFJlZiR0YXIyID0gY3VycmVudEJyYW5jaFJlZiA9PT0gbnVsbCB8fCBjdXJyZW50QnJhbmNoUmVmID09PSB2b2lkIDAgfHwgKF9jdXJyZW50QnJhbmNoUmVmJHRhcjMgPSBjdXJyZW50QnJhbmNoUmVmLnRhcmdldCkgPT09IG51bGwgfHwgX2N1cnJlbnRCcmFuY2hSZWYkdGFyMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2N1cnJlbnRCcmFuY2hSZWYkdGFyMy5vaWQpICE9PSBudWxsICYmIF9jdXJyZW50QnJhbmNoUmVmJHRhcjIgIT09IHZvaWQgMCA/IF9jdXJyZW50QnJhbmNoUmVmJHRhcjIgOiBudWxsO1xuICBjb25zdCBkZWZhdWx0QnJhbmNoVHJlZSA9IHVzZUdpdEh1YlRyZWVEYXRhKGRlZmF1bHRCcmFuY2hUcmVlU2hhLCBwcm9wcy5jb25maWcpO1xuICBjb25zdCBjdXJyZW50QnJhbmNoVHJlZSA9IHVzZUdpdEh1YlRyZWVEYXRhKGN1cnJlbnRCcmFuY2hUcmVlU2hhLCBwcm9wcy5jb25maWcpO1xuICBjb25zdCBhbGxUcmVlRGF0YSA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHNjb3BlZERlZmF1bHQgPSBtYXBEYXRhU3RhdGUoZGVmYXVsdEJyYW5jaFRyZWUsIHRyZWUgPT4gc2NvcGVFbnRyaWVzV2l0aFBhdGhQcmVmaXgodHJlZSwgcHJvcHMuY29uZmlnKSk7XG4gICAgY29uc3Qgc2NvcGVkQ3VycmVudCA9IG1hcERhdGFTdGF0ZShjdXJyZW50QnJhbmNoVHJlZSwgdHJlZSA9PiBzY29wZUVudHJpZXNXaXRoUGF0aFByZWZpeCh0cmVlLCBwcm9wcy5jb25maWcpKTtcbiAgICByZXR1cm4ge1xuICAgICAgdW5zY29wZWREZWZhdWx0OiBjdXJyZW50QnJhbmNoVHJlZSxcbiAgICAgIHNjb3BlZDoge1xuICAgICAgICBkZWZhdWx0OiBzY29wZWREZWZhdWx0LFxuICAgICAgICBjdXJyZW50OiBzY29wZWRDdXJyZW50LFxuICAgICAgICBtZXJnZWQ6IG1lcmdlRGF0YVN0YXRlcyh7XG4gICAgICAgICAgZGVmYXVsdDogc2NvcGVkRGVmYXVsdCxcbiAgICAgICAgICBjdXJyZW50OiBzY29wZWRDdXJyZW50XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfTtcbiAgfSwgW2N1cnJlbnRCcmFuY2hUcmVlLCBkZWZhdWx0QnJhbmNoVHJlZSwgcHJvcHMuY29uZmlnXSk7XG4gIGNvbnN0IGNoYW5nZWREYXRhID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKGFsbFRyZWVEYXRhLnNjb3BlZC5tZXJnZWQua2luZCAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNvbGxlY3Rpb25zOiBuZXcgTWFwKCksXG4gICAgICAgIHNpbmdsZXRvbnM6IG5ldyBTZXQoKVxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGdldENoYW5nZWREYXRhKHByb3BzLmNvbmZpZywgYWxsVHJlZURhdGEuc2NvcGVkLm1lcmdlZC5kYXRhKTtcbiAgfSwgW2FsbFRyZWVEYXRhLCBwcm9wcy5jb25maWddKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB2YXIgX2Vycm9yJHJlc3BvbnNlLCBfcmVwbzQ7XG4gICAgaWYgKChlcnJvciA9PT0gbnVsbCB8fCBlcnJvciA9PT0gdm9pZCAwIHx8IChfZXJyb3IkcmVzcG9uc2UgPSBlcnJvci5yZXNwb25zZSkgPT09IG51bGwgfHwgX2Vycm9yJHJlc3BvbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZXJyb3IkcmVzcG9uc2Uuc3RhdHVzKSA9PT0gNDAxKSB7XG4gICAgICBpZiAoaXNHaXRIdWJDb25maWcocHJvcHMuY29uZmlnKSkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGAvYXBpL2tleXN0YXRpYy9naXRodWIvbG9naW4/ZnJvbT0ke3JvdXRlci5wYXJhbXMubWFwKGVuY29kZVVSSUNvbXBvbmVudCkuam9pbignLycpfWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWRpcmVjdFRvQ2xvdWRBdXRoKHJvdXRlci5wYXJhbXMubWFwKGVuY29kZVVSSUNvbXBvbmVudCkuam9pbignLycpLCBwcm9wcy5jb25maWcpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoISgoX3JlcG80ID0gcmVwbykgIT09IG51bGwgJiYgX3JlcG80ICE9PSB2b2lkIDAgJiYgX3JlcG80LmlkKSAmJiBlcnJvciAhPT0gbnVsbCAmJiBlcnJvciAhPT0gdm9pZCAwICYmIGVycm9yLmdyYXBoUUxFcnJvcnMuc29tZShlcnIgPT4ge1xuICAgICAgdmFyIF9lcnIkb3JpZ2luYWxFcnJvciwgX2VyciRvcmlnaW5hbEVycm9yMjtcbiAgICAgIHJldHVybiAoZXJyID09PSBudWxsIHx8IGVyciA9PT0gdm9pZCAwIHx8IChfZXJyJG9yaWdpbmFsRXJyb3IgPSBlcnIub3JpZ2luYWxFcnJvcikgPT09IG51bGwgfHwgX2VyciRvcmlnaW5hbEVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZXJyJG9yaWdpbmFsRXJyb3IudHlwZSkgPT09ICdOT1RfRk9VTkQnIHx8IChlcnIgPT09IG51bGwgfHwgZXJyID09PSB2b2lkIDAgfHwgKF9lcnIkb3JpZ2luYWxFcnJvcjIgPSBlcnIub3JpZ2luYWxFcnJvcikgPT09IG51bGwgfHwgX2VyciRvcmlnaW5hbEVycm9yMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2VyciRvcmlnaW5hbEVycm9yMi50eXBlKSA9PT0gJ0ZPUkJJRERFTic7XG4gICAgfSkpIHtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYC9hcGkva2V5c3RhdGljL2dpdGh1Yi9yZXBvLW5vdC1mb3VuZD9mcm9tPSR7cm91dGVyLnBhcmFtcy5tYXAoZW5jb2RlVVJJQ29tcG9uZW50KS5qb2luKCcvJyl9YDtcbiAgICB9XG4gIH0sIFtlcnJvciwgcm91dGVyLCAoX3JlcG81ID0gcmVwbykgPT09IG51bGwgfHwgX3JlcG81ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVwbzUuaWQsIHByb3BzLmNvbmZpZ10pO1xuICBjb25zdCBiYXNlSW5mbyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIHZhciBfcmVwbyRpZCwgX3JlcG82LCBfcmVwbyRpc1ByaXZhdGUsIF9yZXBvNztcbiAgICByZXR1cm4ge1xuICAgICAgYmFzZUNvbW1pdDogYmFzZUNvbW1pdCB8fCAnJyxcbiAgICAgIHJlcG9zaXRvcnlJZDogKF9yZXBvJGlkID0gKF9yZXBvNiA9IHJlcG8pID09PSBudWxsIHx8IF9yZXBvNiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlcG82LmlkKSAhPT0gbnVsbCAmJiBfcmVwbyRpZCAhPT0gdm9pZCAwID8gX3JlcG8kaWQgOiAnJyxcbiAgICAgIGlzUHJpdmF0ZTogKF9yZXBvJGlzUHJpdmF0ZSA9IChfcmVwbzcgPSByZXBvKSA9PT0gbnVsbCB8fCBfcmVwbzcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZXBvNy5pc1ByaXZhdGUpICE9PSBudWxsICYmIF9yZXBvJGlzUHJpdmF0ZSAhPT0gdm9pZCAwID8gX3JlcG8kaXNQcml2YXRlIDogdHJ1ZVxuICAgIH07XG4gIH0sIFtiYXNlQ29tbWl0LCAoX3JlcG84ID0gcmVwbykgPT09IG51bGwgfHwgX3JlcG84ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVwbzguaWQsIChfcmVwbzkgPSByZXBvKSA9PT0gbnVsbCB8fCBfcmVwbzkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZXBvOS5pc1ByaXZhdGVdKTtcbiAgY29uc3QgcHVsbFJlcXVlc3ROdW1iZXIgPSBjdXJyZW50QnJhbmNoUmVmID09PSBudWxsIHx8IGN1cnJlbnRCcmFuY2hSZWYgPT09IHZvaWQgMCB8fCAoX2N1cnJlbnRCcmFuY2hSZWYkYXNzID0gY3VycmVudEJyYW5jaFJlZi5hc3NvY2lhdGVkUHVsbFJlcXVlc3RzLm5vZGVzKSA9PT0gbnVsbCB8fCBfY3VycmVudEJyYW5jaFJlZiRhc3MgPT09IHZvaWQgMCB8fCAoX2N1cnJlbnRCcmFuY2hSZWYkYXNzID0gX2N1cnJlbnRCcmFuY2hSZWYkYXNzWzBdKSA9PT0gbnVsbCB8fCBfY3VycmVudEJyYW5jaFJlZiRhc3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jdXJyZW50QnJhbmNoUmVmJGFzcy5udW1iZXI7XG4gIGNvbnN0IGJyYW5jaEluZm8gPSB1c2VNZW1vKCgpID0+IHtcbiAgICB2YXIgX3JlcG8kZGVmYXVsdEJyYW5jaFJlLCBfcmVwbzEwLCBfcmVwbyRpZDIsIF9yZXBvMTEsIF9yZXBvJHJlZnMkbm9kZXMkbWFwJCwgX3JlcG8xMiwgX3JlcG8xMywgX3JlcG8xNCwgX2RhdGEkcmVwb3NpdG9yeSRvd25lLCBfZGF0YSRyZXBvc2l0b3J5LCBfZGF0YSRyZXBvc2l0b3J5JG5hbWUsIF9kYXRhJHJlcG9zaXRvcnkyO1xuICAgIHJldHVybiB7XG4gICAgICBkZWZhdWx0QnJhbmNoOiAoX3JlcG8kZGVmYXVsdEJyYW5jaFJlID0gKF9yZXBvMTAgPSByZXBvKSA9PT0gbnVsbCB8fCBfcmVwbzEwID09PSB2b2lkIDAgfHwgKF9yZXBvMTAgPSBfcmVwbzEwLmRlZmF1bHRCcmFuY2hSZWYpID09PSBudWxsIHx8IF9yZXBvMTAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZXBvMTAubmFtZSkgIT09IG51bGwgJiYgX3JlcG8kZGVmYXVsdEJyYW5jaFJlICE9PSB2b2lkIDAgPyBfcmVwbyRkZWZhdWx0QnJhbmNoUmUgOiAnJyxcbiAgICAgIGN1cnJlbnRCcmFuY2g6IHByb3BzLmN1cnJlbnRCcmFuY2gsXG4gICAgICBiYXNlQ29tbWl0OiBiYXNlQ29tbWl0IHx8ICcnLFxuICAgICAgcmVwb3NpdG9yeUlkOiAoX3JlcG8kaWQyID0gKF9yZXBvMTEgPSByZXBvKSA9PT0gbnVsbCB8fCBfcmVwbzExID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVwbzExLmlkKSAhPT0gbnVsbCAmJiBfcmVwbyRpZDIgIT09IHZvaWQgMCA/IF9yZXBvJGlkMiA6ICcnLFxuICAgICAgYWxsQnJhbmNoZXM6IChfcmVwbyRyZWZzJG5vZGVzJG1hcCQgPSAoX3JlcG8xMiA9IHJlcG8pID09PSBudWxsIHx8IF9yZXBvMTIgPT09IHZvaWQgMCB8fCAoX3JlcG8xMiA9IF9yZXBvMTIucmVmcykgPT09IG51bGwgfHwgX3JlcG8xMiA9PT0gdm9pZCAwIHx8IChfcmVwbzEyID0gX3JlcG8xMi5ub2RlcykgPT09IG51bGwgfHwgX3JlcG8xMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlcG8xMi5tYXAoeCA9PiB4ID09PSBudWxsIHx8IHggPT09IHZvaWQgMCA/IHZvaWQgMCA6IHgubmFtZSkuZmlsdGVyKGlzRGVmaW5lZCkpICE9PSBudWxsICYmIF9yZXBvJHJlZnMkbm9kZXMkbWFwJCAhPT0gdm9pZCAwID8gX3JlcG8kcmVmcyRub2RlcyRtYXAkIDogW10sXG4gICAgICBwdWxsUmVxdWVzdE51bWJlcixcbiAgICAgIGJyYW5jaE5hbWVUb0lkOiBuZXcgTWFwKChfcmVwbzEzID0gcmVwbykgPT09IG51bGwgfHwgX3JlcG8xMyA9PT0gdm9pZCAwIHx8IChfcmVwbzEzID0gX3JlcG8xMy5yZWZzKSA9PT0gbnVsbCB8fCBfcmVwbzEzID09PSB2b2lkIDAgfHwgKF9yZXBvMTMgPSBfcmVwbzEzLm5vZGVzKSA9PT0gbnVsbCB8fCBfcmVwbzEzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVwbzEzLmZpbHRlcihpc0RlZmluZWQpLm1hcCh4ID0+IFt4Lm5hbWUsIHguaWRdKSksXG4gICAgICBicmFuY2hOYW1lVG9CYXNlQ29tbWl0OiBuZXcgTWFwKChfcmVwbzE0ID0gcmVwbykgPT09IG51bGwgfHwgX3JlcG8xNCA9PT0gdm9pZCAwIHx8IChfcmVwbzE0ID0gX3JlcG8xNC5yZWZzKSA9PT0gbnVsbCB8fCBfcmVwbzE0ID09PSB2b2lkIDAgfHwgKF9yZXBvMTQgPSBfcmVwbzE0Lm5vZGVzKSA9PT0gbnVsbCB8fCBfcmVwbzE0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVwbzE0LmZsYXRNYXAoeCA9PiB4ICE9PSBudWxsICYmIHggIT09IHZvaWQgMCAmJiB4LnRhcmdldCA/IFtbeC5uYW1lLCB4LnRhcmdldC5vaWRdXSA6IFtdKSksXG4gICAgICBtYWluT3duZXI6IChfZGF0YSRyZXBvc2l0b3J5JG93bmUgPSBkYXRhID09PSBudWxsIHx8IGRhdGEgPT09IHZvaWQgMCB8fCAoX2RhdGEkcmVwb3NpdG9yeSA9IGRhdGEucmVwb3NpdG9yeSkgPT09IG51bGwgfHwgX2RhdGEkcmVwb3NpdG9yeSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RhdGEkcmVwb3NpdG9yeS5vd25lci5sb2dpbikgIT09IG51bGwgJiYgX2RhdGEkcmVwb3NpdG9yeSRvd25lICE9PSB2b2lkIDAgPyBfZGF0YSRyZXBvc2l0b3J5JG93bmUgOiAnJyxcbiAgICAgIG1haW5SZXBvOiAoX2RhdGEkcmVwb3NpdG9yeSRuYW1lID0gZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgfHwgKF9kYXRhJHJlcG9zaXRvcnkyID0gZGF0YS5yZXBvc2l0b3J5KSA9PT0gbnVsbCB8fCBfZGF0YSRyZXBvc2l0b3J5MiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RhdGEkcmVwb3NpdG9yeTIubmFtZSkgIT09IG51bGwgJiYgX2RhdGEkcmVwb3NpdG9yeSRuYW1lICE9PSB2b2lkIDAgPyBfZGF0YSRyZXBvc2l0b3J5JG5hbWUgOiAnJ1xuICAgIH07XG4gIH0sIFsoX3JlcG8xNSA9IHJlcG8pID09PSBudWxsIHx8IF9yZXBvMTUgPT09IHZvaWQgMCB8fCAoX3JlcG8xNSA9IF9yZXBvMTUuZGVmYXVsdEJyYW5jaFJlZikgPT09IG51bGwgfHwgX3JlcG8xNSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlcG8xNS5uYW1lLCAoX3JlcG8xNiA9IHJlcG8pID09PSBudWxsIHx8IF9yZXBvMTYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZXBvMTYuaWQsIChfcmVwbzE3ID0gcmVwbykgPT09IG51bGwgfHwgX3JlcG8xNyA9PT0gdm9pZCAwIHx8IChfcmVwbzE3ID0gX3JlcG8xNy5yZWZzKSA9PT0gbnVsbCB8fCBfcmVwbzE3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVwbzE3Lm5vZGVzLCBwcm9wcy5jdXJyZW50QnJhbmNoLCBiYXNlQ29tbWl0LCBwdWxsUmVxdWVzdE51bWJlciwgZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgfHwgKF9kYXRhJHJlcG9zaXRvcnkzID0gZGF0YS5yZXBvc2l0b3J5KSA9PT0gbnVsbCB8fCBfZGF0YSRyZXBvc2l0b3J5MyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RhdGEkcmVwb3NpdG9yeTMub3duZXIubG9naW4sIGRhdGEgPT09IG51bGwgfHwgZGF0YSA9PT0gdm9pZCAwIHx8IChfZGF0YSRyZXBvc2l0b3J5NCA9IGRhdGEucmVwb3NpdG9yeSkgPT09IG51bGwgfHwgX2RhdGEkcmVwb3NpdG9yeTQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kYXRhJHJlcG9zaXRvcnk0Lm5hbWVdKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goUmVwb1dpdGhXcml0ZUFjY2Vzc0NvbnRleHQuUHJvdmlkZXIsIHtcbiAgICB2YWx1ZTogcmVwbyAmJiAocHJvcHMuY29uZmlnLnN0b3JhZ2Uua2luZCA9PT0gJ2Nsb3VkJyB8fCAndmlld2VyUGVybWlzc2lvbicgaW4gcmVwbyAmJiAoX3JlcG8xOCA9IHJlcG8pICE9PSBudWxsICYmIF9yZXBvMTggIT09IHZvaWQgMCAmJiBfcmVwbzE4LnZpZXdlclBlcm1pc3Npb24gJiYgd3JpdGVQZXJtaXNzaW9ucy5oYXMocmVwby52aWV3ZXJQZXJtaXNzaW9uKSkgPyB7XG4gICAgICBuYW1lOiByZXBvLm5hbWUsXG4gICAgICBvd25lcjogcmVwby5vd25lci5sb2dpblxuICAgIH0gOiBudWxsLFxuICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KEFwcFNoZWxsRXJyb3JDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgICB2YWx1ZTogZXJyb3IsXG4gICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChCcmFuY2hJbmZvQ29udGV4dC5Qcm92aWRlciwge1xuICAgICAgICB2YWx1ZTogYnJhbmNoSW5mbyxcbiAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goQmFzZUluZm9Db250ZXh0LlByb3ZpZGVyLCB7XG4gICAgICAgICAgdmFsdWU6IGJhc2VJbmZvLFxuICAgICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KENoYW5nZWRDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgICAgICAgICB2YWx1ZTogY2hhbmdlZERhdGEsXG4gICAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChUcmVlQ29udGV4dC5Qcm92aWRlciwge1xuICAgICAgICAgICAgICB2YWx1ZTogYWxsVHJlZURhdGEsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBwcm9wcy5jaGlsZHJlblxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KVxuICB9KTtcbn1cbmNvbnN0IEFwcFNoZWxsRXJyb3JDb250ZXh0ID0gLyojX19QVVJFX18qL2NyZWF0ZUNvbnRleHQodW5kZWZpbmVkKTtcbmNvbnN0IEJhc2VJbmZvQ29udGV4dCA9IC8qI19fUFVSRV9fKi9jcmVhdGVDb250ZXh0KHtcbiAgYmFzZUNvbW1pdDogJycsXG4gIHJlcG9zaXRvcnlJZDogJycsXG4gIGlzUHJpdmF0ZTogdHJ1ZVxufSk7XG5jb25zdCBDaGFuZ2VkQ29udGV4dCA9IC8qI19fUFVSRV9fKi9jcmVhdGVDb250ZXh0KHtcbiAgY29sbGVjdGlvbnM6IG5ldyBNYXAoKSxcbiAgc2luZ2xldG9uczogbmV3IFNldCgpXG59KTtcbmNvbnN0IFRyZWVDb250ZXh0ID0gLyojX19QVVJFX18qL2NyZWF0ZUNvbnRleHQoe1xuICB1bnNjb3BlZERlZmF1bHQ6IHtcbiAgICBraW5kOiAnbG9hZGluZydcbiAgfSxcbiAgc2NvcGVkOiB7XG4gICAgY3VycmVudDoge1xuICAgICAga2luZDogJ2xvYWRpbmcnXG4gICAgfSxcbiAgICBkZWZhdWx0OiB7XG4gICAgICBraW5kOiAnbG9hZGluZydcbiAgICB9LFxuICAgIG1lcmdlZDoge1xuICAgICAga2luZDogJ2xvYWRpbmcnXG4gICAgfVxuICB9XG59KTtcbmZ1bmN0aW9uIHVzZVRyZWUoKSB7XG4gIHJldHVybiB1c2VDb250ZXh0KFRyZWVDb250ZXh0KS5zY29wZWQ7XG59XG5mdW5jdGlvbiB1c2VDdXJyZW50VW5zY29wZWRUcmVlKCkge1xuICByZXR1cm4gdXNlQ29udGV4dChUcmVlQ29udGV4dCkudW5zY29wZWREZWZhdWx0O1xufVxuZnVuY3Rpb24gdXNlQ2hhbmdlZCgpIHtcbiAgcmV0dXJuIHVzZUNvbnRleHQoQ2hhbmdlZENvbnRleHQpO1xufVxuZnVuY3Rpb24gdXNlQmFzZUNvbW1pdCgpIHtcbiAgcmV0dXJuIHVzZUNvbnRleHQoQmFzZUluZm9Db250ZXh0KS5iYXNlQ29tbWl0O1xufVxuZnVuY3Rpb24gdXNlSXNSZXBvUHJpdmF0ZSgpIHtcbiAgcmV0dXJuIHVzZUNvbnRleHQoQmFzZUluZm9Db250ZXh0KS5pc1ByaXZhdGU7XG59XG5mdW5jdGlvbiB1c2VSZXBvc2l0b3J5SWQoKSB7XG4gIHJldHVybiB1c2VDb250ZXh0KEJhc2VJbmZvQ29udGV4dCkucmVwb3NpdG9yeUlkO1xufVxuY29uc3QgUmVmX2Jhc2UgPSBncWxgXG4gIGZyYWdtZW50IFJlZl9iYXNlIG9uIFJlZiB7XG4gICAgaWRcbiAgICBuYW1lXG4gICAgdGFyZ2V0IHtcbiAgICAgIF9fdHlwZW5hbWVcbiAgICAgIGlkXG4gICAgICBvaWRcbiAgICAgIC4uLiBvbiBDb21taXQge1xuICAgICAgICB0cmVlIHtcbiAgICAgICAgICBpZFxuICAgICAgICAgIG9pZFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGFzc29jaWF0ZWRQdWxsUmVxdWVzdHMoc3RhdGVzOiBbT1BFTl0sIGZpcnN0OiAxKSB7XG4gICAgICBub2RlcyB7XG4gICAgICAgIGlkXG4gICAgICAgIG51bWJlclxuICAgICAgfVxuICAgIH1cbiAgfVxuYDtcbmNvbnN0IEJhc2VSZXBvID0gZ3FsYFxuICBmcmFnbWVudCBSZXBvX2Jhc2Ugb24gUmVwb3NpdG9yeSB7XG4gICAgaWRcbiAgICBpc1ByaXZhdGVcbiAgICBvd25lciB7XG4gICAgICBpZFxuICAgICAgbG9naW5cbiAgICB9XG4gICAgbmFtZVxuICAgIGRlZmF1bHRCcmFuY2hSZWYge1xuICAgICAgaWRcbiAgICAgIG5hbWVcbiAgICB9XG4gICAgcmVmcyhyZWZQcmVmaXg6IFwicmVmcy9oZWFkcy9cIiwgZmlyc3Q6IDEwMCkge1xuICAgICAgbm9kZXMge1xuICAgICAgICAuLi5SZWZfYmFzZVxuICAgICAgfVxuICAgIH1cbiAgfVxuICAke1JlZl9iYXNlfVxuYDtcbmNvbnN0IENsb3VkQXBwU2hlbGxRdWVyeSA9IGdxbGBcbiAgcXVlcnkgQ2xvdWRBcHBTaGVsbCgkbmFtZTogU3RyaW5nISwgJG93bmVyOiBTdHJpbmchKSB7XG4gICAgcmVwb3NpdG9yeShvd25lcjogJG93bmVyLCBuYW1lOiAkbmFtZSkge1xuICAgICAgaWRcbiAgICAgIC4uLlJlcG9fYmFzZVxuICAgIH1cbiAgfVxuICAke0Jhc2VSZXBvfVxuYDtcbmNvbnN0IFJlcG9fZ2hEaXJlY3QgPSBncWxgXG4gIGZyYWdtZW50IFJlcG9fZ2hEaXJlY3Qgb24gUmVwb3NpdG9yeSB7XG4gICAgaWRcbiAgICAuLi5SZXBvX2Jhc2VcbiAgICB2aWV3ZXJQZXJtaXNzaW9uXG4gIH1cbiAgJHtCYXNlUmVwb31cbmA7XG5jb25zdCBSZXBvX3ByaW1hcnkgPSBncWxgXG4gIGZyYWdtZW50IFJlcG9fcHJpbWFyeSBvbiBSZXBvc2l0b3J5IHtcbiAgICBpZFxuICAgIC4uLlJlcG9fZ2hEaXJlY3RcbiAgICBmb3JrcyhhZmZpbGlhdGlvbnM6IFtPV05FUl0sIGZpcnN0OiAxKSB7XG4gICAgICBub2RlcyB7XG4gICAgICAgIC4uLlJlcG9fZ2hEaXJlY3RcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgJHtSZXBvX2doRGlyZWN0fVxuYDtcbmNvbnN0IEdpdEh1YkFwcFNoZWxsUXVlcnkgPSBncWxgXG4gIHF1ZXJ5IEdpdEh1YkFwcFNoZWxsKCRuYW1lOiBTdHJpbmchLCAkb3duZXI6IFN0cmluZyEpIHtcbiAgICByZXBvc2l0b3J5KG93bmVyOiAkb3duZXIsIG5hbWU6ICRuYW1lKSB7XG4gICAgICBpZFxuICAgICAgLi4uUmVwb19wcmltYXJ5XG4gICAgfVxuICAgIHZpZXdlciB7XG4gICAgICAuLi5TaWRlYmFyRm9vdGVyX3ZpZXdlclxuICAgIH1cbiAgfVxuICAke1JlcG9fcHJpbWFyeX1cbiAgJHtTaWRlYmFyRm9vdGVyX3ZpZXdlcn1cbmA7XG5jb25zdCB0cmVlQ2FjaGUgPSBuZXcgTFJVKHtcbiAgbWF4OiA0MFxufSk7XG5hc3luYyBmdW5jdGlvbiBoeWRyYXRlVHJlZUNhY2hlV2l0aEVudHJpZXMoZW50cmllcykge1xuICBjb25zdCBkYXRhID0ge1xuICAgIGVudHJpZXM6IG5ldyBNYXAoZW50cmllcy5tYXAoZW50cnkgPT4gW2VudHJ5LnBhdGgsIGVudHJ5XSkpLFxuICAgIHRyZWU6IHRyZWVFbnRyaWVzVG9UcmVlTm9kZXMoZW50cmllcylcbiAgfTtcbiAgY29uc3Qgc2hhID0gYXdhaXQgdHJlZVNoYShkYXRhLnRyZWUpO1xuICB0cmVlQ2FjaGUuc2V0KHNoYSwgZGF0YSk7XG4gIHJldHVybiBkYXRhO1xufVxuZnVuY3Rpb24gZmV0Y2hHaXRIdWJUcmVlRGF0YShzaGEsIGNvbmZpZykge1xuICBjb25zdCBjYWNoZWQgPSB0cmVlQ2FjaGUuZ2V0KHNoYSk7XG4gIGlmIChjYWNoZWQpIHJldHVybiBjYWNoZWQ7XG4gIGNvbnN0IHByb21pc2UgPSBnZXRBdXRoKGNvbmZpZykudGhlbihhdXRoID0+IHtcbiAgICBpZiAoIWF1dGgpIHRocm93IG5ldyBFcnJvcignTm90IGF1dGhvcml6ZWQnKTtcbiAgICByZXR1cm4gZmV0Y2goY29uZmlnLnN0b3JhZ2Uua2luZCA9PT0gJ2dpdGh1YicgPyBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy8ke3NlcmlhbGl6ZVJlcG9Db25maWcoY29uZmlnLnN0b3JhZ2UucmVwbyl9L2dpdC90cmVlcy8ke3NoYX0/cmVjdXJzaXZlPTFgIDogYCR7S0VZU1RBVElDX0NMT1VEX0FQSV9VUkx9L3YxL2dpdGh1Yi90cmVlcy8ke3NoYX1gLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthdXRoLmFjY2Vzc1Rva2VufWAsXG4gICAgICAgIC4uLihjb25maWcuc3RvcmFnZS5raW5kID09PSAnY2xvdWQnID8gS0VZU1RBVElDX0NMT1VEX0hFQURFUlMgOiB7fSlcbiAgICAgIH1cbiAgICB9KS50aGVuKHggPT4geC5qc29uKCkpO1xuICB9KS50aGVuKHJlcyA9PiBoeWRyYXRlVHJlZUNhY2hlV2l0aEVudHJpZXMocmVzLnRyZWUubWFwKCh7XG4gICAgdXJsLFxuICAgIC4uLnJlc3RcbiAgfSkgPT4gcmVzdCkpKTtcbiAgdHJlZUNhY2hlLnNldChzaGEsIHByb21pc2UpO1xuICByZXR1cm4gcHJvbWlzZTtcbn1cbmZ1bmN0aW9uIHVzZUdpdEh1YlRyZWVEYXRhKHNoYSwgY29uZmlnKSB7XG4gIHJldHVybiB1c2VEYXRhKHVzZUNhbGxiYWNrKCgpID0+IHNoYSA/IGZldGNoR2l0SHViVHJlZURhdGEoc2hhLCBjb25maWcpIDogTE9BRElORywgW3NoYSwgY29uZmlnXSkpO1xufVxuY29uc3QgUmVwb1dpdGhXcml0ZUFjY2Vzc0NvbnRleHQgPSAvKiNfX1BVUkVfXyovY3JlYXRlQ29udGV4dChudWxsKTtcbmNvbnN0IEJyYW5jaEluZm9Db250ZXh0ID0gLyojX19QVVJFX18qL2NyZWF0ZUNvbnRleHQoe1xuICBjdXJyZW50QnJhbmNoOiAnJyxcbiAgYWxsQnJhbmNoZXM6IFtdLFxuICBkZWZhdWx0QnJhbmNoOiAnJyxcbiAgcHVsbFJlcXVlc3ROdW1iZXI6IHVuZGVmaW5lZCxcbiAgYnJhbmNoTmFtZVRvSWQ6IG5ldyBNYXAoKSxcbiAgYnJhbmNoTmFtZVRvQmFzZUNvbW1pdDogbmV3IE1hcCgpLFxuICBtYWluT3duZXI6ICcnLFxuICBtYWluUmVwbzogJydcbn0pO1xuZnVuY3Rpb24gdXNlQnJhbmNoSW5mbygpIHtcbiAgcmV0dXJuIHVzZUNvbnRleHQoQnJhbmNoSW5mb0NvbnRleHQpO1xufVxuZnVuY3Rpb24gZ2V0Q2hhbmdlZERhdGEoY29uZmlnLCB0cmVlcykge1xuICB2YXIgX2NvbmZpZyRjb2xsZWN0aW9ucywgX2NvbmZpZyRzaW5nbGV0b25zO1xuICByZXR1cm4ge1xuICAgIGNvbGxlY3Rpb25zOiBuZXcgTWFwKE9iamVjdC5rZXlzKChfY29uZmlnJGNvbGxlY3Rpb25zID0gY29uZmlnLmNvbGxlY3Rpb25zKSAhPT0gbnVsbCAmJiBfY29uZmlnJGNvbGxlY3Rpb25zICE9PSB2b2lkIDAgPyBfY29uZmlnJGNvbGxlY3Rpb25zIDoge30pLm1hcChjb2xsZWN0aW9uID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRCcmFuY2ggPSBuZXcgTWFwKGdldEVudHJpZXNJbkNvbGxlY3Rpb25XaXRoVHJlZUtleShjb25maWcsIGNvbGxlY3Rpb24sIHRyZWVzLmN1cnJlbnQudHJlZSkubWFwKHggPT4gW3guc2x1ZywgeC5rZXldKSk7XG4gICAgICBjb25zdCBkZWZhdWx0QnJhbmNoID0gbmV3IE1hcChnZXRFbnRyaWVzSW5Db2xsZWN0aW9uV2l0aFRyZWVLZXkoY29uZmlnLCBjb2xsZWN0aW9uLCB0cmVlcy5kZWZhdWx0LnRyZWUpLm1hcCh4ID0+IFt4LnNsdWcsIHgua2V5XSkpO1xuICAgICAgY29uc3QgY2hhbmdlZCA9IG5ldyBTZXQoKTtcbiAgICAgIGNvbnN0IGFkZGVkID0gbmV3IFNldCgpO1xuICAgICAgZm9yIChjb25zdCBba2V5LCBlbnRyeV0gb2YgY3VycmVudEJyYW5jaCkge1xuICAgICAgICBjb25zdCBkZWZhdWx0QnJhbmNoRW50cnkgPSBkZWZhdWx0QnJhbmNoLmdldChrZXkpO1xuICAgICAgICBpZiAoZGVmYXVsdEJyYW5jaEVudHJ5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBhZGRlZC5hZGQoa2V5KTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZW50cnkgIT09IGRlZmF1bHRCcmFuY2hFbnRyeSkge1xuICAgICAgICAgIGNoYW5nZWQuYWRkKGtleSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlbW92ZWQgPSBuZXcgU2V0KFsuLi5kZWZhdWx0QnJhbmNoLmtleXMoKV0uZmlsdGVyKGtleSA9PiAhY3VycmVudEJyYW5jaC5oYXMoa2V5KSkpO1xuICAgICAgcmV0dXJuIFtjb2xsZWN0aW9uLCB7XG4gICAgICAgIHJlbW92ZWQsXG4gICAgICAgIGFkZGVkLFxuICAgICAgICBjaGFuZ2VkLFxuICAgICAgICB0b3RhbENvdW50OiBjdXJyZW50QnJhbmNoLnNpemVcbiAgICAgIH1dO1xuICAgIH0pKSxcbiAgICBzaW5nbGV0b25zOiBuZXcgU2V0KE9iamVjdC5rZXlzKChfY29uZmlnJHNpbmdsZXRvbnMgPSBjb25maWcuc2luZ2xldG9ucykgIT09IG51bGwgJiYgX2NvbmZpZyRzaW5nbGV0b25zICE9PSB2b2lkIDAgPyBfY29uZmlnJHNpbmdsZXRvbnMgOiB7fSkuZmlsdGVyKHNpbmdsZXRvbiA9PiB7XG4gICAgICB2YXIgX2dldFRyZWVOb2RlQXRQYXRoLCBfZ2V0VHJlZU5vZGVBdFBhdGgyO1xuICAgICAgY29uc3Qgc2luZ2xldG9uUGF0aCA9IGdldFNpbmdsZXRvblBhdGgoY29uZmlnLCBzaW5nbGV0b24pO1xuICAgICAgcmV0dXJuICgoX2dldFRyZWVOb2RlQXRQYXRoID0gZ2V0VHJlZU5vZGVBdFBhdGgodHJlZXMuY3VycmVudC50cmVlLCBzaW5nbGV0b25QYXRoKSkgPT09IG51bGwgfHwgX2dldFRyZWVOb2RlQXRQYXRoID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZ2V0VHJlZU5vZGVBdFBhdGguZW50cnkuc2hhKSAhPT0gKChfZ2V0VHJlZU5vZGVBdFBhdGgyID0gZ2V0VHJlZU5vZGVBdFBhdGgodHJlZXMuZGVmYXVsdC50cmVlLCBzaW5nbGV0b25QYXRoKSkgPT09IG51bGwgfHwgX2dldFRyZWVOb2RlQXRQYXRoMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2dldFRyZWVOb2RlQXRQYXRoMi5lbnRyeS5zaGEpO1xuICAgIH0pKVxuICB9O1xufVxuXG5jb25zdCBTSURFX1BBTkVMX0lEID0gJ2tleXN0YXRpYy1zaWRlLXBhbmVsJztcbmNvbnN0IE1BSU5fUEFORUxfSUQgPSAna2V5c3RhdGljLW1haW4tcGFuZWwnO1xuXG5jb25zdCBWaWV3ID0gcHJvcHMgPT4ge1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChCb3gsIHtcbiAgICBoZWlnaHQ6IFwiMTAwJVwiLFxuICAgIG1pbkhlaWdodDogMCxcbiAgICBtaW5XaWR0aDogMCxcbiAgICAuLi5wcm9wc1xuICB9KTtcbn07XG5jb25zdCBTY3JvbGxWaWV3ID0gcHJvcHMgPT4ge1xuICBsZXQge1xuICAgIGlzRGlzYWJsZWQsXG4gICAgLi4ub3RoZXJQcm9wc1xuICB9ID0gcHJvcHM7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFZpZXcsIHtcbiAgICBcImRhdGEtc2Nyb2xsYWJsZVwiOiBpc0Rpc2FibGVkID8gdW5kZWZpbmVkIDogdHJ1ZSxcbiAgICBVTlNBRkVfY2xhc3NOYW1lOiBjc3Moe1xuICAgICAgJyZbZGF0YS1zY3JvbGxhYmxlXSc6IHtcbiAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsXG4gICAgICAgIFdlYmtpdE92ZXJmbG93U2Nyb2xsaW5nOiAndG91Y2gnXG4gICAgICB9XG4gICAgfSksXG4gICAgLi4ub3RoZXJQcm9wc1xuICB9KTtcbn07XG5cbi8vIENvbW1vblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vLyBJbnRlcmZhY2Vcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuY29uc3QgTkFWSUdBVElPTl9ESVZJREVSX0tFWSA9ICctLS0nO1xuXG4vLyBTdG9yYWdlXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEZ1bmN0aW9uc1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5mdW5jdGlvbiBjb25maWcoY29uZmlnKSB7XG4gIHJldHVybiBjb25maWc7XG59XG5mdW5jdGlvbiBjb2xsZWN0aW9uKGNvbGxlY3Rpb24pIHtcbiAgcmV0dXJuIGNvbGxlY3Rpb247XG59XG5mdW5jdGlvbiBzaW5nbGV0b24oY29sbGVjdGlvbikge1xuICByZXR1cm4gY29sbGVjdGlvbjtcbn1cblxuLy8gQ29uZmlnIGNvbnRleHRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmNvbnN0IENvbmZpZ0NvbnRleHQgPSAvKiNfX1BVUkVfXyovY3JlYXRlQ29udGV4dChudWxsKTtcbmZ1bmN0aW9uIHVzZUNvbmZpZygpIHtcbiAgY29uc3QgY29uZmlnID0gdXNlQ29udGV4dChDb25maWdDb250ZXh0KTtcbiAgaWYgKCFjb25maWcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbmZpZ0NvbnRleHQuUHJvdmlkZXIgbm90IGZvdW5kJyk7XG4gIH1cbiAgcmV0dXJuIGNvbmZpZztcbn1cblxuLy8gTWV0YSBjb250ZXh0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5jb25zdCBBcHBTdGF0ZUNvbnRleHQgPSAvKiNfX1BVUkVfXyovY3JlYXRlQ29udGV4dCh7XG4gIGJhc2VQYXRoOiAnL2tleXN0YXRpYydcbn0pO1xuZnVuY3Rpb24gdXNlQXBwU3RhdGUoKSB7XG4gIGNvbnN0IGFwcFN0YXRlID0gdXNlQ29udGV4dChBcHBTdGF0ZUNvbnRleHQpO1xuICBpZiAoIWFwcFN0YXRlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdBcHBTdGF0ZUNvbnRleHQuUHJvdmlkZXIgbm90IGZvdW5kJyk7XG4gIH1cbiAgcmV0dXJuIGFwcFN0YXRlO1xufVxuXG4vLyBQYWdlIGNvbnRleHRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmNvbnN0IENvbnRlbnRQYW5lbENvbnRleHQgPSAvKiNfX1BVUkVfXyovY3JlYXRlQ29udGV4dCgnbW9iaWxlJyk7XG5jb25zdCBDb250ZW50UGFuZWxQcm92aWRlciA9IENvbnRlbnRQYW5lbENvbnRleHQuUHJvdmlkZXI7XG5mdW5jdGlvbiB1c2VDb250ZW50UGFuZWxTaXplKCkge1xuICByZXR1cm4gdXNlQ29udGV4dChDb250ZW50UGFuZWxDb250ZXh0KTtcbn1cbmZ1bmN0aW9uIHVzZUNvbnRlbnRQYW5lbFF1ZXJ5KG9wdGlvbnMpIHtcbiAgY29uc3Qgc2l6ZXMgPSBbJ21vYmlsZScsICd0YWJsZXQnLCAnZGVza3RvcCcsICd3aWRlJ107XG4gIGNvbnN0IHNpemUgPSB1c2VDb250ZW50UGFuZWxTaXplKCk7XG4gIGNvbnN0IHN0YXJ0SW5kZXggPSAnYWJvdmUnIGluIG9wdGlvbnMgPyBzaXplcy5pbmRleE9mKG9wdGlvbnMuYWJvdmUpICsgMSA6IDA7XG4gIGNvbnN0IGVuZEluZGV4ID0gJ2JlbG93JyBpbiBvcHRpb25zID8gc2l6ZXMuaW5kZXhPZihvcHRpb25zLmJlbG93KSAtIDEgOiBzaXplcy5sZW5ndGggLSAxO1xuICBjb25zdCByYW5nZSA9IHNpemVzLnNsaWNlKHN0YXJ0SW5kZXgsIGVuZEluZGV4ICsgMSk7XG4gIHJldHVybiByYW5nZS5pbmNsdWRlcyhzaXplKTtcbn1cblxuLyoqIEBwcml2YXRlIG9ubHkgdXNlZCB0byBpbml0aWFsaXplIGNvbnRleHQgKi9cbmZ1bmN0aW9uIHVzZUNvbnRlbnRQYW5lbFN0YXRlKHJlZikge1xuICBsZXQgW2NvbnRlbnRTaXplLCBzZXRDb250ZW50U2l6ZV0gPSB1c2VTdGF0ZSgnbW9iaWxlJyk7XG4gIGNvbnN0IG9uUmVzaXplID0gKCkgPT4ge1xuICAgIHNldENvbnRlbnRTaXplKHNpemUgPT4ge1xuICAgICAgbGV0IGNvbnRlbnRQYW5lID0gcmVmLmN1cnJlbnQ7XG4gICAgICBpZiAoIWNvbnRlbnRQYW5lKSB7XG4gICAgICAgIHJldHVybiBzaXplO1xuICAgICAgfVxuICAgICAgaWYgKGNvbnRlbnRQYW5lLm9mZnNldFdpZHRoID49IGJyZWFrcG9pbnRzLndpZGUpIHtcbiAgICAgICAgcmV0dXJuICd3aWRlJztcbiAgICAgIH1cbiAgICAgIGlmIChjb250ZW50UGFuZS5vZmZzZXRXaWR0aCA+PSBicmVha3BvaW50cy5kZXNrdG9wKSB7XG4gICAgICAgIHJldHVybiAnZGVza3RvcCc7XG4gICAgICB9XG4gICAgICBpZiAoY29udGVudFBhbmUub2Zmc2V0V2lkdGggPj0gYnJlYWtwb2ludHMudGFibGV0KSB7XG4gICAgICAgIHJldHVybiAndGFibGV0JztcbiAgICAgIH1cbiAgICAgIHJldHVybiAnbW9iaWxlJztcbiAgICB9KTtcbiAgfTtcbiAgdXNlUmVzaXplT2JzZXJ2ZXIoe1xuICAgIHJlZixcbiAgICBvblJlc2l6ZVxuICB9KTtcbiAgcmV0dXJuIGNvbnRlbnRTaXplO1xufVxuXG5mdW5jdGlvbiB1c2VOYXZJdGVtcygpIHtcbiAgdmFyIF9jb25maWckdWk7XG4gIGxldCB7XG4gICAgYmFzZVBhdGhcbiAgfSA9IHVzZUFwcFN0YXRlKCk7XG4gIGxldCBjb25maWcgPSB1c2VDb25maWcoKTtcbiAgbGV0IHN0cmluZ0Zvcm1hdHRlciA9IHVzZUxvY2FsaXplZFN0cmluZ0Zvcm1hdHRlcihsMTBuTWVzc2FnZXMpO1xuICBsZXQgY2hhbmdlTWFwID0gdXNlQ2hhbmdlZCgpO1xuICBjb25zdCBjb2xsZWN0aW9uS2V5cyA9IE9iamVjdC5rZXlzKGNvbmZpZy5jb2xsZWN0aW9ucyB8fCB7fSk7XG4gIGNvbnN0IHNpbmdsZXRvbktleXMgPSBPYmplY3Qua2V5cyhjb25maWcuc2luZ2xldG9ucyB8fCB7fSk7XG4gIGNvbnN0IGl0ZW1zID0gKChfY29uZmlnJHVpID0gY29uZmlnLnVpKSA9PT0gbnVsbCB8fCBfY29uZmlnJHVpID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY29uZmlnJHVpLm5hdmlnYXRpb24pIHx8IHtcbiAgICAuLi4oISFjb2xsZWN0aW9uS2V5cy5sZW5ndGggJiYge1xuICAgICAgW3N0cmluZ0Zvcm1hdHRlci5mb3JtYXQoJ2NvbGxlY3Rpb25zJyldOiBjb2xsZWN0aW9uS2V5c1xuICAgIH0pLFxuICAgIC4uLighIXNpbmdsZXRvbktleXMubGVuZ3RoICYmIHtcbiAgICAgIFtzdHJpbmdGb3JtYXR0ZXIuZm9ybWF0KCdzaW5nbGV0b25zJyldOiBzaW5nbGV0b25LZXlzXG4gICAgfSlcbiAgfTtcbiAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICBiYXNlUGF0aCxcbiAgICBjaGFuZ2VNYXAsXG4gICAgY29uZmlnXG4gIH07XG4gIGlmIChBcnJheS5pc0FycmF5KGl0ZW1zKSkge1xuICAgIHJldHVybiBpdGVtcy5tYXAoa2V5ID0+IHBvcHVsYXRlSXRlbURhdGEoa2V5LCBvcHRpb25zKSk7XG4gIH1cbiAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKGl0ZW1zKS5tYXAoKFtzZWN0aW9uLCBrZXlzXSkgPT4gKHtcbiAgICB0aXRsZTogc2VjdGlvbixcbiAgICBjaGlsZHJlbjoga2V5cy5tYXAoa2V5ID0+IHBvcHVsYXRlSXRlbURhdGEoa2V5LCBvcHRpb25zKSlcbiAgfSkpO1xufVxuZnVuY3Rpb24gcG9wdWxhdGVJdGVtRGF0YShrZXksIG9wdGlvbnMpIHtcbiAgbGV0IHtcbiAgICBiYXNlUGF0aCxcbiAgICBjaGFuZ2VNYXAsXG4gICAgY29uZmlnXG4gIH0gPSBvcHRpb25zO1xuXG4gIC8vIGRpdmlkZXJcbiAgaWYgKGtleSA9PT0gTkFWSUdBVElPTl9ESVZJREVSX0tFWSkge1xuICAgIHJldHVybiB7XG4gICAgICBpc0RpdmlkZXI6IHRydWVcbiAgICB9O1xuICB9XG5cbiAgLy8gY29sbGVjdGlvblxuICBpZiAoY29uZmlnLmNvbGxlY3Rpb25zICYmIGtleSBpbiBjb25maWcuY29sbGVjdGlvbnMpIHtcbiAgICBjb25zdCBocmVmID0gYCR7YmFzZVBhdGh9L2NvbGxlY3Rpb24vJHtlbmNvZGVVUklDb21wb25lbnQoa2V5KX1gO1xuICAgIGNvbnN0IGNoYW5nZXMgPSBjaGFuZ2VNYXAuY29sbGVjdGlvbnMuZ2V0KGtleSk7XG4gICAgY29uc3QgY2hhbmdlZCA9IGNoYW5nZXMgPyBjaGFuZ2VzLmNoYW5nZWQuc2l6ZSArIGNoYW5nZXMuYWRkZWQuc2l6ZSArIGNoYW5nZXMucmVtb3ZlZC5zaXplIDogMDtcbiAgICBjb25zdCBsYWJlbCA9IGNvbmZpZy5jb2xsZWN0aW9uc1trZXldLmxhYmVsO1xuICAgIHJldHVybiB7XG4gICAgICBrZXksXG4gICAgICBocmVmLFxuICAgICAgbGFiZWwsXG4gICAgICBjaGFuZ2VkLFxuICAgICAgZW50cnlDb3VudDogY2hhbmdlcyA9PT0gbnVsbCB8fCBjaGFuZ2VzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjaGFuZ2VzLnRvdGFsQ291bnRcbiAgICB9O1xuICB9XG5cbiAgLy8gc2luZ2xldG9uXG4gIGlmIChjb25maWcuc2luZ2xldG9ucyAmJiBrZXkgaW4gY29uZmlnLnNpbmdsZXRvbnMpIHtcbiAgICBjb25zdCBocmVmID0gYCR7YmFzZVBhdGh9L3NpbmdsZXRvbi8ke2VuY29kZVVSSUNvbXBvbmVudChrZXkpfWA7XG4gICAgY29uc3QgY2hhbmdlZCA9IGNoYW5nZU1hcC5zaW5nbGV0b25zLmhhcyhrZXkpO1xuICAgIGNvbnN0IGxhYmVsID0gY29uZmlnLnNpbmdsZXRvbnNba2V5XS5sYWJlbDtcbiAgICByZXR1cm4ge1xuICAgICAga2V5LFxuICAgICAgaHJlZixcbiAgICAgIGxhYmVsLFxuICAgICAgY2hhbmdlZFxuICAgIH07XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIG5hdmlnYXRpb24ga2V5OiBcIiR7a2V5fVwiLmApO1xufVxuXG5mdW5jdGlvbiB1c2VCcmFuZCgpIHtcbiAgdmFyIF9jb25maWckdWksIF9jb25maWckdWkyO1xuICBsZXQge1xuICAgIGNvbG9yU2NoZW1lXG4gIH0gPSB1c2VQcm92aWRlcigpO1xuICBsZXQgY29uZmlnID0gdXNlQ29uZmlnKCk7XG4gIGxldCBwcmVmZXJzRGFyayA9IHVzZU1lZGlhUXVlcnkoJyhwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyayknKTtcbiAgbGV0IGJyYW5kTWFyayA9IC8qI19fUFVSRV9fKi9qc3goWmFwTG9nbywge30pO1xuICBsZXQgYnJhbmROYW1lID0gJ0tleXN0YXRpYyc7XG4gIGlmICgoX2NvbmZpZyR1aSA9IGNvbmZpZy51aSkgIT09IG51bGwgJiYgX2NvbmZpZyR1aSAhPT0gdm9pZCAwICYmIChfY29uZmlnJHVpID0gX2NvbmZpZyR1aS5icmFuZCkgIT09IG51bGwgJiYgX2NvbmZpZyR1aSAhPT0gdm9pZCAwICYmIF9jb25maWckdWkubWFyaykge1xuICAgIGxldCBCcmFuZE1hcmsgPSBjb25maWcudWkuYnJhbmQubWFyaztcbiAgICBsZXQgcmVzb2x2ZWRDb2xvclNjaGVtZSA9IGNvbG9yU2NoZW1lID09PSAnYXV0bycgPyBwcmVmZXJzRGFyayA/ICdkYXJrJyA6ICdsaWdodCcgOiBjb2xvclNjaGVtZTtcbiAgICBicmFuZE1hcmsgPSAvKiNfX1BVUkVfXyovanN4KEJyYW5kTWFyaywge1xuICAgICAgY29sb3JTY2hlbWU6IHJlc29sdmVkQ29sb3JTY2hlbWVcbiAgICB9KTtcbiAgfVxuICBpZiAoJ3JlcG8nIGluIGNvbmZpZy5zdG9yYWdlKSB7XG4gICAgYnJhbmROYW1lID0gc2VyaWFsaXplUmVwb0NvbmZpZyhjb25maWcuc3RvcmFnZS5yZXBvKTtcbiAgfVxuICBpZiAoY29uZmlnLmNsb3VkKSB7XG4gICAgYnJhbmROYW1lID0gY29uZmlnLmNsb3VkLnByb2plY3Q7XG4gIH1cbiAgaWYgKChfY29uZmlnJHVpMiA9IGNvbmZpZy51aSkgIT09IG51bGwgJiYgX2NvbmZpZyR1aTIgIT09IHZvaWQgMCAmJiAoX2NvbmZpZyR1aTIgPSBfY29uZmlnJHVpMi5icmFuZCkgIT09IG51bGwgJiYgX2NvbmZpZyR1aTIgIT09IHZvaWQgMCAmJiBfY29uZmlnJHVpMi5uYW1lKSB7XG4gICAgYnJhbmROYW1lID0gY29uZmlnLnVpLmJyYW5kLm5hbWU7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBicmFuZE1hcmssXG4gICAgYnJhbmROYW1lXG4gIH07XG59XG5mdW5jdGlvbiBaYXBMb2dvKCkge1xuICBsZXQgaWQgPSAnYnJhbmQtbWFyay1ncmFkaWVudCc7XG4gIGxldCBzaXplID0gMjQ7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhcInN2Z1wiLCB7XG4gICAgd2lkdGg6IHNpemUsXG4gICAgaGVpZ2h0OiBzaXplLFxuICAgIHZpZXdCb3g6IFwiMCAwIDMyIDMyXCIsXG4gICAgZmlsbDogXCJub25lXCIsXG4gICAgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goXCJwYXRoXCIsIHtcbiAgICAgIGQ6IFwiTTE4IDhMMTQgMjRMMTIgMzJMMzAgMTRMMTggOFpcIixcbiAgICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCJcbiAgICB9KSwgLyojX19QVVJFX18qL2pzeChcInBhdGhcIiwge1xuICAgICAgZDogXCJNMiAxOEwyMCAwTDE4IDhMMiAxOFpcIixcbiAgICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCJcbiAgICB9KSwgLyojX19QVVJFX18qL2pzeChcInBhdGhcIiwge1xuICAgICAgZDogXCJNMTggOEwyIDE4TDE0IDI0TDE4IDhaXCIsXG4gICAgICBmaWxsOiBgdXJsKCMke2lkfSlgXG4gICAgfSksIC8qI19fUFVSRV9fKi9qc3goXCJkZWZzXCIsIHtcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4cyhcImxpbmVhckdyYWRpZW50XCIsIHtcbiAgICAgICAgaWQ6IGlkLFxuICAgICAgICB4MTogXCIyXCIsXG4gICAgICAgIHkxOiBcIjE4XCIsXG4gICAgICAgIHgyOiBcIjIwXCIsXG4gICAgICAgIHkyOiBcIjE0XCIsXG4gICAgICAgIGdyYWRpZW50VW5pdHM6IFwidXNlclNwYWNlT25Vc2VcIixcbiAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KFwic3RvcFwiLCB7XG4gICAgICAgICAgc3RvcENvbG9yOiBcImN1cnJlbnRDb2xvclwiLFxuICAgICAgICAgIHN0b3BPcGFjaXR5OiBcIjAuMlwiXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KFwic3RvcFwiLCB7XG4gICAgICAgICAgb2Zmc2V0OiBcIjFcIixcbiAgICAgICAgICBzdG9wQ29sb3I6IFwiY3VycmVudENvbG9yXCJcbiAgICAgICAgfSldXG4gICAgICB9KVxuICAgIH0pXVxuICB9KTtcbn1cblxuZnVuY3Rpb24gQnJhbmNoUGlja2VyKCkge1xuICBjb25zdCB7XG4gICAgYWxsQnJhbmNoZXMsXG4gICAgY3VycmVudEJyYW5jaCxcbiAgICBkZWZhdWx0QnJhbmNoXG4gIH0gPSB1c2VDb250ZXh0KEJyYW5jaEluZm9Db250ZXh0KTtcbiAgY29uc3Qgc3RyaW5nRm9ybWF0dGVyID0gdXNlTG9jYWxpemVkU3RyaW5nRm9ybWF0dGVyKGwxMG5NZXNzYWdlcyk7XG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuICBjb25zdCBjb25maWcgPSB1c2VDb25maWcoKTtcbiAgY29uc3QgYnJhbmNoUHJlZml4ID0gZ2V0QnJhbmNoUHJlZml4KGNvbmZpZyk7XG4gIGNvbnN0IGl0ZW1zID0gdXNlTWVtbygoKSA9PiB7XG4gICAgbGV0IGRlZmF1bHRJdGVtcyA9IGFsbEJyYW5jaGVzLm1hcChuYW1lID0+ICh7XG4gICAgICBpZDogbmFtZSxcbiAgICAgIG5hbWVcbiAgICB9KSk7XG4gICAgaWYgKGRlZmF1bHRCcmFuY2gpIHtcbiAgICAgIHJldHVybiBbe1xuICAgICAgICBpZDogZGVmYXVsdEJyYW5jaCxcbiAgICAgICAgbmFtZTogZGVmYXVsdEJyYW5jaCxcbiAgICAgICAgZGVzY3JpcHRpb246IHN0cmluZ0Zvcm1hdHRlci5mb3JtYXQoJ2RlZmF1bHRCcmFuY2gnKVxuICAgICAgfSwgLi4uZGVmYXVsdEl0ZW1zLmZpbHRlcihpID0+IGkubmFtZSAhPT0gZGVmYXVsdEJyYW5jaCldO1xuICAgIH1cbiAgICByZXR1cm4gZGVmYXVsdEl0ZW1zO1xuICB9LCBbYWxsQnJhbmNoZXMsIGRlZmF1bHRCcmFuY2gsIHN0cmluZ0Zvcm1hdHRlcl0pO1xuICBjb25zdCBmaWx0ZXJlZEJyYW5jaGVzID0gdXNlTWVtbygoKSA9PiBpdGVtcy5maWx0ZXIoaXRlbSA9PiBpdGVtLm5hbWUgPT09IGRlZmF1bHRCcmFuY2ggfHwgIWJyYW5jaFByZWZpeCB8fCBpdGVtLm5hbWUuc3RhcnRzV2l0aChicmFuY2hQcmVmaXgpIHx8IGl0ZW0ubmFtZSA9PT0gY3VycmVudEJyYW5jaCksIFticmFuY2hQcmVmaXgsIGN1cnJlbnRCcmFuY2gsIGRlZmF1bHRCcmFuY2gsIGl0ZW1zXSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KENvbWJvYm94LCB7XG4gICAgXCJhcmlhLWxhYmVsXCI6IHN0cmluZ0Zvcm1hdHRlci5mb3JtYXQoJ2N1cnJlbnRCcmFuY2gnKSxcbiAgICBkZWZhdWx0SXRlbXM6IGZpbHRlcmVkQnJhbmNoZXMgLy8gdXNlIGBkZWZhdWx0SXRlbXNgIHNvIHRoZSBjb21wb25lbnQgaGFuZGxlcyBmaWx0ZXJpbmdcbiAgICAsXG4gICAgbG9hZGluZ1N0YXRlOiBmaWx0ZXJlZEJyYW5jaGVzLmxlbmd0aCA9PT0gMCA/ICdsb2FkaW5nJyA6IHVuZGVmaW5lZCxcbiAgICBzZWxlY3RlZEtleTogY3VycmVudEJyYW5jaCxcbiAgICBvblNlbGVjdGlvbkNoYW5nZToga2V5ID0+IHtcbiAgICAgIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJykge1xuICAgICAgICByb3V0ZXIucHVzaChyb3V0ZXIuaHJlZi5yZXBsYWNlKC9cXC9icmFuY2hcXC9bXi9dKy8sICcvYnJhbmNoLycgKyBlbmNvZGVVUklDb21wb25lbnQoa2V5KSkpO1xuICAgICAgfVxuICAgIH0sXG4gICAgbWVudVRyaWdnZXI6IFwiZm9jdXNcIixcbiAgICBmbGV4OiB0cnVlLFxuICAgIGNoaWxkcmVuOiBpdGVtID0+IC8qI19fUFVSRV9fKi9qc3hzKEl0ZW0sIHtcbiAgICAgIHRleHRWYWx1ZTogaXRlbS5uYW1lLFxuICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEljb24sIHtcbiAgICAgICAgc3JjOiBnaXRCcmFuY2hJY29uXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeChUZXh0LCB7XG4gICAgICAgIHRydW5jYXRlOiB0cnVlLFxuICAgICAgICBjaGlsZHJlbjogaXRlbS5uYW1lXG4gICAgICB9KSwgJ2Rlc2NyaXB0aW9uJyBpbiBpdGVtICYmIC8qI19fUFVSRV9fKi9qc3goVGV4dCwge1xuICAgICAgICBzbG90OiBcImRlc2NyaXB0aW9uXCIsXG4gICAgICAgIGNoaWxkcmVuOiBpdGVtLmRlc2NyaXB0aW9uXG4gICAgICB9KV1cbiAgICB9LCBpdGVtLmlkKVxuICB9KTtcbn1cbmZ1bmN0aW9uIENyZWF0ZUJyYW5jaERpYWxvZyhwcm9wcykge1xuICBjb25zdCBjb25maWcgPSB1c2VDb25maWcoKTtcbiAgY29uc3QgYnJhbmNoSW5mbyA9IHVzZUNvbnRleHQoQnJhbmNoSW5mb0NvbnRleHQpO1xuICBjb25zdCBpc0RlZmF1bHRCcmFuY2ggPSBicmFuY2hJbmZvLmRlZmF1bHRCcmFuY2ggPT09IGJyYW5jaEluZm8uY3VycmVudEJyYW5jaDtcbiAgY29uc3Qgc3RyaW5nRm9ybWF0dGVyID0gdXNlTG9jYWxpemVkU3RyaW5nRm9ybWF0dGVyKGwxMG5NZXNzYWdlcyk7XG4gIGNvbnN0IFt7XG4gICAgZXJyb3IsXG4gICAgZmV0Y2hpbmdcbiAgfSwgY3JlYXRlQnJhbmNoXSA9IHVzZUNyZWF0ZUJyYW5jaE11dGF0aW9uKCk7XG4gIGNvbnN0IHJlcG9zaXRvcnlJZCA9IHVzZVJlcG9zaXRvcnlJZCgpO1xuICBjb25zdCBjcmVhdGVCcmFuY2hTdWJtaXRCdXR0b25JZCA9ICdjcmVhdGUtYnJhbmNoLXN1Ym1pdC1idXR0b24nO1xuICBjb25zdCBbYnJhbmNoTmFtZSwgc2V0QnJhbmNoTmFtZV0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtiYXNlQnJhbmNoLCBzZXRCYXNlQnJhbmNoXSA9IHVzZVN0YXRlKGJyYW5jaEluZm8uZGVmYXVsdEJyYW5jaCk7XG4gIGNvbnN0IGJyYW5jaFByZWZpeCA9IGdldEJyYW5jaFByZWZpeChjb25maWcpO1xuICBjb25zdCBwcm9wc0ZvckJyYW5jaFByZWZpeCA9IGJyYW5jaFByZWZpeCA/IHtcbiAgICBVTlNBRkVfY2xhc3NOYW1lOiBjc3Moe1xuICAgICAgJyYgaW5wdXQnOiB7XG4gICAgICAgIHBhZGRpbmdJbmxpbmVTdGFydDogdG9rZW5TY2hlbWEuc2l6ZS5zcGFjZS54c21hbGxcbiAgICAgIH1cbiAgICB9KSxcbiAgICBzdGFydEVsZW1lbnQ6IC8qI19fUFVSRV9fKi9qc3goRmxleCwge1xuICAgICAgYWxpZ25JdGVtczogXCJjZW50ZXJcIixcbiAgICAgIHBhZGRpbmdTdGFydDogXCJyZWd1bGFyXCIsXG4gICAgICBqdXN0aWZ5Q29udGVudDogXCJjZW50ZXJcIixcbiAgICAgIHBvaW50ZXJFdmVudHM6IFwibm9uZVwiLFxuICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goVGV4dCwge1xuICAgICAgICBjb2xvcjogXCJuZXV0cmFsU2Vjb25kYXJ5XCIsXG4gICAgICAgIGNoaWxkcmVuOiBicmFuY2hQcmVmaXhcbiAgICAgIH0pXG4gICAgfSlcbiAgfSA6IHt9O1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChEaWFsb2csIHtcbiAgICBzaXplOiBcInNtYWxsXCIsXG4gICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3hzKFwiZm9ybVwiLCB7XG4gICAgICBzdHlsZToge1xuICAgICAgICBkaXNwbGF5OiAnY29udGVudHMnXG4gICAgICB9LFxuICAgICAgb25TdWJtaXQ6IGFzeW5jIGV2ZW50ID0+IHtcbiAgICAgICAgdmFyIF9yZXN1bHQkZGF0YTtcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldCAhPT0gZXZlbnQuY3VycmVudFRhcmdldCkgcmV0dXJuO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zdCBmdWxsQnJhbmNoTmFtZSA9IChicmFuY2hQcmVmaXggIT09IG51bGwgJiYgYnJhbmNoUHJlZml4ICE9PSB2b2lkIDAgPyBicmFuY2hQcmVmaXggOiAnJykgKyBicmFuY2hOYW1lO1xuICAgICAgICBjb25zdCBuYW1lID0gYHJlZnMvaGVhZHMvJHtmdWxsQnJhbmNoTmFtZX1gO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGVCcmFuY2goe1xuICAgICAgICAgIGlucHV0OiB7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgb2lkOiBicmFuY2hJbmZvLmJyYW5jaE5hbWVUb0Jhc2VDb21taXQuZ2V0KGJhc2VCcmFuY2gpLFxuICAgICAgICAgICAgcmVwb3NpdG9yeUlkXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKChfcmVzdWx0JGRhdGEgPSByZXN1bHQuZGF0YSkgIT09IG51bGwgJiYgX3Jlc3VsdCRkYXRhICE9PSB2b2lkIDAgJiYgKF9yZXN1bHQkZGF0YSA9IF9yZXN1bHQkZGF0YS5jcmVhdGVSZWYpICE9PSBudWxsICYmIF9yZXN1bHQkZGF0YSAhPT0gdm9pZCAwICYmIF9yZXN1bHQkZGF0YS5fX3R5cGVuYW1lKSB7XG4gICAgICAgICAgcHJvcHMub25DcmVhdGUoZnVsbEJyYW5jaE5hbWUpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEhlYWRpbmcsIHtcbiAgICAgICAgY2hpbGRyZW46IHN0cmluZ0Zvcm1hdHRlci5mb3JtYXQoJ25ld0JyYW5jaCcpXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeChDb250ZW50LCB7XG4gICAgICAgIGNoaWxkcmVuOiBpc0RlZmF1bHRCcmFuY2ggPyAvKiNfX1BVUkVfXyovanN4KFRleHRGaWVsZCwge1xuICAgICAgICAgIHZhbHVlOiBicmFuY2hOYW1lLFxuICAgICAgICAgIG9uQ2hhbmdlOiBzZXRCcmFuY2hOYW1lLFxuICAgICAgICAgIGxhYmVsOiBzdHJpbmdGb3JtYXR0ZXIuZm9ybWF0KCdicmFuY2hOYW1lJylcbiAgICAgICAgICAvLyBkZXNjcmlwdGlvbj1cIllvdXIgbmV3IGJyYW5jaCB3aWxsIGJlIGJhc2VkIG9uIHRoZSBjdXJyZW50bHkgY2hlY2tlZCBvdXQgYnJhbmNoLCB3aGljaCBpcyB0aGUgZGVmYXVsdCBicmFuY2ggZm9yIHRoaXMgcmVwb3NpdG9yeS5cIlxuICAgICAgICAgICxcbiAgICAgICAgICBhdXRvRm9jdXM6IHRydWUsXG4gICAgICAgICAgZXJyb3JNZXNzYWdlOiBwcmV0dHlFcnJvckZvckNyZWF0ZUJyYW5jaE11dGF0aW9uKGVycm9yKSxcbiAgICAgICAgICAuLi5wcm9wc0ZvckJyYW5jaFByZWZpeFxuICAgICAgICB9KSA6IC8qI19fUFVSRV9fKi9qc3hzKEdyaWQsIHtcbiAgICAgICAgICBnYXA6IFwieGxhcmdlXCIsXG4gICAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KFRleHRGaWVsZCwge1xuICAgICAgICAgICAgbGFiZWw6IHN0cmluZ0Zvcm1hdHRlci5mb3JtYXQoJ2JyYW5jaE5hbWUnKSxcbiAgICAgICAgICAgIHZhbHVlOiBicmFuY2hOYW1lLFxuICAgICAgICAgICAgb25DaGFuZ2U6IHNldEJyYW5jaE5hbWUsXG4gICAgICAgICAgICBhdXRvRm9jdXM6IHRydWUsXG4gICAgICAgICAgICBlcnJvck1lc3NhZ2U6IHByZXR0eUVycm9yRm9yQ3JlYXRlQnJhbmNoTXV0YXRpb24oZXJyb3IpLFxuICAgICAgICAgICAgLi4ucHJvcHNGb3JCcmFuY2hQcmVmaXhcbiAgICAgICAgICB9KSwgLyojX19QVVJFX18qL2pzeHMoUmFkaW9Hcm91cCwge1xuICAgICAgICAgICAgbGFiZWw6IHN0cmluZ0Zvcm1hdHRlci5mb3JtYXQoJ2Jhc2VkT24nKSxcbiAgICAgICAgICAgIHZhbHVlOiBiYXNlQnJhbmNoLFxuICAgICAgICAgICAgb25DaGFuZ2U6IHNldEJhc2VCcmFuY2gsXG4gICAgICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3hzKFJhZGlvLCB7XG4gICAgICAgICAgICAgIHZhbHVlOiBicmFuY2hJbmZvLmRlZmF1bHRCcmFuY2gsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeHMoVGV4dCwge1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbYnJhbmNoSW5mby5kZWZhdWx0QnJhbmNoLCAvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgICAgICAgICAgICAgIHZpc3VhbGx5SGlkZGVuOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFwiLlwiXG4gICAgICAgICAgICAgICAgfSldXG4gICAgICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgICAgICAgICAgICBzbG90OiBcImRlc2NyaXB0aW9uXCIsXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IHN0cmluZ0Zvcm1hdHRlci5mb3JtYXQoJ3RoZURlZmF1bHRCcmFuY2hJbllvdXJSZXBvc2l0b3J5JylcbiAgICAgICAgICAgICAgfSldXG4gICAgICAgICAgICB9KSwgLyojX19QVVJFX18qL2pzeHMoUmFkaW8sIHtcbiAgICAgICAgICAgICAgdmFsdWU6IGJyYW5jaEluZm8uY3VycmVudEJyYW5jaCxcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4cyhUZXh0LCB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFticmFuY2hJbmZvLmN1cnJlbnRCcmFuY2gsIC8qI19fUFVSRV9fKi9qc3goVGV4dCwge1xuICAgICAgICAgICAgICAgICAgdmlzdWFsbHlIaWRkZW46IHRydWUsXG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbjogXCIuXCJcbiAgICAgICAgICAgICAgICB9KV1cbiAgICAgICAgICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goVGV4dCwge1xuICAgICAgICAgICAgICAgIHNsb3Q6IFwiZGVzY3JpcHRpb25cIixcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogc3RyaW5nRm9ybWF0dGVyLmZvcm1hdCgndGhlQ3VycmVudGx5Q2hlY2tlZE91dEJyYW5jaCcpXG4gICAgICAgICAgICAgIH0pXVxuICAgICAgICAgICAgfSldXG4gICAgICAgICAgfSldXG4gICAgICAgIH0pXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeChGb290ZXIsIHtcbiAgICAgICAgVU5TQUZFX3N0eWxlOiB7XG4gICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdmbGV4LWVuZCdcbiAgICAgICAgfSxcbiAgICAgICAgY2hpbGRyZW46IGZldGNoaW5nICYmIC8qI19fUFVSRV9fKi9qc3goUHJvZ3Jlc3NDaXJjbGUsIHtcbiAgICAgICAgICBcImFyaWEtbGFiZWxsZWRieVwiOiBjcmVhdGVCcmFuY2hTdWJtaXRCdXR0b25JZCxcbiAgICAgICAgICBpc0luZGV0ZXJtaW5hdGU6IHRydWUsXG4gICAgICAgICAgc2l6ZTogXCJzbWFsbFwiXG4gICAgICAgIH0pXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeHMoQnV0dG9uR3JvdXAsIHtcbiAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEJ1dHRvbiwge1xuICAgICAgICAgIG9uUHJlc3M6IHByb3BzLm9uRGlzbWlzcyxcbiAgICAgICAgICBpc0Rpc2FibGVkOiBmZXRjaGluZyxcbiAgICAgICAgICBjaGlsZHJlbjogc3RyaW5nRm9ybWF0dGVyLmZvcm1hdCgnY2FuY2VsJylcbiAgICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goQnV0dG9uLCB7XG4gICAgICAgICAgaXNEaXNhYmxlZDogZmV0Y2hpbmcsXG4gICAgICAgICAgcHJvbWluZW5jZTogXCJoaWdoXCIsXG4gICAgICAgICAgdHlwZTogXCJzdWJtaXRcIixcbiAgICAgICAgICBpZDogY3JlYXRlQnJhbmNoU3VibWl0QnV0dG9uSWQsXG4gICAgICAgICAgY2hpbGRyZW46IHN0cmluZ0Zvcm1hdHRlci5mb3JtYXQoJ2NyZWF0ZScpXG4gICAgICAgIH0pXVxuICAgICAgfSldXG4gICAgfSlcbiAgfSk7XG59XG5cbi8vIERhdGFcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vIGh0dHBzOi8vZ2l0LXNjbS5jb20vZG9jcy9naXQtY2hlY2stcmVmLWZvcm1hdFxuY29uc3QgaW52YWxpZEFueXdoZXJlID0gWycgJywgJ34nLCAnXicsICc6JywgJyonLCAnPycsICdbJywgJy4uJywgJ0B7JywgJ1xcXFwnXTtcbmNvbnN0IGludmFsaWRTdGFydCA9IFsnLicsICcvJ107XG5jb25zdCBpbnZhbGlkRW5kID0gWycuJywgJy8nLCAnLmxvY2snXTtcbmZ1bmN0aW9uIHByZXR0eUVycm9yRm9yQ3JlYXRlQnJhbmNoTXV0YXRpb24oZXJyb3IpIHtcbiAgaWYgKCFlcnJvcikge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ2lzIG5vdCBhIHZhbGlkIHJlZiBuYW1lJykpIHtcbiAgICBsZXQgcmVmbmFtZU1hdGNoID0gZXJyb3IubWVzc2FnZS5tYXRjaCgvXCIoW15cIl0rKVwiLyk7XG4gICAgbGV0IGJyYW5jaG5hbWUgPSByZWZuYW1lTWF0Y2ggPyByZWZuYW1lTWF0Y2hbMV0ucmVwbGFjZSgncmVmcy9oZWFkcy8nLCAnJykgOiAnJztcblxuICAgIC8vIHN0YXJ0IHJ1bGVzXG4gICAgZm9yIChsZXQgY2hhciBvZiBpbnZhbGlkU3RhcnQpIHtcbiAgICAgIGlmIChicmFuY2huYW1lLnN0YXJ0c1dpdGgoY2hhcikpIHtcbiAgICAgICAgcmV0dXJuIGBDYW5ub3Qgc3RhcnQgd2l0aCBcIiR7Y2hhcn1cImA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gZW5kIHJ1bGVzXG4gICAgZm9yIChsZXQgY2hhciBvZiBpbnZhbGlkRW5kKSB7XG4gICAgICBpZiAoYnJhbmNobmFtZS5lbmRzV2l0aChjaGFyKSkge1xuICAgICAgICByZXR1cm4gYENhbm5vdCBlbmQgd2l0aCBcIiR7Y2hhcn1cImA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gYW55d2hlcmUgcnVsZXNcbiAgICBsZXQgaW52YWxpZE1hdGNoZXMgPSBpbnZhbGlkQW55d2hlcmUuZmlsdGVyKGMgPT4gYnJhbmNobmFtZS5pbmNsdWRlcyhjKSk7XG4gICAgaWYgKGludmFsaWRNYXRjaGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGxldCBvcHRpb25zID0ge1xuICAgICAgICBzdHlsZTogJ2xvbmcnLFxuICAgICAgICB0eXBlOiAnY29uanVuY3Rpb24nXG4gICAgICB9O1xuICAgICAgbGV0IGZvcm1hdHRlciA9IG5ldyBJbnRsLkxpc3RGb3JtYXQoJ2VuLVVTJywgb3B0aW9ucyk7XG4gICAgICBsZXQgbGlzdCA9IGludmFsaWRNYXRjaGVzLm1hcChjaGFyID0+IGBcIiR7Y2hhcn1cImApO1xuICAgICAgcmV0dXJuIGBTb21lIGNoYXJhY3RlcnMgYXJlIG5vdCBhbGxvd2VkOiAke2Zvcm1hdHRlci5mb3JtYXQobGlzdCl9YDtcbiAgICB9XG5cbiAgICAvLyB1bmtub3duXG4gICAgcmV0dXJuICdJbnZhbGlkIGJyYW5jaCBuYW1lJztcbiAgfVxuICByZXR1cm4gZXJyb3IubWVzc2FnZTtcbn1cbmZ1bmN0aW9uIHVzZUNyZWF0ZUJyYW5jaE11dGF0aW9uKCkge1xuICByZXR1cm4gdXNlTXV0YXRpb24oZ3FsYFxuICAgICAgbXV0YXRpb24gQ3JlYXRlQnJhbmNoKCRpbnB1dDogQ3JlYXRlUmVmSW5wdXQhKSB7XG4gICAgICAgIGNyZWF0ZVJlZihpbnB1dDogJGlucHV0KSB7XG4gICAgICAgICAgX190eXBlbmFtZVxuICAgICAgICAgIHJlZiB7XG4gICAgICAgICAgICAuLi5SZWZfYmFzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgJHtSZWZfYmFzZX1cbiAgICBgKTtcbn1cblxuY29uc3QgVGhlbWVDb250ZXh0ID0gLyojX19QVVJFX18qL2NyZWF0ZUNvbnRleHQoe1xuICB0aGVtZTogJ2F1dG8nLFxuICBzZXRUaGVtZTogKCkgPT4ge1xuICAgIHRocm93IG5ldyBFcnJvcignVGhlbWVDb250ZXh0IHdhcyBub3QgaW5pdGlhbGl6ZWQuJyk7XG4gIH1cbn0pO1xuY29uc3QgVGhlbWVQcm92aWRlciA9IFRoZW1lQ29udGV4dC5Qcm92aWRlcjtcbmNvbnN0IFNUT1JBR0VfS0VZID0gJ2tleXN0YXRpYy1jb2xvci1zY2hlbWUnO1xuXG4vLyBvbmx5IGZvciBpbml0aWFsaXppbmcgdGhlIHByb3ZpZGVyLCBmb3IgY29uc3VtcHRpb24gdXNlIGB1c2VUaGVtZUNvbnRleHQoKWBcbmZ1bmN0aW9uIHVzZVRoZW1lKCkge1xuICBsZXQgW3RoZW1lLCBzZXRUaGVtZVZhbHVlXSA9IHVzZVN0YXRlKCgpID0+IHtcbiAgICBsZXQgc3RvcmVkVmFsdWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShTVE9SQUdFX0tFWSk7XG4gICAgaWYgKHN0b3JlZFZhbHVlID09PSAnbGlnaHQnIHx8IHN0b3JlZFZhbHVlID09PSAnZGFyaycpIHtcbiAgICAgIHJldHVybiBzdG9yZWRWYWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuICdhdXRvJztcbiAgfSk7XG4gIGxldCBzZXRUaGVtZSA9IHRoZW1lID0+IHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShTVE9SQUdFX0tFWSwgdGhlbWUpO1xuICAgIHNldFRoZW1lVmFsdWUodGhlbWUpO1xuICB9O1xuICByZXR1cm4ge1xuICAgIHRoZW1lLFxuICAgIHNldFRoZW1lXG4gIH07XG59XG5mdW5jdGlvbiB1c2VUaGVtZUNvbnRleHQoKSB7XG4gIHJldHVybiB1c2VDb250ZXh0KFRoZW1lQ29udGV4dCk7XG59XG5cbmZ1bmN0aW9uIGZvY3VzV2l0aFByZXZpb3VzU2VsZWN0aW9uKGVkaXRvcikge1xuICBjb25zdCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gIGlmIChzZWxlY3Rpb24pIHtcbiAgICBzZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgc2VsZWN0aW9uLmFkZFJhbmdlKFJlYWN0RWRpdG9yLnRvRE9NUmFuZ2UoZWRpdG9yLCBlZGl0b3Iuc2VsZWN0aW9uKSk7XG4gIH1cbiAgUmVhY3RFZGl0b3IuZm9jdXMoZWRpdG9yKTtcbn1cbmNvbnN0IGJsb2NrRWxlbWVudFNwYWNpbmcgPSBjc3Moe1xuICBtYXJnaW5CbG9jazogJzAuNzVlbScsXG4gICcmOmZpcnN0LWNoaWxkJzoge1xuICAgIG1hcmdpbkJsb2NrU3RhcnQ6IDBcbiAgfSxcbiAgJyY6bGFzdC1jaGlsZCc6IHtcbiAgICBtYXJnaW5CbG9ja0VuZDogMFxuICB9XG59KTtcbmNvbnN0IEZvcmNlVmFsaWRhdGlvbkNvbnRleHQgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlQ29udGV4dChmYWxzZSk7XG5Gb3JjZVZhbGlkYXRpb25Db250ZXh0LlByb3ZpZGVyO1xuXG4vLyB0aGlzIGVuc3VyZXMgdGhhdCB3aGVuIGNoYW5nZXMgaGFwcGVuLCB0aGV5IGFyZSBpbW1lZGlhdGVseSBzaG93blxuLy8gdGhpcyBzdG9wcyB0aGUgcHJvYmxlbSBvZiBhIGN1cnNvciByZXNldHRpbmcgdG8gdGhlIGVuZCB3aGVuIGEgY2hhbmdlIGlzIG1hZGVcbi8vIGJlY2F1c2UgdGhlIGNoYW5nZXMgYXJlIGFwcGxpZWQgYXN5bmNocm9ub3VzbHlcbmZ1bmN0aW9uIHVzZUVsZW1lbnRXaXRoU2V0Tm9kZXMoZWRpdG9yLCBlbGVtZW50KSB7XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGUoe1xuICAgIGVsZW1lbnQsXG4gICAgZWxlbWVudFdpdGhDaGFuZ2VzOiBlbGVtZW50XG4gIH0pO1xuICBpZiAoc3RhdGUuZWxlbWVudCAhPT0gZWxlbWVudCkge1xuICAgIHNldFN0YXRlKHtcbiAgICAgIGVsZW1lbnQsXG4gICAgICBlbGVtZW50V2l0aENoYW5nZXM6IGVsZW1lbnRcbiAgICB9KTtcbiAgfVxuICBjb25zdCBlbGVtZW50UmVmID0gdXNlUmVmKGVsZW1lbnQpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGVsZW1lbnRSZWYuY3VycmVudCA9IGVsZW1lbnQ7XG4gIH0pO1xuICBjb25zdCBzZXROb2RlcyA9IHVzZUNhbGxiYWNrKGNoYW5nZXNPckNhbGxiYWNrID0+IHtcbiAgICBjb25zdCBjdXJyZW50RWxlbWVudCA9IGVsZW1lbnRSZWYuY3VycmVudDtcbiAgICBjb25zdCBjaGFuZ2VzID0gdHlwZW9mIGNoYW5nZXNPckNhbGxiYWNrID09PSAnZnVuY3Rpb24nID8gY2hhbmdlc09yQ2FsbGJhY2soY3VycmVudEVsZW1lbnQpIDogY2hhbmdlc09yQ2FsbGJhY2s7XG4gICAgVHJhbnNmb3Jtcy5zZXROb2RlcyhlZGl0b3IsIGNoYW5nZXMsIHtcbiAgICAgIGF0OiBSZWFjdEVkaXRvci5maW5kUGF0aChlZGl0b3IsIGN1cnJlbnRFbGVtZW50KVxuICAgIH0pO1xuICAgIHNldFN0YXRlKHtcbiAgICAgIGVsZW1lbnQ6IGN1cnJlbnRFbGVtZW50LFxuICAgICAgZWxlbWVudFdpdGhDaGFuZ2VzOiB7XG4gICAgICAgIC4uLmN1cnJlbnRFbGVtZW50LFxuICAgICAgICAuLi5jaGFuZ2VzXG4gICAgICB9XG4gICAgfSk7XG4gIH0sIFtlZGl0b3JdKTtcbiAgcmV0dXJuIFtzdGF0ZS5lbGVtZW50V2l0aENoYW5nZXMsIHNldE5vZGVzXTtcbn1cbmZ1bmN0aW9uIHVzZUV2ZW50Q2FsbGJhY2soY2FsbGJhY2spIHtcbiAgY29uc3QgY2FsbGJhY2tSZWYgPSB1c2VSZWYoY2FsbGJhY2spO1xuICBjb25zdCBjYiA9IHVzZUNhbGxiYWNrKCguLi5hcmdzKSA9PiB7XG4gICAgcmV0dXJuIGNhbGxiYWNrUmVmLmN1cnJlbnQoLi4uYXJncyk7XG4gIH0sIFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjYWxsYmFja1JlZi5jdXJyZW50ID0gY2FsbGJhY2s7XG4gIH0pO1xuICByZXR1cm4gY2I7XG59XG5mdW5jdGlvbiBpbnNlcnROb2Rlc0J1dFJlcGxhY2VJZlNlbGVjdGlvbklzQXRFbXB0eVBhcmFncmFwaE9ySGVhZGluZyhlZGl0b3IsIG5vZGVzKSB7XG4gIHZhciBfcGF0aFJlZkZvckVtcHR5Tm9kZUE7XG4gIGxldCBwYXRoUmVmRm9yRW1wdHlOb2RlQXRDdXJzb3I7XG4gIGNvbnN0IGVudHJ5ID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgIG1hdGNoOiBub2RlID0+IG5vZGUudHlwZSA9PT0gJ2hlYWRpbmcnIHx8IG5vZGUudHlwZSA9PT0gJ3BhcmFncmFwaCdcbiAgfSk7XG4gIGlmIChlbnRyeSAmJiBOb2RlLnN0cmluZyhlbnRyeVswXSkgPT09ICcnKSB7XG4gICAgcGF0aFJlZkZvckVtcHR5Tm9kZUF0Q3Vyc29yID0gRWRpdG9yLnBhdGhSZWYoZWRpdG9yLCBlbnRyeVsxXSk7XG4gIH1cbiAgVHJhbnNmb3Jtcy5pbnNlcnROb2RlcyhlZGl0b3IsIG5vZGVzKTtcbiAgbGV0IHBhdGggPSAoX3BhdGhSZWZGb3JFbXB0eU5vZGVBID0gcGF0aFJlZkZvckVtcHR5Tm9kZUF0Q3Vyc29yKSA9PT0gbnVsbCB8fCBfcGF0aFJlZkZvckVtcHR5Tm9kZUEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wYXRoUmVmRm9yRW1wdHlOb2RlQS51bnJlZigpO1xuICBpZiAocGF0aCkge1xuICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICBhdDogcGF0aFxuICAgIH0pO1xuICAgIC8vIGV2ZW4gdGhvdWdoIHRoZSBzZWxlY3Rpb24gaXMgaW4gdGhlIHJpZ2h0IHBsYWNlIGFmdGVyIHRoZSByZW1vdmVOb2Rlc1xuICAgIC8vIGZvciBzb21lIHJlYXNvbiB0aGUgZWRpdG9yIGJsdXJzIHNvIHdlIG5lZWQgdG8gZm9jdXMgaXQgYWdhaW5cbiAgICBSZWFjdEVkaXRvci5mb2N1cyhlZGl0b3IpO1xuICB9XG59XG5cbmNvbnN0IHRhYmxlQ2VsbENoaWxkcmVuID0gWydwYXJhZ3JhcGgnLCAnY29kZScsICdoZWFkaW5nJywgJ29yZGVyZWQtbGlzdCcsICd1bm9yZGVyZWQtbGlzdCcsICdkaXZpZGVyJywgJ2ltYWdlJ107XG5jb25zdCBibG9ja3F1b3RlQ2hpbGRyZW4gPSBbLi4udGFibGVDZWxsQ2hpbGRyZW4sICd0YWJsZSddO1xuY29uc3QgcGFyYWdyYXBoTGlrZSA9IFsuLi5ibG9ja3F1b3RlQ2hpbGRyZW4sICdibG9ja3F1b3RlJ107XG5jb25zdCBpbnNpZGVPZkxheW91dHMgPSBbLi4ucGFyYWdyYXBoTGlrZSwgJ2NvbXBvbmVudC1ibG9jayddO1xuZnVuY3Rpb24gYmxvY2tDb250YWluZXIoYXJncykge1xuICByZXR1cm4ge1xuICAgIGtpbmQ6ICdibG9ja3MnLFxuICAgIGFsbG93ZWRDaGlsZHJlbjogbmV3IFNldChhcmdzLmFsbG93ZWRDaGlsZHJlbiksXG4gICAgYmxvY2tUb1dyYXBJbmxpbmVzSW46IGFyZ3MuYWxsb3dlZENoaWxkcmVuWzBdLFxuICAgIGludmFsaWRQb3NpdGlvbkhhbmRsZU1vZGU6IGFyZ3MuaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZVxuICB9O1xufVxuZnVuY3Rpb24gaW5saW5lQ29udGFpbmVyKGFyZ3MpIHtcbiAgcmV0dXJuIHtcbiAgICBraW5kOiAnaW5saW5lcycsXG4gICAgaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZTogYXJncy5pbnZhbGlkUG9zaXRpb25IYW5kbGVNb2RlXG4gIH07XG59XG5jb25zdCBlZGl0b3JTY2hlbWEgPSB7XG4gIGVkaXRvcjogYmxvY2tDb250YWluZXIoe1xuICAgIGFsbG93ZWRDaGlsZHJlbjogWy4uLmluc2lkZU9mTGF5b3V0cywgJ2xheW91dCddLFxuICAgIGludmFsaWRQb3NpdGlvbkhhbmRsZU1vZGU6ICdtb3ZlJ1xuICB9KSxcbiAgbGF5b3V0OiBibG9ja0NvbnRhaW5lcih7XG4gICAgYWxsb3dlZENoaWxkcmVuOiBbJ2xheW91dC1hcmVhJ10sXG4gICAgaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZTogJ21vdmUnXG4gIH0pLFxuICAnbGF5b3V0LWFyZWEnOiBibG9ja0NvbnRhaW5lcih7XG4gICAgYWxsb3dlZENoaWxkcmVuOiBpbnNpZGVPZkxheW91dHMsXG4gICAgaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZTogJ3Vud3JhcCdcbiAgfSksXG4gIGJsb2NrcXVvdGU6IGJsb2NrQ29udGFpbmVyKHtcbiAgICBhbGxvd2VkQ2hpbGRyZW46IGJsb2NrcXVvdGVDaGlsZHJlbixcbiAgICBpbnZhbGlkUG9zaXRpb25IYW5kbGVNb2RlOiAnbW92ZSdcbiAgfSksXG4gIHBhcmFncmFwaDogaW5saW5lQ29udGFpbmVyKHtcbiAgICBpbnZhbGlkUG9zaXRpb25IYW5kbGVNb2RlOiAndW53cmFwJ1xuICB9KSxcbiAgY29kZTogaW5saW5lQ29udGFpbmVyKHtcbiAgICBpbnZhbGlkUG9zaXRpb25IYW5kbGVNb2RlOiAnbW92ZSdcbiAgfSksXG4gIGRpdmlkZXI6IGlubGluZUNvbnRhaW5lcih7XG4gICAgaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZTogJ21vdmUnXG4gIH0pLFxuICBoZWFkaW5nOiBpbmxpbmVDb250YWluZXIoe1xuICAgIGludmFsaWRQb3NpdGlvbkhhbmRsZU1vZGU6ICd1bndyYXAnXG4gIH0pLFxuICAnY29tcG9uZW50LWJsb2NrJzogYmxvY2tDb250YWluZXIoe1xuICAgIGFsbG93ZWRDaGlsZHJlbjogWydjb21wb25lbnQtYmxvY2stcHJvcCcsICdjb21wb25lbnQtaW5saW5lLXByb3AnXSxcbiAgICBpbnZhbGlkUG9zaXRpb25IYW5kbGVNb2RlOiAnbW92ZSdcbiAgfSksXG4gICdjb21wb25lbnQtaW5saW5lLXByb3AnOiBpbmxpbmVDb250YWluZXIoe1xuICAgIGludmFsaWRQb3NpdGlvbkhhbmRsZU1vZGU6ICd1bndyYXAnXG4gIH0pLFxuICAnY29tcG9uZW50LWJsb2NrLXByb3AnOiBibG9ja0NvbnRhaW5lcih7XG4gICAgYWxsb3dlZENoaWxkcmVuOiBpbnNpZGVPZkxheW91dHMsXG4gICAgaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZTogJ3Vud3JhcCdcbiAgfSksXG4gICdvcmRlcmVkLWxpc3QnOiBibG9ja0NvbnRhaW5lcih7XG4gICAgYWxsb3dlZENoaWxkcmVuOiBbJ2xpc3QtaXRlbSddLFxuICAgIGludmFsaWRQb3NpdGlvbkhhbmRsZU1vZGU6ICdtb3ZlJ1xuICB9KSxcbiAgJ3Vub3JkZXJlZC1saXN0JzogYmxvY2tDb250YWluZXIoe1xuICAgIGFsbG93ZWRDaGlsZHJlbjogWydsaXN0LWl0ZW0nXSxcbiAgICBpbnZhbGlkUG9zaXRpb25IYW5kbGVNb2RlOiAnbW92ZSdcbiAgfSksXG4gICdsaXN0LWl0ZW0nOiBibG9ja0NvbnRhaW5lcih7XG4gICAgYWxsb3dlZENoaWxkcmVuOiBbJ2xpc3QtaXRlbS1jb250ZW50JywgJ29yZGVyZWQtbGlzdCcsICd1bm9yZGVyZWQtbGlzdCddLFxuICAgIGludmFsaWRQb3NpdGlvbkhhbmRsZU1vZGU6ICd1bndyYXAnXG4gIH0pLFxuICAnbGlzdC1pdGVtLWNvbnRlbnQnOiBpbmxpbmVDb250YWluZXIoe1xuICAgIGludmFsaWRQb3NpdGlvbkhhbmRsZU1vZGU6ICd1bndyYXAnXG4gIH0pLFxuICBpbWFnZTogaW5saW5lQ29udGFpbmVyKHtcbiAgICBpbnZhbGlkUG9zaXRpb25IYW5kbGVNb2RlOiAnbW92ZSdcbiAgfSksXG4gIHRhYmxlOiBibG9ja0NvbnRhaW5lcih7XG4gICAgaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZTogJ21vdmUnLFxuICAgIGFsbG93ZWRDaGlsZHJlbjogWyd0YWJsZS1oZWFkJywgJ3RhYmxlLWJvZHknXVxuICB9KSxcbiAgJ3RhYmxlLWJvZHknOiBibG9ja0NvbnRhaW5lcih7XG4gICAgaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZTogJ21vdmUnLFxuICAgIGFsbG93ZWRDaGlsZHJlbjogWyd0YWJsZS1yb3cnXVxuICB9KSxcbiAgJ3RhYmxlLXJvdyc6IGJsb2NrQ29udGFpbmVyKHtcbiAgICBpbnZhbGlkUG9zaXRpb25IYW5kbGVNb2RlOiAnbW92ZScsXG4gICAgYWxsb3dlZENoaWxkcmVuOiBbJ3RhYmxlLWNlbGwnXVxuICB9KSxcbiAgJ3RhYmxlLWNlbGwnOiBibG9ja0NvbnRhaW5lcih7XG4gICAgaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZTogJ21vdmUnLFxuICAgIGFsbG93ZWRDaGlsZHJlbjogdGFibGVDZWxsQ2hpbGRyZW5cbiAgfSksXG4gICd0YWJsZS1oZWFkJzogYmxvY2tDb250YWluZXIoe1xuICAgIGludmFsaWRQb3NpdGlvbkhhbmRsZU1vZGU6ICdtb3ZlJyxcbiAgICBhbGxvd2VkQ2hpbGRyZW46IFsndGFibGUtcm93J11cbiAgfSlcbn07XG5jb25zdCBpbmxpbmVDb250YWluZXJUeXBlcyA9IG5ldyBTZXQoT2JqZWN0LmVudHJpZXMoZWRpdG9yU2NoZW1hKS5maWx0ZXIoKFssIHZhbHVlXSkgPT4gdmFsdWUua2luZCA9PT0gJ2lubGluZXMnKS5tYXAoKFt0eXBlXSkgPT4gdHlwZSkpO1xuZnVuY3Rpb24gaXNJbmxpbmVDb250YWluZXIobm9kZSkge1xuICByZXR1cm4gbm9kZS50eXBlICE9PSB1bmRlZmluZWQgJiYgaW5saW5lQ29udGFpbmVyVHlwZXMuaGFzKG5vZGUudHlwZSk7XG59XG5jb25zdCBibG9ja1R5cGVzID0gbmV3IFNldChPYmplY3Qua2V5cyhlZGl0b3JTY2hlbWEpLmZpbHRlcih4ID0+IHggIT09ICdlZGl0b3InKSk7XG5mdW5jdGlvbiBpc0Jsb2NrKG5vZGUpIHtcbiAgcmV0dXJuIGJsb2NrVHlwZXMuaGFzKG5vZGUudHlwZSk7XG59XG5cbi8vIHRvIHByaW50IHRoZSBlZGl0b3Igc2NoZW1hIGluIEdyYXBodml6IGlmIHlvdSB3YW50IHRvIHZpc3VhbGl6ZSBpdFxuLy8gZnVuY3Rpb24gcHJpbnRFZGl0b3JTY2hlbWEoZWRpdG9yU2NoZW1hOiBFZGl0b3JTY2hlbWEpIHtcbi8vICAgcmV0dXJuIGBkaWdyYXBoIEcge1xuLy8gICBjb25jZW50cmF0ZT10cnVlO1xuLy8gICAke09iamVjdC5rZXlzKGVkaXRvclNjaGVtYSlcbi8vICAgICAubWFwKGtleSA9PiB7XG4vLyAgICAgICBsZXQgdmFsID0gZWRpdG9yU2NoZW1hW2tleV07XG4vLyAgICAgICBpZiAodmFsLmtpbmQgPT09ICdpbmxpbmVzJykge1xuLy8gICAgICAgICByZXR1cm4gYFwiJHtrZXl9XCIgLT4gaW5saW5lc2A7XG4vLyAgICAgICB9XG4vLyAgICAgICBpZiAodmFsLmtpbmQgPT09ICdibG9ja3MnKSB7XG4vLyAgICAgICAgIHJldHVybiBgXCIke2tleX1cIiAtPiB7JHtbLi4udmFsLmFsbG93ZWRDaGlsZHJlbl0ubWFwKHggPT4gSlNPTi5zdHJpbmdpZnkoeCkpLmpvaW4oJyAnKX19YDtcbi8vICAgICAgIH1cbi8vICAgICB9KVxuLy8gICAgIC5qb2luKCdcXG4gICcpfVxuLy8gfWA7XG4vLyB9XG5cbmZ1bmN0aW9uIGdldFdob2xlRG9jdW1lbnRGZWF0dXJlc0ZvckNoaWxkRmllbGQoZWRpdG9yRG9jdW1lbnRGZWF0dXJlcywgb3B0aW9ucykge1xuICB2YXIgX29wdGlvbnMkZm9ybWF0dGluZywgX29wdGlvbnMkZm9ybWF0dGluZzIsIF9vcHRpb25zJGZvcm1hdHRpbmczLCBfb3B0aW9ucyRmb3JtYXR0aW5nNCwgX29wdGlvbnMkZm9ybWF0dGluZzUsIF9vcHRpb25zJGZvcm1hdHRpbmc2LCBfb3B0aW9ucyRmb3JtYXR0aW5nNztcbiAgY29uc3QgaW5saW5lTWFya3NGcm9tT3B0aW9ucyA9IChfb3B0aW9ucyRmb3JtYXR0aW5nID0gb3B0aW9ucy5mb3JtYXR0aW5nKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRmb3JtYXR0aW5nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3B0aW9ucyRmb3JtYXR0aW5nLmlubGluZU1hcmtzO1xuICBjb25zdCBpbmxpbmVNYXJrcyA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3Qua2V5cyhlZGl0b3JEb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuaW5saW5lTWFya3MpLm1hcChfbWFyayA9PiB7XG4gICAgY29uc3QgbWFyayA9IF9tYXJrO1xuICAgIHJldHVybiBbbWFyaywgaW5saW5lTWFya3NGcm9tT3B0aW9ucyA9PT0gJ2luaGVyaXQnIHx8IChpbmxpbmVNYXJrc0Zyb21PcHRpb25zID09PSBudWxsIHx8IGlubGluZU1hcmtzRnJvbU9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGlubGluZU1hcmtzRnJvbU9wdGlvbnNbbWFya10pID09PSAnaW5oZXJpdCcgPyBlZGl0b3JEb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuaW5saW5lTWFya3NbbWFya10gOiBmYWxzZV07XG4gIH0pKTtcbiAgY29uc3QgaGVhZGluZ0xldmVscyA9IChfb3B0aW9ucyRmb3JtYXR0aW5nMiA9IG9wdGlvbnMuZm9ybWF0dGluZykgPT09IG51bGwgfHwgX29wdGlvbnMkZm9ybWF0dGluZzIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRpb25zJGZvcm1hdHRpbmcyLmhlYWRpbmdMZXZlbHM7XG4gIHJldHVybiB7XG4gICAgZm9ybWF0dGluZzoge1xuICAgICAgaW5saW5lTWFya3MsXG4gICAgICBzb2Z0QnJlYWtzOiAoKF9vcHRpb25zJGZvcm1hdHRpbmczID0gb3B0aW9ucy5mb3JtYXR0aW5nKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRmb3JtYXR0aW5nMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29wdGlvbnMkZm9ybWF0dGluZzMuc29mdEJyZWFrcykgPT09ICdpbmhlcml0JyAmJiBlZGl0b3JEb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuc29mdEJyZWFrcyxcbiAgICAgIGFsaWdubWVudDoge1xuICAgICAgICBjZW50ZXI6IGVkaXRvckRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5hbGlnbm1lbnQuY2VudGVyICYmICgoX29wdGlvbnMkZm9ybWF0dGluZzQgPSBvcHRpb25zLmZvcm1hdHRpbmcpID09PSBudWxsIHx8IF9vcHRpb25zJGZvcm1hdHRpbmc0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3B0aW9ucyRmb3JtYXR0aW5nNC5hbGlnbm1lbnQpID09PSAnaW5oZXJpdCcsXG4gICAgICAgIGVuZDogZWRpdG9yRG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmFsaWdubWVudC5lbmQgJiYgKChfb3B0aW9ucyRmb3JtYXR0aW5nNSA9IG9wdGlvbnMuZm9ybWF0dGluZykgPT09IG51bGwgfHwgX29wdGlvbnMkZm9ybWF0dGluZzUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRpb25zJGZvcm1hdHRpbmc1LmFsaWdubWVudCkgPT09ICdpbmhlcml0J1xuICAgICAgfSxcbiAgICAgIGJsb2NrVHlwZXM6ICgoX29wdGlvbnMkZm9ybWF0dGluZzYgPSBvcHRpb25zLmZvcm1hdHRpbmcpID09PSBudWxsIHx8IF9vcHRpb25zJGZvcm1hdHRpbmc2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3B0aW9ucyRmb3JtYXR0aW5nNi5ibG9ja1R5cGVzKSA9PT0gJ2luaGVyaXQnID8gZWRpdG9yRG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmJsb2NrVHlwZXMgOiB7XG4gICAgICAgIGJsb2NrcXVvdGU6IGZhbHNlLFxuICAgICAgICBjb2RlOiBmYWxzZVxuICAgICAgfSxcbiAgICAgIGhlYWRpbmdzOiBoZWFkaW5nTGV2ZWxzID09PSAnaW5oZXJpdCcgPyBlZGl0b3JEb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuaGVhZGluZ3MgOiB7XG4gICAgICAgIGxldmVsczogaGVhZGluZ0xldmVscyA/IGVkaXRvckRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5oZWFkaW5ncy5sZXZlbHMuZmlsdGVyKGxldmVsID0+IGhlYWRpbmdMZXZlbHMuaW5jbHVkZXMobGV2ZWwpKSA6IFtdLFxuICAgICAgICBzY2hlbWE6IGVkaXRvckRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5oZWFkaW5ncy5zY2hlbWFcbiAgICAgIH0sXG4gICAgICBsaXN0VHlwZXM6ICgoX29wdGlvbnMkZm9ybWF0dGluZzcgPSBvcHRpb25zLmZvcm1hdHRpbmcpID09PSBudWxsIHx8IF9vcHRpb25zJGZvcm1hdHRpbmc3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3B0aW9ucyRmb3JtYXR0aW5nNy5saXN0VHlwZXMpID09PSAnaW5oZXJpdCcgPyBlZGl0b3JEb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcubGlzdFR5cGVzIDoge1xuICAgICAgICBvcmRlcmVkOiBmYWxzZSxcbiAgICAgICAgdW5vcmRlcmVkOiBmYWxzZVxuICAgICAgfVxuICAgIH0sXG4gICAgZGl2aWRlcnM6IG9wdGlvbnMuZGl2aWRlcnMgPT09ICdpbmhlcml0JyA/IGVkaXRvckRvY3VtZW50RmVhdHVyZXMuZGl2aWRlcnMgOiBmYWxzZSxcbiAgICBpbWFnZXM6IG9wdGlvbnMuaW1hZ2VzID09PSAnaW5oZXJpdCcgJiYgZWRpdG9yRG9jdW1lbnRGZWF0dXJlcy5pbWFnZXMsXG4gICAgbGF5b3V0czogW10sXG4gICAgbGlua3M6IG9wdGlvbnMubGlua3MgPT09ICdpbmhlcml0JyAmJiBlZGl0b3JEb2N1bWVudEZlYXR1cmVzLmxpbmtzLFxuICAgIHRhYmxlczogb3B0aW9ucy50YWJsZXMgPT09ICdpbmhlcml0JyAmJiBlZGl0b3JEb2N1bWVudEZlYXR1cmVzLnRhYmxlc1xuICB9O1xufVxuZnVuY3Rpb24gZ2V0RG9jdW1lbnRGZWF0dXJlc0ZvckNoaWxkRmllbGQoZWRpdG9yRG9jdW1lbnRGZWF0dXJlcywgb3B0aW9ucykge1xuICB2YXIgX29wdGlvbnMkZm9ybWF0dGluZzgsIF9vcHRpb25zJGZvcm1hdHRpbmcxMCwgX29wdGlvbnMkZm9ybWF0dGluZzExLCBfb3B0aW9ucyRmb3JtYXR0aW5nMTIsIF9vcHRpb25zJGZvcm1hdHRpbmcxMywgX29wdGlvbnMkZm9ybWF0dGluZzE0O1xuICAvLyBhbiBpbXBvcnRhbnQgbm90ZSBmb3IgdGhpczogbm9ybWFsaXphdGlvbiBiYXNlZCBvbiBkb2N1bWVudCBmZWF0dXJlc1xuICAvLyBpcyBkb25lIGJhc2VkIG9uIHRoZSBkb2N1bWVudCBmZWF0dXJlcyByZXR1cm5lZCBoZXJlXG4gIC8vIGFuZCB0aGUgZWRpdG9yIGRvY3VtZW50IGZlYXR1cmVzXG4gIC8vIHNvIHRoZSByZXN1bHQgZm9yIGFueSBnaXZlbiBjaGlsZCBwcm9wIHdpbGwgYmUgdGhlIHRoaW5ncyB0aGF0IGFyZVxuICAvLyBhbGxvd2VkIGJ5IGJvdGggdGhlc2UgZG9jdW1lbnQgZmVhdHVyZXNcbiAgLy8gQU5EIHRoZSBlZGl0b3IgZG9jdW1lbnQgZmVhdHVyZXNcbiAgY29uc3QgaW5saW5lTWFya3NGcm9tT3B0aW9ucyA9IChfb3B0aW9ucyRmb3JtYXR0aW5nOCA9IG9wdGlvbnMuZm9ybWF0dGluZykgPT09IG51bGwgfHwgX29wdGlvbnMkZm9ybWF0dGluZzggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRpb25zJGZvcm1hdHRpbmc4LmlubGluZU1hcmtzO1xuICBjb25zdCBpbmxpbmVNYXJrcyA9IGlubGluZU1hcmtzRnJvbU9wdGlvbnMgPT09ICdpbmhlcml0JyA/ICdpbmhlcml0JyA6IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3Qua2V5cyhlZGl0b3JEb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuaW5saW5lTWFya3MpLm1hcChtYXJrID0+IHtcbiAgICByZXR1cm4gW21hcmssICEhKGlubGluZU1hcmtzRnJvbU9wdGlvbnMgfHwge30pW21hcmtdXTtcbiAgfSkpO1xuICBpZiAob3B0aW9ucy5raW5kID09PSAnaW5saW5lJykge1xuICAgIHZhciBfb3B0aW9ucyRmb3JtYXR0aW5nOTtcbiAgICByZXR1cm4ge1xuICAgICAga2luZDogJ2lubGluZScsXG4gICAgICBpbmxpbmVNYXJrcyxcbiAgICAgIGRvY3VtZW50RmVhdHVyZXM6IHtcbiAgICAgICAgbGlua3M6IG9wdGlvbnMubGlua3MgPT09ICdpbmhlcml0J1xuICAgICAgfSxcbiAgICAgIHNvZnRCcmVha3M6ICgoX29wdGlvbnMkZm9ybWF0dGluZzkgPSBvcHRpb25zLmZvcm1hdHRpbmcpID09PSBudWxsIHx8IF9vcHRpb25zJGZvcm1hdHRpbmc5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3B0aW9ucyRmb3JtYXR0aW5nOS5zb2Z0QnJlYWtzKSA9PT0gJ2luaGVyaXQnXG4gICAgfTtcbiAgfVxuICBjb25zdCBoZWFkaW5nTGV2ZWxzID0gKF9vcHRpb25zJGZvcm1hdHRpbmcxMCA9IG9wdGlvbnMuZm9ybWF0dGluZykgPT09IG51bGwgfHwgX29wdGlvbnMkZm9ybWF0dGluZzEwID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3B0aW9ucyRmb3JtYXR0aW5nMTAuaGVhZGluZ0xldmVscztcbiAgcmV0dXJuIHtcbiAgICBraW5kOiAnYmxvY2snLFxuICAgIGlubGluZU1hcmtzLFxuICAgIHNvZnRCcmVha3M6ICgoX29wdGlvbnMkZm9ybWF0dGluZzExID0gb3B0aW9ucy5mb3JtYXR0aW5nKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRmb3JtYXR0aW5nMTEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRpb25zJGZvcm1hdHRpbmcxMS5zb2Z0QnJlYWtzKSA9PT0gJ2luaGVyaXQnLFxuICAgIGRvY3VtZW50RmVhdHVyZXM6IHtcbiAgICAgIGxheW91dHM6IFtdLFxuICAgICAgZGl2aWRlcnM6IG9wdGlvbnMuZGl2aWRlcnMgPT09ICdpbmhlcml0JyA/IGVkaXRvckRvY3VtZW50RmVhdHVyZXMuZGl2aWRlcnMgOiBmYWxzZSxcbiAgICAgIGZvcm1hdHRpbmc6IHtcbiAgICAgICAgYWxpZ25tZW50OiAoKF9vcHRpb25zJGZvcm1hdHRpbmcxMiA9IG9wdGlvbnMuZm9ybWF0dGluZykgPT09IG51bGwgfHwgX29wdGlvbnMkZm9ybWF0dGluZzEyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3B0aW9ucyRmb3JtYXR0aW5nMTIuYWxpZ25tZW50KSA9PT0gJ2luaGVyaXQnID8gZWRpdG9yRG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmFsaWdubWVudCA6IHtcbiAgICAgICAgICBjZW50ZXI6IGZhbHNlLFxuICAgICAgICAgIGVuZDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgYmxvY2tUeXBlczogKChfb3B0aW9ucyRmb3JtYXR0aW5nMTMgPSBvcHRpb25zLmZvcm1hdHRpbmcpID09PSBudWxsIHx8IF9vcHRpb25zJGZvcm1hdHRpbmcxMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29wdGlvbnMkZm9ybWF0dGluZzEzLmJsb2NrVHlwZXMpID09PSAnaW5oZXJpdCcgPyBlZGl0b3JEb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuYmxvY2tUeXBlcyA6IHtcbiAgICAgICAgICBibG9ja3F1b3RlOiBmYWxzZSxcbiAgICAgICAgICBjb2RlOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBoZWFkaW5nczogaGVhZGluZ0xldmVscyA9PT0gJ2luaGVyaXQnID8gZWRpdG9yRG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmhlYWRpbmdzIDoge1xuICAgICAgICAgIGxldmVsczogaGVhZGluZ0xldmVscyA/IGVkaXRvckRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5oZWFkaW5ncy5sZXZlbHMuZmlsdGVyKGxldmVsID0+IGhlYWRpbmdMZXZlbHMuaW5jbHVkZXMobGV2ZWwpKSA6IFtdLFxuICAgICAgICAgIHNjaGVtYTogZWRpdG9yRG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmhlYWRpbmdzLnNjaGVtYVxuICAgICAgICB9LFxuICAgICAgICBsaXN0VHlwZXM6ICgoX29wdGlvbnMkZm9ybWF0dGluZzE0ID0gb3B0aW9ucy5mb3JtYXR0aW5nKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRmb3JtYXR0aW5nMTQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRpb25zJGZvcm1hdHRpbmcxNC5saXN0VHlwZXMpID09PSAnaW5oZXJpdCcgPyBlZGl0b3JEb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcubGlzdFR5cGVzIDoge1xuICAgICAgICAgIG9yZGVyZWQ6IGZhbHNlLFxuICAgICAgICAgIHVub3JkZXJlZDogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGxpbmtzOiBvcHRpb25zLmxpbmtzID09PSAnaW5oZXJpdCcsXG4gICAgICBpbWFnZXM6IG9wdGlvbnMuaW1hZ2VzID09PSAnaW5oZXJpdCcgPyBlZGl0b3JEb2N1bWVudEZlYXR1cmVzLmltYWdlcyA6IGZhbHNlLFxuICAgICAgdGFibGVzOiBvcHRpb25zLnRhYmxlcyA9PT0gJ2luaGVyaXQnXG4gICAgfSxcbiAgICBjb21wb25lbnRCbG9ja3M6IG9wdGlvbnMuY29tcG9uZW50QmxvY2tzID09PSAnaW5oZXJpdCdcbiAgfTtcbn1cbmZ1bmN0aW9uIGdldFNjaGVtYUF0UHJvcFBhdGhJbm5lcihwYXRoLCB2YWx1ZSwgc2NoZW1hKSB7XG4gIC8vIGJlY2F1c2Ugd2UncmUgY2hlY2tpbmcgdGhlIGxlbmd0aCBoZXJlXG4gIC8vIHRoZSBub24tbnVsbCBhc3NlcnRzIG9uIHNoaWZ0IGJlbG93IGFyZSBmaW5lXG4gIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBzY2hlbWE7XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnY2hpbGQnIHx8IHNjaGVtYS5raW5kID09PSAnZm9ybScpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnY29uZGl0aW9uYWwnKSB7XG4gICAgY29uc3Qga2V5ID0gcGF0aC5zaGlmdCgpO1xuICAgIGlmIChrZXkgPT09ICdkaXNjcmltaW5hbnQnKSB7XG4gICAgICByZXR1cm4gZ2V0U2NoZW1hQXRQcm9wUGF0aElubmVyKHBhdGgsIHZhbHVlLmRpc2NyaW1pbmFudCwgc2NoZW1hLmRpc2NyaW1pbmFudCk7XG4gICAgfVxuICAgIGlmIChrZXkgPT09ICd2YWx1ZScpIHtcbiAgICAgIGNvbnN0IHByb3BWYWwgPSBzY2hlbWEudmFsdWVzW3ZhbHVlLmRpc2NyaW1pbmFudF07XG4gICAgICByZXR1cm4gZ2V0U2NoZW1hQXRQcm9wUGF0aElubmVyKHBhdGgsIHZhbHVlLnZhbHVlLCBwcm9wVmFsKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChzY2hlbWEua2luZCA9PT0gJ29iamVjdCcpIHtcbiAgICBjb25zdCBrZXkgPSBwYXRoLnNoaWZ0KCk7XG4gICAgcmV0dXJuIGdldFNjaGVtYUF0UHJvcFBhdGhJbm5lcihwYXRoLCB2YWx1ZVtrZXldLCBzY2hlbWEuZmllbGRzW2tleV0pO1xuICB9XG4gIGlmIChzY2hlbWEua2luZCA9PT0gJ2FycmF5Jykge1xuICAgIGNvbnN0IGluZGV4ID0gcGF0aC5zaGlmdCgpO1xuICAgIHJldHVybiBnZXRTY2hlbWFBdFByb3BQYXRoSW5uZXIocGF0aCwgdmFsdWVbaW5kZXhdLCBzY2hlbWEuZWxlbWVudCk7XG4gIH1cbiAgYXNzZXJ0TmV2ZXIoc2NoZW1hKTtcbn1cbmZ1bmN0aW9uIGdldFNjaGVtYUF0UHJvcFBhdGgocGF0aCwgdmFsdWUsIHByb3BzKSB7XG4gIHJldHVybiBnZXRTY2hlbWFBdFByb3BQYXRoSW5uZXIoWy4uLnBhdGhdLCB2YWx1ZSwge1xuICAgIGtpbmQ6ICdvYmplY3QnLFxuICAgIGZpZWxkczogcHJvcHNcbiAgfSk7XG59XG5mdW5jdGlvbiBnZXRBbmNlc3RvclNjaGVtYXMocm9vdFNjaGVtYSwgcGF0aCwgdmFsdWUpIHtcbiAgY29uc3QgYW5jZXN0b3JzID0gW107XG4gIGNvbnN0IGN1cnJlbnRQYXRoID0gWy4uLnBhdGhdO1xuICBsZXQgY3VycmVudFByb3AgPSByb290U2NoZW1hO1xuICBsZXQgY3VycmVudFZhbHVlID0gdmFsdWU7XG4gIHdoaWxlIChjdXJyZW50UGF0aC5sZW5ndGgpIHtcbiAgICBhbmNlc3RvcnMucHVzaChjdXJyZW50UHJvcCk7XG4gICAgY29uc3Qga2V5ID0gY3VycmVudFBhdGguc2hpZnQoKTsgLy8gdGhpcyBjb2RlIG9ubHkgcnVucyB3aGVuIHBhdGgubGVuZ3RoIGlzIHRydXRoeSBzbyB0aGlzIG5vbi1udWxsIGFzc2VydGlvbiBpcyBmaW5lXG4gICAgaWYgKGN1cnJlbnRQcm9wLmtpbmQgPT09ICdhcnJheScpIHtcbiAgICAgIGN1cnJlbnRQcm9wID0gY3VycmVudFByb3AuZWxlbWVudDtcbiAgICAgIGN1cnJlbnRWYWx1ZSA9IGN1cnJlbnRWYWx1ZVtrZXldO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudFByb3Aua2luZCA9PT0gJ2NvbmRpdGlvbmFsJykge1xuICAgICAgY3VycmVudFByb3AgPSBjdXJyZW50UHJvcC52YWx1ZXNbdmFsdWUuZGlzY3JpbWluYW50XTtcbiAgICAgIGN1cnJlbnRWYWx1ZSA9IGN1cnJlbnRWYWx1ZS52YWx1ZTtcbiAgICB9IGVsc2UgaWYgKGN1cnJlbnRQcm9wLmtpbmQgPT09ICdvYmplY3QnKSB7XG4gICAgICBjdXJyZW50VmFsdWUgPSBjdXJyZW50VmFsdWVba2V5XTtcbiAgICAgIGN1cnJlbnRQcm9wID0gY3VycmVudFByb3AuZmllbGRzW2tleV07XG4gICAgfSBlbHNlIGlmIChjdXJyZW50UHJvcC5raW5kID09PSAnY2hpbGQnIHx8IGN1cnJlbnRQcm9wLmtpbmQgPT09ICdmb3JtJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGB1bmV4cGVjdGVkIHByb3AgXCIke2tleX1cImApO1xuICAgIH0gZWxzZSB7XG4gICAgICBhc3NlcnROZXZlcihjdXJyZW50UHJvcCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBhbmNlc3RvcnM7XG59XG5mdW5jdGlvbiBnZXRQbGFjZWhvbGRlclRleHRGb3JQcm9wUGF0aChwcm9wUGF0aCwgZmllbGRzLCBmb3JtUHJvcHMpIHtcbiAgY29uc3QgZmllbGQgPSBnZXRTY2hlbWFBdFByb3BQYXRoKHByb3BQYXRoLCBmb3JtUHJvcHMsIGZpZWxkcyk7XG4gIGlmICgoZmllbGQgPT09IG51bGwgfHwgZmllbGQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZpZWxkLmtpbmQpID09PSAnY2hpbGQnICYmIChmaWVsZC5vcHRpb25zLmtpbmQgPT09ICdibG9jaycgJiYgZmllbGQub3B0aW9ucy5lZGl0SW4gIT09ICdtb2RhbCcgfHwgZmllbGQub3B0aW9ucy5raW5kID09PSAnaW5saW5lJykpIHtcbiAgICByZXR1cm4gZmllbGQub3B0aW9ucy5wbGFjZWhvbGRlcjtcbiAgfVxuICByZXR1cm4gJyc7XG59XG5mdW5jdGlvbiBjbG9uZURlc2NlbmRlbnQobm9kZSkge1xuICBpZiAoRWxlbWVudCQxLmlzRWxlbWVudChub2RlKSkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5ub2RlLFxuICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4ubWFwKGNsb25lRGVzY2VuZGVudClcbiAgICB9O1xuICB9XG4gIHJldHVybiB7XG4gICAgLi4ubm9kZVxuICB9O1xufVxuXG5jb25zdCBhbGxNYXJrcyA9IFsnYm9sZCcsICdpdGFsaWMnLCAndW5kZXJsaW5lJywgJ3N0cmlrZXRocm91Z2gnLCAnY29kZScsICdzdXBlcnNjcmlwdCcsICdzdWJzY3JpcHQnLCAna2V5Ym9hcmQnXTtcbmNvbnN0IGlzRWxlbWVudEFjdGl2ZSA9IChlZGl0b3IsIGZvcm1hdCkgPT4ge1xuICBjb25zdCBbbWF0Y2hdID0gRWRpdG9yLm5vZGVzKGVkaXRvciwge1xuICAgIG1hdGNoOiBuID0+IG4udHlwZSA9PT0gZm9ybWF0XG4gIH0pO1xuICByZXR1cm4gISFtYXRjaDtcbn07XG5mdW5jdGlvbiBjbGVhckZvcm1hdHRpbmcoZWRpdG9yKSB7XG4gIFRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgbWF0Y2g6IG5vZGUgPT4gbm9kZS50eXBlID09PSAnaGVhZGluZycgfHwgbm9kZS50eXBlID09PSAnYmxvY2txdW90ZScgfHwgbm9kZS50eXBlID09PSAnY29kZSdcbiAgfSk7XG4gIFRyYW5zZm9ybXMudW5zZXROb2RlcyhlZGl0b3IsIGFsbE1hcmtzLCB7XG4gICAgbWF0Y2g6IFRleHQkMS5pc1RleHRcbiAgfSk7XG59XG5mdW5jdGlvbiBtb3ZlQ2hpbGRyZW4oZWRpdG9yLCBwYXJlbnQsIHRvLCBzaG91bGRNb3ZlTm9kZSA9ICgpID0+IHRydWUpIHtcbiAgY29uc3QgcGFyZW50UGF0aCA9IFBhdGguaXNQYXRoKHBhcmVudCkgPyBwYXJlbnQgOiBwYXJlbnRbMV07XG4gIGNvbnN0IHBhcmVudE5vZGUgPSBQYXRoLmlzUGF0aChwYXJlbnQpID8gTm9kZS5nZXQoZWRpdG9yLCBwYXJlbnRQYXRoKSA6IHBhcmVudFswXTtcbiAgaWYgKCFpc0Jsb2NrKHBhcmVudE5vZGUpKSByZXR1cm47XG4gIGZvciAobGV0IGkgPSBwYXJlbnROb2RlLmNoaWxkcmVuLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgaWYgKHNob3VsZE1vdmVOb2RlKHBhcmVudE5vZGUuY2hpbGRyZW5baV0sIGkpKSB7XG4gICAgICBjb25zdCBjaGlsZFBhdGggPSBbLi4ucGFyZW50UGF0aCwgaV07XG4gICAgICBUcmFuc2Zvcm1zLm1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgYXQ6IGNoaWxkUGF0aCxcbiAgICAgICAgdG9cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byBFZGl0b3IuYWZ0ZXIgZXhjZXB0IHRoYXQgaXQgaWdub3JlcyBwb2ludHMgdGhhdCBoYXZlIG5vIGNvbnRlbnRcbiAqIGxpa2UgdGhlIHBvaW50IGluIGEgdm9pZCB0ZXh0IG5vZGUsIGFuIGVtcHR5IHRleHQgbm9kZSBhbmQgdGhlIGxhc3QgcG9pbnQgaW4gYSB0ZXh0IG5vZGVcbiAqL1xuLy8gVE9ETzogdGhpcyB3b3VsZCBwcm9iYWJseSBicmVhayBpZiB5b3Ugd2VyZSB0cnlpbmcgdG8gZ2V0IHRoZSBsYXN0IHBvaW50IGluIHRoZSBlZGl0b3I/XG5mdW5jdGlvbiBFZGl0b3JBZnRlckJ1dElnbm9yaW5naW5nUG9pbnRzV2l0aE5vQ29udGVudChlZGl0b3IsIGF0LCB7XG4gIGRpc3RhbmNlID0gMVxufSA9IHt9KSB7XG4gIGNvbnN0IGFuY2hvciA9IEVkaXRvci5wb2ludChlZGl0b3IsIGF0LCB7XG4gICAgZWRnZTogJ2VuZCdcbiAgfSk7XG4gIGNvbnN0IGZvY3VzID0gRWRpdG9yLmVuZChlZGl0b3IsIFtdKTtcbiAgY29uc3QgcmFuZ2UgPSB7XG4gICAgYW5jaG9yLFxuICAgIGZvY3VzXG4gIH07XG4gIGxldCBkID0gMDtcbiAgbGV0IHRhcmdldDtcbiAgZm9yIChjb25zdCBwIG9mIEVkaXRvci5wb3NpdGlvbnMoZWRpdG9yLCB7XG4gICAgYXQ6IHJhbmdlXG4gIH0pKSB7XG4gICAgaWYgKGQgPiBkaXN0YW5jZSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgLy8gdGhpcyBpcyB0aGUgaW1wb3J0YW50IGNoYW5nZVxuICAgIGNvbnN0IG5vZGUgPSBOb2RlLmdldChlZGl0b3IsIHAucGF0aCk7XG4gICAgaWYgKG5vZGUudGV4dC5sZW5ndGggPT09IHAub2Zmc2V0KSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGQgIT09IDApIHtcbiAgICAgIHRhcmdldCA9IHA7XG4gICAgfVxuICAgIGQrKztcbiAgfVxuICByZXR1cm4gdGFyZ2V0O1xufVxuZnVuY3Rpb24gbm9kZVR5cGVNYXRjaGVyKC4uLmFyZ3MpIHtcbiAgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgY29uc3QgdHlwZSA9IGFyZ3NbMF07XG4gICAgcmV0dXJuIG5vZGUgPT4gbm9kZS50eXBlID09PSB0eXBlO1xuICB9XG4gIGNvbnN0IHNldCA9IG5ldyBTZXQoYXJncyk7XG4gIHJldHVybiBub2RlID0+IHR5cGVvZiBub2RlLnR5cGUgPT09ICdzdHJpbmcnICYmIHNldC5oYXMobm9kZS50eXBlKTtcbn1cbmZ1bmN0aW9uIGdldEFuY2VzdG9yQ29tcG9uZW50Q2hpbGRGaWVsZERvY3VtZW50RmVhdHVyZXMoZWRpdG9yLCBlZGl0b3JEb2N1bWVudEZlYXR1cmVzLCBjb21wb25lbnRCbG9ja3MpIHtcbiAgY29uc3QgYW5jZXN0b3JDb21wb25lbnRQcm9wID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgIG1hdGNoOiBub2RlVHlwZU1hdGNoZXIoJ2NvbXBvbmVudC1ibG9jay1wcm9wJywgJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCcpXG4gIH0pO1xuICBpZiAoYW5jZXN0b3JDb21wb25lbnRQcm9wKSB7XG4gICAgY29uc3QgcHJvcFBhdGggPSBhbmNlc3RvckNvbXBvbmVudFByb3BbMF0ucHJvcFBhdGg7XG4gICAgY29uc3QgYW5jZXN0b3JDb21wb25lbnQgPSBFZGl0b3IucGFyZW50KGVkaXRvciwgYW5jZXN0b3JDb21wb25lbnRQcm9wWzFdKTtcbiAgICBpZiAoYW5jZXN0b3JDb21wb25lbnRbMF0udHlwZSA9PT0gJ2NvbXBvbmVudC1ibG9jaycpIHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IGFuY2VzdG9yQ29tcG9uZW50WzBdLmNvbXBvbmVudDtcbiAgICAgIGNvbnN0IGNvbXBvbmVudEJsb2NrID0gY29tcG9uZW50QmxvY2tzW2NvbXBvbmVudF07XG4gICAgICBpZiAoY29tcG9uZW50QmxvY2sgJiYgcHJvcFBhdGgpIHtcbiAgICAgICAgY29uc3QgY2hpbGRGaWVsZCA9IGdldFNjaGVtYUF0UHJvcFBhdGgocHJvcFBhdGgsIGFuY2VzdG9yQ29tcG9uZW50WzBdLnByb3BzLCBjb21wb25lbnRCbG9jay5zY2hlbWEpO1xuICAgICAgICBpZiAoKGNoaWxkRmllbGQgPT09IG51bGwgfHwgY2hpbGRGaWVsZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2hpbGRGaWVsZC5raW5kKSA9PT0gJ2NoaWxkJykge1xuICAgICAgICAgIHJldHVybiBnZXREb2N1bWVudEZlYXR1cmVzRm9yQ2hpbGRGaWVsZChlZGl0b3JEb2N1bWVudEZlYXR1cmVzLCBjaGlsZEZpZWxkLm9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IEJsb2NrUG9wb3ZlckNvbnRleHQgPSAvKiNfX1BVUkVfXyovY3JlYXRlQ29udGV4dChudWxsKTtcbmZ1bmN0aW9uIHVzZUJsb2NrUG9wb3ZlckNvbnRleHQoKSB7XG4gIGNvbnN0IGNvbnRleHQgPSB1c2VDb250ZXh0KEJsb2NrUG9wb3ZlckNvbnRleHQpO1xuICBpZiAoIWNvbnRleHQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZUJsb2NrUG9wb3ZlckNvbnRleHQgbXVzdCBiZSB1c2VkIHdpdGhpbiBhIEJsb2NrUG9wb3ZlclRyaWdnZXInKTtcbiAgfVxuICByZXR1cm4gY29udGV4dDtcbn1cbmNvbnN0IHR5cGVNYXRjaGVyID0gbm9kZVR5cGVNYXRjaGVyKCdjb2RlJywgJ2NvbXBvbmVudC1ibG9jaycsICdpbWFnZScsICdsYXlvdXQnLCAnbGluaycsICd0YWJsZScsICdoZWFkaW5nJyk7XG5jb25zdCBBY3RpdmVCbG9ja1BvcG92ZXJDb250ZXh0ID0gLyojX19QVVJFX18qL2NyZWF0ZUNvbnRleHQodW5kZWZpbmVkKTtcbmZ1bmN0aW9uIHVzZUFjdGl2ZUJsb2NrUG9wb3ZlcigpIHtcbiAgcmV0dXJuIHVzZUNvbnRleHQoQWN0aXZlQmxvY2tQb3BvdmVyQ29udGV4dCk7XG59XG5mdW5jdGlvbiBBY3RpdmVCbG9ja1BvcG92ZXJQcm92aWRlcihwcm9wcykge1xuICBjb25zdCBub2RlV2l0aFBvcG92ZXIgPSBFZGl0b3IuYWJvdmUocHJvcHMuZWRpdG9yLCB7XG4gICAgbWF0Y2g6IHR5cGVNYXRjaGVyXG4gIH0pO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChBY3RpdmVCbG9ja1BvcG92ZXJDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IG5vZGVXaXRoUG9wb3ZlciA9PT0gbnVsbCB8fCBub2RlV2l0aFBvcG92ZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG5vZGVXaXRoUG9wb3ZlclswXSxcbiAgICBjaGlsZHJlbjogcHJvcHMuY2hpbGRyZW5cbiAgfSk7XG59XG5jb25zdCBCbG9ja1BvcG92ZXJUcmlnZ2VyID0gKHtcbiAgY2hpbGRyZW4sXG4gIGVsZW1lbnRcbn0pID0+IHtcbiAgY29uc3QgW3RyaWdnZXIsIHBvcG92ZXJdID0gY2hpbGRyZW47XG4gIGNvbnN0IGFjdGl2ZVBvcG92ZXJFbGVtZW50ID0gdXNlQWN0aXZlQmxvY2tQb3BvdmVyKCk7XG4gIGNvbnN0IHRyaWdnZXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IHN0YXRlID0gdXNlT3ZlcmxheVRyaWdnZXJTdGF0ZSh7XG4gICAgaXNPcGVuOiBhY3RpdmVQb3BvdmVyRWxlbWVudCA9PT0gZWxlbWVudFxuICB9KTtcbiAgY29uc3QgY29udGV4dCA9IHVzZU1lbW8oKCkgPT4gKHtcbiAgICBzdGF0ZSxcbiAgICB0cmlnZ2VyUmVmXG4gIH0pLCBbc3RhdGUsIHRyaWdnZXJSZWZdKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3hzKEJsb2NrUG9wb3ZlckNvbnRleHQuUHJvdmlkZXIsIHtcbiAgICB2YWx1ZTogY29udGV4dCxcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9jbG9uZUVsZW1lbnQodHJpZ2dlciwge1xuICAgICAgcmVmOiB0cmlnZ2VyUmVmXG4gICAgfSksIHBvcG92ZXJdXG4gIH0pO1xufTtcbmZ1bmN0aW9uIEJsb2NrUG9wb3Zlcihwcm9wcykge1xuICBjb25zdCB7XG4gICAgc3RhdGVcbiAgfSA9IHVzZUJsb2NrUG9wb3ZlckNvbnRleHQoKTtcbiAgbGV0IHdyYXBwZXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gIHJldHVybiAoXG4gICAgLyojX19QVVJFX18qL1xuICAgIC8qIEB0cy1leHBlY3QtZXJyb3IgRklYTUU6IHJlc29sdmUgcmVmIGluY29uc2lzdGVuY2llcyAqL1xuICAgIGpzeChPdmVybGF5LCB7XG4gICAgICBpc09wZW46IHN0YXRlLmlzT3BlbixcbiAgICAgIG5vZGVSZWY6IHdyYXBwZXJSZWYsXG4gICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChCbG9ja1BvcG92ZXJXcmFwcGVyLCB7XG4gICAgICAgIHdyYXBwZXJSZWY6IHdyYXBwZXJSZWYsXG4gICAgICAgIC4uLnByb3BzXG4gICAgICB9KVxuICAgIH0pXG4gICk7XG59XG5jb25zdCBCbG9ja1BvcG92ZXJXcmFwcGVyID0gKHtcbiAgY2hpbGRyZW4sXG4gIHBsYWNlbWVudDogcHJlZmVycmVkUGxhY2VtZW50ID0gJ2JvdHRvbSdcbn0pID0+IHtcbiAgbGV0IHBvcG92ZXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGxldCB7XG4gICAgc3RhdGUsXG4gICAgdHJpZ2dlclJlZlxuICB9ID0gdXNlQmxvY2tQb3BvdmVyQ29udGV4dCgpO1xuICBsZXQge1xuICAgIHBsYWNlbWVudCxcbiAgICBwb3BvdmVyUHJvcHNcbiAgfSA9IHVzZUJsb2NrUG9wb3Zlcih7XG4gICAgaXNOb25Nb2RhbDogdHJ1ZSxcbiAgICBpc0tleWJvYXJkRGlzbWlzc0Rpc2FibGVkOiBmYWxzZSxcbiAgICBwbGFjZW1lbnQ6IHByZWZlcnJlZFBsYWNlbWVudCxcbiAgICB0cmlnZ2VyUmVmLFxuICAgIHBvcG92ZXJSZWZcbiAgfSwgc3RhdGUpO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChcImRpdlwiLCB7XG4gICAgcmVmOiBwb3BvdmVyUmVmLFxuICAgIC4uLnBvcG92ZXJQcm9wcyxcbiAgICBcImRhdGEtb3BlblwiOiBzdGF0ZS5pc09wZW4sXG4gICAgXCJkYXRhLXBsYWNlbWVudFwiOiBwbGFjZW1lbnQsXG4gICAgY29udGVudEVkaXRhYmxlOiBmYWxzZSxcbiAgICBjbGFzc05hbWU6IGNzcyh7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRva2VuU2NoZW1hLmNvbG9yLmJhY2tncm91bmQuc3VyZmFjZSxcbiAgICAgIC8vIFRPRE86IGNvbXBvbmVudCB0b2tlbj9cbiAgICAgIGJvcmRlclJhZGl1czogdG9rZW5TY2hlbWEuc2l6ZS5yYWRpdXMubWVkaXVtLFxuICAgICAgLy8gVE9ETzogY29tcG9uZW50IHRva2VuP1xuICAgICAgYm9yZGVyOiBgJHt0b2tlblNjaGVtYS5zaXplLmJvcmRlci5yZWd1bGFyfSBzb2xpZCAke3Rva2VuU2NoZW1hLmNvbG9yLmJvcmRlci5lbXBoYXNpc31gLFxuICAgICAgYm94U2l6aW5nOiAnY29udGVudC1ib3gnLFxuICAgICAgLy8gcmVzb2x2ZXMgbWVhc3VyZW1lbnQvc2Nyb2xsIGlzc3VlcyByZWxhdGVkIHRvIGJvcmRlclxuICAgICAgLy8gYm94U2hhZG93OiBgMCAwIDAgJHt0b2tlblNjaGVtYS5zaXplLmJvcmRlci5yZWd1bGFyfSAke3Rva2VuU2NoZW1hLmNvbG9yLmJvcmRlci5lbXBoYXNpc31gLFxuICAgICAgbWluSGVpZ2h0OiB0b2tlblNjaGVtYS5zaXplLmVsZW1lbnQucmVndWxhcixcbiAgICAgIG1pbldpZHRoOiB0b2tlblNjaGVtYS5zaXplLmVsZW1lbnQucmVndWxhcixcbiAgICAgIG9wYWNpdHk6IDAsXG4gICAgICBvdXRsaW5lOiAwLFxuICAgICAgcG9pbnRlckV2ZW50czogJ2F1dG8nLFxuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAvLyB1c2UgZmlsdGVyOmRyb3Atc2hhZG93IGluc3RlYWQgb2YgYm94LXNoYWRvdyBzbyB0aGUgYXJyb3cgaXMgaW5jbHVkZWRcbiAgICAgIGZpbHRlcjogYGRyb3Atc2hhZG93KDAgMXB4IDRweCAke3Rva2VuU2NoZW1hLmNvbG9yLnNoYWRvdy5yZWd1bGFyfSlgLFxuICAgICAgLy8gZmlsdGVyIGJ1ZyBpbiBzYWZhcmk6IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzU2NDc4OTI1L3NhZmFyaS1kcm9wLXNoYWRvdy1maWx0ZXItcmVtYWlucy12aXNpYmxlLWV2ZW4td2l0aC1oaWRkZW4tZWxlbWVudFxuICAgICAgd2lsbENoYW5nZTogJ2ZpbHRlcicsXG4gICAgICB1c2VyU2VsZWN0OiAnbm9uZScsXG4gICAgICAvLyBwbGFjZW1lbnRcbiAgICAgICcmW2RhdGEtcGxhY2VtZW50PVwidG9wXCJdJzoge1xuICAgICAgICBtYXJnaW5Cb3R0b206IHRva2VuU2NoZW1hLnNpemUuc3BhY2UucmVndWxhcixcbiAgICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlWSgke3Rva2VuU2NoZW1hLnNpemUuc3BhY2UucmVndWxhcn0pYFxuICAgICAgfSxcbiAgICAgICcmW2RhdGEtcGxhY2VtZW50PVwiYm90dG9tXCJdJzoge1xuICAgICAgICBtYXJnaW5Ub3A6IHRva2VuU2NoZW1hLnNpemUuc3BhY2UucmVndWxhcixcbiAgICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlWShjYWxjKCR7dG9rZW5TY2hlbWEuc2l6ZS5zcGFjZS5yZWd1bGFyfSAqIC0xKSlgXG4gICAgICB9LFxuICAgICAgJyZbZGF0YS1vcGVuPVwidHJ1ZVwiXSc6IHtcbiAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlWCgwKSB0cmFuc2xhdGVZKDApYCxcbiAgICAgICAgLy8gZW50ZXIgYW5pbWF0aW9uXG4gICAgICAgIHRyYW5zaXRpb246IHRyYW5zaXRpb24oWydvcGFjaXR5JywgJ3RyYW5zZm9ybSddLCB7XG4gICAgICAgICAgZWFzaW5nOiAnZWFzZU91dCdcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KSxcbiAgICBjaGlsZHJlbjogdHlwZW9mIGNoaWxkcmVuID09PSAnZnVuY3Rpb24nID8gY2hpbGRyZW4oc3RhdGUuY2xvc2UpIDogY2hpbGRyZW5cbiAgfSk7XG59O1xuXG4vKipcbiAqIFByb3ZpZGVzIHRoZSBiZWhhdmlvciBhbmQgYWNjZXNzaWJpbGl0eSBpbXBsZW1lbnRhdGlvbiBmb3IgYSBwb3BvdmVyIGNvbXBvbmVudC5cbiAqIEEgcG9wb3ZlciBpcyBhbiBvdmVybGF5IGVsZW1lbnQgcG9zaXRpb25lZCByZWxhdGl2ZSB0byBhIHRyaWdnZXIuXG4gKi9cbmZ1bmN0aW9uIHVzZUJsb2NrUG9wb3Zlcihwcm9wcywgc3RhdGUpIHtcbiAgdmFyIF90cmlnZ2VyUmVmJGN1cnJlbnQyO1xuICBsZXQge1xuICAgIHRyaWdnZXJSZWYsXG4gICAgcG9wb3ZlclJlZixcbiAgICBpc05vbk1vZGFsLFxuICAgIGlzS2V5Ym9hcmREaXNtaXNzRGlzYWJsZWQsXG4gICAgLi4ub3RoZXJQcm9wc1xuICB9ID0gcHJvcHM7XG4gIGxldCBbaXNTdGlja3ksIHNldFN0aWNreV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGxldCB7XG4gICAgb3ZlcmxheVByb3BzLFxuICAgIHVuZGVybGF5UHJvcHNcbiAgfSA9IHVzZU92ZXJsYXkoe1xuICAgIGlzT3Blbjogc3RhdGUuaXNPcGVuLFxuICAgIG9uQ2xvc2U6IHN0YXRlLmNsb3NlLFxuICAgIHNob3VsZENsb3NlT25CbHVyOiB0cnVlLFxuICAgIGlzRGlzbWlzc2FibGU6ICFpc05vbk1vZGFsLFxuICAgIGlzS2V5Ym9hcmREaXNtaXNzRGlzYWJsZWQ6IGZhbHNlXG4gIH0sIHBvcG92ZXJSZWYpO1xuXG4gIC8vIHN0aWNrIHRoZSBwb3BvdmVyIHRvIHRoZSBib3R0b20gb2YgdGhlIHZpZXdwb3J0IGluc3RlYWQgb2YgZmxpcHBpbmdcbiAgY29uc3QgY29udGFpbmVyUGFkZGluZyA9IDg7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHN0YXRlLmlzT3Blbikge1xuICAgICAgY29uc3QgY2hlY2tGb3JTdGlja2luZXNzID0gKCkgPT4ge1xuICAgICAgICB2YXIgX3BvcG92ZXJSZWYkY3VycmVudCwgX3RyaWdnZXJSZWYkY3VycmVudDtcbiAgICAgICAgY29uc3QgdmggPSBNYXRoLm1heChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IHx8IDAsIHdpbmRvdy5pbm5lckhlaWdodCB8fCAwKTtcbiAgICAgICAgbGV0IHBvcG92ZXJSZWN0ID0gKF9wb3BvdmVyUmVmJGN1cnJlbnQgPSBwb3BvdmVyUmVmLmN1cnJlbnQpID09PSBudWxsIHx8IF9wb3BvdmVyUmVmJGN1cnJlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wb3BvdmVyUmVmJGN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGxldCB0cmlnZ2VyUmVjdCA9IChfdHJpZ2dlclJlZiRjdXJyZW50ID0gdHJpZ2dlclJlZi5jdXJyZW50KSA9PT0gbnVsbCB8fCBfdHJpZ2dlclJlZiRjdXJyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdHJpZ2dlclJlZiRjdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBpZiAocG9wb3ZlclJlY3QgJiYgdHJpZ2dlclJlY3QpIHtcbiAgICAgICAgICBzZXRTdGlja3kodHJpZ2dlclJlY3QuYm90dG9tICsgcG9wb3ZlclJlY3QuaGVpZ2h0ICsgY29udGFpbmVyUGFkZGluZyAqIDIgPiB2aCAmJiB0cmlnZ2VyUmVjdC50b3AgPCB2aCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBjaGVja0ZvclN0aWNraW5lc3MoKTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBjaGVja0ZvclN0aWNraW5lc3MpO1xuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgY2hlY2tGb3JTdGlja2luZXNzKCk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBjaGVja0ZvclN0aWNraW5lc3MpO1xuICAgICAgfTtcbiAgICB9XG4gIH0sIFtwb3BvdmVyUmVmLCB0cmlnZ2VyUmVmLCBzdGF0ZS5pc09wZW5dKTtcbiAgbGV0IHtcbiAgICBvdmVybGF5UHJvcHM6IHBvc2l0aW9uUHJvcHMsXG4gICAgYXJyb3dQcm9wcyxcbiAgICBwbGFjZW1lbnQsXG4gICAgdXBkYXRlUG9zaXRpb25cbiAgfSA9IHVzZU92ZXJsYXlQb3NpdGlvbih7XG4gICAgLi4ub3RoZXJQcm9wcyxcbiAgICBjb250YWluZXJQYWRkaW5nLFxuICAgIHNob3VsZEZsaXA6IGZhbHNlLFxuICAgIHRhcmdldFJlZjogdHJpZ2dlclJlZixcbiAgICBvdmVybGF5UmVmOiBwb3BvdmVyUmVmLFxuICAgIGlzT3Blbjogc3RhdGUuaXNPcGVuLFxuICAgIG9uQ2xvc2U6IHVuZGVmaW5lZFxuICB9KTtcblxuICAvLyBmb3JjZSB1cGRhdGUgcG9zaXRpb24gd2hlbiB0aGUgdHJpZ2dlciBjaGFuZ2VzXG4gIGxldCBwcmV2aW91c0JvdW5kaW5nUmVjdCA9IHVzZVByZXZpb3VzKChfdHJpZ2dlclJlZiRjdXJyZW50MiA9IHRyaWdnZXJSZWYuY3VycmVudCkgPT09IG51bGwgfHwgX3RyaWdnZXJSZWYkY3VycmVudDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90cmlnZ2VyUmVmJGN1cnJlbnQyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKTtcbiAgdXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBpZiAocHJldmlvdXNCb3VuZGluZ1JlY3QpIHtcbiAgICAgIHZhciBfdHJpZ2dlclJlZiRjdXJyZW50MztcbiAgICAgIGNvbnN0IGN1cnJlbnRCb3VuZGluZ1JlY3QgPSAoX3RyaWdnZXJSZWYkY3VycmVudDMgPSB0cmlnZ2VyUmVmLmN1cnJlbnQpID09PSBudWxsIHx8IF90cmlnZ2VyUmVmJGN1cnJlbnQzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdHJpZ2dlclJlZiRjdXJyZW50My5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGlmIChjdXJyZW50Qm91bmRpbmdSZWN0KSB7XG4gICAgICAgIGNvbnN0IGhhc0NoYW5nZWQgPSBwcmV2aW91c0JvdW5kaW5nUmVjdC5oZWlnaHQgIT09IGN1cnJlbnRCb3VuZGluZ1JlY3QuaGVpZ2h0IHx8IHByZXZpb3VzQm91bmRpbmdSZWN0LndpZHRoICE9PSBjdXJyZW50Qm91bmRpbmdSZWN0LndpZHRoIHx8IHByZXZpb3VzQm91bmRpbmdSZWN0LnggIT09IGN1cnJlbnRCb3VuZGluZ1JlY3QueCB8fCBwcmV2aW91c0JvdW5kaW5nUmVjdC55ICE9PSBjdXJyZW50Qm91bmRpbmdSZWN0Lnk7XG4gICAgICAgIGlmIChoYXNDaGFuZ2VkKSB7XG4gICAgICAgICAgdXBkYXRlUG9zaXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW3ByZXZpb3VzQm91bmRpbmdSZWN0LCB0cmlnZ2VyUmVmLCB1cGRhdGVQb3NpdGlvbl0pO1xuXG4gIC8vIG1ha2Ugc3VyZSBwb3BvdmVycyBhcmUgYmVsb3cgbW9kYWwgZGlhbG9ncyBhbmQgdGhlaXIgYmxhbmtldFxuICBpZiAocG9zaXRpb25Qcm9wcy5zdHlsZSkge1xuICAgIHBvc2l0aW9uUHJvcHMuc3R5bGUuekluZGV4ID0gMTtcbiAgfVxuXG4gIC8vIHN3aXRjaGluZyB0byBwb3NpdGlvbjogZml4ZWQgd2lsbCB1bmRvdWJ0ZWRseSBiaXRlIG1lIGxhdGVyLCBidXQgdGhpcyBoYWNrIHdvcmtzIGZvciBub3dcbiAgaWYgKGlzU3RpY2t5KSB7XG4gICAgcG9zaXRpb25Qcm9wcy5zdHlsZSA9IHtcbiAgICAgIC4uLnBvc2l0aW9uUHJvcHMuc3R5bGUsXG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICBtYXhIZWlnaHQ6IG51bGwsXG4gICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgIHRvcDogbnVsbCxcbiAgICAgIGJvdHRvbTogY29udGFpbmVyUGFkZGluZ1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBhcnJvd1Byb3BzLFxuICAgIHBsYWNlbWVudCxcbiAgICBwb3BvdmVyUHJvcHM6IG1lcmdlUHJvcHMob3ZlcmxheVByb3BzLCBwb3NpdGlvblByb3BzKSxcbiAgICB1bmRlcmxheVByb3BzLFxuICAgIHVwZGF0ZVBvc2l0aW9uXG4gIH07XG59XG5mdW5jdGlvbiB1c2VQcmV2aW91cyh2YWx1ZSkge1xuICBjb25zdCByZWYgPSB1c2VSZWYoKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZWYuY3VycmVudCA9IHZhbHVlO1xuICB9KTtcbiAgcmV0dXJuIHJlZi5jdXJyZW50O1xufVxuXG5jb25zdCBCbG9ja1dyYXBwZXIgPSBwcm9wcyA9PiB7XG4gIGxldCB7XG4gICAgYXR0cmlidXRlcyxcbiAgICBjaGlsZHJlbixcbiAgICBkcmFnZ2FibGUgPSBmYWxzZVxuICB9ID0gcHJvcHM7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFwiZGl2XCIsIHtcbiAgICBkcmFnZ2FibGU6IGRyYWdnYWJsZSxcbiAgICBjbGFzc05hbWU6IGJsb2NrRWxlbWVudFNwYWNpbmcsXG4gICAgLi4uYXR0cmlidXRlcyxcbiAgICBjaGlsZHJlbjogY2hpbGRyZW5cbiAgfSk7XG59O1xuXG5jb25zdCBOb3RFZGl0YWJsZSA9IC8qI19fUFVSRV9fKi9mb3J3YXJkUmVmKGZ1bmN0aW9uIE5vdEVkaXRhYmxlKHtcbiAgY2xhc3NOYW1lLFxuICAuLi5wcm9wc1xufSwgcmVmKSB7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFwiZGl2XCIsIHtcbiAgICAuLi5wcm9wcyxcbiAgICByZWY6IHJlZixcbiAgICBjbGFzc05hbWU6IFtjc3Moe1xuICAgICAgdXNlclNlbGVjdDogJ25vbmUnLFxuICAgICAgd2hpdGVTcGFjZTogJ2luaXRpYWwnXG4gICAgfSksIGNsYXNzTmFtZV0uam9pbignICcpLFxuICAgIGNvbnRlbnRFZGl0YWJsZTogZmFsc2VcbiAgfSk7XG59KTtcblxuY29uc3QgVG9vbGJhclNlcGFyYXRvciA9ICgpID0+IHtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goRGl2aWRlciwge1xuICAgIG9yaWVudGF0aW9uOiBcInZlcnRpY2FsXCIsXG4gICAgZmxleFNocmluazogMFxuICB9KTtcbn07XG5cbmZ1bmN0aW9uIHBhcnNlSW1hZ2VEYXRhKGRhdGEpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgIGlmICh0eXBlb2YgcGFyc2VkID09PSAnb2JqZWN0JyAmJiBwYXJzZWQgIT09IG51bGwgJiYgJ3NyYycgaW4gcGFyc2VkICYmIHR5cGVvZiBwYXJzZWQuc3JjID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3JjOiBwYXJzZWQuc3JjLFxuICAgICAgICBhbHQ6ICdhbHQnIGluIHBhcnNlZCAmJiB0eXBlb2YgcGFyc2VkLmFsdCA9PT0gJ3N0cmluZycgPyBwYXJzZWQuYWx0IDogJycsXG4gICAgICAgIGhlaWdodDogJ2hlaWdodCcgaW4gcGFyc2VkICYmIHR5cGVvZiBwYXJzZWQuaGVpZ2h0ID09PSAnbnVtYmVyJyAmJiBOdW1iZXIuaXNJbnRlZ2VyKHBhcnNlZC5oZWlnaHQpID8gcGFyc2VkLmhlaWdodCA6IHVuZGVmaW5lZCxcbiAgICAgICAgd2lkdGg6ICd3aWR0aCcgaW4gcGFyc2VkICYmIHR5cGVvZiBwYXJzZWQud2lkdGggPT09ICdudW1iZXInICYmIE51bWJlci5pc0ludGVnZXIocGFyc2VkLndpZHRoKSA/IHBhcnNlZC53aWR0aCA6IHVuZGVmaW5lZFxuICAgICAgfTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge31cbiAgY29uc3QgcGF0dGVybiA9IC9eXFxzKiFcXFsoLiopXFxdXFwoKFthLXowLTlfXFwtLzouXSspXFwpXFxzKiQvO1xuICBjb25zdCBtYXRjaCA9IGRhdGEubWF0Y2gocGF0dGVybik7XG4gIGlmIChtYXRjaCkge1xuICAgIHJldHVybiB7XG4gICAgICBzcmM6IG1hdGNoWzJdLFxuICAgICAgYWx0OiBtYXRjaFsxXVxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBzcmM6IGRhdGEsXG4gICAgYWx0OiAnJ1xuICB9O1xufVxuZnVuY3Rpb24gdXNlSW1hZ2VEaW1lbnNpb25zKHNyYykge1xuICBjb25zdCBbZGltZW5zaW9ucywgc2V0RGltZW5zaW9uc10gPSB1c2VTdGF0ZSh7fSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFzcmMgfHwgIWlzVmFsaWRVUkwkMShzcmMpKSB7XG4gICAgICBzZXREaW1lbnNpb25zKHt9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IHNob3VsZFNldCA9IHRydWU7XG4gICAgbG9hZEltYWdlRGltZW5zaW9ucyhzcmMpLnRoZW4oZGltZW5zaW9ucyA9PiB7XG4gICAgICBpZiAoc2hvdWxkU2V0KSBzZXREaW1lbnNpb25zKGRpbWVuc2lvbnMpO1xuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBzaG91bGRTZXQgPSBmYWxzZTtcbiAgICB9O1xuICB9LCBbc3JjXSk7XG4gIHJldHVybiBkaW1lbnNpb25zO1xufVxuZnVuY3Rpb24gbG9hZEltYWdlRGltZW5zaW9ucyh1cmwpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICBpbWcub25sb2FkID0gKCkgPT4ge1xuICAgICAgcmVzb2x2ZSh7XG4gICAgICAgIHdpZHRoOiBpbWcud2lkdGgsXG4gICAgICAgIGhlaWdodDogaW1nLmhlaWdodFxuICAgICAgfSk7XG4gICAgfTtcbiAgICBpbWcub25lcnJvciA9ICgpID0+IHtcbiAgICAgIHJlamVjdCgpO1xuICAgIH07XG4gICAgaW1nLnNyYyA9IHVybDtcbiAgfSk7XG59XG5jb25zdCBpbWFnZURhdGFTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHNyYzogei5zdHJpbmcoKSxcbiAgYWx0OiB6LnN0cmluZygpLFxuICB3aWR0aDogei5udW1iZXIoKSxcbiAgaGVpZ2h0OiB6Lm51bWJlcigpXG59KTtcbmFzeW5jIGZ1bmN0aW9uIGxvYWRJbWFnZURhdGEodXJsLCBjb25maWcpIHtcbiAgY29uc3QgYXV0aCA9IGdldENsb3VkQXV0aChjb25maWcpO1xuICBpZiAoYXV0aCkge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke0tFWVNUQVRJQ19DTE9VRF9BUElfVVJMfS92MS9pbWFnZT8ke25ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgdXJsXG4gICAgfSl9YCwge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YXV0aC5hY2Nlc3NUb2tlbn1gLFxuICAgICAgICAuLi5LRVlTVEFUSUNfQ0xPVURfSEVBREVSU1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgY29uc3QgcGFyc2VkID0gaW1hZ2VEYXRhU2NoZW1hLnNhZmVQYXJzZShkYXRhKTtcbiAgICAgIGlmIChwYXJzZWQuc3VjY2Vzcykge1xuICAgICAgICByZXR1cm4gcGFyc2VkLmRhdGE7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBsb2FkSW1hZ2VEaW1lbnNpb25zKHVybCkudGhlbihkaW1lbnNpb25zID0+ICh7XG4gICAgc3JjOiB1cmwsXG4gICAgYWx0OiAnJyxcbiAgICAuLi5kaW1lbnNpb25zXG4gIH0pKTtcbn1cbmZ1bmN0aW9uIEltYWdlRGltZW5zaW9uc0lucHV0KHByb3BzKSB7XG4gIGNvbnN0IGRpbWVuc2lvbnMgPSB1c2VJbWFnZURpbWVuc2lvbnMocHJvcHMuc3JjKTtcbiAgY29uc3QgW2NvbnN0cmFpblByb3BvcnRpb25zLCBzZXRDb25zdHJhaW5Qcm9wb3J0aW9uc10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgcmV2ZXJ0TGFiZWwgPSBgUmV2ZXJ0IHRvIG9yaWdpbmFsICgke2RpbWVuc2lvbnMud2lkdGh9IMOXICR7ZGltZW5zaW9ucy5oZWlnaHR9KWA7XG4gIGNvbnN0IGRpbWVuc2lvbnNNYXRjaE9yaWdpbmFsID0gZGltZW5zaW9ucy53aWR0aCA9PT0gcHJvcHMuaW1hZ2Uud2lkdGggJiYgZGltZW5zaW9ucy5oZWlnaHQgPT09IHByb3BzLmltYWdlLmhlaWdodDtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3hzKEhTdGFjaywge1xuICAgIGdhcDogXCJyZWd1bGFyXCIsXG4gICAgYWxpZ25JdGVtczogXCJlbmRcIixcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goTnVtYmVyRmllbGQsIHtcbiAgICAgIGxhYmVsOiBcIldpZHRoXCIsXG4gICAgICB3aWR0aDogXCJzY2FsZS4xNjAwXCIsXG4gICAgICBmb3JtYXRPcHRpb25zOiB7XG4gICAgICAgIG1heGltdW1GcmFjdGlvbkRpZ2l0czogMFxuICAgICAgfSxcbiAgICAgIHZhbHVlOiBwcm9wcy5pbWFnZS53aWR0aCxcbiAgICAgIG9uQ2hhbmdlOiB3aWR0aCA9PiB7XG4gICAgICAgIGlmIChjb25zdHJhaW5Qcm9wb3J0aW9ucykge1xuICAgICAgICAgIHByb3BzLm9uQ2hhbmdlKHtcbiAgICAgICAgICAgIHdpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBNYXRoLnJvdW5kKHdpZHRoIC8gZ2V0QXNwZWN0UmF0aW8ocHJvcHMuaW1hZ2UpKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByb3BzLm9uQ2hhbmdlKHtcbiAgICAgICAgICAgIHdpZHRoXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KSwgLyojX19QVVJFX18qL2pzeHMoVG9vbHRpcFRyaWdnZXIsIHtcbiAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChUb2dnbGVCdXR0b24sIHtcbiAgICAgICAgaXNTZWxlY3RlZDogY29uc3RyYWluUHJvcG9ydGlvbnMsXG4gICAgICAgIFwiYXJpYS1sYWJlbFwiOiBcIkNvbnN0cmFpbiBwcm9wb3J0aW9uc1wiLFxuICAgICAgICBwcm9taW5lbmNlOiBcImxvd1wiLFxuICAgICAgICBvblByZXNzOiAoKSA9PiB7XG4gICAgICAgICAgc2V0Q29uc3RyYWluUHJvcG9ydGlvbnMoc3RhdGUgPT4gIXN0YXRlKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goSWNvbiwge1xuICAgICAgICAgIHNyYzogY29uc3RyYWluUHJvcG9ydGlvbnMgPyBsaW5rMkljb24gOiBsaW5rMk9mZkljb25cbiAgICAgICAgfSlcbiAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KFRvb2x0aXAsIHtcbiAgICAgICAgY2hpbGRyZW46IFwiQ29uc3RyYWluIHByb3BvcnRpb25zXCJcbiAgICAgIH0pXVxuICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KE51bWJlckZpZWxkLCB7XG4gICAgICBsYWJlbDogXCJIZWlnaHRcIixcbiAgICAgIHdpZHRoOiBcInNjYWxlLjE2MDBcIixcbiAgICAgIGZvcm1hdE9wdGlvbnM6IHtcbiAgICAgICAgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAwXG4gICAgICB9LFxuICAgICAgdmFsdWU6IHByb3BzLmltYWdlLmhlaWdodCxcbiAgICAgIG9uQ2hhbmdlOiBoZWlnaHQgPT4ge1xuICAgICAgICBpZiAoY29uc3RyYWluUHJvcG9ydGlvbnMpIHtcbiAgICAgICAgICBwcm9wcy5vbkNoYW5nZSh7XG4gICAgICAgICAgICBoZWlnaHQsXG4gICAgICAgICAgICB3aWR0aDogTWF0aC5yb3VuZChoZWlnaHQgKiBnZXRBc3BlY3RSYXRpbyhwcm9wcy5pbWFnZSkpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJvcHMub25DaGFuZ2Uoe1xuICAgICAgICAgICAgaGVpZ2h0XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KSwgLyojX19QVVJFX18qL2pzeHMoVG9vbHRpcFRyaWdnZXIsIHtcbiAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChBY3Rpb25CdXR0b24sIHtcbiAgICAgICAgXCJhcmlhLWxhYmVsXCI6IHJldmVydExhYmVsLFxuICAgICAgICBpc0Rpc2FibGVkOiBkaW1lbnNpb25zTWF0Y2hPcmlnaW5hbCB8fCAhZGltZW5zaW9ucy53aWR0aCB8fCAhZGltZW5zaW9ucy5oZWlnaHQsXG4gICAgICAgIG9uUHJlc3M6ICgpID0+IHtcbiAgICAgICAgICBwcm9wcy5vbkNoYW5nZSh7XG4gICAgICAgICAgICBoZWlnaHQ6IGRpbWVuc2lvbnMuaGVpZ2h0LFxuICAgICAgICAgICAgd2lkdGg6IGRpbWVuc2lvbnMud2lkdGhcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goSWNvbiwge1xuICAgICAgICAgIHNyYzogdW5kbzJJY29uXG4gICAgICAgIH0pXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeChUb29sdGlwLCB7XG4gICAgICAgIG1heFdpZHRoOiBcIjEwMCVcIixcbiAgICAgICAgY2hpbGRyZW46IHJldmVydExhYmVsXG4gICAgICB9KV1cbiAgICB9KV1cbiAgfSk7XG59XG5jb25zdCBlbXB0eUltYWdlRGF0YSA9IHtcbiAgc3JjOiAnJyxcbiAgYWx0OiAnJ1xufTtcbmZ1bmN0aW9uIEltYWdlRGlhbG9nJDEocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGltYWdlLFxuICAgIG9uQ2FuY2VsLFxuICAgIG9uQ2hhbmdlLFxuICAgIG9uQ2xvc2VcbiAgfSA9IHByb3BzO1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlKGltYWdlICE9PSBudWxsICYmIGltYWdlICE9PSB2b2lkIDAgPyBpbWFnZSA6IGVtcHR5SW1hZ2VEYXRhKTtcbiAgY29uc3QgW3N0YXR1cywgc2V0U3RhdHVzXSA9IHVzZVN0YXRlKGltYWdlID8gJ2dvb2QnIDogJycpO1xuICBjb25zdCBmb3JtSWQgPSB1c2VJZCgpO1xuICBjb25zdCBpbWFnZUxpYnJhcnlVUkwgPSB1c2VJbWFnZUxpYnJhcnlVUkwoKTtcbiAgY29uc3Qgb25QYXN0ZSA9IGV2ZW50ID0+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHRleHQgPSBldmVudC5jbGlwYm9hcmREYXRhLmdldERhdGEoJ3RleHQvcGxhaW4nKTtcbiAgICBzZXRTdGF0ZShwYXJzZUltYWdlRGF0YSh0ZXh0KSk7XG4gIH07XG4gIGNvbnN0IGNvbmZpZyA9IHVzZUNvbmZpZygpO1xuICBjb25zdCBoYXNTZXRGaWVsZHMgPSAhIShzdGF0ZS5hbHQgfHwgc3RhdGUud2lkdGggfHwgc3RhdGUuaGVpZ2h0KTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXN0YXRlLnNyYykge1xuICAgICAgc2V0U3RhdHVzKCcnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFpc1ZhbGlkVVJMJDEoc3RhdGUuc3JjKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoaGFzU2V0RmllbGRzKSB7XG4gICAgICBzZXRTdGF0dXMoJ2dvb2QnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0U3RhdHVzKCdsb2FkaW5nJyk7XG4gICAgbG9hZEltYWdlRGF0YShzdGF0ZS5zcmMsIGNvbmZpZykudGhlbihuZXdEYXRhID0+IHtcbiAgICAgIHNldFN0YXRlKHN0YXRlID0+ICh7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICAuLi5uZXdEYXRhXG4gICAgICB9KSk7XG4gICAgICBzZXRTdGF0dXMoJ2dvb2QnKTtcbiAgICB9KS5jYXRjaCgoKSA9PiB7XG4gICAgICBzZXRTdGF0dXMoJ2Vycm9yJyk7XG4gICAgfSk7XG4gIH0sIFtjb25maWcsIGhhc1NldEZpZWxkcywgc3RhdGUuc3JjXSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhEaWFsb2csIHtcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goSGVhZGluZywge1xuICAgICAgY2hpbGRyZW46IFwiQ2xvdWQgaW1hZ2VcIlxuICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KENvbnRlbnQsIHtcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4cyhWU3RhY2ssIHtcbiAgICAgICAgZWxlbWVudFR5cGU6IFwiZm9ybVwiLFxuICAgICAgICBpZDogZm9ybUlkLFxuICAgICAgICBnYXA6IFwieGxhcmdlXCIsXG4gICAgICAgIG9uU3VibWl0OiBlID0+IHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgaWYgKHN0YXR1cyAhPT0gJ2dvb2QnKSByZXR1cm47XG4gICAgICAgICAgb25DaGFuZ2Uoc3RhdGUpO1xuICAgICAgICAgIG9uQ2xvc2UoKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KFRleHRGaWVsZCwge1xuICAgICAgICAgIGxhYmVsOiBcIkltYWdlIFVSTFwiLFxuICAgICAgICAgIGF1dG9Gb2N1czogdHJ1ZSxcbiAgICAgICAgICBvblBhc3RlOiBvblBhc3RlLFxuICAgICAgICAgIG9uS2V5RG93bjogZSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5jb2RlID09PSAnQmFja3NwYWNlJyB8fCBlLmNvZGUgPT09ICdEZWxldGUnKSB7XG4gICAgICAgICAgICAgIHNldFN0YXRlKGVtcHR5SW1hZ2VEYXRhKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGUuY29udGludWVQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgdmFsdWU6IHN0YXRlLnNyYyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogLyojX19QVVJFX18qL2pzeHMoVGV4dCwge1xuICAgICAgICAgICAgY2hpbGRyZW46IFtcIkNvcHkgYW4gaW1hZ2UgVVJMIGZyb20gdGhlXCIsICcgJywgLyojX19QVVJFX18qL2pzeChUZXh0TGluaywge1xuICAgICAgICAgICAgICBwcm9taW5lbmNlOiBcImhpZ2hcIixcbiAgICAgICAgICAgICAgaHJlZjogaW1hZ2VMaWJyYXJ5VVJMLFxuICAgICAgICAgICAgICB0YXJnZXQ6IFwiX2JsYW5rXCIsXG4gICAgICAgICAgICAgIHJlbDogXCJub3JlZmVycmVyXCIsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBcIkltYWdlIExpYnJhcnlcIlxuICAgICAgICAgICAgfSksICcgJywgXCJhbmQgcGFzdGUgaXQgaW50byB0aGlzIGZpZWxkLlwiXVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGVuZEVsZW1lbnQ6IHN0YXR1cyA9PT0gJ2xvYWRpbmcnID8gLyojX19QVVJFX18qL2pzeChGbGV4LCB7XG4gICAgICAgICAgICBoZWlnaHQ6IFwiZWxlbWVudC5yZWd1bGFyXCIsXG4gICAgICAgICAgICB3aWR0aDogXCJlbGVtZW50LnJlZ3VsYXJcIixcbiAgICAgICAgICAgIGFsaWduSXRlbXM6IFwiY2VudGVyXCIsXG4gICAgICAgICAgICBqdXN0aWZ5Q29udGVudDogXCJjZW50ZXJcIixcbiAgICAgICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KFByb2dyZXNzQ2lyY2xlLCB7XG4gICAgICAgICAgICAgIHNpemU6IFwic21hbGxcIixcbiAgICAgICAgICAgICAgXCJhcmlhLWxhYmVsXCI6IFwiQ2hlY2tpbmdcXHUyMDI2XCIsXG4gICAgICAgICAgICAgIGlzSW5kZXRlcm1pbmF0ZTogdHJ1ZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KSA6IHN0YXRlLnNyYyA/IC8qI19fUFVSRV9fKi9qc3goQ2xlYXJCdXR0b24sIHtcbiAgICAgICAgICAgIG9uUHJlc3M6ICgpID0+IHNldFN0YXRlKGVtcHR5SW1hZ2VEYXRhKSxcbiAgICAgICAgICAgIHByZXZlbnRGb2N1czogdHJ1ZVxuICAgICAgICAgIH0pIDogbnVsbFxuICAgICAgICB9KSwgc3RhdHVzID09PSAnZ29vZCcgPyAvKiNfX1BVUkVfXyovanN4cyhGcmFnbWVudCwge1xuICAgICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChUZXh0QXJlYSwge1xuICAgICAgICAgICAgbGFiZWw6IFwiQWx0IHRleHRcIixcbiAgICAgICAgICAgIHZhbHVlOiBzdGF0ZS5hbHQsXG4gICAgICAgICAgICBvbkNoYW5nZTogYWx0ID0+IHNldFN0YXRlKHN0YXRlID0+ICh7XG4gICAgICAgICAgICAgIC4uLnN0YXRlLFxuICAgICAgICAgICAgICBhbHRcbiAgICAgICAgICAgIH0pKVxuICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KEltYWdlRGltZW5zaW9uc0lucHV0LCB7XG4gICAgICAgICAgICBzcmM6IHN0YXRlLnNyYyxcbiAgICAgICAgICAgIGltYWdlOiBzdGF0ZSxcbiAgICAgICAgICAgIG9uQ2hhbmdlOiBkaW1lbnNpb25zID0+IHtcbiAgICAgICAgICAgICAgc2V0U3RhdGUoc3RhdGUgPT4gKHtcbiAgICAgICAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICAgICAgICAuLi5kaW1lbnNpb25zXG4gICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KV1cbiAgICAgICAgfSkgOiBudWxsXVxuICAgICAgfSlcbiAgICB9KSwgLyojX19QVVJFX18qL2pzeHMoQnV0dG9uR3JvdXAsIHtcbiAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChCdXR0b24sIHtcbiAgICAgICAgb25QcmVzczogb25DYW5jZWwsXG4gICAgICAgIGNoaWxkcmVuOiBcIkNhbmNlbFwiXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeChCdXR0b24sIHtcbiAgICAgICAgcHJvbWluZW5jZTogXCJoaWdoXCIsXG4gICAgICAgIHR5cGU6IFwic3VibWl0XCIsXG4gICAgICAgIGZvcm06IGZvcm1JZCxcbiAgICAgICAgaXNEaXNhYmxlZDogc3RhdHVzICE9PSAnZ29vZCcsXG4gICAgICAgIGNoaWxkcmVuOiBpbWFnZSA/ICdEb25lJyA6ICdJbnNlcnQnXG4gICAgICB9KV1cbiAgICB9KV1cbiAgfSk7XG59XG5mdW5jdGlvbiBQbGFjZWhvbGRlciQxKHByb3BzKSB7XG4gIGNvbnN0IHN0YXRlID0gdXNlT3ZlcmxheVRyaWdnZXJTdGF0ZSh7XG4gICAgZGVmYXVsdE9wZW46IGZhbHNlXG4gIH0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChwcm9wcy5zZWxlY3RlZCkge1xuICAgICAgc3RhdGUub3BlbigpO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIH0sIFtwcm9wcy5zZWxlY3RlZF0pO1xuICBjb25zdCBjbG9zZUFuZENsZWFudXAgPSAoKSA9PiB7XG4gICAgc3RhdGUuY2xvc2UoKTtcbiAgICBwcm9wcy5vblJlbW92ZSgpO1xuICB9O1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeHMoTm90RWRpdGFibGUsIHtcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3hzKEZsZXgsIHtcbiAgICAgIGFsaWduSXRlbXM6IFwiY2VudGVyXCIsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwic3VyZmFjZVwiLFxuICAgICAgYm9yZGVyUmFkaXVzOiBcInJlZ3VsYXJcIixcbiAgICAgIGdhcDogXCJyZWd1bGFyXCIsXG4gICAgICBoZWlnaHQ6IFwiZWxlbWVudC5sYXJnZVwiLFxuICAgICAgcGFkZGluZ1g6IFwibGFyZ2VcIixcbiAgICAgIG9uQ2xpY2s6ICgpID0+IHN0YXRlLm9wZW4oKSxcbiAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChJY29uLCB7XG4gICAgICAgIHNyYzogaW1hZ2VJY29uXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeHMoVGV4dCwge1xuICAgICAgICBjaGlsZHJlbjogW1wiQ2xvdWQgaW1hZ2VcIiwgc3RhdGUuaXNPcGVuID8gJycgOiAnKGNsaWNrIHRvIGNvbmZpZ3VyZSknXVxuICAgICAgfSldXG4gICAgfSksIC8qI19fUFVSRV9fKi9qc3goRGlhbG9nQ29udGFpbmVyLCB7XG4gICAgICBvbkRpc21pc3M6IGNsb3NlQW5kQ2xlYW51cCxcbiAgICAgIGNoaWxkcmVuOiBzdGF0ZS5pc09wZW4gJiYgLyojX19QVVJFX18qL2pzeChJbWFnZURpYWxvZyQxLCB7XG4gICAgICAgIG9uQ2hhbmdlOiBwcm9wcy5vbkNoYW5nZSxcbiAgICAgICAgb25DYW5jZWw6IGNsb3NlQW5kQ2xlYW51cCxcbiAgICAgICAgb25DbG9zZTogc3RhdGUuY2xvc2VcbiAgICAgIH0pXG4gICAgfSldXG4gIH0pO1xufVxuZnVuY3Rpb24gSW1hZ2VQcmV2aWV3KHtcbiAgaW1hZ2UsXG4gIG9uQ2hhbmdlLFxuICBvblJlbW92ZSxcbiAgc2VsZWN0ZWRcbn0pIHtcbiAgY29uc3QgbWF4SGVpZ2h0ID0gMzY4OyAvLyBzaXplLnNjYWxlLjQ2MDAg4oCUIFRPRE86IGl0J2QgYmUgbmljZSB0byBnZXQgdGhpcyBmcm9tIHNvbWUgdG9rZW4gYXJ0ZWZhY3RcbiAgY29uc3QgbWF4V2lkdGggPSA3MzQ7IC8vIHJvdWdobHkgdGhlIG1heCB3aWR0aCB0aGF0IGFuIGVkaXRvciBjb250YWluZXIgd2lsbCBhbGxvd1xuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KEZyYWdtZW50LCB7XG4gICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goTm90RWRpdGFibGUsIHtcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4cyhWU3RhY2ssIHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBzZWxlY3RlZCA/ICdhY2NlbnQnIDogJ3N1cmZhY2UnLFxuICAgICAgICBib3JkZXJSYWRpdXM6IFwibWVkaXVtXCIsXG4gICAgICAgIGJvcmRlcjogc2VsZWN0ZWQgPyAnY29sb3IuYWxpYXMuYm9yZGVyRm9jdXNlZCcgOiAnbmV1dHJhbCcsXG4gICAgICAgIG92ZXJmbG93OiBcImhpZGRlblwiLFxuICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goRmxleCwge1xuICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJjYW52YXNcIixcbiAgICAgICAgICBqdXN0aWZ5Q29udGVudDogXCJjZW50ZXJcIixcbiAgICAgICAgICBVTlNBRkVfc3R5bGU6IHtcbiAgICAgICAgICAgIG1heEhlaWdodFxuICAgICAgICAgIH0sXG4gICAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goXCJpbWdcIiwge1xuICAgICAgICAgICAgYWx0OiBpbWFnZS5hbHQsXG4gICAgICAgICAgICBzcmM6IGltYWdlV2l0aFRyYW5zZm9ybXMoe1xuICAgICAgICAgICAgICBzb3VyY2U6IGltYWdlLnNyYyxcbiAgICAgICAgICAgICAgLy8gMnggZm9yIHJldGluYSBldGMuXG4gICAgICAgICAgICAgIGhlaWdodDogbWF4SGVpZ2h0ICogMixcbiAgICAgICAgICAgICAgd2lkdGg6IG1heFdpZHRoICogMlxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICBvYmplY3RGaXQ6ICdjb250YWluJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4cyhIU3RhY2ssIHtcbiAgICAgICAgICBwYWRkaW5nOiBcImxhcmdlXCIsXG4gICAgICAgICAgZ2FwOiBcInhsYXJnZVwiLFxuICAgICAgICAgIGJvcmRlclRvcDogc2VsZWN0ZWQgPyAnY29sb3IuYWxpYXMuYm9yZGVyRm9jdXNlZCcgOiAnbmV1dHJhbCcsXG4gICAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4cyhWU3RhY2ssIHtcbiAgICAgICAgICAgIGZsZXg6IFwiMVwiLFxuICAgICAgICAgICAgZ2FwOiBcIm1lZGl1bVwiLFxuICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6IFwiY2VudGVyXCIsXG4gICAgICAgICAgICBjaGlsZHJlbjogW2ltYWdlLmFsdCA/IC8qI19fUFVSRV9fKi9qc3goVGV4dCwge1xuICAgICAgICAgICAgICB0cnVuY2F0ZTogMixcbiAgICAgICAgICAgICAgY2hpbGRyZW46IGltYWdlLmFsdFxuICAgICAgICAgICAgfSkgOiBudWxsLCAvKiNfX1BVUkVfXyovanN4cyhUZXh0LCB7XG4gICAgICAgICAgICAgIGNvbG9yOiBcIm5ldXRyYWxUZXJ0aWFyeVwiLFxuICAgICAgICAgICAgICBzaXplOiBcInNtYWxsXCIsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbaW1hZ2Uud2lkdGgsIFwiIFxceEQ3IFwiLCBpbWFnZS5oZWlnaHRdXG4gICAgICAgICAgICB9KV1cbiAgICAgICAgICB9KSwgLyojX19QVVJFX18qL2pzeHMoSFN0YWNrLCB7XG4gICAgICAgICAgICBnYXA6IFwicmVndWxhclwiLFxuICAgICAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4cyhEaWFsb2dUcmlnZ2VyLCB7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeHMoVG9vbHRpcFRyaWdnZXIsIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goQWN0aW9uQnV0dG9uLCB7XG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChJY29uLCB7XG4gICAgICAgICAgICAgICAgICAgIHNyYzogcGVuY2lsSWNvblxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KSwgLyojX19QVVJFX18qL2pzeChUb29sdGlwLCB7XG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbjogXCJFZGl0IEltYWdlIE9wdGlvbnNcIlxuICAgICAgICAgICAgICAgIH0pXVxuICAgICAgICAgICAgICB9KSwgb25DbG9zZSA9PiAvKiNfX1BVUkVfXyovanN4KEltYWdlRGlhbG9nJDEsIHtcbiAgICAgICAgICAgICAgICBpbWFnZTogaW1hZ2UsXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U6IG9uQ2hhbmdlLFxuICAgICAgICAgICAgICAgIG9uQ2FuY2VsOiBvbkNsb3NlLFxuICAgICAgICAgICAgICAgIG9uQ2xvc2U6IG9uQ2xvc2VcbiAgICAgICAgICAgICAgfSldXG4gICAgICAgICAgICB9KSwgLyojX19QVVJFX18qL2pzeHMoVG9vbHRpcFRyaWdnZXIsIHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEFjdGlvbkJ1dHRvbiwge1xuICAgICAgICAgICAgICAgIG9uUHJlc3M6IG9uUmVtb3ZlLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KEljb24sIHtcbiAgICAgICAgICAgICAgICAgIHNyYzogdHJhc2gySWNvblxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KFRvb2x0aXAsIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogXCJSZW1vdmUgSW1hZ2VcIlxuICAgICAgICAgICAgICB9KV1cbiAgICAgICAgICAgIH0pXVxuICAgICAgICAgIH0pXVxuICAgICAgICB9KV1cbiAgICAgIH0pXG4gICAgfSlcbiAgfSk7XG59XG5mdW5jdGlvbiBDbG91ZEltYWdlUHJldmlldyhwcm9wcykge1xuICB2YXIgX3Byb3BzJGZpZWxkcyR3aWR0aCR2LCBfcHJvcHMkZmllbGRzJGhlaWdodCQ7XG4gIGNvbnN0IHNlbGVjdGVkID0gdXNlU2VsZWN0ZWQoKTtcbiAgY29uc3QgZWRpdG9yID0gdXNlU2xhdGVTdGF0aWMoKTtcbiAgaWYgKCFwcm9wcy5maWVsZHMuc3JjLnZhbHVlKSB7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goUGxhY2Vob2xkZXIkMSwge1xuICAgICAgb25DaGFuZ2U6IHByb3BzLm9uQ2hhbmdlLFxuICAgICAgb25SZW1vdmU6ICgpID0+IHtcbiAgICAgICAgZm9jdXNXaXRoUHJldmlvdXNTZWxlY3Rpb24oZWRpdG9yKTtcbiAgICAgICAgcHJvcHMub25SZW1vdmUoKTtcbiAgICAgIH0sXG4gICAgICBzZWxlY3RlZDogc2VsZWN0ZWRcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChJbWFnZVByZXZpZXcsIHtcbiAgICBpbWFnZToge1xuICAgICAgc3JjOiBwcm9wcy5maWVsZHMuc3JjLnZhbHVlLFxuICAgICAgYWx0OiBwcm9wcy5maWVsZHMuYWx0LnZhbHVlLFxuICAgICAgd2lkdGg6IChfcHJvcHMkZmllbGRzJHdpZHRoJHYgPSBwcm9wcy5maWVsZHMud2lkdGgudmFsdWUpICE9PSBudWxsICYmIF9wcm9wcyRmaWVsZHMkd2lkdGgkdiAhPT0gdm9pZCAwID8gX3Byb3BzJGZpZWxkcyR3aWR0aCR2IDogdW5kZWZpbmVkLFxuICAgICAgaGVpZ2h0OiAoX3Byb3BzJGZpZWxkcyRoZWlnaHQkID0gcHJvcHMuZmllbGRzLmhlaWdodC52YWx1ZSkgIT09IG51bGwgJiYgX3Byb3BzJGZpZWxkcyRoZWlnaHQkICE9PSB2b2lkIDAgPyBfcHJvcHMkZmllbGRzJGhlaWdodCQgOiB1bmRlZmluZWRcbiAgICB9LFxuICAgIG9uQ2hhbmdlOiBwcm9wcy5vbkNoYW5nZSxcbiAgICBvblJlbW92ZTogcHJvcHMub25SZW1vdmUsXG4gICAgc2VsZWN0ZWQ6IHNlbGVjdGVkXG4gIH0pO1xufVxuZnVuY3Rpb24gQ2xvdWRJbWFnZVByZXZpZXdGb3JOZXdFZGl0b3IocHJvcHMpIHtcbiAgdmFyIF9wcm9wcyR2YWx1ZSR3aWR0aCwgX3Byb3BzJHZhbHVlJGhlaWdodDtcbiAgaWYgKCFwcm9wcy52YWx1ZS5zcmMpIHtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChQbGFjZWhvbGRlciQxXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgICwge1xuICAgICAgb25DaGFuZ2U6IHByb3BzLm9uQ2hhbmdlLFxuICAgICAgb25SZW1vdmU6IHByb3BzLm9uUmVtb3ZlLFxuICAgICAgc2VsZWN0ZWQ6IHByb3BzLmlzU2VsZWN0ZWRcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChJbWFnZVByZXZpZXcsIHtcbiAgICBpbWFnZToge1xuICAgICAgc3JjOiBwcm9wcy52YWx1ZS5zcmMsXG4gICAgICBhbHQ6IHByb3BzLnZhbHVlLmFsdCxcbiAgICAgIHdpZHRoOiAoX3Byb3BzJHZhbHVlJHdpZHRoID0gcHJvcHMudmFsdWUud2lkdGgpICE9PSBudWxsICYmIF9wcm9wcyR2YWx1ZSR3aWR0aCAhPT0gdm9pZCAwID8gX3Byb3BzJHZhbHVlJHdpZHRoIDogdW5kZWZpbmVkLFxuICAgICAgaGVpZ2h0OiAoX3Byb3BzJHZhbHVlJGhlaWdodCA9IHByb3BzLnZhbHVlLmhlaWdodCkgIT09IG51bGwgJiYgX3Byb3BzJHZhbHVlJGhlaWdodCAhPT0gdm9pZCAwID8gX3Byb3BzJHZhbHVlJGhlaWdodCA6IHVuZGVmaW5lZFxuICAgIH1cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgLFxuICAgIG9uQ2hhbmdlOiBwcm9wcy5vbkNoYW5nZSxcbiAgICBvblJlbW92ZTogcHJvcHMub25SZW1vdmUsXG4gICAgc2VsZWN0ZWQ6IHByb3BzLmlzU2VsZWN0ZWRcbiAgfSk7XG59XG5cbi8vIFV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5mdW5jdGlvbiBpbWFnZVdpdGhUcmFuc2Zvcm1zKG9wdGlvbnMpIHtcbiAgbGV0IHtcbiAgICBmaXQgPSAnc2NhbGUtZG93bicsXG4gICAgc291cmNlLFxuICAgIGhlaWdodCxcbiAgICB3aWR0aFxuICB9ID0gb3B0aW9ucztcbiAgaWYgKCEvXmh0dHBzPzpcXC9cXC9bXlxcLl0rXFwua2V5c3RhdGljXFwubmV0Ly50ZXN0KHNvdXJjZSkpIHtcbiAgICByZXR1cm4gc291cmNlO1xuICB9XG4gIHJldHVybiBgJHtzb3VyY2V9P2AgKyBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICBmaXQsXG4gICAgaGVpZ2h0OiBoZWlnaHQudG9TdHJpbmcoKSxcbiAgICB3aWR0aDogd2lkdGgudG9TdHJpbmcoKVxuICB9KS50b1N0cmluZygpO1xufVxuZnVuY3Rpb24gaXNWYWxpZFVSTCQxKHN0cikge1xuICB0cnkge1xuICAgIG5ldyBVUkwoc3RyKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5mdW5jdGlvbiB1c2VJbWFnZUxpYnJhcnlVUkwoKSB7XG4gIGNvbnN0IGNvbmZpZyA9IHVzZUNvbmZpZygpO1xuICBjb25zdCBzcGxpdCA9IGdldFNwbGl0Q2xvdWRQcm9qZWN0KGNvbmZpZyk7XG4gIGlmICghc3BsaXQpIHJldHVybiAnaHR0cHM6Ly9rZXlzdGF0aWMuY2xvdWQvJztcbiAgcmV0dXJuIGBodHRwczovL2tleXN0YXRpYy5jbG91ZC90ZWFtcy8ke3NwbGl0LnRlYW19L3Byb2plY3QvJHtzcGxpdC5wcm9qZWN0fS9pbWFnZXNgO1xufVxuZnVuY3Rpb24gZ2V0QXNwZWN0UmF0aW8oc3RhdGUpIHtcbiAgaWYgKCFzdGF0ZS53aWR0aCB8fCAhc3RhdGUuaGVpZ2h0KSByZXR1cm4gMTtcbiAgcmV0dXJuIHN0YXRlLndpZHRoIC8gc3RhdGUuaGVpZ2h0O1xufVxuY29uc3QgY2xvdWRJbWFnZVRvb2xiYXJJY29uID0gaW1hZ2VJY29uO1xuXG4vLyBUaGVtZSBjb250cm9sc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuY29uc3QgVEhFTUVfTU9ERSA9IHtcbiAgbGlnaHQ6IHtcbiAgICBpY29uOiBzdW5JY29uLFxuICAgIGxhYmVsOiAnTGlnaHQnXG4gIH0sXG4gIGRhcms6IHtcbiAgICBpY29uOiBtb29uSWNvbixcbiAgICBsYWJlbDogJ0RhcmsnXG4gIH0sXG4gIGF1dG86IHtcbiAgICBpY29uOiBtb25pdG9ySWNvbixcbiAgICBsYWJlbDogJ1N5c3RlbSdcbiAgfVxufTtcbmNvbnN0IHRoZW1lSXRlbXMgPSBPYmplY3QuZW50cmllcyhUSEVNRV9NT0RFKS5tYXAoKFtpZCwge1xuICBpY29uLFxuICBsYWJlbFxufV0pID0+ICh7XG4gIGlkLFxuICBpY29uLFxuICBsYWJlbFxufSkpO1xuZnVuY3Rpb24gVGhlbWVNZW51KCkge1xuICBsZXQge1xuICAgIHRoZW1lLFxuICAgIHNldFRoZW1lXG4gIH0gPSB1c2VUaGVtZUNvbnRleHQoKTtcbiAgbGV0IG1hdGNoZXNEYXJrID0gdXNlTWVkaWFRdWVyeSgnKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKScpO1xuICBsZXQgaWNvbiA9IFRIRU1FX01PREVbdGhlbWVdLmljb247XG4gIGlmICh0aGVtZSA9PT0gJ2F1dG8nKSB7XG4gICAgaWNvbiA9IG1hdGNoZXNEYXJrID8gbW9vbkljb24gOiBzdW5JY29uO1xuICB9XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhNZW51VHJpZ2dlciwge1xuICAgIGFsaWduOiBcImVuZFwiLFxuICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChBY3Rpb25CdXR0b24sIHtcbiAgICAgIFwiYXJpYS1sYWJlbFwiOiBcInRoZW1lXCIsXG4gICAgICBwcm9taW5lbmNlOiBcImxvd1wiLFxuICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goSWNvbiwge1xuICAgICAgICBzcmM6IGljb25cbiAgICAgIH0pXG4gICAgfSksIC8qI19fUFVSRV9fKi9qc3goTWVudSwge1xuICAgICAgaXRlbXM6IHRoZW1lSXRlbXMsXG4gICAgICBvblNlbGVjdGlvbkNoYW5nZTogKFtrZXldKSA9PiBzZXRUaGVtZShrZXkpLFxuICAgICAgZGlzYWxsb3dFbXB0eVNlbGVjdGlvbjogdHJ1ZSxcbiAgICAgIHNlbGVjdGVkS2V5czogW3RoZW1lXSxcbiAgICAgIHNlbGVjdGlvbk1vZGU6IFwic2luZ2xlXCIsXG4gICAgICBjaGlsZHJlbjogaXRlbSA9PiAvKiNfX1BVUkVfXyovanN4cyhJdGVtJDEsIHtcbiAgICAgICAgdGV4dFZhbHVlOiBpdGVtLmxhYmVsLFxuICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goSWNvbiwge1xuICAgICAgICAgIHNyYzogaXRlbS5pY29uXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgICAgICBjaGlsZHJlbjogaXRlbS5sYWJlbFxuICAgICAgICB9KV1cbiAgICAgIH0pXG4gICAgfSldXG4gIH0pO1xufVxuXG4vLyBVc2VyIGNvbnRyb2xzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5mdW5jdGlvbiBVc2VyQWN0aW9ucygpIHtcbiAgbGV0IGNvbmZpZyA9IHVzZUNvbmZpZygpO1xuICBsZXQgdXNlckRhdGEgPSB1c2VVc2VyRGF0YSgpO1xuICBsZXQgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gIGlmICghdXNlckRhdGEpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAodXNlckRhdGEgPT09ICd1bmF1dGhvcml6ZWQnKSB7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goQWN0aW9uQnV0dG9uLCB7XG4gICAgICBvblByZXNzOiAoKSA9PiB7XG4gICAgICAgIHJlZGlyZWN0VG9DbG91ZEF1dGgocm91dGVyLnBhcmFtcy5tYXAoZW5jb2RlVVJJQ29tcG9uZW50KS5qb2luKCcvJyksIGNvbmZpZyk7XG4gICAgICB9LFxuICAgICAgZmxleDogdHJ1ZSxcbiAgICAgIGNoaWxkcmVuOiBcIlNpZ24gaW50byBDbG91ZFwiXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goVXNlck1lbnUsIHtcbiAgICAuLi51c2VyRGF0YVxuICB9KTtcbn1cbmZ1bmN0aW9uIFVzZXJNZW51KHVzZXIpIHtcbiAgbGV0IGNvbmZpZyA9IHVzZUNvbmZpZygpO1xuICBjb25zdCBjbG91ZEluZm8gPSB1c2VDbG91ZEluZm8oKTtcbiAgY29uc3QgaW1hZ2VMaWJyYXJ5VXJsID0gdXNlSW1hZ2VMaWJyYXJ5VVJMKCk7XG4gIGNvbnN0IG1lbnVJdGVtcyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIHZhciBfY29uZmlnJGNsb3VkO1xuICAgIGxldCBpdGVtcyA9IFt7XG4gICAgICBrZXk6ICdsb2dvdXQnLFxuICAgICAgbGFiZWw6ICdMb2cgb3V0JyxcbiAgICAgIGljb246IGxvZ091dEljb25cbiAgICB9XTtcbiAgICBpZiAoKF9jb25maWckY2xvdWQgPSBjb25maWcuY2xvdWQpICE9PSBudWxsICYmIF9jb25maWckY2xvdWQgIT09IHZvaWQgMCAmJiBfY29uZmlnJGNsb3VkLnByb2plY3QpIHtcbiAgICAgIGl0ZW1zLnVuc2hpZnQoe1xuICAgICAgICBrZXk6ICdtYW5hZ2UnLFxuICAgICAgICBsYWJlbDogJ0FjY291bnQnLFxuICAgICAgICBpY29uOiB1c2VySWNvbixcbiAgICAgICAgaHJlZjogJ2h0dHBzOi8va2V5c3RhdGljLmNsb3VkL2FjY291bnQnLFxuICAgICAgICB0YXJnZXQ6ICdfYmxhbmsnLFxuICAgICAgICByZWw6ICdub29wZW5lciBub3JlZmVycmVyJ1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChjbG91ZEluZm8gIT09IG51bGwgJiYgY2xvdWRJbmZvICE9PSB2b2lkIDAgJiYgY2xvdWRJbmZvLnRlYW0uaW1hZ2VzKSB7XG4gICAgICBpdGVtcy51bnNoaWZ0KHtcbiAgICAgICAga2V5OiAnaW1hZ2UtbGlicmFyeScsXG4gICAgICAgIGxhYmVsOiAnSW1hZ2UgbGlicmFyeScsXG4gICAgICAgIGljb246IGltYWdlSWNvbixcbiAgICAgICAgaHJlZjogaW1hZ2VMaWJyYXJ5VXJsLFxuICAgICAgICB0YXJnZXQ6ICdfYmxhbmsnLFxuICAgICAgICByZWw6ICdub29wZW5lciBub3JlZmVycmVyJ1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBpdGVtcztcbiAgfSwgW2Nsb3VkSW5mbywgY29uZmlnLCBpbWFnZUxpYnJhcnlVcmxdKTtcbiAgaWYgKCF1c2VyKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3hzKE1lbnVUcmlnZ2VyLCB7XG4gICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KFVzZXJEZXRhaWxzQnV0dG9uLCB7XG4gICAgICAuLi51c2VyXG4gICAgfSksIC8qI19fUFVSRV9fKi9qc3goRnJhZ21lbnQsIHtcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KE1lbnUsIHtcbiAgICAgICAgaXRlbXM6IG1lbnVJdGVtcyxcbiAgICAgICAgbWluV2lkdGg6IFwic2NhbGUuMjQwMFwiLFxuICAgICAgICBvbkFjdGlvbjoga2V5ID0+IHtcbiAgICAgICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICAgICAgY2FzZSAnbG9nb3V0JzpcbiAgICAgICAgICAgICAgc3dpdGNoIChjb25maWcuc3RvcmFnZS5raW5kKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnZ2l0aHViJzpcbiAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9hcGkva2V5c3RhdGljL2dpdGh1Yi9sb2dvdXQnO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY2xvdWQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2xvY2FsJzpcbiAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdrZXlzdGF0aWMtY2xvdWQtYWNjZXNzLXRva2VuJyk7XG4gICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY2hpbGRyZW46IGl0ZW0gPT4gLyojX19QVVJFX18qL2pzeHMoSXRlbSQxLCB7XG4gICAgICAgICAgdGV4dFZhbHVlOiBpdGVtLmxhYmVsLFxuICAgICAgICAgIGhyZWY6IGl0ZW0uaHJlZixcbiAgICAgICAgICByZWw6IGl0ZW0ucmVsLFxuICAgICAgICAgIHRhcmdldDogaXRlbS50YXJnZXQsXG4gICAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEljb24sIHtcbiAgICAgICAgICAgIHNyYzogaXRlbS5pY29uXG4gICAgICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goVGV4dCwge1xuICAgICAgICAgICAgY2hpbGRyZW46IGl0ZW0ubGFiZWxcbiAgICAgICAgICB9KV1cbiAgICAgICAgfSwgaXRlbS5rZXkpXG4gICAgICB9KVxuICAgIH0pXVxuICB9KTtcbn1cbmNvbnN0IFVzZXJEZXRhaWxzQnV0dG9uID0gLyojX19QVVJFX18qL2ZvcndhcmRSZWYoZnVuY3Rpb24gVXNlckRldGFpbHNCdXR0b24ocHJvcHMsIHJlZikge1xuICBsZXQge1xuICAgIGF2YXRhclVybCxcbiAgICBsb2dpbixcbiAgICBuYW1lLFxuICAgIC4uLm90aGVyUHJvcHNcbiAgfSA9IHByb3BzO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChBY3Rpb25CdXR0b24sIHtcbiAgICAuLi5vdGhlclByb3BzLFxuICAgIHJlZjogcmVmLFxuICAgIFwiYXJpYS1sYWJlbFwiOiBcIlVzZXIgbWVudVwiLFxuICAgIHByb21pbmVuY2U6IFwibG93XCIsXG4gICAgZmxleEdyb3c6IDEsXG4gICAgVU5TQUZFX2NsYXNzTmFtZTogY3NzKHtcbiAgICAgIGp1c3RpZnlDb250ZW50OiAnc3RhcnQnLFxuICAgICAgdGV4dEFsaWduOiAnc3RhcnQnXG4gICAgfSksXG4gICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3hzKEZsZXgsIHtcbiAgICAgIGFsaWduSXRlbXM6IFwiY2VudGVyXCIsXG4gICAgICBnYXA6IFwicmVndWxhclwiLFxuICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEF2YXRhciwge1xuICAgICAgICBzcmM6IGF2YXRhclVybCxcbiAgICAgICAgbmFtZTogbmFtZSAhPT0gbnVsbCAmJiBuYW1lICE9PSB2b2lkIDAgPyBuYW1lIDogdW5kZWZpbmVkLFxuICAgICAgICBzaXplOiBcInNtYWxsXCJcbiAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KENsZWFyU2xvdHMsIHtcbiAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3hzKEZsZXgsIHtcbiAgICAgICAgICBkaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgICAgICAgZ2FwOiBcInNtYWxsXCIsXG4gICAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgICAgICAgIHNpemU6IFwic21hbGxcIixcbiAgICAgICAgICAgIHdlaWdodDogXCJzZW1pYm9sZFwiLFxuICAgICAgICAgICAgY29sb3I6IFwibmV1dHJhbEVtcGhhc2lzXCIsXG4gICAgICAgICAgICBjaGlsZHJlbjogbmFtZVxuICAgICAgICAgIH0pLCBuYW1lID09PSBsb2dpbiA/IG51bGwgOiAvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgICAgICAgIHNpemU6IFwic21hbGxcIixcbiAgICAgICAgICAgIGNvbG9yOiBcIm5ldXRyYWxUZXJ0aWFyeVwiLFxuICAgICAgICAgICAgY2hpbGRyZW46IGxvZ2luXG4gICAgICAgICAgfSldXG4gICAgICAgIH0pXG4gICAgICB9KV1cbiAgICB9KVxuICB9KTtcbn0pO1xuXG4vLyBHaXQgY29udHJvbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmZ1bmN0aW9uIEdpdE1lbnUoKSB7XG4gIHZhciBfYXBwU2hlbGxEYXRhJGRhdGEsIF9hcHBTaGVsbERhdGEkZGF0YSRyZTtcbiAgY29uc3Qgc3RyaW5nRm9ybWF0dGVyID0gdXNlTG9jYWxpemVkU3RyaW5nRm9ybWF0dGVyKGwxMG5NZXNzYWdlcyk7XG4gIGNvbnN0IGRhdGEgPSB1c2VDb250ZXh0KEJyYW5jaEluZm9Db250ZXh0KTtcbiAgY29uc3QgW25ld0JyYW5jaERpYWxvZ1Zpc2libGUsIHRvZ2dsZU5ld0JyYW5jaERpYWxvZ10gPSB1c2VSZWR1Y2VyKHYgPT4gIXYsIGZhbHNlKTtcbiAgY29uc3QgW2RlbGV0ZUJyYW5jaERpYWxvZ1Zpc2libGUsIHRvZ2dsZURlbGV0ZUJyYW5jaERpYWxvZ10gPSB1c2VSZWR1Y2VyKHYgPT4gIXYsIGZhbHNlKTtcbiAgY29uc3QgWywgZGVsZXRlQnJhbmNoXSA9IHVzZU11dGF0aW9uKGdxbGBcbiAgICAgIG11dGF0aW9uIERlbGV0ZUJyYW5jaCgkcmVmSWQ6IElEISkge1xuICAgICAgICBkZWxldGVSZWYoaW5wdXQ6IHsgcmVmSWQ6ICRyZWZJZCB9KSB7XG4gICAgICAgICAgX190eXBlbmFtZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgYCk7XG4gIGNvbnN0IHJlcG9VUkwgPSBnZXRSZXBvVXJsKGRhdGEpO1xuICBjb25zdCBhcHBTaGVsbERhdGEgPSB1c2VDb250ZXh0KEdpdEh1YkFwcFNoZWxsRGF0YUNvbnRleHQpO1xuICBjb25zdCBmb3JrID0gKGFwcFNoZWxsRGF0YSA9PT0gbnVsbCB8fCBhcHBTaGVsbERhdGEgPT09IHZvaWQgMCB8fCAoX2FwcFNoZWxsRGF0YSRkYXRhID0gYXBwU2hlbGxEYXRhLmRhdGEpID09PSBudWxsIHx8IF9hcHBTaGVsbERhdGEkZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FwcFNoZWxsRGF0YSRkYXRhLnJlcG9zaXRvcnkpICYmICdmb3JrcycgaW4gYXBwU2hlbGxEYXRhLmRhdGEucmVwb3NpdG9yeSAmJiAoKF9hcHBTaGVsbERhdGEkZGF0YSRyZSA9IGFwcFNoZWxsRGF0YS5kYXRhLnJlcG9zaXRvcnkuZm9ya3Mubm9kZXMpID09PSBudWxsIHx8IF9hcHBTaGVsbERhdGEkZGF0YSRyZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FwcFNoZWxsRGF0YSRkYXRhJHJlWzBdKTtcbiAgY29uc3QgZ2l0TWVudUl0ZW1zID0gdXNlTWVtbygoKSA9PiB7XG4gICAgbGV0IGlzRGVmYXVsdEJyYW5jaCA9IGRhdGEuY3VycmVudEJyYW5jaCA9PT0gZGF0YS5kZWZhdWx0QnJhbmNoO1xuICAgIGxldCBpdGVtcyA9IFtdO1xuICAgIGxldCBicmFuY2hTZWN0aW9uID0gW3tcbiAgICAgIGtleTogJ25ldy1icmFuY2gnLFxuICAgICAgaWNvbjogZ2l0QnJhbmNoUGx1c0ljb24sXG4gICAgICBsYWJlbDogc3RyaW5nRm9ybWF0dGVyLmZvcm1hdCgnbmV3QnJhbmNoJylcbiAgICB9XTtcbiAgICBsZXQgcHJTZWN0aW9uID0gW107XG4gICAgbGV0IHJlcG9TZWN0aW9uID0gW3tcbiAgICAgIGtleTogJ3JlcG8nLFxuICAgICAgaWNvbjogZ2l0aHViSWNvbixcbiAgICAgIGhyZWY6IHJlcG9VUkwsXG4gICAgICB0YXJnZXQ6ICdfYmxhbmsnLFxuICAgICAgcmVsOiAnbm9vcGVuZXIgbm9yZWZlcnJlcicsXG4gICAgICBsYWJlbDogJ0dpdGh1YiByZXBvJyAvLyBUT0RPOiBsMTBuXG4gICAgfV07XG4gICAgaWYgKCFpc0RlZmF1bHRCcmFuY2gpIHtcbiAgICAgIGlmIChkYXRhLnB1bGxSZXF1ZXN0TnVtYmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcHJTZWN0aW9uLnB1c2goe1xuICAgICAgICAgIGtleTogJ2NyZWF0ZS1wdWxsLXJlcXVlc3QnLFxuICAgICAgICAgIGljb246IGdpdFB1bGxSZXF1ZXN0SWNvbixcbiAgICAgICAgICBocmVmOiBgJHtyZXBvVVJMfS9wdWxsL25ldy8ke2RhdGEuY3VycmVudEJyYW5jaH1gLFxuICAgICAgICAgIHRhcmdldDogJ19ibGFuaycsXG4gICAgICAgICAgcmVsOiAnbm9vcGVuZXIgbm9yZWZlcnJlcicsXG4gICAgICAgICAgbGFiZWw6IHN0cmluZ0Zvcm1hdHRlci5mb3JtYXQoJ2NyZWF0ZVB1bGxSZXF1ZXN0JylcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwclNlY3Rpb24ucHVzaCh7XG4gICAgICAgICAga2V5OiAndmlldy1wdWxsLXJlcXVlc3QnLFxuICAgICAgICAgIGljb246IGdpdFB1bGxSZXF1ZXN0SWNvbixcbiAgICAgICAgICBocmVmOiBgJHtyZXBvVVJMfS9wdWxsLyR7ZGF0YS5wdWxsUmVxdWVzdE51bWJlcn1gLFxuICAgICAgICAgIHRhcmdldDogJ19ibGFuaycsXG4gICAgICAgICAgcmVsOiAnbm9vcGVuZXIgbm9yZWZlcnJlcicsXG4gICAgICAgICAgbGFiZWw6IGBQdWxsIFJlcXVlc3QgIyR7ZGF0YS5wdWxsUmVxdWVzdE51bWJlcn1gXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGRhdGEucHVsbFJlcXVlc3ROdW1iZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBicmFuY2hTZWN0aW9uLnB1c2goe1xuICAgICAgICAgIGtleTogJ2RlbGV0ZS1icmFuY2gnLFxuICAgICAgICAgIGljb246IHRyYXNoMkljb24sXG4gICAgICAgICAgbGFiZWw6IHN0cmluZ0Zvcm1hdHRlci5mb3JtYXQoJ2RlbGV0ZUJyYW5jaCcpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZm9yaykge1xuICAgICAgcmVwb1NlY3Rpb24ucHVzaCh7XG4gICAgICAgIGtleTogJ2ZvcmsnLFxuICAgICAgICBpY29uOiBnaXRGb3JrSWNvbixcbiAgICAgICAgaHJlZjogYGh0dHBzOi8vZ2l0aHViLmNvbS8ke2Zvcmsub3duZXIubG9naW59LyR7Zm9yay5uYW1lfWAsXG4gICAgICAgIHRhcmdldDogJ19ibGFuaycsXG4gICAgICAgIHJlbDogJ25vb3BlbmVyIG5vcmVmZXJyZXInLFxuICAgICAgICBsYWJlbDogJ1ZpZXcgZm9yaycgLy8gVE9ETzogbDEwblxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChicmFuY2hTZWN0aW9uLmxlbmd0aCkge1xuICAgICAgaXRlbXMucHVzaCh7XG4gICAgICAgIGtleTogJ2JyYW5jaC1zZWN0aW9uJyxcbiAgICAgICAgbGFiZWw6IHN0cmluZ0Zvcm1hdHRlci5mb3JtYXQoJ2JyYW5jaGVzJyksXG4gICAgICAgIGNoaWxkcmVuOiBicmFuY2hTZWN0aW9uXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHByU2VjdGlvbi5sZW5ndGgpIHtcbiAgICAgIGl0ZW1zLnB1c2goe1xuICAgICAgICBrZXk6ICdwci1zZWN0aW9uJyxcbiAgICAgICAgbGFiZWw6IHN0cmluZ0Zvcm1hdHRlci5mb3JtYXQoJ3B1bGxSZXF1ZXN0cycpLFxuICAgICAgICBjaGlsZHJlbjogcHJTZWN0aW9uXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHJlcG9TZWN0aW9uLmxlbmd0aCkge1xuICAgICAgaXRlbXMucHVzaCh7XG4gICAgICAgIGtleTogJ3JlcG8tc2VjdGlvbicsXG4gICAgICAgIGxhYmVsOiAnUmVwb3NpdG9yeScsXG4gICAgICAgIC8vIFRPRE86IGwxMG5cbiAgICAgICAgY2hpbGRyZW46IHJlcG9TZWN0aW9uXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGl0ZW1zO1xuICB9LCBbZm9yaywgZGF0YS5jdXJyZW50QnJhbmNoLCBkYXRhLmRlZmF1bHRCcmFuY2gsIGRhdGEucHVsbFJlcXVlc3ROdW1iZXIsIHJlcG9VUkwsIHN0cmluZ0Zvcm1hdHRlcl0pO1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3hzKEZyYWdtZW50LCB7XG4gICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEFjdGlvbk1lbnUsIHtcbiAgICAgIFwiYXJpYS1sYWJlbFwiOiBcImdpdCBhY3Rpb25zXCIsXG4gICAgICBhbGlnbjogXCJlbmRcIixcbiAgICAgIGl0ZW1zOiBnaXRNZW51SXRlbXMsXG4gICAgICBvbkFjdGlvbjoga2V5ID0+IHtcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICBjYXNlICduZXctYnJhbmNoJzpcbiAgICAgICAgICAgIHRvZ2dsZU5ld0JyYW5jaERpYWxvZygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnZGVsZXRlLWJyYW5jaCc6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRvZ2dsZURlbGV0ZUJyYW5jaERpYWxvZygpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNoaWxkcmVuOiBpdGVtID0+IC8qI19fUFVSRV9fKi9qc3goU2VjdGlvbiwge1xuICAgICAgICBpdGVtczogaXRlbS5jaGlsZHJlbixcbiAgICAgICAgXCJhcmlhLWxhYmVsXCI6IGl0ZW0ubGFiZWwsXG4gICAgICAgIGNoaWxkcmVuOiBpdGVtID0+IC8qI19fUFVSRV9fKi9qc3hzKEl0ZW0kMSwge1xuICAgICAgICAgIHRleHRWYWx1ZTogaXRlbS5sYWJlbCxcbiAgICAgICAgICBocmVmOiBpdGVtLmhyZWYsXG4gICAgICAgICAgcmVsOiBpdGVtLnJlbCxcbiAgICAgICAgICB0YXJnZXQ6IGl0ZW0udGFyZ2V0LFxuICAgICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChJY29uLCB7XG4gICAgICAgICAgICBzcmM6IGl0ZW0uaWNvblxuICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBpdGVtLmxhYmVsXG4gICAgICAgICAgfSldXG4gICAgICAgIH0sIGl0ZW0ua2V5KVxuICAgICAgfSwgaXRlbS5rZXkpXG4gICAgfSksIC8qI19fUFVSRV9fKi9qc3goRGlhbG9nQ29udGFpbmVyLCB7XG4gICAgICBvbkRpc21pc3M6IHRvZ2dsZU5ld0JyYW5jaERpYWxvZyxcbiAgICAgIGNoaWxkcmVuOiBuZXdCcmFuY2hEaWFsb2dWaXNpYmxlICYmIC8qI19fUFVSRV9fKi9qc3goQ3JlYXRlQnJhbmNoRGlhbG9nLCB7XG4gICAgICAgIG9uRGlzbWlzczogdG9nZ2xlTmV3QnJhbmNoRGlhbG9nLFxuICAgICAgICBvbkNyZWF0ZTogYnJhbmNoTmFtZSA9PiB7XG4gICAgICAgICAgdG9nZ2xlTmV3QnJhbmNoRGlhbG9nKCk7XG4gICAgICAgICAgcm91dGVyLnB1c2gocm91dGVyLmhyZWYucmVwbGFjZSgvXFwvYnJhbmNoXFwvW14vXSsvLCAnL2JyYW5jaC8nICsgZW5jb2RlVVJJQ29tcG9uZW50KGJyYW5jaE5hbWUpKSk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSksIC8qI19fUFVSRV9fKi9qc3goRGlhbG9nQ29udGFpbmVyLCB7XG4gICAgICBvbkRpc21pc3M6IHRvZ2dsZURlbGV0ZUJyYW5jaERpYWxvZyxcbiAgICAgIGNoaWxkcmVuOiBkZWxldGVCcmFuY2hEaWFsb2dWaXNpYmxlICYmIC8qI19fUFVSRV9fKi9qc3hzKEFsZXJ0RGlhbG9nLCB7XG4gICAgICAgIHRpdGxlOiBcIkRlbGV0ZSBicmFuY2hcIixcbiAgICAgICAgdG9uZTogXCJjcml0aWNhbFwiLFxuICAgICAgICBjYW5jZWxMYWJlbDogXCJDYW5jZWxcIixcbiAgICAgICAgcHJpbWFyeUFjdGlvbkxhYmVsOiBcIlllcywgZGVsZXRlXCIsXG4gICAgICAgIGF1dG9Gb2N1c0J1dHRvbjogXCJjYW5jZWxcIixcbiAgICAgICAgb25QcmltYXJ5QWN0aW9uOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgZGVsZXRlQnJhbmNoKHtcbiAgICAgICAgICAgIHJlZklkOiBkYXRhLmJyYW5jaE5hbWVUb0lkLmdldChkYXRhLmN1cnJlbnRCcmFuY2gpXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcm91dGVyLnB1c2gocm91dGVyLmhyZWYucmVwbGFjZSgvXFwvYnJhbmNoXFwvW14vXSsvLCAnL2JyYW5jaC8nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRhdGEuZGVmYXVsdEJyYW5jaCkpKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2hpbGRyZW46IFtcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhlIFxcXCJcIiwgZGF0YS5jdXJyZW50QnJhbmNoLCBcIlxcXCIgYnJhbmNoPyBUaGlzIGNhbm5vdCBiZSB1bmRvbmUuXCJdXG4gICAgICB9KVxuICAgIH0pXVxuICB9KTtcbn1cblxuLy8gVXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmZ1bmN0aW9uIHVzZVVzZXJEYXRhKCkge1xuICBjb25zdCBjb25maWcgPSB1c2VDb25maWcoKTtcbiAgY29uc3QgdXNlciA9IHVzZVZpZXdlcigpO1xuICBjb25zdCByYXdDbG91ZEluZm8gPSB1c2VSYXdDbG91ZEluZm8oKTtcbiAgaWYgKHJhd0Nsb3VkSW5mbykge1xuICAgIGlmIChyYXdDbG91ZEluZm8gPT09ICd1bmF1dGhvcml6ZWQnKSB7XG4gICAgICByZXR1cm4gcmF3Q2xvdWRJbmZvO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgYXZhdGFyVXJsOiByYXdDbG91ZEluZm8udXNlci5hdmF0YXJVcmwsXG4gICAgICBsb2dpbjogcmF3Q2xvdWRJbmZvLnVzZXIuZW1haWwsXG4gICAgICBuYW1lOiByYXdDbG91ZEluZm8udXNlci5uYW1lXG4gICAgfTtcbiAgfVxuICBpZiAoaXNHaXRIdWJDb25maWcoY29uZmlnKSAmJiB1c2VyKSB7XG4gICAgdmFyIF91c2VyJG5hbWU7XG4gICAgcmV0dXJuIHtcbiAgICAgIGF2YXRhclVybDogdXNlci5hdmF0YXJVcmwsXG4gICAgICBsb2dpbjogdXNlci5sb2dpbixcbiAgICAgIG5hbWU6IChfdXNlciRuYW1lID0gdXNlci5uYW1lKSAhPT0gbnVsbCAmJiBfdXNlciRuYW1lICE9PSB2b2lkIDAgPyBfdXNlciRuYW1lIDogdXNlci5sb2dpblxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuY29uc3QgU2lkZWJhckNvbnRleHQgPSAvKiNfX1BVUkVfXyovY3JlYXRlQ29udGV4dChudWxsKTtcbmZ1bmN0aW9uIHVzZVNpZGViYXIoKSB7XG4gIGxldCBjb250ZXh0ID0gdXNlQ29udGV4dChTaWRlYmFyQ29udGV4dCk7XG4gIGlmICghY29udGV4dCkge1xuICAgIHRocm93IG5ldyBFcnJvcigndXNlU2lkZWJhciBtdXN0IGJlIHdpdGhpbiBhIFNpZGViYXJQcm92aWRlcicpO1xuICB9XG4gIHJldHVybiBjb250ZXh0O1xufVxuY29uc3QgYnJlYWtwb2ludE5hbWVzID0gdHlwZWRLZXlzKGJyZWFrcG9pbnRzKTtcbmZ1bmN0aW9uIFNpZGViYXJQcm92aWRlcihwcm9wcykge1xuICBjb25zdCBtYXRjaGVkQnJlYWtwb2ludHMgPSB1c2VCcmVha3BvaW50KCk7XG4gIGNvbnN0IHN0YXRlID0gdXNlT3ZlcmxheVRyaWdnZXJTdGF0ZSh7XG4gICAgZGVmYXVsdE9wZW46IG1hdGNoZWRCcmVha3BvaW50cy5pbmNsdWRlcygnZGVza3RvcCcpXG4gIH0pO1xuICBsZXQgYnJlYWtwb2ludEluZGV4ID0gYnJlYWtwb2ludE5hbWVzLmluZGV4T2YobWF0Y2hlZEJyZWFrcG9pbnRzWzBdKTtcbiAgbGV0IHByZXZpb3VzSW5kZXggPSB1c2VQcmV2aW91cyQxKGJyZWFrcG9pbnRJbmRleCkgfHwgMDtcbiAgdXNlVXBkYXRlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgbGFyZ2VyID0gcHJldmlvdXNJbmRleCA8IGJyZWFrcG9pbnRJbmRleDtcbiAgICBpZiAobGFyZ2VyICYmIGJyZWFrcG9pbnRJbmRleCA+PSAyKSB7XG4gICAgICBzdGF0ZS5vcGVuKCk7XG4gICAgfSBlbHNlIGlmIChicmVha3BvaW50SW5kZXggPCAyKSB7XG4gICAgICBzdGF0ZS5jbG9zZSgpO1xuICAgIH1cbiAgfSwgW21hdGNoZWRCcmVha3BvaW50c10pO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChTaWRlYmFyQ29udGV4dC5Qcm92aWRlciwge1xuICAgIHZhbHVlOiBzdGF0ZSxcbiAgICBjaGlsZHJlbjogcHJvcHMuY2hpbGRyZW5cbiAgfSk7XG59XG5mdW5jdGlvbiBTaWRlYmFyUGFuZWwoKSB7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhWU3RhY2ssIHtcbiAgICBiYWNrZ3JvdW5kQ29sb3I6IFwic3VyZmFjZVwiLFxuICAgIGhlaWdodDogXCIxMDAlXCIsXG4gICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KFNpZGViYXJIZWFkZXIsIHt9KSwgLyojX19QVVJFX18qL2pzeChTaWRlYmFyR2l0QWN0aW9ucywge30pLCAvKiNfX1BVUkVfXyovanN4KFNpZGViYXJOYXYsIHt9KSwgLyojX19QVVJFX18qL2pzeChTaWRlYmFyRm9vdGVyLCB7fSldXG4gIH0pO1xufVxuZnVuY3Rpb24gU2lkZWJhckhlYWRlcigpIHtcbiAgbGV0IGlzTG9jYWxOb0Nsb3VkID0gdXNlSXNMb2NhbE5vQ2xvdWQoKTtcbiAgbGV0IHtcbiAgICBicmFuZE1hcmssXG4gICAgYnJhbmROYW1lXG4gIH0gPSB1c2VCcmFuZCgpO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeHMoSFN0YWNrLCB7XG4gICAgYWxpZ25JdGVtczogXCJjZW50ZXJcIixcbiAgICBnYXA6IFwicmVndWxhclwiLFxuICAgIHBhZGRpbmdZOiBcInJlZ3VsYXJcIixcbiAgICBwYWRkaW5nWDogXCJtZWRpdW1cIixcbiAgICBoZWlnaHQ6IHtcbiAgICAgIG1vYmlsZTogJ2VsZW1lbnQubGFyZ2UnLFxuICAgICAgdGFibGV0OiAnZWxlbWVudC54bGFyZ2UnXG4gICAgfSxcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3hzKEhTdGFjaywge1xuICAgICAgZmxleDogdHJ1ZSxcbiAgICAgIGFsaWduSXRlbXM6IFwiY2VudGVyXCIsXG4gICAgICBnYXA6IFwicmVndWxhclwiLFxuICAgICAgVU5TQUZFX2NsYXNzTmFtZTogY3NzKHtcbiAgICAgICAgLy8gbGV0IGNvbnN1bWVycyB1c2UgXCJjdXJyZW50Q29sb3JcIiBpbiBTVkcgZm9yIHRoZWlyIGJyYW5kIG1hcmtcbiAgICAgICAgY29sb3I6IHRva2VuU2NoZW1hLmNvbG9yLmZvcmVncm91bmQubmV1dHJhbEVtcGhhc2lzLFxuICAgICAgICAvLyBlbnN1cmUgdGhhdCB0aGUgYnJhbmQgbWFyayBkb2Vzbid0IGdldCBzcXVhc2hlZFxuICAgICAgICAnJiA6Zmlyc3QtY2hpbGQnOiB7XG4gICAgICAgICAgZmxleFNocmluazogMFxuICAgICAgICB9XG4gICAgICB9KSxcbiAgICAgIGNoaWxkcmVuOiBbYnJhbmRNYXJrLCAvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgICAgY29sb3I6IFwiaW5oZXJpdFwiLFxuICAgICAgICB3ZWlnaHQ6IFwibWVkaXVtXCIsXG4gICAgICAgIHRydW5jYXRlOiB0cnVlLFxuICAgICAgICBjaGlsZHJlbjogYnJhbmROYW1lXG4gICAgICB9KV1cbiAgICB9KSwgaXNMb2NhbE5vQ2xvdWQgJiYgLyojX19QVVJFX18qL2pzeChUaGVtZU1lbnUsIHt9KV1cbiAgfSk7XG59XG5cbi8vIHdoZW4gbG9jYWwgbW9kZSB3L28gY2xvdWQgdGhlcmUncyBubyB1c2VyIGFjdGlvbnMsIHNvIHdlIGhpZGUgdGhlIGZvb3RlciBhbmRcbi8vIG1vdmUgdGhlIHRoZW1lIG1lbnUgdG8gdGhlIGhlYWRlclxuZnVuY3Rpb24gU2lkZWJhckZvb3RlcigpIHtcbiAgbGV0IGlzTG9jYWxOb0Nsb3VkID0gdXNlSXNMb2NhbE5vQ2xvdWQoKTtcbiAgaWYgKGlzTG9jYWxOb0Nsb3VkKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3hzKEhTdGFjaywge1xuICAgIGFsaWduSXRlbXM6IFwiY2VudGVyXCIsXG4gICAgcGFkZGluZ1k6IFwicmVndWxhclwiLFxuICAgIHBhZGRpbmdYOiBcIm1lZGl1bVwiLFxuICAgIGdhcDogXCJyZWd1bGFyXCIsXG4gICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KFVzZXJBY3Rpb25zLCB7fSksIC8qI19fUFVSRV9fKi9qc3goVGhlbWVNZW51LCB7fSldXG4gIH0pO1xufVxuXG4vLyBubyBnaXQgYWN0aW9ucyBpbiBsb2NhbCBtb2RlXG5mdW5jdGlvbiBTaWRlYmFyR2l0QWN0aW9ucygpIHtcbiAgbGV0IGNvbmZpZyA9IHVzZUNvbmZpZygpO1xuICBpZiAoaXNMb2NhbENvbmZpZyhjb25maWcpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3hzKEhTdGFjaywge1xuICAgIGdhcDogXCJyZWd1bGFyXCIsXG4gICAgcGFkZGluZ1k6IFwicmVndWxhclwiLFxuICAgIHBhZGRpbmdYOiBcIm1lZGl1bVwiLFxuICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChCcmFuY2hQaWNrZXIsIHt9KSwgLyojX19QVVJFX18qL2pzeChHaXRNZW51LCB7fSldXG4gIH0pO1xufVxuZnVuY3Rpb24gU2lkZWJhckRpYWxvZygpIHtcbiAgY29uc3Qgc3RhdGUgPSB1c2VTaWRlYmFyKCk7XG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuXG4gIC8vIGNsb3NlIHRoZSBzaWRlYmFyIHdoZW4gdGhlIHJvdXRlIGNoYW5nZXNcbiAgdXNlVXBkYXRlRWZmZWN0KCgpID0+IHtcbiAgICBzdGF0ZS5jbG9zZSgpO1xuICB9LCBbcm91dGVyLmhyZWZdKTtcbiAgbGV0IGRpYWxvZ1JlZiA9IHVzZVJlZihudWxsKTtcbiAgbGV0IHtcbiAgICBtb2RhbFByb3BzLFxuICAgIHVuZGVybGF5UHJvcHNcbiAgfSA9IHVzZU1vZGFsT3ZlcmxheSh7XG4gICAgaXNEaXNtaXNzYWJsZTogdHJ1ZVxuICB9LCBzdGF0ZSwgZGlhbG9nUmVmKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3hzKEZyYWdtZW50LCB7XG4gICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEJsYW5rZXQsIHtcbiAgICAgIC4uLnVuZGVybGF5UHJvcHMsXG4gICAgICBpc09wZW46IHN0YXRlLmlzT3BlbixcbiAgICAgIHpJbmRleDogMTBcbiAgICB9KSwgLyojX19QVVJFX18qL2pzeHMoXCJkaXZcIiwge1xuICAgICAgXCJkYXRhLXZpc2libGVcIjogc3RhdGUuaXNPcGVuLFxuICAgICAgaWQ6IFNJREVfUEFORUxfSUQsXG4gICAgICByZWY6IGRpYWxvZ1JlZixcbiAgICAgIC4uLm1vZGFsUHJvcHMsXG4gICAgICAvLyBzdHlsZXNcbiAgICAgIGNsYXNzTmFtZTogY3NzKHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiB0b2tlblNjaGVtYS5jb2xvci5iYWNrZ3JvdW5kLnN1cmZhY2UsXG4gICAgICAgIGJveFNoYWRvdzogYCR7dG9rZW5TY2hlbWEuc2l6ZS5zaGFkb3cubGFyZ2V9ICR7dG9rZW5TY2hlbWEuY29sb3Iuc2hhZG93LnJlZ3VsYXJ9YCxcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcbiAgICAgICAgaW5zZXQ6IDAsXG4gICAgICAgIGluc2V0SW5saW5lRW5kOiAnYXV0bycsXG4gICAgICAgIC8vIGVuc3VyZSB0aGF0IHRoZXJlJ3MgYWx3YXlzIGVub3VnaCBvZiBndXR0ZXIgZm9yIHRoZSB1c2VyIHRvIHByZXNzXG4gICAgICAgIC8vIGFuZCBleGl0IHRoZSBzaWRlYmFyXG4gICAgICAgIG1heFdpZHRoOiBgY2FsYygxMDAlIC0gJHt0b2tlblNjaGVtYS5zaXplLmVsZW1lbnQubWVkaXVtfSlgLFxuICAgICAgICBtaW5XaWR0aDogdG9rZW5TY2hlbWEuc2l6ZS5zY2FsZVszMDAwXSxcbiAgICAgICAgb3V0bGluZTogMCxcbiAgICAgICAgcG9pbnRlckV2ZW50czogJ25vbmUnLFxuICAgICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcbiAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCgtMTAwJSknLFxuICAgICAgICB2aXNpYmlsaXR5OiAnaGlkZGVuJyxcbiAgICAgICAgekluZGV4OiAxMCxcbiAgICAgICAgLy8gZXhpdCBhbmltYXRpb25cbiAgICAgICAgdHJhbnNpdGlvbjogW3RyYW5zaXRpb24oJ3RyYW5zZm9ybScsIHtcbiAgICAgICAgICBlYXNpbmc6ICdlYXNlSW4nLFxuICAgICAgICAgIGR1cmF0aW9uOiAnc2hvcnQnXG4gICAgICAgICAgLy8gZGVsYXk6ICdzaG9ydCcsXG4gICAgICAgIH0pLCB0cmFuc2l0aW9uKCd2aXNpYmlsaXR5Jywge1xuICAgICAgICAgIGRlbGF5OiAncmVndWxhcicsXG4gICAgICAgICAgZHVyYXRpb246IDAsXG4gICAgICAgICAgZWFzaW5nOiAnbGluZWFyJ1xuICAgICAgICB9KV0uam9pbignLCAnKSxcbiAgICAgICAgJyZbZGF0YS12aXNpYmxlPXRydWVdJzoge1xuICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoMCknLFxuICAgICAgICAgIC8vIGVudGVyIGFuaW1hdGlvblxuICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zaXRpb24oJ3RyYW5zZm9ybScsIHtcbiAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXQnXG4gICAgICAgICAgfSksXG4gICAgICAgICAgcG9pbnRlckV2ZW50czogJ2F1dG8nLFxuICAgICAgICAgIHZpc2liaWxpdHk6ICd2aXNpYmxlJ1xuICAgICAgICB9XG4gICAgICB9KSxcbiAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChTaWRlYmFySGVhZGVyLCB7fSksIC8qI19fUFVSRV9fKi9qc3goU2lkZWJhckdpdEFjdGlvbnMsIHt9KSwgLyojX19QVVJFX18qL2pzeChTaWRlYmFyTmF2LCB7fSksIC8qI19fUFVSRV9fKi9qc3goU2lkZWJhckZvb3Rlciwge30pLCAvKiNfX1BVUkVfXyovanN4KERpc21pc3NCdXR0b24sIHtcbiAgICAgICAgb25EaXNtaXNzOiBzdGF0ZS5jbG9zZVxuICAgICAgfSldXG4gICAgfSldXG4gIH0pO1xufVxuZnVuY3Rpb24gU2lkZWJhck5hdigpIHtcbiAgY29uc3Qge1xuICAgIGJhc2VQYXRoXG4gIH0gPSB1c2VBcHBTdGF0ZSgpO1xuICBjb25zdCBzdHJpbmdGb3JtYXR0ZXIgPSB1c2VMb2NhbGl6ZWRTdHJpbmdGb3JtYXR0ZXIobDEwbk1lc3NhZ2VzKTtcbiAgY29uc3QgbmF2SXRlbXMgPSB1c2VOYXZJdGVtcygpO1xuICBjb25zdCBpc0N1cnJlbnQgPSB1c2VJc0N1cnJlbnQoKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goU2Nyb2xsVmlldyQxLCB7XG4gICAgZmxleDogdHJ1ZSxcbiAgICBwYWRkaW5nWTogXCJsYXJnZVwiLFxuICAgIHBhZGRpbmdFbmQ6IFwibWVkaXVtXCIsXG4gICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3hzKE5hdkxpc3QsIHtcbiAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChOYXZJdGVtLCB7XG4gICAgICAgIGhyZWY6IGJhc2VQYXRoLFxuICAgICAgICBcImFyaWEtY3VycmVudFwiOiBpc0N1cnJlbnQoYmFzZVBhdGgsIHtcbiAgICAgICAgICBleGFjdDogdHJ1ZVxuICAgICAgICB9KSxcbiAgICAgICAgY2hpbGRyZW46IHN0cmluZ0Zvcm1hdHRlci5mb3JtYXQoJ2Rhc2hib2FyZCcpXG4gICAgICB9KSwgbmF2SXRlbXMubWFwKGl0ZW0gPT4gcmVuZGVySXRlbU9yR3JvdXAoaXRlbSwgaXNDdXJyZW50KSldXG4gICAgfSlcbiAgfSk7XG59XG5cbi8vIFV0aWxzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmZ1bmN0aW9uIHVzZUlzTG9jYWxOb0Nsb3VkKCkge1xuICBjb25zdCBjb25maWcgPSB1c2VDb25maWcoKTtcbiAgcmV0dXJuIGlzTG9jYWxDb25maWcoY29uZmlnKSAmJiAhY29uZmlnLmNsb3VkO1xufVxuZnVuY3Rpb24gdXNlSXNDdXJyZW50KCkge1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgcmV0dXJuIHVzZUNhbGxiYWNrKChocmVmLCB7XG4gICAgZXhhY3QgPSBmYWxzZVxuICB9ID0ge30pID0+IHtcbiAgICBpZiAoZXhhY3QpIHtcbiAgICAgIHJldHVybiBocmVmID09PSByb3V0ZXIuaHJlZiA/ICdwYWdlJyA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIGhyZWYgPT09IHJvdXRlci5ocmVmIHx8IHJvdXRlci5ocmVmLnN0YXJ0c1dpdGgoYCR7aHJlZn0vYCkgPyAncGFnZScgOiB1bmRlZmluZWQ7XG4gIH0sIFtyb3V0ZXIuaHJlZl0pO1xufVxuXG4vLyBSZW5kZXJlcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmxldCBkaXZpZGVyQ291bnQgPSAwO1xuZnVuY3Rpb24gcmVuZGVySXRlbU9yR3JvdXAoaXRlbU9yR3JvdXAsIGlzQ3VycmVudCkge1xuICBpZiAoJ2lzRGl2aWRlcicgaW4gaXRlbU9yR3JvdXApIHtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChEaXZpZGVyLCB7fSwgZGl2aWRlckNvdW50KyspO1xuICB9XG4gIGlmICgnY2hpbGRyZW4nIGluIGl0ZW1Pckdyb3VwKSB7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goTmF2R3JvdXAsIHtcbiAgICAgIHRpdGxlOiBpdGVtT3JHcm91cC50aXRsZSxcbiAgICAgIGNoaWxkcmVuOiBpdGVtT3JHcm91cC5jaGlsZHJlbi5tYXAoY2hpbGQgPT4gcmVuZGVySXRlbU9yR3JvdXAoY2hpbGQsIGlzQ3VycmVudCkpXG4gICAgfSwgaXRlbU9yR3JvdXAudGl0bGUpO1xuICB9XG4gIGxldCBjaGFuZ2VFbGVtZW50ID0gKCgpID0+IHtcbiAgICBpZiAoIWl0ZW1Pckdyb3VwLmNoYW5nZWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdHlwZW9mIGl0ZW1Pckdyb3VwLmNoYW5nZWQgPT09ICdudW1iZXInID8gLyojX19QVVJFX18qL2pzeHMoQmFkZ2UsIHtcbiAgICAgIHRvbmU6IFwiYWNjZW50XCIsXG4gICAgICBtYXJnaW5TdGFydDogXCJhdXRvXCIsXG4gICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goVGV4dCwge1xuICAgICAgICBjaGlsZHJlbjogaXRlbU9yR3JvdXAuY2hhbmdlZFxuICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goVGV4dCwge1xuICAgICAgICB2aXN1YWxseUhpZGRlbjogdHJ1ZSxcbiAgICAgICAgY2hpbGRyZW46IHBsdXJhbGl6ZShpdGVtT3JHcm91cC5jaGFuZ2VkLCB7XG4gICAgICAgICAgc2luZ3VsYXI6ICdjaGFuZ2UnLFxuICAgICAgICAgIHBsdXJhbDogJ2NoYW5nZXMnLFxuICAgICAgICAgIGluY2x1c2l2ZTogZmFsc2VcbiAgICAgICAgfSlcbiAgICAgIH0pXVxuICAgIH0pIDogLyojX19QVVJFX18qL2pzeChTdGF0dXNMaWdodCwge1xuICAgICAgdG9uZTogXCJhY2NlbnRcIixcbiAgICAgIG1hcmdpblN0YXJ0OiBcImF1dG9cIixcbiAgICAgIFwiYXJpYS1sYWJlbFwiOiBcIkNoYW5nZWRcIixcbiAgICAgIHJvbGU6IFwic3RhdHVzXCJcbiAgICB9KTtcbiAgfSkoKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3hzKE5hdkl0ZW0sIHtcbiAgICBocmVmOiBpdGVtT3JHcm91cC5ocmVmLFxuICAgIFwiYXJpYS1jdXJyZW50XCI6IGlzQ3VycmVudChpdGVtT3JHcm91cC5ocmVmKSxcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goVGV4dCwge1xuICAgICAgdHJ1bmNhdGU6IHRydWUsXG4gICAgICB0aXRsZTogaXRlbU9yR3JvdXAubGFiZWwsXG4gICAgICBjaGlsZHJlbjogaXRlbU9yR3JvdXAubGFiZWxcbiAgICB9KSwgY2hhbmdlRWxlbWVudF1cbiAgfSwgaXRlbU9yR3JvdXAua2V5KTtcbn1cblxuY29uc3QgUGFnZUNvbnRleHQgPSAvKiNfX1BVUkVfXyovY3JlYXRlQ29udGV4dCh7XG4gIGNvbnRhaW5lcldpZHRoOiAnbWVkaXVtJ1xufSk7XG5jb25zdCBQYWdlUm9vdCA9ICh7XG4gIGNoaWxkcmVuLFxuICBjb250YWluZXJXaWR0aCA9ICdtZWRpdW0nXG59KSA9PiB7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFBhZ2VDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IHtcbiAgICAgIGNvbnRhaW5lcldpZHRoXG4gICAgfSxcbiAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChGbGV4LCB7XG4gICAgICBlbGVtZW50VHlwZTogXCJtYWluXCIsXG4gICAgICBkaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgICBpZDogTUFJTl9QQU5FTF9JRCxcbiAgICAgIGZsZXg6IHRydWUsXG4gICAgICBoZWlnaHQ6IFwiMTAwJVwiXG4gICAgICAvLyBmaXggZmxleGJveCBpc3N1ZXNcbiAgICAgICxcbiAgICAgIG1pbkhlaWdodDogMCxcbiAgICAgIG1pbldpZHRoOiAwLFxuICAgICAgY2hpbGRyZW46IGNoaWxkcmVuXG4gICAgfSlcbiAgfSk7XG59O1xuY29uc3QgUGFnZUhlYWRlciA9ICh7XG4gIGNoaWxkcmVuXG59KSA9PiB7XG4gIGNvbnN0IHNpZGViYXJTdGF0ZSA9IHVzZVNpZGViYXIoKTtcbiAgY29uc3QgbWVudUJ1dHRvblJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3Qge1xuICAgIGRpcmVjdGlvblxuICB9ID0gdXNlTG9jYWxlKCk7XG4gIGxldCBpY29uID0gc2lkZWJhclN0YXRlLmlzT3BlbiA/IHBhbmVsTGVmdENsb3NlSWNvbiA6IHBhbmVsTGVmdE9wZW5JY29uO1xuICBpZiAoZGlyZWN0aW9uID09PSAncnRsJykge1xuICAgIGljb24gPSBzaWRlYmFyU3RhdGUuaXNPcGVuID8gcGFuZWxSaWdodENsb3NlSWNvbiA6IHBhbmVsUmlnaHRPcGVuSWNvbjtcbiAgfVxuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChCb3gsIHtcbiAgICBib3JkZXJCb3R0b206IFwibXV0ZWRcIixcbiAgICBlbGVtZW50VHlwZTogXCJoZWFkZXJcIixcbiAgICBoZWlnaHQ6IHtcbiAgICAgIG1vYmlsZTogJ2VsZW1lbnQubGFyZ2UnLFxuICAgICAgdGFibGV0OiAnZWxlbWVudC54bGFyZ2UnXG4gICAgfSxcbiAgICBmbGV4U2hyaW5rOiAwLFxuICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KEJveCwge1xuICAgICAgbWluSGVpZ2h0OiAwLFxuICAgICAgbWluV2lkdGg6IDAsXG4gICAgICBwYWRkaW5nWDoge1xuICAgICAgICBtb2JpbGU6ICdtZWRpdW0nLFxuICAgICAgICB0YWJsZXQ6ICd4bGFyZ2UnLFxuICAgICAgICBkZXNrdG9wOiAneHhsYXJnZSdcbiAgICAgIH0sXG4gICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeHMoRmxleCwge1xuICAgICAgICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLFxuICAgICAgICBnYXA6IHtcbiAgICAgICAgICBtb2JpbGU6ICdzbWFsbCcsXG4gICAgICAgICAgdGFibGV0OiAncmVndWxhcidcbiAgICAgICAgfSxcbiAgICAgICAgaGVpZ2h0OiB7XG4gICAgICAgICAgbW9iaWxlOiAnZWxlbWVudC5sYXJnZScsXG4gICAgICAgICAgdGFibGV0OiAnZWxlbWVudC54bGFyZ2UnXG4gICAgICAgIH0sXG4gICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChBY3Rpb25CdXR0b24sIHtcbiAgICAgICAgICBwcm9taW5lbmNlOiBcImxvd1wiLFxuICAgICAgICAgIFwiYXJpYS1sYWJlbFwiOiBcIk9wZW4gYXBwIG5hdmlnYXRpb25cIixcbiAgICAgICAgICBcImFyaWEtcHJlc3NlZFwiOiBzaWRlYmFyU3RhdGUuaXNPcGVuLFxuICAgICAgICAgIGlzSGlkZGVuOiBzaWRlYmFyU3RhdGUuaXNPcGVuID8ge1xuICAgICAgICAgICAgYWJvdmU6ICd0YWJsZXQnXG4gICAgICAgICAgfSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICBvblByZXNzOiBzaWRlYmFyU3RhdGUudG9nZ2xlLFxuICAgICAgICAgIHJlZjogbWVudUJ1dHRvblJlZixcbiAgICAgICAgICBVTlNBRkVfY2xhc3NOYW1lOiBjc3Moe1xuICAgICAgICAgICAgbWFyZ2luSW5saW5lU3RhcnQ6IGBjYWxjKCR7dG9rZW5TY2hlbWEuc2l6ZS5zcGFjZS5yZWd1bGFyfSAqIC0xKWBcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChJY29uLCB7XG4gICAgICAgICAgICBzcmM6IGljb25cbiAgICAgICAgICB9KVxuICAgICAgICB9KSwgY2hpbGRyZW5dXG4gICAgICB9KVxuICAgIH0pXG4gIH0pO1xufTtcbmNvbnN0IFBhZ2VCb2R5ID0gKHtcbiAgY2hpbGRyZW4sXG4gIGlzU2Nyb2xsYWJsZVxufSkgPT4ge1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChTY3JvbGxWaWV3LCB7XG4gICAgaXNEaXNhYmxlZDogIWlzU2Nyb2xsYWJsZSxcbiAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChQYWdlQ29udGFpbmVyXG4gICAgLy8gcGFkZGluZyBvbiB0aGUgY29udGFpbmVyIHNvIGRlc2NlbmRhbnRzIGNhbiB1c2Ugc3RpY2t5IHBvc2l0aW9uaW5nXG4gICAgLy8gd2l0aCBzaW1wbGUgcmVsYXRpdmUgb2Zmc2V0c1xuICAgICwge1xuICAgICAgcGFkZGluZ1k6IFwieHhsYXJnZVwiLFxuICAgICAgY2hpbGRyZW46IGNoaWxkcmVuXG4gICAgfSlcbiAgfSk7XG59O1xuY29uc3QgUGFnZUNvbnRhaW5lciA9IHByb3BzID0+IHtcbiAgY29uc3Qge1xuICAgIGNvbnRhaW5lcldpZHRoXG4gIH0gPSB1c2VDb250ZXh0KFBhZ2VDb250ZXh0KTtcbiAgY29uc3QgbWF4V2lkdGggPSBjb250YWluZXJXaWR0aCA9PT0gJ25vbmUnID8gdW5kZWZpbmVkIDogYGNvbnRhaW5lci4ke2NvbnRhaW5lcldpZHRofWA7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KEJveCwge1xuICAgIG1pbkhlaWdodDogMCxcbiAgICBtaW5XaWR0aDogMCxcbiAgICBtYXhXaWR0aDogbWF4V2lkdGhcbiAgICAvLyBtYXJnaW5YPVwiYXV0b1wiXG4gICAgLFxuICAgIHBhZGRpbmdYOiB7XG4gICAgICBtb2JpbGU6ICdtZWRpdW0nLFxuICAgICAgdGFibGV0OiAneGxhcmdlJyxcbiAgICAgIGRlc2t0b3A6ICd4eGxhcmdlJ1xuICAgIH0sXG4gICAgLi4ucHJvcHNcbiAgfSk7XG59O1xuXG5jbGFzcyBGaWVsZERhdGFFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9ICdGaWVsZERhdGFFcnJvcic7XG4gIH1cbn1cblxuZnVuY3Rpb24gYXNzZXJ0UmVxdWlyZWQodmFsdWUsIHZhbGlkYXRpb24sIGxhYmVsKSB7XG4gIGlmICh2YWx1ZSA9PT0gbnVsbCAmJiB2YWxpZGF0aW9uICE9PSBudWxsICYmIHZhbGlkYXRpb24gIT09IHZvaWQgMCAmJiB2YWxpZGF0aW9uLmlzUmVxdWlyZWQpIHtcbiAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoYCR7bGFiZWx9IGlzIHJlcXVpcmVkYCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlKGNvbmZpZykge1xuICByZXR1cm4ge1xuICAgIGtpbmQ6ICdmb3JtJyxcbiAgICBJbnB1dDogY29uZmlnLklucHV0LFxuICAgIGRlZmF1bHRWYWx1ZTogY29uZmlnLmRlZmF1bHRWYWx1ZSxcbiAgICBwYXJzZTogY29uZmlnLnBhcnNlLFxuICAgIHNlcmlhbGl6ZTogY29uZmlnLnNlcmlhbGl6ZSxcbiAgICB2YWxpZGF0ZTogY29uZmlnLnZhbGlkYXRlLFxuICAgIHJlYWRlcjoge1xuICAgICAgcGFyc2UodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGNvbmZpZy52YWxpZGF0ZShjb25maWcucGFyc2UodmFsdWUpKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbmNvbnN0IGFycmF5VmFsdWVzVG9FbGVtZW50S2V5cyA9IG5ldyBXZWFrTWFwKCk7XG5sZXQgY291bnRlciA9IDA7XG5mdW5jdGlvbiBnZXRLZXlzRm9yQXJyYXlWYWx1ZSh2YWx1ZSkge1xuICBpZiAoIWFycmF5VmFsdWVzVG9FbGVtZW50S2V5cy5oYXModmFsdWUpKSB7XG4gICAgYXJyYXlWYWx1ZXNUb0VsZW1lbnRLZXlzLnNldCh2YWx1ZSwgQXJyYXkuZnJvbSh7XG4gICAgICBsZW5ndGg6IHZhbHVlLmxlbmd0aFxuICAgIH0sIGdldE5ld0FycmF5RWxlbWVudEtleSkpO1xuICB9XG4gIHJldHVybiBhcnJheVZhbHVlc1RvRWxlbWVudEtleXMuZ2V0KHZhbHVlKTtcbn1cbmZ1bmN0aW9uIHNldEtleXNGb3JBcnJheVZhbHVlKHZhbHVlLCBlbGVtZW50SWRzKSB7XG4gIGFycmF5VmFsdWVzVG9FbGVtZW50S2V5cy5zZXQodmFsdWUsIGVsZW1lbnRJZHMpO1xufVxuZnVuY3Rpb24gZ2V0TmV3QXJyYXlFbGVtZW50S2V5KCkge1xuICByZXR1cm4gKGNvdW50ZXIrKykudG9TdHJpbmcoKTtcbn1cbmNvbnN0IGdldEluaXRpYWxQcm9wc1ZhbHVlID0gX2dldEluaXRpYWxQcm9wc1ZhbHVlO1xuZnVuY3Rpb24gX2dldEluaXRpYWxQcm9wc1ZhbHVlKHNjaGVtYSkge1xuICBzd2l0Y2ggKHNjaGVtYS5raW5kKSB7XG4gICAgY2FzZSAnZm9ybSc6XG4gICAgICByZXR1cm4gc2NoZW1hLmRlZmF1bHRWYWx1ZSgpO1xuICAgIGNhc2UgJ2NoaWxkJzpcbiAgICAgIHJldHVybiBzY2hlbWEub3B0aW9ucy5raW5kID09PSAnYmxvY2snID8gW3tcbiAgICAgICAgdHlwZTogJ3BhcmFncmFwaCcsXG4gICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgIHRleHQ6ICcnXG4gICAgICAgIH1dXG4gICAgICB9XSA6IG51bGw7XG4gICAgY2FzZSAnY29uZGl0aW9uYWwnOlxuICAgICAge1xuICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWUgPSBzY2hlbWEuZGlzY3JpbWluYW50LmRlZmF1bHRWYWx1ZSgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGRpc2NyaW1pbmFudDogZGVmYXVsdFZhbHVlLFxuICAgICAgICAgIHZhbHVlOiBnZXRJbml0aWFsUHJvcHNWYWx1ZShzY2hlbWEudmFsdWVzW2RlZmF1bHRWYWx1ZS50b1N0cmluZygpXSlcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICBjYXNlICdvYmplY3QnOlxuICAgICAge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoc2NoZW1hLmZpZWxkcykpIHtcbiAgICAgICAgICBvYmpba2V5XSA9IGdldEluaXRpYWxQcm9wc1ZhbHVlKHNjaGVtYS5maWVsZHNba2V5XSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgIH1cbiAgICBjYXNlICdhcnJheSc6XG4gICAgICB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgfVxuICBhc3NlcnROZXZlcihzY2hlbWEpO1xufVxuZnVuY3Rpb24gZ2V0SW5pdGlhbFByb3BzVmFsdWVGcm9tSW5pdGlhbGl6ZXIoc2NoZW1hLCBpbml0aWFsaXplcikge1xuICBzd2l0Y2ggKHNjaGVtYS5raW5kKSB7XG4gICAgY2FzZSAnZm9ybSc6XG4gICAgICByZXR1cm4gaW5pdGlhbGl6ZXIgPT09IHVuZGVmaW5lZCA/IHNjaGVtYS5kZWZhdWx0VmFsdWUoKSA6IGluaXRpYWxpemVyO1xuICAgIGNhc2UgJ2NoaWxkJzpcbiAgICAgIHJldHVybiBpbml0aWFsaXplciAhPT0gbnVsbCAmJiBpbml0aWFsaXplciAhPT0gdm9pZCAwID8gaW5pdGlhbGl6ZXIgOiBzY2hlbWEub3B0aW9ucy5raW5kID09PSAnYmxvY2snID8gW3tcbiAgICAgICAgdHlwZTogJ3BhcmFncmFwaCcsXG4gICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgIHRleHQ6ICcnXG4gICAgICAgIH1dXG4gICAgICB9XSA6IG51bGw7XG4gICAgY2FzZSAnY29uZGl0aW9uYWwnOlxuICAgICAge1xuICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWUgPSBpbml0aWFsaXplciA9PT0gdW5kZWZpbmVkID8gc2NoZW1hLmRpc2NyaW1pbmFudC5kZWZhdWx0VmFsdWUoKSA6IGluaXRpYWxpemVyLmRpc2NyaW1pbmFudDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBkaXNjcmltaW5hbnQ6IGRlZmF1bHRWYWx1ZSxcbiAgICAgICAgICB2YWx1ZTogZ2V0SW5pdGlhbFByb3BzVmFsdWVGcm9tSW5pdGlhbGl6ZXIoc2NoZW1hLnZhbHVlc1tkZWZhdWx0VmFsdWUudG9TdHJpbmcoKV0sIGluaXRpYWxpemVyID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiBpbml0aWFsaXplci52YWx1ZSlcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICBjYXNlICdvYmplY3QnOlxuICAgICAge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoc2NoZW1hLmZpZWxkcykpIHtcbiAgICAgICAgICBvYmpba2V5XSA9IGdldEluaXRpYWxQcm9wc1ZhbHVlRnJvbUluaXRpYWxpemVyKHNjaGVtYS5maWVsZHNba2V5XSwgaW5pdGlhbGl6ZXIgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IGluaXRpYWxpemVyW2tleV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgICB9XG4gICAgY2FzZSAnYXJyYXknOlxuICAgICAge1xuICAgICAgICByZXR1cm4gKGluaXRpYWxpemVyICE9PSBudWxsICYmIGluaXRpYWxpemVyICE9PSB2b2lkIDAgPyBpbml0aWFsaXplciA6IFtdKS5tYXAoeCA9PiBnZXRJbml0aWFsUHJvcHNWYWx1ZUZyb21Jbml0aWFsaXplcihzY2hlbWEuZWxlbWVudCwgeC52YWx1ZSkpO1xuICAgICAgfVxuICB9XG4gIGFzc2VydE5ldmVyKHNjaGVtYSk7XG59XG5mdW5jdGlvbiB1cGRhdGVWYWx1ZShzY2hlbWEsIGN1cnJlbnRWYWx1ZSwgdXBkYXRlcikge1xuICBpZiAodXBkYXRlciA9PT0gdW5kZWZpbmVkKSByZXR1cm4gY3VycmVudFZhbHVlO1xuICBzd2l0Y2ggKHNjaGVtYS5raW5kKSB7XG4gICAgY2FzZSAnZm9ybSc6XG4gICAgICByZXR1cm4gdXBkYXRlcjtcbiAgICBjYXNlICdjaGlsZCc6XG4gICAgICByZXR1cm4gdXBkYXRlcjtcbiAgICBjYXNlICdjb25kaXRpb25hbCc6XG4gICAgICB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZGlzY3JpbWluYW50OiB1cGRhdGVyLmRpc2NyaW1pbmFudCxcbiAgICAgICAgICB2YWx1ZTogdXBkYXRlci5kaXNjcmltaW5hbnQgPT09IGN1cnJlbnRWYWx1ZS5kaXNjcmltaW5hbnQgPyB1cGRhdGVWYWx1ZShzY2hlbWEudmFsdWVzW3VwZGF0ZXIuZGlzY3JpbWluYW50LnRvU3RyaW5nKCldLCBjdXJyZW50VmFsdWUudmFsdWUsIHVwZGF0ZXIudmFsdWUpIDogZ2V0SW5pdGlhbFByb3BzVmFsdWVGcm9tSW5pdGlhbGl6ZXIoc2NoZW1hLnZhbHVlc1t1cGRhdGVyLmRpc2NyaW1pbmFudC50b1N0cmluZygpXSwgdXBkYXRlci52YWx1ZSlcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICBjYXNlICdvYmplY3QnOlxuICAgICAge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoc2NoZW1hLmZpZWxkcykpIHtcbiAgICAgICAgICBvYmpba2V5XSA9IHVwZGF0ZVZhbHVlKHNjaGVtYS5maWVsZHNba2V5XSwgY3VycmVudFZhbHVlW2tleV0sIHVwZGF0ZXJba2V5XSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgIH1cbiAgICBjYXNlICdhcnJheSc6XG4gICAgICB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRBcnJWYWwgPSBjdXJyZW50VmFsdWU7XG4gICAgICAgIGNvbnN0IG5ld1ZhbCA9IHVwZGF0ZXI7XG4gICAgICAgIGNvbnN0IHVuaXF1ZUtleXMgPSBuZXcgU2V0KCk7XG4gICAgICAgIGZvciAoY29uc3QgeCBvZiBuZXdWYWwpIHtcbiAgICAgICAgICBpZiAoeC5rZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKHVuaXF1ZUtleXMuaGFzKHgua2V5KSkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FycmF5IGVsZW1lbnRzIG11c3QgaGF2ZSB1bmlxdWUga2V5cycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdW5pcXVlS2V5cy5hZGQoeC5rZXkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXlzID0gbmV3VmFsLm1hcCh4ID0+IHtcbiAgICAgICAgICBpZiAoeC5rZXkgIT09IHVuZGVmaW5lZCkgcmV0dXJuIHgua2V5O1xuICAgICAgICAgIGxldCBlbGVtZW50S2V5ID0gZ2V0TmV3QXJyYXlFbGVtZW50S2V5KCk7XG4gICAgICAgICAgLy8ganVzdCBpbiBjYXNlIHNvbWVvbmUgZ2l2ZXMgYSBrZXkgdGhhdCBpcyBhYm92ZSBvdXIgY291bnRlclxuICAgICAgICAgIHdoaWxlICh1bmlxdWVLZXlzLmhhcyhlbGVtZW50S2V5KSkge1xuICAgICAgICAgICAgZWxlbWVudEtleSA9IGdldE5ld0FycmF5RWxlbWVudEtleSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB1bmlxdWVLZXlzLmFkZChlbGVtZW50S2V5KTtcbiAgICAgICAgICByZXR1cm4gZWxlbWVudEtleTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHByZXZLZXlzID0gZ2V0S2V5c0ZvckFycmF5VmFsdWUoY3VycmVudEFyclZhbCk7XG4gICAgICAgIGNvbnN0IHByZXZWYWx1ZXNCeUtleSA9IG5ldyBNYXAoY3VycmVudEFyclZhbC5tYXAoKHZhbHVlLCBpKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIFtwcmV2S2V5c1tpXSwgdmFsdWVdO1xuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IHZhbCA9IG5ld1ZhbC5tYXAoKHgsIGkpID0+IHtcbiAgICAgICAgICBjb25zdCBpZCA9IGtleXNbaV07XG4gICAgICAgICAgaWYgKHByZXZWYWx1ZXNCeUtleS5oYXMoaWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdXBkYXRlVmFsdWUoc2NoZW1hLmVsZW1lbnQsIHByZXZWYWx1ZXNCeUtleS5nZXQoaWQpLCB4LnZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGdldEluaXRpYWxQcm9wc1ZhbHVlRnJvbUluaXRpYWxpemVyKHNjaGVtYS5lbGVtZW50LCB4LnZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNldEtleXNGb3JBcnJheVZhbHVlKHZhbCwga2V5cyk7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9XG4gIH1cbiAgYXNzZXJ0TmV2ZXIoc2NoZW1hKTtcbn1cblxuZnVuY3Rpb24gZ2V0VmFsdWVBdFByb3BQYXRoKHZhbHVlLCBpbnB1dFBhdGgpIHtcbiAgY29uc3QgcGF0aCA9IFsuLi5pbnB1dFBhdGhdO1xuICB3aGlsZSAocGF0aC5sZW5ndGgpIHtcbiAgICBjb25zdCBrZXkgPSBwYXRoLnNoaWZ0KCk7XG4gICAgdmFsdWUgPSB2YWx1ZVtrZXldO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHRyYXZlcnNlUHJvcHMoc2NoZW1hLCB2YWx1ZSwgdmlzaXRvciwgcGF0aCA9IFtdKSB7XG4gIGlmIChzY2hlbWEua2luZCA9PT0gJ2Zvcm0nIHx8IHNjaGVtYS5raW5kID09PSAnY2hpbGQnKSB7XG4gICAgdmlzaXRvcihzY2hlbWEsIHZhbHVlLCBwYXRoKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnb2JqZWN0Jykge1xuICAgIGZvciAoY29uc3QgW2tleSwgY2hpbGRQcm9wXSBvZiBPYmplY3QuZW50cmllcyhzY2hlbWEuZmllbGRzKSkge1xuICAgICAgdHJhdmVyc2VQcm9wcyhjaGlsZFByb3AsIHZhbHVlW2tleV0sIHZpc2l0b3IsIFsuLi5wYXRoLCBrZXldKTtcbiAgICB9XG4gICAgdmlzaXRvcihzY2hlbWEsIHZhbHVlLCBwYXRoKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnYXJyYXknKSB7XG4gICAgZm9yIChjb25zdCBbaWR4LCB2YWxdIG9mIHZhbHVlLmVudHJpZXMoKSkge1xuICAgICAgdHJhdmVyc2VQcm9wcyhzY2hlbWEuZWxlbWVudCwgdmFsLCB2aXNpdG9yLCBwYXRoLmNvbmNhdChpZHgpKTtcbiAgICB9XG4gICAgcmV0dXJuIHZpc2l0b3Ioc2NoZW1hLCB2YWx1ZSwgcGF0aCk7XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnY29uZGl0aW9uYWwnKSB7XG4gICAgY29uc3QgZGlzY3JpbWluYW50ID0gdmFsdWUuZGlzY3JpbWluYW50O1xuICAgIHZpc2l0b3Ioc2NoZW1hLCBkaXNjcmltaW5hbnQsIHBhdGguY29uY2F0KCdkaXNjcmltaW5hbnQnKSk7XG4gICAgdHJhdmVyc2VQcm9wcyhzY2hlbWEudmFsdWVzW2Rpc2NyaW1pbmFudC50b1N0cmluZygpXSwgdmFsdWUudmFsdWUsIHZpc2l0b3IsIHBhdGguY29uY2F0KCd2YWx1ZScpKTtcbiAgICB2aXNpdG9yKHNjaGVtYSwgdmFsdWUsIHBhdGgpO1xuICAgIHJldHVybjtcbiAgfVxuICBhc3NlcnROZXZlciQxKHNjaGVtYSk7XG59XG5mdW5jdGlvbiB0cmFuc2Zvcm1Qcm9wcyhzY2hlbWEsIHZhbHVlLCB2aXNpdG9ycywgcGF0aCA9IFtdKSB7XG4gIGlmIChzY2hlbWEua2luZCA9PT0gJ2Zvcm0nIHx8IHNjaGVtYS5raW5kID09PSAnY2hpbGQnKSB7XG4gICAgaWYgKHZpc2l0b3JzW3NjaGVtYS5raW5kXSkge1xuICAgICAgcmV0dXJuIHZpc2l0b3JzW3NjaGVtYS5raW5kXShzY2hlbWEsIHZhbHVlLCBwYXRoKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmIChzY2hlbWEua2luZCA9PT0gJ29iamVjdCcpIHtcbiAgICBjb25zdCB2YWwgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoc2NoZW1hLmZpZWxkcykubWFwKChba2V5LCB2YWxdKSA9PiB7XG4gICAgICByZXR1cm4gW2tleSwgdHJhbnNmb3JtUHJvcHModmFsLCB2YWx1ZVtrZXldLCB2aXNpdG9ycywgWy4uLnBhdGgsIGtleV0pXTtcbiAgICB9KSk7XG4gICAgaWYgKHZpc2l0b3JzLm9iamVjdCkge1xuICAgICAgcmV0dXJuIHZpc2l0b3JzW3NjaGVtYS5raW5kXShzY2hlbWEsIHZhbCwgcGF0aCk7XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnYXJyYXknKSB7XG4gICAgY29uc3QgdmFsID0gdmFsdWUubWFwKCh2YWwsIGlkeCkgPT4gdHJhbnNmb3JtUHJvcHMoc2NoZW1hLmVsZW1lbnQsIHZhbCwgdmlzaXRvcnMsIHBhdGguY29uY2F0KGlkeCkpKTtcbiAgICBpZiAodmlzaXRvcnMuYXJyYXkpIHtcbiAgICAgIHJldHVybiB2aXNpdG9yc1tzY2hlbWEua2luZF0oc2NoZW1hLCB2YWwsIHBhdGgpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsO1xuICB9XG4gIGlmIChzY2hlbWEua2luZCA9PT0gJ2NvbmRpdGlvbmFsJykge1xuICAgIGNvbnN0IGRpc2NyaW1pbmFudCA9IHRyYW5zZm9ybVByb3BzKHNjaGVtYS5kaXNjcmltaW5hbnQsIHZhbHVlLmRpc2NyaW1pbmFudCwgdmlzaXRvcnMsIHBhdGguY29uY2F0KCdkaXNjcmltaW5hbnQnKSk7XG4gICAgY29uc3QgY29uZGl0aW9uYWxWYWwgPSB0cmFuc2Zvcm1Qcm9wcyhzY2hlbWEudmFsdWVzW2Rpc2NyaW1pbmFudC50b1N0cmluZygpXSwgdmFsdWUudmFsdWUsIHZpc2l0b3JzLCBwYXRoLmNvbmNhdCgndmFsdWUnKSk7XG4gICAgY29uc3QgdmFsID0ge1xuICAgICAgZGlzY3JpbWluYW50LFxuICAgICAgdmFsdWU6IGNvbmRpdGlvbmFsVmFsXG4gICAgfTtcbiAgICBpZiAodmlzaXRvcnMuY29uZGl0aW9uYWwpIHtcbiAgICAgIHJldHVybiB2aXNpdG9yc1tzY2hlbWEua2luZF0oc2NoZW1hLCB2YWwsIHBhdGgpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsO1xuICB9XG4gIGFzc2VydE5ldmVyJDEoc2NoZW1hKTtcbn1cbmZ1bmN0aW9uIHJlcGxhY2VWYWx1ZUF0UHJvcFBhdGgoc2NoZW1hLCB2YWx1ZSwgbmV3VmFsdWUsIHBhdGgpIHtcbiAgaWYgKHBhdGgubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG5ld1ZhbHVlO1xuICB9XG4gIGNvbnN0IFtrZXksIC4uLm5ld1BhdGhdID0gcGF0aDtcbiAgaWYgKHNjaGVtYS5raW5kID09PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiB7XG4gICAgICAuLi52YWx1ZSxcbiAgICAgIFtrZXldOiByZXBsYWNlVmFsdWVBdFByb3BQYXRoKHNjaGVtYS5maWVsZHNba2V5XSwgdmFsdWVba2V5XSwgbmV3VmFsdWUsIG5ld1BhdGgpXG4gICAgfTtcbiAgfVxuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdjb25kaXRpb25hbCcpIHtcbiAgICBjb25zdCBjb25kaXRpb25hbFZhbHVlID0gdmFsdWU7XG4gICAgLy8gcmVwbGFjZVZhbHVlQXRQcm9wUGF0aCBzaG91bGQgbm90IGJlIHVzZWQgdG8gb25seSB1cGRhdGUgdGhlIGRpc2NyaW1pbmFudCBvZiBhIGNvbmRpdGlvbmFsIGZpZWxkXG4gICAgLy8gaWYgeW91IHdhbnQgdG8gdXBkYXRlIHRoZSBkaXNjcmltaW5hbnQgb2YgYSBjb25kaXRpb25hbCBmaWVsZCwgcmVwbGFjZSB0aGUgdmFsdWUgb2YgdGhlIHdob2xlIGNvbmRpdGlvbmFsIGZpZWxkXG4gICAgYXNzZXJ0JDEoa2V5ID09PSAndmFsdWUnKTtcbiAgICByZXR1cm4ge1xuICAgICAgZGlzY3JpbWluYW50OiBjb25kaXRpb25hbFZhbHVlLmRpc2NyaW1pbmFudCxcbiAgICAgIHZhbHVlOiByZXBsYWNlVmFsdWVBdFByb3BQYXRoKHNjaGVtYS52YWx1ZXNba2V5XSwgY29uZGl0aW9uYWxWYWx1ZS52YWx1ZSwgbmV3VmFsdWUsIG5ld1BhdGgpXG4gICAgfTtcbiAgfVxuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdhcnJheScpIHtcbiAgICBjb25zdCBwcmV2VmFsID0gdmFsdWU7XG4gICAgY29uc3QgbmV3VmFsID0gWy4uLnByZXZWYWxdO1xuICAgIHNldEtleXNGb3JBcnJheVZhbHVlKG5ld1ZhbCwgZ2V0S2V5c0ZvckFycmF5VmFsdWUocHJldlZhbCkpO1xuICAgIG5ld1ZhbFtrZXldID0gcmVwbGFjZVZhbHVlQXRQcm9wUGF0aChzY2hlbWEuZWxlbWVudCwgbmV3VmFsW2tleV0sIG5ld1ZhbHVlLCBuZXdQYXRoKTtcbiAgICByZXR1cm4gbmV3VmFsO1xuICB9XG5cbiAgLy8gd2Ugc2hvdWxkIG5ldmVyIHJlYWNoIGhlcmUgc2luY2UgZm9ybSBvciBjaGlsZCBmaWVsZHMgZG9uJ3QgY29udGFpbiBvdGhlciBmaWVsZHNcbiAgLy8gc28gdGhlIG9ubHkgdGhpbmcgdGhhdCBjYW4gaGFwcGVuIHRvIHRoZW0gaXMgdG8gYmUgcmVwbGFjZWQgd2hpY2ggaGFwcGVucyBhdCB0aGUgc3RhcnQgb2YgdGhpcyBmdW5jdGlvbiB3aGVuIHBhdGgubGVuZ3RoID09PSAwXG4gIGFzc2VydCQxKHNjaGVtYS5raW5kICE9PSAnZm9ybScgJiYgc2NoZW1hLmtpbmQgIT09ICdjaGlsZCcpO1xuICBhc3NlcnROZXZlciQxKHNjaGVtYSk7XG59XG5cbi8vIGEgdiBpbXBvcnRhbnQgbm90ZVxuLy8gbWFya3MgaW4gdGhlIG1hcmtkb3duIGFzdC9odG1sIGFyZSByZXByZXNlbnRlZCBxdWl0ZSBkaWZmZXJlbnRseSB0byBob3cgdGhleSBhcmUgaW4gc2xhdGVcbi8vIGlmIHlvdSBoYWQgdGhlIG1hcmtkb3duICoqc29tZXRoaW5nIGh0dHBzOi8va2V5c3RvbmVqcy5jb20gc29tZXRoaW5nKipcbi8vIHRoZSBib2xkIG5vZGUgaXMgdGhlIHBhcmVudCBvZiB0aGUgbGluayBub2RlXG4vLyBidXQgaW4gc2xhdGUsIG1hcmtzIGFyZSBvbmx5IHJlcHJlc2VudGVkIG9uIHRleHQgbm9kZXNcblxuY29uc3QgY3VycmVudGx5QWN0aXZlTWFya3MgPSBuZXcgU2V0KCk7XG5jb25zdCBjdXJyZW50bHlEaXNhYmxlZE1hcmtzID0gbmV3IFNldCgpO1xubGV0IGN1cnJlbnRMaW5rID0gbnVsbDtcbmZ1bmN0aW9uIGFkZE1hcmtUb0NoaWxkcmVuKG1hcmssIGNiKSB7XG4gIGNvbnN0IHdhc1ByZXZpb3VzbHlBY3RpdmUgPSBjdXJyZW50bHlBY3RpdmVNYXJrcy5oYXMobWFyayk7XG4gIGN1cnJlbnRseUFjdGl2ZU1hcmtzLmFkZChtYXJrKTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gY2IoKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBpZiAoIXdhc1ByZXZpb3VzbHlBY3RpdmUpIHtcbiAgICAgIGN1cnJlbnRseUFjdGl2ZU1hcmtzLmRlbGV0ZShtYXJrKTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIHNldExpbmtGb3JDaGlsZHJlbihocmVmLCBjYikge1xuICAvLyB3ZSdsbCBvbmx5IHVzZSB0aGUgb3V0ZXIgbGlua1xuICBpZiAoY3VycmVudExpbmsgIT09IG51bGwpIHtcbiAgICByZXR1cm4gY2IoKTtcbiAgfVxuICBjdXJyZW50TGluayA9IGhyZWY7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGNiKCk7XG4gIH0gZmluYWxseSB7XG4gICAgY3VycmVudExpbmsgPSBudWxsO1xuICB9XG59XG5mdW5jdGlvbiBhZGRNYXJrc1RvQ2hpbGRyZW4obWFya3MsIGNiKSB7XG4gIGNvbnN0IG1hcmtzVG9SZW1vdmUgPSBuZXcgU2V0KCk7XG4gIGZvciAoY29uc3QgbWFyayBvZiBtYXJrcykge1xuICAgIGlmICghY3VycmVudGx5QWN0aXZlTWFya3MuaGFzKG1hcmspKSB7XG4gICAgICBtYXJrc1RvUmVtb3ZlLmFkZChtYXJrKTtcbiAgICB9XG4gICAgY3VycmVudGx5QWN0aXZlTWFya3MuYWRkKG1hcmspO1xuICB9XG4gIHRyeSB7XG4gICAgcmV0dXJuIGNiKCk7XG4gIH0gZmluYWxseSB7XG4gICAgZm9yIChjb25zdCBtYXJrIG9mIG1hcmtzVG9SZW1vdmUpIHtcbiAgICAgIGN1cnJlbnRseUFjdGl2ZU1hcmtzLmRlbGV0ZShtYXJrKTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGZvcmNlRGlzYWJsZU1hcmtGb3JDaGlsZHJlbihtYXJrLCBjYikge1xuICBjb25zdCB3YXNQcmV2aW91c2x5RGlzYWJsZWQgPSBjdXJyZW50bHlEaXNhYmxlZE1hcmtzLmhhcyhtYXJrKTtcbiAgY3VycmVudGx5RGlzYWJsZWRNYXJrcy5hZGQobWFyayk7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGNiKCk7XG4gIH0gZmluYWxseSB7XG4gICAgaWYgKCF3YXNQcmV2aW91c2x5RGlzYWJsZWQpIHtcbiAgICAgIGN1cnJlbnRseURpc2FibGVkTWFya3MuZGVsZXRlKG1hcmspO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFRoaXMgdHlwZSBpcyBtb3JlIHN0cmljdCB0aGFuIGBFbGVtZW50ICYgeyB0eXBlOiAnbGluayc7IH1gIGJlY2F1c2UgYGNoaWxkcmVuYFxuICogaXMgY29uc3RyYWluZWQgdG8gb25seSBjb250YWluIFRleHQgbm9kZXMuIFRoaXMgY2FuJ3QgYmUgYXNzdW1lZCBnZW5lcmFsbHkgYXJvdW5kIHRoZSBlZGl0b3JcbiAqIChiZWNhdXNlIG9mIHBvdGVudGlhbGx5IGZ1dHVyZSBpbmxpbmUgY29tcG9uZW50cyBvciBuZXN0ZWQgbGlua3Mod2hpY2ggYXJlIG5vcm1hbGl6ZWQgYXdheSBidXQgdGhlIGVkaXRvciBuZWVkcyB0byBub3QgYnJlYWsgaWYgaXQgaGFwcGVucykpXG4gKiBidXQgd2hlcmUgdGhpcyB0eXBlIGlzIHVzZWQsIHdlJ3JlIG9ubHkgZ29pbmcgdG8gYWxsb3cgbGlua3MgdG8gY29udGFpbiBUZXh0IGFuZCB0aGF0J3MgaW1wb3J0YW50XG4gKiBzbyB0aGF0IHdlIGtub3cgYSBibG9jayB3aWxsIG5ldmVyIGJlIGluc2lkZSBhbiBpbmxpbmUgYmVjYXVzZSBTbGF0ZSBnZXRzIHVuaGFwcHkgd2hlbiB0aGF0IGhhcHBlbnNcbiAqIChyZWFsbHkgdGhlIGxpbmsgaW5saW5lIHNob3VsZCBwcm9iYWJseSBiZSBhIG1hcmsgcmF0aGVyIHRoYW4gYW4gaW5saW5lLFxuICogbm9uLXZvaWQgaW5saW5lcyBhcmUgcHJvYmFibHkgYWx3YXlzIGJhZCBidXQgdGhhdCB3b3VsZCBpbXBseSBjaGFuZ2luZyB0aGUgZG9jdW1lbnRcbiAqIHN0cnVjdHVyZSB3aGljaCB3b3VsZCBiZSBzdWNoIHVubmVjZXNzYXJ5IGJyZWFrYWdlKVxuICovXG5cbmZ1bmN0aW9uIGdldElubGluZU5vZGVzKHRleHQpIHtcbiAgY29uc3Qgbm9kZSA9IHtcbiAgICB0ZXh0XG4gIH07XG4gIGZvciAoY29uc3QgbWFyayBvZiBjdXJyZW50bHlBY3RpdmVNYXJrcykge1xuICAgIGlmICghY3VycmVudGx5RGlzYWJsZWRNYXJrcy5oYXMobWFyaykpIHtcbiAgICAgIG5vZGVbbWFya10gPSB0cnVlO1xuICAgIH1cbiAgfVxuICBpZiAoY3VycmVudExpbmsgIT09IG51bGwpIHtcbiAgICByZXR1cm4gW3tcbiAgICAgIHRleHQ6ICcnXG4gICAgfSwge1xuICAgICAgdHlwZTogJ2xpbmsnLFxuICAgICAgaHJlZjogY3VycmVudExpbmssXG4gICAgICBjaGlsZHJlbjogW25vZGVdXG4gICAgfSwge1xuICAgICAgdGV4dDogJydcbiAgICB9XTtcbiAgfVxuICByZXR1cm4gW25vZGVdO1xufVxuXG5jbGFzcyBWYXJpYWJsZUNoaWxkRmllbGRzIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignVGhlcmUgYXJlIGEgdmFyaWFibGUgbnVtYmVyIG9mIGNoaWxkIGZpZWxkcycpO1xuICB9XG59XG5mdW5jdGlvbiBmaW5kU2luZ2xlQ2hpbGRGaWVsZChzY2hlbWEpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXN1bHQgPSBfZmluZENvbnN0YW50Q2hpbGRGaWVsZHMoc2NoZW1hLCBbXSwgbmV3IFNldCgpKTtcbiAgICBpZiAocmVzdWx0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgcmV0dXJuIHJlc3VsdFswXTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBpZiAoZXJyIGluc3RhbmNlb2YgVmFyaWFibGVDaGlsZEZpZWxkcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aHJvdyBlcnI7XG4gIH1cbn1cbmZ1bmN0aW9uIF9maW5kQ29uc3RhbnRDaGlsZEZpZWxkcyhzY2hlbWEsIHBhdGgsIHNlZW5TY2hlbWFzKSB7XG4gIGlmIChzZWVuU2NoZW1hcy5oYXMoc2NoZW1hKSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBzZWVuU2NoZW1hcy5hZGQoc2NoZW1hKTtcbiAgc3dpdGNoIChzY2hlbWEua2luZCkge1xuICAgIGNhc2UgJ2Zvcm0nOlxuICAgICAgcmV0dXJuIFtdO1xuICAgIGNhc2UgJ2NoaWxkJzpcbiAgICAgIHJldHVybiBbe1xuICAgICAgICByZWxhdGl2ZVBhdGg6IHBhdGgsXG4gICAgICAgIG9wdGlvbnM6IHNjaGVtYS5vcHRpb25zLFxuICAgICAgICBraW5kOiAnY2hpbGQnXG4gICAgICB9XTtcbiAgICBjYXNlICdjb25kaXRpb25hbCc6XG4gICAgICB7XG4gICAgICAgIGlmIChjb3VsZENvbnRhaW5DaGlsZEZpZWxkKHNjaGVtYSkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVmFyaWFibGVDaGlsZEZpZWxkcygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICBjYXNlICdhcnJheSc6XG4gICAgICB7XG4gICAgICAgIGlmIChzY2hlbWEuYXNDaGlsZFRhZykge1xuICAgICAgICAgIGNvbnN0IGNoaWxkID0gX2ZpbmRDb25zdGFudENoaWxkRmllbGRzKHNjaGVtYS5lbGVtZW50LCBbXSwgc2VlblNjaGVtYXMpO1xuICAgICAgICAgIGlmIChjaGlsZC5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBbe1xuICAgICAgICAgICAga2luZDogJ2FycmF5JyxcbiAgICAgICAgICAgIGFzQ2hpbGRUYWc6IHNjaGVtYS5hc0NoaWxkVGFnLFxuICAgICAgICAgICAgZmllbGQ6IHNjaGVtYSxcbiAgICAgICAgICAgIHJlbGF0aXZlUGF0aDogcGF0aCxcbiAgICAgICAgICAgIGNoaWxkOiBjaGlsZFswXVxuICAgICAgICAgIH1dO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb3VsZENvbnRhaW5DaGlsZEZpZWxkKHNjaGVtYSkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVmFyaWFibGVDaGlsZEZpZWxkcygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICBjYXNlICdvYmplY3QnOlxuICAgICAge1xuICAgICAgICBjb25zdCBwYXRocyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhzY2hlbWEuZmllbGRzKSkge1xuICAgICAgICAgIHBhdGhzLnB1c2goLi4uX2ZpbmRDb25zdGFudENoaWxkRmllbGRzKHZhbHVlLCBwYXRoLmNvbmNhdChrZXkpLCBzZWVuU2NoZW1hcykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXRocztcbiAgICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gY291bGRDb250YWluQ2hpbGRGaWVsZChzY2hlbWEsIHNlZW4gPSBuZXcgU2V0KCkpIHtcbiAgaWYgKHNlZW4uaGFzKHNjaGVtYSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgc2Vlbi5hZGQoc2NoZW1hKTtcbiAgc3dpdGNoIChzY2hlbWEua2luZCkge1xuICAgIGNhc2UgJ2Zvcm0nOlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGNhc2UgJ2NoaWxkJzpcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIGNhc2UgJ2NvbmRpdGlvbmFsJzpcbiAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKHNjaGVtYS52YWx1ZXMpLnNvbWUodmFsdWUgPT4gY291bGRDb250YWluQ2hpbGRGaWVsZCh2YWx1ZSwgc2VlbikpO1xuICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICByZXR1cm4gT2JqZWN0LmtleXMoc2NoZW1hLmZpZWxkcykuc29tZShrZXkgPT4gY291bGRDb250YWluQ2hpbGRGaWVsZChzY2hlbWEuZmllbGRzW2tleV0sIHNlZW4pKTtcbiAgICBjYXNlICdhcnJheSc6XG4gICAgICByZXR1cm4gY291bGRDb250YWluQ2hpbGRGaWVsZChzY2hlbWEuZWxlbWVudCwgc2Vlbik7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5saW5lTm9kZUZyb21NYXJrZG9jKG5vZGUpIHtcbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2lubGluZScpIHtcbiAgICByZXR1cm4gaW5saW5lQ2hpbGRyZW5Gcm9tTWFya2RvYyhub2RlLmNoaWxkcmVuKTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAnbGluaycpIHtcbiAgICByZXR1cm4gc2V0TGlua0ZvckNoaWxkcmVuKG5vZGUuYXR0cmlidXRlcy5ocmVmLCAoKSA9PiBpbmxpbmVDaGlsZHJlbkZyb21NYXJrZG9jKG5vZGUuY2hpbGRyZW4pKTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAndGV4dCcpIHtcbiAgICByZXR1cm4gZ2V0SW5saW5lTm9kZXMobm9kZS5hdHRyaWJ1dGVzLmNvbnRlbnQpO1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICdzdHJvbmcnKSB7XG4gICAgcmV0dXJuIGFkZE1hcmtUb0NoaWxkcmVuKCdib2xkJywgKCkgPT4gaW5saW5lQ2hpbGRyZW5Gcm9tTWFya2RvYyhub2RlLmNoaWxkcmVuKSk7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2NvZGUnKSB7XG4gICAgcmV0dXJuIGFkZE1hcmtUb0NoaWxkcmVuKCdjb2RlJywgKCkgPT4gZ2V0SW5saW5lTm9kZXMobm9kZS5hdHRyaWJ1dGVzLmNvbnRlbnQpKTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAnZW0nKSB7XG4gICAgcmV0dXJuIGFkZE1hcmtUb0NoaWxkcmVuKCdpdGFsaWMnLCAoKSA9PiBpbmxpbmVDaGlsZHJlbkZyb21NYXJrZG9jKG5vZGUuY2hpbGRyZW4pKTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAncycpIHtcbiAgICByZXR1cm4gYWRkTWFya1RvQ2hpbGRyZW4oJ3N0cmlrZXRocm91Z2gnLCAoKSA9PiBpbmxpbmVDaGlsZHJlbkZyb21NYXJrZG9jKG5vZGUuY2hpbGRyZW4pKTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAndGFnJykge1xuICAgIGlmIChub2RlLnRhZyA9PT0gJ3UnKSB7XG4gICAgICByZXR1cm4gYWRkTWFya1RvQ2hpbGRyZW4oJ3VuZGVybGluZScsICgpID0+IGlubGluZUNoaWxkcmVuRnJvbU1hcmtkb2Mobm9kZS5jaGlsZHJlbikpO1xuICAgIH1cbiAgICBpZiAobm9kZS50YWcgPT09ICdrYmQnKSB7XG4gICAgICByZXR1cm4gYWRkTWFya1RvQ2hpbGRyZW4oJ2tleWJvYXJkJywgKCkgPT4gaW5saW5lQ2hpbGRyZW5Gcm9tTWFya2RvYyhub2RlLmNoaWxkcmVuKSk7XG4gICAgfVxuICAgIGlmIChub2RlLnRhZyA9PT0gJ3N1YicpIHtcbiAgICAgIHJldHVybiBhZGRNYXJrVG9DaGlsZHJlbignc3Vic2NyaXB0JywgKCkgPT4gaW5saW5lQ2hpbGRyZW5Gcm9tTWFya2RvYyhub2RlLmNoaWxkcmVuKSk7XG4gICAgfVxuICAgIGlmIChub2RlLnRhZyA9PT0gJ3N1cCcpIHtcbiAgICAgIHJldHVybiBhZGRNYXJrVG9DaGlsZHJlbignc3VwZXJzY3JpcHQnLCAoKSA9PiBpbmxpbmVDaGlsZHJlbkZyb21NYXJrZG9jKG5vZGUuY2hpbGRyZW4pKTtcbiAgICB9XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ3NvZnRicmVhaycpIHtcbiAgICByZXR1cm4gZ2V0SW5saW5lTm9kZXMoJyAnKTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAnaGFyZGJyZWFrJykge1xuICAgIHJldHVybiBnZXRJbmxpbmVOb2RlcygnXFxuJyk7XG4gIH1cbiAgaWYgKG5vZGUudGFnID09PSAnY29tcG9uZW50LWlubGluZS1wcm9wJyAmJiBBcnJheS5pc0FycmF5KG5vZGUuYXR0cmlidXRlcy5wcm9wUGF0aCkgJiYgbm9kZS5hdHRyaWJ1dGVzLnByb3BQYXRoLmV2ZXJ5KHggPT4gdHlwZW9mIHggPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB4ID09PSAnbnVtYmVyJykpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCcsXG4gICAgICBjaGlsZHJlbjogaW5saW5lRnJvbU1hcmtkb2Mobm9kZS5jaGlsZHJlbiksXG4gICAgICBwcm9wUGF0aDogbm9kZS5hdHRyaWJ1dGVzLnByb3BQYXRoXG4gICAgfTtcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gaW5saW5lIG5vZGUgdHlwZTogJHtub2RlLnR5cGV9YCk7XG59XG5mdW5jdGlvbiBpbmxpbmVDaGlsZHJlbkZyb21NYXJrZG9jKG5vZGVzKSB7XG4gIHJldHVybiBub2Rlcy5mbGF0TWFwKGlubGluZU5vZGVGcm9tTWFya2RvYyk7XG59XG5mdW5jdGlvbiBpbmxpbmVGcm9tTWFya2RvYyhub2Rlcykge1xuICBjb25zdCB0cmFuc2Zvcm1lZE5vZGVzID0gbm9kZXMuZmxhdE1hcChpbmxpbmVOb2RlRnJvbU1hcmtkb2MpO1xuICBjb25zdCBuZXh0Tm9kZXMgPSBbXTtcbiAgbGV0IGxhc3ROb2RlO1xuICBmb3IgKGNvbnN0IFtpZHgsIG5vZGVdIG9mIHRyYW5zZm9ybWVkTm9kZXMuZW50cmllcygpKSB7XG4gICAgdmFyIF9sYXN0Tm9kZTtcbiAgICBpZiAobm9kZS50eXBlID09PSB1bmRlZmluZWQgJiYgbm9kZS50ZXh0ID09PSAnJyAmJiAoKF9sYXN0Tm9kZSA9IGxhc3ROb2RlKSA9PT0gbnVsbCB8fCBfbGFzdE5vZGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9sYXN0Tm9kZS50eXBlKSA9PT0gdW5kZWZpbmVkICYmIGlkeCAhPT0gdHJhbnNmb3JtZWROb2Rlcy5sZW5ndGggLSAxKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgbmV4dE5vZGVzLnB1c2gobm9kZSk7XG4gICAgbGFzdE5vZGUgPSBub2RlO1xuICB9XG4gIGlmICghbmV4dE5vZGVzLmxlbmd0aCkge1xuICAgIG5leHROb2Rlcy5wdXNoKHtcbiAgICAgIHRleHQ6ICcnXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIG5leHROb2Rlcztcbn1cbmZ1bmN0aW9uIGZyb21NYXJrZG9jKG5vZGUsIGNvbXBvbmVudEJsb2Nrcykge1xuICBjb25zdCBub2RlcyA9IG5vZGUuY2hpbGRyZW4uZmxhdE1hcCh4ID0+IGZyb21NYXJrZG9jTm9kZSh4LCBjb21wb25lbnRCbG9ja3MpKTtcbiAgaWYgKG5vZGVzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBbe1xuICAgICAgdHlwZTogJ3BhcmFncmFwaCcsXG4gICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgdGV4dDogJydcbiAgICAgIH1dXG4gICAgfV07XG4gIH1cbiAgaWYgKG5vZGVzW25vZGVzLmxlbmd0aCAtIDFdLnR5cGUgIT09ICdwYXJhZ3JhcGgnKSB7XG4gICAgbm9kZXMucHVzaCh7XG4gICAgICB0eXBlOiAncGFyYWdyYXBoJyxcbiAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICB0ZXh0OiAnJ1xuICAgICAgfV1cbiAgICB9KTtcbiAgfVxuICByZXR1cm4gbm9kZXM7XG59XG5mdW5jdGlvbiBmcm9tTWFya2RvY05vZGUobm9kZSwgY29tcG9uZW50QmxvY2tzKSB7XG4gIGlmIChub2RlLnR5cGUgPT09ICdibG9ja3F1b3RlJykge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnYmxvY2txdW90ZScsXG4gICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbi5mbGF0TWFwKHggPT4gZnJvbU1hcmtkb2NOb2RlKHgsIGNvbXBvbmVudEJsb2NrcykpXG4gICAgfTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAnZmVuY2UnKSB7XG4gICAgY29uc3Qge1xuICAgICAgbGFuZ3VhZ2UsXG4gICAgICBjb250ZW50LFxuICAgICAgLi4ucmVzdFxuICAgIH0gPSBub2RlLmF0dHJpYnV0ZXM7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdjb2RlJyxcbiAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICB0ZXh0OiBjb250ZW50LnJlcGxhY2UoL1xcbiQvLCAnJylcbiAgICAgIH1dLFxuICAgICAgLi4uKHR5cGVvZiBsYW5ndWFnZSA9PT0gJ3N0cmluZycgPyB7XG4gICAgICAgIGxhbmd1YWdlXG4gICAgICB9IDoge30pLFxuICAgICAgLi4ucmVzdFxuICAgIH07XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2hlYWRpbmcnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLm5vZGUuYXR0cmlidXRlcyxcbiAgICAgIGxldmVsOiBub2RlLmF0dHJpYnV0ZXMubGV2ZWwsXG4gICAgICB0eXBlOiAnaGVhZGluZycsXG4gICAgICBjaGlsZHJlbjogaW5saW5lRnJvbU1hcmtkb2Mobm9kZS5jaGlsZHJlbilcbiAgICB9O1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICdsaXN0Jykge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBub2RlLmF0dHJpYnV0ZXMub3JkZXJlZCA/ICdvcmRlcmVkLWxpc3QnIDogJ3Vub3JkZXJlZC1saXN0JyxcbiAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuLmZsYXRNYXAoeCA9PiBmcm9tTWFya2RvY05vZGUoeCwgY29tcG9uZW50QmxvY2tzKSlcbiAgICB9O1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICdpdGVtJykge1xuICAgIHZhciBfbm9kZSRjaGlsZHJlbiQ7XG4gICAgY29uc3QgY2hpbGRyZW4gPSBbe1xuICAgICAgdHlwZTogJ2xpc3QtaXRlbS1jb250ZW50JyxcbiAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuLmxlbmd0aCA/IGlubGluZUZyb21NYXJrZG9jKFtub2RlLmNoaWxkcmVuWzBdXSkgOiBbe1xuICAgICAgICB0ZXh0OiAnJ1xuICAgICAgfV1cbiAgICB9XTtcbiAgICBpZiAoKChfbm9kZSRjaGlsZHJlbiQgPSBub2RlLmNoaWxkcmVuWzFdKSA9PT0gbnVsbCB8fCBfbm9kZSRjaGlsZHJlbiQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9ub2RlJGNoaWxkcmVuJC50eXBlKSA9PT0gJ2xpc3QnKSB7XG4gICAgICBjb25zdCBsaXN0ID0gbm9kZS5jaGlsZHJlblsxXTtcbiAgICAgIGNoaWxkcmVuLnB1c2goe1xuICAgICAgICB0eXBlOiBsaXN0LmF0dHJpYnV0ZXMub3JkZXJlZCA/ICdvcmRlcmVkLWxpc3QnIDogJ3Vub3JkZXJlZC1saXN0JyxcbiAgICAgICAgY2hpbGRyZW46IGxpc3QuY2hpbGRyZW4uZmxhdE1hcCh4ID0+IGZyb21NYXJrZG9jTm9kZSh4LCBjb21wb25lbnRCbG9ja3MpKVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnbGlzdC1pdGVtJyxcbiAgICAgIGNoaWxkcmVuXG4gICAgfTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAncGFyYWdyYXBoJykge1xuICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJiBub2RlLmNoaWxkcmVuWzBdLnR5cGUgPT09ICdpbmxpbmUnICYmIG5vZGUuY2hpbGRyZW5bMF0uY2hpbGRyZW4ubGVuZ3RoID09PSAxICYmIG5vZGUuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0udHlwZSA9PT0gJ2ltYWdlJykge1xuICAgICAgdmFyIF9pbWFnZSRhdHRyaWJ1dGVzJHRpdDtcbiAgICAgIGNvbnN0IGltYWdlID0gbm9kZS5jaGlsZHJlblswXS5jaGlsZHJlblswXTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdpbWFnZScsXG4gICAgICAgIHNyYzogZGVjb2RlVVJJKGltYWdlLmF0dHJpYnV0ZXMuc3JjKSxcbiAgICAgICAgYWx0OiBpbWFnZS5hdHRyaWJ1dGVzLmFsdCxcbiAgICAgICAgdGl0bGU6IChfaW1hZ2UkYXR0cmlidXRlcyR0aXQgPSBpbWFnZS5hdHRyaWJ1dGVzLnRpdGxlKSAhPT0gbnVsbCAmJiBfaW1hZ2UkYXR0cmlidXRlcyR0aXQgIT09IHZvaWQgMCA/IF9pbWFnZSRhdHRyaWJ1dGVzJHRpdCA6ICcnLFxuICAgICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgICB0ZXh0OiAnJ1xuICAgICAgICB9XVxuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgY2hpbGRyZW4gPSBpbmxpbmVGcm9tTWFya2RvYyhub2RlLmNoaWxkcmVuKTtcbiAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID09PSAxICYmIGNoaWxkcmVuWzBdLnR5cGUgPT09ICdjb21wb25lbnQtaW5saW5lLXByb3AnKSB7XG4gICAgICByZXR1cm4gY2hpbGRyZW5bMF07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAncGFyYWdyYXBoJyxcbiAgICAgIGNoaWxkcmVuLFxuICAgICAgdGV4dEFsaWduOiBub2RlLmF0dHJpYnV0ZXMudGV4dEFsaWduXG4gICAgfTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAnaHInKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdkaXZpZGVyJyxcbiAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICB0ZXh0OiAnJ1xuICAgICAgfV1cbiAgICB9O1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICd0YWJsZScpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ3RhYmxlJyxcbiAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuLmZsYXRNYXAoeCA9PiBmcm9tTWFya2RvY05vZGUoeCwgY29tcG9uZW50QmxvY2tzKSlcbiAgICB9O1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICd0Ym9keScpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ3RhYmxlLWJvZHknLFxuICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4uZmxhdE1hcCh4ID0+IGZyb21NYXJrZG9jTm9kZSh4LCBjb21wb25lbnRCbG9ja3MpKVxuICAgIH07XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ3RoZWFkJykge1xuICAgIGlmICghbm9kZS5jaGlsZHJlbi5sZW5ndGgpIHJldHVybiBbXTtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ3RhYmxlLWhlYWQnLFxuICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4uZmxhdE1hcCh4ID0+IGZyb21NYXJrZG9jTm9kZSh4LCBjb21wb25lbnRCbG9ja3MpKVxuICAgIH07XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ3RyJykge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAndGFibGUtcm93JyxcbiAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuLmZsYXRNYXAoeCA9PiBmcm9tTWFya2RvY05vZGUoeCwgY29tcG9uZW50QmxvY2tzKSlcbiAgICB9O1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICd0ZCcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ3RhYmxlLWNlbGwnLFxuICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4uZmxhdE1hcCh4ID0+IGZyb21NYXJrZG9jTm9kZSh4LCBjb21wb25lbnRCbG9ja3MpKVxuICAgIH07XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ3RoJykge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAndGFibGUtY2VsbCcsXG4gICAgICBoZWFkZXI6IHRydWUsXG4gICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbi5mbGF0TWFwKHggPT4gZnJvbU1hcmtkb2NOb2RlKHgsIGNvbXBvbmVudEJsb2NrcykpXG4gICAgfTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAndGFnJykge1xuICAgIGlmIChub2RlLnRhZyA9PT0gJ3RhYmxlJykge1xuICAgICAgcmV0dXJuIGZyb21NYXJrZG9jTm9kZShub2RlLmNoaWxkcmVuWzBdLCBjb21wb25lbnRCbG9ja3MpO1xuICAgIH1cbiAgICBpZiAobm9kZS50YWcgPT09ICdsYXlvdXQnKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnbGF5b3V0JyxcbiAgICAgICAgbGF5b3V0OiBub2RlLmF0dHJpYnV0ZXMubGF5b3V0LFxuICAgICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbi5mbGF0TWFwKHggPT4gZnJvbU1hcmtkb2NOb2RlKHgsIGNvbXBvbmVudEJsb2NrcykpXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAobm9kZS50YWcgPT09ICdsYXlvdXQtYXJlYScpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdsYXlvdXQtYXJlYScsXG4gICAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuLmZsYXRNYXAoeCA9PiBmcm9tTWFya2RvY05vZGUoeCwgY29tcG9uZW50QmxvY2tzKSlcbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChub2RlLnRhZyA9PT0gJ2NvbXBvbmVudC1ibG9jaycpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdjb21wb25lbnQtYmxvY2snLFxuICAgICAgICBjb21wb25lbnQ6IG5vZGUuYXR0cmlidXRlcy5jb21wb25lbnQsXG4gICAgICAgIHByb3BzOiBub2RlLmF0dHJpYnV0ZXMucHJvcHMsXG4gICAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCA/IFt7XG4gICAgICAgICAgdHlwZTogJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCcsXG4gICAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgICB0ZXh0OiAnJ1xuICAgICAgICAgIH1dXG4gICAgICAgIH1dIDogbm9kZS5jaGlsZHJlbi5mbGF0TWFwKHggPT4gZnJvbU1hcmtkb2NOb2RlKHgsIGNvbXBvbmVudEJsb2NrcykpXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAobm9kZS50YWcgPT09ICdjb21wb25lbnQtYmxvY2stcHJvcCcgJiYgQXJyYXkuaXNBcnJheShub2RlLmF0dHJpYnV0ZXMucHJvcFBhdGgpICYmIG5vZGUuYXR0cmlidXRlcy5wcm9wUGF0aC5ldmVyeSh4ID0+IHR5cGVvZiB4ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgeCA9PT0gJ251bWJlcicpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnY29tcG9uZW50LWJsb2NrLXByb3AnLFxuICAgICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbi5mbGF0TWFwKHggPT4gZnJvbU1hcmtkb2NOb2RlKHgsIGNvbXBvbmVudEJsb2NrcykpLFxuICAgICAgICBwcm9wUGF0aDogbm9kZS5hdHRyaWJ1dGVzLnByb3BQYXRoXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAobm9kZS50YWcpIHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudEJsb2NrID0gY29tcG9uZW50QmxvY2tzW25vZGUudGFnXTtcbiAgICAgIGlmIChjb21wb25lbnRCbG9jaykge1xuICAgICAgICBjb25zdCBzaW5nbGVDaGlsZEZpZWxkID0gZmluZFNpbmdsZUNoaWxkRmllbGQoe1xuICAgICAgICAgIGtpbmQ6ICdvYmplY3QnLFxuICAgICAgICAgIGZpZWxkczogY29tcG9uZW50QmxvY2suc2NoZW1hXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoc2luZ2xlQ2hpbGRGaWVsZCkge1xuICAgICAgICAgIGNvbnN0IG5ld0F0dHJpYnV0ZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG5vZGUuYXR0cmlidXRlcykpO1xuICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gW107XG4gICAgICAgICAgdG9DaGlsZHJlbkFuZFByb3BzJDEobm9kZS5jaGlsZHJlbiwgY2hpbGRyZW4sIG5ld0F0dHJpYnV0ZXMsIHNpbmdsZUNoaWxkRmllbGQsIFtdLCBjb21wb25lbnRCbG9ja3MpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnY29tcG9uZW50LWJsb2NrJyxcbiAgICAgICAgICAgIGNvbXBvbmVudDogbm9kZS50YWcsXG4gICAgICAgICAgICBwcm9wczogbmV3QXR0cmlidXRlcyxcbiAgICAgICAgICAgIGNoaWxkcmVuXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6ICdjb21wb25lbnQtYmxvY2snLFxuICAgICAgICAgIGNvbXBvbmVudDogbm9kZS50YWcsXG4gICAgICAgICAgcHJvcHM6IG5vZGUuYXR0cmlidXRlcyxcbiAgICAgICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDAgPyBbe1xuICAgICAgICAgICAgdHlwZTogJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCcsXG4gICAgICAgICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgICAgICAgdGV4dDogJydcbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfV0gOiBub2RlLmNoaWxkcmVuLmZsYXRNYXAoeCA9PiBmcm9tTWFya2RvY05vZGUoeCwgY29tcG9uZW50QmxvY2tzKSlcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHRhZzogJHtub2RlLnRhZ31gKTtcbiAgfVxuICByZXR1cm4gaW5saW5lTm9kZUZyb21NYXJrZG9jKG5vZGUpO1xufVxuZnVuY3Rpb24gdG9DaGlsZHJlbkFuZFByb3BzJDEoZnJvbU1hcmtkb2MsIHJlc3VsdGluZ0NoaWxkcmVuLCB2YWx1ZSwgc2luZ2xlQ2hpbGRGaWVsZCwgcGFyZW50UHJvcFBhdGgsIGNvbXBvbmVudEJsb2Nrcykge1xuICBpZiAoc2luZ2xlQ2hpbGRGaWVsZC5raW5kID09PSAnY2hpbGQnKSB7XG4gICAgY29uc3QgY2hpbGRyZW4gPSBmcm9tTWFya2RvYy5mbGF0TWFwKHggPT4gZnJvbU1hcmtkb2NOb2RlKHgsIGNvbXBvbmVudEJsb2NrcykpO1xuICAgIHJlc3VsdGluZ0NoaWxkcmVuLnB1c2goe1xuICAgICAgdHlwZTogYGNvbXBvbmVudC0ke3NpbmdsZUNoaWxkRmllbGQub3B0aW9ucy5raW5kfS1wcm9wYCxcbiAgICAgIHByb3BQYXRoOiBbLi4ucGFyZW50UHJvcFBhdGgsIC4uLnNpbmdsZUNoaWxkRmllbGQucmVsYXRpdmVQYXRoXSxcbiAgICAgIGNoaWxkcmVuXG4gICAgfSk7XG4gIH1cbiAgaWYgKHNpbmdsZUNoaWxkRmllbGQua2luZCA9PT0gJ2FycmF5Jykge1xuICAgIGNvbnN0IGFyciA9IFtdO1xuICAgIGZvciAobGV0IFtpZHgsIGNoaWxkXSBvZiBmcm9tTWFya2RvYy5lbnRyaWVzKCkpIHtcbiAgICAgIGlmIChjaGlsZC50eXBlID09PSAncGFyYWdyYXBoJykge1xuICAgICAgICBjaGlsZCA9IGNoaWxkLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdO1xuICAgICAgfVxuICAgICAgaWYgKGNoaWxkLnR5cGUgIT09ICd0YWcnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgZXhwZWN0ZWQgdGFnICR7c2luZ2xlQ2hpbGRGaWVsZC5hc0NoaWxkVGFnfSwgZm91bmQgdHlwZTogJHtjaGlsZC50eXBlfWApO1xuICAgICAgfVxuICAgICAgaWYgKGNoaWxkLnRhZyAhPT0gc2luZ2xlQ2hpbGRGaWVsZC5hc0NoaWxkVGFnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgZXhwZWN0ZWQgdGFnICR7c2luZ2xlQ2hpbGRGaWVsZC5hc0NoaWxkVGFnfSwgZm91bmQgdGFnOiAke2NoaWxkLnRhZ31gKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNoaWxkLmF0dHJpYnV0ZXMpKTtcbiAgICAgIGlmIChzaW5nbGVDaGlsZEZpZWxkLmNoaWxkKSB7XG4gICAgICAgIHRvQ2hpbGRyZW5BbmRQcm9wcyQxKGNoaWxkLmNoaWxkcmVuLCByZXN1bHRpbmdDaGlsZHJlbiwgYXR0cmlidXRlcywgc2luZ2xlQ2hpbGRGaWVsZC5jaGlsZCwgWy4uLnBhcmVudFByb3BQYXRoLCAuLi5zaW5nbGVDaGlsZEZpZWxkLnJlbGF0aXZlUGF0aCwgaWR4XSwgY29tcG9uZW50QmxvY2tzKTtcbiAgICAgIH1cbiAgICAgIGFyci5wdXNoKGF0dHJpYnV0ZXMpO1xuICAgIH1cbiAgICBjb25zdCBrZXkgPSBzaW5nbGVDaGlsZEZpZWxkLnJlbGF0aXZlUGF0aFtzaW5nbGVDaGlsZEZpZWxkLnJlbGF0aXZlUGF0aC5sZW5ndGggLSAxXTtcbiAgICBjb25zdCBwYXJlbnQgPSBnZXRWYWx1ZUF0UHJvcFBhdGgodmFsdWUsIHNpbmdsZUNoaWxkRmllbGQucmVsYXRpdmVQYXRoLnNsaWNlKDAsIC0xKSk7XG4gICAgcGFyZW50W2tleV0gPSBhcnI7XG4gIH1cbn1cblxuZnVuY3Rpb24gYXJlQXJyYXlzRXF1YWwoYSwgYikge1xuICByZXR1cm4gYS5sZW5ndGggPT09IGIubGVuZ3RoICYmIGEuZXZlcnkoKHgsIGkpID0+IHggPT09IGJbaV0pO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplVGV4dEJhc2VkT25JbmxpbmVNYXJrc0FuZFNvZnRCcmVha3MoW25vZGUsIHBhdGhdLCBlZGl0b3IsIGlubGluZU1hcmtzLCBzb2Z0QnJlYWtzKSB7XG4gIGNvbnN0IG1hcmtzVG9SZW1vdmUgPSBPYmplY3Qua2V5cyhub2RlKS5maWx0ZXIoeCA9PiB4ICE9PSAndGV4dCcgJiYgeCAhPT0gJ2luc2VydE1lbnUnICYmIGlubGluZU1hcmtzW3hdICE9PSB0cnVlKTtcbiAgaWYgKG1hcmtzVG9SZW1vdmUubGVuZ3RoKSB7XG4gICAgVHJhbnNmb3Jtcy51bnNldE5vZGVzKGVkaXRvciwgbWFya3NUb1JlbW92ZSwge1xuICAgICAgYXQ6IHBhdGhcbiAgICB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoIXNvZnRCcmVha3MpIHtcbiAgICBjb25zdCBoYXNTb2Z0QnJlYWtzID0gbm9kZS50ZXh0LmluY2x1ZGVzKCdcXG4nKTtcbiAgICBpZiAoaGFzU29mdEJyZWFrcykge1xuICAgICAgY29uc3QgW3BhcmVudE5vZGVdID0gRWRpdG9yLnBhcmVudChlZGl0b3IsIHBhdGgpO1xuICAgICAgaWYgKHBhcmVudE5vZGUudHlwZSAhPT0gJ2NvZGUnKSB7XG4gICAgICAgIGZvciAoY29uc3QgcG9zaXRpb24gb2YgRWRpdG9yLnBvc2l0aW9ucyhlZGl0b3IsIHtcbiAgICAgICAgICBhdDogcGF0aFxuICAgICAgICB9KSkge1xuICAgICAgICAgIGNvbnN0IGNoYXJhY3RlciA9IE5vZGUuZ2V0KGVkaXRvciwgcG9zaXRpb24ucGF0aCkudGV4dFtwb3NpdGlvbi5vZmZzZXRdO1xuICAgICAgICAgIGlmIChjaGFyYWN0ZXIgPT09ICdcXG4nKSB7XG4gICAgICAgICAgICBUcmFuc2Zvcm1zLmRlbGV0ZShlZGl0b3IsIHtcbiAgICAgICAgICAgICAgYXQ6IHBvc2l0aW9uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBub3JtYWxpemVJbmxpbmVCYXNlZE9uTGlua3MoW25vZGUsIHBhdGhdLCBlZGl0b3IsIGxpbmtzKSB7XG4gIGlmIChub2RlLnR5cGUgPT09ICdsaW5rJyAmJiAhbGlua3MpIHtcbiAgICBUcmFuc2Zvcm1zLmluc2VydFRleHQoZWRpdG9yLCBgICgke25vZGUuaHJlZn0pYCwge1xuICAgICAgYXQ6IEVkaXRvci5lbmQoZWRpdG9yLCBwYXRoKVxuICAgIH0pO1xuICAgIFRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICBhdDogcGF0aFxuICAgIH0pO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUVsZW1lbnRCYXNlZE9uRG9jdW1lbnRGZWF0dXJlcyhbbm9kZSwgcGF0aF0sIGVkaXRvciwge1xuICBmb3JtYXR0aW5nLFxuICBkaXZpZGVycyxcbiAgbGF5b3V0cyxcbiAgbGlua3MsXG4gIGltYWdlcyxcbiAgdGFibGVzXG59KSB7XG4gIGlmIChub2RlLnR5cGUgPT09ICdoZWFkaW5nJyAmJiAoIWZvcm1hdHRpbmcuaGVhZGluZ3MubGV2ZWxzLmxlbmd0aCB8fCAhZm9ybWF0dGluZy5oZWFkaW5ncy5sZXZlbHMuaW5jbHVkZXMobm9kZS5sZXZlbCkpIHx8IG5vZGUudHlwZSA9PT0gJ29yZGVyZWQtbGlzdCcgJiYgIWZvcm1hdHRpbmcubGlzdFR5cGVzLm9yZGVyZWQgfHwgbm9kZS50eXBlID09PSAndW5vcmRlcmVkLWxpc3QnICYmICFmb3JtYXR0aW5nLmxpc3RUeXBlcy51bm9yZGVyZWQgfHwgbm9kZS50eXBlID09PSAnY29kZScgJiYgIWZvcm1hdHRpbmcuYmxvY2tUeXBlcy5jb2RlIHx8IG5vZGUudHlwZSA9PT0gJ2Jsb2NrcXVvdGUnICYmICFmb3JtYXR0aW5nLmJsb2NrVHlwZXMuYmxvY2txdW90ZSB8fCBub2RlLnR5cGUgPT09ICdpbWFnZScgJiYgIWltYWdlcyB8fCBub2RlLnR5cGUgPT09ICd0YWJsZScgJiYgIXRhYmxlcyB8fCBub2RlLnR5cGUgPT09ICdsYXlvdXQnICYmIChsYXlvdXRzLmxlbmd0aCA9PT0gMCB8fCAhbGF5b3V0cy5zb21lKGxheW91dCA9PiBhcmVBcnJheXNFcXVhbChsYXlvdXQsIG5vZGUubGF5b3V0KSkpKSB7XG4gICAgVHJhbnNmb3Jtcy51bndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgIGF0OiBwYXRoXG4gICAgfSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKChub2RlLnR5cGUgPT09ICdwYXJhZ3JhcGgnIHx8IG5vZGUudHlwZSA9PT0gJ2hlYWRpbmcnKSAmJiAoIWZvcm1hdHRpbmcuYWxpZ25tZW50LmNlbnRlciAmJiBub2RlLnRleHRBbGlnbiA9PT0gJ2NlbnRlcicgfHwgIWZvcm1hdHRpbmcuYWxpZ25tZW50LmVuZCAmJiBub2RlLnRleHRBbGlnbiA9PT0gJ2VuZCcgfHwgJ3RleHRBbGlnbicgaW4gbm9kZSAmJiBub2RlLnRleHRBbGlnbiAhPT0gJ2NlbnRlcicgJiYgbm9kZS50ZXh0QWxpZ24gIT09ICdlbmQnKSkge1xuICAgIFRyYW5zZm9ybXMudW5zZXROb2RlcyhlZGl0b3IsICd0ZXh0QWxpZ24nLCB7XG4gICAgICBhdDogcGF0aFxuICAgIH0pO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICdkaXZpZGVyJyAmJiAhZGl2aWRlcnMpIHtcbiAgICBUcmFuc2Zvcm1zLnJlbW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgYXQ6IHBhdGhcbiAgICB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gbm9ybWFsaXplSW5saW5lQmFzZWRPbkxpbmtzKFtub2RlLCBwYXRoXSwgZWRpdG9yLCBsaW5rcyk7XG59XG5mdW5jdGlvbiB3aXRoRG9jdW1lbnRGZWF0dXJlc05vcm1hbGl6YXRpb24oZG9jdW1lbnRGZWF0dXJlcywgZWRpdG9yKSB7XG4gIGNvbnN0IHtcbiAgICBub3JtYWxpemVOb2RlXG4gIH0gPSBlZGl0b3I7XG4gIGVkaXRvci5ub3JtYWxpemVOb2RlID0gKFtub2RlLCBwYXRoXSkgPT4ge1xuICAgIGlmIChUZXh0JDEuaXNUZXh0KG5vZGUpKSB7XG4gICAgICBub3JtYWxpemVUZXh0QmFzZWRPbklubGluZU1hcmtzQW5kU29mdEJyZWFrcyhbbm9kZSwgcGF0aF0sIGVkaXRvciwgZG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmlubGluZU1hcmtzLCBkb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuc29mdEJyZWFrcyk7XG4gICAgfSBlbHNlIGlmIChFbGVtZW50JDEuaXNFbGVtZW50KG5vZGUpKSB7XG4gICAgICBub3JtYWxpemVFbGVtZW50QmFzZWRPbkRvY3VtZW50RmVhdHVyZXMoW25vZGUsIHBhdGhdLCBlZGl0b3IsIGRvY3VtZW50RmVhdHVyZXMpO1xuICAgIH1cbiAgICBub3JtYWxpemVOb2RlKFtub2RlLCBwYXRoXSk7XG4gIH07XG4gIHJldHVybiBlZGl0b3I7XG59XG5cbmZ1bmN0aW9uIGdldFNyY1ByZWZpeChwdWJsaWNQYXRoLCBzbHVnKSB7XG4gIHJldHVybiB0eXBlb2YgcHVibGljUGF0aCA9PT0gJ3N0cmluZycgPyBgJHtwdWJsaWNQYXRoLnJlcGxhY2UoL1xcLyokLywgJycpfS8ke3NsdWcgPT09IHVuZGVmaW5lZCA/ICcnIDogc2x1ZyArICcvJ31gIDogJyc7XG59XG5cbmZ1bmN0aW9uIGRlc2VyaWFsaXplRmlsZXMobm9kZXMsIGNvbXBvbmVudEJsb2NrcywgZmlsZXMsIG90aGVyRmlsZXMsIG1vZGUsIGRvY3VtZW50RmVhdHVyZXMsIHNsdWcpIHtcbiAgcmV0dXJuIG5vZGVzLm1hcChub2RlID0+IHtcbiAgICBpZiAobm9kZS50eXBlID09PSAnY29tcG9uZW50LWJsb2NrJykge1xuICAgICAgY29uc3QgY29tcG9uZW50QmxvY2sgPSBjb21wb25lbnRCbG9ja3Nbbm9kZS5jb21wb25lbnRdO1xuICAgICAgaWYgKCFjb21wb25lbnRCbG9jaykgcmV0dXJuIG5vZGU7XG4gICAgICBjb25zdCBzY2hlbWEgPSBvYmplY3QoY29tcG9uZW50QmxvY2suc2NoZW1hKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLm5vZGUsXG4gICAgICAgIHByb3BzOiBkZXNlcmlhbGl6ZVByb3BzKHNjaGVtYSwgbm9kZS5wcm9wcywgZmlsZXMsIG90aGVyRmlsZXMsIG1vZGUsIHNsdWcpXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAobm9kZS50eXBlID09PSAnaW1hZ2UnICYmIHR5cGVvZiBub2RlLnNyYyA9PT0gJ3N0cmluZycgJiYgbW9kZSA9PT0gJ2VkaXQnKSB7XG4gICAgICB2YXIgX3JlZjtcbiAgICAgIGNvbnN0IHByZWZpeCA9IGdldFNyY1ByZWZpeEZvckltYWdlQmxvY2soZG9jdW1lbnRGZWF0dXJlcywgc2x1Zyk7XG4gICAgICBjb25zdCBmaWxlbmFtZSA9IG5vZGUuc3JjLnNsaWNlKHByZWZpeC5sZW5ndGgpO1xuICAgICAgY29uc3QgY29udGVudCA9IChfcmVmID0gdHlwZW9mIGRvY3VtZW50RmVhdHVyZXMuaW1hZ2VzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgZG9jdW1lbnRGZWF0dXJlcy5pbWFnZXMuZGlyZWN0b3J5ID09PSAnc3RyaW5nJyA/IG90aGVyRmlsZXMuZ2V0KGZpeFBhdGgoZG9jdW1lbnRGZWF0dXJlcy5pbWFnZXMuZGlyZWN0b3J5KSkgOiBmaWxlcykgPT09IG51bGwgfHwgX3JlZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlZi5nZXQoZmlsZW5hbWUpO1xuICAgICAgaWYgKCFjb250ZW50KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZTogJ3BhcmFncmFwaCcsXG4gICAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgICB0ZXh0OiBgTWlzc2luZyBpbWFnZSAke2ZpbGVuYW1lfWBcbiAgICAgICAgICB9XVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2ltYWdlJyxcbiAgICAgICAgc3JjOiB7XG4gICAgICAgICAgZmlsZW5hbWUsXG4gICAgICAgICAgY29udGVudFxuICAgICAgICB9LFxuICAgICAgICBhbHQ6IG5vZGUuYWx0LFxuICAgICAgICB0aXRsZTogbm9kZS50aXRsZSxcbiAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgdGV4dDogJydcbiAgICAgICAgfV1cbiAgICAgIH07XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygbm9kZS50eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgY29uc3QgY2hpbGRyZW4gPSBkZXNlcmlhbGl6ZUZpbGVzKG5vZGUuY2hpbGRyZW4sIGNvbXBvbmVudEJsb2NrcywgZmlsZXMsIG90aGVyRmlsZXMsIG1vZGUsIGRvY3VtZW50RmVhdHVyZXMsIHNsdWcpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4ubm9kZSxcbiAgICAgICAgY2hpbGRyZW5cbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBub2RlO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGRlc2VyaWFsaXplUHJvcHMoc2NoZW1hLCB2YWx1ZSwgZmlsZXMsIG90aGVyRmlsZXMsIG1vZGUsIHNsdWcpIHtcbiAgcmV0dXJuIHRyYW5zZm9ybVByb3BzKHNjaGVtYSwgdmFsdWUsIHtcbiAgICBmb3JtOiAoc2NoZW1hLCB2YWx1ZSkgPT4ge1xuICAgICAgaWYgKHNjaGVtYS5mb3JtS2luZCA9PT0gJ2Fzc2V0Jykge1xuICAgICAgICB2YXIgX290aGVyRmlsZXMkZ2V0O1xuICAgICAgICBpZiAobW9kZSA9PT0gJ3JlYWQnKSB7XG4gICAgICAgICAgcmV0dXJuIHNjaGVtYS5yZWFkZXIucGFyc2UodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gc2NoZW1hLmZpbGVuYW1lKHZhbHVlLCB7XG4gICAgICAgICAgc2x1ZyxcbiAgICAgICAgICBzdWdnZXN0ZWRGaWxlbmFtZVByZWZpeDogdW5kZWZpbmVkXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc2NoZW1hLnBhcnNlKHZhbHVlLCB7XG4gICAgICAgICAgYXNzZXQ6IGZpbGVuYW1lID8gc2NoZW1hLmRpcmVjdG9yeSA/IChfb3RoZXJGaWxlcyRnZXQgPSBvdGhlckZpbGVzLmdldChzY2hlbWEuZGlyZWN0b3J5KSkgPT09IG51bGwgfHwgX290aGVyRmlsZXMkZ2V0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3RoZXJGaWxlcyRnZXQuZ2V0KGZpbGVuYW1lKSA6IGZpbGVzLmdldChmaWxlbmFtZSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgc2x1Z1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChzY2hlbWEuZm9ybUtpbmQgPT09ICdjb250ZW50Jykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZCcpO1xuICAgICAgfVxuICAgICAgaWYgKG1vZGUgPT09ICdyZWFkJykge1xuICAgICAgICByZXR1cm4gc2NoZW1hLnJlYWRlci5wYXJzZSh2YWx1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2NoZW1hLnBhcnNlKHZhbHVlLCB1bmRlZmluZWQpO1xuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBnZXRTcmNQcmVmaXhGb3JJbWFnZUJsb2NrKGRvY3VtZW50RmVhdHVyZXMsIHNsdWcpIHtcbiAgcmV0dXJuIGdldFNyY1ByZWZpeCh0eXBlb2YgZG9jdW1lbnRGZWF0dXJlcy5pbWFnZXMgPT09ICdvYmplY3QnID8gZG9jdW1lbnRGZWF0dXJlcy5pbWFnZXMucHVibGljUGF0aCA6IHVuZGVmaW5lZCwgc2x1Zyk7XG59XG5cbmZ1bmN0aW9uIHNlcmlhbGl6ZVByb3BzKHJvb3RWYWx1ZSwgcm9vdFNjaGVtYSxcbi8vIG5vdGUgeW91IG1pZ2h0IGhhdmUgYSBzbHVnIHdpdGhvdXQgYSBzbHVnIGZpZWxkIHdoZW4gc2VyaWFsaXppbmcgcHJvcHMgaW5zaWRlIGEgY29tcG9uZW50IGJsb2NrIG9yIGV0Yy4gaW4gdGhlIGVkaXRvclxuc2x1Z0ZpZWxkLCBzbHVnLCBzaG91bGRTdWdnZXN0RmlsZW5hbWVQcmVmaXgpIHtcbiAgY29uc3QgZXh0cmFGaWxlcyA9IFtdO1xuICByZXR1cm4ge1xuICAgIHZhbHVlOiB0cmFuc2Zvcm1Qcm9wcyhyb290U2NoZW1hLCByb290VmFsdWUsIHtcbiAgICAgIGZvcm0oc2NoZW1hLCB2YWx1ZSwgcHJvcFBhdGgpIHtcbiAgICAgICAgaWYgKHByb3BQYXRoLmxlbmd0aCA9PT0gMSAmJiBzbHVnRmllbGQgPT09IHByb3BQYXRoWzBdKSB7XG4gICAgICAgICAgaWYgKHNjaGVtYS5mb3JtS2luZCAhPT0gJ3NsdWcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3NsdWdGaWVsZCBpcyBhIG5vdCBhIHNsdWcgZmllbGQnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHNjaGVtYS5zZXJpYWxpemVXaXRoU2x1Zyh2YWx1ZSkudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNjaGVtYS5mb3JtS2luZCA9PT0gJ2Fzc2V0Jykge1xuICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGFzc2V0LFxuICAgICAgICAgICAgdmFsdWU6IGZvcllhbWxcbiAgICAgICAgICB9ID0gc2NoZW1hLnNlcmlhbGl6ZSh2YWx1ZSwge1xuICAgICAgICAgICAgc3VnZ2VzdGVkRmlsZW5hbWVQcmVmaXg6IHNob3VsZFN1Z2dlc3RGaWxlbmFtZVByZWZpeCA/IGdldFByb3BQYXRoUG9ydGlvbihwcm9wUGF0aCwgcm9vdFNjaGVtYSwgcm9vdFZhbHVlKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHNsdWdcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoYXNzZXQpIHtcbiAgICAgICAgICAgIGV4dHJhRmlsZXMucHVzaCh7XG4gICAgICAgICAgICAgIHBhdGg6IGFzc2V0LmZpbGVuYW1lLFxuICAgICAgICAgICAgICBjb250ZW50czogYXNzZXQuY29udGVudCxcbiAgICAgICAgICAgICAgcGFyZW50OiBzY2hlbWEuZGlyZWN0b3J5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGZvcllhbWw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNjaGVtYS5mb3JtS2luZCA9PT0gJ2NvbnRlbnQnKSB7XG4gICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgb3RoZXIsXG4gICAgICAgICAgICBleHRlcm5hbCxcbiAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICB2YWx1ZTogZm9yWWFtbFxuICAgICAgICAgIH0gPSBzY2hlbWEuc2VyaWFsaXplKHZhbHVlLCB7XG4gICAgICAgICAgICBzbHVnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgICAgICAgIGV4dHJhRmlsZXMucHVzaCh7XG4gICAgICAgICAgICAgIHBhdGg6IGdldFByb3BQYXRoUG9ydGlvbihwcm9wUGF0aCwgcm9vdFNjaGVtYSwgcm9vdFZhbHVlKSArIHNjaGVtYS5jb250ZW50RXh0ZW5zaW9uLFxuICAgICAgICAgICAgICBjb250ZW50czogY29udGVudCxcbiAgICAgICAgICAgICAgcGFyZW50OiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIGNvbnRlbnRzXSBvZiBvdGhlcikge1xuICAgICAgICAgICAgZXh0cmFGaWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgcGF0aDogZ2V0UHJvcFBhdGhQb3J0aW9uKHByb3BQYXRoLCByb290U2NoZW1hLCByb290VmFsdWUpICsgJy8nICsga2V5LFxuICAgICAgICAgICAgICBjb250ZW50cyxcbiAgICAgICAgICAgICAgcGFyZW50OiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBhbGxvd2VkRGlyZWN0b3JpZXMgPSBuZXcgU2V0KHNjaGVtYS5kaXJlY3Rvcmllcyk7XG4gICAgICAgICAgZm9yIChjb25zdCBbZGlyZWN0b3J5LCBjb250ZW50c10gb2YgZXh0ZXJuYWwpIHtcbiAgICAgICAgICAgIGlmICghYWxsb3dlZERpcmVjdG9yaWVzLmhhcyhkaXJlY3RvcnkpKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBkaXJlY3RvcnkgJHtkaXJlY3Rvcnl9IGluIGNvbnRlbnQgZmllbGQgc2VyaWFsaXphdGlvbmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBbZmlsZW5hbWUsIGZpbGVDb250ZW50c10gb2YgY29udGVudHMpIHtcbiAgICAgICAgICAgICAgZXh0cmFGaWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBwYXRoOiBmaWxlbmFtZSxcbiAgICAgICAgICAgICAgICBjb250ZW50czogZmlsZUNvbnRlbnRzLFxuICAgICAgICAgICAgICAgIHBhcmVudDogZGlyZWN0b3J5XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZm9yWWFtbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2NoZW1hLnNlcmlhbGl6ZSh2YWx1ZSkudmFsdWU7XG4gICAgICB9LFxuICAgICAgb2JqZWN0KF9zY2hlbWEsIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXModmFsdWUpLmZpbHRlcigoW18sIHZhbF0pID0+IHZhbCAhPT0gdW5kZWZpbmVkKSk7XG4gICAgICB9LFxuICAgICAgYXJyYXkoX3NjaGVtYSwgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlLm1hcCh2YWwgPT4gdmFsID09PSB1bmRlZmluZWQgPyBudWxsIDogdmFsKTtcbiAgICAgIH0sXG4gICAgICBjaGlsZCgpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9KSxcbiAgICBleHRyYUZpbGVzXG4gIH07XG59XG5mdW5jdGlvbiBnZXRQcm9wUGF0aFBvcnRpb24ocGF0aCwgc2NoZW1hLCB2YWx1ZSkge1xuICBjb25zdCBlbmQgPSBbXTtcbiAgZm9yIChjb25zdCBwb3J0aW9uIG9mIHBhdGgpIHtcbiAgICBpZiAoc2NoZW1hLmtpbmQgPT09ICdhcnJheScpIHtcbiAgICAgIHZhbHVlID0gdmFsdWVbcG9ydGlvbl07XG4gICAgICBpZiAoc2NoZW1hLnNsdWdGaWVsZCAmJiBzY2hlbWEuZWxlbWVudC5raW5kID09PSAnb2JqZWN0Jykge1xuICAgICAgICBjb25zdCBzbHVnID0gZ2V0U2x1Z0Zyb21TdGF0ZSh7XG4gICAgICAgICAgc2NoZW1hOiBzY2hlbWEuZWxlbWVudC5maWVsZHMsXG4gICAgICAgICAgc2x1Z0ZpZWxkOiBzY2hlbWEuc2x1Z0ZpZWxkXG4gICAgICAgIH0sIHZhbHVlKTtcbiAgICAgICAgZW5kLnB1c2goc2x1Zyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbmQucHVzaChwb3J0aW9uKTtcbiAgICAgIH1cbiAgICAgIHNjaGVtYSA9IHNjaGVtYS5lbGVtZW50O1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGVuZC5wdXNoKHBvcnRpb24pO1xuICAgIGlmIChzY2hlbWEua2luZCA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHZhbHVlID0gdmFsdWVbcG9ydGlvbl07XG4gICAgICBzY2hlbWEgPSBzY2hlbWEuZmllbGRzW3BvcnRpb25dO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChzY2hlbWEua2luZCA9PT0gJ2NvbmRpdGlvbmFsJykge1xuICAgICAgaWYgKHBvcnRpb24gPT09ICdkaXNjcmltaW5hbnQnKSB7XG4gICAgICAgIHNjaGVtYSA9IHNjaGVtYS5kaXNjcmltaW5hbnQ7XG4gICAgICB9IGVsc2UgaWYgKHBvcnRpb24gPT09ICd2YWx1ZScpIHtcbiAgICAgICAgc2NoZW1hID0gc2NoZW1hLnZhbHVlc1t2YWx1ZS5kaXNjcmltaW5hbnRdO1xuICAgICAgfVxuICAgICAgdmFsdWUgPSB2YWx1ZVtwb3J0aW9uXTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYHVuZXhwZWN0ZWQgJHtzY2hlbWEua2luZH1gKTtcbiAgfVxuICByZXR1cm4gZW5kLmpvaW4oJy8nKTtcbn1cblxuZnVuY3Rpb24gdG9JbmxpbmUobm9kZXMpIHtcbiAgcmV0dXJuIG5ldyBBc3QuTm9kZSgnaW5saW5lJywge30sIG5vZGVzLmZsYXRNYXAodG9NYXJrZG9jSW5saW5lKSk7XG59XG5jb25zdCBtYXJrVG9NYXJrZG9jID0ge1xuICBib2xkOiB7XG4gICAgdHlwZTogJ3N0cm9uZydcbiAgfSxcbiAgY29kZToge1xuICAgIHR5cGU6ICdjb2RlJ1xuICB9LFxuICBpdGFsaWM6IHtcbiAgICB0eXBlOiAnZW0nXG4gIH0sXG4gIHVuZGVybGluZToge1xuICAgIHR5cGU6ICd0YWcnLFxuICAgIHRhZzogJ3UnXG4gIH0sXG4gIGtleWJvYXJkOiB7XG4gICAgdHlwZTogJ3RhZycsXG4gICAgdGFnOiAna2JkJ1xuICB9LFxuICBzdHJpa2V0aHJvdWdoOiB7XG4gICAgdHlwZTogJ3MnXG4gIH0sXG4gIHN1YnNjcmlwdDoge1xuICAgIHR5cGU6ICd0YWcnLFxuICAgIHRhZzogJ3N1YidcbiAgfSxcbiAgc3VwZXJzY3JpcHQ6IHtcbiAgICB0eXBlOiAndGFnJyxcbiAgICB0YWc6ICdzdXAnXG4gIH1cbn07XG5mdW5jdGlvbiB0b01hcmtkb2NJbmxpbmUobm9kZSkge1xuICB2YXIgX2V4ZWMsIF9leGVjMjtcbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2xpbmsnKSB7XG4gICAgcmV0dXJuIG5ldyBBc3QuTm9kZSgnbGluaycsIHtcbiAgICAgIGhyZWY6IG5vZGUuaHJlZlxuICAgIH0sIG5vZGUuY2hpbGRyZW4uZmxhdE1hcCh0b01hcmtkb2NJbmxpbmUpKTtcbiAgfVxuICBpZiAobm9kZS50eXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYHVuZXhwZWN0ZWQgaW5saW5lIG5vZGUgdHlwZTogJHtub2RlLnR5cGV9YCk7XG4gIH1cbiAgY29uc3QgbWFya3MgPSBPYmplY3Qua2V5cyhub2RlKS5maWx0ZXIobWFyayA9PiBtYXJrICE9PSAndGV4dCcgJiYgbWFyayAhPT0gJ2NvZGUnKS5zb3J0KCk7XG4gIGNvbnN0IGxlYWRpbmdXaGl0ZXNwYWNlID0gKF9leGVjID0gL15cXHMrLy5leGVjKG5vZGUudGV4dCkpID09PSBudWxsIHx8IF9leGVjID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZXhlY1swXTtcbiAgY29uc3QgdHJhaWxpbmdXaGl0ZXNwYWNlID0gKF9leGVjMiA9IC9cXHMrJC8uZXhlYyhub2RlLnRleHQpKSA9PT0gbnVsbCB8fCBfZXhlYzIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9leGVjMlswXTtcbiAgbGV0IGNoaWxkcmVuID0gbm9kZS5jb2RlID8gW25ldyBBc3QuTm9kZSgnY29kZScsIHtcbiAgICBjb250ZW50OiBub2RlLnRleHQudHJpbSgpXG4gIH0sIFtdKV0gOiBbbmV3IEFzdC5Ob2RlKCd0ZXh0Jywge1xuICAgIGNvbnRlbnQ6IG5vZGUudGV4dC50cmltKClcbiAgfSldO1xuICBmb3IgKGNvbnN0IG1hcmsgb2YgbWFya3MpIHtcbiAgICBjb25zdCBjb25maWcgPSBtYXJrVG9NYXJrZG9jW21hcmtdO1xuICAgIGlmIChjb25maWcpIHtcbiAgICAgIGNoaWxkcmVuID0gW25ldyBBc3QuTm9kZShjb25maWcudHlwZSwge30sIGNoaWxkcmVuLCBjb25maWcudGFnKV07XG4gICAgfVxuICB9XG4gIGlmIChsZWFkaW5nV2hpdGVzcGFjZSAhPT0gbnVsbCAmJiBsZWFkaW5nV2hpdGVzcGFjZSAhPT0gdm9pZCAwICYmIGxlYWRpbmdXaGl0ZXNwYWNlLmxlbmd0aCkge1xuICAgIGNoaWxkcmVuLnVuc2hpZnQobmV3IEFzdC5Ob2RlKCd0ZXh0Jywge1xuICAgICAgY29udGVudDogbGVhZGluZ1doaXRlc3BhY2VcbiAgICB9LCBbXSkpO1xuICB9XG4gIGlmICh0cmFpbGluZ1doaXRlc3BhY2UgIT09IG51bGwgJiYgdHJhaWxpbmdXaGl0ZXNwYWNlICE9PSB2b2lkIDAgJiYgdHJhaWxpbmdXaGl0ZXNwYWNlLmxlbmd0aCkge1xuICAgIGNoaWxkcmVuLnB1c2gobmV3IEFzdC5Ob2RlKCd0ZXh0Jywge1xuICAgICAgY29udGVudDogdHJhaWxpbmdXaGl0ZXNwYWNlXG4gICAgfSwgW10pKTtcbiAgfVxuICByZXR1cm4gY2hpbGRyZW47XG59XG5mdW5jdGlvbiB0b01hcmtkb2NEb2N1bWVudChub2RlcywgX2NvbmZpZykge1xuICBjb25zdCBleHRyYUZpbGVzID0gW107XG4gIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAuLi5fY29uZmlnLFxuICAgIGV4dHJhRmlsZXNcbiAgfTtcbiAgY29uc3Qgbm9kZSA9IG5ldyBBc3QuTm9kZSgnZG9jdW1lbnQnLCB7fSwgbm9kZXMuZmxhdE1hcCh4ID0+IHRvTWFya2RvYyh4LCBjb25maWcpKSk7XG4gIHJldHVybiB7XG4gICAgbm9kZSxcbiAgICBleHRyYUZpbGVzXG4gIH07XG59XG5mdW5jdGlvbiB0b0NoaWxkcmVuQW5kUHJvcHMoY2hpbGRyZW5Bc01hcmtkb2MsIHJlc3VsdGluZ0NoaWxkcmVuLCB2YWx1ZSwgc2luZ2xlQ2hpbGRGaWVsZCkge1xuICBpZiAoc2luZ2xlQ2hpbGRGaWVsZC5raW5kID09PSAnY2hpbGQnKSB7XG4gICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbkFzTWFya2RvYy5maW5kKHggPT4gYXJlQXJyYXlzRXF1YWwoeC5wcm9wUGF0aCwgc2luZ2xlQ2hpbGRGaWVsZC5yZWxhdGl2ZVBhdGgpKTtcbiAgICBpZiAoY2hpbGQpIHtcbiAgICAgIHJlc3VsdGluZ0NoaWxkcmVuLnB1c2goLi4uY2hpbGQuY2hpbGRyZW4pO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHNpbmdsZUNoaWxkRmllbGQua2luZCA9PT0gJ2FycmF5Jykge1xuICAgIGNvbnN0IGtleSA9IHNpbmdsZUNoaWxkRmllbGQucmVsYXRpdmVQYXRoW3NpbmdsZUNoaWxkRmllbGQucmVsYXRpdmVQYXRoLmxlbmd0aCAtIDFdO1xuICAgIGNvbnN0IHBhcmVudCA9IGdldFZhbHVlQXRQcm9wUGF0aCh2YWx1ZSwgc2luZ2xlQ2hpbGRGaWVsZC5yZWxhdGl2ZVBhdGguc2xpY2UoMCwgLTEpKTtcbiAgICBjb25zdCB2YWx1ZUF0UHJvcFBhdGggPSBwYXJlbnRba2V5XTtcbiAgICBkZWxldGUgcGFyZW50W2tleV07XG4gICAgY29uc3QgY2hpbGROb2RlcyA9IG5ldyBNYXAoKTtcbiAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGNoaWxkcmVuQXNNYXJrZG9jKSB7XG4gICAgICBjb25zdCBpbm5lclByb3BQYXRoID0gY2hpbGQucHJvcFBhdGguc2xpY2Uoc2luZ2xlQ2hpbGRGaWVsZC5yZWxhdGl2ZVBhdGgubGVuZ3RoICsgMSk7XG4gICAgICBjb25zdCBudW0gPSBjaGlsZC5wcm9wUGF0aFtzaW5nbGVDaGlsZEZpZWxkLnJlbGF0aXZlUGF0aC5sZW5ndGhdO1xuICAgICAgaWYgKGNoaWxkTm9kZXMuZ2V0KG51bSkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjaGlsZE5vZGVzLnNldChudW0sIFtdKTtcbiAgICAgIH1cbiAgICAgIGNoaWxkTm9kZXMuZ2V0KG51bSkucHVzaCh7XG4gICAgICAgIGNoaWxkcmVuOiBjaGlsZC5jaGlsZHJlbixcbiAgICAgICAgcHJvcFBhdGg6IGlubmVyUHJvcFBhdGhcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXN1bHRpbmdDaGlsZHJlbi5wdXNoKC4uLnZhbHVlQXRQcm9wUGF0aC5tYXAoKHgsIGkpID0+IHtcbiAgICAgIHZhciBfY2hpbGROb2RlcyRnZXQ7XG4gICAgICBjb25zdCBuZXdDaGlsZHJlbkFzTWFya2RvYyA9IChfY2hpbGROb2RlcyRnZXQgPSBjaGlsZE5vZGVzLmdldChpKSkgIT09IG51bGwgJiYgX2NoaWxkTm9kZXMkZ2V0ICE9PSB2b2lkIDAgPyBfY2hpbGROb2RlcyRnZXQgOiBbXTtcbiAgICAgIGNvbnN0IGNoaWxkcmVuID0gW107XG4gICAgICB0b0NoaWxkcmVuQW5kUHJvcHMobmV3Q2hpbGRyZW5Bc01hcmtkb2MsIGNoaWxkcmVuLCB4LCBzaW5nbGVDaGlsZEZpZWxkLmNoaWxkKTtcbiAgICAgIHJldHVybiBuZXcgQXN0Lk5vZGUoJ3RhZycsIHgsIGNoaWxkcmVuLCBzaW5nbGVDaGlsZEZpZWxkLmFzQ2hpbGRUYWcpO1xuICAgIH0pKTtcbiAgfVxufVxuZnVuY3Rpb24gdG9NYXJrZG9jKG5vZGUsIGNvbmZpZykge1xuICBpZiAobm9kZS50eXBlID09PSAncGFyYWdyYXBoJykge1xuICAgIGNvbnN0IG1hcmtkb2NOb2RlID0gbmV3IEFzdC5Ob2RlKCdwYXJhZ3JhcGgnLCBub2RlLnRleHRBbGlnbiA/IHtcbiAgICAgIHRleHRBbGlnbjogbm9kZS50ZXh0QWxpZ25cbiAgICB9IDoge30sIFt0b0lubGluZShub2RlLmNoaWxkcmVuKV0pO1xuICAgIGlmIChub2RlLnRleHRBbGlnbikge1xuICAgICAgbWFya2RvY05vZGUuYW5ub3RhdGlvbnMucHVzaCh7XG4gICAgICAgIG5hbWU6ICd0ZXh0QWxpZ24nLFxuICAgICAgICB2YWx1ZTogbm9kZS50ZXh0QWxpZ24sXG4gICAgICAgIHR5cGU6ICdhdHRyaWJ1dGUnXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG1hcmtkb2NOb2RlO1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICdpbWFnZScpIHtcbiAgICBjb25maWcuZXh0cmFGaWxlcy5wdXNoKHtcbiAgICAgIGNvbnRlbnRzOiBub2RlLnNyYy5jb250ZW50LFxuICAgICAgcGF0aDogbm9kZS5zcmMuZmlsZW5hbWUsXG4gICAgICBwYXJlbnQ6IHR5cGVvZiBjb25maWcuZG9jdW1lbnRGZWF0dXJlcy5pbWFnZXMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBjb25maWcuZG9jdW1lbnRGZWF0dXJlcy5pbWFnZXMuZGlyZWN0b3J5ID09PSAnc3RyaW5nJyA/IGZpeFBhdGgoY29uZmlnLmRvY3VtZW50RmVhdHVyZXMuaW1hZ2VzLmRpcmVjdG9yeSkgOiB1bmRlZmluZWRcbiAgICB9KTtcbiAgICByZXR1cm4gbmV3IEFzdC5Ob2RlKCdwYXJhZ3JhcGgnLCB7fSwgW25ldyBBc3QuTm9kZSgnaW5saW5lJywge30sIFtuZXcgQXN0Lk5vZGUoJ2ltYWdlJywge1xuICAgICAgc3JjOiBlbmNvZGVVUkkoYCR7Z2V0U3JjUHJlZml4Rm9ySW1hZ2VCbG9jayhjb25maWcuZG9jdW1lbnRGZWF0dXJlcywgY29uZmlnLnNsdWcpfSR7bm9kZS5zcmMuZmlsZW5hbWV9YCksXG4gICAgICBhbHQ6IG5vZGUuYWx0LFxuICAgICAgdGl0bGU6IG5vZGUudGl0bGVcbiAgICB9KV0pXSk7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2NvZGUnKSB7XG4gICAgY29uc3QgZXh0cmFBdHRyaWJ1dGVzID0ge307XG4gICAgY29uc3Qge1xuICAgICAgY2hpbGRyZW4sXG4gICAgICBsYW5ndWFnZSxcbiAgICAgIHR5cGUsXG4gICAgICAuLi5yZXN0XG4gICAgfSA9IG5vZGU7XG4gICAgY29uc3Qgc2NoZW1hID0gdHlwZW9mIGNvbmZpZy5kb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuYmxvY2tUeXBlcy5jb2RlID09PSAnb2JqZWN0JyA/IGNvbmZpZy5kb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuYmxvY2tUeXBlcy5jb2RlLnNjaGVtYSA6IHVuZGVmaW5lZDtcbiAgICBpZiAoc2NoZW1hICYmIE9iamVjdC5rZXlzKHNjaGVtYS5maWVsZHMpLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHNlcmlhbGl6ZWQgPSBzZXJpYWxpemVQcm9wcyhnZXRJbml0aWFsUHJvcHNWYWx1ZUZyb21Jbml0aWFsaXplcihzY2hlbWEsIHJlc3QpLCBzY2hlbWEsIHVuZGVmaW5lZCwgY29uZmlnLnNsdWcsIGZhbHNlKTtcbiAgICAgIE9iamVjdC5hc3NpZ24oZXh0cmFBdHRyaWJ1dGVzLCBzZXJpYWxpemVkLnZhbHVlKTtcbiAgICAgIGNvbmZpZy5leHRyYUZpbGVzLnB1c2goLi4uc2VyaWFsaXplZC5leHRyYUZpbGVzKTtcbiAgICB9XG4gICAgbGV0IGNvbnRlbnQgPSBjaGlsZHJlblswXS50ZXh0ICsgJ1xcbic7XG4gICAgY29uc3QgbWFya2RvY05vZGUgPSBuZXcgQXN0Lk5vZGUoJ2ZlbmNlJywge1xuICAgICAgY29udGVudCxcbiAgICAgIGxhbmd1YWdlLFxuICAgICAgLi4uZXh0cmFBdHRyaWJ1dGVzXG4gICAgfSwgW25ldyBBc3QuTm9kZSgndGV4dCcsIHtcbiAgICAgIGNvbnRlbnRcbiAgICB9KV0pO1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGV4dHJhQXR0cmlidXRlcykpIHtcbiAgICAgIG1hcmtkb2NOb2RlLmFubm90YXRpb25zLnB1c2goe1xuICAgICAgICBuYW1lOiBrZXksXG4gICAgICAgIHZhbHVlLFxuICAgICAgICB0eXBlOiAnYXR0cmlidXRlJ1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBtYXJrZG9jTm9kZTtcbiAgfVxuICBjb25zdCBfdG9NYXJrZG9jID0gbm9kZSA9PiB0b01hcmtkb2Mobm9kZSwgY29uZmlnKTtcbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2Jsb2NrcXVvdGUnKSB7XG4gICAgcmV0dXJuIG5ldyBBc3QuTm9kZSgnYmxvY2txdW90ZScsIHt9LCBub2RlLmNoaWxkcmVuLm1hcChfdG9NYXJrZG9jKSk7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2RpdmlkZXInKSB7XG4gICAgcmV0dXJuIG5ldyBBc3QuTm9kZSgnaHInKTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAndGFibGUnKSB7XG4gICAgY29uc3QgaGVhZCA9IG5vZGUuY2hpbGRyZW4uZmluZCh4ID0+IHgudHlwZSA9PT0gJ3RhYmxlLWhlYWQnKTtcbiAgICByZXR1cm4gbmV3IEFzdC5Ob2RlKCd0YWcnLCB7fSwgW25ldyBBc3QuTm9kZSgndGFibGUnLCB7fSwgW25ldyBBc3QuTm9kZSgndGhlYWQnLCB7fSwgaGVhZCA/IGhlYWQuY2hpbGRyZW4ubWFwKF90b01hcmtkb2MpIDogW10pLCBfdG9NYXJrZG9jKG5vZGUuY2hpbGRyZW4uZmluZCh4ID0+IHgudHlwZSA9PT0gJ3RhYmxlLWJvZHknKSldKV0sICd0YWJsZScpO1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICd0YWJsZS1ib2R5Jykge1xuICAgIHJldHVybiBuZXcgQXN0Lk5vZGUoJ3Rib2R5Jywge30sIG5vZGUuY2hpbGRyZW4ubWFwKF90b01hcmtkb2MpKTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAndGFibGUtcm93Jykge1xuICAgIHJldHVybiBuZXcgQXN0Lk5vZGUoJ3RyJywge30sIG5vZGUuY2hpbGRyZW4ubWFwKF90b01hcmtkb2MpKTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAndGFibGUtY2VsbCcpIHtcbiAgICByZXR1cm4gbmV3IEFzdC5Ob2RlKG5vZGUuaGVhZGVyID8gJ3RoJyA6ICd0ZCcsIHt9LCBub2RlLmNoaWxkcmVuLm1hcChfdG9NYXJrZG9jKSk7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2hlYWRpbmcnKSB7XG4gICAgY29uc3QgZXh0cmFBdHRyaWJ1dGVzID0ge307XG4gICAgaWYgKG5vZGUudGV4dEFsaWduKSB7XG4gICAgICBleHRyYUF0dHJpYnV0ZXMudGV4dEFsaWduID0gbm9kZS50ZXh0QWxpZ247XG4gICAgfVxuICAgIGNvbnN0IHtcbiAgICAgIGNoaWxkcmVuLFxuICAgICAgbGV2ZWwsXG4gICAgICB0ZXh0QWxpZ24sXG4gICAgICB0eXBlLFxuICAgICAgLi4ucmVzdFxuICAgIH0gPSBub2RlO1xuICAgIGNvbnN0IHNjaGVtYSA9IGNvbmZpZy5kb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuaGVhZGluZ3Muc2NoZW1hO1xuICAgIGlmIChPYmplY3Qua2V5cyhzY2hlbWEuZmllbGRzKS5sZW5ndGggPiAwKSB7XG4gICAgICBPYmplY3QuYXNzaWduKGV4dHJhQXR0cmlidXRlcywgc2VyaWFsaXplUHJvcHMoZ2V0SW5pdGlhbFByb3BzVmFsdWVGcm9tSW5pdGlhbGl6ZXIoc2NoZW1hLCByZXN0KSwgc2NoZW1hLCB1bmRlZmluZWQsIGNvbmZpZy5zbHVnLCBmYWxzZSkudmFsdWUpO1xuICAgIH1cbiAgICBjb25zdCBtYXJrZG9jTm9kZSA9IG5ldyBBc3QuTm9kZSgnaGVhZGluZycsIHtcbiAgICAgIGxldmVsOiBub2RlLmxldmVsLFxuICAgICAgLi4uZXh0cmFBdHRyaWJ1dGVzXG4gICAgfSwgW3RvSW5saW5lKG5vZGUuY2hpbGRyZW4pXSk7XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZXh0cmFBdHRyaWJ1dGVzKSkge1xuICAgICAgbWFya2RvY05vZGUuYW5ub3RhdGlvbnMucHVzaCh7XG4gICAgICAgIG5hbWU6IGtleSxcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIHR5cGU6ICdhdHRyaWJ1dGUnXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG1hcmtkb2NOb2RlO1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICdvcmRlcmVkLWxpc3QnKSB7XG4gICAgcmV0dXJuIG5ldyBBc3QuTm9kZSgnbGlzdCcsIHtcbiAgICAgIG9yZGVyZWQ6IHRydWVcbiAgICB9LCBub2RlLmNoaWxkcmVuLm1hcChfdG9NYXJrZG9jKSk7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ3Vub3JkZXJlZC1saXN0Jykge1xuICAgIHJldHVybiBuZXcgQXN0Lk5vZGUoJ2xpc3QnLCB7XG4gICAgICBvcmRlcmVkOiBmYWxzZVxuICAgIH0sIG5vZGUuY2hpbGRyZW4ubWFwKF90b01hcmtkb2MpKTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAnbGF5b3V0Jykge1xuICAgIHJldHVybiBuZXcgQXN0Lk5vZGUoJ3RhZycsIHtcbiAgICAgIGxheW91dDogbm9kZS5sYXlvdXRcbiAgICB9LCBub2RlLmNoaWxkcmVuLm1hcChfdG9NYXJrZG9jKSwgJ2xheW91dCcpO1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICdsYXlvdXQtYXJlYScpIHtcbiAgICByZXR1cm4gbmV3IEFzdC5Ob2RlKCd0YWcnLCB7fSwgbm9kZS5jaGlsZHJlbi5mbGF0TWFwKF90b01hcmtkb2MpLCAnbGF5b3V0LWFyZWEnKTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAnY29tcG9uZW50LWJsb2NrJykge1xuICAgIGNvbnN0IGlzVm9pZCA9IG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAxICYmIG5vZGUuY2hpbGRyZW5bMF0udHlwZSA9PT0gJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCcgJiYgbm9kZS5jaGlsZHJlblswXS5wcm9wUGF0aCA9PT0gdW5kZWZpbmVkO1xuICAgIGNvbnN0IGNvbXBvbmVudEJsb2NrID0gY29uZmlnLmNvbXBvbmVudEJsb2Nrc1tub2RlLmNvbXBvbmVudF07XG4gICAgY29uc3QgY2hpbGRyZW5Bc01hcmtkb2MgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIG5vZGUuY2hpbGRyZW4pIHtcbiAgICAgIGlmICgoY2hpbGQudHlwZSA9PT0gJ2NvbXBvbmVudC1ibG9jay1wcm9wJyB8fCBjaGlsZC50eXBlID09PSAnY29tcG9uZW50LWlubGluZS1wcm9wJykgJiYgY2hpbGQucHJvcFBhdGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjaGlsZHJlbkFzTWFya2RvYy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBjaGlsZC50eXBlLFxuICAgICAgICAgIHByb3BQYXRoOiBjaGlsZC5wcm9wUGF0aCxcbiAgICAgICAgICBjaGlsZHJlbjogY2hpbGQudHlwZSA9PT0gJ2NvbXBvbmVudC1ibG9jay1wcm9wJyA/IGNoaWxkLmNoaWxkcmVuLmZsYXRNYXAoX3RvTWFya2RvYykgOiBbdG9JbmxpbmUoY2hpbGQuY2hpbGRyZW4pXVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IGF0dHJpYnV0ZXMgPSBub2RlLnByb3BzO1xuICAgIGlmIChjb21wb25lbnRCbG9jaykge1xuICAgICAgY29uc3Qgc2VyaWFsaXplZCA9IHNlcmlhbGl6ZVByb3BzKG5vZGUucHJvcHMsIHtcbiAgICAgICAga2luZDogJ29iamVjdCcsXG4gICAgICAgIGZpZWxkczogY29tcG9uZW50QmxvY2suc2NoZW1hXG4gICAgICB9LCB1bmRlZmluZWQsIGNvbmZpZy5zbHVnLCBmYWxzZSk7XG4gICAgICBhdHRyaWJ1dGVzID0gc2VyaWFsaXplZC52YWx1ZTtcbiAgICAgIGNvbmZpZy5leHRyYUZpbGVzLnB1c2goLi4uc2VyaWFsaXplZC5leHRyYUZpbGVzKTtcbiAgICAgIGNvbnN0IHNpbmdsZUNoaWxkRmllbGQgPSBmaW5kU2luZ2xlQ2hpbGRGaWVsZCh7XG4gICAgICAgIGtpbmQ6ICdvYmplY3QnLFxuICAgICAgICBmaWVsZHM6IGNvbXBvbmVudEJsb2NrLnNjaGVtYVxuICAgICAgfSk7XG4gICAgICBpZiAoc2luZ2xlQ2hpbGRGaWVsZCkge1xuICAgICAgICBjb25zdCBjaGlsZHJlbiA9IFtdO1xuICAgICAgICB0b0NoaWxkcmVuQW5kUHJvcHMoY2hpbGRyZW5Bc01hcmtkb2MsIGNoaWxkcmVuLCBhdHRyaWJ1dGVzLCBzaW5nbGVDaGlsZEZpZWxkKTtcbiAgICAgICAgcmV0dXJuIG5ldyBBc3QuTm9kZSgndGFnJywgYXR0cmlidXRlcywgY2hpbGRyZW4sIG5vZGUuY29tcG9uZW50KTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgY2hpbGRyZW4gPSBpc1ZvaWQgPyBbXSA6IGNoaWxkcmVuQXNNYXJrZG9jLm1hcCh4ID0+IG5ldyBBc3QuTm9kZSgndGFnJywge1xuICAgICAgcHJvcFBhdGg6IHgucHJvcFBhdGhcbiAgICB9LCB4LmNoaWxkcmVuLCB4LnR5cGUpKTtcbiAgICByZXR1cm4gbmV3IEFzdC5Ob2RlKCd0YWcnLCBhdHRyaWJ1dGVzLCBjaGlsZHJlbiwgbm9kZS5jb21wb25lbnQpO1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICdjb21wb25lbnQtYmxvY2stcHJvcCcgfHwgbm9kZS50eXBlID09PSAnY29tcG9uZW50LWlubGluZS1wcm9wJykge1xuICAgIHJldHVybiBuZXcgQXN0Lk5vZGUoJ3RhZycsIHtcbiAgICAgIHByb3BQYXRoOiBub2RlLnByb3BQYXRoXG4gICAgfSwgbm9kZS50eXBlID09PSAnY29tcG9uZW50LWlubGluZS1wcm9wJyA/IFt0b0lubGluZShub2RlLmNoaWxkcmVuKV0gOiBub2RlLmNoaWxkcmVuLmZsYXRNYXAoX3RvTWFya2RvYyksIG5vZGUudHlwZSk7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2xpc3QtaXRlbScpIHtcbiAgICBjb25zdCBsaXN0SXRlbUNvbnRlbnQgPSBub2RlLmNoaWxkcmVuWzBdO1xuICAgIGlmIChsaXN0SXRlbUNvbnRlbnQudHlwZSAhPT0gJ2xpc3QtaXRlbS1jb250ZW50Jykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdsaXN0IGl0ZW0gY29udGVudCBtdXN0IGNvbnRhaW4gYSBsaXN0LWl0ZW0tY29udGVudCcpO1xuICAgIH1cbiAgICBjb25zdCBpbmxpbmUgPSB0b0lubGluZShsaXN0SXRlbUNvbnRlbnQuY2hpbGRyZW4pO1xuICAgIGNvbnN0IGNoaWxkcmVuID0gW2lubGluZV07XG4gICAgY29uc3QgbmVzdGVkTGlzdCA9IG5vZGUuY2hpbGRyZW5bMV07XG4gICAgaWYgKG5lc3RlZExpc3QpIHtcbiAgICAgIGNoaWxkcmVuLnB1c2godG9NYXJrZG9jKG5lc3RlZExpc3QsIGNvbmZpZykpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEFzdC5Ob2RlKCdpdGVtJywge30sIGNoaWxkcmVuKTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAnbGlzdC1pdGVtLWNvbnRlbnQnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdsaXN0LWl0ZW0tY29udGVudCBpbiB1bmV4cGVjdGVkIHBvc2l0aW9uJyk7XG4gIH1cbiAgZGVidWdnZXI7XG4gIHRocm93IG5ldyBFcnJvcihgdW5leHBlY3RlZCBub2RlIHR5cGU6ICR7bm9kZS50eXBlfWApO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZVRleHQodmFsLCBtaW4sIG1heCwgZmllbGRMYWJlbCwgc2x1Z0luZm8pIHtcbiAgaWYgKHZhbC5sZW5ndGggPCBtaW4pIHtcbiAgICBpZiAobWluID09PSAxKSB7XG4gICAgICByZXR1cm4gYCR7ZmllbGRMYWJlbH0gbXVzdCBub3QgYmUgZW1wdHlgO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYCR7ZmllbGRMYWJlbH0gbXVzdCBiZSBhdCBsZWFzdCAke21pbn0gY2hhcmFjdGVycyBsb25nYDtcbiAgICB9XG4gIH1cbiAgaWYgKHZhbC5sZW5ndGggPiBtYXgpIHtcbiAgICByZXR1cm4gYCR7ZmllbGRMYWJlbH0gbXVzdCBiZSBubyBsb25nZXIgdGhhbiAke21heH0gY2hhcmFjdGVyc2A7XG4gIH1cbiAgaWYgKHNsdWdJbmZvKSB7XG4gICAgaWYgKHZhbCA9PT0gJycpIHtcbiAgICAgIHJldHVybiBgJHtmaWVsZExhYmVsfSBtdXN0IG5vdCBiZSBlbXB0eWA7XG4gICAgfVxuICAgIGlmICh2YWwgPT09ICcuLicpIHtcbiAgICAgIHJldHVybiBgJHtmaWVsZExhYmVsfSBtdXN0IG5vdCBiZSAuLmA7XG4gICAgfVxuICAgIGlmICh2YWwgPT09ICcuJykge1xuICAgICAgcmV0dXJuIGAke2ZpZWxkTGFiZWx9IG11c3Qgbm90IGJlIC5gO1xuICAgIH1cbiAgICBpZiAoc2x1Z0luZm8uZ2xvYiA9PT0gJyoqJykge1xuICAgICAgY29uc3Qgc3BsaXQgPSB2YWwuc3BsaXQoJy8nKTtcbiAgICAgIGlmIChzcGxpdC5zb21lKHMgPT4gcyA9PT0gJy4uJykpIHtcbiAgICAgICAgcmV0dXJuIGAke2ZpZWxkTGFiZWx9IG11c3Qgbm90IGNvbnRhaW4gLi5gO1xuICAgICAgfVxuICAgICAgaWYgKHNwbGl0LnNvbWUocyA9PiBzID09PSAnLicpKSB7XG4gICAgICAgIHJldHVybiBgJHtmaWVsZExhYmVsfSBtdXN0IG5vdCBiZSAuYDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKChzbHVnSW5mby5nbG9iID09PSAnKicgPyAvW1xcXFwvXS8gOiAvW1xcXFxdLykudGVzdCh2YWwpKSB7XG4gICAgICByZXR1cm4gYCR7ZmllbGRMYWJlbH0gbXVzdCBub3QgY29udGFpbiBzbGFzaGVzYDtcbiAgICB9XG4gICAgaWYgKC9eXFxzfFxccyQvLnRlc3QodmFsKSkge1xuICAgICAgcmV0dXJuIGAke2ZpZWxkTGFiZWx9IG11c3Qgbm90IHN0YXJ0IG9yIGVuZCB3aXRoIHNwYWNlc2A7XG4gICAgfVxuICAgIGlmIChzbHVnSW5mby5zbHVncy5oYXModmFsKSkge1xuICAgICAgcmV0dXJuIGAke2ZpZWxkTGFiZWx9IG11c3QgYmUgdW5pcXVlYDtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gQWRkVG9QYXRoUHJvdmlkZXIocHJvcHMpIHtcbiAgY29uc3QgcGF0aCA9IHVzZUNvbnRleHQoUGF0aENvbnRleHQpO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChQYXRoQ29udGV4dC5Qcm92aWRlciwge1xuICAgIHZhbHVlOiB1c2VNZW1vKCgpID0+IHBhdGguY29uY2F0KHByb3BzLnBhcnQpLCBbcGF0aCwgcHJvcHMucGFydF0pLFxuICAgIGNoaWxkcmVuOiBwcm9wcy5jaGlsZHJlblxuICB9KTtcbn1cbmNvbnN0IFNsdWdGaWVsZENvbnRleHQgPSAvKiNfX1BVUkVfXyovY3JlYXRlQ29udGV4dCh1bmRlZmluZWQpO1xuY29uc3QgU2x1Z0ZpZWxkUHJvdmlkZXIgPSBTbHVnRmllbGRDb250ZXh0LlByb3ZpZGVyO1xuY29uc3QgUGF0aENvbnRleHQgPSAvKiNfX1BVUkVfXyovY3JlYXRlQ29udGV4dChbXSk7XG5jb25zdCBQYXRoQ29udGV4dFByb3ZpZGVyID0gUGF0aENvbnRleHQuUHJvdmlkZXI7XG5cbmZ1bmN0aW9uIFRleHRGaWVsZElucHV0KHByb3BzKSB7XG4gIGNvbnN0IFRleHRGaWVsZENvbXBvbmVudCA9IHByb3BzLm11bHRpbGluZSA/IFRleHRBcmVhIDogVGV4dEZpZWxkO1xuICBjb25zdCBbYmx1cnJlZCwgc2V0Qmx1cnJlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHNsdWdDb250ZXh0ID0gdXNlQ29udGV4dChTbHVnRmllbGRDb250ZXh0KTtcbiAgY29uc3QgcGF0aCA9IHVzZUNvbnRleHQoUGF0aENvbnRleHQpO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChUZXh0RmllbGRDb21wb25lbnQsIHtcbiAgICBsYWJlbDogcHJvcHMubGFiZWwsXG4gICAgZGVzY3JpcHRpb246IHByb3BzLmRlc2NyaXB0aW9uLFxuICAgIGF1dG9Gb2N1czogcHJvcHMuYXV0b0ZvY3VzLFxuICAgIHZhbHVlOiBwcm9wcy52YWx1ZSxcbiAgICBvbkNoYW5nZTogcHJvcHMub25DaGFuZ2UsXG4gICAgb25CbHVyOiAoKSA9PiBzZXRCbHVycmVkKHRydWUpLFxuICAgIGlzUmVxdWlyZWQ6IHByb3BzLm1pbiA+IDAsXG4gICAgZXJyb3JNZXNzYWdlOiBwcm9wcy5mb3JjZVZhbGlkYXRpb24gfHwgYmx1cnJlZCA/IHZhbGlkYXRlVGV4dChwcm9wcy52YWx1ZSwgcHJvcHMubWluLCBwcm9wcy5tYXgsIHByb3BzLmxhYmVsLCBwYXRoLmxlbmd0aCA9PT0gMSAmJiAoc2x1Z0NvbnRleHQgPT09IG51bGwgfHwgc2x1Z0NvbnRleHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNsdWdDb250ZXh0LmZpZWxkKSA9PT0gcGF0aFswXSA/IHNsdWdDb250ZXh0IDogdW5kZWZpbmVkKSA6IHVuZGVmaW5lZFxuICB9KTtcbn1cblxuZnVuY3Rpb24gcGFyc2VBc05vcm1hbEZpZWxkKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGEgc3RyaW5nJyk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuY29uc3QgZW1wdHlTZXQgPSBuZXcgU2V0KCk7XG5mdW5jdGlvbiB0ZXh0KHtcbiAgbGFiZWwsXG4gIGRlZmF1bHRWYWx1ZSA9ICcnLFxuICB2YWxpZGF0aW9uOiB7XG4gICAgbGVuZ3RoOiB7XG4gICAgICBtYXggPSBJbmZpbml0eSxcbiAgICAgIG1pbiA9IDBcbiAgICB9ID0ge31cbiAgfSA9IHt9LFxuICBkZXNjcmlwdGlvbixcbiAgbXVsdGlsaW5lID0gZmFsc2Vcbn0pIHtcbiAgZnVuY3Rpb24gdmFsaWRhdGUodmFsdWUsIHNsdWdGaWVsZCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSB2YWxpZGF0ZVRleHQodmFsdWUsIG1pbiwgbWF4LCBsYWJlbCwgc2x1Z0ZpZWxkKTtcbiAgICBpZiAobWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IobWVzc2FnZSk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGtpbmQ6ICdmb3JtJyxcbiAgICBmb3JtS2luZDogJ3NsdWcnLFxuICAgIElucHV0KHByb3BzKSB7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChUZXh0RmllbGRJbnB1dCwge1xuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgbWluOiBtaW4sXG4gICAgICAgIG1heDogbWF4LFxuICAgICAgICBtdWx0aWxpbmU6IG11bHRpbGluZSxcbiAgICAgICAgLi4ucHJvcHNcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiBkZWZhdWx0VmFsdWUgPT09ICdzdHJpbmcnID8gZGVmYXVsdFZhbHVlIDogZGVmYXVsdFZhbHVlKCk7XG4gICAgfSxcbiAgICBwYXJzZSh2YWx1ZSwgYXJncykge1xuICAgICAgaWYgKChhcmdzID09PSBudWxsIHx8IGFyZ3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFyZ3Muc2x1ZykgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gYXJncy5zbHVnO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBhcnNlQXNOb3JtYWxGaWVsZCh2YWx1ZSk7XG4gICAgfSxcbiAgICBzZXJpYWxpemUodmFsdWUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSA9PT0gJycgPyB1bmRlZmluZWQgOiB2YWx1ZVxuICAgICAgfTtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZVdpdGhTbHVnKHZhbHVlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzbHVnOiB2YWx1ZSxcbiAgICAgICAgdmFsdWU6IHVuZGVmaW5lZFxuICAgICAgfTtcbiAgICB9LFxuICAgIHJlYWRlcjoge1xuICAgICAgcGFyc2UodmFsdWUpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkID0gcGFyc2VBc05vcm1hbEZpZWxkKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlKHBhcnNlZCwgdW5kZWZpbmVkKTtcbiAgICAgIH0sXG4gICAgICBwYXJzZVdpdGhTbHVnKF92YWx1ZSwgYXJncykge1xuICAgICAgICB2YWxpZGF0ZShwYXJzZUFzTm9ybWFsRmllbGQoYXJncy5zbHVnKSwge1xuICAgICAgICAgIGdsb2I6IGFyZ3MuZ2xvYixcbiAgICAgICAgICBzbHVnczogZW1wdHlTZXRcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUsIGFyZ3MpIHtcbiAgICAgIHJldHVybiB2YWxpZGF0ZSh2YWx1ZSwgYXJncyA9PT0gbnVsbCB8fCBhcmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhcmdzLnNsdWdGaWVsZCk7XG4gICAgfVxuICB9O1xufVxuXG5jb25zdCBGSUVMRF9HUklEX0NPTFVNTlMgPSAxMjtcbmNvbnN0IEZpZWxkQ29udGV4dCA9IC8qI19fUFVSRV9fKi9jcmVhdGVDb250ZXh0KHtcbiAgc3BhbjogRklFTERfR1JJRF9DT0xVTU5TXG59KTtcbmNvbnN0IHVzZUZpZWxkQ29udGV4dCA9ICgpID0+IHVzZUNvbnRleHQoRmllbGRDb250ZXh0KTtcbmNvbnN0IEZpZWxkQ29udGV4dFByb3ZpZGVyID0gRmllbGRDb250ZXh0LlByb3ZpZGVyO1xuXG5mdW5jdGlvbiBPYmplY3RGaWVsZElucHV0KHtcbiAgc2NoZW1hLFxuICBhdXRvRm9jdXMsXG4gIGZpZWxkcyxcbiAgZm9yY2VWYWxpZGF0aW9uXG59KSB7XG4gIHZhbGlkYXRlTGF5b3V0KHNjaGVtYSk7XG4gIGNvbnN0IGZpcnN0Rm9jdXNhYmxlID0gYXV0b0ZvY3VzID8gZmluZEZvY3VzYWJsZU9iamVjdEZpZWxkS2V5KHNjaGVtYSkgOiB1bmRlZmluZWQ7XG4gIGNvbnN0IGlubmVyID0gLyojX19QVVJFX18qL2pzeChHcmlkLCB7XG4gICAgY29sdW1uczogYHJlcGVhdCgke0ZJRUxEX0dSSURfQ09MVU1OU30sIG1pbm1heChhdXRvLCAxZnIpKWAsXG4gICAgY29sdW1uR2FwOiBcIm1lZGl1bVwiLFxuICAgIHJvd0dhcDogXCJ4bGFyZ2VcIixcbiAgICBjaGlsZHJlbjogT2JqZWN0LmVudHJpZXMoZmllbGRzKS5tYXAoKFtrZXksIHByb3BWYWxdLCBpbmRleCkgPT4ge1xuICAgICAgdmFyIF9zY2hlbWEkbGF5b3V0JGluZGV4LCBfc2NoZW1hJGxheW91dDtcbiAgICAgIGxldCBzcGFuID0gKF9zY2hlbWEkbGF5b3V0JGluZGV4ID0gKF9zY2hlbWEkbGF5b3V0ID0gc2NoZW1hLmxheW91dCkgPT09IG51bGwgfHwgX3NjaGVtYSRsYXlvdXQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zY2hlbWEkbGF5b3V0W2luZGV4XSkgIT09IG51bGwgJiYgX3NjaGVtYSRsYXlvdXQkaW5kZXggIT09IHZvaWQgMCA/IF9zY2hlbWEkbGF5b3V0JGluZGV4IDogRklFTERfR1JJRF9DT0xVTU5TO1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goRmllbGRDb250ZXh0UHJvdmlkZXIsIHtcbiAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICBzcGFuXG4gICAgICAgIH0sXG4gICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KFwiZGl2XCIsIHtcbiAgICAgICAgICBjbGFzc05hbWU6IGNzcyh7XG4gICAgICAgICAgICBncmlkQ29sdW1uOiBgc3BhbiAke3NwYW59YCxcbiAgICAgICAgICAgIFtjb250YWluZXJRdWVyaWVzLmJlbG93LnRhYmxldF06IHtcbiAgICAgICAgICAgICAgZ3JpZENvbHVtbjogYHNwYW4gJHtGSUVMRF9HUklEX0NPTFVNTlN9YFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KEFkZFRvUGF0aFByb3ZpZGVyLCB7XG4gICAgICAgICAgICBwYXJ0OiBrZXksXG4gICAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChJbm5lckZvcm1WYWx1ZUNvbnRlbnRGcm9tUHJldmlld1Byb3BzLCB7XG4gICAgICAgICAgICAgIGZvcmNlVmFsaWRhdGlvbjogZm9yY2VWYWxpZGF0aW9uLFxuICAgICAgICAgICAgICBhdXRvRm9jdXM6IGtleSA9PT0gZmlyc3RGb2N1c2FibGUsXG4gICAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogXCJ4bGFyZ2VcIixcbiAgICAgICAgICAgICAgLi4ucHJvcFZhbFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSwga2V5KTtcbiAgICB9KVxuICB9KTtcbiAgY29uc3QgaWQgPSB1c2VJZCQxKCk7XG4gIGlmICghc2NoZW1hLmxhYmVsKSB7XG4gICAgcmV0dXJuIGlubmVyO1xuICB9XG4gIGNvbnN0IGxhYmVsSWQgPSBgJHtpZH0tbGFiZWxgO1xuICBjb25zdCBkZXNjcmlwdGlvbklkID0gYCR7aWR9LWRlc2NyaXB0aW9uYDtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3hzKEdyaWQsIHtcbiAgICByb2xlOiBcImdyb3VwXCIsXG4gICAgZ2FwOiBcIm1lZGl1bVwiLFxuICAgIG1hcmdpblk6IFwieGxhcmdlXCIsXG4gICAgXCJhcmlhLWxhYmVsbGVkYnlcIjogbGFiZWxJZCxcbiAgICBcImFyaWEtZGVzY3JpYmVkYnlcIjogc2NoZW1hLmRlc2NyaXB0aW9uID8gZGVzY3JpcHRpb25JZCA6IHVuZGVmaW5lZCxcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goVGV4dCwge1xuICAgICAgY29sb3I6IFwibmV1dHJhbEVtcGhhc2lzXCIsXG4gICAgICBzaXplOiBcIm1lZGl1bVwiLFxuICAgICAgd2VpZ2h0OiBcInNlbWlib2xkXCIsXG4gICAgICBpZDogbGFiZWxJZCxcbiAgICAgIGNoaWxkcmVuOiBzY2hlbWEubGFiZWxcbiAgICB9KSwgISFzY2hlbWEuZGVzY3JpcHRpb24gJiYgLyojX19QVVJFX18qL2pzeChUZXh0LCB7XG4gICAgICBpZDogZGVzY3JpcHRpb25JZCxcbiAgICAgIHNpemU6IFwicmVndWxhclwiLFxuICAgICAgY29sb3I6IFwibmV1dHJhbFNlY29uZGFyeVwiLFxuICAgICAgY2hpbGRyZW46IHNjaGVtYS5kZXNjcmlwdGlvblxuICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KFwiZGl2XCIsIHt9KSwgaW5uZXJdXG4gIH0pO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVMYXlvdXQoc2NoZW1hKSB7XG4gIGlmICghc2NoZW1hLmxheW91dCkge1xuICAgIHJldHVybjtcbiAgfVxuICBhc3NlcnQoc2NoZW1hLmxheW91dC5sZW5ndGggPT09IE9iamVjdC5rZXlzKHNjaGVtYS5maWVsZHMpLmxlbmd0aCwgJ0EgY29sdW1uIFwic3BhblwiIGlzIHJlcXVpcmVkIGZvciBldmVyeSBmaWVsZCBpbiB0aGUgbGF5b3V0Jyk7XG4gIGFzc2VydChzY2hlbWEubGF5b3V0LmV2ZXJ5KHNwYW4gPT4gc3BhbiA+IDApLCAnVGhlIGxheW91dCBtdXN0IG5vdCBjb250YWluIGVtcHR5IGNvbHVtbnMnKTtcbiAgYXNzZXJ0KHNjaGVtYS5sYXlvdXQuZXZlcnkoc3BhbiA9PiBzcGFuIDw9IDEyKSwgJ0ZpZWxkcyBtYXkgbm90IHNwYW4gbW9yZSB0aGFuIDEyIGNvbHVtbnMnKTtcbiAgYXNzZXJ0KHNjaGVtYS5sYXlvdXQucmVkdWNlKChhY2MsIGN1cikgPT4gYWNjICsgY3VyLCAwKSAlIDEyID09PSAwLCAnVGhlIGxheW91dCBtdXN0IHNwYW4gZXhhY3RseSAxMiBjb2x1bW5zJyk7XG59XG5mdW5jdGlvbiBmaW5kRm9jdXNhYmxlT2JqZWN0RmllbGRLZXkoc2NoZW1hKSB7XG4gIGZvciAoY29uc3QgW2tleSwgaW5uZXJQcm9wXSBvZiBPYmplY3QuZW50cmllcyhzY2hlbWEuZmllbGRzKSkge1xuICAgIGNvbnN0IGNoaWxkRm9jdXNhYmxlID0gY2FuRmllbGRCZUZvY3VzZWQoaW5uZXJQcm9wKTtcbiAgICBpZiAoY2hpbGRGb2N1c2FibGUpIHtcbiAgICAgIHJldHVybiBrZXk7XG4gICAgfVxuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBjYW5GaWVsZEJlRm9jdXNlZChzY2hlbWEpIHtcbiAgaWYgKHNjaGVtYS5raW5kID09PSAnYXJyYXknIHx8IHNjaGVtYS5raW5kID09PSAnY29uZGl0aW9uYWwnIHx8IHNjaGVtYS5raW5kID09PSAnZm9ybScpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdjaGlsZCcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnb2JqZWN0Jykge1xuICAgIGZvciAoY29uc3QgaW5uZXJQcm9wIG9mIE9iamVjdC52YWx1ZXMoc2NoZW1hLmZpZWxkcykpIHtcbiAgICAgIGlmIChjYW5GaWVsZEJlRm9jdXNlZChpbm5lclByb3ApKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgYXNzZXJ0TmV2ZXIoc2NoZW1hKTtcbn1cblxuZnVuY3Rpb24gQ29uZGl0aW9uYWxGaWVsZElucHV0KHtcbiAgc2NoZW1hLFxuICBhdXRvRm9jdXMsXG4gIGRpc2NyaW1pbmFudCxcbiAgb25DaGFuZ2UsXG4gIHZhbHVlLFxuICBmb3JjZVZhbGlkYXRpb25cbn0pIHtcbiAgY29uc3Qgc2NoZW1hRGlzY3JpbWluYW50ID0gc2NoZW1hLmRpc2NyaW1pbmFudDtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3hzKEZsZXgsIHtcbiAgICBnYXA6IFwieGxhcmdlXCIsXG4gICAgZGlyZWN0aW9uOiBcImNvbHVtblwiLFxuICAgIGNoaWxkcmVuOiBbdXNlTWVtbygoKSA9PiAvKiNfX1BVUkVfXyovanN4KEFkZFRvUGF0aFByb3ZpZGVyLCB7XG4gICAgICBwYXJ0OiBcImRpc2NyaW1pbmFudFwiLFxuICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goc2NoZW1hRGlzY3JpbWluYW50LklucHV0LCB7XG4gICAgICAgIGF1dG9Gb2N1czogISFhdXRvRm9jdXMsXG4gICAgICAgIHZhbHVlOiBkaXNjcmltaW5hbnQsXG4gICAgICAgIG9uQ2hhbmdlOiBvbkNoYW5nZSxcbiAgICAgICAgZm9yY2VWYWxpZGF0aW9uOiBmb3JjZVZhbGlkYXRpb25cbiAgICAgIH0pXG4gICAgfSksIFthdXRvRm9jdXMsIHNjaGVtYURpc2NyaW1pbmFudCwgZGlzY3JpbWluYW50LCBvbkNoYW5nZSwgZm9yY2VWYWxpZGF0aW9uXSksIC8qI19fUFVSRV9fKi9qc3goQWRkVG9QYXRoUHJvdmlkZXIsIHtcbiAgICAgIHBhcnQ6IFwidmFsdWVcIixcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KElubmVyRm9ybVZhbHVlQ29udGVudEZyb21QcmV2aWV3UHJvcHMsIHtcbiAgICAgICAgZm9yY2VWYWxpZGF0aW9uOiBmb3JjZVZhbGlkYXRpb24sXG4gICAgICAgIC4uLnZhbHVlXG4gICAgICB9KVxuICAgIH0pXVxuICB9KTtcbn1cblxuZnVuY3Rpb24gY2FzdFRvTWVtb2l6ZWRJbmZvRm9yU2NoZW1hKHZhbCkge1xuICByZXR1cm4gdmFsO1xufVxuZnVuY3Rpb24gZ2V0T3JJbnNlcnQobWFwLCBrZXksIHZhbCkge1xuICBpZiAoIW1hcC5oYXMoa2V5KSkge1xuICAgIG1hcC5zZXQoa2V5LCB2YWwoa2V5KSk7XG4gIH1cbiAgcmV0dXJuIG1hcC5nZXQoa2V5KTtcbn1cbmNvbnN0IGNoaWxkRmllbGREYXRhID0gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIHN0b3JlQ2hpbGRGaWVsZERhdGEodmFsdWUpIHtcbiAgbGV0IGtleSA9IHt9O1xuICBjaGlsZEZpZWxkRGF0YS5zZXQoa2V5LCB2YWx1ZSk7XG4gIHJldHVybiBrZXk7XG59XG5mdW5jdGlvbiBnZXRDaGlsZEZpZWxkRGF0YShwcm9wcykge1xuICBjb25zdCB2YWwgPSBjaGlsZEZpZWxkRGF0YS5nZXQocHJvcHMuXyk7XG4gIGlmICghdmFsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdleHBlY3RlZCBjaGlsZCBmaWVsZCBkYXRhIHRvIGV4aXN0Jyk7XG4gIH1cbiAgcmV0dXJuIHZhbDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUdldFByZXZpZXdQcm9wcyhyb290U2NoZW1hLCByb290T25DaGFuZ2UsIGdldENoaWxkRmllbGRFbGVtZW50KSB7XG4gIGNvbnN0IG1lbW9pemVkSW5mb0ZvclNjaGVtYSA9IGNhc3RUb01lbW9pemVkSW5mb0ZvclNjaGVtYSh7XG4gICAgZm9ybShzY2hlbWEsIG9uQ2hhbmdlKSB7XG4gICAgICByZXR1cm4gbmV3VmFsID0+IG9uQ2hhbmdlKCgpID0+IG5ld1ZhbCk7XG4gICAgfSxcbiAgICBhcnJheShzY2hlbWEsIG9uQ2hhbmdlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByYXdPbkNoYW5nZTogb25DaGFuZ2UsXG4gICAgICAgIGlubmVyOiBuZXcgTWFwKCksXG4gICAgICAgIG9uQ2hhbmdlKHVwZGF0ZXIpIHtcbiAgICAgICAgICBvbkNoYW5nZSh2YWx1ZSA9PiB1cGRhdGVWYWx1ZShzY2hlbWEsIHZhbHVlLCB1cGRhdGVyKSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSxcbiAgICBjaGlsZChzY2hlbWEsIG9uQ2hhbmdlKSB7XG4gICAgICByZXR1cm4gbmV3VmFsID0+IG9uQ2hhbmdlKCgpID0+IG5ld1ZhbCk7XG4gICAgfSxcbiAgICBjb25kaXRpb25hbChzY2hlbWEsIG9uQ2hhbmdlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBvbkNoYW5nZTogKGRpc2NyaW1pbmFudCwgdmFsdWUpID0+IG9uQ2hhbmdlKHZhbCA9PiB1cGRhdGVWYWx1ZShzY2hlbWEsIHZhbCwge1xuICAgICAgICAgIGRpc2NyaW1pbmFudCxcbiAgICAgICAgICB2YWx1ZVxuICAgICAgICB9KSksXG4gICAgICAgIG9uQ2hhbmdlRm9yVmFsdWU6IGNiID0+IG9uQ2hhbmdlKHZhbCA9PiAoe1xuICAgICAgICAgIGRpc2NyaW1pbmFudDogdmFsLmRpc2NyaW1pbmFudCxcbiAgICAgICAgICB2YWx1ZTogY2IodmFsLnZhbHVlKVxuICAgICAgICB9KSlcbiAgICAgIH07XG4gICAgfSxcbiAgICBvYmplY3Qoc2NoZW1hLCBvbkNoYW5nZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgb25DaGFuZ2U6IHVwZGF0ZXIgPT4ge1xuICAgICAgICAgIG9uQ2hhbmdlKHZhbHVlID0+IHVwZGF0ZVZhbHVlKHNjaGVtYSwgdmFsdWUsIHVwZGF0ZXIpKTtcbiAgICAgICAgfSxcbiAgICAgICAgaW5uZXJPbkNoYW5nZXM6IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3Qua2V5cyhzY2hlbWEuZmllbGRzKS5tYXAoa2V5ID0+IHtcbiAgICAgICAgICByZXR1cm4gW2tleSwgbmV3VmFsID0+IHtcbiAgICAgICAgICAgIG9uQ2hhbmdlKHZhbCA9PiAoe1xuICAgICAgICAgICAgICAuLi52YWwsXG4gICAgICAgICAgICAgIFtrZXldOiBuZXdWYWwodmFsW2tleV0pXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgfV07XG4gICAgICAgIH0pKVxuICAgICAgfTtcbiAgICB9XG4gIH0pO1xuICBjb25zdCBwcmV2aWV3UHJvcHNGYWN0b3JpZXMgPSB7XG4gICAgZm9ybShzY2hlbWEsIHZhbHVlLCBvbkNoYW5nZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICBvbkNoYW5nZSxcbiAgICAgICAgc2NoZW1hOiBzY2hlbWFcbiAgICAgIH07XG4gICAgfSxcbiAgICBjaGlsZChzY2hlbWEsIHZhbHVlLCBvbkNoYW5nZSwgcGF0aCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZWxlbWVudDogZ2V0Q2hpbGRGaWVsZEVsZW1lbnQocGF0aCksXG4gICAgICAgIHNjaGVtYTogc2NoZW1hLFxuICAgICAgICBfOiBzdG9yZUNoaWxkRmllbGREYXRhKHtcbiAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICBvbkNoYW5nZVxuICAgICAgICB9KVxuICAgICAgfTtcbiAgICB9LFxuICAgIG9iamVjdChzY2hlbWEsIHZhbHVlLCBtZW1vaXplZCwgcGF0aCwgZ2V0SW5uZXJQcm9wKSB7XG4gICAgICBjb25zdCBmaWVsZHMgPSB7fTtcbiAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHNjaGVtYS5maWVsZHMpKSB7XG4gICAgICAgIGZpZWxkc1trZXldID0gZ2V0SW5uZXJQcm9wKHNjaGVtYS5maWVsZHNba2V5XSwgdmFsdWVba2V5XSwgbWVtb2l6ZWQuaW5uZXJPbkNoYW5nZXNba2V5XSwga2V5KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHByZXZpZXdQcm9wcyA9IHtcbiAgICAgICAgZmllbGRzLFxuICAgICAgICBvbkNoYW5nZTogbWVtb2l6ZWQub25DaGFuZ2UsXG4gICAgICAgIHNjaGVtYTogc2NoZW1hXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHByZXZpZXdQcm9wcztcbiAgICB9LFxuICAgIGFycmF5KHNjaGVtYSwgdmFsdWUsIG1lbW9pemVkLCBwYXRoLCBnZXRJbm5lclByb3ApIHtcbiAgICAgIGNvbnN0IGFycmF5VmFsdWUgPSB2YWx1ZTtcbiAgICAgIGNvbnN0IGtleXMgPSBnZXRLZXlzRm9yQXJyYXlWYWx1ZShhcnJheVZhbHVlKTtcbiAgICAgIGNvbnN0IHVudXNlZEtleXMgPSBuZXcgU2V0KGdldEtleXNGb3JBcnJheVZhbHVlKHZhbHVlKSk7XG4gICAgICBjb25zdCBwcm9wcyA9IHtcbiAgICAgICAgZWxlbWVudHM6IGFycmF5VmFsdWUubWFwKCh2YWwsIGkpID0+IHtcbiAgICAgICAgICBjb25zdCBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgIHVudXNlZEtleXMuZGVsZXRlKGtleSk7XG4gICAgICAgICAgY29uc3QgZWxlbWVudCA9IGdldE9ySW5zZXJ0KG1lbW9pemVkLmlubmVyLCBrZXksICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9uQ2hhbmdlID0gdmFsID0+IHtcbiAgICAgICAgICAgICAgbWVtb2l6ZWQucmF3T25DaGFuZ2UocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5cyA9IGdldEtleXNGb3JBcnJheVZhbHVlKHByZXYpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0ga2V5cy5pbmRleE9mKGtleSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBbLi4ucHJldl07XG4gICAgICAgICAgICAgICAgbmV3VmFsdWVbaW5kZXhdID0gdmFsKG5ld1ZhbHVlW2luZGV4XSk7XG4gICAgICAgICAgICAgICAgc2V0S2V5c0ZvckFycmF5VmFsdWUobmV3VmFsdWUsIGtleXMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXdWYWx1ZTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGdldElubmVyUHJvcChzY2hlbWEuZWxlbWVudCwgdmFsLCBvbkNoYW5nZSwga2V5KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIGVsZW1lbnQsXG4gICAgICAgICAgICAgIGVsZW1lbnRXaXRoS2V5OiB7XG4gICAgICAgICAgICAgICAgLi4uZWxlbWVudCxcbiAgICAgICAgICAgICAgICBrZXlcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgb25DaGFuZ2VcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc3QgY3VycmVudElubmVyUHJvcCA9IGdldElubmVyUHJvcChzY2hlbWEuZWxlbWVudCwgdmFsLCBlbGVtZW50Lm9uQ2hhbmdlLCBrZXkpO1xuICAgICAgICAgIGlmIChlbGVtZW50LmVsZW1lbnQgIT09IGN1cnJlbnRJbm5lclByb3ApIHtcbiAgICAgICAgICAgIGVsZW1lbnQuZWxlbWVudCA9IGN1cnJlbnRJbm5lclByb3A7XG4gICAgICAgICAgICBlbGVtZW50LmVsZW1lbnRXaXRoS2V5ID0ge1xuICAgICAgICAgICAgICAuLi5jdXJyZW50SW5uZXJQcm9wLFxuICAgICAgICAgICAgICBrZXlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBlbGVtZW50LmVsZW1lbnRXaXRoS2V5O1xuICAgICAgICB9KSxcbiAgICAgICAgc2NoZW1hOiBzY2hlbWEsXG4gICAgICAgIG9uQ2hhbmdlOiBtZW1vaXplZC5vbkNoYW5nZVxuICAgICAgfTtcbiAgICAgIGZvciAoY29uc3Qga2V5IG9mIHVudXNlZEtleXMpIHtcbiAgICAgICAgbWVtb2l6ZWQuaW5uZXIuZGVsZXRlKGtleSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcHJvcHM7XG4gICAgfSxcbiAgICBjb25kaXRpb25hbChzY2hlbWEsIHZhbHVlLCBtZW1vaXplZCwgcGF0aCwgZ2V0SW5uZXJQcm9wKSB7XG4gICAgICBjb25zdCBwcm9wcyA9IHtcbiAgICAgICAgZGlzY3JpbWluYW50OiB2YWx1ZS5kaXNjcmltaW5hbnQsXG4gICAgICAgIG9uQ2hhbmdlOiBtZW1vaXplZC5vbkNoYW5nZSxcbiAgICAgICAgdmFsdWU6IGdldElubmVyUHJvcChzY2hlbWEudmFsdWVzW3ZhbHVlLmRpc2NyaW1pbmFudC50b1N0cmluZygpXSwgdmFsdWUudmFsdWUsIG1lbW9pemVkLm9uQ2hhbmdlRm9yVmFsdWUsICd2YWx1ZScpLFxuICAgICAgICBzY2hlbWE6IHNjaGVtYVxuICAgICAgfTtcbiAgICAgIHJldHVybiBwcm9wcztcbiAgICB9XG4gIH07XG4gIGZ1bmN0aW9uIGdldFByZXZpZXdQcm9wc0ZvclByb3Aoc2NoZW1hLCB2YWx1ZSwgbWVtb2VkVGhpbmcsIHBhdGgsIGdldElubmVyUHJvcCkge1xuICAgIHJldHVybiBwcmV2aWV3UHJvcHNGYWN0b3JpZXNbc2NoZW1hLmtpbmRdKHNjaGVtYSwgdmFsdWUsIG1lbW9lZFRoaW5nLCBwYXRoLCBnZXRJbm5lclByb3ApO1xuICB9XG4gIGZ1bmN0aW9uIGdldEluaXRpYWxNZW1vU3RhdGUoc2NoZW1hLCB2YWx1ZSwgb25DaGFuZ2UsIHBhdGgpIHtcbiAgICBjb25zdCBpbm5lclN0YXRlID0gbmV3IE1hcCgpO1xuICAgIGNvbnN0IG1lbW9pemVkSW5mbyA9IG1lbW9pemVkSW5mb0ZvclNjaGVtYVtzY2hlbWEua2luZF0oc2NoZW1hLCBvbkNoYW5nZSk7XG4gICAgY29uc3Qgc3RhdGUgPSB7XG4gICAgICB2YWx1ZSxcbiAgICAgIGlubmVyOiBpbm5lclN0YXRlLFxuICAgICAgcHJvcHM6IGdldFByZXZpZXdQcm9wc0ZvclByb3Aoc2NoZW1hLCB2YWx1ZSwgbWVtb2l6ZWRJbmZvLCBwYXRoLCAoc2NoZW1hLCB2YWx1ZSwgb25DaGFuZ2UsIGtleSkgPT4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IGdldEluaXRpYWxNZW1vU3RhdGUoc2NoZW1hLCB2YWx1ZSwgb25DaGFuZ2UsIHBhdGguY29uY2F0KGtleSkpO1xuICAgICAgICBpbm5lclN0YXRlLnNldChrZXksIHN0YXRlKTtcbiAgICAgICAgcmV0dXJuIHN0YXRlLnByb3BzO1xuICAgICAgfSksXG4gICAgICBzY2hlbWE6IHNjaGVtYSxcbiAgICAgIGNhY2hlZDogbWVtb2l6ZWRJbmZvXG4gICAgfTtcbiAgICByZXR1cm4gc3RhdGU7XG4gIH1cbiAgZnVuY3Rpb24gZ2V0VXBUb0RhdGVQcm9wcyhzY2hlbWEsIHZhbHVlLCBvbkNoYW5nZSwgbWVtb1N0YXRlLCBwYXRoKSB7XG4gICAgaWYgKG1lbW9TdGF0ZS5zY2hlbWEgIT09IHNjaGVtYSkge1xuICAgICAgT2JqZWN0LmFzc2lnbihtZW1vU3RhdGUsIGdldEluaXRpYWxNZW1vU3RhdGUoc2NoZW1hLCB2YWx1ZSwgb25DaGFuZ2UsIHBhdGgpKTtcbiAgICAgIHJldHVybiBtZW1vU3RhdGUucHJvcHM7XG4gICAgfVxuICAgIGlmIChtZW1vU3RhdGUudmFsdWUgPT09IHZhbHVlKSB7XG4gICAgICByZXR1cm4gbWVtb1N0YXRlLnByb3BzO1xuICAgIH1cbiAgICBtZW1vU3RhdGUudmFsdWUgPSB2YWx1ZTtcbiAgICBjb25zdCB1bnVzZWRLZXlzID0gbmV3IFNldChtZW1vU3RhdGUuaW5uZXIua2V5cygpKTtcbiAgICBtZW1vU3RhdGUucHJvcHMgPSBnZXRQcmV2aWV3UHJvcHNGb3JQcm9wKHNjaGVtYSwgdmFsdWUsIG1lbW9TdGF0ZS5jYWNoZWQsIHBhdGgsIChzY2hlbWEsIHZhbHVlLCBvbkNoYW5nZSwgaW5uZXJNZW1vU3RhdGVLZXkpID0+IHtcbiAgICAgIHVudXNlZEtleXMuZGVsZXRlKGlubmVyTWVtb1N0YXRlS2V5KTtcbiAgICAgIGlmICghbWVtb1N0YXRlLmlubmVyLmhhcyhpbm5lck1lbW9TdGF0ZUtleSkpIHtcbiAgICAgICAgY29uc3QgaW5uZXJTdGF0ZSA9IGdldEluaXRpYWxNZW1vU3RhdGUoc2NoZW1hLCB2YWx1ZSwgb25DaGFuZ2UsIHBhdGguY29uY2F0KGlubmVyTWVtb1N0YXRlS2V5KSk7XG4gICAgICAgIG1lbW9TdGF0ZS5pbm5lci5zZXQoaW5uZXJNZW1vU3RhdGVLZXksIGlubmVyU3RhdGUpO1xuICAgICAgICByZXR1cm4gaW5uZXJTdGF0ZS5wcm9wcztcbiAgICAgIH1cbiAgICAgIHJldHVybiBnZXRVcFRvRGF0ZVByb3BzKHNjaGVtYSwgdmFsdWUsIG9uQ2hhbmdlLCBtZW1vU3RhdGUuaW5uZXIuZ2V0KGlubmVyTWVtb1N0YXRlS2V5KSwgcGF0aC5jb25jYXQoaW5uZXJNZW1vU3RhdGVLZXkpKTtcbiAgICB9KTtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiB1bnVzZWRLZXlzKSB7XG4gICAgICBtZW1vU3RhdGUuaW5uZXIuZGVsZXRlKGtleSk7XG4gICAgfVxuICAgIHJldHVybiBtZW1vU3RhdGUucHJvcHM7XG4gIH1cbiAgbGV0IG1lbW9TdGF0ZTtcbiAgcmV0dXJuIHZhbHVlID0+IHtcbiAgICBpZiAobWVtb1N0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIG1lbW9TdGF0ZSA9IGdldEluaXRpYWxNZW1vU3RhdGUocm9vdFNjaGVtYSwgdmFsdWUsIHJvb3RPbkNoYW5nZSwgW10pO1xuICAgICAgcmV0dXJuIG1lbW9TdGF0ZS5wcm9wcztcbiAgICB9XG4gICAgcmV0dXJuIGdldFVwVG9EYXRlUHJvcHMocm9vdFNjaGVtYSwgdmFsdWUsIHJvb3RPbkNoYW5nZSwgbWVtb1N0YXRlLCBbXSk7XG4gIH07XG59XG5cbmNvbnN0IHByZXZpZXdQcm9wc1RvVmFsdWVDb252ZXJ0ZXIgPSB7XG4gIGNoaWxkKHByb3BzKSB7XG4gICAgY29uc3QgY2hpbGRGaWVsZERhdGEgPSBnZXRDaGlsZEZpZWxkRGF0YShwcm9wcyk7XG4gICAgcmV0dXJuIGNoaWxkRmllbGREYXRhLnZhbHVlO1xuICB9LFxuICBmb3JtKHByb3BzKSB7XG4gICAgcmV0dXJuIHByb3BzLnZhbHVlO1xuICB9LFxuICBhcnJheShwcm9wcykge1xuICAgIGNvbnN0IHZhbHVlcyA9IHByb3BzLmVsZW1lbnRzLm1hcCh4ID0+IHByZXZpZXdQcm9wc1RvVmFsdWUoeCkpO1xuICAgIHNldEtleXNGb3JBcnJheVZhbHVlKHZhbHVlcywgcHJvcHMuZWxlbWVudHMubWFwKHggPT4geC5rZXkpKTtcbiAgICByZXR1cm4gdmFsdWVzO1xuICB9LFxuICBjb25kaXRpb25hbChwcm9wcykge1xuICAgIHJldHVybiB7XG4gICAgICBkaXNjcmltaW5hbnQ6IHByb3BzLmRpc2NyaW1pbmFudCxcbiAgICAgIHZhbHVlOiBwcmV2aWV3UHJvcHNUb1ZhbHVlKHByb3BzLnZhbHVlKVxuICAgIH07XG4gIH0sXG4gIG9iamVjdChwcm9wcykge1xuICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMocHJvcHMuZmllbGRzKS5tYXAoKFtrZXksIHZhbF0pID0+IFtrZXksIHByZXZpZXdQcm9wc1RvVmFsdWUodmFsKV0pKTtcbiAgfVxufTtcbmZ1bmN0aW9uIHByZXZpZXdQcm9wc1RvVmFsdWUocHJvcHMpIHtcbiAgcmV0dXJuIHByZXZpZXdQcm9wc1RvVmFsdWVDb252ZXJ0ZXJbcHJvcHMuc2NoZW1hLmtpbmRdKHByb3BzKTtcbn1cbmNvbnN0IHZhbHVlVG9VcGRhdGVycyA9IHtcbiAgY2hpbGQodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHZvaWQgMCA/IHZhbHVlIDogdW5kZWZpbmVkO1xuICB9LFxuICBmb3JtKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LFxuICBhcnJheSh2YWx1ZSwgc2NoZW1hKSB7XG4gICAgY29uc3Qga2V5cyA9IGdldEtleXNGb3JBcnJheVZhbHVlKHZhbHVlKTtcbiAgICByZXR1cm4gdmFsdWUubWFwKCh4LCBpKSA9PiAoe1xuICAgICAga2V5OiBrZXlzW2ldLFxuICAgICAgdmFsdWU6IHZhbHVlVG9VcGRhdGVyKHgsIHNjaGVtYS5lbGVtZW50KVxuICAgIH0pKTtcbiAgfSxcbiAgY29uZGl0aW9uYWwodmFsdWUsIHNjaGVtYSkge1xuICAgIHJldHVybiB7XG4gICAgICBkaXNjcmltaW5hbnQ6IHZhbHVlLmRpc2NyaW1pbmFudCxcbiAgICAgIHZhbHVlOiB2YWx1ZVRvVXBkYXRlcih2YWx1ZS52YWx1ZSwgc2NoZW1hLnZhbHVlc1t2YWx1ZS5kaXNjcmltaW5hbnQudG9TdHJpbmcoKV0pXG4gICAgfTtcbiAgfSxcbiAgb2JqZWN0KHZhbHVlLCBzY2hlbWEpIHtcbiAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKHNjaGVtYS5maWVsZHMpLm1hcCgoW2tleSwgc2NoZW1hXSkgPT4gW2tleSwgdmFsdWVUb1VwZGF0ZXIodmFsdWVba2V5XSwgc2NoZW1hKV0pKTtcbiAgfVxufTtcbmZ1bmN0aW9uIHZhbHVlVG9VcGRhdGVyKHZhbHVlLCBzY2hlbWEpIHtcbiAgcmV0dXJuIHZhbHVlVG9VcGRhdGVyc1tzY2hlbWEua2luZF0odmFsdWUsIHNjaGVtYSk7XG59XG5mdW5jdGlvbiBzZXRWYWx1ZVRvUHJldmlld1Byb3BzKHZhbHVlLCBwcm9wcykge1xuICBpZiAoaXNLaW5kKHByb3BzLCAnY2hpbGQnKSkge1xuICAgIGNvbnN0IHtcbiAgICAgIG9uQ2hhbmdlXG4gICAgfSA9IGdldENoaWxkRmllbGREYXRhKHByb3BzKTtcbiAgICBvbkNoYW5nZSh2YWx1ZSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChpc0tpbmQocHJvcHMsICdmb3JtJykgfHwgaXNLaW5kKHByb3BzLCAnb2JqZWN0JykgfHwgaXNLaW5kKHByb3BzLCAnYXJyYXknKSkge1xuICAgIHByb3BzLm9uQ2hhbmdlKHZhbHVlVG9VcGRhdGVyKHZhbHVlLCBwcm9wcy5zY2hlbWEpKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGlzS2luZChwcm9wcywgJ2NvbmRpdGlvbmFsJykpIHtcbiAgICBjb25zdCB1cGRhdGVyID0gdmFsdWVUb1VwZGF0ZXIodmFsdWUsIHByb3BzLnNjaGVtYSk7XG4gICAgcHJvcHMub25DaGFuZ2UodXBkYXRlci5kaXNjcmltaW5hbnQsIHVwZGF0ZXIudmFsdWUpO1xuICAgIHJldHVybjtcbiAgfVxuICBhc3NlcnROZXZlcihwcm9wcyk7XG59XG5cbi8vIHRoaXMgZXhpc3RzIGJlY2F1c2UgZm9yIHByb3BzLnNjaGVtYS5raW5kID09PSAnZm9ybScsIHRzIGRvZXNuJ3QgbmFycm93IHByb3BzLCBvbmx5IHByb3BzLnNjaGVtYVxuZnVuY3Rpb24gaXNLaW5kKHByb3BzLCBraW5kKSB7XG4gIHJldHVybiBwcm9wcy5zY2hlbWEua2luZCA9PT0ga2luZDtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVBcnJheUxlbmd0aChzY2hlbWEsIHZhbCwgcGF0aCkge1xuICB2YXIgX3NjaGVtYSR2YWxpZGF0aW9uLCBfc2NoZW1hJHZhbGlkYXRpb24yO1xuICBpZiAoKChfc2NoZW1hJHZhbGlkYXRpb24gPSBzY2hlbWEudmFsaWRhdGlvbikgPT09IG51bGwgfHwgX3NjaGVtYSR2YWxpZGF0aW9uID09PSB2b2lkIDAgfHwgKF9zY2hlbWEkdmFsaWRhdGlvbiA9IF9zY2hlbWEkdmFsaWRhdGlvbi5sZW5ndGgpID09PSBudWxsIHx8IF9zY2hlbWEkdmFsaWRhdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3NjaGVtYSR2YWxpZGF0aW9uLm1pbikgIT09IHVuZGVmaW5lZCAmJiB2YWwubGVuZ3RoIDwgc2NoZW1hLnZhbGlkYXRpb24ubGVuZ3RoLm1pbikge1xuICAgIHJldHVybiBuZXcgUHJvcFZhbGlkYXRpb25FcnJvcihuZXcgRmllbGREYXRhRXJyb3IoYE11c3QgaGF2ZSBhdCBsZWFzdCAke3NjaGVtYS52YWxpZGF0aW9uLmxlbmd0aC5taW59IGVsZW1lbnQke3NjaGVtYS52YWxpZGF0aW9uLmxlbmd0aC5taW4gPT09IDEgPyAnJyA6ICdzJ31gKSwgcGF0aCwgc2NoZW1hKTtcbiAgfVxuICBpZiAoKChfc2NoZW1hJHZhbGlkYXRpb24yID0gc2NoZW1hLnZhbGlkYXRpb24pID09PSBudWxsIHx8IF9zY2hlbWEkdmFsaWRhdGlvbjIgPT09IHZvaWQgMCB8fCAoX3NjaGVtYSR2YWxpZGF0aW9uMiA9IF9zY2hlbWEkdmFsaWRhdGlvbjIubGVuZ3RoKSA9PT0gbnVsbCB8fCBfc2NoZW1hJHZhbGlkYXRpb24yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc2NoZW1hJHZhbGlkYXRpb24yLm1heCkgIT09IHVuZGVmaW5lZCAmJiB2YWwubGVuZ3RoID4gc2NoZW1hLnZhbGlkYXRpb24ubGVuZ3RoLm1heCkge1xuICAgIHJldHVybiBuZXcgUHJvcFZhbGlkYXRpb25FcnJvcihuZXcgRmllbGREYXRhRXJyb3IoYE11c3QgaGF2ZSBhdCBtb3N0ICR7c2NoZW1hLnZhbGlkYXRpb24ubGVuZ3RoLm1heH0gZWxlbWVudCR7c2NoZW1hLnZhbGlkYXRpb24ubGVuZ3RoLm1heCA9PT0gMSA/ICcnIDogJ3MnfX1gKSwgcGF0aCwgc2NoZW1hKTtcbiAgfVxufVxuXG5jbGFzcyBQcm9wVmFsaWRhdGlvbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihjYXVzZSwgcGF0aCwgc2NoZW1hKSB7XG4gICAgc3VwZXIoYGZpZWxkIGVycm9yIGF0ICR7cGF0aC5qb2luKCcuJyl9YCwge1xuICAgICAgY2F1c2VcbiAgICB9KTtcbiAgICB0aGlzLnBhdGggPSBwYXRoO1xuICAgIHRoaXMuc2NoZW1hID0gc2NoZW1hO1xuICAgIHRoaXMuY2F1c2UgPSBjYXVzZTtcbiAgfVxufVxuZnVuY3Rpb24gdG9Gb3JtRmllbGRTdG9yZWRWYWx1ZSh2YWwpIHtcbiAgaWYgKHZhbCA9PT0gbnVsbCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIHZhbDtcbn1cbmNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuZnVuY3Rpb24gcGFyc2VQcm9wcyhzY2hlbWEsIF92YWx1ZSwgcGF0aCwgcGF0aFdpdGhBcnJheUZpZWxkU2x1Z3MsIHBhcnNlRm9ybUZpZWxkLCAvKiogVGhpcyBzaG91bGQgYmUgdHJ1ZSBmb3IgdGhlIHJlYWRlciBhbmQgZmFsc2UgZWxzZXdoZXJlICovXG52YWxpZGF0ZUFycmF5RmllbGRMZW5ndGgpIHtcbiAgbGV0IHZhbHVlID0gdG9Gb3JtRmllbGRTdG9yZWRWYWx1ZShfdmFsdWUpO1xuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdmb3JtJykge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gcGFyc2VGb3JtRmllbGQoc2NoZW1hLCB2YWx1ZSwgcGF0aCwgcGF0aFdpdGhBcnJheUZpZWxkU2x1Z3MpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhyb3cgbmV3IFByb3BWYWxpZGF0aW9uRXJyb3IoZXJyLCBwYXRoLCBzY2hlbWEpO1xuICAgIH1cbiAgfVxuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdjaGlsZCcpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdjb25kaXRpb25hbCcpIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGdldEluaXRpYWxQcm9wc1ZhbHVlKHNjaGVtYSk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0JyB8fCB2YWx1ZSA9PT0gbnVsbCB8fCBpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ011c3QgYmUgYW4gb2JqZWN0Jyk7XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyh2YWx1ZSkpIHtcbiAgICAgICAgaWYgKGtleSAhPT0gJ2Rpc2NyaW1pbmFudCcgJiYga2V5ICE9PSAndmFsdWUnKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKGBNdXN0IG9ubHkgY29udGFpbiBrZXlzIFwiZGlzY3JpbWluYW50XCIgYW5kIFwidmFsdWVcIiwgbm90IFwiJHtrZXl9XCJgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhyb3cgbmV3IFByb3BWYWxpZGF0aW9uRXJyb3IoZXJyLCBwYXRoLCBzY2hlbWEpO1xuICAgIH1cbiAgICBjb25zdCBwYXJzZWREaXNjcmltaW5hbnQgPSBwYXJzZVByb3BzKHNjaGVtYS5kaXNjcmltaW5hbnQsIHZhbHVlLmRpc2NyaW1pbmFudCwgcGF0aC5jb25jYXQoJ2Rpc2NyaW1pbmFudCcpLCBwYXRoV2l0aEFycmF5RmllbGRTbHVncy5jb25jYXQoJ2Rpc2NyaW1pbmFudCcpLCBwYXJzZUZvcm1GaWVsZCwgdmFsaWRhdGVBcnJheUZpZWxkTGVuZ3RoKTtcbiAgICByZXR1cm4ge1xuICAgICAgZGlzY3JpbWluYW50OiBwYXJzZWREaXNjcmltaW5hbnQsXG4gICAgICB2YWx1ZTogcGFyc2VQcm9wcyhzY2hlbWEudmFsdWVzW3BhcnNlZERpc2NyaW1pbmFudF0sIHZhbHVlLnZhbHVlLCBwYXRoLmNvbmNhdCgndmFsdWUnKSwgcGF0aFdpdGhBcnJheUZpZWxkU2x1Z3MuY29uY2F0KCd2YWx1ZScpLCBwYXJzZUZvcm1GaWVsZCwgdmFsaWRhdGVBcnJheUZpZWxkTGVuZ3RoKVxuICAgIH07XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnb2JqZWN0Jykge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YWx1ZSA9IHt9O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcgfHwgdmFsdWUgPT09IG51bGwgfHwgaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGFuIG9iamVjdCcpO1xuICAgICAgfVxuICAgICAgY29uc3QgYWxsb3dlZEtleXNTZXQgPSBuZXcgU2V0KE9iamVjdC5rZXlzKHNjaGVtYS5maWVsZHMpKTtcbiAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHZhbHVlKSkge1xuICAgICAgICBpZiAoIWFsbG93ZWRLZXlzU2V0LmhhcyhrZXkpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKGBLZXkgb24gb2JqZWN0IHZhbHVlIFwiJHtrZXl9XCIgaXMgbm90IGFsbG93ZWRgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhyb3cgbmV3IFByb3BWYWxpZGF0aW9uRXJyb3IoZXJyLCBwYXRoLCBzY2hlbWEpO1xuICAgIH1cbiAgICBjb25zdCB2YWwgPSB7fTtcbiAgICBjb25zdCBlcnJvcnMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhzY2hlbWEuZmllbGRzKSkge1xuICAgICAgbGV0IGluZGl2aWR1YWxWYWwgPSB2YWx1ZVtrZXldO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcHJvcFZhbCA9IHBhcnNlUHJvcHMoc2NoZW1hLmZpZWxkc1trZXldLCBpbmRpdmlkdWFsVmFsLCBwYXRoLmNvbmNhdChrZXkpLCBwYXRoV2l0aEFycmF5RmllbGRTbHVncy5jb25jYXQoa2V5KSwgcGFyc2VGb3JtRmllbGQsIHZhbGlkYXRlQXJyYXlGaWVsZExlbmd0aCk7XG4gICAgICAgIHZhbFtrZXldID0gcHJvcFZhbDtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBlcnJvcnMucHVzaChlcnIpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZXJyb3JzLmxlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEFnZ3JlZ2F0ZUVycm9yKGVycm9ycyk7XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnYXJyYXknKSB7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGlmICghaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGFuIGFycmF5Jyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aHJvdyBuZXcgUHJvcFZhbGlkYXRpb25FcnJvcihlcnIsIHBhdGgsIHNjaGVtYSk7XG4gICAgfVxuICAgIGNvbnN0IGVycm9ycyA9IFtdO1xuICAgIHRyeSB7XG4gICAgICBpZiAodmFsaWRhdGVBcnJheUZpZWxkTGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gdmFsaWRhdGVBcnJheUxlbmd0aChzY2hlbWEsIHZhbHVlLCBwYXRoKTtcbiAgICAgICAgaWYgKGVycm9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBlcnJvcnMucHVzaChlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZS5tYXAoKGlubmVyVmFsLCBpKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbGV0IHNsdWcgPSBpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgaWYgKHNjaGVtYS5zbHVnRmllbGQgJiYgdHlwZW9mIGlubmVyVmFsID09PSAnb2JqZWN0JyAmJiBpbm5lclZhbCAhPT0gbnVsbCAmJiAhaXNBcnJheShpbm5lclZhbCkpIHtcbiAgICAgICAgICAgIGlmIChzY2hlbWEuZWxlbWVudC5raW5kICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3NsdWdGaWVsZCBvbiBhcnJheSBmaWVsZHMgcmVxdWlyZXMgdGhlIGFuIG9iamVjdCBmaWVsZCBlbGVtZW50Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzbHVnRmllbGQgPSBzY2hlbWEuZWxlbWVudC5maWVsZHNbc2NoZW1hLnNsdWdGaWVsZF07XG4gICAgICAgICAgICBpZiAoIXNsdWdGaWVsZCkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHNsdWdGaWVsZCBcIiR7c2NoZW1hLnNsdWdGaWVsZH1cIiBkb2VzIG5vdCBleGlzdCBvbiBvYmplY3QgZmllbGRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzbHVnRmllbGQua2luZCAhPT0gJ2Zvcm0nKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgc2x1Z0ZpZWxkIFwiJHtzY2hlbWEuc2x1Z0ZpZWxkfVwiIGlzIG5vdCBhIGZvcm0gZmllbGRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzbHVnRmllbGQuZm9ybUtpbmQgIT09ICdzbHVnJykge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHNsdWdGaWVsZCBcIiR7c2NoZW1hLnNsdWdGaWVsZH1cIiBpcyBub3QgYSBzbHVnIGZpZWxkYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgcGFyc2VkU2x1Z0ZpZWxkVmFsdWU7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBwYXJzZWRTbHVnRmllbGRWYWx1ZSA9IHNsdWdGaWVsZC5wYXJzZSh0b0Zvcm1GaWVsZFN0b3JlZFZhbHVlKGlubmVyVmFsW3NjaGVtYS5zbHVnRmllbGRdKSwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgQWdncmVnYXRlRXJyb3IoW2Vycl0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2x1ZyA9IHNsdWdGaWVsZC5zZXJpYWxpemVXaXRoU2x1ZyhwYXJzZWRTbHVnRmllbGRWYWx1ZSkuc2x1ZztcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHBhcnNlUHJvcHMoc2NoZW1hLmVsZW1lbnQsIGlubmVyVmFsLCBwYXRoLmNvbmNhdChpKSwgcGF0aFdpdGhBcnJheUZpZWxkU2x1Z3MuY29uY2F0KHNsdWcpLCBwYXJzZUZvcm1GaWVsZCwgdmFsaWRhdGVBcnJheUZpZWxkTGVuZ3RoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgZXJyb3JzLnB1c2goZXJyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChlcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgIHRocm93IG5ldyBBZ2dyZWdhdGVFcnJvcihlcnJvcnMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBhc3NlcnROZXZlcihzY2hlbWEpO1xufVxuXG5mdW5jdGlvbiBmbGF0dGVuRXJyb3JzKGVycm9yKSB7XG4gIGlmIChlcnJvciBpbnN0YW5jZW9mIEFnZ3JlZ2F0ZUVycm9yKSB7XG4gICAgcmV0dXJuIGVycm9yLmVycm9ycy5mbGF0TWFwKGZsYXR0ZW5FcnJvcnMpO1xuICB9XG4gIHJldHVybiBbZXJyb3JdO1xufVxuZnVuY3Rpb24gZm9ybWF0Rm9ybURhdGFFcnJvcihlcnJvcikge1xuICBjb25zdCBmbGF0RXJyb3JzID0gZmxhdHRlbkVycm9ycyhlcnJvcik7XG4gIHJldHVybiBmbGF0RXJyb3JzLm1hcChlcnJvciA9PiB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUHJvcFZhbGlkYXRpb25FcnJvcikge1xuICAgICAgY29uc3QgcGF0aCA9IGVycm9yLnBhdGguam9pbignLicpO1xuICAgICAgcmV0dXJuIGAke3BhdGh9OiAke2Vycm9yLmNhdXNlIGluc3RhbmNlb2YgRmllbGREYXRhRXJyb3IgPyBlcnJvci5jYXVzZS5tZXNzYWdlIDogYFVuZXhwZWN0ZWQgZXJyb3I6ICR7ZXJyb3IuY2F1c2V9YH1gO1xuICAgIH1cbiAgICByZXR1cm4gYFVuZXhwZWN0ZWQgZXJyb3I6ICR7ZXJyb3J9YDtcbiAgfSkuam9pbignXFxuJyk7XG59XG5mdW5jdGlvbiB0b0Zvcm1hdHRlZEZvcm1EYXRhRXJyb3IoZXJyb3IpIHtcbiAgY29uc3QgZm9ybWF0dGVkID0gZm9ybWF0Rm9ybURhdGFFcnJvcihlcnJvcik7XG4gIHJldHVybiBuZXcgRXJyb3IoYEZpZWxkIHZhbGlkYXRpb24gZmFpbGVkOlxcbmAgKyBmb3JtYXR0ZWQpO1xufVxuXG5mdW5jdGlvbiBjbGllbnRTaWRlVmFsaWRhdGVQcm9wKHNjaGVtYSwgdmFsdWUsIHNsdWdGaWVsZCkge1xuICB0cnkge1xuICAgIHZhbGlkYXRlVmFsdWVXaXRoU2NoZW1hKHNjaGVtYSwgdmFsdWUsIHNsdWdGaWVsZCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS53YXJuKHRvRm9ybWF0dGVkRm9ybURhdGFFcnJvcihlcnJvcikpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuZnVuY3Rpb24gdmFsaWRhdGVWYWx1ZVdpdGhTY2hlbWEoc2NoZW1hLCB2YWx1ZSwgc2x1Z0ZpZWxkLCBwYXRoID0gW10pIHtcbiAgc3dpdGNoIChzY2hlbWEua2luZCkge1xuICAgIGNhc2UgJ2NoaWxkJzpcbiAgICAgIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIGNhc2UgJ2Zvcm0nOlxuICAgICAge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmIChzbHVnRmllbGQgJiYgcGF0aFtwYXRoLmxlbmd0aCAtIDFdID09PSAoc2x1Z0ZpZWxkID09PSBudWxsIHx8IHNsdWdGaWVsZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2x1Z0ZpZWxkLmZpZWxkKSkge1xuICAgICAgICAgICAgc2NoZW1hLnZhbGlkYXRlKHZhbHVlLCB7XG4gICAgICAgICAgICAgIHNsdWdGaWVsZDoge1xuICAgICAgICAgICAgICAgIHNsdWdzOiBzbHVnRmllbGQuc2x1Z3MsXG4gICAgICAgICAgICAgICAgZ2xvYjogc2x1Z0ZpZWxkLmdsb2JcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIHNjaGVtYS52YWxpZGF0ZSh2YWx1ZSwgdW5kZWZpbmVkKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFByb3BWYWxpZGF0aW9uRXJyb3IoZXJyLCBwYXRoLCBzY2hlbWEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICBjYXNlICdjb25kaXRpb25hbCc6XG4gICAgICB7XG4gICAgICAgIHNjaGVtYS5kaXNjcmltaW5hbnQudmFsaWRhdGUodmFsdWUuZGlzY3JpbWluYW50KTtcbiAgICAgICAgdmFsaWRhdGVWYWx1ZVdpdGhTY2hlbWEoc2NoZW1hLnZhbHVlc1t2YWx1ZS5kaXNjcmltaW5hbnRdLCB2YWx1ZS52YWx1ZSwgdW5kZWZpbmVkLCBwYXRoLmNvbmNhdCgndmFsdWUnKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICBjYXNlICdvYmplY3QnOlxuICAgICAge1xuICAgICAgICBjb25zdCBlcnJvcnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCBjaGlsZFByb3BdIG9mIE9iamVjdC5lbnRyaWVzKHNjaGVtYS5maWVsZHMpKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhbGlkYXRlVmFsdWVXaXRoU2NoZW1hKGNoaWxkUHJvcCwgdmFsdWVba2V5XSwga2V5ID09PSAoc2x1Z0ZpZWxkID09PSBudWxsIHx8IHNsdWdGaWVsZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2x1Z0ZpZWxkLmZpZWxkKSA/IHNsdWdGaWVsZCA6IHVuZGVmaW5lZCwgcGF0aC5jb25jYXQoa2V5KSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaChlcnIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgQWdncmVnYXRlRXJyb3IoZXJyb3JzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgY2FzZSAnYXJyYXknOlxuICAgICAge1xuICAgICAgICBsZXQgc2x1Z0luZm87XG4gICAgICAgIGlmIChzY2hlbWEuc2x1Z0ZpZWxkICE9PSB1bmRlZmluZWQgJiYgc2NoZW1hLmVsZW1lbnQua2luZCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBjb25zdCBpbm5lclNjaGVtYSA9IHNjaGVtYS5lbGVtZW50LmZpZWxkcztcbiAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBzbHVnRmllbGRcbiAgICAgICAgICB9ID0gc2NoZW1hO1xuICAgICAgICAgIHNsdWdJbmZvID0ge1xuICAgICAgICAgICAgc2x1Z0ZpZWxkLFxuICAgICAgICAgICAgc2x1Z3M6IHZhbHVlLm1hcCh2YWwgPT4gZ2V0U2x1Z0Zyb21TdGF0ZSh7XG4gICAgICAgICAgICAgIHNjaGVtYTogaW5uZXJTY2hlbWEsXG4gICAgICAgICAgICAgIHNsdWdGaWVsZFxuICAgICAgICAgICAgfSwgdmFsKSlcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVycm9ycyA9IFtdO1xuICAgICAgICBjb25zdCB2YWwgPSB2YWx1ZTtcbiAgICAgICAgY29uc3QgZXJyb3IgPSB2YWxpZGF0ZUFycmF5TGVuZ3RoKHNjaGVtYSwgdmFsdWUsIHBhdGgpO1xuICAgICAgICBpZiAoZXJyb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGVycm9ycy5wdXNoKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IFtpZHgsIGlubmVyVmFsXSBvZiB2YWwuZW50cmllcygpKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhbGlkYXRlVmFsdWVXaXRoU2NoZW1hKHNjaGVtYS5lbGVtZW50LCBpbm5lclZhbCwgc2x1Z0luZm8gPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IHtcbiAgICAgICAgICAgICAgZmllbGQ6IHNsdWdJbmZvLnNsdWdGaWVsZCxcbiAgICAgICAgICAgICAgc2x1Z3M6IG5ldyBTZXQoc2x1Z0luZm8uc2x1Z3MuZmlsdGVyKChfLCBpKSA9PiBpZHggIT09IGkpKSxcbiAgICAgICAgICAgICAgZ2xvYjogJyonXG4gICAgICAgICAgICB9LCBwYXRoLmNvbmNhdChpZHgpKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKGVycik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlcnJvcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRocm93IG5ldyBBZ2dyZWdhdGVFcnJvcihlcnJvcnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBBcnJheUZpZWxkSW5wdXQocHJvcHMpIHtcbiAgY29uc3QgbGFiZWxJZCA9IHVzZUlkJDEoKTtcbiAgY29uc3QgZGVzY3JpcHRpb25JZCA9IHVzZUlkJDEoKTtcbiAgY29uc3Qgc3RyaW5nRm9ybWF0dGVyID0gdXNlTG9jYWxpemVkU3RyaW5nRm9ybWF0dGVyKGwxMG5NZXNzYWdlcyk7XG4gIGNvbnN0IFttb2RhbFN0YXRlLCBzZXRNb2RhbFN0YXRlXSA9IHVzZVN0YXRlKHtcbiAgICBzdGF0ZTogJ2Nsb3NlZCdcbiAgfSk7XG4gIGNvbnN0IG9uTW9kYWxDaGFuZ2UgPSB1c2VDYWxsYmFjayhjYiA9PiB7XG4gICAgc2V0TW9kYWxTdGF0ZShzdGF0ZSA9PiB7XG4gICAgICBpZiAoc3RhdGUuc3RhdGUgPT09ICdvcGVuJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN0YXRlOiAnb3BlbicsXG4gICAgICAgICAgZm9yY2VWYWxpZGF0aW9uOiBzdGF0ZS5mb3JjZVZhbGlkYXRpb24sXG4gICAgICAgICAgdmFsdWU6IGNiKHN0YXRlLnZhbHVlKSxcbiAgICAgICAgICBpbmRleDogc3RhdGUuaW5kZXhcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9KTtcbiAgfSwgW3NldE1vZGFsU3RhdGVdKTtcbiAgY29uc3QgZm9ybUlkID0gdXNlSWQkMSgpO1xuICBjb25zdCBtb2RhbFN0YXRlSW5kZXggPSBtb2RhbFN0YXRlLnN0YXRlID09PSAnb3BlbicgPyBtb2RhbFN0YXRlLmluZGV4IDogdW5kZWZpbmVkO1xuICBjb25zdCBzbHVnSW5mbyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmIChwcm9wcy5zY2hlbWEuc2x1Z0ZpZWxkID09PSB1bmRlZmluZWQgfHwgbW9kYWxTdGF0ZS5zdGF0ZSAhPT0gJ29wZW4nIHx8IHByb3BzLnNjaGVtYS5lbGVtZW50LmtpbmQgIT09ICdvYmplY3QnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHZhbCA9IHByZXZpZXdQcm9wc1RvVmFsdWUocHJvcHMpO1xuICAgIGNvbnN0IHNjaGVtYSA9IHByb3BzLnNjaGVtYS5lbGVtZW50LmZpZWxkcztcbiAgICBjb25zdCBzbHVnRmllbGQgPSBwcm9wcy5zY2hlbWEuc2x1Z0ZpZWxkO1xuICAgIGNvbnN0IHNsdWdzID0gbmV3IFNldCh2YWwuZmlsdGVyKCh4LCBpKSA9PiBpICE9PSBtb2RhbFN0YXRlSW5kZXgpLm1hcCh4ID0+IGdldFNsdWdGcm9tU3RhdGUoe1xuICAgICAgc2NoZW1hLFxuICAgICAgc2x1Z0ZpZWxkXG4gICAgfSwgeCkpKTtcbiAgICByZXR1cm4ge1xuICAgICAgc2x1Z3MsXG4gICAgICBmaWVsZDogc2x1Z0ZpZWxkLFxuICAgICAgZ2xvYjogJyonXG4gICAgfTtcbiAgfSwgW21vZGFsU3RhdGVJbmRleCwgcHJvcHMsIG1vZGFsU3RhdGUuc3RhdGVdKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3hzKEZsZXgsIHtcbiAgICBlbGVtZW50VHlwZTogXCJzZWN0aW9uXCIsXG4gICAgZ2FwOiBcIm1lZGl1bVwiLFxuICAgIHJvbGU6IFwiZ3JvdXBcIixcbiAgICBcImFyaWEtbGFiZWxsZWRieVwiOiBsYWJlbElkLFxuICAgIFwiYXJpYS1kZXNjcmliZWRieVwiOiBwcm9wcy5zY2hlbWEuZGVzY3JpcHRpb24gPyBkZXNjcmlwdGlvbklkIDogdW5kZWZpbmVkLFxuICAgIGRpcmVjdGlvbjogXCJjb2x1bW5cIixcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goRmllbGRMYWJlbCwge1xuICAgICAgZWxlbWVudFR5cGU6IFwiaDNcIixcbiAgICAgIGlkOiBsYWJlbElkLFxuICAgICAgY2hpbGRyZW46IHByb3BzLnNjaGVtYS5sYWJlbFxuICAgIH0pLCBwcm9wcy5zY2hlbWEuZGVzY3JpcHRpb24gJiYgLyojX19QVVJFX18qL2pzeChUZXh0LCB7XG4gICAgICBpZDogZGVzY3JpcHRpb25JZCxcbiAgICAgIHNpemU6IFwic21hbGxcIixcbiAgICAgIGNvbG9yOiBcIm5ldXRyYWxTZWNvbmRhcnlcIixcbiAgICAgIGNoaWxkcmVuOiBwcm9wcy5zY2hlbWEuZGVzY3JpcHRpb25cbiAgICB9KSwgLyojX19QVVJFX18qL2pzeChBY3Rpb25CdXR0b24sIHtcbiAgICAgIGF1dG9Gb2N1czogcHJvcHMuYXV0b0ZvY3VzLFxuICAgICAgb25QcmVzczogKCkgPT4ge1xuICAgICAgICBzZXRNb2RhbFN0YXRlKHtcbiAgICAgICAgICBzdGF0ZTogJ29wZW4nLFxuICAgICAgICAgIHZhbHVlOiBnZXRJbml0aWFsUHJvcHNWYWx1ZShwcm9wcy5zY2hlbWEuZWxlbWVudCksXG4gICAgICAgICAgZm9yY2VWYWxpZGF0aW9uOiBmYWxzZSxcbiAgICAgICAgICBpbmRleDogdW5kZWZpbmVkXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGFsaWduU2VsZjogXCJzdGFydFwiLFxuICAgICAgY2hpbGRyZW46IHN0cmluZ0Zvcm1hdHRlci5mb3JtYXQoJ2FkZCcpXG4gICAgfSksIC8qI19fUFVSRV9fKi9qc3goQXJyYXlGaWVsZExpc3RWaWV3LCB7XG4gICAgICAuLi5wcm9wcyxcbiAgICAgIGxhYmVsSWQ6IGxhYmVsSWQsXG4gICAgICBvbk9wZW5JdGVtOiBpZHggPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhwcmV2aWV3UHJvcHNUb1ZhbHVlKHByb3BzLmVsZW1lbnRzW2lkeF0pKTtcbiAgICAgICAgc2V0TW9kYWxTdGF0ZSh7XG4gICAgICAgICAgc3RhdGU6ICdvcGVuJyxcbiAgICAgICAgICB2YWx1ZTogcHJldmlld1Byb3BzVG9WYWx1ZShwcm9wcy5lbGVtZW50c1tpZHhdKSxcbiAgICAgICAgICBmb3JjZVZhbGlkYXRpb246IGZhbHNlLFxuICAgICAgICAgIGluZGV4OiBpZHhcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSksIC8qI19fUFVSRV9fKi9qc3goQXJyYXlGaWVsZFZhbGlkYXRpb25NZXNzYWdlcywge1xuICAgICAgLi4ucHJvcHNcbiAgICB9KSwgLyojX19QVVJFX18qL2pzeChEaWFsb2dDb250YWluZXIsIHtcbiAgICAgIG9uRGlzbWlzczogKCkgPT4ge1xuICAgICAgICBzZXRNb2RhbFN0YXRlKHtcbiAgICAgICAgICBzdGF0ZTogJ2Nsb3NlZCdcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgY2hpbGRyZW46ICgoKSA9PiB7XG4gICAgICAgIGlmIChtb2RhbFN0YXRlLnN0YXRlICE9PSAnb3BlbicgfHwgcHJvcHMuc2NoZW1hLmVsZW1lbnQua2luZCA9PT0gJ2NoaWxkJykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeHMoRGlhbG9nLCB7XG4gICAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEhlYWRpbmcsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBcIkVkaXQgaXRlbVwiXG4gICAgICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goQ29udGVudCwge1xuICAgICAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goRmxleCwge1xuICAgICAgICAgICAgICBpZDogZm9ybUlkLFxuICAgICAgICAgICAgICBlbGVtZW50VHlwZTogXCJmb3JtXCIsXG4gICAgICAgICAgICAgIG9uU3VibWl0OiBldmVudCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCAhPT0gZXZlbnQuY3VycmVudFRhcmdldCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgaWYgKG1vZGFsU3RhdGUuc3RhdGUgIT09ICdvcGVuJykgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGlmICghY2xpZW50U2lkZVZhbGlkYXRlUHJvcChwcm9wcy5zY2hlbWEuZWxlbWVudCwgbW9kYWxTdGF0ZS52YWx1ZSwgdW5kZWZpbmVkKSkge1xuICAgICAgICAgICAgICAgICAgc2V0TW9kYWxTdGF0ZShzdGF0ZSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgZm9yY2VWYWxpZGF0aW9uOiB0cnVlXG4gICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtb2RhbFN0YXRlLmluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgIHByb3BzLm9uQ2hhbmdlKFsuLi5wcm9wcy5lbGVtZW50cy5tYXAoeCA9PiAoe1xuICAgICAgICAgICAgICAgICAgICBrZXk6IHgua2V5XG4gICAgICAgICAgICAgICAgICB9KSksIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVRvVXBkYXRlcihtb2RhbFN0YXRlLnZhbHVlLCBwcm9wcy5zY2hlbWEuZWxlbWVudClcbiAgICAgICAgICAgICAgICAgIH1dKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgc2V0VmFsdWVUb1ByZXZpZXdQcm9wcyhtb2RhbFN0YXRlLnZhbHVlLCBwcm9wcy5lbGVtZW50c1ttb2RhbFN0YXRlLmluZGV4XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNldE1vZGFsU3RhdGUoe1xuICAgICAgICAgICAgICAgICAgc3RhdGU6ICdjbG9zZWQnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGRpcmVjdGlvbjogXCJjb2x1bW5cIixcbiAgICAgICAgICAgICAgZ2FwOiBcInh4bGFyZ2VcIixcbiAgICAgICAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goQXJyYXlGaWVsZEl0ZW1Nb2RhbENvbnRlbnQsIHtcbiAgICAgICAgICAgICAgICBvbkNoYW5nZTogb25Nb2RhbENoYW5nZSxcbiAgICAgICAgICAgICAgICBzY2hlbWE6IHByb3BzLnNjaGVtYS5lbGVtZW50LFxuICAgICAgICAgICAgICAgIHZhbHVlOiBtb2RhbFN0YXRlLnZhbHVlLFxuICAgICAgICAgICAgICAgIHNsdWdGaWVsZDogc2x1Z0luZm9cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3hzKEJ1dHRvbkdyb3VwLCB7XG4gICAgICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goQnV0dG9uLCB7XG4gICAgICAgICAgICAgIG9uUHJlc3M6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRNb2RhbFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgIHN0YXRlOiAnY2xvc2VkJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBjaGlsZHJlbjogc3RyaW5nRm9ybWF0dGVyLmZvcm1hdCgnY2FuY2VsJylcbiAgICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KEJ1dHRvbiwge1xuICAgICAgICAgICAgICBmb3JtOiBmb3JtSWQsXG4gICAgICAgICAgICAgIHByb21pbmVuY2U6IFwiaGlnaFwiLFxuICAgICAgICAgICAgICB0eXBlOiBcInN1Ym1pdFwiLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogbW9kYWxTdGF0ZS5pbmRleCA9PT0gdW5kZWZpbmVkID8gc3RyaW5nRm9ybWF0dGVyLmZvcm1hdCgnYWRkJykgOiAnRG9uZSdcbiAgICAgICAgICAgIH0pXVxuICAgICAgICAgIH0pXVxuICAgICAgICB9KTtcbiAgICAgIH0pKClcbiAgICB9KV1cbiAgfSk7XG59XG5mdW5jdGlvbiBBcnJheUZpZWxkVmFsaWRhdGlvbk1lc3NhZ2VzKHByb3BzKSB7XG4gIHZhciBfcHJvcHMkc2NoZW1hJHZhbGlkYXQsIF9wcm9wcyRzY2hlbWEkdmFsaWRhdDI7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KEZyYWdtZW50LCB7XG4gICAgY2hpbGRyZW46IHByb3BzLmZvcmNlVmFsaWRhdGlvbiAmJiAoKChfcHJvcHMkc2NoZW1hJHZhbGlkYXQgPSBwcm9wcy5zY2hlbWEudmFsaWRhdGlvbikgPT09IG51bGwgfHwgX3Byb3BzJHNjaGVtYSR2YWxpZGF0ID09PSB2b2lkIDAgfHwgKF9wcm9wcyRzY2hlbWEkdmFsaWRhdCA9IF9wcm9wcyRzY2hlbWEkdmFsaWRhdC5sZW5ndGgpID09PSBudWxsIHx8IF9wcm9wcyRzY2hlbWEkdmFsaWRhdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Byb3BzJHNjaGVtYSR2YWxpZGF0Lm1pbikgIT09IHVuZGVmaW5lZCAmJiBwcm9wcy5lbGVtZW50cy5sZW5ndGggPCBwcm9wcy5zY2hlbWEudmFsaWRhdGlvbi5sZW5ndGgubWluID8gLyojX19QVVJFX18qL2pzeHMoRmllbGRNZXNzYWdlLCB7XG4gICAgICBjaGlsZHJlbjogW1wiTXVzdCBoYXZlIGF0IGxlYXN0IFwiLCBwcm9wcy5zY2hlbWEudmFsaWRhdGlvbi5sZW5ndGgubWluLCBcIiBpdGVtXCIsIHByb3BzLnNjaGVtYS52YWxpZGF0aW9uLmxlbmd0aC5taW4gPT09IDEgPyAnJyA6ICdzJ11cbiAgICB9KSA6ICgoX3Byb3BzJHNjaGVtYSR2YWxpZGF0MiA9IHByb3BzLnNjaGVtYS52YWxpZGF0aW9uKSA9PT0gbnVsbCB8fCBfcHJvcHMkc2NoZW1hJHZhbGlkYXQyID09PSB2b2lkIDAgfHwgKF9wcm9wcyRzY2hlbWEkdmFsaWRhdDIgPSBfcHJvcHMkc2NoZW1hJHZhbGlkYXQyLmxlbmd0aCkgPT09IG51bGwgfHwgX3Byb3BzJHNjaGVtYSR2YWxpZGF0MiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Byb3BzJHNjaGVtYSR2YWxpZGF0Mi5tYXgpICE9PSB1bmRlZmluZWQgJiYgcHJvcHMuZWxlbWVudHMubGVuZ3RoID4gcHJvcHMuc2NoZW1hLnZhbGlkYXRpb24ubGVuZ3RoLm1heCA/IC8qI19fUFVSRV9fKi9qc3hzKEZpZWxkTWVzc2FnZSwge1xuICAgICAgY2hpbGRyZW46IFtcIk11c3QgaGF2ZSBhdCBtb3N0IFwiLCBwcm9wcy5zY2hlbWEudmFsaWRhdGlvbi5sZW5ndGgubWF4LCBcIiBpdGVtXCIsIHByb3BzLnNjaGVtYS52YWxpZGF0aW9uLmxlbmd0aC5tYXggPT09IDEgPyAnJyA6ICdzJ11cbiAgICB9KSA6IHVuZGVmaW5lZClcbiAgfSk7XG59XG5mdW5jdGlvbiBBcnJheUZpZWxkTGlzdFZpZXcocHJvcHMpIHtcbiAgbGV0IG9uTW92ZSA9IChrZXlzLCB0YXJnZXQpID0+IHtcbiAgICBjb25zdCB0YXJnZXRJbmRleCA9IHByb3BzLmVsZW1lbnRzLmZpbmRJbmRleCh4ID0+IHgua2V5ID09PSB0YXJnZXQua2V5KTtcbiAgICBpZiAodGFyZ2V0SW5kZXggPT09IC0xKSByZXR1cm47XG4gICAgY29uc3QgYWxsS2V5cyA9IHByb3BzLmVsZW1lbnRzLm1hcCh4ID0+ICh7XG4gICAgICBrZXk6IHgua2V5XG4gICAgfSkpO1xuICAgIGNvbnN0IGluZGV4VG9Nb3ZlVG8gPSB0YXJnZXQuZHJvcFBvc2l0aW9uID09PSAnYmVmb3JlJyA/IHRhcmdldEluZGV4IDogdGFyZ2V0SW5kZXggKyAxO1xuICAgIGNvbnN0IGluZGljZXMgPSBrZXlzLm1hcChrZXkgPT4gYWxsS2V5cy5maW5kSW5kZXgoeCA9PiB4LmtleSA9PT0ga2V5KSk7XG4gICAgcHJvcHMub25DaGFuZ2UobW92ZShhbGxLZXlzLCBpbmRpY2VzLCBpbmRleFRvTW92ZVRvKSk7XG4gIH07XG4gIGNvbnN0IGRyYWdUeXBlID0gdXNlTWVtbygoKSA9PiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KSwgW10pO1xuICBsZXQge1xuICAgIGRyYWdBbmREcm9wSG9va3NcbiAgfSA9IHVzZURyYWdBbmREcm9wKHtcbiAgICBnZXRJdGVtcyhrZXlzKSB7XG4gICAgICAvLyBVc2UgYSBkcmFnIHR5cGUgc28gdGhlIGl0ZW1zIGNhbiBvbmx5IGJlIHJlb3JkZXJlZCB3aXRoaW4gdGhpcyBsaXN0XG4gICAgICAvLyBhbmQgbm90IGRyYWdnZWQgZWxzZXdoZXJlLlxuICAgICAgcmV0dXJuIFsuLi5rZXlzXS5tYXAoa2V5ID0+IHtcbiAgICAgICAga2V5ID0gSlNPTi5zdHJpbmdpZnkoa2V5KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBbZHJhZ1R5cGVdOiBrZXksXG4gICAgICAgICAgJ3RleHQvcGxhaW4nOiBrZXlcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZ2V0QWxsb3dlZERyb3BPcGVyYXRpb25zKCkge1xuICAgICAgcmV0dXJuIFsnbW92ZScsICdjYW5jZWwnXTtcbiAgICB9LFxuICAgIGFzeW5jIG9uRHJvcChlKSB7XG4gICAgICBpZiAoZS50YXJnZXQudHlwZSAhPT0gJ3Jvb3QnICYmIGUudGFyZ2V0LmRyb3BQb3NpdGlvbiAhPT0gJ29uJykge1xuICAgICAgICBsZXQga2V5cyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIGUuaXRlbXMpIHtcbiAgICAgICAgICBpZiAoaXRlbS5raW5kID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgIGxldCBrZXk7XG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlcy5oYXMoZHJhZ1R5cGUpKSB7XG4gICAgICAgICAgICAgIGtleSA9IEpTT04ucGFyc2UoYXdhaXQgaXRlbS5nZXRUZXh0KGRyYWdUeXBlKSk7XG4gICAgICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLnR5cGVzLmhhcygndGV4dC9wbGFpbicpKSB7XG4gICAgICAgICAgICAgIC8vIEZhbGxiYWNrIGZvciBDaHJvbWUgQW5kcm9pZCBjYXNlOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0xMjkzODAzXG4gICAgICAgICAgICAgIC8vIE11bHRpcGxlIGRyYWcgaXRlbXMgYXJlIGNvbnRhaW5lZCBpbiBhIHNpbmdsZSBzdHJpbmcgc28gd2UgbmVlZCB0byBzcGxpdCB0aGVtIG91dFxuICAgICAgICAgICAgICBrZXkgPSBhd2FpdCBpdGVtLmdldFRleHQoJ3RleHQvcGxhaW4nKTtcbiAgICAgICAgICAgICAga2V5cyA9IGtleS5zcGxpdCgnXFxuJykubWFwKHZhbCA9PiB2YWwucmVwbGFjZUFsbCgnXCInLCAnJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvbk1vdmUoa2V5cywgZS50YXJnZXQpO1xuICAgICAgfVxuICAgIH0sXG4gICAgZ2V0RHJvcE9wZXJhdGlvbih0YXJnZXQpIHtcbiAgICAgIGlmICh0YXJnZXQudHlwZSA9PT0gJ3Jvb3QnIHx8IHRhcmdldC5kcm9wUG9zaXRpb24gPT09ICdvbicpIHtcbiAgICAgICAgcmV0dXJuICdjYW5jZWwnO1xuICAgICAgfVxuICAgICAgcmV0dXJuICdtb3ZlJztcbiAgICB9XG4gIH0pO1xuICBjb25zdCBvblJlbW92ZUtleSA9IHVzZUV2ZW50Q2FsbGJhY2soa2V5ID0+IHtcbiAgICBwcm9wcy5vbkNoYW5nZShwcm9wcy5lbGVtZW50cy5tYXAoeCA9PiAoe1xuICAgICAga2V5OiB4LmtleVxuICAgIH0pKS5maWx0ZXIodmFsID0+IHZhbC5rZXkgIT09IGtleSkpO1xuICB9KTtcbiAgY29uc3Qgc3RyaW5nRm9ybWF0dGVyID0gdXNlTG9jYWxpemVkU3RyaW5nRm9ybWF0dGVyKGwxMG5NZXNzYWdlcyk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KExpc3RWaWV3LCB7XG4gICAgXCJhcmlhLWxhYmVsbGVkYnlcIjogcHJvcHMubGFiZWxJZCxcbiAgICBpdGVtczogcHJvcHMuZWxlbWVudHMsXG4gICAgZHJhZ0FuZERyb3BIb29rczogZHJhZ0FuZERyb3BIb29rcyxcbiAgICBoZWlnaHQ6IHByb3BzLmVsZW1lbnRzLmxlbmd0aCA/IHVuZGVmaW5lZCA6ICdzY2FsZS4yMDAwJyxcbiAgICByZW5kZXJFbXB0eVN0YXRlOiAoKSA9PiAvKiNfX1BVUkVfXyovanN4cyhGbGV4LCB7XG4gICAgICBkaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgICBnYXA6IFwibGFyZ2VcIixcbiAgICAgIGFsaWduSXRlbXM6IFwiY2VudGVyXCIsXG4gICAgICBqdXN0aWZ5Q29udGVudDogXCJjZW50ZXJcIixcbiAgICAgIGhlaWdodDogXCIxMDAlXCIsXG4gICAgICBwYWRkaW5nOiBcInJlZ3VsYXJcIixcbiAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChUZXh0LCB7XG4gICAgICAgIGVsZW1lbnRUeXBlOiBcImgzXCIsXG4gICAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICBjb2xvcjogXCJuZXV0cmFsU2Vjb25kYXJ5XCIsXG4gICAgICAgIHNpemU6IFwibGFyZ2VcIixcbiAgICAgICAgd2VpZ2h0OiBcIm1lZGl1bVwiLFxuICAgICAgICBjaGlsZHJlbjogXCJFbXB0eSBsaXN0XCJcbiAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgIGNvbG9yOiBcIm5ldXRyYWxUZXJ0aWFyeVwiLFxuICAgICAgICBjaGlsZHJlbjogXCJBZGQgdGhlIGZpcnN0IGl0ZW0gdG8gc2VlIGl0IGhlcmUuXCJcbiAgICAgIH0pXVxuICAgIH0pLFxuICAgIG9uQWN0aW9uOiBrZXkgPT4ge1xuICAgICAgY29uc3QgaWR4ID0gcHJvcHMuZWxlbWVudHMuZmluZEluZGV4KHggPT4geC5rZXkgPT09IGtleSk7XG4gICAgICBpZiAoaWR4ID09PSAtMSkgcmV0dXJuO1xuICAgICAgcHJvcHMub25PcGVuSXRlbShpZHgpO1xuICAgIH0sXG4gICAgY2hpbGRyZW46IGl0ZW0gPT4ge1xuICAgICAgdmFyIF9wcm9wcyRzY2hlbWEkaXRlbUxhYiwgX3Byb3BzJHNjaGVtYTtcbiAgICAgIGNvbnN0IGxhYmVsID0gKChfcHJvcHMkc2NoZW1hJGl0ZW1MYWIgPSAoX3Byb3BzJHNjaGVtYSA9IHByb3BzLnNjaGVtYSkuaXRlbUxhYmVsKSA9PT0gbnVsbCB8fCBfcHJvcHMkc2NoZW1hJGl0ZW1MYWIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wcm9wcyRzY2hlbWEkaXRlbUxhYi5jYWxsKF9wcm9wcyRzY2hlbWEsIGl0ZW0pKSB8fCBgSXRlbSAke3Byb3BzLmVsZW1lbnRzLmluZGV4T2YoaXRlbSkgKyAxfWA7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeHMoSXRlbSQyLCB7XG4gICAgICAgIHRleHRWYWx1ZTogbGFiZWwsXG4gICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChUZXh0LCB7XG4gICAgICAgICAgY2hpbGRyZW46IGxhYmVsXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4cyhUb29sdGlwVHJpZ2dlciwge1xuICAgICAgICAgIHBsYWNlbWVudDogXCJzdGFydFwiLFxuICAgICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChBY3Rpb25CdXR0b24sIHtcbiAgICAgICAgICAgIG9uUHJlc3M6ICgpID0+IHtcbiAgICAgICAgICAgICAgb25SZW1vdmVLZXkoaXRlbS5rZXkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KEljb24sIHtcbiAgICAgICAgICAgICAgc3JjOiB0cmFzaDJJY29uXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KFRvb2x0aXAsIHtcbiAgICAgICAgICAgIHRvbmU6IFwiY3JpdGljYWxcIixcbiAgICAgICAgICAgIGNoaWxkcmVuOiBzdHJpbmdGb3JtYXR0ZXIuZm9ybWF0KCdkZWxldGUnKVxuICAgICAgICAgIH0pXVxuICAgICAgICB9KV1cbiAgICAgIH0sIGl0ZW0ua2V5KTtcbiAgICB9XG4gIH0pO1xufVxuXG4vLyBodHRwczovL2dpdGh1Yi5jb20vYWRvYmUvcmVhY3Qtc3BlY3RydW0vYmxvYi85N2ZmOWY5NWQ5MWJlZmFmODcyNTFlNTJlYTQ4NGY4MWRhYWU4ZjNhL3BhY2thZ2VzLyU0MHJlYWN0LXN0YXRlbHkvZGF0YS9zcmMvdXNlTGlzdERhdGEudHMjTDI2M1xuZnVuY3Rpb24gbW92ZShpdGVtcywgaW5kaWNlcywgdG9JbmRleCkge1xuICAvLyBTaGlmdCB0aGUgdGFyZ2V0IGRvd24gYnkgdGhlIG51bWJlciBvZiBpdGVtcyBiZWluZyBtb3ZlZCBmcm9tIGJlZm9yZSB0aGUgdGFyZ2V0XG4gIHRvSW5kZXggLT0gaW5kaWNlcy5maWx0ZXIoaW5kZXggPT4gaW5kZXggPCB0b0luZGV4KS5sZW5ndGg7XG4gIGxldCBtb3ZlcyA9IGluZGljZXMubWFwKGZyb20gPT4gKHtcbiAgICBmcm9tLFxuICAgIHRvOiB0b0luZGV4KytcbiAgfSkpO1xuXG4gIC8vIFNoaWZ0IGxhdGVyIGZyb20gaW5kaWNlcyBkb3duIGlmIHRoZXkgaGF2ZSBhIGxhcmdlciBpbmRleFxuICBmb3IgKGxldCBpID0gMDsgaSA8IG1vdmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IGEgPSBtb3Zlc1tpXS5mcm9tO1xuICAgIGZvciAobGV0IGogPSBpOyBqIDwgbW92ZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgIGxldCBiID0gbW92ZXNbal0uZnJvbTtcbiAgICAgIGlmIChiID4gYSkge1xuICAgICAgICBtb3Zlc1tqXS5mcm9tLS07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gSW50ZXJsZWF2ZSB0aGUgbW92ZXMgc28gdGhleSBjYW4gYmUgYXBwbGllZCBvbmUgYnkgb25lIHJhdGhlciB0aGFuIGFsbCBhdCBvbmNlXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbW92ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgYSA9IG1vdmVzW2ldO1xuICAgIGZvciAobGV0IGogPSBtb3Zlcy5sZW5ndGggLSAxOyBqID4gaTsgai0tKSB7XG4gICAgICBsZXQgYiA9IG1vdmVzW2pdO1xuICAgICAgaWYgKGIuZnJvbSA8IGEudG8pIHtcbiAgICAgICAgYS50bysrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYi5mcm9tKys7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGxldCBjb3B5ID0gaXRlbXMuc2xpY2UoKTtcbiAgZm9yIChsZXQgbW92ZSBvZiBtb3Zlcykge1xuICAgIGxldCBbaXRlbV0gPSBjb3B5LnNwbGljZShtb3ZlLmZyb20sIDEpO1xuICAgIGNvcHkuc3BsaWNlKG1vdmUudG8sIDAsIGl0ZW0pO1xuICB9XG4gIHJldHVybiBjb3B5O1xufVxuZnVuY3Rpb24gQXJyYXlGaWVsZEl0ZW1Nb2RhbENvbnRlbnQocHJvcHMpIHtcbiAgY29uc3QgcHJldmlld1Byb3BzID0gdXNlTWVtbygoKSA9PiBjcmVhdGVHZXRQcmV2aWV3UHJvcHMocHJvcHMuc2NoZW1hLCBwcm9wcy5vbkNoYW5nZSwgKCkgPT4gdW5kZWZpbmVkKSwgW3Byb3BzLnNjaGVtYSwgcHJvcHMub25DaGFuZ2VdKShwcm9wcy52YWx1ZSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KEZvcm1WYWx1ZUNvbnRlbnRGcm9tUHJldmlld1Byb3BzLCB7XG4gICAgc2x1Z0ZpZWxkOiBwcm9wcy5zbHVnRmllbGQsXG4gICAgYXV0b0ZvY3VzOiB0cnVlLFxuICAgIC4uLnByZXZpZXdQcm9wc1xuICB9KTtcbn1cblxuY29uc3QgaXNMaXN0VHlwZSA9IHR5cGUgPT4gdHlwZSA9PT0gJ29yZGVyZWQtbGlzdCcgfHwgdHlwZSA9PT0gJ3Vub3JkZXJlZC1saXN0JztcbmNvbnN0IGlzTGlzdE5vZGUgPSBub2RlID0+IGlzTGlzdFR5cGUobm9kZS50eXBlKTtcbmZ1bmN0aW9uIGdldEFuY2VzdG9yTGlzdChlZGl0b3IpIHtcbiAgaWYgKGVkaXRvci5zZWxlY3Rpb24pIHtcbiAgICBjb25zdCBsaXN0SXRlbSA9IEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgIG1hdGNoOiBub2RlVHlwZU1hdGNoZXIoJ2xpc3QtaXRlbScpXG4gICAgfSk7XG4gICAgY29uc3QgbGlzdCA9IEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgIG1hdGNoOiBpc0xpc3ROb2RlXG4gICAgfSk7XG4gICAgaWYgKGxpc3RJdGVtICYmIGxpc3QpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlzSW5zaWRlOiB0cnVlLFxuICAgICAgICBsaXN0SXRlbSxcbiAgICAgICAgbGlzdFxuICAgICAgfTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBpc0luc2lkZTogZmFsc2VcbiAgfTtcbn1cbmZ1bmN0aW9uIHdpdGhMaXN0KGVkaXRvcikge1xuICBjb25zdCB7XG4gICAgaW5zZXJ0QnJlYWssXG4gICAgbm9ybWFsaXplTm9kZSxcbiAgICBkZWxldGVCYWNrd2FyZFxuICB9ID0gZWRpdG9yO1xuICBlZGl0b3IuZGVsZXRlQmFja3dhcmQgPSB1bml0ID0+IHtcbiAgICBpZiAoZWRpdG9yLnNlbGVjdGlvbikge1xuICAgICAgY29uc3QgYW5jZXN0b3JMaXN0ID0gZ2V0QW5jZXN0b3JMaXN0KGVkaXRvcik7XG4gICAgICBpZiAoYW5jZXN0b3JMaXN0LmlzSW5zaWRlICYmIFJhbmdlLmlzQ29sbGFwc2VkKGVkaXRvci5zZWxlY3Rpb24pICYmIEVkaXRvci5pc1N0YXJ0KGVkaXRvciwgZWRpdG9yLnNlbGVjdGlvbi5hbmNob3IsIGFuY2VzdG9yTGlzdC5saXN0WzFdKSkge1xuICAgICAgICBUcmFuc2Zvcm1zLnVud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgIG1hdGNoOiBpc0xpc3ROb2RlLFxuICAgICAgICAgIHNwbGl0OiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIGRlbGV0ZUJhY2t3YXJkKHVuaXQpO1xuICB9O1xuICBlZGl0b3IuaW5zZXJ0QnJlYWsgPSAoKSA9PiB7XG4gICAgY29uc3QgW2xpc3RJdGVtXSA9IEVkaXRvci5ub2RlcyhlZGl0b3IsIHtcbiAgICAgIG1hdGNoOiBub2RlID0+IG5vZGUudHlwZSA9PT0gJ2xpc3QtaXRlbScsXG4gICAgICBtb2RlOiAnbG93ZXN0J1xuICAgIH0pO1xuICAgIGlmIChsaXN0SXRlbSAmJiBOb2RlLnN0cmluZyhsaXN0SXRlbVswXSkgPT09ICcnKSB7XG4gICAgICBUcmFuc2Zvcm1zLnVud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgICBtYXRjaDogaXNMaXN0Tm9kZSxcbiAgICAgICAgc3BsaXQ6IHRydWVcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpbnNlcnRCcmVhaygpO1xuICB9O1xuICBlZGl0b3Iubm9ybWFsaXplTm9kZSA9IGVudHJ5ID0+IHtcbiAgICBjb25zdCBbbm9kZSwgcGF0aF0gPSBlbnRyeTtcbiAgICBpZiAoRWxlbWVudCQxLmlzRWxlbWVudChub2RlKSB8fCBFZGl0b3IuaXNFZGl0b3Iobm9kZSkpIHtcbiAgICAgIGNvbnN0IGlzRWxlbWVudEJlaW5nTm9ybWFsaXplZEFMaXN0ID0gaXNMaXN0Tm9kZShub2RlKTtcbiAgICAgIGZvciAoY29uc3QgW2NoaWxkTm9kZSwgY2hpbGRQYXRoXSBvZiBOb2RlLmNoaWxkcmVuKGVkaXRvciwgcGF0aCkpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBjaGlsZFBhdGhbY2hpbGRQYXRoLmxlbmd0aCAtIDFdO1xuICAgICAgICAvLyBtZXJnZSBzaWJsaW5nIGxpc3RzXG4gICAgICAgIGlmIChpc0xpc3ROb2RlKGNoaWxkTm9kZSkpIHtcbiAgICAgICAgICB2YXIgX25vZGUkY2hpbGRyZW47XG4gICAgICAgICAgaWYgKCgoX25vZGUkY2hpbGRyZW4gPSBub2RlLmNoaWxkcmVuW2NoaWxkUGF0aFtjaGlsZFBhdGgubGVuZ3RoIC0gMV0gKyAxXSkgPT09IG51bGwgfHwgX25vZGUkY2hpbGRyZW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9ub2RlJGNoaWxkcmVuLnR5cGUpID09PSBjaGlsZE5vZGUudHlwZSkge1xuICAgICAgICAgICAgY29uc3Qgc2libGluZ05vZGVQYXRoID0gUGF0aC5uZXh0KGNoaWxkUGF0aCk7XG4gICAgICAgICAgICBtb3ZlQ2hpbGRyZW4oZWRpdG9yLCBzaWJsaW5nTm9kZVBhdGgsIFsuLi5jaGlsZFBhdGgsIGNoaWxkTm9kZS5jaGlsZHJlbi5sZW5ndGhdKTtcbiAgICAgICAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgIGF0OiBzaWJsaW5nTm9kZVBhdGhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNFbGVtZW50QmVpbmdOb3JtYWxpemVkQUxpc3QpIHtcbiAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzQ2hpbGQgPSBub2RlLmNoaWxkcmVuW2luZGV4IC0gMV07XG4gICAgICAgICAgICBpZiAoRWxlbWVudCQxLmlzRWxlbWVudChwcmV2aW91c0NoaWxkKSkge1xuICAgICAgICAgICAgICBUcmFuc2Zvcm1zLm1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgICBhdDogY2hpbGRQYXRoLFxuICAgICAgICAgICAgICAgIHRvOiBbLi4uUGF0aC5wcmV2aW91cyhjaGlsZFBhdGgpLCBwcmV2aW91c0NoaWxkLmNoaWxkcmVuLmxlbmd0aCAtIDFdXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgVHJhbnNmb3Jtcy51bndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgICBhdDogY2hpbGRQYXRoXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobm9kZS50eXBlID09PSAnbGlzdC1pdGVtJyAmJiBjaGlsZE5vZGUudHlwZSAhPT0gJ2xpc3QtaXRlbS1jb250ZW50JyAmJiBpbmRleCA9PT0gMCAmJiBpc0Jsb2NrKGNoaWxkTm9kZSkpIHtcbiAgICAgICAgICBpZiAocGF0aFtwYXRoLmxlbmd0aCAtIDFdICE9PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBwcmV2aW91c0NoaWxkID0gTm9kZS5nZXQoZWRpdG9yLCBQYXRoLnByZXZpb3VzKHBhdGgpKTtcbiAgICAgICAgICAgIGlmIChFbGVtZW50JDEuaXNFbGVtZW50KHByZXZpb3VzQ2hpbGQpKSB7XG4gICAgICAgICAgICAgIFRyYW5zZm9ybXMubW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgICAgIGF0OiBwYXRoLFxuICAgICAgICAgICAgICAgIHRvOiBbLi4uUGF0aC5wcmV2aW91cyhwYXRoKSwgcHJldmlvdXNDaGlsZC5jaGlsZHJlbi5sZW5ndGhdXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIFRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICBhdDogY2hpbGRQYXRoXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlLnR5cGUgPT09ICdsaXN0LWl0ZW0nICYmIGNoaWxkTm9kZS50eXBlID09PSAnbGlzdC1pdGVtLWNvbnRlbnQnICYmIGluZGV4ICE9PSAwKSB7XG4gICAgICAgICAgVHJhbnNmb3Jtcy5zcGxpdE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgYXQ6IGNoaWxkUGF0aFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBub3JtYWxpemVOb2RlKGVudHJ5KTtcbiAgfTtcbiAgcmV0dXJuIGVkaXRvcjtcbn1cblxuY29uc3QgVG9vbGJhclN0YXRlQ29udGV4dCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVDb250ZXh0KG51bGwpO1xuZnVuY3Rpb24gdXNlVG9vbGJhclN0YXRlKCkge1xuICBjb25zdCB0b29sYmFyU3RhdGUgPSB1c2VDb250ZXh0KFRvb2xiYXJTdGF0ZUNvbnRleHQpO1xuICBpZiAoIXRvb2xiYXJTdGF0ZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignVG9vbGJhclN0YXRlUHJvdmlkZXIgbXVzdCBiZSB1c2VkIHRvIHVzZSB1c2VUb29sYmFyU3RhdGUnKTtcbiAgfVxuICByZXR1cm4gdG9vbGJhclN0YXRlO1xufVxuY29uc3QgY3JlYXRlVG9vbGJhclN0YXRlID0gKGVkaXRvciwgY29tcG9uZW50QmxvY2tzLCBlZGl0b3JEb2N1bWVudEZlYXR1cmVzKSA9PiB7XG4gIGNvbnN0IGxvY2F0aW9uRG9jdW1lbnRGZWF0dXJlcyA9IGdldEFuY2VzdG9yQ29tcG9uZW50Q2hpbGRGaWVsZERvY3VtZW50RmVhdHVyZXMoZWRpdG9yLCBlZGl0b3JEb2N1bWVudEZlYXR1cmVzLCBjb21wb25lbnRCbG9ja3MpIHx8IHtcbiAgICBraW5kOiAnYmxvY2snLFxuICAgIGlubGluZU1hcmtzOiAnaW5oZXJpdCcsXG4gICAgZG9jdW1lbnRGZWF0dXJlczoge1xuICAgICAgZGl2aWRlcnM6IHRydWUsXG4gICAgICBmb3JtYXR0aW5nOiB7XG4gICAgICAgIGFsaWdubWVudDoge1xuICAgICAgICAgIGNlbnRlcjogdHJ1ZSxcbiAgICAgICAgICBlbmQ6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgYmxvY2tUeXBlczoge1xuICAgICAgICAgIGJsb2NrcXVvdGU6IHRydWUsXG4gICAgICAgICAgY29kZTogZWRpdG9yRG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmJsb2NrVHlwZXMuY29kZVxuICAgICAgICB9LFxuICAgICAgICBoZWFkaW5nczogZWRpdG9yRG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmhlYWRpbmdzLFxuICAgICAgICBsaXN0VHlwZXM6IHtcbiAgICAgICAgICBvcmRlcmVkOiB0cnVlLFxuICAgICAgICAgIHVub3JkZXJlZDogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgbGF5b3V0czogZWRpdG9yRG9jdW1lbnRGZWF0dXJlcy5sYXlvdXRzLFxuICAgICAgbGlua3M6IHRydWUsXG4gICAgICBpbWFnZXM6IGVkaXRvckRvY3VtZW50RmVhdHVyZXMuaW1hZ2VzLFxuICAgICAgdGFibGVzOiB0cnVlXG4gICAgfSxcbiAgICBzb2Z0QnJlYWtzOiB0cnVlLFxuICAgIGNvbXBvbmVudEJsb2NrczogdHJ1ZVxuICB9O1xuICBsZXQgW21heWJlQ29kZUJsb2NrRW50cnldID0gRWRpdG9yLm5vZGVzKGVkaXRvciwge1xuICAgIG1hdGNoOiBub2RlID0+IG5vZGUudHlwZSAhPT0gJ2NvZGUnICYmIGlzQmxvY2sobm9kZSlcbiAgfSk7XG4gIGNvbnN0IGVkaXRvck1hcmtzID0gRWRpdG9yLm1hcmtzKGVkaXRvcikgfHwge307XG4gIGNvbnN0IG1hcmtzID0gT2JqZWN0LmZyb21FbnRyaWVzKGFsbE1hcmtzLm1hcChtYXJrID0+IFttYXJrLCB7XG4gICAgaXNEaXNhYmxlZDogbG9jYXRpb25Eb2N1bWVudEZlYXR1cmVzLmlubGluZU1hcmtzICE9PSAnaW5oZXJpdCcgJiYgIWxvY2F0aW9uRG9jdW1lbnRGZWF0dXJlcy5pbmxpbmVNYXJrc1ttYXJrXSB8fCAhbWF5YmVDb2RlQmxvY2tFbnRyeSxcbiAgICBpc1NlbGVjdGVkOiAhIWVkaXRvck1hcmtzW21hcmtdXG4gIH1dKSk7XG5cbiAgLy8gRWRpdG9yLm1hcmtzIGlzIFwid2hhdCBhcmUgdGhlIG1hcmtzIHRoYXQgd291bGQgYmUgYXBwbGllZCBpZiB0ZXh0IHdhcyBpbnNlcnRlZCBub3dcIlxuICAvLyB0aGF0J3Mgbm90IHJlYWxseSB0aGUgVVggd2Ugd2FudCwgaWYgd2UgaGF2ZSBzb21lIGEgZG9jdW1lbnQgbGlrZSB0aGlzXG4gIC8vIDxwYXJhZ3JhcGg+XG4gIC8vICAgPHRleHQ+XG4gIC8vICAgICA8YW5jaG9yIC8+XG4gIC8vICAgICBjb250ZW50XG4gIC8vICAgPC90ZXh0PlxuICAvLyAgIDx0ZXh0IGJvbGQ+Ym9sZDwvdGV4dD5cbiAgLy8gICA8dGV4dD5cbiAgLy8gICAgIGNvbnRlbnRcbiAgLy8gICAgIDxmb2N1cyAvPlxuICAvLyAgIDwvdGV4dD5cbiAgLy8gPC9wYXJhZ3JhcGg+XG5cbiAgLy8gd2Ugd2FudCBib2xkIHRvIGJlIHNob3duIGFzIHNlbGVjdGVkIGV2ZW4gdGhvdWdoIGlmIHlvdSBpbnNlcnRlZCB0ZXh0IGZyb20gdGhhdCBzZWxlY3Rpb24sIGl0IHdvdWxkbid0IGJlIGJvbGRcbiAgLy8gc28gd2UgbG9vayBhdCBhbGwgdGhlIHRleHQgbm9kZXMgaW4gdGhlIHNlbGVjdGlvbiB0byBnZXQgdGhlaXIgbWFya3NcbiAgLy8gYnV0IG9ubHkgaWYgdGhlIHNlbGVjdGlvbiBpcyBleHBhbmRlZCBiZWNhdXNlIGlmIHlvdSdyZSBpbiB0aGUgbWlkZGxlIG9mIHNvbWUgdGV4dFxuICAvLyB3aXRoIHlvdXIgc2VsZWN0aW9uIGNvbGxhcHNlZCB3aXRoIGEgbWFyayBidXQgeW91J3ZlIHJlbW92ZWQgaXQoaS5lLiBlZGl0b3IucmVtb3ZlTWFyaylcbiAgLy8gdGhlIHRleHQgbm9kZXMgeW91J3JlIGluIHdpbGwgaGF2ZSB0aGUgbWFyayBidXQgdGhlIHVpIHNob3VsZCBzaG93IHRoZSBtYXJrIGFzIG5vdCBiZWluZyBzZWxlY3RlZFxuICBpZiAoZWRpdG9yLnNlbGVjdGlvbiAmJiBSYW5nZS5pc0V4cGFuZGVkKGVkaXRvci5zZWxlY3Rpb24pKSB7XG4gICAgZm9yIChjb25zdCBub2RlIG9mIEVkaXRvci5ub2RlcyhlZGl0b3IsIHtcbiAgICAgIG1hdGNoOiBUZXh0JDEuaXNUZXh0XG4gICAgfSkpIHtcbiAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKG5vZGVbMF0pKSB7XG4gICAgICAgIGlmIChrZXkgPT09ICdpbnNlcnRNZW51JyB8fCBrZXkgPT09ICd0ZXh0Jykge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChrZXkgaW4gbWFya3MpIHtcbiAgICAgICAgICBtYXJrc1trZXldLmlzU2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGxldCBbaGVhZGluZ0VudHJ5XSA9IEVkaXRvci5ub2RlcyhlZGl0b3IsIHtcbiAgICBtYXRjaDogbm9kZVR5cGVNYXRjaGVyKCdoZWFkaW5nJylcbiAgfSk7XG4gIGxldCBbbGlzdEVudHJ5XSA9IEVkaXRvci5ub2RlcyhlZGl0b3IsIHtcbiAgICBtYXRjaDogaXNMaXN0Tm9kZVxuICB9KTtcbiAgbGV0IFthbGlnbmFibGVFbnRyeV0gPSBFZGl0b3Iubm9kZXMoZWRpdG9yLCB7XG4gICAgbWF0Y2g6IG5vZGVUeXBlTWF0Y2hlcigncGFyYWdyYXBoJywgJ2hlYWRpbmcnKVxuICB9KTtcblxuICAvLyAod2UncmUgZ29ubmEgdXNlIG1hcmtkb3duIGhlcmUgYmVjYXVzZSB0aGUgZXF1aXZlbGFudCBzbGF0ZSBzdHJ1Y3R1cmUgaXMgcXVpdGUgbGFyZ2UgYW5kIGRvZXNuJ3QgYWRkIHZhbHVlIGhlcmUpXG4gIC8vIGxldCdzIGltYWdpbmUgYSBkb2N1bWVudCB0aGF0IGxvb2tzIGxpa2UgdGhpczpcbiAgLy8gLSB0aGluZ1xuICAvLyAgIDEuIHNvbWV0aGluZzxjdXJzb3IgLz5cbiAgLy8gaW4gdGhlIHRvb2xiYXIsIHlvdSBkb24ndCB3YW50IHRvIHNlZSB0aGF0IGJvdGggb3JkZXJlZCBhbmQgdW5vcmRlcmVkIGxpc3RzIGFyZSBzZWxlY3RlZFxuICAvLyB5b3Ugd2FudCB0byBzZWUgb25seSBvcmRlcmVkIGxpc3Qgc2VsZWN0ZWQsIGJlY2F1c2VcbiAgLy8gLSB5b3Ugd2FudCB0byBrbm93IHdoYXQgbGlzdCB5b3UncmUgYWN0dWFsbHkgaW4sIHlvdSBkb24ndCByZWFsbHkgY2FyZSBhYm91dCB0aGUgb3V0ZXIgbGlzdFxuICAvLyAtIHdoZW4geW91IHdhbnQgdG8gY2hhbmdlIHRoZSBsaXN0IHRvIGEgdW5vcmRlcmVkIGxpc3QsIHRoZSB1bm9yZGVyZWQgbGlzdCBidXR0b24gc2hvdWxkIGJlIGluYWN0aXZlIHRvIHNob3cgeW91IGNhbiBjaGFuZ2UgdG8gaXRcbiAgY29uc3QgbGlzdFR5cGVBYm92ZSA9IGdldExpc3RUeXBlQWJvdmUoZWRpdG9yKTtcbiAgcmV0dXJuIHtcbiAgICBtYXJrcyxcbiAgICB0ZXh0U3R5bGVzOiB7XG4gICAgICBzZWxlY3RlZDogaGVhZGluZ0VudHJ5ID8gaGVhZGluZ0VudHJ5WzBdLmxldmVsIDogJ25vcm1hbCcsXG4gICAgICBhbGxvd2VkSGVhZGluZ0xldmVsczogbG9jYXRpb25Eb2N1bWVudEZlYXR1cmVzLmtpbmQgPT09ICdibG9jaycgJiYgIWxpc3RFbnRyeSA/IGxvY2F0aW9uRG9jdW1lbnRGZWF0dXJlcy5kb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuaGVhZGluZ3MubGV2ZWxzIDogW11cbiAgICB9LFxuICAgIGNvZGU6IHtcbiAgICAgIGlzU2VsZWN0ZWQ6IGlzRWxlbWVudEFjdGl2ZShlZGl0b3IsICdjb2RlJyksXG4gICAgICBpc0Rpc2FibGVkOiAhKGxvY2F0aW9uRG9jdW1lbnRGZWF0dXJlcy5raW5kID09PSAnYmxvY2snICYmIGxvY2F0aW9uRG9jdW1lbnRGZWF0dXJlcy5kb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuYmxvY2tUeXBlcy5jb2RlKVxuICAgIH0sXG4gICAgbGlzdHM6IHtcbiAgICAgIG9yZGVyZWQ6IHtcbiAgICAgICAgaXNTZWxlY3RlZDogaXNFbGVtZW50QWN0aXZlKGVkaXRvciwgJ29yZGVyZWQtbGlzdCcpICYmIChsaXN0VHlwZUFib3ZlID09PSAnbm9uZScgfHwgbGlzdFR5cGVBYm92ZSA9PT0gJ29yZGVyZWQtbGlzdCcpLFxuICAgICAgICBpc0Rpc2FibGVkOiAhKGxvY2F0aW9uRG9jdW1lbnRGZWF0dXJlcy5raW5kID09PSAnYmxvY2snICYmIGxvY2F0aW9uRG9jdW1lbnRGZWF0dXJlcy5kb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcubGlzdFR5cGVzLm9yZGVyZWQgJiYgIWhlYWRpbmdFbnRyeSlcbiAgICAgIH0sXG4gICAgICB1bm9yZGVyZWQ6IHtcbiAgICAgICAgaXNTZWxlY3RlZDogaXNFbGVtZW50QWN0aXZlKGVkaXRvciwgJ3Vub3JkZXJlZC1saXN0JykgJiYgKGxpc3RUeXBlQWJvdmUgPT09ICdub25lJyB8fCBsaXN0VHlwZUFib3ZlID09PSAndW5vcmRlcmVkLWxpc3QnKSxcbiAgICAgICAgaXNEaXNhYmxlZDogIShsb2NhdGlvbkRvY3VtZW50RmVhdHVyZXMua2luZCA9PT0gJ2Jsb2NrJyAmJiBsb2NhdGlvbkRvY3VtZW50RmVhdHVyZXMuZG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmxpc3RUeXBlcy51bm9yZGVyZWQgJiYgIWhlYWRpbmdFbnRyeSlcbiAgICAgIH1cbiAgICB9LFxuICAgIGFsaWdubWVudDoge1xuICAgICAgaXNEaXNhYmxlZDogIWFsaWduYWJsZUVudHJ5ICYmICEobG9jYXRpb25Eb2N1bWVudEZlYXR1cmVzLmtpbmQgPT09ICdibG9jaycgJiYgbG9jYXRpb25Eb2N1bWVudEZlYXR1cmVzLmRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5hbGlnbm1lbnQpLFxuICAgICAgc2VsZWN0ZWQ6IChhbGlnbmFibGVFbnRyeSA9PT0gbnVsbCB8fCBhbGlnbmFibGVFbnRyeSA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWxpZ25hYmxlRW50cnlbMF0udGV4dEFsaWduKSB8fCAnc3RhcnQnXG4gICAgfSxcbiAgICBibG9ja3F1b3RlOiB7XG4gICAgICBpc0Rpc2FibGVkOiAhKGxvY2F0aW9uRG9jdW1lbnRGZWF0dXJlcy5raW5kID09PSAnYmxvY2snICYmIGxvY2F0aW9uRG9jdW1lbnRGZWF0dXJlcy5kb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuYmxvY2tUeXBlcy5ibG9ja3F1b3RlKSxcbiAgICAgIGlzU2VsZWN0ZWQ6IGlzRWxlbWVudEFjdGl2ZShlZGl0b3IsICdibG9ja3F1b3RlJylcbiAgICB9LFxuICAgIGxheW91dHM6IHtcbiAgICAgIGlzU2VsZWN0ZWQ6IGlzRWxlbWVudEFjdGl2ZShlZGl0b3IsICdsYXlvdXQnKVxuICAgIH0sXG4gICAgbGlua3M6IHtcbiAgICAgIGlzRGlzYWJsZWQ6ICFlZGl0b3Iuc2VsZWN0aW9uIHx8IFJhbmdlLmlzQ29sbGFwc2VkKGVkaXRvci5zZWxlY3Rpb24pIHx8ICFsb2NhdGlvbkRvY3VtZW50RmVhdHVyZXMuZG9jdW1lbnRGZWF0dXJlcy5saW5rcyxcbiAgICAgIGlzU2VsZWN0ZWQ6IGlzRWxlbWVudEFjdGl2ZShlZGl0b3IsICdsaW5rJylcbiAgICB9LFxuICAgIGVkaXRvcixcbiAgICBkaXZpZGVyczoge1xuICAgICAgaXNEaXNhYmxlZDogbG9jYXRpb25Eb2N1bWVudEZlYXR1cmVzLmtpbmQgPT09ICdpbmxpbmUnIHx8ICFsb2NhdGlvbkRvY3VtZW50RmVhdHVyZXMuZG9jdW1lbnRGZWF0dXJlcy5kaXZpZGVyc1xuICAgIH0sXG4gICAgY2xlYXJGb3JtYXR0aW5nOiB7XG4gICAgICBpc0Rpc2FibGVkOiAhKE9iamVjdC52YWx1ZXMobWFya3MpLnNvbWUoeCA9PiB4LmlzU2VsZWN0ZWQpIHx8ICEhaGFzQmxvY2tUaGF0Q2xlYXJzT25DbGVhckZvcm1hdHRpbmcoZWRpdG9yKSlcbiAgICB9LFxuICAgIGVkaXRvckRvY3VtZW50RmVhdHVyZXNcbiAgfTtcbn07XG5mdW5jdGlvbiBoYXNCbG9ja1RoYXRDbGVhcnNPbkNsZWFyRm9ybWF0dGluZyhlZGl0b3IpIHtcbiAgY29uc3QgW25vZGVdID0gRWRpdG9yLm5vZGVzKGVkaXRvciwge1xuICAgIG1hdGNoOiBub2RlID0+IG5vZGUudHlwZSA9PT0gJ2hlYWRpbmcnIHx8IG5vZGUudHlwZSA9PT0gJ2NvZGUnIHx8IG5vZGUudHlwZSA9PT0gJ2Jsb2NrcXVvdGUnXG4gIH0pO1xuICByZXR1cm4gISFub2RlO1xufVxuZnVuY3Rpb24gZ2V0TGlzdFR5cGVBYm92ZShlZGl0b3IpIHtcbiAgY29uc3QgbGlzdEFib3ZlID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgIG1hdGNoOiBpc0xpc3ROb2RlXG4gIH0pO1xuICBpZiAoIWxpc3RBYm92ZSkge1xuICAgIHJldHVybiAnbm9uZSc7XG4gIH1cbiAgcmV0dXJuIGxpc3RBYm92ZVswXS50eXBlO1xufVxuY29uc3QgRG9jdW1lbnRFZGl0b3JDb25maWdDb250ZXh0ID0gLyojX19QVVJFX18qL2NyZWF0ZUNvbnRleHQobnVsbCk7XG5mdW5jdGlvbiB1c2VEb2N1bWVudEVkaXRvckNvbmZpZygpIHtcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoRG9jdW1lbnRFZGl0b3JDb25maWdDb250ZXh0KTtcbiAgaWYgKCFjb250ZXh0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1c2VEb2N1bWVudEVkaXRvckNvbmZpZyBtdXN0IGJlIHVzZWQgd2l0aGluIGEgRG9jdW1lbnRFZGl0b3JDb25maWdDb250ZXh0LlByb3ZpZGVyJyk7XG4gIH1cbiAgcmV0dXJuIGNvbnRleHQ7XG59XG5jb25zdCBUb29sYmFyU3RhdGVQcm92aWRlciA9ICh7XG4gIGNoaWxkcmVuLFxuICBjb21wb25lbnRCbG9ja3MsXG4gIGVkaXRvckRvY3VtZW50RmVhdHVyZXNcbn0pID0+IHtcbiAgY29uc3QgZWRpdG9yID0gdXNlU2xhdGUoKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goRG9jdW1lbnRFZGl0b3JDb25maWdDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IHVzZU1lbW8oKCkgPT4gKHtcbiAgICAgIGNvbXBvbmVudEJsb2NrcyxcbiAgICAgIGRvY3VtZW50RmVhdHVyZXM6IGVkaXRvckRvY3VtZW50RmVhdHVyZXNcbiAgICB9KSwgW2NvbXBvbmVudEJsb2NrcywgZWRpdG9yRG9jdW1lbnRGZWF0dXJlc10pLFxuICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KFRvb2xiYXJTdGF0ZUNvbnRleHQuUHJvdmlkZXIsIHtcbiAgICAgIHZhbHVlOiBjcmVhdGVUb29sYmFyU3RhdGUoZWRpdG9yLCBjb21wb25lbnRCbG9ja3MsIGVkaXRvckRvY3VtZW50RmVhdHVyZXMpLFxuICAgICAgY2hpbGRyZW46IGNoaWxkcmVuXG4gICAgfSlcbiAgfSk7XG59O1xuXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuZ2xvYmFsVGhpcy5QcmlzbSA9IHtcbiAgbWFudWFsOiB0cnVlXG59O1xuXG4vKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgIEJlZ2luIHByaXNtLWNvcmUuanNcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cblxuLy8vIDxyZWZlcmVuY2UgbGliPVwiV2ViV29ya2VyXCIvPlxuXG52YXIgX3NlbGYgPSBnbG9iYWxUaGlzO1xuXG4vKipcbiAqIFByaXNtOiBMaWdodHdlaWdodCwgcm9idXN0LCBlbGVnYW50IHN5bnRheCBoaWdobGlnaHRpbmdcbiAqXG4gKiBAbGljZW5zZSBNSVQgPGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUPlxuICogQGF1dGhvciBMZWEgVmVyb3UgPGh0dHBzOi8vbGVhLnZlcm91Lm1lPlxuICogQG5hbWVzcGFjZVxuICogQHB1YmxpY1xuICovXG52YXIgUHJpc20gPSBmdW5jdGlvbiAoX3NlbGYpIHtcbiAgLy8gUHJpdmF0ZSBoZWxwZXIgdmFyc1xuICB2YXIgbGFuZyA9IC8oPzpefFxccylsYW5nKD86dWFnZSk/LShbXFx3LV0rKSg/PVxcc3wkKS9pO1xuICB2YXIgdW5pcXVlSWQgPSAwO1xuXG4gIC8vIFRoZSBncmFtbWFyIG9iamVjdCBmb3IgcGxhaW50ZXh0XG4gIHZhciBwbGFpblRleHRHcmFtbWFyID0ge307XG4gIHZhciBfID0ge1xuICAgIC8qKlxuICAgICAqIEJ5IGRlZmF1bHQsIFByaXNtIHdpbGwgYXR0ZW1wdCB0byBoaWdobGlnaHQgYWxsIGNvZGUgZWxlbWVudHMgKGJ5IGNhbGxpbmcge0BsaW5rIFByaXNtLmhpZ2hsaWdodEFsbH0pIG9uIHRoZVxuICAgICAqIGN1cnJlbnQgcGFnZSBhZnRlciB0aGUgcGFnZSBmaW5pc2hlZCBsb2FkaW5nLiBUaGlzIG1pZ2h0IGJlIGEgcHJvYmxlbSBpZiBlLmcuIHlvdSB3YW50ZWQgdG8gYXN5bmNocm9ub3VzbHkgbG9hZFxuICAgICAqIGFkZGl0aW9uYWwgbGFuZ3VhZ2VzIG9yIHBsdWdpbnMgeW91cnNlbGYuXG4gICAgICpcbiAgICAgKiBCeSBzZXR0aW5nIHRoaXMgdmFsdWUgdG8gYHRydWVgLCBQcmlzbSB3aWxsIG5vdCBhdXRvbWF0aWNhbGx5IGhpZ2hsaWdodCBhbGwgY29kZSBlbGVtZW50cyBvbiB0aGUgcGFnZS5cbiAgICAgKlxuICAgICAqIFlvdSBvYnZpb3VzbHkgaGF2ZSB0byBjaGFuZ2UgdGhpcyB2YWx1ZSBiZWZvcmUgdGhlIGF1dG9tYXRpYyBoaWdobGlnaHRpbmcgc3RhcnRlZC4gVG8gZG8gdGhpcywgeW91IGNhbiBhZGQgYW5cbiAgICAgKiBlbXB0eSBQcmlzbSBvYmplY3QgaW50byB0aGUgZ2xvYmFsIHNjb3BlIGJlZm9yZSBsb2FkaW5nIHRoZSBQcmlzbSBzY3JpcHQgbGlrZSB0aGlzOlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiB3aW5kb3cuUHJpc20gPSB3aW5kb3cuUHJpc20gfHwge307XG4gICAgICogUHJpc20ubWFudWFsID0gdHJ1ZTtcbiAgICAgKiAvLyBhZGQgYSBuZXcgPHNjcmlwdD4gdG8gbG9hZCBQcmlzbSdzIHNjcmlwdFxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAbWVtYmVyb2YgUHJpc21cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgbWFudWFsOiBfc2VsZi5QcmlzbSAmJiBfc2VsZi5QcmlzbS5tYW51YWwsXG4gICAgLyoqXG4gICAgICogQnkgZGVmYXVsdCwgaWYgUHJpc20gaXMgaW4gYSB3ZWIgd29ya2VyLCBpdCBhc3N1bWVzIHRoYXQgaXQgaXMgaW4gYSB3b3JrZXIgaXQgY3JlYXRlZCBpdHNlbGYsIHNvIGl0IHVzZXNcbiAgICAgKiBgYWRkRXZlbnRMaXN0ZW5lcmAgdG8gY29tbXVuaWNhdGUgd2l0aCBpdHMgcGFyZW50IGluc3RhbmNlLiBIb3dldmVyLCBpZiB5b3UncmUgdXNpbmcgUHJpc20gbWFudWFsbHkgaW4geW91clxuICAgICAqIG93biB3b3JrZXIsIHlvdSBkb24ndCB3YW50IGl0IHRvIGRvIHRoaXMuXG4gICAgICpcbiAgICAgKiBCeSBzZXR0aW5nIHRoaXMgdmFsdWUgdG8gYHRydWVgLCBQcmlzbSB3aWxsIG5vdCBhZGQgaXRzIG93biBsaXN0ZW5lcnMgdG8gdGhlIHdvcmtlci5cbiAgICAgKlxuICAgICAqIFlvdSBvYnZpb3VzbHkgaGF2ZSB0byBjaGFuZ2UgdGhpcyB2YWx1ZSBiZWZvcmUgUHJpc20gZXhlY3V0ZXMuIFRvIGRvIHRoaXMsIHlvdSBjYW4gYWRkIGFuXG4gICAgICogZW1wdHkgUHJpc20gb2JqZWN0IGludG8gdGhlIGdsb2JhbCBzY29wZSBiZWZvcmUgbG9hZGluZyB0aGUgUHJpc20gc2NyaXB0IGxpa2UgdGhpczpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogd2luZG93LlByaXNtID0gd2luZG93LlByaXNtIHx8IHt9O1xuICAgICAqIFByaXNtLmRpc2FibGVXb3JrZXJNZXNzYWdlSGFuZGxlciA9IHRydWU7XG4gICAgICogLy8gTG9hZCBQcmlzbSdzIHNjcmlwdFxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAbWVtYmVyb2YgUHJpc21cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZGlzYWJsZVdvcmtlck1lc3NhZ2VIYW5kbGVyOiBfc2VsZi5QcmlzbSAmJiBfc2VsZi5QcmlzbS5kaXNhYmxlV29ya2VyTWVzc2FnZUhhbmRsZXIsXG4gICAgLyoqXG4gICAgICogQSBuYW1lc3BhY2UgZm9yIHV0aWxpdHkgbWV0aG9kcy5cbiAgICAgKlxuICAgICAqIEFsbCBmdW5jdGlvbiBpbiB0aGlzIG5hbWVzcGFjZSB0aGF0IGFyZSBub3QgZXhwbGljaXRseSBtYXJrZWQgYXMgX3B1YmxpY18gYXJlIGZvciBfX2ludGVybmFsIHVzZSBvbmx5X18gYW5kIG1heVxuICAgICAqIGNoYW5nZSBvciBkaXNhcHBlYXIgYXQgYW55IHRpbWUuXG4gICAgICpcbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQG1lbWJlcm9mIFByaXNtXG4gICAgICovXG4gICAgdXRpbDoge1xuICAgICAgZW5jb2RlOiBmdW5jdGlvbiBlbmNvZGUodG9rZW5zKSB7XG4gICAgICAgIGlmICh0b2tlbnMgaW5zdGFuY2VvZiBUb2tlbikge1xuICAgICAgICAgIHJldHVybiBuZXcgVG9rZW4odG9rZW5zLnR5cGUsIGVuY29kZSh0b2tlbnMuY29udGVudCksIHRva2Vucy5hbGlhcyk7XG4gICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh0b2tlbnMpKSB7XG4gICAgICAgICAgcmV0dXJuIHRva2Vucy5tYXAoZW5jb2RlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdG9rZW5zLnJlcGxhY2UoLyYvZywgJyZhbXA7JykucmVwbGFjZSgvPC9nLCAnJmx0OycpLnJlcGxhY2UoL1xcdTAwYTAvZywgJyAnKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogUmV0dXJucyB0aGUgbmFtZSBvZiB0aGUgdHlwZSBvZiB0aGUgZ2l2ZW4gdmFsdWUuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHthbnl9IG9cbiAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAgICAgKiBAZXhhbXBsZVxuICAgICAgICogdHlwZShudWxsKSAgICAgID09PSAnTnVsbCdcbiAgICAgICAqIHR5cGUodW5kZWZpbmVkKSA9PT0gJ1VuZGVmaW5lZCdcbiAgICAgICAqIHR5cGUoMTIzKSAgICAgICA9PT0gJ051bWJlcidcbiAgICAgICAqIHR5cGUoJ2ZvbycpICAgICA9PT0gJ1N0cmluZydcbiAgICAgICAqIHR5cGUodHJ1ZSkgICAgICA9PT0gJ0Jvb2xlYW4nXG4gICAgICAgKiB0eXBlKFsxLCAyXSkgICAgPT09ICdBcnJheSdcbiAgICAgICAqIHR5cGUoe30pICAgICAgICA9PT0gJ09iamVjdCdcbiAgICAgICAqIHR5cGUoU3RyaW5nKSAgICA9PT0gJ0Z1bmN0aW9uJ1xuICAgICAgICogdHlwZSgvYWJjKy8pICAgID09PSAnUmVnRXhwJ1xuICAgICAgICovXG4gICAgICB0eXBlOiBmdW5jdGlvbiAobykge1xuICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIFJldHVybnMgYSB1bmlxdWUgbnVtYmVyIGZvciB0aGUgZ2l2ZW4gb2JqZWN0LiBMYXRlciBjYWxscyB3aWxsIHN0aWxsIHJldHVybiB0aGUgc2FtZSBudW1iZXIuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9ialxuICAgICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgICAqL1xuICAgICAgb2JqSWQ6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgaWYgKCFvYmpbJ19faWQnXSkge1xuICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosICdfX2lkJywge1xuICAgICAgICAgICAgdmFsdWU6ICsrdW5pcXVlSWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqWydfX2lkJ107XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBDcmVhdGVzIGEgZGVlcCBjbG9uZSBvZiB0aGUgZ2l2ZW4gb2JqZWN0LlxuICAgICAgICpcbiAgICAgICAqIFRoZSBtYWluIGludGVuZGVkIHVzZSBvZiB0aGlzIGZ1bmN0aW9uIGlzIHRvIGNsb25lIGxhbmd1YWdlIGRlZmluaXRpb25zLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7VH0gb1xuICAgICAgICogQHBhcmFtIHtSZWNvcmQ8bnVtYmVyLCBhbnk+fSBbdmlzaXRlZF1cbiAgICAgICAqIEByZXR1cm5zIHtUfVxuICAgICAgICogQHRlbXBsYXRlIFRcbiAgICAgICAqL1xuICAgICAgY2xvbmU6IGZ1bmN0aW9uIGRlZXBDbG9uZShvLCB2aXNpdGVkKSB7XG4gICAgICAgIHZpc2l0ZWQgPSB2aXNpdGVkIHx8IHt9O1xuICAgICAgICB2YXIgY2xvbmU7XG4gICAgICAgIHZhciBpZDtcbiAgICAgICAgc3dpdGNoIChfLnV0aWwudHlwZShvKSkge1xuICAgICAgICAgIGNhc2UgJ09iamVjdCc6XG4gICAgICAgICAgICBpZCA9IF8udXRpbC5vYmpJZChvKTtcbiAgICAgICAgICAgIGlmICh2aXNpdGVkW2lkXSkge1xuICAgICAgICAgICAgICByZXR1cm4gdmlzaXRlZFtpZF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbG9uZSA9IC8qKiBAdHlwZSB7UmVjb3JkPHN0cmluZywgYW55Pn0gKi97fTtcbiAgICAgICAgICAgIHZpc2l0ZWRbaWRdID0gY2xvbmU7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gbykge1xuICAgICAgICAgICAgICBpZiAoby5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgY2xvbmVba2V5XSA9IGRlZXBDbG9uZShvW2tleV0sIHZpc2l0ZWQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHthbnl9ICovY2xvbmU7XG4gICAgICAgICAgY2FzZSAnQXJyYXknOlxuICAgICAgICAgICAgaWQgPSBfLnV0aWwub2JqSWQobyk7XG4gICAgICAgICAgICBpZiAodmlzaXRlZFtpZF0pIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHZpc2l0ZWRbaWRdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xvbmUgPSBbXTtcbiAgICAgICAgICAgIHZpc2l0ZWRbaWRdID0gY2xvbmU7XG4gICAgICAgICAgICAoIC8qKiBAdHlwZSB7QXJyYXl9ICovIC8qKiBAdHlwZSB7YW55fSAqL28pLmZvckVhY2goZnVuY3Rpb24gKHYsIGkpIHtcbiAgICAgICAgICAgICAgY2xvbmVbaV0gPSBkZWVwQ2xvbmUodiwgdmlzaXRlZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiAvKiogQHR5cGUge2FueX0gKi9jbG9uZTtcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG87XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIFJldHVybnMgdGhlIFByaXNtIGxhbmd1YWdlIG9mIHRoZSBnaXZlbiBlbGVtZW50IHNldCBieSBhIGBsYW5ndWFnZS14eHh4YCBvciBgbGFuZy14eHh4YCBjbGFzcy5cbiAgICAgICAqXG4gICAgICAgKiBJZiBubyBsYW5ndWFnZSBpcyBzZXQgZm9yIHRoZSBlbGVtZW50IG9yIHRoZSBlbGVtZW50IGlzIGBudWxsYCBvciBgdW5kZWZpbmVkYCwgYG5vbmVgIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50XG4gICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICAgICovXG4gICAgICBnZXRMYW5ndWFnZTogZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgd2hpbGUgKGVsZW1lbnQpIHtcbiAgICAgICAgICB2YXIgbSA9IGxhbmcuZXhlYyhlbGVtZW50LmNsYXNzTmFtZSk7XG4gICAgICAgICAgaWYgKG0pIHtcbiAgICAgICAgICAgIHJldHVybiBtWzFdLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICdub25lJztcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIFNldHMgdGhlIFByaXNtIGBsYW5ndWFnZS14eHh4YCBjbGFzcyBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsYW5ndWFnZVxuICAgICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICAgKi9cbiAgICAgIHNldExhbmd1YWdlOiBmdW5jdGlvbiAoZWxlbWVudCwgbGFuZ3VhZ2UpIHtcbiAgICAgICAgLy8gcmVtb3ZlIGFsbCBgbGFuZ3VhZ2UteHh4eGAgY2xhc3Nlc1xuICAgICAgICAvLyAodGhpcyBtaWdodCBsZWF2ZSBiZWhpbmQgYSBsZWFkaW5nIHNwYWNlKVxuICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IGVsZW1lbnQuY2xhc3NOYW1lLnJlcGxhY2UoUmVnRXhwKGxhbmcsICdnaScpLCAnJyk7XG5cbiAgICAgICAgLy8gYWRkIHRoZSBuZXcgYGxhbmd1YWdlLXh4eHhgIGNsYXNzXG4gICAgICAgIC8vICh1c2luZyBgY2xhc3NMaXN0YCB3aWxsIGF1dG9tYXRpY2FsbHkgY2xlYW4gdXAgc3BhY2VzIGZvciB1cylcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdsYW5ndWFnZS0nICsgbGFuZ3VhZ2UpO1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogUmV0dXJucyB0aGUgc2NyaXB0IGVsZW1lbnQgdGhhdCBpcyBjdXJyZW50bHkgZXhlY3V0aW5nLlxuICAgICAgICpcbiAgICAgICAqIFRoaXMgZG9lcyBfX25vdF9fIHdvcmsgZm9yIGxpbmUgc2NyaXB0IGVsZW1lbnQuXG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMge0hUTUxTY3JpcHRFbGVtZW50IHwgbnVsbH1cbiAgICAgICAqL1xuICAgICAgY3VycmVudFNjcmlwdDogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICgnY3VycmVudFNjcmlwdCcgaW4gZG9jdW1lbnQgJiYgMSA8IDIgLyogaGFjayB0byB0cmlwIFRTJyBmbG93IGFuYWx5c2lzICovKSB7XG4gICAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7YW55fSAqL2RvY3VtZW50LmN1cnJlbnRTY3JpcHQ7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJRTExIHdvcmthcm91bmRcbiAgICAgICAgLy8gd2UnbGwgZ2V0IHRoZSBzcmMgb2YgdGhlIGN1cnJlbnQgc2NyaXB0IGJ5IHBhcnNpbmcgSUUxMSdzIGVycm9yIHN0YWNrIHRyYWNlXG4gICAgICAgIC8vIHRoaXMgd2lsbCBub3Qgd29yayBmb3IgaW5saW5lIHNjcmlwdHNcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAvLyBHZXQgZmlsZSBzcmMgdXJsIGZyb20gc3RhY2suIFNwZWNpZmljYWxseSB3b3JrcyB3aXRoIHRoZSBmb3JtYXQgb2Ygc3RhY2sgdHJhY2VzIGluIElFLlxuICAgICAgICAgIC8vIEEgc3RhY2sgd2lsbCBsb29rIGxpa2UgdGhpczpcbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIEVycm9yXG4gICAgICAgICAgLy8gICAgYXQgXy51dGlsLmN1cnJlbnRTY3JpcHQgKGh0dHA6Ly9sb2NhbGhvc3QvY29tcG9uZW50cy9wcmlzbS1jb3JlLmpzOjExOTo1KVxuICAgICAgICAgIC8vICAgIGF0IEdsb2JhbCBjb2RlIChodHRwOi8vbG9jYWxob3N0L2NvbXBvbmVudHMvcHJpc20tY29yZS5qczo2MDY6MSlcblxuICAgICAgICAgIHZhciBzcmMgPSAoL2F0IFteKFxcclxcbl0qXFwoKC4qKTpbXjpdKzpbXjpdK1xcKSQvaS5leGVjKGVyci5zdGFjaykgfHwgW10pWzFdO1xuICAgICAgICAgIGlmIChzcmMpIHtcbiAgICAgICAgICAgIHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBzY3JpcHRzKSB7XG4gICAgICAgICAgICAgIGlmIChzY3JpcHRzW2ldLnNyYyA9PSBzcmMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2NyaXB0c1tpXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogUmV0dXJucyB3aGV0aGVyIGEgZ2l2ZW4gY2xhc3MgaXMgYWN0aXZlIGZvciBgZWxlbWVudGAuXG4gICAgICAgKlxuICAgICAgICogVGhlIGNsYXNzIGNhbiBiZSBhY3RpdmF0ZWQgaWYgYGVsZW1lbnRgIG9yIG9uZSBvZiBpdHMgYW5jZXN0b3JzIGhhcyB0aGUgZ2l2ZW4gY2xhc3MgYW5kIGl0IGNhbiBiZSBkZWFjdGl2YXRlZFxuICAgICAgICogaWYgYGVsZW1lbnRgIG9yIG9uZSBvZiBpdHMgYW5jZXN0b3JzIGhhcyB0aGUgbmVnYXRlZCB2ZXJzaW9uIG9mIHRoZSBnaXZlbiBjbGFzcy4gVGhlIF9uZWdhdGVkIHZlcnNpb25fIG9mIHRoZVxuICAgICAgICogZ2l2ZW4gY2xhc3MgaXMganVzdCB0aGUgZ2l2ZW4gY2xhc3Mgd2l0aCBhIGBuby1gIHByZWZpeC5cbiAgICAgICAqXG4gICAgICAgKiBXaGV0aGVyIHRoZSBjbGFzcyBpcyBhY3RpdmUgaXMgZGV0ZXJtaW5lZCBieSB0aGUgY2xvc2VzdCBhbmNlc3RvciBvZiBgZWxlbWVudGAgKHdoZXJlIGBlbGVtZW50YCBpdHNlbGYgaXNcbiAgICAgICAqIGNsb3Nlc3QgYW5jZXN0b3IpIHRoYXQgaGFzIHRoZSBnaXZlbiBjbGFzcyBvciB0aGUgbmVnYXRlZCB2ZXJzaW9uIG9mIGl0LiBJZiBuZWl0aGVyIGBlbGVtZW50YCBub3IgYW55IG9mIGl0c1xuICAgICAgICogYW5jZXN0b3JzIGhhdmUgdGhlIGdpdmVuIGNsYXNzIG9yIHRoZSBuZWdhdGVkIHZlcnNpb24gb2YgaXQsIHRoZW4gdGhlIGRlZmF1bHQgYWN0aXZhdGlvbiB3aWxsIGJlIHJldHVybmVkLlxuICAgICAgICpcbiAgICAgICAqIEluIHRoZSBwYXJhZG94aWNhbCBzaXR1YXRpb24gd2hlcmUgdGhlIGNsb3Nlc3QgYW5jZXN0b3IgY29udGFpbnMgX19ib3RoX18gdGhlIGdpdmVuIGNsYXNzIGFuZCB0aGUgbmVnYXRlZFxuICAgICAgICogdmVyc2lvbiBvZiBpdCwgdGhlIGNsYXNzIGlzIGNvbnNpZGVyZWQgYWN0aXZlLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzTmFtZVxuICAgICAgICogQHBhcmFtIHtib29sZWFufSBbZGVmYXVsdEFjdGl2YXRpb249ZmFsc2VdXG4gICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgICAqL1xuICAgICAgaXNBY3RpdmU6IGZ1bmN0aW9uIChlbGVtZW50LCBjbGFzc05hbWUsIGRlZmF1bHRBY3RpdmF0aW9uKSB7XG4gICAgICAgIHZhciBubyA9ICduby0nICsgY2xhc3NOYW1lO1xuICAgICAgICB3aGlsZSAoZWxlbWVudCkge1xuICAgICAgICAgIHZhciBjbGFzc0xpc3QgPSBlbGVtZW50LmNsYXNzTGlzdDtcbiAgICAgICAgICBpZiAoY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2xhc3NMaXN0LmNvbnRhaW5zKG5vKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhIWRlZmF1bHRBY3RpdmF0aW9uO1xuICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogVGhpcyBuYW1lc3BhY2UgY29udGFpbnMgYWxsIGN1cnJlbnRseSBsb2FkZWQgbGFuZ3VhZ2VzIGFuZCB0aGUgc29tZSBoZWxwZXIgZnVuY3Rpb25zIHRvIGNyZWF0ZSBhbmQgbW9kaWZ5IGxhbmd1YWdlcy5cbiAgICAgKlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAbWVtYmVyb2YgUHJpc21cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgbGFuZ3VhZ2VzOiB7XG4gICAgICAvKipcbiAgICAgICAqIFRoZSBncmFtbWFyIGZvciBwbGFpbiwgdW5mb3JtYXR0ZWQgdGV4dC5cbiAgICAgICAqL1xuICAgICAgcGxhaW46IHBsYWluVGV4dEdyYW1tYXIsXG4gICAgICBwbGFpbnRleHQ6IHBsYWluVGV4dEdyYW1tYXIsXG4gICAgICB0ZXh0OiBwbGFpblRleHRHcmFtbWFyLFxuICAgICAgdHh0OiBwbGFpblRleHRHcmFtbWFyLFxuICAgICAgLyoqXG4gICAgICAgKiBDcmVhdGVzIGEgZGVlcCBjb3B5IG9mIHRoZSBsYW5ndWFnZSB3aXRoIHRoZSBnaXZlbiBpZCBhbmQgYXBwZW5kcyB0aGUgZ2l2ZW4gdG9rZW5zLlxuICAgICAgICpcbiAgICAgICAqIElmIGEgdG9rZW4gaW4gYHJlZGVmYCBhbHNvIGFwcGVhcnMgaW4gdGhlIGNvcGllZCBsYW5ndWFnZSwgdGhlbiB0aGUgZXhpc3RpbmcgdG9rZW4gaW4gdGhlIGNvcGllZCBsYW5ndWFnZVxuICAgICAgICogd2lsbCBiZSBvdmVyd3JpdHRlbiBhdCBpdHMgb3JpZ2luYWwgcG9zaXRpb24uXG4gICAgICAgKlxuICAgICAgICogIyMgQmVzdCBwcmFjdGljZXNcbiAgICAgICAqXG4gICAgICAgKiBTaW5jZSB0aGUgcG9zaXRpb24gb2Ygb3ZlcndyaXRpbmcgdG9rZW5zICh0b2tlbiBpbiBgcmVkZWZgIHRoYXQgb3ZlcndyaXRlIHRva2VucyBpbiB0aGUgY29waWVkIGxhbmd1YWdlKVxuICAgICAgICogZG9lc24ndCBtYXR0ZXIsIHRoZXkgY2FuIHRlY2huaWNhbGx5IGJlIGluIGFueSBvcmRlci4gSG93ZXZlciwgdGhpcyBjYW4gYmUgY29uZnVzaW5nIHRvIG90aGVycyB0aGF0IHRyeWluZyB0b1xuICAgICAgICogdW5kZXJzdGFuZCB0aGUgbGFuZ3VhZ2UgZGVmaW5pdGlvbiBiZWNhdXNlLCBub3JtYWxseSwgdGhlIG9yZGVyIG9mIHRva2VucyBtYXR0ZXJzIGluIFByaXNtIGdyYW1tYXJzLlxuICAgICAgICpcbiAgICAgICAqIFRoZXJlZm9yZSwgaXQgaXMgZW5jb3VyYWdlZCB0byBvcmRlciBvdmVyd3JpdGluZyB0b2tlbnMgYWNjb3JkaW5nIHRvIHRoZSBwb3NpdGlvbnMgb2YgdGhlIG92ZXJ3cml0dGVuIHRva2Vucy5cbiAgICAgICAqIEZ1cnRoZXJtb3JlLCBhbGwgbm9uLW92ZXJ3cml0aW5nIHRva2VucyBzaG91bGQgYmUgcGxhY2VkIGFmdGVyIHRoZSBvdmVyd3JpdGluZyBvbmVzLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBUaGUgaWQgb2YgdGhlIGxhbmd1YWdlIHRvIGV4dGVuZC4gVGhpcyBoYXMgdG8gYmUgYSBrZXkgaW4gYFByaXNtLmxhbmd1YWdlc2AuXG4gICAgICAgKiBAcGFyYW0ge0dyYW1tYXJ9IHJlZGVmIFRoZSBuZXcgdG9rZW5zIHRvIGFwcGVuZC5cbiAgICAgICAqIEByZXR1cm5zIHtHcmFtbWFyfSBUaGUgbmV3IGxhbmd1YWdlIGNyZWF0ZWQuXG4gICAgICAgKiBAcHVibGljXG4gICAgICAgKiBAZXhhbXBsZVxuICAgICAgICogUHJpc20ubGFuZ3VhZ2VzWydjc3Mtd2l0aC1jb2xvcnMnXSA9IFByaXNtLmxhbmd1YWdlcy5leHRlbmQoJ2NzcycsIHtcbiAgICAgICAqICAgICAvLyBQcmlzbS5sYW5ndWFnZXMuY3NzIGFscmVhZHkgaGFzIGEgJ2NvbW1lbnQnIHRva2VuLCBzbyB0aGlzIHRva2VuIHdpbGwgb3ZlcndyaXRlIENTUycgJ2NvbW1lbnQnIHRva2VuXG4gICAgICAgKiAgICAgLy8gYXQgaXRzIG9yaWdpbmFsIHBvc2l0aW9uXG4gICAgICAgKiAgICAgJ2NvbW1lbnQnOiB7IC4uLiB9LFxuICAgICAgICogICAgIC8vIENTUyBkb2Vzbid0IGhhdmUgYSAnY29sb3InIHRva2VuLCBzbyB0aGlzIHRva2VuIHdpbGwgYmUgYXBwZW5kZWRcbiAgICAgICAqICAgICAnY29sb3InOiAvXFxiKD86cmVkfGdyZWVufGJsdWUpXFxiL1xuICAgICAgICogfSk7XG4gICAgICAgKi9cbiAgICAgIGV4dGVuZDogZnVuY3Rpb24gKGlkLCByZWRlZikge1xuICAgICAgICB2YXIgbGFuZyA9IF8udXRpbC5jbG9uZShfLmxhbmd1YWdlc1tpZF0pO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gcmVkZWYpIHtcbiAgICAgICAgICBsYW5nW2tleV0gPSByZWRlZltrZXldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsYW5nO1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogSW5zZXJ0cyB0b2tlbnMgX2JlZm9yZV8gYW5vdGhlciB0b2tlbiBpbiBhIGxhbmd1YWdlIGRlZmluaXRpb24gb3IgYW55IG90aGVyIGdyYW1tYXIuXG4gICAgICAgKlxuICAgICAgICogIyMgVXNhZ2VcbiAgICAgICAqXG4gICAgICAgKiBUaGlzIGhlbHBlciBtZXRob2QgbWFrZXMgaXQgZWFzeSB0byBtb2RpZnkgZXhpc3RpbmcgbGFuZ3VhZ2VzLiBGb3IgZXhhbXBsZSwgdGhlIENTUyBsYW5ndWFnZSBkZWZpbml0aW9uXG4gICAgICAgKiBub3Qgb25seSBkZWZpbmVzIENTUyBoaWdobGlnaHRpbmcgZm9yIENTUyBkb2N1bWVudHMsIGJ1dCBhbHNvIG5lZWRzIHRvIGRlZmluZSBoaWdobGlnaHRpbmcgZm9yIENTUyBlbWJlZGRlZFxuICAgICAgICogaW4gSFRNTCB0aHJvdWdoIGA8c3R5bGU+YCBlbGVtZW50cy4gVG8gZG8gdGhpcywgaXQgbmVlZHMgdG8gbW9kaWZ5IGBQcmlzbS5sYW5ndWFnZXMubWFya3VwYCBhbmQgYWRkIHRoZVxuICAgICAgICogYXBwcm9wcmlhdGUgdG9rZW5zLiBIb3dldmVyLCBgUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cGAgaXMgYSByZWd1bGFyIEphdmFTY3JpcHQgb2JqZWN0IGxpdGVyYWwsIHNvIGlmIHlvdSBkb1xuICAgICAgICogdGhpczpcbiAgICAgICAqXG4gICAgICAgKiBgYGBqc1xuICAgICAgICogUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cC5zdHlsZSA9IHtcbiAgICAgICAqICAgICAvLyB0b2tlblxuICAgICAgICogfTtcbiAgICAgICAqIGBgYFxuICAgICAgICpcbiAgICAgICAqIHRoZW4gdGhlIGBzdHlsZWAgdG9rZW4gd2lsbCBiZSBhZGRlZCAoYW5kIHByb2Nlc3NlZCkgYXQgdGhlIGVuZC4gYGluc2VydEJlZm9yZWAgYWxsb3dzIHlvdSB0byBpbnNlcnQgdG9rZW5zXG4gICAgICAgKiBiZWZvcmUgZXhpc3RpbmcgdG9rZW5zLiBGb3IgdGhlIENTUyBleGFtcGxlIGFib3ZlLCB5b3Ugd291bGQgdXNlIGl0IGxpa2UgdGhpczpcbiAgICAgICAqXG4gICAgICAgKiBgYGBqc1xuICAgICAgICogUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnbWFya3VwJywgJ2NkYXRhJywge1xuICAgICAgICogICAgICdzdHlsZSc6IHtcbiAgICAgICAqICAgICAgICAgLy8gdG9rZW5cbiAgICAgICAqICAgICB9XG4gICAgICAgKiB9KTtcbiAgICAgICAqIGBgYFxuICAgICAgICpcbiAgICAgICAqICMjIFNwZWNpYWwgY2FzZXNcbiAgICAgICAqXG4gICAgICAgKiBJZiB0aGUgZ3JhbW1hcnMgb2YgYGluc2lkZWAgYW5kIGBpbnNlcnRgIGhhdmUgdG9rZW5zIHdpdGggdGhlIHNhbWUgbmFtZSwgdGhlIHRva2VucyBpbiBgaW5zaWRlYCdzIGdyYW1tYXJcbiAgICAgICAqIHdpbGwgYmUgaWdub3JlZC5cbiAgICAgICAqXG4gICAgICAgKiBUaGlzIGJlaGF2aW9yIGNhbiBiZSB1c2VkIHRvIGluc2VydCB0b2tlbnMgYWZ0ZXIgYGJlZm9yZWA6XG4gICAgICAgKlxuICAgICAgICogYGBganNcbiAgICAgICAqIFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ21hcmt1cCcsICdjb21tZW50Jywge1xuICAgICAgICogICAgICdjb21tZW50JzogUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cC5jb21tZW50LFxuICAgICAgICogICAgIC8vIHRva2VucyBhZnRlciAnY29tbWVudCdcbiAgICAgICAqIH0pO1xuICAgICAgICogYGBgXG4gICAgICAgKlxuICAgICAgICogIyMgTGltaXRhdGlvbnNcbiAgICAgICAqXG4gICAgICAgKiBUaGUgbWFpbiBwcm9ibGVtIGBpbnNlcnRCZWZvcmVgIGhhcyB0byBzb2x2ZSBpcyBpdGVyYXRpb24gb3JkZXIuIFNpbmNlIEVTMjAxNSwgdGhlIGl0ZXJhdGlvbiBvcmRlciBmb3Igb2JqZWN0XG4gICAgICAgKiBwcm9wZXJ0aWVzIGlzIGd1YXJhbnRlZWQgdG8gYmUgdGhlIGluc2VydGlvbiBvcmRlciAoZXhjZXB0IGZvciBpbnRlZ2VyIGtleXMpIGJ1dCBzb21lIGJyb3dzZXJzIGJlaGF2ZVxuICAgICAgICogZGlmZmVyZW50bHkgd2hlbiBrZXlzIGFyZSBkZWxldGVkIGFuZCByZS1pbnNlcnRlZC4gU28gYGluc2VydEJlZm9yZWAgY2FuJ3QgYmUgaW1wbGVtZW50ZWQgYnkgdGVtcG9yYXJpbHlcbiAgICAgICAqIGRlbGV0aW5nIHByb3BlcnRpZXMgd2hpY2ggaXMgbmVjZXNzYXJ5IHRvIGluc2VydCBhdCBhcmJpdHJhcnkgcG9zaXRpb25zLlxuICAgICAgICpcbiAgICAgICAqIFRvIHNvbHZlIHRoaXMgcHJvYmxlbSwgYGluc2VydEJlZm9yZWAgZG9lc24ndCBhY3R1YWxseSBpbnNlcnQgdGhlIGdpdmVuIHRva2VucyBpbnRvIHRoZSB0YXJnZXQgb2JqZWN0LlxuICAgICAgICogSW5zdGVhZCwgaXQgd2lsbCBjcmVhdGUgYSBuZXcgb2JqZWN0IGFuZCByZXBsYWNlIGFsbCByZWZlcmVuY2VzIHRvIHRoZSB0YXJnZXQgb2JqZWN0IHdpdGggdGhlIG5ldyBvbmUuIFRoaXNcbiAgICAgICAqIGNhbiBiZSBkb25lIHdpdGhvdXQgdGVtcG9yYXJpbHkgZGVsZXRpbmcgcHJvcGVydGllcywgc28gdGhlIGl0ZXJhdGlvbiBvcmRlciBpcyB3ZWxsLWRlZmluZWQuXG4gICAgICAgKlxuICAgICAgICogSG93ZXZlciwgb25seSByZWZlcmVuY2VzIHRoYXQgY2FuIGJlIHJlYWNoZWQgZnJvbSBgUHJpc20ubGFuZ3VhZ2VzYCBvciBgaW5zZXJ0YCB3aWxsIGJlIHJlcGxhY2VkLiBJLmUuIGlmXG4gICAgICAgKiB5b3UgaG9sZCB0aGUgdGFyZ2V0IG9iamVjdCBpbiBhIHZhcmlhYmxlLCB0aGVuIHRoZSB2YWx1ZSBvZiB0aGUgdmFyaWFibGUgd2lsbCBub3QgY2hhbmdlLlxuICAgICAgICpcbiAgICAgICAqIGBgYGpzXG4gICAgICAgKiB2YXIgb2xkTWFya3VwID0gUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cDtcbiAgICAgICAqIHZhciBuZXdNYXJrdXAgPSBQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdtYXJrdXAnLCAnY29tbWVudCcsIHsgLi4uIH0pO1xuICAgICAgICpcbiAgICAgICAqIGFzc2VydChvbGRNYXJrdXAgIT09IFByaXNtLmxhbmd1YWdlcy5tYXJrdXApO1xuICAgICAgICogYXNzZXJ0KG5ld01hcmt1cCA9PT0gUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cCk7XG4gICAgICAgKiBgYGBcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gaW5zaWRlIFRoZSBwcm9wZXJ0eSBvZiBgcm9vdGAgKGUuZy4gYSBsYW5ndWFnZSBpZCBpbiBgUHJpc20ubGFuZ3VhZ2VzYCkgdGhhdCBjb250YWlucyB0aGVcbiAgICAgICAqIG9iamVjdCB0byBiZSBtb2RpZmllZC5cbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBiZWZvcmUgVGhlIGtleSB0byBpbnNlcnQgYmVmb3JlLlxuICAgICAgICogQHBhcmFtIHtHcmFtbWFyfSBpbnNlcnQgQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGtleS12YWx1ZSBwYWlycyB0byBiZSBpbnNlcnRlZC5cbiAgICAgICAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgYW55Pn0gW3Jvb3RdIFRoZSBvYmplY3QgY29udGFpbmluZyBgaW5zaWRlYCwgaS5lLiB0aGUgb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlXG4gICAgICAgKiBvYmplY3QgdG8gYmUgbW9kaWZpZWQuXG4gICAgICAgKlxuICAgICAgICogRGVmYXVsdHMgdG8gYFByaXNtLmxhbmd1YWdlc2AuXG4gICAgICAgKiBAcmV0dXJucyB7R3JhbW1hcn0gVGhlIG5ldyBncmFtbWFyIG9iamVjdC5cbiAgICAgICAqIEBwdWJsaWNcbiAgICAgICAqL1xuICAgICAgaW5zZXJ0QmVmb3JlOiBmdW5jdGlvbiAoaW5zaWRlLCBiZWZvcmUsIGluc2VydCwgcm9vdCkge1xuICAgICAgICByb290ID0gcm9vdCB8fCAoIC8qKiBAdHlwZSB7YW55fSAqL18ubGFuZ3VhZ2VzKTtcbiAgICAgICAgdmFyIGdyYW1tYXIgPSByb290W2luc2lkZV07XG4gICAgICAgIC8qKiBAdHlwZSB7R3JhbW1hcn0gKi9cbiAgICAgICAgdmFyIHJldCA9IHt9O1xuICAgICAgICBmb3IgKHZhciB0b2tlbiBpbiBncmFtbWFyKSB7XG4gICAgICAgICAgaWYgKGdyYW1tYXIuaGFzT3duUHJvcGVydHkodG9rZW4pKSB7XG4gICAgICAgICAgICBpZiAodG9rZW4gPT0gYmVmb3JlKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIG5ld1Rva2VuIGluIGluc2VydCkge1xuICAgICAgICAgICAgICAgIGlmIChpbnNlcnQuaGFzT3duUHJvcGVydHkobmV3VG9rZW4pKSB7XG4gICAgICAgICAgICAgICAgICByZXRbbmV3VG9rZW5dID0gaW5zZXJ0W25ld1Rva2VuXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRG8gbm90IGluc2VydCB0b2tlbiB3aGljaCBhbHNvIG9jY3VyIGluIGluc2VydC4gU2VlICMxNTI1XG4gICAgICAgICAgICBpZiAoIWluc2VydC5oYXNPd25Qcm9wZXJ0eSh0b2tlbikpIHtcbiAgICAgICAgICAgICAgcmV0W3Rva2VuXSA9IGdyYW1tYXJbdG9rZW5dO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgb2xkID0gcm9vdFtpbnNpZGVdO1xuICAgICAgICByb290W2luc2lkZV0gPSByZXQ7XG5cbiAgICAgICAgLy8gVXBkYXRlIHJlZmVyZW5jZXMgaW4gb3RoZXIgbGFuZ3VhZ2UgZGVmaW5pdGlvbnNcbiAgICAgICAgXy5sYW5ndWFnZXMuREZTKF8ubGFuZ3VhZ2VzLCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICAgIGlmICh2YWx1ZSA9PT0gb2xkICYmIGtleSAhPSBpbnNpZGUpIHtcbiAgICAgICAgICAgIHRoaXNba2V5XSA9IHJldDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgfSxcbiAgICAgIC8vIFRyYXZlcnNlIGEgbGFuZ3VhZ2UgZGVmaW5pdGlvbiB3aXRoIERlcHRoIEZpcnN0IFNlYXJjaFxuICAgICAgREZTOiBmdW5jdGlvbiBERlMobywgY2FsbGJhY2ssIHR5cGUsIHZpc2l0ZWQpIHtcbiAgICAgICAgdmlzaXRlZCA9IHZpc2l0ZWQgfHwge307XG4gICAgICAgIHZhciBvYmpJZCA9IF8udXRpbC5vYmpJZDtcbiAgICAgICAgZm9yICh2YXIgaSBpbiBvKSB7XG4gICAgICAgICAgaWYgKG8uaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwobywgaSwgb1tpXSwgdHlwZSB8fCBpKTtcbiAgICAgICAgICAgIHZhciBwcm9wZXJ0eSA9IG9baV07XG4gICAgICAgICAgICB2YXIgcHJvcGVydHlUeXBlID0gXy51dGlsLnR5cGUocHJvcGVydHkpO1xuICAgICAgICAgICAgaWYgKHByb3BlcnR5VHlwZSA9PT0gJ09iamVjdCcgJiYgIXZpc2l0ZWRbb2JqSWQocHJvcGVydHkpXSkge1xuICAgICAgICAgICAgICB2aXNpdGVkW29iaklkKHByb3BlcnR5KV0gPSB0cnVlO1xuICAgICAgICAgICAgICBERlMocHJvcGVydHksIGNhbGxiYWNrLCBudWxsLCB2aXNpdGVkKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlUeXBlID09PSAnQXJyYXknICYmICF2aXNpdGVkW29iaklkKHByb3BlcnR5KV0pIHtcbiAgICAgICAgICAgICAgdmlzaXRlZFtvYmpJZChwcm9wZXJ0eSldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgREZTKHByb3BlcnR5LCBjYWxsYmFjaywgaSwgdmlzaXRlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBwbHVnaW5zOiB7fSxcbiAgICAvKipcbiAgICAgKiBUaGlzIGlzIHRoZSBtb3N0IGhpZ2gtbGV2ZWwgZnVuY3Rpb24gaW4gUHJpc23igJlzIEFQSS5cbiAgICAgKiBJdCBmZXRjaGVzIGFsbCB0aGUgZWxlbWVudHMgdGhhdCBoYXZlIGEgYC5sYW5ndWFnZS14eHh4YCBjbGFzcyBhbmQgdGhlbiBjYWxscyB7QGxpbmsgUHJpc20uaGlnaGxpZ2h0RWxlbWVudH0gb25cbiAgICAgKiBlYWNoIG9uZSBvZiB0aGVtLlxuICAgICAqXG4gICAgICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIGBQcmlzbS5oaWdobGlnaHRBbGxVbmRlcihkb2N1bWVudCwgYXN5bmMsIGNhbGxiYWNrKWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFthc3luYz1mYWxzZV0gU2FtZSBhcyBpbiB7QGxpbmsgUHJpc20uaGlnaGxpZ2h0QWxsVW5kZXJ9LlxuICAgICAqIEBwYXJhbSB7SGlnaGxpZ2h0Q2FsbGJhY2t9IFtjYWxsYmFja10gU2FtZSBhcyBpbiB7QGxpbmsgUHJpc20uaGlnaGxpZ2h0QWxsVW5kZXJ9LlxuICAgICAqIEBtZW1iZXJvZiBQcmlzbVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBoaWdobGlnaHRBbGw6IGZ1bmN0aW9uIChhc3luYywgY2FsbGJhY2spIHtcbiAgICAgIF8uaGlnaGxpZ2h0QWxsVW5kZXIoZG9jdW1lbnQsIGFzeW5jLCBjYWxsYmFjayk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBGZXRjaGVzIGFsbCB0aGUgZGVzY2VuZGFudHMgb2YgYGNvbnRhaW5lcmAgdGhhdCBoYXZlIGEgYC5sYW5ndWFnZS14eHh4YCBjbGFzcyBhbmQgdGhlbiBjYWxsc1xuICAgICAqIHtAbGluayBQcmlzbS5oaWdobGlnaHRFbGVtZW50fSBvbiBlYWNoIG9uZSBvZiB0aGVtLlxuICAgICAqXG4gICAgICogVGhlIGZvbGxvd2luZyBob29rcyB3aWxsIGJlIHJ1bjpcbiAgICAgKiAxLiBgYmVmb3JlLWhpZ2hsaWdodGFsbGBcbiAgICAgKiAyLiBgYmVmb3JlLWFsbC1lbGVtZW50cy1oaWdobGlnaHRgXG4gICAgICogMy4gQWxsIGhvb2tzIG9mIHtAbGluayBQcmlzbS5oaWdobGlnaHRFbGVtZW50fSBmb3IgZWFjaCBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQYXJlbnROb2RlfSBjb250YWluZXIgVGhlIHJvb3QgZWxlbWVudCwgd2hvc2UgZGVzY2VuZGFudHMgdGhhdCBoYXZlIGEgYC5sYW5ndWFnZS14eHh4YCBjbGFzcyB3aWxsIGJlIGhpZ2hsaWdodGVkLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2FzeW5jPWZhbHNlXSBXaGV0aGVyIGVhY2ggZWxlbWVudCBpcyB0byBiZSBoaWdobGlnaHRlZCBhc3luY2hyb25vdXNseSB1c2luZyBXZWIgV29ya2Vycy5cbiAgICAgKiBAcGFyYW0ge0hpZ2hsaWdodENhbGxiYWNrfSBbY2FsbGJhY2tdIEFuIG9wdGlvbmFsIGNhbGxiYWNrIHRvIGJlIGludm9rZWQgb24gZWFjaCBlbGVtZW50IGFmdGVyIGl0cyBoaWdobGlnaHRpbmcgaXMgZG9uZS5cbiAgICAgKiBAbWVtYmVyb2YgUHJpc21cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgaGlnaGxpZ2h0QWxsVW5kZXI6IGZ1bmN0aW9uIChjb250YWluZXIsIGFzeW5jLCBjYWxsYmFjaykge1xuICAgICAgdmFyIGVudiA9IHtcbiAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrLFxuICAgICAgICBjb250YWluZXI6IGNvbnRhaW5lcixcbiAgICAgICAgc2VsZWN0b3I6ICdjb2RlW2NsYXNzKj1cImxhbmd1YWdlLVwiXSwgW2NsYXNzKj1cImxhbmd1YWdlLVwiXSBjb2RlLCBjb2RlW2NsYXNzKj1cImxhbmctXCJdLCBbY2xhc3MqPVwibGFuZy1cIl0gY29kZSdcbiAgICAgIH07XG4gICAgICBfLmhvb2tzLnJ1bignYmVmb3JlLWhpZ2hsaWdodGFsbCcsIGVudik7XG4gICAgICBlbnYuZWxlbWVudHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoZW52LmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKGVudi5zZWxlY3RvcikpO1xuICAgICAgXy5ob29rcy5ydW4oJ2JlZm9yZS1hbGwtZWxlbWVudHMtaGlnaGxpZ2h0JywgZW52KTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBlbGVtZW50OyBlbGVtZW50ID0gZW52LmVsZW1lbnRzW2krK107KSB7XG4gICAgICAgIF8uaGlnaGxpZ2h0RWxlbWVudChlbGVtZW50LCBhc3luYyA9PT0gdHJ1ZSwgZW52LmNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEhpZ2hsaWdodHMgdGhlIGNvZGUgaW5zaWRlIGEgc2luZ2xlIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBUaGUgZm9sbG93aW5nIGhvb2tzIHdpbGwgYmUgcnVuOlxuICAgICAqIDEuIGBiZWZvcmUtc2FuaXR5LWNoZWNrYFxuICAgICAqIDIuIGBiZWZvcmUtaGlnaGxpZ2h0YFxuICAgICAqIDMuIEFsbCBob29rcyBvZiB7QGxpbmsgUHJpc20uaGlnaGxpZ2h0fS4gVGhlc2UgaG9va3Mgd2lsbCBiZSBydW4gYnkgYW4gYXN5bmNocm9ub3VzIHdvcmtlciBpZiBgYXN5bmNgIGlzIGB0cnVlYC5cbiAgICAgKiA0LiBgYmVmb3JlLWluc2VydGBcbiAgICAgKiA1LiBgYWZ0ZXItaGlnaGxpZ2h0YFxuICAgICAqIDYuIGBjb21wbGV0ZWBcbiAgICAgKlxuICAgICAqIFNvbWUgdGhlIGFib3ZlIGhvb2tzIHdpbGwgYmUgc2tpcHBlZCBpZiB0aGUgZWxlbWVudCBkb2Vzbid0IGNvbnRhaW4gYW55IHRleHQgb3IgdGhlcmUgaXMgbm8gZ3JhbW1hciBsb2FkZWQgZm9yXG4gICAgICogdGhlIGVsZW1lbnQncyBsYW5ndWFnZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCBUaGUgZWxlbWVudCBjb250YWluaW5nIHRoZSBjb2RlLlxuICAgICAqIEl0IG11c3QgaGF2ZSBhIGNsYXNzIG9mIGBsYW5ndWFnZS14eHh4YCB0byBiZSBwcm9jZXNzZWQsIHdoZXJlIGB4eHh4YCBpcyBhIHZhbGlkIGxhbmd1YWdlIGlkZW50aWZpZXIuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbYXN5bmM9ZmFsc2VdIFdoZXRoZXIgdGhlIGVsZW1lbnQgaXMgdG8gYmUgaGlnaGxpZ2h0ZWQgYXN5bmNocm9ub3VzbHkgdXNpbmcgV2ViIFdvcmtlcnNcbiAgICAgKiB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIGFuZCBhdm9pZCBibG9ja2luZyB0aGUgVUkgd2hlbiBoaWdobGlnaHRpbmcgdmVyeSBsYXJnZSBjaHVua3Mgb2YgY29kZS4gVGhpcyBvcHRpb24gaXNcbiAgICAgKiBbZGlzYWJsZWQgYnkgZGVmYXVsdF0oaHR0cHM6Ly9wcmlzbWpzLmNvbS9mYXEuaHRtbCN3aHktaXMtYXN5bmNocm9ub3VzLWhpZ2hsaWdodGluZy1kaXNhYmxlZC1ieS1kZWZhdWx0KS5cbiAgICAgKlxuICAgICAqIE5vdGU6IEFsbCBsYW5ndWFnZSBkZWZpbml0aW9ucyByZXF1aXJlZCB0byBoaWdobGlnaHQgdGhlIGNvZGUgbXVzdCBiZSBpbmNsdWRlZCBpbiB0aGUgbWFpbiBgcHJpc20uanNgIGZpbGUgZm9yXG4gICAgICogYXN5bmNocm9ub3VzIGhpZ2hsaWdodGluZyB0byB3b3JrLiBZb3UgY2FuIGJ1aWxkIHlvdXIgb3duIGJ1bmRsZSBvbiB0aGVcbiAgICAgKiBbRG93bmxvYWQgcGFnZV0oaHR0cHM6Ly9wcmlzbWpzLmNvbS9kb3dubG9hZC5odG1sKS5cbiAgICAgKiBAcGFyYW0ge0hpZ2hsaWdodENhbGxiYWNrfSBbY2FsbGJhY2tdIEFuIG9wdGlvbmFsIGNhbGxiYWNrIHRvIGJlIGludm9rZWQgYWZ0ZXIgdGhlIGhpZ2hsaWdodGluZyBpcyBkb25lLlxuICAgICAqIE1vc3RseSB1c2VmdWwgd2hlbiBgYXN5bmNgIGlzIGB0cnVlYCwgc2luY2UgaW4gdGhhdCBjYXNlLCB0aGUgaGlnaGxpZ2h0aW5nIGlzIGRvbmUgYXN5bmNocm9ub3VzbHkuXG4gICAgICogQG1lbWJlcm9mIFByaXNtXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGhpZ2hsaWdodEVsZW1lbnQ6IGZ1bmN0aW9uIChlbGVtZW50LCBhc3luYywgY2FsbGJhY2spIHtcbiAgICAgIC8vIEZpbmQgbGFuZ3VhZ2VcbiAgICAgIHZhciBsYW5ndWFnZSA9IF8udXRpbC5nZXRMYW5ndWFnZShlbGVtZW50KTtcbiAgICAgIHZhciBncmFtbWFyID0gXy5sYW5ndWFnZXNbbGFuZ3VhZ2VdO1xuXG4gICAgICAvLyBTZXQgbGFuZ3VhZ2Ugb24gdGhlIGVsZW1lbnQsIGlmIG5vdCBwcmVzZW50XG4gICAgICBfLnV0aWwuc2V0TGFuZ3VhZ2UoZWxlbWVudCwgbGFuZ3VhZ2UpO1xuXG4gICAgICAvLyBTZXQgbGFuZ3VhZ2Ugb24gdGhlIHBhcmVudCwgZm9yIHN0eWxpbmdcbiAgICAgIHZhciBwYXJlbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICBpZiAocGFyZW50ICYmIHBhcmVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAncHJlJykge1xuICAgICAgICBfLnV0aWwuc2V0TGFuZ3VhZ2UocGFyZW50LCBsYW5ndWFnZSk7XG4gICAgICB9XG4gICAgICB2YXIgY29kZSA9IGVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgICB2YXIgZW52ID0ge1xuICAgICAgICBlbGVtZW50OiBlbGVtZW50LFxuICAgICAgICBsYW5ndWFnZTogbGFuZ3VhZ2UsXG4gICAgICAgIGdyYW1tYXI6IGdyYW1tYXIsXG4gICAgICAgIGNvZGU6IGNvZGVcbiAgICAgIH07XG4gICAgICBmdW5jdGlvbiBpbnNlcnRIaWdobGlnaHRlZENvZGUoaGlnaGxpZ2h0ZWRDb2RlKSB7XG4gICAgICAgIGVudi5oaWdobGlnaHRlZENvZGUgPSBoaWdobGlnaHRlZENvZGU7XG4gICAgICAgIF8uaG9va3MucnVuKCdiZWZvcmUtaW5zZXJ0JywgZW52KTtcbiAgICAgICAgZW52LmVsZW1lbnQuaW5uZXJIVE1MID0gZW52LmhpZ2hsaWdodGVkQ29kZTtcbiAgICAgICAgXy5ob29rcy5ydW4oJ2FmdGVyLWhpZ2hsaWdodCcsIGVudik7XG4gICAgICAgIF8uaG9va3MucnVuKCdjb21wbGV0ZScsIGVudik7XG4gICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrLmNhbGwoZW52LmVsZW1lbnQpO1xuICAgICAgfVxuICAgICAgXy5ob29rcy5ydW4oJ2JlZm9yZS1zYW5pdHktY2hlY2snLCBlbnYpO1xuXG4gICAgICAvLyBwbHVnaW5zIG1heSBjaGFuZ2UvYWRkIHRoZSBwYXJlbnQvZWxlbWVudFxuICAgICAgcGFyZW50ID0gZW52LmVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgIGlmIChwYXJlbnQgJiYgcGFyZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdwcmUnICYmICFwYXJlbnQuaGFzQXR0cmlidXRlKCd0YWJpbmRleCcpKSB7XG4gICAgICAgIHBhcmVudC5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcbiAgICAgIH1cbiAgICAgIGlmICghZW52LmNvZGUpIHtcbiAgICAgICAgXy5ob29rcy5ydW4oJ2NvbXBsZXRlJywgZW52KTtcbiAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2suY2FsbChlbnYuZWxlbWVudCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIF8uaG9va3MucnVuKCdiZWZvcmUtaGlnaGxpZ2h0JywgZW52KTtcbiAgICAgIGlmICghZW52LmdyYW1tYXIpIHtcbiAgICAgICAgaW5zZXJ0SGlnaGxpZ2h0ZWRDb2RlKF8udXRpbC5lbmNvZGUoZW52LmNvZGUpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKGFzeW5jICYmIF9zZWxmLldvcmtlcikge1xuICAgICAgICB2YXIgd29ya2VyID0gbmV3IFdvcmtlcihfLmZpbGVuYW1lKTtcbiAgICAgICAgd29ya2VyLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICBpbnNlcnRIaWdobGlnaHRlZENvZGUoZXZ0LmRhdGEpO1xuICAgICAgICB9O1xuICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGxhbmd1YWdlOiBlbnYubGFuZ3VhZ2UsXG4gICAgICAgICAgY29kZTogZW52LmNvZGUsXG4gICAgICAgICAgaW1tZWRpYXRlQ2xvc2U6IHRydWVcbiAgICAgICAgfSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5zZXJ0SGlnaGxpZ2h0ZWRDb2RlKF8uaGlnaGxpZ2h0KGVudi5jb2RlLCBlbnYuZ3JhbW1hciwgZW52Lmxhbmd1YWdlKSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBMb3ctbGV2ZWwgZnVuY3Rpb24sIG9ubHkgdXNlIGlmIHlvdSBrbm93IHdoYXQgeW914oCZcmUgZG9pbmcuIEl0IGFjY2VwdHMgYSBzdHJpbmcgb2YgdGV4dCBhcyBpbnB1dFxuICAgICAqIGFuZCB0aGUgbGFuZ3VhZ2UgZGVmaW5pdGlvbnMgdG8gdXNlLCBhbmQgcmV0dXJucyBhIHN0cmluZyB3aXRoIHRoZSBIVE1MIHByb2R1Y2VkLlxuICAgICAqXG4gICAgICogVGhlIGZvbGxvd2luZyBob29rcyB3aWxsIGJlIHJ1bjpcbiAgICAgKiAxLiBgYmVmb3JlLXRva2VuaXplYFxuICAgICAqIDIuIGBhZnRlci10b2tlbml6ZWBcbiAgICAgKiAzLiBgd3JhcGA6IE9uIGVhY2gge0BsaW5rIFRva2VufS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IEEgc3RyaW5nIHdpdGggdGhlIGNvZGUgdG8gYmUgaGlnaGxpZ2h0ZWQuXG4gICAgICogQHBhcmFtIHtHcmFtbWFyfSBncmFtbWFyIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSB0b2tlbnMgdG8gdXNlLlxuICAgICAqXG4gICAgICogVXN1YWxseSBhIGxhbmd1YWdlIGRlZmluaXRpb24gbGlrZSBgUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cGAuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxhbmd1YWdlIFRoZSBuYW1lIG9mIHRoZSBsYW5ndWFnZSBkZWZpbml0aW9uIHBhc3NlZCB0byBgZ3JhbW1hcmAuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGhpZ2hsaWdodGVkIEhUTUwuXG4gICAgICogQG1lbWJlcm9mIFByaXNtXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBleGFtcGxlXG4gICAgICogUHJpc20uaGlnaGxpZ2h0KCd2YXIgZm9vID0gdHJ1ZTsnLCBQcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdCwgJ2phdmFzY3JpcHQnKTtcbiAgICAgKi9cbiAgICBoaWdobGlnaHQ6IGZ1bmN0aW9uICh0ZXh0LCBncmFtbWFyLCBsYW5ndWFnZSkge1xuICAgICAgdmFyIGVudiA9IHtcbiAgICAgICAgY29kZTogdGV4dCxcbiAgICAgICAgZ3JhbW1hcjogZ3JhbW1hcixcbiAgICAgICAgbGFuZ3VhZ2U6IGxhbmd1YWdlXG4gICAgICB9O1xuICAgICAgXy5ob29rcy5ydW4oJ2JlZm9yZS10b2tlbml6ZScsIGVudik7XG4gICAgICBpZiAoIWVudi5ncmFtbWFyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGxhbmd1YWdlIFwiJyArIGVudi5sYW5ndWFnZSArICdcIiBoYXMgbm8gZ3JhbW1hci4nKTtcbiAgICAgIH1cbiAgICAgIGVudi50b2tlbnMgPSBfLnRva2VuaXplKGVudi5jb2RlLCBlbnYuZ3JhbW1hcik7XG4gICAgICBfLmhvb2tzLnJ1bignYWZ0ZXItdG9rZW5pemUnLCBlbnYpO1xuICAgICAgcmV0dXJuIFRva2VuLnN0cmluZ2lmeShfLnV0aWwuZW5jb2RlKGVudi50b2tlbnMpLCBlbnYubGFuZ3VhZ2UpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogVGhpcyBpcyB0aGUgaGVhcnQgb2YgUHJpc20sIGFuZCB0aGUgbW9zdCBsb3ctbGV2ZWwgZnVuY3Rpb24geW91IGNhbiB1c2UuIEl0IGFjY2VwdHMgYSBzdHJpbmcgb2YgdGV4dCBhcyBpbnB1dFxuICAgICAqIGFuZCB0aGUgbGFuZ3VhZ2UgZGVmaW5pdGlvbnMgdG8gdXNlLCBhbmQgcmV0dXJucyBhbiBhcnJheSB3aXRoIHRoZSB0b2tlbml6ZWQgY29kZS5cbiAgICAgKlxuICAgICAqIFdoZW4gdGhlIGxhbmd1YWdlIGRlZmluaXRpb24gaW5jbHVkZXMgbmVzdGVkIHRva2VucywgdGhlIGZ1bmN0aW9uIGlzIGNhbGxlZCByZWN1cnNpdmVseSBvbiBlYWNoIG9mIHRoZXNlIHRva2Vucy5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGNvdWxkIGJlIHVzZWZ1bCBpbiBvdGhlciBjb250ZXh0cyBhcyB3ZWxsLCBhcyBhIHZlcnkgY3J1ZGUgcGFyc2VyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgQSBzdHJpbmcgd2l0aCB0aGUgY29kZSB0byBiZSBoaWdobGlnaHRlZC5cbiAgICAgKiBAcGFyYW0ge0dyYW1tYXJ9IGdyYW1tYXIgQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHRva2VucyB0byB1c2UuXG4gICAgICpcbiAgICAgKiBVc3VhbGx5IGEgbGFuZ3VhZ2UgZGVmaW5pdGlvbiBsaWtlIGBQcmlzbS5sYW5ndWFnZXMubWFya3VwYC5cbiAgICAgKiBAcmV0dXJucyB7VG9rZW5TdHJlYW19IEFuIGFycmF5IG9mIHN0cmluZ3MgYW5kIHRva2VucywgYSB0b2tlbiBzdHJlYW0uXG4gICAgICogQG1lbWJlcm9mIFByaXNtXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBleGFtcGxlXG4gICAgICogbGV0IGNvZGUgPSBgdmFyIGZvbyA9IDA7YDtcbiAgICAgKiBsZXQgdG9rZW5zID0gUHJpc20udG9rZW5pemUoY29kZSwgUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHQpO1xuICAgICAqIHRva2Vucy5mb3JFYWNoKHRva2VuID0+IHtcbiAgICAgKiAgICAgaWYgKHRva2VuIGluc3RhbmNlb2YgUHJpc20uVG9rZW4gJiYgdG9rZW4udHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgKiAgICAgICAgIGNvbnNvbGUubG9nKGBGb3VuZCBudW1lcmljIGxpdGVyYWw6ICR7dG9rZW4uY29udGVudH1gKTtcbiAgICAgKiAgICAgfVxuICAgICAqIH0pO1xuICAgICAqL1xuICAgIHRva2VuaXplOiBmdW5jdGlvbiAodGV4dCwgZ3JhbW1hcikge1xuICAgICAgdmFyIHJlc3QgPSBncmFtbWFyLnJlc3Q7XG4gICAgICBpZiAocmVzdCkge1xuICAgICAgICBmb3IgKHZhciB0b2tlbiBpbiByZXN0KSB7XG4gICAgICAgICAgZ3JhbW1hclt0b2tlbl0gPSByZXN0W3Rva2VuXTtcbiAgICAgICAgfVxuICAgICAgICBkZWxldGUgZ3JhbW1hci5yZXN0O1xuICAgICAgfVxuICAgICAgdmFyIHRva2VuTGlzdCA9IG5ldyBMaW5rZWRMaXN0KCk7XG4gICAgICBhZGRBZnRlcih0b2tlbkxpc3QsIHRva2VuTGlzdC5oZWFkLCB0ZXh0KTtcbiAgICAgIG1hdGNoR3JhbW1hcih0ZXh0LCB0b2tlbkxpc3QsIGdyYW1tYXIsIHRva2VuTGlzdC5oZWFkLCAwKTtcbiAgICAgIHJldHVybiB0b0FycmF5KHRva2VuTGlzdCk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQG1lbWJlcm9mIFByaXNtXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGhvb2tzOiB7XG4gICAgICBhbGw6IHt9LFxuICAgICAgLyoqXG4gICAgICAgKiBBZGRzIHRoZSBnaXZlbiBjYWxsYmFjayB0byB0aGUgbGlzdCBvZiBjYWxsYmFja3MgZm9yIHRoZSBnaXZlbiBob29rLlxuICAgICAgICpcbiAgICAgICAqIFRoZSBjYWxsYmFjayB3aWxsIGJlIGludm9rZWQgd2hlbiB0aGUgaG9vayBpdCBpcyByZWdpc3RlcmVkIGZvciBpcyBydW4uXG4gICAgICAgKiBIb29rcyBhcmUgdXN1YWxseSBkaXJlY3RseSBydW4gYnkgYSBoaWdobGlnaHQgZnVuY3Rpb24gYnV0IHlvdSBjYW4gYWxzbyBydW4gaG9va3MgeW91cnNlbGYuXG4gICAgICAgKlxuICAgICAgICogT25lIGNhbGxiYWNrIGZ1bmN0aW9uIGNhbiBiZSByZWdpc3RlcmVkIHRvIG11bHRpcGxlIGhvb2tzIGFuZCB0aGUgc2FtZSBob29rIG11bHRpcGxlIHRpbWVzLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBob29rLlxuICAgICAgICogQHBhcmFtIHtIb29rQ2FsbGJhY2t9IGNhbGxiYWNrIFRoZSBjYWxsYmFjayBmdW5jdGlvbiB3aGljaCBpcyBnaXZlbiBlbnZpcm9ubWVudCB2YXJpYWJsZXMuXG4gICAgICAgKiBAcHVibGljXG4gICAgICAgKi9cbiAgICAgIGFkZDogZnVuY3Rpb24gKG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBob29rcyA9IF8uaG9va3MuYWxsO1xuICAgICAgICBob29rc1tuYW1lXSA9IGhvb2tzW25hbWVdIHx8IFtdO1xuICAgICAgICBob29rc1tuYW1lXS5wdXNoKGNhbGxiYWNrKTtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIFJ1bnMgYSBob29rIGludm9raW5nIGFsbCByZWdpc3RlcmVkIGNhbGxiYWNrcyB3aXRoIHRoZSBnaXZlbiBlbnZpcm9ubWVudCB2YXJpYWJsZXMuXG4gICAgICAgKlxuICAgICAgICogQ2FsbGJhY2tzIHdpbGwgYmUgaW52b2tlZCBzeW5jaHJvbm91c2x5IGFuZCBpbiB0aGUgb3JkZXIgaW4gd2hpY2ggdGhleSB3ZXJlIHJlZ2lzdGVyZWQuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGhvb2suXG4gICAgICAgKiBAcGFyYW0ge09iamVjdDxzdHJpbmcsIGFueT59IGVudiBUaGUgZW52aXJvbm1lbnQgdmFyaWFibGVzIG9mIHRoZSBob29rIHBhc3NlZCB0byBhbGwgY2FsbGJhY2tzIHJlZ2lzdGVyZWQuXG4gICAgICAgKiBAcHVibGljXG4gICAgICAgKi9cbiAgICAgIHJ1bjogZnVuY3Rpb24gKG5hbWUsIGVudikge1xuICAgICAgICB2YXIgY2FsbGJhY2tzID0gXy5ob29rcy5hbGxbbmFtZV07XG4gICAgICAgIGlmICghY2FsbGJhY2tzIHx8ICFjYWxsYmFja3MubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBjYWxsYmFjazsgY2FsbGJhY2sgPSBjYWxsYmFja3NbaSsrXTspIHtcbiAgICAgICAgICBjYWxsYmFjayhlbnYpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBUb2tlbjogVG9rZW5cbiAgfTtcbiAgX3NlbGYuUHJpc20gPSBfO1xuXG4gIC8vIFR5cGVzY3JpcHQgbm90ZTpcbiAgLy8gVGhlIGZvbGxvd2luZyBjYW4gYmUgdXNlZCB0byBpbXBvcnQgdGhlIFRva2VuIHR5cGUgaW4gSlNEb2M6XG4gIC8vXG4gIC8vICAgQHR5cGVkZWYge0luc3RhbmNlVHlwZTxpbXBvcnQoXCIuL3ByaXNtLWNvcmVcIilbXCJUb2tlblwiXT59IFRva2VuXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgdG9rZW4uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFNlZSB7QGxpbmsgVG9rZW4jdHlwZSB0eXBlfVxuICAgKiBAcGFyYW0ge3N0cmluZyB8IFRva2VuU3RyZWFtfSBjb250ZW50IFNlZSB7QGxpbmsgVG9rZW4jY29udGVudCBjb250ZW50fVxuICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gW2FsaWFzXSBUaGUgYWxpYXMoZXMpIG9mIHRoZSB0b2tlbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFttYXRjaGVkU3RyPVwiXCJdIEEgY29weSBvZiB0aGUgZnVsbCBzdHJpbmcgdGhpcyB0b2tlbiB3YXMgY3JlYXRlZCBmcm9tLlxuICAgKiBAY2xhc3NcbiAgICogQGdsb2JhbFxuICAgKiBAcHVibGljXG4gICAqL1xuICBmdW5jdGlvbiBUb2tlbih0eXBlLCBjb250ZW50LCBhbGlhcywgbWF0Y2hlZFN0cikge1xuICAgIC8qKlxuICAgICAqIFRoZSB0eXBlIG9mIHRoZSB0b2tlbi5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgdXN1YWxseSB0aGUga2V5IG9mIGEgcGF0dGVybiBpbiBhIHtAbGluayBHcmFtbWFyfS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICogQHNlZSBHcmFtbWFyVG9rZW5cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAvKipcbiAgICAgKiBUaGUgc3RyaW5ncyBvciB0b2tlbnMgY29udGFpbmVkIGJ5IHRoaXMgdG9rZW4uXG4gICAgICpcbiAgICAgKiBUaGlzIHdpbGwgYmUgYSB0b2tlbiBzdHJlYW0gaWYgdGhlIHBhdHRlcm4gbWF0Y2hlZCBhbHNvIGRlZmluZWQgYW4gYGluc2lkZWAgZ3JhbW1hci5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmcgfCBUb2tlblN0cmVhbX1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcbiAgICAvKipcbiAgICAgKiBUaGUgYWxpYXMoZXMpIG9mIHRoZSB0b2tlbi5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmd8c3RyaW5nW119XG4gICAgICogQHNlZSBHcmFtbWFyVG9rZW5cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgdGhpcy5hbGlhcyA9IGFsaWFzO1xuICAgIC8vIENvcHkgb2YgdGhlIGZ1bGwgc3RyaW5nIHRoaXMgdG9rZW4gd2FzIGNyZWF0ZWQgZnJvbVxuICAgIHRoaXMubGVuZ3RoID0gKG1hdGNoZWRTdHIgfHwgJycpLmxlbmd0aCB8IDA7XG4gIH1cblxuICAvKipcbiAgICogQSB0b2tlbiBzdHJlYW0gaXMgYW4gYXJyYXkgb2Ygc3RyaW5ncyBhbmQge0BsaW5rIFRva2VuIFRva2VufSBvYmplY3RzLlxuICAgKlxuICAgKiBUb2tlbiBzdHJlYW1zIGhhdmUgdG8gZnVsZmlsbCBhIGZldyBwcm9wZXJ0aWVzIHRoYXQgYXJlIGFzc3VtZWQgYnkgbW9zdCBmdW5jdGlvbnMgKG1vc3RseSBpbnRlcm5hbCBvbmVzKSB0aGF0IHByb2Nlc3NcbiAgICogdGhlbS5cbiAgICpcbiAgICogMS4gTm8gYWRqYWNlbnQgc3RyaW5ncy5cbiAgICogMi4gTm8gZW1wdHkgc3RyaW5ncy5cbiAgICpcbiAgICogICAgVGhlIG9ubHkgZXhjZXB0aW9uIGhlcmUgaXMgdGhlIHRva2VuIHN0cmVhbSB0aGF0IG9ubHkgY29udGFpbnMgdGhlIGVtcHR5IHN0cmluZyBhbmQgbm90aGluZyBlbHNlLlxuICAgKlxuICAgKiBAdHlwZWRlZiB7QXJyYXk8c3RyaW5nIHwgVG9rZW4+fSBUb2tlblN0cmVhbVxuICAgKiBAZ2xvYmFsXG4gICAqIEBwdWJsaWNcbiAgICovXG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIHRoZSBnaXZlbiB0b2tlbiBvciB0b2tlbiBzdHJlYW0gdG8gYW4gSFRNTCByZXByZXNlbnRhdGlvbi5cbiAgICpcbiAgICogVGhlIGZvbGxvd2luZyBob29rcyB3aWxsIGJlIHJ1bjpcbiAgICogMS4gYHdyYXBgOiBPbiBlYWNoIHtAbGluayBUb2tlbn0uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgVG9rZW4gfCBUb2tlblN0cmVhbX0gbyBUaGUgdG9rZW4gb3IgdG9rZW4gc3RyZWFtIHRvIGJlIGNvbnZlcnRlZC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGxhbmd1YWdlIFRoZSBuYW1lIG9mIGN1cnJlbnQgbGFuZ3VhZ2UuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBIVE1MIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB0b2tlbiBvciB0b2tlbiBzdHJlYW0uXG4gICAqIEBtZW1iZXJvZiBUb2tlblxuICAgKiBAc3RhdGljXG4gICAqL1xuICBUb2tlbi5zdHJpbmdpZnkgPSBmdW5jdGlvbiBzdHJpbmdpZnkobywgbGFuZ3VhZ2UpIHtcbiAgICBpZiAodHlwZW9mIG8gPT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBvO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShvKSkge1xuICAgICAgdmFyIHMgPSAnJztcbiAgICAgIG8uZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICBzICs9IHN0cmluZ2lmeShlLCBsYW5ndWFnZSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBzO1xuICAgIH1cbiAgICB2YXIgZW52ID0ge1xuICAgICAgdHlwZTogby50eXBlLFxuICAgICAgY29udGVudDogc3RyaW5naWZ5KG8uY29udGVudCwgbGFuZ3VhZ2UpLFxuICAgICAgdGFnOiAnc3BhbicsXG4gICAgICBjbGFzc2VzOiBbJ3Rva2VuJywgby50eXBlXSxcbiAgICAgIGF0dHJpYnV0ZXM6IHt9LFxuICAgICAgbGFuZ3VhZ2U6IGxhbmd1YWdlXG4gICAgfTtcbiAgICB2YXIgYWxpYXNlcyA9IG8uYWxpYXM7XG4gICAgaWYgKGFsaWFzZXMpIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGFsaWFzZXMpKSB7XG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGVudi5jbGFzc2VzLCBhbGlhc2VzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVudi5jbGFzc2VzLnB1c2goYWxpYXNlcyk7XG4gICAgICB9XG4gICAgfVxuICAgIF8uaG9va3MucnVuKCd3cmFwJywgZW52KTtcbiAgICB2YXIgYXR0cmlidXRlcyA9ICcnO1xuICAgIGZvciAodmFyIG5hbWUgaW4gZW52LmF0dHJpYnV0ZXMpIHtcbiAgICAgIGF0dHJpYnV0ZXMgKz0gJyAnICsgbmFtZSArICc9XCInICsgKGVudi5hdHRyaWJ1dGVzW25hbWVdIHx8ICcnKS5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7JykgKyAnXCInO1xuICAgIH1cbiAgICByZXR1cm4gJzwnICsgZW52LnRhZyArICcgY2xhc3M9XCInICsgZW52LmNsYXNzZXMuam9pbignICcpICsgJ1wiJyArIGF0dHJpYnV0ZXMgKyAnPicgKyBlbnYuY29udGVudCArICc8LycgKyBlbnYudGFnICsgJz4nO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1JlZ0V4cH0gcGF0dGVyblxuICAgKiBAcGFyYW0ge251bWJlcn0gcG9zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gbG9va2JlaGluZFxuICAgKiBAcmV0dXJucyB7UmVnRXhwRXhlY0FycmF5IHwgbnVsbH1cbiAgICovXG4gIGZ1bmN0aW9uIG1hdGNoUGF0dGVybihwYXR0ZXJuLCBwb3MsIHRleHQsIGxvb2tiZWhpbmQpIHtcbiAgICBwYXR0ZXJuLmxhc3RJbmRleCA9IHBvcztcbiAgICB2YXIgbWF0Y2ggPSBwYXR0ZXJuLmV4ZWModGV4dCk7XG4gICAgaWYgKG1hdGNoICYmIGxvb2tiZWhpbmQgJiYgbWF0Y2hbMV0pIHtcbiAgICAgIC8vIGNoYW5nZSB0aGUgbWF0Y2ggdG8gcmVtb3ZlIHRoZSB0ZXh0IG1hdGNoZWQgYnkgdGhlIFByaXNtIGxvb2tiZWhpbmQgZ3JvdXBcbiAgICAgIHZhciBsb29rYmVoaW5kTGVuZ3RoID0gbWF0Y2hbMV0ubGVuZ3RoO1xuICAgICAgbWF0Y2guaW5kZXggKz0gbG9va2JlaGluZExlbmd0aDtcbiAgICAgIG1hdGNoWzBdID0gbWF0Y2hbMF0uc2xpY2UobG9va2JlaGluZExlbmd0aCk7XG4gICAgfVxuICAgIHJldHVybiBtYXRjaDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICAgKiBAcGFyYW0ge0xpbmtlZExpc3Q8c3RyaW5nIHwgVG9rZW4+fSB0b2tlbkxpc3RcbiAgICogQHBhcmFtIHthbnl9IGdyYW1tYXJcbiAgICogQHBhcmFtIHtMaW5rZWRMaXN0Tm9kZTxzdHJpbmcgfCBUb2tlbj59IHN0YXJ0Tm9kZVxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnRQb3NcbiAgICogQHBhcmFtIHtSZW1hdGNoT3B0aW9uc30gW3JlbWF0Y2hdXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBAdHlwZWRlZiBSZW1hdGNoT3B0aW9uc1xuICAgKiBAcHJvcGVydHkge3N0cmluZ30gY2F1c2VcbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IHJlYWNoXG4gICAqL1xuICBmdW5jdGlvbiBtYXRjaEdyYW1tYXIodGV4dCwgdG9rZW5MaXN0LCBncmFtbWFyLCBzdGFydE5vZGUsIHN0YXJ0UG9zLCByZW1hdGNoKSB7XG4gICAgZm9yICh2YXIgdG9rZW4gaW4gZ3JhbW1hcikge1xuICAgICAgaWYgKCFncmFtbWFyLmhhc093blByb3BlcnR5KHRva2VuKSB8fCAhZ3JhbW1hclt0b2tlbl0pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB2YXIgcGF0dGVybnMgPSBncmFtbWFyW3Rva2VuXTtcbiAgICAgIHBhdHRlcm5zID0gQXJyYXkuaXNBcnJheShwYXR0ZXJucykgPyBwYXR0ZXJucyA6IFtwYXR0ZXJuc107XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHBhdHRlcm5zLmxlbmd0aDsgKytqKSB7XG4gICAgICAgIGlmIChyZW1hdGNoICYmIHJlbWF0Y2guY2F1c2UgPT0gdG9rZW4gKyAnLCcgKyBqKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwYXR0ZXJuT2JqID0gcGF0dGVybnNbal07XG4gICAgICAgIHZhciBpbnNpZGUgPSBwYXR0ZXJuT2JqLmluc2lkZTtcbiAgICAgICAgdmFyIGxvb2tiZWhpbmQgPSAhIXBhdHRlcm5PYmoubG9va2JlaGluZDtcbiAgICAgICAgdmFyIGdyZWVkeSA9ICEhcGF0dGVybk9iai5ncmVlZHk7XG4gICAgICAgIHZhciBhbGlhcyA9IHBhdHRlcm5PYmouYWxpYXM7XG4gICAgICAgIGlmIChncmVlZHkgJiYgIXBhdHRlcm5PYmoucGF0dGVybi5nbG9iYWwpIHtcbiAgICAgICAgICAvLyBXaXRob3V0IHRoZSBnbG9iYWwgZmxhZywgbGFzdEluZGV4IHdvbid0IHdvcmtcbiAgICAgICAgICB2YXIgZmxhZ3MgPSBwYXR0ZXJuT2JqLnBhdHRlcm4udG9TdHJpbmcoKS5tYXRjaCgvW2ltc3V5XSokLylbMF07XG4gICAgICAgICAgcGF0dGVybk9iai5wYXR0ZXJuID0gUmVnRXhwKHBhdHRlcm5PYmoucGF0dGVybi5zb3VyY2UsIGZsYWdzICsgJ2cnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKiBAdHlwZSB7UmVnRXhwfSAqL1xuICAgICAgICB2YXIgcGF0dGVybiA9IHBhdHRlcm5PYmoucGF0dGVybiB8fCBwYXR0ZXJuT2JqO1xuICAgICAgICBmb3IgKFxuICAgICAgICAvLyBpdGVyYXRlIHRoZSB0b2tlbiBsaXN0IGFuZCBrZWVwIHRyYWNrIG9mIHRoZSBjdXJyZW50IHRva2VuL3N0cmluZyBwb3NpdGlvblxuICAgICAgICB2YXIgY3VycmVudE5vZGUgPSBzdGFydE5vZGUubmV4dCwgcG9zID0gc3RhcnRQb3M7IGN1cnJlbnROb2RlICE9PSB0b2tlbkxpc3QudGFpbDsgcG9zICs9IGN1cnJlbnROb2RlLnZhbHVlLmxlbmd0aCwgY3VycmVudE5vZGUgPSBjdXJyZW50Tm9kZS5uZXh0KSB7XG4gICAgICAgICAgaWYgKHJlbWF0Y2ggJiYgcG9zID49IHJlbWF0Y2gucmVhY2gpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgc3RyID0gY3VycmVudE5vZGUudmFsdWU7XG4gICAgICAgICAgaWYgKHRva2VuTGlzdC5sZW5ndGggPiB0ZXh0Lmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gU29tZXRoaW5nIHdlbnQgdGVycmlibHkgd3JvbmcsIEFCT1JULCBBQk9SVCFcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHN0ciBpbnN0YW5jZW9mIFRva2VuKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIHJlbW92ZUNvdW50ID0gMTsgLy8gdGhpcyBpcyB0aGUgdG8gcGFyYW1ldGVyIG9mIHJlbW92ZUJldHdlZW5cbiAgICAgICAgICB2YXIgbWF0Y2g7XG4gICAgICAgICAgaWYgKGdyZWVkeSkge1xuICAgICAgICAgICAgbWF0Y2ggPSBtYXRjaFBhdHRlcm4ocGF0dGVybiwgcG9zLCB0ZXh0LCBsb29rYmVoaW5kKTtcbiAgICAgICAgICAgIGlmICghbWF0Y2ggfHwgbWF0Y2guaW5kZXggPj0gdGV4dC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZnJvbSA9IG1hdGNoLmluZGV4O1xuICAgICAgICAgICAgdmFyIHRvID0gbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgcCA9IHBvcztcblxuICAgICAgICAgICAgLy8gZmluZCB0aGUgbm9kZSB0aGF0IGNvbnRhaW5zIHRoZSBtYXRjaFxuICAgICAgICAgICAgcCArPSBjdXJyZW50Tm9kZS52YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoZnJvbSA+PSBwKSB7XG4gICAgICAgICAgICAgIGN1cnJlbnROb2RlID0gY3VycmVudE5vZGUubmV4dDtcbiAgICAgICAgICAgICAgcCArPSBjdXJyZW50Tm9kZS52YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBhZGp1c3QgcG9zIChhbmQgcClcbiAgICAgICAgICAgIHAgLT0gY3VycmVudE5vZGUudmFsdWUubGVuZ3RoO1xuICAgICAgICAgICAgcG9zID0gcDtcblxuICAgICAgICAgICAgLy8gdGhlIGN1cnJlbnQgbm9kZSBpcyBhIFRva2VuLCB0aGVuIHRoZSBtYXRjaCBzdGFydHMgaW5zaWRlIGFub3RoZXIgVG9rZW4sIHdoaWNoIGlzIGludmFsaWRcbiAgICAgICAgICAgIGlmIChjdXJyZW50Tm9kZS52YWx1ZSBpbnN0YW5jZW9mIFRva2VuKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBmaW5kIHRoZSBsYXN0IG5vZGUgd2hpY2ggaXMgYWZmZWN0ZWQgYnkgdGhpcyBtYXRjaFxuICAgICAgICAgICAgZm9yICh2YXIgayA9IGN1cnJlbnROb2RlOyBrICE9PSB0b2tlbkxpc3QudGFpbCAmJiAocCA8IHRvIHx8IHR5cGVvZiBrLnZhbHVlID09PSAnc3RyaW5nJyk7IGsgPSBrLm5leHQpIHtcbiAgICAgICAgICAgICAgcmVtb3ZlQ291bnQrKztcbiAgICAgICAgICAgICAgcCArPSBrLnZhbHVlLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlbW92ZUNvdW50LS07XG5cbiAgICAgICAgICAgIC8vIHJlcGxhY2Ugd2l0aCB0aGUgbmV3IG1hdGNoXG4gICAgICAgICAgICBzdHIgPSB0ZXh0LnNsaWNlKHBvcywgcCk7XG4gICAgICAgICAgICBtYXRjaC5pbmRleCAtPSBwb3M7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1hdGNoID0gbWF0Y2hQYXR0ZXJuKHBhdHRlcm4sIDAsIHN0ciwgbG9va2JlaGluZCk7XG4gICAgICAgICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZWRlY2xhcmVcbiAgICAgICAgICB2YXIgZnJvbSA9IG1hdGNoLmluZGV4O1xuICAgICAgICAgIHZhciBtYXRjaFN0ciA9IG1hdGNoWzBdO1xuICAgICAgICAgIHZhciBiZWZvcmUgPSBzdHIuc2xpY2UoMCwgZnJvbSk7XG4gICAgICAgICAgdmFyIGFmdGVyID0gc3RyLnNsaWNlKGZyb20gKyBtYXRjaFN0ci5sZW5ndGgpO1xuICAgICAgICAgIHZhciByZWFjaCA9IHBvcyArIHN0ci5sZW5ndGg7XG4gICAgICAgICAgaWYgKHJlbWF0Y2ggJiYgcmVhY2ggPiByZW1hdGNoLnJlYWNoKSB7XG4gICAgICAgICAgICByZW1hdGNoLnJlYWNoID0gcmVhY2g7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciByZW1vdmVGcm9tID0gY3VycmVudE5vZGUucHJldjtcbiAgICAgICAgICBpZiAoYmVmb3JlKSB7XG4gICAgICAgICAgICByZW1vdmVGcm9tID0gYWRkQWZ0ZXIodG9rZW5MaXN0LCByZW1vdmVGcm9tLCBiZWZvcmUpO1xuICAgICAgICAgICAgcG9zICs9IGJlZm9yZS5sZW5ndGg7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlbW92ZVJhbmdlKHRva2VuTGlzdCwgcmVtb3ZlRnJvbSwgcmVtb3ZlQ291bnQpO1xuICAgICAgICAgIHZhciB3cmFwcGVkID0gbmV3IFRva2VuKHRva2VuLCBpbnNpZGUgPyBfLnRva2VuaXplKG1hdGNoU3RyLCBpbnNpZGUpIDogbWF0Y2hTdHIsIGFsaWFzLCBtYXRjaFN0cik7XG4gICAgICAgICAgY3VycmVudE5vZGUgPSBhZGRBZnRlcih0b2tlbkxpc3QsIHJlbW92ZUZyb20sIHdyYXBwZWQpO1xuICAgICAgICAgIGlmIChhZnRlcikge1xuICAgICAgICAgICAgYWRkQWZ0ZXIodG9rZW5MaXN0LCBjdXJyZW50Tm9kZSwgYWZ0ZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocmVtb3ZlQ291bnQgPiAxKSB7XG4gICAgICAgICAgICAvLyBhdCBsZWFzdCBvbmUgVG9rZW4gb2JqZWN0IHdhcyByZW1vdmVkLCBzbyB3ZSBoYXZlIHRvIGRvIHNvbWUgcmVtYXRjaGluZ1xuICAgICAgICAgICAgLy8gdGhpcyBjYW4gb25seSBoYXBwZW4gaWYgdGhlIGN1cnJlbnQgcGF0dGVybiBpcyBncmVlZHlcblxuICAgICAgICAgICAgLyoqIEB0eXBlIHtSZW1hdGNoT3B0aW9uc30gKi9cbiAgICAgICAgICAgIHZhciBuZXN0ZWRSZW1hdGNoID0ge1xuICAgICAgICAgICAgICBjYXVzZTogdG9rZW4gKyAnLCcgKyBqLFxuICAgICAgICAgICAgICByZWFjaDogcmVhY2hcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBtYXRjaEdyYW1tYXIodGV4dCwgdG9rZW5MaXN0LCBncmFtbWFyLCBjdXJyZW50Tm9kZS5wcmV2LCBwb3MsIG5lc3RlZFJlbWF0Y2gpO1xuXG4gICAgICAgICAgICAvLyB0aGUgcmVhY2ggbWlnaHQgaGF2ZSBiZWVuIGV4dGVuZGVkIGJlY2F1c2Ugb2YgdGhlIHJlbWF0Y2hpbmdcbiAgICAgICAgICAgIGlmIChyZW1hdGNoICYmIG5lc3RlZFJlbWF0Y2gucmVhY2ggPiByZW1hdGNoLnJlYWNoKSB7XG4gICAgICAgICAgICAgIHJlbWF0Y2gucmVhY2ggPSBuZXN0ZWRSZW1hdGNoLnJlYWNoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZWRlZiBMaW5rZWRMaXN0Tm9kZVxuICAgKiBAcHJvcGVydHkge1R9IHZhbHVlXG4gICAqIEBwcm9wZXJ0eSB7TGlua2VkTGlzdE5vZGU8VD4gfCBudWxsfSBwcmV2IFRoZSBwcmV2aW91cyBub2RlLlxuICAgKiBAcHJvcGVydHkge0xpbmtlZExpc3ROb2RlPFQ+IHwgbnVsbH0gbmV4dCBUaGUgbmV4dCBub2RlLlxuICAgKiBAdGVtcGxhdGUgVFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuICAvKipcbiAgICogQHRlbXBsYXRlIFRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGZ1bmN0aW9uIExpbmtlZExpc3QoKSB7XG4gICAgLyoqIEB0eXBlIHtMaW5rZWRMaXN0Tm9kZTxUPn0gKi9cbiAgICB2YXIgaGVhZCA9IHtcbiAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgcHJldjogbnVsbCxcbiAgICAgIG5leHQ6IG51bGxcbiAgICB9O1xuICAgIC8qKiBAdHlwZSB7TGlua2VkTGlzdE5vZGU8VD59ICovXG4gICAgdmFyIHRhaWwgPSB7XG4gICAgICB2YWx1ZTogbnVsbCxcbiAgICAgIHByZXY6IGhlYWQsXG4gICAgICBuZXh0OiBudWxsXG4gICAgfTtcbiAgICBoZWFkLm5leHQgPSB0YWlsO1xuXG4gICAgLyoqIEB0eXBlIHtMaW5rZWRMaXN0Tm9kZTxUPn0gKi9cbiAgICB0aGlzLmhlYWQgPSBoZWFkO1xuICAgIC8qKiBAdHlwZSB7TGlua2VkTGlzdE5vZGU8VD59ICovXG4gICAgdGhpcy50YWlsID0gdGFpbDtcbiAgICB0aGlzLmxlbmd0aCA9IDA7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIG5ldyBub2RlIHdpdGggdGhlIGdpdmVuIHZhbHVlIHRvIHRoZSBsaXN0LlxuICAgKlxuICAgKiBAcGFyYW0ge0xpbmtlZExpc3Q8VD59IGxpc3RcbiAgICogQHBhcmFtIHtMaW5rZWRMaXN0Tm9kZTxUPn0gbm9kZVxuICAgKiBAcGFyYW0ge1R9IHZhbHVlXG4gICAqIEByZXR1cm5zIHtMaW5rZWRMaXN0Tm9kZTxUPn0gVGhlIGFkZGVkIG5vZGUuXG4gICAqIEB0ZW1wbGF0ZSBUXG4gICAqL1xuICBmdW5jdGlvbiBhZGRBZnRlcihsaXN0LCBub2RlLCB2YWx1ZSkge1xuICAgIC8vIGFzc3VtZXMgdGhhdCBub2RlICE9IGxpc3QudGFpbCAmJiB2YWx1ZXMubGVuZ3RoID49IDBcbiAgICB2YXIgbmV4dCA9IG5vZGUubmV4dDtcbiAgICB2YXIgbmV3Tm9kZSA9IHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIHByZXY6IG5vZGUsXG4gICAgICBuZXh0OiBuZXh0XG4gICAgfTtcbiAgICBub2RlLm5leHQgPSBuZXdOb2RlO1xuICAgIG5leHQucHJldiA9IG5ld05vZGU7XG4gICAgbGlzdC5sZW5ndGgrKztcbiAgICByZXR1cm4gbmV3Tm9kZTtcbiAgfVxuICAvKipcbiAgICogUmVtb3ZlcyBgY291bnRgIG5vZGVzIGFmdGVyIHRoZSBnaXZlbiBub2RlLiBUaGUgZ2l2ZW4gbm9kZSB3aWxsIG5vdCBiZSByZW1vdmVkLlxuICAgKlxuICAgKiBAcGFyYW0ge0xpbmtlZExpc3Q8VD59IGxpc3RcbiAgICogQHBhcmFtIHtMaW5rZWRMaXN0Tm9kZTxUPn0gbm9kZVxuICAgKiBAcGFyYW0ge251bWJlcn0gY291bnRcbiAgICogQHRlbXBsYXRlIFRcbiAgICovXG4gIGZ1bmN0aW9uIHJlbW92ZVJhbmdlKGxpc3QsIG5vZGUsIGNvdW50KSB7XG4gICAgdmFyIG5leHQgPSBub2RlLm5leHQ7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudCAmJiBuZXh0ICE9PSBsaXN0LnRhaWw7IGkrKykge1xuICAgICAgbmV4dCA9IG5leHQubmV4dDtcbiAgICB9XG4gICAgbm9kZS5uZXh0ID0gbmV4dDtcbiAgICBuZXh0LnByZXYgPSBub2RlO1xuICAgIGxpc3QubGVuZ3RoIC09IGk7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7TGlua2VkTGlzdDxUPn0gbGlzdFxuICAgKiBAcmV0dXJucyB7VFtdfVxuICAgKiBAdGVtcGxhdGUgVFxuICAgKi9cbiAgZnVuY3Rpb24gdG9BcnJheShsaXN0KSB7XG4gICAgdmFyIGFycmF5ID0gW107XG4gICAgdmFyIG5vZGUgPSBsaXN0LmhlYWQubmV4dDtcbiAgICB3aGlsZSAobm9kZSAhPT0gbGlzdC50YWlsKSB7XG4gICAgICBhcnJheS5wdXNoKG5vZGUudmFsdWUpO1xuICAgICAgbm9kZSA9IG5vZGUubmV4dDtcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5O1xuICB9XG4gIGlmICghX3NlbGYuZG9jdW1lbnQpIHtcbiAgICBpZiAoIV9zZWxmLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgIC8vIGluIE5vZGUuanNcbiAgICAgIHJldHVybiBfO1xuICAgIH1cbiAgICBpZiAoIV8uZGlzYWJsZVdvcmtlck1lc3NhZ2VIYW5kbGVyKSB7XG4gICAgICAvLyBJbiB3b3JrZXJcbiAgICAgIF9zZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgIHZhciBtZXNzYWdlID0gSlNPTi5wYXJzZShldnQuZGF0YSk7XG4gICAgICAgIHZhciBsYW5nID0gbWVzc2FnZS5sYW5ndWFnZTtcbiAgICAgICAgdmFyIGNvZGUgPSBtZXNzYWdlLmNvZGU7XG4gICAgICAgIHZhciBpbW1lZGlhdGVDbG9zZSA9IG1lc3NhZ2UuaW1tZWRpYXRlQ2xvc2U7XG4gICAgICAgIF9zZWxmLnBvc3RNZXNzYWdlKF8uaGlnaGxpZ2h0KGNvZGUsIF8ubGFuZ3VhZ2VzW2xhbmddLCBsYW5nKSk7XG4gICAgICAgIGlmIChpbW1lZGlhdGVDbG9zZSkge1xuICAgICAgICAgIF9zZWxmLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIGZhbHNlKTtcbiAgICB9XG4gICAgcmV0dXJuIF87XG4gIH1cblxuICAvLyBHZXQgY3VycmVudCBzY3JpcHQgYW5kIGhpZ2hsaWdodFxuICB2YXIgc2NyaXB0ID0gXy51dGlsLmN1cnJlbnRTY3JpcHQoKTtcbiAgaWYgKHNjcmlwdCkge1xuICAgIF8uZmlsZW5hbWUgPSBzY3JpcHQuc3JjO1xuICAgIGlmIChzY3JpcHQuaGFzQXR0cmlidXRlKCdkYXRhLW1hbnVhbCcpKSB7XG4gICAgICBfLm1hbnVhbCA9IHRydWU7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGhpZ2hsaWdodEF1dG9tYXRpY2FsbHlDYWxsYmFjaygpIHtcbiAgICBpZiAoIV8ubWFudWFsKSB7XG4gICAgICBfLmhpZ2hsaWdodEFsbCgpO1xuICAgIH1cbiAgfVxuICBpZiAoIV8ubWFudWFsKSB7XG4gICAgLy8gSWYgdGhlIGRvY3VtZW50IHN0YXRlIGlzIFwibG9hZGluZ1wiLCB0aGVuIHdlJ2xsIHVzZSBET01Db250ZW50TG9hZGVkLlxuICAgIC8vIElmIHRoZSBkb2N1bWVudCBzdGF0ZSBpcyBcImludGVyYWN0aXZlXCIgYW5kIHRoZSBwcmlzbS5qcyBzY3JpcHQgaXMgZGVmZXJyZWQsIHRoZW4gd2UnbGwgYWxzbyB1c2UgdGhlXG4gICAgLy8gRE9NQ29udGVudExvYWRlZCBldmVudCBiZWNhdXNlIHRoZXJlIG1pZ2h0IGJlIHNvbWUgcGx1Z2lucyBvciBsYW5ndWFnZXMgd2hpY2ggaGF2ZSBhbHNvIGJlZW4gZGVmZXJyZWQgYW5kIHRoZXlcbiAgICAvLyBtaWdodCB0YWtlIGxvbmdlciBvbmUgYW5pbWF0aW9uIGZyYW1lIHRvIGV4ZWN1dGUgd2hpY2ggY2FuIGNyZWF0ZSBhIHJhY2UgY29uZGl0aW9uIHdoZXJlIG9ubHkgc29tZSBwbHVnaW5zIGhhdmVcbiAgICAvLyBiZWVuIGxvYWRlZCB3aGVuIFByaXNtLmhpZ2hsaWdodEFsbCgpIGlzIGV4ZWN1dGVkLCBkZXBlbmRpbmcgb24gaG93IGZhc3QgcmVzb3VyY2VzIGFyZSBsb2FkZWQuXG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9QcmlzbUpTL3ByaXNtL2lzc3Vlcy8yMTAyXG4gICAgdmFyIHJlYWR5U3RhdGUgPSBkb2N1bWVudC5yZWFkeVN0YXRlO1xuICAgIGlmIChyZWFkeVN0YXRlID09PSAnbG9hZGluZycgfHwgcmVhZHlTdGF0ZSA9PT0gJ2ludGVyYWN0aXZlJyAmJiBzY3JpcHQgJiYgc2NyaXB0LmRlZmVyKSB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgaGlnaGxpZ2h0QXV0b21hdGljYWxseUNhbGxiYWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpIHtcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShoaWdobGlnaHRBdXRvbWF0aWNhbGx5Q2FsbGJhY2spO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoaGlnaGxpZ2h0QXV0b21hdGljYWxseUNhbGxiYWNrLCAxNik7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBfO1xufShfc2VsZik7XG5cbi8vIHNvbWUgYWRkaXRpb25hbCBkb2N1bWVudGF0aW9uL3R5cGVzXG5cbi8qKlxuICogVGhlIGV4cGFuc2lvbiBvZiBhIHNpbXBsZSBgUmVnRXhwYCBsaXRlcmFsIHRvIHN1cHBvcnQgYWRkaXRpb25hbCBwcm9wZXJ0aWVzLlxuICpcbiAqIEB0eXBlZGVmIEdyYW1tYXJUb2tlblxuICogQHByb3BlcnR5IHtSZWdFeHB9IHBhdHRlcm4gVGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiBvZiB0aGUgdG9rZW4uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtsb29rYmVoaW5kPWZhbHNlXSBJZiBgdHJ1ZWAsIHRoZW4gdGhlIGZpcnN0IGNhcHR1cmluZyBncm91cCBvZiBgcGF0dGVybmAgd2lsbCAoZWZmZWN0aXZlbHkpXG4gKiBiZWhhdmUgYXMgYSBsb29rYmVoaW5kIGdyb3VwIG1lYW5pbmcgdGhhdCB0aGUgY2FwdHVyZWQgdGV4dCB3aWxsIG5vdCBiZSBwYXJ0IG9mIHRoZSBtYXRjaGVkIHRleHQgb2YgdGhlIG5ldyB0b2tlbi5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2dyZWVkeT1mYWxzZV0gV2hldGhlciB0aGUgdG9rZW4gaXMgZ3JlZWR5LlxuICogQHByb3BlcnR5IHtzdHJpbmd8c3RyaW5nW119IFthbGlhc10gQW4gb3B0aW9uYWwgYWxpYXMgb3IgbGlzdCBvZiBhbGlhc2VzLlxuICogQHByb3BlcnR5IHtHcmFtbWFyfSBbaW5zaWRlXSBUaGUgbmVzdGVkIGdyYW1tYXIgb2YgdGhpcyB0b2tlbi5cbiAqXG4gKiBUaGUgYGluc2lkZWAgZ3JhbW1hciB3aWxsIGJlIHVzZWQgdG8gdG9rZW5pemUgdGhlIHRleHQgdmFsdWUgb2YgZWFjaCB0b2tlbiBvZiB0aGlzIGtpbmQuXG4gKlxuICogVGhpcyBjYW4gYmUgdXNlZCB0byBtYWtlIG5lc3RlZCBhbmQgZXZlbiByZWN1cnNpdmUgbGFuZ3VhZ2UgZGVmaW5pdGlvbnMuXG4gKlxuICogTm90ZTogVGhpcyBjYW4gY2F1c2UgaW5maW5pdGUgcmVjdXJzaW9uLiBCZSBjYXJlZnVsIHdoZW4geW91IGVtYmVkIGRpZmZlcmVudCBsYW5ndWFnZXMgb3IgZXZlbiB0aGUgc2FtZSBsYW5ndWFnZSBpbnRvXG4gKiBlYWNoIGFub3RoZXIuXG4gKiBAZ2xvYmFsXG4gKiBAcHVibGljXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiBHcmFtbWFyXG4gKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgUmVnRXhwIHwgR3JhbW1hclRva2VuIHwgQXJyYXk8UmVnRXhwIHwgR3JhbW1hclRva2VuPj59XG4gKiBAcHJvcGVydHkge0dyYW1tYXJ9IFtyZXN0XSBBbiBvcHRpb25hbCBncmFtbWFyIG9iamVjdCB0aGF0IHdpbGwgYmUgYXBwZW5kZWQgdG8gdGhpcyBncmFtbWFyLlxuICogQGdsb2JhbFxuICogQHB1YmxpY1xuICovXG5cbi8qKlxuICogQSBmdW5jdGlvbiB3aGljaCB3aWxsIGludm9rZWQgYWZ0ZXIgYW4gZWxlbWVudCB3YXMgc3VjY2Vzc2Z1bGx5IGhpZ2hsaWdodGVkLlxuICpcbiAqIEBjYWxsYmFjayBIaWdobGlnaHRDYWxsYmFja1xuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IFRoZSBlbGVtZW50IHN1Y2Nlc3NmdWxseSBoaWdobGlnaHRlZC5cbiAqIEByZXR1cm5zIHt2b2lkfVxuICogQGdsb2JhbFxuICogQHB1YmxpY1xuICovXG5cbi8qKlxuICogQGNhbGxiYWNrIEhvb2tDYWxsYmFja1xuICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCBhbnk+fSBlbnYgVGhlIGVudmlyb25tZW50IHZhcmlhYmxlcyBvZiB0aGUgaG9vay5cbiAqIEByZXR1cm5zIHt2b2lkfVxuICogQGdsb2JhbFxuICogQHB1YmxpY1xuICovXG5cbi8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgQmVnaW4gcHJpc20tbWFya3VwLmpzXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cblByaXNtLmxhbmd1YWdlcy5tYXJrdXAgPSB7XG4gICdjb21tZW50Jzoge1xuICAgIHBhdHRlcm46IC88IS0tKD86KD8hPCEtLSlbXFxzXFxTXSkqPy0tPi8sXG4gICAgZ3JlZWR5OiB0cnVlXG4gIH0sXG4gICdwcm9sb2cnOiB7XG4gICAgcGF0dGVybjogLzxcXD9bXFxzXFxTXSs/XFw/Pi8sXG4gICAgZ3JlZWR5OiB0cnVlXG4gIH0sXG4gICdkb2N0eXBlJzoge1xuICAgIC8vIGh0dHBzOi8vd3d3LnczLm9yZy9UUi94bWwvI05ULWRvY3R5cGVkZWNsXG4gICAgcGF0dGVybjogLzwhRE9DVFlQRSg/OltePlwiJ1tcXF1dfFwiW15cIl0qXCJ8J1teJ10qJykrKD86XFxbKD86W148XCInXFxdXXxcIlteXCJdKlwifCdbXiddKid8PCg/ISEtLSl8PCEtLSg/OlteLV18LSg/IS0+KSkqLS0+KSpcXF1cXHMqKT8+L2ksXG4gICAgZ3JlZWR5OiB0cnVlLFxuICAgIGluc2lkZToge1xuICAgICAgJ2ludGVybmFsLXN1YnNldCc6IHtcbiAgICAgICAgcGF0dGVybjogLyheW15cXFtdKlxcWylbXFxzXFxTXSsoPz1cXF0+JCkvLFxuICAgICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgICBncmVlZHk6IHRydWUsXG4gICAgICAgIGluc2lkZTogbnVsbCAvLyBzZWUgYmVsb3dcbiAgICAgIH0sXG4gICAgICAnc3RyaW5nJzoge1xuICAgICAgICBwYXR0ZXJuOiAvXCJbXlwiXSpcInwnW14nXSonLyxcbiAgICAgICAgZ3JlZWR5OiB0cnVlXG4gICAgICB9LFxuICAgICAgJ3B1bmN0dWF0aW9uJzogL148IXw+JHxbW1xcXV0vLFxuICAgICAgJ2RvY3R5cGUtdGFnJzogL15ET0NUWVBFL2ksXG4gICAgICAnbmFtZSc6IC9bXlxcczw+J1wiXSsvXG4gICAgfVxuICB9LFxuICAnY2RhdGEnOiB7XG4gICAgcGF0dGVybjogLzwhXFxbQ0RBVEFcXFtbXFxzXFxTXSo/XFxdXFxdPi9pLFxuICAgIGdyZWVkeTogdHJ1ZVxuICB9LFxuICAndGFnJzoge1xuICAgIHBhdHRlcm46IC88XFwvPyg/IVxcZClbXlxccz5cXC89JDwlXSsoPzpcXHMoPzpcXHMqW15cXHM+XFwvPV0rKD86XFxzKj1cXHMqKD86XCJbXlwiXSpcInwnW14nXSonfFteXFxzJ1wiPj1dKyg/PVtcXHM+XSkpfCg/PVtcXHMvPl0pKSkrKT9cXHMqXFwvPz4vLFxuICAgIGdyZWVkeTogdHJ1ZSxcbiAgICBpbnNpZGU6IHtcbiAgICAgICd0YWcnOiB7XG4gICAgICAgIHBhdHRlcm46IC9ePFxcLz9bXlxccz5cXC9dKy8sXG4gICAgICAgIGluc2lkZToge1xuICAgICAgICAgICdwdW5jdHVhdGlvbic6IC9ePFxcLz8vLFxuICAgICAgICAgICduYW1lc3BhY2UnOiAvXlteXFxzPlxcLzpdKzovXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAnc3BlY2lhbC1hdHRyJzogW10sXG4gICAgICAnYXR0ci12YWx1ZSc6IHtcbiAgICAgICAgcGF0dGVybjogLz1cXHMqKD86XCJbXlwiXSpcInwnW14nXSonfFteXFxzJ1wiPj1dKykvLFxuICAgICAgICBpbnNpZGU6IHtcbiAgICAgICAgICAncHVuY3R1YXRpb24nOiBbe1xuICAgICAgICAgICAgcGF0dGVybjogL149LyxcbiAgICAgICAgICAgIGFsaWFzOiAnYXR0ci1lcXVhbHMnXG4gICAgICAgICAgfSwge1xuICAgICAgICAgICAgcGF0dGVybjogL14oXFxzKilbXCInXXxbXCInXSQvLFxuICAgICAgICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgICAgICAgIH1dXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAncHVuY3R1YXRpb24nOiAvXFwvPz4vLFxuICAgICAgJ2F0dHItbmFtZSc6IHtcbiAgICAgICAgcGF0dGVybjogL1teXFxzPlxcL10rLyxcbiAgICAgICAgaW5zaWRlOiB7XG4gICAgICAgICAgJ25hbWVzcGFjZSc6IC9eW15cXHM+XFwvOl0rOi9cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgJ2VudGl0eSc6IFt7XG4gICAgcGF0dGVybjogLyZbXFxkYS16XXsxLDh9Oy9pLFxuICAgIGFsaWFzOiAnbmFtZWQtZW50aXR5J1xuICB9LCAvJiN4P1tcXGRhLWZdezEsOH07L2ldXG59O1xuUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cFsndGFnJ10uaW5zaWRlWydhdHRyLXZhbHVlJ10uaW5zaWRlWydlbnRpdHknXSA9IFByaXNtLmxhbmd1YWdlcy5tYXJrdXBbJ2VudGl0eSddO1xuUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cFsnZG9jdHlwZSddLmluc2lkZVsnaW50ZXJuYWwtc3Vic2V0J10uaW5zaWRlID0gUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cDtcblxuLy8gUGx1Z2luIHRvIG1ha2UgZW50aXR5IHRpdGxlIHNob3cgdGhlIHJlYWwgZW50aXR5LCBpZGVhIGJ5IFJvbWFuIEtvbWFyb3ZcblByaXNtLmhvb2tzLmFkZCgnd3JhcCcsIGZ1bmN0aW9uIChlbnYpIHtcbiAgaWYgKGVudi50eXBlID09PSAnZW50aXR5Jykge1xuICAgIGVudi5hdHRyaWJ1dGVzWyd0aXRsZSddID0gZW52LmNvbnRlbnQucmVwbGFjZSgvJmFtcDsvLCAnJicpO1xuICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQcmlzbS5sYW5ndWFnZXMubWFya3VwLnRhZywgJ2FkZElubGluZWQnLCB7XG4gIC8qKlxuICAgKiBBZGRzIGFuIGlubGluZWQgbGFuZ3VhZ2UgdG8gbWFya3VwLlxuICAgKlxuICAgKiBBbiBleGFtcGxlIG9mIGFuIGlubGluZWQgbGFuZ3VhZ2UgaXMgQ1NTIHdpdGggYDxzdHlsZT5gIHRhZ3MuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0YWdOYW1lIFRoZSBuYW1lIG9mIHRoZSB0YWcgdGhhdCBjb250YWlucyB0aGUgaW5saW5lZCBsYW5ndWFnZS4gVGhpcyBuYW1lIHdpbGwgYmUgdHJlYXRlZCBhc1xuICAgKiBjYXNlIGluc2Vuc2l0aXZlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbGFuZyBUaGUgbGFuZ3VhZ2Uga2V5LlxuICAgKiBAZXhhbXBsZVxuICAgKiBhZGRJbmxpbmVkKCdzdHlsZScsICdjc3MnKTtcbiAgICovXG4gIHZhbHVlOiBmdW5jdGlvbiBhZGRJbmxpbmVkKHRhZ05hbWUsIGxhbmcpIHtcbiAgICB2YXIgaW5jbHVkZWRDZGF0YUluc2lkZSA9IHt9O1xuICAgIGluY2x1ZGVkQ2RhdGFJbnNpZGVbJ2xhbmd1YWdlLScgKyBsYW5nXSA9IHtcbiAgICAgIHBhdHRlcm46IC8oXjwhXFxbQ0RBVEFcXFspW1xcc1xcU10rPyg/PVxcXVxcXT4kKS9pLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzW2xhbmddXG4gICAgfTtcbiAgICBpbmNsdWRlZENkYXRhSW5zaWRlWydjZGF0YSddID0gL148IVxcW0NEQVRBXFxbfFxcXVxcXT4kL2k7XG4gICAgdmFyIGluc2lkZSA9IHtcbiAgICAgICdpbmNsdWRlZC1jZGF0YSc6IHtcbiAgICAgICAgcGF0dGVybjogLzwhXFxbQ0RBVEFcXFtbXFxzXFxTXSo/XFxdXFxdPi9pLFxuICAgICAgICBpbnNpZGU6IGluY2x1ZGVkQ2RhdGFJbnNpZGVcbiAgICAgIH1cbiAgICB9O1xuICAgIGluc2lkZVsnbGFuZ3VhZ2UtJyArIGxhbmddID0ge1xuICAgICAgcGF0dGVybjogL1tcXHNcXFNdKy8sXG4gICAgICBpbnNpZGU6IFByaXNtLmxhbmd1YWdlc1tsYW5nXVxuICAgIH07XG4gICAgdmFyIGRlZiA9IHt9O1xuICAgIGRlZlt0YWdOYW1lXSA9IHtcbiAgICAgIHBhdHRlcm46IFJlZ0V4cCgvKDxfX1tePl0qPikoPzo8IVxcW0NEQVRBXFxbKD86W15cXF1dfFxcXSg/IVxcXT4pKSpcXF1cXF0+fCg/ITwhXFxbQ0RBVEFcXFspW1xcc1xcU10pKj8oPz08XFwvX18+KS8uc291cmNlLnJlcGxhY2UoL19fL2csIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRhZ05hbWU7XG4gICAgICB9KSwgJ2knKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBpbnNpZGU6IGluc2lkZVxuICAgIH07XG4gICAgUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnbWFya3VwJywgJ2NkYXRhJywgZGVmKTtcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cC50YWcsICdhZGRBdHRyaWJ1dGUnLCB7XG4gIC8qKlxuICAgKiBBZGRzIGFuIHBhdHRlcm4gdG8gaGlnaGxpZ2h0IGxhbmd1YWdlcyBlbWJlZGRlZCBpbiBIVE1MIGF0dHJpYnV0ZXMuXG4gICAqXG4gICAqIEFuIGV4YW1wbGUgb2YgYW4gaW5saW5lZCBsYW5ndWFnZSBpcyBDU1Mgd2l0aCBgc3R5bGVgIGF0dHJpYnV0ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyTmFtZSBUaGUgbmFtZSBvZiB0aGUgdGFnIHRoYXQgY29udGFpbnMgdGhlIGlubGluZWQgbGFuZ3VhZ2UuIFRoaXMgbmFtZSB3aWxsIGJlIHRyZWF0ZWQgYXNcbiAgICogY2FzZSBpbnNlbnNpdGl2ZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGxhbmcgVGhlIGxhbmd1YWdlIGtleS5cbiAgICogQGV4YW1wbGVcbiAgICogYWRkQXR0cmlidXRlKCdzdHlsZScsICdjc3MnKTtcbiAgICovXG4gIHZhbHVlOiBmdW5jdGlvbiAoYXR0ck5hbWUsIGxhbmcpIHtcbiAgICBQcmlzbS5sYW5ndWFnZXMubWFya3VwLnRhZy5pbnNpZGVbJ3NwZWNpYWwtYXR0ciddLnB1c2goe1xuICAgICAgcGF0dGVybjogUmVnRXhwKC8oXnxbXCInXFxzXSkvLnNvdXJjZSArICcoPzonICsgYXR0ck5hbWUgKyAnKScgKyAvXFxzKj1cXHMqKD86XCJbXlwiXSpcInwnW14nXSonfFteXFxzJ1wiPj1dKyg/PVtcXHM+XSkpLy5zb3VyY2UsICdpJyksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdhdHRyLW5hbWUnOiAvXlteXFxzPV0rLyxcbiAgICAgICAgJ2F0dHItdmFsdWUnOiB7XG4gICAgICAgICAgcGF0dGVybjogLz1bXFxzXFxTXSsvLFxuICAgICAgICAgIGluc2lkZToge1xuICAgICAgICAgICAgJ3ZhbHVlJzoge1xuICAgICAgICAgICAgICBwYXR0ZXJuOiAvKF49XFxzKihbXCInXXwoPyFbXCInXSkpKVxcU1tcXHNcXFNdKig/PVxcMiQpLyxcbiAgICAgICAgICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgICAgICAgICAgYWxpYXM6IFtsYW5nLCAnbGFuZ3VhZ2UtJyArIGxhbmddLFxuICAgICAgICAgICAgICBpbnNpZGU6IFByaXNtLmxhbmd1YWdlc1tsYW5nXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdwdW5jdHVhdGlvbic6IFt7XG4gICAgICAgICAgICAgIHBhdHRlcm46IC9ePS8sXG4gICAgICAgICAgICAgIGFsaWFzOiAnYXR0ci1lcXVhbHMnXG4gICAgICAgICAgICB9LCAvXCJ8Jy9dXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pO1xuUHJpc20ubGFuZ3VhZ2VzLmh0bWwgPSBQcmlzbS5sYW5ndWFnZXMubWFya3VwO1xuUHJpc20ubGFuZ3VhZ2VzLm1hdGhtbCA9IFByaXNtLmxhbmd1YWdlcy5tYXJrdXA7XG5QcmlzbS5sYW5ndWFnZXMuc3ZnID0gUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cDtcblByaXNtLmxhbmd1YWdlcy54bWwgPSBQcmlzbS5sYW5ndWFnZXMuZXh0ZW5kKCdtYXJrdXAnLCB7fSk7XG5QcmlzbS5sYW5ndWFnZXMuc3NtbCA9IFByaXNtLmxhbmd1YWdlcy54bWw7XG5QcmlzbS5sYW5ndWFnZXMuYXRvbSA9IFByaXNtLmxhbmd1YWdlcy54bWw7XG5QcmlzbS5sYW5ndWFnZXMucnNzID0gUHJpc20ubGFuZ3VhZ2VzLnhtbDtcblxuLyogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICBCZWdpbiBwcmlzbS1jc3MuanNcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cblxuKGZ1bmN0aW9uIChQcmlzbSkge1xuICB2YXIgc3RyaW5nID0gLyg/OlwiKD86XFxcXCg/OlxcclxcbnxbXFxzXFxTXSl8W15cIlxcXFxcXHJcXG5dKSpcInwnKD86XFxcXCg/OlxcclxcbnxbXFxzXFxTXSl8W14nXFxcXFxcclxcbl0pKicpLztcbiAgUHJpc20ubGFuZ3VhZ2VzLmNzcyA9IHtcbiAgICAnY29tbWVudCc6IC9cXC9cXCpbXFxzXFxTXSo/XFwqXFwvLyxcbiAgICAnYXRydWxlJzoge1xuICAgICAgcGF0dGVybjogUmVnRXhwKCdAW1xcXFx3LV0oPzonICsgL1teO3tcXHNcIiddfFxccysoPyFcXHMpLy5zb3VyY2UgKyAnfCcgKyBzdHJpbmcuc291cmNlICsgJykqPycgKyAvKD86O3woPz1cXHMqXFx7KSkvLnNvdXJjZSksXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ3J1bGUnOiAvXkBbXFx3LV0rLyxcbiAgICAgICAgJ3NlbGVjdG9yLWZ1bmN0aW9uLWFyZ3VtZW50Jzoge1xuICAgICAgICAgIHBhdHRlcm46IC8oXFxic2VsZWN0b3JcXHMqXFwoXFxzKig/IVtcXHMpXSkpKD86W14oKVxcc118XFxzKyg/IVtcXHMpXSl8XFwoKD86W14oKV18XFwoW14oKV0qXFwpKSpcXCkpKyg/PVxccypcXCkpLyxcbiAgICAgICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgICAgIGFsaWFzOiAnc2VsZWN0b3InXG4gICAgICAgIH0sXG4gICAgICAgICdrZXl3b3JkJzoge1xuICAgICAgICAgIHBhdHRlcm46IC8oXnxbXlxcdy1dKSg/OmFuZHxub3R8b25seXxvcikoPyFbXFx3LV0pLyxcbiAgICAgICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgLy8gU2VlIHJlc3QgYmVsb3dcbiAgICAgIH1cbiAgICB9LFxuICAgICd1cmwnOiB7XG4gICAgICAvLyBodHRwczovL2RyYWZ0cy5jc3N3Zy5vcmcvY3NzLXZhbHVlcy0zLyN1cmxzXG4gICAgICBwYXR0ZXJuOiBSZWdFeHAoJ1xcXFxidXJsXFxcXCgoPzonICsgc3RyaW5nLnNvdXJjZSArICd8JyArIC8oPzpbXlxcXFxcXHJcXG4oKVwiJ118XFxcXFtcXHNcXFNdKSovLnNvdXJjZSArICcpXFxcXCknLCAnaScpLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdmdW5jdGlvbic6IC9edXJsL2ksXG4gICAgICAgICdwdW5jdHVhdGlvbic6IC9eXFwofFxcKSQvLFxuICAgICAgICAnc3RyaW5nJzoge1xuICAgICAgICAgIHBhdHRlcm46IFJlZ0V4cCgnXicgKyBzdHJpbmcuc291cmNlICsgJyQnKSxcbiAgICAgICAgICBhbGlhczogJ3VybCdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgJ3NlbGVjdG9yJzoge1xuICAgICAgcGF0dGVybjogUmVnRXhwKCcoXnxbe31cXFxcc10pW157fVxcXFxzXSg/Oltee307XCJcXCdcXFxcc118XFxcXHMrKD8hW1xcXFxze10pfCcgKyBzdHJpbmcuc291cmNlICsgJykqKD89XFxcXHMqXFxcXHspJyksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgfSxcbiAgICAnc3RyaW5nJzoge1xuICAgICAgcGF0dGVybjogc3RyaW5nLFxuICAgICAgZ3JlZWR5OiB0cnVlXG4gICAgfSxcbiAgICAncHJvcGVydHknOiB7XG4gICAgICBwYXR0ZXJuOiAvKF58W14tXFx3XFx4QTAtXFx1RkZGRl0pKD8hXFxzKVstX2EtelxceEEwLVxcdUZGRkZdKD86KD8hXFxzKVstXFx3XFx4QTAtXFx1RkZGRl0pKig/PVxccyo6KS9pLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgIH0sXG4gICAgJ2ltcG9ydGFudCc6IC8haW1wb3J0YW50XFxiL2ksXG4gICAgJ2Z1bmN0aW9uJzoge1xuICAgICAgcGF0dGVybjogLyhefFteLWEtejAtOV0pWy1hLXowLTldKyg/PVxcKCkvaSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICB9LFxuICAgICdwdW5jdHVhdGlvbic6IC9bKCl7fTs6LF0vXG4gIH07XG4gIFByaXNtLmxhbmd1YWdlcy5jc3NbJ2F0cnVsZSddLmluc2lkZS5yZXN0ID0gUHJpc20ubGFuZ3VhZ2VzLmNzcztcbiAgdmFyIG1hcmt1cCA9IFByaXNtLmxhbmd1YWdlcy5tYXJrdXA7XG4gIGlmIChtYXJrdXApIHtcbiAgICBtYXJrdXAudGFnLmFkZElubGluZWQoJ3N0eWxlJywgJ2NzcycpO1xuICAgIG1hcmt1cC50YWcuYWRkQXR0cmlidXRlKCdzdHlsZScsICdjc3MnKTtcbiAgfVxufSkoUHJpc20pO1xuXG4vKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgIEJlZ2luIHByaXNtLWNsaWtlLmpzXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cblByaXNtLmxhbmd1YWdlcy5jbGlrZSA9IHtcbiAgJ2NvbW1lbnQnOiBbe1xuICAgIHBhdHRlcm46IC8oXnxbXlxcXFxdKVxcL1xcKltcXHNcXFNdKj8oPzpcXCpcXC98JCkvLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgZ3JlZWR5OiB0cnVlXG4gIH0sIHtcbiAgICBwYXR0ZXJuOiAvKF58W15cXFxcOl0pXFwvXFwvLiovLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgZ3JlZWR5OiB0cnVlXG4gIH1dLFxuICAnc3RyaW5nJzoge1xuICAgIHBhdHRlcm46IC8oW1wiJ10pKD86XFxcXCg/OlxcclxcbnxbXFxzXFxTXSl8KD8hXFwxKVteXFxcXFxcclxcbl0pKlxcMS8sXG4gICAgZ3JlZWR5OiB0cnVlXG4gIH0sXG4gICdjbGFzcy1uYW1lJzoge1xuICAgIHBhdHRlcm46IC8oXFxiKD86Y2xhc3N8ZXh0ZW5kc3xpbXBsZW1lbnRzfGluc3RhbmNlb2Z8aW50ZXJmYWNlfG5ld3x0cmFpdClcXHMrfFxcYmNhdGNoXFxzK1xcKClbXFx3LlxcXFxdKy9pLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgaW5zaWRlOiB7XG4gICAgICAncHVuY3R1YXRpb24nOiAvWy5cXFxcXS9cbiAgICB9XG4gIH0sXG4gICdrZXl3b3JkJzogL1xcYig/OmJyZWFrfGNhdGNofGNvbnRpbnVlfGRvfGVsc2V8ZmluYWxseXxmb3J8ZnVuY3Rpb258aWZ8aW58aW5zdGFuY2VvZnxuZXd8bnVsbHxyZXR1cm58dGhyb3d8dHJ5fHdoaWxlKVxcYi8sXG4gICdib29sZWFuJzogL1xcYig/OmZhbHNlfHRydWUpXFxiLyxcbiAgJ2Z1bmN0aW9uJzogL1xcYlxcdysoPz1cXCgpLyxcbiAgJ251bWJlcic6IC9cXGIweFtcXGRhLWZdK1xcYnwoPzpcXGJcXGQrKD86XFwuXFxkKik/fFxcQlxcLlxcZCspKD86ZVsrLV0/XFxkKyk/L2ksXG4gICdvcGVyYXRvcic6IC9bPD5dPT98WyE9XT0/PT98LS0/fFxcK1xcKz98JiY/fFxcfFxcfD98Wz8qL35eJV0vLFxuICAncHVuY3R1YXRpb24nOiAvW3t9W1xcXTsoKSwuOl0vXG59O1xuXG4vKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgIEJlZ2luIHByaXNtLWphdmFzY3JpcHQuanNcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cblxuUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHQgPSBQcmlzbS5sYW5ndWFnZXMuZXh0ZW5kKCdjbGlrZScsIHtcbiAgJ2NsYXNzLW5hbWUnOiBbUHJpc20ubGFuZ3VhZ2VzLmNsaWtlWydjbGFzcy1uYW1lJ10sIHtcbiAgICBwYXR0ZXJuOiAvKF58W14kXFx3XFx4QTAtXFx1RkZGRl0pKD8hXFxzKVtfJEEtWlxceEEwLVxcdUZGRkZdKD86KD8hXFxzKVskXFx3XFx4QTAtXFx1RkZGRl0pKig/PVxcLig/OmNvbnN0cnVjdG9yfHByb3RvdHlwZSkpLyxcbiAgICBsb29rYmVoaW5kOiB0cnVlXG4gIH1dLFxuICAna2V5d29yZCc6IFt7XG4gICAgcGF0dGVybjogLygoPzpefFxcfSlcXHMqKWNhdGNoXFxiLyxcbiAgICBsb29rYmVoaW5kOiB0cnVlXG4gIH0sIHtcbiAgICBwYXR0ZXJuOiAvKF58W14uXXxcXC5cXC5cXC5cXHMqKVxcYig/OmFzfGFzc2VydCg/PVxccypcXHspfGFzeW5jKD89XFxzKig/OmZ1bmN0aW9uXFxifFxcKHxbJFxcd1xceEEwLVxcdUZGRkZdfCQpKXxhd2FpdHxicmVha3xjYXNlfGNsYXNzfGNvbnN0fGNvbnRpbnVlfGRlYnVnZ2VyfGRlZmF1bHR8ZGVsZXRlfGRvfGVsc2V8ZW51bXxleHBvcnR8ZXh0ZW5kc3xmaW5hbGx5KD89XFxzKig/Olxce3wkKSl8Zm9yfGZyb20oPz1cXHMqKD86WydcIl18JCkpfGZ1bmN0aW9ufCg/OmdldHxzZXQpKD89XFxzKig/OlsjXFxbJFxcd1xceEEwLVxcdUZGRkZdfCQpKXxpZnxpbXBsZW1lbnRzfGltcG9ydHxpbnxpbnN0YW5jZW9mfGludGVyZmFjZXxsZXR8bmV3fG51bGx8b2Z8cGFja2FnZXxwcml2YXRlfHByb3RlY3RlZHxwdWJsaWN8cmV0dXJufHN0YXRpY3xzdXBlcnxzd2l0Y2h8dGhpc3x0aHJvd3x0cnl8dHlwZW9mfHVuZGVmaW5lZHx2YXJ8dm9pZHx3aGlsZXx3aXRofHlpZWxkKVxcYi8sXG4gICAgbG9va2JlaGluZDogdHJ1ZVxuICB9XSxcbiAgLy8gQWxsb3cgZm9yIGFsbCBub24tQVNDSUkgY2hhcmFjdGVycyAoU2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIwMDg0NDQpXG4gICdmdW5jdGlvbic6IC8jPyg/IVxccylbXyRhLXpBLVpcXHhBMC1cXHVGRkZGXSg/Oig/IVxccylbJFxcd1xceEEwLVxcdUZGRkZdKSooPz1cXHMqKD86XFwuXFxzKig/OmFwcGx5fGJpbmR8Y2FsbClcXHMqKT9cXCgpLyxcbiAgJ251bWJlcic6IHtcbiAgICBwYXR0ZXJuOiBSZWdFeHAoLyhefFteXFx3JF0pLy5zb3VyY2UgKyAnKD86JyArIChcbiAgICAvLyBjb25zdGFudFxuICAgIC9OYU58SW5maW5pdHkvLnNvdXJjZSArICd8JyArXG4gICAgLy8gYmluYXJ5IGludGVnZXJcbiAgICAvMFtiQl1bMDFdKyg/Ol9bMDFdKykqbj8vLnNvdXJjZSArICd8JyArXG4gICAgLy8gb2N0YWwgaW50ZWdlclxuICAgIC8wW29PXVswLTddKyg/Ol9bMC03XSspKm4/Ly5zb3VyY2UgKyAnfCcgK1xuICAgIC8vIGhleGFkZWNpbWFsIGludGVnZXJcbiAgICAvMFt4WF1bXFxkQS1GYS1mXSsoPzpfW1xcZEEtRmEtZl0rKSpuPy8uc291cmNlICsgJ3wnICtcbiAgICAvLyBkZWNpbWFsIGJpZ2ludFxuICAgIC9cXGQrKD86X1xcZCspKm4vLnNvdXJjZSArICd8JyArXG4gICAgLy8gZGVjaW1hbCBudW1iZXIgKGludGVnZXIgb3IgZmxvYXQpIGJ1dCBubyBiaWdpbnRcbiAgICAvKD86XFxkKyg/Ol9cXGQrKSooPzpcXC4oPzpcXGQrKD86X1xcZCspKik/KT98XFwuXFxkKyg/Ol9cXGQrKSopKD86W0VlXVsrLV0/XFxkKyg/Ol9cXGQrKSopPy8uc291cmNlKSArICcpJyArIC8oPyFbXFx3JF0pLy5zb3VyY2UpLFxuICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgfSxcbiAgJ29wZXJhdG9yJzogLy0tfFxcK1xcK3xcXCpcXCo9P3w9PnwmJj0/fFxcfFxcfD0/fFshPV09PXw8PD0/fD4+Pj89P3xbLSsqLyUmfF4hPTw+XT0/fFxcLnszfXxcXD9cXD89P3xcXD9cXC4/fFt+Ol0vXG59KTtcblByaXNtLmxhbmd1YWdlcy5qYXZhc2NyaXB0WydjbGFzcy1uYW1lJ11bMF0ucGF0dGVybiA9IC8oXFxiKD86Y2xhc3N8ZXh0ZW5kc3xpbXBsZW1lbnRzfGluc3RhbmNlb2Z8aW50ZXJmYWNlfG5ldylcXHMrKVtcXHcuXFxcXF0rLztcblByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ2phdmFzY3JpcHQnLCAna2V5d29yZCcsIHtcbiAgJ3JlZ2V4Jzoge1xuICAgIHBhdHRlcm46IFJlZ0V4cChcbiAgICAvLyBsb29rYmVoaW5kXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlZ2V4cC9uby1kdXBlLWNoYXJhY3RlcnMtY2hhcmFjdGVyLWNsYXNzXG4gICAgLygoPzpefFteJFxcd1xceEEwLVxcdUZGRkYuXCInXFxdKVxcc118XFxiKD86cmV0dXJufHlpZWxkKSlcXHMqKS8uc291cmNlICtcbiAgICAvLyBSZWdleCBwYXR0ZXJuOlxuICAgIC8vIFRoZXJlIGFyZSAyIHJlZ2V4IHBhdHRlcm5zIGhlcmUuIFRoZSBSZWdFeHAgc2V0IG5vdGF0aW9uIHByb3Bvc2FsIGFkZGVkIHN1cHBvcnQgZm9yIG5lc3RlZCBjaGFyYWN0ZXJcbiAgICAvLyBjbGFzc2VzIGlmIHRoZSBgdmAgZmxhZyBpcyBwcmVzZW50LiBVbmZvcnR1bmF0ZWx5LCBuZXN0ZWQgQ0NzIGFyZSBib3RoIGNvbnRleHQtZnJlZSBhbmQgaW5jb21wYXRpYmxlXG4gICAgLy8gd2l0aCB0aGUgb25seSBzeW50YXgsIHNvIHdlIGhhdmUgdG8gZGVmaW5lIDIgZGlmZmVyZW50IHJlZ2V4IHBhdHRlcm5zLlxuICAgIC9cXC8vLnNvdXJjZSArICcoPzonICsgLyg/OlxcWyg/OlteXFxdXFxcXFxcclxcbl18XFxcXC4pKlxcXXxcXFxcLnxbXi9cXFxcXFxbXFxyXFxuXSkrXFwvW2RnaW15dXNdezAsN30vLnNvdXJjZSArICd8JyArXG4gICAgLy8gYHZgIGZsYWcgc3ludGF4LiBUaGlzIHN1cHBvcnRzIDMgbGV2ZWxzIG9mIG5lc3RlZCBjaGFyYWN0ZXIgY2xhc3Nlcy5cbiAgICAvKD86XFxbKD86W15bXFxdXFxcXFxcclxcbl18XFxcXC58XFxbKD86W15bXFxdXFxcXFxcclxcbl18XFxcXC58XFxbKD86W15bXFxdXFxcXFxcclxcbl18XFxcXC4pKlxcXSkqXFxdKSpcXF18XFxcXC58W14vXFxcXFxcW1xcclxcbl0pK1xcL1tkZ2lteXVzXXswLDd9dltkZ2lteXVzXXswLDd9Ly5zb3VyY2UgKyAnKScgK1xuICAgIC8vIGxvb2thaGVhZFxuICAgIC8oPz0oPzpcXHN8XFwvXFwqKD86W14qXXxcXCooPyFcXC8pKSpcXCpcXC8pKig/OiR8W1xcclxcbiwuOzp9KVxcXV18XFwvXFwvKSkvLnNvdXJjZSksXG4gICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICBncmVlZHk6IHRydWUsXG4gICAgaW5zaWRlOiB7XG4gICAgICAncmVnZXgtc291cmNlJzoge1xuICAgICAgICBwYXR0ZXJuOiAvXihcXC8pW1xcc1xcU10rKD89XFwvW2Etel0qJCkvLFxuICAgICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgICBhbGlhczogJ2xhbmd1YWdlLXJlZ2V4JyxcbiAgICAgICAgaW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMucmVnZXhcbiAgICAgIH0sXG4gICAgICAncmVnZXgtZGVsaW1pdGVyJzogL15cXC98XFwvJC8sXG4gICAgICAncmVnZXgtZmxhZ3MnOiAvXlthLXpdKyQvXG4gICAgfVxuICB9LFxuICAvLyBUaGlzIG11c3QgYmUgZGVjbGFyZWQgYmVmb3JlIGtleXdvcmQgYmVjYXVzZSB3ZSB1c2UgXCJmdW5jdGlvblwiIGluc2lkZSB0aGUgbG9vay1mb3J3YXJkXG4gICdmdW5jdGlvbi12YXJpYWJsZSc6IHtcbiAgICBwYXR0ZXJuOiAvIz8oPyFcXHMpW18kYS16QS1aXFx4QTAtXFx1RkZGRl0oPzooPyFcXHMpWyRcXHdcXHhBMC1cXHVGRkZGXSkqKD89XFxzKls9Ol1cXHMqKD86YXN5bmNcXHMqKT8oPzpcXGJmdW5jdGlvblxcYnwoPzpcXCgoPzpbXigpXXxcXChbXigpXSpcXCkpKlxcKXwoPyFcXHMpW18kYS16QS1aXFx4QTAtXFx1RkZGRl0oPzooPyFcXHMpWyRcXHdcXHhBMC1cXHVGRkZGXSkqKVxccyo9PikpLyxcbiAgICBhbGlhczogJ2Z1bmN0aW9uJ1xuICB9LFxuICAncGFyYW1ldGVyJzogW3tcbiAgICBwYXR0ZXJuOiAvKGZ1bmN0aW9uKD86XFxzKyg/IVxccylbXyRhLXpBLVpcXHhBMC1cXHVGRkZGXSg/Oig/IVxccylbJFxcd1xceEEwLVxcdUZGRkZdKSopP1xccypcXChcXHMqKSg/IVxccykoPzpbXigpXFxzXXxcXHMrKD8hW1xccyldKXxcXChbXigpXSpcXCkpKyg/PVxccypcXCkpLyxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHRcbiAgfSwge1xuICAgIHBhdHRlcm46IC8oXnxbXiRcXHdcXHhBMC1cXHVGRkZGXSkoPyFcXHMpW18kYS16XFx4QTAtXFx1RkZGRl0oPzooPyFcXHMpWyRcXHdcXHhBMC1cXHVGRkZGXSkqKD89XFxzKj0+KS9pLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgaW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdFxuICB9LCB7XG4gICAgcGF0dGVybjogLyhcXChcXHMqKSg/IVxccykoPzpbXigpXFxzXXxcXHMrKD8hW1xccyldKXxcXChbXigpXSpcXCkpKyg/PVxccypcXClcXHMqPT4pLyxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHRcbiAgfSwge1xuICAgIHBhdHRlcm46IC8oKD86XFxifFxcc3xeKSg/ISg/OmFzfGFzeW5jfGF3YWl0fGJyZWFrfGNhc2V8Y2F0Y2h8Y2xhc3N8Y29uc3R8Y29udGludWV8ZGVidWdnZXJ8ZGVmYXVsdHxkZWxldGV8ZG98ZWxzZXxlbnVtfGV4cG9ydHxleHRlbmRzfGZpbmFsbHl8Zm9yfGZyb218ZnVuY3Rpb258Z2V0fGlmfGltcGxlbWVudHN8aW1wb3J0fGlufGluc3RhbmNlb2Z8aW50ZXJmYWNlfGxldHxuZXd8bnVsbHxvZnxwYWNrYWdlfHByaXZhdGV8cHJvdGVjdGVkfHB1YmxpY3xyZXR1cm58c2V0fHN0YXRpY3xzdXBlcnxzd2l0Y2h8dGhpc3x0aHJvd3x0cnl8dHlwZW9mfHVuZGVmaW5lZHx2YXJ8dm9pZHx3aGlsZXx3aXRofHlpZWxkKSg/IVskXFx3XFx4QTAtXFx1RkZGRl0pKSg/Oig/IVxccylbXyRhLXpBLVpcXHhBMC1cXHVGRkZGXSg/Oig/IVxccylbJFxcd1xceEEwLVxcdUZGRkZdKSpcXHMqKVxcKFxccyp8XFxdXFxzKlxcKFxccyopKD8hXFxzKSg/OlteKClcXHNdfFxccysoPyFbXFxzKV0pfFxcKFteKCldKlxcKSkrKD89XFxzKlxcKVxccypcXHspLyxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHRcbiAgfV0sXG4gICdjb25zdGFudCc6IC9cXGJbQS1aXSg/OltBLVpfXXxcXGR4PykqXFxiL1xufSk7XG5QcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdqYXZhc2NyaXB0JywgJ3N0cmluZycsIHtcbiAgJ2hhc2hiYW5nJzoge1xuICAgIHBhdHRlcm46IC9eIyEuKi8sXG4gICAgZ3JlZWR5OiB0cnVlLFxuICAgIGFsaWFzOiAnY29tbWVudCdcbiAgfSxcbiAgJ3RlbXBsYXRlLXN0cmluZyc6IHtcbiAgICBwYXR0ZXJuOiAvYCg/OlxcXFxbXFxzXFxTXXxcXCRcXHsoPzpbXnt9XXxcXHsoPzpbXnt9XXxcXHtbXn1dKlxcfSkqXFx9KStcXH18KD8hXFwkXFx7KVteXFxcXGBdKSpgLyxcbiAgICBncmVlZHk6IHRydWUsXG4gICAgaW5zaWRlOiB7XG4gICAgICAndGVtcGxhdGUtcHVuY3R1YXRpb24nOiB7XG4gICAgICAgIHBhdHRlcm46IC9eYHxgJC8sXG4gICAgICAgIGFsaWFzOiAnc3RyaW5nJ1xuICAgICAgfSxcbiAgICAgICdpbnRlcnBvbGF0aW9uJzoge1xuICAgICAgICBwYXR0ZXJuOiAvKCg/Ol58W15cXFxcXSkoPzpcXFxcezJ9KSopXFwkXFx7KD86W157fV18XFx7KD86W157fV18XFx7W159XSpcXH0pKlxcfSkrXFx9LyxcbiAgICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgICAgaW5zaWRlOiB7XG4gICAgICAgICAgJ2ludGVycG9sYXRpb24tcHVuY3R1YXRpb24nOiB7XG4gICAgICAgICAgICBwYXR0ZXJuOiAvXlxcJFxce3xcXH0kLyxcbiAgICAgICAgICAgIGFsaWFzOiAncHVuY3R1YXRpb24nXG4gICAgICAgICAgfSxcbiAgICAgICAgICByZXN0OiBQcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdFxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgJ3N0cmluZyc6IC9bXFxzXFxTXSsvXG4gICAgfVxuICB9LFxuICAnc3RyaW5nLXByb3BlcnR5Jzoge1xuICAgIHBhdHRlcm46IC8oKD86XnxbLHtdKVsgXFx0XSopKFtcIiddKSg/OlxcXFwoPzpcXHJcXG58W1xcc1xcU10pfCg/IVxcMilbXlxcXFxcXHJcXG5dKSpcXDIoPz1cXHMqOikvbSxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGdyZWVkeTogdHJ1ZSxcbiAgICBhbGlhczogJ3Byb3BlcnR5J1xuICB9XG59KTtcblByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ2phdmFzY3JpcHQnLCAnb3BlcmF0b3InLCB7XG4gICdsaXRlcmFsLXByb3BlcnR5Jzoge1xuICAgIHBhdHRlcm46IC8oKD86XnxbLHtdKVsgXFx0XSopKD8hXFxzKVtfJGEtekEtWlxceEEwLVxcdUZGRkZdKD86KD8hXFxzKVskXFx3XFx4QTAtXFx1RkZGRl0pKig/PVxccyo6KS9tLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgYWxpYXM6ICdwcm9wZXJ0eSdcbiAgfVxufSk7XG5pZiAoUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cCkge1xuICBQcmlzbS5sYW5ndWFnZXMubWFya3VwLnRhZy5hZGRJbmxpbmVkKCdzY3JpcHQnLCAnamF2YXNjcmlwdCcpO1xuXG4gIC8vIGFkZCBhdHRyaWJ1dGUgc3VwcG9ydCBmb3IgYWxsIERPTSBldmVudHMuXG4gIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0V2ZW50cyNTdGFuZGFyZF9ldmVudHNcbiAgUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cC50YWcuYWRkQXR0cmlidXRlKC9vbig/OmFib3J0fGJsdXJ8Y2hhbmdlfGNsaWNrfGNvbXBvc2l0aW9uKD86ZW5kfHN0YXJ0fHVwZGF0ZSl8ZGJsY2xpY2t8ZXJyb3J8Zm9jdXMoPzppbnxvdXQpP3xrZXkoPzpkb3dufHVwKXxsb2FkfG1vdXNlKD86ZG93bnxlbnRlcnxsZWF2ZXxtb3ZlfG91dHxvdmVyfHVwKXxyZXNldHxyZXNpemV8c2Nyb2xsfHNlbGVjdHxzbG90Y2hhbmdlfHN1Ym1pdHx1bmxvYWR8d2hlZWwpLy5zb3VyY2UsICdqYXZhc2NyaXB0Jyk7XG59XG5QcmlzbS5sYW5ndWFnZXMuanMgPSBQcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdDtcblxuLyogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICBCZWdpbiBwcmlzbS1maWxlLWhpZ2hsaWdodC5qc1xuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXG4oZnVuY3Rpb24gKCkge1xuICBpZiAodHlwZW9mIFByaXNtID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0VsZW1lbnQvbWF0Y2hlcyNQb2x5ZmlsbFxuICBpZiAoIUVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMpIHtcbiAgICBFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzID0gRWxlbWVudC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3IgfHwgRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yO1xuICB9XG4gIHZhciBMT0FESU5HX01FU1NBR0UgPSAnTG9hZGluZ+KApic7XG4gIHZhciBGQUlMVVJFX01FU1NBR0UgPSBmdW5jdGlvbiAoc3RhdHVzLCBtZXNzYWdlKSB7XG4gICAgcmV0dXJuICfinJYgRXJyb3IgJyArIHN0YXR1cyArICcgd2hpbGUgZmV0Y2hpbmcgZmlsZTogJyArIG1lc3NhZ2U7XG4gIH07XG4gIHZhciBGQUlMVVJFX0VNUFRZX01FU1NBR0UgPSAn4pyWIEVycm9yOiBGaWxlIGRvZXMgbm90IGV4aXN0IG9yIGlzIGVtcHR5JztcbiAgdmFyIEVYVEVOU0lPTlMgPSB7XG4gICAgJ2pzJzogJ2phdmFzY3JpcHQnLFxuICAgICdweSc6ICdweXRob24nLFxuICAgICdyYic6ICdydWJ5JyxcbiAgICAncHMxJzogJ3Bvd2Vyc2hlbGwnLFxuICAgICdwc20xJzogJ3Bvd2Vyc2hlbGwnLFxuICAgICdzaCc6ICdiYXNoJyxcbiAgICAnYmF0JzogJ2JhdGNoJyxcbiAgICAnaCc6ICdjJyxcbiAgICAndGV4JzogJ2xhdGV4J1xuICB9O1xuICB2YXIgU1RBVFVTX0FUVFIgPSAnZGF0YS1zcmMtc3RhdHVzJztcbiAgdmFyIFNUQVRVU19MT0FESU5HID0gJ2xvYWRpbmcnO1xuICB2YXIgU1RBVFVTX0xPQURFRCA9ICdsb2FkZWQnO1xuICB2YXIgU1RBVFVTX0ZBSUxFRCA9ICdmYWlsZWQnO1xuICB2YXIgU0VMRUNUT1IgPSAncHJlW2RhdGEtc3JjXTpub3QoWycgKyBTVEFUVVNfQVRUUiArICc9XCInICsgU1RBVFVTX0xPQURFRCArICdcIl0pJyArICc6bm90KFsnICsgU1RBVFVTX0FUVFIgKyAnPVwiJyArIFNUQVRVU19MT0FESU5HICsgJ1wiXSknO1xuXG4gIC8qKlxuICAgKiBMb2FkcyB0aGUgZ2l2ZW4gZmlsZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNyYyBUaGUgVVJMIG9yIHBhdGggb2YgdGhlIHNvdXJjZSBmaWxlIHRvIGxvYWQuXG4gICAqIEBwYXJhbSB7KHJlc3VsdDogc3RyaW5nKSA9PiB2b2lkfSBzdWNjZXNzXG4gICAqIEBwYXJhbSB7KHJlYXNvbjogc3RyaW5nKSA9PiB2b2lkfSBlcnJvclxuICAgKi9cbiAgZnVuY3Rpb24gbG9hZEZpbGUoc3JjLCBzdWNjZXNzLCBlcnJvcikge1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbignR0VUJywgc3JjLCB0cnVlKTtcbiAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09IDQpIHtcbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPCA0MDAgJiYgeGhyLnJlc3BvbnNlVGV4dCkge1xuICAgICAgICAgIHN1Y2Nlc3MoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHhoci5zdGF0dXMgPj0gNDAwKSB7XG4gICAgICAgICAgICBlcnJvcihGQUlMVVJFX01FU1NBR0UoeGhyLnN0YXR1cywgeGhyLnN0YXR1c1RleHQpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXJyb3IoRkFJTFVSRV9FTVBUWV9NRVNTQUdFKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIHhoci5zZW5kKG51bGwpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlcyB0aGUgZ2l2ZW4gcmFuZ2UuXG4gICAqXG4gICAqIFRoaXMgcmV0dXJucyBhIHJhbmdlIHdpdGggaW5jbHVzaXZlIGVuZHMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZH0gcmFuZ2VcbiAgICogQHJldHVybnMge1tudW1iZXIsIG51bWJlciB8IHVuZGVmaW5lZF0gfCB1bmRlZmluZWR9XG4gICAqL1xuICBmdW5jdGlvbiBwYXJzZVJhbmdlKHJhbmdlKSB7XG4gICAgdmFyIG0gPSAvXlxccyooXFxkKylcXHMqKD86KCwpXFxzKig/OihcXGQrKVxccyopPyk/JC8uZXhlYyhyYW5nZSB8fCAnJyk7XG4gICAgaWYgKG0pIHtcbiAgICAgIHZhciBzdGFydCA9IE51bWJlcihtWzFdKTtcbiAgICAgIHZhciBjb21tYSA9IG1bMl07XG4gICAgICB2YXIgZW5kID0gbVszXTtcbiAgICAgIGlmICghY29tbWEpIHtcbiAgICAgICAgcmV0dXJuIFtzdGFydCwgc3RhcnRdO1xuICAgICAgfVxuICAgICAgaWYgKCFlbmQpIHtcbiAgICAgICAgcmV0dXJuIFtzdGFydCwgdW5kZWZpbmVkXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbc3RhcnQsIE51bWJlcihlbmQpXTtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBQcmlzbS5ob29rcy5hZGQoJ2JlZm9yZS1oaWdobGlnaHRhbGwnLCBmdW5jdGlvbiAoZW52KSB7XG4gICAgZW52LnNlbGVjdG9yICs9ICcsICcgKyBTRUxFQ1RPUjtcbiAgfSk7XG4gIFByaXNtLmhvb2tzLmFkZCgnYmVmb3JlLXNhbml0eS1jaGVjaycsIGZ1bmN0aW9uIChlbnYpIHtcbiAgICB2YXIgcHJlID0gLyoqIEB0eXBlIHtIVE1MUHJlRWxlbWVudH0gKi9lbnYuZWxlbWVudDtcbiAgICBpZiAocHJlLm1hdGNoZXMoU0VMRUNUT1IpKSB7XG4gICAgICBlbnYuY29kZSA9ICcnOyAvLyBmYXN0LXBhdGggdGhlIHdob2xlIHRoaW5nIGFuZCBnbyB0byBjb21wbGV0ZVxuXG4gICAgICBwcmUuc2V0QXR0cmlidXRlKFNUQVRVU19BVFRSLCBTVEFUVVNfTE9BRElORyk7IC8vIG1hcmsgYXMgbG9hZGluZ1xuXG4gICAgICAvLyBhZGQgY29kZSBlbGVtZW50IHdpdGggbG9hZGluZyBtZXNzYWdlXG4gICAgICB2YXIgY29kZSA9IHByZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdDT0RFJykpO1xuICAgICAgY29kZS50ZXh0Q29udGVudCA9IExPQURJTkdfTUVTU0FHRTtcbiAgICAgIHZhciBzcmMgPSBwcmUuZ2V0QXR0cmlidXRlKCdkYXRhLXNyYycpO1xuICAgICAgdmFyIGxhbmd1YWdlID0gZW52Lmxhbmd1YWdlO1xuICAgICAgaWYgKGxhbmd1YWdlID09PSAnbm9uZScpIHtcbiAgICAgICAgLy8gdGhlIGxhbmd1YWdlIG1pZ2h0IGJlICdub25lJyBiZWNhdXNlIHRoZXJlIGlzIG5vIGxhbmd1YWdlIHNldDtcbiAgICAgICAgLy8gaW4gdGhpcyBjYXNlLCB3ZSB3YW50IHRvIHVzZSB0aGUgZXh0ZW5zaW9uIGFzIHRoZSBsYW5ndWFnZVxuICAgICAgICB2YXIgZXh0ZW5zaW9uID0gKC9cXC4oXFx3KykkLy5leGVjKHNyYykgfHwgWywgJ25vbmUnXSlbMV07XG4gICAgICAgIGxhbmd1YWdlID0gRVhURU5TSU9OU1tleHRlbnNpb25dIHx8IGV4dGVuc2lvbjtcbiAgICAgIH1cblxuICAgICAgLy8gc2V0IGxhbmd1YWdlIGNsYXNzZXNcbiAgICAgIFByaXNtLnV0aWwuc2V0TGFuZ3VhZ2UoY29kZSwgbGFuZ3VhZ2UpO1xuICAgICAgUHJpc20udXRpbC5zZXRMYW5ndWFnZShwcmUsIGxhbmd1YWdlKTtcblxuICAgICAgLy8gcHJlbG9hZCB0aGUgbGFuZ3VhZ2VcbiAgICAgIHZhciBhdXRvbG9hZGVyID0gUHJpc20ucGx1Z2lucy5hdXRvbG9hZGVyO1xuICAgICAgaWYgKGF1dG9sb2FkZXIpIHtcbiAgICAgICAgYXV0b2xvYWRlci5sb2FkTGFuZ3VhZ2VzKGxhbmd1YWdlKTtcbiAgICAgIH1cblxuICAgICAgLy8gbG9hZCBmaWxlXG4gICAgICBsb2FkRmlsZShzcmMsIGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgICAgIC8vIG1hcmsgYXMgbG9hZGVkXG4gICAgICAgIHByZS5zZXRBdHRyaWJ1dGUoU1RBVFVTX0FUVFIsIFNUQVRVU19MT0FERUQpO1xuXG4gICAgICAgIC8vIGhhbmRsZSBkYXRhLXJhbmdlXG4gICAgICAgIHZhciByYW5nZSA9IHBhcnNlUmFuZ2UocHJlLmdldEF0dHJpYnV0ZSgnZGF0YS1yYW5nZScpKTtcbiAgICAgICAgaWYgKHJhbmdlKSB7XG4gICAgICAgICAgdmFyIGxpbmVzID0gdGV4dC5zcGxpdCgvXFxyXFxuP3xcXG4vZyk7XG5cbiAgICAgICAgICAvLyB0aGUgcmFuZ2UgaXMgb25lLWJhc2VkIGFuZCBpbmNsdXNpdmUgb24gYm90aCBlbmRzXG4gICAgICAgICAgdmFyIHN0YXJ0ID0gcmFuZ2VbMF07XG4gICAgICAgICAgdmFyIGVuZCA9IHJhbmdlWzFdID09IG51bGwgPyBsaW5lcy5sZW5ndGggOiByYW5nZVsxXTtcbiAgICAgICAgICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgICAgICAgICBzdGFydCArPSBsaW5lcy5sZW5ndGg7XG4gICAgICAgICAgfVxuICAgICAgICAgIHN0YXJ0ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oc3RhcnQgLSAxLCBsaW5lcy5sZW5ndGgpKTtcbiAgICAgICAgICBpZiAoZW5kIDwgMCkge1xuICAgICAgICAgICAgZW5kICs9IGxpbmVzLmxlbmd0aDtcbiAgICAgICAgICB9XG4gICAgICAgICAgZW5kID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oZW5kLCBsaW5lcy5sZW5ndGgpKTtcbiAgICAgICAgICB0ZXh0ID0gbGluZXMuc2xpY2Uoc3RhcnQsIGVuZCkuam9pbignXFxuJyk7XG5cbiAgICAgICAgICAvLyBhZGQgZGF0YS1zdGFydCBmb3IgbGluZSBudW1iZXJzXG4gICAgICAgICAgaWYgKCFwcmUuaGFzQXR0cmlidXRlKCdkYXRhLXN0YXJ0JykpIHtcbiAgICAgICAgICAgIHByZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3RhcnQnLCBTdHJpbmcoc3RhcnQgKyAxKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gaGlnaGxpZ2h0IGNvZGVcbiAgICAgICAgY29kZS50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgICAgIFByaXNtLmhpZ2hsaWdodEVsZW1lbnQoY29kZSk7XG4gICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgLy8gbWFyayBhcyBmYWlsZWRcbiAgICAgICAgcHJlLnNldEF0dHJpYnV0ZShTVEFUVVNfQVRUUiwgU1RBVFVTX0ZBSUxFRCk7XG4gICAgICAgIGNvZGUudGV4dENvbnRlbnQgPSBlcnJvcjtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIFByaXNtLnBsdWdpbnMuZmlsZUhpZ2hsaWdodCA9IHtcbiAgICAvKipcbiAgICAgKiBFeGVjdXRlcyB0aGUgRmlsZSBIaWdobGlnaHQgcGx1Z2luIGZvciBhbGwgbWF0Y2hpbmcgYHByZWAgZWxlbWVudHMgdW5kZXIgdGhlIGdpdmVuIGNvbnRhaW5lci5cbiAgICAgKlxuICAgICAqIE5vdGU6IEVsZW1lbnRzIHdoaWNoIGFyZSBhbHJlYWR5IGxvYWRlZCBvciBjdXJyZW50bHkgbG9hZGluZyB3aWxsIG5vdCBiZSB0b3VjaGVkIGJ5IHRoaXMgbWV0aG9kLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQYXJlbnROb2RlfSBbY29udGFpbmVyPWRvY3VtZW50XVxuICAgICAqL1xuICAgIGhpZ2hsaWdodDogZnVuY3Rpb24gaGlnaGxpZ2h0KGNvbnRhaW5lcikge1xuICAgICAgdmFyIGVsZW1lbnRzID0gKGNvbnRhaW5lciB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChTRUxFQ1RPUik7XG4gICAgICBmb3IgKHZhciBpID0gMCwgZWxlbWVudDsgZWxlbWVudCA9IGVsZW1lbnRzW2krK107KSB7XG4gICAgICAgIFByaXNtLmhpZ2hsaWdodEVsZW1lbnQoZWxlbWVudCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICB2YXIgbG9nZ2VkID0gZmFsc2U7XG4gIC8qKiBAZGVwcmVjYXRlZCBVc2UgYFByaXNtLnBsdWdpbnMuZmlsZUhpZ2hsaWdodC5oaWdobGlnaHRgIGluc3RlYWQuICovXG4gIFByaXNtLmZpbGVIaWdobGlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFsb2dnZWQpIHtcbiAgICAgIGNvbnNvbGUud2FybignUHJpc20uZmlsZUhpZ2hsaWdodCBpcyBkZXByZWNhdGVkLiBVc2UgYFByaXNtLnBsdWdpbnMuZmlsZUhpZ2hsaWdodC5oaWdobGlnaHRgIGluc3RlYWQuJyk7XG4gICAgICBsb2dnZWQgPSB0cnVlO1xuICAgIH1cbiAgICBQcmlzbS5wbHVnaW5zLmZpbGVIaWdobGlnaHQuaGlnaGxpZ2h0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG59KSgpO1xuUHJpc20ubGFuZ3VhZ2VzLmNsaWtlID0ge1xuICAnY29tbWVudCc6IFt7XG4gICAgcGF0dGVybjogLyhefFteXFxcXF0pXFwvXFwqW1xcc1xcU10qPyg/OlxcKlxcL3wkKS8sXG4gICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICBncmVlZHk6IHRydWVcbiAgfSwge1xuICAgIHBhdHRlcm46IC8oXnxbXlxcXFw6XSlcXC9cXC8uKi8sXG4gICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICBncmVlZHk6IHRydWVcbiAgfV0sXG4gICdzdHJpbmcnOiB7XG4gICAgcGF0dGVybjogLyhbXCInXSkoPzpcXFxcKD86XFxyXFxufFtcXHNcXFNdKXwoPyFcXDEpW15cXFxcXFxyXFxuXSkqXFwxLyxcbiAgICBncmVlZHk6IHRydWVcbiAgfSxcbiAgJ2NsYXNzLW5hbWUnOiB7XG4gICAgcGF0dGVybjogLyhcXGIoPzpjbGFzc3xleHRlbmRzfGltcGxlbWVudHN8aW5zdGFuY2VvZnxpbnRlcmZhY2V8bmV3fHRyYWl0KVxccyt8XFxiY2F0Y2hcXHMrXFwoKVtcXHcuXFxcXF0rL2ksXG4gICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICBpbnNpZGU6IHtcbiAgICAgICdwdW5jdHVhdGlvbic6IC9bLlxcXFxdL1xuICAgIH1cbiAgfSxcbiAgJ2tleXdvcmQnOiAvXFxiKD86YnJlYWt8Y2F0Y2h8Y29udGludWV8ZG98ZWxzZXxmaW5hbGx5fGZvcnxmdW5jdGlvbnxpZnxpbnxpbnN0YW5jZW9mfG5ld3xudWxsfHJldHVybnx0aHJvd3x0cnl8d2hpbGUpXFxiLyxcbiAgJ2Jvb2xlYW4nOiAvXFxiKD86ZmFsc2V8dHJ1ZSlcXGIvLFxuICAnZnVuY3Rpb24nOiAvXFxiXFx3Kyg/PVxcKCkvLFxuICAnbnVtYmVyJzogL1xcYjB4W1xcZGEtZl0rXFxifCg/OlxcYlxcZCsoPzpcXC5cXGQqKT98XFxCXFwuXFxkKykoPzplWystXT9cXGQrKT8vaSxcbiAgJ29wZXJhdG9yJzogL1s8Pl09P3xbIT1dPT89P3wtLT98XFwrXFwrP3wmJj98XFx8XFx8P3xbPyovfl4lXS8sXG4gICdwdW5jdHVhdGlvbic6IC9be31bXFxdOygpLC46XS9cbn07XG5QcmlzbS5sYW5ndWFnZXMuYyA9IFByaXNtLmxhbmd1YWdlcy5leHRlbmQoJ2NsaWtlJywge1xuICAnY29tbWVudCc6IHtcbiAgICBwYXR0ZXJuOiAvXFwvXFwvKD86W15cXHJcXG5cXFxcXXxcXFxcKD86XFxyXFxuP3xcXG58KD8hW1xcclxcbl0pKSkqfFxcL1xcKltcXHNcXFNdKj8oPzpcXCpcXC98JCkvLFxuICAgIGdyZWVkeTogdHJ1ZVxuICB9LFxuICAnc3RyaW5nJzoge1xuICAgIC8vIGh0dHBzOi8vZW4uY3BwcmVmZXJlbmNlLmNvbS93L2MvbGFuZ3VhZ2Uvc3RyaW5nX2xpdGVyYWxcbiAgICBwYXR0ZXJuOiAvXCIoPzpcXFxcKD86XFxyXFxufFtcXHNcXFNdKXxbXlwiXFxcXFxcclxcbl0pKlwiLyxcbiAgICBncmVlZHk6IHRydWVcbiAgfSxcbiAgJ2NsYXNzLW5hbWUnOiB7XG4gICAgcGF0dGVybjogLyhcXGIoPzplbnVtfHN0cnVjdClcXHMrKD86X19hdHRyaWJ1dGVfX1xccypcXChcXChbXFxzXFxTXSo/XFwpXFwpXFxzKik/KVxcdyt8XFxiW2Etel1cXHcqX3RcXGIvLFxuICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgfSxcbiAgJ2tleXdvcmQnOiAvXFxiKD86X0FsaWduYXN8X0FsaWdub2Z8X0F0b21pY3xfQm9vbHxfQ29tcGxleHxfR2VuZXJpY3xfSW1hZ2luYXJ5fF9Ob3JldHVybnxfU3RhdGljX2Fzc2VydHxfVGhyZWFkX2xvY2FsfF9fYXR0cmlidXRlX198YXNtfGF1dG98YnJlYWt8Y2FzZXxjaGFyfGNvbnN0fGNvbnRpbnVlfGRlZmF1bHR8ZG98ZG91YmxlfGVsc2V8ZW51bXxleHRlcm58ZmxvYXR8Zm9yfGdvdG98aWZ8aW5saW5lfGludHxsb25nfHJlZ2lzdGVyfHJldHVybnxzaG9ydHxzaWduZWR8c2l6ZW9mfHN0YXRpY3xzdHJ1Y3R8c3dpdGNofHR5cGVkZWZ8dHlwZW9mfHVuaW9ufHVuc2lnbmVkfHZvaWR8dm9sYXRpbGV8d2hpbGUpXFxiLyxcbiAgJ2Z1bmN0aW9uJzogL1xcYlthLXpfXVxcdyooPz1cXHMqXFwoKS9pLFxuICAnbnVtYmVyJzogLyg/OlxcYjB4KD86W1xcZGEtZl0rKD86XFwuW1xcZGEtZl0qKT98XFwuW1xcZGEtZl0rKSg/OnBbKy1dP1xcZCspP3woPzpcXGJcXGQrKD86XFwuXFxkKik/fFxcQlxcLlxcZCspKD86ZVsrLV0/XFxkKyk/KVtmdWxdezAsNH0vaSxcbiAgJ29wZXJhdG9yJzogLz4+PT98PDw9P3wtPnwoWy0rJnw6XSlcXDF8Wz86fl18Wy0rKi8lJnxeIT08Pl09Py9cbn0pO1xuUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnYycsICdzdHJpbmcnLCB7XG4gICdjaGFyJzoge1xuICAgIC8vIGh0dHBzOi8vZW4uY3BwcmVmZXJlbmNlLmNvbS93L2MvbGFuZ3VhZ2UvY2hhcmFjdGVyX2NvbnN0YW50XG4gICAgcGF0dGVybjogLycoPzpcXFxcKD86XFxyXFxufFtcXHNcXFNdKXxbXidcXFxcXFxyXFxuXSl7MCwzMn0nLyxcbiAgICBncmVlZHk6IHRydWVcbiAgfVxufSk7XG5QcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdjJywgJ3N0cmluZycsIHtcbiAgJ21hY3JvJzoge1xuICAgIC8vIGFsbG93IGZvciBtdWx0aWxpbmUgbWFjcm8gZGVmaW5pdGlvbnNcbiAgICAvLyBzcGFjZXMgYWZ0ZXIgdGhlICMgY2hhcmFjdGVyIGNvbXBpbGUgZmluZSB3aXRoIGdjY1xuICAgIHBhdHRlcm46IC8oXltcXHQgXSopI1xccypbYS16XSg/OlteXFxyXFxuXFxcXC9dfFxcLyg/IVxcKil8XFwvXFwqKD86W14qXXxcXCooPyFcXC8pKSpcXCpcXC98XFxcXCg/OlxcclxcbnxbXFxzXFxTXSkpKi9pbSxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGdyZWVkeTogdHJ1ZSxcbiAgICBhbGlhczogJ3Byb3BlcnR5JyxcbiAgICBpbnNpZGU6IHtcbiAgICAgICdzdHJpbmcnOiBbe1xuICAgICAgICAvLyBoaWdobGlnaHQgdGhlIHBhdGggb2YgdGhlIGluY2x1ZGUgc3RhdGVtZW50IGFzIGEgc3RyaW5nXG4gICAgICAgIHBhdHRlcm46IC9eKCNcXHMqaW5jbHVkZVxccyopPFtePl0rPi8sXG4gICAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICAgIH0sIFByaXNtLmxhbmd1YWdlcy5jWydzdHJpbmcnXV0sXG4gICAgICAnY2hhcic6IFByaXNtLmxhbmd1YWdlcy5jWydjaGFyJ10sXG4gICAgICAnY29tbWVudCc6IFByaXNtLmxhbmd1YWdlcy5jWydjb21tZW50J10sXG4gICAgICAnbWFjcm8tbmFtZSc6IFt7XG4gICAgICAgIHBhdHRlcm46IC8oXiNcXHMqZGVmaW5lXFxzKylcXHcrXFxiKD8hXFwoKS9pLFxuICAgICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgICB9LCB7XG4gICAgICAgIHBhdHRlcm46IC8oXiNcXHMqZGVmaW5lXFxzKylcXHcrXFxiKD89XFwoKS9pLFxuICAgICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgICBhbGlhczogJ2Z1bmN0aW9uJ1xuICAgICAgfV0sXG4gICAgICAvLyBoaWdobGlnaHQgbWFjcm8gZGlyZWN0aXZlcyBhcyBrZXl3b3Jkc1xuICAgICAgJ2RpcmVjdGl2ZSc6IHtcbiAgICAgICAgcGF0dGVybjogL14oI1xccyopW2Etel0rLyxcbiAgICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgICAgYWxpYXM6ICdrZXl3b3JkJ1xuICAgICAgfSxcbiAgICAgICdkaXJlY3RpdmUtaGFzaCc6IC9eIy8sXG4gICAgICAncHVuY3R1YXRpb24nOiAvIyN8XFxcXCg/PVtcXHJcXG5dKS8sXG4gICAgICAnZXhwcmVzc2lvbic6IHtcbiAgICAgICAgcGF0dGVybjogL1xcU1tcXHNcXFNdKi8sXG4gICAgICAgIGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLmNcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pO1xuUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnYycsICdmdW5jdGlvbicsIHtcbiAgLy8gaGlnaGxpZ2h0IHByZWRlZmluZWQgbWFjcm9zIGFzIGNvbnN0YW50c1xuICAnY29uc3RhbnQnOiAvXFxiKD86RU9GfE5VTEx8U0VFS19DVVJ8U0VFS19FTkR8U0VFS19TRVR8X19EQVRFX198X19GSUxFX198X19MSU5FX198X19USU1FU1RBTVBfX3xfX1RJTUVfX3xfX2Z1bmNfX3xzdGRlcnJ8c3RkaW58c3Rkb3V0KVxcYi9cbn0pO1xuZGVsZXRlIFByaXNtLmxhbmd1YWdlcy5jWydib29sZWFuJ107XG4oZnVuY3Rpb24gKFByaXNtKSB7XG4gIHZhciBrZXl3b3JkID0gL1xcYig/OmFsaWduYXN8YWxpZ25vZnxhc218YXV0b3xib29sfGJyZWFrfGNhc2V8Y2F0Y2h8Y2hhcnxjaGFyMTZfdHxjaGFyMzJfdHxjaGFyOF90fGNsYXNzfGNvX2F3YWl0fGNvX3JldHVybnxjb195aWVsZHxjb21wbHxjb25jZXB0fGNvbnN0fGNvbnN0X2Nhc3R8Y29uc3RldmFsfGNvbnN0ZXhwcnxjb25zdGluaXR8Y29udGludWV8ZGVjbHR5cGV8ZGVmYXVsdHxkZWxldGV8ZG98ZG91YmxlfGR5bmFtaWNfY2FzdHxlbHNlfGVudW18ZXhwbGljaXR8ZXhwb3J0fGV4dGVybnxmaW5hbHxmbG9hdHxmb3J8ZnJpZW5kfGdvdG98aWZ8aW1wb3J0fGlubGluZXxpbnR8aW50MTZfdHxpbnQzMl90fGludDY0X3R8aW50OF90fGxvbmd8bW9kdWxlfG11dGFibGV8bmFtZXNwYWNlfG5ld3xub2V4Y2VwdHxudWxscHRyfG9wZXJhdG9yfG92ZXJyaWRlfHByaXZhdGV8cHJvdGVjdGVkfHB1YmxpY3xyZWdpc3RlcnxyZWludGVycHJldF9jYXN0fHJlcXVpcmVzfHJldHVybnxzaG9ydHxzaWduZWR8c2l6ZW9mfHN0YXRpY3xzdGF0aWNfYXNzZXJ0fHN0YXRpY19jYXN0fHN0cnVjdHxzd2l0Y2h8dGVtcGxhdGV8dGhpc3x0aHJlYWRfbG9jYWx8dGhyb3d8dHJ5fHR5cGVkZWZ8dHlwZWlkfHR5cGVuYW1lfHVpbnQxNl90fHVpbnQzMl90fHVpbnQ2NF90fHVpbnQ4X3R8dW5pb258dW5zaWduZWR8dXNpbmd8dmlydHVhbHx2b2lkfHZvbGF0aWxlfHdjaGFyX3R8d2hpbGUpXFxiLztcbiAgdmFyIG1vZE5hbWUgPSAvXFxiKD8hPGtleXdvcmQ+KVxcdysoPzpcXHMqXFwuXFxzKlxcdyspKlxcYi8uc291cmNlLnJlcGxhY2UoLzxrZXl3b3JkPi9nLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGtleXdvcmQuc291cmNlO1xuICB9KTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmNwcCA9IFByaXNtLmxhbmd1YWdlcy5leHRlbmQoJ2MnLCB7XG4gICAgJ2NsYXNzLW5hbWUnOiBbe1xuICAgICAgcGF0dGVybjogUmVnRXhwKC8oXFxiKD86Y2xhc3N8Y29uY2VwdHxlbnVtfHN0cnVjdHx0eXBlbmFtZSlcXHMrKSg/ITxrZXl3b3JkPilcXHcrLy5zb3VyY2UucmVwbGFjZSgvPGtleXdvcmQ+L2csIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGtleXdvcmQuc291cmNlO1xuICAgICAgfSkpLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgIH0sXG4gICAgLy8gVGhpcyBpcyBpbnRlbmRlZCB0byBjYXB0dXJlIHRoZSBjbGFzcyBuYW1lIG9mIG1ldGhvZCBpbXBsZW1lbnRhdGlvbnMgbGlrZTpcbiAgICAvLyAgIHZvaWQgZm9vOjpiYXIoKSBjb25zdCB7fVxuICAgIC8vIEhvd2V2ZXIhIFRoZSBgZm9vYCBpbiB0aGUgYWJvdmUgZXhhbXBsZSBjb3VsZCBhbHNvIGJlIGEgbmFtZXNwYWNlLCBzbyB3ZSBvbmx5IGNhcHR1cmUgdGhlIGNsYXNzIG5hbWUgaWZcbiAgICAvLyBpdCBzdGFydHMgd2l0aCBhbiB1cHBlcmNhc2UgbGV0dGVyLiBUaGlzIGFwcHJveGltYXRpb24gc2hvdWxkIGdpdmUgZGVjZW50IHJlc3VsdHMuXG4gICAgL1xcYltBLVpdXFx3Kig/PVxccyo6OlxccypcXHcrXFxzKlxcKCkvLFxuICAgIC8vIFRoaXMgd2lsbCBjYXB0dXJlIHRoZSBjbGFzcyBuYW1lIGJlZm9yZSBkZXN0cnVjdG9ycyBsaWtlOlxuICAgIC8vICAgRm9vOjp+Rm9vKCkge31cbiAgICAvXFxiW0EtWl9dXFx3Kig/PVxccyo6Olxccyp+XFx3K1xccypcXCgpL2ksXG4gICAgLy8gVGhpcyBhbHNvIGludGVuZHMgdG8gY2FwdHVyZSB0aGUgY2xhc3MgbmFtZSBvZiBtZXRob2QgaW1wbGVtZW50YXRpb25zIGJ1dCBoZXJlIHRoZSBjbGFzcyBoYXMgdGVtcGxhdGVcbiAgICAvLyBwYXJhbWV0ZXJzLCBzbyBpdCBjYW4ndCBiZSBhIG5hbWVzcGFjZSAodW50aWwgQysrIGFkZHMgZ2VuZXJpYyBuYW1lc3BhY2VzKS5cbiAgICAvXFxiXFx3Kyg/PVxccyo8KD86W148Pl18PCg/OltePD5dfDxbXjw+XSo+KSo+KSo+XFxzKjo6XFxzKlxcdytcXHMqXFwoKS9dLFxuICAgICdrZXl3b3JkJzoga2V5d29yZCxcbiAgICAnbnVtYmVyJzoge1xuICAgICAgcGF0dGVybjogLyg/OlxcYjBiWzAxJ10rfFxcYjB4KD86W1xcZGEtZiddKyg/OlxcLltcXGRhLWYnXSopP3xcXC5bXFxkYS1mJ10rKSg/OnBbKy1dP1tcXGQnXSspP3woPzpcXGJbXFxkJ10rKD86XFwuW1xcZCddKik/fFxcQlxcLltcXGQnXSspKD86ZVsrLV0/W1xcZCddKyk/KVtmdWxdezAsNH0vaSxcbiAgICAgIGdyZWVkeTogdHJ1ZVxuICAgIH0sXG4gICAgJ29wZXJhdG9yJzogLz4+PT98PDw9P3wtPnwtLXxcXCtcXCt8JiZ8XFx8XFx8fFs/On5dfDw9PnxbLSsqLyUmfF4hPTw+XT0/fFxcYig/OmFuZHxhbmRfZXF8Yml0YW5kfGJpdG9yfG5vdHxub3RfZXF8b3J8b3JfZXF8eG9yfHhvcl9lcSlcXGIvLFxuICAgICdib29sZWFuJzogL1xcYig/OmZhbHNlfHRydWUpXFxiL1xuICB9KTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnY3BwJywgJ3N0cmluZycsIHtcbiAgICAnbW9kdWxlJzoge1xuICAgICAgLy8gaHR0cHM6Ly9lbi5jcHByZWZlcmVuY2UuY29tL3cvY3BwL2xhbmd1YWdlL21vZHVsZXNcbiAgICAgIHBhdHRlcm46IFJlZ0V4cCgvKFxcYig/OmltcG9ydHxtb2R1bGUpXFxzKykvLnNvdXJjZSArICcoPzonICtcbiAgICAgIC8vIGhlYWRlci1uYW1lXG4gICAgICAvXCIoPzpcXFxcKD86XFxyXFxufFtcXHNcXFNdKXxbXlwiXFxcXFxcclxcbl0pKlwifDxbXjw+XFxyXFxuXSo+Ly5zb3VyY2UgKyAnfCcgK1xuICAgICAgLy8gbW9kdWxlIG5hbWUgb3IgcGFydGl0aW9uIG9yIGJvdGhcbiAgICAgIC88bW9kLW5hbWU+KD86XFxzKjpcXHMqPG1vZC1uYW1lPik/fDpcXHMqPG1vZC1uYW1lPi8uc291cmNlLnJlcGxhY2UoLzxtb2QtbmFtZT4vZywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbW9kTmFtZTtcbiAgICAgIH0pICsgJyknKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ3N0cmluZyc6IC9eWzxcIl1bXFxzXFxTXSsvLFxuICAgICAgICAnb3BlcmF0b3InOiAvOi8sXG4gICAgICAgICdwdW5jdHVhdGlvbic6IC9cXC4vXG4gICAgICB9XG4gICAgfSxcbiAgICAncmF3LXN0cmluZyc6IHtcbiAgICAgIHBhdHRlcm46IC9SXCIoW14oKVxcXFwgXXswLDE2fSlcXChbXFxzXFxTXSo/XFwpXFwxXCIvLFxuICAgICAgYWxpYXM6ICdzdHJpbmcnLFxuICAgICAgZ3JlZWR5OiB0cnVlXG4gICAgfVxuICB9KTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnY3BwJywgJ2tleXdvcmQnLCB7XG4gICAgJ2dlbmVyaWMtZnVuY3Rpb24nOiB7XG4gICAgICBwYXR0ZXJuOiAvXFxiKD8hb3BlcmF0b3JcXGIpW2Etel9dXFx3Klxccyo8KD86W148Pl18PFtePD5dKj4pKj4oPz1cXHMqXFwoKS9pLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdmdW5jdGlvbic6IC9eXFx3Ky8sXG4gICAgICAgICdnZW5lcmljJzoge1xuICAgICAgICAgIHBhdHRlcm46IC88W1xcc1xcU10rLyxcbiAgICAgICAgICBhbGlhczogJ2NsYXNzLW5hbWUnLFxuICAgICAgICAgIGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLmNwcFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnY3BwJywgJ29wZXJhdG9yJywge1xuICAgICdkb3VibGUtY29sb24nOiB7XG4gICAgICBwYXR0ZXJuOiAvOjovLFxuICAgICAgYWxpYXM6ICdwdW5jdHVhdGlvbidcbiAgICB9XG4gIH0pO1xuICBQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdjcHAnLCAnY2xhc3MtbmFtZScsIHtcbiAgICAvLyB0aGUgYmFzZSBjbGF1c2UgaXMgYW4gb3B0aW9uYWwgbGlzdCBvZiBwYXJlbnQgY2xhc3Nlc1xuICAgIC8vIGh0dHBzOi8vZW4uY3BwcmVmZXJlbmNlLmNvbS93L2NwcC9sYW5ndWFnZS9jbGFzc1xuICAgICdiYXNlLWNsYXVzZSc6IHtcbiAgICAgIHBhdHRlcm46IC8oXFxiKD86Y2xhc3N8c3RydWN0KVxccytcXHcrXFxzKjpcXHMqKVteO3t9XCInXFxzXSsoPzpcXHMrW147e31cIidcXHNdKykqKD89XFxzKls7e10pLyxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBpbnNpZGU6IFByaXNtLmxhbmd1YWdlcy5leHRlbmQoJ2NwcCcsIHt9KVxuICAgIH1cbiAgfSk7XG4gIFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ2luc2lkZScsICdkb3VibGUtY29sb24nLCB7XG4gICAgLy8gQWxsIHVudG9rZW5pemVkIHdvcmRzIHRoYXQgYXJlIG5vdCBuYW1lc3BhY2VzIHNob3VsZCBiZSBjbGFzcyBuYW1lc1xuICAgICdjbGFzcy1uYW1lJzogL1xcYlthLXpfXVxcdypcXGIoPyFcXHMqOjopL2lcbiAgfSwgUHJpc20ubGFuZ3VhZ2VzLmNwcFsnYmFzZS1jbGF1c2UnXSk7XG59KShQcmlzbSk7XG5QcmlzbS5sYW5ndWFnZXMuYXJkdWlubyA9IFByaXNtLmxhbmd1YWdlcy5leHRlbmQoJ2NwcCcsIHtcbiAgJ2tleXdvcmQnOiAvXFxiKD86U3RyaW5nfGFycmF5fGJvb2x8Ym9vbGVhbnxicmVha3xieXRlfGNhc2V8Y2F0Y2h8Y29udGludWV8ZGVmYXVsdHxkb3xkb3VibGV8ZWxzZXxmaW5hbGx5fGZvcnxmdW5jdGlvbnxnb3RvfGlmfGlufGluc3RhbmNlb2Z8aW50fGludGVnZXJ8bG9uZ3xsb29wfG5ld3xudWxsfHJldHVybnxzZXR1cHxzdHJpbmd8c3dpdGNofHRocm93fHRyeXx2b2lkfHdoaWxlfHdvcmQpXFxiLyxcbiAgJ2NvbnN0YW50JzogL1xcYig/OkFOQUxPR19NRVNTQUdFfERFRkFVTFR8RElHSVRBTF9NRVNTQUdFfEVYVEVSTkFMfEZJUk1BVEFfU1RSSU5HfEhJR0h8SU5QVVR8SU5QVVRfUFVMTFVQfElOVEVSTkFMfElOVEVSTkFMMVYxfElOVEVSTkFMMlY1NnxMRURfQlVJTFRJTnxMT1d8T1VUUFVUfFJFUE9SVF9BTkFMT0d8UkVQT1JUX0RJR0lUQUx8U0VUX1BJTl9NT0RFfFNZU0VYX1NUQVJUfFNZU1RFTV9SRVNFVClcXGIvLFxuICAnYnVpbHRpbic6IC9cXGIoPzpBdWRpb3xCU1NJRHxCcmlkZ2V8Q2xpZW50fENvbnNvbGV8RUVQUk9NfEVzcGxvcmF8RXNwbG9yYVRGVHxFdGhlcm5ldHxFdGhlcm5ldENsaWVudHxFdGhlcm5ldFNlcnZlcnxFdGhlcm5ldFVEUHxGaWxlfEZpbGVJT3xGaWxlU3lzdGVtfEZpcm1hdGF8R1BSU3xHU018R1NNQmFuZHxHU01DbGllbnR8R1NNTW9kZW18R1NNUElOfEdTTVNjYW5uZXJ8R1NNU2VydmVyfEdTTVZvaWNlQ2FsbHxHU01fU01TfEh0dHBDbGllbnR8SVBBZGRyZXNzfElScmVhZHxLZXlib2FyZHxLZXlib2FyZENvbnRyb2xsZXJ8TGlxdWlkQ3J5c3RhbHxMaXF1aWRDcnlzdGFsX0kyQ3xNYWlsYm94fE1vdXNlfE1vdXNlQ29udHJvbGxlcnxQSW1hZ2V8UHJvY2Vzc3xSU1NJfFJvYm90Q29udHJvbHxSb2JvdE1vdG9yfFNEfFNQSXxTU0lEfFNjaGVkdWxlcnxTZXJpYWx8U2VydmVyfFNlcnZvfFNvZnR3YXJlU2VyaWFsfFN0ZXBwZXJ8U3RyZWFtfFRGVHxUYXNrfFVTQkhvc3R8V2lGaXxXaUZpQ2xpZW50fFdpRmlTZXJ2ZXJ8V2lGaVVEUHxXaXJlfFl1bkNsaWVudHxZdW5TZXJ2ZXJ8YWJzfGFkZFBhcmFtZXRlcnxhbmFsb2dSZWFkfGFuYWxvZ1JlYWRSZXNvbHV0aW9ufGFuYWxvZ1JlZmVyZW5jZXxhbmFsb2dXcml0ZXxhbmFsb2dXcml0ZVJlc29sdXRpb258YW5zd2VyQ2FsbHxhdHRhY2h8YXR0YWNoR1BSU3xhdHRhY2hJbnRlcnJ1cHR8YXR0YWNoZWR8YXV0b3Njcm9sbHxhdmFpbGFibGV8YmFja2dyb3VuZHxiZWVwfGJlZ2lufGJlZ2luUGFja2V0fGJlZ2luU0R8YmVnaW5TTVN8YmVnaW5TcGVha2VyfGJlZ2luVEZUfGJlZ2luVHJhbnNtaXNzaW9ufGJlZ2luV3JpdGV8Yml0fGJpdENsZWFyfGJpdFJlYWR8Yml0U2V0fGJpdFdyaXRlfGJsaW5rfGJsaW5rVmVyc2lvbnxidWZmZXJ8Y2hhbmdlUElOfGNoZWNrUElOfGNoZWNrUFVLfGNoZWNrUmVnfGNpcmNsZXxjaXR5TmFtZVJlYWR8Y2l0eU5hbWVXcml0ZXxjbGVhcnxjbGVhclNjcmVlbnxjbGlja3xjbG9zZXxjb21wYXNzUmVhZHxjb25maWd8Y29ubmVjdHxjb25uZWN0ZWR8Y29uc3RyYWlufGNvc3xjb3VudHJ5TmFtZVJlYWR8Y291bnRyeU5hbWVXcml0ZXxjcmVhdGVDaGFyfGN1cnNvcnxkZWJ1Z1ByaW50fGRlbGF5fGRlbGF5TWljcm9zZWNvbmRzfGRldGFjaHxkZXRhY2hJbnRlcnJ1cHR8ZGlnaXRhbFJlYWR8ZGlnaXRhbFdyaXRlfGRpc2Nvbm5lY3R8ZGlzcGxheXxkaXNwbGF5TG9nb3N8ZHJhd0JNUHxkcmF3Q29tcGFzc3xlbmNyeXB0aW9uVHlwZXxlbmR8ZW5kUGFja2V0fGVuZFNNU3xlbmRUcmFuc21pc3Npb258ZW5kV3JpdGV8ZXhpc3RzfGV4aXRWYWx1ZXxmaWxsfGZpbmR8ZmluZFVudGlsfGZsdXNofGdhdGV3YXlJUHxnZXR8Z2V0QXN5bmNocm9ub3VzbHl8Z2V0QmFuZHxnZXRCdXR0b258Z2V0Q3VycmVudENhcnJpZXJ8Z2V0SU1FSXxnZXRLZXl8Z2V0TW9kaWZpZXJzfGdldE9lbUtleXxnZXRQSU5Vc2VkfGdldFJlc3VsdHxnZXRTaWduYWxTdHJlbmd0aHxnZXRTb2NrZXR8Z2V0Vm9pY2VDYWxsU3RhdHVzfGdldFhDaGFuZ2V8Z2V0WUNoYW5nZXxoYW5nQ2FsbHxoZWlnaHR8aGlnaEJ5dGV8aG9tZXxpbWFnZXxpbnRlcnJ1cHRzfGlzQWN0aW9uRG9uZXxpc0RpcmVjdG9yeXxpc0xpc3RlbmluZ3xpc1BJTnxpc1ByZXNzZWR8aXNWYWxpZHxrZXlQcmVzc2VkfGtleVJlbGVhc2VkfGtleWJvYXJkUmVhZHxrbm9iUmVhZHxsZWZ0VG9SaWdodHxsaW5lfGxpbmVGb2xsb3dDb25maWd8bGlzdGVufGxpc3Rlbk9uTG9jYWxob3N0fGxvYWRJbWFnZXxsb2NhbElQfGxvd0J5dGV8bWFjQWRkcmVzc3xtYWludGFpbnxtYXB8bWF4fG1lc3NhZ2VBdmFpbGFibGV8bWljcm9zfG1pbGxpc3xtaW58bWtkaXJ8bW90b3JzU3RvcHxtb3RvcnNXcml0ZXxtb3VzZURyYWdnZWR8bW91c2VNb3ZlZHxtb3VzZVByZXNzZWR8bW91c2VSZWxlYXNlZHxtb3ZlfG5vQXV0b3Njcm9sbHxub0JsaW5rfG5vQnVmZmVyfG5vQ3Vyc29yfG5vRGlzcGxheXxub0ZpbGx8bm9JbnRlcnJ1cHRzfG5vTGlzdGVuT25Mb2NhbGhvc3R8bm9TdHJva2V8bm9Ub25lfG9uUmVjZWl2ZXxvblJlcXVlc3R8b3BlbnxvcGVuTmV4dEZpbGV8b3ZlcmZsb3d8cGFyc2VDb21tYW5kfHBhcnNlRmxvYXR8cGFyc2VJbnR8cGFyc2VQYWNrZXR8cGF1c2VNb2RlfHBlZWt8cGluTW9kZXxwbGF5RmlsZXxwbGF5TWVsb2R5fHBvaW50fHBvaW50VG98cG9zaXRpb258cG93fHByZXBhcmV8cHJlc3N8cHJpbnR8cHJpbnRGaXJtd2FyZVZlcnNpb258cHJpbnRWZXJzaW9ufHByaW50bG58cHJvY2Vzc3xwcm9jZXNzSW5wdXR8cHVsc2VJbnxwdXR8cmFuZG9tfHJhbmRvbVNlZWR8cmVhZHxyZWFkQWNjZWxlcm9tZXRlcnxyZWFkQmx1ZXxyZWFkQnV0dG9ufHJlYWRCeXRlc3xyZWFkQnl0ZXNVbnRpbHxyZWFkR3JlZW58cmVhZEpveXN0aWNrQnV0dG9ufHJlYWRKb3lzdGlja1N3aXRjaHxyZWFkSm95c3RpY2tYfHJlYWRKb3lzdGlja1l8cmVhZExpZ2h0U2Vuc29yfHJlYWRNZXNzYWdlfHJlYWRNaWNyb3Bob25lfHJlYWROZXR3b3Jrc3xyZWFkUmVkfHJlYWRTbGlkZXJ8cmVhZFN0cmluZ3xyZWFkU3RyaW5nVW50aWx8cmVhZFRlbXBlcmF0dXJlfHJlYWR5fHJlY3R8cmVsZWFzZXxyZWxlYXNlQWxsfHJlbW90ZUlQfHJlbW90ZU51bWJlcnxyZW1vdGVQb3J0fHJlbW92ZXxyZXF1ZXN0RnJvbXxyZXRyaWV2ZUNhbGxpbmdOdW1iZXJ8cmV3aW5kRGlyZWN0b3J5fHJpZ2h0VG9MZWZ0fHJtZGlyfHJvYm90TmFtZVJlYWR8cm9ib3ROYW1lV3JpdGV8cnVufHJ1bkFzeW5jaHJvbm91c2x5fHJ1blNoZWxsQ29tbWFuZHxydW5TaGVsbENvbW1hbmRBc3luY2hyb25vdXNseXxydW5uaW5nfHNjYW5OZXR3b3Jrc3xzY3JvbGxEaXNwbGF5TGVmdHxzY3JvbGxEaXNwbGF5UmlnaHR8c2Vla3xzZW5kQW5hbG9nfHNlbmREaWdpdGFsUG9ydFBhaXJ8c2VuZERpZ2l0YWxQb3J0c3xzZW5kU3RyaW5nfHNlbmRTeXNleHxzZXJpYWxFdmVudHxzZXRCYW5kfHNldEJpdE9yZGVyfHNldENsb2NrRGl2aWRlcnxzZXRDdXJzb3J8c2V0RE5TfHNldERhdGFNb2RlfHNldEZpcm13YXJlVmVyc2lvbnxzZXRNb2RlfHNldFBJTlVzZWR8c2V0U3BlZWR8c2V0VGV4dFNpemV8c2V0VGltZW91dHxzaGlmdElufHNoaWZ0T3V0fHNodXRkb3dufHNpbnxzaXplfHNxcnR8c3RhcnRMb29wfHN0ZXB8c3RvcHxzdHJva2V8c3VibmV0TWFza3xzd2l0Y2hQSU58dGFufHRlbXBvV3JpdGV8dGV4dHx0b25lfHRyYW5zZmVyfHR1bmVXcml0ZXx0dXJufHVwZGF0ZUlSfHVzZXJOYW1lUmVhZHx1c2VyTmFtZVdyaXRlfHZvaWNlQ2FsbHx3YWl0Q29udGludWV8d2lkdGh8d3JpdGV8d3JpdGVCbHVlfHdyaXRlR3JlZW58d3JpdGVKU09OfHdyaXRlTWVzc2FnZXx3cml0ZU1pY3Jvc2Vjb25kc3x3cml0ZVJHQnx3cml0ZVJlZHx5aWVsZClcXGIvXG59KTtcblByaXNtLmxhbmd1YWdlcy5pbm8gPSBQcmlzbS5sYW5ndWFnZXMuYXJkdWlubztcbihmdW5jdGlvbiAoUHJpc20pIHtcbiAgLy8gJCBzZXQgfCBncmVwICdeW0EtWl1bXls6c3BhY2U6XV0qPScgfCBjdXQgLWQ9IC1mMSB8IHRyICdcXG4nICd8J1xuICAvLyArIExDX0FMTCwgUkFORE9NLCBSRVBMWSwgU0VDT05EUy5cbiAgLy8gKyBtYWtlIHN1cmUgUFMxLi40IGFyZSBoZXJlIGFzIHRoZXkgYXJlIG5vdCBhbHdheXMgc2V0LFxuICAvLyAtIHNvbWUgdXNlbGVzcyB0aGluZ3MuXG4gIHZhciBlbnZWYXJzID0gJ1xcXFxiKD86QkFTSHxCQVNIT1BUU3xCQVNIX0FMSUFTRVN8QkFTSF9BUkdDfEJBU0hfQVJHVnxCQVNIX0NNRFN8QkFTSF9DT01QTEVUSU9OX0NPTVBBVF9ESVJ8QkFTSF9MSU5FTk98QkFTSF9SRU1BVENIfEJBU0hfU09VUkNFfEJBU0hfVkVSU0lORk98QkFTSF9WRVJTSU9OfENPTE9SVEVSTXxDT0xVTU5TfENPTVBfV09SREJSRUFLU3xEQlVTX1NFU1NJT05fQlVTX0FERFJFU1N8REVGQVVMVFNfUEFUSHxERVNLVE9QX1NFU1NJT058RElSU1RBQ0t8RElTUExBWXxFVUlEfEdETVNFU1NJT058R0RNX0xBTkd8R05PTUVfS0VZUklOR19DT05UUk9MfEdOT01FX0tFWVJJTkdfUElEfEdQR19BR0VOVF9JTkZPfEdST1VQU3xISVNUQ09OVFJPTHxISVNURklMRXxISVNURklMRVNJWkV8SElTVFNJWkV8SE9NRXxIT1NUTkFNRXxIT1NUVFlQRXxJRlN8SU5TVEFOQ0V8Sk9CfExBTkd8TEFOR1VBR0V8TENfQUREUkVTU3xMQ19BTEx8TENfSURFTlRJRklDQVRJT058TENfTUVBU1VSRU1FTlR8TENfTU9ORVRBUll8TENfTkFNRXxMQ19OVU1FUklDfExDX1BBUEVSfExDX1RFTEVQSE9ORXxMQ19USU1FfExFU1NDTE9TRXxMRVNTT1BFTnxMSU5FU3xMT0dOQU1FfExTX0NPTE9SU3xNQUNIVFlQRXxNQUlMQ0hFQ0t8TUFOREFUT1JZX1BBVEh8Tk9fQVRfQlJJREdFfE9MRFBXRHxPUFRFUlJ8T1BUSU5EfE9SQklUX1NPQ0tFVERJUnxPU1RZUEV8UEFQRVJTSVpFfFBBVEh8UElQRVNUQVRVU3xQUElEfFBTMXxQUzJ8UFMzfFBTNHxQV0R8UkFORE9NfFJFUExZfFNFQ09ORFN8U0VMSU5VWF9JTklUfFNFU1NJT058U0VTU0lPTlRZUEV8U0VTU0lPTl9NQU5BR0VSfFNIRUxMfFNIRUxMT1BUU3xTSExWTHxTU0hfQVVUSF9TT0NLfFRFUk18VUlEfFVQU1RBUlRfRVZFTlRTfFVQU1RBUlRfSU5TVEFOQ0V8VVBTVEFSVF9KT0J8VVBTVEFSVF9TRVNTSU9OfFVTRVJ8V0lORE9XSUR8WEFVVEhPUklUWXxYREdfQ09ORklHX0RJUlN8WERHX0NVUlJFTlRfREVTS1RPUHxYREdfREFUQV9ESVJTfFhER19HUkVFVEVSX0RBVEFfRElSfFhER19NRU5VX1BSRUZJWHxYREdfUlVOVElNRV9ESVJ8WERHX1NFQVR8WERHX1NFQVRfUEFUSHxYREdfU0VTU0lPTl9ERVNLVE9QfFhER19TRVNTSU9OX0lEfFhER19TRVNTSU9OX1BBVEh8WERHX1NFU1NJT05fVFlQRXxYREdfVlROUnxYTU9ESUZJRVJTKVxcXFxiJztcbiAgdmFyIGNvbW1hbmRBZnRlckhlcmVkb2MgPSB7XG4gICAgcGF0dGVybjogLyheKFtcIiddPylcXHcrXFwyKVsgXFx0XStcXFMuKi8sXG4gICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICBhbGlhczogJ3B1bmN0dWF0aW9uJyxcbiAgICAvLyB0aGlzIGxvb2tzIHJlYXNvbmFibHkgd2VsbCBpbiBhbGwgdGhlbWVzXG4gICAgaW5zaWRlOiBudWxsIC8vIHNlZSBiZWxvd1xuICB9O1xuICB2YXIgaW5zaWRlU3RyaW5nID0ge1xuICAgICdiYXNoJzogY29tbWFuZEFmdGVySGVyZWRvYyxcbiAgICAnZW52aXJvbm1lbnQnOiB7XG4gICAgICBwYXR0ZXJuOiBSZWdFeHAoJ1xcXFwkJyArIGVudlZhcnMpLFxuICAgICAgYWxpYXM6ICdjb25zdGFudCdcbiAgICB9LFxuICAgICd2YXJpYWJsZSc6IFtcbiAgICAvLyBbMF06IEFyaXRobWV0aWMgRW52aXJvbm1lbnRcbiAgICB7XG4gICAgICBwYXR0ZXJuOiAvXFwkP1xcKFxcKFtcXHNcXFNdKz9cXClcXCkvLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGEgJCBzaWduIGF0IHRoZSBiZWdpbm5pbmcgaGlnaGxpZ2h0ICQoKCBhbmQgKSkgYXMgdmFyaWFibGVcbiAgICAgICAgJ3ZhcmlhYmxlJzogW3tcbiAgICAgICAgICBwYXR0ZXJuOiAvKF5cXCRcXChcXChbXFxzXFxTXSspXFwpXFwpLyxcbiAgICAgICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgICAgIH0sIC9eXFwkXFwoXFwoL10sXG4gICAgICAgICdudW1iZXInOiAvXFxiMHhbXFxkQS1GYS1mXStcXGJ8KD86XFxiXFxkKyg/OlxcLlxcZCopP3xcXEJcXC5cXGQrKSg/OltFZV0tP1xcZCspPy8sXG4gICAgICAgIC8vIE9wZXJhdG9ycyBhY2NvcmRpbmcgdG8gaHR0cHM6Ly93d3cuZ251Lm9yZy9zb2Z0d2FyZS9iYXNoL21hbnVhbC9iYXNocmVmLmh0bWwjU2hlbGwtQXJpdGhtZXRpY1xuICAgICAgICAnb3BlcmF0b3InOiAvLS18XFwrXFwrfFxcKlxcKj0/fDw8PT98Pj49P3wmJnxcXHxcXHx8Wz0hK1xcLSovJTw+XiZ8XT0/fFs/fjpdLyxcbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gJCBzaWduIGF0IHRoZSBiZWdpbm5pbmcgaGlnaGxpZ2h0ICgoIGFuZCApKSBhcyBwdW5jdHVhdGlvblxuICAgICAgICAncHVuY3R1YXRpb24nOiAvXFwoXFwoP3xcXClcXCk/fCx8Oy9cbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIFsxXTogQ29tbWFuZCBTdWJzdGl0dXRpb25cbiAgICB7XG4gICAgICBwYXR0ZXJuOiAvXFwkXFwoKD86XFwoW14pXStcXCl8W14oKV0pK1xcKXxgW15gXStgLyxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAndmFyaWFibGUnOiAvXlxcJFxcKHxeYHxcXCkkfGAkL1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gWzJdOiBCcmFjZSBleHBhbnNpb25cbiAgICB7XG4gICAgICBwYXR0ZXJuOiAvXFwkXFx7W159XStcXH0vLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdvcGVyYXRvcic6IC86Wy09PytdP3xbIVxcL118IyM/fCUlP3xcXF5cXF4/fCwsPy8sXG4gICAgICAgICdwdW5jdHVhdGlvbic6IC9bXFxbXFxdXS8sXG4gICAgICAgICdlbnZpcm9ubWVudCc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiBSZWdFeHAoJyhcXFxceyknICsgZW52VmFycyksXG4gICAgICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgICAgICBhbGlhczogJ2NvbnN0YW50J1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgL1xcJCg/Olxcdyt8WyM/KiFAJF0pL10sXG4gICAgLy8gRXNjYXBlIHNlcXVlbmNlcyBmcm9tIGVjaG8gYW5kIHByaW50ZidzIG1hbnVhbHMsIGFuZCBlc2NhcGVkIHF1b3Rlcy5cbiAgICAnZW50aXR5JzogL1xcXFwoPzpbYWJjZUVmbnJ0dlxcXFxcIl18Tz9bMC03XXsxLDN9fFVbMC05YS1mQS1GXXs4fXx1WzAtOWEtZkEtRl17NH18eFswLTlhLWZBLUZdezEsMn0pL1xuICB9O1xuICBQcmlzbS5sYW5ndWFnZXMuYmFzaCA9IHtcbiAgICAnc2hlYmFuZyc6IHtcbiAgICAgIHBhdHRlcm46IC9eIyFcXHMqXFwvLiovLFxuICAgICAgYWxpYXM6ICdpbXBvcnRhbnQnXG4gICAgfSxcbiAgICAnY29tbWVudCc6IHtcbiAgICAgIHBhdHRlcm46IC8oXnxbXlwie1xcXFwkXSkjLiovLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgIH0sXG4gICAgJ2Z1bmN0aW9uLW5hbWUnOiBbXG4gICAgLy8gYSkgZnVuY3Rpb24gZm9vIHtcbiAgICAvLyBiKSBmb28oKSB7XG4gICAgLy8gYykgZnVuY3Rpb24gZm9vKCkge1xuICAgIC8vIGJ1dCBub3Qg4oCcZm9vIHvigJ1cbiAgICB7XG4gICAgICAvLyBhKSBhbmQgYylcbiAgICAgIHBhdHRlcm46IC8oXFxiZnVuY3Rpb25cXHMrKVtcXHctXSsoPz0oPzpcXHMqXFwoPzpcXHMqXFwpKT9cXHMqXFx7KS8sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgYWxpYXM6ICdmdW5jdGlvbidcbiAgICB9LCB7XG4gICAgICAvLyBiKVxuICAgICAgcGF0dGVybjogL1xcYltcXHctXSsoPz1cXHMqXFwoXFxzKlxcKVxccypcXHspLyxcbiAgICAgIGFsaWFzOiAnZnVuY3Rpb24nXG4gICAgfV0sXG4gICAgLy8gSGlnaGxpZ2h0IHZhcmlhYmxlIG5hbWVzIGFzIHZhcmlhYmxlcyBpbiBmb3IgYW5kIHNlbGVjdCBiZWdpbm5pbmdzLlxuICAgICdmb3Itb3Itc2VsZWN0Jzoge1xuICAgICAgcGF0dGVybjogLyhcXGIoPzpmb3J8c2VsZWN0KVxccyspXFx3Kyg/PVxccytpblxccykvLFxuICAgICAgYWxpYXM6ICd2YXJpYWJsZScsXG4gICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgfSxcbiAgICAvLyBIaWdobGlnaHQgdmFyaWFibGUgbmFtZXMgYXMgdmFyaWFibGVzIGluIHRoZSBsZWZ0LWhhbmQgcGFydFxuICAgIC8vIG9mIGFzc2lnbm1lbnRzICjigJw94oCdIGFuZCDigJwrPeKAnSkuXG4gICAgJ2Fzc2lnbi1sZWZ0Jzoge1xuICAgICAgcGF0dGVybjogLyhefFtcXHM7fCZdfFs8Pl1cXCgpXFx3Kyg/OlxcLlxcdyspKig/PVxcKz89KS8sXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ2Vudmlyb25tZW50Jzoge1xuICAgICAgICAgIHBhdHRlcm46IFJlZ0V4cCgnKF58W1xcXFxzO3wmXXxbPD5dXFxcXCgpJyArIGVudlZhcnMpLFxuICAgICAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICAgICAgYWxpYXM6ICdjb25zdGFudCdcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGFsaWFzOiAndmFyaWFibGUnLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgIH0sXG4gICAgLy8gSGlnaGxpZ2h0IHBhcmFtZXRlciBuYW1lcyBhcyB2YXJpYWJsZXNcbiAgICAncGFyYW1ldGVyJzoge1xuICAgICAgcGF0dGVybjogLyhefFxccyktezEsMn0oPzpcXHcrOlsrLV0/KT9cXHcrKD86XFwuXFx3KykqKD89Wz1cXHNdfCQpLyxcbiAgICAgIGFsaWFzOiAndmFyaWFibGUnLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgIH0sXG4gICAgJ3N0cmluZyc6IFtcbiAgICAvLyBTdXBwb3J0IGZvciBIZXJlLWRvY3VtZW50cyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9IZXJlX2RvY3VtZW50XG4gICAge1xuICAgICAgcGF0dGVybjogLygoPzpefFtePF0pPDwtP1xccyopKFxcdyspXFxzW1xcc1xcU10qPyg/Olxccj9cXG58XFxyKVxcMi8sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiBpbnNpZGVTdHJpbmdcbiAgICB9LFxuICAgIC8vIEhlcmUtZG9jdW1lbnQgd2l0aCBxdW90ZXMgYXJvdW5kIHRoZSB0YWdcbiAgICAvLyDihpIgTm8gZXhwYW5zaW9uIChzbyBubyDigJxpbnNpZGXigJ0pLlxuICAgIHtcbiAgICAgIHBhdHRlcm46IC8oKD86XnxbXjxdKTw8LT9cXHMqKShbXCInXSkoXFx3KylcXDJcXHNbXFxzXFxTXSo/KD86XFxyP1xcbnxcXHIpXFwzLyxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ2Jhc2gnOiBjb21tYW5kQWZ0ZXJIZXJlZG9jXG4gICAgICB9XG4gICAgfSxcbiAgICAvLyDigJxOb3JtYWzigJ0gc3RyaW5nXG4gICAge1xuICAgICAgLy8gaHR0cHM6Ly93d3cuZ251Lm9yZy9zb2Z0d2FyZS9iYXNoL21hbnVhbC9odG1sX25vZGUvRG91YmxlLVF1b3Rlcy5odG1sXG4gICAgICBwYXR0ZXJuOiAvKF58W15cXFxcXSg/OlxcXFxcXFxcKSopXCIoPzpcXFxcW1xcc1xcU118XFwkXFwoW14pXStcXCl8XFwkKD8hXFwoKXxgW15gXStgfFteXCJcXFxcYCRdKSpcIi8sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiBpbnNpZGVTdHJpbmdcbiAgICB9LCB7XG4gICAgICAvLyBodHRwczovL3d3dy5nbnUub3JnL3NvZnR3YXJlL2Jhc2gvbWFudWFsL2h0bWxfbm9kZS9TaW5nbGUtUXVvdGVzLmh0bWxcbiAgICAgIHBhdHRlcm46IC8oXnxbXiRcXFxcXSknW14nXSonLyxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBncmVlZHk6IHRydWVcbiAgICB9LCB7XG4gICAgICAvLyBodHRwczovL3d3dy5nbnUub3JnL3NvZnR3YXJlL2Jhc2gvbWFudWFsL2h0bWxfbm9kZS9BTlNJXzAwMmRDLVF1b3RpbmcuaHRtbFxuICAgICAgcGF0dGVybjogL1xcJCcoPzpbXidcXFxcXXxcXFxcW1xcc1xcU10pKicvLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdlbnRpdHknOiBpbnNpZGVTdHJpbmcuZW50aXR5XG4gICAgICB9XG4gICAgfV0sXG4gICAgJ2Vudmlyb25tZW50Jzoge1xuICAgICAgcGF0dGVybjogUmVnRXhwKCdcXFxcJD8nICsgZW52VmFycyksXG4gICAgICBhbGlhczogJ2NvbnN0YW50J1xuICAgIH0sXG4gICAgJ3ZhcmlhYmxlJzogaW5zaWRlU3RyaW5nLnZhcmlhYmxlLFxuICAgICdmdW5jdGlvbic6IHtcbiAgICAgIHBhdHRlcm46IC8oXnxbXFxzO3wmXXxbPD5dXFwoKSg/OmFkZHxhcHJvcG9zfGFwdHxhcHQtY2FjaGV8YXB0LWdldHxhcHRpdHVkZXxhc3BlbGx8YXV0b215c3FsYmFja3VwfGF3a3xiYXNlbmFtZXxiYXNofGJjfGJjb25zb2xlfGJnfGJ6aXAyfGNhbHxjYXJnb3xjYXR8Y2ZkaXNrfGNoZ3JwfGNoa2NvbmZpZ3xjaG1vZHxjaG93bnxjaHJvb3R8Y2tzdW18Y2xlYXJ8Y21wfGNvbHVtbnxjb21tfGNvbXBvc2VyfGNwfGNyb258Y3JvbnRhYnxjc3BsaXR8Y3VybHxjdXR8ZGF0ZXxkY3xkZHxkZHJlc2N1ZXxkZWJvb3RzdHJhcHxkZnxkaWZmfGRpZmYzfGRpZ3xkaXJ8ZGlyY29sb3JzfGRpcm5hbWV8ZGlyc3xkbWVzZ3xkb2NrZXJ8ZG9ja2VyLWNvbXBvc2V8ZHV8ZWdyZXB8ZWplY3R8ZW52fGV0aHRvb2x8ZXhwYW5kfGV4cGVjdHxleHByfGZkZm9ybWF0fGZkaXNrfGZnfGZncmVwfGZpbGV8ZmluZHxmbXR8Zm9sZHxmb3JtYXR8ZnJlZXxmc2NrfGZ0cHxmdXNlcnxnYXdrfGdpdHxncGFydGVkfGdyZXB8Z3JvdXBhZGR8Z3JvdXBkZWx8Z3JvdXBtb2R8Z3JvdXBzfGdydWItbWtjb25maWd8Z3ppcHxoYWx0fGhlYWR8aGd8aGlzdG9yeXxob3N0fGhvc3RuYW1lfGh0b3B8aWNvbnZ8aWR8aWZjb25maWd8aWZkb3dufGlmdXB8aW1wb3J0fGluc3RhbGx8aXB8amF2YXxqb2JzfGpvaW58a2lsbHxraWxsYWxsfGxlc3N8bGlua3xsbnxsb2NhdGV8bG9nbmFtZXxsb2dyb3RhdGV8bG9va3xscGN8bHByfGxwcmludHxscHJpbnRkfGxwcmludHF8bHBybXxsc3xsc29mfGx5bnh8bWFrZXxtYW58bWN8bWRhZG18bWtjb25maWd8bWtkaXJ8bWtlMmZzfG1rZmlmb3xta2ZzfG1raXNvZnN8bWtub2R8bWtzd2FwfG1tdnxtb3JlfG1vc3R8bW91bnR8bXRvb2xzfG10cnxtdXR0fG12fG5hbm98bmN8bmV0c3RhdHxuaWNlfG5sfG5vZGV8bm9odXB8bm90aWZ5LXNlbmR8bnBtfG5zbG9va3VwfG9wfG9wZW58cGFydGVkfHBhc3N3ZHxwYXN0ZXxwYXRoY2hrfHBpbmd8cGtpbGx8cG5wbXxwb2RtYW58cG9kbWFuLWNvbXBvc2V8cG9wZHxwcnxwcmludGNhcHxwcmludGVudnxwc3xwdXNoZHxwdnxxdW90YXxxdW90YWNoZWNrfHF1b3RhY3RsfHJhbXxyYXJ8cmNwfHJlYm9vdHxyZW1zeW5jfHJlbmFtZXxyZW5pY2V8cmV2fHJtfHJtZGlyfHJwbXxyc3luY3xzY3B8c2NyZWVufHNkaWZmfHNlZHxzZW5kbWFpbHxzZXF8c2VydmljZXxzZnRwfHNofHNoZWxsY2hlY2t8c2h1ZnxzaHV0ZG93bnxzbGVlcHxzbG9jYXRlfHNvcnR8c3BsaXR8c3NofHN0YXR8c3RyYWNlfHN1fHN1ZG98c3VtfHN1c3BlbmR8c3dhcG9ufHN5bmN8c3lzY3RsfHRhY3x0YWlsfHRhcnx0ZWV8dGltZXx0aW1lb3V0fHRvcHx0b3VjaHx0cnx0cmFjZXJvdXRlfHRzb3J0fHR0eXx1bW91bnR8dW5hbWV8dW5leHBhbmR8dW5pcXx1bml0c3x1bnJhcnx1bnNoYXJ8dW56aXB8dXBkYXRlLWdydWJ8dXB0aW1lfHVzZXJhZGR8dXNlcmRlbHx1c2VybW9kfHVzZXJzfHV1ZGVjb2RlfHV1ZW5jb2RlfHZ8dmNwa2d8dmRpcnx2aXx2aW18dmlyc2h8dm1zdGF0fHdhaXR8d2F0Y2h8d2N8d2dldHx3aGVyZWlzfHdoaWNofHdob3x3aG9hbWl8d3JpdGV8eGFyZ3N8eGRnLW9wZW58eWFybnx5ZXN8emVuaXR5fHppcHx6c2h8enlwcGVyKSg/PSR8WylcXHM7fCZdKS8sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgfSxcbiAgICAna2V5d29yZCc6IHtcbiAgICAgIHBhdHRlcm46IC8oXnxbXFxzO3wmXXxbPD5dXFwoKSg/OmNhc2V8ZG98ZG9uZXxlbGlmfGVsc2V8ZXNhY3xmaXxmb3J8ZnVuY3Rpb258aWZ8aW58c2VsZWN0fHRoZW58dW50aWx8d2hpbGUpKD89JHxbKVxcczt8Jl0pLyxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICB9LFxuICAgIC8vIGh0dHBzOi8vd3d3LmdudS5vcmcvc29mdHdhcmUvYmFzaC9tYW51YWwvaHRtbF9ub2RlL1NoZWxsLUJ1aWx0aW4tQ29tbWFuZHMuaHRtbFxuICAgICdidWlsdGluJzoge1xuICAgICAgcGF0dGVybjogLyhefFtcXHM7fCZdfFs8Pl1cXCgpKD86XFwufDp8YWxpYXN8YmluZHxicmVha3xidWlsdGlufGNhbGxlcnxjZHxjb21tYW5kfGNvbnRpbnVlfGRlY2xhcmV8ZWNob3xlbmFibGV8ZXZhbHxleGVjfGV4aXR8ZXhwb3J0fGdldG9wdHN8aGFzaHxoZWxwfGxldHxsb2NhbHxsb2dvdXR8bWFwZmlsZXxwcmludGZ8cHdkfHJlYWR8cmVhZGFycmF5fHJlYWRvbmx5fHJldHVybnxzZXR8c2hpZnR8c2hvcHR8c291cmNlfHRlc3R8dGltZXN8dHJhcHx0eXBlfHR5cGVzZXR8dWxpbWl0fHVtYXNrfHVuYWxpYXN8dW5zZXQpKD89JHxbKVxcczt8Jl0pLyxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICAvLyBBbGlhcyBhZGRlZCB0byBtYWtlIHRob3NlIGVhc2llciB0byBkaXN0aW5ndWlzaCBmcm9tIHN0cmluZ3MuXG4gICAgICBhbGlhczogJ2NsYXNzLW5hbWUnXG4gICAgfSxcbiAgICAnYm9vbGVhbic6IHtcbiAgICAgIHBhdHRlcm46IC8oXnxbXFxzO3wmXXxbPD5dXFwoKSg/OmZhbHNlfHRydWUpKD89JHxbKVxcczt8Jl0pLyxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICB9LFxuICAgICdmaWxlLWRlc2NyaXB0b3InOiB7XG4gICAgICBwYXR0ZXJuOiAvXFxCJlxcZFxcYi8sXG4gICAgICBhbGlhczogJ2ltcG9ydGFudCdcbiAgICB9LFxuICAgICdvcGVyYXRvcic6IHtcbiAgICAgIC8vIExvdHMgb2YgcmVkaXJlY3Rpb25zIGhlcmUsIGJ1dCBub3QganVzdCB0aGF0LlxuICAgICAgcGF0dGVybjogL1xcZD88Pnw+XFx8fFxcKz18PVs9fl0/fCE9P3w8PFs8LV0/fFsmXFxkXT8+PnxcXGRbPD5dJj98Wzw+XVsmPV0/fCZbPiZdP3xcXHxbJnxdPy8sXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ2ZpbGUtZGVzY3JpcHRvcic6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvXlxcZC8sXG4gICAgICAgICAgYWxpYXM6ICdpbXBvcnRhbnQnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgICdwdW5jdHVhdGlvbic6IC9cXCQ/XFwoXFwoP3xcXClcXCk/fFxcLlxcLnxbe31bXFxdO1xcXFxdLyxcbiAgICAnbnVtYmVyJzoge1xuICAgICAgcGF0dGVybjogLyhefFxccykoPzpbMS05XVxcZCp8MCkoPzpbLixdXFxkKyk/XFxiLyxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICB9XG4gIH07XG4gIGNvbW1hbmRBZnRlckhlcmVkb2MuaW5zaWRlID0gUHJpc20ubGFuZ3VhZ2VzLmJhc2g7XG5cbiAgLyogUGF0dGVybnMgaW4gY29tbWFuZCBzdWJzdGl0dXRpb24uICovXG4gIHZhciB0b0JlQ29waWVkID0gWydjb21tZW50JywgJ2Z1bmN0aW9uLW5hbWUnLCAnZm9yLW9yLXNlbGVjdCcsICdhc3NpZ24tbGVmdCcsICdwYXJhbWV0ZXInLCAnc3RyaW5nJywgJ2Vudmlyb25tZW50JywgJ2Z1bmN0aW9uJywgJ2tleXdvcmQnLCAnYnVpbHRpbicsICdib29sZWFuJywgJ2ZpbGUtZGVzY3JpcHRvcicsICdvcGVyYXRvcicsICdwdW5jdHVhdGlvbicsICdudW1iZXInXTtcbiAgdmFyIGluc2lkZSA9IGluc2lkZVN0cmluZy52YXJpYWJsZVsxXS5pbnNpZGU7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdG9CZUNvcGllZC5sZW5ndGg7IGkrKykge1xuICAgIGluc2lkZVt0b0JlQ29waWVkW2ldXSA9IFByaXNtLmxhbmd1YWdlcy5iYXNoW3RvQmVDb3BpZWRbaV1dO1xuICB9XG4gIFByaXNtLmxhbmd1YWdlcy5zaCA9IFByaXNtLmxhbmd1YWdlcy5iYXNoO1xuICBQcmlzbS5sYW5ndWFnZXMuc2hlbGwgPSBQcmlzbS5sYW5ndWFnZXMuYmFzaDtcbn0pKFByaXNtKTtcbihmdW5jdGlvbiAoUHJpc20pIHtcbiAgLyoqXG4gICAqIFJlcGxhY2VzIGFsbCBwbGFjZWhvbGRlcnMgXCI8PG4+PlwiIG9mIGdpdmVuIHBhdHRlcm4gd2l0aCB0aGUgbi10aCByZXBsYWNlbWVudCAoemVybyBiYXNlZCkuXG4gICAqXG4gICAqIE5vdGU6IFRoaXMgaXMgYSBzaW1wbGUgdGV4dCBiYXNlZCByZXBsYWNlbWVudC4gQmUgY2FyZWZ1bCB3aGVuIHVzaW5nIGJhY2tyZWZlcmVuY2VzIVxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0dGVybiB0aGUgZ2l2ZW4gcGF0dGVybi5cbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gcmVwbGFjZW1lbnRzIGEgbGlzdCBvZiByZXBsYWNlbWVudCB3aGljaCBjYW4gYmUgaW5zZXJ0ZWQgaW50byB0aGUgZ2l2ZW4gcGF0dGVybi5cbiAgICogQHJldHVybnMge3N0cmluZ30gdGhlIHBhdHRlcm4gd2l0aCBhbGwgcGxhY2Vob2xkZXJzIHJlcGxhY2VkIHdpdGggdGhlaXIgY29ycmVzcG9uZGluZyByZXBsYWNlbWVudHMuXG4gICAqIEBleGFtcGxlIHJlcGxhY2UoL2E8PDA+PmEvLnNvdXJjZSwgWy9iKy8uc291cmNlXSkgPT09IC9hKD86YispYS8uc291cmNlXG4gICAqL1xuICBmdW5jdGlvbiByZXBsYWNlKHBhdHRlcm4sIHJlcGxhY2VtZW50cykge1xuICAgIHJldHVybiBwYXR0ZXJuLnJlcGxhY2UoLzw8KFxcZCspPj4vZywgZnVuY3Rpb24gKG0sIGluZGV4KSB7XG4gICAgICByZXR1cm4gJyg/OicgKyByZXBsYWNlbWVudHNbK2luZGV4XSArICcpJztcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBhdHRlcm5cbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gcmVwbGFjZW1lbnRzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbZmxhZ3NdXG4gICAqIEByZXR1cm5zIHtSZWdFeHB9XG4gICAqL1xuICBmdW5jdGlvbiByZShwYXR0ZXJuLCByZXBsYWNlbWVudHMsIGZsYWdzKSB7XG4gICAgcmV0dXJuIFJlZ0V4cChyZXBsYWNlKHBhdHRlcm4sIHJlcGxhY2VtZW50cyksIGZsYWdzIHx8ICcnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmVzdGVkIHBhdHRlcm4gd2hlcmUgYWxsIG9jY3VycmVuY2VzIG9mIHRoZSBzdHJpbmcgYDw8c2VsZj4+YCBhcmUgcmVwbGFjZWQgd2l0aCB0aGUgcGF0dGVybiBpdHNlbGYuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwYXR0ZXJuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkZXB0aExvZzJcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIGZ1bmN0aW9uIG5lc3RlZChwYXR0ZXJuLCBkZXB0aExvZzIpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRlcHRoTG9nMjsgaSsrKSB7XG4gICAgICBwYXR0ZXJuID0gcGF0dGVybi5yZXBsYWNlKC88PHNlbGY+Pi9nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAnKD86JyArIHBhdHRlcm4gKyAnKSc7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdHRlcm4ucmVwbGFjZSgvPDxzZWxmPj4vZywgJ1teXFxcXHNcXFxcU10nKTtcbiAgfVxuXG4gIC8vIGh0dHBzOi8vZG9jcy5taWNyb3NvZnQuY29tL2VuLXVzL2RvdG5ldC9jc2hhcnAvbGFuZ3VhZ2UtcmVmZXJlbmNlL2tleXdvcmRzL1xuICB2YXIga2V5d29yZEtpbmRzID0ge1xuICAgIC8vIGtleXdvcmRzIHdoaWNoIHJlcHJlc2VudCBhIHJldHVybiBvciB2YXJpYWJsZSB0eXBlXG4gICAgdHlwZTogJ2Jvb2wgYnl0ZSBjaGFyIGRlY2ltYWwgZG91YmxlIGR5bmFtaWMgZmxvYXQgaW50IGxvbmcgb2JqZWN0IHNieXRlIHNob3J0IHN0cmluZyB1aW50IHVsb25nIHVzaG9ydCB2YXIgdm9pZCcsXG4gICAgLy8ga2V5d29yZHMgd2hpY2ggYXJlIHVzZWQgdG8gZGVjbGFyZSBhIHR5cGVcbiAgICB0eXBlRGVjbGFyYXRpb246ICdjbGFzcyBlbnVtIGludGVyZmFjZSByZWNvcmQgc3RydWN0JyxcbiAgICAvLyBjb250ZXh0dWFsIGtleXdvcmRzXG4gICAgLy8gKFwidmFyXCIgYW5kIFwiZHluYW1pY1wiIGFyZSBtaXNzaW5nIGJlY2F1c2UgdGhleSBhcmUgdXNlZCBsaWtlIHR5cGVzKVxuICAgIGNvbnRleHR1YWw6ICdhZGQgYWxpYXMgYW5kIGFzY2VuZGluZyBhc3luYyBhd2FpdCBieSBkZXNjZW5kaW5nIGZyb20oPz1cXFxccyooPzpcXFxcd3wkKSkgZ2V0IGdsb2JhbCBncm91cCBpbnRvIGluaXQoPz1cXFxccyo7KSBqb2luIGxldCBuYW1lb2Ygbm90IG5vdG51bGwgb24gb3Igb3JkZXJieSBwYXJ0aWFsIHJlbW92ZSBzZWxlY3Qgc2V0IHVubWFuYWdlZCB2YWx1ZSB3aGVuIHdoZXJlIHdpdGgoPz1cXFxccyp7KScsXG4gICAgLy8gYWxsIG90aGVyIGtleXdvcmRzXG4gICAgb3RoZXI6ICdhYnN0cmFjdCBhcyBiYXNlIGJyZWFrIGNhc2UgY2F0Y2ggY2hlY2tlZCBjb25zdCBjb250aW51ZSBkZWZhdWx0IGRlbGVnYXRlIGRvIGVsc2UgZXZlbnQgZXhwbGljaXQgZXh0ZXJuIGZpbmFsbHkgZml4ZWQgZm9yIGZvcmVhY2ggZ290byBpZiBpbXBsaWNpdCBpbiBpbnRlcm5hbCBpcyBsb2NrIG5hbWVzcGFjZSBuZXcgbnVsbCBvcGVyYXRvciBvdXQgb3ZlcnJpZGUgcGFyYW1zIHByaXZhdGUgcHJvdGVjdGVkIHB1YmxpYyByZWFkb25seSByZWYgcmV0dXJuIHNlYWxlZCBzaXplb2Ygc3RhY2thbGxvYyBzdGF0aWMgc3dpdGNoIHRoaXMgdGhyb3cgdHJ5IHR5cGVvZiB1bmNoZWNrZWQgdW5zYWZlIHVzaW5nIHZpcnR1YWwgdm9sYXRpbGUgd2hpbGUgeWllbGQnXG4gIH07XG5cbiAgLy8ga2V5d29yZHNcbiAgZnVuY3Rpb24ga2V5d29yZHNUb1BhdHRlcm4od29yZHMpIHtcbiAgICByZXR1cm4gJ1xcXFxiKD86JyArIHdvcmRzLnRyaW0oKS5yZXBsYWNlKC8gL2csICd8JykgKyAnKVxcXFxiJztcbiAgfVxuICB2YXIgdHlwZURlY2xhcmF0aW9uS2V5d29yZHMgPSBrZXl3b3Jkc1RvUGF0dGVybihrZXl3b3JkS2luZHMudHlwZURlY2xhcmF0aW9uKTtcbiAgdmFyIGtleXdvcmRzID0gUmVnRXhwKGtleXdvcmRzVG9QYXR0ZXJuKGtleXdvcmRLaW5kcy50eXBlICsgJyAnICsga2V5d29yZEtpbmRzLnR5cGVEZWNsYXJhdGlvbiArICcgJyArIGtleXdvcmRLaW5kcy5jb250ZXh0dWFsICsgJyAnICsga2V5d29yZEtpbmRzLm90aGVyKSk7XG4gIHZhciBub25UeXBlS2V5d29yZHMgPSBrZXl3b3Jkc1RvUGF0dGVybihrZXl3b3JkS2luZHMudHlwZURlY2xhcmF0aW9uICsgJyAnICsga2V5d29yZEtpbmRzLmNvbnRleHR1YWwgKyAnICcgKyBrZXl3b3JkS2luZHMub3RoZXIpO1xuICB2YXIgbm9uQ29udGV4dHVhbEtleXdvcmRzID0ga2V5d29yZHNUb1BhdHRlcm4oa2V5d29yZEtpbmRzLnR5cGUgKyAnICcgKyBrZXl3b3JkS2luZHMudHlwZURlY2xhcmF0aW9uICsgJyAnICsga2V5d29yZEtpbmRzLm90aGVyKTtcblxuICAvLyB0eXBlc1xuICB2YXIgZ2VuZXJpYyA9IG5lc3RlZCgvPCg/OltePD47PStcXC0qLyUmfF5dfDw8c2VsZj4+KSo+Ly5zb3VyY2UsIDIpOyAvLyB0aGUgaWRlYSBiZWhpbmQgdGhlIG90aGVyIGZvcmJpZGRlbiBjaGFyYWN0ZXJzIGlzIHRvIHByZXZlbnQgZmFsc2UgcG9zaXRpdmVzLiBTYW1lIGZvciB0dXBsZUVsZW1lbnQuXG4gIHZhciBuZXN0ZWRSb3VuZCA9IG5lc3RlZCgvXFwoKD86W14oKV18PDxzZWxmPj4pKlxcKS8uc291cmNlLCAyKTtcbiAgdmFyIG5hbWUgPSAvQD9cXGJbQS1aYS16X11cXHcqXFxiLy5zb3VyY2U7XG4gIHZhciBnZW5lcmljTmFtZSA9IHJlcGxhY2UoLzw8MD4+KD86XFxzKjw8MT4+KT8vLnNvdXJjZSwgW25hbWUsIGdlbmVyaWNdKTtcbiAgdmFyIGlkZW50aWZpZXIgPSByZXBsYWNlKC8oPyE8PDA+Pik8PDE+Pig/OlxccypcXC5cXHMqPDwxPj4pKi8uc291cmNlLCBbbm9uVHlwZUtleXdvcmRzLCBnZW5lcmljTmFtZV0pO1xuICB2YXIgYXJyYXkgPSAvXFxbXFxzKig/OixcXHMqKSpcXF0vLnNvdXJjZTtcbiAgdmFyIHR5cGVFeHByZXNzaW9uV2l0aG91dFR1cGxlID0gcmVwbGFjZSgvPDwwPj4oPzpcXHMqKD86XFw/XFxzKik/PDwxPj4pKig/OlxccypcXD8pPy8uc291cmNlLCBbaWRlbnRpZmllciwgYXJyYXldKTtcbiAgdmFyIHR1cGxlRWxlbWVudCA9IHJlcGxhY2UoL1teLCgpPD5bXFxdOz0rXFwtKi8lJnxeXXw8PDA+Pnw8PDE+Pnw8PDI+Pi8uc291cmNlLCBbZ2VuZXJpYywgbmVzdGVkUm91bmQsIGFycmF5XSk7XG4gIHZhciB0dXBsZSA9IHJlcGxhY2UoL1xcKDw8MD4+Kyg/Oiw8PDA+PispK1xcKS8uc291cmNlLCBbdHVwbGVFbGVtZW50XSk7XG4gIHZhciB0eXBlRXhwcmVzc2lvbiA9IHJlcGxhY2UoLyg/Ojw8MD4+fDw8MT4+KSg/OlxccyooPzpcXD9cXHMqKT88PDI+PikqKD86XFxzKlxcPyk/Ly5zb3VyY2UsIFt0dXBsZSwgaWRlbnRpZmllciwgYXJyYXldKTtcbiAgdmFyIHR5cGVJbnNpZGUgPSB7XG4gICAgJ2tleXdvcmQnOiBrZXl3b3JkcyxcbiAgICAncHVuY3R1YXRpb24nOiAvWzw+KCk/LC46W1xcXV0vXG4gIH07XG5cbiAgLy8gc3RyaW5ncyAmIGNoYXJhY3RlcnNcbiAgLy8gaHR0cHM6Ly9kb2NzLm1pY3Jvc29mdC5jb20vZW4tdXMvZG90bmV0L2NzaGFycC9sYW5ndWFnZS1yZWZlcmVuY2UvbGFuZ3VhZ2Utc3BlY2lmaWNhdGlvbi9sZXhpY2FsLXN0cnVjdHVyZSNjaGFyYWN0ZXItbGl0ZXJhbHNcbiAgLy8gaHR0cHM6Ly9kb2NzLm1pY3Jvc29mdC5jb20vZW4tdXMvZG90bmV0L2NzaGFycC9sYW5ndWFnZS1yZWZlcmVuY2UvbGFuZ3VhZ2Utc3BlY2lmaWNhdGlvbi9sZXhpY2FsLXN0cnVjdHVyZSNzdHJpbmctbGl0ZXJhbHNcbiAgdmFyIGNoYXJhY3RlciA9IC8nKD86W15cXHJcXG4nXFxcXF18XFxcXC58XFxcXFtVdXhdW1xcZGEtZkEtRl17MSw4fSknLy5zb3VyY2U7IC8vIHNpbXBsaWZpZWQgcGF0dGVyblxuICB2YXIgcmVndWxhclN0cmluZyA9IC9cIig/OlxcXFwufFteXFxcXFwiXFxyXFxuXSkqXCIvLnNvdXJjZTtcbiAgdmFyIHZlcmJhdGltU3RyaW5nID0gL0BcIig/OlwiXCJ8XFxcXFtcXHNcXFNdfFteXFxcXFwiXSkqXCIoPyFcIikvLnNvdXJjZTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmNzaGFycCA9IFByaXNtLmxhbmd1YWdlcy5leHRlbmQoJ2NsaWtlJywge1xuICAgICdzdHJpbmcnOiBbe1xuICAgICAgcGF0dGVybjogcmUoLyhefFteJFxcXFxdKTw8MD4+Ly5zb3VyY2UsIFt2ZXJiYXRpbVN0cmluZ10pLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGdyZWVkeTogdHJ1ZVxuICAgIH0sIHtcbiAgICAgIHBhdHRlcm46IHJlKC8oXnxbXkAkXFxcXF0pPDwwPj4vLnNvdXJjZSwgW3JlZ3VsYXJTdHJpbmddKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBncmVlZHk6IHRydWVcbiAgICB9XSxcbiAgICAnY2xhc3MtbmFtZSc6IFt7XG4gICAgICAvLyBVc2luZyBzdGF0aWNcbiAgICAgIC8vIHVzaW5nIHN0YXRpYyBTeXN0ZW0uTWF0aDtcbiAgICAgIHBhdHRlcm46IHJlKC8oXFxidXNpbmdcXHMrc3RhdGljXFxzKyk8PDA+Pig/PVxccyo7KS8uc291cmNlLCBbaWRlbnRpZmllcl0pLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGluc2lkZTogdHlwZUluc2lkZVxuICAgIH0sIHtcbiAgICAgIC8vIFVzaW5nIGFsaWFzICh0eXBlKVxuICAgICAgLy8gdXNpbmcgUHJvamVjdCA9IFBDLk15Q29tcGFueS5Qcm9qZWN0O1xuICAgICAgcGF0dGVybjogcmUoLyhcXGJ1c2luZ1xccys8PDA+Plxccyo9XFxzKik8PDE+Pig/PVxccyo7KS8uc291cmNlLCBbbmFtZSwgdHlwZUV4cHJlc3Npb25dKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBpbnNpZGU6IHR5cGVJbnNpZGVcbiAgICB9LCB7XG4gICAgICAvLyBVc2luZyBhbGlhcyAoYWxpYXMpXG4gICAgICAvLyB1c2luZyBQcm9qZWN0ID0gUEMuTXlDb21wYW55LlByb2plY3Q7XG4gICAgICBwYXR0ZXJuOiByZSgvKFxcYnVzaW5nXFxzKyk8PDA+Pig/PVxccyo9KS8uc291cmNlLCBbbmFtZV0pLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgIH0sIHtcbiAgICAgIC8vIFR5cGUgZGVjbGFyYXRpb25zXG4gICAgICAvLyBjbGFzcyBGb288QSwgQj5cbiAgICAgIC8vIGludGVyZmFjZSBGb288b3V0IEEsIEI+XG4gICAgICBwYXR0ZXJuOiByZSgvKFxcYjw8MD4+XFxzKyk8PDE+Pi8uc291cmNlLCBbdHlwZURlY2xhcmF0aW9uS2V5d29yZHMsIGdlbmVyaWNOYW1lXSksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgaW5zaWRlOiB0eXBlSW5zaWRlXG4gICAgfSwge1xuICAgICAgLy8gU2luZ2xlIGNhdGNoIGV4Y2VwdGlvbiBkZWNsYXJhdGlvblxuICAgICAgLy8gY2F0Y2goRm9vKVxuICAgICAgLy8gKHRoaW5ncyBsaWtlIGNhdGNoKEZvbyBlKSBpcyBjb3ZlcmVkIGJ5IHZhcmlhYmxlIGRlY2xhcmF0aW9uKVxuICAgICAgcGF0dGVybjogcmUoLyhcXGJjYXRjaFxccypcXChcXHMqKTw8MD4+Ly5zb3VyY2UsIFtpZGVudGlmaWVyXSksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgaW5zaWRlOiB0eXBlSW5zaWRlXG4gICAgfSwge1xuICAgICAgLy8gTmFtZSBvZiB0aGUgdHlwZSBwYXJhbWV0ZXIgb2YgZ2VuZXJpYyBjb25zdHJhaW50c1xuICAgICAgLy8gd2hlcmUgRm9vIDogY2xhc3NcbiAgICAgIHBhdHRlcm46IHJlKC8oXFxid2hlcmVcXHMrKTw8MD4+Ly5zb3VyY2UsIFtuYW1lXSksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgfSwge1xuICAgICAgLy8gQ2FzdHMgYW5kIGNoZWNrcyB2aWEgYXMgYW5kIGlzLlxuICAgICAgLy8gYXMgRm9vPEE+LCBpcyBCYXI8Qj5cbiAgICAgIC8vICh0aGluZ3MgbGlrZSBpZihhIGlzIEZvbyBiKSBpcyBjb3ZlcmVkIGJ5IHZhcmlhYmxlIGRlY2xhcmF0aW9uKVxuICAgICAgcGF0dGVybjogcmUoLyhcXGIoPzppcyg/Olxccytub3QpP3xhcylcXHMrKTw8MD4+Ly5zb3VyY2UsIFt0eXBlRXhwcmVzc2lvbldpdGhvdXRUdXBsZV0pLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGluc2lkZTogdHlwZUluc2lkZVxuICAgIH0sIHtcbiAgICAgIC8vIFZhcmlhYmxlLCBmaWVsZCBhbmQgcGFyYW1ldGVyIGRlY2xhcmF0aW9uXG4gICAgICAvLyAoRm9vIGJhciwgQmFyIGJheiwgRm9vWywsXSBiYXksIEZvbzxCYXIsIEZvb0JhcjxCYXI+PiBiYXgpXG4gICAgICBwYXR0ZXJuOiByZSgvXFxiPDwwPj4oPz1cXHMrKD8hPDwxPj58d2l0aFxccypcXHspPDwyPj4oPzpcXHMqWz0sOzp7KVxcXV18XFxzKyg/OmlufHdoZW4pXFxiKSkvLnNvdXJjZSwgW3R5cGVFeHByZXNzaW9uLCBub25Db250ZXh0dWFsS2V5d29yZHMsIG5hbWVdKSxcbiAgICAgIGluc2lkZTogdHlwZUluc2lkZVxuICAgIH1dLFxuICAgICdrZXl3b3JkJzoga2V5d29yZHMsXG4gICAgLy8gaHR0cHM6Ly9kb2NzLm1pY3Jvc29mdC5jb20vZW4tdXMvZG90bmV0L2NzaGFycC9sYW5ndWFnZS1yZWZlcmVuY2UvbGFuZ3VhZ2Utc3BlY2lmaWNhdGlvbi9sZXhpY2FsLXN0cnVjdHVyZSNsaXRlcmFsc1xuICAgICdudW1iZXInOiAvKD86XFxiMCg/OnhbXFxkYS1mX10qW1xcZGEtZl18YlswMV9dKlswMV0pfCg/OlxcQlxcLlxcZCsoPzpfK1xcZCspKnxcXGJcXGQrKD86XytcXGQrKSooPzpcXC5cXGQrKD86XytcXGQrKSopPykoPzplWy0rXT9cXGQrKD86XytcXGQrKSopPykoPzpbZGZsbXVdfGx1fHVsKT9cXGIvaSxcbiAgICAnb3BlcmF0b3InOiAvPj49P3w8PD0/fFstPV0+fChbLSsmfF0pXFwxfH58XFw/XFw/PT98Wy0rKi8lJnxeIT08Pl09Py8sXG4gICAgJ3B1bmN0dWF0aW9uJzogL1xcP1xcLj98Ojp8W3t9W1xcXTsoKSwuOl0vXG4gIH0pO1xuICBQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdjc2hhcnAnLCAnbnVtYmVyJywge1xuICAgICdyYW5nZSc6IHtcbiAgICAgIHBhdHRlcm46IC9cXC5cXC4vLFxuICAgICAgYWxpYXM6ICdvcGVyYXRvcidcbiAgICB9XG4gIH0pO1xuICBQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdjc2hhcnAnLCAncHVuY3R1YXRpb24nLCB7XG4gICAgJ25hbWVkLXBhcmFtZXRlcic6IHtcbiAgICAgIHBhdHRlcm46IHJlKC8oWygsXVxccyopPDwwPj4oPz1cXHMqOikvLnNvdXJjZSwgW25hbWVdKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBhbGlhczogJ3B1bmN0dWF0aW9uJ1xuICAgIH1cbiAgfSk7XG4gIFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ2NzaGFycCcsICdjbGFzcy1uYW1lJywge1xuICAgICduYW1lc3BhY2UnOiB7XG4gICAgICAvLyBuYW1lc3BhY2UgRm9vLkJhciB7fVxuICAgICAgLy8gdXNpbmcgRm9vLkJhcjtcbiAgICAgIHBhdHRlcm46IHJlKC8oXFxiKD86bmFtZXNwYWNlfHVzaW5nKVxccyspPDwwPj4oPzpcXHMqXFwuXFxzKjw8MD4+KSooPz1cXHMqWzt7XSkvLnNvdXJjZSwgW25hbWVdKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ3B1bmN0dWF0aW9uJzogL1xcLi9cbiAgICAgIH1cbiAgICB9LFxuICAgICd0eXBlLWV4cHJlc3Npb24nOiB7XG4gICAgICAvLyBkZWZhdWx0KEZvbyksIHR5cGVvZihGb288QmFyPiksIHNpemVvZihpbnQpXG4gICAgICBwYXR0ZXJuOiByZSgvKFxcYig/OmRlZmF1bHR8c2l6ZW9mfHR5cGVvZilcXHMqXFwoXFxzKig/IVxccykpKD86W14oKVxcc118XFxzKD8hXFxzKXw8PDA+PikqKD89XFxzKlxcKSkvLnNvdXJjZSwgW25lc3RlZFJvdW5kXSksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgYWxpYXM6ICdjbGFzcy1uYW1lJyxcbiAgICAgIGluc2lkZTogdHlwZUluc2lkZVxuICAgIH0sXG4gICAgJ3JldHVybi10eXBlJzoge1xuICAgICAgLy8gRm9vPEJhcj4gRm9yQmFyKCk7IEZvbyBJRm9vLkJhcigpID0+IDBcbiAgICAgIC8vIGludCB0aGlzW2ludCBpbmRleF0gPT4gMDsgVCBJUmVhZE9ubHlMaXN0PFQ+LnRoaXNbaW50IGluZGV4XSA9PiB0aGlzW2luZGV4XTtcbiAgICAgIC8vIGludCBGb28gPT4gMDsgaW50IEZvbyB7IGdldDsgc2V0IH0gPSAwO1xuICAgICAgcGF0dGVybjogcmUoLzw8MD4+KD89XFxzKyg/Ojw8MT4+XFxzKig/Oj0+fFsoe118XFwuXFxzKnRoaXNcXHMqXFxbKXx0aGlzXFxzKlxcWykpLy5zb3VyY2UsIFt0eXBlRXhwcmVzc2lvbiwgaWRlbnRpZmllcl0pLFxuICAgICAgaW5zaWRlOiB0eXBlSW5zaWRlLFxuICAgICAgYWxpYXM6ICdjbGFzcy1uYW1lJ1xuICAgIH0sXG4gICAgJ2NvbnN0cnVjdG9yLWludm9jYXRpb24nOiB7XG4gICAgICAvLyBuZXcgTGlzdDxGb288QmFyW10+PiB7IH1cbiAgICAgIHBhdHRlcm46IHJlKC8oXFxibmV3XFxzKyk8PDA+Pig/PVxccypbWyh7XSkvLnNvdXJjZSwgW3R5cGVFeHByZXNzaW9uXSksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgaW5zaWRlOiB0eXBlSW5zaWRlLFxuICAgICAgYWxpYXM6ICdjbGFzcy1uYW1lJ1xuICAgIH0sXG4gICAgLyonZXhwbGljaXQtaW1wbGVtZW50YXRpb24nOiB7XG4gICAgXHQvLyBpbnQgSUZvbzxGb28+LkJhciA9PiAwOyB2b2lkIElGb288Rm9vPEZvbz4+LkZvbzxUPigpO1xuICAgIFx0cGF0dGVybjogcmVwbGFjZSgvXFxiPDwwPj4oPz1cXC48PDE+PikvLCBjbGFzc05hbWUsIG1ldGhvZE9yUHJvcGVydHlEZWNsYXJhdGlvbiksXG4gICAgXHRpbnNpZGU6IGNsYXNzTmFtZUluc2lkZSxcbiAgICBcdGFsaWFzOiAnY2xhc3MtbmFtZSdcbiAgICB9LCovXG4gICAgJ2dlbmVyaWMtbWV0aG9kJzoge1xuICAgICAgLy8gZm9vPEJhcj4oKVxuICAgICAgcGF0dGVybjogcmUoLzw8MD4+XFxzKjw8MT4+KD89XFxzKlxcKCkvLnNvdXJjZSwgW25hbWUsIGdlbmVyaWNdKSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAnZnVuY3Rpb24nOiByZSgvXjw8MD4+Ly5zb3VyY2UsIFtuYW1lXSksXG4gICAgICAgICdnZW5lcmljJzoge1xuICAgICAgICAgIHBhdHRlcm46IFJlZ0V4cChnZW5lcmljKSxcbiAgICAgICAgICBhbGlhczogJ2NsYXNzLW5hbWUnLFxuICAgICAgICAgIGluc2lkZTogdHlwZUluc2lkZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICAndHlwZS1saXN0Jzoge1xuICAgICAgLy8gVGhlIGxpc3Qgb2YgdHlwZXMgaW5oZXJpdGVkIG9yIG9mIGdlbmVyaWMgY29uc3RyYWludHNcbiAgICAgIC8vIGNsYXNzIEZvbzxGPiA6IEJhciwgSUxpc3Q8Rm9vQmFyPlxuICAgICAgLy8gd2hlcmUgRiA6IEJhciwgSUxpc3Q8aW50PlxuICAgICAgcGF0dGVybjogcmUoL1xcYigoPzo8PDA+Plxccys8PDE+PnxyZWNvcmRcXHMrPDwxPj5cXHMqPDw1Pj58d2hlcmVcXHMrPDwyPj4pXFxzKjpcXHMqKSg/Ojw8Mz4+fDw8ND4+fDw8MT4+XFxzKjw8NT4+fDw8Nj4+KSg/OlxccyosXFxzKig/Ojw8Mz4+fDw8ND4+fDw8Nj4+KSkqKD89XFxzKig/OndoZXJlfFt7O118PT58JCkpLy5zb3VyY2UsIFt0eXBlRGVjbGFyYXRpb25LZXl3b3JkcywgZ2VuZXJpY05hbWUsIG5hbWUsIHR5cGVFeHByZXNzaW9uLCBrZXl3b3Jkcy5zb3VyY2UsIG5lc3RlZFJvdW5kLCAvXFxibmV3XFxzKlxcKFxccypcXCkvLnNvdXJjZV0pLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAncmVjb3JkLWFyZ3VtZW50cyc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiByZSgvKF4oPyFuZXdcXHMqXFwoKTw8MD4+XFxzKik8PDE+Pi8uc291cmNlLCBbZ2VuZXJpY05hbWUsIG5lc3RlZFJvdW5kXSksXG4gICAgICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgICAgICBncmVlZHk6IHRydWUsXG4gICAgICAgICAgaW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMuY3NoYXJwXG4gICAgICAgIH0sXG4gICAgICAgICdrZXl3b3JkJzoga2V5d29yZHMsXG4gICAgICAgICdjbGFzcy1uYW1lJzoge1xuICAgICAgICAgIHBhdHRlcm46IFJlZ0V4cCh0eXBlRXhwcmVzc2lvbiksXG4gICAgICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgICAgIGluc2lkZTogdHlwZUluc2lkZVxuICAgICAgICB9LFxuICAgICAgICAncHVuY3R1YXRpb24nOiAvWywoKV0vXG4gICAgICB9XG4gICAgfSxcbiAgICAncHJlcHJvY2Vzc29yJzoge1xuICAgICAgcGF0dGVybjogLyheW1xcdCBdKikjLiovbSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBhbGlhczogJ3Byb3BlcnR5JyxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAvLyBoaWdobGlnaHQgcHJlcHJvY2Vzc29yIGRpcmVjdGl2ZXMgYXMga2V5d29yZHNcbiAgICAgICAgJ2RpcmVjdGl2ZSc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvKCMpXFxiKD86ZGVmaW5lfGVsaWZ8ZWxzZXxlbmRpZnxlbmRyZWdpb258ZXJyb3J8aWZ8bGluZXxudWxsYWJsZXxwcmFnbWF8cmVnaW9ufHVuZGVmfHdhcm5pbmcpXFxiLyxcbiAgICAgICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgICAgIGFsaWFzOiAna2V5d29yZCdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLy8gYXR0cmlidXRlc1xuICB2YXIgcmVndWxhclN0cmluZ09yQ2hhcmFjdGVyID0gcmVndWxhclN0cmluZyArICd8JyArIGNoYXJhY3RlcjtcbiAgdmFyIHJlZ3VsYXJTdHJpbmdDaGFyYWN0ZXJPckNvbW1lbnQgPSByZXBsYWNlKC9cXC8oPyFbKi9dKXxcXC9cXC9bXlxcclxcbl0qW1xcclxcbl18XFwvXFwqKD86W14qXXxcXCooPyFcXC8pKSpcXCpcXC98PDwwPj4vLnNvdXJjZSwgW3JlZ3VsYXJTdHJpbmdPckNoYXJhY3Rlcl0pO1xuICB2YXIgcm91bmRFeHByZXNzaW9uID0gbmVzdGVkKHJlcGxhY2UoL1teXCInLygpXXw8PDA+PnxcXCg8PHNlbGY+PipcXCkvLnNvdXJjZSwgW3JlZ3VsYXJTdHJpbmdDaGFyYWN0ZXJPckNvbW1lbnRdKSwgMik7XG5cbiAgLy8gaHR0cHM6Ly9kb2NzLm1pY3Jvc29mdC5jb20vZW4tdXMvZG90bmV0L2NzaGFycC9wcm9ncmFtbWluZy1ndWlkZS9jb25jZXB0cy9hdHRyaWJ1dGVzLyNhdHRyaWJ1dGUtdGFyZ2V0c1xuICB2YXIgYXR0clRhcmdldCA9IC9cXGIoPzphc3NlbWJseXxldmVudHxmaWVsZHxtZXRob2R8bW9kdWxlfHBhcmFtfHByb3BlcnR5fHJldHVybnx0eXBlKVxcYi8uc291cmNlO1xuICB2YXIgYXR0ciA9IHJlcGxhY2UoLzw8MD4+KD86XFxzKlxcKDw8MT4+KlxcKSk/Ly5zb3VyY2UsIFtpZGVudGlmaWVyLCByb3VuZEV4cHJlc3Npb25dKTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnY3NoYXJwJywgJ2NsYXNzLW5hbWUnLCB7XG4gICAgJ2F0dHJpYnV0ZSc6IHtcbiAgICAgIC8vIEF0dHJpYnV0ZXNcbiAgICAgIC8vIFtGb29dLCBbRm9vKDEpLCBCYXIoMiwgUHJvcCA9IFwiZm9vXCIpXSwgW3JldHVybjogRm9vKDEpLCBCYXIoMildLCBbYXNzZW1ibHk6IEZvbyhCYXIpXVxuICAgICAgcGF0dGVybjogcmUoLygoPzpefFteXFxzXFx3Pik/XSlcXHMqXFxbXFxzKikoPzo8PDA+Plxccyo6XFxzKik/PDwxPj4oPzpcXHMqLFxccyo8PDE+PikqKD89XFxzKlxcXSkvLnNvdXJjZSwgW2F0dHJUYXJnZXQsIGF0dHJdKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ3RhcmdldCc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiByZSgvXjw8MD4+KD89XFxzKjopLy5zb3VyY2UsIFthdHRyVGFyZ2V0XSksXG4gICAgICAgICAgYWxpYXM6ICdrZXl3b3JkJ1xuICAgICAgICB9LFxuICAgICAgICAnYXR0cmlidXRlLWFyZ3VtZW50cyc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiByZSgvXFwoPDwwPj4qXFwpLy5zb3VyY2UsIFtyb3VuZEV4cHJlc3Npb25dKSxcbiAgICAgICAgICBpbnNpZGU6IFByaXNtLmxhbmd1YWdlcy5jc2hhcnBcbiAgICAgICAgfSxcbiAgICAgICAgJ2NsYXNzLW5hbWUnOiB7XG4gICAgICAgICAgcGF0dGVybjogUmVnRXhwKGlkZW50aWZpZXIpLFxuICAgICAgICAgIGluc2lkZToge1xuICAgICAgICAgICAgJ3B1bmN0dWF0aW9uJzogL1xcLi9cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdwdW5jdHVhdGlvbic6IC9bOixdL1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLy8gc3RyaW5nIGludGVycG9sYXRpb25cbiAgdmFyIGZvcm1hdFN0cmluZyA9IC86W159XFxyXFxuXSsvLnNvdXJjZTtcbiAgLy8gbXVsdGkgbGluZVxuICB2YXIgbUludGVycG9sYXRpb25Sb3VuZCA9IG5lc3RlZChyZXBsYWNlKC9bXlwiJy8oKV18PDwwPj58XFwoPDxzZWxmPj4qXFwpLy5zb3VyY2UsIFtyZWd1bGFyU3RyaW5nQ2hhcmFjdGVyT3JDb21tZW50XSksIDIpO1xuICB2YXIgbUludGVycG9sYXRpb24gPSByZXBsYWNlKC9cXHsoPyFcXHspKD86KD8hW306XSk8PDA+PikqPDwxPj4/XFx9Ly5zb3VyY2UsIFttSW50ZXJwb2xhdGlvblJvdW5kLCBmb3JtYXRTdHJpbmddKTtcbiAgLy8gc2luZ2xlIGxpbmVcbiAgdmFyIHNJbnRlcnBvbGF0aW9uUm91bmQgPSBuZXN0ZWQocmVwbGFjZSgvW15cIicvKCldfFxcLyg/IVxcKil8XFwvXFwqKD86W14qXXxcXCooPyFcXC8pKSpcXCpcXC98PDwwPj58XFwoPDxzZWxmPj4qXFwpLy5zb3VyY2UsIFtyZWd1bGFyU3RyaW5nT3JDaGFyYWN0ZXJdKSwgMik7XG4gIHZhciBzSW50ZXJwb2xhdGlvbiA9IHJlcGxhY2UoL1xceyg/IVxceykoPzooPyFbfTpdKTw8MD4+KSo8PDE+Pj9cXH0vLnNvdXJjZSwgW3NJbnRlcnBvbGF0aW9uUm91bmQsIGZvcm1hdFN0cmluZ10pO1xuICBmdW5jdGlvbiBjcmVhdGVJbnRlcnBvbGF0aW9uSW5zaWRlKGludGVycG9sYXRpb24sIGludGVycG9sYXRpb25Sb3VuZCkge1xuICAgIHJldHVybiB7XG4gICAgICAnaW50ZXJwb2xhdGlvbic6IHtcbiAgICAgICAgcGF0dGVybjogcmUoLygoPzpefFtee10pKD86XFx7XFx7KSopPDwwPj4vLnNvdXJjZSwgW2ludGVycG9sYXRpb25dKSxcbiAgICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgICAgaW5zaWRlOiB7XG4gICAgICAgICAgJ2Zvcm1hdC1zdHJpbmcnOiB7XG4gICAgICAgICAgICBwYXR0ZXJuOiByZSgvKF5cXHsoPzooPyFbfTpdKTw8MD4+KSopPDwxPj4oPz1cXH0kKS8uc291cmNlLCBbaW50ZXJwb2xhdGlvblJvdW5kLCBmb3JtYXRTdHJpbmddKSxcbiAgICAgICAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICAgICAgICBpbnNpZGU6IHtcbiAgICAgICAgICAgICAgJ3B1bmN0dWF0aW9uJzogL146L1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgJ3B1bmN0dWF0aW9uJzogL15cXHt8XFx9JC8sXG4gICAgICAgICAgJ2V4cHJlc3Npb24nOiB7XG4gICAgICAgICAgICBwYXR0ZXJuOiAvW1xcc1xcU10rLyxcbiAgICAgICAgICAgIGFsaWFzOiAnbGFuZ3VhZ2UtY3NoYXJwJyxcbiAgICAgICAgICAgIGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLmNzaGFycFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgICdzdHJpbmcnOiAvW1xcc1xcU10rL1xuICAgIH07XG4gIH1cbiAgUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnY3NoYXJwJywgJ3N0cmluZycsIHtcbiAgICAnaW50ZXJwb2xhdGlvbi1zdHJpbmcnOiBbe1xuICAgICAgcGF0dGVybjogcmUoLyhefFteXFxcXF0pKD86XFwkQHxAXFwkKVwiKD86XCJcInxcXFxcW1xcc1xcU118XFx7XFx7fDw8MD4+fFteXFxcXHtcIl0pKlwiLy5zb3VyY2UsIFttSW50ZXJwb2xhdGlvbl0pLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGluc2lkZTogY3JlYXRlSW50ZXJwb2xhdGlvbkluc2lkZShtSW50ZXJwb2xhdGlvbiwgbUludGVycG9sYXRpb25Sb3VuZClcbiAgICB9LCB7XG4gICAgICBwYXR0ZXJuOiByZSgvKF58W15AXFxcXF0pXFwkXCIoPzpcXFxcLnxcXHtcXHt8PDwwPj58W15cXFxcXCJ7XSkqXCIvLnNvdXJjZSwgW3NJbnRlcnBvbGF0aW9uXSksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiBjcmVhdGVJbnRlcnBvbGF0aW9uSW5zaWRlKHNJbnRlcnBvbGF0aW9uLCBzSW50ZXJwb2xhdGlvblJvdW5kKVxuICAgIH1dLFxuICAgICdjaGFyJzoge1xuICAgICAgcGF0dGVybjogUmVnRXhwKGNoYXJhY3RlciksXG4gICAgICBncmVlZHk6IHRydWVcbiAgICB9XG4gIH0pO1xuICBQcmlzbS5sYW5ndWFnZXMuZG90bmV0ID0gUHJpc20ubGFuZ3VhZ2VzLmNzID0gUHJpc20ubGFuZ3VhZ2VzLmNzaGFycDtcbn0pKFByaXNtKTtcblByaXNtLmxhbmd1YWdlcy5tYXJrdXAgPSB7XG4gICdjb21tZW50Jzoge1xuICAgIHBhdHRlcm46IC88IS0tKD86KD8hPCEtLSlbXFxzXFxTXSkqPy0tPi8sXG4gICAgZ3JlZWR5OiB0cnVlXG4gIH0sXG4gICdwcm9sb2cnOiB7XG4gICAgcGF0dGVybjogLzxcXD9bXFxzXFxTXSs/XFw/Pi8sXG4gICAgZ3JlZWR5OiB0cnVlXG4gIH0sXG4gICdkb2N0eXBlJzoge1xuICAgIC8vIGh0dHBzOi8vd3d3LnczLm9yZy9UUi94bWwvI05ULWRvY3R5cGVkZWNsXG4gICAgcGF0dGVybjogLzwhRE9DVFlQRSg/OltePlwiJ1tcXF1dfFwiW15cIl0qXCJ8J1teJ10qJykrKD86XFxbKD86W148XCInXFxdXXxcIlteXCJdKlwifCdbXiddKid8PCg/ISEtLSl8PCEtLSg/OlteLV18LSg/IS0+KSkqLS0+KSpcXF1cXHMqKT8+L2ksXG4gICAgZ3JlZWR5OiB0cnVlLFxuICAgIGluc2lkZToge1xuICAgICAgJ2ludGVybmFsLXN1YnNldCc6IHtcbiAgICAgICAgcGF0dGVybjogLyheW15cXFtdKlxcWylbXFxzXFxTXSsoPz1cXF0+JCkvLFxuICAgICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgICBncmVlZHk6IHRydWUsXG4gICAgICAgIGluc2lkZTogbnVsbCAvLyBzZWUgYmVsb3dcbiAgICAgIH0sXG4gICAgICAnc3RyaW5nJzoge1xuICAgICAgICBwYXR0ZXJuOiAvXCJbXlwiXSpcInwnW14nXSonLyxcbiAgICAgICAgZ3JlZWR5OiB0cnVlXG4gICAgICB9LFxuICAgICAgJ3B1bmN0dWF0aW9uJzogL148IXw+JHxbW1xcXV0vLFxuICAgICAgJ2RvY3R5cGUtdGFnJzogL15ET0NUWVBFL2ksXG4gICAgICAnbmFtZSc6IC9bXlxcczw+J1wiXSsvXG4gICAgfVxuICB9LFxuICAnY2RhdGEnOiB7XG4gICAgcGF0dGVybjogLzwhXFxbQ0RBVEFcXFtbXFxzXFxTXSo/XFxdXFxdPi9pLFxuICAgIGdyZWVkeTogdHJ1ZVxuICB9LFxuICAndGFnJzoge1xuICAgIHBhdHRlcm46IC88XFwvPyg/IVxcZClbXlxccz5cXC89JDwlXSsoPzpcXHMoPzpcXHMqW15cXHM+XFwvPV0rKD86XFxzKj1cXHMqKD86XCJbXlwiXSpcInwnW14nXSonfFteXFxzJ1wiPj1dKyg/PVtcXHM+XSkpfCg/PVtcXHMvPl0pKSkrKT9cXHMqXFwvPz4vLFxuICAgIGdyZWVkeTogdHJ1ZSxcbiAgICBpbnNpZGU6IHtcbiAgICAgICd0YWcnOiB7XG4gICAgICAgIHBhdHRlcm46IC9ePFxcLz9bXlxccz5cXC9dKy8sXG4gICAgICAgIGluc2lkZToge1xuICAgICAgICAgICdwdW5jdHVhdGlvbic6IC9ePFxcLz8vLFxuICAgICAgICAgICduYW1lc3BhY2UnOiAvXlteXFxzPlxcLzpdKzovXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAnc3BlY2lhbC1hdHRyJzogW10sXG4gICAgICAnYXR0ci12YWx1ZSc6IHtcbiAgICAgICAgcGF0dGVybjogLz1cXHMqKD86XCJbXlwiXSpcInwnW14nXSonfFteXFxzJ1wiPj1dKykvLFxuICAgICAgICBpbnNpZGU6IHtcbiAgICAgICAgICAncHVuY3R1YXRpb24nOiBbe1xuICAgICAgICAgICAgcGF0dGVybjogL149LyxcbiAgICAgICAgICAgIGFsaWFzOiAnYXR0ci1lcXVhbHMnXG4gICAgICAgICAgfSwge1xuICAgICAgICAgICAgcGF0dGVybjogL14oXFxzKilbXCInXXxbXCInXSQvLFxuICAgICAgICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgICAgICAgIH1dXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAncHVuY3R1YXRpb24nOiAvXFwvPz4vLFxuICAgICAgJ2F0dHItbmFtZSc6IHtcbiAgICAgICAgcGF0dGVybjogL1teXFxzPlxcL10rLyxcbiAgICAgICAgaW5zaWRlOiB7XG4gICAgICAgICAgJ25hbWVzcGFjZSc6IC9eW15cXHM+XFwvOl0rOi9cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgJ2VudGl0eSc6IFt7XG4gICAgcGF0dGVybjogLyZbXFxkYS16XXsxLDh9Oy9pLFxuICAgIGFsaWFzOiAnbmFtZWQtZW50aXR5J1xuICB9LCAvJiN4P1tcXGRhLWZdezEsOH07L2ldXG59O1xuUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cFsndGFnJ10uaW5zaWRlWydhdHRyLXZhbHVlJ10uaW5zaWRlWydlbnRpdHknXSA9IFByaXNtLmxhbmd1YWdlcy5tYXJrdXBbJ2VudGl0eSddO1xuUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cFsnZG9jdHlwZSddLmluc2lkZVsnaW50ZXJuYWwtc3Vic2V0J10uaW5zaWRlID0gUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cDtcblxuLy8gUGx1Z2luIHRvIG1ha2UgZW50aXR5IHRpdGxlIHNob3cgdGhlIHJlYWwgZW50aXR5LCBpZGVhIGJ5IFJvbWFuIEtvbWFyb3ZcblByaXNtLmhvb2tzLmFkZCgnd3JhcCcsIGZ1bmN0aW9uIChlbnYpIHtcbiAgaWYgKGVudi50eXBlID09PSAnZW50aXR5Jykge1xuICAgIGVudi5hdHRyaWJ1dGVzWyd0aXRsZSddID0gZW52LmNvbnRlbnQucmVwbGFjZSgvJmFtcDsvLCAnJicpO1xuICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQcmlzbS5sYW5ndWFnZXMubWFya3VwLnRhZywgJ2FkZElubGluZWQnLCB7XG4gIC8qKlxuICAgKiBBZGRzIGFuIGlubGluZWQgbGFuZ3VhZ2UgdG8gbWFya3VwLlxuICAgKlxuICAgKiBBbiBleGFtcGxlIG9mIGFuIGlubGluZWQgbGFuZ3VhZ2UgaXMgQ1NTIHdpdGggYDxzdHlsZT5gIHRhZ3MuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0YWdOYW1lIFRoZSBuYW1lIG9mIHRoZSB0YWcgdGhhdCBjb250YWlucyB0aGUgaW5saW5lZCBsYW5ndWFnZS4gVGhpcyBuYW1lIHdpbGwgYmUgdHJlYXRlZCBhc1xuICAgKiBjYXNlIGluc2Vuc2l0aXZlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbGFuZyBUaGUgbGFuZ3VhZ2Uga2V5LlxuICAgKiBAZXhhbXBsZVxuICAgKiBhZGRJbmxpbmVkKCdzdHlsZScsICdjc3MnKTtcbiAgICovXG4gIHZhbHVlOiBmdW5jdGlvbiBhZGRJbmxpbmVkKHRhZ05hbWUsIGxhbmcpIHtcbiAgICB2YXIgaW5jbHVkZWRDZGF0YUluc2lkZSA9IHt9O1xuICAgIGluY2x1ZGVkQ2RhdGFJbnNpZGVbJ2xhbmd1YWdlLScgKyBsYW5nXSA9IHtcbiAgICAgIHBhdHRlcm46IC8oXjwhXFxbQ0RBVEFcXFspW1xcc1xcU10rPyg/PVxcXVxcXT4kKS9pLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzW2xhbmddXG4gICAgfTtcbiAgICBpbmNsdWRlZENkYXRhSW5zaWRlWydjZGF0YSddID0gL148IVxcW0NEQVRBXFxbfFxcXVxcXT4kL2k7XG4gICAgdmFyIGluc2lkZSA9IHtcbiAgICAgICdpbmNsdWRlZC1jZGF0YSc6IHtcbiAgICAgICAgcGF0dGVybjogLzwhXFxbQ0RBVEFcXFtbXFxzXFxTXSo/XFxdXFxdPi9pLFxuICAgICAgICBpbnNpZGU6IGluY2x1ZGVkQ2RhdGFJbnNpZGVcbiAgICAgIH1cbiAgICB9O1xuICAgIGluc2lkZVsnbGFuZ3VhZ2UtJyArIGxhbmddID0ge1xuICAgICAgcGF0dGVybjogL1tcXHNcXFNdKy8sXG4gICAgICBpbnNpZGU6IFByaXNtLmxhbmd1YWdlc1tsYW5nXVxuICAgIH07XG4gICAgdmFyIGRlZiA9IHt9O1xuICAgIGRlZlt0YWdOYW1lXSA9IHtcbiAgICAgIHBhdHRlcm46IFJlZ0V4cCgvKDxfX1tePl0qPikoPzo8IVxcW0NEQVRBXFxbKD86W15cXF1dfFxcXSg/IVxcXT4pKSpcXF1cXF0+fCg/ITwhXFxbQ0RBVEFcXFspW1xcc1xcU10pKj8oPz08XFwvX18+KS8uc291cmNlLnJlcGxhY2UoL19fL2csIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRhZ05hbWU7XG4gICAgICB9KSwgJ2knKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBpbnNpZGU6IGluc2lkZVxuICAgIH07XG4gICAgUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnbWFya3VwJywgJ2NkYXRhJywgZGVmKTtcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cC50YWcsICdhZGRBdHRyaWJ1dGUnLCB7XG4gIC8qKlxuICAgKiBBZGRzIGFuIHBhdHRlcm4gdG8gaGlnaGxpZ2h0IGxhbmd1YWdlcyBlbWJlZGRlZCBpbiBIVE1MIGF0dHJpYnV0ZXMuXG4gICAqXG4gICAqIEFuIGV4YW1wbGUgb2YgYW4gaW5saW5lZCBsYW5ndWFnZSBpcyBDU1Mgd2l0aCBgc3R5bGVgIGF0dHJpYnV0ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyTmFtZSBUaGUgbmFtZSBvZiB0aGUgdGFnIHRoYXQgY29udGFpbnMgdGhlIGlubGluZWQgbGFuZ3VhZ2UuIFRoaXMgbmFtZSB3aWxsIGJlIHRyZWF0ZWQgYXNcbiAgICogY2FzZSBpbnNlbnNpdGl2ZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGxhbmcgVGhlIGxhbmd1YWdlIGtleS5cbiAgICogQGV4YW1wbGVcbiAgICogYWRkQXR0cmlidXRlKCdzdHlsZScsICdjc3MnKTtcbiAgICovXG4gIHZhbHVlOiBmdW5jdGlvbiAoYXR0ck5hbWUsIGxhbmcpIHtcbiAgICBQcmlzbS5sYW5ndWFnZXMubWFya3VwLnRhZy5pbnNpZGVbJ3NwZWNpYWwtYXR0ciddLnB1c2goe1xuICAgICAgcGF0dGVybjogUmVnRXhwKC8oXnxbXCInXFxzXSkvLnNvdXJjZSArICcoPzonICsgYXR0ck5hbWUgKyAnKScgKyAvXFxzKj1cXHMqKD86XCJbXlwiXSpcInwnW14nXSonfFteXFxzJ1wiPj1dKyg/PVtcXHM+XSkpLy5zb3VyY2UsICdpJyksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdhdHRyLW5hbWUnOiAvXlteXFxzPV0rLyxcbiAgICAgICAgJ2F0dHItdmFsdWUnOiB7XG4gICAgICAgICAgcGF0dGVybjogLz1bXFxzXFxTXSsvLFxuICAgICAgICAgIGluc2lkZToge1xuICAgICAgICAgICAgJ3ZhbHVlJzoge1xuICAgICAgICAgICAgICBwYXR0ZXJuOiAvKF49XFxzKihbXCInXXwoPyFbXCInXSkpKVxcU1tcXHNcXFNdKig/PVxcMiQpLyxcbiAgICAgICAgICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgICAgICAgICAgYWxpYXM6IFtsYW5nLCAnbGFuZ3VhZ2UtJyArIGxhbmddLFxuICAgICAgICAgICAgICBpbnNpZGU6IFByaXNtLmxhbmd1YWdlc1tsYW5nXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdwdW5jdHVhdGlvbic6IFt7XG4gICAgICAgICAgICAgIHBhdHRlcm46IC9ePS8sXG4gICAgICAgICAgICAgIGFsaWFzOiAnYXR0ci1lcXVhbHMnXG4gICAgICAgICAgICB9LCAvXCJ8Jy9dXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pO1xuUHJpc20ubGFuZ3VhZ2VzLmh0bWwgPSBQcmlzbS5sYW5ndWFnZXMubWFya3VwO1xuUHJpc20ubGFuZ3VhZ2VzLm1hdGhtbCA9IFByaXNtLmxhbmd1YWdlcy5tYXJrdXA7XG5QcmlzbS5sYW5ndWFnZXMuc3ZnID0gUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cDtcblByaXNtLmxhbmd1YWdlcy54bWwgPSBQcmlzbS5sYW5ndWFnZXMuZXh0ZW5kKCdtYXJrdXAnLCB7fSk7XG5QcmlzbS5sYW5ndWFnZXMuc3NtbCA9IFByaXNtLmxhbmd1YWdlcy54bWw7XG5QcmlzbS5sYW5ndWFnZXMuYXRvbSA9IFByaXNtLmxhbmd1YWdlcy54bWw7XG5QcmlzbS5sYW5ndWFnZXMucnNzID0gUHJpc20ubGFuZ3VhZ2VzLnhtbDtcbihmdW5jdGlvbiAoUHJpc20pIHtcbiAgdmFyIHN0cmluZyA9IC8oPzpcIig/OlxcXFwoPzpcXHJcXG58W1xcc1xcU10pfFteXCJcXFxcXFxyXFxuXSkqXCJ8Jyg/OlxcXFwoPzpcXHJcXG58W1xcc1xcU10pfFteJ1xcXFxcXHJcXG5dKSonKS87XG4gIFByaXNtLmxhbmd1YWdlcy5jc3MgPSB7XG4gICAgJ2NvbW1lbnQnOiAvXFwvXFwqW1xcc1xcU10qP1xcKlxcLy8sXG4gICAgJ2F0cnVsZSc6IHtcbiAgICAgIHBhdHRlcm46IFJlZ0V4cCgnQFtcXFxcdy1dKD86JyArIC9bXjt7XFxzXCInXXxcXHMrKD8hXFxzKS8uc291cmNlICsgJ3wnICsgc3RyaW5nLnNvdXJjZSArICcpKj8nICsgLyg/Ojt8KD89XFxzKlxceykpLy5zb3VyY2UpLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdydWxlJzogL15AW1xcdy1dKy8sXG4gICAgICAgICdzZWxlY3Rvci1mdW5jdGlvbi1hcmd1bWVudCc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvKFxcYnNlbGVjdG9yXFxzKlxcKFxccyooPyFbXFxzKV0pKSg/OlteKClcXHNdfFxccysoPyFbXFxzKV0pfFxcKCg/OlteKCldfFxcKFteKCldKlxcKSkqXFwpKSsoPz1cXHMqXFwpKS8sXG4gICAgICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgICAgICBhbGlhczogJ3NlbGVjdG9yJ1xuICAgICAgICB9LFxuICAgICAgICAna2V5d29yZCc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvKF58W15cXHctXSkoPzphbmR8bm90fG9ubHl8b3IpKD8hW1xcdy1dKS8sXG4gICAgICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIC8vIFNlZSByZXN0IGJlbG93XG4gICAgICB9XG4gICAgfSxcbiAgICAndXJsJzoge1xuICAgICAgLy8gaHR0cHM6Ly9kcmFmdHMuY3Nzd2cub3JnL2Nzcy12YWx1ZXMtMy8jdXJsc1xuICAgICAgcGF0dGVybjogUmVnRXhwKCdcXFxcYnVybFxcXFwoKD86JyArIHN0cmluZy5zb3VyY2UgKyAnfCcgKyAvKD86W15cXFxcXFxyXFxuKClcIiddfFxcXFxbXFxzXFxTXSkqLy5zb3VyY2UgKyAnKVxcXFwpJywgJ2knKSxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAnZnVuY3Rpb24nOiAvXnVybC9pLFxuICAgICAgICAncHVuY3R1YXRpb24nOiAvXlxcKHxcXCkkLyxcbiAgICAgICAgJ3N0cmluZyc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiBSZWdFeHAoJ14nICsgc3RyaW5nLnNvdXJjZSArICckJyksXG4gICAgICAgICAgYWxpYXM6ICd1cmwnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgICdzZWxlY3Rvcic6IHtcbiAgICAgIHBhdHRlcm46IFJlZ0V4cCgnKF58W3t9XFxcXHNdKVtee31cXFxcc10oPzpbXnt9O1wiXFwnXFxcXHNdfFxcXFxzKyg/IVtcXFxcc3tdKXwnICsgc3RyaW5nLnNvdXJjZSArICcpKig/PVxcXFxzKlxcXFx7KScpLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgIH0sXG4gICAgJ3N0cmluZyc6IHtcbiAgICAgIHBhdHRlcm46IHN0cmluZyxcbiAgICAgIGdyZWVkeTogdHJ1ZVxuICAgIH0sXG4gICAgJ3Byb3BlcnR5Jzoge1xuICAgICAgcGF0dGVybjogLyhefFteLVxcd1xceEEwLVxcdUZGRkZdKSg/IVxccylbLV9hLXpcXHhBMC1cXHVGRkZGXSg/Oig/IVxccylbLVxcd1xceEEwLVxcdUZGRkZdKSooPz1cXHMqOikvaSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICB9LFxuICAgICdpbXBvcnRhbnQnOiAvIWltcG9ydGFudFxcYi9pLFxuICAgICdmdW5jdGlvbic6IHtcbiAgICAgIHBhdHRlcm46IC8oXnxbXi1hLXowLTldKVstYS16MC05XSsoPz1cXCgpL2ksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgfSxcbiAgICAncHVuY3R1YXRpb24nOiAvWygpe307OixdL1xuICB9O1xuICBQcmlzbS5sYW5ndWFnZXMuY3NzWydhdHJ1bGUnXS5pbnNpZGUucmVzdCA9IFByaXNtLmxhbmd1YWdlcy5jc3M7XG4gIHZhciBtYXJrdXAgPSBQcmlzbS5sYW5ndWFnZXMubWFya3VwO1xuICBpZiAobWFya3VwKSB7XG4gICAgbWFya3VwLnRhZy5hZGRJbmxpbmVkKCdzdHlsZScsICdjc3MnKTtcbiAgICBtYXJrdXAudGFnLmFkZEF0dHJpYnV0ZSgnc3R5bGUnLCAnY3NzJyk7XG4gIH1cbn0pKFByaXNtKTtcbihmdW5jdGlvbiAoUHJpc20pIHtcbiAgUHJpc20ubGFuZ3VhZ2VzLmRpZmYgPSB7XG4gICAgJ2Nvb3JkJzogW1xuICAgIC8vIE1hdGNoIGFsbCBraW5kcyBvZiBjb29yZCBsaW5lcyAocHJlZml4ZWQgYnkgXCIrKytcIiwgXCItLS1cIiBvciBcIioqKlwiKS5cbiAgICAvXig/OlxcKnszfXwtezN9fFxcK3szfSkuKiQvbSxcbiAgICAvLyBNYXRjaCBcIkBAIC4uLiBAQFwiIGNvb3JkIGxpbmVzIGluIHVuaWZpZWQgZGlmZi5cbiAgICAvXkBALipAQCQvbSxcbiAgICAvLyBNYXRjaCBjb29yZCBsaW5lcyBpbiBub3JtYWwgZGlmZiAoc3RhcnRzIHdpdGggYSBudW1iZXIpLlxuICAgIC9eXFxkLiokL21dXG5cbiAgICAvLyBkZWxldGVkLCBpbnNlcnRlZCwgdW5jaGFuZ2VkLCBkaWZmXG4gIH07XG5cbiAgLyoqXG4gICAqIEEgbWFwIGZyb20gdGhlIG5hbWUgb2YgYSBibG9jayB0byBpdHMgbGluZSBwcmVmaXguXG4gICAqXG4gICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fVxuICAgKi9cbiAgdmFyIFBSRUZJWEVTID0ge1xuICAgICdkZWxldGVkLXNpZ24nOiAnLScsXG4gICAgJ2RlbGV0ZWQtYXJyb3cnOiAnPCcsXG4gICAgJ2luc2VydGVkLXNpZ24nOiAnKycsXG4gICAgJ2luc2VydGVkLWFycm93JzogJz4nLFxuICAgICd1bmNoYW5nZWQnOiAnICcsXG4gICAgJ2RpZmYnOiAnISdcbiAgfTtcblxuICAvLyBhZGQgYSB0b2tlbiBmb3IgZWFjaCBwcmVmaXhcbiAgT2JqZWN0LmtleXMoUFJFRklYRVMpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB2YXIgcHJlZml4ID0gUFJFRklYRVNbbmFtZV07XG4gICAgdmFyIGFsaWFzID0gW107XG4gICAgaWYgKCEvXlxcdyskLy50ZXN0KG5hbWUpKSB7XG4gICAgICAvLyBcImRlbGV0ZWQtc2lnblwiIC0+IFwiZGVsZXRlZFwiXG4gICAgICBhbGlhcy5wdXNoKC9cXHcrLy5leGVjKG5hbWUpWzBdKTtcbiAgICB9XG4gICAgaWYgKG5hbWUgPT09ICdkaWZmJykge1xuICAgICAgYWxpYXMucHVzaCgnYm9sZCcpO1xuICAgIH1cbiAgICBQcmlzbS5sYW5ndWFnZXMuZGlmZltuYW1lXSA9IHtcbiAgICAgIHBhdHRlcm46IFJlZ0V4cCgnXig/OlsnICsgcHJlZml4ICsgJ10uKig/Olxcclxcbj98XFxufCg/IVtcXFxcc1xcXFxTXSkpKSsnLCAnbScpLFxuICAgICAgYWxpYXM6IGFsaWFzLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdsaW5lJzoge1xuICAgICAgICAgIHBhdHRlcm46IC8oLikoPz1bXFxzXFxTXSkuKig/Olxcclxcbj98XFxuKT8vLFxuICAgICAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgJ3ByZWZpeCc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvW1xcc1xcU10vLFxuICAgICAgICAgIGFsaWFzOiAvXFx3Ky8uZXhlYyhuYW1lKVswXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gbWFrZSBwcmVmaXhlcyBhdmFpbGFibGUgdG8gRGlmZiBwbHVnaW5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFByaXNtLmxhbmd1YWdlcy5kaWZmLCAnUFJFRklYRVMnLCB7XG4gICAgdmFsdWU6IFBSRUZJWEVTXG4gIH0pO1xufSkoUHJpc20pO1xuUHJpc20ubGFuZ3VhZ2VzLmdvID0gUHJpc20ubGFuZ3VhZ2VzLmV4dGVuZCgnY2xpa2UnLCB7XG4gICdzdHJpbmcnOiB7XG4gICAgcGF0dGVybjogLyhefFteXFxcXF0pXCIoPzpcXFxcLnxbXlwiXFxcXFxcclxcbl0pKlwifGBbXmBdKmAvLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgZ3JlZWR5OiB0cnVlXG4gIH0sXG4gICdrZXl3b3JkJzogL1xcYig/OmJyZWFrfGNhc2V8Y2hhbnxjb25zdHxjb250aW51ZXxkZWZhdWx0fGRlZmVyfGVsc2V8ZmFsbHRocm91Z2h8Zm9yfGZ1bmN8Z28oPzp0byk/fGlmfGltcG9ydHxpbnRlcmZhY2V8bWFwfHBhY2thZ2V8cmFuZ2V8cmV0dXJufHNlbGVjdHxzdHJ1Y3R8c3dpdGNofHR5cGV8dmFyKVxcYi8sXG4gICdib29sZWFuJzogL1xcYig/Ol98ZmFsc2V8aW90YXxuaWx8dHJ1ZSlcXGIvLFxuICAnbnVtYmVyJzogW1xuICAvLyBiaW5hcnkgYW5kIG9jdGFsIGludGVnZXJzXG4gIC9cXGIwKD86YlswMV9dK3xvWzAtN19dKylpP1xcYi9pLFxuICAvLyBoZXhhZGVjaW1hbCBpbnRlZ2VycyBhbmQgZmxvYXRzXG4gIC9cXGIweCg/OlthLWZcXGRfXSsoPzpcXC5bYS1mXFxkX10qKT98XFwuW2EtZlxcZF9dKykoPzpwWystXT9cXGQrKD86X1xcZCspKik/aT8oPyFcXHcpL2ksXG4gIC8vIGRlY2ltYWwgaW50ZWdlcnMgYW5kIGZsb2F0c1xuICAvKD86XFxiXFxkW1xcZF9dKig/OlxcLltcXGRfXSopP3xcXEJcXC5cXGRbXFxkX10qKSg/OmVbKy1dP1tcXGRfXSspP2k/KD8hXFx3KS9pXSxcbiAgJ29wZXJhdG9yJzogL1sqXFwvJV4hPV09P3xcXCtbPStdP3wtWz0tXT98XFx8Wz18XT98Jig/Oj18JnxcXF49Pyk/fD4oPzo+PT98PSk/fDwoPzo8PT98PXwtKT98Oj18XFwuXFwuXFwuLyxcbiAgJ2J1aWx0aW4nOiAvXFxiKD86YXBwZW5kfGJvb2x8Ynl0ZXxjYXB8Y2xvc2V8Y29tcGxleHxjb21wbGV4KD86NjR8MTI4KXxjb3B5fGRlbGV0ZXxlcnJvcnxmbG9hdCg/OjMyfDY0KXx1P2ludCg/Ojh8MTZ8MzJ8NjQpP3xpbWFnfGxlbnxtYWtlfG5ld3xwYW5pY3xwcmludCg/OmxuKT98cmVhbHxyZWNvdmVyfHJ1bmV8c3RyaW5nfHVpbnRwdHIpXFxiL1xufSk7XG5QcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdnbycsICdzdHJpbmcnLCB7XG4gICdjaGFyJzoge1xuICAgIHBhdHRlcm46IC8nKD86XFxcXC58W14nXFxcXFxcclxcbl0pezAsMTB9Jy8sXG4gICAgZ3JlZWR5OiB0cnVlXG4gIH1cbn0pO1xuZGVsZXRlIFByaXNtLmxhbmd1YWdlcy5nb1snY2xhc3MtbmFtZSddO1xuUHJpc20ubGFuZ3VhZ2VzLmluaSA9IHtcbiAgLyoqXG4gICAqIFRoZSBjb21wb25lbnQgbWltaWNzIHRoZSBiZWhhdmlvciBvZiB0aGUgV2luMzIgQVBJIHBhcnNlci5cbiAgICpcbiAgICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL1ByaXNtSlMvcHJpc20vaXNzdWVzLzI3NzUjaXNzdWVjb21tZW50LTc4NzQ3NzcyM31cbiAgICovXG5cbiAgJ2NvbW1lbnQnOiB7XG4gICAgcGF0dGVybjogLyheWyBcXGZcXHRcXHZdKilbIztdW15cXG5cXHJdKi9tLFxuICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgfSxcbiAgJ3NlY3Rpb24nOiB7XG4gICAgcGF0dGVybjogLyheWyBcXGZcXHRcXHZdKilcXFtbXlxcblxcclxcXV0qXFxdPy9tLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgaW5zaWRlOiB7XG4gICAgICAnc2VjdGlvbi1uYW1lJzoge1xuICAgICAgICBwYXR0ZXJuOiAvKF5cXFtbIFxcZlxcdFxcdl0qKVteIFxcZlxcdFxcdlxcXV0rKD86WyBcXGZcXHRcXHZdK1teIFxcZlxcdFxcdlxcXV0rKSovLFxuICAgICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgICBhbGlhczogJ3NlbGVjdG9yJ1xuICAgICAgfSxcbiAgICAgICdwdW5jdHVhdGlvbic6IC9cXFt8XFxdL1xuICAgIH1cbiAgfSxcbiAgJ2tleSc6IHtcbiAgICBwYXR0ZXJuOiAvKF5bIFxcZlxcdFxcdl0qKVteIFxcZlxcblxcclxcdFxcdj1dKyg/OlsgXFxmXFx0XFx2XStbXiBcXGZcXG5cXHJcXHRcXHY9XSspKig/PVsgXFxmXFx0XFx2XSo9KS9tLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgYWxpYXM6ICdhdHRyLW5hbWUnXG4gIH0sXG4gICd2YWx1ZSc6IHtcbiAgICBwYXR0ZXJuOiAvKD1bIFxcZlxcdFxcdl0qKVteIFxcZlxcblxcclxcdFxcdl0rKD86WyBcXGZcXHRcXHZdK1teIFxcZlxcblxcclxcdFxcdl0rKSovLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgYWxpYXM6ICdhdHRyLXZhbHVlJyxcbiAgICBpbnNpZGU6IHtcbiAgICAgICdpbm5lci12YWx1ZSc6IHtcbiAgICAgICAgcGF0dGVybjogL14oXCJ8JykuKyg/PVxcMSQpLyxcbiAgICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgJ3B1bmN0dWF0aW9uJzogLz0vXG59O1xuKGZ1bmN0aW9uIChQcmlzbSkge1xuICB2YXIga2V5d29yZHMgPSAvXFxiKD86YWJzdHJhY3R8YXNzZXJ0fGJvb2xlYW58YnJlYWt8Ynl0ZXxjYXNlfGNhdGNofGNoYXJ8Y2xhc3N8Y29uc3R8Y29udGludWV8ZGVmYXVsdHxkb3xkb3VibGV8ZWxzZXxlbnVtfGV4cG9ydHN8ZXh0ZW5kc3xmaW5hbHxmaW5hbGx5fGZsb2F0fGZvcnxnb3RvfGlmfGltcGxlbWVudHN8aW1wb3J0fGluc3RhbmNlb2Z8aW50fGludGVyZmFjZXxsb25nfG1vZHVsZXxuYXRpdmV8bmV3fG5vbi1zZWFsZWR8bnVsbHxvcGVufG9wZW5zfHBhY2thZ2V8cGVybWl0c3xwcml2YXRlfHByb3RlY3RlZHxwcm92aWRlc3xwdWJsaWN8cmVjb3JkKD8hXFxzKlsoKXt9W1xcXTw+PSV+LjosOz8rXFwtKi8mfF5dKXxyZXF1aXJlc3xyZXR1cm58c2VhbGVkfHNob3J0fHN0YXRpY3xzdHJpY3RmcHxzdXBlcnxzd2l0Y2h8c3luY2hyb25pemVkfHRoaXN8dGhyb3d8dGhyb3dzfHRvfHRyYW5zaWVudHx0cmFuc2l0aXZlfHRyeXx1c2VzfHZhcnx2b2lkfHZvbGF0aWxlfHdoaWxlfHdpdGh8eWllbGQpXFxiLztcblxuICAvLyBmdWxsIHBhY2thZ2UgKG9wdGlvbmFsKSArIHBhcmVudCBjbGFzc2VzIChvcHRpb25hbClcbiAgdmFyIGNsYXNzTmFtZVByZWZpeCA9IC8oPzpbYS16XVxcdypcXHMqXFwuXFxzKikqKD86W0EtWl1cXHcqXFxzKlxcLlxccyopKi8uc291cmNlO1xuXG4gIC8vIGJhc2VkIG9uIHRoZSBqYXZhIG5hbWluZyBjb252ZW50aW9uc1xuICB2YXIgY2xhc3NOYW1lID0ge1xuICAgIHBhdHRlcm46IFJlZ0V4cCgvKF58W15cXHcuXSkvLnNvdXJjZSArIGNsYXNzTmFtZVByZWZpeCArIC9bQS1aXSg/OltcXGRfQS1aXSpbYS16XVxcdyopP1xcYi8uc291cmNlKSxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGluc2lkZToge1xuICAgICAgJ25hbWVzcGFjZSc6IHtcbiAgICAgICAgcGF0dGVybjogL15bYS16XVxcdyooPzpcXHMqXFwuXFxzKlthLXpdXFx3KikqKD86XFxzKlxcLik/LyxcbiAgICAgICAgaW5zaWRlOiB7XG4gICAgICAgICAgJ3B1bmN0dWF0aW9uJzogL1xcLi9cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgICdwdW5jdHVhdGlvbic6IC9cXC4vXG4gICAgfVxuICB9O1xuICBQcmlzbS5sYW5ndWFnZXMuamF2YSA9IFByaXNtLmxhbmd1YWdlcy5leHRlbmQoJ2NsaWtlJywge1xuICAgICdzdHJpbmcnOiB7XG4gICAgICBwYXR0ZXJuOiAvKF58W15cXFxcXSlcIig/OlxcXFwufFteXCJcXFxcXFxyXFxuXSkqXCIvLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGdyZWVkeTogdHJ1ZVxuICAgIH0sXG4gICAgJ2NsYXNzLW5hbWUnOiBbY2xhc3NOYW1lLCB7XG4gICAgICAvLyB2YXJpYWJsZXMsIHBhcmFtZXRlcnMsIGFuZCBjb25zdHJ1Y3RvciByZWZlcmVuY2VzXG4gICAgICAvLyB0aGlzIHRvIHN1cHBvcnQgY2xhc3MgbmFtZXMgKG9yIGdlbmVyaWMgcGFyYW1ldGVycykgd2hpY2ggZG8gbm90IGNvbnRhaW4gYSBsb3dlciBjYXNlIGxldHRlciAoYWxzbyB3b3JrcyBmb3IgbWV0aG9kcylcbiAgICAgIHBhdHRlcm46IFJlZ0V4cCgvKF58W15cXHcuXSkvLnNvdXJjZSArIGNsYXNzTmFtZVByZWZpeCArIC9bQS1aXVxcdyooPz1cXHMrXFx3K1xccypbOyw9KCldfFxccyooPzpcXFtbXFxzLF0qXFxdXFxzKik/OjpcXHMqbmV3XFxiKS8uc291cmNlKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBpbnNpZGU6IGNsYXNzTmFtZS5pbnNpZGVcbiAgICB9LCB7XG4gICAgICAvLyBjbGFzcyBuYW1lcyBiYXNlZCBvbiBrZXl3b3JkXG4gICAgICAvLyB0aGlzIHRvIHN1cHBvcnQgY2xhc3MgbmFtZXMgKG9yIGdlbmVyaWMgcGFyYW1ldGVycykgd2hpY2ggZG8gbm90IGNvbnRhaW4gYSBsb3dlciBjYXNlIGxldHRlciAoYWxzbyB3b3JrcyBmb3IgbWV0aG9kcylcbiAgICAgIHBhdHRlcm46IFJlZ0V4cCgvKFxcYig/OmNsYXNzfGVudW18ZXh0ZW5kc3xpbXBsZW1lbnRzfGluc3RhbmNlb2Z8aW50ZXJmYWNlfG5ld3xyZWNvcmR8dGhyb3dzKVxccyspLy5zb3VyY2UgKyBjbGFzc05hbWVQcmVmaXggKyAvW0EtWl1cXHcqXFxiLy5zb3VyY2UpLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGluc2lkZTogY2xhc3NOYW1lLmluc2lkZVxuICAgIH1dLFxuICAgICdrZXl3b3JkJzoga2V5d29yZHMsXG4gICAgJ2Z1bmN0aW9uJzogW1ByaXNtLmxhbmd1YWdlcy5jbGlrZS5mdW5jdGlvbiwge1xuICAgICAgcGF0dGVybjogLyg6OlxccyopW2Etel9dXFx3Ki8sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgfV0sXG4gICAgJ251bWJlcic6IC9cXGIwYlswMV1bMDFfXSpMP1xcYnxcXGIweCg/OlxcLltcXGRhLWZfcCstXSt8W1xcZGEtZl9dKyg/OlxcLltcXGRhLWZfcCstXSspPylcXGJ8KD86XFxiXFxkW1xcZF9dKig/OlxcLltcXGRfXSopP3xcXEJcXC5cXGRbXFxkX10qKSg/OmVbKy1dP1xcZFtcXGRfXSopP1tkZmxdPy9pLFxuICAgICdvcGVyYXRvcic6IHtcbiAgICAgIHBhdHRlcm46IC8oXnxbXi5dKSg/Ojw8PT98Pj4+Pz0/fC0+fC0tfFxcK1xcK3wmJnxcXHxcXHx8Ojp8Wz86fl18Wy0rKi8lJnxeIT08Pl09PykvbSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICB9LFxuICAgICdjb25zdGFudCc6IC9cXGJbQS1aXVtBLVpfXFxkXStcXGIvXG4gIH0pO1xuICBQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdqYXZhJywgJ3N0cmluZycsIHtcbiAgICAndHJpcGxlLXF1b3RlZC1zdHJpbmcnOiB7XG4gICAgICAvLyBodHRwOi8vb3Blbmpkay5qYXZhLm5ldC9qZXBzLzM1NSNEZXNjcmlwdGlvblxuICAgICAgcGF0dGVybjogL1wiXCJcIlsgXFx0XSpbXFxyXFxuXSg/Oig/OlwifFwiXCIpPyg/OlxcXFwufFteXCJcXFxcXSkpKlwiXCJcIi8sXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBhbGlhczogJ3N0cmluZydcbiAgICB9LFxuICAgICdjaGFyJzoge1xuICAgICAgcGF0dGVybjogLycoPzpcXFxcLnxbXidcXFxcXFxyXFxuXSl7MSw2fScvLFxuICAgICAgZ3JlZWR5OiB0cnVlXG4gICAgfVxuICB9KTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnamF2YScsICdjbGFzcy1uYW1lJywge1xuICAgICdhbm5vdGF0aW9uJzoge1xuICAgICAgcGF0dGVybjogLyhefFteLl0pQFxcdysoPzpcXHMqXFwuXFxzKlxcdyspKi8sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgYWxpYXM6ICdwdW5jdHVhdGlvbidcbiAgICB9LFxuICAgICdnZW5lcmljcyc6IHtcbiAgICAgIHBhdHRlcm46IC88KD86W1xcd1xccywuP118Jig/ISYpfDwoPzpbXFx3XFxzLC4/XXwmKD8hJil8PCg/OltcXHdcXHMsLj9dfCYoPyEmKXw8KD86W1xcd1xccywuP118Jig/ISYpKSo+KSo+KSo+KSo+LyxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAnY2xhc3MtbmFtZSc6IGNsYXNzTmFtZSxcbiAgICAgICAgJ2tleXdvcmQnOiBrZXl3b3JkcyxcbiAgICAgICAgJ3B1bmN0dWF0aW9uJzogL1s8PigpLC46XS8sXG4gICAgICAgICdvcGVyYXRvcic6IC9bPyZ8XS9cbiAgICAgIH1cbiAgICB9LFxuICAgICdpbXBvcnQnOiBbe1xuICAgICAgcGF0dGVybjogUmVnRXhwKC8oXFxiaW1wb3J0XFxzKykvLnNvdXJjZSArIGNsYXNzTmFtZVByZWZpeCArIC8oPzpbQS1aXVxcdyp8XFwqKSg/PVxccyo7KS8uc291cmNlKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ25hbWVzcGFjZSc6IGNsYXNzTmFtZS5pbnNpZGUubmFtZXNwYWNlLFxuICAgICAgICAncHVuY3R1YXRpb24nOiAvXFwuLyxcbiAgICAgICAgJ29wZXJhdG9yJzogL1xcKi8sXG4gICAgICAgICdjbGFzcy1uYW1lJzogL1xcdysvXG4gICAgICB9XG4gICAgfSwge1xuICAgICAgcGF0dGVybjogUmVnRXhwKC8oXFxiaW1wb3J0XFxzK3N0YXRpY1xccyspLy5zb3VyY2UgKyBjbGFzc05hbWVQcmVmaXggKyAvKD86XFx3K3xcXCopKD89XFxzKjspLy5zb3VyY2UpLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGFsaWFzOiAnc3RhdGljJyxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAnbmFtZXNwYWNlJzogY2xhc3NOYW1lLmluc2lkZS5uYW1lc3BhY2UsXG4gICAgICAgICdzdGF0aWMnOiAvXFxiXFx3KyQvLFxuICAgICAgICAncHVuY3R1YXRpb24nOiAvXFwuLyxcbiAgICAgICAgJ29wZXJhdG9yJzogL1xcKi8sXG4gICAgICAgICdjbGFzcy1uYW1lJzogL1xcdysvXG4gICAgICB9XG4gICAgfV0sXG4gICAgJ25hbWVzcGFjZSc6IHtcbiAgICAgIHBhdHRlcm46IFJlZ0V4cCgvKFxcYig/OmV4cG9ydHN8aW1wb3J0KD86XFxzK3N0YXRpYyk/fG1vZHVsZXxvcGVufG9wZW5zfHBhY2thZ2V8cHJvdmlkZXN8cmVxdWlyZXN8dG98dHJhbnNpdGl2ZXx1c2VzfHdpdGgpXFxzKykoPyE8a2V5d29yZD4pW2Etel1cXHcqKD86XFwuW2Etel1cXHcqKSpcXC4/Ly5zb3VyY2UucmVwbGFjZSgvPGtleXdvcmQ+L2csIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGtleXdvcmRzLnNvdXJjZTtcbiAgICAgIH0pKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ3B1bmN0dWF0aW9uJzogL1xcLi9cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufSkoUHJpc20pO1xuKGZ1bmN0aW9uIChQcmlzbSkge1xuICB2YXIgc3BlY2lhbEVzY2FwZSA9IHtcbiAgICBwYXR0ZXJuOiAvXFxcXFtcXFxcKCl7fVtcXF1eJCsqP3wuXS8sXG4gICAgYWxpYXM6ICdlc2NhcGUnXG4gIH07XG4gIHZhciBlc2NhcGUgPSAvXFxcXCg/OnhbXFxkYS1mQS1GXXsyfXx1W1xcZGEtZkEtRl17NH18dVxce1tcXGRhLWZBLUZdK1xcfXwwWzAtN117MCwyfXxbMTIzXVswLTddezJ9fGNbYS16QS1aXXwuKS87XG4gIHZhciBjaGFyU2V0ID0ge1xuICAgIHBhdHRlcm46IC9cXC58XFxcXFt3c2RdfFxcXFxwXFx7W157fV0rXFx9L2ksXG4gICAgYWxpYXM6ICdjbGFzcy1uYW1lJ1xuICB9O1xuICB2YXIgY2hhclNldFdpdGhvdXREb3QgPSB7XG4gICAgcGF0dGVybjogL1xcXFxbd3NkXXxcXFxccFxce1tee31dK1xcfS9pLFxuICAgIGFsaWFzOiAnY2xhc3MtbmFtZSdcbiAgfTtcbiAgdmFyIHJhbmdlQ2hhciA9ICcoPzpbXlxcXFxcXFxcLV18JyArIGVzY2FwZS5zb3VyY2UgKyAnKSc7XG4gIHZhciByYW5nZSA9IFJlZ0V4cChyYW5nZUNoYXIgKyAnLScgKyByYW5nZUNoYXIpO1xuXG4gIC8vIHRoZSBuYW1lIG9mIGEgY2FwdHVyaW5nIGdyb3VwXG4gIHZhciBncm91cE5hbWUgPSB7XG4gICAgcGF0dGVybjogLyg8fCcpW148PiddKyg/PVs+J10kKS8sXG4gICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICBhbGlhczogJ3ZhcmlhYmxlJ1xuICB9O1xuICBQcmlzbS5sYW5ndWFnZXMucmVnZXggPSB7XG4gICAgJ2NoYXItY2xhc3MnOiB7XG4gICAgICBwYXR0ZXJuOiAvKCg/Ol58W15cXFxcXSkoPzpcXFxcXFxcXCkqKVxcWyg/OlteXFxcXFxcXV18XFxcXFtcXHNcXFNdKSpcXF0vLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAnY2hhci1jbGFzcy1uZWdhdGlvbic6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvKF5cXFspXFxeLyxcbiAgICAgICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgICAgIGFsaWFzOiAnb3BlcmF0b3InXG4gICAgICAgIH0sXG4gICAgICAgICdjaGFyLWNsYXNzLXB1bmN0dWF0aW9uJzoge1xuICAgICAgICAgIHBhdHRlcm46IC9eXFxbfFxcXSQvLFxuICAgICAgICAgIGFsaWFzOiAncHVuY3R1YXRpb24nXG4gICAgICAgIH0sXG4gICAgICAgICdyYW5nZSc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiByYW5nZSxcbiAgICAgICAgICBpbnNpZGU6IHtcbiAgICAgICAgICAgICdlc2NhcGUnOiBlc2NhcGUsXG4gICAgICAgICAgICAncmFuZ2UtcHVuY3R1YXRpb24nOiB7XG4gICAgICAgICAgICAgIHBhdHRlcm46IC8tLyxcbiAgICAgICAgICAgICAgYWxpYXM6ICdvcGVyYXRvcidcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdzcGVjaWFsLWVzY2FwZSc6IHNwZWNpYWxFc2NhcGUsXG4gICAgICAgICdjaGFyLXNldCc6IGNoYXJTZXRXaXRob3V0RG90LFxuICAgICAgICAnZXNjYXBlJzogZXNjYXBlXG4gICAgICB9XG4gICAgfSxcbiAgICAnc3BlY2lhbC1lc2NhcGUnOiBzcGVjaWFsRXNjYXBlLFxuICAgICdjaGFyLXNldCc6IGNoYXJTZXQsXG4gICAgJ2JhY2tyZWZlcmVuY2UnOiBbe1xuICAgICAgLy8gYSBiYWNrcmVmZXJlbmNlIHdoaWNoIGlzIG5vdCBhbiBvY3RhbCBlc2NhcGVcbiAgICAgIHBhdHRlcm46IC9cXFxcKD8hWzEyM11bMC03XXsyfSlbMS05XS8sXG4gICAgICBhbGlhczogJ2tleXdvcmQnXG4gICAgfSwge1xuICAgICAgcGF0dGVybjogL1xcXFxrPFtePD4nXSs+LyxcbiAgICAgIGFsaWFzOiAna2V5d29yZCcsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ2dyb3VwLW5hbWUnOiBncm91cE5hbWVcbiAgICAgIH1cbiAgICB9XSxcbiAgICAnYW5jaG9yJzoge1xuICAgICAgcGF0dGVybjogL1skXl18XFxcXFtBQmJHWnpdLyxcbiAgICAgIGFsaWFzOiAnZnVuY3Rpb24nXG4gICAgfSxcbiAgICAnZXNjYXBlJzogZXNjYXBlLFxuICAgICdncm91cCc6IFt7XG4gICAgICAvLyBodHRwczovL2RvY3Mub3JhY2xlLmNvbS9qYXZhc2UvMTAvZG9jcy9hcGkvamF2YS91dGlsL3JlZ2V4L1BhdHRlcm4uaHRtbFxuICAgICAgLy8gaHR0cHM6Ly9kb2NzLm1pY3Jvc29mdC5jb20vZW4tdXMvZG90bmV0L3N0YW5kYXJkL2Jhc2UtdHlwZXMvcmVndWxhci1leHByZXNzaW9uLWxhbmd1YWdlLXF1aWNrLXJlZmVyZW5jZT92aWV3PW5ldGZyYW1ld29yay00LjcuMiNncm91cGluZy1jb25zdHJ1Y3RzXG5cbiAgICAgIC8vICgpLCAoPzxuYW1lPiksICg/J25hbWUnKSwgKD8+KSwgKD86KSwgKD89KSwgKD8hKSwgKD88PSksICg/PCEpLCAoP2lzLW0pLCAoP2ktbTopXG4gICAgICBwYXR0ZXJuOiAvXFwoKD86XFw/KD86PFtePD4nXSs+fCdbXjw+J10rJ3xbPjpdfDw/Wz0hXXxbaWRtbnN1eFVdKyg/Oi1baWRtbnN1eFVdKyk/Oj8pKT8vLFxuICAgICAgYWxpYXM6ICdwdW5jdHVhdGlvbicsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ2dyb3VwLW5hbWUnOiBncm91cE5hbWVcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBwYXR0ZXJuOiAvXFwpLyxcbiAgICAgIGFsaWFzOiAncHVuY3R1YXRpb24nXG4gICAgfV0sXG4gICAgJ3F1YW50aWZpZXInOiB7XG4gICAgICBwYXR0ZXJuOiAvKD86WysqP118XFx7XFxkKyg/OixcXGQqKT9cXH0pWz8rXT8vLFxuICAgICAgYWxpYXM6ICdudW1iZXInXG4gICAgfSxcbiAgICAnYWx0ZXJuYXRpb24nOiB7XG4gICAgICBwYXR0ZXJuOiAvXFx8LyxcbiAgICAgIGFsaWFzOiAna2V5d29yZCdcbiAgICB9XG4gIH07XG59KShQcmlzbSk7XG5QcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdCA9IFByaXNtLmxhbmd1YWdlcy5leHRlbmQoJ2NsaWtlJywge1xuICAnY2xhc3MtbmFtZSc6IFtQcmlzbS5sYW5ndWFnZXMuY2xpa2VbJ2NsYXNzLW5hbWUnXSwge1xuICAgIHBhdHRlcm46IC8oXnxbXiRcXHdcXHhBMC1cXHVGRkZGXSkoPyFcXHMpW18kQS1aXFx4QTAtXFx1RkZGRl0oPzooPyFcXHMpWyRcXHdcXHhBMC1cXHVGRkZGXSkqKD89XFwuKD86Y29uc3RydWN0b3J8cHJvdG90eXBlKSkvLFxuICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgfV0sXG4gICdrZXl3b3JkJzogW3tcbiAgICBwYXR0ZXJuOiAvKCg/Ol58XFx9KVxccyopY2F0Y2hcXGIvLFxuICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgfSwge1xuICAgIHBhdHRlcm46IC8oXnxbXi5dfFxcLlxcLlxcLlxccyopXFxiKD86YXN8YXNzZXJ0KD89XFxzKlxceyl8YXN5bmMoPz1cXHMqKD86ZnVuY3Rpb25cXGJ8XFwofFskXFx3XFx4QTAtXFx1RkZGRl18JCkpfGF3YWl0fGJyZWFrfGNhc2V8Y2xhc3N8Y29uc3R8Y29udGludWV8ZGVidWdnZXJ8ZGVmYXVsdHxkZWxldGV8ZG98ZWxzZXxlbnVtfGV4cG9ydHxleHRlbmRzfGZpbmFsbHkoPz1cXHMqKD86XFx7fCQpKXxmb3J8ZnJvbSg/PVxccyooPzpbJ1wiXXwkKSl8ZnVuY3Rpb258KD86Z2V0fHNldCkoPz1cXHMqKD86WyNcXFskXFx3XFx4QTAtXFx1RkZGRl18JCkpfGlmfGltcGxlbWVudHN8aW1wb3J0fGlufGluc3RhbmNlb2Z8aW50ZXJmYWNlfGxldHxuZXd8bnVsbHxvZnxwYWNrYWdlfHByaXZhdGV8cHJvdGVjdGVkfHB1YmxpY3xyZXR1cm58c3RhdGljfHN1cGVyfHN3aXRjaHx0aGlzfHRocm93fHRyeXx0eXBlb2Z8dW5kZWZpbmVkfHZhcnx2b2lkfHdoaWxlfHdpdGh8eWllbGQpXFxiLyxcbiAgICBsb29rYmVoaW5kOiB0cnVlXG4gIH1dLFxuICAvLyBBbGxvdyBmb3IgYWxsIG5vbi1BU0NJSSBjaGFyYWN0ZXJzIChTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjAwODQ0NClcbiAgJ2Z1bmN0aW9uJzogLyM/KD8hXFxzKVtfJGEtekEtWlxceEEwLVxcdUZGRkZdKD86KD8hXFxzKVskXFx3XFx4QTAtXFx1RkZGRl0pKig/PVxccyooPzpcXC5cXHMqKD86YXBwbHl8YmluZHxjYWxsKVxccyopP1xcKCkvLFxuICAnbnVtYmVyJzoge1xuICAgIHBhdHRlcm46IFJlZ0V4cCgvKF58W15cXHckXSkvLnNvdXJjZSArICcoPzonICsgKFxuICAgIC8vIGNvbnN0YW50XG4gICAgL05hTnxJbmZpbml0eS8uc291cmNlICsgJ3wnICtcbiAgICAvLyBiaW5hcnkgaW50ZWdlclxuICAgIC8wW2JCXVswMV0rKD86X1swMV0rKSpuPy8uc291cmNlICsgJ3wnICtcbiAgICAvLyBvY3RhbCBpbnRlZ2VyXG4gICAgLzBbb09dWzAtN10rKD86X1swLTddKykqbj8vLnNvdXJjZSArICd8JyArXG4gICAgLy8gaGV4YWRlY2ltYWwgaW50ZWdlclxuICAgIC8wW3hYXVtcXGRBLUZhLWZdKyg/Ol9bXFxkQS1GYS1mXSspKm4/Ly5zb3VyY2UgKyAnfCcgK1xuICAgIC8vIGRlY2ltYWwgYmlnaW50XG4gICAgL1xcZCsoPzpfXFxkKykqbi8uc291cmNlICsgJ3wnICtcbiAgICAvLyBkZWNpbWFsIG51bWJlciAoaW50ZWdlciBvciBmbG9hdCkgYnV0IG5vIGJpZ2ludFxuICAgIC8oPzpcXGQrKD86X1xcZCspKig/OlxcLig/OlxcZCsoPzpfXFxkKykqKT8pP3xcXC5cXGQrKD86X1xcZCspKikoPzpbRWVdWystXT9cXGQrKD86X1xcZCspKik/Ly5zb3VyY2UpICsgJyknICsgLyg/IVtcXHckXSkvLnNvdXJjZSksXG4gICAgbG9va2JlaGluZDogdHJ1ZVxuICB9LFxuICAnb3BlcmF0b3InOiAvLS18XFwrXFwrfFxcKlxcKj0/fD0+fCYmPT98XFx8XFx8PT98WyE9XT09fDw8PT98Pj4+Pz0/fFstKyovJSZ8XiE9PD5dPT98XFwuezN9fFxcP1xcPz0/fFxcP1xcLj98W346XS9cbn0pO1xuUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHRbJ2NsYXNzLW5hbWUnXVswXS5wYXR0ZXJuID0gLyhcXGIoPzpjbGFzc3xleHRlbmRzfGltcGxlbWVudHN8aW5zdGFuY2VvZnxpbnRlcmZhY2V8bmV3KVxccyspW1xcdy5cXFxcXSsvO1xuUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnamF2YXNjcmlwdCcsICdrZXl3b3JkJywge1xuICAncmVnZXgnOiB7XG4gICAgcGF0dGVybjogUmVnRXhwKFxuICAgIC8vIGxvb2tiZWhpbmRcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVnZXhwL25vLWR1cGUtY2hhcmFjdGVycy1jaGFyYWN0ZXItY2xhc3NcbiAgICAvKCg/Ol58W14kXFx3XFx4QTAtXFx1RkZGRi5cIidcXF0pXFxzXXxcXGIoPzpyZXR1cm58eWllbGQpKVxccyopLy5zb3VyY2UgK1xuICAgIC8vIFJlZ2V4IHBhdHRlcm46XG4gICAgLy8gVGhlcmUgYXJlIDIgcmVnZXggcGF0dGVybnMgaGVyZS4gVGhlIFJlZ0V4cCBzZXQgbm90YXRpb24gcHJvcG9zYWwgYWRkZWQgc3VwcG9ydCBmb3IgbmVzdGVkIGNoYXJhY3RlclxuICAgIC8vIGNsYXNzZXMgaWYgdGhlIGB2YCBmbGFnIGlzIHByZXNlbnQuIFVuZm9ydHVuYXRlbHksIG5lc3RlZCBDQ3MgYXJlIGJvdGggY29udGV4dC1mcmVlIGFuZCBpbmNvbXBhdGlibGVcbiAgICAvLyB3aXRoIHRoZSBvbmx5IHN5bnRheCwgc28gd2UgaGF2ZSB0byBkZWZpbmUgMiBkaWZmZXJlbnQgcmVnZXggcGF0dGVybnMuXG4gICAgL1xcLy8uc291cmNlICsgJyg/OicgKyAvKD86XFxbKD86W15cXF1cXFxcXFxyXFxuXXxcXFxcLikqXFxdfFxcXFwufFteL1xcXFxcXFtcXHJcXG5dKStcXC9bZGdpbXl1c117MCw3fS8uc291cmNlICsgJ3wnICtcbiAgICAvLyBgdmAgZmxhZyBzeW50YXguIFRoaXMgc3VwcG9ydHMgMyBsZXZlbHMgb2YgbmVzdGVkIGNoYXJhY3RlciBjbGFzc2VzLlxuICAgIC8oPzpcXFsoPzpbXltcXF1cXFxcXFxyXFxuXXxcXFxcLnxcXFsoPzpbXltcXF1cXFxcXFxyXFxuXXxcXFxcLnxcXFsoPzpbXltcXF1cXFxcXFxyXFxuXXxcXFxcLikqXFxdKSpcXF0pKlxcXXxcXFxcLnxbXi9cXFxcXFxbXFxyXFxuXSkrXFwvW2RnaW15dXNdezAsN312W2RnaW15dXNdezAsN30vLnNvdXJjZSArICcpJyArXG4gICAgLy8gbG9va2FoZWFkXG4gICAgLyg/PSg/Olxcc3xcXC9cXCooPzpbXipdfFxcKig/IVxcLykpKlxcKlxcLykqKD86JHxbXFxyXFxuLC47On0pXFxdXXxcXC9cXC8pKS8uc291cmNlKSxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGdyZWVkeTogdHJ1ZSxcbiAgICBpbnNpZGU6IHtcbiAgICAgICdyZWdleC1zb3VyY2UnOiB7XG4gICAgICAgIHBhdHRlcm46IC9eKFxcLylbXFxzXFxTXSsoPz1cXC9bYS16XSokKS8sXG4gICAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICAgIGFsaWFzOiAnbGFuZ3VhZ2UtcmVnZXgnLFxuICAgICAgICBpbnNpZGU6IFByaXNtLmxhbmd1YWdlcy5yZWdleFxuICAgICAgfSxcbiAgICAgICdyZWdleC1kZWxpbWl0ZXInOiAvXlxcL3xcXC8kLyxcbiAgICAgICdyZWdleC1mbGFncyc6IC9eW2Etel0rJC9cbiAgICB9XG4gIH0sXG4gIC8vIFRoaXMgbXVzdCBiZSBkZWNsYXJlZCBiZWZvcmUga2V5d29yZCBiZWNhdXNlIHdlIHVzZSBcImZ1bmN0aW9uXCIgaW5zaWRlIHRoZSBsb29rLWZvcndhcmRcbiAgJ2Z1bmN0aW9uLXZhcmlhYmxlJzoge1xuICAgIHBhdHRlcm46IC8jPyg/IVxccylbXyRhLXpBLVpcXHhBMC1cXHVGRkZGXSg/Oig/IVxccylbJFxcd1xceEEwLVxcdUZGRkZdKSooPz1cXHMqWz06XVxccyooPzphc3luY1xccyopPyg/OlxcYmZ1bmN0aW9uXFxifCg/OlxcKCg/OlteKCldfFxcKFteKCldKlxcKSkqXFwpfCg/IVxccylbXyRhLXpBLVpcXHhBMC1cXHVGRkZGXSg/Oig/IVxccylbJFxcd1xceEEwLVxcdUZGRkZdKSopXFxzKj0+KSkvLFxuICAgIGFsaWFzOiAnZnVuY3Rpb24nXG4gIH0sXG4gICdwYXJhbWV0ZXInOiBbe1xuICAgIHBhdHRlcm46IC8oZnVuY3Rpb24oPzpcXHMrKD8hXFxzKVtfJGEtekEtWlxceEEwLVxcdUZGRkZdKD86KD8hXFxzKVskXFx3XFx4QTAtXFx1RkZGRl0pKik/XFxzKlxcKFxccyopKD8hXFxzKSg/OlteKClcXHNdfFxccysoPyFbXFxzKV0pfFxcKFteKCldKlxcKSkrKD89XFxzKlxcKSkvLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgaW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdFxuICB9LCB7XG4gICAgcGF0dGVybjogLyhefFteJFxcd1xceEEwLVxcdUZGRkZdKSg/IVxccylbXyRhLXpcXHhBMC1cXHVGRkZGXSg/Oig/IVxccylbJFxcd1xceEEwLVxcdUZGRkZdKSooPz1cXHMqPT4pL2ksXG4gICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICBpbnNpZGU6IFByaXNtLmxhbmd1YWdlcy5qYXZhc2NyaXB0XG4gIH0sIHtcbiAgICBwYXR0ZXJuOiAvKFxcKFxccyopKD8hXFxzKSg/OlteKClcXHNdfFxccysoPyFbXFxzKV0pfFxcKFteKCldKlxcKSkrKD89XFxzKlxcKVxccyo9PikvLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgaW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdFxuICB9LCB7XG4gICAgcGF0dGVybjogLygoPzpcXGJ8XFxzfF4pKD8hKD86YXN8YXN5bmN8YXdhaXR8YnJlYWt8Y2FzZXxjYXRjaHxjbGFzc3xjb25zdHxjb250aW51ZXxkZWJ1Z2dlcnxkZWZhdWx0fGRlbGV0ZXxkb3xlbHNlfGVudW18ZXhwb3J0fGV4dGVuZHN8ZmluYWxseXxmb3J8ZnJvbXxmdW5jdGlvbnxnZXR8aWZ8aW1wbGVtZW50c3xpbXBvcnR8aW58aW5zdGFuY2VvZnxpbnRlcmZhY2V8bGV0fG5ld3xudWxsfG9mfHBhY2thZ2V8cHJpdmF0ZXxwcm90ZWN0ZWR8cHVibGljfHJldHVybnxzZXR8c3RhdGljfHN1cGVyfHN3aXRjaHx0aGlzfHRocm93fHRyeXx0eXBlb2Z8dW5kZWZpbmVkfHZhcnx2b2lkfHdoaWxlfHdpdGh8eWllbGQpKD8hWyRcXHdcXHhBMC1cXHVGRkZGXSkpKD86KD8hXFxzKVtfJGEtekEtWlxceEEwLVxcdUZGRkZdKD86KD8hXFxzKVskXFx3XFx4QTAtXFx1RkZGRl0pKlxccyopXFwoXFxzKnxcXF1cXHMqXFwoXFxzKikoPyFcXHMpKD86W14oKVxcc118XFxzKyg/IVtcXHMpXSl8XFwoW14oKV0qXFwpKSsoPz1cXHMqXFwpXFxzKlxceykvLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgaW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdFxuICB9XSxcbiAgJ2NvbnN0YW50JzogL1xcYltBLVpdKD86W0EtWl9dfFxcZHg/KSpcXGIvXG59KTtcblByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ2phdmFzY3JpcHQnLCAnc3RyaW5nJywge1xuICAnaGFzaGJhbmcnOiB7XG4gICAgcGF0dGVybjogL14jIS4qLyxcbiAgICBncmVlZHk6IHRydWUsXG4gICAgYWxpYXM6ICdjb21tZW50J1xuICB9LFxuICAndGVtcGxhdGUtc3RyaW5nJzoge1xuICAgIHBhdHRlcm46IC9gKD86XFxcXFtcXHNcXFNdfFxcJFxceyg/Oltee31dfFxceyg/Oltee31dfFxce1tefV0qXFx9KSpcXH0pK1xcfXwoPyFcXCRcXHspW15cXFxcYF0pKmAvLFxuICAgIGdyZWVkeTogdHJ1ZSxcbiAgICBpbnNpZGU6IHtcbiAgICAgICd0ZW1wbGF0ZS1wdW5jdHVhdGlvbic6IHtcbiAgICAgICAgcGF0dGVybjogL15gfGAkLyxcbiAgICAgICAgYWxpYXM6ICdzdHJpbmcnXG4gICAgICB9LFxuICAgICAgJ2ludGVycG9sYXRpb24nOiB7XG4gICAgICAgIHBhdHRlcm46IC8oKD86XnxbXlxcXFxdKSg/OlxcXFx7Mn0pKilcXCRcXHsoPzpbXnt9XXxcXHsoPzpbXnt9XXxcXHtbXn1dKlxcfSkqXFx9KStcXH0vLFxuICAgICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgICBpbnNpZGU6IHtcbiAgICAgICAgICAnaW50ZXJwb2xhdGlvbi1wdW5jdHVhdGlvbic6IHtcbiAgICAgICAgICAgIHBhdHRlcm46IC9eXFwkXFx7fFxcfSQvLFxuICAgICAgICAgICAgYWxpYXM6ICdwdW5jdHVhdGlvbidcbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlc3Q6IFByaXNtLmxhbmd1YWdlcy5qYXZhc2NyaXB0XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAnc3RyaW5nJzogL1tcXHNcXFNdKy9cbiAgICB9XG4gIH0sXG4gICdzdHJpbmctcHJvcGVydHknOiB7XG4gICAgcGF0dGVybjogLygoPzpefFsse10pWyBcXHRdKikoW1wiJ10pKD86XFxcXCg/OlxcclxcbnxbXFxzXFxTXSl8KD8hXFwyKVteXFxcXFxcclxcbl0pKlxcMig/PVxccyo6KS9tLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgZ3JlZWR5OiB0cnVlLFxuICAgIGFsaWFzOiAncHJvcGVydHknXG4gIH1cbn0pO1xuUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnamF2YXNjcmlwdCcsICdvcGVyYXRvcicsIHtcbiAgJ2xpdGVyYWwtcHJvcGVydHknOiB7XG4gICAgcGF0dGVybjogLygoPzpefFsse10pWyBcXHRdKikoPyFcXHMpW18kYS16QS1aXFx4QTAtXFx1RkZGRl0oPzooPyFcXHMpWyRcXHdcXHhBMC1cXHVGRkZGXSkqKD89XFxzKjopL20sXG4gICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICBhbGlhczogJ3Byb3BlcnR5J1xuICB9XG59KTtcbmlmIChQcmlzbS5sYW5ndWFnZXMubWFya3VwKSB7XG4gIFByaXNtLmxhbmd1YWdlcy5tYXJrdXAudGFnLmFkZElubGluZWQoJ3NjcmlwdCcsICdqYXZhc2NyaXB0Jyk7XG5cbiAgLy8gYWRkIGF0dHJpYnV0ZSBzdXBwb3J0IGZvciBhbGwgRE9NIGV2ZW50cy5cbiAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvRXZlbnRzI1N0YW5kYXJkX2V2ZW50c1xuICBQcmlzbS5sYW5ndWFnZXMubWFya3VwLnRhZy5hZGRBdHRyaWJ1dGUoL29uKD86YWJvcnR8Ymx1cnxjaGFuZ2V8Y2xpY2t8Y29tcG9zaXRpb24oPzplbmR8c3RhcnR8dXBkYXRlKXxkYmxjbGlja3xlcnJvcnxmb2N1cyg/OmlufG91dCk/fGtleSg/OmRvd258dXApfGxvYWR8bW91c2UoPzpkb3dufGVudGVyfGxlYXZlfG1vdmV8b3V0fG92ZXJ8dXApfHJlc2V0fHJlc2l6ZXxzY3JvbGx8c2VsZWN0fHNsb3RjaGFuZ2V8c3VibWl0fHVubG9hZHx3aGVlbCkvLnNvdXJjZSwgJ2phdmFzY3JpcHQnKTtcbn1cblByaXNtLmxhbmd1YWdlcy5qcyA9IFByaXNtLmxhbmd1YWdlcy5qYXZhc2NyaXB0O1xuKGZ1bmN0aW9uIChQcmlzbSkge1xuICB2YXIgamF2YXNjcmlwdCA9IFByaXNtLnV0aWwuY2xvbmUoUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHQpO1xuICB2YXIgc3BhY2UgPSAvKD86XFxzfFxcL1xcLy4qKD8hLil8XFwvXFwqKD86W14qXXxcXCooPyFcXC8pKVxcKlxcLykvLnNvdXJjZTtcbiAgdmFyIGJyYWNlcyA9IC8oPzpcXHsoPzpcXHsoPzpcXHtbXnt9XSpcXH18W157fV0pKlxcfXxbXnt9XSkqXFx9KS8uc291cmNlO1xuICB2YXIgc3ByZWFkID0gLyg/OlxcezxTPipcXC57M30oPzpbXnt9XXw8QlJBQ0VTPikqXFx9KS8uc291cmNlO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc291cmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbZmxhZ3NdXG4gICAqL1xuICBmdW5jdGlvbiByZShzb3VyY2UsIGZsYWdzKSB7XG4gICAgc291cmNlID0gc291cmNlLnJlcGxhY2UoLzxTPi9nLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gc3BhY2U7XG4gICAgfSkucmVwbGFjZSgvPEJSQUNFUz4vZywgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGJyYWNlcztcbiAgICB9KS5yZXBsYWNlKC88U1BSRUFEPi9nLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gc3ByZWFkO1xuICAgIH0pO1xuICAgIHJldHVybiBSZWdFeHAoc291cmNlLCBmbGFncyk7XG4gIH1cbiAgc3ByZWFkID0gcmUoc3ByZWFkKS5zb3VyY2U7XG4gIFByaXNtLmxhbmd1YWdlcy5qc3ggPSBQcmlzbS5sYW5ndWFnZXMuZXh0ZW5kKCdtYXJrdXAnLCBqYXZhc2NyaXB0KTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmpzeC50YWcucGF0dGVybiA9IHJlKC88XFwvPyg/OltcXHcuOi1dKyg/OjxTPisoPzpbXFx3LjokLV0rKD86PSg/OlwiKD86XFxcXFtcXHNcXFNdfFteXFxcXFwiXSkqXCJ8Jyg/OlxcXFxbXFxzXFxTXXxbXlxcXFwnXSkqJ3xbXlxcc3snXCIvPj1dK3w8QlJBQ0VTPikpP3w8U1BSRUFEPikpKjxTPipcXC8/KT8+Ly5zb3VyY2UpO1xuICBQcmlzbS5sYW5ndWFnZXMuanN4LnRhZy5pbnNpZGVbJ3RhZyddLnBhdHRlcm4gPSAvXjxcXC8/W15cXHM+XFwvXSovO1xuICBQcmlzbS5sYW5ndWFnZXMuanN4LnRhZy5pbnNpZGVbJ2F0dHItdmFsdWUnXS5wYXR0ZXJuID0gLz0oPyFcXHspKD86XCIoPzpcXFxcW1xcc1xcU118W15cXFxcXCJdKSpcInwnKD86XFxcXFtcXHNcXFNdfFteXFxcXCddKSonfFteXFxzJ1wiPl0rKS87XG4gIFByaXNtLmxhbmd1YWdlcy5qc3gudGFnLmluc2lkZVsndGFnJ10uaW5zaWRlWydjbGFzcy1uYW1lJ10gPSAvXltBLVpdXFx3Kig/OlxcLltBLVpdXFx3KikqJC87XG4gIFByaXNtLmxhbmd1YWdlcy5qc3gudGFnLmluc2lkZVsnY29tbWVudCddID0gamF2YXNjcmlwdFsnY29tbWVudCddO1xuICBQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdpbnNpZGUnLCAnYXR0ci1uYW1lJywge1xuICAgICdzcHJlYWQnOiB7XG4gICAgICBwYXR0ZXJuOiByZSgvPFNQUkVBRD4vLnNvdXJjZSksXG4gICAgICBpbnNpZGU6IFByaXNtLmxhbmd1YWdlcy5qc3hcbiAgICB9XG4gIH0sIFByaXNtLmxhbmd1YWdlcy5qc3gudGFnKTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnaW5zaWRlJywgJ3NwZWNpYWwtYXR0cicsIHtcbiAgICAnc2NyaXB0Jzoge1xuICAgICAgLy8gQWxsb3cgZm9yIHR3byBsZXZlbHMgb2YgbmVzdGluZ1xuICAgICAgcGF0dGVybjogcmUoLz08QlJBQ0VTPi8uc291cmNlKSxcbiAgICAgIGFsaWFzOiAnbGFuZ3VhZ2UtamF2YXNjcmlwdCcsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ3NjcmlwdC1wdW5jdHVhdGlvbic6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvXj0oPz1cXHspLyxcbiAgICAgICAgICBhbGlhczogJ3B1bmN0dWF0aW9uJ1xuICAgICAgICB9LFxuICAgICAgICByZXN0OiBQcmlzbS5sYW5ndWFnZXMuanN4XG4gICAgICB9XG4gICAgfVxuICB9LCBQcmlzbS5sYW5ndWFnZXMuanN4LnRhZyk7XG5cbiAgLy8gVGhlIGZvbGxvd2luZyB3aWxsIGhhbmRsZSBwbGFpbiB0ZXh0IGluc2lkZSB0YWdzXG4gIHZhciBzdHJpbmdpZnlUb2tlbiA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgIGlmICghdG9rZW4pIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0b2tlbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0b2tlbi5jb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIHRva2VuLmNvbnRlbnQ7XG4gICAgfVxuICAgIHJldHVybiB0b2tlbi5jb250ZW50Lm1hcChzdHJpbmdpZnlUb2tlbikuam9pbignJyk7XG4gIH07XG4gIHZhciB3YWxrVG9rZW5zID0gZnVuY3Rpb24gKHRva2Vucykge1xuICAgIHZhciBvcGVuZWRUYWdzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB0b2tlbiA9IHRva2Vuc1tpXTtcbiAgICAgIHZhciBub3RUYWdOb3JCcmFjZSA9IGZhbHNlO1xuICAgICAgaWYgKHR5cGVvZiB0b2tlbiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKHRva2VuLnR5cGUgPT09ICd0YWcnICYmIHRva2VuLmNvbnRlbnRbMF0gJiYgdG9rZW4uY29udGVudFswXS50eXBlID09PSAndGFnJykge1xuICAgICAgICAgIC8vIFdlIGZvdW5kIGEgdGFnLCBub3cgZmluZCBpdHMga2luZFxuXG4gICAgICAgICAgaWYgKHRva2VuLmNvbnRlbnRbMF0uY29udGVudFswXS5jb250ZW50ID09PSAnPC8nKSB7XG4gICAgICAgICAgICAvLyBDbG9zaW5nIHRhZ1xuICAgICAgICAgICAgaWYgKG9wZW5lZFRhZ3MubGVuZ3RoID4gMCAmJiBvcGVuZWRUYWdzW29wZW5lZFRhZ3MubGVuZ3RoIC0gMV0udGFnTmFtZSA9PT0gc3RyaW5naWZ5VG9rZW4odG9rZW4uY29udGVudFswXS5jb250ZW50WzFdKSkge1xuICAgICAgICAgICAgICAvLyBQb3AgbWF0Y2hpbmcgb3BlbmluZyB0YWdcbiAgICAgICAgICAgICAgb3BlbmVkVGFncy5wb3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRva2VuLmNvbnRlbnRbdG9rZW4uY29udGVudC5sZW5ndGggLSAxXS5jb250ZW50ID09PSAnLz4nKSA7IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBPcGVuaW5nIHRhZ1xuICAgICAgICAgICAgICBvcGVuZWRUYWdzLnB1c2goe1xuICAgICAgICAgICAgICAgIHRhZ05hbWU6IHN0cmluZ2lmeVRva2VuKHRva2VuLmNvbnRlbnRbMF0uY29udGVudFsxXSksXG4gICAgICAgICAgICAgICAgb3BlbmVkQnJhY2VzOiAwXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChvcGVuZWRUYWdzLmxlbmd0aCA+IDAgJiYgdG9rZW4udHlwZSA9PT0gJ3B1bmN0dWF0aW9uJyAmJiB0b2tlbi5jb250ZW50ID09PSAneycpIHtcbiAgICAgICAgICAvLyBIZXJlIHdlIG1pZ2h0IGhhdmUgZW50ZXJlZCBhIEpTWCBjb250ZXh0IGluc2lkZSBhIHRhZ1xuICAgICAgICAgIG9wZW5lZFRhZ3Nbb3BlbmVkVGFncy5sZW5ndGggLSAxXS5vcGVuZWRCcmFjZXMrKztcbiAgICAgICAgfSBlbHNlIGlmIChvcGVuZWRUYWdzLmxlbmd0aCA+IDAgJiYgb3BlbmVkVGFnc1tvcGVuZWRUYWdzLmxlbmd0aCAtIDFdLm9wZW5lZEJyYWNlcyA+IDAgJiYgdG9rZW4udHlwZSA9PT0gJ3B1bmN0dWF0aW9uJyAmJiB0b2tlbi5jb250ZW50ID09PSAnfScpIHtcbiAgICAgICAgICAvLyBIZXJlIHdlIG1pZ2h0IGhhdmUgbGVmdCBhIEpTWCBjb250ZXh0IGluc2lkZSBhIHRhZ1xuICAgICAgICAgIG9wZW5lZFRhZ3Nbb3BlbmVkVGFncy5sZW5ndGggLSAxXS5vcGVuZWRCcmFjZXMtLTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBub3RUYWdOb3JCcmFjZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChub3RUYWdOb3JCcmFjZSB8fCB0eXBlb2YgdG9rZW4gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmIChvcGVuZWRUYWdzLmxlbmd0aCA+IDAgJiYgb3BlbmVkVGFnc1tvcGVuZWRUYWdzLmxlbmd0aCAtIDFdLm9wZW5lZEJyYWNlcyA9PT0gMCkge1xuICAgICAgICAgIC8vIEhlcmUgd2UgYXJlIGluc2lkZSBhIHRhZywgYW5kIG5vdCBpbnNpZGUgYSBKU1ggY29udGV4dC5cbiAgICAgICAgICAvLyBUaGF0J3MgcGxhaW4gdGV4dDogZHJvcCBhbnkgdG9rZW5zIG1hdGNoZWQuXG4gICAgICAgICAgdmFyIHBsYWluVGV4dCA9IHN0cmluZ2lmeVRva2VuKHRva2VuKTtcblxuICAgICAgICAgIC8vIEFuZCBtZXJnZSB0ZXh0IHdpdGggYWRqYWNlbnQgdGV4dFxuICAgICAgICAgIGlmIChpIDwgdG9rZW5zLmxlbmd0aCAtIDEgJiYgKHR5cGVvZiB0b2tlbnNbaSArIDFdID09PSAnc3RyaW5nJyB8fCB0b2tlbnNbaSArIDFdLnR5cGUgPT09ICdwbGFpbi10ZXh0JykpIHtcbiAgICAgICAgICAgIHBsYWluVGV4dCArPSBzdHJpbmdpZnlUb2tlbih0b2tlbnNbaSArIDFdKTtcbiAgICAgICAgICAgIHRva2Vucy5zcGxpY2UoaSArIDEsIDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaSA+IDAgJiYgKHR5cGVvZiB0b2tlbnNbaSAtIDFdID09PSAnc3RyaW5nJyB8fCB0b2tlbnNbaSAtIDFdLnR5cGUgPT09ICdwbGFpbi10ZXh0JykpIHtcbiAgICAgICAgICAgIHBsYWluVGV4dCA9IHN0cmluZ2lmeVRva2VuKHRva2Vuc1tpIC0gMV0pICsgcGxhaW5UZXh0O1xuICAgICAgICAgICAgdG9rZW5zLnNwbGljZShpIC0gMSwgMSk7XG4gICAgICAgICAgICBpLS07XG4gICAgICAgICAgfVxuICAgICAgICAgIHRva2Vuc1tpXSA9IG5ldyBQcmlzbS5Ub2tlbigncGxhaW4tdGV4dCcsIHBsYWluVGV4dCwgbnVsbCwgcGxhaW5UZXh0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRva2VuLmNvbnRlbnQgJiYgdHlwZW9mIHRva2VuLmNvbnRlbnQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHdhbGtUb2tlbnModG9rZW4uY29udGVudCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBQcmlzbS5ob29rcy5hZGQoJ2FmdGVyLXRva2VuaXplJywgZnVuY3Rpb24gKGVudikge1xuICAgIGlmIChlbnYubGFuZ3VhZ2UgIT09ICdqc3gnICYmIGVudi5sYW5ndWFnZSAhPT0gJ3RzeCcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgd2Fsa1Rva2VucyhlbnYudG9rZW5zKTtcbiAgfSk7XG59KShQcmlzbSk7XG5cbi8vIGh0dHBzOi8vd3d3Lmpzb24ub3JnL2pzb24tZW4uaHRtbFxuUHJpc20ubGFuZ3VhZ2VzLmpzb24gPSB7XG4gICdwcm9wZXJ0eSc6IHtcbiAgICBwYXR0ZXJuOiAvKF58W15cXFxcXSlcIig/OlxcXFwufFteXFxcXFwiXFxyXFxuXSkqXCIoPz1cXHMqOikvLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgZ3JlZWR5OiB0cnVlXG4gIH0sXG4gICdzdHJpbmcnOiB7XG4gICAgcGF0dGVybjogLyhefFteXFxcXF0pXCIoPzpcXFxcLnxbXlxcXFxcIlxcclxcbl0pKlwiKD8hXFxzKjopLyxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGdyZWVkeTogdHJ1ZVxuICB9LFxuICAnY29tbWVudCc6IHtcbiAgICBwYXR0ZXJuOiAvXFwvXFwvLip8XFwvXFwqW1xcc1xcU10qPyg/OlxcKlxcL3wkKS8sXG4gICAgZ3JlZWR5OiB0cnVlXG4gIH0sXG4gICdudW1iZXInOiAvLT9cXGJcXGQrKD86XFwuXFxkKyk/KD86ZVsrLV0/XFxkKyk/XFxiL2ksXG4gICdwdW5jdHVhdGlvbic6IC9be31bXFxdLF0vLFxuICAnb3BlcmF0b3InOiAvOi8sXG4gICdib29sZWFuJzogL1xcYig/OmZhbHNlfHRydWUpXFxiLyxcbiAgJ251bGwnOiB7XG4gICAgcGF0dGVybjogL1xcYm51bGxcXGIvLFxuICAgIGFsaWFzOiAna2V5d29yZCdcbiAgfVxufTtcblByaXNtLmxhbmd1YWdlcy53ZWJtYW5pZmVzdCA9IFByaXNtLmxhbmd1YWdlcy5qc29uO1xuKGZ1bmN0aW9uIChQcmlzbSkge1xuICBQcmlzbS5sYW5ndWFnZXMua290bGluID0gUHJpc20ubGFuZ3VhZ2VzLmV4dGVuZCgnY2xpa2UnLCB7XG4gICAgJ2tleXdvcmQnOiB7XG4gICAgICAvLyBUaGUgbG9va2JlaGluZCBwcmV2ZW50cyB3cm9uZyBoaWdobGlnaHRpbmcgb2YgZS5nLiBrb3RsaW4ucHJvcGVydGllcy5nZXRcbiAgICAgIHBhdHRlcm46IC8oXnxbXi5dKVxcYig/OmFic3RyYWN0fGFjdHVhbHxhbm5vdGF0aW9ufGFzfGJyZWFrfGJ5fGNhdGNofGNsYXNzfGNvbXBhbmlvbnxjb25zdHxjb25zdHJ1Y3Rvcnxjb250aW51ZXxjcm9zc2lubGluZXxkYXRhfGRvfGR5bmFtaWN8ZWxzZXxlbnVtfGV4cGVjdHxleHRlcm5hbHxmaW5hbHxmaW5hbGx5fGZvcnxmdW58Z2V0fGlmfGltcG9ydHxpbnxpbmZpeHxpbml0fGlubGluZXxpbm5lcnxpbnRlcmZhY2V8aW50ZXJuYWx8aXN8bGF0ZWluaXR8bm9pbmxpbmV8bnVsbHxvYmplY3R8b3BlbnxvcGVyYXRvcnxvdXR8b3ZlcnJpZGV8cGFja2FnZXxwcml2YXRlfHByb3RlY3RlZHxwdWJsaWN8cmVpZmllZHxyZXR1cm58c2VhbGVkfHNldHxzdXBlcnxzdXNwZW5kfHRhaWxyZWN8dGhpc3x0aHJvd3x0b3x0cnl8dHlwZWFsaWFzfHZhbHx2YXJ8dmFyYXJnfHdoZW58d2hlcmV8d2hpbGUpXFxiLyxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICB9LFxuICAgICdmdW5jdGlvbic6IFt7XG4gICAgICBwYXR0ZXJuOiAvKD86YFteXFxyXFxuYF0rYHxcXGJcXHcrKSg/PVxccypcXCgpLyxcbiAgICAgIGdyZWVkeTogdHJ1ZVxuICAgIH0sIHtcbiAgICAgIHBhdHRlcm46IC8oXFwuKSg/OmBbXlxcclxcbmBdK2B8XFx3KykoPz1cXHMqXFx7KS8sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgZ3JlZWR5OiB0cnVlXG4gICAgfV0sXG4gICAgJ251bWJlcic6IC9cXGIoPzowW3hYXVtcXGRhLWZBLUZdKyg/Ol9bXFxkYS1mQS1GXSspKnwwW2JCXVswMV0rKD86X1swMV0rKSp8XFxkKyg/Ol9cXGQrKSooPzpcXC5cXGQrKD86X1xcZCspKik/KD86W2VFXVsrLV0/XFxkKyg/Ol9cXGQrKSopP1tmRkxdPylcXGIvLFxuICAgICdvcGVyYXRvcic6IC9cXCtbKz1dP3wtWy09Pl0/fD09Pz0/fCEoPzohfD09Pyk/fFtcXC8qJTw+XT0/fFs/Ol06P3xcXC5cXC58JiZ8XFx8XFx8fFxcYig/OmFuZHxpbnZ8b3J8c2hsfHNocnx1c2hyfHhvcilcXGIvXG4gIH0pO1xuICBkZWxldGUgUHJpc20ubGFuZ3VhZ2VzLmtvdGxpblsnY2xhc3MtbmFtZSddO1xuICB2YXIgaW50ZXJwb2xhdGlvbkluc2lkZSA9IHtcbiAgICAnaW50ZXJwb2xhdGlvbi1wdW5jdHVhdGlvbic6IHtcbiAgICAgIHBhdHRlcm46IC9eXFwkXFx7P3xcXH0kLyxcbiAgICAgIGFsaWFzOiAncHVuY3R1YXRpb24nXG4gICAgfSxcbiAgICAnZXhwcmVzc2lvbic6IHtcbiAgICAgIHBhdHRlcm46IC9bXFxzXFxTXSsvLFxuICAgICAgaW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMua290bGluXG4gICAgfVxuICB9O1xuICBQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdrb3RsaW4nLCAnc3RyaW5nJywge1xuICAgIC8vIGh0dHBzOi8va290bGlubGFuZy5vcmcvc3BlYy9leHByZXNzaW9ucy5odG1sI3N0cmluZy1pbnRlcnBvbGF0aW9uLWV4cHJlc3Npb25zXG4gICAgJ3N0cmluZy1saXRlcmFsJzogW3tcbiAgICAgIHBhdHRlcm46IC9cIlwiXCIoPzpbXiRdfFxcJCg/Oig/IVxceyl8XFx7W157fV0qXFx9KSkqP1wiXCJcIi8sXG4gICAgICBhbGlhczogJ211bHRpbGluZScsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ2ludGVycG9sYXRpb24nOiB7XG4gICAgICAgICAgcGF0dGVybjogL1xcJCg/OlthLXpfXVxcdyp8XFx7W157fV0qXFx9KS9pLFxuICAgICAgICAgIGluc2lkZTogaW50ZXJwb2xhdGlvbkluc2lkZVxuICAgICAgICB9LFxuICAgICAgICAnc3RyaW5nJzogL1tcXHNcXFNdKy9cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBwYXR0ZXJuOiAvXCIoPzpbXlwiXFxcXFxcclxcbiRdfFxcXFwufFxcJCg/Oig/IVxceyl8XFx7W157fV0qXFx9KSkqXCIvLFxuICAgICAgYWxpYXM6ICdzaW5nbGVsaW5lJyxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAnaW50ZXJwb2xhdGlvbic6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvKCg/Ol58W15cXFxcXSkoPzpcXFxcezJ9KSopXFwkKD86W2Etel9dXFx3KnxcXHtbXnt9XSpcXH0pL2ksXG4gICAgICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgICAgICBpbnNpZGU6IGludGVycG9sYXRpb25JbnNpZGVcbiAgICAgICAgfSxcbiAgICAgICAgJ3N0cmluZyc6IC9bXFxzXFxTXSsvXG4gICAgICB9XG4gICAgfV0sXG4gICAgJ2NoYXInOiB7XG4gICAgICAvLyBodHRwczovL2tvdGxpbmxhbmcub3JnL3NwZWMvZXhwcmVzc2lvbnMuaHRtbCNjaGFyYWN0ZXItbGl0ZXJhbHNcbiAgICAgIHBhdHRlcm46IC8nKD86W14nXFxcXFxcclxcbl18XFxcXCg/Oi58dVthLWZBLUYwLTldezAsNH0pKScvLFxuICAgICAgZ3JlZWR5OiB0cnVlXG4gICAgfVxuICB9KTtcbiAgZGVsZXRlIFByaXNtLmxhbmd1YWdlcy5rb3RsaW5bJ3N0cmluZyddO1xuICBQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdrb3RsaW4nLCAna2V5d29yZCcsIHtcbiAgICAnYW5ub3RhdGlvbic6IHtcbiAgICAgIHBhdHRlcm46IC9cXEJAKD86XFx3KzopPyg/OltBLVpdXFx3KnxcXFtbXlxcXV0rXFxdKS8sXG4gICAgICBhbGlhczogJ2J1aWx0aW4nXG4gICAgfVxuICB9KTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgna290bGluJywgJ2Z1bmN0aW9uJywge1xuICAgICdsYWJlbCc6IHtcbiAgICAgIHBhdHRlcm46IC9cXGJcXHcrQHxAXFx3K1xcYi8sXG4gICAgICBhbGlhczogJ3N5bWJvbCdcbiAgICB9XG4gIH0pO1xuICBQcmlzbS5sYW5ndWFnZXMua3QgPSBQcmlzbS5sYW5ndWFnZXMua290bGluO1xuICBQcmlzbS5sYW5ndWFnZXMua3RzID0gUHJpc20ubGFuZ3VhZ2VzLmtvdGxpbjtcbn0pKFByaXNtKTtcblxuLyogRklYTUUgOlxuIDpleHRlbmQoKSBpcyBub3QgaGFuZGxlZCBzcGVjaWZpY2FsbHkgOiBpdHMgaGlnaGxpZ2h0aW5nIGlzIGJ1Z2d5LlxuIE1peGluIHVzYWdlIG11c3QgYmUgaW5zaWRlIGEgcnVsZXNldCB0byBiZSBoaWdobGlnaHRlZC5cbiBBdC1ydWxlcyAoZS5nLiBpbXBvcnQpIGNvbnRhaW5pbmcgaW50ZXJwb2xhdGlvbnMgYXJlIGJ1Z2d5LlxuIERldGFjaGVkIHJ1bGVzZXRzIGFyZSBoaWdobGlnaHRlZCBhcyBhdC1ydWxlcy5cbiBBIGNvbW1lbnQgYmVmb3JlIGEgbWl4aW4gdXNhZ2UgcHJldmVudHMgdGhlIGxhdHRlciB0byBiZSBwcm9wZXJseSBoaWdobGlnaHRlZC5cbiAqL1xuXG5QcmlzbS5sYW5ndWFnZXMubGVzcyA9IFByaXNtLmxhbmd1YWdlcy5leHRlbmQoJ2NzcycsIHtcbiAgJ2NvbW1lbnQnOiBbL1xcL1xcKltcXHNcXFNdKj9cXCpcXC8vLCB7XG4gICAgcGF0dGVybjogLyhefFteXFxcXF0pXFwvXFwvLiovLFxuICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgfV0sXG4gICdhdHJ1bGUnOiB7XG4gICAgcGF0dGVybjogL0BbXFx3LV0oPzpcXCgoPzpbXigpe31dfFxcKFteKCl7fV0qXFwpKSpcXCl8W14oKXt9O1xcc118XFxzKyg/IVxccykpKj8oPz1cXHMqXFx7KS8sXG4gICAgaW5zaWRlOiB7XG4gICAgICAncHVuY3R1YXRpb24nOiAvWzooKV0vXG4gICAgfVxuICB9LFxuICAvLyBzZWxlY3RvcnMgYW5kIG1peGlucyBhcmUgY29uc2lkZXJlZCB0aGUgc2FtZVxuICAnc2VsZWN0b3InOiB7XG4gICAgcGF0dGVybjogLyg/OkBcXHtbXFx3LV0rXFx9fFtee307XFxzQF0pKD86QFxce1tcXHctXStcXH18XFwoKD86W14oKXt9XXxcXChbXigpe31dKlxcKSkqXFwpfFteKCl7fTtAXFxzXXxcXHMrKD8hXFxzKSkqPyg/PVxccypcXHspLyxcbiAgICBpbnNpZGU6IHtcbiAgICAgIC8vIG1peGluIHBhcmFtZXRlcnNcbiAgICAgICd2YXJpYWJsZSc6IC9AK1tcXHctXSsvXG4gICAgfVxuICB9LFxuICAncHJvcGVydHknOiAvKD86QFxce1tcXHctXStcXH18W1xcdy1dKSsoPzpcXCtfPyk/KD89XFxzKjopLyxcbiAgJ29wZXJhdG9yJzogL1srXFwtKlxcL10vXG59KTtcblByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ2xlc3MnLCAncHJvcGVydHknLCB7XG4gICd2YXJpYWJsZSc6IFtcbiAgLy8gVmFyaWFibGUgZGVjbGFyYXRpb24gKHRoZSBjb2xvbiBtdXN0IGJlIGNvbnN1bWVkISlcbiAge1xuICAgIHBhdHRlcm46IC9AW1xcdy1dK1xccyo6LyxcbiAgICBpbnNpZGU6IHtcbiAgICAgICdwdW5jdHVhdGlvbic6IC86L1xuICAgIH1cbiAgfSxcbiAgLy8gVmFyaWFibGUgdXNhZ2VcbiAgL0BAP1tcXHctXSsvXSxcbiAgJ21peGluLXVzYWdlJzoge1xuICAgIHBhdHRlcm46IC8oW3s7XVxccyopWy4jXSg/IVxcZClbXFx3LV0uKj8oPz1bKDtdKS8sXG4gICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICBhbGlhczogJ2Z1bmN0aW9uJ1xuICB9XG59KTtcblByaXNtLmxhbmd1YWdlcy5sdWEgPSB7XG4gICdjb21tZW50JzogL14jIS4rfC0tKD86XFxbKD0qKVxcW1tcXHNcXFNdKj9cXF1cXDFcXF18LiopL20sXG4gIC8vIFxceiBtYXkgYmUgdXNlZCB0byBza2lwIHRoZSBmb2xsb3dpbmcgc3BhY2VcbiAgJ3N0cmluZyc6IHtcbiAgICBwYXR0ZXJuOiAvKFtcIiddKSg/Oig/IVxcMSlbXlxcXFxcXHJcXG5dfFxcXFx6KD86XFxyXFxufFxccyl8XFxcXCg/OlxcclxcbnxbXnpdKSkqXFwxfFxcWyg9KilcXFtbXFxzXFxTXSo/XFxdXFwyXFxdLyxcbiAgICBncmVlZHk6IHRydWVcbiAgfSxcbiAgJ251bWJlcic6IC9cXGIweFthLWZcXGRdKyg/OlxcLlthLWZcXGRdKik/KD86cFsrLV0/XFxkKyk/XFxifFxcYlxcZCsoPzpcXC5cXEJ8KD86XFwuXFxkKik/KD86ZVsrLV0/XFxkKyk/XFxiKXxcXEJcXC5cXGQrKD86ZVsrLV0/XFxkKyk/XFxiL2ksXG4gICdrZXl3b3JkJzogL1xcYig/OmFuZHxicmVha3xkb3xlbHNlfGVsc2VpZnxlbmR8ZmFsc2V8Zm9yfGZ1bmN0aW9ufGdvdG98aWZ8aW58bG9jYWx8bmlsfG5vdHxvcnxyZXBlYXR8cmV0dXJufHRoZW58dHJ1ZXx1bnRpbHx3aGlsZSlcXGIvLFxuICAnZnVuY3Rpb24nOiAvKD8hXFxkKVxcdysoPz1cXHMqKD86Wyh7XSkpLyxcbiAgJ29wZXJhdG9yJzogWy9bLSsqJV4mfCNdfFxcL1xcLz98PFs8PV0/fD5bPj1dP3xbPX5dPT8vLCB7XG4gICAgLy8gTWF0Y2ggXCIuLlwiIGJ1dCBkb24ndCBicmVhayBcIi4uLlwiXG4gICAgcGF0dGVybjogLyhefFteLl0pXFwuXFwuKD8hXFwuKS8sXG4gICAgbG9va2JlaGluZDogdHJ1ZVxuICB9XSxcbiAgJ3B1bmN0dWF0aW9uJzogL1tcXFtcXF0oKXt9LDtdfFxcLit8OisvXG59O1xuUHJpc20ubGFuZ3VhZ2VzLm1ha2VmaWxlID0ge1xuICAnY29tbWVudCc6IHtcbiAgICBwYXR0ZXJuOiAvKF58W15cXFxcXSkjKD86XFxcXCg/OlxcclxcbnxbXFxzXFxTXSl8W15cXFxcXFxyXFxuXSkqLyxcbiAgICBsb29rYmVoaW5kOiB0cnVlXG4gIH0sXG4gICdzdHJpbmcnOiB7XG4gICAgcGF0dGVybjogLyhbXCInXSkoPzpcXFxcKD86XFxyXFxufFtcXHNcXFNdKXwoPyFcXDEpW15cXFxcXFxyXFxuXSkqXFwxLyxcbiAgICBncmVlZHk6IHRydWVcbiAgfSxcbiAgJ2J1aWx0aW4tdGFyZ2V0Jzoge1xuICAgIHBhdHRlcm46IC9cXC5bQS1aXVteOiM9XFxzXSsoPz1cXHMqOig/IT0pKS8sXG4gICAgYWxpYXM6ICdidWlsdGluJ1xuICB9LFxuICAndGFyZ2V0Jzoge1xuICAgIHBhdHRlcm46IC9eKD86W146PVxcc118WyBcXHRdKyg/IVtcXHM6XSkpKyg/PVxccyo6KD8hPSkpL20sXG4gICAgYWxpYXM6ICdzeW1ib2wnLFxuICAgIGluc2lkZToge1xuICAgICAgJ3ZhcmlhYmxlJzogL1xcJCsoPzooPyFcXCQpW14oKXt9OiM9XFxzXSt8KD89Wyh7XSkpL1xuICAgIH1cbiAgfSxcbiAgJ3ZhcmlhYmxlJzogL1xcJCsoPzooPyFcXCQpW14oKXt9OiM9XFxzXSt8XFwoW0AqJTxeKz9dW0RGXVxcKXwoPz1bKHtdKSkvLFxuICAvLyBEaXJlY3RpdmVzXG4gICdrZXl3b3JkJzogLy1pbmNsdWRlXFxifFxcYig/OmRlZmluZXxlbHNlfGVuZGVmfGVuZGlmfGV4cG9ydHxpZm4/ZGVmfGlmbj9lcXxpbmNsdWRlfG92ZXJyaWRlfHByaXZhdGV8c2luY2x1ZGV8dW5kZWZpbmV8dW5leHBvcnR8dnBhdGgpXFxiLyxcbiAgJ2Z1bmN0aW9uJzoge1xuICAgIHBhdHRlcm46IC8oXFwoKSg/OmFic3BhdGh8YWRkc3VmZml4fGFuZHxiYXNlbmFtZXxjYWxsfGRpcnxlcnJvcnxldmFsfGZpbGV8ZmlsdGVyKD86LW91dCk/fGZpbmRzdHJpbmd8Zmlyc3R3b3JkfGZsYXZvcnxmb3JlYWNofGd1aWxlfGlmfGluZm98am9pbnxsYXN0d29yZHxsb2FkfG5vdGRpcnxvcnxvcmlnaW58cGF0c3Vic3R8cmVhbHBhdGh8c2hlbGx8c29ydHxzdHJpcHxzdWJzdHxzdWZmaXh8dmFsdWV8d2FybmluZ3x3aWxkY2FyZHx3b3JkKD86bGlzdHxzKT8pKD89WyBcXHRdKS8sXG4gICAgbG9va2JlaGluZDogdHJ1ZVxuICB9LFxuICAnb3BlcmF0b3InOiAvKD86Ojp8Wz86KyFdKT89fFt8QF0vLFxuICAncHVuY3R1YXRpb24nOiAvWzo7KCl7fV0vXG59O1xuKGZ1bmN0aW9uIChQcmlzbSkge1xuICAvLyBodHRwczovL3lhbWwub3JnL3NwZWMvMS4yL3NwZWMuaHRtbCNjLW5zLWFuY2hvci1wcm9wZXJ0eVxuICAvLyBodHRwczovL3lhbWwub3JnL3NwZWMvMS4yL3NwZWMuaHRtbCNjLW5zLWFsaWFzLW5vZGVcbiAgdmFyIGFuY2hvck9yQWxpYXMgPSAvWyomXVteXFxzW1xcXXt9LF0rLztcbiAgLy8gaHR0cHM6Ly95YW1sLm9yZy9zcGVjLzEuMi9zcGVjLmh0bWwjYy1ucy10YWctcHJvcGVydHlcbiAgdmFyIHRhZyA9IC8hKD86PFtcXHdcXC0lIzsvPzpAJj0rJCwuIX4qJygpW1xcXV0rPnwoPzpbYS16QS1aXFxkLV0qISk/W1xcd1xcLSUjOy8/OkAmPSskLn4qJygpXSspPy87XG4gIC8vIGh0dHBzOi8veWFtbC5vcmcvc3BlYy8xLjIvc3BlYy5odG1sI2MtbnMtcHJvcGVydGllcyhuLGMpXG4gIHZhciBwcm9wZXJ0aWVzID0gJyg/OicgKyB0YWcuc291cmNlICsgJyg/OlsgXFx0XSsnICsgYW5jaG9yT3JBbGlhcy5zb3VyY2UgKyAnKT98JyArIGFuY2hvck9yQWxpYXMuc291cmNlICsgJyg/OlsgXFx0XSsnICsgdGFnLnNvdXJjZSArICcpPyknO1xuICAvLyBodHRwczovL3lhbWwub3JnL3NwZWMvMS4yL3NwZWMuaHRtbCNucy1wbGFpbihuLGMpXG4gIC8vIFRoaXMgaXMgYSBzaW1wbGlmaWVkIHZlcnNpb24gdGhhdCBkb2Vzbid0IHN1cHBvcnQgXCIjXCIgYW5kIG11bHRpbGluZSBrZXlzXG4gIC8vIEFsbCB0aGVzZSBsb25nIHNjYXJyeSBjaGFyYWN0ZXIgY2xhc3NlcyBhcmUgc2ltcGxpZmllZCB2ZXJzaW9ucyBvZiBZQU1MJ3MgY2hhcmFjdGVyc1xuICB2YXIgcGxhaW5LZXkgPSAvKD86W15cXHNcXHgwMC1cXHgwOFxceDBlLVxceDFmIVwiIyUmJyosXFwtOj4/QFtcXF1ge3x9XFx4N2YtXFx4ODRcXHg4Ni1cXHg5ZlxcdWQ4MDAtXFx1ZGZmZlxcdWZmZmVcXHVmZmZmXXxbPzotXTxQTEFJTj4pKD86WyBcXHRdKig/Oig/IVsjOl0pPFBMQUlOPnw6PFBMQUlOPikpKi8uc291cmNlLnJlcGxhY2UoLzxQTEFJTj4vZywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAvW15cXHNcXHgwMC1cXHgwOFxceDBlLVxceDFmLFtcXF17fVxceDdmLVxceDg0XFx4ODYtXFx4OWZcXHVkODAwLVxcdWRmZmZcXHVmZmZlXFx1ZmZmZl0vLnNvdXJjZTtcbiAgfSk7XG4gIHZhciBzdHJpbmcgPSAvXCIoPzpbXlwiXFxcXFxcclxcbl18XFxcXC4pKlwifCcoPzpbXidcXFxcXFxyXFxuXXxcXFxcLikqJy8uc291cmNlO1xuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtmbGFnc11cbiAgICogQHJldHVybnMge1JlZ0V4cH1cbiAgICovXG4gIGZ1bmN0aW9uIGNyZWF0ZVZhbHVlUGF0dGVybih2YWx1ZSwgZmxhZ3MpIHtcbiAgICBmbGFncyA9IChmbGFncyB8fCAnJykucmVwbGFjZSgvbS9nLCAnJykgKyAnbSc7IC8vIGFkZCBtIGZsYWdcbiAgICB2YXIgcGF0dGVybiA9IC8oWzpcXC0sW3tdXFxzKig/Olxcczw8cHJvcD4+WyBcXHRdKyk/KSg/Ojw8dmFsdWU+PikoPz1bIFxcdF0qKD86JHwsfFxcXXxcXH18KD86W1xcclxcbl1cXHMqKT8jKSkvLnNvdXJjZS5yZXBsYWNlKC88PHByb3A+Pi9nLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gcHJvcGVydGllcztcbiAgICB9KS5yZXBsYWNlKC88PHZhbHVlPj4vZywgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBSZWdFeHAocGF0dGVybiwgZmxhZ3MpO1xuICB9XG4gIFByaXNtLmxhbmd1YWdlcy55YW1sID0ge1xuICAgICdzY2FsYXInOiB7XG4gICAgICBwYXR0ZXJuOiBSZWdFeHAoLyhbXFwtOl1cXHMqKD86XFxzPDxwcm9wPj5bIFxcdF0rKT9bfD5dKVsgXFx0XSooPzooKD86XFxyP1xcbnxcXHIpWyBcXHRdKylcXFNbXlxcclxcbl0qKD86XFwyW15cXHJcXG5dKykqKS8uc291cmNlLnJlcGxhY2UoLzw8cHJvcD4+L2csIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHByb3BlcnRpZXM7XG4gICAgICB9KSksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgYWxpYXM6ICdzdHJpbmcnXG4gICAgfSxcbiAgICAnY29tbWVudCc6IC8jLiovLFxuICAgICdrZXknOiB7XG4gICAgICBwYXR0ZXJuOiBSZWdFeHAoLygoPzpefFs6XFwtLFt7XFxyXFxuP10pWyBcXHRdKig/Ojw8cHJvcD4+WyBcXHRdKyk/KTw8a2V5Pj4oPz1cXHMqOlxccykvLnNvdXJjZS5yZXBsYWNlKC88PHByb3A+Pi9nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBwcm9wZXJ0aWVzO1xuICAgICAgfSkucmVwbGFjZSgvPDxrZXk+Pi9nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAnKD86JyArIHBsYWluS2V5ICsgJ3wnICsgc3RyaW5nICsgJyknO1xuICAgICAgfSkpLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGFsaWFzOiAnYXRydWxlJ1xuICAgIH0sXG4gICAgJ2RpcmVjdGl2ZSc6IHtcbiAgICAgIHBhdHRlcm46IC8oXlsgXFx0XSopJS4rL20sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgYWxpYXM6ICdpbXBvcnRhbnQnXG4gICAgfSxcbiAgICAnZGF0ZXRpbWUnOiB7XG4gICAgICBwYXR0ZXJuOiBjcmVhdGVWYWx1ZVBhdHRlcm4oL1xcZHs0fS1cXGRcXGQ/LVxcZFxcZD8oPzpbdFRdfFsgXFx0XSspXFxkXFxkPzpcXGR7Mn06XFxkezJ9KD86XFwuXFxkKik/KD86WyBcXHRdKig/Olp8Wy0rXVxcZFxcZD8oPzo6XFxkezJ9KT8pKT98XFxkezR9LVxcZHsyfS1cXGR7Mn18XFxkXFxkPzpcXGR7Mn0oPzo6XFxkezJ9KD86XFwuXFxkKik/KT8vLnNvdXJjZSksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgYWxpYXM6ICdudW1iZXInXG4gICAgfSxcbiAgICAnYm9vbGVhbic6IHtcbiAgICAgIHBhdHRlcm46IGNyZWF0ZVZhbHVlUGF0dGVybigvZmFsc2V8dHJ1ZS8uc291cmNlLCAnaScpLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGFsaWFzOiAnaW1wb3J0YW50J1xuICAgIH0sXG4gICAgJ251bGwnOiB7XG4gICAgICBwYXR0ZXJuOiBjcmVhdGVWYWx1ZVBhdHRlcm4oL251bGx8fi8uc291cmNlLCAnaScpLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGFsaWFzOiAnaW1wb3J0YW50J1xuICAgIH0sXG4gICAgJ3N0cmluZyc6IHtcbiAgICAgIHBhdHRlcm46IGNyZWF0ZVZhbHVlUGF0dGVybihzdHJpbmcpLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGdyZWVkeTogdHJ1ZVxuICAgIH0sXG4gICAgJ251bWJlcic6IHtcbiAgICAgIHBhdHRlcm46IGNyZWF0ZVZhbHVlUGF0dGVybigvWystXT8oPzoweFtcXGRhLWZdK3wwb1swLTddK3woPzpcXGQrKD86XFwuXFxkKik/fFxcLlxcZCspKD86ZVsrLV0/XFxkKyk/fFxcLmluZnxcXC5uYW4pLy5zb3VyY2UsICdpJyksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgfSxcbiAgICAndGFnJzogdGFnLFxuICAgICdpbXBvcnRhbnQnOiBhbmNob3JPckFsaWFzLFxuICAgICdwdW5jdHVhdGlvbic6IC8tLS18WzpbXFxde31cXC0sfD4/XXxcXC5cXC5cXC4vXG4gIH07XG4gIFByaXNtLmxhbmd1YWdlcy55bWwgPSBQcmlzbS5sYW5ndWFnZXMueWFtbDtcbn0pKFByaXNtKTtcbihmdW5jdGlvbiAoUHJpc20pIHtcbiAgLy8gQWxsb3cgb25seSBvbmUgbGluZSBicmVha1xuICB2YXIgaW5uZXIgPSAvKD86XFxcXC58W15cXFxcXFxuXFxyXXwoPzpcXG58XFxyXFxuPykoPyFbXFxyXFxuXSkpLy5zb3VyY2U7XG5cbiAgLyoqXG4gICAqIFRoaXMgZnVuY3Rpb24gaXMgaW50ZW5kZWQgZm9yIHRoZSBjcmVhdGlvbiBvZiB0aGUgYm9sZCBvciBpdGFsaWMgcGF0dGVybi5cbiAgICpcbiAgICogVGhpcyBhbHNvIGFkZHMgYSBsb29rYmVoaW5kIGdyb3VwIHRvIHRoZSBnaXZlbiBwYXR0ZXJuIHRvIGVuc3VyZSB0aGF0IHRoZSBwYXR0ZXJuIGlzIG5vdCBiYWNrc2xhc2gtZXNjYXBlZC5cbiAgICpcbiAgICogX05vdGU6XyBLZWVwIGluIG1pbmQgdGhhdCB0aGlzIGFkZHMgYSBjYXB0dXJpbmcgZ3JvdXAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwYXR0ZXJuXG4gICAqIEByZXR1cm5zIHtSZWdFeHB9XG4gICAqL1xuICBmdW5jdGlvbiBjcmVhdGVJbmxpbmUocGF0dGVybikge1xuICAgIHBhdHRlcm4gPSBwYXR0ZXJuLnJlcGxhY2UoLzxpbm5lcj4vZywgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGlubmVyO1xuICAgIH0pO1xuICAgIHJldHVybiBSZWdFeHAoLygoPzpefFteXFxcXF0pKD86XFxcXHsyfSkqKS8uc291cmNlICsgJyg/OicgKyBwYXR0ZXJuICsgJyknKTtcbiAgfVxuICB2YXIgdGFibGVDZWxsID0gLyg/OlxcXFwufGBgKD86W15gXFxyXFxuXXxgKD8hYCkpK2BgfGBbXmBcXHJcXG5dK2B8W15cXFxcfFxcclxcbmBdKSsvLnNvdXJjZTtcbiAgdmFyIHRhYmxlUm93ID0gL1xcfD9fXyg/OlxcfF9fKStcXHw/KD86KD86XFxufFxcclxcbj8pfCg/IVtcXHNcXFNdKSkvLnNvdXJjZS5yZXBsYWNlKC9fXy9nLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRhYmxlQ2VsbDtcbiAgfSk7XG4gIHZhciB0YWJsZUxpbmUgPSAvXFx8P1sgXFx0XSo6Py17Myx9Oj9bIFxcdF0qKD86XFx8WyBcXHRdKjo/LXszLH06P1sgXFx0XSopK1xcfD8oPzpcXG58XFxyXFxuPykvLnNvdXJjZTtcbiAgUHJpc20ubGFuZ3VhZ2VzLm1hcmtkb3duID0gUHJpc20ubGFuZ3VhZ2VzLmV4dGVuZCgnbWFya3VwJywge30pO1xuICBQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdtYXJrZG93bicsICdwcm9sb2cnLCB7XG4gICAgJ2Zyb250LW1hdHRlci1ibG9jayc6IHtcbiAgICAgIHBhdHRlcm46IC8oXig/OlxccypbXFxyXFxuXSk/KS0tLSg/IS4pW1xcc1xcU10qP1tcXHJcXG5dLS0tKD8hLikvLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAncHVuY3R1YXRpb24nOiAvXi0tLXwtLS0kLyxcbiAgICAgICAgJ2Zyb250LW1hdHRlcic6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvXFxTKyg/OlxccytcXFMrKSovLFxuICAgICAgICAgIGFsaWFzOiBbJ3lhbWwnLCAnbGFuZ3VhZ2UteWFtbCddLFxuICAgICAgICAgIGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLnlhbWxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgJ2Jsb2NrcXVvdGUnOiB7XG4gICAgICAvLyA+IC4uLlxuICAgICAgcGF0dGVybjogL14+KD86W1xcdCBdKj4pKi9tLFxuICAgICAgYWxpYXM6ICdwdW5jdHVhdGlvbidcbiAgICB9LFxuICAgICd0YWJsZSc6IHtcbiAgICAgIHBhdHRlcm46IFJlZ0V4cCgnXicgKyB0YWJsZVJvdyArIHRhYmxlTGluZSArICcoPzonICsgdGFibGVSb3cgKyAnKSonLCAnbScpLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICd0YWJsZS1kYXRhLXJvd3MnOiB7XG4gICAgICAgICAgcGF0dGVybjogUmVnRXhwKCdeKCcgKyB0YWJsZVJvdyArIHRhYmxlTGluZSArICcpKD86JyArIHRhYmxlUm93ICsgJykqJCcpLFxuICAgICAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICAgICAgaW5zaWRlOiB7XG4gICAgICAgICAgICAndGFibGUtZGF0YSc6IHtcbiAgICAgICAgICAgICAgcGF0dGVybjogUmVnRXhwKHRhYmxlQ2VsbCksXG4gICAgICAgICAgICAgIGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLm1hcmtkb3duXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3B1bmN0dWF0aW9uJzogL1xcfC9cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICd0YWJsZS1saW5lJzoge1xuICAgICAgICAgIHBhdHRlcm46IFJlZ0V4cCgnXignICsgdGFibGVSb3cgKyAnKScgKyB0YWJsZUxpbmUgKyAnJCcpLFxuICAgICAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICAgICAgaW5zaWRlOiB7XG4gICAgICAgICAgICAncHVuY3R1YXRpb24nOiAvXFx8fDo/LXszLH06Py9cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICd0YWJsZS1oZWFkZXItcm93Jzoge1xuICAgICAgICAgIHBhdHRlcm46IFJlZ0V4cCgnXicgKyB0YWJsZVJvdyArICckJyksXG4gICAgICAgICAgaW5zaWRlOiB7XG4gICAgICAgICAgICAndGFibGUtaGVhZGVyJzoge1xuICAgICAgICAgICAgICBwYXR0ZXJuOiBSZWdFeHAodGFibGVDZWxsKSxcbiAgICAgICAgICAgICAgYWxpYXM6ICdpbXBvcnRhbnQnLFxuICAgICAgICAgICAgICBpbnNpZGU6IFByaXNtLmxhbmd1YWdlcy5tYXJrZG93blxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdwdW5jdHVhdGlvbic6IC9cXHwvXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICAnY29kZSc6IFt7XG4gICAgICAvLyBQcmVmaXhlZCBieSA0IHNwYWNlcyBvciAxIHRhYiBhbmQgcHJlY2VkZWQgYnkgYW4gZW1wdHkgbGluZVxuICAgICAgcGF0dGVybjogLygoPzpefFxcbilbIFxcdF0qXFxufCg/Ol58XFxyXFxuPylbIFxcdF0qXFxyXFxuPykoPzogezR9fFxcdCkuKyg/Oig/OlxcbnxcXHJcXG4/KSg/OiB7NH18XFx0KS4rKSovLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGFsaWFzOiAna2V5d29yZCdcbiAgICB9LCB7XG4gICAgICAvLyBgYGBvcHRpb25hbCBsYW5ndWFnZVxuICAgICAgLy8gY29kZSBibG9ja1xuICAgICAgLy8gYGBgXG4gICAgICBwYXR0ZXJuOiAvXmBgYFtcXHNcXFNdKj9eYGBgJC9tLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdjb2RlLWJsb2NrJzoge1xuICAgICAgICAgIHBhdHRlcm46IC9eKGBgYC4qKD86XFxufFxcclxcbj8pKVtcXHNcXFNdKz8oPz0oPzpcXG58XFxyXFxuPyleYGBgJCkvbSxcbiAgICAgICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgICdjb2RlLWxhbmd1YWdlJzoge1xuICAgICAgICAgIHBhdHRlcm46IC9eKGBgYCkuKy8sXG4gICAgICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICAncHVuY3R1YXRpb24nOiAvYGBgL1xuICAgICAgfVxuICAgIH1dLFxuICAgICd0aXRsZSc6IFt7XG4gICAgICAvLyB0aXRsZSAxXG4gICAgICAvLyA9PT09PT09XG5cbiAgICAgIC8vIHRpdGxlIDJcbiAgICAgIC8vIC0tLS0tLS1cbiAgICAgIHBhdHRlcm46IC9cXFMuKig/OlxcbnxcXHJcXG4/KSg/Oj09K3wtLSspKD89WyBcXHRdKiQpL20sXG4gICAgICBhbGlhczogJ2ltcG9ydGFudCcsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgcHVuY3R1YXRpb246IC89PSskfC0tKyQvXG4gICAgICB9XG4gICAgfSwge1xuICAgICAgLy8gIyB0aXRsZSAxXG4gICAgICAvLyAjIyMjIyMgdGl0bGUgNlxuICAgICAgcGF0dGVybjogLyheXFxzKikjLisvbSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBhbGlhczogJ2ltcG9ydGFudCcsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgcHVuY3R1YXRpb246IC9eIyt8IyskL1xuICAgICAgfVxuICAgIH1dLFxuICAgICdocic6IHtcbiAgICAgIC8vICoqKlxuICAgICAgLy8gLS0tXG4gICAgICAvLyAqICogKlxuICAgICAgLy8gLS0tLS0tLS0tLS1cbiAgICAgIHBhdHRlcm46IC8oXlxccyopKFsqLV0pKD86W1xcdCBdKlxcMil7Mix9KD89XFxzKiQpL20sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgYWxpYXM6ICdwdW5jdHVhdGlvbidcbiAgICB9LFxuICAgICdsaXN0Jzoge1xuICAgICAgLy8gKiBpdGVtXG4gICAgICAvLyArIGl0ZW1cbiAgICAgIC8vIC0gaXRlbVxuICAgICAgLy8gMS4gaXRlbVxuICAgICAgcGF0dGVybjogLyheXFxzKikoPzpbKistXXxcXGQrXFwuKSg/PVtcXHQgXS4pL20sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgYWxpYXM6ICdwdW5jdHVhdGlvbidcbiAgICB9LFxuICAgICd1cmwtcmVmZXJlbmNlJzoge1xuICAgICAgLy8gW2lkXTogaHR0cDovL2V4YW1wbGUuY29tIFwiT3B0aW9uYWwgdGl0bGVcIlxuICAgICAgLy8gW2lkXTogaHR0cDovL2V4YW1wbGUuY29tICdPcHRpb25hbCB0aXRsZSdcbiAgICAgIC8vIFtpZF06IGh0dHA6Ly9leGFtcGxlLmNvbSAoT3B0aW9uYWwgdGl0bGUpXG4gICAgICAvLyBbaWRdOiA8aHR0cDovL2V4YW1wbGUuY29tPiBcIk9wdGlvbmFsIHRpdGxlXCJcbiAgICAgIHBhdHRlcm46IC8hP1xcW1teXFxdXStcXF06W1xcdCBdKyg/OlxcUyt8PCg/OlxcXFwufFtePlxcXFxdKSs+KSg/OltcXHQgXSsoPzpcIig/OlxcXFwufFteXCJcXFxcXSkqXCJ8Jyg/OlxcXFwufFteJ1xcXFxdKSonfFxcKCg/OlxcXFwufFteKVxcXFxdKSpcXCkpKT8vLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICd2YXJpYWJsZSc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvXighP1xcWylbXlxcXV0rLyxcbiAgICAgICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgICdzdHJpbmcnOiAvKD86XCIoPzpcXFxcLnxbXlwiXFxcXF0pKlwifCcoPzpcXFxcLnxbXidcXFxcXSkqJ3xcXCgoPzpcXFxcLnxbXilcXFxcXSkqXFwpKSQvLFxuICAgICAgICAncHVuY3R1YXRpb24nOiAvXltcXFtcXF0hOl18Wzw+XS9cbiAgICAgIH0sXG4gICAgICBhbGlhczogJ3VybCdcbiAgICB9LFxuICAgICdib2xkJzoge1xuICAgICAgLy8gKipzdHJvbmcqKlxuICAgICAgLy8gX19zdHJvbmdfX1xuXG4gICAgICAvLyBhbGxvdyBvbmUgbmVzdGVkIGluc3RhbmNlIG9mIGl0YWxpYyB0ZXh0IHVzaW5nIHRoZSBzYW1lIGRlbGltaXRlclxuICAgICAgcGF0dGVybjogY3JlYXRlSW5saW5lKC9cXGJfXyg/Oig/IV8pPGlubmVyPnxfKD86KD8hXyk8aW5uZXI+KStfKStfX1xcYnxcXCpcXCooPzooPyFcXCopPGlubmVyPnxcXCooPzooPyFcXCopPGlubmVyPikrXFwqKStcXCpcXCovLnNvdXJjZSksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgIHBhdHRlcm46IC8oXi4uKVtcXHNcXFNdKyg/PS4uJCkvLFxuICAgICAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICAgICAgaW5zaWRlOiB7fSAvLyBzZWUgYmVsb3dcbiAgICAgICAgfSxcbiAgICAgICAgJ3B1bmN0dWF0aW9uJzogL1xcKlxcKnxfXy9cbiAgICAgIH1cbiAgICB9LFxuICAgICdpdGFsaWMnOiB7XG4gICAgICAvLyAqZW0qXG4gICAgICAvLyBfZW1fXG5cbiAgICAgIC8vIGFsbG93IG9uZSBuZXN0ZWQgaW5zdGFuY2Ugb2YgYm9sZCB0ZXh0IHVzaW5nIHRoZSBzYW1lIGRlbGltaXRlclxuICAgICAgcGF0dGVybjogY3JlYXRlSW5saW5lKC9cXGJfKD86KD8hXyk8aW5uZXI+fF9fKD86KD8hXyk8aW5uZXI+KStfXykrX1xcYnxcXCooPzooPyFcXCopPGlubmVyPnxcXCpcXCooPzooPyFcXCopPGlubmVyPikrXFwqXFwqKStcXCovLnNvdXJjZSksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgIHBhdHRlcm46IC8oXi4pW1xcc1xcU10rKD89LiQpLyxcbiAgICAgICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgICAgIGluc2lkZToge30gLy8gc2VlIGJlbG93XG4gICAgICAgIH0sXG4gICAgICAgICdwdW5jdHVhdGlvbic6IC9bKl9dL1xuICAgICAgfVxuICAgIH0sXG4gICAgJ3N0cmlrZSc6IHtcbiAgICAgIC8vIH5+c3RyaWtlIHRocm91Z2h+flxuICAgICAgLy8gfnN0cmlrZX5cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWdleHAvc3RyaWN0XG4gICAgICBwYXR0ZXJuOiBjcmVhdGVJbmxpbmUoLyh+fj8pKD86KD8hfik8aW5uZXI+KStcXDIvLnNvdXJjZSksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgIHBhdHRlcm46IC8oXn5+PylbXFxzXFxTXSsoPz1cXDEkKS8sXG4gICAgICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgICAgICBpbnNpZGU6IHt9IC8vIHNlZSBiZWxvd1xuICAgICAgICB9LFxuICAgICAgICAncHVuY3R1YXRpb24nOiAvfn4/L1xuICAgICAgfVxuICAgIH0sXG4gICAgJ2NvZGUtc25pcHBldCc6IHtcbiAgICAgIC8vIGBjb2RlYFxuICAgICAgLy8gYGBjb2RlYGBcbiAgICAgIHBhdHRlcm46IC8oXnxbXlxcXFxgXSkoPzpgYFteYFxcclxcbl0rKD86YFteYFxcclxcbl0rKSpgYCg/IWApfGBbXmBcXHJcXG5dK2AoPyFgKSkvLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGFsaWFzOiBbJ2NvZGUnLCAna2V5d29yZCddXG4gICAgfSxcbiAgICAndXJsJzoge1xuICAgICAgLy8gW2V4YW1wbGVdKGh0dHA6Ly9leGFtcGxlLmNvbSBcIk9wdGlvbmFsIHRpdGxlXCIpXG4gICAgICAvLyBbZXhhbXBsZV1baWRdXG4gICAgICAvLyBbZXhhbXBsZV0gW2lkXVxuICAgICAgcGF0dGVybjogY3JlYXRlSW5saW5lKC8hP1xcWyg/Oig/IVxcXSk8aW5uZXI+KStcXF0oPzpcXChbXlxccyldKyg/OltcXHQgXStcIig/OlxcXFwufFteXCJcXFxcXSkqXCIpP1xcKXxbIFxcdF0/XFxbKD86KD8hXFxdKTxpbm5lcj4pK1xcXSkvLnNvdXJjZSksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdvcGVyYXRvcic6IC9eIS8sXG4gICAgICAgICdjb250ZW50Jzoge1xuICAgICAgICAgIHBhdHRlcm46IC8oXlxcWylbXlxcXV0rKD89XFxdKS8sXG4gICAgICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgICAgICBpbnNpZGU6IHt9IC8vIHNlZSBiZWxvd1xuICAgICAgICB9LFxuICAgICAgICAndmFyaWFibGUnOiB7XG4gICAgICAgICAgcGF0dGVybjogLyheXFxdWyBcXHRdP1xcWylbXlxcXV0rKD89XFxdJCkvLFxuICAgICAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgJ3VybCc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvKF5cXF1cXCgpW15cXHMpXSsvLFxuICAgICAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgJ3N0cmluZyc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvKF5bIFxcdF0rKVwiKD86XFxcXC58W15cIlxcXFxdKSpcIig/PVxcKSQpLyxcbiAgICAgICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICBbJ3VybCcsICdib2xkJywgJ2l0YWxpYycsICdzdHJpa2UnXS5mb3JFYWNoKGZ1bmN0aW9uICh0b2tlbikge1xuICAgIFsndXJsJywgJ2JvbGQnLCAnaXRhbGljJywgJ3N0cmlrZScsICdjb2RlLXNuaXBwZXQnXS5mb3JFYWNoKGZ1bmN0aW9uIChpbnNpZGUpIHtcbiAgICAgIGlmICh0b2tlbiAhPT0gaW5zaWRlKSB7XG4gICAgICAgIFByaXNtLmxhbmd1YWdlcy5tYXJrZG93blt0b2tlbl0uaW5zaWRlLmNvbnRlbnQuaW5zaWRlW2luc2lkZV0gPSBQcmlzbS5sYW5ndWFnZXMubWFya2Rvd25baW5zaWRlXTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIFByaXNtLmhvb2tzLmFkZCgnYWZ0ZXItdG9rZW5pemUnLCBmdW5jdGlvbiAoZW52KSB7XG4gICAgaWYgKGVudi5sYW5ndWFnZSAhPT0gJ21hcmtkb3duJyAmJiBlbnYubGFuZ3VhZ2UgIT09ICdtZCcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZnVuY3Rpb24gd2Fsa1Rva2Vucyh0b2tlbnMpIHtcbiAgICAgIGlmICghdG9rZW5zIHx8IHR5cGVvZiB0b2tlbnMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gdG9rZW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgdG9rZW4gPSB0b2tlbnNbaV07XG4gICAgICAgIGlmICh0b2tlbi50eXBlICE9PSAnY29kZScpIHtcbiAgICAgICAgICB3YWxrVG9rZW5zKHRva2VuLmNvbnRlbnQpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLypcbiAgICAgICAgICogQWRkIHRoZSBjb3JyZWN0IGBsYW5ndWFnZS14eHh4YCBjbGFzcyB0byB0aGlzIGNvZGUgYmxvY2suIEtlZXAgaW4gbWluZCB0aGF0IHRoZSBgY29kZS1sYW5ndWFnZWAgdG9rZW5cbiAgICAgICAgICogaXMgb3B0aW9uYWwuIEJ1dCB0aGUgZ3JhbW1hciBpcyBkZWZpbmVkIHNvIHRoYXQgdGhlcmUgaXMgb25seSBvbmUgY2FzZSB3ZSBoYXZlIHRvIGhhbmRsZTpcbiAgICAgICAgICpcbiAgICAgICAgICogdG9rZW4uY29udGVudCA9IFtcbiAgICAgICAgICogICAgIDxzcGFuIGNsYXNzPVwicHVuY3R1YXRpb25cIj5gYGA8L3NwYW4+LFxuICAgICAgICAgKiAgICAgPHNwYW4gY2xhc3M9XCJjb2RlLWxhbmd1YWdlXCI+eHh4eDwvc3Bhbj4sXG4gICAgICAgICAqICAgICAnXFxuJywgLy8gZXhhY3RseSBvbmUgbmV3IGxpbmVzIChcXHIgb3IgXFxuIG9yIFxcclxcbilcbiAgICAgICAgICogICAgIDxzcGFuIGNsYXNzPVwiY29kZS1ibG9ja1wiPi4uLjwvc3Bhbj4sXG4gICAgICAgICAqICAgICAnXFxuJywgLy8gZXhhY3RseSBvbmUgbmV3IGxpbmVzIGFnYWluXG4gICAgICAgICAqICAgICA8c3BhbiBjbGFzcz1cInB1bmN0dWF0aW9uXCI+YGBgPC9zcGFuPlxuICAgICAgICAgKiBdO1xuICAgICAgICAgKi9cblxuICAgICAgICB2YXIgY29kZUxhbmcgPSB0b2tlbi5jb250ZW50WzFdO1xuICAgICAgICB2YXIgY29kZUJsb2NrID0gdG9rZW4uY29udGVudFszXTtcbiAgICAgICAgaWYgKGNvZGVMYW5nICYmIGNvZGVCbG9jayAmJiBjb2RlTGFuZy50eXBlID09PSAnY29kZS1sYW5ndWFnZScgJiYgY29kZUJsb2NrLnR5cGUgPT09ICdjb2RlLWJsb2NrJyAmJiB0eXBlb2YgY29kZUxhbmcuY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAvLyB0aGlzIG1pZ2h0IGJlIGEgbGFuZ3VhZ2UgdGhhdCBQcmlzbSBkb2VzIG5vdCBzdXBwb3J0XG5cbiAgICAgICAgICAvLyBkbyBzb21lIHJlcGxhY2VtZW50cyB0byBzdXBwb3J0IEMrKywgQyMsIGFuZCBGI1xuICAgICAgICAgIHZhciBsYW5nID0gY29kZUxhbmcuY29udGVudC5yZXBsYWNlKC9cXGIjL2csICdzaGFycCcpLnJlcGxhY2UoL1xcYlxcK1xcKy9nLCAncHAnKTtcbiAgICAgICAgICAvLyBvbmx5IHVzZSB0aGUgZmlyc3Qgd29yZFxuICAgICAgICAgIGxhbmcgPSAoL1thLXpdW1xcdy1dKi9pLmV4ZWMobGFuZykgfHwgWycnXSlbMF0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICB2YXIgYWxpYXMgPSAnbGFuZ3VhZ2UtJyArIGxhbmc7XG5cbiAgICAgICAgICAvLyBhZGQgYWxpYXNcbiAgICAgICAgICBpZiAoIWNvZGVCbG9jay5hbGlhcykge1xuICAgICAgICAgICAgY29kZUJsb2NrLmFsaWFzID0gW2FsaWFzXTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb2RlQmxvY2suYWxpYXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBjb2RlQmxvY2suYWxpYXMgPSBbY29kZUJsb2NrLmFsaWFzLCBhbGlhc107XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvZGVCbG9jay5hbGlhcy5wdXNoKGFsaWFzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgd2Fsa1Rva2VucyhlbnYudG9rZW5zKTtcbiAgfSk7XG4gIFByaXNtLmhvb2tzLmFkZCgnd3JhcCcsIGZ1bmN0aW9uIChlbnYpIHtcbiAgICBpZiAoZW52LnR5cGUgIT09ICdjb2RlLWJsb2NrJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgY29kZUxhbmcgPSAnJztcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGVudi5jbGFzc2VzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIGNscyA9IGVudi5jbGFzc2VzW2ldO1xuICAgICAgdmFyIG1hdGNoID0gL2xhbmd1YWdlLSguKykvLmV4ZWMoY2xzKTtcbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBjb2RlTGFuZyA9IG1hdGNoWzFdO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIGdyYW1tYXIgPSBQcmlzbS5sYW5ndWFnZXNbY29kZUxhbmddO1xuICAgIGlmICghZ3JhbW1hcikge1xuICAgICAgaWYgKGNvZGVMYW5nICYmIGNvZGVMYW5nICE9PSAnbm9uZScgJiYgUHJpc20ucGx1Z2lucy5hdXRvbG9hZGVyKSB7XG4gICAgICAgIHZhciBpZCA9ICdtZC0nICsgbmV3IERhdGUoKS52YWx1ZU9mKCkgKyAnLScgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxZTE2KTtcbiAgICAgICAgZW52LmF0dHJpYnV0ZXNbJ2lkJ10gPSBpZDtcbiAgICAgICAgUHJpc20ucGx1Z2lucy5hdXRvbG9hZGVyLmxvYWRMYW5ndWFnZXMoY29kZUxhbmcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgZWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgICAgICAgIGlmIChlbGUpIHtcbiAgICAgICAgICAgIGVsZS5pbm5lckhUTUwgPSBQcmlzbS5oaWdobGlnaHQoZWxlLnRleHRDb250ZW50LCBQcmlzbS5sYW5ndWFnZXNbY29kZUxhbmddLCBjb2RlTGFuZyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZW52LmNvbnRlbnQgPSBQcmlzbS5oaWdobGlnaHQodGV4dENvbnRlbnQoZW52LmNvbnRlbnQpLCBncmFtbWFyLCBjb2RlTGFuZyk7XG4gICAgfVxuICB9KTtcbiAgdmFyIHRhZ1BhdHRlcm4gPSBSZWdFeHAoUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cC50YWcucGF0dGVybi5zb3VyY2UsICdnaScpO1xuXG4gIC8qKlxuICAgKiBBIGxpc3Qgb2Yga25vd24gZW50aXR5IG5hbWVzLlxuICAgKlxuICAgKiBUaGlzIHdpbGwgYWx3YXlzIGJlIGluY29tcGxldGUgdG8gc2F2ZSBzcGFjZS4gVGhlIGN1cnJlbnQgbGlzdCBpcyB0aGUgb25lIHVzZWQgYnkgbG93ZGFzaCdzIHVuZXNjYXBlIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAc2VlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vbG9kYXNoL2xvZGFzaC9ibG9iLzJkYTAyNGMzYjRmOTk0N2E0ODUxNzYzOWRlNzU2MDQ1N2NkNGVjNmMvdW5lc2NhcGUuanMjTDJ9XG4gICAqL1xuICB2YXIgS05PV05fRU5USVRZX05BTUVTID0ge1xuICAgICdhbXAnOiAnJicsXG4gICAgJ2x0JzogJzwnLFxuICAgICdndCc6ICc+JyxcbiAgICAncXVvdCc6ICdcIidcbiAgfTtcblxuICAvLyBJRSAxMSBkb2Vzbid0IHN1cHBvcnQgYFN0cmluZy5mcm9tQ29kZVBvaW50YFxuICB2YXIgZnJvbUNvZGVQb2ludCA9IFN0cmluZy5mcm9tQ29kZVBvaW50IHx8IFN0cmluZy5mcm9tQ2hhckNvZGU7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHRleHQgY29udGVudCBvZiBhIGdpdmVuIEhUTUwgc291cmNlIGNvZGUgc3RyaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaHRtbFxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKi9cbiAgZnVuY3Rpb24gdGV4dENvbnRlbnQoaHRtbCkge1xuICAgIC8vIHJlbW92ZSBhbGwgdGFnc1xuICAgIHZhciB0ZXh0ID0gaHRtbC5yZXBsYWNlKHRhZ1BhdHRlcm4sICcnKTtcblxuICAgIC8vIGRlY29kZSBrbm93biBlbnRpdGllc1xuICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoLyYoXFx3ezEsOH18I3g/W1xcZGEtZl17MSw4fSk7L2dpLCBmdW5jdGlvbiAobSwgY29kZSkge1xuICAgICAgY29kZSA9IGNvZGUudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmIChjb2RlWzBdID09PSAnIycpIHtcbiAgICAgICAgdmFyIHZhbHVlO1xuICAgICAgICBpZiAoY29kZVsxXSA9PT0gJ3gnKSB7XG4gICAgICAgICAgdmFsdWUgPSBwYXJzZUludChjb2RlLnNsaWNlKDIpLCAxNik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsdWUgPSBOdW1iZXIoY29kZS5zbGljZSgxKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZyb21Db2RlUG9pbnQodmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGtub3duID0gS05PV05fRU5USVRZX05BTUVTW2NvZGVdO1xuICAgICAgICBpZiAoa25vd24pIHtcbiAgICAgICAgICByZXR1cm4ga25vd247XG4gICAgICAgIH1cblxuICAgICAgICAvLyB1bmFibGUgdG8gZGVjb2RlXG4gICAgICAgIHJldHVybiBtO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB0ZXh0O1xuICB9XG4gIFByaXNtLmxhbmd1YWdlcy5tZCA9IFByaXNtLmxhbmd1YWdlcy5tYXJrZG93bjtcbn0pKFByaXNtKTtcblByaXNtLmxhbmd1YWdlcy5vYmplY3RpdmVjID0gUHJpc20ubGFuZ3VhZ2VzLmV4dGVuZCgnYycsIHtcbiAgJ3N0cmluZyc6IHtcbiAgICBwYXR0ZXJuOiAvQD9cIig/OlxcXFwoPzpcXHJcXG58W1xcc1xcU10pfFteXCJcXFxcXFxyXFxuXSkqXCIvLFxuICAgIGdyZWVkeTogdHJ1ZVxuICB9LFxuICAna2V5d29yZCc6IC9cXGIoPzphc218YXV0b3xicmVha3xjYXNlfGNoYXJ8Y29uc3R8Y29udGludWV8ZGVmYXVsdHxkb3xkb3VibGV8ZWxzZXxlbnVtfGV4dGVybnxmbG9hdHxmb3J8Z290b3xpZnxpbnxpbmxpbmV8aW50fGxvbmd8cmVnaXN0ZXJ8cmV0dXJufHNlbGZ8c2hvcnR8c2lnbmVkfHNpemVvZnxzdGF0aWN8c3RydWN0fHN1cGVyfHN3aXRjaHx0eXBlZGVmfHR5cGVvZnx1bmlvbnx1bnNpZ25lZHx2b2lkfHZvbGF0aWxlfHdoaWxlKVxcYnwoPzpAaW50ZXJmYWNlfEBlbmR8QGltcGxlbWVudGF0aW9ufEBwcm90b2NvbHxAY2xhc3N8QHB1YmxpY3xAcHJvdGVjdGVkfEBwcml2YXRlfEBwcm9wZXJ0eXxAdHJ5fEBjYXRjaHxAZmluYWxseXxAdGhyb3d8QHN5bnRoZXNpemV8QGR5bmFtaWN8QHNlbGVjdG9yKVxcYi8sXG4gICdvcGVyYXRvcic6IC8tWy0+XT98XFwrXFwrP3whPT98PDw/PT98Pj4/PT98PT0/fCYmP3xcXHxcXHw/fFt+XiU/KlxcL0BdL1xufSk7XG5kZWxldGUgUHJpc20ubGFuZ3VhZ2VzLm9iamVjdGl2ZWNbJ2NsYXNzLW5hbWUnXTtcblByaXNtLmxhbmd1YWdlcy5vYmpjID0gUHJpc20ubGFuZ3VhZ2VzLm9iamVjdGl2ZWM7XG4oZnVuY3Rpb24gKFByaXNtKSB7XG4gIHZhciBicmFja2V0cyA9IC8oPzpcXCgoPzpbXigpXFxcXF18XFxcXFtcXHNcXFNdKSpcXCl8XFx7KD86W157fVxcXFxdfFxcXFxbXFxzXFxTXSkqXFx9fFxcWyg/OlteW1xcXVxcXFxdfFxcXFxbXFxzXFxTXSkqXFxdfDwoPzpbXjw+XFxcXF18XFxcXFtcXHNcXFNdKSo+KS8uc291cmNlO1xuICBQcmlzbS5sYW5ndWFnZXMucGVybCA9IHtcbiAgICAnY29tbWVudCc6IFt7XG4gICAgICAvLyBQT0RcbiAgICAgIHBhdHRlcm46IC8oXlxccyopPVxcd1tcXHNcXFNdKj89Y3V0LiovbSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBncmVlZHk6IHRydWVcbiAgICB9LCB7XG4gICAgICBwYXR0ZXJuOiAvKF58W15cXFxcJF0pIy4qLyxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBncmVlZHk6IHRydWVcbiAgICB9XSxcbiAgICAvLyBUT0RPIENvdWxkIGJlIG5pY2UgdG8gaGFuZGxlIEhlcmVkb2MgdG9vLlxuICAgICdzdHJpbmcnOiBbe1xuICAgICAgcGF0dGVybjogUmVnRXhwKC9cXGIoPzpxfHFxfHF3fHF4KSg/IVthLXpBLVowLTldKVxccyovLnNvdXJjZSArICcoPzonICsgW1xuICAgICAgLy8gcS8uLi4vXG4gICAgICAvKFteYS16QS1aMC05XFxzeyhcXFs8XSkoPzooPyFcXDEpW15cXFxcXXxcXFxcW1xcc1xcU10pKlxcMS8uc291cmNlLFxuICAgICAgLy8gcSBhLi4uYVxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlZ2V4cC9zdHJpY3RcbiAgICAgIC8oW2EtekEtWjAtOV0pKD86KD8hXFwyKVteXFxcXF18XFxcXFtcXHNcXFNdKSpcXDIvLnNvdXJjZSxcbiAgICAgIC8vIHEoLi4uKVxuICAgICAgLy8gcXsuLi59XG4gICAgICAvLyBxWy4uLl1cbiAgICAgIC8vIHE8Li4uPlxuICAgICAgYnJhY2tldHNdLmpvaW4oJ3wnKSArICcpJyksXG4gICAgICBncmVlZHk6IHRydWVcbiAgICB9LFxuICAgIC8vIFwiLi4uXCIsIGAuLi5gXG4gICAge1xuICAgICAgcGF0dGVybjogLyhcInxgKSg/Oig/IVxcMSlbXlxcXFxdfFxcXFxbXFxzXFxTXSkqXFwxLyxcbiAgICAgIGdyZWVkeTogdHJ1ZVxuICAgIH0sXG4gICAgLy8gJy4uLidcbiAgICAvLyBGSVhNRSBNdWx0aS1saW5lIHNpbmdsZS1xdW90ZWQgc3RyaW5ncyBhcmUgbm90IHN1cHBvcnRlZCBhcyB0aGV5IHdvdWxkIGJyZWFrIHZhcmlhYmxlcyBjb250YWluaW5nICdcbiAgICB7XG4gICAgICBwYXR0ZXJuOiAvJyg/OlteJ1xcXFxcXHJcXG5dfFxcXFwuKSonLyxcbiAgICAgIGdyZWVkeTogdHJ1ZVxuICAgIH1dLFxuICAgICdyZWdleCc6IFt7XG4gICAgICBwYXR0ZXJuOiBSZWdFeHAoL1xcYig/Om18cXIpKD8hW2EtekEtWjAtOV0pXFxzKi8uc291cmNlICsgJyg/OicgKyBbXG4gICAgICAvLyBtLy4uLi9cbiAgICAgIC8oW15hLXpBLVowLTlcXHN7KFxcWzxdKSg/Oig/IVxcMSlbXlxcXFxdfFxcXFxbXFxzXFxTXSkqXFwxLy5zb3VyY2UsXG4gICAgICAvLyBtIGEuLi5hXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVnZXhwL3N0cmljdFxuICAgICAgLyhbYS16QS1aMC05XSkoPzooPyFcXDIpW15cXFxcXXxcXFxcW1xcc1xcU10pKlxcMi8uc291cmNlLFxuICAgICAgLy8gbSguLi4pXG4gICAgICAvLyBtey4uLn1cbiAgICAgIC8vIG1bLi4uXVxuICAgICAgLy8gbTwuLi4+XG4gICAgICBicmFja2V0c10uam9pbignfCcpICsgJyknICsgL1ttc2l4cG9kdWFsbmdjXSovLnNvdXJjZSksXG4gICAgICBncmVlZHk6IHRydWVcbiAgICB9LFxuICAgIC8vIFRoZSBsb29rYmVoaW5kcyBwcmV2ZW50IC1zIGZyb20gYnJlYWtpbmdcbiAgICB7XG4gICAgICBwYXR0ZXJuOiBSZWdFeHAoLyhefFteLV0pXFxiKD86c3x0cnx5KSg/IVthLXpBLVowLTldKVxccyovLnNvdXJjZSArICcoPzonICsgW1xuICAgICAgLy8gcy8uLi4vLi4uL1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlZ2V4cC9zdHJpY3RcbiAgICAgIC8oW15hLXpBLVowLTlcXHN7KFxcWzxdKSg/Oig/IVxcMilbXlxcXFxdfFxcXFxbXFxzXFxTXSkqXFwyKD86KD8hXFwyKVteXFxcXF18XFxcXFtcXHNcXFNdKSpcXDIvLnNvdXJjZSxcbiAgICAgIC8vIHMgYS4uLmEuLi5hXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVnZXhwL3N0cmljdFxuICAgICAgLyhbYS16QS1aMC05XSkoPzooPyFcXDMpW15cXFxcXXxcXFxcW1xcc1xcU10pKlxcMyg/Oig/IVxcMylbXlxcXFxdfFxcXFxbXFxzXFxTXSkqXFwzLy5zb3VyY2UsXG4gICAgICAvLyBzKC4uLikoLi4uKVxuICAgICAgLy8gc3suLi59ey4uLn1cbiAgICAgIC8vIHNbLi4uXVsuLi5dXG4gICAgICAvLyBzPC4uLj48Li4uPlxuICAgICAgLy8gcyguLi4pWy4uLl1cbiAgICAgIGJyYWNrZXRzICsgL1xccyovLnNvdXJjZSArIGJyYWNrZXRzXS5qb2luKCd8JykgKyAnKScgKyAvW21zaXhwb2R1YWxuZ2Nlcl0qLy5zb3VyY2UpLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGdyZWVkeTogdHJ1ZVxuICAgIH0sXG4gICAgLy8gLy4uLi9cbiAgICAvLyBUaGUgbG9vay1haGVhZCB0cmllcyB0byBwcmV2ZW50IHR3byBkaXZpc2lvbnMgb25cbiAgICAvLyB0aGUgc2FtZSBsaW5lIGZyb20gYmVpbmcgaGlnaGxpZ2h0ZWQgYXMgcmVnZXguXG4gICAgLy8gVGhpcyBkb2VzIG5vdCBzdXBwb3J0IG11bHRpLWxpbmUgcmVnZXguXG4gICAge1xuICAgICAgcGF0dGVybjogL1xcLyg/OlteXFwvXFxcXFxcclxcbl18XFxcXC4pKlxcL1ttc2l4cG9kdWFsbmdjXSooPz1cXHMqKD86JHxbXFxyXFxuLC47fSkmfFxcLSsqfjw+IT9eXXwoPzphbmR8Y21wfGVxfGdlfGd0fGxlfGx0fG5lfG5vdHxvcnx4fHhvcilcXGIpKS8sXG4gICAgICBncmVlZHk6IHRydWVcbiAgICB9XSxcbiAgICAvLyBGSVhNRSBOb3Qgc3VyZSBhYm91dCB0aGUgaGFuZGxpbmcgb2YgOjosICcsIGFuZCAjXG4gICAgJ3ZhcmlhYmxlJzogW1xuICAgIC8vICR7XlBPU1RNQVRDSH1cbiAgICAvWyYqJEAlXVxce1xcXltBLVpdK1xcfS8sXG4gICAgLy8gJF5WXG4gICAgL1smKiRAJV1cXF5bQS1aX10vLFxuICAgIC8vICR7Li4ufVxuICAgIC9bJiokQCVdIz8oPz1cXHspLyxcbiAgICAvLyAkZm9vXG4gICAgL1smKiRAJV0jPyg/Oig/Ojo6KSonPyg/IVxcZClbXFx3JF0rKD8hW1xcdyRdKSkrKD86OjopKi8sXG4gICAgLy8gJDFcbiAgICAvWyYqJEAlXVxcZCsvLFxuICAgIC8vICRfLCBAXywgJSFcbiAgICAvLyBUaGUgbmVnYXRpdmUgbG9va2FoZWFkIHByZXZlbnRzIGZyb20gYnJlYWtpbmcgdGhlICU9IG9wZXJhdG9yXG4gICAgLyg/ISU9KVskQCVdWyFcIiMkJSYnKCkqKyxcXC0uXFwvOjs8PT4/QFtcXFxcXFxdXl9ge3x9fl0vXSxcbiAgICAnZmlsZWhhbmRsZSc6IHtcbiAgICAgIC8vIDw+LCA8Rk9PPiwgX1xuICAgICAgcGF0dGVybjogLzwoPyFbPD1dKVxcUyo/PnxcXGJfXFxiLyxcbiAgICAgIGFsaWFzOiAnc3ltYm9sJ1xuICAgIH0sXG4gICAgJ3Ytc3RyaW5nJzoge1xuICAgICAgLy8gdjEuMiwgMS4yLjNcbiAgICAgIHBhdHRlcm46IC92XFxkKyg/OlxcLlxcZCspKnxcXGQrKD86XFwuXFxkKyl7Mix9LyxcbiAgICAgIGFsaWFzOiAnc3RyaW5nJ1xuICAgIH0sXG4gICAgJ2Z1bmN0aW9uJzoge1xuICAgICAgcGF0dGVybjogLyhcXGJzdWJbIFxcdF0rKVxcdysvLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgIH0sXG4gICAgJ2tleXdvcmQnOiAvXFxiKD86YW55fGJyZWFrfGNvbnRpbnVlfGRlZmF1bHR8ZGVsZXRlfGRpZXxkb3xlbHNlfGVsc2lmfGV2YWx8Zm9yfGZvcmVhY2h8Z2l2ZW58Z290b3xpZnxsYXN0fGxvY2FsfG15fG5leHR8b3VyfHBhY2thZ2V8cHJpbnR8cmVkb3xyZXF1aXJlfHJldHVybnxzYXl8c3RhdGV8c3VifHN3aXRjaHx1bmRlZnx1bmxlc3N8dW50aWx8dXNlfHdoZW58d2hpbGUpXFxiLyxcbiAgICAnbnVtYmVyJzogL1xcYig/OjB4W1xcZEEtRmEtZl0oPzpfP1tcXGRBLUZhLWZdKSp8MGJbMDFdKD86Xz9bMDFdKSp8KD86KD86XFxkKD86Xz9cXGQpKik/XFwuKT9cXGQoPzpfP1xcZCkqKD86W0VlXVsrLV0/XFxkKyk/KVxcYi8sXG4gICAgJ29wZXJhdG9yJzogLy1bcnd4b1JXWE9lenNmZGxwU2JjdHVna1RCTUFDXVxcYnxcXCtbKz1dP3wtWy09Pl0/fFxcKlxcKj89P3xcXC9cXC8/PT98PVs9fj5dP3x+W349XT98XFx8XFx8Pz0/fCYmPz0/fDwoPzo9Pj98PD0/KT98Pj4/PT98IVt+PV0/fFslXl09P3xcXC4oPzo9fFxcLlxcLj8pP3xbXFxcXD9dfFxcYngoPzo9fFxcYil8XFxiKD86YW5kfGNtcHxlcXxnZXxndHxsZXxsdHxuZXxub3R8b3J8eG9yKVxcYi8sXG4gICAgJ3B1bmN0dWF0aW9uJzogL1t7fVtcXF07KCksOl0vXG4gIH07XG59KShQcmlzbSk7XG4oZnVuY3Rpb24gKFByaXNtKSB7XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBwbGFjZWhvbGRlciBmb3IgdGhlIGdpdmVuIGxhbmd1YWdlIGlkIGFuZCBpbmRleC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxhbmd1YWdlXG4gICAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gaW5kZXhcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIGZ1bmN0aW9uIGdldFBsYWNlaG9sZGVyKGxhbmd1YWdlLCBpbmRleCkge1xuICAgIHJldHVybiAnX19fJyArIGxhbmd1YWdlLnRvVXBwZXJDYXNlKCkgKyBpbmRleCArICdfX18nO1xuICB9XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFByaXNtLmxhbmd1YWdlc1snbWFya3VwLXRlbXBsYXRpbmcnXSA9IHt9LCB7XG4gICAgYnVpbGRQbGFjZWhvbGRlcnM6IHtcbiAgICAgIC8qKlxuICAgICAgICogVG9rZW5pemUgYWxsIGlubGluZSB0ZW1wbGF0aW5nIGV4cHJlc3Npb25zIG1hdGNoaW5nIGBwbGFjZWhvbGRlclBhdHRlcm5gLlxuICAgICAgICpcbiAgICAgICAqIElmIGByZXBsYWNlRmlsdGVyYCBpcyBwcm92aWRlZCwgb25seSBtYXRjaGVzIG9mIGBwbGFjZWhvbGRlclBhdHRlcm5gIGZvciB3aGljaCBgcmVwbGFjZUZpbHRlcmAgcmV0dXJuc1xuICAgICAgICogYHRydWVgIHdpbGwgYmUgcmVwbGFjZWQuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtvYmplY3R9IGVudiBUaGUgZW52aXJvbm1lbnQgb2YgdGhlIGBiZWZvcmUtdG9rZW5pemVgIGhvb2suXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbGFuZ3VhZ2UgVGhlIGxhbmd1YWdlIGlkLlxuICAgICAgICogQHBhcmFtIHtSZWdFeHB9IHBsYWNlaG9sZGVyUGF0dGVybiBUaGUgbWF0Y2hlcyBvZiB0aGlzIHBhdHRlcm4gd2lsbCBiZSByZXBsYWNlZCBieSBwbGFjZWhvbGRlcnMuXG4gICAgICAgKiBAcGFyYW0geyhtYXRjaDogc3RyaW5nKSA9PiBib29sZWFufSBbcmVwbGFjZUZpbHRlcl1cbiAgICAgICAqL1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlbnYsIGxhbmd1YWdlLCBwbGFjZWhvbGRlclBhdHRlcm4sIHJlcGxhY2VGaWx0ZXIpIHtcbiAgICAgICAgaWYgKGVudi5sYW5ndWFnZSAhPT0gbGFuZ3VhZ2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRva2VuU3RhY2sgPSBlbnYudG9rZW5TdGFjayA9IFtdO1xuICAgICAgICBlbnYuY29kZSA9IGVudi5jb2RlLnJlcGxhY2UocGxhY2Vob2xkZXJQYXR0ZXJuLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHJlcGxhY2VGaWx0ZXIgPT09ICdmdW5jdGlvbicgJiYgIXJlcGxhY2VGaWx0ZXIobWF0Y2gpKSB7XG4gICAgICAgICAgICByZXR1cm4gbWF0Y2g7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBpID0gdG9rZW5TdGFjay5sZW5ndGg7XG4gICAgICAgICAgdmFyIHBsYWNlaG9sZGVyO1xuXG4gICAgICAgICAgLy8gQ2hlY2sgZm9yIGV4aXN0aW5nIHN0cmluZ3NcbiAgICAgICAgICB3aGlsZSAoZW52LmNvZGUuaW5kZXhPZihwbGFjZWhvbGRlciA9IGdldFBsYWNlaG9sZGVyKGxhbmd1YWdlLCBpKSkgIT09IC0xKSB7XG4gICAgICAgICAgICArK2k7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQ3JlYXRlIGEgc3BhcnNlIGFycmF5XG4gICAgICAgICAgdG9rZW5TdGFja1tpXSA9IG1hdGNoO1xuICAgICAgICAgIHJldHVybiBwbGFjZWhvbGRlcjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU3dpdGNoIHRoZSBncmFtbWFyIHRvIG1hcmt1cFxuICAgICAgICBlbnYuZ3JhbW1hciA9IFByaXNtLmxhbmd1YWdlcy5tYXJrdXA7XG4gICAgICB9XG4gICAgfSxcbiAgICB0b2tlbml6ZVBsYWNlaG9sZGVyczoge1xuICAgICAgLyoqXG4gICAgICAgKiBSZXBsYWNlIHBsYWNlaG9sZGVycyB3aXRoIHByb3BlciB0b2tlbnMgYWZ0ZXIgdG9rZW5pemluZy5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge29iamVjdH0gZW52IFRoZSBlbnZpcm9ubWVudCBvZiB0aGUgYGFmdGVyLXRva2VuaXplYCBob29rLlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGxhbmd1YWdlIFRoZSBsYW5ndWFnZSBpZC5cbiAgICAgICAqL1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlbnYsIGxhbmd1YWdlKSB7XG4gICAgICAgIGlmIChlbnYubGFuZ3VhZ2UgIT09IGxhbmd1YWdlIHx8ICFlbnYudG9rZW5TdGFjaykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFN3aXRjaCB0aGUgZ3JhbW1hciBiYWNrXG4gICAgICAgIGVudi5ncmFtbWFyID0gUHJpc20ubGFuZ3VhZ2VzW2xhbmd1YWdlXTtcbiAgICAgICAgdmFyIGogPSAwO1xuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGVudi50b2tlblN0YWNrKTtcbiAgICAgICAgZnVuY3Rpb24gd2Fsa1Rva2Vucyh0b2tlbnMpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8gYWxsIHBsYWNlaG9sZGVycyBhcmUgcmVwbGFjZWQgYWxyZWFkeVxuICAgICAgICAgICAgaWYgKGogPj0ga2V5cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdG9rZW4gPSB0b2tlbnNbaV07XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRva2VuID09PSAnc3RyaW5nJyB8fCB0b2tlbi5jb250ZW50ICYmIHR5cGVvZiB0b2tlbi5jb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICB2YXIgayA9IGtleXNbal07XG4gICAgICAgICAgICAgIHZhciB0ID0gZW52LnRva2VuU3RhY2tba107XG4gICAgICAgICAgICAgIHZhciBzID0gdHlwZW9mIHRva2VuID09PSAnc3RyaW5nJyA/IHRva2VuIDogdG9rZW4uY29udGVudDtcbiAgICAgICAgICAgICAgdmFyIHBsYWNlaG9sZGVyID0gZ2V0UGxhY2Vob2xkZXIobGFuZ3VhZ2UsIGspO1xuICAgICAgICAgICAgICB2YXIgaW5kZXggPSBzLmluZGV4T2YocGxhY2Vob2xkZXIpO1xuICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgICsrajtcbiAgICAgICAgICAgICAgICB2YXIgYmVmb3JlID0gcy5zdWJzdHJpbmcoMCwgaW5kZXgpO1xuICAgICAgICAgICAgICAgIHZhciBtaWRkbGUgPSBuZXcgUHJpc20uVG9rZW4obGFuZ3VhZ2UsIFByaXNtLnRva2VuaXplKHQsIGVudi5ncmFtbWFyKSwgJ2xhbmd1YWdlLScgKyBsYW5ndWFnZSwgdCk7XG4gICAgICAgICAgICAgICAgdmFyIGFmdGVyID0gcy5zdWJzdHJpbmcoaW5kZXggKyBwbGFjZWhvbGRlci5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIHZhciByZXBsYWNlbWVudCA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChiZWZvcmUpIHtcbiAgICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50LnB1c2guYXBwbHkocmVwbGFjZW1lbnQsIHdhbGtUb2tlbnMoW2JlZm9yZV0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQucHVzaChtaWRkbGUpO1xuICAgICAgICAgICAgICAgIGlmIChhZnRlcikge1xuICAgICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQucHVzaC5hcHBseShyZXBsYWNlbWVudCwgd2Fsa1Rva2VucyhbYWZ0ZXJdKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdG9rZW4gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICB0b2tlbnMuc3BsaWNlLmFwcGx5KHRva2VucywgW2ksIDFdLmNvbmNhdChyZXBsYWNlbWVudCkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICB0b2tlbi5jb250ZW50ID0gcmVwbGFjZW1lbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRva2VuLmNvbnRlbnQgLyogJiYgdHlwZW9mIHRva2VuLmNvbnRlbnQgIT09ICdzdHJpbmcnICovKSB7XG4gICAgICAgICAgICAgIHdhbGtUb2tlbnModG9rZW4uY29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0b2tlbnM7XG4gICAgICAgIH1cbiAgICAgICAgd2Fsa1Rva2VucyhlbnYudG9rZW5zKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufSkoUHJpc20pO1xuXG4vKipcbiAqIE9yaWdpbmFsIGJ5IEFhcm9uIEhhcnVuOiBodHRwOi8vYWFoYWNyZWF0aXZlLmNvbS8yMDEyLzA3LzMxL3BocC1zeW50YXgtaGlnaGxpZ2h0aW5nLXByaXNtL1xuICogTW9kaWZpZWQgYnkgTWlsZXMgSm9obnNvbjogaHR0cDovL21pbGVzai5tZVxuICogUmV3cml0dGVuIGJ5IFRvbSBQYXZlbGVjXG4gKlxuICogU3VwcG9ydHMgUEhQIDUuMyAtIDguMFxuICovXG4oZnVuY3Rpb24gKFByaXNtKSB7XG4gIHZhciBjb21tZW50ID0gL1xcL1xcKltcXHNcXFNdKj9cXCpcXC98XFwvXFwvLip8Iyg/IVxcWykuKi87XG4gIHZhciBjb25zdGFudCA9IFt7XG4gICAgcGF0dGVybjogL1xcYig/OmZhbHNlfHRydWUpXFxiL2ksXG4gICAgYWxpYXM6ICdib29sZWFuJ1xuICB9LCB7XG4gICAgcGF0dGVybjogLyg6OlxccyopXFxiW2Etel9dXFx3KlxcYig/IVxccypcXCgpL2ksXG4gICAgZ3JlZWR5OiB0cnVlLFxuICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgfSwge1xuICAgIHBhdHRlcm46IC8oXFxiKD86Y2FzZXxjb25zdClcXHMrKVxcYlthLXpfXVxcdyooPz1cXHMqWzs9XSkvaSxcbiAgICBncmVlZHk6IHRydWUsXG4gICAgbG9va2JlaGluZDogdHJ1ZVxuICB9LCAvXFxiKD86bnVsbClcXGIvaSwgL1xcYltBLVpfXVtBLVowLTlfXSpcXGIoPyFcXHMqXFwoKS9dO1xuICB2YXIgbnVtYmVyID0gL1xcYjBiWzAxXSsoPzpfWzAxXSspKlxcYnxcXGIwb1swLTddKyg/Ol9bMC03XSspKlxcYnxcXGIweFtcXGRhLWZdKyg/Ol9bXFxkYS1mXSspKlxcYnwoPzpcXGJcXGQrKD86X1xcZCspKlxcLj8oPzpcXGQrKD86X1xcZCspKik/fFxcQlxcLlxcZCspKD86ZVsrLV0/XFxkKyk/L2k7XG4gIHZhciBvcGVyYXRvciA9IC88Pz0+fFxcP1xcPz0/fFxcLnszfXxcXD8/LT58WyE9XT0/PT98Ojp8XFwqXFwqPT98LS18XFwrXFwrfCYmfFxcfFxcfHw8PHw+PnxbP35dfFsvXnwlKiY8Pi4rLV09Py87XG4gIHZhciBwdW5jdHVhdGlvbiA9IC9be31cXFtcXF0oKSw6O10vO1xuICBQcmlzbS5sYW5ndWFnZXMucGhwID0ge1xuICAgICdkZWxpbWl0ZXInOiB7XG4gICAgICBwYXR0ZXJuOiAvXFw/PiR8XjxcXD8oPzpwaHAoPz1cXHMpfD0pPy9pLFxuICAgICAgYWxpYXM6ICdpbXBvcnRhbnQnXG4gICAgfSxcbiAgICAnY29tbWVudCc6IGNvbW1lbnQsXG4gICAgJ3ZhcmlhYmxlJzogL1xcJCsoPzpcXHcrXFxifCg/PVxceykpLyxcbiAgICAncGFja2FnZSc6IHtcbiAgICAgIHBhdHRlcm46IC8obmFtZXNwYWNlXFxzK3x1c2VcXHMrKD86ZnVuY3Rpb25cXHMrKT8pKD86XFxcXD9cXGJbYS16X11cXHcqKStcXGIoPyFcXFxcKS9pLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAncHVuY3R1YXRpb24nOiAvXFxcXC9cbiAgICAgIH1cbiAgICB9LFxuICAgICdjbGFzcy1uYW1lLWRlZmluaXRpb24nOiB7XG4gICAgICBwYXR0ZXJuOiAvKFxcYig/OmNsYXNzfGVudW18aW50ZXJmYWNlfHRyYWl0KVxccyspXFxiW2Etel9dXFx3Kig/IVxcXFwpXFxiL2ksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgYWxpYXM6ICdjbGFzcy1uYW1lJ1xuICAgIH0sXG4gICAgJ2Z1bmN0aW9uLWRlZmluaXRpb24nOiB7XG4gICAgICBwYXR0ZXJuOiAvKFxcYmZ1bmN0aW9uXFxzKylbYS16X11cXHcqKD89XFxzKlxcKCkvaSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBhbGlhczogJ2Z1bmN0aW9uJ1xuICAgIH0sXG4gICAgJ2tleXdvcmQnOiBbe1xuICAgICAgcGF0dGVybjogLyhcXChcXHMqKVxcYig/OmFycmF5fGJvb2x8Ym9vbGVhbnxmbG9hdHxpbnR8aW50ZWdlcnxvYmplY3R8c3RyaW5nKVxcYig/PVxccypcXCkpL2ksXG4gICAgICBhbGlhczogJ3R5cGUtY2FzdGluZycsXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgfSwge1xuICAgICAgcGF0dGVybjogLyhbKCw/XVxccyopXFxiKD86YXJyYXkoPyFcXHMqXFwoKXxib29sfGNhbGxhYmxlfCg/OmZhbHNlfG51bGwpKD89XFxzKlxcfCl8ZmxvYXR8aW50fGl0ZXJhYmxlfG1peGVkfG9iamVjdHxzZWxmfHN0YXRpY3xzdHJpbmcpXFxiKD89XFxzKlxcJCkvaSxcbiAgICAgIGFsaWFzOiAndHlwZS1oaW50JyxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICB9LCB7XG4gICAgICBwYXR0ZXJuOiAvKFxcKVxccyo6XFxzKig/OlxcP1xccyopPylcXGIoPzphcnJheSg/IVxccypcXCgpfGJvb2x8Y2FsbGFibGV8KD86ZmFsc2V8bnVsbCkoPz1cXHMqXFx8KXxmbG9hdHxpbnR8aXRlcmFibGV8bWl4ZWR8bmV2ZXJ8b2JqZWN0fHNlbGZ8c3RhdGljfHN0cmluZ3x2b2lkKVxcYi9pLFxuICAgICAgYWxpYXM6ICdyZXR1cm4tdHlwZScsXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgfSwge1xuICAgICAgcGF0dGVybjogL1xcYig/OmFycmF5KD8hXFxzKlxcKCl8Ym9vbHxmbG9hdHxpbnR8aXRlcmFibGV8bWl4ZWR8b2JqZWN0fHN0cmluZ3x2b2lkKVxcYi9pLFxuICAgICAgYWxpYXM6ICd0eXBlLWRlY2xhcmF0aW9uJyxcbiAgICAgIGdyZWVkeTogdHJ1ZVxuICAgIH0sIHtcbiAgICAgIHBhdHRlcm46IC8oXFx8XFxzKikoPzpmYWxzZXxudWxsKVxcYnxcXGIoPzpmYWxzZXxudWxsKSg/PVxccypcXHwpL2ksXG4gICAgICBhbGlhczogJ3R5cGUtZGVjbGFyYXRpb24nLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgIH0sIHtcbiAgICAgIHBhdHRlcm46IC9cXGIoPzpwYXJlbnR8c2VsZnxzdGF0aWMpKD89XFxzKjo6KS9pLFxuICAgICAgYWxpYXM6ICdzdGF0aWMtY29udGV4dCcsXG4gICAgICBncmVlZHk6IHRydWVcbiAgICB9LCB7XG4gICAgICAvLyB5aWVsZCBmcm9tXG4gICAgICBwYXR0ZXJuOiAvKFxcYnlpZWxkXFxzKylmcm9tXFxiL2ksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgfSxcbiAgICAvLyBgY2xhc3NgIGlzIGFsd2F5cyBhIGtleXdvcmQgdW5saWtlIG90aGVyIGtleXdvcmRzXG4gICAgL1xcYmNsYXNzXFxiL2ksIHtcbiAgICAgIC8vIGh0dHBzOi8vd3d3LnBocC5uZXQvbWFudWFsL2VuL3Jlc2VydmVkLmtleXdvcmRzLnBocFxuICAgICAgLy9cbiAgICAgIC8vIGtleXdvcmRzIGNhbm5vdCBiZSBwcmVjZWRlZCBieSBcIi0+XCJcbiAgICAgIC8vIHRoZSBjb21wbGV4IGxvb2tiZWhpbmQgbWVhbnMgYCg/PCEoPzotPnw6OilcXHMqKWBcbiAgICAgIHBhdHRlcm46IC8oKD86XnxbXlxccz46XXwoPzpefFteLV0pPnwoPzpefFteOl0pOilcXHMqKVxcYig/OmFic3RyYWN0fGFuZHxhcnJheXxhc3xicmVha3xjYWxsYWJsZXxjYXNlfGNhdGNofGNsb25lfGNvbnN0fGNvbnRpbnVlfGRlY2xhcmV8ZGVmYXVsdHxkaWV8ZG98ZWNob3xlbHNlfGVsc2VpZnxlbXB0eXxlbmRkZWNsYXJlfGVuZGZvcnxlbmRmb3JlYWNofGVuZGlmfGVuZHN3aXRjaHxlbmR3aGlsZXxlbnVtfGV2YWx8ZXhpdHxleHRlbmRzfGZpbmFsfGZpbmFsbHl8Zm58Zm9yfGZvcmVhY2h8ZnVuY3Rpb258Z2xvYmFsfGdvdG98aWZ8aW1wbGVtZW50c3xpbmNsdWRlfGluY2x1ZGVfb25jZXxpbnN0YW5jZW9mfGluc3RlYWRvZnxpbnRlcmZhY2V8aXNzZXR8bGlzdHxtYXRjaHxuYW1lc3BhY2V8bmV2ZXJ8bmV3fG9yfHBhcmVudHxwcmludHxwcml2YXRlfHByb3RlY3RlZHxwdWJsaWN8cmVhZG9ubHl8cmVxdWlyZXxyZXF1aXJlX29uY2V8cmV0dXJufHNlbGZ8c3RhdGljfHN3aXRjaHx0aHJvd3x0cmFpdHx0cnl8dW5zZXR8dXNlfHZhcnx3aGlsZXx4b3J8eWllbGR8X19oYWx0X2NvbXBpbGVyKVxcYi9pLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgIH1dLFxuICAgICdhcmd1bWVudC1uYW1lJzoge1xuICAgICAgcGF0dGVybjogLyhbKCxdXFxzKilcXGJbYS16X11cXHcqKD89XFxzKjooPyE6KSkvaSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICB9LFxuICAgICdjbGFzcy1uYW1lJzogW3tcbiAgICAgIHBhdHRlcm46IC8oXFxiKD86ZXh0ZW5kc3xpbXBsZW1lbnRzfGluc3RhbmNlb2Z8bmV3KD8hXFxzK3NlbGZ8XFxzK3N0YXRpYykpXFxzK3xcXGJjYXRjaFxccypcXCgpXFxiW2Etel9dXFx3Kig/IVxcXFwpXFxiL2ksXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgfSwge1xuICAgICAgcGF0dGVybjogLyhcXHxcXHMqKVxcYlthLXpfXVxcdyooPyFcXFxcKVxcYi9pLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgIH0sIHtcbiAgICAgIHBhdHRlcm46IC9cXGJbYS16X11cXHcqKD8hXFxcXClcXGIoPz1cXHMqXFx8KS9pLFxuICAgICAgZ3JlZWR5OiB0cnVlXG4gICAgfSwge1xuICAgICAgcGF0dGVybjogLyhcXHxcXHMqKSg/OlxcXFw/XFxiW2Etel9dXFx3KikrXFxiL2ksXG4gICAgICBhbGlhczogJ2NsYXNzLW5hbWUtZnVsbHktcXVhbGlmaWVkJyxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ3B1bmN0dWF0aW9uJzogL1xcXFwvXG4gICAgICB9XG4gICAgfSwge1xuICAgICAgcGF0dGVybjogLyg/OlxcXFw/XFxiW2Etel9dXFx3KikrXFxiKD89XFxzKlxcfCkvaSxcbiAgICAgIGFsaWFzOiAnY2xhc3MtbmFtZS1mdWxseS1xdWFsaWZpZWQnLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdwdW5jdHVhdGlvbic6IC9cXFxcL1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIHBhdHRlcm46IC8oXFxiKD86ZXh0ZW5kc3xpbXBsZW1lbnRzfGluc3RhbmNlb2Z8bmV3KD8hXFxzK3NlbGZcXGJ8XFxzK3N0YXRpY1xcYikpXFxzK3xcXGJjYXRjaFxccypcXCgpKD86XFxcXD9cXGJbYS16X11cXHcqKStcXGIoPyFcXFxcKS9pLFxuICAgICAgYWxpYXM6ICdjbGFzcy1uYW1lLWZ1bGx5LXF1YWxpZmllZCcsXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdwdW5jdHVhdGlvbic6IC9cXFxcL1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIHBhdHRlcm46IC9cXGJbYS16X11cXHcqKD89XFxzKlxcJCkvaSxcbiAgICAgIGFsaWFzOiAndHlwZS1kZWNsYXJhdGlvbicsXG4gICAgICBncmVlZHk6IHRydWVcbiAgICB9LCB7XG4gICAgICBwYXR0ZXJuOiAvKD86XFxcXD9cXGJbYS16X11cXHcqKSsoPz1cXHMqXFwkKS9pLFxuICAgICAgYWxpYXM6IFsnY2xhc3MtbmFtZS1mdWxseS1xdWFsaWZpZWQnLCAndHlwZS1kZWNsYXJhdGlvbiddLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdwdW5jdHVhdGlvbic6IC9cXFxcL1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIHBhdHRlcm46IC9cXGJbYS16X11cXHcqKD89XFxzKjo6KS9pLFxuICAgICAgYWxpYXM6ICdzdGF0aWMtY29udGV4dCcsXG4gICAgICBncmVlZHk6IHRydWVcbiAgICB9LCB7XG4gICAgICBwYXR0ZXJuOiAvKD86XFxcXD9cXGJbYS16X11cXHcqKSsoPz1cXHMqOjopL2ksXG4gICAgICBhbGlhczogWydjbGFzcy1uYW1lLWZ1bGx5LXF1YWxpZmllZCcsICdzdGF0aWMtY29udGV4dCddLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdwdW5jdHVhdGlvbic6IC9cXFxcL1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIHBhdHRlcm46IC8oWygsP11cXHMqKVthLXpfXVxcdyooPz1cXHMqXFwkKS9pLFxuICAgICAgYWxpYXM6ICd0eXBlLWhpbnQnLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgIH0sIHtcbiAgICAgIHBhdHRlcm46IC8oWygsP11cXHMqKSg/OlxcXFw/XFxiW2Etel9dXFx3KikrKD89XFxzKlxcJCkvaSxcbiAgICAgIGFsaWFzOiBbJ2NsYXNzLW5hbWUtZnVsbHktcXVhbGlmaWVkJywgJ3R5cGUtaGludCddLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAncHVuY3R1YXRpb24nOiAvXFxcXC9cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBwYXR0ZXJuOiAvKFxcKVxccyo6XFxzKig/OlxcP1xccyopPylcXGJbYS16X11cXHcqKD8hXFxcXClcXGIvaSxcbiAgICAgIGFsaWFzOiAncmV0dXJuLXR5cGUnLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgIH0sIHtcbiAgICAgIHBhdHRlcm46IC8oXFwpXFxzKjpcXHMqKD86XFw/XFxzKik/KSg/OlxcXFw/XFxiW2Etel9dXFx3KikrXFxiKD8hXFxcXCkvaSxcbiAgICAgIGFsaWFzOiBbJ2NsYXNzLW5hbWUtZnVsbHktcXVhbGlmaWVkJywgJ3JldHVybi10eXBlJ10sXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdwdW5jdHVhdGlvbic6IC9cXFxcL1xuICAgICAgfVxuICAgIH1dLFxuICAgICdjb25zdGFudCc6IGNvbnN0YW50LFxuICAgICdmdW5jdGlvbic6IHtcbiAgICAgIHBhdHRlcm46IC8oXnxbXlxcXFxcXHddKVxcXFw/W2Etel9dKD86W1xcd1xcXFxdKlxcdyk/KD89XFxzKlxcKCkvaSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ3B1bmN0dWF0aW9uJzogL1xcXFwvXG4gICAgICB9XG4gICAgfSxcbiAgICAncHJvcGVydHknOiB7XG4gICAgICBwYXR0ZXJuOiAvKC0+XFxzKilcXHcrLyxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICB9LFxuICAgICdudW1iZXInOiBudW1iZXIsXG4gICAgJ29wZXJhdG9yJzogb3BlcmF0b3IsXG4gICAgJ3B1bmN0dWF0aW9uJzogcHVuY3R1YXRpb25cbiAgfTtcbiAgdmFyIHN0cmluZ19pbnRlcnBvbGF0aW9uID0ge1xuICAgIHBhdHRlcm46IC9cXHtcXCQoPzpcXHsoPzpcXHtbXnt9XStcXH18W157fV0rKVxcfXxbXnt9XSkrXFx9fChefFteXFxcXHtdKVxcJCsoPzpcXHcrKD86XFxbW15cXHJcXG5cXFtcXF1dK1xcXXwtPlxcdyspPykvLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgaW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMucGhwXG4gIH07XG4gIHZhciBzdHJpbmcgPSBbe1xuICAgIHBhdHRlcm46IC88PDwnKFteJ10rKSdbXFxyXFxuXSg/Oi4qW1xcclxcbl0pKj9cXDE7LyxcbiAgICBhbGlhczogJ25vd2RvYy1zdHJpbmcnLFxuICAgIGdyZWVkeTogdHJ1ZSxcbiAgICBpbnNpZGU6IHtcbiAgICAgICdkZWxpbWl0ZXInOiB7XG4gICAgICAgIHBhdHRlcm46IC9ePDw8J1teJ10rJ3xbYS16X11cXHcqOyQvaSxcbiAgICAgICAgYWxpYXM6ICdzeW1ib2wnLFxuICAgICAgICBpbnNpZGU6IHtcbiAgICAgICAgICAncHVuY3R1YXRpb24nOiAvXjw8PCc/fFsnO10kL1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAgcGF0dGVybjogLzw8PCg/OlwiKFteXCJdKylcIltcXHJcXG5dKD86LipbXFxyXFxuXSkqP1xcMTt8KFthLXpfXVxcdyopW1xcclxcbl0oPzouKltcXHJcXG5dKSo/XFwyOykvaSxcbiAgICBhbGlhczogJ2hlcmVkb2Mtc3RyaW5nJyxcbiAgICBncmVlZHk6IHRydWUsXG4gICAgaW5zaWRlOiB7XG4gICAgICAnZGVsaW1pdGVyJzoge1xuICAgICAgICBwYXR0ZXJuOiAvXjw8PCg/OlwiW15cIl0rXCJ8W2Etel9dXFx3Kil8W2Etel9dXFx3KjskL2ksXG4gICAgICAgIGFsaWFzOiAnc3ltYm9sJyxcbiAgICAgICAgaW5zaWRlOiB7XG4gICAgICAgICAgJ3B1bmN0dWF0aW9uJzogL148PDxcIj98W1wiO10kL1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgJ2ludGVycG9sYXRpb24nOiBzdHJpbmdfaW50ZXJwb2xhdGlvblxuICAgIH1cbiAgfSwge1xuICAgIHBhdHRlcm46IC9gKD86XFxcXFtcXHNcXFNdfFteXFxcXGBdKSpgLyxcbiAgICBhbGlhczogJ2JhY2t0aWNrLXF1b3RlZC1zdHJpbmcnLFxuICAgIGdyZWVkeTogdHJ1ZVxuICB9LCB7XG4gICAgcGF0dGVybjogLycoPzpcXFxcW1xcc1xcU118W15cXFxcJ10pKicvLFxuICAgIGFsaWFzOiAnc2luZ2xlLXF1b3RlZC1zdHJpbmcnLFxuICAgIGdyZWVkeTogdHJ1ZVxuICB9LCB7XG4gICAgcGF0dGVybjogL1wiKD86XFxcXFtcXHNcXFNdfFteXFxcXFwiXSkqXCIvLFxuICAgIGFsaWFzOiAnZG91YmxlLXF1b3RlZC1zdHJpbmcnLFxuICAgIGdyZWVkeTogdHJ1ZSxcbiAgICBpbnNpZGU6IHtcbiAgICAgICdpbnRlcnBvbGF0aW9uJzogc3RyaW5nX2ludGVycG9sYXRpb25cbiAgICB9XG4gIH1dO1xuICBQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdwaHAnLCAndmFyaWFibGUnLCB7XG4gICAgJ3N0cmluZyc6IHN0cmluZyxcbiAgICAnYXR0cmlidXRlJzoge1xuICAgICAgcGF0dGVybjogLyNcXFsoPzpbXlwiJ1xcLyNdfFxcLyg/IVsqL10pfFxcL1xcLy4qJHwjKD8hXFxbKS4qJHxcXC9cXCooPzpbXipdfFxcKig/IVxcLykpKlxcKlxcL3xcIig/OlxcXFxbXFxzXFxTXXxbXlxcXFxcIl0pKlwifCcoPzpcXFxcW1xcc1xcU118W15cXFxcJ10pKicpK1xcXSg/PVxccypbYS16JCNdKS9pbSxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAnYXR0cmlidXRlLWNvbnRlbnQnOiB7XG4gICAgICAgICAgcGF0dGVybjogL14oI1xcWylbXFxzXFxTXSsoPz1cXF0kKS8sXG4gICAgICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgICAgICAvLyBpbnNpZGUgY2FuIGFwcGVhciBzdWJzZXQgb2YgcGhwXG4gICAgICAgICAgaW5zaWRlOiB7XG4gICAgICAgICAgICAnY29tbWVudCc6IGNvbW1lbnQsXG4gICAgICAgICAgICAnc3RyaW5nJzogc3RyaW5nLFxuICAgICAgICAgICAgJ2F0dHJpYnV0ZS1jbGFzcy1uYW1lJzogW3tcbiAgICAgICAgICAgICAgcGF0dGVybjogLyhbXjpdfF4pXFxiW2Etel9dXFx3Kig/IVxcXFwpXFxiL2ksXG4gICAgICAgICAgICAgIGFsaWFzOiAnY2xhc3MtbmFtZScsXG4gICAgICAgICAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgICAgICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICBwYXR0ZXJuOiAvKFteOl18XikoPzpcXFxcP1xcYlthLXpfXVxcdyopKy9pLFxuICAgICAgICAgICAgICBhbGlhczogWydjbGFzcy1uYW1lJywgJ2NsYXNzLW5hbWUtZnVsbHktcXVhbGlmaWVkJ10sXG4gICAgICAgICAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgICAgICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgICAgICAgICAgaW5zaWRlOiB7XG4gICAgICAgICAgICAgICAgJ3B1bmN0dWF0aW9uJzogL1xcXFwvXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgJ2NvbnN0YW50JzogY29uc3RhbnQsXG4gICAgICAgICAgICAnbnVtYmVyJzogbnVtYmVyLFxuICAgICAgICAgICAgJ29wZXJhdG9yJzogb3BlcmF0b3IsXG4gICAgICAgICAgICAncHVuY3R1YXRpb24nOiBwdW5jdHVhdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ2RlbGltaXRlcic6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvXiNcXFt8XFxdJC8sXG4gICAgICAgICAgYWxpYXM6ICdwdW5jdHVhdGlvbidcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIFByaXNtLmhvb2tzLmFkZCgnYmVmb3JlLXRva2VuaXplJywgZnVuY3Rpb24gKGVudikge1xuICAgIGlmICghLzxcXD8vLnRlc3QoZW52LmNvZGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBwaHBQYXR0ZXJuID0gLzxcXD8oPzpbXlwiJy8jXXxcXC8oPyFbKi9dKXwoXCJ8JykoPzpcXFxcW1xcc1xcU118KD8hXFwxKVteXFxcXF0pKlxcMXwoPzpcXC9cXC98Iyg/IVxcWykpKD86W14/XFxuXFxyXXxcXD8oPyE+KSkqKD89JHxcXD8+fFtcXHJcXG5dKXwjXFxbfFxcL1xcKig/OlteKl18XFwqKD8hXFwvKSkqKD86XFwqXFwvfCQpKSo/KD86XFw/PnwkKS9nO1xuICAgIFByaXNtLmxhbmd1YWdlc1snbWFya3VwLXRlbXBsYXRpbmcnXS5idWlsZFBsYWNlaG9sZGVycyhlbnYsICdwaHAnLCBwaHBQYXR0ZXJuKTtcbiAgfSk7XG4gIFByaXNtLmhvb2tzLmFkZCgnYWZ0ZXItdG9rZW5pemUnLCBmdW5jdGlvbiAoZW52KSB7XG4gICAgUHJpc20ubGFuZ3VhZ2VzWydtYXJrdXAtdGVtcGxhdGluZyddLnRva2VuaXplUGxhY2Vob2xkZXJzKGVudiwgJ3BocCcpO1xuICB9KTtcbn0pKFByaXNtKTtcblByaXNtLmxhbmd1YWdlcy5weXRob24gPSB7XG4gICdjb21tZW50Jzoge1xuICAgIHBhdHRlcm46IC8oXnxbXlxcXFxdKSMuKi8sXG4gICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICBncmVlZHk6IHRydWVcbiAgfSxcbiAgJ3N0cmluZy1pbnRlcnBvbGF0aW9uJzoge1xuICAgIHBhdHRlcm46IC8oPzpmfGZyfHJmKSg/OihcIlwiXCJ8JycnKVtcXHNcXFNdKj9cXDF8KFwifCcpKD86XFxcXC58KD8hXFwyKVteXFxcXFxcclxcbl0pKlxcMikvaSxcbiAgICBncmVlZHk6IHRydWUsXG4gICAgaW5zaWRlOiB7XG4gICAgICAnaW50ZXJwb2xhdGlvbic6IHtcbiAgICAgICAgLy8gXCJ7XCIgPGV4cHJlc3Npb24+IDxvcHRpb25hbCBcIiFzXCIsIFwiIXJcIiwgb3IgXCIhYVwiPiA8b3B0aW9uYWwgXCI6XCIgZm9ybWF0IHNwZWNpZmllcj4gXCJ9XCJcbiAgICAgICAgcGF0dGVybjogLygoPzpefFtee10pKD86XFx7XFx7KSopXFx7KD8hXFx7KSg/Oltee31dfFxceyg/IVxceykoPzpbXnt9XXxcXHsoPyFcXHspKD86W157fV0pK1xcfSkrXFx9KStcXH0vLFxuICAgICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgICBpbnNpZGU6IHtcbiAgICAgICAgICAnZm9ybWF0LXNwZWMnOiB7XG4gICAgICAgICAgICBwYXR0ZXJuOiAvKDopW146KCl7fV0rKD89XFx9JCkvLFxuICAgICAgICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgJ2NvbnZlcnNpb24tb3B0aW9uJzoge1xuICAgICAgICAgICAgcGF0dGVybjogLyFbc3JhXSg/PVs6fV0kKS8sXG4gICAgICAgICAgICBhbGlhczogJ3B1bmN0dWF0aW9uJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVzdDogbnVsbFxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgJ3N0cmluZyc6IC9bXFxzXFxTXSsvXG4gICAgfVxuICB9LFxuICAndHJpcGxlLXF1b3RlZC1zdHJpbmcnOiB7XG4gICAgcGF0dGVybjogLyg/OltydWJdfGJyfHJiKT8oXCJcIlwifCcnJylbXFxzXFxTXSo/XFwxL2ksXG4gICAgZ3JlZWR5OiB0cnVlLFxuICAgIGFsaWFzOiAnc3RyaW5nJ1xuICB9LFxuICAnc3RyaW5nJzoge1xuICAgIHBhdHRlcm46IC8oPzpbcnViXXxicnxyYik/KFwifCcpKD86XFxcXC58KD8hXFwxKVteXFxcXFxcclxcbl0pKlxcMS9pLFxuICAgIGdyZWVkeTogdHJ1ZVxuICB9LFxuICAnZnVuY3Rpb24nOiB7XG4gICAgcGF0dGVybjogLygoPzpefFxccylkZWZbIFxcdF0rKVthLXpBLVpfXVxcdyooPz1cXHMqXFwoKS9nLFxuICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgfSxcbiAgJ2NsYXNzLW5hbWUnOiB7XG4gICAgcGF0dGVybjogLyhcXGJjbGFzc1xccyspXFx3Ky9pLFxuICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgfSxcbiAgJ2RlY29yYXRvcic6IHtcbiAgICBwYXR0ZXJuOiAvKF5bXFx0IF0qKUBcXHcrKD86XFwuXFx3KykqL20sXG4gICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICBhbGlhczogWydhbm5vdGF0aW9uJywgJ3B1bmN0dWF0aW9uJ10sXG4gICAgaW5zaWRlOiB7XG4gICAgICAncHVuY3R1YXRpb24nOiAvXFwuL1xuICAgIH1cbiAgfSxcbiAgJ2tleXdvcmQnOiAvXFxiKD86Xyg/PVxccyo6KXxhbmR8YXN8YXNzZXJ0fGFzeW5jfGF3YWl0fGJyZWFrfGNhc2V8Y2xhc3N8Y29udGludWV8ZGVmfGRlbHxlbGlmfGVsc2V8ZXhjZXB0fGV4ZWN8ZmluYWxseXxmb3J8ZnJvbXxnbG9iYWx8aWZ8aW1wb3J0fGlufGlzfGxhbWJkYXxtYXRjaHxub25sb2NhbHxub3R8b3J8cGFzc3xwcmludHxyYWlzZXxyZXR1cm58dHJ5fHdoaWxlfHdpdGh8eWllbGQpXFxiLyxcbiAgJ2J1aWx0aW4nOiAvXFxiKD86X19pbXBvcnRfX3xhYnN8YWxsfGFueXxhcHBseXxhc2NpaXxiYXNlc3RyaW5nfGJpbnxib29sfGJ1ZmZlcnxieXRlYXJyYXl8Ynl0ZXN8Y2FsbGFibGV8Y2hyfGNsYXNzbWV0aG9kfGNtcHxjb2VyY2V8Y29tcGlsZXxjb21wbGV4fGRlbGF0dHJ8ZGljdHxkaXJ8ZGl2bW9kfGVudW1lcmF0ZXxldmFsfGV4ZWNmaWxlfGZpbGV8ZmlsdGVyfGZsb2F0fGZvcm1hdHxmcm96ZW5zZXR8Z2V0YXR0cnxnbG9iYWxzfGhhc2F0dHJ8aGFzaHxoZWxwfGhleHxpZHxpbnB1dHxpbnR8aW50ZXJufGlzaW5zdGFuY2V8aXNzdWJjbGFzc3xpdGVyfGxlbnxsaXN0fGxvY2Fsc3xsb25nfG1hcHxtYXh8bWVtb3J5dmlld3xtaW58bmV4dHxvYmplY3R8b2N0fG9wZW58b3JkfHBvd3xwcm9wZXJ0eXxyYW5nZXxyYXdfaW5wdXR8cmVkdWNlfHJlbG9hZHxyZXByfHJldmVyc2VkfHJvdW5kfHNldHxzZXRhdHRyfHNsaWNlfHNvcnRlZHxzdGF0aWNtZXRob2R8c3RyfHN1bXxzdXBlcnx0dXBsZXx0eXBlfHVuaWNocnx1bmljb2RlfHZhcnN8eHJhbmdlfHppcClcXGIvLFxuICAnYm9vbGVhbic6IC9cXGIoPzpGYWxzZXxOb25lfFRydWUpXFxiLyxcbiAgJ251bWJlcic6IC9cXGIwKD86Yig/Ol8/WzAxXSkrfG8oPzpfP1swLTddKSt8eCg/Ol8/W2EtZjAtOV0pKylcXGJ8KD86XFxiXFxkKyg/Ol9cXGQrKSooPzpcXC4oPzpcXGQrKD86X1xcZCspKik/KT98XFxCXFwuXFxkKyg/Ol9cXGQrKSopKD86ZVsrLV0/XFxkKyg/Ol9cXGQrKSopP2o/KD8hXFx3KS9pLFxuICAnb3BlcmF0b3InOiAvWy0rJT1dPT98IT18Oj18XFwqXFwqPz0/fFxcL1xcLz89P3w8Wzw9Pl0/fD5bPT5dP3xbJnxefl0vLFxuICAncHVuY3R1YXRpb24nOiAvW3t9W1xcXTsoKSwuOl0vXG59O1xuUHJpc20ubGFuZ3VhZ2VzLnB5dGhvblsnc3RyaW5nLWludGVycG9sYXRpb24nXS5pbnNpZGVbJ2ludGVycG9sYXRpb24nXS5pbnNpZGUucmVzdCA9IFByaXNtLmxhbmd1YWdlcy5weXRob247XG5QcmlzbS5sYW5ndWFnZXMucHkgPSBQcmlzbS5sYW5ndWFnZXMucHl0aG9uO1xuUHJpc20ubGFuZ3VhZ2VzLnIgPSB7XG4gICdjb21tZW50JzogLyMuKi8sXG4gICdzdHJpbmcnOiB7XG4gICAgcGF0dGVybjogLyhbJ1wiXSkoPzpcXFxcLnwoPyFcXDEpW15cXFxcXFxyXFxuXSkqXFwxLyxcbiAgICBncmVlZHk6IHRydWVcbiAgfSxcbiAgJ3BlcmNlbnQtb3BlcmF0b3InOiB7XG4gICAgLy8gSW5jbHVkZXMgdXNlci1kZWZpbmVkIG9wZXJhdG9yc1xuICAgIC8vIGFuZCAlJSwgJSolLCAlLyUsICVpbiUsICVvJSwgJXglXG4gICAgcGF0dGVybjogLyVbXiVcXHNdKiUvLFxuICAgIGFsaWFzOiAnb3BlcmF0b3InXG4gIH0sXG4gICdib29sZWFuJzogL1xcYig/OkZBTFNFfFRSVUUpXFxiLyxcbiAgJ2VsbGlwc2lzJzogL1xcLlxcLig/OlxcLnxcXGQrKS8sXG4gICdudW1iZXInOiBbL1xcYig/OkluZnxOYU4pXFxiLywgLyg/OlxcYjB4W1xcZEEtRmEtZl0rKD86XFwuXFxkKik/fFxcYlxcZCsoPzpcXC5cXGQqKT98XFxCXFwuXFxkKykoPzpbRWVQcF1bKy1dP1xcZCspP1tpTF0/L10sXG4gICdrZXl3b3JkJzogL1xcYig/Ok5BfE5BX2NoYXJhY3Rlcl98TkFfY29tcGxleF98TkFfaW50ZWdlcl98TkFfcmVhbF98TlVMTHxicmVha3xlbHNlfGZvcnxmdW5jdGlvbnxpZnxpbnxuZXh0fHJlcGVhdHx3aGlsZSlcXGIvLFxuICAnb3BlcmF0b3InOiAvLT4/Pj98PCg/Oj18PD8tKT98Wz49IV09P3w6Oj98JiY/fFxcfFxcfD98WysqXFwvXiRAfl0vLFxuICAncHVuY3R1YXRpb24nOiAvWygpe31cXFtcXF0sO10vXG59O1xuXG4vKipcbiAqIE9yaWdpbmFsIGJ5IFNhbXVlbCBGbG9yZXNcbiAqXG4gKiBBZGRzIHRoZSBmb2xsb3dpbmcgbmV3IHRva2VuIGNsYXNzZXM6XG4gKiAgICAgY29uc3RhbnQsIGJ1aWx0aW4sIHZhcmlhYmxlLCBzeW1ib2wsIHJlZ2V4XG4gKi9cbihmdW5jdGlvbiAoUHJpc20pIHtcbiAgUHJpc20ubGFuZ3VhZ2VzLnJ1YnkgPSBQcmlzbS5sYW5ndWFnZXMuZXh0ZW5kKCdjbGlrZScsIHtcbiAgICAnY29tbWVudCc6IHtcbiAgICAgIHBhdHRlcm46IC8jLip8Xj1iZWdpblxcc1tcXHNcXFNdKj9ePWVuZC9tLFxuICAgICAgZ3JlZWR5OiB0cnVlXG4gICAgfSxcbiAgICAnY2xhc3MtbmFtZSc6IHtcbiAgICAgIHBhdHRlcm46IC8oXFxiKD86Y2xhc3N8bW9kdWxlKVxccyt8XFxiY2F0Y2hcXHMrXFwoKVtcXHcuXFxcXF0rfFxcYltBLVpfXVxcdyooPz1cXHMqXFwuXFxzKm5ld1xcYikvLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAncHVuY3R1YXRpb24nOiAvWy5cXFxcXS9cbiAgICAgIH1cbiAgICB9LFxuICAgICdrZXl3b3JkJzogL1xcYig/OkJFR0lOfEVORHxhbGlhc3xhbmR8YmVnaW58YnJlYWt8Y2FzZXxjbGFzc3xkZWZ8ZGVmaW5lX21ldGhvZHxkZWZpbmVkfGRvfGVhY2h8ZWxzZXxlbHNpZnxlbmR8ZW5zdXJlfGV4dGVuZHxmb3J8aWZ8aW58aW5jbHVkZXxtb2R1bGV8bmV3fG5leHR8bmlsfG5vdHxvcnxwcmVwZW5kfHByaXZhdGV8cHJvdGVjdGVkfHB1YmxpY3xyYWlzZXxyZWRvfHJlcXVpcmV8cmVzY3VlfHJldHJ5fHJldHVybnxzZWxmfHN1cGVyfHRoZW58dGhyb3d8dW5kZWZ8dW5sZXNzfHVudGlsfHdoZW58d2hpbGV8eWllbGQpXFxiLyxcbiAgICAnb3BlcmF0b3InOiAvXFwuezIsM318JlxcLnw9PT18PD89PnxbIT1dP358KD86JiZ8XFx8XFx8fDw8fD4+fFxcKlxcKnxbK1xcLSovJTw+IV4mfD1dKT0/fFs/Ol0vLFxuICAgICdwdW5jdHVhdGlvbic6IC9bKCl7fVtcXF0uLDtdL1xuICB9KTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgncnVieScsICdvcGVyYXRvcicsIHtcbiAgICAnZG91YmxlLWNvbG9uJzoge1xuICAgICAgcGF0dGVybjogLzo6LyxcbiAgICAgIGFsaWFzOiAncHVuY3R1YXRpb24nXG4gICAgfVxuICB9KTtcbiAgdmFyIGludGVycG9sYXRpb24gPSB7XG4gICAgcGF0dGVybjogLygoPzpefFteXFxcXF0pKD86XFxcXHsyfSkqKSNcXHsoPzpbXnt9XXxcXHtbXnt9XSpcXH0pKlxcfS8sXG4gICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICBpbnNpZGU6IHtcbiAgICAgICdjb250ZW50Jzoge1xuICAgICAgICBwYXR0ZXJuOiAvXigjXFx7KVtcXHNcXFNdKyg/PVxcfSQpLyxcbiAgICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgICAgaW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMucnVieVxuICAgICAgfSxcbiAgICAgICdkZWxpbWl0ZXInOiB7XG4gICAgICAgIHBhdHRlcm46IC9eI1xce3xcXH0kLyxcbiAgICAgICAgYWxpYXM6ICdwdW5jdHVhdGlvbidcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGRlbGV0ZSBQcmlzbS5sYW5ndWFnZXMucnVieS5mdW5jdGlvbjtcbiAgdmFyIHBlcmNlbnRFeHByZXNzaW9uID0gJyg/OicgKyBbLyhbXmEtekEtWjAtOVxcc3soXFxbPD1dKSg/Oig/IVxcMSlbXlxcXFxdfFxcXFxbXFxzXFxTXSkqXFwxLy5zb3VyY2UsIC9cXCgoPzpbXigpXFxcXF18XFxcXFtcXHNcXFNdfFxcKCg/OlteKClcXFxcXXxcXFxcW1xcc1xcU10pKlxcKSkqXFwpLy5zb3VyY2UsIC9cXHsoPzpbXnt9XFxcXF18XFxcXFtcXHNcXFNdfFxceyg/Oltee31cXFxcXXxcXFxcW1xcc1xcU10pKlxcfSkqXFx9Ly5zb3VyY2UsIC9cXFsoPzpbXlxcW1xcXVxcXFxdfFxcXFxbXFxzXFxTXXxcXFsoPzpbXlxcW1xcXVxcXFxdfFxcXFxbXFxzXFxTXSkqXFxdKSpcXF0vLnNvdXJjZSwgLzwoPzpbXjw+XFxcXF18XFxcXFtcXHNcXFNdfDwoPzpbXjw+XFxcXF18XFxcXFtcXHNcXFNdKSo+KSo+Ly5zb3VyY2VdLmpvaW4oJ3wnKSArICcpJztcbiAgdmFyIHN5bWJvbE5hbWUgPSAvKD86XCIoPzpcXFxcLnxbXlwiXFxcXFxcclxcbl0pKlwifCg/OlxcYlthLXpBLVpfXVxcdyp8W15cXHNcXDAtXFx4N0ZdKylbPyFdP3xcXCQuKS8uc291cmNlO1xuICBQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdydWJ5JywgJ2tleXdvcmQnLCB7XG4gICAgJ3JlZ2V4LWxpdGVyYWwnOiBbe1xuICAgICAgcGF0dGVybjogUmVnRXhwKC8lci8uc291cmNlICsgcGVyY2VudEV4cHJlc3Npb24gKyAvW2VnaW1ub3N1eF17MCw2fS8uc291cmNlKSxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAnaW50ZXJwb2xhdGlvbic6IGludGVycG9sYXRpb24sXG4gICAgICAgICdyZWdleCc6IC9bXFxzXFxTXSsvXG4gICAgICB9XG4gICAgfSwge1xuICAgICAgcGF0dGVybjogLyhefFteL10pXFwvKD8hXFwvKSg/OlxcW1teXFxyXFxuXFxdXStcXF18XFxcXC58W15bL1xcXFxcXHJcXG5dKStcXC9bZWdpbW5vc3V4XXswLDZ9KD89XFxzKig/OiR8W1xcclxcbiwuO30pI10pKS8sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdpbnRlcnBvbGF0aW9uJzogaW50ZXJwb2xhdGlvbixcbiAgICAgICAgJ3JlZ2V4JzogL1tcXHNcXFNdKy9cbiAgICAgIH1cbiAgICB9XSxcbiAgICAndmFyaWFibGUnOiAvW0AkXStbYS16QS1aX11cXHcqKD86Wz8hXXxcXGIpLyxcbiAgICAnc3ltYm9sJzogW3tcbiAgICAgIHBhdHRlcm46IFJlZ0V4cCgvKF58W146XSk6Ly5zb3VyY2UgKyBzeW1ib2xOYW1lKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBncmVlZHk6IHRydWVcbiAgICB9LCB7XG4gICAgICBwYXR0ZXJuOiBSZWdFeHAoLyhbXFxyXFxueygsXVsgXFx0XSopLy5zb3VyY2UgKyBzeW1ib2xOYW1lICsgLyg/PTooPyE6KSkvLnNvdXJjZSksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgZ3JlZWR5OiB0cnVlXG4gICAgfV0sXG4gICAgJ21ldGhvZC1kZWZpbml0aW9uJzoge1xuICAgICAgcGF0dGVybjogLyhcXGJkZWZcXHMrKVxcdysoPzpcXHMqXFwuXFxzKlxcdyspPy8sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdmdW5jdGlvbic6IC9cXGJcXHcrJC8sXG4gICAgICAgICdrZXl3b3JkJzogL15zZWxmXFxiLyxcbiAgICAgICAgJ2NsYXNzLW5hbWUnOiAvXlxcdysvLFxuICAgICAgICAncHVuY3R1YXRpb24nOiAvXFwuL1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ3J1YnknLCAnc3RyaW5nJywge1xuICAgICdzdHJpbmctbGl0ZXJhbCc6IFt7XG4gICAgICBwYXR0ZXJuOiBSZWdFeHAoLyVbcVFpSXdXc10/Ly5zb3VyY2UgKyBwZXJjZW50RXhwcmVzc2lvbiksXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ2ludGVycG9sYXRpb24nOiBpbnRlcnBvbGF0aW9uLFxuICAgICAgICAnc3RyaW5nJzogL1tcXHNcXFNdKy9cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBwYXR0ZXJuOiAvKFwifCcpKD86I1xce1tefV0rXFx9fCMoPyFcXHspfFxcXFwoPzpcXHJcXG58W1xcc1xcU10pfCg/IVxcMSlbXlxcXFwjXFxyXFxuXSkqXFwxLyxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAnaW50ZXJwb2xhdGlvbic6IGludGVycG9sYXRpb24sXG4gICAgICAgICdzdHJpbmcnOiAvW1xcc1xcU10rL1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIHBhdHRlcm46IC88PFstfl0/KFthLXpfXVxcdyopW1xcclxcbl0oPzouKltcXHJcXG5dKSo/W1xcdCBdKlxcMS9pLFxuICAgICAgYWxpYXM6ICdoZXJlZG9jLXN0cmluZycsXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ2RlbGltaXRlcic6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvXjw8Wy1+XT9bYS16X11cXHcqfFxcYlthLXpfXVxcdyokL2ksXG4gICAgICAgICAgaW5zaWRlOiB7XG4gICAgICAgICAgICAnc3ltYm9sJzogL1xcYlxcdysvLFxuICAgICAgICAgICAgJ3B1bmN0dWF0aW9uJzogL148PFstfl0/L1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ2ludGVycG9sYXRpb24nOiBpbnRlcnBvbGF0aW9uLFxuICAgICAgICAnc3RyaW5nJzogL1tcXHNcXFNdKy9cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBwYXR0ZXJuOiAvPDxbLX5dPycoW2Etel9dXFx3KiknW1xcclxcbl0oPzouKltcXHJcXG5dKSo/W1xcdCBdKlxcMS9pLFxuICAgICAgYWxpYXM6ICdoZXJlZG9jLXN0cmluZycsXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ2RlbGltaXRlcic6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvXjw8Wy1+XT8nW2Etel9dXFx3Kid8XFxiW2Etel9dXFx3KiQvaSxcbiAgICAgICAgICBpbnNpZGU6IHtcbiAgICAgICAgICAgICdzeW1ib2wnOiAvXFxiXFx3Ky8sXG4gICAgICAgICAgICAncHVuY3R1YXRpb24nOiAvXjw8Wy1+XT8nfCckL1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ3N0cmluZyc6IC9bXFxzXFxTXSsvXG4gICAgICB9XG4gICAgfV0sXG4gICAgJ2NvbW1hbmQtbGl0ZXJhbCc6IFt7XG4gICAgICBwYXR0ZXJuOiBSZWdFeHAoLyV4Ly5zb3VyY2UgKyBwZXJjZW50RXhwcmVzc2lvbiksXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ2ludGVycG9sYXRpb24nOiBpbnRlcnBvbGF0aW9uLFxuICAgICAgICAnY29tbWFuZCc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvW1xcc1xcU10rLyxcbiAgICAgICAgICBhbGlhczogJ3N0cmluZydcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIHBhdHRlcm46IC9gKD86I1xce1tefV0rXFx9fCMoPyFcXHspfFxcXFwoPzpcXHJcXG58W1xcc1xcU10pfFteXFxcXGAjXFxyXFxuXSkqYC8sXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ2ludGVycG9sYXRpb24nOiBpbnRlcnBvbGF0aW9uLFxuICAgICAgICAnY29tbWFuZCc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvW1xcc1xcU10rLyxcbiAgICAgICAgICBhbGlhczogJ3N0cmluZydcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1dXG4gIH0pO1xuICBkZWxldGUgUHJpc20ubGFuZ3VhZ2VzLnJ1Ynkuc3RyaW5nO1xuICBQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdydWJ5JywgJ251bWJlcicsIHtcbiAgICAnYnVpbHRpbic6IC9cXGIoPzpBcnJheXxCaWdudW18QmluZGluZ3xDbGFzc3xDb250aW51YXRpb258RGlyfEV4Y2VwdGlvbnxGYWxzZUNsYXNzfEZpbGV8Rml4bnVtfEZsb2F0fEhhc2h8SU98SW50ZWdlcnxNYXRjaERhdGF8TWV0aG9kfE1vZHVsZXxOaWxDbGFzc3xOdW1lcmljfE9iamVjdHxQcm9jfFJhbmdlfFJlZ2V4cHxTdGF0fFN0cmluZ3xTdHJ1Y3R8U3ltYm9sfFRNU3xUaHJlYWR8VGhyZWFkR3JvdXB8VGltZXxUcnVlQ2xhc3MpXFxiLyxcbiAgICAnY29uc3RhbnQnOiAvXFxiW0EtWl1bQS1aMC05X10qKD86Wz8hXXxcXGIpL1xuICB9KTtcbiAgUHJpc20ubGFuZ3VhZ2VzLnJiID0gUHJpc20ubGFuZ3VhZ2VzLnJ1Ynk7XG59KShQcmlzbSk7XG4oZnVuY3Rpb24gKFByaXNtKSB7XG4gIHZhciBtdWx0aWxpbmVDb21tZW50ID0gL1xcL1xcKig/OlteKi9dfFxcKig/IVxcLyl8XFwvKD8hXFwqKXw8c2VsZj4pKlxcKlxcLy8uc291cmNlO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IDI7IGkrKykge1xuICAgIC8vIHN1cHBvcnQgNCBsZXZlbHMgb2YgbmVzdGVkIGNvbW1lbnRzXG4gICAgbXVsdGlsaW5lQ29tbWVudCA9IG11bHRpbGluZUNvbW1lbnQucmVwbGFjZSgvPHNlbGY+L2csIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBtdWx0aWxpbmVDb21tZW50O1xuICAgIH0pO1xuICB9XG4gIG11bHRpbGluZUNvbW1lbnQgPSBtdWx0aWxpbmVDb21tZW50LnJlcGxhY2UoLzxzZWxmPi9nLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIC9bXlxcc1xcU10vLnNvdXJjZTtcbiAgfSk7XG4gIFByaXNtLmxhbmd1YWdlcy5ydXN0ID0ge1xuICAgICdjb21tZW50JzogW3tcbiAgICAgIHBhdHRlcm46IFJlZ0V4cCgvKF58W15cXFxcXSkvLnNvdXJjZSArIG11bHRpbGluZUNvbW1lbnQpLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGdyZWVkeTogdHJ1ZVxuICAgIH0sIHtcbiAgICAgIHBhdHRlcm46IC8oXnxbXlxcXFw6XSlcXC9cXC8uKi8sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgZ3JlZWR5OiB0cnVlXG4gICAgfV0sXG4gICAgJ3N0cmluZyc6IHtcbiAgICAgIHBhdHRlcm46IC9iP1wiKD86XFxcXFtcXHNcXFNdfFteXFxcXFwiXSkqXCJ8Yj9yKCMqKVwiKD86W15cIl18XCIoPyFcXDEpKSpcIlxcMS8sXG4gICAgICBncmVlZHk6IHRydWVcbiAgICB9LFxuICAgICdjaGFyJzoge1xuICAgICAgcGF0dGVybjogL2I/Jyg/OlxcXFwoPzp4WzAtN11bXFxkYS1mQS1GXXx1XFx7KD86W1xcZGEtZkEtRl1fKil7MSw2fVxcfXwuKXxbXlxcXFxcXHJcXG5cXHQnXSknLyxcbiAgICAgIGdyZWVkeTogdHJ1ZVxuICAgIH0sXG4gICAgJ2F0dHJpYnV0ZSc6IHtcbiAgICAgIHBhdHRlcm46IC8jIT9cXFsoPzpbXlxcW1xcXVwiXXxcIig/OlxcXFxbXFxzXFxTXXxbXlxcXFxcIl0pKlwiKSpcXF0vLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgYWxpYXM6ICdhdHRyLW5hbWUnLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdzdHJpbmcnOiBudWxsIC8vIHNlZSBiZWxvd1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gQ2xvc3VyZSBwYXJhbXMgc2hvdWxkIG5vdCBiZSBjb25mdXNlZCB3aXRoIGJpdHdpc2UgT1IgfFxuICAgICdjbG9zdXJlLXBhcmFtcyc6IHtcbiAgICAgIHBhdHRlcm46IC8oWz0oLDpdXFxzKnxcXGJtb3ZlXFxzKilcXHxbXnxdKlxcfHxcXHxbXnxdKlxcfCg/PVxccyooPzpcXHt8LT4pKS8sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdjbG9zdXJlLXB1bmN0dWF0aW9uJzoge1xuICAgICAgICAgIHBhdHRlcm46IC9eXFx8fFxcfCQvLFxuICAgICAgICAgIGFsaWFzOiAncHVuY3R1YXRpb24nXG4gICAgICAgIH0sXG4gICAgICAgIHJlc3Q6IG51bGwgLy8gc2VlIGJlbG93XG4gICAgICB9XG4gICAgfSxcbiAgICAnbGlmZXRpbWUtYW5ub3RhdGlvbic6IHtcbiAgICAgIHBhdHRlcm46IC8nXFx3Ky8sXG4gICAgICBhbGlhczogJ3N5bWJvbCdcbiAgICB9LFxuICAgICdmcmFnbWVudC1zcGVjaWZpZXInOiB7XG4gICAgICBwYXR0ZXJuOiAvKFxcJFxcdys6KVthLXpdKy8sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgYWxpYXM6ICdwdW5jdHVhdGlvbidcbiAgICB9LFxuICAgICd2YXJpYWJsZSc6IC9cXCRcXHcrLyxcbiAgICAnZnVuY3Rpb24tZGVmaW5pdGlvbic6IHtcbiAgICAgIHBhdHRlcm46IC8oXFxiZm5cXHMrKVxcdysvLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGFsaWFzOiAnZnVuY3Rpb24nXG4gICAgfSxcbiAgICAndHlwZS1kZWZpbml0aW9uJzoge1xuICAgICAgcGF0dGVybjogLyhcXGIoPzplbnVtfHN0cnVjdHx0cmFpdHx0eXBlfHVuaW9uKVxccyspXFx3Ky8sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgYWxpYXM6ICdjbGFzcy1uYW1lJ1xuICAgIH0sXG4gICAgJ21vZHVsZS1kZWNsYXJhdGlvbic6IFt7XG4gICAgICBwYXR0ZXJuOiAvKFxcYig/OmNyYXRlfG1vZClcXHMrKVthLXpdW2Etel9cXGRdKi8sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgYWxpYXM6ICduYW1lc3BhY2UnXG4gICAgfSwge1xuICAgICAgcGF0dGVybjogLyhcXGIoPzpjcmF0ZXxzZWxmfHN1cGVyKVxccyopOjpcXHMqW2Etel1bYS16X1xcZF0qXFxiKD86XFxzKjo6KD86XFxzKlthLXpdW2Etel9cXGRdKlxccyo6OikqKT8vLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGFsaWFzOiAnbmFtZXNwYWNlJyxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAncHVuY3R1YXRpb24nOiAvOjovXG4gICAgICB9XG4gICAgfV0sXG4gICAgJ2tleXdvcmQnOiBbXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3J1c3QtbGFuZy9yZWZlcmVuY2UvYmxvYi9tYXN0ZXIvc3JjL2tleXdvcmRzLm1kXG4gICAgL1xcYig/OlNlbGZ8YWJzdHJhY3R8YXN8YXN5bmN8YXdhaXR8YmVjb21lfGJveHxicmVha3xjb25zdHxjb250aW51ZXxjcmF0ZXxkb3xkeW58ZWxzZXxlbnVtfGV4dGVybnxmaW5hbHxmbnxmb3J8aWZ8aW1wbHxpbnxsZXR8bG9vcHxtYWNyb3xtYXRjaHxtb2R8bW92ZXxtdXR8b3ZlcnJpZGV8cHJpdnxwdWJ8cmVmfHJldHVybnxzZWxmfHN0YXRpY3xzdHJ1Y3R8c3VwZXJ8dHJhaXR8dHJ5fHR5cGV8dHlwZW9mfHVuaW9ufHVuc2FmZXx1bnNpemVkfHVzZXx2aXJ0dWFsfHdoZXJlfHdoaWxlfHlpZWxkKVxcYi8sXG4gICAgLy8gcHJpbWl0aXZlcyBhbmQgc3RyXG4gICAgLy8gaHR0cHM6Ly9kb2MucnVzdC1sYW5nLm9yZy9zdGFibGUvcnVzdC1ieS1leGFtcGxlL3ByaW1pdGl2ZXMuaHRtbFxuICAgIC9cXGIoPzpib29sfGNoYXJ8Zig/OjMyfDY0KXxbdWldKD86OHwxNnwzMnw2NHwxMjh8c2l6ZSl8c3RyKVxcYi9dLFxuICAgIC8vIGZ1bmN0aW9ucyBjYW4gdGVjaG5pY2FsbHkgc3RhcnQgd2l0aCBhbiB1cHBlci1jYXNlIGxldHRlciwgYnV0IHRoaXMgd2lsbCBpbnRyb2R1Y2UgYSBsb3Qgb2YgZmFsc2UgcG9zaXRpdmVzXG4gICAgLy8gYW5kIFJ1c3QncyBuYW1pbmcgY29udmVudGlvbnMgcmVjb21tZW5kIHNuYWtlX2Nhc2UgYW55d2F5LlxuICAgIC8vIGh0dHBzOi8vZG9jLnJ1c3QtbGFuZy5vcmcvMS4wLjAvc3R5bGUvc3R5bGUvbmFtaW5nL1JFQURNRS5odG1sXG4gICAgJ2Z1bmN0aW9uJzogL1xcYlthLXpfXVxcdyooPz1cXHMqKD86OjpcXHMqPHxcXCgpKS8sXG4gICAgJ21hY3JvJzoge1xuICAgICAgcGF0dGVybjogL1xcYlxcdyshLyxcbiAgICAgIGFsaWFzOiAncHJvcGVydHknXG4gICAgfSxcbiAgICAnY29uc3RhbnQnOiAvXFxiW0EtWl9dW0EtWl9cXGRdK1xcYi8sXG4gICAgJ2NsYXNzLW5hbWUnOiAvXFxiW0EtWl1cXHcqXFxiLyxcbiAgICAnbmFtZXNwYWNlJzoge1xuICAgICAgcGF0dGVybjogLyg/OlxcYlthLXpdW2Etel9cXGRdKlxccyo6OlxccyopKlxcYlthLXpdW2Etel9cXGRdKlxccyo6Oig/IVxccyo8KS8sXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ3B1bmN0dWF0aW9uJzogLzo6L1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gSGV4LCBvY3QsIGJpbiwgZGVjIG51bWJlcnMgd2l0aCB2aXN1YWwgc2VwYXJhdG9ycyBhbmQgdHlwZSBzdWZmaXhcbiAgICAnbnVtYmVyJzogL1xcYig/OjB4W1xcZEEtRmEtZl0oPzpfP1tcXGRBLUZhLWZdKSp8MG9bMC03XSg/Ol8/WzAtN10pKnwwYlswMV0oPzpfP1swMV0pKnwoPzooPzpcXGQoPzpfP1xcZCkqKT9cXC4pP1xcZCg/Ol8/XFxkKSooPzpbRWVdWystXT9cXGQrKT8pKD86Xz8oPzpmMzJ8ZjY0fFtpdV0oPzo4fDE2fDMyfDY0fHNpemUpPykpP1xcYi8sXG4gICAgJ2Jvb2xlYW4nOiAvXFxiKD86ZmFsc2V8dHJ1ZSlcXGIvLFxuICAgICdwdW5jdHVhdGlvbic6IC8tPnxcXC5cXC49fFxcLnsxLDN9fDo6fFt7fVtcXF07KCksOl0vLFxuICAgICdvcGVyYXRvcic6IC9bLSsqXFwvJSFeXT0/fD1bPT5dP3wmWyY9XT98XFx8W3w9XT98PDw/PT98Pj4/PT98W0A/XS9cbiAgfTtcbiAgUHJpc20ubGFuZ3VhZ2VzLnJ1c3RbJ2Nsb3N1cmUtcGFyYW1zJ10uaW5zaWRlLnJlc3QgPSBQcmlzbS5sYW5ndWFnZXMucnVzdDtcbiAgUHJpc20ubGFuZ3VhZ2VzLnJ1c3RbJ2F0dHJpYnV0ZSddLmluc2lkZVsnc3RyaW5nJ10gPSBQcmlzbS5sYW5ndWFnZXMucnVzdFsnc3RyaW5nJ107XG59KShQcmlzbSk7XG4oZnVuY3Rpb24gKFByaXNtKSB7XG4gIFByaXNtLmxhbmd1YWdlcy5zYXNzID0gUHJpc20ubGFuZ3VhZ2VzLmV4dGVuZCgnY3NzJywge1xuICAgIC8vIFNhc3MgY29tbWVudHMgZG9uJ3QgbmVlZCB0byBiZSBjbG9zZWQsIG9ubHkgaW5kZW50ZWRcbiAgICAnY29tbWVudCc6IHtcbiAgICAgIHBhdHRlcm46IC9eKFsgXFx0XSopXFwvW1xcLypdLiooPzooPzpcXHI/XFxufFxccilcXDFbIFxcdF0uKykqL20sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgZ3JlZWR5OiB0cnVlXG4gICAgfVxuICB9KTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnc2FzcycsICdhdHJ1bGUnLCB7XG4gICAgLy8gV2Ugd2FudCB0byBjb25zdW1lIHRoZSB3aG9sZSBsaW5lXG4gICAgJ2F0cnVsZS1saW5lJzoge1xuICAgICAgLy8gSW5jbHVkZXMgc3VwcG9ydCBmb3IgPSBhbmQgKyBzaG9ydGN1dHNcbiAgICAgIHBhdHRlcm46IC9eKD86WyBcXHRdKilbQCs9XS4rL20sXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ2F0cnVsZSc6IC8oPzpAW1xcdy1dK3xbKz1dKS9cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICBkZWxldGUgUHJpc20ubGFuZ3VhZ2VzLnNhc3MuYXRydWxlO1xuICB2YXIgdmFyaWFibGUgPSAvXFwkWy1cXHddK3wjXFx7XFwkWy1cXHddK1xcfS87XG4gIHZhciBvcGVyYXRvciA9IFsvWysqXFwvJV18Wz0hXT18PD0/fD49P3xcXGIoPzphbmR8bm90fG9yKVxcYi8sIHtcbiAgICBwYXR0ZXJuOiAvKFxccyktKD89XFxzKS8sXG4gICAgbG9va2JlaGluZDogdHJ1ZVxuICB9XTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnc2FzcycsICdwcm9wZXJ0eScsIHtcbiAgICAvLyBXZSB3YW50IHRvIGNvbnN1bWUgdGhlIHdob2xlIGxpbmVcbiAgICAndmFyaWFibGUtbGluZSc6IHtcbiAgICAgIHBhdHRlcm46IC9eWyBcXHRdKlxcJC4rL20sXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ3B1bmN0dWF0aW9uJzogLzovLFxuICAgICAgICAndmFyaWFibGUnOiB2YXJpYWJsZSxcbiAgICAgICAgJ29wZXJhdG9yJzogb3BlcmF0b3JcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIFdlIHdhbnQgdG8gY29uc3VtZSB0aGUgd2hvbGUgbGluZVxuICAgICdwcm9wZXJ0eS1saW5lJzoge1xuICAgICAgcGF0dGVybjogL15bIFxcdF0qKD86W146XFxzXSsgKjouKnw6W146XFxzXS4qKS9tLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdwcm9wZXJ0eSc6IFsvW146XFxzXSsoPz1cXHMqOikvLCB7XG4gICAgICAgICAgcGF0dGVybjogLyg6KVteOlxcc10rLyxcbiAgICAgICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgICAgIH1dLFxuICAgICAgICAncHVuY3R1YXRpb24nOiAvOi8sXG4gICAgICAgICd2YXJpYWJsZSc6IHZhcmlhYmxlLFxuICAgICAgICAnb3BlcmF0b3InOiBvcGVyYXRvcixcbiAgICAgICAgJ2ltcG9ydGFudCc6IFByaXNtLmxhbmd1YWdlcy5zYXNzLmltcG9ydGFudFxuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIGRlbGV0ZSBQcmlzbS5sYW5ndWFnZXMuc2Fzcy5wcm9wZXJ0eTtcbiAgZGVsZXRlIFByaXNtLmxhbmd1YWdlcy5zYXNzLmltcG9ydGFudDtcblxuICAvLyBOb3cgdGhhdCB3aG9sZSBsaW5lcyBmb3Igb3RoZXIgcGF0dGVybnMgYXJlIGNvbnN1bWVkLFxuICAvLyB3aGF0J3MgbGVmdCBzaG91bGQgYmUgc2VsZWN0b3JzXG4gIFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ3Nhc3MnLCAncHVuY3R1YXRpb24nLCB7XG4gICAgJ3NlbGVjdG9yJzoge1xuICAgICAgcGF0dGVybjogL14oWyBcXHRdKilcXFMoPzosW14sXFxyXFxuXSt8W14sXFxyXFxuXSopKD86LFteLFxcclxcbl0rKSooPzosKD86XFxyP1xcbnxcXHIpXFwxWyBcXHRdK1xcUyg/OixbXixcXHJcXG5dK3xbXixcXHJcXG5dKikoPzosW14sXFxyXFxuXSspKikqL20sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgZ3JlZWR5OiB0cnVlXG4gICAgfVxuICB9KTtcbn0pKFByaXNtKTtcblByaXNtLmxhbmd1YWdlcy5zY3NzID0gUHJpc20ubGFuZ3VhZ2VzLmV4dGVuZCgnY3NzJywge1xuICAnY29tbWVudCc6IHtcbiAgICBwYXR0ZXJuOiAvKF58W15cXFxcXSkoPzpcXC9cXCpbXFxzXFxTXSo/XFwqXFwvfFxcL1xcLy4qKS8sXG4gICAgbG9va2JlaGluZDogdHJ1ZVxuICB9LFxuICAnYXRydWxlJzoge1xuICAgIHBhdHRlcm46IC9AW1xcdy1dKD86XFwoW14oKV0rXFwpfFteKClcXHNdfFxccysoPyFcXHMpKSo/KD89XFxzK1t7O10pLyxcbiAgICBpbnNpZGU6IHtcbiAgICAgICdydWxlJzogL0BbXFx3LV0rL1xuICAgICAgLy8gU2VlIHJlc3QgYmVsb3dcbiAgICB9XG4gIH0sXG4gIC8vIHVybCwgY29tcGFzc2lmaWVkXG4gICd1cmwnOiAvKD86Wy1hLXpdKy0pP3VybCg/PVxcKCkvaSxcbiAgLy8gQ1NTIHNlbGVjdG9yIHJlZ2V4IGlzIG5vdCBhcHByb3ByaWF0ZSBmb3IgU2Fzc1xuICAvLyBzaW5jZSB0aGVyZSBjYW4gYmUgbG90IG1vcmUgdGhpbmdzICh2YXIsIEAgZGlyZWN0aXZlLCBuZXN0aW5nLi4pXG4gIC8vIGEgc2VsZWN0b3IgbXVzdCBzdGFydCBhdCB0aGUgZW5kIG9mIGEgcHJvcGVydHkgb3IgYWZ0ZXIgYSBicmFjZSAoZW5kIG9mIG90aGVyIHJ1bGVzIG9yIG5lc3RpbmcpXG4gIC8vIGl0IGNhbiBjb250YWluIHNvbWUgY2hhcmFjdGVycyB0aGF0IGFyZW4ndCB1c2VkIGZvciBkZWZpbmluZyBydWxlcyBvciBlbmQgb2Ygc2VsZWN0b3IsICYgKHBhcmVudCBzZWxlY3RvciksIG9yIGludGVycG9sYXRlZCB2YXJpYWJsZVxuICAvLyB0aGUgZW5kIG9mIGEgc2VsZWN0b3IgaXMgZm91bmQgd2hlbiB0aGVyZSBpcyBubyBydWxlcyBpbiBpdCAoIHt9IG9yIHtcXHN9KSBvciBpZiB0aGVyZSBpcyBhIHByb3BlcnR5IChiZWNhdXNlIGFuIGludGVycG9sYXRlZCB2YXJcbiAgLy8gY2FuIFwicGFzc1wiIGFzIGEgc2VsZWN0b3ItIGUuZzogcHJvcGVyI3skZXJ0eX0pXG4gIC8vIHRoaXMgb25lIHdhcyBoYXJkIHRvIGRvLCBzbyBwbGVhc2UgYmUgY2FyZWZ1bCBpZiB5b3UgZWRpdCB0aGlzIG9uZSA6KVxuICAnc2VsZWN0b3InOiB7XG4gICAgLy8gSW5pdGlhbCBsb29rLWFoZWFkIGlzIHVzZWQgdG8gcHJldmVudCBtYXRjaGluZyBvZiBibGFuayBzZWxlY3RvcnNcbiAgICBwYXR0ZXJuOiAvKD89XFxTKVteQDt7fSgpXT8oPzpbXkA7e30oKVxcc118XFxzKyg/IVxccyl8I1xce1xcJFstXFx3XStcXH0pKyg/PVxccypcXHsoPzpcXH18XFxzfFtefV1bXjp7fV0qWzp7XVtefV0pKS8sXG4gICAgaW5zaWRlOiB7XG4gICAgICAncGFyZW50Jzoge1xuICAgICAgICBwYXR0ZXJuOiAvJi8sXG4gICAgICAgIGFsaWFzOiAnaW1wb3J0YW50J1xuICAgICAgfSxcbiAgICAgICdwbGFjZWhvbGRlcic6IC8lWy1cXHddKy8sXG4gICAgICAndmFyaWFibGUnOiAvXFwkWy1cXHddK3wjXFx7XFwkWy1cXHddK1xcfS9cbiAgICB9XG4gIH0sXG4gICdwcm9wZXJ0eSc6IHtcbiAgICBwYXR0ZXJuOiAvKD86Wy1cXHddfFxcJFstXFx3XXwjXFx7XFwkWy1cXHddK1xcfSkrKD89XFxzKjopLyxcbiAgICBpbnNpZGU6IHtcbiAgICAgICd2YXJpYWJsZSc6IC9cXCRbLVxcd10rfCNcXHtcXCRbLVxcd10rXFx9L1xuICAgIH1cbiAgfVxufSk7XG5QcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdzY3NzJywgJ2F0cnVsZScsIHtcbiAgJ2tleXdvcmQnOiBbL0AoPzpjb250ZW50fGRlYnVnfGVhY2h8ZWxzZSg/OiBpZik/fGV4dGVuZHxmb3J8Zm9yd2FyZHxmdW5jdGlvbnxpZnxpbXBvcnR8aW5jbHVkZXxtaXhpbnxyZXR1cm58dXNlfHdhcm58d2hpbGUpXFxiL2ksIHtcbiAgICBwYXR0ZXJuOiAvKCApKD86ZnJvbXx0aHJvdWdoKSg/PSApLyxcbiAgICBsb29rYmVoaW5kOiB0cnVlXG4gIH1dXG59KTtcblByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ3Njc3MnLCAnaW1wb3J0YW50Jywge1xuICAvLyB2YXIgYW5kIGludGVycG9sYXRlZCB2YXJzXG4gICd2YXJpYWJsZSc6IC9cXCRbLVxcd10rfCNcXHtcXCRbLVxcd10rXFx9L1xufSk7XG5QcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdzY3NzJywgJ2Z1bmN0aW9uJywge1xuICAnbW9kdWxlLW1vZGlmaWVyJzoge1xuICAgIHBhdHRlcm46IC9cXGIoPzphc3xoaWRlfHNob3d8d2l0aClcXGIvaSxcbiAgICBhbGlhczogJ2tleXdvcmQnXG4gIH0sXG4gICdwbGFjZWhvbGRlcic6IHtcbiAgICBwYXR0ZXJuOiAvJVstXFx3XSsvLFxuICAgIGFsaWFzOiAnc2VsZWN0b3InXG4gIH0sXG4gICdzdGF0ZW1lbnQnOiB7XG4gICAgcGF0dGVybjogL1xcQiEoPzpkZWZhdWx0fG9wdGlvbmFsKVxcYi9pLFxuICAgIGFsaWFzOiAna2V5d29yZCdcbiAgfSxcbiAgJ2Jvb2xlYW4nOiAvXFxiKD86ZmFsc2V8dHJ1ZSlcXGIvLFxuICAnbnVsbCc6IHtcbiAgICBwYXR0ZXJuOiAvXFxibnVsbFxcYi8sXG4gICAgYWxpYXM6ICdrZXl3b3JkJ1xuICB9LFxuICAnb3BlcmF0b3InOiB7XG4gICAgcGF0dGVybjogLyhcXHMpKD86Wy0rKlxcLyVdfFs9IV09fDw9P3w+PT98YW5kfG5vdHxvcikoPz1cXHMpLyxcbiAgICBsb29rYmVoaW5kOiB0cnVlXG4gIH1cbn0pO1xuUHJpc20ubGFuZ3VhZ2VzLnNjc3NbJ2F0cnVsZSddLmluc2lkZS5yZXN0ID0gUHJpc20ubGFuZ3VhZ2VzLnNjc3M7XG5QcmlzbS5sYW5ndWFnZXMuc3FsID0ge1xuICAnY29tbWVudCc6IHtcbiAgICBwYXR0ZXJuOiAvKF58W15cXFxcXSkoPzpcXC9cXCpbXFxzXFxTXSo/XFwqXFwvfCg/Oi0tfFxcL1xcL3wjKS4qKS8sXG4gICAgbG9va2JlaGluZDogdHJ1ZVxuICB9LFxuICAndmFyaWFibGUnOiBbe1xuICAgIHBhdHRlcm46IC9AKFtcIidgXSkoPzpcXFxcW1xcc1xcU118KD8hXFwxKVteXFxcXF0pK1xcMS8sXG4gICAgZ3JlZWR5OiB0cnVlXG4gIH0sIC9AW1xcdy4kXSsvXSxcbiAgJ3N0cmluZyc6IHtcbiAgICBwYXR0ZXJuOiAvKF58W15AXFxcXF0pKFwifCcpKD86XFxcXFtcXHNcXFNdfCg/IVxcMilbXlxcXFxdfFxcMlxcMikqXFwyLyxcbiAgICBncmVlZHk6IHRydWUsXG4gICAgbG9va2JlaGluZDogdHJ1ZVxuICB9LFxuICAnaWRlbnRpZmllcic6IHtcbiAgICBwYXR0ZXJuOiAvKF58W15AXFxcXF0pYCg/OlxcXFxbXFxzXFxTXXxbXmBcXFxcXXxgYCkqYC8sXG4gICAgZ3JlZWR5OiB0cnVlLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgaW5zaWRlOiB7XG4gICAgICAncHVuY3R1YXRpb24nOiAvXmB8YCQvXG4gICAgfVxuICB9LFxuICAnZnVuY3Rpb24nOiAvXFxiKD86QVZHfENPVU5UfEZJUlNUfEZPUk1BVHxMQVNUfExDQVNFfExFTnxNQVh8TUlEfE1JTnxNT0R8Tk9XfFJPVU5EfFNVTXxVQ0FTRSkoPz1cXHMqXFwoKS9pLFxuICAvLyBTaG91bGQgd2UgaGlnaGxpZ2h0IHVzZXIgZGVmaW5lZCBmdW5jdGlvbnMgdG9vP1xuICAna2V5d29yZCc6IC9cXGIoPzpBQ1RJT058QUREfEFGVEVSfEFMR09SSVRITXxBTEx8QUxURVJ8QU5BTFlaRXxBTll8QVBQTFl8QVN8QVNDfEFVVEhPUklaQVRJT058QVVUT19JTkNSRU1FTlR8QkFDS1VQfEJEQnxCRUdJTnxCRVJLRUxFWURCfEJJR0lOVHxCSU5BUll8QklUfEJMT0J8Qk9PTHxCT09MRUFOfEJSRUFLfEJST1dTRXxCVFJFRXxCVUxLfEJZfENBTEx8Q0FTQ0FERUQ/fENBU0V8Q0hBSU58Q0hBUig/OkFDVEVSfFNFVCk/fENIRUNLKD86UE9JTlQpP3xDTE9TRXxDTFVTVEVSRUR8Q09BTEVTQ0V8Q09MTEFURXxDT0xVTU5TP3xDT01NRU5UfENPTU1JVCg/OlRFRCk/fENPTVBVVEV8Q09OTkVDVHxDT05TSVNURU5UfENPTlNUUkFJTlR8Q09OVEFJTlMoPzpUQUJMRSk/fENPTlRJTlVFfENPTlZFUlR8Q1JFQVRFfENST1NTfENVUlJFTlQoPzpfREFURXxfVElNRXxfVElNRVNUQU1QfF9VU0VSKT98Q1VSU09SfENZQ0xFfERBVEEoPzpCQVNFUz8pP3xEQVRFKD86VElNRSk/fERBWXxEQkNDfERFQUxMT0NBVEV8REVDfERFQ0lNQUx8REVDTEFSRXxERUZBVUxUfERFRklORVJ8REVMQVlFRHxERUxFVEV8REVMSU1JVEVSUz98REVOWXxERVNDfERFU0NSSUJFfERFVEVSTUlOSVNUSUN8RElTQUJMRXxESVNDQVJEfERJU0t8RElTVElOQ1R8RElTVElOQ1RST1d8RElTVFJJQlVURUR8RE98RE9VQkxFfERST1B8RFVNTVl8RFVNUCg/OkZJTEUpP3xEVVBMSUNBVEV8RUxTRSg/OklGKT98RU5BQkxFfEVOQ0xPU0VEfEVORHxFTkdJTkV8RU5VTXxFUlJMVkx8RVJST1JTfEVTQ0FQRUQ/fEVYQ0VQVHxFWEVDKD86VVRFKT98RVhJU1RTfEVYSVR8RVhQTEFJTnxFWFRFTkRFRHxGRVRDSHxGSUVMRFN8RklMRXxGSUxMRkFDVE9SfEZJUlNUfEZJWEVEfEZMT0FUfEZPTExPV0lOR3xGT1IoPzogRUFDSCBST1cpP3xGT1JDRXxGT1JFSUdOfEZSRUVURVhUKD86VEFCTEUpP3xGUk9NfEZVTEx8RlVOQ1RJT058R0VPTUVUUlkoPzpDT0xMRUNUSU9OKT98R0xPQkFMfEdPVE98R1JBTlR8R1JPVVB8SEFORExFUnxIQVNIfEhBVklOR3xIT0xETE9DS3xIT1VSfElERU5USVRZKD86Q09MfF9JTlNFUlQpP3xJRnxJR05PUkV8SU1QT1JUfElOREVYfElORklMRXxJTk5FUnxJTk5PREJ8SU5PVVR8SU5TRVJUfElOVHxJTlRFR0VSfElOVEVSU0VDVHxJTlRFUlZBTHxJTlRPfElOVk9LRVJ8SVNPTEFUSU9OfElURVJBVEV8Sk9JTnxLRVlTP3xLSUxMfExBTkdVQUdFfExBU1R8TEVBVkV8TEVGVHxMRVZFTHxMSU1JVHxMSU5FTk98TElORVN8TElORVNUUklOR3xMT0FEfExPQ0FMfExPQ0t8TE9ORyg/OkJMT0J8VEVYVCl8TE9PUHxNQVRDSCg/OkVEKT98TUVESVVNKD86QkxPQnxJTlR8VEVYVCl8TUVSR0V8TUlERExFSU5UfE1JTlVURXxNT0RFfE1PRElGSUVTfE1PRElGWXxNT05USHxNVUxUSSg/OkxJTkVTVFJJTkd8UE9JTlR8UE9MWUdPTil8TkFUSU9OQUx8TkFUVVJBTHxOQ0hBUnxORVhUfE5PfE5PTkNMVVNURVJFRHxOVUxMSUZ8TlVNRVJJQ3xPRkY/fE9GRlNFVFM/fE9OfE9QRU4oPzpEQVRBU09VUkNFfFFVRVJZfFJPV1NFVCk/fE9QVElNSVpFfE9QVElPTig/OkFMTFkpP3xPUkRFUnxPVVQoPzpFUnxGSUxFKT98T1ZFUnxQQVJUSUFMfFBBUlRJVElPTnxQRVJDRU5UfFBJVk9UfFBMQU58UE9JTlR8UE9MWUdPTnxQUkVDRURJTkd8UFJFQ0lTSU9OfFBSRVBBUkV8UFJFVnxQUklNQVJZfFBSSU5UfFBSSVZJTEVHRVN8UFJPQyg/OkVEVVJFKT98UFVCTElDfFBVUkdFfFFVSUNLfFJBSVNFUlJPUnxSRUFEUz98UkVBTHxSRUNPTkZJR1VSRXxSRUZFUkVOQ0VTfFJFTEVBU0V8UkVOQU1FfFJFUEVBVCg/OkFCTEUpP3xSRVBMQUNFfFJFUExJQ0FUSU9OfFJFUVVJUkV8UkVTSUdOQUx8UkVTVE9SRXxSRVNUUklDVHxSRVRVUk4oPzpJTkd8Uyk/fFJFVk9LRXxSSUdIVHxST0xMQkFDS3xST1VUSU5FfFJPVyg/OkNPVU5UfEdVSURDT0x8Uyk/fFJUUkVFfFJVTEV8U0FWRSg/OlBPSU5UKT98U0NIRU1BfFNFQ09ORHxTRUxFQ1R8U0VSSUFMKD86SVpBQkxFKT98U0VTU0lPTig/Ol9VU0VSKT98U0VUKD86VVNFUik/fFNIQVJFfFNIT1d8U0hVVERPV058U0lNUExFfFNNQUxMSU5UfFNOQVBTSE9UfFNPTUV8U09OQU1FfFNRTHxTVEFSVCg/OklORyk/fFNUQVRJU1RJQ1N8U1RBVFVTfFNUUklQRUR8U1lTVEVNX1VTRVJ8VEFCTEVTP3xUQUJMRVNQQUNFfFRFTVAoPzpPUkFSWXxUQUJMRSk/fFRFUk1JTkFURUR8VEVYVCg/OlNJWkUpP3xUSEVOfFRJTUUoPzpTVEFNUCk/fFRJTlkoPzpCTE9CfElOVHxURVhUKXxUT1A/fFRSQU4oPzpTQUNUSU9OUz8pP3xUUklHR0VSfFRSVU5DQVRFfFRTRVFVQUx8VFlQRVM/fFVOQk9VTkRFRHxVTkNPTU1JVFRFRHxVTkRFRklORUR8VU5JT058VU5JUVVFfFVOTE9DS3xVTlBJVk9UfFVOU0lHTkVEfFVQREFURSg/OlRFWFQpP3xVU0FHRXxVU0V8VVNFUnxVU0lOR3xWQUxVRVM/fFZBUig/OkJJTkFSWXxDSEFSfENIQVJBQ1RFUnxZSU5HKXxWSUVXfFdBSVRGT1J8V0FSTklOR1N8V0hFTnxXSEVSRXxXSElMRXxXSVRIKD86IFJPTExVUHxJTik/fFdPUkt8V1JJVEUoPzpURVhUKT98WUVBUilcXGIvaSxcbiAgJ2Jvb2xlYW4nOiAvXFxiKD86RkFMU0V8TlVMTHxUUlVFKVxcYi9pLFxuICAnbnVtYmVyJzogL1xcYjB4W1xcZGEtZl0rXFxifFxcYlxcZCsoPzpcXC5cXGQqKT98XFxCXFwuXFxkK1xcYi9pLFxuICAnb3BlcmF0b3InOiAvWy0rKlxcLz0lXn5dfCYmP3xcXHxcXHw/fCE9P3w8KD86PT4/fDx8Pik/fD5bPj1dP3xcXGIoPzpBTkR8QkVUV0VFTnxESVZ8SUxJS0V8SU58SVN8TElLRXxOT1R8T1J8UkVHRVhQfFJMSUtFfFNPVU5EUyBMSUtFfFhPUilcXGIvaSxcbiAgJ3B1bmN0dWF0aW9uJzogL1s7W1xcXSgpYCwuXS9cbn07XG5QcmlzbS5sYW5ndWFnZXMuc3dpZnQgPSB7XG4gICdjb21tZW50Jzoge1xuICAgIC8vIE5lc3RlZCBjb21tZW50cyBhcmUgc3VwcG9ydGVkIHVwIHRvIDIgbGV2ZWxzXG4gICAgcGF0dGVybjogLyhefFteXFxcXDpdKSg/OlxcL1xcLy4qfFxcL1xcKig/OlteLypdfFxcLyg/IVxcKil8XFwqKD8hXFwvKXxcXC9cXCooPzpbXipdfFxcKig/IVxcLykpKlxcKlxcLykqXFwqXFwvKS8sXG4gICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICBncmVlZHk6IHRydWVcbiAgfSxcbiAgJ3N0cmluZy1saXRlcmFsJzogW1xuICAvLyBodHRwczovL2RvY3Muc3dpZnQub3JnL3N3aWZ0LWJvb2svTGFuZ3VhZ2VHdWlkZS9TdHJpbmdzQW5kQ2hhcmFjdGVycy5odG1sXG4gIHtcbiAgICBwYXR0ZXJuOiBSZWdFeHAoLyhefFteXCIjXSkvLnNvdXJjZSArICcoPzonXG4gICAgLy8gc2luZ2xlLWxpbmUgc3RyaW5nXG4gICAgKyAvXCIoPzpcXFxcKD86XFwoKD86W14oKV18XFwoW14oKV0qXFwpKSpcXCl8XFxyXFxufFteKF0pfFteXFxcXFxcclxcblwiXSkqXCIvLnNvdXJjZSArICd8J1xuICAgIC8vIG11bHRpLWxpbmUgc3RyaW5nXG4gICAgKyAvXCJcIlwiKD86XFxcXCg/OlxcKCg/OlteKCldfFxcKFteKCldKlxcKSkqXFwpfFteKF0pfFteXFxcXFwiXXxcIig/IVwiXCIpKSpcIlwiXCIvLnNvdXJjZSArICcpJyArIC8oPyFbXCIjXSkvLnNvdXJjZSksXG4gICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICBncmVlZHk6IHRydWUsXG4gICAgaW5zaWRlOiB7XG4gICAgICAnaW50ZXJwb2xhdGlvbic6IHtcbiAgICAgICAgcGF0dGVybjogLyhcXFxcXFwoKSg/OlteKCldfFxcKFteKCldKlxcKSkqKD89XFwpKS8sXG4gICAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICAgIGluc2lkZTogbnVsbCAvLyBzZWUgYmVsb3dcbiAgICAgIH0sXG4gICAgICAnaW50ZXJwb2xhdGlvbi1wdW5jdHVhdGlvbic6IHtcbiAgICAgICAgcGF0dGVybjogL15cXCl8XFxcXFxcKCQvLFxuICAgICAgICBhbGlhczogJ3B1bmN0dWF0aW9uJ1xuICAgICAgfSxcbiAgICAgICdwdW5jdHVhdGlvbic6IC9cXFxcKD89W1xcclxcbl0pLyxcbiAgICAgICdzdHJpbmcnOiAvW1xcc1xcU10rL1xuICAgIH1cbiAgfSwge1xuICAgIHBhdHRlcm46IFJlZ0V4cCgvKF58W15cIiNdKSgjKykvLnNvdXJjZSArICcoPzonXG4gICAgLy8gc2luZ2xlLWxpbmUgc3RyaW5nXG4gICAgKyAvXCIoPzpcXFxcKD86IytcXCgoPzpbXigpXXxcXChbXigpXSpcXCkpKlxcKXxcXHJcXG58W14jXSl8W15cXFxcXFxyXFxuXSkqP1wiLy5zb3VyY2UgKyAnfCdcbiAgICAvLyBtdWx0aS1saW5lIHN0cmluZ1xuICAgICsgL1wiXCJcIig/OlxcXFwoPzojK1xcKCg/OlteKCldfFxcKFteKCldKlxcKSkqXFwpfFteI10pfFteXFxcXF0pKj9cIlwiXCIvLnNvdXJjZSArICcpJyArICdcXFxcMicpLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgZ3JlZWR5OiB0cnVlLFxuICAgIGluc2lkZToge1xuICAgICAgJ2ludGVycG9sYXRpb24nOiB7XG4gICAgICAgIHBhdHRlcm46IC8oXFxcXCMrXFwoKSg/OlteKCldfFxcKFteKCldKlxcKSkqKD89XFwpKS8sXG4gICAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICAgIGluc2lkZTogbnVsbCAvLyBzZWUgYmVsb3dcbiAgICAgIH0sXG4gICAgICAnaW50ZXJwb2xhdGlvbi1wdW5jdHVhdGlvbic6IHtcbiAgICAgICAgcGF0dGVybjogL15cXCl8XFxcXCMrXFwoJC8sXG4gICAgICAgIGFsaWFzOiAncHVuY3R1YXRpb24nXG4gICAgICB9LFxuICAgICAgJ3N0cmluZyc6IC9bXFxzXFxTXSsvXG4gICAgfVxuICB9XSxcbiAgJ2RpcmVjdGl2ZSc6IHtcbiAgICAvLyBkaXJlY3RpdmVzIHdpdGggY29uZGl0aW9uc1xuICAgIHBhdHRlcm46IFJlZ0V4cCgvIy8uc291cmNlICsgJyg/OicgKyAoLyg/OmVsc2VpZnxpZilcXGIvLnNvdXJjZSArICcoPzpbIFxcdF0qJ1xuICAgIC8vIFRoaXMgcmVnZXggaXMgYSBsaXR0bGUgY29tcGxleC4gSXQncyBlcXVpdmFsZW50IHRvIHRoaXM6XG4gICAgLy8gICAoPzohWyBcXHRdKik/KD86XFxiXFx3K1xcYig/OlsgXFx0XSo8cm91bmQ+KT98PHJvdW5kPikoPzpbIFxcdF0qKD86JiZ8XFx8XFx8KSk/XG4gICAgLy8gd2hlcmUgPHJvdW5kPiBpcyBhIGdlbmVyYWwgcGFyZW50aGVzZXMgZXhwcmVzc2lvbi5cbiAgICArIC8oPzohWyBcXHRdKik/KD86XFxiXFx3K1xcYig/OlsgXFx0XSpcXCgoPzpbXigpXXxcXChbXigpXSpcXCkpKlxcKSk/fFxcKCg/OlteKCldfFxcKFteKCldKlxcKSkqXFwpKSg/OlsgXFx0XSooPzomJnxcXHxcXHwpKT8vLnNvdXJjZSArICcpKycpICsgJ3wnICsgLyg/OmVsc2V8ZW5kaWYpXFxiLy5zb3VyY2UgKyAnKScpLFxuICAgIGFsaWFzOiAncHJvcGVydHknLFxuICAgIGluc2lkZToge1xuICAgICAgJ2RpcmVjdGl2ZS1uYW1lJzogL14jXFx3Ky8sXG4gICAgICAnYm9vbGVhbic6IC9cXGIoPzpmYWxzZXx0cnVlKVxcYi8sXG4gICAgICAnbnVtYmVyJzogL1xcYlxcZCsoPzpcXC5cXGQrKSpcXGIvLFxuICAgICAgJ29wZXJhdG9yJzogLyF8JiZ8XFx8XFx8fFs8Pl09Py8sXG4gICAgICAncHVuY3R1YXRpb24nOiAvWygpLF0vXG4gICAgfVxuICB9LFxuICAnbGl0ZXJhbCc6IHtcbiAgICBwYXR0ZXJuOiAvIyg/OmNvbG9yTGl0ZXJhbHxjb2x1bW58ZHNvaGFuZGxlfGZpbGUoPzpJRHxMaXRlcmFsfFBhdGgpP3xmdW5jdGlvbnxpbWFnZUxpdGVyYWx8bGluZSlcXGIvLFxuICAgIGFsaWFzOiAnY29uc3RhbnQnXG4gIH0sXG4gICdvdGhlci1kaXJlY3RpdmUnOiB7XG4gICAgcGF0dGVybjogLyNcXHcrXFxiLyxcbiAgICBhbGlhczogJ3Byb3BlcnR5J1xuICB9LFxuICAnYXR0cmlidXRlJzoge1xuICAgIHBhdHRlcm46IC9AXFx3Ky8sXG4gICAgYWxpYXM6ICdhdHJ1bGUnXG4gIH0sXG4gICdmdW5jdGlvbi1kZWZpbml0aW9uJzoge1xuICAgIHBhdHRlcm46IC8oXFxiZnVuY1xccyspXFx3Ky8sXG4gICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICBhbGlhczogJ2Z1bmN0aW9uJ1xuICB9LFxuICAnbGFiZWwnOiB7XG4gICAgLy8gaHR0cHM6Ly9kb2NzLnN3aWZ0Lm9yZy9zd2lmdC1ib29rL0xhbmd1YWdlR3VpZGUvQ29udHJvbEZsb3cuaHRtbCNJRDE0MVxuICAgIHBhdHRlcm46IC9cXGIoYnJlYWt8Y29udGludWUpXFxzK1xcdyt8XFxiW2EtekEtWl9dXFx3Kig/PVxccyo6XFxzKig/OmZvcnxyZXBlYXR8d2hpbGUpXFxiKS8sXG4gICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICBhbGlhczogJ2ltcG9ydGFudCdcbiAgfSxcbiAgJ2tleXdvcmQnOiAvXFxiKD86QW55fFByb3RvY29sfFNlbGZ8VHlwZXxhY3Rvcnxhc3xhc3NpZ25tZW50fGFzc29jaWF0ZWR0eXBlfGFzc29jaWF0aXZpdHl8YXN5bmN8YXdhaXR8YnJlYWt8Y2FzZXxjYXRjaHxjbGFzc3xjb250aW51ZXxjb252ZW5pZW5jZXxkZWZhdWx0fGRlZmVyfGRlaW5pdHxkaWRTZXR8ZG98ZHluYW1pY3xlbHNlfGVudW18ZXh0ZW5zaW9ufGZhbGx0aHJvdWdofGZpbGVwcml2YXRlfGZpbmFsfGZvcnxmdW5jfGdldHxndWFyZHxoaWdoZXJUaGFufGlmfGltcG9ydHxpbnxpbmRpcmVjdHxpbmZpeHxpbml0fGlub3V0fGludGVybmFsfGlzfGlzb2xhdGVkfGxhenl8bGVmdHxsZXR8bG93ZXJUaGFufG11dGF0aW5nfG5vbmV8bm9uaXNvbGF0ZWR8bm9ubXV0YXRpbmd8b3BlbnxvcGVyYXRvcnxvcHRpb25hbHxvdmVycmlkZXxwb3N0Zml4fHByZWNlZGVuY2Vncm91cHxwcmVmaXh8cHJpdmF0ZXxwcm90b2NvbHxwdWJsaWN8cmVwZWF0fHJlcXVpcmVkfHJldGhyb3dzfHJldHVybnxyaWdodHxzYWZlfHNlbGZ8c2V0fHNvbWV8c3RhdGljfHN0cnVjdHxzdWJzY3JpcHR8c3VwZXJ8c3dpdGNofHRocm93fHRocm93c3x0cnl8dHlwZWFsaWFzfHVub3duZWR8dW5zYWZlfHZhcnx3ZWFrfHdoZXJlfHdoaWxlfHdpbGxTZXQpXFxiLyxcbiAgJ2Jvb2xlYW4nOiAvXFxiKD86ZmFsc2V8dHJ1ZSlcXGIvLFxuICAnbmlsJzoge1xuICAgIHBhdHRlcm46IC9cXGJuaWxcXGIvLFxuICAgIGFsaWFzOiAnY29uc3RhbnQnXG4gIH0sXG4gICdzaG9ydC1hcmd1bWVudCc6IC9cXCRcXGQrXFxiLyxcbiAgJ29taXQnOiB7XG4gICAgcGF0dGVybjogL1xcYl9cXGIvLFxuICAgIGFsaWFzOiAna2V5d29yZCdcbiAgfSxcbiAgJ251bWJlcic6IC9cXGIoPzpbXFxkX10rKD86XFwuW1xcZGVfXSspP3wweFthLWYwLTlfXSsoPzpcXC5bYS1mMC05cF9dKyk/fDBiWzAxX10rfDBvWzAtN19dKylcXGIvaSxcbiAgLy8gQSBjbGFzcyBuYW1lIG11c3Qgc3RhcnQgd2l0aCBhbiB1cHBlci1jYXNlIGxldHRlciBhbmQgYmUgZWl0aGVyIDEgbGV0dGVyIGxvbmcgb3IgY29udGFpbiBhIGxvd2VyLWNhc2UgbGV0dGVyLlxuICAnY2xhc3MtbmFtZSc6IC9cXGJbQS1aXSg/OltBLVpfXFxkXSpbYS16XVxcdyopP1xcYi8sXG4gICdmdW5jdGlvbic6IC9cXGJbYS16X11cXHcqKD89XFxzKlxcKCkvaSxcbiAgJ2NvbnN0YW50JzogL1xcYig/OltBLVpfXXsyLH18a1tBLVpdW0EtWmEtel9dKylcXGIvLFxuICAvLyBPcGVyYXRvcnMgYXJlIGdlbmVyaWMgaW4gU3dpZnQuIERldmVsb3BlcnMgY2FuIGV2ZW4gY3JlYXRlIG5ldyBvcGVyYXRvcnMgKGUuZy4gKysrKS5cbiAgLy8gaHR0cHM6Ly9kb2NzLnN3aWZ0Lm9yZy9zd2lmdC1ib29rL1JlZmVyZW5jZU1hbnVhbC96elN1bW1hcnlPZlRoZUdyYW1tYXIuaHRtbCNJRDQ4MVxuICAvLyBUaGlzIHJlZ2V4IG9ubHkgc3VwcG9ydHMgQVNDSUkgb3BlcmF0b3JzLlxuICAnb3BlcmF0b3InOiAvWy0rKi8lPSE8PiZ8Xn4/XSt8XFwuWy5cXC0rKi8lPSE8PiZ8Xn4/XSsvLFxuICAncHVuY3R1YXRpb24nOiAvW3t9W1xcXSgpOywuOlxcXFxdL1xufTtcblByaXNtLmxhbmd1YWdlcy5zd2lmdFsnc3RyaW5nLWxpdGVyYWwnXS5mb3JFYWNoKGZ1bmN0aW9uIChydWxlKSB7XG4gIHJ1bGUuaW5zaWRlWydpbnRlcnBvbGF0aW9uJ10uaW5zaWRlID0gUHJpc20ubGFuZ3VhZ2VzLnN3aWZ0O1xufSk7XG4oZnVuY3Rpb24gKFByaXNtKSB7XG4gIFByaXNtLmxhbmd1YWdlcy50eXBlc2NyaXB0ID0gUHJpc20ubGFuZ3VhZ2VzLmV4dGVuZCgnamF2YXNjcmlwdCcsIHtcbiAgICAnY2xhc3MtbmFtZSc6IHtcbiAgICAgIHBhdHRlcm46IC8oXFxiKD86Y2xhc3N8ZXh0ZW5kc3xpbXBsZW1lbnRzfGluc3RhbmNlb2Z8aW50ZXJmYWNlfG5ld3x0eXBlKVxccyspKD8ha2V5b2ZcXGIpKD8hXFxzKVtfJGEtekEtWlxceEEwLVxcdUZGRkZdKD86KD8hXFxzKVskXFx3XFx4QTAtXFx1RkZGRl0pKig/Olxccyo8KD86W148Pl18PCg/OltePD5dfDxbXjw+XSo+KSo+KSo+KT8vLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGluc2lkZTogbnVsbCAvLyBzZWUgYmVsb3dcbiAgICB9LFxuICAgICdidWlsdGluJzogL1xcYig/OkFycmF5fEZ1bmN0aW9ufFByb21pc2V8YW55fGJvb2xlYW58Y29uc29sZXxuZXZlcnxudW1iZXJ8c3RyaW5nfHN5bWJvbHx1bmtub3duKVxcYi9cbiAgfSk7XG5cbiAgLy8gVGhlIGtleXdvcmRzIFR5cGVTY3JpcHQgYWRkcyB0byBKYXZhU2NyaXB0XG4gIFByaXNtLmxhbmd1YWdlcy50eXBlc2NyaXB0LmtleXdvcmQucHVzaCgvXFxiKD86YWJzdHJhY3R8ZGVjbGFyZXxpc3xrZXlvZnxyZWFkb25seXxyZXF1aXJlKVxcYi8sXG4gIC8vIGtleXdvcmRzIHRoYXQgaGF2ZSB0byBiZSBmb2xsb3dlZCBieSBhbiBpZGVudGlmaWVyXG4gIC9cXGIoPzphc3NlcnRzfGluZmVyfGludGVyZmFjZXxtb2R1bGV8bmFtZXNwYWNlfHR5cGUpXFxiKD89XFxzKig/Olt7XyRhLXpBLVpcXHhBMC1cXHVGRkZGXXwkKSkvLFxuICAvLyBUaGlzIGlzIGZvciBgaW1wb3J0IHR5cGUgKiwge31gXG4gIC9cXGJ0eXBlXFxiKD89XFxzKig/OltcXHsqXXwkKSkvKTtcblxuICAvLyBkb2Vzbid0IHdvcmsgd2l0aCBUUyBiZWNhdXNlIFRTIGlzIHRvbyBjb21wbGV4XG4gIGRlbGV0ZSBQcmlzbS5sYW5ndWFnZXMudHlwZXNjcmlwdFsncGFyYW1ldGVyJ107XG4gIGRlbGV0ZSBQcmlzbS5sYW5ndWFnZXMudHlwZXNjcmlwdFsnbGl0ZXJhbC1wcm9wZXJ0eSddO1xuXG4gIC8vIGEgdmVyc2lvbiBvZiB0eXBlc2NyaXB0IHNwZWNpZmljYWxseSBmb3IgaGlnaGxpZ2h0aW5nIHR5cGVzXG4gIHZhciB0eXBlSW5zaWRlID0gUHJpc20ubGFuZ3VhZ2VzLmV4dGVuZCgndHlwZXNjcmlwdCcsIHt9KTtcbiAgZGVsZXRlIHR5cGVJbnNpZGVbJ2NsYXNzLW5hbWUnXTtcbiAgUHJpc20ubGFuZ3VhZ2VzLnR5cGVzY3JpcHRbJ2NsYXNzLW5hbWUnXS5pbnNpZGUgPSB0eXBlSW5zaWRlO1xuICBQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCd0eXBlc2NyaXB0JywgJ2Z1bmN0aW9uJywge1xuICAgICdkZWNvcmF0b3InOiB7XG4gICAgICBwYXR0ZXJuOiAvQFskXFx3XFx4QTAtXFx1RkZGRl0rLyxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAnYXQnOiB7XG4gICAgICAgICAgcGF0dGVybjogL15ALyxcbiAgICAgICAgICBhbGlhczogJ29wZXJhdG9yJ1xuICAgICAgICB9LFxuICAgICAgICAnZnVuY3Rpb24nOiAvXltcXHNcXFNdKy9cbiAgICAgIH1cbiAgICB9LFxuICAgICdnZW5lcmljLWZ1bmN0aW9uJzoge1xuICAgICAgLy8gZS5nLiBmb288VCBleHRlbmRzIFwiYmFyXCIgfCBcImJhelwiPiggLi4uXG4gICAgICBwYXR0ZXJuOiAvIz8oPyFcXHMpW18kYS16QS1aXFx4QTAtXFx1RkZGRl0oPzooPyFcXHMpWyRcXHdcXHhBMC1cXHVGRkZGXSkqXFxzKjwoPzpbXjw+XXw8KD86W148Pl18PFtePD5dKj4pKj4pKj4oPz1cXHMqXFwoKS8sXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ2Z1bmN0aW9uJzogL14jPyg/IVxccylbXyRhLXpBLVpcXHhBMC1cXHVGRkZGXSg/Oig/IVxccylbJFxcd1xceEEwLVxcdUZGRkZdKSovLFxuICAgICAgICAnZ2VuZXJpYyc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvPFtcXHNcXFNdKy8sXG4gICAgICAgICAgLy8gZXZlcnl0aGluZyBhZnRlciB0aGUgZmlyc3QgPFxuICAgICAgICAgIGFsaWFzOiAnY2xhc3MtbmFtZScsXG4gICAgICAgICAgaW5zaWRlOiB0eXBlSW5zaWRlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICBQcmlzbS5sYW5ndWFnZXMudHMgPSBQcmlzbS5sYW5ndWFnZXMudHlwZXNjcmlwdDtcbn0pKFByaXNtKTtcbihmdW5jdGlvbiAoUHJpc20pIHtcbiAgdmFyIHR5cGVzY3JpcHQgPSBQcmlzbS51dGlsLmNsb25lKFByaXNtLmxhbmd1YWdlcy50eXBlc2NyaXB0KTtcbiAgUHJpc20ubGFuZ3VhZ2VzLnRzeCA9IFByaXNtLmxhbmd1YWdlcy5leHRlbmQoJ2pzeCcsIHR5cGVzY3JpcHQpO1xuXG4gIC8vIGRvZXNuJ3Qgd29yayB3aXRoIFRTIGJlY2F1c2UgVFMgaXMgdG9vIGNvbXBsZXhcbiAgZGVsZXRlIFByaXNtLmxhbmd1YWdlcy50c3hbJ3BhcmFtZXRlciddO1xuICBkZWxldGUgUHJpc20ubGFuZ3VhZ2VzLnRzeFsnbGl0ZXJhbC1wcm9wZXJ0eSddO1xuXG4gIC8vIFRoaXMgd2lsbCBwcmV2ZW50IGNvbGxpc2lvbnMgYmV0d2VlbiBUU1ggdGFncyBhbmQgVFMgZ2VuZXJpYyB0eXBlcy5cbiAgLy8gSWRlYSBieSBodHRwczovL2dpdGh1Yi5jb20va2FybGhvcmt5XG4gIC8vIERpc2N1c3Npb246IGh0dHBzOi8vZ2l0aHViLmNvbS9QcmlzbUpTL3ByaXNtL2lzc3Vlcy8yNTk0I2lzc3VlY29tbWVudC03MTA2NjY5MjhcbiAgdmFyIHRhZyA9IFByaXNtLmxhbmd1YWdlcy50c3gudGFnO1xuICB0YWcucGF0dGVybiA9IFJlZ0V4cCgvKF58W15cXHckXXwoPz08XFwvKSkvLnNvdXJjZSArICcoPzonICsgdGFnLnBhdHRlcm4uc291cmNlICsgJyknLCB0YWcucGF0dGVybi5mbGFncyk7XG4gIHRhZy5sb29rYmVoaW5kID0gdHJ1ZTtcbn0pKFByaXNtKTtcblByaXNtLmxhbmd1YWdlcy5iYXNpYyA9IHtcbiAgJ2NvbW1lbnQnOiB7XG4gICAgcGF0dGVybjogLyg/OiF8UkVNXFxiKS4rL2ksXG4gICAgaW5zaWRlOiB7XG4gICAgICAna2V5d29yZCc6IC9eUkVNL2lcbiAgICB9XG4gIH0sXG4gICdzdHJpbmcnOiB7XG4gICAgcGF0dGVybjogL1wiKD86XCJcInxbISMkJSYnKCkqLFxcLzo7PD0+P15cXHcgK1xcLS5dKSpcIi8sXG4gICAgZ3JlZWR5OiB0cnVlXG4gIH0sXG4gICdudW1iZXInOiAvKD86XFxiXFxkKyg/OlxcLlxcZCopP3xcXEJcXC5cXGQrKSg/OkVbKy1dP1xcZCspPy9pLFxuICAna2V5d29yZCc6IC9cXGIoPzpBU3xCRUVQfEJMT0FEfEJTQVZFfENBTEwoPzogQUJTT0xVVEUpP3xDQVNFfENIQUlOfENIRElSfENMRUFSfENMT1NFfENMU3xDT018Q09NTU9OfENPTlNUfERBVEF8REVDTEFSRXxERUYoPzogRk58IFNFR3xEQkx8SU5UfExOR3xTTkd8U1RSKXxESU18RE98RE9VQkxFfEVMU0V8RUxTRUlGfEVORHxFTlZJUk9OfEVSQVNFfEVSUk9SfEVYSVR8RklFTER8RklMRVN8Rk9SfEZVTkNUSU9OfEdFVHxHT1NVQnxHT1RPfElGfElOUFVUfElOVEVHRVJ8SU9DVEx8S0VZfEtJTEx8TElORSBJTlBVVHxMT0NBVEV8TE9DS3xMT05HfExPT1B8TFNFVHxNS0RJUnxOQU1FfE5FWFR8T0ZGfE9OKD86IENPTXwgRVJST1J8IEtFWXwgVElNRVIpP3xPUEVOfE9QVElPTiBCQVNFfE9VVHxQT0tFfFBVVHxSRUFEfFJFRElNfFJFTXxSRVNUT1JFfFJFU1VNRXxSRVRVUk58Uk1ESVJ8UlNFVHxSVU58U0VMRUNUIENBU0V8U0hBUkVEfFNIRUxMfFNJTkdMRXxTTEVFUHxTVEFUSUN8U1RFUHxTVE9QfFNUUklOR3xTVUJ8U1dBUHxTWVNURU18VEhFTnxUSU1FUnxUT3xUUk9GRnxUUk9OfFRZUEV8VU5MT0NLfFVOVElMfFVTSU5HfFZJRVcgUFJJTlR8V0FJVHxXRU5EfFdISUxFfFdSSVRFKSg/OlxcJHxcXGIpL2ksXG4gICdmdW5jdGlvbic6IC9cXGIoPzpBQlN8QUNDRVNTfEFDT1N8QU5HTEV8QVJFQXxBUklUSE1FVElDfEFSUkFZfEFTSU58QVNLfEFUfEFUTnxCQVNFfEJFR0lOfEJSRUFLfENBVVNFfENFSUx8Q0hSfENMSVB8Q09MTEFURXxDT0xPUnxDT058Q09TfENPU0h8Q09UfENTQ3xEQVRFfERBVFVNfERFQlVHfERFQ0lNQUx8REVGfERFR3xERUdSRUVTfERFTEVURXxERVR8REVWSUNFfERJU1BMQVl8RE9UfEVMQVBTRUR8RVBTfEVSQVNBQkxFfEVYTElORXxFWFB8RVhURVJOQUx8RVhUWVBFfEZJTEVUWVBFfEZJWEVEfEZQfEdPfEdSQVBIfEhBTkRMRVJ8SUROfElNQUdFfElOfElOVHxJTlRFUk5BTHxJUHxJU3xLRVlFRHxMQk9VTkR8TENBU0V8TEVGVHxMRU58TEVOR1RIfExFVHxMSU5FfExJTkVTfExPR3xMT0cxMHxMT0cyfExUUklNfE1BUkdJTnxNQVR8TUFYfE1BWE5VTXxNSUR8TUlOfE1JU1NJTkd8TU9EfE5BVElWRXxOVUx8TlVNRVJJQ3xPRnxPUFRJT058T1JEfE9SR0FOSVpBVElPTnxPVVRJTnxPVVRQVVR8UEl8UE9JTlR8UE9JTlRFUnxQT0lOVFN8UE9TfFBSSU5UfFBST0dSQU18UFJPTVBUfFJBRHxSQURJQU5TfFJBTkRPTUlaRXxSRUNPUkR8UkVDU0laRXxSRUNUWVBFfFJFTEFUSVZFfFJFTUFJTkRFUnxSRVBFQVR8UkVTVHxSRVRSWXxSRVdSSVRFfFJJR0hUfFJORHxST1VORHxSVFJJTXxTQU1FfFNFQ3xTRUxFQ1R8U0VRVUVOVElBTHxTRVR8U0VUVEVSfFNHTnxTSU58U0lOSHxTSVpFfFNLSVB8U1FSfFNUQU5EQVJEfFNUQVRVU3xTVFJ8U1RSRUFNfFNUWUxFfFRBQnxUQU58VEFOSHxURU1QTEFURXxURVhUfFRIRVJFfFRJTUV8VElNRU9VVHxUUkFDRXxUUkFOU0ZPUk18VFJVTkNBVEV8VUJPVU5EfFVDQVNFfFVTRXxWQUx8VkFSSUFCTEV8VklFV1BPUlR8V0hFTnxXSU5ET1d8V0lUSHxaRVJ8Wk9ORVdJRFRIKSg/OlxcJHxcXGIpL2ksXG4gICdvcGVyYXRvcic6IC88Wz0+XT98Pj0/fFsrXFwtKlxcL149Jl18XFxiKD86QU5EfEVRVnxJTVB8Tk9UfE9SfFhPUilcXGIvaSxcbiAgJ3B1bmN0dWF0aW9uJzogL1ssOzooKV0vXG59O1xuUHJpc20ubGFuZ3VhZ2VzLnZibmV0ID0gUHJpc20ubGFuZ3VhZ2VzLmV4dGVuZCgnYmFzaWMnLCB7XG4gICdjb21tZW50JzogW3tcbiAgICBwYXR0ZXJuOiAvKD86IXxSRU1cXGIpLisvaSxcbiAgICBpbnNpZGU6IHtcbiAgICAgICdrZXl3b3JkJzogL15SRU0vaVxuICAgIH1cbiAgfSwge1xuICAgIHBhdHRlcm46IC8oXnxbXlxcXFw6XSknLiovLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgZ3JlZWR5OiB0cnVlXG4gIH1dLFxuICAnc3RyaW5nJzoge1xuICAgIHBhdHRlcm46IC8oXnxbXlwiXSlcIig/OlwiXCJ8W15cIl0pKlwiKD8hXCIpLyxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGdyZWVkeTogdHJ1ZVxuICB9LFxuICAna2V5d29yZCc6IC8oPzpcXGIoPzpBRERIQU5ETEVSfEFERFJFU1NPRnxBTElBU3xBTkR8QU5EQUxTT3xBU3xCRUVQfEJMT0FEfEJPT0xFQU58QlNBVkV8QllSRUZ8QllURXxCWVZBTHxDQUxMKD86IEFCU09MVVRFKT98Q0FTRXxDQVRDSHxDQk9PTHxDQllURXxDQ0hBUnxDREFURXxDREJMfENERUN8Q0hBSU58Q0hBUnxDSERJUnxDSU5UfENMQVNTfENMRUFSfENMTkd8Q0xPU0V8Q0xTfENPQkp8Q09NfENPTU1PTnxDT05TVHxDT05USU5VRXxDU0JZVEV8Q1NIT1JUfENTTkd8Q1NUUnxDVFlQRXxDVUlOVHxDVUxOR3xDVVNIT1JUfERBVEF8REFURXxERUNJTUFMfERFQ0xBUkV8REVGKD86IEZOfCBTRUd8REJMfElOVHxMTkd8U05HfFNUUil8REVGQVVMVHxERUxFR0FURXxESU18RElSRUNUQ0FTVHxET3xET1VCTEV8RUxTRXxFTFNFSUZ8RU5EfEVOVU18RU5WSVJPTnxFUkFTRXxFUlJPUnxFVkVOVHxFWElUfEZBTFNFfEZJRUxEfEZJTEVTfEZJTkFMTFl8Rk9SKD86IEVBQ0gpP3xGUklFTkR8RlVOQ1RJT058R0VUfEdFVFRZUEV8R0VUWE1MTkFNRVNQQUNFfEdMT0JBTHxHT1NVQnxHT1RPfEhBTkRMRVN8SUZ8SU1QTEVNRU5UU3xJTVBPUlRTfElOfElOSEVSSVRTfElOUFVUfElOVEVHRVJ8SU5URVJGQUNFfElPQ1RMfElTfElTTk9UfEtFWXxLSUxMfExFVHxMSUJ8TElLRXxMSU5FIElOUFVUfExPQ0FURXxMT0NLfExPTkd8TE9PUHxMU0VUfE1FfE1LRElSfE1PRHxNT0RVTEV8TVVTVElOSEVSSVR8TVVTVE9WRVJSSURFfE1ZQkFTRXxNWUNMQVNTfE5BTUV8TkFNRVNQQUNFfE5BUlJPV0lOR3xORVd8TkVYVHxOT1R8Tk9USElOR3xOT1RJTkhFUklUQUJMRXxOT1RPVkVSUklEQUJMRXxPQkpFQ1R8T0Z8T0ZGfE9OKD86IENPTXwgRVJST1J8IEtFWXwgVElNRVIpP3xPUEVOfE9QRVJBVE9SfE9QVElPTig/OiBCQVNFKT98T1BUSU9OQUx8T1J8T1JFTFNFfE9VVHxPVkVSTE9BRFN8T1ZFUlJJREFCTEV8T1ZFUlJJREVTfFBBUkFNQVJSQVl8UEFSVElBTHxQT0tFfFBSSVZBVEV8UFJPUEVSVFl8UFJPVEVDVEVEfFBVQkxJQ3xQVVR8UkFJU0VFVkVOVHxSRUFEfFJFQURPTkxZfFJFRElNfFJFTXxSRU1PVkVIQU5ETEVSfFJFU1RPUkV8UkVTVU1FfFJFVFVSTnxSTURJUnxSU0VUfFJVTnxTQllURXxTRUxFQ1QoPzogQ0FTRSk/fFNFVHxTSEFET1dTfFNIQVJFRHxTSEVMTHxTSE9SVHxTSU5HTEV8U0xFRVB8U1RBVElDfFNURVB8U1RPUHxTVFJJTkd8U1RSVUNUVVJFfFNVQnxTV0FQfFNZTkNMT0NLfFNZU1RFTXxUSEVOfFRIUk9XfFRJTUVSfFRPfFRST0ZGfFRST058VFJVRXxUUll8VFJZQ0FTVHxUWVBFfFRZUEVPRnxVSU5URUdFUnxVTE9OR3xVTkxPQ0t8VU5USUx8VVNIT1JUfFVTSU5HfFZJRVcgUFJJTlR8V0FJVHxXRU5EfFdIRU58V0hJTEV8V0lERU5JTkd8V0lUSHxXSVRIRVZFTlRTfFdSSVRFfFdSSVRFT05MWXxYT1IpfFxcQig/OiNDT05TVHwjRUxTRXwjRUxTRUlGfCNFTkR8I0lGKSkoPzpcXCR8XFxiKS9pLFxuICAncHVuY3R1YXRpb24nOiAvWyw7Oigpe31dL1xufSk7XG5cbmZ1bmN0aW9uIGlzVmFsaWRVUkwodXJsKSB7XG4gIHJldHVybiB1cmwgPT09IHNhbml0aXplVXJsKHVybCk7XG59XG5cbmNvbnN0IGlzTGlua0FjdGl2ZSA9IGVkaXRvciA9PiB7XG4gIHJldHVybiBpc0VsZW1lbnRBY3RpdmUoZWRpdG9yLCAnbGluaycpO1xufTtcbmNvbnN0IHdyYXBMaW5rID0gKGVkaXRvciwgdXJsKSA9PiB7XG4gIGlmIChpc0xpbmtBY3RpdmUoZWRpdG9yKSkge1xuICAgIFRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICBtYXRjaDogbiA9PiBuLnR5cGUgPT09ICdsaW5rJ1xuICAgIH0pO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCB7XG4gICAgc2VsZWN0aW9uXG4gIH0gPSBlZGl0b3I7XG4gIGNvbnN0IGlzQ29sbGFwc2VkID0gc2VsZWN0aW9uICYmIFJhbmdlLmlzQ29sbGFwc2VkKHNlbGVjdGlvbik7XG4gIGlmIChpc0NvbGxhcHNlZCkge1xuICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICB0eXBlOiAnbGluaycsXG4gICAgICBocmVmOiB1cmwsXG4gICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgdGV4dDogdXJsXG4gICAgICB9XVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIFRyYW5zZm9ybXMud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgdHlwZTogJ2xpbmsnLFxuICAgICAgaHJlZjogdXJsLFxuICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgIHRleHQ6ICcnXG4gICAgICB9XVxuICAgIH0sIHtcbiAgICAgIHNwbGl0OiB0cnVlXG4gICAgfSk7XG4gIH1cbn07XG5jb25zdCBMaW5rRWxlbWVudCA9ICh7XG4gIGF0dHJpYnV0ZXMsXG4gIGNoaWxkcmVuLFxuICBlbGVtZW50OiBfX2VsZW1lbnRGb3JHZXR0aW5nUGF0aFxufSkgPT4ge1xuICBjb25zdCBzdHJpbmdGb3JtYXR0ZXIgPSB1c2VMb2NhbGl6ZWRTdHJpbmdGb3JtYXR0ZXIobDEwbk1lc3NhZ2VzKTtcbiAgY29uc3QgZWRpdG9yID0gdXNlU2xhdGVTdGF0aWMoKTtcbiAgY29uc3QgW2N1cnJlbnRFbGVtZW50LCBzZXROb2RlXSA9IHVzZUVsZW1lbnRXaXRoU2V0Tm9kZXMoZWRpdG9yLCBfX2VsZW1lbnRGb3JHZXR0aW5nUGF0aCk7XG4gIGNvbnN0IGhyZWYgPSBjdXJyZW50RWxlbWVudC5ocmVmO1xuICBjb25zdCB0ZXh0ID0gTm9kZS5zdHJpbmcoY3VycmVudEVsZW1lbnQpO1xuICBjb25zdCBbZGlhbG9nT3Blbiwgc2V0RGlhbG9nT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IGFjdGl2ZVBvcG92ZXJFbGVtZW50ID0gdXNlQWN0aXZlQmxvY2tQb3BvdmVyKCk7XG4gIGNvbnN0IHNlbGVjdGVkID0gYWN0aXZlUG9wb3ZlckVsZW1lbnQgPT09IF9fZWxlbWVudEZvckdldHRpbmdQYXRoO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzZWxlY3RlZCAmJiAhaHJlZikge1xuICAgICAgc2V0RGlhbG9nT3Blbih0cnVlKTtcbiAgICB9XG4gIH0sIFtocmVmLCBzZWxlY3RlZF0pO1xuICBjb25zdCB1bmxpbmsgPSB1c2VFdmVudENhbGxiYWNrKCgpID0+IHtcbiAgICBUcmFuc2Zvcm1zLnVud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgYXQ6IFJlYWN0RWRpdG9yLmZpbmRQYXRoKGVkaXRvciwgX19lbGVtZW50Rm9yR2V0dGluZ1BhdGgpXG4gICAgfSk7XG4gICAgUmVhY3RFZGl0b3IuZm9jdXMoZWRpdG9yKTtcbiAgfSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhGcmFnbWVudCwge1xuICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeHMoQmxvY2tQb3BvdmVyVHJpZ2dlciwge1xuICAgICAgZWxlbWVudDogX19lbGVtZW50Rm9yR2V0dGluZ1BhdGgsXG4gICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goXCJhXCIsIHtcbiAgICAgICAgaHJlZjogaHJlZixcbiAgICAgICAgLi4uYXR0cmlidXRlcyxcbiAgICAgICAgY2hpbGRyZW46IGNoaWxkcmVuXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeChCbG9ja1BvcG92ZXIsIHtcbiAgICAgICAgcGxhY2VtZW50OiBcImJvdHRvbSBzdGFydFwiLFxuICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeHMoRmxleCwge1xuICAgICAgICAgIGdhcDogXCJzbWFsbFwiLFxuICAgICAgICAgIHBhZGRpbmc6IFwicmVndWxhclwiLFxuICAgICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeHMoVG9vbHRpcFRyaWdnZXIsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChBY3Rpb25CdXR0b24sIHtcbiAgICAgICAgICAgICAgcHJvbWluZW5jZTogXCJsb3dcIixcbiAgICAgICAgICAgICAgb25QcmVzczogKCkgPT4gc2V0RGlhbG9nT3Blbih0cnVlKSxcbiAgICAgICAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goSWNvbiwge1xuICAgICAgICAgICAgICAgIHNyYzogZWRpdEljb25cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KFRvb2x0aXAsIHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IHN0cmluZ0Zvcm1hdHRlci5mb3JtYXQoJ2VkaXQnKVxuICAgICAgICAgICAgfSldXG4gICAgICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3hzKFRvb2x0aXBUcmlnZ2VyLCB7XG4gICAgICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goQWN0aW9uQnV0dG9uLCB7XG4gICAgICAgICAgICAgIHByb21pbmVuY2U6IFwibG93XCIsXG4gICAgICAgICAgICAgIG9uUHJlc3M6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB3aW5kb3cub3BlbihocmVmLCAnX2JsYW5rJywgJ25vb3BlbmVyLG5vcmVmZXJyZXInKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goSWNvbiwge1xuICAgICAgICAgICAgICAgIHNyYzogZXh0ZXJuYWxMaW5rSWNvblxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goVG9vbHRpcCwge1xuICAgICAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChUZXh0LCB7XG4gICAgICAgICAgICAgICAgdHJ1bmNhdGU6IDMsXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IGhyZWZcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXVxuICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4cyhUb29sdGlwVHJpZ2dlciwge1xuICAgICAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEFjdGlvbkJ1dHRvbiwge1xuICAgICAgICAgICAgICBwcm9taW5lbmNlOiBcImxvd1wiLFxuICAgICAgICAgICAgICBvblByZXNzOiB1bmxpbmssXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KEljb24sIHtcbiAgICAgICAgICAgICAgICBzcmM6IHVubGlua0ljb25cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KFRvb2x0aXAsIHtcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFwiVW5saW5rXCJcbiAgICAgICAgICAgIH0pXVxuICAgICAgICAgIH0pXVxuICAgICAgICB9KVxuICAgICAgfSldXG4gICAgfSksIC8qI19fUFVSRV9fKi9qc3goRGlhbG9nQ29udGFpbmVyLCB7XG4gICAgICBvbkRpc21pc3M6ICgpID0+IHtcbiAgICAgICAgc2V0RGlhbG9nT3BlbihmYWxzZSk7XG4gICAgICAgIGZvY3VzV2l0aFByZXZpb3VzU2VsZWN0aW9uKGVkaXRvcik7XG4gICAgICB9LFxuICAgICAgY2hpbGRyZW46IGRpYWxvZ09wZW4gJiYgLyojX19QVVJFX18qL2pzeChMaW5rRGlhbG9nLCB7XG4gICAgICAgIHRleHQ6IHRleHQsXG4gICAgICAgIGhyZWY6IGhyZWYsXG4gICAgICAgIG9uU3VibWl0OiAoe1xuICAgICAgICAgIGhyZWZcbiAgICAgICAgfSkgPT4ge1xuICAgICAgICAgIHNldE5vZGUoe1xuICAgICAgICAgICAgaHJlZlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pXVxuICB9KTtcbn07XG5mdW5jdGlvbiBMaW5rRGlhbG9nKHtcbiAgb25TdWJtaXQsXG4gIC4uLnByb3BzXG59KSB7XG4gIGxldCBbaHJlZiwgc2V0SHJlZl0gPSB1c2VTdGF0ZShwcm9wcy5ocmVmIHx8ICcnKTtcbiAgbGV0IFt0b3VjaGVkLCBzZXRUb3VjaGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgbGV0IHtcbiAgICBkaXNtaXNzXG4gIH0gPSB1c2VEaWFsb2dDb250YWluZXIoKTtcbiAgbGV0IHN0cmluZ0Zvcm1hdHRlciA9IHVzZUxvY2FsaXplZFN0cmluZ0Zvcm1hdHRlcihsMTBuTWVzc2FnZXMpO1xuICBjb25zdCBzaG93SW52YWxpZFN0YXRlID0gdG91Y2hlZCAmJiAhaXNWYWxpZFVSTChocmVmKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goRGlhbG9nLCB7XG4gICAgc2l6ZTogXCJzbWFsbFwiLFxuICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4cyhcImZvcm1cIiwge1xuICAgICAgc3R5bGU6IHtcbiAgICAgICAgZGlzcGxheTogJ2NvbnRlbnRzJ1xuICAgICAgfSxcbiAgICAgIG9uU3VibWl0OiBldmVudCA9PiB7XG4gICAgICAgIGlmIChldmVudC50YXJnZXQgIT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHJldHVybjtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKCFzaG93SW52YWxpZFN0YXRlKSB7XG4gICAgICAgICAgZGlzbWlzcygpO1xuICAgICAgICAgIG9uU3VibWl0KHtcbiAgICAgICAgICAgIGhyZWZcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeHMoSGVhZGluZywge1xuICAgICAgICBjaGlsZHJlbjogW3Byb3BzLmhyZWYgPyAnRWRpdCcgOiAnQWRkJywgXCIgbGlua1wiXVxuICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goQ29udGVudCwge1xuICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeHMoRmxleCwge1xuICAgICAgICAgIGdhcDogXCJsYXJnZVwiLFxuICAgICAgICAgIGRpcmVjdGlvbjogXCJjb2x1bW5cIixcbiAgICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goVGV4dEZpZWxkLCB7XG4gICAgICAgICAgICBsYWJlbDogXCJUZXh0XCIsXG4gICAgICAgICAgICB2YWx1ZTogcHJvcHMudGV4dCxcbiAgICAgICAgICAgIGlzUmVhZE9ubHk6IHRydWVcbiAgICAgICAgICB9KSwgLyojX19QVVJFX18qL2pzeChUZXh0RmllbGQsIHtcbiAgICAgICAgICAgIGF1dG9Gb2N1czogdHJ1ZSxcbiAgICAgICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICBvbkJsdXI6ICgpID0+IHNldFRvdWNoZWQodHJ1ZSksXG4gICAgICAgICAgICBsYWJlbDogXCJMaW5rXCIsXG4gICAgICAgICAgICBvbkNoYW5nZTogc2V0SHJlZixcbiAgICAgICAgICAgIHZhbHVlOiBocmVmLFxuICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiBzaG93SW52YWxpZFN0YXRlICYmICdQbGVhc2UgcHJvdmlkZSBhIHZhbGlkIFVSTC4nXG4gICAgICAgICAgfSldXG4gICAgICAgIH0pXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeHMoQnV0dG9uR3JvdXAsIHtcbiAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEJ1dHRvbiwge1xuICAgICAgICAgIG9uUHJlc3M6IGRpc21pc3MsXG4gICAgICAgICAgY2hpbGRyZW46IHN0cmluZ0Zvcm1hdHRlci5mb3JtYXQoJ2NhbmNlbCcpXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KEJ1dHRvbiwge1xuICAgICAgICAgIHByb21pbmVuY2U6IFwiaGlnaFwiLFxuICAgICAgICAgIHR5cGU6IFwic3VibWl0XCIsXG4gICAgICAgICAgY2hpbGRyZW46IHN0cmluZ0Zvcm1hdHRlci5mb3JtYXQoJ3NhdmUnKVxuICAgICAgICB9KV1cbiAgICAgIH0pXVxuICAgIH0pXG4gIH0pO1xufVxubGV0IF9saW5rSWNvbiA9IC8qI19fUFVSRV9fKi9qc3goSWNvbiwge1xuICBzcmM6IGxpbmtJY29uXG59KTtcbmZ1bmN0aW9uIExpbmtCdXR0b24oKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0b3IsXG4gICAgbGlua3M6IHtcbiAgICAgIGlzRGlzYWJsZWQsXG4gICAgICBpc1NlbGVjdGVkXG4gICAgfVxuICB9ID0gdXNlVG9vbGJhclN0YXRlKCk7XG4gIHJldHVybiB1c2VNZW1vKCgpID0+IC8qI19fUFVSRV9fKi9qc3goQWN0aW9uQnV0dG9uLCB7XG4gICAgcHJvbWluZW5jZTogXCJsb3dcIixcbiAgICBpc0Rpc2FibGVkOiBpc0Rpc2FibGVkLFxuICAgIGlzU2VsZWN0ZWQ6IGlzU2VsZWN0ZWQsXG4gICAgb25QcmVzczogKCkgPT4ge1xuICAgICAgd3JhcExpbmsoZWRpdG9yLCAnJyk7XG4gICAgICBSZWFjdEVkaXRvci5mb2N1cyhlZGl0b3IpO1xuICAgIH0sXG4gICAgY2hpbGRyZW46IF9saW5rSWNvblxuICB9KSwgW2lzU2VsZWN0ZWQsIGlzRGlzYWJsZWQsIGVkaXRvcl0pO1xufVxuY29uc3QgbGlua0J1dHRvbiA9IC8qI19fUFVSRV9fKi9qc3hzKFRvb2x0aXBUcmlnZ2VyLCB7XG4gIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChMaW5rQnV0dG9uLCB7fSksIC8qI19fUFVSRV9fKi9qc3goVG9vbHRpcCwge1xuICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgIGNoaWxkcmVuOiBcIkxpbmtcIlxuICAgIH0pXG4gIH0pXVxufSk7XG5cbmNvbnN0IHZhbHVlcyA9IHtcbiAgc3RhcnQ6IHtcbiAgICBrZXk6ICdzdGFydCcsXG4gICAgbGFiZWw6ICdBbGlnbiBTdGFydCcsXG4gICAgaWNvbjogLyojX19QVVJFX18qL2pzeChJY29uLCB7XG4gICAgICBzcmM6IGFsaWduTGVmdEljb25cbiAgICB9KVxuICB9LFxuICBjZW50ZXI6IHtcbiAgICBrZXk6ICdjZW50ZXInLFxuICAgIGxhYmVsOiAnQWxpZ24gQ2VudGVyJyxcbiAgICBpY29uOiAvKiNfX1BVUkVfXyovanN4KEljb24sIHtcbiAgICAgIHNyYzogYWxpZ25DZW50ZXJJY29uXG4gICAgfSlcbiAgfSxcbiAgZW5kOiB7XG4gICAga2V5OiAnZW5kJyxcbiAgICBsYWJlbDogJ0FsaWduIEVuZCcsXG4gICAgaWNvbjogLyojX19QVVJFX18qL2pzeChJY29uLCB7XG4gICAgICBzcmM6IGFsaWduUmlnaHRJY29uXG4gICAgfSlcbiAgfVxufTtcbmNvbnN0IFRleHRBbGlnbk1lbnUgPSAoe1xuICBhbGlnbm1lbnRcbn0pID0+IHtcbiAgY29uc3QgdG9vbGJhclN0YXRlID0gdXNlVG9vbGJhclN0YXRlKCk7XG4gIGNvbnN0IGl0ZW1zID0gdXNlTWVtbygoKSA9PiBbdmFsdWVzLnN0YXJ0LCAuLi5PYmplY3Qua2V5cyhhbGlnbm1lbnQpLm1hcCh4ID0+IHZhbHVlc1t4XSldLCBbYWxpZ25tZW50XSk7XG4gIHJldHVybiB1c2VNZW1vKCgpID0+IC8qI19fUFVSRV9fKi9qc3hzKE1lbnVUcmlnZ2VyLCB7XG4gICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4cyhUb29sdGlwVHJpZ2dlciwge1xuICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4cyhBY3Rpb25CdXR0b24sIHtcbiAgICAgICAgcHJvbWluZW5jZTogXCJsb3dcIixcbiAgICAgICAgY2hpbGRyZW46IFt2YWx1ZXNbdG9vbGJhclN0YXRlLmFsaWdubWVudC5zZWxlY3RlZF0uaWNvbiwgLyojX19QVVJFX18qL2pzeChJY29uLCB7XG4gICAgICAgICAgc3JjOiBjaGV2cm9uRG93bkljb25cbiAgICAgICAgfSldXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeChUb29sdGlwLCB7XG4gICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgICAgICBjaGlsZHJlbjogXCJUZXh0IEFsaWdubWVudFwiXG4gICAgICAgIH0pXG4gICAgICB9KV1cbiAgICB9KSwgLyojX19QVVJFX18qL2pzeChNZW51LCB7XG4gICAgICBzZWxlY3Rpb25Nb2RlOiBcInNpbmdsZVwiLFxuICAgICAgc2VsZWN0ZWRLZXlzOiBbdG9vbGJhclN0YXRlLmFsaWdubWVudC5zZWxlY3RlZF0sXG4gICAgICBpdGVtczogaXRlbXMsXG4gICAgICBvbkFjdGlvbjoga2V5ID0+IHtcbiAgICAgICAgaWYgKGtleSA9PT0gJ3N0YXJ0Jykge1xuICAgICAgICAgIFRyYW5zZm9ybXMudW5zZXROb2Rlcyh0b29sYmFyU3RhdGUuZWRpdG9yLCAndGV4dEFsaWduJywge1xuICAgICAgICAgICAgbWF0Y2g6IG5vZGUgPT4gbm9kZS50eXBlID09PSAncGFyYWdyYXBoJyB8fCBub2RlLnR5cGUgPT09ICdoZWFkaW5nJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXModG9vbGJhclN0YXRlLmVkaXRvciwge1xuICAgICAgICAgICAgdGV4dEFsaWduOiBrZXlcbiAgICAgICAgICB9LCB7XG4gICAgICAgICAgICBtYXRjaDogbm9kZSA9PiBub2RlLnR5cGUgPT09ICdwYXJhZ3JhcGgnIHx8IG5vZGUudHlwZSA9PT0gJ2hlYWRpbmcnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgUmVhY3RFZGl0b3IuZm9jdXModG9vbGJhclN0YXRlLmVkaXRvcik7XG4gICAgICB9LFxuICAgICAgY2hpbGRyZW46IGl0ZW0gPT4ge1xuICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeHMoSXRlbSQzLCB7XG4gICAgICAgICAgdGV4dFZhbHVlOiBpdGVtLmxhYmVsLFxuICAgICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChUZXh0LCB7XG4gICAgICAgICAgICBjaGlsZHJlbjogaXRlbS5sYWJlbFxuICAgICAgICAgIH0pLCBpdGVtLmljb25dXG4gICAgICAgIH0sIGl0ZW0ua2V5KTtcbiAgICAgIH1cbiAgICB9KV1cbiAgfSksIFtpdGVtcywgdG9vbGJhclN0YXRlLmFsaWdubWVudC5zZWxlY3RlZCwgdG9vbGJhclN0YXRlLmVkaXRvcl0pO1xufTtcblxuY29uc3QgaW5zZXJ0QmxvY2txdW90ZSA9IGVkaXRvciA9PiB7XG4gIGNvbnN0IGlzQWN0aXZlID0gaXNFbGVtZW50QWN0aXZlKGVkaXRvciwgJ2Jsb2NrcXVvdGUnKTtcbiAgaWYgKGlzQWN0aXZlKSB7XG4gICAgVHJhbnNmb3Jtcy51bndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgIG1hdGNoOiBub2RlID0+IG5vZGUudHlwZSA9PT0gJ2Jsb2NrcXVvdGUnXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgVHJhbnNmb3Jtcy53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICB0eXBlOiAnYmxvY2txdW90ZScsXG4gICAgICBjaGlsZHJlbjogW11cbiAgICB9KTtcbiAgfVxufTtcbmNvbnN0IEJsb2NrcXVvdGVCdXR0b24gPSAoKSA9PiB7XG4gIGNvbnN0IHtcbiAgICBlZGl0b3IsXG4gICAgYmxvY2txdW90ZToge1xuICAgICAgaXNEaXNhYmxlZCxcbiAgICAgIGlzU2VsZWN0ZWRcbiAgICB9XG4gIH0gPSB1c2VUb29sYmFyU3RhdGUoKTtcbiAgcmV0dXJuIHVzZU1lbW8oKCkgPT4gLyojX19QVVJFX18qL2pzeChBY3Rpb25CdXR0b24sIHtcbiAgICBwcm9taW5lbmNlOiBcImxvd1wiLFxuICAgIGlzU2VsZWN0ZWQ6IGlzU2VsZWN0ZWQsXG4gICAgaXNEaXNhYmxlZDogaXNEaXNhYmxlZCxcbiAgICBvblByZXNzOiAoKSA9PiB7XG4gICAgICBpbnNlcnRCbG9ja3F1b3RlKGVkaXRvcik7XG4gICAgICBSZWFjdEVkaXRvci5mb2N1cyhlZGl0b3IpO1xuICAgIH0sXG4gICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goSWNvbiwge1xuICAgICAgc3JjOiBxdW90ZUljb25cbiAgICB9KVxuICB9KSwgW2VkaXRvciwgaXNEaXNhYmxlZCwgaXNTZWxlY3RlZF0pO1xufTtcbmNvbnN0IGJsb2NrcXVvdGVCdXR0b24gPSAvKiNfX1BVUkVfXyovanN4cyhUb29sdGlwVHJpZ2dlciwge1xuICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goQmxvY2txdW90ZUJ1dHRvbiwge30pLCAvKiNfX1BVUkVfXyovanN4cyhUb29sdGlwLCB7XG4gICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgIGNoaWxkcmVuOiBcIlF1b3RlXCJcbiAgICB9KSwgLyojX19QVVJFX18qL2pzeChLYmQsIHtcbiAgICAgIGNoaWxkcmVuOiAnPuKOtSdcbiAgICB9KV1cbiAgfSldXG59KTtcblxuY29uc3QgbGFuZ3VhZ2VzID0gW3tcbiAgbGFiZWw6ICdDJyxcbiAgdmFsdWU6ICdjJ1xufSwge1xuICBsYWJlbDogJ0MrKycsXG4gIHZhbHVlOiAnY3BwJ1xufSwge1xuICBsYWJlbDogJ0FyZHVpbm8nLFxuICB2YWx1ZTogJ2FyZHVpbm8nXG59LCB7XG4gIGxhYmVsOiAnQmFzaCcsXG4gIHZhbHVlOiAnYmFzaCdcbn0sIHtcbiAgbGFiZWw6ICdDIycsXG4gIHZhbHVlOiAnY3NoYXJwJ1xufSwge1xuICBsYWJlbDogJ0NTUycsXG4gIHZhbHVlOiAnY3NzJ1xufSwge1xuICBsYWJlbDogJ0RpZmYnLFxuICB2YWx1ZTogJ2RpZmYnXG59LCB7XG4gIGxhYmVsOiAnR28nLFxuICB2YWx1ZTogJ2dvJ1xufSwge1xuICBsYWJlbDogJ0lOSScsXG4gIHZhbHVlOiAnaW5pJ1xufSwge1xuICBsYWJlbDogJ0phdmEnLFxuICB2YWx1ZTogJ2phdmEnXG59LCB7XG4gIGxhYmVsOiAnSmF2YVNjcmlwdCcsXG4gIHZhbHVlOiAnamF2YXNjcmlwdCdcbn0sIHtcbiAgbGFiZWw6ICdKU1gnLFxuICB2YWx1ZTogJ2pzeCdcbn0sIHtcbiAgbGFiZWw6ICdKU09OJyxcbiAgdmFsdWU6ICdqc29uJ1xufSwge1xuICBsYWJlbDogJ0tvdGxpbicsXG4gIHZhbHVlOiAna290bGluJ1xufSwge1xuICBsYWJlbDogJ0xlc3MnLFxuICB2YWx1ZTogJ2xlc3MnXG59LCB7XG4gIGxhYmVsOiAnTHVhJyxcbiAgdmFsdWU6ICdsdWEnXG59LCB7XG4gIGxhYmVsOiAnTWFrZWZpbGUnLFxuICB2YWx1ZTogJ21ha2VmaWxlJ1xufSwge1xuICBsYWJlbDogJ01hcmtkb3duJyxcbiAgdmFsdWU6ICdtYXJrZG93bidcbn0sIHtcbiAgbGFiZWw6ICdPYmplY3RpdmUtQycsXG4gIHZhbHVlOiAnb2JqZWN0aXZlYydcbn0sIHtcbiAgbGFiZWw6ICdQZXJsJyxcbiAgdmFsdWU6ICdwZXJsJ1xufSwge1xuICBsYWJlbDogJ1BIUCcsXG4gIHZhbHVlOiAncGhwJ1xufSwge1xuICBsYWJlbDogJ1B5dGhvbicsXG4gIHZhbHVlOiAncHl0aG9uJ1xufSwge1xuICBsYWJlbDogJ1InLFxuICB2YWx1ZTogJ3InXG59LCB7XG4gIGxhYmVsOiAnUnVieScsXG4gIHZhbHVlOiAncnVieSdcbn0sIHtcbiAgbGFiZWw6ICdSdXN0JyxcbiAgdmFsdWU6ICdydXN0J1xufSwge1xuICBsYWJlbDogJ1Nhc3MnLFxuICB2YWx1ZTogJ3Nhc3MnXG59LCB7XG4gIGxhYmVsOiAnU0NTUycsXG4gIHZhbHVlOiAnc2Nzcydcbn0sIHtcbiAgbGFiZWw6ICdTUUwnLFxuICB2YWx1ZTogJ3NxbCdcbn0sIHtcbiAgbGFiZWw6ICdTd2lmdCcsXG4gIHZhbHVlOiAnc3dpZnQnXG59LCB7XG4gIGxhYmVsOiAnVHlwZVNjcmlwdCcsXG4gIHZhbHVlOiAndHlwZXNjcmlwdCdcbn0sIHtcbiAgbGFiZWw6ICdUU1gnLFxuICB2YWx1ZTogJ3RzeCdcbn0sIHtcbiAgbGFiZWw6ICdWQi5ORVQnLFxuICB2YWx1ZTogJ3ZibmV0J1xufSwge1xuICBsYWJlbDogJ1lBTUwnLFxuICB2YWx1ZTogJ3lhbWwnXG59XTtcbmNvbnN0IGNhbm9uaWNhbE5hbWVUb0xhYmVsID0gbmV3IE1hcChsYW5ndWFnZXMubWFwKHggPT4gW3gudmFsdWUsIHgubGFiZWxdKSk7XG5jb25zdCBsYWJlbFRvQ2Fub25pY2FsTmFtZSA9IG5ldyBNYXAobGFuZ3VhZ2VzLm1hcCh4ID0+IFt4LmxhYmVsLCB4LnZhbHVlXSkpO1xuY29uc3QgbGFuZ3VhZ2VUb0Nhbm9uaWNhbE5hbWUgPSBuZXcgTWFwKGxhbmd1YWdlcy5tYXAobGFuZyA9PiBbUHJpc20ubGFuZ3VhZ2VzW2xhbmcudmFsdWVdLCBsYW5nLnZhbHVlXSkpO1xuY29uc3QgYWxpYXNlc1RvQ2Fub25pY2FsTmFtZSA9IG5ldyBNYXAoT2JqZWN0LmtleXMoUHJpc20ubGFuZ3VhZ2VzKS5mbGF0TWFwKGxhbmcgPT4ge1xuICBjb25zdCBjYW5vbmljYWxOYW1lID0gbGFuZ3VhZ2VUb0Nhbm9uaWNhbE5hbWUuZ2V0KFByaXNtLmxhbmd1YWdlc1tsYW5nXSk7XG4gIGlmIChjYW5vbmljYWxOYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgcmV0dXJuIFtbbGFuZywgY2Fub25pY2FsTmFtZV1dO1xufSkpO1xuY29uc3QgbGFuZ3VhZ2VzVG9BbGlhc2VzID0gbmV3IE1hcChsYW5ndWFnZXMubWFwKGxhbmcgPT4gW2xhbmcudmFsdWUsIFtdXSkpO1xuZm9yIChjb25zdCBbYWxpYXMsIGNhbm9uaWNhbE5hbWVdIG9mIGFsaWFzZXNUb0Nhbm9uaWNhbE5hbWUpIHtcbiAgbGFuZ3VhZ2VzVG9BbGlhc2VzLmdldChjYW5vbmljYWxOYW1lKS5wdXNoKGFsaWFzKTtcbn1cbmNvbnN0IGxhbmd1YWdlc1dpdGhBbGlhc2VzID0gW3tcbiAgbGFiZWw6ICdQbGFpbiB0ZXh0JyxcbiAgdmFsdWU6ICdwbGFpbicsXG4gIGFsaWFzZXM6IFtdXG59LCAuLi5bLi4ubGFuZ3VhZ2VzVG9BbGlhc2VzXS5tYXAoKFtjYW5vbmljYWxOYW1lLCBhbGlhc2VzXSkgPT4gKHtcbiAgbGFiZWw6IGNhbm9uaWNhbE5hbWVUb0xhYmVsLmdldChjYW5vbmljYWxOYW1lKSxcbiAgdmFsdWU6IGNhbm9uaWNhbE5hbWUsXG4gIGFsaWFzZXNcbn0pKV07XG5jb25zdCBhbGlhc2VzVG9MYWJlbCA9IG5ldyBNYXAoWy4uLmFsaWFzZXNUb0Nhbm9uaWNhbE5hbWVdLm1hcCgoW2FsaWFzLCBjYW5vbmljYWxOYW1lXSkgPT4gW2FsaWFzLCBjYW5vbmljYWxOYW1lVG9MYWJlbC5nZXQoY2Fub25pY2FsTmFtZSldKSk7XG5cbmZ1bmN0aW9uIEN1c3RvbUF0dHJpYnV0ZXNEaWFsb2dJbm5lcihwcm9wcykge1xuICBjb25zdCBlZGl0b3IgPSB1c2VTbGF0ZVN0YXRpYygpO1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlKCgpID0+IHtcbiAgICByZXR1cm4gZ2V0SW5pdGlhbFByb3BzVmFsdWVGcm9tSW5pdGlhbGl6ZXIocHJvcHMuc2NoZW1hLCBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmtleXMocHJvcHMuc2NoZW1hLmZpZWxkcykubWFwKGtleSA9PiBba2V5LCBwcm9wcy5lbGVtZW50W2tleV1dKSkpO1xuICB9KTtcbiAgY29uc3QgW2ZvcmNlVmFsaWRhdGlvbiwgc2V0Rm9yY2VWYWxpZGF0aW9uXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgcHJldmlld1Byb3BzID0gdXNlTWVtbygoKSA9PiBjcmVhdGVHZXRQcmV2aWV3UHJvcHMocHJvcHMuc2NoZW1hLCBzZXRTdGF0ZSwgKCkgPT4gdW5kZWZpbmVkKSwgW3Byb3BzLnNjaGVtYV0pKHN0YXRlKTtcbiAgbGV0IHtcbiAgICBkaXNtaXNzXG4gIH0gPSB1c2VEaWFsb2dDb250YWluZXIoKTtcbiAgY29uc3Qgc3RyaW5nRm9ybWF0dGVyID0gdXNlTG9jYWxpemVkU3RyaW5nRm9ybWF0dGVyKGwxMG5NZXNzYWdlcyk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KERpYWxvZywge1xuICAgIHNpemU6IFwic21hbGxcIixcbiAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeHMoXCJmb3JtXCIsIHtcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIGRpc3BsYXk6ICdjb250ZW50cydcbiAgICAgIH0sXG4gICAgICBvblN1Ym1pdDogZXZlbnQgPT4ge1xuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ICE9PSBldmVudC5jdXJyZW50VGFyZ2V0KSByZXR1cm47XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHNldEZvcmNlVmFsaWRhdGlvbih0cnVlKTtcbiAgICAgICAgaWYgKGNsaWVudFNpZGVWYWxpZGF0ZVByb3AocHJvcHMuc2NoZW1hLCBzdGF0ZSwgdW5kZWZpbmVkKSkge1xuICAgICAgICAgIGRpc21pc3MoKTtcbiAgICAgICAgICBjb25zdCBwYXRoID0gUmVhY3RFZGl0b3IuZmluZFBhdGgoZWRpdG9yLCBwcm9wcy5lbGVtZW50KTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhzdGF0ZSk7XG4gICAgICAgICAgVHJhbnNmb3Jtcy5zZXROb2RlcyhlZGl0b3IsIHN0YXRlLCB7XG4gICAgICAgICAgICBhdDogcGF0aFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4cyhIZWFkaW5nLCB7XG4gICAgICAgIGNoaWxkcmVuOiBbcHJvcHMubm9kZUxhYmVsLCBcIiBkZXRhaWxzXCJdXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeChDb250ZW50LCB7XG4gICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KEZvcm1WYWx1ZUNvbnRlbnRGcm9tUHJldmlld1Byb3BzLCB7XG4gICAgICAgICAgZm9yY2VWYWxpZGF0aW9uOiBmb3JjZVZhbGlkYXRpb24sXG4gICAgICAgICAgYXV0b0ZvY3VzOiB0cnVlLFxuICAgICAgICAgIC4uLnByZXZpZXdQcm9wc1xuICAgICAgICB9KVxuICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3hzKEJ1dHRvbkdyb3VwLCB7XG4gICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChCdXR0b24sIHtcbiAgICAgICAgICBvblByZXNzOiBkaXNtaXNzLFxuICAgICAgICAgIGNoaWxkcmVuOiBzdHJpbmdGb3JtYXR0ZXIuZm9ybWF0KCdjYW5jZWwnKVxuICAgICAgICB9KSwgLyojX19QVVJFX18qL2pzeChCdXR0b24sIHtcbiAgICAgICAgICBwcm9taW5lbmNlOiBcImhpZ2hcIixcbiAgICAgICAgICB0eXBlOiBcInN1Ym1pdFwiLFxuICAgICAgICAgIGNoaWxkcmVuOiBzdHJpbmdGb3JtYXR0ZXIuZm9ybWF0KCdzYXZlJylcbiAgICAgICAgfSldXG4gICAgICB9KV1cbiAgICB9KVxuICB9KTtcbn1cbmZ1bmN0aW9uIEN1c3RvbUF0dHJpYnV0ZXNFZGl0QnV0dG9uKHByb3BzKSB7XG4gIGNvbnN0IHN0cmluZ0Zvcm1hdHRlciA9IHVzZUxvY2FsaXplZFN0cmluZ0Zvcm1hdHRlcihsMTBuTWVzc2FnZXMpO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeHMoVG9vbHRpcFRyaWdnZXIsIHtcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goQWN0aW9uQnV0dG9uLCB7XG4gICAgICBwcm9taW5lbmNlOiBcImxvd1wiLFxuICAgICAgb25QcmVzczogcHJvcHMub25QcmVzcyxcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KEljb24sIHtcbiAgICAgICAgc3JjOiBlZGl0SWNvblxuICAgICAgfSlcbiAgICB9KSwgLyojX19QVVJFX18qL2pzeChUb29sdGlwLCB7XG4gICAgICBjaGlsZHJlbjogc3RyaW5nRm9ybWF0dGVyLmZvcm1hdCgnZWRpdCcpXG4gICAgfSldXG4gIH0pO1xufVxuZnVuY3Rpb24gQ3VzdG9tQXR0cmlidXRlc0RpYWxvZyhwcm9wcykge1xuICBjb25zdCBlZGl0b3IgPSB1c2VTbGF0ZVN0YXRpYygpO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChEaWFsb2dDb250YWluZXIsIHtcbiAgICBvbkRpc21pc3M6ICgpID0+IHtcbiAgICAgIHByb3BzLm9uRGlzbWlzcygpO1xuICAgICAgZm9jdXNXaXRoUHJldmlvdXNTZWxlY3Rpb24oZWRpdG9yKTtcbiAgICB9LFxuICAgIGNoaWxkcmVuOiBwcm9wcy5pc09wZW4gJiYgLyojX19QVVJFX18qL2pzeChDdXN0b21BdHRyaWJ1dGVzRGlhbG9nSW5uZXIsIHtcbiAgICAgIGVsZW1lbnQ6IHByb3BzLmVsZW1lbnQsXG4gICAgICBub2RlTGFiZWw6IHByb3BzLm5vZGVMYWJlbCxcbiAgICAgIHNjaGVtYTogcHJvcHMuc2NoZW1hXG4gICAgfSlcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIENvZGVCdXR0b24oKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0b3IsXG4gICAgY29kZToge1xuICAgICAgaXNEaXNhYmxlZCxcbiAgICAgIGlzU2VsZWN0ZWRcbiAgICB9XG4gIH0gPSB1c2VUb29sYmFyU3RhdGUoKTtcbiAgcmV0dXJuIHVzZU1lbW8oKCkgPT4gLyojX19QVVJFX18qL2pzeChBY3Rpb25CdXR0b24sIHtcbiAgICBpc1NlbGVjdGVkOiBpc1NlbGVjdGVkLFxuICAgIGlzRGlzYWJsZWQ6IGlzRGlzYWJsZWQsXG4gICAgcHJvbWluZW5jZTogXCJsb3dcIixcbiAgICBvblByZXNzOiAoKSA9PiB7XG4gICAgICBpZiAoaXNTZWxlY3RlZCkge1xuICAgICAgICBUcmFuc2Zvcm1zLnVud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgIG1hdGNoOiBub2RlID0+IG5vZGUudHlwZSA9PT0gJ2NvZGUnXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgVHJhbnNmb3Jtcy53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgdHlwZTogJ2NvZGUnLFxuICAgICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgICAgdGV4dDogJydcbiAgICAgICAgICB9XVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIFJlYWN0RWRpdG9yLmZvY3VzKGVkaXRvcik7XG4gICAgfSxcbiAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChJY29uLCB7XG4gICAgICBzcmM6IGNvZGVJY29uXG4gICAgfSlcbiAgfSksIFtpc0Rpc2FibGVkLCBpc1NlbGVjdGVkLCBlZGl0b3JdKTtcbn1cbmNvbnN0IGNvZGVCdXR0b24gPSAvKiNfX1BVUkVfXyovanN4cyhUb29sdGlwVHJpZ2dlciwge1xuICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goQ29kZUJ1dHRvbiwge30pLCAvKiNfX1BVUkVfXyovanN4cyhUb29sdGlwLCB7XG4gICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgIGNoaWxkcmVuOiBcIkNvZGUgYmxvY2tcIlxuICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KEtiZCwge1xuICAgICAgY2hpbGRyZW46IFwiYGBgXCJcbiAgICB9KV1cbiAgfSldXG59KTtcbmZ1bmN0aW9uIENvZGVFbGVtZW50KHtcbiAgYXR0cmlidXRlcyxcbiAgY2hpbGRyZW4sXG4gIGVsZW1lbnRcbn0pIHtcbiAgdmFyIF9hbGlhc2VzVG9MYWJlbCRnZXQ7XG4gIGNvbnN0IGVkaXRvciA9IHVzZVNsYXRlU3RhdGljKCk7XG4gIGNvbnN0IHRyaWdnZXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IFtpbnB1dFZhbHVlLCBzZXRJbnB1dFZhbHVlXSA9IHVzZVN0YXRlKGVsZW1lbnQubGFuZ3VhZ2UgPyAoX2FsaWFzZXNUb0xhYmVsJGdldCA9IGFsaWFzZXNUb0xhYmVsLmdldChlbGVtZW50Lmxhbmd1YWdlKSkgIT09IG51bGwgJiYgX2FsaWFzZXNUb0xhYmVsJGdldCAhPT0gdm9pZCAwID8gX2FsaWFzZXNUb0xhYmVsJGdldCA6IGVsZW1lbnQubGFuZ3VhZ2UgOiAnUGxhaW4gdGV4dCcpO1xuICBjb25zdCBbZGlhbG9nT3Blbiwgc2V0RGlhbG9nT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHtcbiAgICBkb2N1bWVudEZlYXR1cmVzXG4gIH0gPSB1c2VEb2N1bWVudEVkaXRvckNvbmZpZygpO1xuICBjb25zdCBjdXN0b21BdHRyaWJ1dGVzU2NoZW1hID0gZG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmJsb2NrVHlwZXMuY29kZSAmJiBPYmplY3Qua2V5cyhkb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuYmxvY2tUeXBlcy5jb2RlLnNjaGVtYS5maWVsZHMpLmxlbmd0aCA/IGRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5ibG9ja1R5cGVzLmNvZGUuc2NoZW1hIDogdW5kZWZpbmVkO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeHMoRnJhZ21lbnQsIHtcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goQmxvY2tXcmFwcGVyLCB7XG4gICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeHMoQmxvY2tQb3BvdmVyVHJpZ2dlciwge1xuICAgICAgICBlbGVtZW50OiBlbGVtZW50LFxuICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goXCJwcmVcIiwge1xuICAgICAgICAgIHNwZWxsQ2hlY2s6IFwiZmFsc2VcIixcbiAgICAgICAgICByZWY6IHRyaWdnZXJSZWYsXG4gICAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goXCJjb2RlXCIsIHtcbiAgICAgICAgICAgIC4uLmF0dHJpYnV0ZXMsXG4gICAgICAgICAgICBjaGlsZHJlbjogY2hpbGRyZW5cbiAgICAgICAgICB9KVxuICAgICAgICB9KSwgLyojX19QVVJFX18qL2pzeChCbG9ja1BvcG92ZXIsIHtcbiAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeHMoRmxleCwge1xuICAgICAgICAgICAgZ2FwOiBcInJlZ3VsYXJcIixcbiAgICAgICAgICAgIHBhZGRpbmc6IFwicmVndWxhclwiLFxuICAgICAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KENvbWJvYm94LCB7XG4gICAgICAgICAgICAgIFwiYXJpYS1sYWJlbFwiOiBcIkxhbmd1YWdlXCIsXG4gICAgICAgICAgICAgIHdpZHRoOiBcInNjYWxlLjIwMDBcIixcbiAgICAgICAgICAgICAgYWxsb3dzQ3VzdG9tVmFsdWU6IHRydWUgLy8gYWxsb3cgY29uc3VtZXJzIHRvIHN1cHBvcnQgb3RoZXIgbGFuZ3VhZ2VzXG4gICAgICAgICAgICAgICxcbiAgICAgICAgICAgICAgaW5wdXRWYWx1ZTogaW5wdXRWYWx1ZSxcbiAgICAgICAgICAgICAgb25JbnB1dENoYW5nZTogc2V0SW5wdXRWYWx1ZSxcbiAgICAgICAgICAgICAgb25CbHVyOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGF0aCA9IFJlYWN0RWRpdG9yLmZpbmRQYXRoKGVkaXRvciwgZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2Fub25pY2FsTmFtZSA9IGFsaWFzZXNUb0Nhbm9uaWNhbE5hbWUuZ2V0KGlucHV0VmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChjYW5vbmljYWxOYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChjYW5vbmljYWxOYW1lID09PSAncGxhaW4nKSB7XG4gICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMudW5zZXROb2RlcyhlZGl0b3IsICdsYW5ndWFnZScsIHtcbiAgICAgICAgICAgICAgICAgICAgICBhdDogcGF0aFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgc2V0SW5wdXRWYWx1ZShjYW5vbmljYWxOYW1lVG9MYWJlbC5nZXQoY2Fub25pY2FsTmFtZSkpO1xuICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5zZXROb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2U6IGNhbm9uaWNhbE5hbWVcbiAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgYXQ6IHBhdGhcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lRnJvbUxhYmVsID0gbGFiZWxUb0Nhbm9uaWNhbE5hbWUuZ2V0KGlucHV0VmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChuYW1lRnJvbUxhYmVsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChuYW1lRnJvbUxhYmVsID09PSAncGxhaW4nKSB7XG4gICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMudW5zZXROb2RlcyhlZGl0b3IsICdsYW5ndWFnZScsIHtcbiAgICAgICAgICAgICAgICAgICAgICBhdDogcGF0aFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5zZXROb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2U6IG5hbWVGcm9tTGFiZWxcbiAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgYXQ6IHBhdGhcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaW5wdXRWYWx1ZSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMudW5zZXROb2RlcyhlZGl0b3IsICdsYW5ndWFnZScsIHtcbiAgICAgICAgICAgICAgICAgICAgYXQ6IHBhdGhcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgc2V0SW5wdXRWYWx1ZSgnUGxhaW4gdGV4dCcpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaW5wdXRWYWx1ZSAhPT0gZWxlbWVudC5sYW5ndWFnZSkge1xuICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5zZXROb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2U6IGlucHV0VmFsdWVcbiAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgYXQ6IHBhdGhcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U6IHNlbGVjdGlvbiA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGF0aCA9IFJlYWN0RWRpdG9yLmZpbmRQYXRoKGVkaXRvciwgZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgaWYgKGFsaWFzZXNUb0Nhbm9uaWNhbE5hbWUuaGFzKGlucHV0VmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICBzZWxlY3Rpb24gPSBhbGlhc2VzVG9DYW5vbmljYWxOYW1lLmdldChpbnB1dFZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgaWYgKGlucHV0VmFsdWUgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMudW5zZXROb2RlcyhlZGl0b3IsICdsYW5ndWFnZScsIHtcbiAgICAgICAgICAgICAgICAgICAgICBhdDogcGF0aFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2U6IGlucHV0VmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgIGF0OiBwYXRoXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHNlbGVjdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb24gPT09ICdwbGFpbicpIHtcbiAgICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy51bnNldE5vZGVzKGVkaXRvciwgJ2xhbmd1YWdlJywge1xuICAgICAgICAgICAgICAgICAgICAgIGF0OiBwYXRoXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzZXRJbnB1dFZhbHVlKCdQbGFpbiB0ZXh0Jyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlOiBzZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgYXQ6IHBhdGhcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBjYW5vbmljYWxOYW1lVG9MYWJlbC5nZXQoc2VsZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgIGlmIChsYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRJbnB1dFZhbHVlKGxhYmVsKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHNlbGVjdGVkS2V5OiBlbGVtZW50Lmxhbmd1YWdlID8gYWxpYXNlc1RvQ2Fub25pY2FsTmFtZS5nZXQoZWxlbWVudC5sYW5ndWFnZSkgOiAncGxhaW4nLFxuICAgICAgICAgICAgICBpdGVtczogdXNlTWVtbygoKSA9PiBpbnB1dFZhbHVlID09PSAnUGxhaW4gdGV4dCcgfHwgbGFiZWxUb0Nhbm9uaWNhbE5hbWUuaGFzKGlucHV0VmFsdWUpID8gbGFuZ3VhZ2VzV2l0aEFsaWFzZXMgOiBtYXRjaFNvcnRlcihsYW5ndWFnZXNXaXRoQWxpYXNlcywgaW5wdXRWYWx1ZSwge1xuICAgICAgICAgICAgICAgIGtleXM6IFsnbGFiZWwnLCAndmFsdWUnLCAnYWxpYXNlcyddXG4gICAgICAgICAgICAgIH0pLCBbaW5wdXRWYWx1ZV0pLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogaXRlbSA9PiAvKiNfX1BVUkVfXyovanN4KEl0ZW0kMSwge1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBpdGVtLmxhYmVsXG4gICAgICAgICAgICAgIH0sIGl0ZW0udmFsdWUpXG4gICAgICAgICAgICB9KSwgLyojX19QVVJFX18qL2pzeChUb29sYmFyU2VwYXJhdG9yLCB7fSksIGN1c3RvbUF0dHJpYnV0ZXNTY2hlbWEgIT09IHVuZGVmaW5lZCAmJiAvKiNfX1BVUkVfXyovanN4KEN1c3RvbUF0dHJpYnV0ZXNFZGl0QnV0dG9uLCB7XG4gICAgICAgICAgICAgIG9uUHJlc3M6ICgpID0+IHNldERpYWxvZ09wZW4odHJ1ZSlcbiAgICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4cyhUb29sdGlwVHJpZ2dlciwge1xuICAgICAgICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goQWN0aW9uQnV0dG9uLCB7XG4gICAgICAgICAgICAgICAgcHJvbWluZW5jZTogXCJsb3dcIixcbiAgICAgICAgICAgICAgICBvblByZXNzOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBUcmFuc2Zvcm1zLnJlbW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgICAgICAgICBhdDogUmVhY3RFZGl0b3IuZmluZFBhdGgoZWRpdG9yLCBlbGVtZW50KVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChJY29uLCB7XG4gICAgICAgICAgICAgICAgICBzcmM6IHRyYXNoMkljb25cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9KSwgLyojX19QVVJFX18qL2pzeChUb29sdGlwLCB7XG4gICAgICAgICAgICAgICAgdG9uZTogXCJjcml0aWNhbFwiLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBcIlJlbW92ZVwiXG4gICAgICAgICAgICAgIH0pXVxuICAgICAgICAgICAgfSldXG4gICAgICAgICAgfSlcbiAgICAgICAgfSldXG4gICAgICB9KVxuICAgIH0pLCBjdXN0b21BdHRyaWJ1dGVzU2NoZW1hICE9PSB1bmRlZmluZWQgJiYgLyojX19QVVJFX18qL2pzeChDdXN0b21BdHRyaWJ1dGVzRGlhbG9nLCB7XG4gICAgICBlbGVtZW50OiBlbGVtZW50LFxuICAgICAgaXNPcGVuOiBkaWFsb2dPcGVuLFxuICAgICAgbm9kZUxhYmVsOiBcIkNvZGUgYmxvY2tcIixcbiAgICAgIHNjaGVtYTogY3VzdG9tQXR0cmlidXRlc1NjaGVtYSxcbiAgICAgIG9uRGlzbWlzczogKCkgPT4ge1xuICAgICAgICBzZXREaWFsb2dPcGVuKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9KV1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUNvbXBvbmVudEJsb2NrRWxlbWVudFByb3BzKGVkaXRvciwgY29tcG9uZW50QmxvY2ssIHByZXZQcm9wcywgX25ld1Byb3BzLCBiYXNlUGF0aCwgc2V0RWxlbWVudCwgaWdub3JlQ2hpbGRGaWVsZHMpIHtcbiAgRWRpdG9yLndpdGhvdXROb3JtYWxpemluZyhlZGl0b3IsICgpID0+IHtcbiAgICBjb25zdCBwcm9wUGF0aHNXaXRoTm9kZXNUb1JlcGxhY2UgPSBuZXcgTWFwKCk7XG4gICAgY29uc3Qgc2NoZW1hID0ge1xuICAgICAga2luZDogJ29iamVjdCcsXG4gICAgICBmaWVsZHM6IGNvbXBvbmVudEJsb2NrLnNjaGVtYVxuICAgIH07XG4gICAgY29uc3QgbmV3UHJvcHMgPSB0cmFuc2Zvcm1Qcm9wcyhzY2hlbWEsIF9uZXdQcm9wcywge1xuICAgICAgY2hpbGQoc2NoZW1hLCB2YWx1ZSwgcGF0aCkge1xuICAgICAgICBpZiAoIWlnbm9yZUNoaWxkRmllbGRzICYmIHNjaGVtYS5vcHRpb25zLmtpbmQgPT09ICdibG9jaycgJiYgdmFsdWUpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IHByZXZWYWwgPSBnZXRWYWx1ZUF0UHJvcFBhdGgocHJldlByb3BzLCBwYXRoKTtcbiAgICAgICAgICAgIGlmIChwcmV2VmFsID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIHt9XG4gICAgICAgICAgcHJvcFBhdGhzV2l0aE5vZGVzVG9SZXBsYWNlLnNldChKU09OLnN0cmluZ2lmeShwYXRoKSwgdmFsdWUubWFwKGNsb25lRGVzY2VuZGVudCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHNldEVsZW1lbnQoe1xuICAgICAgcHJvcHM6IG5ld1Byb3BzXG4gICAgfSk7XG4gICAgY29uc3QgY2hpbGRQcm9wUGF0aHMgPSBmaW5kQ2hpbGRQcm9wUGF0aHNXaXRoUHJldmlvdXMobmV3UHJvcHMsIHByZXZQcm9wcywgc2NoZW1hLCBbXSwgW10sIFtdKTtcbiAgICBjb25zdCBnZXROb2RlID0gKCkgPT4gTm9kZS5nZXQoZWRpdG9yLCBiYXNlUGF0aCk7XG4gICAgY29uc3QgZWxlbWVudEZvckNoaWxkcmVuID0gZ2V0Tm9kZSgpO1xuICAgIGlmIChjaGlsZFByb3BQYXRocy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnN0IGluZGV4ZXMgPSBlbGVtZW50Rm9yQ2hpbGRyZW4uY2hpbGRyZW4ubWFwKChfLCBpKSA9PiBpKS5yZXZlcnNlKCk7XG4gICAgICBmb3IgKGNvbnN0IGlkeCBvZiBpbmRleGVzKSB7XG4gICAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgYXQ6IFsuLi5iYXNlUGF0aCwgaWR4XVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICAgIHR5cGU6ICdjb21wb25lbnQtaW5saW5lLXByb3AnLFxuICAgICAgICBwcm9wUGF0aDogdW5kZWZpbmVkLFxuICAgICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgICB0ZXh0OiAnJ1xuICAgICAgICB9XVxuICAgICAgfSwge1xuICAgICAgICBhdDogWy4uLmJhc2VQYXRoLCAwXVxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGluaXRpYWxQcm9wUGF0aHNUb0VkaXRvclBhdGggPSBuZXcgTWFwKCk7XG4gICAgZm9yIChjb25zdCBbaWR4LCBub2RlXSBvZiBlbGVtZW50Rm9yQ2hpbGRyZW4uY2hpbGRyZW4uZW50cmllcygpKSB7XG4gICAgICBhc3NlcnQobm9kZS50eXBlID09PSAnY29tcG9uZW50LWJsb2NrLXByb3AnIHx8IG5vZGUudHlwZSA9PT0gJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCcpO1xuICAgICAgaW5pdGlhbFByb3BQYXRoc1RvRWRpdG9yUGF0aC5zZXQobm9kZS5wcm9wUGF0aCA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogSlNPTi5zdHJpbmdpZnkobm9kZS5wcm9wUGF0aCksIGlkeCk7XG4gICAgfVxuICAgIGNvbnN0IGNoaWxkcmVuTGVmdFRvQWRkID0gbmV3IFNldChjaGlsZFByb3BQYXRocyk7XG4gICAgZm9yIChjb25zdCBjaGlsZFByb3Agb2YgY2hpbGRQcm9wUGF0aHMpIHtcbiAgICAgIGlmIChjaGlsZFByb3AucHJldlBhdGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHN0cmluZ2lmaWVkUGF0aCA9IEpTT04uc3RyaW5naWZ5KGNoaWxkUHJvcC5wcmV2UGF0aCk7XG4gICAgICBjb25zdCBpZHhJbkNoaWxkcmVuID0gaW5pdGlhbFByb3BQYXRoc1RvRWRpdG9yUGF0aC5nZXQoc3RyaW5naWZpZWRQYXRoKTtcbiAgICAgIGlmIChpZHhJbkNoaWxkcmVuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgcHJldk5vZGUgPSBlbGVtZW50Rm9yQ2hpbGRyZW4uY2hpbGRyZW5baWR4SW5DaGlsZHJlbl07XG4gICAgICAgIGFzc2VydChwcmV2Tm9kZS5wcm9wUGF0aCAhPT0gdW5kZWZpbmVkKTtcbiAgICAgICAgaWYgKCFhcmVBcnJheXNFcXVhbChjaGlsZFByb3AucGF0aCwgcHJldk5vZGUucHJvcFBhdGgpKSB7XG4gICAgICAgICAgVHJhbnNmb3Jtcy5zZXROb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgIHByb3BQYXRoOiBjaGlsZFByb3AucGF0aFxuICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgIGF0OiBbLi4uYmFzZVBhdGgsIGlkeEluQ2hpbGRyZW5dXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2hpbGRyZW5MZWZ0VG9BZGQuZGVsZXRlKGNoaWxkUHJvcCk7XG4gICAgICAgIGluaXRpYWxQcm9wUGF0aHNUb0VkaXRvclBhdGguZGVsZXRlKHN0cmluZ2lmaWVkUGF0aCk7XG4gICAgICB9XG4gICAgfVxuICAgIGxldCBuZXdJZHggPSBnZXROb2RlKCkuY2hpbGRyZW4ubGVuZ3RoO1xuICAgIGZvciAoY29uc3QgY2hpbGRQcm9wIG9mIGNoaWxkcmVuTGVmdFRvQWRkKSB7XG4gICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKGVkaXRvciwge1xuICAgICAgICB0eXBlOiBgY29tcG9uZW50LSR7Y2hpbGRQcm9wLm9wdGlvbnMua2luZH0tcHJvcGAsXG4gICAgICAgIHByb3BQYXRoOiBjaGlsZFByb3AucGF0aCxcbiAgICAgICAgY2hpbGRyZW46IFtjaGlsZFByb3Aub3B0aW9ucy5raW5kID09PSAnYmxvY2snID8ge1xuICAgICAgICAgIHR5cGU6ICdwYXJhZ3JhcGgnLFxuICAgICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgICAgdGV4dDogJydcbiAgICAgICAgICB9XVxuICAgICAgICB9IDoge1xuICAgICAgICAgIHRleHQ6ICcnXG4gICAgICAgIH1dXG4gICAgICB9LCB7XG4gICAgICAgIGF0OiBbLi4uYmFzZVBhdGgsIG5ld0lkeF1cbiAgICAgIH0pO1xuICAgICAgbmV3SWR4Kys7XG4gICAgfVxuICAgIGNvbnN0IHBhdGhzVG9SZW1vdmUgPSBbXTtcbiAgICBmb3IgKGNvbnN0IFssIGlkeEluQ2hpbGRyZW5dIG9mIGluaXRpYWxQcm9wUGF0aHNUb0VkaXRvclBhdGgpIHtcbiAgICAgIHBhdGhzVG9SZW1vdmUucHVzaChFZGl0b3IucGF0aFJlZihlZGl0b3IsIFsuLi5iYXNlUGF0aCwgaWR4SW5DaGlsZHJlbl0pKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBwYXRoUmVmIG9mIHBhdGhzVG9SZW1vdmUpIHtcbiAgICAgIGNvbnN0IHBhdGggPSBwYXRoUmVmLnVucmVmKCk7XG4gICAgICBhc3NlcnQocGF0aCAhPT0gbnVsbCk7XG4gICAgICBUcmFuc2Zvcm1zLnJlbW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgICBhdDogcGF0aFxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHByb3BQYXRoc1RvRXhwZWN0ZWRJbmRleGVzID0gbmV3IE1hcCgpO1xuICAgIGZvciAoY29uc3QgW2lkeCwgdGhpbmddIG9mIGNoaWxkUHJvcFBhdGhzLmVudHJpZXMoKSkge1xuICAgICAgcHJvcFBhdGhzVG9FeHBlY3RlZEluZGV4ZXMuc2V0KEpTT04uc3RyaW5naWZ5KHRoaW5nLnBhdGgpLCBpZHgpO1xuICAgIH1cbiAgICBvdXRlcjogd2hpbGUgKHRydWUpIHtcbiAgICAgIGZvciAoY29uc3QgW2lkeCwgY2hpbGROb2RlXSBvZiBnZXROb2RlKCkuY2hpbGRyZW4uZW50cmllcygpKSB7XG4gICAgICAgIGFzc2VydChjaGlsZE5vZGUudHlwZSA9PT0gJ2NvbXBvbmVudC1ibG9jay1wcm9wJyB8fCBjaGlsZE5vZGUudHlwZSA9PT0gJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCcpO1xuICAgICAgICBjb25zdCBleHBlY3RlZEluZGV4ID0gcHJvcFBhdGhzVG9FeHBlY3RlZEluZGV4ZXMuZ2V0KEpTT04uc3RyaW5naWZ5KGNoaWxkTm9kZS5wcm9wUGF0aCkpO1xuICAgICAgICBhc3NlcnQoZXhwZWN0ZWRJbmRleCAhPT0gdW5kZWZpbmVkKTtcbiAgICAgICAgaWYgKGlkeCA9PT0gZXhwZWN0ZWRJbmRleCkgY29udGludWU7XG4gICAgICAgIFRyYW5zZm9ybXMubW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgICAgIGF0OiBbLi4uYmFzZVBhdGgsIGlkeF0sXG4gICAgICAgICAgdG86IFsuLi5iYXNlUGF0aCwgZXhwZWN0ZWRJbmRleF1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gc3RhcnQgdGhlIGZvci1sb29wIGFnYWluXG4gICAgICAgIGNvbnRpbnVlIG91dGVyO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGZvciAoY29uc3QgW3Byb3BQYXRoLCB2YWxdIG9mIHByb3BQYXRoc1dpdGhOb2Rlc1RvUmVwbGFjZSkge1xuICAgICAgY29uc3QgaWR4ID0gcHJvcFBhdGhzVG9FeHBlY3RlZEluZGV4ZXMuZ2V0KHByb3BQYXRoKTtcbiAgICAgIGlmIChpZHggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBUcmFuc2Zvcm1zLnJlbW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgICAgIGF0OiBbLi4uYmFzZVBhdGgsIGlkeF1cbiAgICAgICAgfSk7XG4gICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgdHlwZTogJ2NvbXBvbmVudC1ibG9jay1wcm9wJyxcbiAgICAgICAgICBwcm9wUGF0aDogSlNPTi5wYXJzZShwcm9wUGF0aCksXG4gICAgICAgICAgY2hpbGRyZW46IHZhbFxuICAgICAgICB9LCB7XG4gICAgICAgICAgYXQ6IFsuLi5iYXNlUGF0aCwgaWR4XVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gZmluZENoaWxkUHJvcFBhdGhzV2l0aFByZXZpb3VzKHZhbHVlLCBwcmV2VmFsdWUsIHNjaGVtYSwgbmV3UGF0aCwgcHJldlBhdGgsIHBhdGhXaXRoS2V5cykge1xuICBzd2l0Y2ggKHNjaGVtYS5raW5kKSB7XG4gICAgY2FzZSAnZm9ybSc6XG4gICAgICByZXR1cm4gW107XG4gICAgY2FzZSAnY2hpbGQnOlxuICAgICAgcmV0dXJuIFt7XG4gICAgICAgIHBhdGg6IG5ld1BhdGgsXG4gICAgICAgIHByZXZQYXRoLFxuICAgICAgICBvcHRpb25zOiBzY2hlbWEub3B0aW9uc1xuICAgICAgfV07XG4gICAgY2FzZSAnY29uZGl0aW9uYWwnOlxuICAgICAgY29uc3QgaGFzQ2hhbmdlZERpc2NyaW1pbmFudCA9IHZhbHVlLmRpc2NyaW1pbmFudCA9PT0gcHJldlZhbHVlLmRpc2NyaW1pbmFudDtcbiAgICAgIHJldHVybiBmaW5kQ2hpbGRQcm9wUGF0aHNXaXRoUHJldmlvdXModmFsdWUudmFsdWUsIGhhc0NoYW5nZWREaXNjcmltaW5hbnQgPyBwcmV2VmFsdWUudmFsdWUgOiBnZXRJbml0aWFsUHJvcHNWYWx1ZShzY2hlbWEudmFsdWVzW3ZhbHVlLmRpc2NyaW1pbmFudF0pLCBzY2hlbWEudmFsdWVzW3ZhbHVlLmRpc2NyaW1pbmFudF0sIG5ld1BhdGguY29uY2F0KCd2YWx1ZScpLCBoYXNDaGFuZ2VkRGlzY3JpbWluYW50ID8gdW5kZWZpbmVkIDogcHJldlBhdGggPT09IG51bGwgfHwgcHJldlBhdGggPT09IHZvaWQgMCA/IHZvaWQgMCA6IHByZXZQYXRoLmNvbmNhdCgndmFsdWUnKSwgaGFzQ2hhbmdlZERpc2NyaW1pbmFudCA/IHVuZGVmaW5lZCA6IHBhdGhXaXRoS2V5cyA9PT0gbnVsbCB8fCBwYXRoV2l0aEtleXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhdGhXaXRoS2V5cy5jb25jYXQoJ3ZhbHVlJykpO1xuICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICB7XG4gICAgICAgIGNvbnN0IHBhdGhzID0gW107XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHNjaGVtYS5maWVsZHMpKSB7XG4gICAgICAgICAgcGF0aHMucHVzaCguLi5maW5kQ2hpbGRQcm9wUGF0aHNXaXRoUHJldmlvdXModmFsdWVba2V5XSwgcHJldlZhbHVlW2tleV0sIHNjaGVtYS5maWVsZHNba2V5XSwgbmV3UGF0aC5jb25jYXQoa2V5KSwgcHJldlBhdGggPT09IG51bGwgfHwgcHJldlBhdGggPT09IHZvaWQgMCA/IHZvaWQgMCA6IHByZXZQYXRoLmNvbmNhdChrZXkpLCBwYXRoV2l0aEtleXMgPT09IG51bGwgfHwgcGF0aFdpdGhLZXlzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXRoV2l0aEtleXMuY29uY2F0KGtleSkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGF0aHM7XG4gICAgICB9XG4gICAgY2FzZSAnYXJyYXknOlxuICAgICAge1xuICAgICAgICBjb25zdCBwYXRocyA9IFtdO1xuICAgICAgICBjb25zdCBwcmV2S2V5cyA9IGdldEtleXNGb3JBcnJheVZhbHVlKHByZXZWYWx1ZSk7XG4gICAgICAgIGNvbnN0IGtleXMgPSBnZXRLZXlzRm9yQXJyYXlWYWx1ZSh2YWx1ZSk7XG4gICAgICAgIGZvciAoY29uc3QgW2ksIHZhbF0gb2YgdmFsdWUuZW50cmllcygpKSB7XG4gICAgICAgICAgY29uc3Qga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICBjb25zdCBwcmV2SWR4ID0gcHJldktleXMuaW5kZXhPZihrZXkpO1xuICAgICAgICAgIGxldCBwcmV2VmFsO1xuICAgICAgICAgIGlmIChwcmV2SWR4ID09PSAtMSkge1xuICAgICAgICAgICAgcHJldlZhbCA9IGdldEluaXRpYWxQcm9wc1ZhbHVlKHNjaGVtYS5lbGVtZW50KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJldlZhbCA9IHByZXZWYWx1ZVtwcmV2SWR4XTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcGF0aHMucHVzaCguLi5maW5kQ2hpbGRQcm9wUGF0aHNXaXRoUHJldmlvdXModmFsLCBwcmV2VmFsLCBzY2hlbWEuZWxlbWVudCwgbmV3UGF0aC5jb25jYXQoaSksIHByZXZJZHggPT09IC0xID8gdW5kZWZpbmVkIDogcHJldlBhdGggPT09IG51bGwgfHwgcHJldlBhdGggPT09IHZvaWQgMCA/IHZvaWQgMCA6IHByZXZQYXRoLmNvbmNhdChwcmV2SWR4KSwgcHJldklkeCA9PT0gLTEgPyB1bmRlZmluZWQgOiBwYXRoV2l0aEtleXMgPT09IG51bGwgfHwgcGF0aFdpdGhLZXlzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXRoV2l0aEtleXMuY29uY2F0KGtleSkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGF0aHM7XG4gICAgICB9XG4gIH1cbn1cblxuY29uc3QgQ2hpbGRyZW5CeVBhdGhDb250ZXh0ID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUNvbnRleHQoe30pO1xuZnVuY3Rpb24gQ2hpbGRGaWVsZEVkaXRhYmxlKHtcbiAgcGF0aFxufSkge1xuICBjb25zdCBjaGlsZHJlbkJ5UGF0aCA9IHVzZUNvbnRleHQoQ2hpbGRyZW5CeVBhdGhDb250ZXh0KTtcbiAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbkJ5UGF0aFtKU09OLnN0cmluZ2lmeShwYXRoKV07XG4gIGlmIChjaGlsZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIGNoaWxkO1xufVxuZnVuY3Rpb24gQ29tcG9uZW50QmxvY2tSZW5kZXIoe1xuICBjb21wb25lbnRCbG9jayxcbiAgZWxlbWVudCxcbiAgb25DaGFuZ2UsXG4gIGNoaWxkcmVuLFxuICBvblJlbW92ZVxufSkge1xuICBjb25zdCBnZXRQcmV2aWV3UHJvcHMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gY3JlYXRlR2V0UHJldmlld1Byb3BzKHtcbiAgICAgIGtpbmQ6ICdvYmplY3QnLFxuICAgICAgZmllbGRzOiBjb21wb25lbnRCbG9jay5zY2hlbWFcbiAgICB9LCBjYiA9PiBvbkNoYW5nZShjYiwgdHJ1ZSksIHBhdGggPT4gLyojX19QVVJFX18qL2pzeChDaGlsZEZpZWxkRWRpdGFibGUsIHtcbiAgICAgIHBhdGg6IHBhdGhcbiAgICB9KSk7XG4gIH0sIFtvbkNoYW5nZSwgY29tcG9uZW50QmxvY2tdKTtcbiAgY29uc3QgcHJldmlld1Byb3BzID0gZ2V0UHJldmlld1Byb3BzKGVsZW1lbnQucHJvcHMpO1xuICBjb25zdCBjaGlsZHJlbkJ5UGF0aCA9IHt9O1xuICBsZXQgbWF5YmVDaGlsZDtcbiAgbGV0IGV4dHJhQ2hpbGRyZW4gPSBbXTtcbiAgY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgY29uc3QgcHJvcFBhdGggPSBjaGlsZC5wcm9wcy5jaGlsZHJlbi5wcm9wcy5lbGVtZW50LnByb3BQYXRoO1xuICAgIGlmIChwcm9wUGF0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBtYXliZUNoaWxkID0gY2hpbGQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNjaGVtYSA9IGdldFNjaGVtYUF0UHJvcFBhdGgocHJvcFBhdGgsIGVsZW1lbnQucHJvcHMsIGNvbXBvbmVudEJsb2NrLnNjaGVtYSk7XG4gICAgICBpZiAoKHNjaGVtYSA9PT0gbnVsbCB8fCBzY2hlbWEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNjaGVtYS5raW5kKSA9PT0gJ2NoaWxkJyAmJiBzY2hlbWEub3B0aW9ucy5raW5kID09PSAnYmxvY2snICYmIHNjaGVtYS5vcHRpb25zLmVkaXRJbiA9PT0gJ21vZGFsJykge1xuICAgICAgICBleHRyYUNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjaGlsZHJlbkJ5UGF0aFtKU09OLnN0cmluZ2lmeShwcm9wUGF0aFdpdGhJbmRpY2llc1RvS2V5cyhwcm9wUGF0aCwgZWxlbWVudC5wcm9wcykpXSA9IGNoaWxkO1xuICAgIH1cbiAgfSk7XG4gIGNvbnN0IENvbXBvbmVudEJsb2NrUHJldmlldyA9IGNvbXBvbmVudEJsb2NrLnByZXZpZXc7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhDaGlsZHJlbkJ5UGF0aENvbnRleHQuUHJvdmlkZXIsIHtcbiAgICB2YWx1ZTogY2hpbGRyZW5CeVBhdGgsXG4gICAgY2hpbGRyZW46IFt1c2VNZW1vKCgpID0+IC8qI19fUFVSRV9fKi9qc3goQ29tcG9uZW50QmxvY2tQcmV2aWV3LCB7XG4gICAgICBvblJlbW92ZTogb25SZW1vdmUsXG4gICAgICAuLi5wcmV2aWV3UHJvcHNcbiAgICB9KSwgW0NvbXBvbmVudEJsb2NrUHJldmlldywgb25SZW1vdmUsIHByZXZpZXdQcm9wc10pLCAvKiNfX1BVUkVfXyovanN4cyhcInNwYW5cIiwge1xuICAgICAgY2xhc3NOYW1lOiBjc3Moe1xuICAgICAgICBjYXJldENvbG9yOiAndHJhbnNwYXJlbnQnLFxuICAgICAgICAnJiA6OnNlbGVjdGlvbic6IHtcbiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd0cmFuc3BhcmVudCdcbiAgICAgICAgfSxcbiAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgICAgICB3aWR0aDogMSxcbiAgICAgICAgaGVpZ2h0OiAxLFxuICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJ1xuICAgICAgfSksXG4gICAgICBjaGlsZHJlbjogW21heWJlQ2hpbGQsIGV4dHJhQ2hpbGRyZW5dXG4gICAgfSldXG4gIH0pO1xufVxuXG4vLyBub3RlIHRoaXMgaXMgd3JpdHRlbiB0byBhdm9pZCBjcmFzaGluZyB3aGVuIHRoZSBnaXZlbiBwcm9wIHBhdGggZG9lc24ndCBleGlzdCBpbiB0aGUgdmFsdWVcbi8vIHRoaXMgaXMgYmVjYXVzZSBlZGl0b3IgdXBkYXRlcyBoYXBwZW4gYXN5bmNocm9ub3VzbHkgYnV0IHdlIGhhdmUgc29tZSBsb2dpYyB0byBlbnN1cmVcbi8vIHRoYXQgdXBkYXRpbmcgdGhlIHByb3BzIG9mIGEgY29tcG9uZW50IGJsb2NrIHN5bmNocm9ub3VzbHkgdXBkYXRlcyBpdFxuLy8gKHRoaXMgaXMgcHJpbWFyaWx5IHRvIG5vdCBtZXNzIHVwIHRoaW5ncyBsaWtlIGN1cnNvcnMgaW4gaW5wdXRzKVxuLy8gdGhpcyBtZWFucyB0aGF0IHNvbWV0aW1lcyB0aGUgY2hpbGQgZWxlbWVudHMgd2lsbCBiZSBpbmNvbnNpc3RlbnQgd2l0aCB0aGUgdmFsdWVzXG4vLyBzbyB0byBkZWFsIHdpdGggdGhpcywgd2UgcmV0dXJuIGEgcHJvcCBwYXRoIHRoaXMgaXMgXCJ3cm9uZ1wiIGJ1dCB3b24ndCBicmVhayBhbnl0aGluZ1xuZnVuY3Rpb24gcHJvcFBhdGhXaXRoSW5kaWNpZXNUb0tleXMocHJvcFBhdGgsIHZhbCkge1xuICByZXR1cm4gcHJvcFBhdGgubWFwKGtleSA9PiB7XG4gICAgdmFyIF92YWwyO1xuICAgIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJykge1xuICAgICAgdmFyIF92YWw7XG4gICAgICB2YWwgPSAoX3ZhbCA9IHZhbCkgPT09IG51bGwgfHwgX3ZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ZhbFtrZXldO1xuICAgICAgcmV0dXJuIGtleTtcbiAgICB9XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbCkpIHtcbiAgICAgIHZhbCA9IHVuZGVmaW5lZDtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgY29uc3Qga2V5cyA9IGdldEtleXNGb3JBcnJheVZhbHVlKHZhbCk7XG4gICAgdmFsID0gKF92YWwyID0gdmFsKSA9PT0gbnVsbCB8fCBfdmFsMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ZhbDJba2V5XTtcbiAgICByZXR1cm4ga2V5c1trZXldO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gQ2hyb21lZnVsQ29tcG9uZW50QmxvY2tFbGVtZW50KHByb3BzKSB7XG4gIHZhciBfcHJvcHMkY29tcG9uZW50QmxvY2s7XG4gIGNvbnN0IHNlbGVjdGVkID0gdXNlU2VsZWN0ZWQoKTtcbiAgY29uc3QgaXNWYWxpZCA9IHVzZU1lbW8oKCkgPT4gY2xpZW50U2lkZVZhbGlkYXRlUHJvcCh7XG4gICAga2luZDogJ29iamVjdCcsXG4gICAgZmllbGRzOiBwcm9wcy5jb21wb25lbnRCbG9jay5zY2hlbWFcbiAgfSwgcHJvcHMuZWxlbWVudFByb3BzLCB1bmRlZmluZWQpLCBbcHJvcHMuY29tcG9uZW50QmxvY2ssIHByb3BzLmVsZW1lbnRQcm9wc10pO1xuICBjb25zdCBbZWRpdE1vZGUsIHNldEVkaXRNb2RlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3Qgb25DbG9zZUVkaXRNb2RlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldEVkaXRNb2RlKGZhbHNlKTtcbiAgfSwgW10pO1xuICBjb25zdCBvblNob3dFZGl0TW9kZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRFZGl0TW9kZSh0cnVlKTtcbiAgfSwgW10pO1xuICBjb25zdCBDaHJvbWVmdWxUb29sYmFyID0gKF9wcm9wcyRjb21wb25lbnRCbG9jayA9IHByb3BzLmNvbXBvbmVudEJsb2NrLnRvb2xiYXIpICE9PSBudWxsICYmIF9wcm9wcyRjb21wb25lbnRCbG9jayAhPT0gdm9pZCAwID8gX3Byb3BzJGNvbXBvbmVudEJsb2NrIDogRGVmYXVsdFRvb2xiYXJXaXRoQ2hyb21lO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChCbG9ja1ByaW1pdGl2ZSwge1xuICAgIHNlbGVjdGVkOiBzZWxlY3RlZCxcbiAgICAuLi5wcm9wcy5hdHRyaWJ1dGVzLFxuICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4cyhGbGV4LCB7XG4gICAgICBnYXA6IFwibWVkaXVtXCIsXG4gICAgICBkaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goTm90RWRpdGFibGUsIHtcbiAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goVGV4dCwge1xuICAgICAgICAgIGNhc2luZzogXCJ1cHBlcmNhc2VcIixcbiAgICAgICAgICBjb2xvcjogXCJuZXV0cmFsU2Vjb25kYXJ5XCIsXG4gICAgICAgICAgd2VpZ2h0OiBcIm1lZGl1bVwiLFxuICAgICAgICAgIHNpemU6IFwic21hbGxcIixcbiAgICAgICAgICBjaGlsZHJlbjogcHJvcHMuY29tcG9uZW50QmxvY2subGFiZWxcbiAgICAgICAgfSlcbiAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4cyhGcmFnbWVudCQxLCB7XG4gICAgICAgIGNoaWxkcmVuOiBbcHJvcHMucmVuZGVyZWRCbG9jaywgLyojX19QVVJFX18qL2pzeChDaHJvbWVmdWxUb29sYmFyLCB7XG4gICAgICAgICAgaXNWYWxpZDogaXNWYWxpZCxcbiAgICAgICAgICBvblJlbW92ZTogcHJvcHMub25SZW1vdmUsXG4gICAgICAgICAgcHJvcHM6IHByb3BzLnByZXZpZXdQcm9wcyxcbiAgICAgICAgICBvblNob3dFZGl0TW9kZTogb25TaG93RWRpdE1vZGVcbiAgICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goRGlhbG9nQ29udGFpbmVyLCB7XG4gICAgICAgICAgb25EaXNtaXNzOiAoKSA9PiBvbkNsb3NlRWRpdE1vZGUoKSxcbiAgICAgICAgICBjaGlsZHJlbjogKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghZWRpdE1vZGUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3hzKERpYWxvZywge1xuICAgICAgICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3hzKEhlYWRpbmcsIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1wiRWRpdCBcIiwgcHJvcHMuY29tcG9uZW50QmxvY2subGFiZWxdXG4gICAgICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KEZvcm1WYWx1ZSwge1xuICAgICAgICAgICAgICAgIHByb3BzOiBwcm9wcy5wcmV2aWV3UHJvcHMsXG4gICAgICAgICAgICAgICAgb25DbG9zZTogb25DbG9zZUVkaXRNb2RlXG4gICAgICAgICAgICAgIH0pXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSkoKVxuICAgICAgICB9KV1cbiAgICAgIH0pXVxuICAgIH0pXG4gIH0pO1xufVxuXG4vKipcbiAqIFdyYXAgYmxvY2sgY29udGVudCwgZGVsaW1pdGluZyBpdCBmcm9tIHN1cnJvdW5kaW5nIGNvbnRlbnQsIGFuZCBwcm92aWRlIGFcbiAqIGZvY3VzIGluZGljYXRvciBiZWNhdXNlIHRoZSBjdXJzb3IgbWF5IG5vdCBiZSBwcmVzZW50LlxuICovXG5jb25zdCBCbG9ja1ByaW1pdGl2ZSA9IC8qI19fUFVSRV9fKi9mb3J3YXJkUmVmKGZ1bmN0aW9uIEJsb2NrUHJpbWl0aXZlKHtcbiAgY2hpbGRyZW4sXG4gIHNlbGVjdGVkLFxuICAuLi5hdHRyaWJ1dGVzXG59LCByZWYpIHtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goXCJkaXZcIiwge1xuICAgIC4uLmF0dHJpYnV0ZXMsXG4gICAgcmVmOiByZWYsXG4gICAgY2xhc3NOYW1lOiBjc3MoYmxvY2tFbGVtZW50U3BhY2luZywge1xuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICBwYWRkaW5nSW5saW5lU3RhcnQ6IHRva2VuU2NoZW1hLnNpemUuc3BhY2UueGxhcmdlLFxuICAgICAgbWFyZ2luQm90dG9tOiB0b2tlblNjaGVtYS5zaXplLnNwYWNlLnhsYXJnZSxcbiAgICAgICc6OmJlZm9yZSc6IHtcbiAgICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICAgICAgY29udGVudDogJ1wiIFwiJyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBzZWxlY3RlZCA/IHRva2VuU2NoZW1hLmNvbG9yLmFsaWFzLmJvcmRlclNlbGVjdGVkIDogdG9rZW5TY2hlbWEuY29sb3IuYWxpYXMuYm9yZGVySWRsZSxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiA0LFxuICAgICAgICB3aWR0aDogNCxcbiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgIGxlZnQ6IDAsXG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgYm90dG9tOiAwLFxuICAgICAgICB6SW5kZXg6IDFcbiAgICAgIH1cbiAgICB9KSxcbiAgICBjaGlsZHJlbjogY2hpbGRyZW5cbiAgfSk7XG59KTtcbmZ1bmN0aW9uIERlZmF1bHRUb29sYmFyV2l0aENocm9tZSh7XG4gIG9uU2hvd0VkaXRNb2RlLFxuICBvblJlbW92ZSxcbiAgaXNWYWxpZFxufSkge1xuICBjb25zdCBzdHJpbmdGb3JtYXR0ZXIgPSB1c2VMb2NhbGl6ZWRTdHJpbmdGb3JtYXR0ZXIobDEwbk1lc3NhZ2VzKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goTm90RWRpdGFibGUsIHtcbiAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeHMoRmxleCwge1xuICAgICAgZGlyZWN0aW9uOiBcImNvbHVtblwiLFxuICAgICAgZ2FwOiBcIm1lZGl1bVwiLFxuICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4cyhGbGV4LCB7XG4gICAgICAgIGFsaWduSXRlbXM6IFwiY2VudGVyXCIsXG4gICAgICAgIGdhcDogXCJyZWd1bGFyXCIsXG4gICAgICAgIFVOU0FGRV9zdHlsZToge1xuICAgICAgICAgIHVzZXJTZWxlY3Q6ICdub25lJ1xuICAgICAgICB9LFxuICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goQWN0aW9uQnV0dG9uLCB7XG4gICAgICAgICAgb25QcmVzczogKCkgPT4gb25TaG93RWRpdE1vZGUoKSxcbiAgICAgICAgICBjaGlsZHJlbjogc3RyaW5nRm9ybWF0dGVyLmZvcm1hdCgnZWRpdCcpXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4cyhUb29sdGlwVHJpZ2dlciwge1xuICAgICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChBY3Rpb25CdXR0b24sIHtcbiAgICAgICAgICAgIHByb21pbmVuY2U6IFwibG93XCIsXG4gICAgICAgICAgICBvblByZXNzOiBvblJlbW92ZSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KEljb24sIHtcbiAgICAgICAgICAgICAgc3JjOiB0cmFzaDJJY29uXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KFRvb2x0aXAsIHtcbiAgICAgICAgICAgIHRvbmU6IFwiY3JpdGljYWxcIixcbiAgICAgICAgICAgIGNoaWxkcmVuOiBzdHJpbmdGb3JtYXR0ZXIuZm9ybWF0KCdkZWxldGUnKVxuICAgICAgICAgIH0pXVxuICAgICAgICB9KV1cbiAgICAgIH0pLCAhaXNWYWxpZCAmJiAvKiNfX1BVUkVfXyovanN4KEZpZWxkTWVzc2FnZSwge1xuICAgICAgICBjaGlsZHJlbjogXCJDb250YWlucyBpbnZhbGlkIGZpZWxkcy4gUGxlYXNlIGVkaXQuXCJcbiAgICAgIH0pXVxuICAgIH0pXG4gIH0pO1xufVxuZnVuY3Rpb24gRm9ybVZhbHVlKHtcbiAgb25DbG9zZSxcbiAgcHJvcHNcbn0pIHtcbiAgY29uc3Qgc3RyaW5nRm9ybWF0dGVyID0gdXNlTG9jYWxpemVkU3RyaW5nRm9ybWF0dGVyKGwxMG5NZXNzYWdlcyk7XG4gIGNvbnN0IGZvcm1JZCA9IHVzZUlkJDEoKTtcbiAgY29uc3QgW2ZvcmNlVmFsaWRhdGlvbiwgc2V0Rm9yY2VWYWxpZGF0aW9uXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZSgoKSA9PiBwcmV2aWV3UHJvcHNUb1ZhbHVlKHByb3BzKSk7XG4gIGNvbnN0IHByZXZpZXdQcm9wcyA9IHVzZU1lbW8oKCkgPT4gY3JlYXRlR2V0UHJldmlld1Byb3BzKHByb3BzLnNjaGVtYSwgc2V0U3RhdGUsICgpID0+IHVuZGVmaW5lZCksIFtwcm9wcy5zY2hlbWFdKShzdGF0ZSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhGcmFnbWVudCwge1xuICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChDb250ZW50LCB7XG4gICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChGbGV4LCB7XG4gICAgICAgIGlkOiBmb3JtSWQsXG4gICAgICAgIGVsZW1lbnRUeXBlOiBcImZvcm1cIixcbiAgICAgICAgb25TdWJtaXQ6IGV2ZW50ID0+IHtcbiAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ICE9PSBldmVudC5jdXJyZW50VGFyZ2V0KSByZXR1cm47XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBpZiAoIWNsaWVudFNpZGVWYWxpZGF0ZVByb3AocHJvcHMuc2NoZW1hLCBzdGF0ZSwgdW5kZWZpbmVkKSkge1xuICAgICAgICAgICAgc2V0Rm9yY2VWYWxpZGF0aW9uKHRydWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZVRvVXBkYXRlcihzdGF0ZSwgcHJvcHMuc2NoZW1hKSk7XG4gICAgICAgICAgICBzZXRWYWx1ZVRvUHJldmlld1Byb3BzKHN0YXRlLCBwcm9wcyk7XG4gICAgICAgICAgICBvbkNsb3NlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgICAgIGdhcDogXCJ4eGxhcmdlXCIsXG4gICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KEZvcm1WYWx1ZUNvbnRlbnRGcm9tUHJldmlld1Byb3BzLCB7XG4gICAgICAgICAgLi4ucHJldmlld1Byb3BzLFxuICAgICAgICAgIGZvcmNlVmFsaWRhdGlvbjogZm9yY2VWYWxpZGF0aW9uXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pLCAvKiNfX1BVUkVfXyovanN4cyhCdXR0b25Hcm91cCwge1xuICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEJ1dHRvbiwge1xuICAgICAgICBvblByZXNzOiBvbkNsb3NlLFxuICAgICAgICBjaGlsZHJlbjogc3RyaW5nRm9ybWF0dGVyLmZvcm1hdCgnY2FuY2VsJylcbiAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KEJ1dHRvbiwge1xuICAgICAgICBmb3JtOiBmb3JtSWQsXG4gICAgICAgIHByb21pbmVuY2U6IFwiaGlnaFwiLFxuICAgICAgICB0eXBlOiBcInN1Ym1pdFwiLFxuICAgICAgICBjaGlsZHJlbjogXCJEb25lXCJcbiAgICAgIH0pXVxuICAgIH0pXVxuICB9KTtcbn1cblxuZnVuY3Rpb24gQ2hyb21lbGVzc0NvbXBvbmVudEJsb2NrRWxlbWVudChwcm9wcykge1xuICB2YXIgX3Byb3BzJGNvbXBvbmVudEJsb2NrO1xuICBjb25zdCBoYXNUb29sYmFyID0gcHJvcHMuY29tcG9uZW50QmxvY2sudG9vbGJhciAhPT0gbnVsbDtcbiAgY29uc3QgQ2hyb21lbGVzc1Rvb2xiYXIgPSAoX3Byb3BzJGNvbXBvbmVudEJsb2NrID0gcHJvcHMuY29tcG9uZW50QmxvY2sudG9vbGJhcikgIT09IG51bGwgJiYgX3Byb3BzJGNvbXBvbmVudEJsb2NrICE9PSB2b2lkIDAgPyBfcHJvcHMkY29tcG9uZW50QmxvY2sgOiBEZWZhdWx0VG9vbGJhcldpdGhvdXRDaHJvbWU7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFwiZGl2XCIsIHtcbiAgICAuLi5wcm9wcy5hdHRyaWJ1dGVzLFxuICAgIGNsYXNzTmFtZTogYmxvY2tFbGVtZW50U3BhY2luZyxcbiAgICBjaGlsZHJlbjogaGFzVG9vbGJhciA/IC8qI19fUFVSRV9fKi9qc3hzKEJsb2NrUG9wb3ZlclRyaWdnZXIsIHtcbiAgICAgIGVsZW1lbnQ6IHByb3BzLmVsZW1lbnQsXG4gICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goXCJkaXZcIiwge1xuICAgICAgICBjaGlsZHJlbjogcHJvcHMucmVuZGVyZWRCbG9ja1xuICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goQmxvY2tQb3BvdmVyLCB7XG4gICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KENocm9tZWxlc3NUb29sYmFyLCB7XG4gICAgICAgICAgb25SZW1vdmU6IHByb3BzLm9uUmVtb3ZlLFxuICAgICAgICAgIHByb3BzOiBwcm9wcy5wcmV2aWV3UHJvcHNcbiAgICAgICAgfSlcbiAgICAgIH0pXVxuICAgIH0pIDogLyojX19QVVJFX18qL2pzeChcImRpdlwiLCB7XG4gICAgICBjaGlsZHJlbjogcHJvcHMucmVuZGVyZWRCbG9ja1xuICAgIH0pXG4gIH0pO1xufVxuZnVuY3Rpb24gRGVmYXVsdFRvb2xiYXJXaXRob3V0Q2hyb21lKHtcbiAgb25SZW1vdmVcbn0pIHtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3hzKFRvb2x0aXBUcmlnZ2VyLCB7XG4gICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEFjdGlvbkJ1dHRvbiwge1xuICAgICAgb25QcmVzczogb25SZW1vdmUsXG4gICAgICBtYXJnaW46IFwicmVndWxhclwiLFxuICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goSWNvbiwge1xuICAgICAgICBzcmM6IHRyYXNoSWNvblxuICAgICAgfSlcbiAgICB9KSwgLyojX19QVVJFX18qL2pzeChUb29sdGlwLCB7XG4gICAgICB0b25lOiBcImNyaXRpY2FsXCIsXG4gICAgICBjaGlsZHJlbjogXCJSZW1vdmVcIlxuICAgIH0pXVxuICB9KTtcbn1cblxuZnVuY3Rpb24gZmluZENoaWxkUHJvcFBhdGhzRm9yUHJvcCh2YWx1ZSwgc2NoZW1hLCBwYXRoKSB7XG4gIHN3aXRjaCAoc2NoZW1hLmtpbmQpIHtcbiAgICBjYXNlICdmb3JtJzpcbiAgICAgIHJldHVybiBbXTtcbiAgICBjYXNlICdjaGlsZCc6XG4gICAgICByZXR1cm4gW3tcbiAgICAgICAgcGF0aDogcGF0aCxcbiAgICAgICAgb3B0aW9uczogc2NoZW1hLm9wdGlvbnNcbiAgICAgIH1dO1xuICAgIGNhc2UgJ2NvbmRpdGlvbmFsJzpcbiAgICAgIHJldHVybiBmaW5kQ2hpbGRQcm9wUGF0aHNGb3JQcm9wKHZhbHVlLnZhbHVlLCBzY2hlbWEudmFsdWVzW3ZhbHVlLmRpc2NyaW1pbmFudF0sIHBhdGguY29uY2F0KCd2YWx1ZScpKTtcbiAgICBjYXNlICdvYmplY3QnOlxuICAgICAge1xuICAgICAgICBjb25zdCBwYXRocyA9IFtdO1xuICAgICAgICBPYmplY3Qua2V5cyhzY2hlbWEuZmllbGRzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgcGF0aHMucHVzaCguLi5maW5kQ2hpbGRQcm9wUGF0aHNGb3JQcm9wKHZhbHVlW2tleV0sIHNjaGVtYS5maWVsZHNba2V5XSwgcGF0aC5jb25jYXQoa2V5KSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHBhdGhzO1xuICAgICAgfVxuICAgIGNhc2UgJ2FycmF5JzpcbiAgICAgIHtcbiAgICAgICAgY29uc3QgcGF0aHMgPSBbXTtcbiAgICAgICAgdmFsdWUuZm9yRWFjaCgodmFsLCBpKSA9PiB7XG4gICAgICAgICAgcGF0aHMucHVzaCguLi5maW5kQ2hpbGRQcm9wUGF0aHNGb3JQcm9wKHZhbCwgc2NoZW1hLmVsZW1lbnQsIHBhdGguY29uY2F0KGkpKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcGF0aHM7XG4gICAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGZpbmRDaGlsZFByb3BQYXRocyh2YWx1ZSwgcHJvcHMpIHtcbiAgY29uc3QgcHJvcFBhdGhzID0gZmluZENoaWxkUHJvcFBhdGhzRm9yUHJvcCh2YWx1ZSwge1xuICAgIGtpbmQ6ICdvYmplY3QnLFxuICAgIGZpZWxkczogcHJvcHNcbiAgfSwgW10pO1xuICBpZiAoIXByb3BQYXRocy5sZW5ndGgpIHtcbiAgICByZXR1cm4gW3tcbiAgICAgIHBhdGg6IHVuZGVmaW5lZCxcbiAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAga2luZDogJ2lubGluZScsXG4gICAgICAgIHBsYWNlaG9sZGVyOiAnJ1xuICAgICAgfVxuICAgIH1dO1xuICB9XG4gIHJldHVybiBwcm9wUGF0aHM7XG59XG5cbmZ1bmN0aW9uIGdldEFuY2VzdG9yQ29tcG9uZW50QmxvY2soZWRpdG9yKSB7XG4gIGlmIChlZGl0b3Iuc2VsZWN0aW9uKSB7XG4gICAgY29uc3QgYW5jZXN0b3JFbnRyeSA9IEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgIG1hdGNoOiBub2RlID0+IGlzQmxvY2sobm9kZSkgJiYgbm9kZS50eXBlICE9PSAncGFyYWdyYXBoJ1xuICAgIH0pO1xuICAgIGlmIChhbmNlc3RvckVudHJ5ICYmIChhbmNlc3RvckVudHJ5WzBdLnR5cGUgPT09ICdjb21wb25lbnQtYmxvY2stcHJvcCcgfHwgYW5jZXN0b3JFbnRyeVswXS50eXBlID09PSAnY29tcG9uZW50LWlubGluZS1wcm9wJykpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlzSW5zaWRlOiB0cnVlLFxuICAgICAgICBjb21wb25lbnRCbG9jazogRWRpdG9yLnBhcmVudChlZGl0b3IsIGFuY2VzdG9yRW50cnlbMV0pLFxuICAgICAgICBwcm9wOiBhbmNlc3RvckVudHJ5XG4gICAgICB9O1xuICAgIH1cbiAgfVxuICByZXR1cm4ge1xuICAgIGlzSW5zaWRlOiBmYWxzZVxuICB9O1xufVxuY29uc3QgYWxyZWFkeU5vcm1hbGl6ZWRUaGluZ3MgPSBuZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gbm9ybWFsaXplTm9kZVdpdGhpbkNvbXBvbmVudFByb3AoW25vZGUsIHBhdGhdLCBlZGl0b3IsIGZpZWxkT3B0aW9ucykge1xuICBsZXQgYWxyZWFkeU5vcm1hbGl6ZWROb2RlcyA9IGFscmVhZHlOb3JtYWxpemVkVGhpbmdzLmdldChmaWVsZE9wdGlvbnMpO1xuICBpZiAoIWFscmVhZHlOb3JtYWxpemVkTm9kZXMpIHtcbiAgICBhbHJlYWR5Tm9ybWFsaXplZE5vZGVzID0gbmV3IFdlYWtTZXQoKTtcbiAgICBhbHJlYWR5Tm9ybWFsaXplZFRoaW5ncy5zZXQoZmllbGRPcHRpb25zLCBhbHJlYWR5Tm9ybWFsaXplZE5vZGVzKTtcbiAgfVxuICBpZiAoYWxyZWFkeU5vcm1hbGl6ZWROb2Rlcy5oYXMobm9kZSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgbGV0IGRpZE5vcm1hbGl6YXRpb24gPSBmYWxzZTtcbiAgaWYgKGZpZWxkT3B0aW9ucy5pbmxpbmVNYXJrcyAhPT0gJ2luaGVyaXQnICYmIFRleHQkMS5pc1RleHQobm9kZSkpIHtcbiAgICBkaWROb3JtYWxpemF0aW9uID0gbm9ybWFsaXplVGV4dEJhc2VkT25JbmxpbmVNYXJrc0FuZFNvZnRCcmVha3MoW25vZGUsIHBhdGhdLCBlZGl0b3IsIGZpZWxkT3B0aW9ucy5pbmxpbmVNYXJrcywgZmllbGRPcHRpb25zLnNvZnRCcmVha3MpO1xuICB9XG4gIGlmIChFbGVtZW50JDEuaXNFbGVtZW50KG5vZGUpKSB7XG4gICAgbGV0IGNoaWxkcmVuSGFzQ2hhbmdlZCA9IG5vZGUuY2hpbGRyZW4ubWFwKChub2RlLCBpKSA9PiBub3JtYWxpemVOb2RlV2l0aGluQ29tcG9uZW50UHJvcChbbm9kZSwgWy4uLnBhdGgsIGldXSwgZWRpdG9yLCBmaWVsZE9wdGlvbnMpKVxuICAgIC8vIC5tYXAgdGhlbiAuc29tZSBiZWNhdXNlIHdlIGRvbid0IHdhbnQgdG8gZXhpdCBlYXJseVxuICAgIC5zb21lKHggPT4geCk7XG4gICAgaWYgKGZpZWxkT3B0aW9ucy5raW5kID09PSAnYmxvY2snKSB7XG4gICAgICBpZiAobm9kZS50eXBlID09PSAnY29tcG9uZW50LWJsb2NrJykge1xuICAgICAgICBpZiAoIWZpZWxkT3B0aW9ucy5jb21wb25lbnRCbG9ja3MpIHtcbiAgICAgICAgICBUcmFuc2Zvcm1zLnVud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgYXQ6IHBhdGhcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBkaWROb3JtYWxpemF0aW9uID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGlkTm9ybWFsaXphdGlvbiA9IG5vcm1hbGl6ZUVsZW1lbnRCYXNlZE9uRG9jdW1lbnRGZWF0dXJlcyhbbm9kZSwgcGF0aF0sIGVkaXRvciwgZmllbGRPcHRpb25zLmRvY3VtZW50RmVhdHVyZXMpIHx8IGNoaWxkcmVuSGFzQ2hhbmdlZDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZGlkTm9ybWFsaXphdGlvbiA9IG5vcm1hbGl6ZUlubGluZUJhc2VkT25MaW5rcyhbbm9kZSwgcGF0aF0sIGVkaXRvciwgZmllbGRPcHRpb25zLmRvY3VtZW50RmVhdHVyZXMubGlua3MpO1xuICAgIH1cbiAgfVxuICBpZiAoZGlkTm9ybWFsaXphdGlvbiA9PT0gZmFsc2UpIHtcbiAgICBhbHJlYWR5Tm9ybWFsaXplZE5vZGVzLmFkZChub2RlKTtcbiAgfVxuICByZXR1cm4gZGlkTm9ybWFsaXphdGlvbjtcbn1cbmZ1bmN0aW9uIGNhblNjaGVtYUNvbnRhaW5DaGlsZEZpZWxkKHJvb3RTY2hlbWEpIHtcbiAgY29uc3QgcXVldWUgPSBuZXcgU2V0KFtyb290U2NoZW1hXSk7XG4gIGZvciAoY29uc3Qgc2NoZW1hIG9mIHF1ZXVlKSB7XG4gICAgaWYgKHNjaGVtYS5raW5kID09PSAnZm9ybScpIDsgZWxzZSBpZiAoc2NoZW1hLmtpbmQgPT09ICdjaGlsZCcpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAoc2NoZW1hLmtpbmQgPT09ICdhcnJheScpIHtcbiAgICAgIHF1ZXVlLmFkZChzY2hlbWEuZWxlbWVudCk7XG4gICAgfSBlbHNlIGlmIChzY2hlbWEua2luZCA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGZvciAoY29uc3QgaW5uZXJQcm9wIG9mIE9iamVjdC52YWx1ZXMoc2NoZW1hLmZpZWxkcykpIHtcbiAgICAgICAgcXVldWUuYWRkKGlubmVyUHJvcCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChzY2hlbWEua2luZCA9PT0gJ2NvbmRpdGlvbmFsJykge1xuICAgICAgZm9yIChjb25zdCBpbm5lclByb3Agb2YgT2JqZWN0LnZhbHVlcyhzY2hlbWEudmFsdWVzKSkge1xuICAgICAgICBxdWV1ZS5hZGQoaW5uZXJQcm9wKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYXNzZXJ0TmV2ZXIoc2NoZW1hKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gZG9lc1NjaGVtYU9ubHlFdmVyQ29udGFpbkFTaW5nbGVDaGlsZEZpZWxkKHJvb3RTY2hlbWEpIHtcbiAgY29uc3QgcXVldWUgPSBuZXcgU2V0KFtyb290U2NoZW1hXSk7XG4gIGxldCBoYXNGb3VuZENoaWxkRmllbGQgPSBmYWxzZTtcbiAgZm9yIChjb25zdCBzY2hlbWEgb2YgcXVldWUpIHtcbiAgICBpZiAoc2NoZW1hLmtpbmQgPT09ICdmb3JtJykgOyBlbHNlIGlmIChzY2hlbWEua2luZCA9PT0gJ2NoaWxkJykge1xuICAgICAgaWYgKGhhc0ZvdW5kQ2hpbGRGaWVsZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBoYXNGb3VuZENoaWxkRmllbGQgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoc2NoZW1hLmtpbmQgPT09ICdhcnJheScpIHtcbiAgICAgIGlmIChjYW5TY2hlbWFDb250YWluQ2hpbGRGaWVsZChzY2hlbWEuZWxlbWVudCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoc2NoZW1hLmtpbmQgPT09ICdvYmplY3QnKSB7XG4gICAgICBmb3IgKGNvbnN0IGlubmVyUHJvcCBvZiBPYmplY3QudmFsdWVzKHNjaGVtYS5maWVsZHMpKSB7XG4gICAgICAgIHF1ZXVlLmFkZChpbm5lclByb3ApO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoc2NoZW1hLmtpbmQgPT09ICdjb25kaXRpb25hbCcpIHtcbiAgICAgIGZvciAoY29uc3QgaW5uZXJQcm9wIG9mIE9iamVjdC52YWx1ZXMoc2NoZW1hLnZhbHVlcykpIHtcbiAgICAgICAgcXVldWUuYWRkKGlubmVyUHJvcCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGFzc2VydE5ldmVyKHNjaGVtYSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBoYXNGb3VuZENoaWxkRmllbGQ7XG59XG5mdW5jdGlvbiBmaW5kQXJyYXlGaWVsZHNXaXRoU2luZ2xlQ2hpbGRGaWVsZChzY2hlbWEsIHZhbHVlKSB7XG4gIGNvbnN0IHByb3BQYXRocyA9IFtdO1xuICB0cmF2ZXJzZVByb3BzKHNjaGVtYSwgdmFsdWUsIChzY2hlbWEsIHZhbHVlLCBwYXRoKSA9PiB7XG4gICAgaWYgKHNjaGVtYS5raW5kID09PSAnYXJyYXknICYmIGRvZXNTY2hlbWFPbmx5RXZlckNvbnRhaW5BU2luZ2xlQ2hpbGRGaWVsZChzY2hlbWEuZWxlbWVudCkpIHtcbiAgICAgIHByb3BQYXRocy5wdXNoKFtwYXRoLCBzY2hlbWFdKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcHJvcFBhdGhzO1xufVxuZnVuY3Rpb24gaXNFbXB0eUNoaWxkRmllbGROb2RlKGVsZW1lbnQpIHtcbiAgY29uc3QgZmlyc3RDaGlsZCA9IGVsZW1lbnQuY2hpbGRyZW5bMF07XG4gIHJldHVybiBlbGVtZW50LmNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJiAoZWxlbWVudC50eXBlID09PSAnY29tcG9uZW50LWlubGluZS1wcm9wJyAmJiBmaXJzdENoaWxkLnR5cGUgPT09IHVuZGVmaW5lZCAmJiBmaXJzdENoaWxkLnRleHQgPT09ICcnIHx8IGVsZW1lbnQudHlwZSA9PT0gJ2NvbXBvbmVudC1ibG9jay1wcm9wJyAmJiBmaXJzdENoaWxkLnR5cGUgPT09ICdwYXJhZ3JhcGgnICYmIGZpcnN0Q2hpbGQuY2hpbGRyZW4ubGVuZ3RoID09PSAxICYmIGZpcnN0Q2hpbGQuY2hpbGRyZW5bMF0udHlwZSA9PT0gdW5kZWZpbmVkICYmIGZpcnN0Q2hpbGQuY2hpbGRyZW5bMF0udGV4dCA9PT0gJycpO1xufVxuZnVuY3Rpb24gd2l0aENvbXBvbmVudEJsb2NrcyhibG9ja0NvbXBvbmVudHMsIGVkaXRvckRvY3VtZW50RmVhdHVyZXMsIGVkaXRvcikge1xuICAvLyBub3RlIHRoYXQgY29uZmxpY3RzIGJldHdlZW4gdGhlIGVkaXRvciBkb2N1bWVudCBmZWF0dXJlc1xuICAvLyBhbmQgdGhlIGNoaWxkIGZpZWxkIGRvY3VtZW50IGZlYXR1cmVzIGFyZSBkZWFsdCB3aXRoIGVsc2V3aGVyZVxuICBjb25zdCBtZW1vaXplZEdldERvY3VtZW50RmVhdHVyZXNGb3JDaGlsZEZpZWxkID0gd2Vha01lbW9pemUob3B0aW9ucyA9PiB7XG4gICAgcmV0dXJuIGdldERvY3VtZW50RmVhdHVyZXNGb3JDaGlsZEZpZWxkKGVkaXRvckRvY3VtZW50RmVhdHVyZXMsIG9wdGlvbnMpO1xuICB9KTtcbiAgY29uc3Qge1xuICAgIG5vcm1hbGl6ZU5vZGUsXG4gICAgZGVsZXRlQmFja3dhcmQsXG4gICAgaW5zZXJ0QnJlYWtcbiAgfSA9IGVkaXRvcjtcbiAgZWRpdG9yLmRlbGV0ZUJhY2t3YXJkID0gdW5pdCA9PiB7XG4gICAgaWYgKGVkaXRvci5zZWxlY3Rpb24pIHtcbiAgICAgIGNvbnN0IGFuY2VzdG9yQ29tcG9uZW50QmxvY2sgPSBnZXRBbmNlc3RvckNvbXBvbmVudEJsb2NrKGVkaXRvcik7XG4gICAgICBpZiAoYW5jZXN0b3JDb21wb25lbnRCbG9jay5pc0luc2lkZSAmJiBSYW5nZS5pc0NvbGxhcHNlZChlZGl0b3Iuc2VsZWN0aW9uKSAmJiBFZGl0b3IuaXNTdGFydChlZGl0b3IsIGVkaXRvci5zZWxlY3Rpb24uYW5jaG9yLCBhbmNlc3RvckNvbXBvbmVudEJsb2NrLnByb3BbMV0pICYmIGFuY2VzdG9yQ29tcG9uZW50QmxvY2sucHJvcFsxXVthbmNlc3RvckNvbXBvbmVudEJsb2NrLnByb3BbMV0ubGVuZ3RoIC0gMV0gPT09IDApIHtcbiAgICAgICAgVHJhbnNmb3Jtcy51bndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICBhdDogYW5jZXN0b3JDb21wb25lbnRCbG9jay5jb21wb25lbnRCbG9ja1sxXVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBkZWxldGVCYWNrd2FyZCh1bml0KTtcbiAgfTtcbiAgZWRpdG9yLmluc2VydEJyZWFrID0gKCkgPT4ge1xuICAgIGNvbnN0IGFuY2VzdG9yQ29tcG9uZW50QmxvY2sgPSBnZXRBbmNlc3RvckNvbXBvbmVudEJsb2NrKGVkaXRvcik7XG4gICAgaWYgKGVkaXRvci5zZWxlY3Rpb24gJiYgYW5jZXN0b3JDb21wb25lbnRCbG9jay5pc0luc2lkZSkge1xuICAgICAgY29uc3Qge1xuICAgICAgICBwcm9wOiBbY29tcG9uZW50UHJvcE5vZGUsIGNvbXBvbmVudFByb3BQYXRoXSxcbiAgICAgICAgY29tcG9uZW50QmxvY2s6IFtjb21wb25lbnRCbG9ja05vZGUsIGNvbXBvbmVudEJsb2NrUGF0aF1cbiAgICAgIH0gPSBhbmNlc3RvckNvbXBvbmVudEJsb2NrO1xuICAgICAgY29uc3QgaXNMYXN0UHJvcCA9IGNvbXBvbmVudFByb3BQYXRoW2NvbXBvbmVudFByb3BQYXRoLmxlbmd0aCAtIDFdID09PSBjb21wb25lbnRCbG9ja05vZGUuY2hpbGRyZW4ubGVuZ3RoIC0gMTtcbiAgICAgIGlmIChjb21wb25lbnRQcm9wTm9kZS50eXBlID09PSAnY29tcG9uZW50LWJsb2NrLXByb3AnKSB7XG4gICAgICAgIGNvbnN0IFtbcGFyYWdyYXBoTm9kZSwgcGFyYWdyYXBoUGF0aF1dID0gRWRpdG9yLm5vZGVzKGVkaXRvciwge1xuICAgICAgICAgIG1hdGNoOiBub2RlID0+IG5vZGUudHlwZSA9PT0gJ3BhcmFncmFwaCdcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGlzTGFzdFBhcmFncmFwaCA9IHBhcmFncmFwaFBhdGhbcGFyYWdyYXBoUGF0aC5sZW5ndGggLSAxXSA9PT0gY29tcG9uZW50UHJvcE5vZGUuY2hpbGRyZW4ubGVuZ3RoIC0gMTtcbiAgICAgICAgaWYgKE5vZGUuc3RyaW5nKHBhcmFncmFwaE5vZGUpID09PSAnJyAmJiBpc0xhc3RQYXJhZ3JhcGgpIHtcbiAgICAgICAgICBpZiAoaXNMYXN0UHJvcCkge1xuICAgICAgICAgICAgVHJhbnNmb3Jtcy5tb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgIGF0OiBwYXJhZ3JhcGhQYXRoLFxuICAgICAgICAgICAgICB0bzogUGF0aC5uZXh0KGFuY2VzdG9yQ29tcG9uZW50QmxvY2suY29tcG9uZW50QmxvY2tbMV0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgVHJhbnNmb3Jtcy5tb3ZlKGVkaXRvciwge1xuICAgICAgICAgICAgICBkaXN0YW5jZTogMSxcbiAgICAgICAgICAgICAgdW5pdDogJ2xpbmUnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgIGF0OiBwYXJhZ3JhcGhQYXRoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoY29tcG9uZW50UHJvcE5vZGUudHlwZSA9PT0gJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCcpIHtcbiAgICAgICAgRWRpdG9yLndpdGhvdXROb3JtYWxpemluZyhlZGl0b3IsICgpID0+IHtcbiAgICAgICAgICBjb25zdCBjb21wb25lbnRCbG9jayA9IGJsb2NrQ29tcG9uZW50c1tjb21wb25lbnRCbG9ja05vZGUuY29tcG9uZW50XTtcbiAgICAgICAgICBpZiAoY29tcG9uZW50UHJvcE5vZGUucHJvcFBhdGggIT09IHVuZGVmaW5lZCAmJiBjb21wb25lbnRCbG9jayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCByb290U2NoZW1hID0ge1xuICAgICAgICAgICAgICBraW5kOiAnb2JqZWN0JyxcbiAgICAgICAgICAgICAgZmllbGRzOiBjb21wb25lbnRCbG9jay5zY2hlbWFcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBhbmNlc3RvckZpZWxkcyA9IGdldEFuY2VzdG9yU2NoZW1hcyhyb290U2NoZW1hLCBjb21wb25lbnRQcm9wTm9kZS5wcm9wUGF0aCwgY29tcG9uZW50QmxvY2tOb2RlLnByb3BzKTtcbiAgICAgICAgICAgIGNvbnN0IGlkeCA9IFsuLi5hbmNlc3RvckZpZWxkc10ucmV2ZXJzZSgpLmZpbmRJbmRleChpdGVtID0+IGl0ZW0ua2luZCA9PT0gJ2FycmF5Jyk7XG4gICAgICAgICAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgICAgICAgICBjb25zdCBhcnJheUZpZWxkSWR4ID0gYW5jZXN0b3JGaWVsZHMubGVuZ3RoIC0gMSAtIGlkeDtcbiAgICAgICAgICAgICAgY29uc3QgYXJyYXlGaWVsZCA9IGFuY2VzdG9yRmllbGRzW2FycmF5RmllbGRJZHhdO1xuICAgICAgICAgICAgICBhc3NlcnQoYXJyYXlGaWVsZC5raW5kID09PSAnYXJyYXknKTtcbiAgICAgICAgICAgICAgY29uc3QgdmFsID0gZ2V0VmFsdWVBdFByb3BQYXRoKGNvbXBvbmVudEJsb2NrTm9kZS5wcm9wcywgY29tcG9uZW50UHJvcE5vZGUucHJvcFBhdGguc2xpY2UoMCwgYXJyYXlGaWVsZElkeCkpO1xuICAgICAgICAgICAgICBpZiAoZG9lc1NjaGVtYU9ubHlFdmVyQ29udGFpbkFTaW5nbGVDaGlsZEZpZWxkKGFycmF5RmllbGQuZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoTm9kZS5zdHJpbmcoY29tcG9uZW50UHJvcE5vZGUpID09PSAnJyAmJiB2YWwubGVuZ3RoIC0gMSA9PT0gY29tcG9uZW50UHJvcE5vZGUucHJvcFBhdGhbYXJyYXlGaWVsZElkeF0pIHtcbiAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgICAgICAgIGF0OiBjb21wb25lbnRQcm9wUGF0aFxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICBpZiAoaXNMYXN0UHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdwYXJhZ3JhcGgnLFxuICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJydcbiAgICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgYXQ6IFBhdGgubmV4dChjb21wb25lbnRCbG9ja1BhdGgpXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBUcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIFBhdGgubmV4dChjb21wb25lbnRCbG9ja1BhdGgpKTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMubW92ZShlZGl0b3IsIHtcbiAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZTogMSxcbiAgICAgICAgICAgICAgICAgICAgICB1bml0OiAnbGluZSdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGluc2VydEJyZWFrKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBUcmFuc2Zvcm1zLnNwbGl0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICBhbHdheXM6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25zdCBzcGxpdE5vZGVQYXRoID0gUGF0aC5uZXh0KGNvbXBvbmVudFByb3BQYXRoKTtcbiAgICAgICAgICBpZiAoaXNMYXN0UHJvcCkge1xuICAgICAgICAgICAgVHJhbnNmb3Jtcy5tb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgIGF0OiBzcGxpdE5vZGVQYXRoLFxuICAgICAgICAgICAgICB0bzogUGF0aC5uZXh0KGNvbXBvbmVudEJsb2NrUGF0aClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtb3ZlQ2hpbGRyZW4oZWRpdG9yLCBzcGxpdE5vZGVQYXRoLCBbLi4uUGF0aC5uZXh0KHNwbGl0Tm9kZVBhdGgpLCAwXSk7XG4gICAgICAgICAgICBUcmFuc2Zvcm1zLnJlbW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgICBhdDogc3BsaXROb2RlUGF0aFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBpbnNlcnRCcmVhaygpO1xuICB9O1xuICBlZGl0b3Iubm9ybWFsaXplTm9kZSA9IGVudHJ5ID0+IHtcbiAgICBjb25zdCBbbm9kZSwgcGF0aF0gPSBlbnRyeTtcbiAgICBpZiAobm9kZS50eXBlID09PSAnY29tcG9uZW50LWlubGluZS1wcm9wJyAmJiAhbm9kZS5wcm9wUGF0aCAmJiAobm9kZS5jaGlsZHJlbi5sZW5ndGggIT09IDEgfHwgIVRleHQkMS5pc1RleHQobm9kZS5jaGlsZHJlblswXSkgfHwgbm9kZS5jaGlsZHJlblswXS50ZXh0ICE9PSAnJykpIHtcbiAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgIGF0OiBwYXRoXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG5vZGUudHlwZSA9PT0gJ2NvbXBvbmVudC1ibG9jaycpIHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudEJsb2NrID0gYmxvY2tDb21wb25lbnRzW25vZGUuY29tcG9uZW50XTtcbiAgICAgIGlmIChjb21wb25lbnRCbG9jaykge1xuICAgICAgICBjb25zdCByb290U2NoZW1hID0ge1xuICAgICAgICAgIGtpbmQ6ICdvYmplY3QnLFxuICAgICAgICAgIGZpZWxkczogY29tcG9uZW50QmxvY2suc2NoZW1hXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRQcm9wcyA9IGFkZE1pc3NpbmdGaWVsZHMobm9kZS5wcm9wcywgcm9vdFNjaGVtYSk7XG4gICAgICAgIGlmICh1cGRhdGVkUHJvcHMgIT09IG5vZGUucHJvcHMpIHtcbiAgICAgICAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgcHJvcHM6IHVwZGF0ZWRQcm9wc1xuICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgIGF0OiBwYXRoXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgW3Byb3BQYXRoLCBhcnJheUZpZWxkXSBvZiBmaW5kQXJyYXlGaWVsZHNXaXRoU2luZ2xlQ2hpbGRGaWVsZChyb290U2NoZW1hLCBub2RlLnByb3BzKSkge1xuICAgICAgICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJiBub2RlLmNoaWxkcmVuWzBdLnR5cGUgPT09ICdjb21wb25lbnQtaW5saW5lLXByb3AnICYmIG5vZGUuY2hpbGRyZW5bMF0ucHJvcFBhdGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IG5vZGVzV2l0aGluID0gW107XG4gICAgICAgICAgZm9yIChjb25zdCBbaWR4LCBjaGlsZE5vZGVdIG9mIG5vZGUuY2hpbGRyZW4uZW50cmllcygpKSB7XG4gICAgICAgICAgICBpZiAoKGNoaWxkTm9kZS50eXBlID09PSAnY29tcG9uZW50LWJsb2NrLXByb3AnIHx8IGNoaWxkTm9kZS50eXBlID09PSAnY29tcG9uZW50LWlubGluZS1wcm9wJykgJiYgY2hpbGROb2RlLnByb3BQYXRoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgY29uc3Qgc3ViUGF0aCA9IGNoaWxkTm9kZS5wcm9wUGF0aC5jb25jYXQoKTtcbiAgICAgICAgICAgICAgd2hpbGUgKHN1YlBhdGgubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzdWJQYXRoLnBvcCgpID09PSAnbnVtYmVyJykgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGFyZUFycmF5c0VxdWFsKHByb3BQYXRoLCBzdWJQYXRoKSkge1xuICAgICAgICAgICAgICAgIG5vZGVzV2l0aGluLnB1c2goW2lkeCwgY2hpbGROb2RlXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgYXJyVmFsID0gZ2V0VmFsdWVBdFByb3BQYXRoKG5vZGUucHJvcHMsIHByb3BQYXRoKTtcbiAgICAgICAgICBjb25zdCBwcmV2S2V5cyA9IGdldEtleXNGb3JBcnJheVZhbHVlKGFyclZhbCk7XG4gICAgICAgICAgY29uc3QgcHJldktleXNTZXQgPSBuZXcgU2V0KHByZXZLZXlzKTtcbiAgICAgICAgICBjb25zdCBhbHJlYWR5VXNlZEluZGljaWVzID0gbmV3IFNldCgpO1xuICAgICAgICAgIGNvbnN0IG5ld1ZhbCA9IFtdO1xuICAgICAgICAgIGNvbnN0IG5ld0tleXMgPSBbXTtcbiAgICAgICAgICBjb25zdCBnZXROZXdLZXkgPSAoKSA9PiB7XG4gICAgICAgICAgICBsZXQga2V5ID0gZ2V0TmV3QXJyYXlFbGVtZW50S2V5KCk7XG4gICAgICAgICAgICB3aGlsZSAocHJldktleXNTZXQuaGFzKGtleSkpIHtcbiAgICAgICAgICAgICAga2V5ID0gZ2V0TmV3QXJyYXlFbGVtZW50S2V5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICAgIH07XG4gICAgICAgICAgZm9yIChjb25zdCBbLCBub2RlXSBvZiBub2Rlc1dpdGhpbikge1xuICAgICAgICAgICAgY29uc3QgaWR4RnJvbVZhbHVlID0gbm9kZS5wcm9wUGF0aFtwcm9wUGF0aC5sZW5ndGhdO1xuICAgICAgICAgICAgYXNzZXJ0KHR5cGVvZiBpZHhGcm9tVmFsdWUgPT09ICdudW1iZXInKTtcbiAgICAgICAgICAgIGlmIChhcnJWYWwubGVuZ3RoIDw9IGlkeEZyb21WYWx1ZSB8fCBhbHJlYWR5VXNlZEluZGljaWVzLmhhcyhpZHhGcm9tVmFsdWUpICYmIGlzRW1wdHlDaGlsZEZpZWxkTm9kZShub2RlKSkge1xuICAgICAgICAgICAgICBuZXdWYWwucHVzaChnZXRJbml0aWFsUHJvcHNWYWx1ZShhcnJheUZpZWxkLmVsZW1lbnQpKTtcbiAgICAgICAgICAgICAgbmV3S2V5cy5wdXNoKGdldE5ld0tleSgpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGFscmVhZHlVc2VkSW5kaWNpZXMuYWRkKGlkeEZyb21WYWx1ZSk7XG4gICAgICAgICAgICAgIG5ld1ZhbC5wdXNoKGFyclZhbFtpZHhGcm9tVmFsdWVdKTtcbiAgICAgICAgICAgICAgbmV3S2V5cy5wdXNoKGFscmVhZHlVc2VkSW5kaWNpZXMuaGFzKGlkeEZyb21WYWx1ZSkgPyBnZXROZXdLZXkoKSA6IHByZXZLZXlzW2lkeEZyb21WYWx1ZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBzZXRLZXlzRm9yQXJyYXlWYWx1ZShuZXdWYWwsIG5ld0tleXMpO1xuICAgICAgICAgIGlmICghYXJlQXJyYXlzRXF1YWwoYXJyVmFsLCBuZXdWYWwpKSB7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm1lZFByb3BzID0gcmVwbGFjZVZhbHVlQXRQcm9wUGF0aChyb290U2NoZW1hLCBub2RlLnByb3BzLCBuZXdWYWwsIHByb3BQYXRoKTtcbiAgICAgICAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgIHByb3BzOiB0cmFuc2Zvcm1lZFByb3BzXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgIGF0OiBwYXRoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2lkeCwgW2lkeEluQ2hpbGRyZW5PZkJsb2NrLCBub2RlV2l0aGluXV0gb2Ygbm9kZXNXaXRoaW4uZW50cmllcygpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IG5ld1Byb3BQYXRoID0gWy4uLm5vZGVXaXRoaW4ucHJvcFBhdGhdO1xuICAgICAgICAgICAgICBuZXdQcm9wUGF0aFtwcm9wUGF0aC5sZW5ndGhdID0gaWR4O1xuICAgICAgICAgICAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgICAgIHByb3BQYXRoOiBuZXdQcm9wUGF0aFxuICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgYXQ6IFsuLi5wYXRoLCBpZHhJbkNoaWxkcmVuT2ZCbG9ja11cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1pc3NpbmdLZXlzID0gbmV3IE1hcChmaW5kQ2hpbGRQcm9wUGF0aHMobm9kZS5wcm9wcywgY29tcG9uZW50QmxvY2suc2NoZW1hKS5tYXAoeCA9PiBbSlNPTi5zdHJpbmdpZnkoeC5wYXRoKSwgeC5vcHRpb25zLmtpbmRdKSk7XG4gICAgICAgIG5vZGUuY2hpbGRyZW4uZm9yRWFjaChub2RlID0+IHtcbiAgICAgICAgICBhc3NlcnQobm9kZS50eXBlID09PSAnY29tcG9uZW50LWJsb2NrLXByb3AnIHx8IG5vZGUudHlwZSA9PT0gJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCcpO1xuICAgICAgICAgIG1pc3NpbmdLZXlzLmRlbGV0ZShKU09OLnN0cmluZ2lmeShub2RlLnByb3BQYXRoKSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAobWlzc2luZ0tleXMuc2l6ZSkge1xuICAgICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCBbLi4ubWlzc2luZ0tleXNdLm1hcCgoW3Byb3AsIGtpbmRdKSA9PiAoe1xuICAgICAgICAgICAgdHlwZTogYGNvbXBvbmVudC0ke2tpbmR9LXByb3BgLFxuICAgICAgICAgICAgcHJvcFBhdGg6IHByb3AgPyBKU09OLnBhcnNlKHByb3ApIDogcHJvcCxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgICAgICB0ZXh0OiAnJ1xuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9KSksIHtcbiAgICAgICAgICAgIGF0OiBbLi4ucGF0aCwgbm9kZS5jaGlsZHJlbi5sZW5ndGhdXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZvdW5kUHJvcHMgPSBuZXcgU2V0KCk7XG4gICAgICAgIGNvbnN0IHN0cmluZ2lmaWVkSW5saW5lUHJvcFBhdGhzID0ge307XG4gICAgICAgIGZpbmRDaGlsZFByb3BQYXRocyhub2RlLnByb3BzLCBibG9ja0NvbXBvbmVudHNbbm9kZS5jb21wb25lbnRdLnNjaGVtYSkuZm9yRWFjaCgoeCwgaW5kZXgpID0+IHtcbiAgICAgICAgICBzdHJpbmdpZmllZElubGluZVByb3BQYXRoc1tKU09OLnN0cmluZ2lmeSh4LnBhdGgpXSA9IHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHgub3B0aW9ucyxcbiAgICAgICAgICAgIGluZGV4XG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIGZvciAoY29uc3QgW2luZGV4LCBjaGlsZE5vZGVdIG9mIG5vZGUuY2hpbGRyZW4uZW50cmllcygpKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgIC8vIGNoaWxkcmVuIHRoYXQgYXJlIG5vdCB0aGVzZSB3aWxsIGJlIGhhbmRsZWQgYnlcbiAgICAgICAgICAvLyB0aGUgZ2VuZXJpYyBhbGxvd2VkQ2hpbGRyZW4gbm9ybWFsaXphdGlvblxuICAgICAgICAgIGNoaWxkTm9kZS50eXBlICE9PSAnY29tcG9uZW50LWlubGluZS1wcm9wJyAmJiBjaGlsZE5vZGUudHlwZSAhPT0gJ2NvbXBvbmVudC1ibG9jay1wcm9wJykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGNoaWxkUGF0aCA9IFsuLi5wYXRoLCBpbmRleF07XG4gICAgICAgICAgY29uc3Qgc3RyaW5naWZpZWRQcm9wUGF0aCA9IEpTT04uc3RyaW5naWZ5KGNoaWxkTm9kZS5wcm9wUGF0aCk7XG4gICAgICAgICAgaWYgKHN0cmluZ2lmaWVkSW5saW5lUHJvcFBhdGhzW3N0cmluZ2lmaWVkUHJvcFBhdGhdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgIGF0OiBjaGlsZFBhdGhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZm91bmRQcm9wcy5oYXMoc3RyaW5naWZpZWRQcm9wUGF0aCkpIHtcbiAgICAgICAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgIGF0OiBjaGlsZFBhdGhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmb3VuZFByb3BzLmFkZChzdHJpbmdpZmllZFByb3BQYXRoKTtcbiAgICAgICAgICBjb25zdCBwcm9wSW5mbyA9IHN0cmluZ2lmaWVkSW5saW5lUHJvcFBhdGhzW3N0cmluZ2lmaWVkUHJvcFBhdGhdO1xuICAgICAgICAgIGNvbnN0IGV4cGVjdGVkSW5kZXggPSBwcm9wSW5mby5pbmRleDtcbiAgICAgICAgICBpZiAoaW5kZXggIT09IGV4cGVjdGVkSW5kZXgpIHtcbiAgICAgICAgICAgIFRyYW5zZm9ybXMubW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgICBhdDogY2hpbGRQYXRoLFxuICAgICAgICAgICAgICB0bzogWy4uLnBhdGgsIGV4cGVjdGVkSW5kZXhdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgZXhwZWN0ZWRDaGlsZE5vZGVUeXBlID0gYGNvbXBvbmVudC0ke3Byb3BJbmZvLm9wdGlvbnMua2luZH0tcHJvcGA7XG4gICAgICAgICAgaWYgKGNoaWxkTm9kZS50eXBlICE9PSBleHBlY3RlZENoaWxkTm9kZVR5cGUpIHtcbiAgICAgICAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgIHR5cGU6IGV4cGVjdGVkQ2hpbGROb2RlVHlwZVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICBhdDogY2hpbGRQYXRoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgZG9jdW1lbnRGZWF0dXJlcyA9IG1lbW9pemVkR2V0RG9jdW1lbnRGZWF0dXJlc0ZvckNoaWxkRmllbGQocHJvcEluZm8ub3B0aW9ucyk7XG4gICAgICAgICAgaWYgKG5vcm1hbGl6ZU5vZGVXaXRoaW5Db21wb25lbnRQcm9wKFtjaGlsZE5vZGUsIGNoaWxkUGF0aF0sIGVkaXRvciwgZG9jdW1lbnRGZWF0dXJlcykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgbm9ybWFsaXplTm9kZShlbnRyeSk7XG4gIH07XG4gIHJldHVybiBlZGl0b3I7XG59XG5cbi8vIHRoZSBvbmx5IHRoaW5nIHRoYXQgdGhpcyB3aWxsIGZpeCBpcyBhIG5ldyBmaWVsZCBiZWluZyBhZGRlZCB0byBhbiBvYmplY3QgZmllbGQsIG5vdGhpbmcgZWxzZS5cbmZ1bmN0aW9uIGFkZE1pc3NpbmdGaWVsZHModmFsdWUsIHNjaGVtYSkge1xuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdjaGlsZCcgfHwgc2NoZW1hLmtpbmQgPT09ICdmb3JtJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdjb25kaXRpb25hbCcpIHtcbiAgICBjb25zdCBjb25kaXRpb25hbFZhbHVlID0gdmFsdWU7XG4gICAgY29uc3QgdXBkYXRlZElubmVyVmFsdWUgPSBhZGRNaXNzaW5nRmllbGRzKGNvbmRpdGlvbmFsVmFsdWUudmFsdWUsIHNjaGVtYS52YWx1ZXNbY29uZGl0aW9uYWxWYWx1ZS5kaXNjcmltaW5hbnQudG9TdHJpbmcoKV0pO1xuICAgIGlmICh1cGRhdGVkSW5uZXJWYWx1ZSA9PT0gY29uZGl0aW9uYWxWYWx1ZS52YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgZGlzY3JpbWluYW50OiBjb25kaXRpb25hbFZhbHVlLmRpc2NyaW1pbmFudCxcbiAgICAgIHZhbHVlOiB1cGRhdGVkSW5uZXJWYWx1ZVxuICAgIH07XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnYXJyYXknKSB7XG4gICAgY29uc3QgYXJyVmFsdWUgPSB2YWx1ZTtcbiAgICBjb25zdCBuZXdBcnJWYWx1ZSA9IGFyclZhbHVlLm1hcCh4ID0+IGFkZE1pc3NpbmdGaWVsZHMoeCwgc2NoZW1hLmVsZW1lbnQpKTtcbiAgICBpZiAoYXJlQXJyYXlzRXF1YWwoYXJyVmFsdWUsIG5ld0FyclZhbHVlKSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gbmV3QXJyVmFsdWU7XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnb2JqZWN0Jykge1xuICAgIGNvbnN0IG9iamVjdFZhbHVlID0gdmFsdWU7XG4gICAgbGV0IGhhc0NoYW5nZWQgPSBmYWxzZTtcbiAgICBjb25zdCBuZXdPYmplY3RWYWx1ZSA9IHt9O1xuICAgIGZvciAoY29uc3QgW2tleSwgaW5uZXJTY2hlbWFdIG9mIE9iamVjdC5lbnRyaWVzKHNjaGVtYS5maWVsZHMpKSB7XG4gICAgICBjb25zdCBpbm5lclZhbHVlID0gb2JqZWN0VmFsdWVba2V5XTtcbiAgICAgIGlmIChpbm5lclZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaGFzQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgIG5ld09iamVjdFZhbHVlW2tleV0gPSBnZXRJbml0aWFsUHJvcHNWYWx1ZShpbm5lclNjaGVtYSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgbmV3SW5uZXJWYWx1ZSA9IGFkZE1pc3NpbmdGaWVsZHMoaW5uZXJWYWx1ZSwgaW5uZXJTY2hlbWEpO1xuICAgICAgaWYgKG5ld0lubmVyVmFsdWUgIT09IGlubmVyVmFsdWUpIHtcbiAgICAgICAgaGFzQ2hhbmdlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBuZXdPYmplY3RWYWx1ZVtrZXldID0gbmV3SW5uZXJWYWx1ZTtcbiAgICB9XG4gICAgaWYgKGhhc0NoYW5nZWQpIHtcbiAgICAgIHJldHVybiBuZXdPYmplY3RWYWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGFzc2VydE5ldmVyKHNjaGVtYSk7XG59XG5cbmZ1bmN0aW9uIENvbXBvbmVudElubGluZVByb3AocHJvcHMpIHtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goXCJzcGFuXCIsIHtcbiAgICAuLi5wcm9wcy5hdHRyaWJ1dGVzLFxuICAgIGNoaWxkcmVuOiBwcm9wcy5jaGlsZHJlblxuICB9KTtcbn1cbmZ1bmN0aW9uIGdldEluaXRpYWxWYWx1ZSh0eXBlLCBjb21wb25lbnRCbG9jaykge1xuICBjb25zdCBwcm9wcyA9IGdldEluaXRpYWxQcm9wc1ZhbHVlKHtcbiAgICBraW5kOiAnb2JqZWN0JyxcbiAgICBmaWVsZHM6IGNvbXBvbmVudEJsb2NrLnNjaGVtYVxuICB9KTtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnY29tcG9uZW50LWJsb2NrJyxcbiAgICBjb21wb25lbnQ6IHR5cGUsXG4gICAgcHJvcHMsXG4gICAgY2hpbGRyZW46IGZpbmRDaGlsZFByb3BQYXRocyhwcm9wcywgY29tcG9uZW50QmxvY2suc2NoZW1hKS5tYXAoeCA9PiAoe1xuICAgICAgdHlwZTogYGNvbXBvbmVudC0ke3gub3B0aW9ucy5raW5kfS1wcm9wYCxcbiAgICAgIHByb3BQYXRoOiB4LnBhdGgsXG4gICAgICBjaGlsZHJlbjogW3gub3B0aW9ucy5raW5kID09PSAnYmxvY2snID8ge1xuICAgICAgICB0eXBlOiAncGFyYWdyYXBoJyxcbiAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgdGV4dDogJydcbiAgICAgICAgfV1cbiAgICAgIH0gOiB7XG4gICAgICAgIHRleHQ6ICcnXG4gICAgICB9XVxuICAgIH0pKVxuICB9O1xufVxuZnVuY3Rpb24gaW5zZXJ0Q29tcG9uZW50QmxvY2soZWRpdG9yLCBjb21wb25lbnRCbG9ja3MsIGNvbXBvbmVudEJsb2NrKSB7XG4gIGNvbnN0IG5vZGUgPSBnZXRJbml0aWFsVmFsdWUoY29tcG9uZW50QmxvY2ssIGNvbXBvbmVudEJsb2Nrc1tjb21wb25lbnRCbG9ja10pO1xuICBpbnNlcnROb2Rlc0J1dFJlcGxhY2VJZlNlbGVjdGlvbklzQXRFbXB0eVBhcmFncmFwaE9ySGVhZGluZyhlZGl0b3IsIG5vZGUpO1xuICBjb25zdCBjb21wb25lbnRCbG9ja0VudHJ5ID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgIG1hdGNoOiBub2RlID0+IG5vZGUudHlwZSA9PT0gJ2NvbXBvbmVudC1ibG9jaydcbiAgfSk7XG4gIGlmIChjb21wb25lbnRCbG9ja0VudHJ5KSB7XG4gICAgY29uc3Qgc3RhcnQgPSBFZGl0b3Iuc3RhcnQoZWRpdG9yLCBjb21wb25lbnRCbG9ja0VudHJ5WzFdKTtcbiAgICBUcmFuc2Zvcm1zLnNldFNlbGVjdGlvbihlZGl0b3IsIHtcbiAgICAgIGFuY2hvcjogc3RhcnQsXG4gICAgICBmb2N1czogc3RhcnRcbiAgICB9KTtcbiAgfVxufVxuY29uc3QgQ29tcG9uZW50QmxvY2tzRWxlbWVudCA9ICh7XG4gIGF0dHJpYnV0ZXMsXG4gIGNoaWxkcmVuLFxuICBlbGVtZW50OiBfX2VsZW1lbnRUb0dldFBhdGhcbn0pID0+IHtcbiAgY29uc3QgZWRpdG9yID0gdXNlU2xhdGVTdGF0aWMoKTtcbiAgY29uc3QgW2N1cnJlbnRFbGVtZW50LCBzZXRFbGVtZW50XSA9IHVzZUVsZW1lbnRXaXRoU2V0Tm9kZXMoZWRpdG9yLCBfX2VsZW1lbnRUb0dldFBhdGgpO1xuICBjb25zdCBibG9ja0NvbXBvbmVudHMgPSB1c2VEb2N1bWVudEVkaXRvckNvbmZpZygpLmNvbXBvbmVudEJsb2NrcztcbiAgY29uc3QgY29tcG9uZW50QmxvY2sgPSBibG9ja0NvbXBvbmVudHNbY3VycmVudEVsZW1lbnQuY29tcG9uZW50XTtcbiAgY29uc3QgcHJvcHNXaXRoQ2hpbGRGaWVsZHMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoIWNvbXBvbmVudEJsb2NrKSByZXR1cm47XG4gICAgY29uc3QgYmxvY2tDaGlsZHJlbkJ5UGF0aCA9IG5ldyBNYXAoKTtcbiAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGN1cnJlbnRFbGVtZW50LmNoaWxkcmVuKSB7XG4gICAgICBpZiAoY2hpbGQudHlwZSA9PT0gJ2NvbXBvbmVudC1ibG9jay1wcm9wJyAmJiBjaGlsZC5wcm9wUGF0aCkge1xuICAgICAgICBibG9ja0NoaWxkcmVuQnlQYXRoLnNldChKU09OLnN0cmluZ2lmeShjaGlsZC5wcm9wUGF0aCksIGNoaWxkLmNoaWxkcmVuKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFibG9ja0NoaWxkcmVuQnlQYXRoLnNpemUpIHJldHVybiBjdXJyZW50RWxlbWVudC5wcm9wcztcbiAgICByZXR1cm4gdHJhbnNmb3JtUHJvcHMoe1xuICAgICAga2luZDogJ29iamVjdCcsXG4gICAgICBmaWVsZHM6IGNvbXBvbmVudEJsb2NrLnNjaGVtYVxuICAgIH0sIGN1cnJlbnRFbGVtZW50LnByb3BzLCB7XG4gICAgICBjaGlsZChzY2hlbWEsIHZhbHVlLCBwcm9wUGF0aCkge1xuICAgICAgICBpZiAoc2NoZW1hLm9wdGlvbnMua2luZCA9PT0gJ2Jsb2NrJykge1xuICAgICAgICAgIGNvbnN0IGtleSA9IEpTT04uc3RyaW5naWZ5KHByb3BQYXRoKTtcbiAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IGJsb2NrQ2hpbGRyZW5CeVBhdGguZ2V0KGtleSk7XG4gICAgICAgICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICAgICAgICByZXR1cm4gY2hpbGRyZW4ubWFwKGNsb25lRGVzY2VuZGVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgW2NvbXBvbmVudEJsb2NrLCBjdXJyZW50RWxlbWVudF0pO1xuICBjb25zdCBlbGVtZW50VG9HZXRQYXRoUmVmID0gdXNlUmVmKHtcbiAgICBfX2VsZW1lbnRUb0dldFBhdGgsXG4gICAgY3VycmVudEVsZW1lbnQsXG4gICAgcHJvcHNXaXRoQ2hpbGRGaWVsZHNcbiAgfSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZWxlbWVudFRvR2V0UGF0aFJlZi5jdXJyZW50ID0ge1xuICAgICAgX19lbGVtZW50VG9HZXRQYXRoLFxuICAgICAgY3VycmVudEVsZW1lbnQsXG4gICAgICBwcm9wc1dpdGhDaGlsZEZpZWxkc1xuICAgIH07XG4gIH0pO1xuICBjb25zdCBvblJlbW92ZSA9IHVzZUV2ZW50Q2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IHBhdGggPSBSZWFjdEVkaXRvci5maW5kUGF0aChlZGl0b3IsIF9fZWxlbWVudFRvR2V0UGF0aCk7XG4gICAgVHJhbnNmb3Jtcy5yZW1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgIGF0OiBwYXRoXG4gICAgfSk7XG4gIH0pO1xuICBjb25zdCBvblByb3BzQ2hhbmdlID0gdXNlQ2FsbGJhY2soKGNiLCBpZ25vcmVDaGlsZEZpZWxkcykgPT4ge1xuICAgIGNvbnN0IHByZXZQcm9wcyA9IGVsZW1lbnRUb0dldFBhdGhSZWYuY3VycmVudC5wcm9wc1dpdGhDaGlsZEZpZWxkcztcbiAgICB1cGRhdGVDb21wb25lbnRCbG9ja0VsZW1lbnRQcm9wcyhlZGl0b3IsIGNvbXBvbmVudEJsb2NrLCBwcmV2UHJvcHMsIGNiKHByZXZQcm9wcyksIFJlYWN0RWRpdG9yLmZpbmRQYXRoKGVkaXRvciwgZWxlbWVudFRvR2V0UGF0aFJlZi5jdXJyZW50Ll9fZWxlbWVudFRvR2V0UGF0aCksIHNldEVsZW1lbnQsIGlnbm9yZUNoaWxkRmllbGRzKTtcbiAgfSwgW3NldEVsZW1lbnQsIGNvbXBvbmVudEJsb2NrLCBlZGl0b3JdKTtcbiAgY29uc3QgZ2V0VG9vbGJhclByZXZpZXdQcm9wcyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICghY29tcG9uZW50QmxvY2spIHtcbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignZXhwZWN0ZWQgY29tcG9uZW50IGJsb2NrIHRvIGV4aXN0IHdoZW4gY2FsbGVkJyk7XG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gY3JlYXRlR2V0UHJldmlld1Byb3BzKHtcbiAgICAgIGtpbmQ6ICdvYmplY3QnLFxuICAgICAgZmllbGRzOiBjb21wb25lbnRCbG9jay5zY2hlbWFcbiAgICB9LCBjYiA9PiBvblByb3BzQ2hhbmdlKGNiLCBmYWxzZSksICgpID0+IHVuZGVmaW5lZCk7XG4gIH0sIFtjb21wb25lbnRCbG9jaywgb25Qcm9wc0NoYW5nZV0pO1xuICBpZiAoIWNvbXBvbmVudEJsb2NrKSB7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3hzKFwiZGl2XCIsIHtcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIGJvcmRlcjogJ3JlZCA0cHggc29saWQnLFxuICAgICAgICBwYWRkaW5nOiA4XG4gICAgICB9LFxuICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KFwicHJlXCIsIHtcbiAgICAgICAgY29udGVudEVkaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICB1c2VyU2VsZWN0OiAnbm9uZSdcbiAgICAgICAgfSxcbiAgICAgICAgY2hpbGRyZW46IGBUaGUgYmxvY2sgXCIke2N1cnJlbnRFbGVtZW50LmNvbXBvbmVudH1cIiBubyBsb25nZXIgZXhpc3RzLlxuXG5Qcm9wczpcblxuJHtKU09OLnN0cmluZ2lmeShjdXJyZW50RWxlbWVudC5wcm9wcywgbnVsbCwgMil9XG5cbkNvbnRlbnQ6YFxuICAgICAgfSksIGNoaWxkcmVuXVxuICAgIH0pO1xuICB9XG4gIGNvbnN0IHRvb2xiYXJQcmV2aWV3UHJvcHMgPSBnZXRUb29sYmFyUHJldmlld1Byb3BzKHByb3BzV2l0aENoaWxkRmllbGRzKTtcbiAgY29uc3QgcmVuZGVyZWRCbG9jayA9IC8qI19fUFVSRV9fKi9qc3goQ29tcG9uZW50QmxvY2tSZW5kZXIsIHtcbiAgICBjaGlsZHJlbjogY2hpbGRyZW4sXG4gICAgY29tcG9uZW50QmxvY2s6IGNvbXBvbmVudEJsb2NrLFxuICAgIGVsZW1lbnQ6IGN1cnJlbnRFbGVtZW50LFxuICAgIG9uQ2hhbmdlOiBvblByb3BzQ2hhbmdlLFxuICAgIG9uUmVtb3ZlOiBvblJlbW92ZVxuICB9KTtcbiAgcmV0dXJuIGNvbXBvbmVudEJsb2NrLmNocm9tZWxlc3MgPyAvKiNfX1BVUkVfXyovanN4KENocm9tZWxlc3NDb21wb25lbnRCbG9ja0VsZW1lbnQsIHtcbiAgICBlbGVtZW50OiBfX2VsZW1lbnRUb0dldFBhdGgsXG4gICAgYXR0cmlidXRlczogYXR0cmlidXRlcyxcbiAgICByZW5kZXJlZEJsb2NrOiByZW5kZXJlZEJsb2NrLFxuICAgIGNvbXBvbmVudEJsb2NrOiBjb21wb25lbnRCbG9jayxcbiAgICBvblJlbW92ZTogb25SZW1vdmUsXG4gICAgcHJldmlld1Byb3BzOiB0b29sYmFyUHJldmlld1Byb3BzXG4gIH0pIDogLyojX19QVVJFX18qL2pzeChDaHJvbWVmdWxDb21wb25lbnRCbG9ja0VsZW1lbnQsIHtcbiAgICBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzLFxuICAgIGNoaWxkcmVuOiBjaGlsZHJlbixcbiAgICBjb21wb25lbnRCbG9jazogY29tcG9uZW50QmxvY2ssXG4gICAgb25SZW1vdmU6IG9uUmVtb3ZlLFxuICAgIHByZXZpZXdQcm9wczogdG9vbGJhclByZXZpZXdQcm9wcyxcbiAgICByZW5kZXJlZEJsb2NrOiByZW5kZXJlZEJsb2NrLFxuICAgIGVsZW1lbnRQcm9wczogY3VycmVudEVsZW1lbnQucHJvcHNcbiAgfSk7XG59O1xuXG5mdW5jdGlvbiBpbnNlcnREaXZpZGVyKGVkaXRvcikge1xuICBpbnNlcnROb2Rlc0J1dFJlcGxhY2VJZlNlbGVjdGlvbklzQXRFbXB0eVBhcmFncmFwaE9ySGVhZGluZyhlZGl0b3IsIHtcbiAgICB0eXBlOiAnZGl2aWRlcicsXG4gICAgY2hpbGRyZW46IFt7XG4gICAgICB0ZXh0OiAnJ1xuICAgIH1dXG4gIH0pO1xuICBFZGl0b3IuaW5zZXJ0Tm9kZShlZGl0b3IsIHtcbiAgICB0eXBlOiAncGFyYWdyYXBoJyxcbiAgICBjaGlsZHJlbjogW3tcbiAgICAgIHRleHQ6ICcnXG4gICAgfV1cbiAgfSk7XG59XG5jb25zdCBEaXZpZGVyQnV0dG9uID0gKCkgPT4ge1xuICBjb25zdCB7XG4gICAgZWRpdG9yLFxuICAgIGRpdmlkZXJzOiB7XG4gICAgICBpc0Rpc2FibGVkXG4gICAgfVxuICB9ID0gdXNlVG9vbGJhclN0YXRlKCk7XG4gIHJldHVybiB1c2VNZW1vKCgpID0+IC8qI19fUFVSRV9fKi9qc3goQWN0aW9uQnV0dG9uLCB7XG4gICAgcHJvbWluZW5jZTogXCJsb3dcIixcbiAgICBpc0Rpc2FibGVkOiBpc0Rpc2FibGVkLFxuICAgIG9uUHJlc3M6ICgpID0+IHtcbiAgICAgIGluc2VydERpdmlkZXIoZWRpdG9yKTtcbiAgICB9LFxuICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KEljb24sIHtcbiAgICAgIHNyYzogbWludXNJY29uXG4gICAgfSlcbiAgfSksIFtlZGl0b3IsIGlzRGlzYWJsZWRdKTtcbn07XG5jb25zdCBkaXZpZGVyQnV0dG9uID0gLyojX19QVVJFX18qL2pzeHMoVG9vbHRpcFRyaWdnZXIsIHtcbiAgZGVsYXk6IDIwMCxcbiAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KERpdmlkZXJCdXR0b24sIHt9KSwgLyojX19QVVJFX18qL2pzeHMoVG9vbHRpcCwge1xuICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChUZXh0LCB7XG4gICAgICBjaGlsZHJlbjogXCJEaXZpZGVyXCJcbiAgICB9KSwgLyojX19QVVJFX18qL2pzeChLYmQsIHtcbiAgICAgIGNoaWxkcmVuOiBcIi0tLVwiXG4gICAgfSldXG4gIH0pXVxufSk7XG5mdW5jdGlvbiBEaXZpZGVyRWxlbWVudCh7XG4gIGF0dHJpYnV0ZXMsXG4gIGNoaWxkcmVuXG59KSB7XG4gIGNvbnN0IHNlbGVjdGVkID0gdXNlU2VsZWN0ZWQoKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3hzKFwiZGl2XCIsIHtcbiAgICAuLi5hdHRyaWJ1dGVzLFxuICAgIHN0eWxlOiB7XG4gICAgICBjYXJldENvbG9yOiAndHJhbnNwYXJlbnQnXG4gICAgfSxcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goXCJoclwiLCB7XG4gICAgICBzdHlsZToge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHNlbGVjdGVkID8gdG9rZW5TY2hlbWEuY29sb3IuYWxpYXMuYm9yZGVyU2VsZWN0ZWQgOiB0b2tlblNjaGVtYS5jb2xvci5hbGlhcy5ib3JkZXJJZGxlXG4gICAgICB9XG4gICAgfSksIGNoaWxkcmVuXVxuICB9KTtcbn1cblxuY29uc3QgTGF5b3V0Q29udGFpbmVyID0gKHtcbiAgYXR0cmlidXRlcyxcbiAgY2hpbGRyZW4sXG4gIGVsZW1lbnRcbn0pID0+IHtcbiAgY29uc3QgZWRpdG9yID0gdXNlU2xhdGVTdGF0aWMoKTtcbiAgY29uc3QgbGF5b3V0ID0gZWxlbWVudC5sYXlvdXQ7XG4gIGNvbnN0IGxheW91dE9wdGlvbnMgPSB1c2VEb2N1bWVudEVkaXRvckNvbmZpZygpLmRvY3VtZW50RmVhdHVyZXMubGF5b3V0cztcbiAgY29uc3QgY3VycmVudExheW91dEluZGV4ID0gbGF5b3V0T3B0aW9ucy5maW5kSW5kZXgoeCA9PiB4LnRvU3RyaW5nKCkgPT09IGxheW91dC50b1N0cmluZygpKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogYmxvY2tFbGVtZW50U3BhY2luZyxcbiAgICAuLi5hdHRyaWJ1dGVzLFxuICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4cyhCbG9ja1BvcG92ZXJUcmlnZ2VyLCB7XG4gICAgICBlbGVtZW50OiBlbGVtZW50LFxuICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBjc3Moe1xuICAgICAgICAgIGNvbHVtbkdhcDogdG9rZW5TY2hlbWEuc2l6ZS5zcGFjZS5yZWd1bGFyLFxuICAgICAgICAgIGRpc3BsYXk6ICdncmlkJ1xuICAgICAgICB9KSxcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICBncmlkVGVtcGxhdGVDb2x1bW5zOiBsYXlvdXQubWFwKHggPT4gYCR7eH1mcmApLmpvaW4oJyAnKVxuICAgICAgICB9LFxuICAgICAgICBjaGlsZHJlbjogY2hpbGRyZW5cbiAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KEJsb2NrUG9wb3Zlciwge1xuICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeHMoRmxleCwge1xuICAgICAgICAgIHBhZGRpbmc6IFwicmVndWxhclwiLFxuICAgICAgICAgIGdhcDogXCJyZWd1bGFyXCIsXG4gICAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEFjdGlvbkdyb3VwLCB7XG4gICAgICAgICAgICBzZWxlY3Rpb25Nb2RlOiBcInNpbmdsZVwiLFxuICAgICAgICAgICAgcHJvbWluZW5jZTogXCJsb3dcIixcbiAgICAgICAgICAgIGRlbnNpdHk6IFwiY29tcGFjdFwiLFxuICAgICAgICAgICAgb25BY3Rpb246IGtleSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHBhdGggPSBSZWFjdEVkaXRvci5maW5kUGF0aChlZGl0b3IsIGVsZW1lbnQpO1xuICAgICAgICAgICAgICBjb25zdCBsYXlvdXRPcHRpb24gPSBsYXlvdXRPcHRpb25zW2tleV07XG4gICAgICAgICAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2xheW91dCcsXG4gICAgICAgICAgICAgICAgbGF5b3V0OiBsYXlvdXRPcHRpb25cbiAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGF0OiBwYXRoXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBSZWFjdEVkaXRvci5mb2N1cyhlZGl0b3IpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlbGVjdGVkS2V5czogY3VycmVudExheW91dEluZGV4ICE9PSAtMSA/IFtjdXJyZW50TGF5b3V0SW5kZXgudG9TdHJpbmcoKV0gOiBbXSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBsYXlvdXRPcHRpb25zLm1hcCgobGF5b3V0T3B0aW9uLCBpKSA9PiAvKiNfX1BVUkVfXyovanN4KEl0ZW0kMywge1xuICAgICAgICAgICAgICBjaGlsZHJlbjogbWFrZUxheW91dEljb24obGF5b3V0T3B0aW9uKVxuICAgICAgICAgICAgfSwgaSkpXG4gICAgICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goVG9vbGJhclNlcGFyYXRvciwge30pLCAvKiNfX1BVUkVfXyovanN4cyhUb29sdGlwVHJpZ2dlciwge1xuICAgICAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEFjdGlvbkJ1dHRvbiwge1xuICAgICAgICAgICAgICBwcm9taW5lbmNlOiBcImxvd1wiLFxuICAgICAgICAgICAgICBvblByZXNzOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGF0aCA9IFJlYWN0RWRpdG9yLmZpbmRQYXRoKGVkaXRvciwgZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5yZW1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgICAgIGF0OiBwYXRoXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KEljb24sIHtcbiAgICAgICAgICAgICAgICBzcmM6IHRyYXNoMkljb25cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KFRvb2x0aXAsIHtcbiAgICAgICAgICAgICAgdG9uZTogXCJjcml0aWNhbFwiLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogXCJSZW1vdmVcIlxuICAgICAgICAgICAgfSldXG4gICAgICAgICAgfSldXG4gICAgICAgIH0pXG4gICAgICB9KV1cbiAgICB9KVxuICB9KTtcbn07XG5jb25zdCBMYXlvdXRBcmVhID0gKHtcbiAgYXR0cmlidXRlcyxcbiAgY2hpbGRyZW5cbn0pID0+IHtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogY3NzKHtcbiAgICAgIGJvcmRlckNvbG9yOiB0b2tlblNjaGVtYS5jb2xvci5ib3JkZXIubmV1dHJhbCxcbiAgICAgIGJvcmRlclJhZGl1czogdG9rZW5TY2hlbWEuc2l6ZS5yYWRpdXMucmVndWxhcixcbiAgICAgIGJvcmRlclN0eWxlOiAnZGFzaGVkJyxcbiAgICAgIGJvcmRlcldpZHRoOiB0b2tlblNjaGVtYS5zaXplLmJvcmRlci5yZWd1bGFyLFxuICAgICAgcGFkZGluZzogdG9rZW5TY2hlbWEuc2l6ZS5zcGFjZS5tZWRpdW1cbiAgICB9KSxcbiAgICAuLi5hdHRyaWJ1dGVzLFxuICAgIGNoaWxkcmVuOiBjaGlsZHJlblxuICB9KTtcbn07XG5jb25zdCBpbnNlcnRMYXlvdXQgPSAoZWRpdG9yLCBsYXlvdXQpID0+IHtcbiAgaW5zZXJ0Tm9kZXNCdXRSZXBsYWNlSWZTZWxlY3Rpb25Jc0F0RW1wdHlQYXJhZ3JhcGhPckhlYWRpbmcoZWRpdG9yLCBbe1xuICAgIHR5cGU6ICdsYXlvdXQnLFxuICAgIGxheW91dCxcbiAgICBjaGlsZHJlbjogW3tcbiAgICAgIHR5cGU6ICdsYXlvdXQtYXJlYScsXG4gICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgdHlwZTogJ3BhcmFncmFwaCcsXG4gICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgIHRleHQ6ICcnXG4gICAgICAgIH1dXG4gICAgICB9XVxuICAgIH1dXG4gIH1dKTtcbiAgY29uc3QgbGF5b3V0RW50cnkgPSBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgbWF0Y2g6IHggPT4geC50eXBlID09PSAnbGF5b3V0J1xuICB9KTtcbiAgaWYgKGxheW91dEVudHJ5KSB7XG4gICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCBbLi4ubGF5b3V0RW50cnlbMV0sIDBdKTtcbiAgfVxufTtcblxuLy8gVXRpbHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5mdW5jdGlvbiBtYWtlTGF5b3V0SWNvbihyYXRpb3MpIHtcbiAgY29uc3Qgc2l6ZSA9IDE2O1xuICBjb25zdCBlbGVtZW50ID0gLyojX19QVVJFX18qL2pzeChcImRpdlwiLCB7XG4gICAgcm9sZTogXCJpbWdcIixcbiAgICBjbGFzc05hbWU6IGNzcyh7XG4gICAgICBkaXNwbGF5OiAnZ3JpZCcsXG4gICAgICBncmlkVGVtcGxhdGVDb2x1bW5zOiByYXRpb3MubWFwKHIgPT4gYCR7cn1mcmApLmpvaW4oJyAnKSxcbiAgICAgIGdhcDogMixcbiAgICAgIHdpZHRoOiBzaXplLFxuICAgICAgaGVpZ2h0OiBzaXplXG4gICAgfSksXG4gICAgY2hpbGRyZW46IHJhdGlvcy5tYXAoKF8sIGkpID0+IHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBjc3Moe1xuICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJ2N1cnJlbnRjb2xvcicsXG4gICAgICAgICAgYm9yZGVyUmFkaXVzOiAxXG4gICAgICAgIH0pXG4gICAgICB9LCBpKTtcbiAgICB9KVxuICB9KTtcbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5jb25zdCBsYXlvdXRzSWNvbiA9IC8qI19fUFVSRV9fKi9qc3goSWNvbiwge1xuICBzcmM6IGNvbHVtbnNJY29uXG59KTtcbmNvbnN0IExheW91dHNCdXR0b24gPSAoe1xuICBsYXlvdXRzXG59KSA9PiB7XG4gIGNvbnN0IHtcbiAgICBlZGl0b3IsXG4gICAgbGF5b3V0czoge1xuICAgICAgaXNTZWxlY3RlZFxuICAgIH1cbiAgfSA9IHVzZVRvb2xiYXJTdGF0ZSgpO1xuICByZXR1cm4gdXNlTWVtbygoKSA9PiAvKiNfX1BVUkVfXyovanN4cyhUb29sdGlwVHJpZ2dlciwge1xuICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChBY3Rpb25CdXR0b24sIHtcbiAgICAgIHByb21pbmVuY2U6IFwibG93XCIsXG4gICAgICBpc1NlbGVjdGVkOiBpc1NlbGVjdGVkLFxuICAgICAgb25QcmVzczogKCkgPT4ge1xuICAgICAgICBpZiAoaXNFbGVtZW50QWN0aXZlKGVkaXRvciwgJ2xheW91dCcpKSB7XG4gICAgICAgICAgVHJhbnNmb3Jtcy51bndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgIG1hdGNoOiBub2RlID0+IG5vZGUudHlwZSA9PT0gJ2xheW91dCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpbnNlcnRMYXlvdXQoZWRpdG9yLCBsYXlvdXRzWzBdKTtcbiAgICAgICAgfVxuICAgICAgICBSZWFjdEVkaXRvci5mb2N1cyhlZGl0b3IpO1xuICAgICAgfSxcbiAgICAgIGNoaWxkcmVuOiBsYXlvdXRzSWNvblxuICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KFRvb2x0aXAsIHtcbiAgICAgIGNoaWxkcmVuOiBcIkxheW91dHNcIlxuICAgIH0pXVxuICB9KSwgW2VkaXRvciwgaXNTZWxlY3RlZCwgbGF5b3V0c10pO1xufTtcblxuY29uc3QgdG9nZ2xlTGlzdCA9IChlZGl0b3IsIGZvcm1hdCkgPT4ge1xuICBjb25zdCBsaXN0QWJvdmUgPSBnZXRMaXN0VHlwZUFib3ZlKGVkaXRvcik7XG4gIGNvbnN0IGlzQWN0aXZlID0gaXNFbGVtZW50QWN0aXZlKGVkaXRvciwgZm9ybWF0KSAmJiAobGlzdEFib3ZlID09PSAnbm9uZScgfHwgbGlzdEFib3ZlID09PSBmb3JtYXQpO1xuICBFZGl0b3Iud2l0aG91dE5vcm1hbGl6aW5nKGVkaXRvciwgKCkgPT4ge1xuICAgIFRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICBtYXRjaDogaXNMaXN0Tm9kZSxcbiAgICAgIHNwbGl0OiB0cnVlLFxuICAgICAgbW9kZTogaXNBY3RpdmUgPyAnYWxsJyA6ICdsb3dlc3QnXG4gICAgfSk7XG4gICAgaWYgKCFpc0FjdGl2ZSkge1xuICAgICAgVHJhbnNmb3Jtcy53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgIHR5cGU6IGZvcm1hdCxcbiAgICAgICAgY2hpbGRyZW46IFtdXG4gICAgICB9LCB7XG4gICAgICAgIG1hdGNoOiB4ID0+IHgudHlwZSAhPT0gJ2xpc3QtaXRlbS1jb250ZW50JyAmJiBpc0Jsb2NrKHgpXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufTtcbmZ1bmN0aW9uIExpc3RCdXR0b25zKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0b3IsXG4gICAgbGlzdHNcbiAgfSA9IHVzZVRvb2xiYXJTdGF0ZSgpO1xuICByZXR1cm4gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgZGlzYWJsZWRLZXlzID0gW107XG4gICAgaWYgKGxpc3RzLm9yZGVyZWQuaXNEaXNhYmxlZCkgZGlzYWJsZWRLZXlzLnB1c2goJ29yZGVyZWQnKTtcbiAgICBpZiAobGlzdHMudW5vcmRlcmVkLmlzRGlzYWJsZWQpIGRpc2FibGVkS2V5cy5wdXNoKCd1bm9yZGVyZWQnKTtcbiAgICBjb25zdCBzZWxlY3RlZEtleXMgPSBbXTtcbiAgICBpZiAobGlzdHMub3JkZXJlZC5pc1NlbGVjdGVkKSBzZWxlY3RlZEtleXMucHVzaCgnb3JkZXJlZCcpO1xuICAgIGlmIChsaXN0cy51bm9yZGVyZWQuaXNTZWxlY3RlZCkgc2VsZWN0ZWRLZXlzLnB1c2goJ3Vub3JkZXJlZCcpO1xuICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KEFjdGlvbkdyb3VwLCB7XG4gICAgICBmbGV4U2hyaW5rOiAwLFxuICAgICAgXCJhcmlhLWxhYmVsXCI6IFwiTGlzdHNcIixcbiAgICAgIHNlbGVjdGlvbk1vZGU6IFwic2luZ2xlXCIsXG4gICAgICBidXR0b25MYWJlbEJlaGF2aW9yOiBcImhpZGVcIixcbiAgICAgIGRlbnNpdHk6IFwiY29tcGFjdFwiXG4gICAgICAvLyBvdmVyZmxvd01vZGU9XCJjb2xsYXBzZVwiXG4gICAgICAsXG4gICAgICBwcm9taW5lbmNlOiBcImxvd1wiLFxuICAgICAgc3VtbWFyeUljb246IC8qI19fUFVSRV9fKi9qc3goSWNvbiwge1xuICAgICAgICBzcmM6IGxpc3RJY29uXG4gICAgICB9KSxcbiAgICAgIHNlbGVjdGVkS2V5czogc2VsZWN0ZWRLZXlzLFxuICAgICAgZGlzYWJsZWRLZXlzOiBkaXNhYmxlZEtleXMsXG4gICAgICBvbkFjdGlvbjoga2V5ID0+IHtcbiAgICAgICAgY29uc3QgZm9ybWF0ID0gYCR7a2V5fS1saXN0YDtcbiAgICAgICAgdG9nZ2xlTGlzdChlZGl0b3IsIGZvcm1hdCk7XG4gICAgICAgIFJlYWN0RWRpdG9yLmZvY3VzKGVkaXRvcik7XG4gICAgICB9LFxuICAgICAgY2hpbGRyZW46IFtwcm9wcy5saXN0cy51bm9yZGVyZWQgJiYgLyojX19QVVJFX18qL2pzeHMoSXRlbSQzLCB7XG4gICAgICAgIHRleHRWYWx1ZTogXCJCdWxsZXQgTGlzdCAoLSApXCIsXG4gICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChJY29uLCB7XG4gICAgICAgICAgc3JjOiBsaXN0SWNvblxuICAgICAgICB9KSwgLyojX19QVVJFX18qL2pzeChUZXh0LCB7XG4gICAgICAgICAgY2hpbGRyZW46IFwiQnVsbGV0IExpc3RcIlxuICAgICAgICB9KSwgLyojX19QVVJFX18qL2pzeChLYmQsIHtcbiAgICAgICAgICBjaGlsZHJlbjogXCItXFx1MjNCNVwiXG4gICAgICAgIH0pXVxuICAgICAgfSwgXCJ1bm9yZGVyZWRcIiksIHByb3BzLmxpc3RzLm9yZGVyZWQgJiYgLyojX19QVVJFX18qL2pzeHMoSXRlbSQzLCB7XG4gICAgICAgIHRleHRWYWx1ZTogXCJOdW1iZXJlZCBMaXN0ICgxLilcIixcbiAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEljb24sIHtcbiAgICAgICAgICBzcmM6IGxpc3RPcmRlcmVkSWNvblxuICAgICAgICB9KSwgLyojX19QVVJFX18qL2pzeChUZXh0LCB7XG4gICAgICAgICAgY2hpbGRyZW46IFwiTnVtYmVyZWQgTGlzdFwiXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KEtiZCwge1xuICAgICAgICAgIGNoaWxkcmVuOiBcIjEuXFx1MjNCNVwiXG4gICAgICAgIH0pXVxuICAgICAgfSwgXCJvcmRlcmVkXCIpXS5maWx0ZXIoeCA9PiB4ICE9PSBmYWxzZSlcbiAgICB9KTtcbiAgfSwgW2VkaXRvciwgbGlzdHMub3JkZXJlZC5pc0Rpc2FibGVkLCBsaXN0cy5vcmRlcmVkLmlzU2VsZWN0ZWQsIGxpc3RzLnVub3JkZXJlZC5pc0Rpc2FibGVkLCBsaXN0cy51bm9yZGVyZWQuaXNTZWxlY3RlZCwgcHJvcHMubGlzdHMub3JkZXJlZCwgcHJvcHMubGlzdHMudW5vcmRlcmVkXSk7XG59XG5mdW5jdGlvbiBuZXN0TGlzdChlZGl0b3IpIHtcbiAgY29uc3QgYmxvY2sgPSBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgbWF0Y2g6IGlzQmxvY2tcbiAgfSk7XG4gIGlmICghYmxvY2sgfHwgYmxvY2tbMF0udHlwZSAhPT0gJ2xpc3QtaXRlbS1jb250ZW50Jykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCBsaXN0SXRlbVBhdGggPSBQYXRoLnBhcmVudChibG9ja1sxXSk7XG4gIC8vIHdlJ3JlIHRoZSBmaXJzdCBpdGVtIGluIHRoZSBsaXN0IHRoZXJlZm9yZSB3ZSBjYW4ndCBuZXN0XG4gIGlmIChsaXN0SXRlbVBhdGhbbGlzdEl0ZW1QYXRoLmxlbmd0aCAtIDFdID09PSAwKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IHByZXZpb3VzTGlzdEl0ZW1QYXRoID0gUGF0aC5wcmV2aW91cyhsaXN0SXRlbVBhdGgpO1xuICBjb25zdCBwcmV2aW91c0xpc3RJdGVtTm9kZSA9IE5vZGUuZ2V0KGVkaXRvciwgcHJldmlvdXNMaXN0SXRlbVBhdGgpO1xuICBpZiAocHJldmlvdXNMaXN0SXRlbU5vZGUuY2hpbGRyZW4ubGVuZ3RoICE9PSAxKSB7XG4gICAgLy8gdGhlcmUncyBhIGxpc3QgbmVzdGVkIGluc2lkZSBvdXIgcHJldmlvdXMgc2libGluZyBsaXN0IGl0ZW0gc28gbW92ZSB0aGVyZVxuICAgIFRyYW5zZm9ybXMubW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgYXQ6IGxpc3RJdGVtUGF0aCxcbiAgICAgIHRvOiBbLi4ucHJldmlvdXNMaXN0SXRlbVBhdGgsIHByZXZpb3VzTGlzdEl0ZW1Ob2RlLmNoaWxkcmVuLmxlbmd0aCAtIDEsIHByZXZpb3VzTGlzdEl0ZW1Ob2RlLmNoaWxkcmVuW3ByZXZpb3VzTGlzdEl0ZW1Ob2RlLmNoaWxkcmVuLmxlbmd0aCAtIDFdLmNoaWxkcmVuLmxlbmd0aF1cbiAgICB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBjb25zdCB0eXBlID0gRWRpdG9yLnBhcmVudChlZGl0b3IsIFBhdGgucGFyZW50KGJsb2NrWzFdKSlbMF0udHlwZTtcbiAgRWRpdG9yLndpdGhvdXROb3JtYWxpemluZyhlZGl0b3IsICgpID0+IHtcbiAgICBUcmFuc2Zvcm1zLndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgIHR5cGUsXG4gICAgICBjaGlsZHJlbjogW11cbiAgICB9LCB7XG4gICAgICBhdDogbGlzdEl0ZW1QYXRoXG4gICAgfSk7XG4gICAgVHJhbnNmb3Jtcy5tb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICB0bzogWy4uLnByZXZpb3VzTGlzdEl0ZW1QYXRoLCBwcmV2aW91c0xpc3RJdGVtTm9kZS5jaGlsZHJlbi5sZW5ndGhdLFxuICAgICAgYXQ6IGxpc3RJdGVtUGF0aFxuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiB1bm5lc3RMaXN0KGVkaXRvcikge1xuICBjb25zdCBibG9jayA9IEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICBtYXRjaDogaXNCbG9ja1xuICB9KTtcbiAgaWYgKGJsb2NrICYmIGJsb2NrWzBdLnR5cGUgPT09ICdsaXN0LWl0ZW0tY29udGVudCcpIHtcbiAgICBUcmFuc2Zvcm1zLnVud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgbWF0Y2g6IGlzTGlzdE5vZGUsXG4gICAgICBzcGxpdDogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZ2V0VXBsb2FkZWRGaWxlT2JqZWN0KGFjY2VwdCkge1xuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIGlucHV0LnR5cGUgPSAnZmlsZSc7XG4gICAgaW5wdXQuYWNjZXB0ID0gYWNjZXB0O1xuICAgIGlucHV0Lm9uY2hhbmdlID0gKCkgPT4ge1xuICAgICAgdmFyIF9pbnB1dCRmaWxlcztcbiAgICAgIGNvbnN0IGZpbGUgPSAoX2lucHV0JGZpbGVzID0gaW5wdXQuZmlsZXMpID09PSBudWxsIHx8IF9pbnB1dCRmaWxlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2lucHV0JGZpbGVzWzBdO1xuICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgcmVzb2x2ZShmaWxlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICAgIGlucHV0LmNsaWNrKCk7XG4gIH0pO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0VXBsb2FkZWRGaWxlKGFjY2VwdCkge1xuICBjb25zdCBmaWxlID0gYXdhaXQgZ2V0VXBsb2FkZWRGaWxlT2JqZWN0KGFjY2VwdCk7XG4gIGlmICghZmlsZSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgcmV0dXJuIHtcbiAgICBjb250ZW50OiBuZXcgVWludDhBcnJheShhd2FpdCBmaWxlLmFycmF5QnVmZmVyKCkpLFxuICAgIGZpbGVuYW1lOiBmaWxlLm5hbWVcbiAgfTtcbn1cbmZ1bmN0aW9uIGdldFVwbG9hZGVkSW1hZ2UoKSB7XG4gIHJldHVybiBnZXRVcGxvYWRlZEZpbGUoJ2ltYWdlLyonKTtcbn1cbmZ1bmN0aW9uIHVzZU9iamVjdFVSTChkYXRhKSB7XG4gIGNvbnN0IFt1cmwsIHNldFVybF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZGF0YSkge1xuICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbZGF0YV0pKTtcbiAgICAgIHNldFVybCh1cmwpO1xuICAgICAgcmV0dXJuICgpID0+IFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0VXJsKG51bGwpO1xuICAgIH1cbiAgfSwgW2RhdGFdKTtcbiAgcmV0dXJuIHVybDtcbn1cblxuLy8gVE9ETzogYnV0dG9uIGxhYmVscyAoXCJDaG9vc2UgZmlsZVwiLCBcIlJlbW92ZVwiKSBuZWVkIGkxOG4gc3VwcG9ydFxuZnVuY3Rpb24gSW1hZ2VGaWVsZElucHV0KHByb3BzKSB7XG4gIHZhciBfcHJvcHMkdmFsaWRhdGlvbiwgX3Byb3BzJHZhbGlkYXRpb24yO1xuICBjb25zdCB7XG4gICAgdmFsdWVcbiAgfSA9IHByb3BzO1xuICBjb25zdCBbYmx1cnJlZCwgb25CbHVyXSA9IHVzZVJlZHVjZXIoKCkgPT4gdHJ1ZSwgZmFsc2UpO1xuICBjb25zdCBpc0luRWRpdG9yID0gdXNlSXNJbkRvY3VtZW50RWRpdG9yKCk7XG4gIGNvbnN0IG9iamVjdFVybCA9IHVzZU9iamVjdFVSTCh2YWx1ZSA9PT0gbnVsbCA/IG51bGwgOiB2YWx1ZS5kYXRhKTtcbiAgY29uc3QgbGFiZWxJZCA9IHVzZUlkJDEoKTtcbiAgY29uc3QgZGVzY3JpcHRpb25JZCA9IHVzZUlkJDEoKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3hzKEZsZXgsIHtcbiAgICBcImFyaWEtZGVzY3JpYmVkYnlcIjogcHJvcHMuZGVzY3JpcHRpb24gPyBkZXNjcmlwdGlvbklkIDogdW5kZWZpbmVkLFxuICAgIFwiYXJpYS1sYWJlbGxlZGJ5XCI6IGxhYmVsSWQsXG4gICAgZGlyZWN0aW9uOiBcImNvbHVtblwiLFxuICAgIGdhcDogXCJtZWRpdW1cIixcbiAgICByb2xlOiBcImdyb3VwXCIsXG4gICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEZpZWxkTGFiZWwsIHtcbiAgICAgIGlkOiBsYWJlbElkLFxuICAgICAgZWxlbWVudFR5cGU6IFwic3BhblwiLFxuICAgICAgaXNSZXF1aXJlZDogKF9wcm9wcyR2YWxpZGF0aW9uID0gcHJvcHMudmFsaWRhdGlvbikgPT09IG51bGwgfHwgX3Byb3BzJHZhbGlkYXRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wcm9wcyR2YWxpZGF0aW9uLmlzUmVxdWlyZWQsXG4gICAgICBjaGlsZHJlbjogcHJvcHMubGFiZWxcbiAgICB9KSwgcHJvcHMuZGVzY3JpcHRpb24gJiYgLyojX19QVVJFX18qL2pzeChUZXh0LCB7XG4gICAgICBzaXplOiBcInNtYWxsXCIsXG4gICAgICBjb2xvcjogXCJuZXV0cmFsU2Vjb25kYXJ5XCIsXG4gICAgICBpZDogZGVzY3JpcHRpb25JZCxcbiAgICAgIGNoaWxkcmVuOiBwcm9wcy5kZXNjcmlwdGlvblxuICAgIH0pLCAvKiNfX1BVUkVfXyovanN4cyhCdXR0b25Hcm91cCwge1xuICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEFjdGlvbkJ1dHRvbiwge1xuICAgICAgICBvblByZXNzOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgaW1hZ2UgPSBhd2FpdCBnZXRVcGxvYWRlZEltYWdlKCk7XG4gICAgICAgICAgaWYgKGltYWdlKSB7XG4gICAgICAgICAgICB2YXIgX2ltYWdlJGZpbGVuYW1lJG1hdGNoO1xuICAgICAgICAgICAgY29uc3QgZXh0ZW5zaW9uID0gKF9pbWFnZSRmaWxlbmFtZSRtYXRjaCA9IGltYWdlLmZpbGVuYW1lLm1hdGNoKC9cXC4oW14uXSskKS8pKSA9PT0gbnVsbCB8fCBfaW1hZ2UkZmlsZW5hbWUkbWF0Y2ggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pbWFnZSRmaWxlbmFtZSRtYXRjaFsxXTtcbiAgICAgICAgICAgIGlmIChleHRlbnNpb24pIHtcbiAgICAgICAgICAgICAgcHJvcHMub25DaGFuZ2Uoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGltYWdlLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uLFxuICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBpbWFnZS5maWxlbmFtZVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGNoaWxkcmVuOiBcIkNob29zZSBmaWxlXCJcbiAgICAgIH0pLCB2YWx1ZSAhPT0gbnVsbCAmJiAvKiNfX1BVUkVfXyovanN4KEFjdGlvbkJ1dHRvbiwge1xuICAgICAgICBwcm9taW5lbmNlOiBcImxvd1wiLFxuICAgICAgICBvblByZXNzOiAoKSA9PiB7XG4gICAgICAgICAgcHJvcHMub25DaGFuZ2UobnVsbCk7XG4gICAgICAgICAgb25CbHVyKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGNoaWxkcmVuOiBcIlJlbW92ZVwiXG4gICAgICB9KV1cbiAgICB9KSwgb2JqZWN0VXJsICYmIC8qI19fUFVSRV9fKi9qc3goQm94LCB7XG4gICAgICBhbGlnblNlbGY6IFwic3RhcnRcIixcbiAgICAgIGJhY2tncm91bmRDb2xvcjogXCJjYW52YXNcIixcbiAgICAgIGJvcmRlclJhZGl1czogXCJyZWd1bGFyXCIsXG4gICAgICBib3JkZXI6IFwibmV1dHJhbFwiLFxuICAgICAgcGFkZGluZzogXCJyZWd1bGFyXCIsXG4gICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChcImltZ1wiLCB7XG4gICAgICAgIHNyYzogb2JqZWN0VXJsLFxuICAgICAgICBhbHQ6IFwiXCIsXG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICAgICAgICBtYXhIZWlnaHQ6IHRva2VuU2NoZW1hLnNpemUuYWxpYXMuc2luZ2xlTGluZVdpZHRoLFxuICAgICAgICAgIG1heFdpZHRoOiAnMTAwJSdcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KSwgaXNJbkVkaXRvciAmJiB2YWx1ZSAhPT0gbnVsbCAmJiAvKiNfX1BVUkVfXyovanN4KFRleHRGaWVsZCwge1xuICAgICAgbGFiZWw6IFwiRmlsZW5hbWVcIixcbiAgICAgIG9uQ2hhbmdlOiBmaWxlbmFtZSA9PiB7XG4gICAgICAgIHByb3BzLm9uQ2hhbmdlKHtcbiAgICAgICAgICAuLi52YWx1ZSxcbiAgICAgICAgICBmaWxlbmFtZVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICB2YWx1ZTogdmFsdWUuZmlsZW5hbWVcbiAgICB9KSwgKHByb3BzLmZvcmNlVmFsaWRhdGlvbiB8fCBibHVycmVkKSAmJiAoKF9wcm9wcyR2YWxpZGF0aW9uMiA9IHByb3BzLnZhbGlkYXRpb24pID09PSBudWxsIHx8IF9wcm9wcyR2YWxpZGF0aW9uMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Byb3BzJHZhbGlkYXRpb24yLmlzUmVxdWlyZWQpICYmIHZhbHVlID09PSBudWxsICYmIC8qI19fUFVSRV9fKi9qc3hzKEZpZWxkTWVzc2FnZSwge1xuICAgICAgY2hpbGRyZW46IFtwcm9wcy5sYWJlbCwgXCIgaXMgcmVxdWlyZWRcIl1cbiAgICB9KV1cbiAgfSk7XG59XG5cbmNvbnN0IEltYWdlRWxlbWVudCA9ICh7XG4gIGF0dHJpYnV0ZXMsXG4gIGNoaWxkcmVuLFxuICBlbGVtZW50OiBfX2VsZW1lbnRGb3JHZXR0aW5nUGF0aFxufSkgPT4ge1xuICBjb25zdCBbZGlhbG9nT3Blbiwgc2V0RGlhbG9nT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthc3BlY3RSYXRpbywgc2V0QXNwZWN0UmF0aW9dID0gdXNlU3RhdGUoKTtcbiAgY29uc3Qgc3RyaW5nRm9ybWF0dGVyID0gdXNlTG9jYWxpemVkU3RyaW5nRm9ybWF0dGVyKGwxMG5NZXNzYWdlcyk7XG4gIGNvbnN0IGVkaXRvciA9IHVzZVNsYXRlU3RhdGljKCk7XG4gIGNvbnN0IFtjdXJyZW50RWxlbWVudCwgc2V0Tm9kZV0gPSB1c2VFbGVtZW50V2l0aFNldE5vZGVzKGVkaXRvciwgX19lbGVtZW50Rm9yR2V0dGluZ1BhdGgpO1xuICBjb25zdCBvYmplY3RVcmwgPSB1c2VPYmplY3RVUkwoY3VycmVudEVsZW1lbnQuc3JjLmNvbnRlbnQpO1xuICBjb25zdCBhY3RpdmVQb3BvdmVyRWxlbWVudCA9IHVzZUFjdGl2ZUJsb2NrUG9wb3ZlcigpO1xuICBjb25zdCBzZWxlY3RlZCA9IGFjdGl2ZVBvcG92ZXJFbGVtZW50ID09PSBfX2VsZW1lbnRGb3JHZXR0aW5nUGF0aDtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3hzKEZyYWdtZW50LCB7XG4gICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4cyhCbG9ja1dyYXBwZXIsIHtcbiAgICAgIGF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMsXG4gICAgICBjaGlsZHJlbjogW2NoaWxkcmVuLCAvKiNfX1BVUkVfXyovanN4cyhCbG9ja1BvcG92ZXJUcmlnZ2VyLCB7XG4gICAgICAgIGVsZW1lbnQ6IF9fZWxlbWVudEZvckdldHRpbmdQYXRoLFxuICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goXCJkaXZcIiwge1xuICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICAgIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nXG4gICAgICAgICAgfSxcbiAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChOb3RFZGl0YWJsZSwge1xuICAgICAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goXCJpbWdcIiwge1xuICAgICAgICAgICAgICAuLi5hdHRyaWJ1dGVzLFxuICAgICAgICAgICAgICBzcmM6IG9iamVjdFVybCxcbiAgICAgICAgICAgICAgYWx0OiBjdXJyZW50RWxlbWVudC5hbHQsXG4gICAgICAgICAgICAgIFwiZGF0YS1zZWxlY3RlZFwiOiBzZWxlY3RlZCxcbiAgICAgICAgICAgICAgb25Mb2FkOiBlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgICAgICBzZXRBc3BlY3RSYXRpbyh0YXJnZXQud2lkdGggLyB0YXJnZXQuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjc3Moe1xuICAgICAgICAgICAgICAgIGJveFNpemluZzogJ2JvcmRlci1ib3gnLFxuICAgICAgICAgICAgICAgIGJvcmRlclJhZGl1czogdG9rZW5TY2hlbWEuc2l6ZS5yYWRpdXMucmVndWxhcixcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgICAgICAgICAgIG1heEhlaWdodDogdG9rZW5TY2hlbWEuc2l6ZS5zY2FsZVszNjAwXSxcbiAgICAgICAgICAgICAgICBtYXhXaWR0aDogJzEwMCUnLFxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zaXRpb24oJ2JveC1zaGFkb3cnKSxcbiAgICAgICAgICAgICAgICAnJltkYXRhLXNlbGVjdGVkPXRydWVdJzoge1xuICAgICAgICAgICAgICAgICAgYm94U2hhZG93OiBgMCAwIDAgJHt0b2tlblNjaGVtYS5zaXplLmJvcmRlci5yZWd1bGFyfSAke3Rva2VuU2NoZW1hLmNvbG9yLmFsaWFzLmJvcmRlclNlbGVjdGVkfWBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KEJsb2NrUG9wb3Zlciwge1xuICAgICAgICAgIGhpZGVBcnJvdzogdHJ1ZSxcbiAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeHMoRmxleCwge1xuICAgICAgICAgICAgZ2FwOiBcInJlZ3VsYXJcIixcbiAgICAgICAgICAgIHBhZGRpbmc6IFwicmVndWxhclwiLFxuICAgICAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4cyhGbGV4LCB7XG4gICAgICAgICAgICAgIGdhcDogXCJzbWFsbFwiLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3hzKFRvb2x0aXBUcmlnZ2VyLCB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEFjdGlvbkJ1dHRvbiwge1xuICAgICAgICAgICAgICAgICAgcHJvbWluZW5jZTogXCJsb3dcIixcbiAgICAgICAgICAgICAgICAgIG9uUHJlc3M6ICgpID0+IHNldERpYWxvZ09wZW4odHJ1ZSksXG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChJY29uLCB7XG4gICAgICAgICAgICAgICAgICAgIHNyYzogZWRpdEljb25cbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goVG9vbHRpcCwge1xuICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IHN0cmluZ0Zvcm1hdHRlci5mb3JtYXQoJ2VkaXQnKVxuICAgICAgICAgICAgICAgIH0pXVxuICAgICAgICAgICAgICB9KSwgLyojX19QVVJFX18qL2pzeHMoVG9vbHRpcFRyaWdnZXIsIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goQWN0aW9uQnV0dG9uLCB7XG4gICAgICAgICAgICAgICAgICBwcm9taW5lbmNlOiBcImxvd1wiLFxuICAgICAgICAgICAgICAgICAgb25QcmVzczogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzcmMgPSBhd2FpdCBnZXRVcGxvYWRlZEltYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzcmMpIHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXROb2RlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyY1xuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goSWNvbiwge1xuICAgICAgICAgICAgICAgICAgICBzcmM6IGZpbGVVcEljb25cbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goVG9vbHRpcCwge1xuICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFwiQ2hvb3NlIGZpbGVcIlxuICAgICAgICAgICAgICAgIH0pXVxuICAgICAgICAgICAgICB9KV1cbiAgICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KERpdmlkZXIsIHtcbiAgICAgICAgICAgICAgb3JpZW50YXRpb246IFwidmVydGljYWxcIlxuICAgICAgICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3hzKFRvb2x0aXBUcmlnZ2VyLCB7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChBY3Rpb25CdXR0b24sIHtcbiAgICAgICAgICAgICAgICBwcm9taW5lbmNlOiBcImxvd1wiLFxuICAgICAgICAgICAgICAgIG9uUHJlc3M6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgICAgICAgIGF0OiBSZWFjdEVkaXRvci5maW5kUGF0aChlZGl0b3IsIF9fZWxlbWVudEZvckdldHRpbmdQYXRoKVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChJY29uLCB7XG4gICAgICAgICAgICAgICAgICBzcmM6IHRyYXNoMkljb25cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9KSwgLyojX19QVVJFX18qL2pzeChUb29sdGlwLCB7XG4gICAgICAgICAgICAgICAgdG9uZTogXCJjcml0aWNhbFwiLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBcIlJlbW92ZVwiXG4gICAgICAgICAgICAgIH0pXVxuICAgICAgICAgICAgfSldXG4gICAgICAgICAgfSlcbiAgICAgICAgfSldXG4gICAgICB9LCBhc3BlY3RSYXRpbyldXG4gICAgfSksIC8qI19fUFVSRV9fKi9qc3goRGlhbG9nQ29udGFpbmVyLCB7XG4gICAgICBvbkRpc21pc3M6ICgpID0+IHtcbiAgICAgICAgc2V0RGlhbG9nT3BlbihmYWxzZSk7XG4gICAgICAgIGZvY3VzV2l0aFByZXZpb3VzU2VsZWN0aW9uKGVkaXRvcik7XG4gICAgICB9LFxuICAgICAgY2hpbGRyZW46IGRpYWxvZ09wZW4gJiYgLyojX19QVVJFX18qL2pzeChJbWFnZURpYWxvZywge1xuICAgICAgICBhbHQ6IGN1cnJlbnRFbGVtZW50LmFsdCxcbiAgICAgICAgdGl0bGU6IGN1cnJlbnRFbGVtZW50LnRpdGxlLFxuICAgICAgICBmaWxlbmFtZTogY3VycmVudEVsZW1lbnQuc3JjLmZpbGVuYW1lLFxuICAgICAgICBvblN1Ym1pdDogKHtcbiAgICAgICAgICBhbHQsXG4gICAgICAgICAgZmlsZW5hbWUsXG4gICAgICAgICAgdGl0bGVcbiAgICAgICAgfSkgPT4ge1xuICAgICAgICAgIHNldE5vZGUoe1xuICAgICAgICAgICAgYWx0LFxuICAgICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgICBzcmM6IHtcbiAgICAgICAgICAgICAgY29udGVudDogY3VycmVudEVsZW1lbnQuc3JjLmNvbnRlbnQsXG4gICAgICAgICAgICAgIGZpbGVuYW1lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSldXG4gIH0pO1xufTtcbmZ1bmN0aW9uIEltYWdlRGlhbG9nKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBpbWFnZXNcbiAgfSA9IHVzZURvY3VtZW50RWRpdG9yQ29uZmlnKCkuZG9jdW1lbnRGZWF0dXJlcztcbiAgaWYgKCFpbWFnZXMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3VuZXhwZWN0ZWQgaW1hZ2UgcmVuZGVyZWQgd2hlbiBpbWFnZXMgYXJlIGRpc2FibGVkJyk7XG4gIH1cbiAgY29uc3Qgc2NoZW1hID0gdXNlTWVtbygoKSA9PiBvYmplY3QoaW1hZ2VzLnNjaGVtYSksIFtpbWFnZXNdKTtcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZSh7XG4gICAgYWx0OiBwcm9wcy5hbHQsXG4gICAgdGl0bGU6IHByb3BzLnRpdGxlXG4gIH0pO1xuICBjb25zdCBwcmV2aWV3UHJvcHMgPSB1c2VNZW1vKCgpID0+IGNyZWF0ZUdldFByZXZpZXdQcm9wcyhzY2hlbWEsIHNldFN0YXRlLCAoKSA9PiB1bmRlZmluZWQpLCBbc2NoZW1hXSkoc3RhdGUpO1xuICBjb25zdCBbZmlsZW5hbWVXaXRob3V0RXh0ZW5zaW9uLCBmaWxlbmFtZUV4dGVuc2lvbl0gPSBzcGxpdEZpbGVuYW1lKHByb3BzLmZpbGVuYW1lKTtcbiAgY29uc3QgW2ZvcmNlVmFsaWRhdGlvbiwgc2V0Rm9yY2VWYWxpZGF0aW9uXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgbGV0IFtmaWxlTmFtZSwgc2V0RmlsZU5hbWVdID0gdXNlU3RhdGUoZmlsZW5hbWVXaXRob3V0RXh0ZW5zaW9uKTtcbiAgbGV0IFtmaWxlTmFtZVRvdWNoZWQsIHNldEZpbGVOYW1lVG91Y2hlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGxldCB7XG4gICAgZGlzbWlzc1xuICB9ID0gdXNlRGlhbG9nQ29udGFpbmVyKCk7XG4gIGxldCBzdHJpbmdGb3JtYXR0ZXIgPSB1c2VMb2NhbGl6ZWRTdHJpbmdGb3JtYXR0ZXIobDEwbk1lc3NhZ2VzKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goRGlhbG9nLCB7XG4gICAgc2l6ZTogXCJzbWFsbFwiLFxuICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4cyhcImZvcm1cIiwge1xuICAgICAgc3R5bGU6IHtcbiAgICAgICAgZGlzcGxheTogJ2NvbnRlbnRzJ1xuICAgICAgfSxcbiAgICAgIG9uU3VibWl0OiBldmVudCA9PiB7XG4gICAgICAgIGlmIChldmVudC50YXJnZXQgIT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHJldHVybjtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgc2V0Rm9yY2VWYWxpZGF0aW9uKHRydWUpO1xuICAgICAgICBpZiAoZmlsZU5hbWUgJiYgY2xpZW50U2lkZVZhbGlkYXRlUHJvcChzY2hlbWEsIHN0YXRlLCB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgZGlzbWlzcygpO1xuICAgICAgICAgIHByb3BzLm9uU3VibWl0KHtcbiAgICAgICAgICAgIGFsdDogc3RhdGUuYWx0LFxuICAgICAgICAgICAgdGl0bGU6IHN0YXRlLnRpdGxlLFxuICAgICAgICAgICAgZmlsZW5hbWU6IFtmaWxlTmFtZSwgZmlsZW5hbWVFeHRlbnNpb25dLmpvaW4oJy4nKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEhlYWRpbmcsIHtcbiAgICAgICAgY2hpbGRyZW46IFwiSW1hZ2UgZGV0YWlsc1wiXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeChDb250ZW50LCB7XG4gICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4cyhGbGV4LCB7XG4gICAgICAgICAgZ2FwOiBcImxhcmdlXCIsXG4gICAgICAgICAgZGlyZWN0aW9uOiBcImNvbHVtblwiLFxuICAgICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChUZXh0RmllbGQsIHtcbiAgICAgICAgICAgIGxhYmVsOiBcIkZpbGUgbmFtZVwiLFxuICAgICAgICAgICAgb25DaGFuZ2U6IHNldEZpbGVOYW1lLFxuICAgICAgICAgICAgb25CbHVyOiAoKSA9PiBzZXRGaWxlTmFtZVRvdWNoZWQodHJ1ZSksXG4gICAgICAgICAgICB2YWx1ZTogZmlsZU5hbWUsXG4gICAgICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiAoZmlsZU5hbWVUb3VjaGVkIHx8IGZvcmNlVmFsaWRhdGlvbikgJiYgIWZpbGVOYW1lID8gJ1BsZWFzZSBwcm92aWRlIGEgZmlsZSBuYW1lLicgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBlbmRFbGVtZW50OiBmaWxlbmFtZUV4dGVuc2lvbiA/IC8qI19fUFVSRV9fKi9qc3goRmxleCwge1xuICAgICAgICAgICAgICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLFxuICAgICAgICAgICAgICBqdXN0aWZ5Q29udGVudDogXCJjZW50ZXJcIixcbiAgICAgICAgICAgICAgcGFkZGluZ0VuZDogXCJyZWd1bGFyXCIsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4cyhUZXh0LCB7XG4gICAgICAgICAgICAgICAgY29sb3I6IFwibmV1dHJhbFRlcnRpYXJ5XCIsXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcIi5cIiwgZmlsZW5hbWVFeHRlbnNpb25dXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KSA6IG51bGxcbiAgICAgICAgICB9KSwgLyojX19QVVJFX18qL2pzeChGb3JtVmFsdWVDb250ZW50RnJvbVByZXZpZXdQcm9wcywge1xuICAgICAgICAgICAgZm9yY2VWYWxpZGF0aW9uOiBmb3JjZVZhbGlkYXRpb24sXG4gICAgICAgICAgICBhdXRvRm9jdXM6IHRydWUsXG4gICAgICAgICAgICAuLi5wcmV2aWV3UHJvcHNcbiAgICAgICAgICB9KV1cbiAgICAgICAgfSlcbiAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4cyhCdXR0b25Hcm91cCwge1xuICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goQnV0dG9uLCB7XG4gICAgICAgICAgb25QcmVzczogZGlzbWlzcyxcbiAgICAgICAgICBjaGlsZHJlbjogc3RyaW5nRm9ybWF0dGVyLmZvcm1hdCgnY2FuY2VsJylcbiAgICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goQnV0dG9uLCB7XG4gICAgICAgICAgcHJvbWluZW5jZTogXCJoaWdoXCIsXG4gICAgICAgICAgdHlwZTogXCJzdWJtaXRcIixcbiAgICAgICAgICBjaGlsZHJlbjogc3RyaW5nRm9ybWF0dGVyLmZvcm1hdCgnc2F2ZScpXG4gICAgICAgIH0pXVxuICAgICAgfSldXG4gICAgfSlcbiAgfSk7XG59XG5mdW5jdGlvbiBzcGxpdEZpbGVuYW1lKGZpbGVuYW1lKSB7XG4gIGNvbnN0IGRvdEluZGV4ID0gZmlsZW5hbWUubGFzdEluZGV4T2YoJy4nKTtcbiAgaWYgKGRvdEluZGV4ID09PSAtMSkge1xuICAgIHJldHVybiBbZmlsZW5hbWUsICcnXTtcbiAgfVxuICByZXR1cm4gW2ZpbGVuYW1lLnN1YnN0cmluZygwLCBkb3RJbmRleCksIGZpbGVuYW1lLnN1YnN0cmluZyhkb3RJbmRleCArIDEpXTtcbn1cbmxldCBfaW1hZ2VJY29uID0gLyojX19QVVJFX18qL2pzeChJY29uLCB7XG4gIHNyYzogaW1hZ2VJY29uXG59KTtcbmZ1bmN0aW9uIEltYWdlQnV0dG9uKCkge1xuICBjb25zdCBlZGl0b3IgPSB1c2VTbGF0ZVN0YXRpYygpO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChGcmFnbWVudCwge1xuICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KEFjdGlvbkJ1dHRvbiwge1xuICAgICAgcHJvbWluZW5jZTogXCJsb3dcIixcbiAgICAgIG9uUHJlc3M6IGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3Qgc3JjID0gYXdhaXQgZ2V0VXBsb2FkZWRJbWFnZSgpO1xuICAgICAgICBpZiAoc3JjKSB7XG4gICAgICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgIHR5cGU6ICdpbWFnZScsXG4gICAgICAgICAgICBzcmMsXG4gICAgICAgICAgICBhbHQ6ICcnLFxuICAgICAgICAgICAgdGl0bGU6ICcnLFxuICAgICAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgICAgIHRleHQ6ICcnXG4gICAgICAgICAgICB9XVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY2hpbGRyZW46IF9pbWFnZUljb25cbiAgICB9KVxuICB9KTtcbn1cbmNvbnN0IGltYWdlQnV0dG9uID0gLyojX19QVVJFX18qL2pzeHMoVG9vbHRpcFRyaWdnZXIsIHtcbiAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEltYWdlQnV0dG9uLCB7fSksIC8qI19fUFVSRV9fKi9qc3goVG9vbHRpcCwge1xuICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgIGNoaWxkcmVuOiBcIkltYWdlXCJcbiAgICB9KVxuICB9KV1cbn0pO1xuZnVuY3Rpb24gd2l0aEltYWdlcyhlZGl0b3IpIHtcbiAgY29uc3Qge1xuICAgIGluc2VydERhdGFcbiAgfSA9IGVkaXRvcjtcbiAgZWRpdG9yLmluc2VydERhdGEgPSBkYXRhID0+IHtcbiAgICBjb25zdCBpbWFnZXMgPSBBcnJheS5mcm9tKGRhdGEuZmlsZXMpLmZpbHRlcih4ID0+IHgudHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKSk7XG4gICAgaWYgKGltYWdlcy5sZW5ndGgpIHtcbiAgICAgIFByb21pc2UuYWxsKGltYWdlcy5tYXAoYXN5bmMgZmlsZSA9PiAoe1xuICAgICAgICBuYW1lOiBmaWxlLm5hbWUsXG4gICAgICAgIGRhdGE6IG5ldyBVaW50OEFycmF5KGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKSlcbiAgICAgIH0pKSkudGhlbihpbWFnZXMgPT4ge1xuICAgICAgICBpbnNlcnROb2Rlc0J1dFJlcGxhY2VJZlNlbGVjdGlvbklzQXRFbXB0eVBhcmFncmFwaE9ySGVhZGluZyhlZGl0b3IsIHtcbiAgICAgICAgICB0eXBlOiAnaW1hZ2UnLFxuICAgICAgICAgIHNyYzoge1xuICAgICAgICAgICAgY29udGVudDogaW1hZ2VzWzBdLmRhdGEsXG4gICAgICAgICAgICBmaWxlbmFtZTogaW1hZ2VzWzBdLm5hbWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFsdDogJycsXG4gICAgICAgICAgdGl0bGU6ICcnLFxuICAgICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgICAgdGV4dDogJydcbiAgICAgICAgICB9XVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpbnNlcnREYXRhKGRhdGEpO1xuICB9O1xuICByZXR1cm4gZWRpdG9yO1xufVxuXG5mdW5jdGlvbiBvcmRlcihhLCBiKSB7XG4gIHJldHVybiB7XG4gICAgc3RhcnQ6IE1hdGgubWluKGEsIGIpLFxuICAgIGVuZDogTWF0aC5tYXgoYSwgYilcbiAgfTtcbn1cbmZ1bmN0aW9uIGdldFJlbGF0aXZlUm93UGF0aChoYXNIZWFkLCByb3dJbmRleCkge1xuICByZXR1cm4gaGFzSGVhZCA/IHJvd0luZGV4ID09PSAwID8gWzAsIDBdIDogWzEsIHJvd0luZGV4IC0gMV0gOiBbMCwgcm93SW5kZXhdO1xufVxuZnVuY3Rpb24gZ2V0U2VsZWN0ZWRUYWJsZUFyZWEoZWRpdG9yKSB7XG4gIHZhciBfRWRpdG9yJGFib3ZlLCBfZWRpdG9yJHNlbGVjdGlvbiwgX0VkaXRvciRhYm92ZTIsIF9lZGl0b3Ikc2VsZWN0aW9uMjtcbiAgY29uc3QgYW5jaG9yID0gKF9FZGl0b3IkYWJvdmUgPSBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgbWF0Y2g6IG5vZGVUeXBlTWF0Y2hlcigndGFibGUtY2VsbCcpLFxuICAgIGF0OiAoX2VkaXRvciRzZWxlY3Rpb24gPSBlZGl0b3Iuc2VsZWN0aW9uKSA9PT0gbnVsbCB8fCBfZWRpdG9yJHNlbGVjdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2VkaXRvciRzZWxlY3Rpb24uYW5jaG9yLnBhdGhcbiAgfSkpID09PSBudWxsIHx8IF9FZGl0b3IkYWJvdmUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9FZGl0b3IkYWJvdmVbMV07XG4gIGNvbnN0IGZvY3VzID0gKF9FZGl0b3IkYWJvdmUyID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgIG1hdGNoOiBub2RlVHlwZU1hdGNoZXIoJ3RhYmxlLWNlbGwnKSxcbiAgICBhdDogKF9lZGl0b3Ikc2VsZWN0aW9uMiA9IGVkaXRvci5zZWxlY3Rpb24pID09PSBudWxsIHx8IF9lZGl0b3Ikc2VsZWN0aW9uMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2VkaXRvciRzZWxlY3Rpb24yLmZvY3VzLnBhdGhcbiAgfSkpID09PSBudWxsIHx8IF9FZGl0b3IkYWJvdmUyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfRWRpdG9yJGFib3ZlMlsxXTtcbiAgY29uc3QgdGFibGUgPSBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgbWF0Y2g6IG5vZGVUeXBlTWF0Y2hlcigndGFibGUnKVxuICB9KTtcbiAgaWYgKGVkaXRvci5zZWxlY3Rpb24gJiYgdGFibGUgJiYgRWxlbWVudCQxLmlzRWxlbWVudCh0YWJsZVswXS5jaGlsZHJlblswXSkgJiYgYW5jaG9yICYmIGZvY3VzICYmIFBhdGguZXF1YWxzKGFuY2hvci5zbGljZSgwLCAtMyksIGZvY3VzLnNsaWNlKDAsIC0zKSkpIHtcbiAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSBFZGl0b3IuZWRnZXMoZWRpdG9yLCBlZGl0b3Iuc2VsZWN0aW9uKTtcbiAgICByZXR1cm4ge1xuICAgICAgdGFibGVQYXRoOiB0YWJsZVsxXSxcbiAgICAgIHRhYmxlOiB0YWJsZVswXSxcbiAgICAgIHNpbmdsZUNlbGw6IFBhdGguZXF1YWxzKGFuY2hvciwgZm9jdXMpID8gUG9pbnQuZXF1YWxzKEVkaXRvci5zdGFydChlZGl0b3IsIGFuY2hvciksIHN0YXJ0KSAmJiBQb2ludC5lcXVhbHMoRWRpdG9yLmVuZChlZGl0b3IsIGFuY2hvciksIGVuZCkgJiYgIVBvaW50LmVxdWFscyhzdGFydCwgZW5kKSA/ICdzZWxlY3RlZCcgOiAnbm90LXNlbGVjdGVkJyA6ICdtYW55JyxcbiAgICAgIHJvdzogb3JkZXIoYW5jaG9yW2FuY2hvci5sZW5ndGggLSAyXSArIGFuY2hvclthbmNob3IubGVuZ3RoIC0gM10sIGZvY3VzW2ZvY3VzLmxlbmd0aCAtIDJdICsgZm9jdXNbYW5jaG9yLmxlbmd0aCAtIDNdKSxcbiAgICAgIGNvbHVtbjogb3JkZXIoYW5jaG9yW2FuY2hvci5sZW5ndGggLSAxXSwgZm9jdXNbZm9jdXMubGVuZ3RoIC0gMV0pXG4gICAgfTtcbiAgfVxufVxuY29uc3QgY2VsbCA9IGhlYWRlciA9PiAoe1xuICB0eXBlOiAndGFibGUtY2VsbCcsXG4gIC4uLihoZWFkZXIgPyB7XG4gICAgaGVhZGVyOiB0cnVlXG4gIH0gOiB7fSksXG4gIGNoaWxkcmVuOiBbe1xuICAgIHR5cGU6ICdwYXJhZ3JhcGgnLFxuICAgIGNoaWxkcmVuOiBbe1xuICAgICAgdGV4dDogJydcbiAgICB9XVxuICB9XVxufSk7XG5mdW5jdGlvbiBjbG9uZURlc2NlbmRhbnQobm9kZSkge1xuICBpZiAoVGV4dCQxLmlzVGV4dChub2RlKSkgcmV0dXJuIHtcbiAgICAuLi5ub2RlXG4gIH07XG4gIHJldHVybiB7XG4gICAgLi4ubm9kZSxcbiAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbi5tYXAoY2xvbmVEZXNjZW5kYW50KVxuICB9O1xufVxuZnVuY3Rpb24gd2l0aFRhYmxlKGVkaXRvcikge1xuICBjb25zdCB7XG4gICAgZGVsZXRlRnJhZ21lbnQsXG4gICAgbm9ybWFsaXplTm9kZSxcbiAgICBnZXRGcmFnbWVudCxcbiAgICBpbnNlcnRGcmFnbWVudCxcbiAgICBkZWxldGVCYWNrd2FyZFxuICB9ID0gZWRpdG9yO1xuICBlZGl0b3IuaW5zZXJ0RnJhZ21lbnQgPSBmcmFnbWVudCA9PiB7XG4gICAgY29uc3Qgc2VsZWN0ZWRUYWJsZUFyZWEgPSBnZXRTZWxlY3RlZFRhYmxlQXJlYShlZGl0b3IpO1xuICAgIGlmICghc2VsZWN0ZWRUYWJsZUFyZWEgfHwgZnJhZ21lbnQubGVuZ3RoICE9PSAxIHx8IGZyYWdtZW50WzBdLnR5cGUgIT09ICd0YWJsZScpIHtcbiAgICAgIGluc2VydEZyYWdtZW50KGZyYWdtZW50KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbmV3Um93cyA9IGZyYWdtZW50WzBdLmNoaWxkcmVuLmZsYXRNYXAoY2hpbGQgPT4gY2hpbGQudHlwZSA9PT0gJ3RhYmxlLWhlYWQnIHx8IGNoaWxkLnR5cGUgPT09ICd0YWJsZS1ib2R5JyA/IGNoaWxkLmNoaWxkcmVuIDogW10pO1xuICAgIGlmICghbmV3Um93cy5ldmVyeShub2RlVHlwZU1hdGNoZXIoJ3RhYmxlLXJvdycpKSkge1xuICAgICAgaW5zZXJ0RnJhZ21lbnQoZnJhZ21lbnQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQge1xuICAgICAgcm93LFxuICAgICAgY29sdW1uLFxuICAgICAgdGFibGVQYXRoLFxuICAgICAgdGFibGVcbiAgICB9ID0gc2VsZWN0ZWRUYWJsZUFyZWE7XG4gICAgY29uc3QgZXhpc3RpbmdCb2R5ID0gc2VsZWN0ZWRUYWJsZUFyZWEudGFibGUuY2hpbGRyZW5bc2VsZWN0ZWRUYWJsZUFyZWEudGFibGUuY2hpbGRyZW4ubGVuZ3RoID09PSAxID8gMCA6IDFdO1xuICAgIGlmIChuZXdSb3dzWzBdLnR5cGUgIT09ICd0YWJsZS1yb3cnIHx8IGV4aXN0aW5nQm9keS50eXBlICE9PSAndGFibGUtYm9keScgfHwgZXhpc3RpbmdCb2R5LmNoaWxkcmVuWzBdLnR5cGUgIT09ICd0YWJsZS1yb3cnKSB7XG4gICAgICBpbnNlcnRGcmFnbWVudChmcmFnbWVudCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGhhc0hlYWQgPSB0YWJsZS5jaGlsZHJlblswXS50eXBlID09PSAndGFibGUtaGVhZCc7XG4gICAgaWYgKHNlbGVjdGVkVGFibGVBcmVhLnNpbmdsZUNlbGwgIT09ICdtYW55Jykge1xuICAgICAgcm93ID0ge1xuICAgICAgICBzdGFydDogcm93LnN0YXJ0LFxuICAgICAgICBlbmQ6IE1hdGgubWluKHJvdy5zdGFydCArIG5ld1Jvd3MubGVuZ3RoIC0gMSwgZXhpc3RpbmdCb2R5LmNoaWxkcmVuLmxlbmd0aCAtIDEgKyAoaGFzSGVhZCA/IDEgOiAwKSlcbiAgICAgIH07XG4gICAgICBjb2x1bW4gPSB7XG4gICAgICAgIHN0YXJ0OiBjb2x1bW4uc3RhcnQsXG4gICAgICAgIGVuZDogTWF0aC5taW4oY29sdW1uLnN0YXJ0ICsgbmV3Um93c1swXS5jaGlsZHJlbi5sZW5ndGggLSAxLCBleGlzdGluZ0JvZHkuY2hpbGRyZW5bMF0uY2hpbGRyZW4ubGVuZ3RoIC0gMSlcbiAgICAgIH07XG4gICAgfVxuICAgIEVkaXRvci53aXRob3V0Tm9ybWFsaXppbmcoZWRpdG9yLCAoKSA9PiB7XG4gICAgICBmb3IgKGxldCByb3dJbmRleCA9IHJvdy5zdGFydDsgcm93SW5kZXggPD0gcm93LmVuZDsgcm93SW5kZXgrKykge1xuICAgICAgICBjb25zdCBuZXdSb3cgPSBuZXdSb3dzWyhyb3dJbmRleCAtIHJvdy5zdGFydCkgJSBuZXdSb3dzLmxlbmd0aF07XG4gICAgICAgIGZvciAobGV0IGNlbGxJbmRleCA9IGNvbHVtbi5zdGFydDsgY2VsbEluZGV4IDw9IGNvbHVtbi5lbmQ7IGNlbGxJbmRleCsrKSB7XG4gICAgICAgICAgY29uc3QgcmVsYXRpdmVDZWxsUGF0aCA9IFsuLi5nZXRSZWxhdGl2ZVJvd1BhdGgoaGFzSGVhZCwgcm93SW5kZXgpLCBjZWxsSW5kZXhdO1xuICAgICAgICAgIGNvbnN0IGNlbGwgPSBOb2RlLmdldCh0YWJsZSwgcmVsYXRpdmVDZWxsUGF0aCk7XG4gICAgICAgICAgY29uc3QgbmV3Q2VsbCA9IG5ld1Jvdy5jaGlsZHJlblsoY2VsbEluZGV4IC0gY29sdW1uLnN0YXJ0KSAlIG5ld1Jvdy5jaGlsZHJlbi5sZW5ndGhdO1xuICAgICAgICAgIGlmIChjZWxsLnR5cGUgIT09ICd0YWJsZS1jZWxsJyB8fCBuZXdDZWxsLnR5cGUgIT09ICd0YWJsZS1jZWxsJykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGNlbGxQYXRoID0gWy4uLnRhYmxlUGF0aCwgLi4ucmVsYXRpdmVDZWxsUGF0aF07XG4gICAgICAgICAgZm9yIChjb25zdCBjaGlsZElkeCBvZiBbLi4uY2VsbC5jaGlsZHJlbi5rZXlzKCldLnJldmVyc2UoKSkge1xuICAgICAgICAgICAgVHJhbnNmb3Jtcy5yZW1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgYXQ6IFsuLi5jZWxsUGF0aCwgY2hpbGRJZHhdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2RlcyhlZGl0b3IsIG5ld0NlbGwuY2hpbGRyZW4ubWFwKGNsb25lRGVzY2VuZGFudCksIHtcbiAgICAgICAgICAgIGF0OiBbLi4uY2VsbFBhdGgsIDBdXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFRyYW5zZm9ybXMuc2V0U2VsZWN0aW9uKGVkaXRvciwge1xuICAgICAgICBhbmNob3I6IEVkaXRvci5zdGFydChlZGl0b3IsIFsuLi50YWJsZVBhdGgsIC4uLmdldFJlbGF0aXZlUm93UGF0aChoYXNIZWFkLCByb3cuc3RhcnQpLCBjb2x1bW4uc3RhcnRdKSxcbiAgICAgICAgZm9jdXM6IEVkaXRvci5lbmQoZWRpdG9yLCBbLi4udGFibGVQYXRoLCAuLi5nZXRSZWxhdGl2ZVJvd1BhdGgoaGFzSGVhZCwgcm93LmVuZCksIGNvbHVtbi5lbmRdKVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG4gIGVkaXRvci5kZWxldGVCYWNrd2FyZCA9IHVuaXQgPT4ge1xuICAgIGlmIChlZGl0b3Iuc2VsZWN0aW9uICYmIFJhbmdlLmlzQ29sbGFwc2VkKGVkaXRvci5zZWxlY3Rpb24pICYmIGVkaXRvci5zZWxlY3Rpb24uYW5jaG9yLm9mZnNldCA9PT0gMCkge1xuICAgICAgY29uc3QgdGFibGVDZWxsID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgICAgICBtYXRjaDogbm9kZVR5cGVNYXRjaGVyKCd0YWJsZS1jZWxsJylcbiAgICAgIH0pO1xuICAgICAgaWYgKHRhYmxlQ2VsbCAmJiB0YWJsZUNlbGxbMF0uY2hpbGRyZW5bMF0udHlwZSA9PT0gJ3BhcmFncmFwaCcgJiYgdGFibGVDZWxsWzBdLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLnR5cGUgPT09IHVuZGVmaW5lZCAmJiBQYXRoLmVxdWFscyhlZGl0b3Iuc2VsZWN0aW9uLmFuY2hvci5wYXRoLCBbLi4udGFibGVDZWxsWzFdLCAwLCAwXSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBkZWxldGVCYWNrd2FyZCh1bml0KTtcbiAgfTtcbiAgZWRpdG9yLmdldEZyYWdtZW50ID0gKCkgPT4ge1xuICAgIGNvbnN0IHNlbGVjdGVkVGFibGVBcmVhID0gZ2V0U2VsZWN0ZWRUYWJsZUFyZWEoZWRpdG9yKTtcbiAgICBpZiAoc2VsZWN0ZWRUYWJsZUFyZWEgJiYgc2VsZWN0ZWRUYWJsZUFyZWEuc2luZ2xlQ2VsbCAhPT0gJ25vdC1zZWxlY3RlZCcpIHtcbiAgICAgIHZhciBfdGFibGUkY2hpbGRyZW4kO1xuICAgICAgY29uc3Qge1xuICAgICAgICB0YWJsZVxuICAgICAgfSA9IHNlbGVjdGVkVGFibGVBcmVhO1xuICAgICAgY29uc3QgZmlyc3QgPSB0YWJsZS5jaGlsZHJlblswXS50eXBlID09PSAndGFibGUtaGVhZCcgfHwgdGFibGUuY2hpbGRyZW5bMF0udHlwZSA9PT0gJ3RhYmxlLWJvZHknID8gdGFibGUuY2hpbGRyZW5bMF0gOiB1bmRlZmluZWQ7XG4gICAgICBpZiAoIWZpcnN0KSB7XG4gICAgICAgIHJldHVybiBnZXRGcmFnbWVudCgpO1xuICAgICAgfVxuICAgICAgY29uc3Qgc2Vjb25kID0gKChfdGFibGUkY2hpbGRyZW4kID0gdGFibGUuY2hpbGRyZW5bMV0pID09PSBudWxsIHx8IF90YWJsZSRjaGlsZHJlbiQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90YWJsZSRjaGlsZHJlbiQudHlwZSkgPT09ICd0YWJsZS1ib2R5JyA/IHRhYmxlLmNoaWxkcmVuWzFdIDogdW5kZWZpbmVkO1xuICAgICAgY29uc3QgYm9keSA9IHNlY29uZCB8fCBmaXJzdDtcbiAgICAgIGNvbnN0IGhhc0hlYWQgPSBmaXJzdC50eXBlID09PSAndGFibGUtaGVhZCc7XG4gICAgICBjb25zdCBpc1NlbGVjdGlvbkluSGVhZCA9IHNlbGVjdGVkVGFibGVBcmVhLnJvdy5zdGFydCA9PT0gMCAmJiAhIXNlY29uZDtcbiAgICAgIGNvbnN0IGNvbHVtbkxlbmd0aCA9IHNlbGVjdGVkVGFibGVBcmVhLmNvbHVtbi5lbmQgLSBzZWxlY3RlZFRhYmxlQXJlYS5jb2x1bW4uc3RhcnQgKyAxO1xuICAgICAgcmV0dXJuIFt7XG4gICAgICAgIHR5cGU6ICd0YWJsZScsXG4gICAgICAgIGNoaWxkcmVuOiBbLi4uKGlzU2VsZWN0aW9uSW5IZWFkID8gW3tcbiAgICAgICAgICB0eXBlOiAndGFibGUtaGVhZCcsXG4gICAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgICB0eXBlOiAndGFibGUtcm93JyxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBBcnJheS5mcm9tKHtcbiAgICAgICAgICAgICAgbGVuZ3RoOiBjb2x1bW5MZW5ndGhcbiAgICAgICAgICAgIH0pLm1hcCgoXywgY29sdW1uSW5kZXgpID0+IGZpcnN0LmNoaWxkcmVuWzBdLmNoaWxkcmVuW2NvbHVtbkluZGV4ICsgc2VsZWN0ZWRUYWJsZUFyZWEuY29sdW1uLnN0YXJ0XSlcbiAgICAgICAgICB9XVxuICAgICAgICB9XSA6IFtdKSwge1xuICAgICAgICAgIHR5cGU6ICd0YWJsZS1ib2R5JyxcbiAgICAgICAgICBjaGlsZHJlbjogQXJyYXkuZnJvbSh7XG4gICAgICAgICAgICBsZW5ndGg6IHNlbGVjdGVkVGFibGVBcmVhLnJvdy5lbmQgLSBzZWxlY3RlZFRhYmxlQXJlYS5yb3cuc3RhcnQgKyAoaXNTZWxlY3Rpb25JbkhlYWQgPyAwIDogMSlcbiAgICAgICAgICB9KS5tYXAoKF8sIHJvd0luZGV4KSA9PiAoe1xuICAgICAgICAgICAgdHlwZTogJ3RhYmxlLXJvdycsXG4gICAgICAgICAgICBjaGlsZHJlbjogQXJyYXkuZnJvbSh7XG4gICAgICAgICAgICAgIGxlbmd0aDogY29sdW1uTGVuZ3RoXG4gICAgICAgICAgICB9KS5tYXAoKF8sIGNvbHVtbkluZGV4KSA9PiBib2R5LmNoaWxkcmVuW3Jvd0luZGV4ICsgc2VsZWN0ZWRUYWJsZUFyZWEucm93LnN0YXJ0IC0gKGhhc0hlYWQgJiYgIWlzU2VsZWN0aW9uSW5IZWFkID8gMSA6IDApXS5jaGlsZHJlbltjb2x1bW5JbmRleCArIHNlbGVjdGVkVGFibGVBcmVhLmNvbHVtbi5zdGFydF0pXG4gICAgICAgICAgfSkpXG4gICAgICAgIH1dXG4gICAgICB9XTtcbiAgICB9XG4gICAgcmV0dXJuIGdldEZyYWdtZW50KCk7XG4gIH07XG4gIGVkaXRvci5kZWxldGVGcmFnbWVudCA9IGRpcmVjdGlvbiA9PiB7XG4gICAgaWYgKCFlZGl0b3Iuc2VsZWN0aW9uIHx8IFJhbmdlLmlzQ29sbGFwc2VkKGVkaXRvci5zZWxlY3Rpb24pKSB7XG4gICAgICBkZWxldGVGcmFnbWVudChkaXJlY3Rpb24pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzZWxlY3RlZFRhYmxlQXJlYSA9IGdldFNlbGVjdGVkVGFibGVBcmVhKGVkaXRvcik7XG4gICAgaWYgKCFzZWxlY3RlZFRhYmxlQXJlYSB8fCBzZWxlY3RlZFRhYmxlQXJlYS5zaW5nbGVDZWxsID09PSAnbm90LXNlbGVjdGVkJykge1xuICAgICAgZGVsZXRlRnJhZ21lbnQoZGlyZWN0aW9uKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaGVhZE9yQm9keSA9IHNlbGVjdGVkVGFibGVBcmVhLnRhYmxlLmNoaWxkcmVuWzBdO1xuICAgIGlmICghRWxlbWVudCQxLmlzRWxlbWVudChoZWFkT3JCb2R5KSB8fCAhRWxlbWVudCQxLmlzRWxlbWVudChoZWFkT3JCb2R5LmNoaWxkcmVuWzBdKSkge1xuICAgICAgZGVsZXRlRnJhZ21lbnQoZGlyZWN0aW9uKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbWF4Um93SWR4ID0gc2VsZWN0ZWRUYWJsZUFyZWEudGFibGUuY2hpbGRyZW4ucmVkdWNlKChzdW0sIGhlYWRPckJvZHkpID0+IHN1bSArIChoZWFkT3JCb2R5LnR5cGUgPT09ICd0YWJsZS1oZWFkJyB8fCBoZWFkT3JCb2R5LnR5cGUgPT09ICd0YWJsZS1ib2R5JyA/IGhlYWRPckJvZHkuY2hpbGRyZW4ubGVuZ3RoIDogMCksIDApIC0gMTtcbiAgICBjb25zdCB7XG4gICAgICByb3csXG4gICAgICBjb2x1bW4sXG4gICAgICB0YWJsZVBhdGhcbiAgICB9ID0gc2VsZWN0ZWRUYWJsZUFyZWE7XG4gICAgLy8gbm90ZSB0aGUgZmFjdCB0aGF0IGhhc1dob2xlQ29sdW1uU2VsZWN0ZWQgdXNlcyByb3cgYW5kIGhhc1dob2xlUm93U2VsZWN0ZWQgdXNlcyBjb2x1bW5cbiAgICAvLyBpcyBub3QgYSBtaXN0YWtlLiBpZiBhIHdob2xlIGNvbHVtbiBoYXMgYmVlbiBzZWxlY3RlZCwgdGhlbiB0aGUgc3RhcnRpbmcgcm93IGlzIDAgYW5kIHRoZSBlbmQgaXMgdGhlIGxhc3Qgcm93XG4gICAgY29uc3QgaGFzV2hvbGVDb2x1bW5TZWxlY3RlZCA9IHJvdy5zdGFydCA9PT0gMCAmJiByb3cuZW5kID09PSBtYXhSb3dJZHg7XG4gICAgY29uc3QgaGFzV2hvbGVSb3dTZWxlY3RlZCA9IGNvbHVtbi5zdGFydCA9PT0gMCAmJiBjb2x1bW4uZW5kID09PSBoZWFkT3JCb2R5LmNoaWxkcmVuWzBdLmNoaWxkcmVuLmxlbmd0aCAtIDE7XG4gICAgaWYgKGhhc1dob2xlQ29sdW1uU2VsZWN0ZWQgJiYgaGFzV2hvbGVSb3dTZWxlY3RlZCkge1xuICAgICAgVHJhbnNmb3Jtcy5yZW1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgYXQ6IHRhYmxlUGF0aFxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGhhc0hlYWQgPSBoZWFkT3JCb2R5LnR5cGUgPT09ICd0YWJsZS1oZWFkJztcbiAgICBpZiAoaGFzV2hvbGVSb3dTZWxlY3RlZCkge1xuICAgICAgRWRpdG9yLndpdGhvdXROb3JtYWxpemluZyhlZGl0b3IsICgpID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IHJvdy5lbmQ7IGkgPj0gcm93LnN0YXJ0OyBpLS0pIHtcbiAgICAgICAgICBpZiAoaGFzSGVhZCkge1xuICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5yZW1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgICBhdDogWy4uLnRhYmxlUGF0aCwgMF1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgVHJhbnNmb3Jtcy5yZW1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgYXQ6IFsuLi50YWJsZVBhdGgsIDEsIGkgLSAxXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgVHJhbnNmb3Jtcy5yZW1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgIGF0OiBbLi4udGFibGVQYXRoLCAwLCBpXVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGhhc1dob2xlQ29sdW1uU2VsZWN0ZWQpIHtcbiAgICAgIEVkaXRvci53aXRob3V0Tm9ybWFsaXppbmcoZWRpdG9yLCAoKSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSBjb2x1bW4uZW5kOyBpID49IGNvbHVtbi5zdGFydDsgaS0tKSB7XG4gICAgICAgICAgZm9yIChsZXQgcm93SWR4ID0gMDsgcm93SWR4IDw9IG1heFJvd0lkeDsgcm93SWR4KyspIHtcbiAgICAgICAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgIGF0OiBbLi4udGFibGVQYXRoLCAuLi5nZXRSZWxhdGl2ZVJvd1BhdGgoaGFzSGVhZCwgcm93SWR4KSwgaV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZWxlY3Rpb25QYXRoID0gWy4uLnRhYmxlUGF0aCwgMCwgMCwgY29sdW1uLnN0YXJ0XTtcbiAgICAgICAgY29uc3QgcG9pbnQgPSBFZGl0b3Iuc3RhcnQoZWRpdG9yLCBjb2x1bW4uc3RhcnQgPT09IDAgPyBzZWxlY3Rpb25QYXRoIDogUGF0aC5wcmV2aW91cyhzZWxlY3Rpb25QYXRoKSk7XG4gICAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgcG9pbnQpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHNlbGVjdGlvblN0YXJ0ID0gRWRpdG9yLnN0YXJ0KGVkaXRvciwgZWRpdG9yLnNlbGVjdGlvbikucGF0aDtcbiAgICBFZGl0b3Iud2l0aG91dE5vcm1hbGl6aW5nKGVkaXRvciwgKCkgPT4ge1xuICAgICAgZm9yIChsZXQgcm93SW5kZXggPSByb3cuc3RhcnQ7IHJvd0luZGV4IDw9IHJvdy5lbmQ7IHJvd0luZGV4KyspIHtcbiAgICAgICAgZm9yIChsZXQgY2VsbEluZGV4ID0gY29sdW1uLnN0YXJ0OyBjZWxsSW5kZXggPD0gY29sdW1uLmVuZDsgY2VsbEluZGV4KyspIHtcbiAgICAgICAgICBjb25zdCByZWxhdGl2ZUNlbGxQYXRoID0gWy4uLmdldFJlbGF0aXZlUm93UGF0aChoYXNIZWFkLCByb3dJbmRleCksIGNlbGxJbmRleF07XG4gICAgICAgICAgY29uc3QgY2VsbCA9IE5vZGUuZ2V0KHNlbGVjdGVkVGFibGVBcmVhLnRhYmxlLCByZWxhdGl2ZUNlbGxQYXRoKTtcbiAgICAgICAgICBpZiAoIUVsZW1lbnQkMS5pc0VsZW1lbnQoY2VsbCkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBjZWxsUGF0aCA9IFsuLi50YWJsZVBhdGgsIC4uLnJlbGF0aXZlQ2VsbFBhdGhdO1xuICAgICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICB0eXBlOiAncGFyYWdyYXBoJyxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgICAgICB0ZXh0OiAnJ1xuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9LCB7XG4gICAgICAgICAgICBhdDogWy4uLmNlbGxQYXRoLCAwXVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGZvciAoY29uc3QgY2hpbGRJZHggb2YgWy4uLmNlbGwuY2hpbGRyZW4ua2V5cygpXS5yZXZlcnNlKCkpIHtcbiAgICAgICAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgIGF0OiBbLi4uY2VsbFBhdGgsIGNoaWxkSWR4ICsgMV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCBzZWxlY3Rpb25TdGFydCk7XG4gICAgfSk7XG4gIH07XG4gIGVkaXRvci5ub3JtYWxpemVOb2RlID0gZW50cnkgPT4ge1xuICAgIGNvbnN0IFtub2RlLCBwYXRoXSA9IGVudHJ5O1xuICAgIGlmIChub2RlLnR5cGUgPT09ICd0YWJsZS1oZWFkJyAmJiBub2RlLmNoaWxkcmVuLmxlbmd0aCA+IDEpIHtcbiAgICAgIG1vdmVDaGlsZHJlbihlZGl0b3IsIHBhdGgsIFBhdGgubmV4dChwYXRoKSwgKF8sIGkpID0+IGkgIT09IDApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgZGlkVXBkYXRlVGhpbmdzID0gZmFsc2U7XG4gICAgZm9yIChjb25zdCBwYXJlbnQgb2YgWyd0YWJsZS1ib2R5JywgJ3RhYmxlLWhlYWQnXSkge1xuICAgICAgaWYgKG5vZGUudHlwZSA9PT0gcGFyZW50KSB7XG4gICAgICAgIGZvciAoY29uc3QgW3Jvd0lkeCwgcm93XSBvZiBub2RlLmNoaWxkcmVuLmVudHJpZXMoKSkge1xuICAgICAgICAgIGlmIChyb3cudHlwZSA9PT0gJ3RhYmxlLXJvdycpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2NlbGxJZHgsIGNlbGxdIG9mIHJvdy5jaGlsZHJlbi5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgICAgaWYgKGNlbGwudHlwZSA9PT0gJ3RhYmxlLWNlbGwnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXQgPSBbLi4ucGF0aCwgcm93SWR4LCBjZWxsSWR4XTtcbiAgICAgICAgICAgICAgICBpZiAoY2VsbC5oZWFkZXIgJiYgcGFyZW50ID09PSAndGFibGUtYm9keScpIHtcbiAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMudW5zZXROb2RlcyhlZGl0b3IsICdoZWFkZXInLCB7XG4gICAgICAgICAgICAgICAgICAgIGF0XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIGRpZFVwZGF0ZVRoaW5ncyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghY2VsbC5oZWFkZXIgJiYgcGFyZW50ID09PSAndGFibGUtaGVhZCcpIHtcbiAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcjogdHJ1ZVxuICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBhdFxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICBkaWRVcGRhdGVUaGluZ3MgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZGlkVXBkYXRlVGhpbmdzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChub2RlLnR5cGUgPT09ICd0YWJsZScpIHtcbiAgICAgIGNvbnN0IG1heFJvd0NvdW50ID0gbm9kZS5jaGlsZHJlbi5yZWR1Y2UoKG1heCwgbm9kZSkgPT4gbm9kZS50eXBlID09PSAndGFibGUtaGVhZCcgfHwgbm9kZS50eXBlID09PSAndGFibGUtYm9keScgPyBub2RlLmNoaWxkcmVuLnJlZHVjZSgobWF4LCBub2RlKSA9PiBub2RlLnR5cGUgPT09ICd0YWJsZS1yb3cnID8gTWF0aC5tYXgobWF4LCBub2RlLmNoaWxkcmVuLmxlbmd0aCkgOiBtYXgsIG1heCkgOiBtYXgsIDApO1xuICAgICAgbGV0IGRpZEluc2VydCA9IGZhbHNlO1xuICAgICAgZm9yIChjb25zdCBbaWR4LCBjaGlsZF0gb2Ygbm9kZS5jaGlsZHJlbi5lbnRyaWVzKCkpIHtcbiAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09ICd0YWJsZS1ib2R5JyB8fCBjaGlsZC50eXBlID09PSAndGFibGUtaGVhZCcpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IFtyb3dJZHgsIHJvd10gb2YgY2hpbGQuY2hpbGRyZW4uZW50cmllcygpKSB7XG4gICAgICAgICAgICBpZiAocm93LnR5cGUgPT09ICd0YWJsZS1yb3cnICYmIHJvdy5jaGlsZHJlbi5sZW5ndGggIT09IG1heFJvd0NvdW50KSB7XG4gICAgICAgICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCBBcnJheS5mcm9tKHtcbiAgICAgICAgICAgICAgICBsZW5ndGg6IG1heFJvd0NvdW50IC0gcm93LmNoaWxkcmVuLmxlbmd0aFxuICAgICAgICAgICAgICB9LCAoKSA9PiBjZWxsKGNoaWxkLnR5cGUgPT09ICd0YWJsZS1oZWFkJykpLCB7XG4gICAgICAgICAgICAgICAgYXQ6IFsuLi5wYXRoLCBpZHgsIHJvd0lkeCwgcm93LmNoaWxkcmVuLmxlbmd0aF1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGRpZEluc2VydCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZGlkSW5zZXJ0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJiBub2RlLmNoaWxkcmVuWzBdLnR5cGUgPT09ICd0YWJsZS1oZWFkJykge1xuICAgICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgIHR5cGU6ICd0YWJsZS1ib2R5JyxcbiAgICAgICAgICBjaGlsZHJlbjogQXJyYXkuZnJvbSh7XG4gICAgICAgICAgICBsZW5ndGg6IG5vZGUuY2hpbGRyZW5bMF0uY2hpbGRyZW4ubGVuZ3RoXG4gICAgICAgICAgfSwgKCkgPT4gY2VsbChmYWxzZSkpXG4gICAgICAgIH0sIHtcbiAgICAgICAgICBhdDogWy4uLnBhdGgsIDFdXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDIgJiYgbm9kZS5jaGlsZHJlblsxXS50eXBlID09PSAndGFibGUtaGVhZCcpIHtcbiAgICAgICAgVHJhbnNmb3Jtcy5tb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgYXQ6IFsuLi5wYXRoLCAxXSxcbiAgICAgICAgICB0bzogWy4uLnBhdGgsIDBdXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggPiAyKSB7XG4gICAgICAgIG1vdmVDaGlsZHJlbihlZGl0b3IsIHBhdGgsIFBhdGgubmV4dChwYXRoKSwgKF8sIGkpID0+IGkgIT09IDAgJiYgaSAhPT0gMSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgbm9ybWFsaXplTm9kZShlbnRyeSk7XG4gIH07XG4gIHJldHVybiBlZGl0b3I7XG59XG5cbmNvbnN0IGluc2VydFRhYmxlID0gZWRpdG9yID0+IHtcbiAgVHJhbnNmb3Jtcy5pbnNlcnROb2RlcyhlZGl0b3IsIHtcbiAgICB0eXBlOiAndGFibGUnLFxuICAgIGNoaWxkcmVuOiBbe1xuICAgICAgdHlwZTogJ3RhYmxlLWhlYWQnLFxuICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgIHR5cGU6ICd0YWJsZS1yb3cnLFxuICAgICAgICBjaGlsZHJlbjogW2NlbGwodHJ1ZSksIGNlbGwodHJ1ZSksIGNlbGwodHJ1ZSldXG4gICAgICB9XVxuICAgIH0sIHtcbiAgICAgIHR5cGU6ICd0YWJsZS1ib2R5JyxcbiAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICB0eXBlOiAndGFibGUtcm93JyxcbiAgICAgICAgY2hpbGRyZW46IFtjZWxsKGZhbHNlKSwgY2VsbChmYWxzZSksIGNlbGwoZmFsc2UpXVxuICAgICAgfSwge1xuICAgICAgICB0eXBlOiAndGFibGUtcm93JyxcbiAgICAgICAgY2hpbGRyZW46IFtjZWxsKGZhbHNlKSwgY2VsbChmYWxzZSksIGNlbGwoZmFsc2UpXVxuICAgICAgfV1cbiAgICB9XVxuICB9KTtcbn07XG5jb25zdCBTZWxlY3RlZENlbGxzQ29udGV4dCA9IC8qI19fUFVSRV9fKi9jcmVhdGVDb250ZXh0KHVuZGVmaW5lZCk7XG5mdW5jdGlvbiBnZXRTZWxlY3RlZENlbGxzKHRhYmxlLCByb3csIGNvbHVtbikge1xuICB2YXIgX3RhYmxlJGNoaWxkcmVuJDtcbiAgY29uc3Qgc2VsZWN0ZWRDZWxscyA9IG5ldyBTZXQoKTtcbiAgY29uc3QgZmlyc3QgPSB0YWJsZS5jaGlsZHJlblswXS50eXBlID09PSAndGFibGUtaGVhZCcgfHwgdGFibGUuY2hpbGRyZW5bMF0udHlwZSA9PT0gJ3RhYmxlLWJvZHknID8gdGFibGUuY2hpbGRyZW5bMF0gOiB1bmRlZmluZWQ7XG4gIGlmICghZmlyc3QpIHJldHVybiBzZWxlY3RlZENlbGxzO1xuICBjb25zdCBzZWNvbmQgPSAoKF90YWJsZSRjaGlsZHJlbiQgPSB0YWJsZS5jaGlsZHJlblsxXSkgPT09IG51bGwgfHwgX3RhYmxlJGNoaWxkcmVuJCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RhYmxlJGNoaWxkcmVuJC50eXBlKSA9PT0gJ3RhYmxlLWJvZHknID8gdGFibGUuY2hpbGRyZW5bMV0gOiB1bmRlZmluZWQ7XG4gIGZvciAobGV0IHJvd0luZGV4ID0gcm93LnN0YXJ0OyByb3dJbmRleCA8PSByb3cuZW5kOyByb3dJbmRleCsrKSB7XG4gICAgY29uc3Qgcm93ID0gc2Vjb25kID8gcm93SW5kZXggPT09IDAgPyBmaXJzdC5jaGlsZHJlblswXSA6IHNlY29uZC5jaGlsZHJlbltyb3dJbmRleCAtIDFdIDogZmlyc3QuY2hpbGRyZW5bcm93SW5kZXhdO1xuICAgIGlmICghRWxlbWVudCQxLmlzRWxlbWVudChyb3cpKSBjb250aW51ZTtcbiAgICBmb3IgKGxldCBjZWxsSW5kZXggPSBjb2x1bW4uc3RhcnQ7IGNlbGxJbmRleCA8PSBjb2x1bW4uZW5kOyBjZWxsSW5kZXgrKykge1xuICAgICAgc2VsZWN0ZWRDZWxscy5hZGQocm93LmNoaWxkcmVuW2NlbGxJbmRleF0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc2VsZWN0ZWRDZWxscztcbn1cbmZ1bmN0aW9uIFRhYmxlU2VsZWN0aW9uUHJvdmlkZXIocHJvcHMpIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlU2xhdGUoKTtcbiAgY29uc3Qgc2VsZWN0ZWRUYWJsZUFyZWEgPSBnZXRTZWxlY3RlZFRhYmxlQXJlYShlZGl0b3IpO1xuICBpZiAoc2VsZWN0ZWRUYWJsZUFyZWEpIHtcbiAgICB2YXIgX0VkaXRvciRhYm92ZSwgX2VkaXRvciRzZWxlY3Rpb247XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goU2VsZWN0ZWRDZWxsc0NvbnRleHQuUHJvdmlkZXIsIHtcbiAgICAgIHZhbHVlOiB7XG4gICAgICAgIGNlbGxzOiBzZWxlY3RlZFRhYmxlQXJlYS5zaW5nbGVDZWxsID09PSAnbm90LXNlbGVjdGVkJyA/IG5ldyBTZXQoKSA6IGdldFNlbGVjdGVkQ2VsbHMoc2VsZWN0ZWRUYWJsZUFyZWEudGFibGUsIHNlbGVjdGVkVGFibGVBcmVhLnJvdywgc2VsZWN0ZWRUYWJsZUFyZWEuY29sdW1uKSxcbiAgICAgICAgdGFibGU6IHNlbGVjdGVkVGFibGVBcmVhLnRhYmxlLFxuICAgICAgICBmb2N1czogKF9FZGl0b3IkYWJvdmUgPSBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgICAgICAgbWF0Y2g6IG5vZGVUeXBlTWF0Y2hlcigndGFibGUtY2VsbCcpLFxuICAgICAgICAgIGF0OiAoX2VkaXRvciRzZWxlY3Rpb24gPSBlZGl0b3Iuc2VsZWN0aW9uKSA9PT0gbnVsbCB8fCBfZWRpdG9yJHNlbGVjdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2VkaXRvciRzZWxlY3Rpb24uZm9jdXMucGF0aFxuICAgICAgICB9KSkgPT09IG51bGwgfHwgX0VkaXRvciRhYm92ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX0VkaXRvciRhYm92ZVswXVxuICAgICAgfSxcbiAgICAgIGNoaWxkcmVuOiBwcm9wcy5jaGlsZHJlblxuICAgIH0pO1xuICB9XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFNlbGVjdGVkQ2VsbHNDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IHVuZGVmaW5lZCxcbiAgICBjaGlsZHJlbjogcHJvcHMuY2hpbGRyZW5cbiAgfSk7XG59XG5jb25zdCBTdGFydEVsZW1lbnRzQ29udGV4dCA9IC8qI19fUFVSRV9fKi9jcmVhdGVDb250ZXh0KHtcbiAgdG9wOiBuZXcgTWFwKCksXG4gIGxlZnQ6IG5ldyBNYXAoKVxufSk7XG5jb25zdCBUYWJsZUVsZW1lbnQgPSAoe1xuICBhdHRyaWJ1dGVzLFxuICBjaGlsZHJlbixcbiAgZWxlbWVudFxufSkgPT4ge1xuICB2YXIgX2VsZW1lbnQkY2hpbGRyZW4kO1xuICBjb25zdCBlZGl0b3IgPSB1c2VTbGF0ZVN0YXRpYygpO1xuICBjb25zdCBzZWxlY3RlZENlbGxzQ29udGV4dCA9IHVzZUNvbnRleHQoU2VsZWN0ZWRDZWxsc0NvbnRleHQpO1xuICBjb25zdCBzZWxlY3RlZENlbGxzID0gKHNlbGVjdGVkQ2VsbHNDb250ZXh0ID09PSBudWxsIHx8IHNlbGVjdGVkQ2VsbHNDb250ZXh0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWxlY3RlZENlbGxzQ29udGV4dC50YWJsZSkgPT09IGVsZW1lbnQgPyBzZWxlY3RlZENlbGxzQ29udGV4dCA6IHVuZGVmaW5lZDtcbiAgY29uc3Qgc3RhcnRFbGVtZW50cyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IGZpcnN0VGFibGVDaGlsZCA9IGVsZW1lbnQuY2hpbGRyZW5bMF07XG4gICAgaWYgKCFFbGVtZW50JDEuaXNFbGVtZW50KGZpcnN0VGFibGVDaGlsZCkgfHwgIUVsZW1lbnQkMS5pc0VsZW1lbnQoZmlyc3RUYWJsZUNoaWxkLmNoaWxkcmVuWzBdKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdG9wOiBuZXcgTWFwKCksXG4gICAgICAgIGxlZnQ6IG5ldyBNYXAoKVxuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgdG9wID0gbmV3IE1hcCgpO1xuICAgIGNvbnN0IGxlZnQgPSBuZXcgTWFwKCk7XG4gICAgZm9yIChjb25zdCBbaWR4LCBjZWxsXSBvZiBmaXJzdFRhYmxlQ2hpbGQuY2hpbGRyZW5bMF0uY2hpbGRyZW4uZW50cmllcygpKSB7XG4gICAgICBpZiAoY2VsbC50eXBlICE9PSAndGFibGUtY2VsbCcpIGNvbnRpbnVlO1xuICAgICAgdG9wLnNldChjZWxsLCBlbGVtZW50LmNoaWxkcmVuLmV2ZXJ5KGhlYWRPckJvZHkgPT4gRWxlbWVudCQxLmlzRWxlbWVudChoZWFkT3JCb2R5KSA/IGhlYWRPckJvZHkuY2hpbGRyZW4uZXZlcnkocm93ID0+IEVsZW1lbnQkMS5pc0VsZW1lbnQocm93KSAmJiAoc2VsZWN0ZWRDZWxscyA9PT0gbnVsbCB8fCBzZWxlY3RlZENlbGxzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWxlY3RlZENlbGxzLmNlbGxzLmhhcyhyb3cuY2hpbGRyZW5baWR4XSkpKSA6IGZhbHNlKSk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgaGVhZE9yQm9keSBvZiBlbGVtZW50LmNoaWxkcmVuKSB7XG4gICAgICBpZiAoaGVhZE9yQm9keS50eXBlICE9PSAndGFibGUtaGVhZCcgJiYgaGVhZE9yQm9keS50eXBlICE9PSAndGFibGUtYm9keScpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IHJvdyBvZiBoZWFkT3JCb2R5LmNoaWxkcmVuKSB7XG4gICAgICAgIGlmIChyb3cudHlwZSAhPT0gJ3RhYmxlLXJvdycgfHwgcm93LmNoaWxkcmVuWzBdLnR5cGUgIT09ICd0YWJsZS1jZWxsJykge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGxlZnQuc2V0KHJvdy5jaGlsZHJlblswXSwgcm93LmNoaWxkcmVuLmV2ZXJ5KGVsZW1lbnQgPT4gc2VsZWN0ZWRDZWxscyA9PT0gbnVsbCB8fCBzZWxlY3RlZENlbGxzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWxlY3RlZENlbGxzLmNlbGxzLmhhcyhlbGVtZW50KSkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgdG9wLFxuICAgICAgbGVmdFxuICAgIH07XG4gIH0sIFtlbGVtZW50LCBzZWxlY3RlZENlbGxzXSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFN0YXJ0RWxlbWVudHNDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IHN0YXJ0RWxlbWVudHMsXG4gICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goU2VsZWN0ZWRDZWxsc0NvbnRleHQuUHJvdmlkZXIsIHtcbiAgICAgIHZhbHVlOiBzZWxlY3RlZENlbGxzLFxuICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goQmxvY2tXcmFwcGVyLCB7XG4gICAgICAgIGF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMsXG4gICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4cyhCbG9ja1BvcG92ZXJUcmlnZ2VyLCB7XG4gICAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goXCJ0YWJsZVwiLCB7XG4gICAgICAgICAgICBjbGFzc05hbWU6IGNzcyh7XG4gICAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgICAgICAgIHRhYmxlTGF5b3V0OiAnZml4ZWQnLFxuICAgICAgICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgICAgICAgICAgYm9yZGVyU3BhY2luZzogMCxcbiAgICAgICAgICAgICAgJyYgKjo6c2VsZWN0aW9uJzogc2VsZWN0ZWRDZWxscyAhPT0gbnVsbCAmJiBzZWxlY3RlZENlbGxzICE9PSB2b2lkIDAgJiYgc2VsZWN0ZWRDZWxscy5jZWxscy5zaXplID8ge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3RyYW5zcGFyZW50J1xuICAgICAgICAgICAgICB9IDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBjaGlsZHJlblxuICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KEJsb2NrUG9wb3Zlciwge1xuICAgICAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3hzKEZsZXgsIHtcbiAgICAgICAgICAgICAgZ2FwOiBcInJlZ3VsYXJcIixcbiAgICAgICAgICAgICAgcGFkZGluZzogXCJyZWd1bGFyXCIsXG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeHMoVG9vbHRpcFRyaWdnZXIsIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goQWN0aW9uQnV0dG9uLCB7XG4gICAgICAgICAgICAgICAgICBwcm9taW5lbmNlOiBcImxvd1wiLFxuICAgICAgICAgICAgICAgICAgaXNTZWxlY3RlZDogKChfZWxlbWVudCRjaGlsZHJlbiQgPSBlbGVtZW50LmNoaWxkcmVuWzBdKSA9PT0gbnVsbCB8fCBfZWxlbWVudCRjaGlsZHJlbiQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lbGVtZW50JGNoaWxkcmVuJC50eXBlKSA9PT0gJ3RhYmxlLWhlYWQnLFxuICAgICAgICAgICAgICAgICAgb25QcmVzczogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWJsZVBhdGggPSBSZWFjdEVkaXRvci5maW5kUGF0aChlZGl0b3IsIGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICBFZGl0b3Iud2l0aG91dE5vcm1hbGl6aW5nKGVkaXRvciwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LmNoaWxkcmVuWzBdLnR5cGUgPT09ICd0YWJsZS1oZWFkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5tb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGF0OiBbLi4udGFibGVQYXRoLCAwLCAwXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdG86IFsuLi50YWJsZVBhdGgsIDEsIDBdXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGF0OiBbLi4udGFibGVQYXRoLCAwXVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGFibGUtaGVhZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW11cbiAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdDogWy4uLnRhYmxlUGF0aCwgMF1cbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBUcmFuc2Zvcm1zLm1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0OiBbLi4udGFibGVQYXRoLCAxLCAwXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvOiBbLi4udGFibGVQYXRoLCAwLCAwXVxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChJY29uLCB7XG4gICAgICAgICAgICAgICAgICAgIHNyYzogc2hlZXRJY29uXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KFRvb2x0aXAsIHtcbiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBcIkhlYWRlciByb3dcIlxuICAgICAgICAgICAgICAgIH0pXVxuICAgICAgICAgICAgICB9KSwgLyojX19QVVJFX18qL2pzeChUb29sYmFyU2VwYXJhdG9yLCB7fSksIC8qI19fUFVSRV9fKi9qc3hzKFRvb2x0aXBUcmlnZ2VyLCB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEFjdGlvbkJ1dHRvbiwge1xuICAgICAgICAgICAgICAgICAgcHJvbWluZW5jZTogXCJsb3dcIixcbiAgICAgICAgICAgICAgICAgIG9uUHJlc3M6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5yZW1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgICAgICAgICBhdDogUmVhY3RFZGl0b3IuZmluZFBhdGgoZWRpdG9yLCBlbGVtZW50KVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChJY29uLCB7XG4gICAgICAgICAgICAgICAgICAgIHNyYzogdHJhc2gySWNvblxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KSwgLyojX19QVVJFX18qL2pzeChUb29sdGlwLCB7XG4gICAgICAgICAgICAgICAgICB0b25lOiBcImNyaXRpY2FsXCIsXG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbjogXCJSZW1vdmVcIlxuICAgICAgICAgICAgICAgIH0pXVxuICAgICAgICAgICAgICB9KV1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSldXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXG4gIH0pO1xufTtcbmNvbnN0IFRhYmxlQm9keUVsZW1lbnQgPSAoe1xuICBhdHRyaWJ1dGVzLFxuICBjaGlsZHJlblxufSkgPT4ge1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChcInRib2R5XCIsIHtcbiAgICAuLi5hdHRyaWJ1dGVzLFxuICAgIGNoaWxkcmVuOiBjaGlsZHJlblxuICB9KTtcbn07XG5jb25zdCBUYWJsZUhlYWRFbGVtZW50ID0gKHtcbiAgYXR0cmlidXRlcyxcbiAgY2hpbGRyZW5cbn0pID0+IHtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goXCJ0aGVhZFwiLCB7XG4gICAgLi4uYXR0cmlidXRlcyxcbiAgICBjaGlsZHJlbjogY2hpbGRyZW5cbiAgfSk7XG59O1xuY29uc3QgVGFibGVSb3dFbGVtZW50ID0gKHtcbiAgYXR0cmlidXRlcyxcbiAgY2hpbGRyZW4sXG4gIGVsZW1lbnRcbn0pID0+IHtcbiAgdmFyIF91c2VDb250ZXh0LCBfdGFibGUkY2hpbGRyZW4kaW5kZXg7XG4gIGNvbnN0IHRhYmxlID0gKF91c2VDb250ZXh0ID0gdXNlQ29udGV4dChTZWxlY3RlZENlbGxzQ29udGV4dCkpID09PSBudWxsIHx8IF91c2VDb250ZXh0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdXNlQ29udGV4dC50YWJsZTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goUm93SW5kZXhDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IChfdGFibGUkY2hpbGRyZW4kaW5kZXggPSB0YWJsZSA9PT0gbnVsbCB8fCB0YWJsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGFibGUuY2hpbGRyZW4uaW5kZXhPZihlbGVtZW50KSkgIT09IG51bGwgJiYgX3RhYmxlJGNoaWxkcmVuJGluZGV4ICE9PSB2b2lkIDAgPyBfdGFibGUkY2hpbGRyZW4kaW5kZXggOiAtMSxcbiAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChcInRyXCIsIHtcbiAgICAgIC4uLmF0dHJpYnV0ZXMsXG4gICAgICBjaGlsZHJlbjogY2hpbGRyZW5cbiAgICB9KVxuICB9KTtcbn07XG5jb25zdCBSb3dJbmRleENvbnRleHQgPSAvKiNfX1BVUkVfXyovY3JlYXRlQ29udGV4dCgtMSk7XG5mdW5jdGlvbiBUYWJsZUNlbGxFbGVtZW50KHtcbiAgYXR0cmlidXRlcyxcbiAgY2hpbGRyZW4sXG4gIGVsZW1lbnRcbn0pIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlU2xhdGVTdGF0aWMoKTtcbiAgY29uc3Qgc2VsZWN0ZWRDZWxsc0NvbnRleHQgPSB1c2VDb250ZXh0KFNlbGVjdGVkQ2VsbHNDb250ZXh0KTtcbiAgY29uc3Qgc3RhcnRFbGVtZW50cyA9IHVzZUNvbnRleHQoU3RhcnRFbGVtZW50c0NvbnRleHQpO1xuICBjb25zdCBpc1NlbGVjdGVkID0gc2VsZWN0ZWRDZWxsc0NvbnRleHQgPT09IG51bGwgfHwgc2VsZWN0ZWRDZWxsc0NvbnRleHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNlbGVjdGVkQ2VsbHNDb250ZXh0LmNlbGxzLmhhcyhlbGVtZW50KTtcbiAgY29uc3Qgc2l6ZSA9IGBjYWxjKDEwMCUgKyAycHgpYDtcbiAgY29uc3QgRWxlbWVudFR5cGUgPSBlbGVtZW50LmhlYWRlciA/ICd0aCcgOiAndGQnO1xuICBjb25zdCBib3JkZXJDb2xvciA9IGlzU2VsZWN0ZWQgPyB0b2tlblNjaGVtYS5jb2xvci5hbGlhcy5ib3JkZXJTZWxlY3RlZCA6IHRva2VuU2NoZW1hLmNvbG9yLmFsaWFzLmJvcmRlcklkbGU7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhFbGVtZW50VHlwZSwge1xuICAgIGNsYXNzTmFtZTogY3NzKHtcbiAgICAgIGJvcmRlcklubGluZUVuZDogYDFweCBzb2xpZCAke2JvcmRlckNvbG9yfWAsXG4gICAgICBib3JkZXJCb3R0b206IGAxcHggc29saWQgJHtib3JkZXJDb2xvcn1gLFxuICAgICAgYm9yZGVyVG9wOiBzdGFydEVsZW1lbnRzLnRvcC5oYXMoZWxlbWVudCkgPyBgMXB4IHNvbGlkICR7Ym9yZGVyQ29sb3J9YCA6IHVuZGVmaW5lZCxcbiAgICAgIGJvcmRlcklubGluZVN0YXJ0OiBzdGFydEVsZW1lbnRzLmxlZnQuaGFzKGVsZW1lbnQpID8gYDFweCBzb2xpZCAke2JvcmRlckNvbG9yfWAgOiB1bmRlZmluZWQsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IHNlbGVjdGVkQ2VsbHNDb250ZXh0ICE9PSBudWxsICYmIHNlbGVjdGVkQ2VsbHNDb250ZXh0ICE9PSB2b2lkIDAgJiYgc2VsZWN0ZWRDZWxsc0NvbnRleHQuY2VsbHMuaGFzKGVsZW1lbnQpID8gdG9rZW5TY2hlbWEuY29sb3IuYWxpYXMuYmFja2dyb3VuZFNlbGVjdGVkIDogZWxlbWVudC5oZWFkZXIgPyB0b2tlblNjaGVtYS5jb2xvci5zY2FsZS5zbGF0ZTMgOiB1bmRlZmluZWQsXG4gICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgIG1hcmdpbjogMCxcbiAgICAgIHBhZGRpbmc6IHRva2VuU2NoZW1hLnNpemUuc3BhY2UucmVndWxhcixcbiAgICAgIGZvbnRXZWlnaHQ6ICdpbmhlcml0JyxcbiAgICAgIGJveFNpemluZzogJ2JvcmRlci1ib3gnLFxuICAgICAgdGV4dEFsaWduOiAnc3RhcnQnLFxuICAgICAgdmVydGljYWxBbGlnbjogJ3RvcCdcbiAgICB9KSxcbiAgICAuLi5hdHRyaWJ1dGVzLFxuICAgIGNoaWxkcmVuOiBbaXNTZWxlY3RlZCAmJiAvKiNfX1BVUkVfXyovanN4cyhGcmFnbWVudCwge1xuICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KFwiZGl2XCIsIHtcbiAgICAgICAgY29udGVudEVkaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgY2xhc3NOYW1lOiBjc3Moe1xuICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgIHRvcDogLTEsXG4gICAgICAgICAgaW5zZXRJbmxpbmVTdGFydDogLTEsXG4gICAgICAgICAgYmFja2dyb3VuZDogdG9rZW5TY2hlbWEuY29sb3IuYWxpYXMuYm9yZGVyU2VsZWN0ZWQsXG4gICAgICAgICAgaGVpZ2h0OiBzaXplLFxuICAgICAgICAgIHdpZHRoOiAxXG4gICAgICAgIH0pXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeChcImRpdlwiLCB7XG4gICAgICAgIGNvbnRlbnRFZGl0YWJsZTogZmFsc2UsXG4gICAgICAgIGNsYXNzTmFtZTogY3NzKHtcbiAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICB0b3A6IC0xLFxuICAgICAgICAgIGluc2V0SW5saW5lU3RhcnQ6IC0xLFxuICAgICAgICAgIGJhY2tncm91bmQ6IHRva2VuU2NoZW1hLmNvbG9yLmFsaWFzLmJvcmRlclNlbGVjdGVkLFxuICAgICAgICAgIGhlaWdodDogMSxcbiAgICAgICAgICB3aWR0aDogc2l6ZVxuICAgICAgICB9KVxuICAgICAgfSldXG4gICAgfSksIHN0YXJ0RWxlbWVudHMudG9wLmhhcyhlbGVtZW50KSAmJiAvKiNfX1BVUkVfXyovanN4KENlbGxTZWxlY3Rpb24sIHtcbiAgICAgIGxvY2F0aW9uOiBcInRvcFwiLFxuICAgICAgc2VsZWN0ZWQ6ICEhc3RhcnRFbGVtZW50cy50b3AuZ2V0KGVsZW1lbnQpLFxuICAgICAgbGFiZWw6IFwiU2VsZWN0IENvbHVtblwiLFxuICAgICAgb25DbGljazogKCkgPT4ge1xuICAgICAgICBjb25zdCBwYXRoID0gUmVhY3RFZGl0b3IuZmluZFBhdGgoZWRpdG9yLCBlbGVtZW50KTtcbiAgICAgICAgY29uc3QgdGFibGUgPSBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgICAgICAgbWF0Y2g6IG5vZGVUeXBlTWF0Y2hlcigndGFibGUnKSxcbiAgICAgICAgICBhdDogcGF0aFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCF0YWJsZSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBsYXN0VGFibGVJbmRleCA9IHRhYmxlWzBdLmNoaWxkcmVuLmxlbmd0aCAtIDE7XG4gICAgICAgIGNvbnN0IHRhYmxlQm9keSA9IHRhYmxlWzBdLmNoaWxkcmVuW2xhc3RUYWJsZUluZGV4XTtcbiAgICAgICAgaWYgKHRhYmxlQm9keS50eXBlICE9PSAndGFibGUtYm9keScpIHJldHVybjtcbiAgICAgICAgY29uc3QgY2VsbEluZGV4ID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdO1xuICAgICAgICBjb25zdCBlbmRQYXRoID0gWy4uLnRhYmxlWzFdLCB0YWJsZVswXS5jaGlsZHJlbi5sZW5ndGggLSAxLCB0YWJsZUJvZHkuY2hpbGRyZW4ubGVuZ3RoIC0gMSwgY2VsbEluZGV4XTtcbiAgICAgICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCB7XG4gICAgICAgICAgYW5jaG9yOiBFZGl0b3Iuc3RhcnQoZWRpdG9yLCBwYXRoKSxcbiAgICAgICAgICBmb2N1czogRWRpdG9yLmVuZChlZGl0b3IsIGVuZFBhdGgpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pLCBzdGFydEVsZW1lbnRzLmxlZnQuaGFzKGVsZW1lbnQpICYmIC8qI19fUFVSRV9fKi9qc3goQ2VsbFNlbGVjdGlvbiwge1xuICAgICAgbG9jYXRpb246IFwibGVmdFwiLFxuICAgICAgc2VsZWN0ZWQ6ICEhc3RhcnRFbGVtZW50cy5sZWZ0LmdldChlbGVtZW50KSxcbiAgICAgIGxhYmVsOiBcIlNlbGVjdCBSb3dcIixcbiAgICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgY29uc3QgcGF0aCA9IFJlYWN0RWRpdG9yLmZpbmRQYXRoKGVkaXRvciwgZWxlbWVudCk7XG4gICAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwge1xuICAgICAgICAgIGFuY2hvcjogRWRpdG9yLnN0YXJ0KGVkaXRvciwgUGF0aC5wYXJlbnQocGF0aCkpLFxuICAgICAgICAgIGZvY3VzOiBFZGl0b3IuZW5kKGVkaXRvciwgUGF0aC5wYXJlbnQocGF0aCkpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pLCBzdGFydEVsZW1lbnRzLmxlZnQuaGFzKGVsZW1lbnQpICYmIHN0YXJ0RWxlbWVudHMudG9wLmhhcyhlbGVtZW50KSAmJiAvKiNfX1BVUkVfXyovanN4KENlbGxTZWxlY3Rpb24sIHtcbiAgICAgIGxvY2F0aW9uOiBcInRvcC1sZWZ0XCIsXG4gICAgICBzZWxlY3RlZDogISEoc3RhcnRFbGVtZW50cy50b3AuZ2V0KGVsZW1lbnQpICYmIHN0YXJ0RWxlbWVudHMubGVmdC5nZXQoZWxlbWVudCkpLFxuICAgICAgbGFiZWw6IFwiU2VsZWN0IFRhYmxlXCIsXG4gICAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHBhdGggPSBSZWFjdEVkaXRvci5maW5kUGF0aChlZGl0b3IsIGVsZW1lbnQpO1xuICAgICAgICBjb25zdCB0YWJsZSA9IEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgICAgICBtYXRjaDogbm9kZVR5cGVNYXRjaGVyKCd0YWJsZScpLFxuICAgICAgICAgIGF0OiBwYXRoXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXRhYmxlKSByZXR1cm47XG4gICAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwge1xuICAgICAgICAgIGFuY2hvcjogRWRpdG9yLnN0YXJ0KGVkaXRvciwgdGFibGVbMV0pLFxuICAgICAgICAgIGZvY3VzOiBFZGl0b3IuZW5kKGVkaXRvciwgdGFibGVbMV0pXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KFwiZGl2XCIsIHtcbiAgICAgIGNoaWxkcmVuOiBjaGlsZHJlblxuICAgIH0pLCAoc2VsZWN0ZWRDZWxsc0NvbnRleHQgPT09IG51bGwgfHwgc2VsZWN0ZWRDZWxsc0NvbnRleHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNlbGVjdGVkQ2VsbHNDb250ZXh0LmZvY3VzKSA9PT0gZWxlbWVudCAmJiAvKiNfX1BVUkVfXyovanN4KENlbGxNZW51LCB7XG4gICAgICBjZWxsOiBlbGVtZW50LFxuICAgICAgdGFibGU6IHNlbGVjdGVkQ2VsbHNDb250ZXh0LnRhYmxlXG4gICAgfSldXG4gIH0pO1xufVxuZnVuY3Rpb24gQ2VsbFNlbGVjdGlvbihwcm9wcykge1xuICBjb25zdCBzZWxlY3RlZENlbGxzQ29udGV4dCA9IHVzZUNvbnRleHQoU2VsZWN0ZWRDZWxsc0NvbnRleHQpO1xuICBjb25zdCBlZGl0b3IgPSB1c2VTbGF0ZVN0YXRpYygpO1xuICBsZXQge1xuICAgIGxvY2F0aW9uLFxuICAgIHNlbGVjdGVkXG4gIH0gPSBwcm9wcztcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3hzKFwiZGl2XCIsIHtcbiAgICBjb250ZW50RWRpdGFibGU6IGZhbHNlLFxuICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChcImJ1dHRvblwiLCB7XG4gICAgICB0YWJJbmRleDogLTEsXG4gICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgLi4udG9EYXRhQXR0cmlidXRlcyh7XG4gICAgICAgIGxvY2F0aW9uLFxuICAgICAgICBzZWxlY3RlZFxuICAgICAgfSksXG4gICAgICBjbGFzc05hbWU6IGNzcyh7XG4gICAgICAgIGJhY2tncm91bmQ6IHRva2VuU2NoZW1hLmNvbG9yLnNjYWxlLnNsYXRlMyxcbiAgICAgICAgYm9yZGVyOiBgMXB4IHNvbGlkICR7dG9rZW5TY2hlbWEuY29sb3IuYWxpYXMuYm9yZGVySWRsZX1gLFxuICAgICAgICBtYXJnaW46IDAsXG4gICAgICAgIHBhZGRpbmc6IDAsXG4gICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAnOmhvdmVyJzoge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHRva2VuU2NoZW1hLmNvbG9yLnNjYWxlLnNsYXRlNFxuICAgICAgICB9LFxuICAgICAgICAvLyBldmVyIHNvIHNsaWdodGx5IGxhcmdlciBoaXQgYXJlYVxuICAgICAgICAnOjpiZWZvcmUnOiB7XG4gICAgICAgICAgY29udGVudDogJ1wiXCInLFxuICAgICAgICAgIGluc2V0OiAtMSxcbiAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJ1xuICAgICAgICB9LFxuICAgICAgICAvLyBsb2NhdGlvblxuICAgICAgICAnJltkYXRhLWxvY2F0aW9uPXRvcF0nOiB7XG4gICAgICAgICAgdG9wOiAtOSxcbiAgICAgICAgICBpbnNldElubGluZVN0YXJ0OiAtMSxcbiAgICAgICAgICB3aWR0aDogJ2NhbGMoMTAwJSArIDJweCknLFxuICAgICAgICAgIGhlaWdodDogOFxuICAgICAgICB9LFxuICAgICAgICAnJltkYXRhLWxvY2F0aW9uPWxlZnRdJzoge1xuICAgICAgICAgIHRvcDogLTEsXG4gICAgICAgICAgaW5zZXRJbmxpbmVTdGFydDogLTksXG4gICAgICAgICAgd2lkdGg6IDgsXG4gICAgICAgICAgaGVpZ2h0OiAnY2FsYygxMDAlICsgMnB4KSdcbiAgICAgICAgfSxcbiAgICAgICAgJyZbZGF0YS1sb2NhdGlvbj10b3AtbGVmdF0nOiB7XG4gICAgICAgICAgdG9wOiAtOSxcbiAgICAgICAgICBpbnNldElubGluZVN0YXJ0OiAtOSxcbiAgICAgICAgICB3aWR0aDogOCxcbiAgICAgICAgICBoZWlnaHQ6IDhcbiAgICAgICAgfSxcbiAgICAgICAgJyY6bm90KFtkYXRhLWxvY2F0aW9uPXRvcF0pJzoge1xuICAgICAgICAgIGJvcmRlcklubGluZUVuZDogJ25vbmUnXG4gICAgICAgIH0sXG4gICAgICAgICcmOm5vdChbZGF0YS1sb2NhdGlvbj1sZWZ0XSknOiB7XG4gICAgICAgICAgYm9yZGVyQm90dG9tOiAnbm9uZSdcbiAgICAgICAgfSxcbiAgICAgICAgLy8gc3RhdGVcbiAgICAgICAgJyZbZGF0YS1zZWxlY3RlZD10cnVlXSc6IHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB0b2tlblNjaGVtYS5jb2xvci5zY2FsZS5pbmRpZ284LFxuICAgICAgICAgIGJvcmRlckNvbG9yOiB0b2tlblNjaGVtYS5jb2xvci5hbGlhcy5ib3JkZXJTZWxlY3RlZFxuICAgICAgICB9XG4gICAgICB9KSxcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIHZpc2liaWxpdHk6IHNlbGVjdGVkQ2VsbHNDb250ZXh0ICE9PSBudWxsICYmIHNlbGVjdGVkQ2VsbHNDb250ZXh0ICE9PSB2b2lkIDAgJiYgc2VsZWN0ZWRDZWxsc0NvbnRleHQuZm9jdXMgPyAndmlzaWJsZScgOiAnaGlkZGVuJ1xuICAgICAgfSxcbiAgICAgIFwiYXJpYS1sYWJlbFwiOiBwcm9wcy5sYWJlbCxcbiAgICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgUmVhY3RFZGl0b3IuZm9jdXMoZWRpdG9yKTtcbiAgICAgICAgcHJvcHMub25DbGljaygpO1xuICAgICAgfVxuICAgIH0pLCBwcm9wcy5zZWxlY3RlZCAmJiAocHJvcHMubG9jYXRpb24gPT09ICd0b3AnID8gLyojX19QVVJFX18qL2pzeChcImRpdlwiLCB7XG4gICAgICBjbGFzc05hbWU6IGNzcyh7XG4gICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICB0b3A6IC05LFxuICAgICAgICBpbnNldElubGluZUVuZDogLTEsXG4gICAgICAgIGJhY2tncm91bmQ6IHRva2VuU2NoZW1hLmNvbG9yLmFsaWFzLmJvcmRlclNlbGVjdGVkLFxuICAgICAgICBoZWlnaHQ6IDgsXG4gICAgICAgIHdpZHRoOiAxLFxuICAgICAgICB6SW5kZXg6IDJcbiAgICAgIH0pXG4gICAgfSkgOiAvKiNfX1BVUkVfXyovanN4KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzTmFtZTogY3NzKHtcbiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgIGJvdHRvbTogLTEsXG4gICAgICAgIGluc2V0SW5saW5lU3RhcnQ6IC05LFxuICAgICAgICBiYWNrZ3JvdW5kOiB0b2tlblNjaGVtYS5jb2xvci5hbGlhcy5ib3JkZXJTZWxlY3RlZCxcbiAgICAgICAgaGVpZ2h0OiAxLFxuICAgICAgICB3aWR0aDogOCxcbiAgICAgICAgekluZGV4OiAyXG4gICAgICB9KVxuICAgIH0pKV1cbiAgfSk7XG59XG5jb25zdCBjZWxsQWN0aW9ucyA9IHtcbiAgZGVsZXRlUm93OiB7XG4gICAgbGFiZWw6ICdEZWxldGUgcm93JyxcbiAgICBhY3Rpb246IChlZGl0b3IsIGNlbGxQYXRoKSA9PiB7XG4gICAgICBjb25zdCB0YWJsZVBhdGggPSBjZWxsUGF0aC5zbGljZSgwLCAtMyk7XG4gICAgICBjb25zdCB0YWJsZSA9IE5vZGUuZ2V0KGVkaXRvciwgdGFibGVQYXRoKTtcbiAgICAgIGlmICh0YWJsZS50eXBlICE9PSAndGFibGUnKSByZXR1cm47XG4gICAgICBjb25zdCBoYXNIZWFkID0gdGFibGUuY2hpbGRyZW5bMF0udHlwZSA9PT0gJ3RhYmxlLWhlYWQnO1xuICAgICAgY29uc3Qgcm93UGF0aCA9IFBhdGgucGFyZW50KGNlbGxQYXRoKTtcbiAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgIGF0OiBoYXNIZWFkICYmIHJvd1BhdGhbY2VsbFBhdGgubGVuZ3RoIC0gM10gPT09IDAgPyBQYXRoLnBhcmVudChyb3dQYXRoKSA6IHJvd1BhdGhcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcbiAgZGVsZXRlQ29sdW1uOiB7XG4gICAgbGFiZWw6ICdEZWxldGUgY29sdW1uJyxcbiAgICBhY3Rpb246IChlZGl0b3IsIHBhdGgpID0+IHtcbiAgICAgIGNvbnN0IGNlbGxJbmRleCA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXTtcbiAgICAgIGNvbnN0IHRhYmxlUGF0aCA9IHBhdGguc2xpY2UoMCwgLTMpO1xuICAgICAgY29uc3QgdGFibGUgPSBOb2RlLmdldChlZGl0b3IsIHRhYmxlUGF0aCk7XG4gICAgICBpZiAodGFibGUudHlwZSAhPT0gJ3RhYmxlJykgcmV0dXJuO1xuICAgICAgRWRpdG9yLndpdGhvdXROb3JtYWxpemluZyhlZGl0b3IsICgpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBbaGVhZE9yQm9keUlkeCwgaGVhZE9yQm9keV0gb2YgdGFibGUuY2hpbGRyZW4uZW50cmllcygpKSB7XG4gICAgICAgICAgaWYgKGhlYWRPckJvZHkudHlwZSAhPT0gJ3RhYmxlLWhlYWQnICYmIGhlYWRPckJvZHkudHlwZSAhPT0gJ3RhYmxlLWJvZHknKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChjb25zdCBpZHggb2YgaGVhZE9yQm9keS5jaGlsZHJlbi5rZXlzKCkpIHtcbiAgICAgICAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgIGF0OiBbLi4udGFibGVQYXRoLCBoZWFkT3JCb2R5SWR4LCBpZHgsIGNlbGxJbmRleF1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuICBpbnNlcnRSb3dCZWxvdzoge1xuICAgIGxhYmVsOiAnSW5zZXJ0IHJvdyBiZWxvdycsXG4gICAgYWN0aW9uOiAoZWRpdG9yLCBwYXRoKSA9PiB7XG4gICAgICBjb25zdCB0YWJsZVJvdyA9IE5vZGUuZ2V0KGVkaXRvciwgUGF0aC5wYXJlbnQocGF0aCkpO1xuICAgICAgY29uc3QgdGFibGVQYXRoID0gcGF0aC5zbGljZSgwLCAtMyk7XG4gICAgICBjb25zdCB0YWJsZSA9IE5vZGUuZ2V0KGVkaXRvciwgdGFibGVQYXRoKTtcbiAgICAgIGlmICh0YWJsZVJvdy50eXBlICE9PSAndGFibGUtcm93JyB8fCB0YWJsZS50eXBlICE9PSAndGFibGUnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGhhc0hlYWQgPSB0YWJsZS5jaGlsZHJlblswXS50eXBlID09PSAndGFibGUtaGVhZCc7XG4gICAgICBjb25zdCBuZXdSb3dQYXRoID0gWy4uLnRhYmxlUGF0aCwgaGFzSGVhZCA/IDEgOiAwLCBoYXNIZWFkICYmIHBhdGhbcGF0aC5sZW5ndGggLSAzXSA9PT0gMCA/IDAgOiBwYXRoW3BhdGgubGVuZ3RoIC0gMl0gKyAxXTtcbiAgICAgIEVkaXRvci53aXRob3V0Tm9ybWFsaXppbmcoZWRpdG9yLCAoKSA9PiB7XG4gICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgdHlwZTogJ3RhYmxlLXJvdycsXG4gICAgICAgICAgY2hpbGRyZW46IHRhYmxlUm93LmNoaWxkcmVuLm1hcCgoKSA9PiBjZWxsKGZhbHNlKSlcbiAgICAgICAgfSwge1xuICAgICAgICAgIGF0OiBuZXdSb3dQYXRoXG4gICAgICAgIH0pO1xuICAgICAgICBUcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIFsuLi5uZXdSb3dQYXRoLCBwYXRoW3BhdGgubGVuZ3RoIC0gMV1dKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcbiAgaW5zZXJ0Q29sdW1uUmlnaHQ6IHtcbiAgICBsYWJlbDogJ0luc2VydCBjb2x1bW4gcmlnaHQnLFxuICAgIGFjdGlvbjogKGVkaXRvciwgcGF0aCkgPT4ge1xuICAgICAgY29uc3QgbmV3Q2VsbEluZGV4ID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdICsgMTtcbiAgICAgIGNvbnN0IHRhYmxlUGF0aCA9IHBhdGguc2xpY2UoMCwgLTMpO1xuICAgICAgY29uc3QgdGFibGUgPSBOb2RlLmdldChlZGl0b3IsIHRhYmxlUGF0aCk7XG4gICAgICBpZiAodGFibGUudHlwZSAhPT0gJ3RhYmxlJykgcmV0dXJuO1xuICAgICAgRWRpdG9yLndpdGhvdXROb3JtYWxpemluZyhlZGl0b3IsICgpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBbaGVhZE9yQm9keUlkeCwgaGVhZE9yQm9keV0gb2YgdGFibGUuY2hpbGRyZW4uZW50cmllcygpKSB7XG4gICAgICAgICAgaWYgKGhlYWRPckJvZHkudHlwZSAhPT0gJ3RhYmxlLWhlYWQnICYmIGhlYWRPckJvZHkudHlwZSAhPT0gJ3RhYmxlLWJvZHknKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChjb25zdCByb3dJZHggb2YgaGVhZE9yQm9keS5jaGlsZHJlbi5rZXlzKCkpIHtcbiAgICAgICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCBjZWxsKGhlYWRPckJvZHkudHlwZSA9PT0gJ3RhYmxlLWhlYWQnKSwge1xuICAgICAgICAgICAgICBhdDogWy4uLnRhYmxlUGF0aCwgaGVhZE9yQm9keUlkeCwgcm93SWR4LCBuZXdDZWxsSW5kZXhdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCBFZGl0b3Iuc3RhcnQoZWRpdG9yLCBQYXRoLm5leHQocGF0aCkpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcbmNvbnN0IF9jZWxsQWN0aW9ucyA9IGNlbGxBY3Rpb25zO1xuZnVuY3Rpb24gQ2VsbE1lbnUocHJvcHMpIHtcbiAgY29uc3QgZWRpdG9yID0gdXNlU2xhdGVTdGF0aWMoKTtcbiAgY29uc3QgZ3V0dGVyID0gdG9rZW5TY2hlbWEuc2l6ZS5zcGFjZS5zbWFsbDtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goXCJkaXZcIiwge1xuICAgIGNvbnRlbnRFZGl0YWJsZTogZmFsc2UsXG4gICAgY2xhc3NOYW1lOiBjc3Moe1xuICAgICAgdG9wOiBndXR0ZXIsXG4gICAgICBpbnNldElubGluZUVuZDogZ3V0dGVyLFxuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZSdcbiAgICB9KSxcbiAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeHMoVG9vbHRpcFRyaWdnZXIsIHtcbiAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeHMoTWVudVRyaWdnZXIsIHtcbiAgICAgICAgYWxpZ246IFwiZW5kXCIsXG4gICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChBY3Rpb25CdXR0b24sIHtcbiAgICAgICAgICBwcm9taW5lbmNlOiBcImxvd1wiLFxuICAgICAgICAgIFVOU0FGRV9jbGFzc05hbWU6IGNzcyh7XG4gICAgICAgICAgICBib3JkZXJSYWRpdXM6IHRva2VuU2NoZW1hLnNpemUucmFkaXVzLnNtYWxsLFxuICAgICAgICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICAgICAgICBtaW5XaWR0aDogMCxcbiAgICAgICAgICAgIHBhZGRpbmc6IDAsXG4gICAgICAgICAgICAvLyB0aW55IGJ1dHRvbnM7IGluY3JlYXNlIHRoZSBoaXQgYXJlYVxuICAgICAgICAgICAgJyY6OmJlZm9yZSc6IHtcbiAgICAgICAgICAgICAgY29udGVudDogJ1wiXCInLFxuICAgICAgICAgICAgICBpbnNldDogYGNhbGMoJHtndXR0ZXJ9ICogLTEpYCxcbiAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSxcbiAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChJY29uLCB7XG4gICAgICAgICAgICBzcmM6IGNoZXZyb25Eb3duSWNvblxuICAgICAgICAgIH0pXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KE1lbnUsIHtcbiAgICAgICAgICBvbkFjdGlvbjoga2V5ID0+IHtcbiAgICAgICAgICAgIGlmIChrZXkgaW4gX2NlbGxBY3Rpb25zKSB7XG4gICAgICAgICAgICAgIF9jZWxsQWN0aW9uc1trZXldLmFjdGlvbihlZGl0b3IsIFJlYWN0RWRpdG9yLmZpbmRQYXRoKGVkaXRvciwgcHJvcHMuY2VsbCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgaXRlbXM6IE9iamVjdC5lbnRyaWVzKF9jZWxsQWN0aW9ucykubWFwKChba2V5LCBpdGVtXSkgPT4gKHtcbiAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICBrZXlcbiAgICAgICAgICB9KSksXG4gICAgICAgICAgY2hpbGRyZW46IGl0ZW0gPT4gLyojX19QVVJFX18qL2pzeChJdGVtJDQsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBpdGVtLmxhYmVsXG4gICAgICAgICAgfSwgaXRlbS5rZXkpXG4gICAgICAgIH0pXVxuICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goVG9vbHRpcCwge1xuICAgICAgICBjaGlsZHJlbjogXCJPcHRpb25zXCJcbiAgICAgIH0pXVxuICAgIH0pXG4gIH0pO1xufVxuY29uc3QgVGFibGVCdXR0b24gPSAoKSA9PiB7XG4gIGNvbnN0IHtcbiAgICBlZGl0b3IsXG4gICAgYmxvY2txdW90ZToge1xuICAgICAgaXNEaXNhYmxlZCxcbiAgICAgIGlzU2VsZWN0ZWRcbiAgICB9XG4gIH0gPSB1c2VUb29sYmFyU3RhdGUoKTtcbiAgcmV0dXJuIHVzZU1lbW8oKCkgPT4gLyojX19QVVJFX18qL2pzeChBY3Rpb25CdXR0b24sIHtcbiAgICBwcm9taW5lbmNlOiBcImxvd1wiLFxuICAgIGlzU2VsZWN0ZWQ6IGlzU2VsZWN0ZWQsXG4gICAgaXNEaXNhYmxlZDogaXNEaXNhYmxlZCxcbiAgICBvblByZXNzOiAoKSA9PiB7XG4gICAgICBpbnNlcnRUYWJsZShlZGl0b3IpO1xuICAgICAgUmVhY3RFZGl0b3IuZm9jdXMoZWRpdG9yKTtcbiAgICB9LFxuICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KEljb24sIHtcbiAgICAgIHNyYzogdGFibGVJY29uXG4gICAgfSlcbiAgfSksIFtlZGl0b3IsIGlzRGlzYWJsZWQsIGlzU2VsZWN0ZWRdKTtcbn07XG5jb25zdCB0YWJsZUJ1dHRvbiA9IC8qI19fUFVSRV9fKi9qc3hzKFRvb2x0aXBUcmlnZ2VyLCB7XG4gIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChUYWJsZUJ1dHRvbiwge30pLCAvKiNfX1BVUkVfXyovanN4KFRvb2x0aXAsIHtcbiAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChUZXh0LCB7XG4gICAgICBjaGlsZHJlbjogXCJUYWJsZVwiXG4gICAgfSlcbiAgfSldXG59KTtcbmZ1bmN0aW9uIGdldENlbGxQYXRoSW5EaXJlY3Rpb24oZWRpdG9yLCBwYXRoLCBkaXJlY3Rpb24pIHtcbiAgaWYgKGRpcmVjdGlvbiA9PT0gJ2xlZnQnIHx8IGRpcmVjdGlvbiA9PT0gJ3JpZ2h0Jykge1xuICAgIGNvbnN0IHJvdyA9IEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgIG1hdGNoOiBub2RlVHlwZU1hdGNoZXIoJ3RhYmxlLXJvdycpLFxuICAgICAgYXQ6IHBhdGhcbiAgICB9KTtcbiAgICBpZiAoIXJvdykgcmV0dXJuO1xuICAgIGNvbnN0IGN1cnJlbnRDZWxsSWR4ID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdO1xuICAgIGNvbnN0IGRpZmYgPSBkaXJlY3Rpb24gPT09ICdsZWZ0JyA/IC0xIDogMTtcbiAgICBjb25zdCBuZXh0Q2VsbElkeCA9IGN1cnJlbnRDZWxsSWR4ICsgZGlmZjtcbiAgICBjb25zdCBuZXh0Q2VsbCA9IHJvd1swXS5jaGlsZHJlbltuZXh0Q2VsbElkeF07XG4gICAgaWYgKCFuZXh0Q2VsbCkgcmV0dXJuO1xuICAgIHJldHVybiBbLi4ucm93WzFdLCBuZXh0Q2VsbElkeF07XG4gIH1cbiAgY29uc3QgdGFibGUgPSBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgbWF0Y2g6IG5vZGVUeXBlTWF0Y2hlcigndGFibGUnKSxcbiAgICBhdDogcGF0aFxuICB9KTtcbiAgaWYgKCF0YWJsZSkgcmV0dXJuO1xuICBjb25zdCBkaWZmID0gZGlyZWN0aW9uID09PSAndXAnID8gLTEgOiAxO1xuICBjb25zdCByb3dJbmRleCA9IHBhdGhbcGF0aC5sZW5ndGggLSAzXSArIHBhdGhbcGF0aC5sZW5ndGggLSAyXTtcbiAgY29uc3QgbmV4dFJvd0luZGV4ID0gcm93SW5kZXggKyBkaWZmO1xuICBjb25zdCByZWxhdGl2ZVJvd1BhdGggPSBnZXRSZWxhdGl2ZVJvd1BhdGgodGFibGVbMF0uY2hpbGRyZW5bMF0udHlwZSA9PT0gJ3RhYmxlLWhlYWQnLCBuZXh0Um93SW5kZXgpO1xuICBpZiAoIU5vZGUuaGFzKHRhYmxlWzBdLCByZWxhdGl2ZVJvd1BhdGgpKSByZXR1cm47XG4gIHJldHVybiBbLi4udGFibGVbMV0sIC4uLnJlbGF0aXZlUm93UGF0aCwgcGF0aFtwYXRoLmxlbmd0aCAtIDFdXTtcbn1cblxuZnVuY3Rpb24gVG9vbGJhcih7XG4gIGRvY3VtZW50RmVhdHVyZXMsXG4gIHZpZXdTdGF0ZVxufSkge1xuICBjb25zdCBjb21wb25lbnRCbG9ja3MgPSB1c2VEb2N1bWVudEVkaXRvckNvbmZpZygpLmNvbXBvbmVudEJsb2NrcztcbiAgbGV0IGhhc0NvbXBvbmVudEJsb2Nrc0Zvckluc2VydE1lbnUgPSBmYWxzZSxcbiAgICBoYXNDb21wb25lbnRCbG9ja3NGb3JUb29sYmFyID0gZmFsc2U7XG4gIGZvciAoY29uc3QgY29tcG9uZW50QmxvY2sgb2YgT2JqZWN0LnZhbHVlcyhjb21wb25lbnRCbG9ja3MpKSB7XG4gICAgaWYgKGNvbXBvbmVudEJsb2NrLnRvb2xiYXJJY29uKSB7XG4gICAgICBoYXNDb21wb25lbnRCbG9ja3NGb3JUb29sYmFyID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCFjb21wb25lbnRCbG9jay50b29sYmFySWNvbikge1xuICAgICAgaGFzQ29tcG9uZW50QmxvY2tzRm9ySW5zZXJ0TWVudSA9IHRydWU7XG4gICAgfVxuICB9XG4gIGNvbnN0IGhhc01hcmtzID0gT2JqZWN0LnZhbHVlcyhkb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuaW5saW5lTWFya3MpLnNvbWUoeCA9PiB4KTtcbiAgY29uc3QgaGFzQWxpZ25tZW50ID0gZG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmFsaWdubWVudC5jZW50ZXIgfHwgZG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmFsaWdubWVudC5lbmQ7XG4gIGNvbnN0IGhhc0xpc3RzID0gZG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmxpc3RUeXBlcy51bm9yZGVyZWQgfHwgZG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmxpc3RUeXBlcy5vcmRlcmVkO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeHMoVG9vbGJhcldyYXBwZXIsIHtcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3hzKFRvb2xiYXJTY3JvbGxBcmVhLCB7XG4gICAgICBjaGlsZHJlbjogWyEhZG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmhlYWRpbmdzLmxldmVscy5sZW5ndGggJiYgLyojX19QVVJFX18qL2pzeChIZWFkaW5nTWVudSwge1xuICAgICAgICBoZWFkaW5nTGV2ZWxzOiBkb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuaGVhZGluZ3MubGV2ZWxzXG4gICAgICB9KSwgaGFzTWFya3MgJiYgLyojX19QVVJFX18qL2pzeChJbmxpbmVNYXJrcywge1xuICAgICAgICBtYXJrczogZG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmlubGluZU1hcmtzXG4gICAgICB9KSwgKGhhc0FsaWdubWVudCB8fCBoYXNMaXN0cykgJiYgLyojX19QVVJFX18qL2pzeHMoVG9vbGJhckdyb3VwLCB7XG4gICAgICAgIGNoaWxkcmVuOiBbaGFzQWxpZ25tZW50ICYmIC8qI19fUFVSRV9fKi9qc3goVGV4dEFsaWduTWVudSwge1xuICAgICAgICAgIGFsaWdubWVudDogZG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmFsaWdubWVudFxuICAgICAgICB9KSwgaGFzTGlzdHMgJiYgLyojX19QVVJFX18qL2pzeChMaXN0QnV0dG9ucywge1xuICAgICAgICAgIGxpc3RzOiBkb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcubGlzdFR5cGVzXG4gICAgICAgIH0pXVxuICAgICAgfSksIChkb2N1bWVudEZlYXR1cmVzLmRpdmlkZXJzIHx8IGRvY3VtZW50RmVhdHVyZXMubGlua3MgfHwgISFkb2N1bWVudEZlYXR1cmVzLmltYWdlcyB8fCBkb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuYmxvY2tUeXBlcy5ibG9ja3F1b3RlIHx8IGRvY3VtZW50RmVhdHVyZXMudGFibGVzIHx8ICEhZG9jdW1lbnRGZWF0dXJlcy5sYXlvdXRzLmxlbmd0aCB8fCBkb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuYmxvY2tUeXBlcy5jb2RlIHx8IGhhc0NvbXBvbmVudEJsb2Nrc0ZvclRvb2xiYXIpICYmIC8qI19fUFVSRV9fKi9qc3hzKFRvb2xiYXJHcm91cCwge1xuICAgICAgICBjaGlsZHJlbjogW2RvY3VtZW50RmVhdHVyZXMuZGl2aWRlcnMgJiYgZGl2aWRlckJ1dHRvbiwgZG9jdW1lbnRGZWF0dXJlcy5saW5rcyAmJiBsaW5rQnV0dG9uLCBkb2N1bWVudEZlYXR1cmVzLmltYWdlcyAmJiBpbWFnZUJ1dHRvbiwgZG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmJsb2NrVHlwZXMuYmxvY2txdW90ZSAmJiBibG9ja3F1b3RlQnV0dG9uLCAhIWRvY3VtZW50RmVhdHVyZXMubGF5b3V0cy5sZW5ndGggJiYgLyojX19QVVJFX18qL2pzeChMYXlvdXRzQnV0dG9uLCB7XG4gICAgICAgICAgbGF5b3V0czogZG9jdW1lbnRGZWF0dXJlcy5sYXlvdXRzXG4gICAgICAgIH0pLCBkb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuYmxvY2tUeXBlcy5jb2RlICYmIGNvZGVCdXR0b24sIGRvY3VtZW50RmVhdHVyZXMudGFibGVzICYmIHRhYmxlQnV0dG9uLCBoYXNDb21wb25lbnRCbG9ja3NGb3JJbnNlcnRNZW51ICYmIGluc2VydEJsb2Nrc0luVG9vbGJhcl1cbiAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KEJveCwge1xuICAgICAgICBmbGV4OiB0cnVlXG4gICAgICB9KV1cbiAgICB9KSwgdXNlTWVtbygoKSA9PiB7XG4gICAgICByZXR1cm4gdmlld1N0YXRlICYmIC8qI19fUFVSRV9fKi9qc3hzKEZsZXgsIHtcbiAgICAgICAgZ2FwOiBcInhzbWFsbFwiLFxuICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goVG9vbGJhclNlcGFyYXRvciwge30pLCAvKiNfX1BVUkVfXyovanN4cyhUb29sdGlwVHJpZ2dlciwge1xuICAgICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChCdXR0b24sIHtcbiAgICAgICAgICAgIHByb21pbmVuY2U6IFwibG93XCIsXG4gICAgICAgICAgICBvblByZXNzOiAoKSA9PiB7XG4gICAgICAgICAgICAgIHZpZXdTdGF0ZS50b2dnbGUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChJY29uLCB7XG4gICAgICAgICAgICAgIHNyYzogdmlld1N0YXRlLmV4cGFuZGVkID8gbWluaW1pemVJY29uIDogbWF4aW1pemVJY29uXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KFRvb2x0aXAsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiB2aWV3U3RhdGUuZXhwYW5kZWQgPyAnQ29sbGFwc2UnIDogJ0V4cGFuZCdcbiAgICAgICAgICB9KV1cbiAgICAgICAgfSldXG4gICAgICB9KTtcbiAgICB9LCBbdmlld1N0YXRlXSksICEhaGFzQ29tcG9uZW50QmxvY2tzRm9ySW5zZXJ0TWVudSAmJiAvKiNfX1BVUkVfXyovanN4KEluc2VydEJsb2NrTWVudSwge30pXVxuICB9KTtcbn1cblxuLyoqIEdyb3VwIGJ1dHRvbnMgdG9nZXRoZXIgdGhhdCBkb24ndCBmaXQgaW50byBhbiBgQWN0aW9uR3JvdXBgIHNlbWFudGljYWxseS4gKi9cbmNvbnN0IFRvb2xiYXJHcm91cCA9ICh7XG4gIGNoaWxkcmVuXG59KSA9PiB7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KEZsZXgsIHtcbiAgICBnYXA6IFwicmVndWxhclwiLFxuICAgIGNoaWxkcmVuOiBjaGlsZHJlblxuICB9KTtcbn07XG5jb25zdCBUb29sYmFyQ29udGFpbmVyID0gKHtcbiAgY2hpbGRyZW5cbn0pID0+IHtcbiAgbGV0IGVudHJ5TGF5b3V0UGFuZSA9IHVzZUVudHJ5TGF5b3V0U3BsaXRQYW5lQ29udGV4dCgpO1xuICBpZiAoZW50cnlMYXlvdXRQYW5lID09PSAnbWFpbicpIHtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChcImRpdlwiLCB7XG4gICAgICBjbGFzc05hbWU6IGNzcyh7XG4gICAgICAgIGJveFNpemluZzogJ2JvcmRlci1ib3gnLFxuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIHBhZGRpbmdJbmxpbmU6IHRva2VuU2NoZW1hLnNpemUuc3BhY2UubWVkaXVtLFxuICAgICAgICBtaW5XaWR0aDogMCxcbiAgICAgICAgbWF4V2lkdGg6IDgwMCxcbiAgICAgICAgbWFyZ2luSW5saW5lOiAnYXV0bycsXG4gICAgICAgIFticmVha3BvaW50UXVlcmllcy5hYm92ZS5tb2JpbGVdOiB7XG4gICAgICAgICAgcGFkZGluZ0lubGluZTogdG9rZW5TY2hlbWEuc2l6ZS5zcGFjZS54bGFyZ2VcbiAgICAgICAgfSxcbiAgICAgICAgW2JyZWFrcG9pbnRRdWVyaWVzLmFib3ZlLnRhYmxldF06IHtcbiAgICAgICAgICBwYWRkaW5nSW5saW5lOiB0b2tlblNjaGVtYS5zaXplLnNwYWNlLnh4bGFyZ2VcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgICBjaGlsZHJlbjogY2hpbGRyZW5cbiAgICB9KTtcbiAgfVxuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBjc3Moe1xuICAgICAgZGlzcGxheTogJ2ZsZXgnXG4gICAgfSksXG4gICAgY2hpbGRyZW46IGNoaWxkcmVuXG4gIH0pO1xufTtcbmNvbnN0IFRvb2xiYXJXcmFwcGVyID0gKHtcbiAgY2hpbGRyZW5cbn0pID0+IHtcbiAgbGV0IGVudHJ5TGF5b3V0UGFuZSA9IHVzZUVudHJ5TGF5b3V0U3BsaXRQYW5lQ29udGV4dCgpO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChGcmFnbWVudCwge1xuICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KFwiZGl2XCIsIHtcbiAgICAgIFwiZGF0YS1sYXlvdXRcIjogZW50cnlMYXlvdXRQYW5lLFxuICAgICAgY2xhc3NOYW1lOiBjc3Moe1xuICAgICAgICBiYWNrZHJvcEZpbHRlcjogJ2JsdXIoOHB4KScsXG4gICAgICAgIGJhY2tncm91bmRDbGlwOiAncGFkZGluZy1ib3gnLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGBjb2xvci1taXgoaW4gc3JnYiwgdHJhbnNwYXJlbnQsICR7dG9rZW5TY2hlbWEuY29sb3IuYmFja2dyb3VuZC5jYW52YXN9IDkwJSlgLFxuICAgICAgICBib3JkZXJCb3R0b206IGAke3Rva2VuU2NoZW1hLnNpemUuYm9yZGVyLnJlZ3VsYXJ9IHNvbGlkIGNvbG9yLW1peChpbiBzcmdiLCB0cmFuc3BhcmVudCwgJHt0b2tlblNjaGVtYS5jb2xvci5mb3JlZ3JvdW5kLm5ldXRyYWx9IDEwJSlgLFxuICAgICAgICBib3JkZXJTdGFydEVuZFJhZGl1czogdG9rZW5TY2hlbWEuc2l6ZS5yYWRpdXMubWVkaXVtLFxuICAgICAgICBib3JkZXJTdGFydFN0YXJ0UmFkaXVzOiB0b2tlblNjaGVtYS5zaXplLnJhZGl1cy5tZWRpdW0sXG4gICAgICAgIG1pbldpZHRoOiAwLFxuICAgICAgICBwb3NpdGlvbjogJ3N0aWNreScsXG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgekluZGV4OiAyLFxuICAgICAgICAnJltkYXRhLWxheW91dD1cIm1haW5cIl0nOiB7XG4gICAgICAgICAgYm9yZGVyUmFkaXVzOiAwXG4gICAgICAgIH1cbiAgICAgIH0pLFxuICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goVG9vbGJhckNvbnRhaW5lciwge1xuICAgICAgICBjaGlsZHJlbjogY2hpbGRyZW5cbiAgICAgIH0pXG4gICAgfSlcbiAgfSk7XG59O1xuY29uc3QgVG9vbGJhclNjcm9sbEFyZWEgPSBwcm9wcyA9PiB7XG4gIGxldCBlbnRyeUxheW91dFBhbmUgPSB1c2VFbnRyeUxheW91dFNwbGl0UGFuZUNvbnRleHQoKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goRmxleCwge1xuICAgIFwiZGF0YS1sYXlvdXRcIjogZW50cnlMYXlvdXRQYW5lLFxuICAgIHBhZGRpbmdZOiBcInJlZ3VsYXJcIixcbiAgICBwYWRkaW5nWDogXCJtZWRpdW1cIixcbiAgICBnYXA6IFwibGFyZ2VcIixcbiAgICBmbGV4OiB0cnVlLFxuICAgIG1pbldpZHRoOiAwLFxuICAgIFVOU0FGRV9jbGFzc05hbWU6IGNzcyh7XG4gICAgICBtc092ZXJmbG93U3R5bGU6ICdub25lJyAvKiBmb3IgSW50ZXJuZXQgRXhwbG9yZXIsIEVkZ2UgKi8sXG4gICAgICBzY3JvbGxiYXJXaWR0aDogJ25vbmUnIC8qIGZvciBGaXJlZm94ICovLFxuICAgICAgb3ZlcmZsb3dYOiAnYXV0bycsXG4gICAgICAvKiBmb3IgQ2hyb21lLCBTYWZhcmksIGFuZCBPcGVyYSAqL1xuICAgICAgJyY6Oi13ZWJraXQtc2Nyb2xsYmFyJzoge1xuICAgICAgICBkaXNwbGF5OiAnbm9uZSdcbiAgICAgIH0sXG4gICAgICAnJltkYXRhLWxheW91dD1cIm1haW5cIl0nOiB7XG4gICAgICAgIHBhZGRpbmdJbmxpbmU6IDBcbiAgICAgIH1cbiAgICB9KSxcbiAgICAuLi5wcm9wc1xuICB9KTtcbn07XG5jb25zdCBoZWFkaW5nTWVudVZhbHMgPSBuZXcgTWFwKFtbJ25vcm1hbCcsICdub3JtYWwnXSwgWycxJywgMV0sIFsnMicsIDJdLCBbJzMnLCAzXSwgWyc0JywgNF0sIFsnNScsIDVdLCBbJzYnLCA2XV0pO1xuY29uc3QgSGVhZGluZ01lbnUgPSAoe1xuICBoZWFkaW5nTGV2ZWxzXG59KSA9PiB7XG4gIGNvbnN0IHtcbiAgICBlZGl0b3IsXG4gICAgdGV4dFN0eWxlc1xuICB9ID0gdXNlVG9vbGJhclN0YXRlKCk7XG4gIGNvbnN0IGlzRGlzYWJsZWQgPSB0ZXh0U3R5bGVzLmFsbG93ZWRIZWFkaW5nTGV2ZWxzLmxlbmd0aCA9PT0gMDtcbiAgY29uc3QgaXRlbXMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBsZXQgcmVzb2x2ZWRJdGVtcyA9IFt7XG4gICAgICBuYW1lOiAnUGFyYWdyYXBoJyxcbiAgICAgIGlkOiAnbm9ybWFsJ1xuICAgIH1dO1xuICAgIGhlYWRpbmdMZXZlbHMuZm9yRWFjaChsZXZlbCA9PiB7XG4gICAgICByZXNvbHZlZEl0ZW1zLnB1c2goe1xuICAgICAgICBuYW1lOiBgSGVhZGluZyAke2xldmVsfWAsXG4gICAgICAgIGlkOiBsZXZlbC50b1N0cmluZygpXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzb2x2ZWRJdGVtcztcbiAgfSwgW2hlYWRpbmdMZXZlbHNdKTtcbiAgY29uc3Qgc2VsZWN0ZWQgPSB0ZXh0U3R5bGVzLnNlbGVjdGVkLnRvU3RyaW5nKCk7XG4gIHJldHVybiB1c2VNZW1vKCgpID0+IC8qI19fUFVSRV9fKi9qc3goUGlja2VyLCB7XG4gICAgZmxleFNocmluazogMCxcbiAgICB3aWR0aDogXCJzY2FsZS4xNzAwXCIsXG4gICAgcHJvbWluZW5jZTogXCJsb3dcIixcbiAgICBcImFyaWEtbGFiZWxcIjogXCJUZXh0IGJsb2NrXCIsXG4gICAgaXRlbXM6IGl0ZW1zLFxuICAgIGlzRGlzYWJsZWQ6IGlzRGlzYWJsZWQsXG4gICAgc2VsZWN0ZWRLZXk6IHNlbGVjdGVkLFxuICAgIG9uU2VsZWN0aW9uQ2hhbmdlOiBzZWxlY3RlZCA9PiB7XG4gICAgICBsZXQga2V5ID0gaGVhZGluZ01lbnVWYWxzLmdldChzZWxlY3RlZCk7XG4gICAgICBpZiAoa2V5ID09PSAnbm9ybWFsJykge1xuICAgICAgICBFZGl0b3Iud2l0aG91dE5vcm1hbGl6aW5nKGVkaXRvciwgKCkgPT4ge1xuICAgICAgICAgIFRyYW5zZm9ybXMudW5zZXROb2RlcyhlZGl0b3IsICdsZXZlbCcsIHtcbiAgICAgICAgICAgIG1hdGNoOiBuID0+IG4udHlwZSA9PT0gJ2hlYWRpbmcnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgVHJhbnNmb3Jtcy5zZXROb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgIHR5cGU6ICdwYXJhZ3JhcGgnXG4gICAgICAgICAgfSwge1xuICAgICAgICAgICAgbWF0Y2g6IG4gPT4gbi50eXBlID09PSAnaGVhZGluZydcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKGtleSkge1xuICAgICAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgIHR5cGU6ICdoZWFkaW5nJyxcbiAgICAgICAgICBsZXZlbDoga2V5XG4gICAgICAgIH0sIHtcbiAgICAgICAgICBtYXRjaDogbm9kZSA9PiBub2RlLnR5cGUgPT09ICdwYXJhZ3JhcGgnIHx8IG5vZGUudHlwZSA9PT0gJ2hlYWRpbmcnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgUmVhY3RFZGl0b3IuZm9jdXMoZWRpdG9yKTtcbiAgICB9LFxuICAgIGNoaWxkcmVuOiBpdGVtID0+IC8qI19fUFVSRV9fKi9qc3goSXRlbSQzLCB7XG4gICAgICBjaGlsZHJlbjogaXRlbS5uYW1lXG4gICAgfSwgaXRlbS5pZClcbiAgfSksIFtlZGl0b3IsIGlzRGlzYWJsZWQsIGl0ZW1zLCBzZWxlY3RlZF0pO1xufTtcbmNvbnN0IGluc2VydEJsb2Nrc0luVG9vbGJhciA9IC8qI19fUFVSRV9fKi9qc3goSW5zZXJ0QmxvY2tzSW5Ub29sYmFyLCB7fSk7XG5mdW5jdGlvbiBJbnNlcnRCbG9ja3NJblRvb2xiYXIoKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZVNsYXRlU3RhdGljKCk7XG4gIGNvbnN0IGNvbXBvbmVudEJsb2NrcyA9IHVzZURvY3VtZW50RWRpdG9yQ29uZmlnKCkuY29tcG9uZW50QmxvY2tzO1xuICByZXR1cm4gT2JqZWN0LmVudHJpZXMoY29tcG9uZW50QmxvY2tzKS5maWx0ZXIoKFssIHZhbF0pID0+IHZhbC50b29sYmFySWNvbikubWFwKChba2V5LCBpdGVtXSkgPT4ge1xuICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhUb29sdGlwVHJpZ2dlciwge1xuICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEFjdGlvbkJ1dHRvbiwge1xuICAgICAgICBwcm9taW5lbmNlOiBcImxvd1wiLFxuICAgICAgICBvblByZXNzOiAoKSA9PiB7XG4gICAgICAgICAgaW5zZXJ0Q29tcG9uZW50QmxvY2soZWRpdG9yLCBjb21wb25lbnRCbG9ja3MsIGtleSk7XG4gICAgICAgICAgUmVhY3RFZGl0b3IuZm9jdXMoZWRpdG9yKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goSWNvbiwge1xuICAgICAgICAgIHNyYzogaXRlbS50b29sYmFySWNvblxuICAgICAgICB9KVxuICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goVG9vbHRpcCwge1xuICAgICAgICBjaGlsZHJlbjogaXRlbS5sYWJlbFxuICAgICAgfSldXG4gICAgfSwga2V5KTtcbiAgfSk7XG59XG5mdW5jdGlvbiBJbnNlcnRCbG9ja01lbnUoKSB7XG4gIGxldCBlbnRyeUxheW91dFBhbmUgPSB1c2VFbnRyeUxheW91dFNwbGl0UGFuZUNvbnRleHQoKTtcbiAgY29uc3QgZWRpdG9yID0gdXNlU2xhdGVTdGF0aWMoKTtcbiAgY29uc3QgY29tcG9uZW50QmxvY2tzID0gdXNlRG9jdW1lbnRFZGl0b3JDb25maWcoKS5jb21wb25lbnRCbG9ja3M7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhNZW51VHJpZ2dlciwge1xuICAgIGFsaWduOiBcImVuZFwiLFxuICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeHMoVG9vbHRpcFRyaWdnZXIsIHtcbiAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeHMoQWN0aW9uQnV0dG9uLCB7XG4gICAgICAgIG1hcmdpblk6IFwicmVndWxhclwiLFxuICAgICAgICBtYXJnaW5FbmQ6IGVudHJ5TGF5b3V0UGFuZSA9PT0gJ21haW4nID8gdW5kZWZpbmVkIDogJ21lZGl1bScsXG4gICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChJY29uLCB7XG4gICAgICAgICAgc3JjOiBwbHVzSWNvblxuICAgICAgICB9KSwgLyojX19QVVJFX18qL2pzeChJY29uLCB7XG4gICAgICAgICAgc3JjOiBjaGV2cm9uRG93bkljb25cbiAgICAgICAgfSldXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeHMoVG9vbHRpcCwge1xuICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goVGV4dCwge1xuICAgICAgICAgIGNoaWxkcmVuOiBcIkluc2VydFwiXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KEtiZCwge1xuICAgICAgICAgIGNoaWxkcmVuOiBcIi9cIlxuICAgICAgICB9KV1cbiAgICAgIH0pXVxuICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KE1lbnUsIHtcbiAgICAgIG9uQWN0aW9uOiBrZXkgPT4ge1xuICAgICAgICBpbnNlcnRDb21wb25lbnRCbG9jayhlZGl0b3IsIGNvbXBvbmVudEJsb2Nrcywga2V5KTtcbiAgICAgIH0sXG4gICAgICBpdGVtczogT2JqZWN0LmVudHJpZXMoY29tcG9uZW50QmxvY2tzKS5maWx0ZXIoKFssIHZhbF0pID0+ICF2YWwudG9vbGJhckljb24pLFxuICAgICAgY2hpbGRyZW46IChba2V5LCBpdGVtXSkgPT4gLyojX19QVVJFX18qL2pzeChJdGVtJDMsIHtcbiAgICAgICAgY2hpbGRyZW46IGl0ZW0ubGFiZWxcbiAgICAgIH0sIGtleSlcbiAgICB9KV1cbiAgfSk7XG59XG5jb25zdCBpbmxpbmVNYXJrcyA9IFt7XG4gIGtleTogJ2JvbGQnLFxuICBsYWJlbDogJ0JvbGQnLFxuICBpY29uOiBib2xkSWNvbixcbiAgc2hvcnRjdXQ6IGBCYFxufSwge1xuICBrZXk6ICdpdGFsaWMnLFxuICBsYWJlbDogJ0l0YWxpYycsXG4gIGljb246IGl0YWxpY0ljb24sXG4gIHNob3J0Y3V0OiBgSWBcbn0sIHtcbiAga2V5OiAndW5kZXJsaW5lJyxcbiAgbGFiZWw6ICdVbmRlcmxpbmUnLFxuICBpY29uOiB1bmRlcmxpbmVJY29uLFxuICBzaG9ydGN1dDogYFVgXG59LCB7XG4gIGtleTogJ3N0cmlrZXRocm91Z2gnLFxuICBsYWJlbDogJ1N0cmlrZXRocm91Z2gnLFxuICBpY29uOiBzdHJpa2V0aHJvdWdoSWNvblxufSwge1xuICBrZXk6ICdjb2RlJyxcbiAgbGFiZWw6ICdDb2RlJyxcbiAgaWNvbjogY29kZUljb25cbn0sIHtcbiAga2V5OiAnc3VwZXJzY3JpcHQnLFxuICBsYWJlbDogJ1N1cGVyc2NyaXB0JyxcbiAgaWNvbjogc3VwZXJzY3JpcHRJY29uXG59LCB7XG4gIGtleTogJ3N1YnNjcmlwdCcsXG4gIGxhYmVsOiAnU3Vic2NyaXB0JyxcbiAgaWNvbjogc3Vic2NyaXB0SWNvblxufSwge1xuICBrZXk6ICdjbGVhckZvcm1hdHRpbmcnLFxuICBsYWJlbDogJ0NsZWFyIGZvcm1hdHRpbmcnLFxuICBpY29uOiByZW1vdmVGb3JtYXR0aW5nSWNvblxufV07XG5mdW5jdGlvbiBJbmxpbmVNYXJrcyh7XG4gIG1hcmtzOiBfbWFya3NTaG93blxufSkge1xuICBjb25zdCB7XG4gICAgZWRpdG9yLFxuICAgIGNsZWFyRm9ybWF0dGluZzoge1xuICAgICAgaXNEaXNhYmxlZFxuICAgIH0sXG4gICAgbWFya3NcbiAgfSA9IHVzZVRvb2xiYXJTdGF0ZSgpO1xuICBjb25zdCBtYXJrc1Nob3duID0gdXNlTWVtb1N0cmluZ2lmaWVkKF9tYXJrc1Nob3duKTtcbiAgY29uc3Qgc2VsZWN0ZWRLZXlzID0gdXNlTWVtb1N0cmluZ2lmaWVkKE9iamVjdC5rZXlzKG1hcmtzKS5maWx0ZXIoa2V5ID0+IG1hcmtzW2tleV0uaXNTZWxlY3RlZCkpO1xuICBjb25zdCBkaXNhYmxlZEtleXMgPSB1c2VNZW1vU3RyaW5naWZpZWQoT2JqZWN0LmtleXMobWFya3MpLmZpbHRlcihrZXkgPT4gbWFya3Nba2V5XS5pc0Rpc2FibGVkKS5jb25jYXQoaXNEaXNhYmxlZCA/ICdjbGVhckZvcm1hdHRpbmcnIDogW10pKTtcbiAgcmV0dXJuIHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IGl0ZW1zID0gaW5saW5lTWFya3MuZmlsdGVyKGl0ZW0gPT4gaXRlbS5rZXkgPT09ICdjbGVhckZvcm1hdHRpbmcnIHx8IG1hcmtzU2hvd25baXRlbS5rZXldKTtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChBY3Rpb25Hcm91cCwge1xuICAgICAgVU5TQUZFX2NsYXNzTmFtZTogY3NzKHtcbiAgICAgICAgbWluV2lkdGg6IGBjYWxjKCR7dG9rZW5TY2hlbWEuc2l6ZS5lbGVtZW50Lm1lZGl1bX0gKiA0KWBcbiAgICAgIH0pLFxuICAgICAgcHJvbWluZW5jZTogXCJsb3dcIixcbiAgICAgIGRlbnNpdHk6IFwiY29tcGFjdFwiLFxuICAgICAgYnV0dG9uTGFiZWxCZWhhdmlvcjogXCJoaWRlXCIsXG4gICAgICBvdmVyZmxvd01vZGU6IFwiY29sbGFwc2VcIixcbiAgICAgIHN1bW1hcnlJY29uOiAvKiNfX1BVUkVfXyovanN4KEljb24sIHtcbiAgICAgICAgc3JjOiB0eXBlSWNvblxuICAgICAgfSksXG4gICAgICBpdGVtczogaXRlbXMsXG4gICAgICBzZWxlY3Rpb25Nb2RlOiBcIm11bHRpcGxlXCIsXG4gICAgICBzZWxlY3RlZEtleXM6IHNlbGVjdGVkS2V5cyxcbiAgICAgIGRpc2FibGVkS2V5czogZGlzYWJsZWRLZXlzLFxuICAgICAgb25BY3Rpb246IGtleSA9PiB7XG4gICAgICAgIGlmIChrZXkgPT09ICdjbGVhckZvcm1hdHRpbmcnKSB7XG4gICAgICAgICAgY2xlYXJGb3JtYXR0aW5nKGVkaXRvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIF9FZGl0b3IkbWFya3M7XG4gICAgICAgICAgY29uc3QgbWFyayA9IGtleTtcbiAgICAgICAgICBpZiAoKF9FZGl0b3IkbWFya3MgPSBFZGl0b3IubWFya3MoZWRpdG9yKSkgIT09IG51bGwgJiYgX0VkaXRvciRtYXJrcyAhPT0gdm9pZCAwICYmIF9FZGl0b3IkbWFya3NbbWFya10pIHtcbiAgICAgICAgICAgIEVkaXRvci5yZW1vdmVNYXJrKGVkaXRvciwgbWFyayk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIEVkaXRvci5hZGRNYXJrKGVkaXRvciwgbWFyaywgdHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFJlYWN0RWRpdG9yLmZvY3VzKGVkaXRvcik7XG4gICAgICB9LFxuICAgICAgY2hpbGRyZW46IGl0ZW0gPT4ge1xuICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeHMoSXRlbSQzLCB7XG4gICAgICAgICAgdGV4dFZhbHVlOiBpdGVtLmxhYmVsLFxuICAgICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChUZXh0LCB7XG4gICAgICAgICAgICBjaGlsZHJlbjogaXRlbS5sYWJlbFxuICAgICAgICAgIH0pLCAnc2hvcnRjdXQnIGluIGl0ZW0gJiYgLyojX19QVVJFX18qL2pzeChLYmQsIHtcbiAgICAgICAgICAgIG1ldGE6IHRydWUsXG4gICAgICAgICAgICBjaGlsZHJlbjogaXRlbS5zaG9ydGN1dFxuICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KEljb24sIHtcbiAgICAgICAgICAgIHNyYzogaXRlbS5pY29uXG4gICAgICAgICAgfSldXG4gICAgICAgIH0sIGl0ZW0ua2V5KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgW2Rpc2FibGVkS2V5cywgZWRpdG9yLCBtYXJrc1Nob3duLCBzZWxlY3RlZEtleXNdKTtcbn1cbmZ1bmN0aW9uIHVzZU1lbW9TdHJpbmdpZmllZCh2YWx1ZSkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIHJldHVybiB1c2VNZW1vKCgpID0+IHZhbHVlLCBbSlNPTi5zdHJpbmdpZnkodmFsdWUpXSk7XG59XG5cbmNvbnN0IEhlYWRpbmdFbGVtZW50ID0gKHtcbiAgYXR0cmlidXRlcyxcbiAgY2hpbGRyZW4sXG4gIGVsZW1lbnRcbn0pID0+IHtcbiAgY29uc3QgRWxlbWVudFR5cGUgPSBgaCR7ZWxlbWVudC5sZXZlbH1gO1xuICBjb25zdCBlZGl0b3IgPSB1c2VTbGF0ZVN0YXRpYygpO1xuICBjb25zdCB7XG4gICAgZG9jdW1lbnRGZWF0dXJlc1xuICB9ID0gdXNlRG9jdW1lbnRFZGl0b3JDb25maWcoKTtcbiAgY29uc3QgW2RpYWxvZ09wZW4sIHNldERpYWxvZ09wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBpZiAoT2JqZWN0LmtleXMoZG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmhlYWRpbmdzLnNjaGVtYS5maWVsZHMpLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KEVsZW1lbnRUeXBlLCB7XG4gICAgICAuLi5hdHRyaWJ1dGVzLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgdGV4dEFsaWduOiBlbGVtZW50LnRleHRBbGlnblxuICAgICAgfSxcbiAgICAgIGNoaWxkcmVuOiBjaGlsZHJlblxuICAgIH0pO1xuICB9XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhGcmFnbWVudCwge1xuICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChFbGVtZW50VHlwZSwge1xuICAgICAgc3R5bGU6IHtcbiAgICAgICAgdGV4dEFsaWduOiBlbGVtZW50LnRleHRBbGlnblxuICAgICAgfSxcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4cyhCbG9ja1BvcG92ZXJUcmlnZ2VyLCB7XG4gICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsXG4gICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChcImRpdlwiLCB7XG4gICAgICAgICAgY2hpbGRyZW46IGNoaWxkcmVuXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KEJsb2NrUG9wb3Zlciwge1xuICAgICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4cyhGbGV4LCB7XG4gICAgICAgICAgICBnYXA6IFwicmVndWxhclwiLFxuICAgICAgICAgICAgcGFkZGluZzogXCJyZWd1bGFyXCIsXG4gICAgICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goQ3VzdG9tQXR0cmlidXRlc0VkaXRCdXR0b24sIHtcbiAgICAgICAgICAgICAgb25QcmVzczogKCkgPT4gc2V0RGlhbG9nT3Blbih0cnVlKVxuICAgICAgICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3hzKFRvb2x0aXBUcmlnZ2VyLCB7XG4gICAgICAgICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChBY3Rpb25CdXR0b24sIHtcbiAgICAgICAgICAgICAgICBwcm9taW5lbmNlOiBcImxvd1wiLFxuICAgICAgICAgICAgICAgIG9uUHJlc3M6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgICAgICAgIGF0OiBSZWFjdEVkaXRvci5maW5kUGF0aChlZGl0b3IsIGVsZW1lbnQpXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KEljb24sIHtcbiAgICAgICAgICAgICAgICAgIHNyYzogdHJhc2gySWNvblxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KFRvb2x0aXAsIHtcbiAgICAgICAgICAgICAgICB0b25lOiBcImNyaXRpY2FsXCIsXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFwiUmVtb3ZlXCJcbiAgICAgICAgICAgICAgfSldXG4gICAgICAgICAgICB9KV1cbiAgICAgICAgICB9KVxuICAgICAgICB9KV1cbiAgICAgIH0pXG4gICAgfSksIC8qI19fUFVSRV9fKi9qc3goQ3VzdG9tQXR0cmlidXRlc0RpYWxvZywge1xuICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgIHNjaGVtYTogZG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmhlYWRpbmdzLnNjaGVtYSxcbiAgICAgIGlzT3BlbjogZGlhbG9nT3BlbixcbiAgICAgIG5vZGVMYWJlbDogXCJIZWFkaW5nXCIsXG4gICAgICBvbkRpc21pc3M6ICgpID0+IHNldERpYWxvZ09wZW4oZmFsc2UpXG4gICAgfSldXG4gIH0pO1xufTtcblxuY29uc3QgcmVuZGVyRWxlbWVudCA9IHByb3BzID0+IHtcbiAgc3dpdGNoIChwcm9wcy5lbGVtZW50LnR5cGUpIHtcbiAgICBjYXNlICdsYXlvdXQnOlxuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goTGF5b3V0Q29udGFpbmVyLCB7XG4gICAgICAgIGF0dHJpYnV0ZXM6IHByb3BzLmF0dHJpYnV0ZXMsXG4gICAgICAgIGNoaWxkcmVuOiBwcm9wcy5jaGlsZHJlbixcbiAgICAgICAgZWxlbWVudDogcHJvcHMuZWxlbWVudFxuICAgICAgfSk7XG4gICAgY2FzZSAnbGF5b3V0LWFyZWEnOlxuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goTGF5b3V0QXJlYSwge1xuICAgICAgICAuLi5wcm9wc1xuICAgICAgfSk7XG4gICAgY2FzZSAnY29kZSc6XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChDb2RlRWxlbWVudCwge1xuICAgICAgICBhdHRyaWJ1dGVzOiBwcm9wcy5hdHRyaWJ1dGVzLFxuICAgICAgICBjaGlsZHJlbjogcHJvcHMuY2hpbGRyZW4sXG4gICAgICAgIGVsZW1lbnQ6IHByb3BzLmVsZW1lbnRcbiAgICAgIH0pO1xuICAgIGNhc2UgJ2NvbXBvbmVudC1ibG9jayc6XG4gICAgICB7XG4gICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KENvbXBvbmVudEJsb2Nrc0VsZW1lbnQsIHtcbiAgICAgICAgICBhdHRyaWJ1dGVzOiBwcm9wcy5hdHRyaWJ1dGVzLFxuICAgICAgICAgIGNoaWxkcmVuOiBwcm9wcy5jaGlsZHJlbixcbiAgICAgICAgICBlbGVtZW50OiBwcm9wcy5lbGVtZW50XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIGNhc2UgJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCc6XG4gICAgY2FzZSAnY29tcG9uZW50LWJsb2NrLXByb3AnOlxuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goQ29tcG9uZW50SW5saW5lUHJvcCwge1xuICAgICAgICAuLi5wcm9wc1xuICAgICAgfSk7XG4gICAgY2FzZSAnaGVhZGluZyc6XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChIZWFkaW5nRWxlbWVudCwge1xuICAgICAgICBhdHRyaWJ1dGVzOiBwcm9wcy5hdHRyaWJ1dGVzLFxuICAgICAgICBjaGlsZHJlbjogcHJvcHMuY2hpbGRyZW4sXG4gICAgICAgIGVsZW1lbnQ6IHByb3BzLmVsZW1lbnRcbiAgICAgIH0pO1xuICAgIGNhc2UgJ2xpbmsnOlxuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goTGlua0VsZW1lbnQsIHtcbiAgICAgICAgYXR0cmlidXRlczogcHJvcHMuYXR0cmlidXRlcyxcbiAgICAgICAgY2hpbGRyZW46IHByb3BzLmNoaWxkcmVuLFxuICAgICAgICBlbGVtZW50OiBwcm9wcy5lbGVtZW50XG4gICAgICB9KTtcbiAgICBjYXNlICdvcmRlcmVkLWxpc3QnOlxuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goXCJvbFwiLCB7XG4gICAgICAgIC4uLnByb3BzLmF0dHJpYnV0ZXMsXG4gICAgICAgIGNoaWxkcmVuOiBwcm9wcy5jaGlsZHJlblxuICAgICAgfSk7XG4gICAgY2FzZSAndW5vcmRlcmVkLWxpc3QnOlxuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goXCJ1bFwiLCB7XG4gICAgICAgIC4uLnByb3BzLmF0dHJpYnV0ZXMsXG4gICAgICAgIGNoaWxkcmVuOiBwcm9wcy5jaGlsZHJlblxuICAgICAgfSk7XG4gICAgY2FzZSAnbGlzdC1pdGVtJzpcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFwibGlcIiwge1xuICAgICAgICAuLi5wcm9wcy5hdHRyaWJ1dGVzLFxuICAgICAgICBjaGlsZHJlbjogcHJvcHMuY2hpbGRyZW5cbiAgICAgIH0pO1xuICAgIGNhc2UgJ2xpc3QtaXRlbS1jb250ZW50JzpcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFwic3BhblwiLCB7XG4gICAgICAgIC4uLnByb3BzLmF0dHJpYnV0ZXMsXG4gICAgICAgIGNoaWxkcmVuOiBwcm9wcy5jaGlsZHJlblxuICAgICAgfSk7XG4gICAgY2FzZSAnYmxvY2txdW90ZSc6XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChcImJsb2NrcXVvdGVcIiwge1xuICAgICAgICAuLi5wcm9wcy5hdHRyaWJ1dGVzLFxuICAgICAgICBjaGlsZHJlbjogcHJvcHMuY2hpbGRyZW5cbiAgICAgIH0pO1xuICAgIGNhc2UgJ2RpdmlkZXInOlxuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goRGl2aWRlckVsZW1lbnQsIHtcbiAgICAgICAgLi4ucHJvcHNcbiAgICAgIH0pO1xuICAgIGNhc2UgJ2ltYWdlJzpcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KEltYWdlRWxlbWVudCwge1xuICAgICAgICBhdHRyaWJ1dGVzOiBwcm9wcy5hdHRyaWJ1dGVzLFxuICAgICAgICBjaGlsZHJlbjogcHJvcHMuY2hpbGRyZW4sXG4gICAgICAgIGVsZW1lbnQ6IHByb3BzLmVsZW1lbnRcbiAgICAgIH0pO1xuICAgIGNhc2UgJ3RhYmxlJzpcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFRhYmxlRWxlbWVudCwge1xuICAgICAgICBhdHRyaWJ1dGVzOiBwcm9wcy5hdHRyaWJ1dGVzLFxuICAgICAgICBjaGlsZHJlbjogcHJvcHMuY2hpbGRyZW4sXG4gICAgICAgIGVsZW1lbnQ6IHByb3BzLmVsZW1lbnRcbiAgICAgIH0pO1xuICAgIGNhc2UgJ3RhYmxlLWhlYWQnOlxuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goVGFibGVIZWFkRWxlbWVudCwge1xuICAgICAgICBhdHRyaWJ1dGVzOiBwcm9wcy5hdHRyaWJ1dGVzLFxuICAgICAgICBjaGlsZHJlbjogcHJvcHMuY2hpbGRyZW4sXG4gICAgICAgIGVsZW1lbnQ6IHByb3BzLmVsZW1lbnRcbiAgICAgIH0pO1xuICAgIGNhc2UgJ3RhYmxlLWJvZHknOlxuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goVGFibGVCb2R5RWxlbWVudCwge1xuICAgICAgICBhdHRyaWJ1dGVzOiBwcm9wcy5hdHRyaWJ1dGVzLFxuICAgICAgICBjaGlsZHJlbjogcHJvcHMuY2hpbGRyZW4sXG4gICAgICAgIGVsZW1lbnQ6IHByb3BzLmVsZW1lbnRcbiAgICAgIH0pO1xuICAgIGNhc2UgJ3RhYmxlLXJvdyc6XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChUYWJsZVJvd0VsZW1lbnQsIHtcbiAgICAgICAgYXR0cmlidXRlczogcHJvcHMuYXR0cmlidXRlcyxcbiAgICAgICAgY2hpbGRyZW46IHByb3BzLmNoaWxkcmVuLFxuICAgICAgICBlbGVtZW50OiBwcm9wcy5lbGVtZW50XG4gICAgICB9KTtcbiAgICBjYXNlICd0YWJsZS1jZWxsJzpcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFRhYmxlQ2VsbEVsZW1lbnQsIHtcbiAgICAgICAgYXR0cmlidXRlczogcHJvcHMuYXR0cmlidXRlcyxcbiAgICAgICAgY2hpbGRyZW46IHByb3BzLmNoaWxkcmVuLFxuICAgICAgICBlbGVtZW50OiBwcm9wcy5lbGVtZW50XG4gICAgICB9KTtcbiAgICBkZWZhdWx0OlxuICAgICAgbGV0IHtcbiAgICAgICAgdGV4dEFsaWduXG4gICAgICB9ID0gcHJvcHMuZWxlbWVudDtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFwicFwiLCB7XG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgdGV4dEFsaWduXG4gICAgICAgIH0sXG4gICAgICAgIC4uLnByb3BzLmF0dHJpYnV0ZXMsXG4gICAgICAgIGNoaWxkcmVuOiBwcm9wcy5jaGlsZHJlblxuICAgICAgfSk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGdldE9wdGlvbnModG9vbGJhclN0YXRlLCBjb21wb25lbnRCbG9ja3MpIHtcbiAgY29uc3Qgb3B0aW9ucyA9IFsuLi5PYmplY3Qua2V5cyhjb21wb25lbnRCbG9ja3MpLm1hcChrZXkgPT4gKHtcbiAgICBsYWJlbDogY29tcG9uZW50QmxvY2tzW2tleV0ubGFiZWwsXG4gICAgaW5zZXJ0OiBlZGl0b3IgPT4ge1xuICAgICAgaW5zZXJ0Q29tcG9uZW50QmxvY2soZWRpdG9yLCBjb21wb25lbnRCbG9ja3MsIGtleSk7XG4gICAgfVxuICB9KSksIC4uLnRvb2xiYXJTdGF0ZS50ZXh0U3R5bGVzLmFsbG93ZWRIZWFkaW5nTGV2ZWxzLmZpbHRlcihhID0+IHRvb2xiYXJTdGF0ZS5lZGl0b3JEb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuaGVhZGluZ3MubGV2ZWxzLmluY2x1ZGVzKGEpKS5tYXAobGV2ZWwgPT4gKHtcbiAgICBsYWJlbDogYEhlYWRpbmcgJHtsZXZlbH1gLFxuICAgIGluc2VydChlZGl0b3IpIHtcbiAgICAgIGluc2VydE5vZGVzQnV0UmVwbGFjZUlmU2VsZWN0aW9uSXNBdEVtcHR5UGFyYWdyYXBoT3JIZWFkaW5nKGVkaXRvciwge1xuICAgICAgICB0eXBlOiAnaGVhZGluZycsXG4gICAgICAgIGxldmVsLFxuICAgICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgICB0ZXh0OiAnJ1xuICAgICAgICB9XVxuICAgICAgfSk7XG4gICAgfVxuICB9KSksICF0b29sYmFyU3RhdGUuYmxvY2txdW90ZS5pc0Rpc2FibGVkICYmIHRvb2xiYXJTdGF0ZS5lZGl0b3JEb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuYmxvY2tUeXBlcy5ibG9ja3F1b3RlICYmIHtcbiAgICBsYWJlbDogJ0Jsb2NrcXVvdGUnLFxuICAgIGluc2VydChlZGl0b3IpIHtcbiAgICAgIGluc2VydE5vZGVzQnV0UmVwbGFjZUlmU2VsZWN0aW9uSXNBdEVtcHR5UGFyYWdyYXBoT3JIZWFkaW5nKGVkaXRvciwge1xuICAgICAgICB0eXBlOiAnYmxvY2txdW90ZScsXG4gICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgIHRleHQ6ICcnXG4gICAgICAgIH1dXG4gICAgICB9KTtcbiAgICB9XG4gIH0sICF0b29sYmFyU3RhdGUuY29kZS5pc0Rpc2FibGVkICYmIHRvb2xiYXJTdGF0ZS5lZGl0b3JEb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuYmxvY2tUeXBlcy5jb2RlICYmIHtcbiAgICBsYWJlbDogJ0NvZGUgYmxvY2snLFxuICAgIGluc2VydChlZGl0b3IpIHtcbiAgICAgIGluc2VydE5vZGVzQnV0UmVwbGFjZUlmU2VsZWN0aW9uSXNBdEVtcHR5UGFyYWdyYXBoT3JIZWFkaW5nKGVkaXRvciwge1xuICAgICAgICB0eXBlOiAnY29kZScsXG4gICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgIHRleHQ6ICcnXG4gICAgICAgIH1dXG4gICAgICB9KTtcbiAgICB9XG4gIH0sICEhdG9vbGJhclN0YXRlLmVkaXRvckRvY3VtZW50RmVhdHVyZXMuaW1hZ2VzICYmIHtcbiAgICBsYWJlbDogJ0ltYWdlJyxcbiAgICBhc3luYyBpbnNlcnQoZWRpdG9yKSB7XG4gICAgICBjb25zdCBpbWFnZSA9IGF3YWl0IGdldFVwbG9hZGVkSW1hZ2UoKTtcbiAgICAgIGlmIChpbWFnZSkge1xuICAgICAgICBpbnNlcnROb2Rlc0J1dFJlcGxhY2VJZlNlbGVjdGlvbklzQXRFbXB0eVBhcmFncmFwaE9ySGVhZGluZyhlZGl0b3IsIHtcbiAgICAgICAgICB0eXBlOiAnaW1hZ2UnLFxuICAgICAgICAgIHNyYzogaW1hZ2UsXG4gICAgICAgICAgYWx0OiAnJyxcbiAgICAgICAgICB0aXRsZTogJycsXG4gICAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgICB0ZXh0OiAnJ1xuICAgICAgICAgIH1dXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwgISF0b29sYmFyU3RhdGUuZWRpdG9yRG9jdW1lbnRGZWF0dXJlcy50YWJsZXMgJiYge1xuICAgIGxhYmVsOiAnVGFibGUnLFxuICAgIGluc2VydDogaW5zZXJ0VGFibGVcbiAgfSwgIXRvb2xiYXJTdGF0ZS5kaXZpZGVycy5pc0Rpc2FibGVkICYmIHRvb2xiYXJTdGF0ZS5lZGl0b3JEb2N1bWVudEZlYXR1cmVzLmRpdmlkZXJzICYmIHtcbiAgICBsYWJlbDogJ0RpdmlkZXInLFxuICAgIGluc2VydChlZGl0b3IpIHtcbiAgICAgIGluc2VydE5vZGVzQnV0UmVwbGFjZUlmU2VsZWN0aW9uSXNBdEVtcHR5UGFyYWdyYXBoT3JIZWFkaW5nKGVkaXRvciwge1xuICAgICAgICB0eXBlOiAnZGl2aWRlcicsXG4gICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgIHRleHQ6ICcnXG4gICAgICAgIH1dXG4gICAgICB9KTtcbiAgICB9XG4gIH0sICEhdG9vbGJhclN0YXRlLmVkaXRvckRvY3VtZW50RmVhdHVyZXMubGF5b3V0cy5sZW5ndGggJiYge1xuICAgIGxhYmVsOiAnTGF5b3V0JyxcbiAgICBpbnNlcnQoZWRpdG9yKSB7XG4gICAgICBpbnNlcnRMYXlvdXQoZWRpdG9yLCB0b29sYmFyU3RhdGUuZWRpdG9yRG9jdW1lbnRGZWF0dXJlcy5sYXlvdXRzWzBdKTtcbiAgICB9XG4gIH0sICF0b29sYmFyU3RhdGUubGlzdHMub3JkZXJlZC5pc0Rpc2FibGVkICYmIHRvb2xiYXJTdGF0ZS5lZGl0b3JEb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcubGlzdFR5cGVzLm9yZGVyZWQgJiYge1xuICAgIGxhYmVsOiAnTnVtYmVyZWQgTGlzdCcsXG4gICAga2V5d29yZHM6IFsnb3JkZXJlZCBsaXN0J10sXG4gICAgaW5zZXJ0KGVkaXRvcikge1xuICAgICAgaW5zZXJ0Tm9kZXNCdXRSZXBsYWNlSWZTZWxlY3Rpb25Jc0F0RW1wdHlQYXJhZ3JhcGhPckhlYWRpbmcoZWRpdG9yLCB7XG4gICAgICAgIHR5cGU6ICdvcmRlcmVkLWxpc3QnLFxuICAgICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgICB0ZXh0OiAnJ1xuICAgICAgICB9XVxuICAgICAgfSk7XG4gICAgfVxuICB9LCAhdG9vbGJhclN0YXRlLmxpc3RzLnVub3JkZXJlZC5pc0Rpc2FibGVkICYmIHRvb2xiYXJTdGF0ZS5lZGl0b3JEb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcubGlzdFR5cGVzLnVub3JkZXJlZCAmJiB7XG4gICAgbGFiZWw6ICdCdWxsZXQgTGlzdCcsXG4gICAga2V5d29yZHM6IFsndW5vcmRlcmVkIGxpc3QnXSxcbiAgICBpbnNlcnQoZWRpdG9yKSB7XG4gICAgICBpbnNlcnROb2Rlc0J1dFJlcGxhY2VJZlNlbGVjdGlvbklzQXRFbXB0eVBhcmFncmFwaE9ySGVhZGluZyhlZGl0b3IsIHtcbiAgICAgICAgdHlwZTogJ3Vub3JkZXJlZC1saXN0JyxcbiAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgdGV4dDogJydcbiAgICAgICAgfV1cbiAgICAgIH0pO1xuICAgIH1cbiAgfV07XG4gIHJldHVybiBvcHRpb25zLmZpbHRlcih4ID0+IHR5cGVvZiB4ICE9PSAnYm9vbGVhbicpO1xufVxuZnVuY3Rpb24gaW5zZXJ0T3B0aW9uKGVkaXRvciwgdGV4dCwgb3B0aW9uKSB7XG4gIGNvbnN0IHBhdGggPSBSZWFjdEVkaXRvci5maW5kUGF0aChlZGl0b3IsIHRleHQpO1xuICBUcmFuc2Zvcm1zLmRlbGV0ZShlZGl0b3IsIHtcbiAgICBhdDoge1xuICAgICAgZm9jdXM6IEVkaXRvci5zdGFydChlZGl0b3IsIHBhdGgpLFxuICAgICAgYW5jaG9yOiBFZGl0b3IuZW5kKGVkaXRvciwgcGF0aClcbiAgICB9XG4gIH0pO1xuICBvcHRpb24uaW5zZXJ0KGVkaXRvcik7XG59XG5mdW5jdGlvbiBJbnNlcnRNZW51KHtcbiAgY2hpbGRyZW4sXG4gIHRleHRcbn0pIHtcbiAgY29uc3QgdG9vbGJhclN0YXRlID0gdXNlVG9vbGJhclN0YXRlKCk7XG4gIGNvbnN0IHtcbiAgICBlZGl0b3JcbiAgfSA9IHRvb2xiYXJTdGF0ZTtcbiAgY29uc3Qge1xuICAgIGNvbXBvbmVudEJsb2Nrc1xuICB9ID0gdXNlRG9jdW1lbnRFZGl0b3JDb25maWcoKTtcbiAgY29uc3Qgb3B0aW9ucyA9IG1hdGNoU29ydGVyKGdldE9wdGlvbnModG9vbGJhclN0YXRlLCBjb21wb25lbnRCbG9ja3MpLCB0ZXh0LnRleHQuc2xpY2UoMSksIHtcbiAgICBrZXlzOiBbJ2xhYmVsJywgJ2tleXdvcmRzJ11cbiAgfSkubWFwKChvcHRpb24sIGluZGV4KSA9PiAoe1xuICAgIC4uLm9wdGlvbixcbiAgICBpbmRleFxuICB9KSk7XG4gIGNvbnN0IHN0YXRlUmVmID0gdXNlUmVmKHtcbiAgICBvcHRpb25zLFxuICAgIHRleHRcbiAgfSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc3RhdGVSZWYuY3VycmVudCA9IHtcbiAgICAgIG9wdGlvbnMsXG4gICAgICB0ZXh0XG4gICAgfTtcbiAgfSk7XG4gIGNvbnN0IGxpc3RlbmVyUmVmID0gdXNlUmVmKF9ldmVudCA9PiB7fSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGlzdGVuZXJSZWYuY3VycmVudCA9IGV2ZW50ID0+IHtcbiAgICAgIGlmIChldmVudC5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47XG4gICAgICBzd2l0Y2ggKGV2ZW50LmtleSkge1xuICAgICAgICBjYXNlICdBcnJvd0Rvd24nOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlmIChzdGF0ZVJlZi5jdXJyZW50Lm9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIHN0YXRlLnNlbGVjdGlvbk1hbmFnZXIuc2V0Rm9jdXNlZCh0cnVlKTtcbiAgICAgICAgICAgICAgc3RhdGUuc2VsZWN0aW9uTWFuYWdlci5zZXRGb2N1c2VkS2V5KChOdW1iZXIoc3RhdGUuc2VsZWN0aW9uTWFuYWdlci5mb2N1c2VkS2V5KSA9PT0gc3RhdGVSZWYuY3VycmVudC5vcHRpb25zLmxlbmd0aCAtIDEgPyAwIDogTnVtYmVyKHN0YXRlLnNlbGVjdGlvbk1hbmFnZXIuZm9jdXNlZEtleSkgKyAxKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIGNhc2UgJ0Fycm93VXAnOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlmIChzdGF0ZVJlZi5jdXJyZW50Lm9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIHN0YXRlLnNlbGVjdGlvbk1hbmFnZXIuc2V0Rm9jdXNlZCh0cnVlKTtcbiAgICAgICAgICAgICAgc3RhdGUuc2VsZWN0aW9uTWFuYWdlci5zZXRGb2N1c2VkS2V5KChzdGF0ZS5zZWxlY3Rpb25NYW5hZ2VyLmZvY3VzZWRLZXkgPT09ICcwJyA/IHN0YXRlUmVmLmN1cnJlbnQub3B0aW9ucy5sZW5ndGggLSAxIDogTnVtYmVyKHN0YXRlLnNlbGVjdGlvbk1hbmFnZXIuZm9jdXNlZEtleSkgLSAxKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIGNhc2UgJ0VudGVyJzpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSBzdGF0ZVJlZi5jdXJyZW50Lm9wdGlvbnNbTnVtYmVyKHN0YXRlLnNlbGVjdGlvbk1hbmFnZXIuZm9jdXNlZEtleSldO1xuICAgICAgICAgICAgaWYgKG9wdGlvbikge1xuICAgICAgICAgICAgICBpbnNlcnRPcHRpb24oZWRpdG9yLCBzdGF0ZVJlZi5jdXJyZW50LnRleHQsIG9wdGlvbik7XG4gICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICBjYXNlICdFc2NhcGUnOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHBhdGggPSBSZWFjdEVkaXRvci5maW5kUGF0aChlZGl0b3IsIHN0YXRlUmVmLmN1cnJlbnQudGV4dCk7XG4gICAgICAgICAgICBUcmFuc2Zvcm1zLnVuc2V0Tm9kZXMoZWRpdG9yLCAnaW5zZXJ0TWVudScsIHtcbiAgICAgICAgICAgICAgYXQ6IHBhdGhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgZG9tTm9kZSA9IFJlYWN0RWRpdG9yLnRvRE9NTm9kZShlZGl0b3IsIGVkaXRvcik7XG4gICAgbGV0IGxpc3RlbmVyID0gZXZlbnQgPT4gbGlzdGVuZXJSZWYuY3VycmVudChldmVudCk7XG4gICAgZG9tTm9kZS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgbGlzdGVuZXIpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkb21Ob2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBsaXN0ZW5lcik7XG4gICAgfTtcbiAgfSwgW2VkaXRvcl0pO1xuICBjb25zdCB0cmlnZ2VyUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBvdmVybGF5U3RhdGUgPSB1c2VPdmVybGF5VHJpZ2dlclN0YXRlKHtcbiAgICBpc09wZW46IHRydWVcbiAgfSk7XG4gIGNvbnN0IHtcbiAgICB0cmlnZ2VyUHJvcHM6IHtcbiAgICAgIG9uUHJlc3MsXG4gICAgICAuLi50cmlnZ2VyUHJvcHNcbiAgICB9LFxuICAgIG92ZXJsYXlQcm9wc1xuICB9ID0gdXNlT3ZlcmxheVRyaWdnZXIoe1xuICAgIHR5cGU6ICdsaXN0Ym94J1xuICB9LCBvdmVybGF5U3RhdGUsIHRyaWdnZXJSZWYpO1xuICBsZXQgc3RhdGUgPSB1c2VMaXN0U3RhdGUoe1xuICAgIGl0ZW1zOiBvcHRpb25zLFxuICAgIGNoaWxkcmVuOiBpdGVtID0+IC8qI19fUFVSRV9fKi9qc3goSXRlbSQ1LCB7XG4gICAgICBjaGlsZHJlbjogaXRlbS5sYWJlbFxuICAgIH0sIGl0ZW0uaW5kZXgpXG4gIH0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghc3RhdGUuc2VsZWN0aW9uTWFuYWdlci5pc0ZvY3VzZWQgJiYgc3RhdGUuY29sbGVjdGlvbi5zaXplKSB7XG4gICAgICBzdGF0ZS5zZWxlY3Rpb25NYW5hZ2VyLnNldEZvY3VzZWQodHJ1ZSk7XG4gICAgICBzdGF0ZS5zZWxlY3Rpb25NYW5hZ2VyLnNldEZvY3VzZWRLZXkoJzAnKTtcbiAgICB9XG4gIH0sIFtzdGF0ZV0pO1xuICBjb25zdCBzY3JvbGxhYmxlUmVmID0gdXNlUmVmKG51bGwpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZhciBfc2Nyb2xsYWJsZVJlZiRjdXJyZW47XG4gICAgY29uc3QgZWxlbWVudCA9IChfc2Nyb2xsYWJsZVJlZiRjdXJyZW4gPSBzY3JvbGxhYmxlUmVmLmN1cnJlbnQpID09PSBudWxsIHx8IF9zY3JvbGxhYmxlUmVmJGN1cnJlbiA9PT0gdm9pZCAwIHx8IChfc2Nyb2xsYWJsZVJlZiRjdXJyZW4gPSBfc2Nyb2xsYWJsZVJlZiRjdXJyZW4ucXVlcnlTZWxlY3RvcignW3JvbGU9XCJsaXN0Ym94XCJdIFtyb2xlPVwicHJlc2VudGF0aW9uXCJdJykpID09PSBudWxsIHx8IF9zY3JvbGxhYmxlUmVmJGN1cnJlbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Njcm9sbGFibGVSZWYkY3VycmVuLmNoaWxkcmVuW3N0YXRlLnNlbGVjdGlvbk1hbmFnZXIuZm9jdXNlZEtleV07XG4gICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgIHNjcm9sbEludG9WaWV3KGVsZW1lbnQsIHtcbiAgICAgICAgc2Nyb2xsTW9kZTogJ2lmLW5lZWRlZCcsXG4gICAgICAgIGJvdW5kYXJ5OiBzY3JvbGxhYmxlUmVmLmN1cnJlbnQsXG4gICAgICAgIGJsb2NrOiAnbmVhcmVzdCdcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3N0YXRlLnNlbGVjdGlvbk1hbmFnZXIuZm9jdXNlZEtleV0pO1xuICBjb25zdCBsaXN0Ym94UmVmID0gdXNlUmVmKG51bGwpO1xuICBsZXQgbGF5b3V0ID0gdXNlTGlzdEJveExheW91dChzdGF0ZSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhGcmFnbWVudCQxLCB7XG4gICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KFwic3BhblwiLCB7XG4gICAgICAuLi50cmlnZ2VyUHJvcHMsXG4gICAgICByb2xlOiBcImJ1dHRvblwiLFxuICAgICAgY2xhc3NOYW1lOiBjc3Moe1xuICAgICAgICBjb2xvcjogdG9rZW5TY2hlbWEuY29sb3IuZm9yZWdyb3VuZC5hY2NlbnQsXG4gICAgICAgIGZvbnRXZWlnaHQ6IHRva2VuU2NoZW1hLnR5cG9ncmFwaHkuZm9udFdlaWdodC5tZWRpdW1cbiAgICAgIH0pLFxuICAgICAgcmVmOiB0cmlnZ2VyUmVmLFxuICAgICAgY2hpbGRyZW46IGNoaWxkcmVuXG4gICAgfSksIC8qI19fUFVSRV9fKi9qc3goUG9wb3Zlciwge1xuICAgICAgd2lkdGg6IFwiYWxpYXMuc2luZ2xlTGluZVdpZHRoXCIsXG4gICAgICBwbGFjZW1lbnQ6IFwiYm90dG9tIHN0YXJ0XCIsXG4gICAgICBpc05vbk1vZGFsOiB0cnVlLFxuICAgICAgaGlkZUFycm93OiB0cnVlLFxuICAgICAgLi4ub3ZlcmxheVByb3BzLFxuICAgICAgc3RhdGU6IG92ZXJsYXlTdGF0ZSxcbiAgICAgIHRyaWdnZXJSZWY6IHRyaWdnZXJSZWYsXG4gICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogY3NzKHtcbiAgICAgICAgICBvdmVyZmxvdzogJ3Njcm9sbCcsXG4gICAgICAgICAgbWF4SGVpZ2h0OiAzMDBcbiAgICAgICAgfSksXG4gICAgICAgIHJlZjogc2Nyb2xsYWJsZVJlZixcbiAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goTGlzdEJveEJhc2UsIHtcbiAgICAgICAgICBcImFyaWEtbGFiZWxcIjogXCJJbnNlcnQgYmxvY2tcIixcbiAgICAgICAgICBzdGF0ZTogc3RhdGUsXG4gICAgICAgICAgc2hvdWxkVXNlVmlydHVhbEZvY3VzOiB0cnVlLFxuICAgICAgICAgIGxheW91dDogbGF5b3V0LFxuICAgICAgICAgIHJlZjogbGlzdGJveFJlZixcbiAgICAgICAgICBvbkFjdGlvbjoga2V5ID0+IHtcbiAgICAgICAgICAgIGluc2VydE9wdGlvbihlZGl0b3IsIHRleHQsIG9wdGlvbnNba2V5XSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KV1cbiAgfSk7XG59XG5jb25zdCBub2RlTGlzdHNXaXRob3V0SW5zZXJ0TWVudSA9IG5ldyBXZWFrU2V0KCk7XG5jb25zdCBub2Rlc1dpdGhvdXRJbnNlcnRNZW51ID0gbmV3IFdlYWtTZXQoKTtcbmZ1bmN0aW9uIGZpbmRQYXRoV2l0aEluc2VydE1lbnUobm9kZSwgcGF0aCkge1xuICBpZiAoVGV4dCQxLmlzVGV4dChub2RlKSkge1xuICAgIHJldHVybiBub2RlLmluc2VydE1lbnUgPyBwYXRoIDogdW5kZWZpbmVkO1xuICB9XG4gIGlmIChub2RlTGlzdHNXaXRob3V0SW5zZXJ0TWVudS5oYXMobm9kZS5jaGlsZHJlbikpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgZm9yIChjb25zdCBbaW5kZXgsIGNoaWxkXSBvZiBub2RlLmNoaWxkcmVuLmVudHJpZXMoKSkge1xuICAgIGlmIChub2Rlc1dpdGhvdXRJbnNlcnRNZW51LmhhcyhjaGlsZCkpIGNvbnRpbnVlO1xuICAgIGxldCBtYXliZVBhdGggPSBmaW5kUGF0aFdpdGhJbnNlcnRNZW51KGNoaWxkLCBbLi4ucGF0aCwgaW5kZXhdKTtcbiAgICBpZiAobWF5YmVQYXRoKSB7XG4gICAgICByZXR1cm4gbWF5YmVQYXRoO1xuICAgIH1cbiAgICBub2Rlc1dpdGhvdXRJbnNlcnRNZW51LmFkZChjaGlsZCk7XG4gIH1cbiAgbm9kZUxpc3RzV2l0aG91dEluc2VydE1lbnUuYWRkKG5vZGUuY2hpbGRyZW4pO1xufVxuZnVuY3Rpb24gcmVtb3ZlSW5zZXJ0TWVudU1hcmtXaGVuT3V0c2lkZU9mU2VsZWN0aW9uKGVkaXRvcikge1xuICB2YXIgX0VkaXRvciRtYXJrcztcbiAgY29uc3QgcGF0aCA9IGZpbmRQYXRoV2l0aEluc2VydE1lbnUoZWRpdG9yLCBbXSk7XG4gIGlmIChwYXRoICYmICEoKF9FZGl0b3IkbWFya3MgPSBFZGl0b3IubWFya3MoZWRpdG9yKSkgIT09IG51bGwgJiYgX0VkaXRvciRtYXJrcyAhPT0gdm9pZCAwICYmIF9FZGl0b3IkbWFya3MuaW5zZXJ0TWVudSkgJiYgKCFlZGl0b3Iuc2VsZWN0aW9uIHx8ICFQYXRoLmVxdWFscyhlZGl0b3Iuc2VsZWN0aW9uLmFuY2hvci5wYXRoLCBwYXRoKSB8fCAhUGF0aC5lcXVhbHMoZWRpdG9yLnNlbGVjdGlvbi5mb2N1cy5wYXRoLCBwYXRoKSkpIHtcbiAgICBUcmFuc2Zvcm1zLnVuc2V0Tm9kZXMoZWRpdG9yLCAnaW5zZXJ0TWVudScsIHtcbiAgICAgIGF0OiBwYXRoXG4gICAgfSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gd2l0aEluc2VydE1lbnUoZWRpdG9yKSB7XG4gIGNvbnN0IHtcbiAgICBub3JtYWxpemVOb2RlLFxuICAgIGFwcGx5LFxuICAgIGluc2VydFRleHRcbiAgfSA9IGVkaXRvcjtcbiAgZWRpdG9yLm5vcm1hbGl6ZU5vZGUgPSAoW25vZGUsIHBhdGhdKSA9PiB7XG4gICAgaWYgKFRleHQkMS5pc1RleHQobm9kZSkgJiYgbm9kZS5pbnNlcnRNZW51KSB7XG4gICAgICBpZiAobm9kZS50ZXh0WzBdICE9PSAnLycpIHtcbiAgICAgICAgVHJhbnNmb3Jtcy51bnNldE5vZGVzKGVkaXRvciwgJ2luc2VydE1lbnUnLCB7XG4gICAgICAgICAgYXQ6IHBhdGhcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHdoaXRlc3BhY2VNYXRjaCA9IC9cXHMvLmV4ZWMobm9kZS50ZXh0KTtcbiAgICAgIGlmICh3aGl0ZXNwYWNlTWF0Y2gpIHtcbiAgICAgICAgVHJhbnNmb3Jtcy51bnNldE5vZGVzKGVkaXRvciwgJ2luc2VydE1lbnUnLCB7XG4gICAgICAgICAgYXQ6IHtcbiAgICAgICAgICAgIGFuY2hvcjoge1xuICAgICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgICBvZmZzZXQ6IHdoaXRlc3BhY2VNYXRjaC5pbmRleFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZvY3VzOiBFZGl0b3IuZW5kKGVkaXRvciwgcGF0aClcbiAgICAgICAgICB9LFxuICAgICAgICAgIG1hdGNoOiBUZXh0JDEuaXNUZXh0LFxuICAgICAgICAgIHNwbGl0OiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChFZGl0b3IuaXNFZGl0b3IoZWRpdG9yKSAmJiByZW1vdmVJbnNlcnRNZW51TWFya1doZW5PdXRzaWRlT2ZTZWxlY3Rpb24oZWRpdG9yKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBub3JtYWxpemVOb2RlKFtub2RlLCBwYXRoXSk7XG4gIH07XG4gIGVkaXRvci5hcHBseSA9IG9wID0+IHtcbiAgICBhcHBseShvcCk7XG4gICAgLy8gd2UncmUgY2FsbGluZyB0aGlzIGhlcmUgQU5EIGluIG5vcm1hbGl6ZU5vZGVcbiAgICAvLyBiZWNhdXNlIG5vcm1hbGl6ZU5vZGUgd29uJ3QgYmUgY2FsbGVkIG9uIHNlbGVjdGlvbiBjaGFuZ2VzXG4gICAgLy8gYnV0IGFwcGx5IHdpbGxcbiAgICAvLyB3ZSdyZSBzdGlsbCBjYWxsaW5nIHRoaXMgZnJvbSBub3JtYWxpemVOb2RlIHRob3VnaCBiZWNhdXNlIHdlIHdhbnQgaXQgdG8gaGFwcGVuXG4gICAgLy8gd2hlbiBub3JtYWxpemF0aW9uIGhhcHBlbnNcbiAgICBpZiAob3AudHlwZSA9PT0gJ3NldF9zZWxlY3Rpb24nKSB7XG4gICAgICByZW1vdmVJbnNlcnRNZW51TWFya1doZW5PdXRzaWRlT2ZTZWxlY3Rpb24oZWRpdG9yKTtcbiAgICB9XG4gIH07XG4gIGVkaXRvci5pbnNlcnRUZXh0ID0gdGV4dCA9PiB7XG4gICAgaW5zZXJ0VGV4dCh0ZXh0KTtcbiAgICBpZiAoZWRpdG9yLnNlbGVjdGlvbiAmJiB0ZXh0ID09PSAnLycpIHtcbiAgICAgIGNvbnN0IHN0YXJ0T2ZCbG9jayA9IEVkaXRvci5zdGFydChlZGl0b3IsIEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgICAgbWF0Y2g6IGlzQmxvY2tcbiAgICAgIH0pWzFdKTtcbiAgICAgIGNvbnN0IGJlZm9yZSA9IEVkaXRvci5iZWZvcmUoZWRpdG9yLCBlZGl0b3Iuc2VsZWN0aW9uLmFuY2hvciwge1xuICAgICAgICB1bml0OiAnY2hhcmFjdGVyJ1xuICAgICAgfSk7XG4gICAgICBpZiAoYmVmb3JlICYmIChQb2ludC5lcXVhbHMoc3RhcnRPZkJsb2NrLCBiZWZvcmUpIHx8IGJlZm9yZS5vZmZzZXQgIT09IDAgJiYgL1xccy8udGVzdChOb2RlLmdldChlZGl0b3IsIGJlZm9yZS5wYXRoKS50ZXh0W2JlZm9yZS5vZmZzZXQgLSAxXSkpKSB7XG4gICAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgaW5zZXJ0TWVudTogdHJ1ZVxuICAgICAgICB9LCB7XG4gICAgICAgICAgYXQ6IHtcbiAgICAgICAgICAgIGFuY2hvcjogYmVmb3JlLFxuICAgICAgICAgICAgZm9jdXM6IGVkaXRvci5zZWxlY3Rpb24uYW5jaG9yXG4gICAgICAgICAgfSxcbiAgICAgICAgICBtYXRjaDogVGV4dCQxLmlzVGV4dCxcbiAgICAgICAgICBzcGxpdDogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIHJldHVybiBlZGl0b3I7XG59XG5cbmZ1bmN0aW9uIFBsYWNlaG9sZGVyKHtcbiAgcGxhY2Vob2xkZXIsXG4gIGNoaWxkcmVuXG59KSB7XG4gIGNvbnN0IFt3aWR0aCwgc2V0V2lkdGhdID0gdXNlU3RhdGUoMCk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhcInNwYW5cIiwge1xuICAgIGNsYXNzTmFtZTogY3NzKHtcbiAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG4gICAgICB3aWR0aFxuICAgIH0pLFxuICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChcInNwYW5cIiwge1xuICAgICAgY29udGVudEVkaXRhYmxlOiBmYWxzZSxcbiAgICAgIGNsYXNzTmFtZTogY3NzKHtcbiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgIHBvaW50ZXJFdmVudHM6ICdub25lJyxcbiAgICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG4gICAgICAgIGxlZnQ6IDAsXG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgbWF4V2lkdGg6ICcxMDAlJyxcbiAgICAgICAgd2hpdGVTcGFjZTogJ25vd3JhcCcsXG4gICAgICAgIG9wYWNpdHk6ICcwLjUnLFxuICAgICAgICB1c2VyU2VsZWN0OiAnbm9uZScsXG4gICAgICAgIGZvbnRTdHlsZTogJ25vcm1hbCcsXG4gICAgICAgIGZvbnRXZWlnaHQ6ICdub3JtYWwnLFxuICAgICAgICB0ZXh0RGVjb3JhdGlvbjogJ25vbmUnLFxuICAgICAgICB0ZXh0QWxpZ246ICdsZWZ0J1xuICAgICAgfSksXG4gICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChcInNwYW5cIiwge1xuICAgICAgICByZWY6IG5vZGUgPT4ge1xuICAgICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXRXaWR0aCA9IG5vZGUub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICBpZiAob2Zmc2V0V2lkdGggIT09IHdpZHRoKSB7XG4gICAgICAgICAgICAgIHNldFdpZHRoKG9mZnNldFdpZHRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGNoaWxkcmVuOiBwbGFjZWhvbGRlclxuICAgICAgfSlcbiAgICB9KSwgY2hpbGRyZW5dXG4gIH0pO1xufVxuY29uc3QgTGVhZiA9ICh7XG4gIGxlYWYsXG4gIHRleHQsXG4gIGNoaWxkcmVuLFxuICBhdHRyaWJ1dGVzXG59KSA9PiB7XG4gIGNvbnN0IHtcbiAgICB1bmRlcmxpbmUsXG4gICAgc3RyaWtldGhyb3VnaCxcbiAgICBib2xkLFxuICAgIGl0YWxpYyxcbiAgICBjb2RlLFxuICAgIGtleWJvYXJkLFxuICAgIHN1cGVyc2NyaXB0LFxuICAgIHN1YnNjcmlwdCxcbiAgICBwbGFjZWhvbGRlcixcbiAgICBpbnNlcnRNZW51LFxuICAgIC4uLnJlc3RcbiAgfSA9IGxlYWY7XG4gIGlmIChwbGFjZWhvbGRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgY2hpbGRyZW4gPSAvKiNfX1BVUkVfXyovanN4KFBsYWNlaG9sZGVyLCB7XG4gICAgICBwbGFjZWhvbGRlcjogcGxhY2Vob2xkZXIsXG4gICAgICBjaGlsZHJlbjogY2hpbGRyZW5cbiAgICB9KTtcbiAgfVxuICBpZiAoaW5zZXJ0TWVudSkge1xuICAgIGNoaWxkcmVuID0gLyojX19QVVJFX18qL2pzeChJbnNlcnRNZW51LCB7XG4gICAgICB0ZXh0OiB0ZXh0LFxuICAgICAgY2hpbGRyZW46IGNoaWxkcmVuXG4gICAgfSk7XG4gIH1cbiAgaWYgKGNvZGUpIHtcbiAgICBjaGlsZHJlbiA9IC8qI19fUFVSRV9fKi9qc3goXCJjb2RlXCIsIHtcbiAgICAgIGNoaWxkcmVuOiBjaGlsZHJlblxuICAgIH0pO1xuICB9XG4gIGlmIChib2xkKSB7XG4gICAgY2hpbGRyZW4gPSAvKiNfX1BVUkVfXyovanN4KFwic3Ryb25nXCIsIHtcbiAgICAgIGNoaWxkcmVuOiBjaGlsZHJlblxuICAgIH0pO1xuICB9XG4gIGlmIChzdHJpa2V0aHJvdWdoKSB7XG4gICAgY2hpbGRyZW4gPSAvKiNfX1BVUkVfXyovanN4KFwic1wiLCB7XG4gICAgICBjaGlsZHJlbjogY2hpbGRyZW5cbiAgICB9KTtcbiAgfVxuICBpZiAoaXRhbGljKSB7XG4gICAgY2hpbGRyZW4gPSAvKiNfX1BVUkVfXyovanN4KFwiZW1cIiwge1xuICAgICAgY2hpbGRyZW46IGNoaWxkcmVuXG4gICAgfSk7XG4gIH1cbiAgaWYgKGtleWJvYXJkKSB7XG4gICAgY2hpbGRyZW4gPSAvKiNfX1BVUkVfXyovanN4KFwia2JkXCIsIHtcbiAgICAgIGNoaWxkcmVuOiBjaGlsZHJlblxuICAgIH0pO1xuICB9XG4gIGlmIChzdXBlcnNjcmlwdCkge1xuICAgIGNoaWxkcmVuID0gLyojX19QVVJFX18qL2pzeChcInN1cFwiLCB7XG4gICAgICBjaGlsZHJlbjogY2hpbGRyZW5cbiAgICB9KTtcbiAgfVxuICBpZiAoc3Vic2NyaXB0KSB7XG4gICAgY2hpbGRyZW4gPSAvKiNfX1BVUkVfXyovanN4KFwic3ViXCIsIHtcbiAgICAgIGNoaWxkcmVuOiBjaGlsZHJlblxuICAgIH0pO1xuICB9XG4gIGlmICh1bmRlcmxpbmUpIHtcbiAgICBjaGlsZHJlbiA9IC8qI19fUFVSRV9fKi9qc3goXCJ1XCIsIHtcbiAgICAgIGNoaWxkcmVuOiBjaGlsZHJlblxuICAgIH0pO1xuICB9XG4gIGNvbnN0IHByaXNtQ2xhc3NOYW1lcyA9IE9iamVjdC5rZXlzKHJlc3QpLmZpbHRlcih4ID0+IHguc3RhcnRzV2l0aCgncHJpc21fJykpLm1hcCh4ID0+IHN0eWxlcyQxLmdldCh4LnJlcGxhY2UoJ3ByaXNtXycsICcnKSkpO1xuICBpZiAocHJpc21DbGFzc05hbWVzLmxlbmd0aCkge1xuICAgIGNvbnN0IGNsYXNzTmFtZSA9IHByaXNtQ2xhc3NOYW1lcy5qb2luKCcgJyk7XG4gICAgY2hpbGRyZW4gPSAvKiNfX1BVUkVfXyovanN4KFwic3BhblwiLCB7XG4gICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcbiAgICAgIGNoaWxkcmVuOiBjaGlsZHJlblxuICAgIH0pO1xuICB9XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFwic3BhblwiLCB7XG4gICAgLi4uYXR0cmlidXRlcyxcbiAgICBjaGlsZHJlbjogY2hpbGRyZW5cbiAgfSk7XG59O1xuY29uc3QgcmVuZGVyTGVhZiA9IHByb3BzID0+IHtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goTGVhZiwge1xuICAgIC4uLnByb3BzXG4gIH0pO1xufTtcbmNvbnN0IHN0eWxlcyQxID0gbmV3IE1hcChbe1xuICB0eXBlczogWydjb21tZW50JywgJ3Byb2xvZycsICdkb2N0eXBlJywgJ2NkYXRhJ10sXG4gIHN0eWxlOiB7XG4gICAgY29sb3I6IHRva2VuU2NoZW1hLmNvbG9yLmZvcmVncm91bmQubmV1dHJhbFRlcnRpYXJ5LFxuICAgIGZvbnRTdHlsZTogJ2l0YWxpYydcbiAgfVxufSwge1xuICB0eXBlczogWydhdHJ1bGUnLCAnYXR0ci1uYW1lJywgJ2NsYXNzLW5hbWUnLCAnc2VsZWN0b3InXSxcbiAgc3R5bGU6IHtcbiAgICBjb2xvcjogdG9rZW5TY2hlbWEuY29sb3Iuc2NhbGUuYW1iZXIxMVxuICB9XG59LCB7XG4gIHR5cGVzOiBbJ2Jvb2xlYW4nLCAnY29uc3RhbnQnLCAnaW5zZXJ0ZWQtc2lnbicsICdlbnRpdHknLCAnaW5zZXJ0ZWQnLCAnbnVtYmVyJywgJ3JlZ2V4JywgJ3N5bWJvbCcsICd2YXJpYWJsZSddLFxuICBzdHlsZToge1xuICAgIGNvbG9yOiB0b2tlblNjaGVtYS5jb2xvci5zY2FsZS5ncmVlbjExXG4gIH1cbn0sIHtcbiAgdHlwZXM6IFsnYXR0ci12YWx1ZScsICdidWlsdGluJywgJ2NoYXInLCAnY29uc3RhbnQnLCAnZ2VuZXJpY3MnLCAndXJsJ10sXG4gIHN0eWxlOiB7XG4gICAgY29sb3I6IHRva2VuU2NoZW1hLmNvbG9yLnNjYWxlLnBpbmsxMVxuICB9XG59LCB7XG4gIHR5cGVzOiBbJ3N0cmluZyddLFxuICBzdHlsZToge1xuICAgIGNvbG9yOiB0b2tlblNjaGVtYS5jb2xvci5zY2FsZS5pbmRpZ285XG4gIH1cbn0sIHtcbiAgdHlwZXM6IFsnYW5ub3RhdGlvbicsICdkZWxldGVkJywgJ2RlbGV0ZWQtc2lnbicsICdkZWNvcmF0b3InLCAnaW1wb3J0YW50JywgJ3RhZyddLFxuICBzdHlsZToge1xuICAgIGNvbG9yOiB0b2tlblNjaGVtYS5jb2xvci5zY2FsZS5yZWQxMVxuICB9XG59LCB7XG4gIHR5cGVzOiBbJ2Z1bmN0aW9uJywgJ2Z1bmN0aW9uLXZhcmlhYmxlJywgJ29wZXJhdG9yJ10sXG4gIHN0eWxlOiB7XG4gICAgY29sb3I6IHRva2VuU2NoZW1hLmNvbG9yLnNjYWxlLnB1cnBsZTExXG4gIH1cbn0sIHtcbiAgdHlwZXM6IFsndGFnJywgJ3NlbGVjdG9yJywgJ2tleXdvcmQnXSxcbiAgc3R5bGU6IHtcbiAgICBjb2xvcjogdG9rZW5TY2hlbWEuY29sb3Iuc2NhbGUuaW5kaWdvMTFcbiAgfVxufSwge1xuICB0eXBlczogWydwdW5jdHVhdGlvbiddLFxuICBzdHlsZToge1xuICAgIGNvbG9yOiB0b2tlblNjaGVtYS5jb2xvci5mb3JlZ3JvdW5kLm5ldXRyYWxTZWNvbmRhcnlcbiAgfVxufV0uZmxhdE1hcChzdHlsZSA9PiB7XG4gIGNvbnN0IGNsYXNzTmFtZSA9IGNzcyhzdHlsZS5zdHlsZSk7XG4gIHJldHVybiBzdHlsZS50eXBlcy5tYXAoeCA9PiBbeCwgY2xhc3NOYW1lXSk7XG59KSk7XG5cbmNvbnN0IGNvZGVCbG9ja1Nob3J0Y3V0UGF0dGVybiA9IC9eYGBgKFxcdyspPyA/JC87XG5mdW5jdGlvbiB3aXRoQ29kZUJsb2NrKGRvY3VtZW50RmVhdHVyZXMsIGNvbXBvbmVudEJsb2NrcywgZWRpdG9yKSB7XG4gIGNvbnN0IHtcbiAgICBpbnNlcnRCcmVhayxcbiAgICBub3JtYWxpemVOb2RlLFxuICAgIGluc2VydFRleHRcbiAgfSA9IGVkaXRvcjtcbiAgZnVuY3Rpb24gY29kZUJsb2NrU2hvcnRjdXQoYmxvY2spIHtcbiAgICB2YXIgX2FsaWFzZXNUb0Nhbm9uaWNhbE5hO1xuICAgIGlmICgoYmxvY2sgPT09IG51bGwgfHwgYmxvY2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJsb2NrWzBdLnR5cGUpICE9PSAncGFyYWdyYXBoJyB8fCBibG9ja1swXS5jaGlsZHJlbi5sZW5ndGggIT09IDEgfHwgYmxvY2tbMF0uY2hpbGRyZW5bMF0udHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IG1hdGNoID0gY29kZUJsb2NrU2hvcnRjdXRQYXR0ZXJuLmV4ZWMoYmxvY2tbMF0uY2hpbGRyZW5bMF0udGV4dCk7XG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBsb2NhdGlvbkRvY3VtZW50RmVhdHVyZXMgPSBnZXRBbmNlc3RvckNvbXBvbmVudENoaWxkRmllbGREb2N1bWVudEZlYXR1cmVzKGVkaXRvciwgZG9jdW1lbnRGZWF0dXJlcywgY29tcG9uZW50QmxvY2tzKTtcbiAgICBpZiAobG9jYXRpb25Eb2N1bWVudEZlYXR1cmVzICYmIChsb2NhdGlvbkRvY3VtZW50RmVhdHVyZXMua2luZCA9PT0gJ2lubGluZScgfHwgIWxvY2F0aW9uRG9jdW1lbnRGZWF0dXJlcy5kb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuYmxvY2tUeXBlcy5jb2RlKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIHNvIHRoYXQgdGhpcyBzdGFydHMgYSBuZXcgdW5kbyBncm91cFxuICAgIGVkaXRvci5oaXN0b3J5LnVuZG9zLnB1c2goe1xuICAgICAgb3BlcmF0aW9uczogW10sXG4gICAgICBzZWxlY3Rpb25CZWZvcmU6IGVkaXRvci5zZWxlY3Rpb25cbiAgICB9KTtcbiAgICBUcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIGJsb2NrWzFdKTtcbiAgICBUcmFuc2Zvcm1zLmRlbGV0ZShlZGl0b3IpO1xuICAgIFRyYW5zZm9ybXMud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgdHlwZTogJ2NvZGUnLFxuICAgICAgLi4uKG1hdGNoWzFdID8ge1xuICAgICAgICBsYW5ndWFnZTogKF9hbGlhc2VzVG9DYW5vbmljYWxOYSA9IGFsaWFzZXNUb0Nhbm9uaWNhbE5hbWUuZ2V0KG1hdGNoWzFdLnRvTG93ZXJDYXNlKCkpKSAhPT0gbnVsbCAmJiBfYWxpYXNlc1RvQ2Fub25pY2FsTmEgIT09IHZvaWQgMCA/IF9hbGlhc2VzVG9DYW5vbmljYWxOYSA6IG1hdGNoWzFdXG4gICAgICB9IDoge30pLFxuICAgICAgY2hpbGRyZW46IFtdXG4gICAgfSwge1xuICAgICAgbWF0Y2g6IG5vZGUgPT4gbm9kZS50eXBlID09PSAncGFyYWdyYXBoJ1xuICAgIH0pO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGVkaXRvci5pbnNlcnRCcmVhayA9ICgpID0+IHtcbiAgICBjb25zdCBibG9jayA9IEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgIG1hdGNoOiBpc0Jsb2NrXG4gICAgfSk7XG4gICAgaWYgKChibG9jayA9PT0gbnVsbCB8fCBibG9jayA9PT0gdm9pZCAwID8gdm9pZCAwIDogYmxvY2tbMF0udHlwZSkgPT09ICdjb2RlJyAmJiBUZXh0JDEuaXNUZXh0KGJsb2NrWzBdLmNoaWxkcmVuWzBdKSkge1xuICAgICAgY29uc3QgdGV4dCA9IGJsb2NrWzBdLmNoaWxkcmVuWzBdLnRleHQ7XG4gICAgICBpZiAodGV4dFt0ZXh0Lmxlbmd0aCAtIDFdID09PSAnXFxuJyAmJiBlZGl0b3Iuc2VsZWN0aW9uICYmIFJhbmdlLmlzQ29sbGFwc2VkKGVkaXRvci5zZWxlY3Rpb24pICYmIFBvaW50LmVxdWFscyhFZGl0b3IuZW5kKGVkaXRvciwgYmxvY2tbMV0pLCBlZGl0b3Iuc2VsZWN0aW9uLmFuY2hvcikpIHtcbiAgICAgICAgaW5zZXJ0QnJlYWsoKTtcbiAgICAgICAgVHJhbnNmb3Jtcy5zZXROb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICB0eXBlOiAncGFyYWdyYXBoJyxcbiAgICAgICAgICBjaGlsZHJlbjogW11cbiAgICAgICAgfSk7XG4gICAgICAgIFRyYW5zZm9ybXMuZGVsZXRlKGVkaXRvciwge1xuICAgICAgICAgIGRpc3RhbmNlOiAxLFxuICAgICAgICAgIGF0OiB7XG4gICAgICAgICAgICBwYXRoOiBbLi4uYmxvY2tbMV0sIDBdLFxuICAgICAgICAgICAgb2Zmc2V0OiB0ZXh0Lmxlbmd0aCAtIDFcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBlZGl0b3IuaW5zZXJ0VGV4dCgnXFxuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChlZGl0b3Iuc2VsZWN0aW9uICYmIFJhbmdlLmlzQ29sbGFwc2VkKGVkaXRvci5zZWxlY3Rpb24pICYmIGNvZGVCbG9ja1Nob3J0Y3V0KGJsb2NrKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpbnNlcnRCcmVhaygpO1xuICB9O1xuICBlZGl0b3IuaW5zZXJ0VGV4dCA9IHRleHQgPT4ge1xuICAgIGluc2VydFRleHQodGV4dCk7XG4gICAgaWYgKHRleHQgPT09ICcgJyAmJiBlZGl0b3Iuc2VsZWN0aW9uICYmIFJhbmdlLmlzQ29sbGFwc2VkKGVkaXRvci5zZWxlY3Rpb24pKSB7XG4gICAgICBjb2RlQmxvY2tTaG9ydGN1dChFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgICAgIG1hdGNoOiBpc0Jsb2NrXG4gICAgICB9KSk7XG4gICAgfVxuICB9O1xuICBlZGl0b3Iubm9ybWFsaXplTm9kZSA9IChbbm9kZSwgcGF0aF0pID0+IHtcbiAgICBpZiAobm9kZS50eXBlID09PSAnY29kZScgJiYgRWxlbWVudCQxLmlzRWxlbWVudChub2RlKSkge1xuICAgICAgZm9yIChjb25zdCBbaW5kZXgsIGNoaWxkTm9kZV0gb2Ygbm9kZS5jaGlsZHJlbi5lbnRyaWVzKCkpIHtcbiAgICAgICAgaWYgKCFUZXh0JDEuaXNUZXh0KGNoaWxkTm9kZSkpIHtcbiAgICAgICAgICBpZiAoZWRpdG9yLmlzVm9pZChjaGlsZE5vZGUpKSB7XG4gICAgICAgICAgICBUcmFuc2Zvcm1zLnJlbW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgICBhdDogWy4uLnBhdGgsIGluZGV4XVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgIGF0OiBbLi4ucGF0aCwgaW5kZXhdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1hcmtzID0gT2JqZWN0LmtleXMoY2hpbGROb2RlKS5maWx0ZXIoeCA9PiB4ICE9PSAndGV4dCcpO1xuICAgICAgICBpZiAobWFya3MubGVuZ3RoKSB7XG4gICAgICAgICAgVHJhbnNmb3Jtcy51bnNldE5vZGVzKGVkaXRvciwgbWFya3MsIHtcbiAgICAgICAgICAgIGF0OiBbLi4ucGF0aCwgaW5kZXhdXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIG5vcm1hbGl6ZU5vZGUoW25vZGUsIHBhdGhdKTtcbiAgfTtcbiAgcmV0dXJuIGVkaXRvcjtcbn1cblxuY29uc3QgcGFyYWdyYXBoRWxlbWVudCA9ICgpID0+ICh7XG4gIHR5cGU6ICdwYXJhZ3JhcGgnLFxuICBjaGlsZHJlbjogW3tcbiAgICB0ZXh0OiAnJ1xuICB9XVxufSk7XG5mdW5jdGlvbiB3aXRoUGFyYWdyYXBocyhlZGl0b3IpIHtcbiAgY29uc3Qge1xuICAgIG5vcm1hbGl6ZU5vZGVcbiAgfSA9IGVkaXRvcjtcbiAgZWRpdG9yLm5vcm1hbGl6ZU5vZGUgPSBlbnRyeSA9PiB7XG4gICAgY29uc3QgW25vZGUsIHBhdGhdID0gZW50cnk7XG4gICAgaWYgKEVkaXRvci5pc0VkaXRvcihub2RlKSkge1xuICAgICAgbGV0IGxhc3ROb2RlID0gbm9kZS5jaGlsZHJlbltub2RlLmNoaWxkcmVuLmxlbmd0aCAtIDFdO1xuICAgICAgaWYgKChsYXN0Tm9kZSA9PT0gbnVsbCB8fCBsYXN0Tm9kZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogbGFzdE5vZGUudHlwZSkgIT09ICdwYXJhZ3JhcGgnKSB7XG4gICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCBwYXJhZ3JhcGhFbGVtZW50KCksIHtcbiAgICAgICAgICBhdDogWy4uLnBhdGgsIG5vZGUuY2hpbGRyZW4ubGVuZ3RoXVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBub3JtYWxpemVOb2RlKGVudHJ5KTtcbiAgfTtcbiAgcmV0dXJuIGVkaXRvcjtcbn1cblxuZnVuY3Rpb24gd2l0aExheW91dHMoZWRpdG9yKSB7XG4gIGNvbnN0IHtcbiAgICBub3JtYWxpemVOb2RlLFxuICAgIGRlbGV0ZUJhY2t3YXJkXG4gIH0gPSBlZGl0b3I7XG4gIGVkaXRvci5kZWxldGVCYWNrd2FyZCA9IHVuaXQgPT4ge1xuICAgIGlmIChlZGl0b3Iuc2VsZWN0aW9uICYmIFJhbmdlLmlzQ29sbGFwc2VkKGVkaXRvci5zZWxlY3Rpb24pICYmXG4gICAgLy8gdGhpcyBpcyBqdXN0IGFuIGxpdHRsZSBvcHRpbWlzYXRpb25cbiAgICAvLyB3ZSdyZSBvbmx5IGRvaW5nIHRoaW5ncyBpZiB3ZSdyZSBhdCB0aGUgc3RhcnQgb2YgYSBsYXlvdXQgYXJlYVxuICAgIC8vIGFuZCB0aGUgc3RhcnQgb2YgYW55dGhpbmcgd2lsbCBhbHdheXMgYmUgb2Zmc2V0IDBcbiAgICAvLyBzbyB3ZSdsbCBiYWlsb3V0IGlmIHdlJ3JlIG5vdCBhdCBvZmZzZXQgMFxuICAgIGVkaXRvci5zZWxlY3Rpb24uYW5jaG9yLm9mZnNldCA9PT0gMCkge1xuICAgICAgY29uc3QgW2Fib3ZlTm9kZSwgYWJvdmVQYXRoXSA9IEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgICAgbWF0Y2g6IG5vZGUgPT4gbm9kZS50eXBlID09PSAnbGF5b3V0LWFyZWEnXG4gICAgICB9KSB8fCBbZWRpdG9yLCBbXV07XG4gICAgICBpZiAoYWJvdmVOb2RlLnR5cGUgPT09ICdsYXlvdXQtYXJlYScgJiYgUG9pbnQuZXF1YWxzKEVkaXRvci5zdGFydChlZGl0b3IsIGFib3ZlUGF0aCksIGVkaXRvci5zZWxlY3Rpb24uYW5jaG9yKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIGRlbGV0ZUJhY2t3YXJkKHVuaXQpO1xuICB9O1xuICBlZGl0b3Iubm9ybWFsaXplTm9kZSA9IGVudHJ5ID0+IHtcbiAgICBjb25zdCBbbm9kZSwgcGF0aF0gPSBlbnRyeTtcbiAgICBpZiAoRWxlbWVudCQxLmlzRWxlbWVudChub2RlKSAmJiBub2RlLnR5cGUgPT09ICdsYXlvdXQnKSB7XG4gICAgICBpZiAobm9kZS5sYXlvdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBUcmFuc2Zvcm1zLnVud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgIGF0OiBwYXRoXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggPCBub2RlLmxheW91dC5sZW5ndGgpIHtcbiAgICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2RlcyhlZGl0b3IsIEFycmF5LmZyb20oe1xuICAgICAgICAgIGxlbmd0aDogbm9kZS5sYXlvdXQubGVuZ3RoIC0gbm9kZS5jaGlsZHJlbi5sZW5ndGhcbiAgICAgICAgfSkubWFwKCgpID0+ICh7XG4gICAgICAgICAgdHlwZTogJ2xheW91dC1hcmVhJyxcbiAgICAgICAgICBjaGlsZHJlbjogW3BhcmFncmFwaEVsZW1lbnQoKV1cbiAgICAgICAgfSkpLCB7XG4gICAgICAgICAgYXQ6IFsuLi5wYXRoLCBub2RlLmNoaWxkcmVuLmxlbmd0aF1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA+IG5vZGUubGF5b3V0Lmxlbmd0aCkge1xuICAgICAgICBBcnJheS5mcm9tKHtcbiAgICAgICAgICBsZW5ndGg6IG5vZGUuY2hpbGRyZW4ubGVuZ3RoIC0gbm9kZS5sYXlvdXQubGVuZ3RoXG4gICAgICAgIH0pLm1hcCgoXywgaSkgPT4gaSkucmV2ZXJzZSgpLmZvckVhY2goaSA9PiB7XG4gICAgICAgICAgY29uc3QgbGF5b3V0QXJlYVRvUmVtb3ZlUGF0aCA9IFsuLi5wYXRoLCBpICsgbm9kZS5sYXlvdXQubGVuZ3RoXTtcbiAgICAgICAgICBjb25zdCBjaGlsZCA9IG5vZGUuY2hpbGRyZW5baSArIG5vZGUubGF5b3V0Lmxlbmd0aF07XG4gICAgICAgICAgbW92ZUNoaWxkcmVuKGVkaXRvciwgbGF5b3V0QXJlYVRvUmVtb3ZlUGF0aCwgWy4uLnBhdGgsIG5vZGUubGF5b3V0Lmxlbmd0aCAtIDEsIG5vZGUuY2hpbGRyZW5bbm9kZS5sYXlvdXQubGVuZ3RoIC0gMV0uY2hpbGRyZW4ubGVuZ3RoXSwgbm9kZSA9PiBub2RlLnR5cGUgIT09ICdwYXJhZ3JhcGgnIHx8IE5vZGUuc3RyaW5nKGNoaWxkKSAhPT0gJycpO1xuICAgICAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICBhdDogbGF5b3V0QXJlYVRvUmVtb3ZlUGF0aFxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBub3JtYWxpemVOb2RlKGVudHJ5KTtcbiAgfTtcbiAgcmV0dXJuIGVkaXRvcjtcbn1cblxuY29uc3QgbWFya2Rvd25MaW5rUGF0dGVybiA9IC8oXnxcXHMpXFxbKC4rPylcXF1cXCgoXFxTKylcXCkkLztcbmZ1bmN0aW9uIHdpdGhMaW5rKGVkaXRvckRvY3VtZW50RmVhdHVyZXMsIGNvbXBvbmVudEJsb2NrcywgZWRpdG9yKSB7XG4gIGNvbnN0IHtcbiAgICBpbnNlcnRUZXh0LFxuICAgIGlzSW5saW5lLFxuICAgIG5vcm1hbGl6ZU5vZGVcbiAgfSA9IGVkaXRvcjtcbiAgZWRpdG9yLmlzSW5saW5lID0gZWxlbWVudCA9PiB7XG4gICAgcmV0dXJuIGVsZW1lbnQudHlwZSA9PT0gJ2xpbmsnID8gdHJ1ZSA6IGlzSW5saW5lKGVsZW1lbnQpO1xuICB9O1xuICBpZiAoZWRpdG9yRG9jdW1lbnRGZWF0dXJlcy5saW5rcykge1xuICAgIGVkaXRvci5pbnNlcnRUZXh0ID0gdGV4dCA9PiB7XG4gICAgICBpbnNlcnRUZXh0KHRleHQpO1xuICAgICAgaWYgKHRleHQgIT09ICcpJyB8fCAhZWRpdG9yLnNlbGVjdGlvbikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBzdGFydE9mQmxvY2sgPSBFZGl0b3Iuc3RhcnQoZWRpdG9yLCBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgICAgIG1hdGNoOiBpc0Jsb2NrXG4gICAgICB9KVsxXSk7XG4gICAgICBjb25zdCBzdGFydE9mQmxvY2tUb0VuZE9mU2hvcnRjdXRTdHJpbmcgPSBFZGl0b3Iuc3RyaW5nKGVkaXRvciwge1xuICAgICAgICBhbmNob3I6IGVkaXRvci5zZWxlY3Rpb24uYW5jaG9yLFxuICAgICAgICBmb2N1czogc3RhcnRPZkJsb2NrXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IG1hdGNoID0gbWFya2Rvd25MaW5rUGF0dGVybi5leGVjKHN0YXJ0T2ZCbG9ja1RvRW5kT2ZTaG9ydGN1dFN0cmluZyk7XG4gICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGFuY2VzdG9yQ29tcG9uZW50Q2hpbGRGaWVsZERvY3VtZW50RmVhdHVyZXMgPSBnZXRBbmNlc3RvckNvbXBvbmVudENoaWxkRmllbGREb2N1bWVudEZlYXR1cmVzKGVkaXRvciwgZWRpdG9yRG9jdW1lbnRGZWF0dXJlcywgY29tcG9uZW50QmxvY2tzKTtcbiAgICAgIGlmICgoYW5jZXN0b3JDb21wb25lbnRDaGlsZEZpZWxkRG9jdW1lbnRGZWF0dXJlcyA9PT0gbnVsbCB8fCBhbmNlc3RvckNvbXBvbmVudENoaWxkRmllbGREb2N1bWVudEZlYXR1cmVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhbmNlc3RvckNvbXBvbmVudENoaWxkRmllbGREb2N1bWVudEZlYXR1cmVzLmRvY3VtZW50RmVhdHVyZXMubGlua3MpID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBbLCBtYXliZVdoaXRlc3BhY2UsIGxpbmtUZXh0LCBocmVmXSA9IG1hdGNoO1xuICAgICAgLy8gYnkgZG9pbmcgdGhpcywgdGhlIGluc2VydFRleHQoJyknKSBhYm92ZSB3aWxsIGhhcHBlbiBpbiBhIGRpZmZlcmVudCB1bmRvIHRoYW4gdGhlIGxpbmsgcmVwbGFjZW1lbnRcbiAgICAgIC8vIHNvIHRoYXQgbWVhbnMgdGhhdCB3aGVuIHNvbWVvbmUgZG9lcyBhbiB1bmRvIGFmdGVyIHRoaXNcbiAgICAgIC8vIGl0IHdpbGwgdW5kbyB0byB0aGUgc3RhdGUgb2YgXCJbY29udGVudF0obGluaylcIiByYXRoZXIgdGhhbiBcIltjb250ZW50XShsaW5rXCIgKG5vdGUgdGhlIG1pc3NpbmcgY2xvc2luZyBicmFja2V0KVxuICAgICAgZWRpdG9yLmhpc3RvcnkudW5kb3MucHVzaCh7XG4gICAgICAgIG9wZXJhdGlvbnM6IFtdLFxuICAgICAgICBzZWxlY3Rpb25CZWZvcmU6IGVkaXRvci5zZWxlY3Rpb25cbiAgICAgIH0pO1xuICAgICAgY29uc3Qgc3RhcnRPZlNob3J0Y3V0ID0gbWF0Y2guaW5kZXggPT09IDAgPyBzdGFydE9mQmxvY2sgOiBFZGl0b3JBZnRlckJ1dElnbm9yaW5naW5nUG9pbnRzV2l0aE5vQ29udGVudChlZGl0b3IsIHN0YXJ0T2ZCbG9jaywge1xuICAgICAgICBkaXN0YW5jZTogbWF0Y2guaW5kZXhcbiAgICAgIH0pO1xuICAgICAgY29uc3Qgc3RhcnRPZkxpbmtUZXh0ID0gRWRpdG9yQWZ0ZXJCdXRJZ25vcmluZ2luZ1BvaW50c1dpdGhOb0NvbnRlbnQoZWRpdG9yLCBzdGFydE9mU2hvcnRjdXQsIHtcbiAgICAgICAgZGlzdGFuY2U6IG1heWJlV2hpdGVzcGFjZSA9PT0gJycgPyAxIDogMlxuICAgICAgfSk7XG4gICAgICBjb25zdCBlbmRPZkxpbmtUZXh0ID0gRWRpdG9yQWZ0ZXJCdXRJZ25vcmluZ2luZ1BvaW50c1dpdGhOb0NvbnRlbnQoZWRpdG9yLCBzdGFydE9mTGlua1RleHQsIHtcbiAgICAgICAgZGlzdGFuY2U6IGxpbmtUZXh0Lmxlbmd0aFxuICAgICAgfSk7XG4gICAgICBUcmFuc2Zvcm1zLmRlbGV0ZShlZGl0b3IsIHtcbiAgICAgICAgYXQ6IHtcbiAgICAgICAgICBhbmNob3I6IGVuZE9mTGlua1RleHQsXG4gICAgICAgICAgZm9jdXM6IGVkaXRvci5zZWxlY3Rpb24uYW5jaG9yXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgVHJhbnNmb3Jtcy5kZWxldGUoZWRpdG9yLCB7XG4gICAgICAgIGF0OiB7XG4gICAgICAgICAgYW5jaG9yOiBzdGFydE9mU2hvcnRjdXQsXG4gICAgICAgICAgZm9jdXM6IHN0YXJ0T2ZMaW5rVGV4dFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFRyYW5zZm9ybXMud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgICB0eXBlOiAnbGluaycsXG4gICAgICAgIGhyZWYsXG4gICAgICAgIGNoaWxkcmVuOiBbXVxuICAgICAgfSwge1xuICAgICAgICBhdDoge1xuICAgICAgICAgIGFuY2hvcjogZWRpdG9yLnNlbGVjdGlvbi5hbmNob3IsXG4gICAgICAgICAgZm9jdXM6IHN0YXJ0T2ZTaG9ydGN1dFxuICAgICAgICB9LFxuICAgICAgICBzcGxpdDogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBjb25zdCBuZXh0Tm9kZSA9IEVkaXRvci5uZXh0KGVkaXRvcik7XG4gICAgICBpZiAobmV4dE5vZGUpIHtcbiAgICAgICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCBuZXh0Tm9kZVsxXSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBlZGl0b3Iubm9ybWFsaXplTm9kZSA9IChbbm9kZSwgcGF0aF0pID0+IHtcbiAgICBpZiAobm9kZS50eXBlID09PSAnbGluaycpIHtcbiAgICAgIGlmIChOb2RlLnN0cmluZyhub2RlKSA9PT0gJycpIHtcbiAgICAgICAgVHJhbnNmb3Jtcy51bndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICBhdDogcGF0aFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBbaWR4LCBjaGlsZF0gb2Ygbm9kZS5jaGlsZHJlbi5lbnRyaWVzKCkpIHtcbiAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09ICdsaW5rJykge1xuICAgICAgICAgIC8vIGxpbmtzIGNhbm5vdCBjb250YWluIGxpbmtzXG4gICAgICAgICAgVHJhbnNmb3Jtcy51bndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgIGF0OiBbLi4ucGF0aCwgaWR4XVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNJbmxpbmVDb250YWluZXIobm9kZSkpIHtcbiAgICAgIGxldCBsYXN0TWVyZ2FibGVMaW5rID0gbnVsbDtcbiAgICAgIGZvciAoY29uc3QgW2lkeCwgY2hpbGRdIG9mIG5vZGUuY2hpbGRyZW4uZW50cmllcygpKSB7XG4gICAgICAgIHZhciBfbGFzdE1lcmdhYmxlTGluaztcbiAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09ICdsaW5rJyAmJiBjaGlsZC5ocmVmID09PSAoKF9sYXN0TWVyZ2FibGVMaW5rID0gbGFzdE1lcmdhYmxlTGluaykgPT09IG51bGwgfHwgX2xhc3RNZXJnYWJsZUxpbmsgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9sYXN0TWVyZ2FibGVMaW5rLm5vZGUuaHJlZikpIHtcbiAgICAgICAgICBjb25zdCBmaXJzdExpbmtQYXRoID0gWy4uLnBhdGgsIGxhc3RNZXJnYWJsZUxpbmsuaW5kZXhdO1xuICAgICAgICAgIGNvbnN0IHNlY29uZExpbmtQYXRoID0gWy4uLnBhdGgsIGlkeF07XG4gICAgICAgICAgY29uc3QgdG8gPSBbLi4uZmlyc3RMaW5rUGF0aCwgbGFzdE1lcmdhYmxlTGluay5ub2RlLmNoaWxkcmVuLmxlbmd0aF07XG4gICAgICAgICAgLy8gbm90ZSB0aGlzIGlzIGdvaW5nIGluIHJldmVyc2UsIGpzIGRvZXNuJ3QgaGF2ZSBkb3VibGUtZW5kZWQgaXRlcmF0b3JzIHNvIGl0J3MgYSBmb3IoOzspXG4gICAgICAgICAgZm9yIChsZXQgaSA9IGNoaWxkLmNoaWxkcmVuLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZFBhdGggPSBbLi4uc2Vjb25kTGlua1BhdGgsIGldO1xuICAgICAgICAgICAgVHJhbnNmb3Jtcy5tb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgIGF0OiBjaGlsZFBhdGgsXG4gICAgICAgICAgICAgIHRvXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgVHJhbnNmb3Jtcy5yZW1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgIGF0OiBzZWNvbmRMaW5rUGF0aFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIVRleHQkMS5pc1RleHQoY2hpbGQpIHx8IGNoaWxkLnRleHQgIT09ICcnKSB7XG4gICAgICAgICAgbGFzdE1lcmdhYmxlTGluayA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09ICdsaW5rJykge1xuICAgICAgICAgIGxhc3RNZXJnYWJsZUxpbmsgPSB7XG4gICAgICAgICAgICBpbmRleDogaWR4LFxuICAgICAgICAgICAgbm9kZTogY2hpbGRcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIG5vcm1hbGl6ZU5vZGUoW25vZGUsIHBhdGhdKTtcbiAgfTtcbiAgcmV0dXJuIGVkaXRvcjtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRG9jdW1lbnRFZGl0b3JGb3JOb3JtYWxpemF0aW9uKGRvY3VtZW50RmVhdHVyZXMsIGNvbXBvbmVudEJsb2Nrcykge1xuICByZXR1cm4gX2NyZWF0ZURvY3VtZW50RWRpdG9yKGNyZWF0ZUVkaXRvcigpLCBkb2N1bWVudEZlYXR1cmVzLCBjb21wb25lbnRCbG9ja3MpO1xufVxuZnVuY3Rpb24gX2NyZWF0ZURvY3VtZW50RWRpdG9yKGJhc2VFZGl0b3IsIGRvY3VtZW50RmVhdHVyZXMsIGNvbXBvbmVudEJsb2Nrcykge1xuICByZXR1cm4gd2l0aEJsb2Nrc1NjaGVtYSh3aXRoUGFyYWdyYXBocyh3aXRoTGluayhkb2N1bWVudEZlYXR1cmVzLCBjb21wb25lbnRCbG9ja3MsIHdpdGhMaXN0KHdpdGhUYWJsZSh3aXRoQ29tcG9uZW50QmxvY2tzKGNvbXBvbmVudEJsb2NrcywgZG9jdW1lbnRGZWF0dXJlcywgd2l0aFZvaWRFbGVtZW50cyh3aXRoTGF5b3V0cyh3aXRoQ29kZUJsb2NrKGRvY3VtZW50RmVhdHVyZXMsIGNvbXBvbmVudEJsb2Nrcywgd2l0aERvY3VtZW50RmVhdHVyZXNOb3JtYWxpemF0aW9uKGRvY3VtZW50RmVhdHVyZXMsIGJhc2VFZGl0b3IpKSkpKSkpKSkpO1xufVxuZnVuY3Rpb24gd2l0aEJsb2Nrc1NjaGVtYShlZGl0b3IpIHtcbiAgY29uc3Qge1xuICAgIG5vcm1hbGl6ZU5vZGVcbiAgfSA9IGVkaXRvcjtcbiAgZWRpdG9yLm5vcm1hbGl6ZU5vZGUgPSAoW25vZGUsIHBhdGhdKSA9PiB7XG4gICAgaWYgKCFUZXh0JDEuaXNUZXh0KG5vZGUpICYmIG5vZGUudHlwZSAhPT0gJ2xpbmsnKSB7XG4gICAgICBjb25zdCBub2RlVHlwZSA9IEVkaXRvci5pc0VkaXRvcihub2RlKSA/ICdlZGl0b3InIDogbm9kZS50eXBlO1xuICAgICAgaWYgKHR5cGVvZiBub2RlVHlwZSAhPT0gJ3N0cmluZycgfHwgZWRpdG9yU2NoZW1hW25vZGVUeXBlXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIFRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgYXQ6IHBhdGhcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGluZm8gPSBlZGl0b3JTY2hlbWFbbm9kZVR5cGVdO1xuICAgICAgaWYgKGluZm8ua2luZCA9PT0gJ2Jsb2NrcycgJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGggIT09IDAgJiYgbm9kZS5jaGlsZHJlbi5ldmVyeShjaGlsZCA9PiAhaXNCbG9jayhjaGlsZCkpKSB7XG4gICAgICAgIFRyYW5zZm9ybXMud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgIHR5cGU6IGluZm8uYmxvY2tUb1dyYXBJbmxpbmVzSW4sXG4gICAgICAgICAgY2hpbGRyZW46IFtdXG4gICAgICAgIH0sIHtcbiAgICAgICAgICBhdDogcGF0aCxcbiAgICAgICAgICBtYXRjaDogbm9kZSA9PiAhaXNCbG9jayhub2RlKVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgbGV0IGRpZFVwZGF0ZSA9IGZhbHNlO1xuICAgICAgZm9yIChjb25zdCBbaW5kZXgsIGNoaWxkTm9kZV0gb2YgWy4uLm5vZGUuY2hpbGRyZW4uZW50cmllcygpXS5yZXZlcnNlKCkpIHtcbiAgICAgICAgY29uc3QgY2hpbGRQYXRoID0gWy4uLnBhdGgsIGluZGV4XTtcbiAgICAgICAgaWYgKGluZm8ua2luZCA9PT0gJ2lubGluZXMnKSB7XG4gICAgICAgICAgaWYgKCFUZXh0JDEuaXNUZXh0KGNoaWxkTm9kZSkgJiYgaXNCbG9jayhjaGlsZE5vZGUpKSB7XG4gICAgICAgICAgICBoYW5kbGVOb2RlSW5JbnZhbGlkUG9zaXRpb24oZWRpdG9yLCBbY2hpbGROb2RlLCBjaGlsZFBhdGhdLCBwYXRoKTtcbiAgICAgICAgICAgIGRpZFVwZGF0ZSA9IHRydWU7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCFpc0Jsb2NrKGNoaWxkTm9kZSkpIHtcbiAgICAgICAgICAgIFRyYW5zZm9ybXMud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgICB0eXBlOiBpbmZvLmJsb2NrVG9XcmFwSW5saW5lc0luLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogW11cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgYXQ6IGNoaWxkUGF0aFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkaWRVcGRhdGUgPSB0cnVlO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghaW5mby5hbGxvd2VkQ2hpbGRyZW4uaGFzKGNoaWxkTm9kZS50eXBlKSkge1xuICAgICAgICAgICAgaGFuZGxlTm9kZUluSW52YWxpZFBvc2l0aW9uKGVkaXRvciwgW2NoaWxkTm9kZSwgY2hpbGRQYXRoXSwgcGF0aCk7XG4gICAgICAgICAgICBkaWRVcGRhdGUgPSB0cnVlO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZGlkVXBkYXRlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgbm9ybWFsaXplTm9kZShbbm9kZSwgcGF0aF0pO1xuICB9O1xuICByZXR1cm4gZWRpdG9yO1xufVxuZnVuY3Rpb24gaGFuZGxlTm9kZUluSW52YWxpZFBvc2l0aW9uKGVkaXRvciwgW25vZGUsIHBhdGhdLCBhbmNlc3RvclBhdGgpIHtcbiAgY29uc3Qgbm9kZVR5cGUgPSBub2RlLnR5cGU7XG4gIGNvbnN0IGNoaWxkTm9kZUluZm8gPSBlZGl0b3JTY2hlbWFbbm9kZVR5cGVdO1xuICAvLyB0aGUgcGFyZW50IG9mIGEgYmxvY2sgd2lsbCBuZXZlciBiZSBhbiBpbmxpbmUgc28gdGhpcyBjYXN0aW5nIGlzIG9rYXlcbiAgY29uc3QgYW5jZXN0b3JOb2RlID0gTm9kZS5nZXQoZWRpdG9yLCBhbmNlc3RvclBhdGgpO1xuICBjb25zdCBwYXJlbnROb2RlVHlwZSA9IEVkaXRvci5pc0VkaXRvcihhbmNlc3Rvck5vZGUpID8gJ2VkaXRvcicgOiBhbmNlc3Rvck5vZGUudHlwZTtcbiAgY29uc3QgcGFyZW50Tm9kZUluZm8gPSBlZGl0b3JTY2hlbWFbcGFyZW50Tm9kZVR5cGVdO1xuICBpZiAoIWNoaWxkTm9kZUluZm8gfHwgY2hpbGROb2RlSW5mby5pbnZhbGlkUG9zaXRpb25IYW5kbGVNb2RlID09PSAndW53cmFwJykge1xuICAgIGlmIChwYXJlbnROb2RlSW5mby5raW5kID09PSAnYmxvY2tzJyAmJiBwYXJlbnROb2RlSW5mby5ibG9ja1RvV3JhcElubGluZXNJbikge1xuICAgICAgVHJhbnNmb3Jtcy5zZXROb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgdHlwZTogcGFyZW50Tm9kZUluZm8uYmxvY2tUb1dyYXBJbmxpbmVzSW4sXG4gICAgICAgIC4uLk9iamVjdC5mcm9tRW50cmllcyhPYmplY3Qua2V5cyhub2RlKS5maWx0ZXIoa2V5ID0+IGtleSAhPT0gJ3R5cGUnICYmIGtleSAhPT0gJ2NoaWxkcmVuJykubWFwKGtleSA9PiBba2V5LCBudWxsXSkpIC8vIHRoZSBTbGF0ZSB0eXBlcyBkb24ndCB1bmRlcnN0YW5kIHRoYXQgbnVsbCBpcyBhbGxvd2VkIGFuZCBpdCB3aWxsIHVuc2V0IHByb3BlcnRpZXMgd2l0aCBzZXROb2Rlc1xuICAgICAgfSwge1xuICAgICAgICBhdDogcGF0aFxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICBhdDogcGF0aFxuICAgIH0pO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBpbmZvID0gZWRpdG9yU2NoZW1hW2FuY2VzdG9yTm9kZS50eXBlIHx8ICdlZGl0b3InXTtcbiAgaWYgKChpbmZvID09PSBudWxsIHx8IGluZm8gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGluZm8ua2luZCkgPT09ICdibG9ja3MnICYmIGluZm8uYWxsb3dlZENoaWxkcmVuLmhhcyhub2RlVHlwZSkpIHtcbiAgICBpZiAoYW5jZXN0b3JQYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgVHJhbnNmb3Jtcy5tb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgIGF0OiBwYXRoLFxuICAgICAgICB0bzogW3BhdGhbMF0gKyAxXVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIFRyYW5zZm9ybXMubW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgICBhdDogcGF0aCxcbiAgICAgICAgdG86IFBhdGgubmV4dChhbmNlc3RvclBhdGgpXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChFZGl0b3IuaXNFZGl0b3IoYW5jZXN0b3JOb2RlKSkge1xuICAgIFRyYW5zZm9ybXMubW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgYXQ6IHBhdGgsXG4gICAgICB0bzogW3BhdGhbMF0gKyAxXVxuICAgIH0pO1xuICAgIFRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICBhdDogW3BhdGhbMF0gKyAxXVxuICAgIH0pO1xuICAgIHJldHVybjtcbiAgfVxuICBoYW5kbGVOb2RlSW5JbnZhbGlkUG9zaXRpb24oZWRpdG9yLCBbbm9kZSwgcGF0aF0sIGFuY2VzdG9yUGF0aC5zbGljZSgwLCAtMSkpO1xufVxuZnVuY3Rpb24gd2l0aFZvaWRFbGVtZW50cyhlZGl0b3IpIHtcbiAgY29uc3Qge1xuICAgIGlzVm9pZFxuICB9ID0gZWRpdG9yO1xuICBlZGl0b3IuaXNWb2lkID0gbm9kZSA9PiB7XG4gICAgcmV0dXJuIG5vZGUudHlwZSA9PT0gJ2RpdmlkZXInIHx8IG5vZGUudHlwZSA9PT0gJ2ltYWdlJyB8fCBpc1ZvaWQobm9kZSk7XG4gIH07XG4gIHJldHVybiBlZGl0b3I7XG59XG5cbmZ1bmN0aW9uIHdpdGhCbG9ja01hcmtkb3duU2hvcnRjdXRzKGRvY3VtZW50RmVhdHVyZXMsIGNvbXBvbmVudEJsb2NrcywgZWRpdG9yKSB7XG4gIGNvbnN0IHtcbiAgICBpbnNlcnRUZXh0XG4gIH0gPSBlZGl0b3I7XG4gIGNvbnN0IHNob3J0Y3V0cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGNvbnN0IGVkaXRvckRvY3VtZW50RmVhdHVyZXNGb3JOb3JtYWxpemF0aW9uVG9DaGVjayA9IHtcbiAgICAuLi5kb2N1bWVudEZlYXR1cmVzXG4gIH07XG4gIGxldCBhZGRTaG9ydGN1dCA9ICh0ZXh0LCBpbnNlcnQsIHNob3VsZEJlRW5hYmxlZEluQ29tcG9uZW50QmxvY2ssIHR5cGUgPSAncGFyYWdyYXBoJykgPT4ge1xuICAgIGlmICghc2hvdWxkQmVFbmFibGVkSW5Db21wb25lbnRCbG9jayhlZGl0b3JEb2N1bWVudEZlYXR1cmVzRm9yTm9ybWFsaXphdGlvblRvQ2hlY2spKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHRyaWdnZXIgPSB0ZXh0W3RleHQubGVuZ3RoIC0gMV07XG4gICAgaWYgKCFzaG9ydGN1dHNbdHJpZ2dlcl0pIHtcbiAgICAgIHNob3J0Y3V0c1t0cmlnZ2VyXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgfVxuICAgIHNob3J0Y3V0c1t0cmlnZ2VyXVt0ZXh0XSA9IHtcbiAgICAgIGluc2VydCxcbiAgICAgIHR5cGUsXG4gICAgICBzaG91bGRCZUVuYWJsZWRJbkNvbXBvbmVudEJsb2NrXG4gICAgfTtcbiAgfTtcbiAgYWRkU2hvcnRjdXQoJzEuICcsICgpID0+IHtcbiAgICBUcmFuc2Zvcm1zLndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgIHR5cGU6ICdvcmRlcmVkLWxpc3QnLFxuICAgICAgY2hpbGRyZW46IFtdXG4gICAgfSwge1xuICAgICAgbWF0Y2g6IGlzQmxvY2tcbiAgICB9KTtcbiAgfSwgZmVhdHVyZXMgPT4gZmVhdHVyZXMuZm9ybWF0dGluZy5saXN0VHlwZXMub3JkZXJlZCk7XG4gIGFkZFNob3J0Y3V0KCctICcsICgpID0+IHtcbiAgICBUcmFuc2Zvcm1zLndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgIHR5cGU6ICd1bm9yZGVyZWQtbGlzdCcsXG4gICAgICBjaGlsZHJlbjogW11cbiAgICB9LCB7XG4gICAgICBtYXRjaDogaXNCbG9ja1xuICAgIH0pO1xuICB9LCBmZWF0dXJlcyA9PiBmZWF0dXJlcy5mb3JtYXR0aW5nLmxpc3RUeXBlcy51bm9yZGVyZWQpO1xuICBhZGRTaG9ydGN1dCgnKiAnLCAoKSA9PiB7XG4gICAgVHJhbnNmb3Jtcy53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICB0eXBlOiAndW5vcmRlcmVkLWxpc3QnLFxuICAgICAgY2hpbGRyZW46IFtdXG4gICAgfSwge1xuICAgICAgbWF0Y2g6IGlzQmxvY2tcbiAgICB9KTtcbiAgfSwgZmVhdHVyZXMgPT4gZmVhdHVyZXMuZm9ybWF0dGluZy5saXN0VHlwZXMudW5vcmRlcmVkKTtcbiAgZG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmhlYWRpbmdzLmxldmVscy5mb3JFYWNoKGxldmVsID0+IHtcbiAgICBhZGRTaG9ydGN1dCgnIycucmVwZWF0KGxldmVsKSArICcgJywgKCkgPT4ge1xuICAgICAgVHJhbnNmb3Jtcy5zZXROb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgdHlwZTogJ2hlYWRpbmcnLFxuICAgICAgICBsZXZlbFxuICAgICAgfSwge1xuICAgICAgICBtYXRjaDogbm9kZSA9PiBub2RlLnR5cGUgPT09ICdwYXJhZ3JhcGgnIHx8IG5vZGUudHlwZSA9PT0gJ2hlYWRpbmcnXG4gICAgICB9KTtcbiAgICB9LCBmZWF0dXJlcyA9PiBmZWF0dXJlcy5mb3JtYXR0aW5nLmhlYWRpbmdzLmxldmVscy5pbmNsdWRlcyhsZXZlbCksICdoZWFkaW5nLW9yLXBhcmFncmFwaCcpO1xuICB9KTtcbiAgYWRkU2hvcnRjdXQoJz4gJywgKCkgPT4ge1xuICAgIFRyYW5zZm9ybXMud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgdHlwZTogJ2Jsb2NrcXVvdGUnLFxuICAgICAgY2hpbGRyZW46IFtdXG4gICAgfSwge1xuICAgICAgbWF0Y2g6IG5vZGUgPT4gbm9kZS50eXBlID09PSAncGFyYWdyYXBoJ1xuICAgIH0pO1xuICB9LCBmZWF0dXJlcyA9PiBmZWF0dXJlcy5mb3JtYXR0aW5nLmJsb2NrVHlwZXMuYmxvY2txdW90ZSk7XG4gIGFkZFNob3J0Y3V0KCctLS0nLCAoKSA9PiB7XG4gICAgaW5zZXJ0RGl2aWRlcihlZGl0b3IpO1xuICB9LCBmZWF0dXJlcyA9PiBmZWF0dXJlcy5kaXZpZGVycyk7XG4gIGVkaXRvci5pbnNlcnRUZXh0ID0gdGV4dCA9PiB7XG4gICAgaW5zZXJ0VGV4dCh0ZXh0KTtcbiAgICBjb25zdCBzaG9ydGN1dHNGb3JUcmlnZ2VyID0gc2hvcnRjdXRzW3RleHRdO1xuICAgIGlmIChzaG9ydGN1dHNGb3JUcmlnZ2VyICYmIGVkaXRvci5zZWxlY3Rpb24gJiYgUmFuZ2UuaXNDb2xsYXBzZWQoZWRpdG9yLnNlbGVjdGlvbikpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgYW5jaG9yXG4gICAgICB9ID0gZWRpdG9yLnNlbGVjdGlvbjtcbiAgICAgIGNvbnN0IGJsb2NrID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgICAgICBtYXRjaDogaXNCbG9ja1xuICAgICAgfSk7XG4gICAgICBpZiAoIWJsb2NrIHx8IGJsb2NrWzBdLnR5cGUgIT09ICdwYXJhZ3JhcGgnICYmIGJsb2NrWzBdLnR5cGUgIT09ICdoZWFkaW5nJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBzdGFydCA9IEVkaXRvci5zdGFydChlZGl0b3IsIGJsb2NrWzFdKTtcbiAgICAgIGNvbnN0IHJhbmdlID0ge1xuICAgICAgICBhbmNob3IsXG4gICAgICAgIGZvY3VzOiBzdGFydFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHNob3J0Y3V0VGV4dCA9IEVkaXRvci5zdHJpbmcoZWRpdG9yLCByYW5nZSk7XG4gICAgICBjb25zdCBzaG9ydGN1dCA9IHNob3J0Y3V0c0ZvclRyaWdnZXJbc2hvcnRjdXRUZXh0XTtcbiAgICAgIGlmICghc2hvcnRjdXQgfHwgc2hvcnRjdXQudHlwZSA9PT0gJ3BhcmFncmFwaCcgJiYgYmxvY2tbMF0udHlwZSAhPT0gJ3BhcmFncmFwaCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgbG9jYXRpb25Eb2N1bWVudEZlYXR1cmVzID0gZ2V0QW5jZXN0b3JDb21wb25lbnRDaGlsZEZpZWxkRG9jdW1lbnRGZWF0dXJlcyhlZGl0b3IsIGRvY3VtZW50RmVhdHVyZXMsIGNvbXBvbmVudEJsb2Nrcyk7XG4gICAgICBpZiAobG9jYXRpb25Eb2N1bWVudEZlYXR1cmVzICYmIChsb2NhdGlvbkRvY3VtZW50RmVhdHVyZXMua2luZCA9PT0gJ2lubGluZScgfHwgIXNob3J0Y3V0LnNob3VsZEJlRW5hYmxlZEluQ29tcG9uZW50QmxvY2sobG9jYXRpb25Eb2N1bWVudEZlYXR1cmVzLmRvY3VtZW50RmVhdHVyZXMpKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIHNvIHRoYXQgdGhpcyBzdGFydHMgYSBuZXcgdW5kbyBncm91cFxuICAgICAgZWRpdG9yLmhpc3RvcnkudW5kb3MucHVzaCh7XG4gICAgICAgIG9wZXJhdGlvbnM6IFtdLFxuICAgICAgICBzZWxlY3Rpb25CZWZvcmU6IGVkaXRvci5zZWxlY3Rpb25cbiAgICAgIH0pO1xuICAgICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCByYW5nZSk7XG4gICAgICBUcmFuc2Zvcm1zLmRlbGV0ZShlZGl0b3IpO1xuICAgICAgc2hvcnRjdXQuaW5zZXJ0KCk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gZWRpdG9yO1xufVxuXG5mdW5jdGlvbiBnZXREaXJlY3RCbG9ja3F1b3RlUGFyZW50RnJvbVNlbGVjdGlvbihlZGl0b3IpIHtcbiAgaWYgKCFlZGl0b3Iuc2VsZWN0aW9uKSByZXR1cm4ge1xuICAgIGlzSW5zaWRlOiBmYWxzZVxuICB9O1xuICBjb25zdCBbLCBwYXJlbnRQYXRoXSA9IEVkaXRvci5wYXJlbnQoZWRpdG9yLCBlZGl0b3Iuc2VsZWN0aW9uKTtcbiAgaWYgKCFwYXJlbnRQYXRoLmxlbmd0aCkge1xuICAgIHJldHVybiB7XG4gICAgICBpc0luc2lkZTogZmFsc2VcbiAgICB9O1xuICB9XG4gIGNvbnN0IFttYXliZUJsb2NrcXVvdGVQYXJlbnQsIG1heWJlQmxvY2txdW90ZVBhcmVudFBhdGhdID0gRWRpdG9yLnBhcmVudChlZGl0b3IsIHBhcmVudFBhdGgpO1xuICBjb25zdCBpc0Jsb2NrcXVvdGUgPSBtYXliZUJsb2NrcXVvdGVQYXJlbnQudHlwZSA9PT0gJ2Jsb2NrcXVvdGUnO1xuICByZXR1cm4gaXNCbG9ja3F1b3RlID8ge1xuICAgIGlzSW5zaWRlOiB0cnVlLFxuICAgIHBhdGg6IG1heWJlQmxvY2txdW90ZVBhcmVudFBhdGhcbiAgfSA6IHtcbiAgICBpc0luc2lkZTogZmFsc2VcbiAgfTtcbn1cbmZ1bmN0aW9uIHdpdGhCbG9ja3F1b3RlKGVkaXRvcikge1xuICBjb25zdCB7XG4gICAgaW5zZXJ0QnJlYWssXG4gICAgZGVsZXRlQmFja3dhcmRcbiAgfSA9IGVkaXRvcjtcbiAgZWRpdG9yLmRlbGV0ZUJhY2t3YXJkID0gdW5pdCA9PiB7XG4gICAgaWYgKGVkaXRvci5zZWxlY3Rpb24pIHtcbiAgICAgIGNvbnN0IHBhcmVudEJsb2NrcXVvdGUgPSBnZXREaXJlY3RCbG9ja3F1b3RlUGFyZW50RnJvbVNlbGVjdGlvbihlZGl0b3IpO1xuICAgICAgaWYgKHBhcmVudEJsb2NrcXVvdGUuaXNJbnNpZGUgJiYgUmFuZ2UuaXNDb2xsYXBzZWQoZWRpdG9yLnNlbGVjdGlvbikgJiZcbiAgICAgIC8vIHRoZSBzZWxlY3Rpb24gaXMgYXQgdGhlIHN0YXJ0IG9mIHRoZSBwYXJhZ3JhcGhcbiAgICAgIGVkaXRvci5zZWxlY3Rpb24uYW5jaG9yLm9mZnNldCA9PT0gMCAmJlxuICAgICAgLy8gaXQncyB0aGUgZmlyc3QgcGFyYWdyYXBoIGluIHRoZSBwYW5lbFxuICAgICAgZWRpdG9yLnNlbGVjdGlvbi5hbmNob3IucGF0aFtlZGl0b3Iuc2VsZWN0aW9uLmFuY2hvci5wYXRoLmxlbmd0aCAtIDJdID09PSAwKSB7XG4gICAgICAgIFRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgbWF0Y2g6IG5vZGUgPT4gbm9kZS50eXBlID09PSAnYmxvY2txdW90ZScsXG4gICAgICAgICAgc3BsaXQ6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgZGVsZXRlQmFja3dhcmQodW5pdCk7XG4gIH07XG4gIGVkaXRvci5pbnNlcnRCcmVhayA9ICgpID0+IHtcbiAgICBjb25zdCBwYW5lbCA9IGdldERpcmVjdEJsb2NrcXVvdGVQYXJlbnRGcm9tU2VsZWN0aW9uKGVkaXRvcik7XG4gICAgaWYgKGVkaXRvci5zZWxlY3Rpb24gJiYgcGFuZWwuaXNJbnNpZGUpIHtcbiAgICAgIGNvbnN0IFtub2RlLCBub2RlUGF0aF0gPSBFZGl0b3Iubm9kZShlZGl0b3IsIGVkaXRvci5zZWxlY3Rpb24pO1xuICAgICAgaWYgKFBhdGguaXNEZXNjZW5kYW50KG5vZGVQYXRoLCBwYW5lbC5wYXRoKSAmJiBOb2RlLnN0cmluZyhub2RlKSA9PT0gJycpIHtcbiAgICAgICAgVHJhbnNmb3Jtcy51bndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICBtYXRjaDogbm9kZSA9PiBub2RlLnR5cGUgPT09ICdibG9ja3F1b3RlJyxcbiAgICAgICAgICBzcGxpdDogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBpbnNlcnRCcmVhaygpO1xuICB9O1xuICByZXR1cm4gZWRpdG9yO1xufVxuXG5mdW5jdGlvbiB3aXRoSGVhZGluZyhlZGl0b3IpIHtcbiAgY29uc3Qge1xuICAgIGluc2VydEJyZWFrXG4gIH0gPSBlZGl0b3I7XG4gIGVkaXRvci5pbnNlcnRCcmVhayA9ICgpID0+IHtcbiAgICBpbnNlcnRCcmVhaygpO1xuICAgIGNvbnN0IGVudHJ5ID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgICAgbWF0Y2g6IG4gPT4gbi50eXBlID09PSAnaGVhZGluZydcbiAgICB9KTtcbiAgICBpZiAoIWVudHJ5IHx8ICFlZGl0b3Iuc2VsZWN0aW9uIHx8ICFSYW5nZS5pc0NvbGxhcHNlZChlZGl0b3Iuc2VsZWN0aW9uKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBwYXRoID0gZW50cnlbMV07XG4gICAgaWYgKFxuICAgIC8vIHdlIHdhbnQgdG8gdW53cmFwIHRoZSBoZWFkaW5nIHdoZW4gdGhlIHVzZXIgaW5zZXJ0ZWQgYSBicmVhayBhdCB0aGUgZW5kIG9mIHRoZSBoZWFkaW5nXG4gICAgLy8gd2hlbiB0aGUgdXNlciBpbnNlcnRzIGEgYnJlYWsgYXQgdGhlIGVuZCBvZiBhIGhlYWRpbmcsIHRoZSBuZXcgaGVhZGluZ1xuICAgIC8vIHRoYXQgd2Ugd2FudCB0byB1bndyYXAgd2lsbCBiZSBlbXB0eSBzbyB0aGUgZW5kIHdpbGwgYmUgZXF1YWwgdG8gdGhlIHNlbGVjdGlvblxuICAgIFBvaW50LmVxdWFscyhFZGl0b3IuZW5kKGVkaXRvciwgcGF0aCksIGVkaXRvci5zZWxlY3Rpb24uYW5jaG9yKSkge1xuICAgICAgVHJhbnNmb3Jtcy51bndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgYXQ6IHBhdGhcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyB3ZSBhbHNvIHdhbnQgdG8gdW53cmFwIHRoZSBfcHJldmlvdXNfIGhlYWRpbmcgd2hlbiB0aGUgdXNlciBpbnNlcnRlZCBhIGJyZWFrXG4gICAgLy8gYXQgdGhlIHN0YXJ0IG9mIHRoZSBoZWFkaW5nLCBlc3NlbnRpYWxseSBqdXN0IGluc2VydGluZyBhbiBlbXB0eSBwYXJhZ3JhcGggYWJvdmUgdGhlIGhlYWRpbmdcbiAgICBpZiAoIVBhdGguaGFzUHJldmlvdXMocGF0aCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgcHJldmlvdXNQYXRoID0gUGF0aC5wcmV2aW91cyhwYXRoKTtcbiAgICBjb25zdCBwcmV2aW91c05vZGUgPSBOb2RlLmdldChlZGl0b3IsIHByZXZpb3VzUGF0aCk7XG4gICAgaWYgKHByZXZpb3VzTm9kZS50eXBlID09PSAnaGVhZGluZycgJiYgcHJldmlvdXNOb2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJiBUZXh0JDEuaXNUZXh0KHByZXZpb3VzTm9kZS5jaGlsZHJlblswXSkgJiYgcHJldmlvdXNOb2RlLmNoaWxkcmVuWzBdLnRleHQgPT09ICcnKSB7XG4gICAgICBUcmFuc2Zvcm1zLnVud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgICBhdDogcHJldmlvdXNQYXRoXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBlZGl0b3I7XG59XG5cbmNvbnN0IGFsbE1hcmtkb3duU2hvcnRjdXRzID0ge1xuICBib2xkOiBbJyoqJywgJ19fJ10sXG4gIGl0YWxpYzogWycqJywgJ18nXSxcbiAgc3RyaWtldGhyb3VnaDogWyd+fiddLFxuICBjb2RlOiBbJ2AnXVxufTtcbmZ1bmN0aW9uIGFwcGx5TWFyayhlZGl0b3IsIG1hcmssIHNob3J0Y3V0VGV4dCwgc3RhcnRPZlN0YXJ0UG9pbnQpIHtcbiAgLy8gc28gdGhhdCB0aGlzIHN0YXJ0cyBhIG5ldyB1bmRvIGdyb3VwXG4gIGVkaXRvci5oaXN0b3J5LnVuZG9zLnB1c2goe1xuICAgIG9wZXJhdGlvbnM6IFtdLFxuICAgIHNlbGVjdGlvbkJlZm9yZTogZWRpdG9yLnNlbGVjdGlvblxuICB9KTtcbiAgY29uc3Qgc3RhcnRQb2ludFJlZiA9IEVkaXRvci5wb2ludFJlZihlZGl0b3IsIHN0YXJ0T2ZTdGFydFBvaW50KTtcbiAgVHJhbnNmb3Jtcy5kZWxldGUoZWRpdG9yLCB7XG4gICAgYXQ6IGVkaXRvci5zZWxlY3Rpb24uYW5jaG9yLFxuICAgIGRpc3RhbmNlOiBzaG9ydGN1dFRleHQubGVuZ3RoLFxuICAgIHJldmVyc2U6IHRydWVcbiAgfSk7XG4gIFRyYW5zZm9ybXMuZGVsZXRlKGVkaXRvciwge1xuICAgIGF0OiBzdGFydE9mU3RhcnRQb2ludCxcbiAgICBkaXN0YW5jZTogc2hvcnRjdXRUZXh0Lmxlbmd0aFxuICB9KTtcbiAgVHJhbnNmb3Jtcy5zZXROb2RlcyhlZGl0b3IsIHtcbiAgICBbbWFya106IHRydWVcbiAgfSwge1xuICAgIG1hdGNoOiBUZXh0JDEuaXNUZXh0LFxuICAgIHNwbGl0OiB0cnVlLFxuICAgIGF0OiB7XG4gICAgICBhbmNob3I6IHN0YXJ0UG9pbnRSZWYudW5yZWYoKSxcbiAgICAgIGZvY3VzOiBlZGl0b3Iuc2VsZWN0aW9uLmFuY2hvclxuICAgIH1cbiAgfSk7XG4gIC8vIG9uY2UgeW91J3ZlIGVuZGVkIHRoZSBzaG9ydGN1dCwgeW91J3JlIGRvbmUgd2l0aCB0aGUgbWFya1xuICAvLyBzbyB3ZSBuZWVkIHRvIHJlbW92ZSBpdCBzbyB0aGUgdGV4dCB5b3UgaW5zZXJ0IGFmdGVyIGRvZXNuJ3QgaGF2ZSBpdFxuICBlZGl0b3IucmVtb3ZlTWFyayhtYXJrKTtcbn1cbmZ1bmN0aW9uIHdpdGhNYXJrcyhlZGl0b3JEb2N1bWVudEZlYXR1cmVzLCBjb21wb25lbnRCbG9ja3MsIGVkaXRvcikge1xuICBjb25zdCB7XG4gICAgaW5zZXJ0VGV4dCxcbiAgICBpbnNlcnRCcmVha1xuICB9ID0gZWRpdG9yO1xuICBlZGl0b3IuaW5zZXJ0QnJlYWsgPSAoKSA9PiB7XG4gICAgaW5zZXJ0QnJlYWsoKTtcbiAgICBjb25zdCBtYXJrc0FmdGVySW5zZXJ0QnJlYWsgPSBFZGl0b3IubWFya3MoZWRpdG9yKTtcbiAgICBpZiAoIW1hcmtzQWZ0ZXJJbnNlcnRCcmVhayB8fCAhZWRpdG9yLnNlbGVjdGlvbikgcmV0dXJuO1xuICAgIGNvbnN0IHBhcmVudEJsb2NrID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgICAgbWF0Y2g6IGlzQmxvY2tcbiAgICB9KTtcbiAgICBpZiAoIXBhcmVudEJsb2NrKSByZXR1cm47XG4gICAgY29uc3QgcG9pbnQgPSBFZGl0b3JBZnRlckJ1dElnbm9yaW5naW5nUG9pbnRzV2l0aE5vQ29udGVudChlZGl0b3IsIGVkaXRvci5zZWxlY3Rpb24uYW5jaG9yKTtcbiAgICBjb25zdCBtYXJrc0FmdGVySW5zZXJ0QnJlYWtBcnIgPSBPYmplY3Qua2V5cyhtYXJrc0FmdGVySW5zZXJ0QnJlYWspO1xuICAgIGlmICghcG9pbnQgfHwgIVBhdGguaXNEZXNjZW5kYW50KHBvaW50LnBhdGgsIHBhcmVudEJsb2NrWzFdKSkge1xuICAgICAgZm9yIChjb25zdCBtYXJrIG9mIG1hcmtzQWZ0ZXJJbnNlcnRCcmVha0Fycikge1xuICAgICAgICBlZGl0b3IucmVtb3ZlTWFyayhtYXJrKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdGV4dE5vZGUgPSBOb2RlLmdldChlZGl0b3IsIHBvaW50LnBhdGgpO1xuICAgIGZvciAoY29uc3QgbWFyayBvZiBtYXJrc0FmdGVySW5zZXJ0QnJlYWtBcnIpIHtcbiAgICAgIGlmICghdGV4dE5vZGVbbWFya10pIHtcbiAgICAgICAgZWRpdG9yLnJlbW92ZU1hcmsobWFyayk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBjb25zdCBzZWxlY3RlZE1hcmtkb3duU2hvcnRjdXRzID0ge307XG4gIGNvbnN0IGVuYWJsZWRNYXJrcyA9IGVkaXRvckRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5pbmxpbmVNYXJrcztcbiAgT2JqZWN0LmtleXMoYWxsTWFya2Rvd25TaG9ydGN1dHMpLmZvckVhY2gobWFyayA9PiB7XG4gICAgaWYgKGVuYWJsZWRNYXJrc1ttYXJrXSkge1xuICAgICAgc2VsZWN0ZWRNYXJrZG93blNob3J0Y3V0c1ttYXJrXSA9IGFsbE1hcmtkb3duU2hvcnRjdXRzW21hcmtdO1xuICAgIH1cbiAgfSk7XG4gIGlmIChPYmplY3Qua2V5cyhzZWxlY3RlZE1hcmtkb3duU2hvcnRjdXRzKS5sZW5ndGggPT09IDApIHJldHVybiBlZGl0b3I7XG4gIGVkaXRvci5pbnNlcnRUZXh0ID0gdGV4dCA9PiB7XG4gICAgaW5zZXJ0VGV4dCh0ZXh0KTtcbiAgICBpZiAoZWRpdG9yLnNlbGVjdGlvbiAmJiBSYW5nZS5pc0NvbGxhcHNlZChlZGl0b3Iuc2VsZWN0aW9uKSkge1xuICAgICAgZm9yIChjb25zdCBbbWFyaywgc2hvcnRjdXRzXSBvZiBPYmplY3QuZW50cmllcyhzZWxlY3RlZE1hcmtkb3duU2hvcnRjdXRzKSkge1xuICAgICAgICBmb3IgKGNvbnN0IHNob3J0Y3V0VGV4dCBvZiBzaG9ydGN1dHMpIHtcbiAgICAgICAgICBpZiAodGV4dCA9PT0gc2hvcnRjdXRUZXh0W3Nob3J0Y3V0VGV4dC5sZW5ndGggLSAxXSkge1xuICAgICAgICAgICAgLy8gdGhpcyBmdW5jdGlvbiBpcyBub3QgaW5saW5lZCBiZWNhdXNlXG4gICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vc3djLXByb2plY3Qvc3djL2lzc3Vlcy8yNjIyXG4gICAgICAgICAgICBjb25zdCBzdGFydE9mQmxvY2sgPSBnZXRTdGFydE9mQmxvY2soZWRpdG9yKTtcbiAgICAgICAgICAgIGxldCBzdGFydE9mQmxvY2tUb0VuZE9mU2hvcnRjdXRTdHJpbmcgPSBFZGl0b3Iuc3RyaW5nKGVkaXRvciwge1xuICAgICAgICAgICAgICBhbmNob3I6IGVkaXRvci5zZWxlY3Rpb24uYW5jaG9yLFxuICAgICAgICAgICAgICBmb2N1czogc3RhcnRPZkJsb2NrXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGhhc1doaXRlc3BhY2VCZWZvcmVFbmRPZlNob3J0Y3V0ID0gL1xccy8udGVzdChzdGFydE9mQmxvY2tUb0VuZE9mU2hvcnRjdXRTdHJpbmcuc2xpY2UoLXNob3J0Y3V0VGV4dC5sZW5ndGggLSAxLCAtc2hvcnRjdXRUZXh0Lmxlbmd0aCkpO1xuICAgICAgICAgICAgY29uc3QgZW5kT2ZTaG9ydGN1dENvbnRhaW5zRXhwZWN0ZWRDb250ZW50ID0gc2hvcnRjdXRUZXh0ID09PSBzdGFydE9mQmxvY2tUb0VuZE9mU2hvcnRjdXRTdHJpbmcuc2xpY2UoLXNob3J0Y3V0VGV4dC5sZW5ndGgpO1xuICAgICAgICAgICAgaWYgKGhhc1doaXRlc3BhY2VCZWZvcmVFbmRPZlNob3J0Y3V0IHx8ICFlbmRPZlNob3J0Y3V0Q29udGFpbnNFeHBlY3RlZENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzdHJUb01hdGNoT24gPSBzdGFydE9mQmxvY2tUb0VuZE9mU2hvcnRjdXRTdHJpbmcuc2xpY2UoMCwgLXNob3J0Y3V0VGV4dC5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIC8vIFRPRE86IHVzZSByZWdleCBwcm9ic1xuICAgICAgICAgICAgZm9yIChjb25zdCBbb2Zmc2V0RnJvbVN0YXJ0T2ZCbG9ja10gb2YgWy4uLnN0clRvTWF0Y2hPbl0ucmV2ZXJzZSgpLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgICBjb25zdCBleHBlY3RlZFNob3J0Y3V0VGV4dCA9IHN0clRvTWF0Y2hPbi5zbGljZShvZmZzZXRGcm9tU3RhcnRPZkJsb2NrLCBvZmZzZXRGcm9tU3RhcnRPZkJsb2NrICsgc2hvcnRjdXRUZXh0Lmxlbmd0aCk7XG4gICAgICAgICAgICAgIGlmIChleHBlY3RlZFNob3J0Y3V0VGV4dCAhPT0gc2hvcnRjdXRUZXh0KSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY29uc3Qgc3RhcnRPZlN0YXJ0T2ZTaG9ydGN1dCA9IG9mZnNldEZyb21TdGFydE9mQmxvY2sgPT09IDAgPyBzdGFydE9mQmxvY2sgOiBFZGl0b3JBZnRlckJ1dElnbm9yaW5naW5nUG9pbnRzV2l0aE5vQ29udGVudChlZGl0b3IsIHN0YXJ0T2ZCbG9jaywge1xuICAgICAgICAgICAgICAgIGRpc3RhbmNlOiBvZmZzZXRGcm9tU3RhcnRPZkJsb2NrXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBjb25zdCBlbmRPZlN0YXJ0T2ZTaG9ydGN1dCA9IEVkaXRvci5hZnRlcihlZGl0b3IsIHN0YXJ0T2ZTdGFydE9mU2hvcnRjdXQsIHtcbiAgICAgICAgICAgICAgICBkaXN0YW5jZTogc2hvcnRjdXRUZXh0Lmxlbmd0aFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgaWYgKG9mZnNldEZyb21TdGFydE9mQmxvY2sgIT09IDAgJiYgIS9cXHMvLnRlc3QoRWRpdG9yLnN0cmluZyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgICBhbmNob3I6IEVkaXRvci5iZWZvcmUoZWRpdG9yLCBzdGFydE9mU3RhcnRPZlNob3J0Y3V0LCB7XG4gICAgICAgICAgICAgICAgICB1bml0OiAnY2hhcmFjdGVyJ1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGZvY3VzOiBzdGFydE9mU3RhcnRPZlNob3J0Y3V0XG4gICAgICAgICAgICAgIH0pKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRCZXR3ZWVuU2hvcnRjdXRzID0gRWRpdG9yLnN0cmluZyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgICBhbmNob3I6IGVuZE9mU3RhcnRPZlNob3J0Y3V0LFxuICAgICAgICAgICAgICAgIGZvY3VzOiBlZGl0b3Iuc2VsZWN0aW9uLmFuY2hvclxuICAgICAgICAgICAgICB9KS5zbGljZSgwLCAtc2hvcnRjdXRUZXh0Lmxlbmd0aCk7XG4gICAgICAgICAgICAgIGlmIChjb250ZW50QmV0d2VlblNob3J0Y3V0cyA9PT0gJycgfHwgL1xccy8udGVzdChjb250ZW50QmV0d2VlblNob3J0Y3V0c1swXSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIHRoaXMgaXMgYSBiaXQgb2YgYSB3ZWlyZCBvbmVcbiAgICAgICAgICAgICAgLy8gbGV0J3Mgc2F5IHlvdSBoYWQgPHRleHQ+X190aGluZyBfPGN1cnNvciAvPjwvdGV4dD4gYW5kIHlvdSBpbnNlcnQgYF9gLlxuICAgICAgICAgICAgICAvLyB3aXRob3V0IHRoZSBiZWxvdywgdGhhdCB3b3VsZCB0dXJuIGludG8gPHRleHQgaXRhbGljPl90aGluZyBfPGN1cnNvciAvPjwvdGV4dD5cbiAgICAgICAgICAgICAgLy8gYnV0IGl0J3MgcHJvYmFibHkgbWVhbnQgdG8gYmUgYm9sZCBidXQgaXQncyBub3QgYmVjYXVzZSBvZiB0aGUgc3BhY2UgYmVmb3JlIHRoZSBlbmRpbmcgX1xuICAgICAgICAgICAgICAvLyB0aGVyZSdzIHByb2JhYmx5IGEgYmV0dGVyIHdheSB0byBkbyB0aGlzIGJ1dCBtZWgsIHRoaXMgd29ya3NcbiAgICAgICAgICAgICAgaWYgKG1hcmsgPT09ICdpdGFsaWMnICYmIChjb250ZW50QmV0d2VlblNob3J0Y3V0c1swXSA9PT0gJ18nIHx8IGNvbnRlbnRCZXR3ZWVuU2hvcnRjdXRzWzBdID09PSAnKicpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLy8gdGhpcyBpcyB0aGUgc3RhcnQgb2YgYSBjb2RlIGJsb2NrIHNob3J0Y3V0XG4gICAgICAgICAgICAgIGlmIChtYXJrID09PSAnY29kZScgJiYgY29udGVudEJldHdlZW5TaG9ydGN1dHMgPT09ICdgJykge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnN0IGFuY2VzdG9yQ29tcG9uZW50Q2hpbGRGaWVsZERvY3VtZW50RmVhdHVyZXMgPSBnZXRBbmNlc3RvckNvbXBvbmVudENoaWxkRmllbGREb2N1bWVudEZlYXR1cmVzKGVkaXRvciwgZWRpdG9yRG9jdW1lbnRGZWF0dXJlcywgY29tcG9uZW50QmxvY2tzKTtcbiAgICAgICAgICAgICAgaWYgKGFuY2VzdG9yQ29tcG9uZW50Q2hpbGRGaWVsZERvY3VtZW50RmVhdHVyZXMgJiYgYW5jZXN0b3JDb21wb25lbnRDaGlsZEZpZWxkRG9jdW1lbnRGZWF0dXJlcy5pbmxpbmVNYXJrcyAhPT0gJ2luaGVyaXQnICYmIGFuY2VzdG9yQ29tcG9uZW50Q2hpbGRGaWVsZERvY3VtZW50RmVhdHVyZXMuaW5saW5lTWFya3NbbWFya10gPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYXBwbHlNYXJrKGVkaXRvciwgbWFyaywgc2hvcnRjdXRUZXh0LCBzdGFydE9mU3RhcnRPZlNob3J0Y3V0KTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgcmV0dXJuIGVkaXRvcjtcbn1cbmZ1bmN0aW9uIGdldFN0YXJ0T2ZCbG9jayhlZGl0b3IpIHtcbiAgcmV0dXJuIEVkaXRvci5zdGFydChlZGl0b3IsIEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICBtYXRjaDogaXNCbG9ja1xuICB9KVsxXSk7XG59XG5cbi8vIHZlcnkgbG9vc2VseSBiYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vaWFuc3Rvcm10YXlsb3Ivc2xhdGUvYmxvYi9kMjJjNzZhZTEzMTNmZTgyMTExMzE3NDE3OTEyYTI2NzBlNzNmNWM5L3NpdGUvZXhhbXBsZXMvcGFzdGUtaHRtbC50c3hcbmZ1bmN0aW9uIGdldEFsaWdubWVudEZyb21FbGVtZW50KGVsZW1lbnQpIHtcbiAgY29uc3QgcGFyZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAvLyBjb25mbHVlbmNlXG4gIGNvbnN0IGF0dHJpYnV0ZSA9IHBhcmVudCA9PT0gbnVsbCB8fCBwYXJlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYWxpZ24nKTtcbiAgLy8gbm90ZTogd2UgZG9uJ3Qgc2hvdyBodG1sIHRoYXQgY29uZmx1ZW5jZSB3b3VsZCBwYXJzZSBhcyBhbGlnbm1lbnRcbiAgLy8gd2UgY291bGQgY2hhbmdlIHRoYXQgYnV0IG1laFxuICAvLyAodGhleSBtYXRjaCBvbiBkaXYuZmFicmljLWVkaXRvci1ibG9jay1tYXJrIHdpdGggZGF0YS1hbGlnbilcbiAgaWYgKGF0dHJpYnV0ZSA9PT0gJ2NlbnRlcicgfHwgYXR0cmlidXRlID09PSAnZW5kJykge1xuICAgIHJldHVybiBhdHRyaWJ1dGU7XG4gIH1cbiAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgIC8vIEdvb2dsZSBkb2NzXG4gICAgY29uc3QgdGV4dEFsaWduID0gZWxlbWVudC5zdHlsZS50ZXh0QWxpZ247XG4gICAgaWYgKHRleHRBbGlnbiA9PT0gJ2NlbnRlcicpIHtcbiAgICAgIHJldHVybiAnY2VudGVyJztcbiAgICB9XG4gICAgLy8gVE9ETzogUlRMIHRoaW5ncz9cbiAgICBpZiAodGV4dEFsaWduID09PSAncmlnaHQnIHx8IHRleHRBbGlnbiA9PT0gJ2VuZCcpIHtcbiAgICAgIHJldHVybiAnZW5kJztcbiAgICB9XG4gIH1cbn1cbmNvbnN0IGhlYWRpbmdzID0ge1xuICBIMTogMSxcbiAgSDI6IDIsXG4gIEgzOiAzLFxuICBINDogNCxcbiAgSDU6IDUsXG4gIEg2OiA2XG59O1xuY29uc3QgVEVYVF9UQUdTID0ge1xuICBDT0RFOiAnY29kZScsXG4gIERFTDogJ3N0cmlrZXRocm91Z2gnLFxuICBTOiAnc3RyaWtldGhyb3VnaCcsXG4gIFNUUklLRTogJ3N0cmlrZXRocm91Z2gnLFxuICBFTTogJ2l0YWxpYycsXG4gIEk6ICdpdGFsaWMnLFxuICBTVFJPTkc6ICdib2xkJyxcbiAgVTogJ3VuZGVybGluZScsXG4gIFNVUDogJ3N1cGVyc2NyaXB0JyxcbiAgU1VCOiAnc3Vic2NyaXB0JyxcbiAgS0JEOiAna2V5Ym9hcmQnXG59O1xuZnVuY3Rpb24gbWFya3NGcm9tRWxlbWVudEF0dHJpYnV0ZXMoZWxlbWVudCkge1xuICBjb25zdCBtYXJrcyA9IG5ldyBTZXQoKTtcbiAgY29uc3Qgc3R5bGUgPSBlbGVtZW50LnN0eWxlO1xuICBjb25zdCB7XG4gICAgbm9kZU5hbWVcbiAgfSA9IGVsZW1lbnQ7XG4gIGNvbnN0IG1hcmtGcm9tTm9kZU5hbWUgPSBURVhUX1RBR1Nbbm9kZU5hbWVdO1xuICBpZiAobWFya0Zyb21Ob2RlTmFtZSkge1xuICAgIG1hcmtzLmFkZChtYXJrRnJvbU5vZGVOYW1lKTtcbiAgfVxuICBjb25zdCB7XG4gICAgZm9udFdlaWdodCxcbiAgICB0ZXh0RGVjb3JhdGlvbixcbiAgICB2ZXJ0aWNhbEFsaWduXG4gIH0gPSBzdHlsZTtcbiAgaWYgKHRleHREZWNvcmF0aW9uID09PSAndW5kZXJsaW5lJykge1xuICAgIG1hcmtzLmFkZCgndW5kZXJsaW5lJyk7XG4gIH0gZWxzZSBpZiAodGV4dERlY29yYXRpb24gPT09ICdsaW5lLXRocm91Z2gnKSB7XG4gICAgbWFya3MuYWRkKCdzdHJpa2V0aHJvdWdoJyk7XG4gIH1cbiAgLy8gY29uZmx1ZW5jZVxuICBpZiAobm9kZU5hbWUgPT09ICdTUEFOJyAmJiBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnY29kZScpKSB7XG4gICAgbWFya3MuYWRkKCdjb2RlJyk7XG4gIH1cbiAgLy8gR29vZ2xlIERvY3MgZG9lcyB3ZWlyZCB0aGluZ3Mgd2l0aCA8Yj5cbiAgaWYgKG5vZGVOYW1lID09PSAnQicgJiYgZm9udFdlaWdodCAhPT0gJ25vcm1hbCcpIHtcbiAgICBtYXJrcy5hZGQoJ2JvbGQnKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZm9udFdlaWdodCA9PT0gJ3N0cmluZycgJiYgKGZvbnRXZWlnaHQgPT09ICdib2xkJyB8fCBmb250V2VpZ2h0ID09PSAnYm9sZGVyJyB8fCBmb250V2VpZ2h0ID09PSAnMTAwMCcgfHwgL15bNS05XVxcZHsyfSQvLnRlc3QoZm9udFdlaWdodCkpKSB7XG4gICAgbWFya3MuYWRkKCdib2xkJyk7XG4gIH1cbiAgaWYgKHN0eWxlLmZvbnRTdHlsZSA9PT0gJ2l0YWxpYycpIHtcbiAgICBtYXJrcy5hZGQoJ2l0YWxpYycpO1xuICB9XG4gIC8vIEdvb2dsZSBEb2NzIHVzZXMgdmVydGljYWwgYWxpZ24gZm9yIHN1YnNjcmlwdCBhbmQgc3VwZXJzY3JpcHQgaW5zdGVhZCBvZiA8c3VwPiBhbmQgPHN1Yj5cbiAgaWYgKHZlcnRpY2FsQWxpZ24gPT09ICdzdXBlcicpIHtcbiAgICBtYXJrcy5hZGQoJ3N1cGVyc2NyaXB0Jyk7XG4gIH0gZWxzZSBpZiAodmVydGljYWxBbGlnbiA9PT0gJ3N1YicpIHtcbiAgICBtYXJrcy5hZGQoJ3N1YnNjcmlwdCcpO1xuICB9XG4gIHJldHVybiBtYXJrcztcbn1cbmZ1bmN0aW9uIGRlc2VyaWFsaXplSFRNTChodG1sKSB7XG4gIGNvbnN0IHBhcnNlZCA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoaHRtbCwgJ3RleHQvaHRtbCcpO1xuICByZXR1cm4gZml4Tm9kZXNGb3JCbG9ja0NoaWxkcmVuKGRlc2VyaWFsaXplTm9kZXMocGFyc2VkLmJvZHkuY2hpbGROb2RlcykpO1xufVxuZnVuY3Rpb24gZGVzZXJpYWxpemVIVE1MTm9kZShlbCkge1xuICBpZiAoIShlbCBpbnN0YW5jZW9mIGdsb2JhbFRoaXMuSFRNTEVsZW1lbnQpKSB7XG4gICAgY29uc3QgdGV4dCA9IGVsLnRleHRDb250ZW50O1xuICAgIGlmICghdGV4dCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICByZXR1cm4gZ2V0SW5saW5lTm9kZXModGV4dCk7XG4gIH1cbiAgaWYgKGVsLm5vZGVOYW1lID09PSAnQlInKSB7XG4gICAgcmV0dXJuIGdldElubGluZU5vZGVzKCdcXG4nKTtcbiAgfVxuICBpZiAoZWwubm9kZU5hbWUgPT09ICdJTUcnKSB7XG4gICAgY29uc3QgYWx0ID0gZWwuZ2V0QXR0cmlidXRlKCdhbHQnKTtcbiAgICByZXR1cm4gZ2V0SW5saW5lTm9kZXMoYWx0ICE9PSBudWxsICYmIGFsdCAhPT0gdm9pZCAwID8gYWx0IDogJycpO1xuICB9XG4gIGlmIChlbC5ub2RlTmFtZSA9PT0gJ0hSJykge1xuICAgIHJldHVybiBbe1xuICAgICAgdHlwZTogJ2RpdmlkZXInLFxuICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgIHRleHQ6ICcnXG4gICAgICB9XVxuICAgIH1dO1xuICB9XG4gIGNvbnN0IG1hcmtzID0gbWFya3NGcm9tRWxlbWVudEF0dHJpYnV0ZXMoZWwpO1xuXG4gIC8vIERyb3Bib3ggUGFwZXIgZGlzcGxheXMgYmxvY2txdW90ZXMgYXMgbGlzdHMgZm9yIHNvbWUgcmVhc29uXG4gIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2xpc3R0eXBlLXF1b3RlJykpIHtcbiAgICBtYXJrcy5kZWxldGUoJ2l0YWxpYycpO1xuICAgIHJldHVybiBhZGRNYXJrc1RvQ2hpbGRyZW4obWFya3MsICgpID0+IFt7XG4gICAgICB0eXBlOiAnYmxvY2txdW90ZScsXG4gICAgICBjaGlsZHJlbjogZml4Tm9kZXNGb3JCbG9ja0NoaWxkcmVuKGRlc2VyaWFsaXplTm9kZXMoZWwuY2hpbGROb2RlcykpXG4gICAgfV0pO1xuICB9XG4gIHJldHVybiBhZGRNYXJrc1RvQ2hpbGRyZW4obWFya3MsICgpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBub2RlTmFtZVxuICAgIH0gPSBlbDtcbiAgICBpZiAobm9kZU5hbWUgPT09ICdBJykge1xuICAgICAgY29uc3QgaHJlZiA9IGVsLmdldEF0dHJpYnV0ZSgnaHJlZicpO1xuICAgICAgaWYgKGhyZWYpIHtcbiAgICAgICAgcmV0dXJuIHNldExpbmtGb3JDaGlsZHJlbihocmVmLCAoKSA9PiBmb3JjZURpc2FibGVNYXJrRm9yQ2hpbGRyZW4oJ3VuZGVybGluZScsICgpID0+IGRlc2VyaWFsaXplTm9kZXMoZWwuY2hpbGROb2RlcykpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG5vZGVOYW1lID09PSAnUFJFJyAmJiBlbC50ZXh0Q29udGVudCkge1xuICAgICAgcmV0dXJuIFt7XG4gICAgICAgIHR5cGU6ICdjb2RlJyxcbiAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgdGV4dDogZWwudGV4dENvbnRlbnQgfHwgJydcbiAgICAgICAgfV1cbiAgICAgIH1dO1xuICAgIH1cbiAgICBjb25zdCBkZXNlcmlhbGl6ZWQgPSBkZXNlcmlhbGl6ZU5vZGVzKGVsLmNoaWxkTm9kZXMpO1xuICAgIGNvbnN0IGNoaWxkcmVuID0gZml4Tm9kZXNGb3JCbG9ja0NoaWxkcmVuKGRlc2VyaWFsaXplZCk7XG4gICAgaWYgKG5vZGVOYW1lID09PSAnTEknKSB7XG4gICAgICBsZXQgbmVzdGVkTGlzdDtcbiAgICAgIGNvbnN0IGxpc3RJdGVtQ29udGVudCA9IHtcbiAgICAgICAgdHlwZTogJ2xpc3QtaXRlbS1jb250ZW50JyxcbiAgICAgICAgY2hpbGRyZW46IGNoaWxkcmVuLmZpbHRlcihub2RlID0+IHtcbiAgICAgICAgICBpZiAobmVzdGVkTGlzdCA9PT0gdW5kZWZpbmVkICYmIChub2RlLnR5cGUgPT09ICdvcmRlcmVkLWxpc3QnIHx8IG5vZGUudHlwZSA9PT0gJ3Vub3JkZXJlZC1saXN0JykpIHtcbiAgICAgICAgICAgIG5lc3RlZExpc3QgPSBub2RlO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSlcbiAgICAgIH07XG4gICAgICBjb25zdCBsaXN0SXRlbUNoaWxkcmVuID0gbmVzdGVkTGlzdCA/IFtsaXN0SXRlbUNvbnRlbnQsIG5lc3RlZExpc3RdIDogW2xpc3RJdGVtQ29udGVudF07XG4gICAgICByZXR1cm4gW3tcbiAgICAgICAgdHlwZTogJ2xpc3QtaXRlbScsXG4gICAgICAgIGNoaWxkcmVuOiBsaXN0SXRlbUNoaWxkcmVuXG4gICAgICB9XTtcbiAgICB9XG4gICAgaWYgKG5vZGVOYW1lID09PSAnUCcpIHtcbiAgICAgIHJldHVybiBbe1xuICAgICAgICB0eXBlOiAncGFyYWdyYXBoJyxcbiAgICAgICAgdGV4dEFsaWduOiBnZXRBbGlnbm1lbnRGcm9tRWxlbWVudChlbCksXG4gICAgICAgIGNoaWxkcmVuXG4gICAgICB9XTtcbiAgICB9XG4gICAgY29uc3QgaGVhZGluZ0xldmVsID0gaGVhZGluZ3Nbbm9kZU5hbWVdO1xuICAgIGlmICh0eXBlb2YgaGVhZGluZ0xldmVsID09PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuIFt7XG4gICAgICAgIHR5cGU6ICdoZWFkaW5nJyxcbiAgICAgICAgbGV2ZWw6IGhlYWRpbmdMZXZlbCxcbiAgICAgICAgdGV4dEFsaWduOiBnZXRBbGlnbm1lbnRGcm9tRWxlbWVudChlbCksXG4gICAgICAgIGNoaWxkcmVuXG4gICAgICB9XTtcbiAgICB9XG4gICAgaWYgKG5vZGVOYW1lID09PSAnQkxPQ0tRVU9URScpIHtcbiAgICAgIHJldHVybiBbe1xuICAgICAgICB0eXBlOiAnYmxvY2txdW90ZScsXG4gICAgICAgIGNoaWxkcmVuXG4gICAgICB9XTtcbiAgICB9XG4gICAgaWYgKG5vZGVOYW1lID09PSAnT0wnKSB7XG4gICAgICByZXR1cm4gW3tcbiAgICAgICAgdHlwZTogJ29yZGVyZWQtbGlzdCcsXG4gICAgICAgIGNoaWxkcmVuXG4gICAgICB9XTtcbiAgICB9XG4gICAgaWYgKG5vZGVOYW1lID09PSAnVUwnKSB7XG4gICAgICByZXR1cm4gW3tcbiAgICAgICAgdHlwZTogJ3Vub3JkZXJlZC1saXN0JyxcbiAgICAgICAgY2hpbGRyZW5cbiAgICAgIH1dO1xuICAgIH1cbiAgICBpZiAobm9kZU5hbWUgPT09ICdESVYnICYmICFpc0Jsb2NrKGNoaWxkcmVuWzBdKSkge1xuICAgICAgcmV0dXJuIFt7XG4gICAgICAgIHR5cGU6ICdwYXJhZ3JhcGgnLFxuICAgICAgICBjaGlsZHJlblxuICAgICAgfV07XG4gICAgfVxuICAgIHJldHVybiBkZXNlcmlhbGl6ZWQ7XG4gIH0pO1xufVxuZnVuY3Rpb24gZGVzZXJpYWxpemVOb2Rlcyhub2Rlcykge1xuICBjb25zdCBvdXRwdXROb2RlcyA9IFtdO1xuICBmb3IgKGNvbnN0IG5vZGUgb2Ygbm9kZXMpIHtcbiAgICBvdXRwdXROb2Rlcy5wdXNoKC4uLmRlc2VyaWFsaXplSFRNTE5vZGUobm9kZSkpO1xuICB9XG4gIHJldHVybiBvdXRwdXROb2Rlcztcbn1cbmZ1bmN0aW9uIGZpeE5vZGVzRm9yQmxvY2tDaGlsZHJlbihkZXNlcmlhbGl6ZWROb2Rlcykge1xuICBpZiAoIWRlc2VyaWFsaXplZE5vZGVzLmxlbmd0aCkge1xuICAgIC8vIFNsYXRlIGFsc28gZ2V0cyB1bmhhcHB5IGlmIGFuIGVsZW1lbnQgaGFzIG5vIGNoaWxkcmVuXG4gICAgLy8gdGhlIGVtcHR5IHRleHQgbm9kZXMgd2lsbCBnZXQgbm9ybWFsaXplZCBhd2F5IGlmIHRoZXkncmUgbm90IG5lZWRlZFxuICAgIHJldHVybiBbe1xuICAgICAgdGV4dDogJydcbiAgICB9XTtcbiAgfVxuICBpZiAoZGVzZXJpYWxpemVkTm9kZXMuc29tZShpc0Jsb2NrKSkge1xuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgIGxldCBxdWV1ZWRJbmxpbmVzID0gW107XG4gICAgY29uc3QgZmx1c2hJbmxpbmVzID0gKCkgPT4ge1xuICAgICAgaWYgKHF1ZXVlZElubGluZXMubGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAncGFyYWdyYXBoJyxcbiAgICAgICAgICBjaGlsZHJlbjogcXVldWVkSW5saW5lc1xuICAgICAgICB9KTtcbiAgICAgICAgcXVldWVkSW5saW5lcyA9IFtdO1xuICAgICAgfVxuICAgIH07XG4gICAgZm9yIChjb25zdCBub2RlIG9mIGRlc2VyaWFsaXplZE5vZGVzKSB7XG4gICAgICBpZiAoaXNCbG9jayhub2RlKSkge1xuICAgICAgICBmbHVzaElubGluZXMoKTtcbiAgICAgICAgcmVzdWx0LnB1c2gobm9kZSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgLy8gd2Ugd2FudCB0byBpZ25vcmUgd2hpdGVzcGFjZSBiZXR3ZWVuIGJsb2NrIGxldmVsIGVsZW1lbnRzXG4gICAgICAvLyB1c2VmdWwgaW5mbyBhYm91dCB3aGl0ZXNwYWNlIGluIGh0bWw6XG4gICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRG9jdW1lbnRfT2JqZWN0X01vZGVsL1doaXRlc3BhY2VcbiAgICAgIGlmIChOb2RlLnN0cmluZyhub2RlKS50cmltKCkgIT09ICcnKSB7XG4gICAgICAgIHF1ZXVlZElubGluZXMucHVzaChub2RlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZmx1c2hJbmxpbmVzKCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICByZXR1cm4gZGVzZXJpYWxpemVkTm9kZXM7XG59XG5cbmNvbnN0IG1hcmtkb3duQ29uZmlnID0ge1xuICBtZGFzdEV4dGVuc2lvbnM6IFthdXRvTGlua0xpdGVyYWxGcm9tTWFya2Rvd25FeHRlbnNpb24sIGdmbVN0cmlrZXRocm91Z2hGcm9tTWFya2Rvd25FeHRlbnNpb25dLFxuICBleHRlbnNpb25zOiBbYXV0b0xpbmtMaXRlcmFsTWFya2Rvd25TeW50YXgsIGdmbVN0cmlrZXRocm91Z2hNYXJrZG93blN5bnRheCgpXVxufTtcbmZ1bmN0aW9uIGRlc2VyaWFsaXplTWFya2Rvd24obWFya2Rvd24pIHtcbiAgY29uc3Qgcm9vdCA9IG1kQVNUVXRpbEZyb21NYXJrZG93bihtYXJrZG93biwgbWFya2Rvd25Db25maWcpO1xuICBsZXQgbm9kZXMgPSByb290LmNoaWxkcmVuO1xuICBpZiAobm9kZXMubGVuZ3RoID09PSAxICYmIG5vZGVzWzBdLnR5cGUgPT09ICdwYXJhZ3JhcGgnKSB7XG4gICAgbm9kZXMgPSBub2Rlc1swXS5jaGlsZHJlbjtcbiAgfVxuICByZXR1cm4gZGVzZXJpYWxpemVDaGlsZHJlbihub2RlcywgbWFya2Rvd24pO1xufVxuZnVuY3Rpb24gZGVzZXJpYWxpemVDaGlsZHJlbihub2RlcywgaW5wdXQpIHtcbiAgY29uc3Qgb3V0cHV0Tm9kZXMgPSBbXTtcbiAgZm9yIChjb25zdCBub2RlIG9mIG5vZGVzKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gZGVzZXJpYWxpemVNYXJrZG93bk5vZGUobm9kZSwgaW5wdXQpO1xuICAgIGlmIChyZXN1bHQubGVuZ3RoKSB7XG4gICAgICBvdXRwdXROb2Rlcy5wdXNoKC4uLnJlc3VsdCk7XG4gICAgfVxuICB9XG4gIGlmICghb3V0cHV0Tm9kZXMubGVuZ3RoKSB7XG4gICAgb3V0cHV0Tm9kZXMucHVzaCh7XG4gICAgICB0ZXh0OiAnJ1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBvdXRwdXROb2Rlcztcbn1cbmZ1bmN0aW9uIGRlc2VyaWFsaXplTWFya2Rvd25Ob2RlKG5vZGUsIGlucHV0KSB7XG4gIHN3aXRjaCAobm9kZS50eXBlKSB7XG4gICAgY2FzZSAnYmxvY2txdW90ZSc6XG4gICAgICB7XG4gICAgICAgIHJldHVybiBbe1xuICAgICAgICAgIHR5cGU6ICdibG9ja3F1b3RlJyxcbiAgICAgICAgICBjaGlsZHJlbjogZGVzZXJpYWxpemVDaGlsZHJlbihub2RlLmNoaWxkcmVuLCBpbnB1dClcbiAgICAgICAgfV07XG4gICAgICB9XG4gICAgY2FzZSAnbGluayc6XG4gICAgICB7XG4gICAgICAgIC8vIGFyZ3VhYmx5IHRoaXMgY291bGQganVzdCByZXR1cm4gYSBsaW5rIG5vZGUgcmF0aGVyIHRoYW4gdXNlIHNldExpbmtGb3JDaGlsZHJlbiBzaW5jZSB0aGUgY2hpbGRyZW4gX3Nob3VsZF8gb25seSBiZSBpbmxpbmVzXG4gICAgICAgIC8vIGJ1dCByYXRoZXIgdGhhbiByZWx5aW5nIG9uIHRoZSBtYXJrZG93biBwYXJzZXIgd2UgdXNlIGJlaW5nIGNvcnJlY3QgaW4gdGhpcyB3YXkgc2luY2UgaXQgaXNuJ3QgbmljZWx5IGNvZGlmaWVkIGluIHR5cGVzXG4gICAgICAgIC8vIGxldCdzIGJlIHNhZmUgc2luY2Ugd2UgYWxyZWFkeSBoYXZlIHRoZSBjb2RlIHRvIGRvIGl0IHRoZSBzYWZlciB3YXkgYmVjYXVzZSBvZiBodG1sIHBhc3RpbmdcbiAgICAgICAgcmV0dXJuIHNldExpbmtGb3JDaGlsZHJlbihub2RlLnVybCwgKCkgPT4gZGVzZXJpYWxpemVDaGlsZHJlbihub2RlLmNoaWxkcmVuLCBpbnB1dCkpO1xuICAgICAgfVxuICAgIGNhc2UgJ2NvZGUnOlxuICAgICAge1xuICAgICAgICByZXR1cm4gW3tcbiAgICAgICAgICB0eXBlOiAnY29kZScsXG4gICAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgICB0ZXh0OiBub2RlLnZhbHVlXG4gICAgICAgICAgfV1cbiAgICAgICAgfV07XG4gICAgICB9XG4gICAgY2FzZSAncGFyYWdyYXBoJzpcbiAgICAgIHtcbiAgICAgICAgcmV0dXJuIFt7XG4gICAgICAgICAgdHlwZTogJ3BhcmFncmFwaCcsXG4gICAgICAgICAgY2hpbGRyZW46IGRlc2VyaWFsaXplQ2hpbGRyZW4obm9kZS5jaGlsZHJlbiwgaW5wdXQpXG4gICAgICAgIH1dO1xuICAgICAgfVxuICAgIGNhc2UgJ2hlYWRpbmcnOlxuICAgICAge1xuICAgICAgICByZXR1cm4gW3tcbiAgICAgICAgICB0eXBlOiAnaGVhZGluZycsXG4gICAgICAgICAgbGV2ZWw6IG5vZGUuZGVwdGgsXG4gICAgICAgICAgY2hpbGRyZW46IGRlc2VyaWFsaXplQ2hpbGRyZW4obm9kZS5jaGlsZHJlbiwgaW5wdXQpXG4gICAgICAgIH1dO1xuICAgICAgfVxuICAgIGNhc2UgJ2xpc3QnOlxuICAgICAge1xuICAgICAgICByZXR1cm4gW3tcbiAgICAgICAgICB0eXBlOiBub2RlLm9yZGVyZWQgPyAnb3JkZXJlZC1saXN0JyA6ICd1bm9yZGVyZWQtbGlzdCcsXG4gICAgICAgICAgY2hpbGRyZW46IGRlc2VyaWFsaXplQ2hpbGRyZW4obm9kZS5jaGlsZHJlbiwgaW5wdXQpXG4gICAgICAgIH1dO1xuICAgICAgfVxuICAgIGNhc2UgJ2xpc3RJdGVtJzpcbiAgICAgIHtcbiAgICAgICAgcmV0dXJuIFt7XG4gICAgICAgICAgdHlwZTogJ2xpc3QtaXRlbScsXG4gICAgICAgICAgY2hpbGRyZW46IGRlc2VyaWFsaXplQ2hpbGRyZW4obm9kZS5jaGlsZHJlbiwgaW5wdXQpXG4gICAgICAgIH1dO1xuICAgICAgfVxuICAgIGNhc2UgJ3RoZW1hdGljQnJlYWsnOlxuICAgICAge1xuICAgICAgICByZXR1cm4gW3tcbiAgICAgICAgICB0eXBlOiAnZGl2aWRlcicsXG4gICAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgICB0ZXh0OiAnJ1xuICAgICAgICAgIH1dXG4gICAgICAgIH1dO1xuICAgICAgfVxuICAgIGNhc2UgJ2JyZWFrJzpcbiAgICAgIHtcbiAgICAgICAgcmV0dXJuIGdldElubGluZU5vZGVzKCdcXG4nKTtcbiAgICAgIH1cbiAgICBjYXNlICdkZWxldGUnOlxuICAgICAge1xuICAgICAgICByZXR1cm4gYWRkTWFya1RvQ2hpbGRyZW4oJ3N0cmlrZXRocm91Z2gnLCAoKSA9PiBkZXNlcmlhbGl6ZUNoaWxkcmVuKG5vZGUuY2hpbGRyZW4sIGlucHV0KSk7XG4gICAgICB9XG4gICAgY2FzZSAnc3Ryb25nJzpcbiAgICAgIHtcbiAgICAgICAgcmV0dXJuIGFkZE1hcmtUb0NoaWxkcmVuKCdib2xkJywgKCkgPT4gZGVzZXJpYWxpemVDaGlsZHJlbihub2RlLmNoaWxkcmVuLCBpbnB1dCkpO1xuICAgICAgfVxuICAgIGNhc2UgJ2VtcGhhc2lzJzpcbiAgICAgIHtcbiAgICAgICAgcmV0dXJuIGFkZE1hcmtUb0NoaWxkcmVuKCdpdGFsaWMnLCAoKSA9PiBkZXNlcmlhbGl6ZUNoaWxkcmVuKG5vZGUuY2hpbGRyZW4sIGlucHV0KSk7XG4gICAgICB9XG4gICAgY2FzZSAnaW5saW5lQ29kZSc6XG4gICAgICB7XG4gICAgICAgIHJldHVybiBhZGRNYXJrVG9DaGlsZHJlbignY29kZScsICgpID0+IGdldElubGluZU5vZGVzKG5vZGUudmFsdWUpKTtcbiAgICAgIH1cbiAgICBjYXNlICd0ZXh0JzpcbiAgICAgIHtcbiAgICAgICAgcmV0dXJuIGdldElubGluZU5vZGVzKG5vZGUudmFsdWUpO1xuICAgICAgfVxuICB9XG4gIHJldHVybiBnZXRJbmxpbmVOb2RlcyhpbnB1dC5zbGljZShub2RlLnBvc2l0aW9uLnN0YXJ0Lm9mZnNldCwgbm9kZS5wb3NpdGlvbi5lbmQub2Zmc2V0KSk7XG59XG5cbmNvbnN0IHVybFBhdHRlcm4gPSAvaHR0cHM/OlxcL1xcLy87XG5mdW5jdGlvbiBpbnNlcnRGcmFnbWVudEJ1dERpZmZlcmVudChlZGl0b3IsIG5vZGVzKSB7XG4gIGlmIChpc0Jsb2NrKG5vZGVzWzBdKSkge1xuICAgIGluc2VydE5vZGVzQnV0UmVwbGFjZUlmU2VsZWN0aW9uSXNBdEVtcHR5UGFyYWdyYXBoT3JIZWFkaW5nKGVkaXRvciwgbm9kZXMpO1xuICB9IGVsc2Uge1xuICAgIFRyYW5zZm9ybXMuaW5zZXJ0RnJhZ21lbnQoZWRpdG9yLCBub2Rlcyk7XG4gIH1cbn1cbmNvbnN0IGNsaXBib2FyZEZvcm1hdEtleSA9ICd4LWtleXN0YXRpYy1mcmFnbWVudCc7XG5jb25zdCBnZXREZWZhdWx0VmlldyA9IHZhbHVlID0+IHtcbiAgcmV0dXJuIHZhbHVlICYmIHZhbHVlLm93bmVyRG9jdW1lbnQgJiYgdmFsdWUub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldyB8fCBudWxsO1xufTtcbmNvbnN0IGlzRE9NTm9kZSA9IHZhbHVlID0+IHtcbiAgY29uc3Qgd2luZG93ID0gZ2V0RGVmYXVsdFZpZXcodmFsdWUpO1xuICByZXR1cm4gISF3aW5kb3cgJiYgdmFsdWUgaW5zdGFuY2VvZiB3aW5kb3cuTm9kZTtcbn07XG5jb25zdCBpc0RPTVRleHQgPSB2YWx1ZSA9PiB7XG4gIHJldHVybiBpc0RPTU5vZGUodmFsdWUpICYmIHZhbHVlLm5vZGVUeXBlID09PSAzO1xufTtcbmNvbnN0IGlzRE9NRWxlbWVudCA9IHZhbHVlID0+IHtcbiAgcmV0dXJuIGlzRE9NTm9kZSh2YWx1ZSkgJiYgdmFsdWUubm9kZVR5cGUgPT09IDE7XG59O1xuY29uc3QgZ2V0UGxhaW5UZXh0ID0gZG9tTm9kZSA9PiB7XG4gIGxldCB0ZXh0ID0gJyc7XG4gIGlmIChpc0RPTVRleHQoZG9tTm9kZSkgJiYgZG9tTm9kZS5ub2RlVmFsdWUpIHtcbiAgICByZXR1cm4gZG9tTm9kZS5ub2RlVmFsdWU7XG4gIH1cbiAgaWYgKGlzRE9NRWxlbWVudChkb21Ob2RlKSkge1xuICAgIGZvciAoY29uc3QgY2hpbGROb2RlIG9mIEFycmF5LmZyb20oZG9tTm9kZS5jaGlsZE5vZGVzKSkge1xuICAgICAgdGV4dCArPSBnZXRQbGFpblRleHQoY2hpbGROb2RlKTtcbiAgICB9XG4gICAgY29uc3QgZGlzcGxheSA9IGdldENvbXB1dGVkU3R5bGUoZG9tTm9kZSkuZ2V0UHJvcGVydHlWYWx1ZSgnZGlzcGxheScpO1xuICAgIGlmIChkaXNwbGF5ID09PSAnYmxvY2snIHx8IGRpc3BsYXkgPT09ICdsaXN0JyB8fCBkb21Ob2RlLnRhZ05hbWUgPT09ICdCUicpIHtcbiAgICAgIHRleHQgKz0gJ1xcbic7XG4gICAgfVxuICB9XG4gIHJldHVybiB0ZXh0O1xufTtcbmZ1bmN0aW9uIHNldEZyYWdtZW50RGF0YShlLCBkYXRhKSB7XG4gIGNvbnN0IHtcbiAgICBzZWxlY3Rpb25cbiAgfSA9IGU7XG4gIGlmICghc2VsZWN0aW9uKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IFtzdGFydCwgZW5kXSA9IFJhbmdlLmVkZ2VzKHNlbGVjdGlvbik7XG4gIGNvbnN0IHN0YXJ0Vm9pZCA9IEVkaXRvci52b2lkKGUsIHtcbiAgICBhdDogc3RhcnQucGF0aFxuICB9KTtcbiAgY29uc3QgZW5kVm9pZCA9IEVkaXRvci52b2lkKGUsIHtcbiAgICBhdDogZW5kLnBhdGhcbiAgfSk7XG4gIGlmIChSYW5nZS5pc0NvbGxhcHNlZChzZWxlY3Rpb24pICYmICFzdGFydFZvaWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBDcmVhdGUgYSBmYWtlIHNlbGVjdGlvbiBzbyB0aGF0IHdlIGNhbiBhZGQgYSBCYXNlNjQtZW5jb2RlZCBjb3B5IG9mIHRoZVxuICAvLyBmcmFnbWVudCB0byB0aGUgSFRNTCwgdG8gZGVjb2RlIG9uIGZ1dHVyZSBwYXN0ZXMuXG4gIGNvbnN0IGRvbVJhbmdlID0gUmVhY3RFZGl0b3IudG9ET01SYW5nZShlLCBzZWxlY3Rpb24pO1xuICBsZXQgY29udGVudHMgPSBkb21SYW5nZS5jbG9uZUNvbnRlbnRzKCk7XG4gIGxldCBhdHRhY2ggPSBjb250ZW50cy5jaGlsZE5vZGVzWzBdO1xuXG4gIC8vIE1ha2Ugc3VyZSBhdHRhY2ggaXMgbm9uLWVtcHR5LCBzaW5jZSBlbXB0eSBub2RlcyB3aWxsIG5vdCBnZXQgY29waWVkLlxuICBjb250ZW50cy5jaGlsZE5vZGVzLmZvckVhY2gobm9kZSA9PiB7XG4gICAgaWYgKG5vZGUudGV4dENvbnRlbnQgJiYgbm9kZS50ZXh0Q29udGVudC50cmltKCkgIT09ICcnKSB7XG4gICAgICBhdHRhY2ggPSBub2RlO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gQ09NUEFUOiBJZiB0aGUgZW5kIG5vZGUgaXMgYSB2b2lkIG5vZGUsIHdlIG5lZWQgdG8gbW92ZSB0aGUgZW5kIG9mIHRoZVxuICAvLyByYW5nZSBmcm9tIHRoZSB2b2lkIG5vZGUncyBzcGFjZXIgc3BhbiwgdG8gdGhlIGVuZCBvZiB0aGUgdm9pZCBub2RlJ3NcbiAgLy8gY29udGVudCwgc2luY2UgdGhlIHNwYWNlciBpcyBiZWZvcmUgdm9pZCdzIGNvbnRlbnQgaW4gdGhlIERPTS5cbiAgaWYgKGVuZFZvaWQpIHtcbiAgICBjb25zdCBbdm9pZE5vZGVdID0gZW5kVm9pZDtcbiAgICBjb25zdCByID0gZG9tUmFuZ2UuY2xvbmVSYW5nZSgpO1xuICAgIGNvbnN0IGRvbU5vZGUgPSBSZWFjdEVkaXRvci50b0RPTU5vZGUoZSwgdm9pZE5vZGUpO1xuICAgIHIuc2V0RW5kQWZ0ZXIoZG9tTm9kZSk7XG4gICAgY29udGVudHMgPSByLmNsb25lQ29udGVudHMoKTtcbiAgfVxuXG4gIC8vIENPTVBBVDogSWYgdGhlIHN0YXJ0IG5vZGUgaXMgYSB2b2lkIG5vZGUsIHdlIG5lZWQgdG8gYXR0YWNoIHRoZSBlbmNvZGVkXG4gIC8vIGZyYWdtZW50IHRvIHRoZSB2b2lkIG5vZGUncyBjb250ZW50IG5vZGUgaW5zdGVhZCBvZiB0aGUgc3BhY2VyLCBiZWNhdXNlXG4gIC8vIGF0dGFjaGluZyBpdCB0byBlbXB0eSBgPGRpdj4vPHNwYW4+YCBub2RlcyB3aWxsIGVuZCB1cCBoYXZpbmcgaXQgZXJhc2VkIGJ5XG4gIC8vIG1vc3QgYnJvd3NlcnMuICgyMDE4LzA0LzI3KVxuICBpZiAoc3RhcnRWb2lkKSB7XG4gICAgYXR0YWNoID0gY29udGVudHMucXVlcnlTZWxlY3RvcignW2RhdGEtc2xhdGUtc3BhY2VyXScpO1xuICB9XG5cbiAgLy8gUmVtb3ZlIGFueSB6ZXJvLXdpZHRoIHNwYWNlIHNwYW5zIGZyb20gdGhlIGNsb25lZCBET00gc28gdGhhdCB0aGV5IGRvbid0XG4gIC8vIHNob3cgdXAgZWxzZXdoZXJlIHdoZW4gcGFzdGVkLlxuICBBcnJheS5mcm9tKGNvbnRlbnRzLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXNsYXRlLXplcm8td2lkdGhdJykpLmZvckVhY2goencgPT4ge1xuICAgIGNvbnN0IGlzTmV3bGluZSA9IHp3LmdldEF0dHJpYnV0ZSgnZGF0YS1zbGF0ZS16ZXJvLXdpZHRoJykgPT09ICduJztcbiAgICB6dy50ZXh0Q29udGVudCA9IGlzTmV3bGluZSA/ICdcXG4nIDogJyc7XG4gIH0pO1xuXG4gIC8vIFNldCBhIGBkYXRhLXNsYXRlLWZyYWdtZW50YCBhdHRyaWJ1dGUgb24gYSBub24tZW1wdHkgbm9kZSwgc28gaXQgc2hvd3MgdXBcbiAgLy8gaW4gdGhlIEhUTUwsIGFuZCBjYW4gYmUgdXNlZCBmb3IgaW50cmEtU2xhdGUgcGFzdGluZy4gSWYgaXQncyBhIHRleHRcbiAgLy8gbm9kZSwgd3JhcCBpdCBpbiBhIGA8c3Bhbj5gIHNvIHdlIGhhdmUgc29tZXRoaW5nIHRvIHNldCBhbiBhdHRyaWJ1dGUgb24uXG4gIGlmIChpc0RPTVRleHQoYXR0YWNoKSkge1xuICAgIGNvbnN0IHNwYW4gPSBhdHRhY2gub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgLy8gQ09NUEFUOiBJbiBDaHJvbWUgYW5kIFNhZmFyaSwgaWYgd2UgZG9uJ3QgYWRkIHRoZSBgd2hpdGUtc3BhY2VgIHN0eWxlXG4gICAgLy8gdGhlbiBsZWFkaW5nIGFuZCB0cmFpbGluZyBzcGFjZXMgd2lsbCBiZSBpZ25vcmVkLiAoMjAxNy8wOS8yMSlcbiAgICBzcGFuLnN0eWxlLndoaXRlU3BhY2UgPSAncHJlJztcbiAgICBzcGFuLmFwcGVuZENoaWxkKGF0dGFjaCk7XG4gICAgY29udGVudHMuYXBwZW5kQ2hpbGQoc3Bhbik7XG4gICAgYXR0YWNoID0gc3BhbjtcbiAgfVxuICBjb25zdCBmcmFnbWVudCA9IGUuZ2V0RnJhZ21lbnQoKTtcbiAgY29uc3Qgc3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoZnJhZ21lbnQsIChrZXksIHZhbCkgPT4ge1xuICAgIGlmICh2YWwgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBbYnl0ZXNOYW1lXTogZnJvbVVpbnQ4QXJyYXkodmFsKVxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbDtcbiAgfSk7XG4gIGNvbnN0IGVuY29kZWQgPSB3aW5kb3cuYnRvYShlbmNvZGVVUklDb21wb25lbnQoc3RyaW5nKSk7XG4gIGF0dGFjaC5zZXRBdHRyaWJ1dGUoJ2RhdGEta2V5c3RhdGljLWZyYWdtZW50JywgZW5jb2RlZCk7XG4gIGRhdGEuc2V0RGF0YShgYXBwbGljYXRpb24vJHtjbGlwYm9hcmRGb3JtYXRLZXl9YCwgZW5jb2RlZCk7XG5cbiAgLy8gQWRkIHRoZSBjb250ZW50IHRvIGEgPGRpdj4gc28gdGhhdCB3ZSBjYW4gZ2V0IGl0cyBpbm5lciBIVE1MLlxuICBjb25zdCBkaXYgPSBjb250ZW50cy5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBkaXYuYXBwZW5kQ2hpbGQoY29udGVudHMpO1xuICBkaXYuc2V0QXR0cmlidXRlKCdoaWRkZW4nLCAndHJ1ZScpO1xuICBjb250ZW50cy5vd25lckRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgZGF0YS5zZXREYXRhKCd0ZXh0L2h0bWwnLCBkaXYuaW5uZXJIVE1MKTtcbiAgZGF0YS5zZXREYXRhKCd0ZXh0L3BsYWluJywgZ2V0UGxhaW5UZXh0KGRpdikpO1xuICBjb250ZW50cy5vd25lckRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZGl2KTtcbn1cbmNvbnN0IGNhdGNoU2xhdGVGcmFnbWVudCA9IC9kYXRhLWtleXN0YXRpYy1mcmFnbWVudD1cIiguKz8pXCIvbTtcbmNvbnN0IGdldFNsYXRlRnJhZ21lbnRBdHRyaWJ1dGUgPSBkYXRhVHJhbnNmZXIgPT4ge1xuICBjb25zdCBodG1sRGF0YSA9IGRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L2h0bWwnKTtcbiAgY29uc3QgWywgZnJhZ21lbnRdID0gaHRtbERhdGEubWF0Y2goY2F0Y2hTbGF0ZUZyYWdtZW50KSB8fCBbXTtcbiAgcmV0dXJuIGZyYWdtZW50O1xufTtcbmNvbnN0IGJ5dGVzTmFtZSA9ICckJGtleXN0YXRpY1VpbnQ4QXJyYXkkJCc7XG5mdW5jdGlvbiB3aXRoUGFzdGluZyhlZGl0b3IpIHtcbiAgY29uc3Qge1xuICAgIGluc2VydFRleHREYXRhXG4gIH0gPSBlZGl0b3I7XG4gIGVkaXRvci5zZXRGcmFnbWVudERhdGEgPSBkYXRhID0+IHtcbiAgICBzZXRGcmFnbWVudERhdGEoZWRpdG9yLCBkYXRhKTtcbiAgfTtcbiAgZWRpdG9yLmluc2VydEZyYWdtZW50RGF0YSA9IGRhdGEgPT4ge1xuICAgIC8qKlxuICAgICAqIENoZWNraW5nIGNvcGllZCBmcmFnbWVudCBmcm9tIGFwcGxpY2F0aW9uL3gtc2xhdGUtZnJhZ21lbnQgb3IgZGF0YS1zbGF0ZS1mcmFnbWVudFxuICAgICAqL1xuICAgIGNvbnN0IGZyYWdtZW50ID0gZGF0YS5nZXREYXRhKGBhcHBsaWNhdGlvbi8ke2NsaXBib2FyZEZvcm1hdEtleX1gKSB8fCBnZXRTbGF0ZUZyYWdtZW50QXR0cmlidXRlKGRhdGEpO1xuICAgIGlmIChmcmFnbWVudCkge1xuICAgICAgY29uc3QgZGVjb2RlZCA9IGRlY29kZVVSSUNvbXBvbmVudCh3aW5kb3cuYXRvYihmcmFnbWVudCkpO1xuICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShkZWNvZGVkLCAoa2V5LCB2YWwpID0+IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnICYmIHZhbCAhPT0gbnVsbCAmJiBieXRlc05hbWUgaW4gdmFsICYmIHR5cGVvZiB2YWxbYnl0ZXNOYW1lXSA9PT0gJ3N0cmluZycgPyB0b1VpbnQ4QXJyYXkodmFsW2J5dGVzTmFtZV0pIDogdmFsKTtcbiAgICAgIGVkaXRvci5pbnNlcnRGcmFnbWVudChwYXJzZWQpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcbiAgZWRpdG9yLmluc2VydFRleHREYXRhID0gZGF0YSA9PiB7XG4gICAgY29uc3QgYmxvY2tBYm92ZSA9IEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgIG1hdGNoOiBpc0Jsb2NrXG4gICAgfSk7XG4gICAgaWYgKChibG9ja0Fib3ZlID09PSBudWxsIHx8IGJsb2NrQWJvdmUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJsb2NrQWJvdmVbMF0udHlwZSkgPT09ICdjb2RlJykge1xuICAgICAgY29uc3QgcGxhaW4gPSBkYXRhLmdldERhdGEoJ3RleHQvcGxhaW4nKTtcbiAgICAgIGVkaXRvci5pbnNlcnRUZXh0KHBsYWluKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBsZXQgdnNDb2RlRWRpdG9yRGF0YSA9IGRhdGEuZ2V0RGF0YSgndnNjb2RlLWVkaXRvci1kYXRhJyk7XG4gICAgaWYgKHZzQ29kZUVkaXRvckRhdGEpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHZzQ29kZURhdGEgPSBKU09OLnBhcnNlKHZzQ29kZUVkaXRvckRhdGEpO1xuICAgICAgICBpZiAoKHZzQ29kZURhdGEgPT09IG51bGwgfHwgdnNDb2RlRGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdnNDb2RlRGF0YS5tb2RlKSA9PT0gJ21hcmtkb3duJyB8fCAodnNDb2RlRGF0YSA9PT0gbnVsbCB8fCB2c0NvZGVEYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2c0NvZGVEYXRhLm1vZGUpID09PSAnbWR4Jykge1xuICAgICAgICAgIGNvbnN0IHBsYWluID0gZGF0YS5nZXREYXRhKCd0ZXh0L3BsYWluJyk7XG4gICAgICAgICAgaWYgKHBsYWluKSB7XG4gICAgICAgICAgICBjb25zdCBmcmFnbWVudCA9IGRlc2VyaWFsaXplTWFya2Rvd24ocGxhaW4pO1xuICAgICAgICAgICAgaW5zZXJ0RnJhZ21lbnRCdXREaWZmZXJlbnQoZWRpdG9yLCBmcmFnbWVudCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBwbGFpbiA9IGRhdGEuZ2V0RGF0YSgndGV4dC9wbGFpbicpO1xuICAgIGlmIChcbiAgICAvLyBpc1ZhbGlkVVJMIGlzIGEgYml0IG1vcmUgcGVybWlzc2l2ZSB0aGFuIGEgdXNlciBtaWdodCBleHBlY3RcbiAgICAvLyBzbyBmb3IgcGFzdGluZywgd2UnbGwgY29uc3RyYWluIGl0IHRvIHN0YXJ0aW5nIHdpdGggaHR0cHM6Ly8gb3IgaHR0cDovL1xuICAgIHVybFBhdHRlcm4udGVzdChwbGFpbikgJiYgaXNWYWxpZFVSTChwbGFpbikgJiYgZWRpdG9yLnNlbGVjdGlvbiAmJiAhUmFuZ2UuaXNDb2xsYXBzZWQoZWRpdG9yLnNlbGVjdGlvbikgJiZcbiAgICAvLyB3ZSBvbmx5IHdhbnQgdG8gdHVybiB0aGUgc2VsZWN0ZWQgdGV4dCBpbnRvIGEgbGluayBpZiB0aGUgc2VsZWN0aW9uIGlzIHdpdGhpbiB0aGUgc2FtZSBibG9ja1xuICAgIEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgIG1hdGNoOiBub2RlID0+IGlzQmxvY2sobm9kZSkgJiYgIWlzQmxvY2sobm9kZS5jaGlsZHJlblswXSlcbiAgICB9KSAmJlxuICAgIC8vIGFuZCB0aGVyZSBpcyBvbmx5IHRleHQocG90ZW50aWFsbHkgd2l0aCBtYXJrcykgaW4gdGhlIHNlbGVjdGlvblxuICAgIC8vIG5vIG90aGVyIGxpbmtzXG4gICAgRWRpdG9yLm5vZGVzKGVkaXRvciwge1xuICAgICAgbWF0Y2g6IG5vZGUgPT4gbm9kZS50eXBlID09PSAnbGluaydcbiAgICB9KS5uZXh0KCkuZG9uZSkge1xuICAgICAgVHJhbnNmb3Jtcy53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgIHR5cGU6ICdsaW5rJyxcbiAgICAgICAgaHJlZjogcGxhaW4sXG4gICAgICAgIGNoaWxkcmVuOiBbXVxuICAgICAgfSwge1xuICAgICAgICBzcGxpdDogdHJ1ZVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3QgaHRtbCA9IGRhdGEuZ2V0RGF0YSgndGV4dC9odG1sJyk7XG4gICAgaWYgKGh0bWwpIHtcbiAgICAgIGNvbnN0IGZyYWdtZW50ID0gZGVzZXJpYWxpemVIVE1MKGh0bWwpO1xuICAgICAgaW5zZXJ0RnJhZ21lbnRCdXREaWZmZXJlbnQoZWRpdG9yLCBmcmFnbWVudCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHBsYWluKSB7XG4gICAgICBjb25zdCBmcmFnbWVudCA9IGRlc2VyaWFsaXplTWFya2Rvd24ocGxhaW4pO1xuICAgICAgaW5zZXJ0RnJhZ21lbnRCdXREaWZmZXJlbnQoZWRpdG9yLCBmcmFnbWVudCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGluc2VydFRleHREYXRhKGRhdGEpO1xuICB9O1xuICByZXR1cm4gZWRpdG9yO1xufVxuXG5jb25zdCBzaG9ydGN1dHMgPSB7XG4gICcuLi4nOiAn4oCmJyxcbiAgJy0tPic6ICfihpInLFxuICAnLT4nOiAn4oaSJyxcbiAgJzwtJzogJ+KGkCcsXG4gICc8LS0nOiAn4oaQJyxcbiAgJy0tJzogJ+KAkydcbn07XG5mdW5jdGlvbiB3aXRoU2hvcnRjdXRzKGVkaXRvcikge1xuICBjb25zdCB7XG4gICAgaW5zZXJ0VGV4dFxuICB9ID0gZWRpdG9yO1xuICBlZGl0b3IuaW5zZXJ0VGV4dCA9IHRleHQgPT4ge1xuICAgIGluc2VydFRleHQodGV4dCk7XG4gICAgaWYgKHRleHQgPT09ICcgJyAmJiBlZGl0b3Iuc2VsZWN0aW9uICYmIFJhbmdlLmlzQ29sbGFwc2VkKGVkaXRvci5zZWxlY3Rpb24pKSB7XG4gICAgICBjb25zdCBzZWxlY3Rpb25Qb2ludCA9IGVkaXRvci5zZWxlY3Rpb24uYW5jaG9yO1xuICAgICAgY29uc3QgYW5jZXN0b3JCbG9jayA9IEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgICAgbWF0Y2g6IGlzQmxvY2tcbiAgICAgIH0pO1xuICAgICAgaWYgKGFuY2VzdG9yQmxvY2spIHtcbiAgICAgICAgT2JqZWN0LmtleXMoc2hvcnRjdXRzKS5mb3JFYWNoKHNob3J0Y3V0ID0+IHtcbiAgICAgICAgICBjb25zdCBwb2ludEJlZm9yZSA9IEVkaXRvci5iZWZvcmUoZWRpdG9yLCBzZWxlY3Rpb25Qb2ludCwge1xuICAgICAgICAgICAgdW5pdDogJ2NoYXJhY3RlcicsXG4gICAgICAgICAgICBkaXN0YW5jZTogc2hvcnRjdXQubGVuZ3RoICsgMVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmIChwb2ludEJlZm9yZSAmJiBQYXRoLmlzRGVzY2VuZGFudChwb2ludEJlZm9yZS5wYXRoLCBhbmNlc3RvckJsb2NrWzFdKSkge1xuICAgICAgICAgICAgY29uc3QgcmFuZ2UgPSB7XG4gICAgICAgICAgICAgIGFuY2hvcjogc2VsZWN0aW9uUG9pbnQsXG4gICAgICAgICAgICAgIGZvY3VzOiBwb2ludEJlZm9yZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHN0ciA9IEVkaXRvci5zdHJpbmcoZWRpdG9yLCByYW5nZSk7XG4gICAgICAgICAgICBpZiAoc3RyLnNsaWNlKDAsIHNob3J0Y3V0Lmxlbmd0aCkgPT09IHNob3J0Y3V0KSB7XG4gICAgICAgICAgICAgIGVkaXRvci5oaXN0b3J5LnVuZG9zLnB1c2goe1xuICAgICAgICAgICAgICAgIG9wZXJhdGlvbnM6IFtdLFxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbkJlZm9yZTogZWRpdG9yLnNlbGVjdGlvblxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCByYW5nZSk7XG4gICAgICAgICAgICAgIGVkaXRvci5pbnNlcnRUZXh0KHNob3J0Y3V0c1tzaG9ydGN1dF0gKyAnICcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICByZXR1cm4gZWRpdG9yO1xufVxuXG5mdW5jdGlvbiB3aXRoU29mdEJyZWFrcyhlZGl0b3IpIHtcbiAgLy8gVE9ETzogc2hvdWxkIHNvZnQgYnJlYWtzIG9ubHkgd29yayBpbiBwYXJ0aWN1bGFyIHBsYWNlc1xuICBlZGl0b3IuaW5zZXJ0U29mdEJyZWFrID0gKCkgPT4ge1xuICAgIFRyYW5zZm9ybXMuaW5zZXJ0VGV4dChlZGl0b3IsICdcXG4nKTtcbiAgfTtcbiAgcmV0dXJuIGVkaXRvcjtcbn1cblxuY29uc3QgSE9US0VZUyA9IHtcbiAgJ21vZCtiJzogJ2JvbGQnLFxuICAnbW9kK2knOiAnaXRhbGljJyxcbiAgJ21vZCt1JzogJ3VuZGVybGluZSdcbn07XG5mdW5jdGlvbiBpc01hcmtBY3RpdmUoZWRpdG9yLCBtYXJrKSB7XG4gIGNvbnN0IG1hcmtzID0gRWRpdG9yLm1hcmtzKGVkaXRvcik7XG4gIGlmIChtYXJrcyAhPT0gbnVsbCAmJiBtYXJrcyAhPT0gdm9pZCAwICYmIG1hcmtzW21hcmtdKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLy8gc2VlIHRoZSBzdHVmZiBhYm91dCBtYXJrcyBpbiB0b29sYmFyLXN0YXRlIGZvciB3aHkgdGhpcyBpcyBoZXJlXG4gIGZvciAoY29uc3QgZW50cnkgb2YgRWRpdG9yLm5vZGVzKGVkaXRvciwge1xuICAgIG1hdGNoOiBUZXh0JDEuaXNUZXh0XG4gIH0pKSB7XG4gICAgaWYgKGVudHJ5WzBdW21hcmtdKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuY29uc3QgYXJyb3dLZXlUb0RpcmVjdGlvbiA9IG5ldyBNYXAoW1snQXJyb3dVcCcsICd1cCddLCBbJ0Fycm93RG93bicsICdkb3duJ10sIFsnQXJyb3dMZWZ0JywgJ2xlZnQnXSwgWydBcnJvd1JpZ2h0JywgJ3JpZ2h0J11dKTtcbmNvbnN0IGdldEtleURvd25IYW5kbGVyID0gKGVkaXRvciwgZG9jdW1lbnRGZWF0dXJlcykgPT4gZXZlbnQgPT4ge1xuICBpZiAoZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuO1xuICBmb3IgKGNvbnN0IGhvdGtleSBpbiBIT1RLRVlTKSB7XG4gICAgaWYgKGRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5pbmxpbmVNYXJrc1tIT1RLRVlTW2hvdGtleV1dICYmIGlzSG90a2V5KGhvdGtleSwgZXZlbnQubmF0aXZlRXZlbnQpKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgbWFyayA9IEhPVEtFWVNbaG90a2V5XTtcbiAgICAgIGNvbnN0IGlzQWN0aXZlID0gaXNNYXJrQWN0aXZlKGVkaXRvciwgbWFyayk7XG4gICAgICBpZiAoaXNBY3RpdmUpIHtcbiAgICAgICAgRWRpdG9yLnJlbW92ZU1hcmsoZWRpdG9yLCBtYXJrKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIEVkaXRvci5hZGRNYXJrKGVkaXRvciwgbWFyaywgdHJ1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG4gIGlmIChpc0hvdGtleSgnbW9kK1xcXFwnLCBldmVudC5uYXRpdmVFdmVudCkpIHtcbiAgICBjbGVhckZvcm1hdHRpbmcoZWRpdG9yKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGRvY3VtZW50RmVhdHVyZXMubGlua3MgJiYgaXNIb3RrZXkoJ21vZCtrJywgZXZlbnQubmF0aXZlRXZlbnQpKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB3cmFwTGluayhlZGl0b3IsICcnKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGV2ZW50LmtleSA9PT0gJ1RhYicpIHtcbiAgICBjb25zdCBkaWRBY3Rpb24gPSBldmVudC5zaGlmdEtleSA/IHVubmVzdExpc3QoZWRpdG9yKSA6IG5lc3RMaXN0KGVkaXRvcik7XG4gICAgaWYgKGRpZEFjdGlvbikge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cbiAgaWYgKGV2ZW50LmtleSA9PT0gJ1RhYicgJiYgZWRpdG9yLnNlbGVjdGlvbikge1xuICAgIGNvbnN0IGxheW91dEFyZWEgPSBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgICBtYXRjaDogbm9kZSA9PiBub2RlLnR5cGUgPT09ICdsYXlvdXQtYXJlYScgfHwgbm9kZS50eXBlID09PSAndGFibGUtY2VsbCdcbiAgICB9KTtcbiAgICBpZiAobGF5b3V0QXJlYSkge1xuICAgICAgY29uc3QgbGF5b3V0QXJlYVRvRW50ZXIgPSBldmVudC5zaGlmdEtleSA/IEVkaXRvci5iZWZvcmUoZWRpdG9yLCBsYXlvdXRBcmVhWzFdLCB7XG4gICAgICAgIHVuaXQ6ICdibG9jaydcbiAgICAgIH0pIDogRWRpdG9yLmFmdGVyKGVkaXRvciwgbGF5b3V0QXJlYVsxXSwge1xuICAgICAgICB1bml0OiAnYmxvY2snXG4gICAgICB9KTtcbiAgICAgIFRyYW5zZm9ybXMuc2V0U2VsZWN0aW9uKGVkaXRvciwge1xuICAgICAgICBhbmNob3I6IGxheW91dEFyZWFUb0VudGVyLFxuICAgICAgICBmb2N1czogbGF5b3V0QXJlYVRvRW50ZXJcbiAgICAgIH0pO1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH1cbiAgaWYgKGlzSG90a2V5KCdtb2QrYScsIGV2ZW50KSkge1xuICAgIGNvbnN0IHBhcmVudFRhYmxlID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgICAgbWF0Y2g6IG5vZGVUeXBlTWF0Y2hlcigndGFibGUnKVxuICAgIH0pO1xuICAgIGlmIChwYXJlbnRUYWJsZSkge1xuICAgICAgVHJhbnNmb3Jtcy5zZWxlY3QoZWRpdG9yLCBwYXJlbnRUYWJsZVsxXSk7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuICBjb25zdCBkaXJlY3Rpb24gPSBhcnJvd0tleVRvRGlyZWN0aW9uLmdldChldmVudC5rZXkpO1xuICBjb25zdCB7XG4gICAgc2VsZWN0aW9uXG4gIH0gPSBlZGl0b3I7XG4gIGlmIChkaXJlY3Rpb24gJiYgc2VsZWN0aW9uKSB7XG4gICAgY29uc3Qgc2VsZWN0ZWRUYWJsZUFyZWEgPSBnZXRTZWxlY3RlZFRhYmxlQXJlYShlZGl0b3IpO1xuICAgIGlmIChzZWxlY3RlZFRhYmxlQXJlYSkge1xuICAgICAgdmFyIF9FZGl0b3IkYWJvdmUsIF9FZGl0b3IkYWJvdmUyO1xuICAgICAgY29uc3QgZm9jdXNDZWxsUGF0aCA9IChfRWRpdG9yJGFib3ZlID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgICAgICBtYXRjaDogbm9kZVR5cGVNYXRjaGVyKCd0YWJsZS1jZWxsJyksXG4gICAgICAgIGF0OiBzZWxlY3Rpb24uZm9jdXMucGF0aFxuICAgICAgfSkpID09PSBudWxsIHx8IF9FZGl0b3IkYWJvdmUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9FZGl0b3IkYWJvdmVbMV07XG4gICAgICBjb25zdCBhbmNob3JDZWxsUGF0aCA9IChfRWRpdG9yJGFib3ZlMiA9IEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgICAgbWF0Y2g6IG5vZGVUeXBlTWF0Y2hlcigndGFibGUtY2VsbCcpLFxuICAgICAgICBhdDogc2VsZWN0aW9uLmFuY2hvci5wYXRoXG4gICAgICB9KSkgPT09IG51bGwgfHwgX0VkaXRvciRhYm92ZTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9FZGl0b3IkYWJvdmUyWzFdO1xuICAgICAgaWYgKCFmb2N1c0NlbGxQYXRoIHx8ICFhbmNob3JDZWxsUGF0aCkgcmV0dXJuO1xuICAgICAgY29uc3QgbmV3Q2VsbFBhdGggPSBnZXRDZWxsUGF0aEluRGlyZWN0aW9uKGVkaXRvciwgZm9jdXNDZWxsUGF0aCwgZGlyZWN0aW9uKTtcbiAgICAgIGlmIChuZXdDZWxsUGF0aCkge1xuICAgICAgICBpZiAoc2VsZWN0ZWRUYWJsZUFyZWEuc2luZ2xlQ2VsbCA9PT0gJ25vdC1zZWxlY3RlZCcpIHtcbiAgICAgICAgICBpZiAoZGlyZWN0aW9uICE9PSAndXAnICYmIGRpcmVjdGlvbiAhPT0gJ2Rvd24nKSByZXR1cm47XG4gICAgICAgICAgY29uc3QgW25vZGUsIG9mZnNldF0gPSBSZWFjdEVkaXRvci50b0RPTVBvaW50KGVkaXRvciwgc2VsZWN0aW9uLmZvY3VzKTtcbiAgICAgICAgICBjb25zdCBibG9ja0VsZW1lbnQgPSBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgICAgICAgICBtYXRjaDogaXNCbG9jayxcbiAgICAgICAgICAgIGF0OiBzZWxlY3Rpb24uZm9jdXMucGF0aFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmICghYmxvY2tFbGVtZW50KSByZXR1cm47XG4gICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3VwJyAmJiBibG9ja0VsZW1lbnRbMV0uc2xpY2UoZm9jdXNDZWxsUGF0aC5sZW5ndGgpLnNvbWUoaWR4ID0+IGlkeCAhPT0gMCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2Rvd24nKSB7XG4gICAgICAgICAgICBjb25zdCBbcGFyZW50Tm9kZV0gPSBFZGl0b3IucGFyZW50KGVkaXRvciwgYmxvY2tFbGVtZW50WzFdKTtcbiAgICAgICAgICAgIGlmIChwYXJlbnROb2RlLmNoaWxkcmVuLmxlbmd0aCAtIDEgIT09IGJsb2NrRWxlbWVudFsxXVtibG9ja0VsZW1lbnRbMV0ubGVuZ3RoIC0gMV0pIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBbbm9kZSwgcGF0aF0gb2YgTm9kZS5hbmNlc3RvcnMoZWRpdG9yLCBibG9ja0VsZW1lbnRbMV0sIHtcbiAgICAgICAgICAgICAgcmV2ZXJzZTogdHJ1ZVxuICAgICAgICAgICAgfSkpIHtcbiAgICAgICAgICAgICAgaWYgKG5vZGUudHlwZSA9PT0gJ3RhYmxlLWNlbGwnKSBicmVhaztcbiAgICAgICAgICAgICAgY29uc3QgW3BhcmVudE5vZGVdID0gRWRpdG9yLnBhcmVudChlZGl0b3IsIHBhdGgpO1xuICAgICAgICAgICAgICBpZiAocGFyZW50Tm9kZS5jaGlsZHJlbi5sZW5ndGggLSAxID09PSBwYXRoW3BhdGgubGVuZ3RoIC0gMV0pIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGRvbU5vZGVGb3JCbG9ja0VsZW1lbnQgPSBSZWFjdEVkaXRvci50b0RPTU5vZGUoZWRpdG9yLCBibG9ja0VsZW1lbnRbMF0pO1xuICAgICAgICAgIGNvbnN0IHJhbmdlT2ZXaG9sZUJsb2NrID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICAgICAgICByYW5nZU9mV2hvbGVCbG9jay5zZWxlY3ROb2RlQ29udGVudHMoZG9tTm9kZUZvckJsb2NrRWxlbWVudCk7XG4gICAgICAgICAgY29uc3QgcmVjdHNPZlJhbmdlT2ZXaG9sZUJsb2NrID0gQXJyYXkuZnJvbShyYW5nZU9mV2hvbGVCbG9jay5nZXRDbGllbnRSZWN0cygpKTtcbiAgICAgICAgICBjb25zdCBuZXdSYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgICAgICAgbmV3UmFuZ2Uuc2V0U3RhcnQobm9kZSwgb2Zmc2V0KTtcbiAgICAgICAgICBuZXdSYW5nZS5zZXRFbmQobm9kZSwgb2Zmc2V0KTtcbiAgICAgICAgICBjb25zdCByYW5nZVJlY3RzID0gQXJyYXkuZnJvbShuZXdSYW5nZS5nZXRDbGllbnRSZWN0cygpKTtcbiAgICAgICAgICBjb25zdCBsYXN0UmFuZ2VSZWN0ID0gcmFuZ2VSZWN0c1tyYW5nZVJlY3RzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgIGNvbnN0IGtleSA9IGRpcmVjdGlvbiA9PT0gJ3VwJyA/ICd0b3AnIDogJ2JvdHRvbSc7XG4gICAgICAgICAgY29uc3QgZXhwZWN0ZWQgPSBrZXkgPT09ICd0b3AnID8gTWF0aC5taW4oLi4ucmVjdHNPZlJhbmdlT2ZXaG9sZUJsb2NrLm1hcCh4ID0+IHgudG9wKSkgOiBNYXRoLm1heCguLi5yZWN0c09mUmFuZ2VPZldob2xlQmxvY2subWFwKHggPT4geC5ib3R0b20pKTtcbiAgICAgICAgICBpZiAobGFzdFJhbmdlUmVjdFtrZXldID09PSBleHBlY3RlZCkge1xuICAgICAgICAgICAgY29uc3QgZm9jdXMgPSBFZGl0b3JbZGlyZWN0aW9uID09PSAndXAnID8gJ2VuZCcgOiAnc3RhcnQnXShlZGl0b3IsIG5ld0NlbGxQYXRoKTtcbiAgICAgICAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwge1xuICAgICAgICAgICAgICBmb2N1cyxcbiAgICAgICAgICAgICAgYW5jaG9yOiBldmVudC5zaGlmdEtleSA/IHNlbGVjdGlvbi5hbmNob3IgOiBmb2N1c1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFldmVudC5zaGlmdEtleSkgcmV0dXJuO1xuICAgICAgICBpZiAoUGF0aC5lcXVhbHMobmV3Q2VsbFBhdGgsIGFuY2hvckNlbGxQYXRoKSkge1xuICAgICAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgbmV3Q2VsbFBhdGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwge1xuICAgICAgICAgICAgYW5jaG9yOiBzZWxlY3Rpb24uYW5jaG9yLFxuICAgICAgICAgICAgZm9jdXM6IEVkaXRvci5zdGFydChlZGl0b3IsIG5ld0NlbGxQYXRoKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlRG9jdW1lbnRFZGl0b3IoZG9jdW1lbnRGZWF0dXJlcywgY29tcG9uZW50QmxvY2tzKSB7XG4gIHJldHVybiB3aXRoUGFzdGluZyh3aXRoSW1hZ2VzKHdpdGhTb2Z0QnJlYWtzKHdpdGhJbnNlcnRNZW51KHdpdGhTaG9ydGN1dHMod2l0aEhlYWRpbmcod2l0aEJsb2NrcXVvdGUod2l0aE1hcmtzKGRvY3VtZW50RmVhdHVyZXMsIGNvbXBvbmVudEJsb2Nrcywgd2l0aEJsb2NrTWFya2Rvd25TaG9ydGN1dHMoZG9jdW1lbnRGZWF0dXJlcywgY29tcG9uZW50QmxvY2tzLCBfY3JlYXRlRG9jdW1lbnRFZGl0b3Iod2l0aEhpc3Rvcnkod2l0aFJlYWN0KGNyZWF0ZUVkaXRvcigpKSksIGRvY3VtZW50RmVhdHVyZXMsIGNvbXBvbmVudEJsb2NrcykpKSkpKSkpKSk7XG59XG5mdW5jdGlvbiBEb2N1bWVudEVkaXRvcih7XG4gIG9uQ2hhbmdlLFxuICB2YWx1ZSxcbiAgY29tcG9uZW50QmxvY2tzLFxuICBkb2N1bWVudEZlYXR1cmVzLFxuICAuLi5wcm9wc1xufSkge1xuICBsZXQgZW50cnlMYXlvdXRQYW5lID0gdXNlRW50cnlMYXlvdXRTcGxpdFBhbmVDb250ZXh0KCk7XG4gIGNvbnN0IGVkaXRvciA9IHVzZU1lbW8oKCkgPT4gY3JlYXRlRG9jdW1lbnRFZGl0b3IoZG9jdW1lbnRGZWF0dXJlcywgY29tcG9uZW50QmxvY2tzKSwgW2RvY3VtZW50RmVhdHVyZXMsIGNvbXBvbmVudEJsb2Nrc10pO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChcImRpdlwiLCB7XG4gICAgXCJkYXRhLWxheW91dFwiOiBlbnRyeUxheW91dFBhbmUsXG4gICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKGNzcyh7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRva2VuU2NoZW1hLmNvbG9yLmJhY2tncm91bmQuY2FudmFzLFxuICAgICAgbWluV2lkdGg6IDAsXG4gICAgICAnJltkYXRhLWxheW91dD1cIm1haW5cIl0nOiB7XG4gICAgICAgIGZsZXg6IDEsXG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgZmxleERpcmVjdGlvbjogJ2NvbHVtbidcbiAgICAgIH0sXG4gICAgICAnJjpub3QoW2RhdGEtbGF5b3V0PVwibWFpblwiXSknOiB7XG4gICAgICAgIGJvcmRlcjogYCR7dG9rZW5TY2hlbWEuc2l6ZS5ib3JkZXIucmVndWxhcn0gc29saWQgJHt0b2tlblNjaGVtYS5jb2xvci5ib3JkZXIubmV1dHJhbH1gLFxuICAgICAgICBib3JkZXJSYWRpdXM6IHRva2VuU2NoZW1hLnNpemUucmFkaXVzLm1lZGl1bVxuICAgICAgfVxuICAgIH0pLCAna2V5c3Rhci1kb2N1bWVudC1lZGl0b3InKSxcbiAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeHMoRG9jdW1lbnRFZGl0b3JQcm92aWRlciwge1xuICAgICAgY29tcG9uZW50QmxvY2tzOiBjb21wb25lbnRCbG9ja3MsXG4gICAgICBkb2N1bWVudEZlYXR1cmVzOiBkb2N1bWVudEZlYXR1cmVzLFxuICAgICAgZWRpdG9yOiBlZGl0b3IsXG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBvbkNoYW5nZTogdmFsdWUgPT4ge1xuICAgICAgICBvbkNoYW5nZSA9PT0gbnVsbCB8fCBvbkNoYW5nZSA9PT0gdm9pZCAwIHx8IG9uQ2hhbmdlKHZhbHVlKTtcbiAgICAgICAgLy8gdGhpcyBmaXhlcyBhIHN0cmFuZ2UgaXNzdWUgaW4gU2FmYXJpIHdoZXJlIHRoZSBzZWxlY3Rpb24gc3RheXMgaW5zaWRlIG9mIHRoZSBlZGl0b3JcbiAgICAgICAgLy8gYWZ0ZXIgYSBibHVyIGV2ZW50IGhhcHBlbnMgYnV0IHRoZSBzZWxlY3Rpb24gaXMgc3RpbGwgaW4gdGhlIGVkaXRvclxuICAgICAgICAvLyBzbyB0aGUgY3Vyc29yIGlzIHZpc3VhbGx5IGluIHRoZSB3cm9uZyBwbGFjZSBhbmQgaXQgaW5zZXJ0cyB0ZXh0IGJhY2t3YXJkc1xuICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIGlmIChzZWxlY3Rpb24gJiYgIVJlYWN0RWRpdG9yLmlzRm9jdXNlZChlZGl0b3IpKSB7XG4gICAgICAgICAgY29uc3QgZWRpdG9yTm9kZSA9IFJlYWN0RWRpdG9yLnRvRE9NTm9kZShlZGl0b3IsIGVkaXRvcik7XG4gICAgICAgICAgaWYgKHNlbGVjdGlvbi5hbmNob3JOb2RlID09PSBlZGl0b3JOb2RlKSB7XG4gICAgICAgICAgICBSZWFjdEVkaXRvci5mb2N1cyhlZGl0b3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNoaWxkcmVuOiBbdXNlTWVtbygoKSA9PiBvbkNoYW5nZSAhPT0gdW5kZWZpbmVkICYmIC8qI19fUFVSRV9fKi9qc3goVG9vbGJhciwge1xuICAgICAgICBkb2N1bWVudEZlYXR1cmVzOiBkb2N1bWVudEZlYXR1cmVzXG4gICAgICB9KSwgW2RvY3VtZW50RmVhdHVyZXMsIG9uQ2hhbmdlXSksIC8qI19fUFVSRV9fKi9qc3goRG9jdW1lbnRFZGl0b3JFZGl0YWJsZSwge1xuICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgcmVhZE9ubHk6IG9uQ2hhbmdlID09PSB1bmRlZmluZWRcbiAgICAgIH0pLFxuICAgICAgLy8gZm9yIGRlYnVnZ2luZ1xuICAgICAgZmFsc2UgXVxuICAgIH0pXG4gIH0pO1xufVxuY29uc3QgSXNJbkVkaXRvckNvbnRleHQgPSAvKiNfX1BVUkVfXyovY3JlYXRlQ29udGV4dChmYWxzZSk7XG5mdW5jdGlvbiB1c2VJc0luRG9jdW1lbnRFZGl0b3IoKSB7XG4gIHJldHVybiB1c2VDb250ZXh0KElzSW5FZGl0b3JDb250ZXh0KTtcbn1cbmZ1bmN0aW9uIERvY3VtZW50RWRpdG9yUHJvdmlkZXIoe1xuICBjaGlsZHJlbixcbiAgZWRpdG9yLFxuICBvbkNoYW5nZSxcbiAgdmFsdWUsXG4gIGNvbXBvbmVudEJsb2NrcyxcbiAgZG9jdW1lbnRGZWF0dXJlc1xufSkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIGNvbnN0IGlkZW50aXR5ID0gdXNlTWVtbygoKSA9PiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KSwgW2VkaXRvcl0pO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChJc0luRWRpdG9yQ29udGV4dC5Qcm92aWRlciwge1xuICAgIHZhbHVlOiB0cnVlLFxuICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KFNsYXRlXG4gICAgLy8gdGhpcyBmaXhlcyBpc3N1ZXMgd2l0aCBTbGF0ZSBjcmFzaGluZyB3aGVuIGEgZmFzdCByZWZyZXNoIG9jY2N1cnNcbiAgICAsIHtcbiAgICAgIGVkaXRvcjogZWRpdG9yLFxuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgb25DaGFuZ2U6IHZhbHVlID0+IHtcbiAgICAgICAgb25DaGFuZ2UodmFsdWUpO1xuICAgICAgICAvLyB0aGlzIGZpeGVzIGEgc3RyYW5nZSBpc3N1ZSBpbiBTYWZhcmkgd2hlcmUgdGhlIHNlbGVjdGlvbiBzdGF5cyBpbnNpZGUgb2YgdGhlIGVkaXRvclxuICAgICAgICAvLyBhZnRlciBhIGJsdXIgZXZlbnQgaGFwcGVucyBidXQgdGhlIHNlbGVjdGlvbiBpcyBzdGlsbCBpbiB0aGUgZWRpdG9yXG4gICAgICAgIC8vIHNvIHRoZSBjdXJzb3IgaXMgdmlzdWFsbHkgaW4gdGhlIHdyb25nIHBsYWNlIGFuZCBpdCBpbnNlcnRzIHRleHQgYmFja3dhcmRzXG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgaWYgKHNlbGVjdGlvbiAmJiAhUmVhY3RFZGl0b3IuaXNGb2N1c2VkKGVkaXRvcikpIHtcbiAgICAgICAgICBjb25zdCBlZGl0b3JOb2RlID0gUmVhY3RFZGl0b3IudG9ET01Ob2RlKGVkaXRvciwgZWRpdG9yKTtcbiAgICAgICAgICBpZiAoc2VsZWN0aW9uLmFuY2hvck5vZGUgPT09IGVkaXRvck5vZGUpIHtcbiAgICAgICAgICAgIFJlYWN0RWRpdG9yLmZvY3VzKGVkaXRvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goVGFibGVTZWxlY3Rpb25Qcm92aWRlciwge1xuICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChUb29sYmFyU3RhdGVQcm92aWRlciwge1xuICAgICAgICAgIGNvbXBvbmVudEJsb2NrczogY29tcG9uZW50QmxvY2tzLFxuICAgICAgICAgIGVkaXRvckRvY3VtZW50RmVhdHVyZXM6IGRvY3VtZW50RmVhdHVyZXMsXG4gICAgICAgICAgY2hpbGRyZW46IGNoaWxkcmVuXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0sIGlkZW50aXR5KVxuICB9KTtcbn1cbmZ1bmN0aW9uIGdldFByaXNtVG9rZW5MZW5ndGgodG9rZW4pIHtcbiAgaWYgKHR5cGVvZiB0b2tlbiA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdG9rZW4ubGVuZ3RoO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodG9rZW4uY29udGVudCkpIHtcbiAgICByZXR1cm4gdG9rZW4uY29udGVudC5yZWR1Y2UoKGwsIHQpID0+IGwgKyBnZXRQcmlzbVRva2VuTGVuZ3RoKHQpLCAwKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZ2V0UHJpc21Ub2tlbkxlbmd0aCh0b2tlbi5jb250ZW50KTtcbiAgfVxufVxuZnVuY3Rpb24gRG9jdW1lbnRFZGl0b3JFZGl0YWJsZShwcm9wcykge1xuICBjb25zdCBjb250YWluZXJTaXplID0gdXNlQ29udGVudFBhbmVsU2l6ZSgpO1xuICBjb25zdCBlbnRyeUxheW91dFBhbmUgPSB1c2VFbnRyeUxheW91dFNwbGl0UGFuZUNvbnRleHQoKTtcbiAgY29uc3QgZWRpdG9yID0gdXNlU2xhdGUoKTtcbiAgY29uc3Qge1xuICAgIGNvbXBvbmVudEJsb2NrcyxcbiAgICBkb2N1bWVudEZlYXR1cmVzXG4gIH0gPSB1c2VEb2N1bWVudEVkaXRvckNvbmZpZygpO1xuICBjb25zdCBvbktleURvd24gPSB1c2VNZW1vKCgpID0+IGdldEtleURvd25IYW5kbGVyKGVkaXRvciwgZG9jdW1lbnRGZWF0dXJlcyksIFtlZGl0b3IsIGRvY3VtZW50RmVhdHVyZXNdKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goQWN0aXZlQmxvY2tQb3BvdmVyUHJvdmlkZXIsIHtcbiAgICBlZGl0b3I6IGVkaXRvcixcbiAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChQcm9zZSwge1xuICAgICAgc2l6ZTogZW50cnlMYXlvdXRQYW5lID09PSAnbWFpbicgPyAnbWVkaXVtJyA6ICdyZWd1bGFyJyxcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KEVkaXRhYmxlLCB7XG4gICAgICAgIHBsYWNlaG9sZGVyOiBcIlN0YXJ0IHdyaXRpbmcgb3IgcHJlc3MgXFxcIi9cXFwiIGZvciBjb21tYW5kcy4uLlwiLFxuICAgICAgICBkZWNvcmF0ZTogdXNlQ2FsbGJhY2soKFtub2RlLCBwYXRoXSkgPT4ge1xuICAgICAgICAgIGxldCBkZWNvcmF0aW9ucyA9IFtdO1xuICAgICAgICAgIGlmIChub2RlLnR5cGUgPT09ICdjb21wb25lbnQtYmxvY2snKSB7XG4gICAgICAgICAgICBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDEgJiYgRWxlbWVudCQxLmlzRWxlbWVudChub2RlLmNoaWxkcmVuWzBdKSAmJiBub2RlLmNoaWxkcmVuWzBdLnR5cGUgPT09ICdjb21wb25lbnQtaW5saW5lLXByb3AnICYmIG5vZGUuY2hpbGRyZW5bMF0ucHJvcFBhdGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICByZXR1cm4gZGVjb3JhdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2RlLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoTm9kZS5zdHJpbmcoY2hpbGQpID09PSAnJyAmJiBFbGVtZW50JDEuaXNFbGVtZW50KGNoaWxkKSAmJiAoY2hpbGQudHlwZSA9PT0gJ2NvbXBvbmVudC1ibG9jay1wcm9wJyB8fCBjaGlsZC50eXBlID09PSAnY29tcG9uZW50LWlubGluZS1wcm9wJykgJiYgY2hpbGQucHJvcFBhdGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gRWRpdG9yLnN0YXJ0KGVkaXRvciwgWy4uLnBhdGgsIGluZGV4XSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSBnZXRQbGFjZWhvbGRlclRleHRGb3JQcm9wUGF0aChjaGlsZC5wcm9wUGF0aCwgY29tcG9uZW50QmxvY2tzW25vZGUuY29tcG9uZW50XS5zY2hlbWEsIG5vZGUucHJvcHMpO1xuICAgICAgICAgICAgICAgIGlmIChwbGFjZWhvbGRlcikge1xuICAgICAgICAgICAgICAgICAgZGVjb3JhdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyLFxuICAgICAgICAgICAgICAgICAgICBhbmNob3I6IHN0YXJ0LFxuICAgICAgICAgICAgICAgICAgICBmb2N1czogc3RhcnRcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChub2RlLnR5cGUgPT09ICdjb2RlJyAmJiBub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJiBub2RlLmNoaWxkcmVuWzBdLnR5cGUgPT09IHVuZGVmaW5lZCAmJiBub2RlLmxhbmd1YWdlICYmIG5vZGUubGFuZ3VhZ2UgaW4gUHJpc20ubGFuZ3VhZ2VzKSB7XG4gICAgICAgICAgICBjb25zdCB0ZXh0UGF0aCA9IFsuLi5wYXRoLCAwXTtcbiAgICAgICAgICAgIGNvbnN0IHRva2VucyA9IFByaXNtLnRva2VuaXplKG5vZGUuY2hpbGRyZW5bMF0udGV4dCwgUHJpc20ubGFuZ3VhZ2VzW25vZGUubGFuZ3VhZ2VdKTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNvbnN1bWVUb2tlbnMoc3RhcnQsIHRva2Vucykge1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIHRva2Vucykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IGdldFByaXNtVG9rZW5MZW5ndGgodG9rZW4pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVuZCA9IHN0YXJ0ICsgbGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdG9rZW4gIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICBkZWNvcmF0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgWydwcmlzbV8nICsgdG9rZW4udHlwZV06IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGFuY2hvcjoge1xuICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHRleHRQYXRoLFxuICAgICAgICAgICAgICAgICAgICAgIG9mZnNldDogc3RhcnRcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZm9jdXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICBwYXRoOiB0ZXh0UGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IGVuZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIGNvbnN1bWVUb2tlbnMoc3RhcnQsIEFycmF5LmlzQXJyYXkodG9rZW4uY29udGVudCkgPyB0b2tlbi5jb250ZW50IDogW3Rva2VuLmNvbnRlbnRdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3RhcnQgPSBlbmQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN1bWVUb2tlbnMoMCwgdG9rZW5zKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGRlY29yYXRpb25zO1xuICAgICAgICB9LCBbZWRpdG9yLCBjb21wb25lbnRCbG9ja3NdKSxcbiAgICAgICAgb25LZXlEb3duOiBvbktleURvd24sXG4gICAgICAgIHJlbmRlckVsZW1lbnQ6IHJlbmRlckVsZW1lbnQsXG4gICAgICAgIHJlbmRlckxlYWY6IHJlbmRlckxlYWYsXG4gICAgICAgIC4uLnByb3BzLFxuICAgICAgICAuLi50b0RhdGFBdHRyaWJ1dGVzKHtcbiAgICAgICAgICBjb250YWluZXI6IGNvbnRhaW5lclNpemUsXG4gICAgICAgICAgbGF5b3V0OiBlbnRyeUxheW91dFBhbmVcbiAgICAgICAgfSksXG4gICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhlZGl0YWJsZVN0eWxlcywgcHJvcHMuY2xhc3NOYW1lKVxuICAgICAgfSlcbiAgICB9KVxuICB9KTtcbn1cbmxldCBzdHlsZXMgPSB7XG4gIGZsZXg6IDEsXG4gIGhlaWdodDogJ2F1dG8nLFxuICBtaW5IZWlnaHQ6IHRva2VuU2NoZW1hLnNpemUuc2NhbGVbMjAwMF0sXG4gIG1pbldpZHRoOiAwLFxuICBwYWRkaW5nOiB0b2tlblNjaGVtYS5zaXplLnNwYWNlLm1lZGl1bSxcbiAgJyZbZGF0YS1sYXlvdXQ9XCJtYWluXCJdJzoge1xuICAgIGJveFNpemluZzogJ2JvcmRlci1ib3gnLFxuICAgIGhlaWdodDogJzEwMCUnLFxuICAgIHBhZGRpbmc6IDAsXG4gICAgcGFkZGluZ1RvcDogdG9rZW5TY2hlbWEuc2l6ZS5zcGFjZS5tZWRpdW0sXG4gICAgbWluSGVpZ2h0OiAwLFxuICAgIG1pbldpZHRoOiAwLFxuICAgIG1heFdpZHRoOiA4MDAsXG4gICAgbWFyZ2luSW5saW5lOiAnYXV0bycsXG4gICAgW2JyZWFrcG9pbnRRdWVyaWVzLmFib3ZlLm1vYmlsZV06IHtcbiAgICAgIHBhZGRpbmc6IHRva2VuU2NoZW1hLnNpemUuc3BhY2UueGxhcmdlXG4gICAgfSxcbiAgICBbYnJlYWtwb2ludFF1ZXJpZXMuYWJvdmUudGFibGV0XToge1xuICAgICAgcGFkZGluZzogdG9rZW5TY2hlbWEuc2l6ZS5zcGFjZS54eGxhcmdlXG4gICAgfSxcbiAgICAnJltkYXRhLWNvbnRhaW5lcj1cIndpZGVcIl0nOiB7XG4gICAgICBwYWRkaW5nOiB0b2tlblNjaGVtYS5zaXplLnNjYWxlWzYwMF1cbiAgICB9XG4gIH1cbn07XG5jb25zdCBlZGl0YWJsZVN0eWxlcyA9IGNzcyh7XG4gIC4uLnN0eWxlcyxcbiAgYToge1xuICAgIGNvbG9yOiB0b2tlblNjaGVtYS5jb2xvci5mb3JlZ3JvdW5kLmFjY2VudFxuICB9XG59KTtcblxuY29uc3QgZW1wdHlPYmogPSB7fTtcbmxldCBpJDEgPSAwO1xuZnVuY3Rpb24gbmV3S2V5JDEoKSB7XG4gIHJldHVybiBpJDErKztcbn1cbmZ1bmN0aW9uIElubmVyQ2hpbGRGaWVsZElucHV0KHByb3BzKSB7XG4gIGNvbnN0IG91dGVyQ29uZmlnID0gdXNlRG9jdW1lbnRFZGl0b3JDb25maWcoKTtcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZSgoKSA9PiAoe1xuICAgIGtleTogbmV3S2V5JDEoKSxcbiAgICB2YWx1ZTogcHJvcHMudmFsdWVcbiAgfSkpO1xuICBjb25zdCBkb2N1bWVudEZlYXR1cmVzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIGdldFdob2xlRG9jdW1lbnRGZWF0dXJlc0ZvckNoaWxkRmllbGQob3V0ZXJDb25maWcuZG9jdW1lbnRGZWF0dXJlcywgcHJvcHMuc2NoZW1hLm9wdGlvbnMpO1xuICB9LCBbcHJvcHMuc2NoZW1hLCBvdXRlckNvbmZpZy5kb2N1bWVudEZlYXR1cmVzXSk7XG4gIGlmIChzdGF0ZS52YWx1ZSAhPT0gcHJvcHMudmFsdWUpIHtcbiAgICBzZXRTdGF0ZSh7XG4gICAgICBrZXk6IG5ld0tleSQxKCksXG4gICAgICB2YWx1ZTogcHJvcHMudmFsdWVcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChSZXNldEVudHJ5TGF5b3V0Q29udGV4dCwge1xuICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KEZpZWxkLCB7XG4gICAgICBsYWJlbDogcHJvcHMuc2NoZW1hLm9wdGlvbnMubGFiZWwsXG4gICAgICBjaGlsZHJlbjogaW5wdXRQcm9wcyA9PiAvKiNfX1BVUkVfXyovY3JlYXRlRWxlbWVudChEb2N1bWVudEVkaXRvciwge1xuICAgICAgICAuLi5pbnB1dFByb3BzLFxuICAgICAgICBrZXk6IHN0YXRlLmtleSxcbiAgICAgICAgY29tcG9uZW50QmxvY2tzOiBwcm9wcy5zY2hlbWEub3B0aW9ucy5jb21wb25lbnRCbG9ja3MgPT09ICdpbmhlcml0JyA/IG91dGVyQ29uZmlnLmNvbXBvbmVudEJsb2NrcyA6IGVtcHR5T2JqLFxuICAgICAgICBkb2N1bWVudEZlYXR1cmVzOiBkb2N1bWVudEZlYXR1cmVzLFxuICAgICAgICBvbkNoYW5nZTogdmFsID0+IHtcbiAgICAgICAgICBzZXRTdGF0ZShzdGF0ZSA9PiAoe1xuICAgICAgICAgICAga2V5OiBzdGF0ZS5rZXksXG4gICAgICAgICAgICB2YWx1ZTogdmFsXG4gICAgICAgICAgfSkpO1xuICAgICAgICAgIHByb3BzLm9uQ2hhbmdlKHZhbCk7XG4gICAgICAgIH0sXG4gICAgICAgIHZhbHVlOiBzdGF0ZS52YWx1ZVxuICAgICAgfSlcbiAgICB9KVxuICB9KTtcbn1cbmZ1bmN0aW9uIENoaWxkRmllbGRJbnB1dChwcm9wcykge1xuICBjb25zdCBkYXRhID0gZ2V0Q2hpbGRGaWVsZERhdGEocHJvcHMpO1xuICBpZiAocHJvcHMuc2NoZW1hLm9wdGlvbnMua2luZCA9PT0gJ2Jsb2NrJyAmJiAocHJvcHMuc2NoZW1hLm9wdGlvbnMuZWRpdEluID09PSAnYm90aCcgfHwgcHJvcHMuc2NoZW1hLm9wdGlvbnMuZWRpdEluID09PSAnbW9kYWwnKSAmJiBkYXRhLnZhbHVlKSB7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goSW5uZXJDaGlsZEZpZWxkSW5wdXQsIHtcbiAgICAgIHNjaGVtYTogcHJvcHMuc2NoZW1hLFxuICAgICAgLi4uZGF0YVxuICAgIH0pO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBnZXRJbnB1dENvbXBvbmVudChzY2hlbWEpIHtcbiAgaWYgKHNjaGVtYS5raW5kID09PSAnb2JqZWN0Jykge1xuICAgIHZhciBfc2NoZW1hJElucHV0O1xuICAgIHJldHVybiAoX3NjaGVtYSRJbnB1dCA9IHNjaGVtYS5JbnB1dCkgIT09IG51bGwgJiYgX3NjaGVtYSRJbnB1dCAhPT0gdm9pZCAwID8gX3NjaGVtYSRJbnB1dCA6IE9iamVjdEZpZWxkSW5wdXQ7XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnY29uZGl0aW9uYWwnKSB7XG4gICAgdmFyIF9zY2hlbWEkSW5wdXQyO1xuICAgIHJldHVybiAoX3NjaGVtYSRJbnB1dDIgPSBzY2hlbWEuSW5wdXQpICE9PSBudWxsICYmIF9zY2hlbWEkSW5wdXQyICE9PSB2b2lkIDAgPyBfc2NoZW1hJElucHV0MiA6IENvbmRpdGlvbmFsRmllbGRJbnB1dDtcbiAgfVxuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdhcnJheScpIHtcbiAgICB2YXIgX3NjaGVtYSRJbnB1dDM7XG4gICAgcmV0dXJuIChfc2NoZW1hJElucHV0MyA9IHNjaGVtYS5JbnB1dCkgIT09IG51bGwgJiYgX3NjaGVtYSRJbnB1dDMgIT09IHZvaWQgMCA/IF9zY2hlbWEkSW5wdXQzIDogQXJyYXlGaWVsZElucHV0O1xuICB9XG4gIGlmIChzY2hlbWEua2luZCA9PT0gJ2NoaWxkJykge1xuICAgIHJldHVybiBDaGlsZEZpZWxkSW5wdXQ7XG4gIH1cbiAgcmV0dXJuIHNjaGVtYS5JbnB1dDtcbn1cbmNvbnN0IElubmVyRm9ybVZhbHVlQ29udGVudEZyb21QcmV2aWV3UHJvcHMgPSAvKiNfX1BVUkVfXyovbWVtbyhmdW5jdGlvbiBJbm5lckZvcm1WYWx1ZUNvbnRlbnRGcm9tUHJldmlldyhwcm9wcykge1xuICBsZXQgSW5wdXQgPSBnZXRJbnB1dENvbXBvbmVudChwcm9wcy5zY2hlbWEpO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChJbnB1dCwge1xuICAgIC4uLnByb3BzLFxuICAgIGF1dG9Gb2N1czogISFwcm9wcy5hdXRvRm9jdXMsXG4gICAgZm9yY2VWYWxpZGF0aW9uOiAhIXByb3BzLmZvcmNlVmFsaWRhdGlvblxuICB9KTtcbn0pO1xuY29uc3QgZW1wdHlBcnJheSQxID0gW107XG5jb25zdCBGb3JtVmFsdWVDb250ZW50RnJvbVByZXZpZXdQcm9wcyA9IC8qI19fUFVSRV9fKi9tZW1vKGZ1bmN0aW9uIEZvcm1WYWx1ZUNvbnRlbnRGcm9tUHJldmlldyh7XG4gIHNsdWdGaWVsZCxcbiAgLi4ucHJvcHNcbn0pIHtcbiAgbGV0IElucHV0ID0gZ2V0SW5wdXRDb21wb25lbnQocHJvcHMuc2NoZW1hKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goUGF0aENvbnRleHRQcm92aWRlciwge1xuICAgIHZhbHVlOiBlbXB0eUFycmF5JDEsXG4gICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goU2x1Z0ZpZWxkUHJvdmlkZXIsIHtcbiAgICAgIHZhbHVlOiBzbHVnRmllbGQsXG4gICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChJbnB1dCwge1xuICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgYXV0b0ZvY3VzOiAhIXByb3BzLmF1dG9Gb2N1cyxcbiAgICAgICAgZm9yY2VWYWxpZGF0aW9uOiAhIXByb3BzLmZvcmNlVmFsaWRhdGlvblxuICAgICAgfSlcbiAgICB9KVxuICB9KTtcbn0pO1xuXG5jb25zdCBlbXB0eUFycmF5ID0gW107XG5jb25zdCBSRVNQT05TSVZFX1BBRERJTkcgPSB7XG4gIG1vYmlsZTogJ21lZGl1bScsXG4gIHRhYmxldDogJ3hsYXJnZScsXG4gIGRlc2t0b3A6ICd4eGxhcmdlJ1xufTtcbmZ1bmN0aW9uIGNvbnRhaW5lcldpZHRoRm9yRW50cnlMYXlvdXQoY29uZmlnKSB7XG4gIHJldHVybiBjb25maWcuZW50cnlMYXlvdXQgPT09ICdjb250ZW50JyA/ICdub25lJyA6ICdtZWRpdW0nO1xufVxuY29uc3QgRW50cnlMYXlvdXRTcGxpdFBhbmVDb250ZXh0ID0gLyojX19QVVJFX18qL2NyZWF0ZUNvbnRleHQobnVsbCk7XG5mdW5jdGlvbiB1c2VFbnRyeUxheW91dFNwbGl0UGFuZUNvbnRleHQoKSB7XG4gIHJldHVybiB1c2VDb250ZXh0KEVudHJ5TGF5b3V0U3BsaXRQYW5lQ29udGV4dCk7XG59XG5mdW5jdGlvbiBSZXNldEVudHJ5TGF5b3V0Q29udGV4dChwcm9wcykge1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChFbnRyeUxheW91dFNwbGl0UGFuZUNvbnRleHQuUHJvdmlkZXIsIHtcbiAgICB2YWx1ZTogbnVsbCxcbiAgICBjaGlsZHJlbjogcHJvcHMuY2hpbGRyZW5cbiAgfSk7XG59XG5mdW5jdGlvbiBGb3JtRm9yRW50cnkoe1xuICBmb3JtYXRJbmZvLFxuICBmb3JjZVZhbGlkYXRpb24sXG4gIHNsdWdGaWVsZCxcbiAgZW50cnlMYXlvdXQsXG4gIHByZXZpZXdQcm9wczogcHJvcHNcbn0pIHtcbiAgY29uc3QgaXNBYm92ZU1vYmlsZSA9IHVzZUNvbnRlbnRQYW5lbFF1ZXJ5KHtcbiAgICBhYm92ZTogJ21vYmlsZSdcbiAgfSk7XG4gIGlmIChlbnRyeUxheW91dCA9PT0gJ2NvbnRlbnQnICYmIGZvcm1hdEluZm8uY29udGVudEZpZWxkICYmIGlzQWJvdmVNb2JpbGUpIHtcbiAgICBjb25zdCB7XG4gICAgICBjb250ZW50RmllbGRcbiAgICB9ID0gZm9ybWF0SW5mbztcbiAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChQYXRoQ29udGV4dFByb3ZpZGVyLCB7XG4gICAgICB2YWx1ZTogZW1wdHlBcnJheSxcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KFNsdWdGaWVsZFByb3ZpZGVyLCB7XG4gICAgICAgIHZhbHVlOiBzbHVnRmllbGQsXG4gICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4cyhTcGxpdFZpZXcsIHtcbiAgICAgICAgICBhdXRvU2F2ZUlkOiBcImtleXN0YXRpYy1jb250ZW50LXNwbGl0LXZpZXdcIixcbiAgICAgICAgICBkZWZhdWx0U2l6ZTogMzIwLFxuICAgICAgICAgIG1pblNpemU6IDI0MCxcbiAgICAgICAgICBtYXhTaXplOiA0ODAsXG4gICAgICAgICAgZmxleDogdHJ1ZSxcbiAgICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goU3BsaXRQYW5lU2Vjb25kYXJ5LCB7XG4gICAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChFbnRyeUxheW91dFNwbGl0UGFuZUNvbnRleHQuUHJvdmlkZXIsIHtcbiAgICAgICAgICAgICAgdmFsdWU6IFwibWFpblwiLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChTY3JvbGxWaWV3LCB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goQWRkVG9QYXRoUHJvdmlkZXIsIHtcbiAgICAgICAgICAgICAgICAgIHBhcnQ6IGNvbnRlbnRGaWVsZC5rZXksXG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChJbm5lckZvcm1WYWx1ZUNvbnRlbnRGcm9tUHJldmlld1Byb3BzLCB7XG4gICAgICAgICAgICAgICAgICAgIGZvcmNlVmFsaWRhdGlvbjogZm9yY2VWYWxpZGF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAuLi5wcm9wcy5maWVsZHNbY29udGVudEZpZWxkLmtleV1cbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goU3BsaXRQYW5lUHJpbWFyeSwge1xuICAgICAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goRW50cnlMYXlvdXRTcGxpdFBhbmVDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgICAgICAgICAgIHZhbHVlOiBcInNpZGVcIixcbiAgICAgICAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goU2Nyb2xsVmlldywge1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KEdyaWQsIHtcbiAgICAgICAgICAgICAgICAgIGdhcDogXCJ4bGFyZ2VcIixcbiAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IFJFU1BPTlNJVkVfUEFERElORyxcbiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBPYmplY3QuZW50cmllcyhwcm9wcy5maWVsZHMpLm1hcCgoW2tleSwgcHJvcFZhbF0pID0+IGtleSA9PT0gY29udGVudEZpZWxkLmtleSA/IG51bGwgOiAvKiNfX1BVUkVfXyovanN4KEFkZFRvUGF0aFByb3ZpZGVyLCB7XG4gICAgICAgICAgICAgICAgICAgIHBhcnQ6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goSW5uZXJGb3JtVmFsdWVDb250ZW50RnJvbVByZXZpZXdQcm9wcywge1xuICAgICAgICAgICAgICAgICAgICAgIGZvcmNlVmFsaWRhdGlvbjogZm9yY2VWYWxpZGF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgIC4uLnByb3BWYWxcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIH0sIGtleSkpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSldXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pO1xuICB9XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFNjcm9sbFZpZXcsIHtcbiAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChQYWdlQ29udGFpbmVyLCB7XG4gICAgICBwYWRkaW5nWTogUkVTUE9OU0lWRV9QQURESU5HLFxuICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goRm9ybVZhbHVlQ29udGVudEZyb21QcmV2aWV3UHJvcHNcbiAgICAgIC8vIGF1dG9Gb2N1c1xuICAgICAgLCB7XG4gICAgICAgIGZvcmNlVmFsaWRhdGlvbjogZm9yY2VWYWxpZGF0aW9uLFxuICAgICAgICBzbHVnRmllbGQ6IHNsdWdGaWVsZCxcbiAgICAgICAgLi4ucHJvcHNcbiAgICAgIH0pXG4gICAgfSlcbiAgfSk7XG59XG5cbmxldCBpID0gMDtcbmZ1bmN0aW9uIG5ld0tleSgpIHtcbiAgcmV0dXJuIGkrKztcbn1cbmZ1bmN0aW9uIERvY3VtZW50RmllbGRJbnB1dChwcm9wcykge1xuICBsZXQgZW50cnlMYXlvdXRQYW5lID0gdXNlRW50cnlMYXlvdXRTcGxpdFBhbmVDb250ZXh0KCk7XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGUoKCkgPT4gKHtcbiAgICBrZXk6IG5ld0tleSgpLFxuICAgIHZhbHVlOiBwcm9wcy52YWx1ZVxuICB9KSk7XG4gIGlmIChzdGF0ZS52YWx1ZSAhPT0gcHJvcHMudmFsdWUpIHtcbiAgICBzZXRTdGF0ZSh7XG4gICAgICBrZXk6IG5ld0tleSgpLFxuICAgICAgdmFsdWU6IHByb3BzLnZhbHVlXG4gICAgfSk7XG4gIH1cbiAgbGV0IGZpZWxkUHJvcHMgPSB7XG4gICAgbGFiZWw6IHByb3BzLmxhYmVsLFxuICAgIGxhYmVsRWxlbWVudFR5cGU6ICdzcGFuJyxcbiAgICAvLyB0aGUgZWRpdG9yIGVsZW1lbnQgaXNuJ3QgYW4gaW5wdXQsIHNvIHdlIG5lZWQgdG8gdXNlIGEgc3BhbiBmb3IgdGhlIGxhYmVsXG4gICAgZGVzY3JpcHRpb246IHByb3BzLmRlc2NyaXB0aW9uXG4gIH07XG4gIGlmIChlbnRyeUxheW91dFBhbmUgPT09ICdtYWluJykge1xuICAgIGZpZWxkUHJvcHMgPSB7XG4gICAgICAnYXJpYS1sYWJlbCc6IHByb3BzLmxhYmVsXG4gICAgICAvLyBgYXJpYS1kZXNjcmlwdGlvbmAgaXMgc3RpbGwgaW4gVzNDIEVkaXRvcidzIERyYWZ0IGZvciBBUklBIDEuMy5cbiAgICB9O1xuICB9XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KEZpZWxkLCB7XG4gICAgaGVpZ2h0OiBlbnRyeUxheW91dFBhbmUgPT09ICdtYWluJyA/ICcxMDAlJyA6IHVuZGVmaW5lZCxcbiAgICAuLi5maWVsZFByb3BzLFxuICAgIGNoaWxkcmVuOiBpbnB1dFByb3BzID0+IC8qI19fUFVSRV9fKi9jcmVhdGVFbGVtZW50KERvY3VtZW50RWRpdG9yLCB7XG4gICAgICAuLi5pbnB1dFByb3BzLFxuICAgICAga2V5OiBzdGF0ZS5rZXksXG4gICAgICBjb21wb25lbnRCbG9ja3M6IHByb3BzLmNvbXBvbmVudEJsb2NrcyxcbiAgICAgIGRvY3VtZW50RmVhdHVyZXM6IHByb3BzLmRvY3VtZW50RmVhdHVyZXMsXG4gICAgICBvbkNoYW5nZTogdmFsID0+IHtcbiAgICAgICAgc2V0U3RhdGUoc3RhdGUgPT4gKHtcbiAgICAgICAgICBrZXk6IHN0YXRlLmtleSxcbiAgICAgICAgICB2YWx1ZTogdmFsXG4gICAgICAgIH0pKTtcbiAgICAgICAgcHJvcHMub25DaGFuZ2UodmFsKTtcbiAgICAgIH0sXG4gICAgICB2YWx1ZTogc3RhdGUudmFsdWVcbiAgICB9KVxuICB9KTtcbn1cblxuY29uc3QgdGV4dEVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcbmNvbnN0IHRleHREZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG5jb25zdCBkZWZhdWx0QWx0RmllbGQgPSB0ZXh0KHtcbiAgbGFiZWw6ICdBbHQgdGV4dCcsXG4gIGRlc2NyaXB0aW9uOiAnVGhpcyB0ZXh0IHdpbGwgYmUgdXNlZCBieSBzY3JlZW4gcmVhZGVycyBhbmQgc2VhcmNoIGVuZ2luZXMuJ1xufSk7XG5jb25zdCBlbXB0eVRpdGxlRmllbGQgPSBiYXNpY0Zvcm1GaWVsZFdpdGhTaW1wbGVSZWFkZXJQYXJzZSh7XG4gIElucHV0KCkge1xuICAgIHJldHVybiBudWxsO1xuICB9LFxuICBkZWZhdWx0VmFsdWUoKSB7XG4gICAgcmV0dXJuICcnO1xuICB9LFxuICBwYXJzZSh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gJyc7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBzdHJpbmcnKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LFxuICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSxcbiAgc2VyaWFsaXplKHZhbHVlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlXG4gICAgfTtcbiAgfVxufSk7XG5mdW5jdGlvbiBub3JtYWxpc2VEb2N1bWVudEZlYXR1cmVzKGNvbmZpZykge1xuICB2YXIgX2NvbmZpZyRmb3JtYXR0aW5nLCBfZm9ybWF0dGluZyRhbGlnbm1lbnQsIF9mb3JtYXR0aW5nJGFsaWdubWVudDIsIF9mb3JtYXR0aW5nJGJsb2NrVHlwZSwgX2Zvcm1hdHRpbmckaW5saW5lTWFyLCBfZm9ybWF0dGluZyRpbmxpbmVNYXIyLCBfZm9ybWF0dGluZyRpbmxpbmVNYXIzLCBfZm9ybWF0dGluZyRpbmxpbmVNYXI0LCBfZm9ybWF0dGluZyRpbmxpbmVNYXI1LCBfZm9ybWF0dGluZyRpbmxpbmVNYXI2LCBfZm9ybWF0dGluZyRpbmxpbmVNYXI3LCBfZm9ybWF0dGluZyRpbmxpbmVNYXI4LCBfZm9ybWF0dGluZyRsaXN0VHlwZXMsIF9mb3JtYXR0aW5nJGxpc3RUeXBlczIsIF9pbWFnZXNDb25maWckc2NoZW1hJCwgX2ltYWdlc0NvbmZpZyRzY2hlbWEsIF9pbWFnZXNDb25maWckc2NoZW1hJDIsIF9pbWFnZXNDb25maWckc2NoZW1hMjtcbiAgY29uc3QgZm9ybWF0dGluZyA9IGNvbmZpZy5mb3JtYXR0aW5nID09PSB0cnVlID8ge1xuICAgIC8vIGFsaWdubWVudDogdHJ1ZSwgLy8gbm90IHN1cHBvcnRlZCBuYXRpdmVseSBpbiBtYXJrZG93blxuICAgIGJsb2NrVHlwZXM6IHRydWUsXG4gICAgaGVhZGluZ0xldmVsczogdHJ1ZSxcbiAgICBpbmxpbmVNYXJrczogdHJ1ZSxcbiAgICBsaXN0VHlwZXM6IHRydWUsXG4gICAgc29mdEJyZWFrczogdHJ1ZVxuICB9IDogKF9jb25maWckZm9ybWF0dGluZyA9IGNvbmZpZy5mb3JtYXR0aW5nKSAhPT0gbnVsbCAmJiBfY29uZmlnJGZvcm1hdHRpbmcgIT09IHZvaWQgMCA/IF9jb25maWckZm9ybWF0dGluZyA6IHt9O1xuICBjb25zdCBpbWFnZXNDb25maWcgPSBjb25maWcuaW1hZ2VzID09PSB0cnVlID8ge30gOiBjb25maWcuaW1hZ2VzO1xuICByZXR1cm4ge1xuICAgIGZvcm1hdHRpbmc6IHtcbiAgICAgIGFsaWdubWVudDogZm9ybWF0dGluZy5hbGlnbm1lbnQgPT09IHRydWUgPyB7XG4gICAgICAgIGNlbnRlcjogdHJ1ZSxcbiAgICAgICAgZW5kOiB0cnVlXG4gICAgICB9IDoge1xuICAgICAgICBjZW50ZXI6ICEhKChfZm9ybWF0dGluZyRhbGlnbm1lbnQgPSBmb3JtYXR0aW5nLmFsaWdubWVudCkgIT09IG51bGwgJiYgX2Zvcm1hdHRpbmckYWxpZ25tZW50ICE9PSB2b2lkIDAgJiYgX2Zvcm1hdHRpbmckYWxpZ25tZW50LmNlbnRlciksXG4gICAgICAgIGVuZDogISEoKF9mb3JtYXR0aW5nJGFsaWdubWVudDIgPSBmb3JtYXR0aW5nLmFsaWdubWVudCkgIT09IG51bGwgJiYgX2Zvcm1hdHRpbmckYWxpZ25tZW50MiAhPT0gdm9pZCAwICYmIF9mb3JtYXR0aW5nJGFsaWdubWVudDIuZW5kKVxuICAgICAgfSxcbiAgICAgIGJsb2NrVHlwZXM6IChmb3JtYXR0aW5nID09PSBudWxsIHx8IGZvcm1hdHRpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZvcm1hdHRpbmcuYmxvY2tUeXBlcykgPT09IHRydWUgPyB7XG4gICAgICAgIGJsb2NrcXVvdGU6IHRydWUsXG4gICAgICAgIGNvZGU6IHtcbiAgICAgICAgICBzY2hlbWE6IG9iamVjdCh7fSlcbiAgICAgICAgfVxuICAgICAgfSA6IHtcbiAgICAgICAgYmxvY2txdW90ZTogISEoKF9mb3JtYXR0aW5nJGJsb2NrVHlwZSA9IGZvcm1hdHRpbmcuYmxvY2tUeXBlcykgIT09IG51bGwgJiYgX2Zvcm1hdHRpbmckYmxvY2tUeXBlICE9PSB2b2lkIDAgJiYgX2Zvcm1hdHRpbmckYmxvY2tUeXBlLmJsb2NrcXVvdGUpLFxuICAgICAgICBjb2RlOiAoX2Zvcm1hdHRpbmckYmxvY2tUeXBlMiA9PiB7XG4gICAgICAgICAgaWYgKCgoX2Zvcm1hdHRpbmckYmxvY2tUeXBlMiA9IGZvcm1hdHRpbmcuYmxvY2tUeXBlcykgPT09IG51bGwgfHwgX2Zvcm1hdHRpbmckYmxvY2tUeXBlMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Zvcm1hdHRpbmckYmxvY2tUeXBlMi5jb2RlKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChmb3JtYXR0aW5nLmJsb2NrVHlwZXMuY29kZSA9PT0gdHJ1ZSB8fCAhZm9ybWF0dGluZy5ibG9ja1R5cGVzLmNvZGUuc2NoZW1hKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBzY2hlbWE6IG9iamVjdCh7fSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIFsndHlwZScsICdjaGlsZHJlbicsICdsYW5ndWFnZSddKSB7XG4gICAgICAgICAgICBpZiAoa2V5IGluIGZvcm1hdHRpbmcuYmxvY2tUeXBlcy5jb2RlLnNjaGVtYSkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFwiJHtrZXl9XCIgY2Fubm90IGJlIGEga2V5IGluIHRoZSBzY2hlbWEgZm9yIGNvZGUgYmxvY2tzYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzY2hlbWE6IG9iamVjdChmb3JtYXR0aW5nLmJsb2NrVHlwZXMuY29kZS5zY2hlbWEpXG4gICAgICAgICAgfTtcbiAgICAgICAgfSkoKVxuICAgICAgfSxcbiAgICAgIGhlYWRpbmdzOiAoX29iaiRzY2hlbWEgPT4ge1xuICAgICAgICBjb25zdCBvcHQgPSBmb3JtYXR0aW5nID09PSBudWxsIHx8IGZvcm1hdHRpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZvcm1hdHRpbmcuaGVhZGluZ0xldmVscztcbiAgICAgICAgY29uc3Qgb2JqID0gdHlwZW9mIG9wdCA9PT0gJ29iamVjdCcgJiYgJ2xldmVscycgaW4gb3B0ID8gb3B0IDoge1xuICAgICAgICAgIGxldmVsczogb3B0LFxuICAgICAgICAgIHNjaGVtYTogdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgICAgIGlmIChvYmouc2NoZW1hKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgWyd0eXBlJywgJ2NoaWxkcmVuJywgJ2xldmVsJywgJ3RleHRBbGlnbiddKSB7XG4gICAgICAgICAgICBpZiAoa2V5IGluIG9iai5zY2hlbWEpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcIiR7a2V5fVwiIGNhbm5vdCBiZSBhIGtleSBpbiB0aGUgc2NoZW1hIGZvciBoZWFkaW5nc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGxldmVsczogWy4uLm5ldyBTZXQob2JqLmxldmVscyA9PT0gdHJ1ZSA/IFsxLCAyLCAzLCA0LCA1LCA2XSA6IG9iai5sZXZlbHMpXSxcbiAgICAgICAgICBzY2hlbWE6IG9iamVjdCgoX29iaiRzY2hlbWEgPSBvYmouc2NoZW1hKSAhPT0gbnVsbCAmJiBfb2JqJHNjaGVtYSAhPT0gdm9pZCAwID8gX29iaiRzY2hlbWEgOiB7fSlcbiAgICAgICAgfTtcbiAgICAgIH0pKCksXG4gICAgICBpbmxpbmVNYXJrczogZm9ybWF0dGluZy5pbmxpbmVNYXJrcyA9PT0gdHJ1ZSA/IHtcbiAgICAgICAgYm9sZDogdHJ1ZSxcbiAgICAgICAgY29kZTogdHJ1ZSxcbiAgICAgICAgaXRhbGljOiB0cnVlLFxuICAgICAgICBrZXlib2FyZDogZmFsc2UsXG4gICAgICAgIC8vIG5vdCBzdXBwb3J0ZWQgbmF0aXZlbHkgaW4gbWFya2Rvd25cbiAgICAgICAgc3RyaWtldGhyb3VnaDogdHJ1ZSxcbiAgICAgICAgc3Vic2NyaXB0OiBmYWxzZSxcbiAgICAgICAgLy8gbm90IHN1cHBvcnRlZCBuYXRpdmVseSBpbiBtYXJrZG93blxuICAgICAgICBzdXBlcnNjcmlwdDogZmFsc2UsXG4gICAgICAgIC8vIG5vdCBzdXBwb3J0ZWQgbmF0aXZlbHkgaW4gbWFya2Rvd25cbiAgICAgICAgdW5kZXJsaW5lOiBmYWxzZSAvLyBub3Qgc3VwcG9ydGVkIG5hdGl2ZWx5IGluIG1hcmtkb3duXG4gICAgICB9IDoge1xuICAgICAgICBib2xkOiAhISgoX2Zvcm1hdHRpbmckaW5saW5lTWFyID0gZm9ybWF0dGluZy5pbmxpbmVNYXJrcykgIT09IG51bGwgJiYgX2Zvcm1hdHRpbmckaW5saW5lTWFyICE9PSB2b2lkIDAgJiYgX2Zvcm1hdHRpbmckaW5saW5lTWFyLmJvbGQpLFxuICAgICAgICBjb2RlOiAhISgoX2Zvcm1hdHRpbmckaW5saW5lTWFyMiA9IGZvcm1hdHRpbmcuaW5saW5lTWFya3MpICE9PSBudWxsICYmIF9mb3JtYXR0aW5nJGlubGluZU1hcjIgIT09IHZvaWQgMCAmJiBfZm9ybWF0dGluZyRpbmxpbmVNYXIyLmNvZGUpLFxuICAgICAgICBpdGFsaWM6ICEhKChfZm9ybWF0dGluZyRpbmxpbmVNYXIzID0gZm9ybWF0dGluZy5pbmxpbmVNYXJrcykgIT09IG51bGwgJiYgX2Zvcm1hdHRpbmckaW5saW5lTWFyMyAhPT0gdm9pZCAwICYmIF9mb3JtYXR0aW5nJGlubGluZU1hcjMuaXRhbGljKSxcbiAgICAgICAgc3RyaWtldGhyb3VnaDogISEoKF9mb3JtYXR0aW5nJGlubGluZU1hcjQgPSBmb3JtYXR0aW5nLmlubGluZU1hcmtzKSAhPT0gbnVsbCAmJiBfZm9ybWF0dGluZyRpbmxpbmVNYXI0ICE9PSB2b2lkIDAgJiYgX2Zvcm1hdHRpbmckaW5saW5lTWFyNC5zdHJpa2V0aHJvdWdoKSxcbiAgICAgICAgdW5kZXJsaW5lOiAhISgoX2Zvcm1hdHRpbmckaW5saW5lTWFyNSA9IGZvcm1hdHRpbmcuaW5saW5lTWFya3MpICE9PSBudWxsICYmIF9mb3JtYXR0aW5nJGlubGluZU1hcjUgIT09IHZvaWQgMCAmJiBfZm9ybWF0dGluZyRpbmxpbmVNYXI1LnVuZGVybGluZSksXG4gICAgICAgIGtleWJvYXJkOiAhISgoX2Zvcm1hdHRpbmckaW5saW5lTWFyNiA9IGZvcm1hdHRpbmcuaW5saW5lTWFya3MpICE9PSBudWxsICYmIF9mb3JtYXR0aW5nJGlubGluZU1hcjYgIT09IHZvaWQgMCAmJiBfZm9ybWF0dGluZyRpbmxpbmVNYXI2LmtleWJvYXJkKSxcbiAgICAgICAgc3Vic2NyaXB0OiAhISgoX2Zvcm1hdHRpbmckaW5saW5lTWFyNyA9IGZvcm1hdHRpbmcuaW5saW5lTWFya3MpICE9PSBudWxsICYmIF9mb3JtYXR0aW5nJGlubGluZU1hcjcgIT09IHZvaWQgMCAmJiBfZm9ybWF0dGluZyRpbmxpbmVNYXI3LnN1YnNjcmlwdCksXG4gICAgICAgIHN1cGVyc2NyaXB0OiAhISgoX2Zvcm1hdHRpbmckaW5saW5lTWFyOCA9IGZvcm1hdHRpbmcuaW5saW5lTWFya3MpICE9PSBudWxsICYmIF9mb3JtYXR0aW5nJGlubGluZU1hcjggIT09IHZvaWQgMCAmJiBfZm9ybWF0dGluZyRpbmxpbmVNYXI4LnN1cGVyc2NyaXB0KVxuICAgICAgfSxcbiAgICAgIGxpc3RUeXBlczogZm9ybWF0dGluZy5saXN0VHlwZXMgPT09IHRydWUgPyB7XG4gICAgICAgIG9yZGVyZWQ6IHRydWUsXG4gICAgICAgIHVub3JkZXJlZDogdHJ1ZVxuICAgICAgfSA6IHtcbiAgICAgICAgb3JkZXJlZDogISEoKF9mb3JtYXR0aW5nJGxpc3RUeXBlcyA9IGZvcm1hdHRpbmcubGlzdFR5cGVzKSAhPT0gbnVsbCAmJiBfZm9ybWF0dGluZyRsaXN0VHlwZXMgIT09IHZvaWQgMCAmJiBfZm9ybWF0dGluZyRsaXN0VHlwZXMub3JkZXJlZCksXG4gICAgICAgIHVub3JkZXJlZDogISEoKF9mb3JtYXR0aW5nJGxpc3RUeXBlczIgPSBmb3JtYXR0aW5nLmxpc3RUeXBlcykgIT09IG51bGwgJiYgX2Zvcm1hdHRpbmckbGlzdFR5cGVzMiAhPT0gdm9pZCAwICYmIF9mb3JtYXR0aW5nJGxpc3RUeXBlczIudW5vcmRlcmVkKVxuICAgICAgfSxcbiAgICAgIHNvZnRCcmVha3M6ICEhZm9ybWF0dGluZy5zb2Z0QnJlYWtzXG4gICAgfSxcbiAgICBsaW5rczogISFjb25maWcubGlua3MsXG4gICAgbGF5b3V0czogWy4uLm5ldyBTZXQoKGNvbmZpZy5sYXlvdXRzIHx8IFtdKS5tYXAoeCA9PiBKU09OLnN0cmluZ2lmeSh4KSkpXS5tYXAoeCA9PiBKU09OLnBhcnNlKHgpKSxcbiAgICBkaXZpZGVyczogISFjb25maWcuZGl2aWRlcnMsXG4gICAgaW1hZ2VzOiBpbWFnZXNDb25maWcgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDoge1xuICAgICAgLi4uaW1hZ2VzQ29uZmlnLFxuICAgICAgc2NoZW1hOiB7XG4gICAgICAgIGFsdDogKF9pbWFnZXNDb25maWckc2NoZW1hJCA9IChfaW1hZ2VzQ29uZmlnJHNjaGVtYSA9IGltYWdlc0NvbmZpZy5zY2hlbWEpID09PSBudWxsIHx8IF9pbWFnZXNDb25maWckc2NoZW1hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaW1hZ2VzQ29uZmlnJHNjaGVtYS5hbHQpICE9PSBudWxsICYmIF9pbWFnZXNDb25maWckc2NoZW1hJCAhPT0gdm9pZCAwID8gX2ltYWdlc0NvbmZpZyRzY2hlbWEkIDogZGVmYXVsdEFsdEZpZWxkLFxuICAgICAgICB0aXRsZTogKF9pbWFnZXNDb25maWckc2NoZW1hJDIgPSAoX2ltYWdlc0NvbmZpZyRzY2hlbWEyID0gaW1hZ2VzQ29uZmlnLnNjaGVtYSkgPT09IG51bGwgfHwgX2ltYWdlc0NvbmZpZyRzY2hlbWEyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaW1hZ2VzQ29uZmlnJHNjaGVtYTIudGl0bGUpICE9PSBudWxsICYmIF9pbWFnZXNDb25maWckc2NoZW1hJDIgIT09IHZvaWQgMCA/IF9pbWFnZXNDb25maWckc2NoZW1hJDIgOiBlbXB0eVRpdGxlRmllbGRcbiAgICAgIH1cbiAgICB9LFxuICAgIHRhYmxlczogISFjb25maWcudGFibGVzXG4gIH07XG59XG5mdW5jdGlvbiBkb2N1bWVudCQxKHtcbiAgbGFiZWwsXG4gIGNvbXBvbmVudEJsb2NrcyA9IHt9LFxuICBkZXNjcmlwdGlvbixcbiAgLi4uZG9jdW1lbnRGZWF0dXJlc0NvbmZpZ1xufSkge1xuICBjb25zdCBkb2N1bWVudEZlYXR1cmVzID0gbm9ybWFsaXNlRG9jdW1lbnRGZWF0dXJlcyhkb2N1bWVudEZlYXR1cmVzQ29uZmlnKTtcbiAgY29uc3QgcGFyc2UgPSBtb2RlID0+IChfdmFsdWUsIGRhdGEpID0+IHtcbiAgICBjb25zdCBtYXJrZG9jID0gdGV4dERlY29kZXIuZGVjb2RlKGRhdGEuY29udGVudCk7XG4gICAgY29uc3QgZG9jdW1lbnQgPSBmcm9tTWFya2RvYyhNYXJrZG9jLnBhcnNlKG1hcmtkb2MpLCBjb21wb25lbnRCbG9ja3MpO1xuICAgIGNvbnN0IGVkaXRvciA9IGNyZWF0ZURvY3VtZW50RWRpdG9yRm9yTm9ybWFsaXphdGlvbihkb2N1bWVudEZlYXR1cmVzLCBjb21wb25lbnRCbG9ja3MpO1xuICAgIGVkaXRvci5jaGlsZHJlbiA9IGRvY3VtZW50O1xuICAgIEVkaXRvci5ub3JtYWxpemUoZWRpdG9yLCB7XG4gICAgICBmb3JjZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBkZXNlcmlhbGl6ZUZpbGVzKGVkaXRvci5jaGlsZHJlbiwgY29tcG9uZW50QmxvY2tzLCBkYXRhLm90aGVyLCBkYXRhLmV4dGVybmFsIHx8IG5ldyBNYXAoKSwgbW9kZSwgZG9jdW1lbnRGZWF0dXJlcywgZGF0YS5zbHVnKTtcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBraW5kOiAnZm9ybScsXG4gICAgZm9ybUtpbmQ6ICdjb250ZW50JyxcbiAgICBkZWZhdWx0VmFsdWUoKSB7XG4gICAgICByZXR1cm4gW3tcbiAgICAgICAgdHlwZTogJ3BhcmFncmFwaCcsXG4gICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgIHRleHQ6ICcnXG4gICAgICAgIH1dXG4gICAgICB9XTtcbiAgICB9LFxuICAgIElucHV0KHByb3BzKSB7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChEb2N1bWVudEZpZWxkSW5wdXQsIHtcbiAgICAgICAgY29tcG9uZW50QmxvY2tzOiBjb21wb25lbnRCbG9ja3MsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgICBkb2N1bWVudEZlYXR1cmVzOiBkb2N1bWVudEZlYXR1cmVzLFxuICAgICAgICAuLi5wcm9wc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBwYXJzZTogcGFyc2UoJ2VkaXQnKSxcbiAgICBjb250ZW50RXh0ZW5zaW9uOiAnLm1kb2MnLFxuICAgIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBkaXJlY3RvcmllczogWy4uLmNvbGxlY3REaXJlY3Rvcmllc1VzZWRJblNjaGVtYShvYmplY3QoT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKGNvbXBvbmVudEJsb2NrcykubWFwKChbbmFtZSwgYmxvY2tdKSA9PiBbbmFtZSwgb2JqZWN0KGJsb2NrLnNjaGVtYSldKSkpKSwgLi4uKHR5cGVvZiBkb2N1bWVudEZlYXR1cmVzLmltYWdlcyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIGRvY3VtZW50RmVhdHVyZXMuaW1hZ2VzLmRpcmVjdG9yeSA9PT0gJ3N0cmluZycgPyBbZml4UGF0aChkb2N1bWVudEZlYXR1cmVzLmltYWdlcy5kaXJlY3RvcnkpXSA6IFtdKV0sXG4gICAgc2VyaWFsaXplKHZhbHVlLCBvcHRzKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGV4dHJhRmlsZXMsXG4gICAgICAgIG5vZGVcbiAgICAgIH0gPSB0b01hcmtkb2NEb2N1bWVudCh2YWx1ZSwge1xuICAgICAgICBjb21wb25lbnRCbG9ja3MsXG4gICAgICAgIGRvY3VtZW50RmVhdHVyZXMsXG4gICAgICAgIHNsdWc6IG9wdHMuc2x1Z1xuICAgICAgfSk7XG4gICAgICBjb25zdCBvdGhlciA9IG5ldyBNYXAoKTtcbiAgICAgIGNvbnN0IGV4dGVybmFsID0gbmV3IE1hcCgpO1xuICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGV4dHJhRmlsZXMpIHtcbiAgICAgICAgaWYgKGZpbGUucGFyZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBvdGhlci5zZXQoZmlsZS5wYXRoLCBmaWxlLmNvbnRlbnRzKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWV4dGVybmFsLmhhcyhmaWxlLnBhcmVudCkpIHtcbiAgICAgICAgICBleHRlcm5hbC5zZXQoZmlsZS5wYXJlbnQsIG5ldyBNYXAoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZXh0ZXJuYWwuZ2V0KGZpbGUucGFyZW50KS5zZXQoZmlsZS5wYXRoLCBmaWxlLmNvbnRlbnRzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNvbnRlbnQ6IHRleHRFbmNvZGVyLmVuY29kZShNYXJrZG9jLmZvcm1hdChNYXJrZG9jLnBhcnNlKE1hcmtkb2MuZm9ybWF0KG5vZGUpKSkpLFxuICAgICAgICBvdGhlcixcbiAgICAgICAgZXh0ZXJuYWwsXG4gICAgICAgIHZhbHVlOiB1bmRlZmluZWRcbiAgICAgIH07XG4gICAgfSxcbiAgICByZWFkZXI6IHtcbiAgICAgIHBhcnNlOiBwYXJzZSgncmVhZCcpXG4gICAgfVxuICB9O1xufVxuXG5leHBvcnQgeyBnZXRSZXBvVXJsIGFzICQsIGdldFN5bmNBdXRoIGFzIEEsIHJlZGlyZWN0VG9DbG91ZEF1dGggYXMgQiwgQ2xvdWRBcHBTaGVsbFF1ZXJ5IGFzIEMsIHNlcmlhbGl6ZVByb3BzIGFzIEQsIEJyYW5jaEluZm9Db250ZXh0IGFzIEUsIHVzZVNldFRyZWVTaGEgYXMgRiwgR2l0SHViQXBwU2hlbGxRdWVyeSBhcyBHLCB1c2VDdXJyZW50VW5zY29wZWRUcmVlIGFzIEgsIHVwZGF0ZVRyZWVXaXRoQ2hhbmdlcyBhcyBJLCBoeWRyYXRlVHJlZUNhY2hlV2l0aEVudHJpZXMgYXMgSiwgS0VZU1RBVElDX0NMT1VEX0FQSV9VUkwgYXMgSywgTE9BRElORyBhcyBMLCBzY29wZUVudHJpZXNXaXRoUGF0aFByZWZpeCBhcyBNLCBmZXRjaEdpdEh1YlRyZWVEYXRhIGFzIE4sIHRyZWVTaGEgYXMgTywgUGFnZVJvb3QgYXMgUCwgZ2V0U2x1Z0Zyb21TdGF0ZSBhcyBRLCBSZXBvV2l0aFdyaXRlQWNjZXNzQ29udGV4dCBhcyBSLCB1c2VDb25maWcgYXMgUywgVGhlbWVQcm92aWRlciBhcyBULCBnZXRTbHVnR2xvYkZvckNvbGxlY3Rpb24gYXMgVSwgZ2V0Q29sbGVjdGlvbkZvcm1hdCBhcyBWLCBnZXRDb2xsZWN0aW9uSXRlbVBhdGggYXMgVywgUGFnZUJvZHkgYXMgWCwgY29udGFpbmVyV2lkdGhGb3JFbnRyeUxheW91dCBhcyBZLCBjcmVhdGVHZXRQcmV2aWV3UHJvcHMgYXMgWiwgdXNlRXZlbnRDYWxsYmFjayBhcyBfLCBQYWdlSGVhZGVyIGFzIGEsIHRleHQgYXMgYSQsIGdldERhdGFGaWxlRXh0ZW5zaW9uIGFzIGEwLCBjbGllbnRTaWRlVmFsaWRhdGVQcm9wIGFzIGExLCBGb3JtRm9yRW50cnkgYXMgYTIsIHVzZVJlcG9zaXRvcnlJZCBhcyBhMywgdXNlQ3JlYXRlQnJhbmNoTXV0YXRpb24gYXMgYTQsIGdldEJyYW5jaFByZWZpeCBhcyBhNSwgcHJldHR5RXJyb3JGb3JDcmVhdGVCcmFuY2hNdXRhdGlvbiBhcyBhNiwgZ2V0SW5pdGlhbFByb3BzVmFsdWUgYXMgYTcsIENyZWF0ZUJyYW5jaERpYWxvZyBhcyBhOCwgdXNlTmF2SXRlbXMgYXMgYTksIGNvbGxlY3Rpb24gYXMgYUEsIHNpbmdsZXRvbiBhcyBhQiwgQmxvY2tXcmFwcGVyIGFzIGFDLCBOb3RFZGl0YWJsZSBhcyBhRCwgVG9vbGJhclNlcGFyYXRvciBhcyBhRSwgSW1hZ2VGaWVsZElucHV0IGFzIGFGLCBnZXRTcmNQcmVmaXggYXMgYUcsIGZpeFBhdGggYXMgYUgsIHVzZUlzSW5Eb2N1bWVudEVkaXRvciBhcyBhSSwgdXNlT2JqZWN0VVJMIGFzIGFKLCBnZXRVcGxvYWRlZEZpbGUgYXMgYUssIHVzZUZpZWxkQ29udGV4dCBhcyBhTCwgU2x1Z0ZpZWxkQ29udGV4dCBhcyBhTSwgUGF0aENvbnRleHQgYXMgYU4sIHZhbGlkYXRlVGV4dCBhcyBhTywgaXNWYWxpZFVSTCBhcyBhUCwgQXJyYXlGaWVsZExpc3RWaWV3IGFzIGFRLCBwcmV2aWV3UHJvcHNUb1ZhbHVlIGFzIGFSLCBBcnJheUZpZWxkVmFsaWRhdGlvbk1lc3NhZ2VzIGFzIGFTLCB2YWx1ZVRvVXBkYXRlciBhcyBhVCwgc2V0VmFsdWVUb1ByZXZpZXdQcm9wcyBhcyBhVSwgRm9ybVZhbHVlQ29udGVudEZyb21QcmV2aWV3UHJvcHMgYXMgYVYsIHVzZUltYWdlTGlicmFyeVVSTCBhcyBhVywgbG9hZEltYWdlRGF0YSBhcyBhWCwgZW1wdHlJbWFnZURhdGEgYXMgYVksIEltYWdlRGltZW5zaW9uc0lucHV0IGFzIGFaLCBwYXJzZUltYWdlRGF0YSBhcyBhXywgcGx1cmFsaXplIGFzIGFhLCB1c2VWaWV3ZXIgYXMgYWIsIHVzZUNsb3VkSW5mbyBhcyBhYywgdXNlU2lkZWJhciBhcyBhZCwgdXNlQ29udGVudFBhbmVsU3RhdGUgYXMgYWUsIENvbnRlbnRQYW5lbFByb3ZpZGVyIGFzIGFmLCBTaWRlYmFyRGlhbG9nIGFzIGFnLCBTaWRlYmFyUGFuZWwgYXMgYWgsIEFwcFNoZWxsRXJyb3JDb250ZXh0IGFzIGFpLCBDb25maWdDb250ZXh0IGFzIGFqLCBBcHBTdGF0ZUNvbnRleHQgYXMgYWssIFNpZGViYXJQcm92aWRlciBhcyBhbCwgR2l0SHViQXBwU2hlbGxQcm92aWRlciBhcyBhbSwgTG9jYWxBcHBTaGVsbFByb3ZpZGVyIGFzIGFuLCBnZXRTaW5nbGV0b25Gb3JtYXQgYXMgYW8sIGdldFNpbmdsZXRvblBhdGggYXMgYXAsIGlzQ2xvdWRDb25maWcgYXMgYXEsIGFzc2VydFZhbGlkUmVwb0NvbmZpZyBhcyBhciwgUm91dGVyUHJvdmlkZXIgYXMgYXMsIEdpdEh1YkFwcFNoZWxsRGF0YUNvbnRleHQgYXMgYXQsIENsb3VkSW5mb1Byb3ZpZGVyIGFzIGF1LCBHaXRIdWJBcHBTaGVsbERhdGFQcm92aWRlciBhcyBhdiwgYmFzaWNGb3JtRmllbGRXaXRoU2ltcGxlUmVhZGVyUGFyc2UgYXMgYXcsIEZpZWxkRGF0YUVycm9yIGFzIGF4LCBhc3NlcnRSZXF1aXJlZCBhcyBheSwgY29uZmlnIGFzIGF6LCB1c2VUcmVlIGFzIGIsIGRvY3VtZW50JDEgYXMgYjAsIHNoYTEgYXMgYjEsIGdldFZhbHVlQXRQcm9wUGF0aCBhcyBiMiwgZm9ybWF0Rm9ybURhdGFFcnJvciBhcyBiMywgdHJlZUVudHJpZXNUb1RyZWVOb2RlcyBhcyBiNCwgQ2xvdWRJbWFnZVByZXZpZXcgYXMgYjUsIGNsb3VkSW1hZ2VUb29sYmFySWNvbiBhcyBiNiwgdHJhbnNmb3JtUHJvcHMgYXMgYjcsIGdldFVwbG9hZGVkRmlsZU9iamVjdCBhcyBiOCwgdXNlRW50cnlMYXlvdXRTcGxpdFBhbmVDb250ZXh0IGFzIGI5LCB1c2VDb250ZW50UGFuZWxTaXplIGFzIGJhLCBQcmlzbSBhcyBiYiwgY29sbGVjdERpcmVjdG9yaWVzVXNlZEluU2NoZW1hIGFzIGJjLCBDbG91ZEltYWdlUHJldmlld0Zvck5ld0VkaXRvciBhcyBiZCwgdXNlQnJhbmNoSW5mbyBhcyBjLCBnZXRFbnRyaWVzSW5Db2xsZWN0aW9uV2l0aFRyZWVLZXkgYXMgZCwgZ2V0QXV0aCBhcyBlLCBnZXRFbnRyeURhdGFGaWxlcGF0aCBhcyBmLCBnZXRDb2xsZWN0aW9uUGF0aCBhcyBnLCBwYXJzZVByb3BzIGFzIGgsIGlzTG9jYWxDb25maWcgYXMgaSwgdXNlQmFzZUNvbW1pdCBhcyBqLCB1c2VJc1JlcG9Qcml2YXRlIGFzIGssIGwxMG5NZXNzYWdlcyBhcyBsLCBnZXREaXJlY3Rvcmllc0ZvclRyZWVLZXkgYXMgbSwgZ2V0VHJlZUtleSBhcyBuLCBvYmplY3QgYXMgbywgcGFyc2VSZXBvQ29uZmlnIGFzIHAsIHVzZURhdGEgYXMgcSwgZ2V0VHJlZU5vZGVBdFBhdGggYXMgciwgc2VyaWFsaXplUmVwb0NvbmZpZyBhcyBzLCB0b0Zvcm1hdHRlZEZvcm1EYXRhRXJyb3IgYXMgdCwgdXNlUm91dGVyIGFzIHUsIGlzR2l0SHViQ29uZmlnIGFzIHYsIGJsb2JTaGEgYXMgdywgZ2V0UGF0aFByZWZpeCBhcyB4LCBLRVlTVEFUSUNfQ0xPVURfSEVBREVSUyBhcyB5LCB1c2VUaGVtZSBhcyB6IH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/index-fbab32f7.node.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/keystatic-core.node.esm.js":
/*!**********************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/keystatic-core.node.esm.js ***!
  \**********************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BlockWrapper: () => (/* reexport safe */ _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aC),\n/* harmony export */   NotEditable: () => (/* reexport safe */ _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aD),\n/* harmony export */   ToolbarSeparator: () => (/* reexport safe */ _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aE),\n/* harmony export */   collection: () => (/* reexport safe */ _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aA),\n/* harmony export */   component: () => (/* reexport safe */ _api_5f8911b5_node_esm_js__WEBPACK_IMPORTED_MODULE_1__.c),\n/* harmony export */   config: () => (/* reexport safe */ _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.az),\n/* harmony export */   fields: () => (/* binding */ index),\n/* harmony export */   singleton: () => (/* reexport safe */ _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aB)\n/* harmony export */ });\n/* harmony import */ var _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-fbab32f7.node.esm.js */ \"(ssr)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/index-fbab32f7.node.esm.js\");\n/* harmony import */ var _api_5f8911b5_node_esm_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./api-5f8911b5.node.esm.js */ \"(ssr)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/api-5f8911b5.node.esm.js\");\n/* harmony import */ var _index_20a81495_node_esm_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index-20a81495.node.esm.js */ \"(ssr)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/index-20a81495.node.esm.js\");\n/* harmony import */ var _keystar_ui_checkbox__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @keystar/ui/checkbox */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/checkbox/dist/keystar-ui-checkbox.esm.js\");\n/* harmony import */ var _keystar_ui_typography__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @keystar/ui/typography */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/typography/dist/keystar-ui-typography.esm.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/.pnpm/next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _keystar_ui_text_field__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @keystar/ui/text-field */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/text-field/dist/keystar-ui-text-field.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _keystar_ui_button__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @keystar/ui/button */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/button/dist/keystar-ui-button.esm.js\");\n/* harmony import */ var _keystar_ui_field__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @keystar/ui/field */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/field/dist/keystar-ui-field.esm.js\");\n/* harmony import */ var _keystar_ui_layout__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @keystar/ui/layout */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/layout/dist/keystar-ui-layout.esm.js\");\n/* harmony import */ var _keystar_ui_combobox__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @keystar/ui/combobox */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/combobox/dist/keystar-ui-combobox.esm.js\");\n/* harmony import */ var minimatch__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! minimatch */ \"(ssr)/./node_modules/.pnpm/minimatch@7.4.6/node_modules/minimatch/dist/mjs/index.js\");\n/* harmony import */ var _react_stately_collections__WEBPACK_IMPORTED_MODULE_101__ = __webpack_require__(/*! @react-stately/collections */ \"(ssr)/./node_modules/.pnpm/@react-stately+collections@3.10.5_react@18.2.0/node_modules/@react-stately/collections/dist/import.mjs\");\n/* harmony import */ var _useSlugsInCollection_b967166d_node_esm_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./useSlugsInCollection-b967166d.node.esm.js */ \"(ssr)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/useSlugsInCollection-b967166d.node.esm.js\");\n/* harmony import */ var _keystar_ui_picker__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @keystar/ui/picker */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/picker/dist/keystar-ui-picker.esm.js\");\n/* harmony import */ var _sindresorhus_slugify__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @sindresorhus/slugify */ \"(ssr)/./node_modules/.pnpm/@sindresorhus+slugify@1.1.2/node_modules/@sindresorhus/slugify/index.js\");\n/* harmony import */ var _sindresorhus_slugify__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_sindresorhus_slugify__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var emery__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! emery */ \"(ssr)/./node_modules/.pnpm/emery@1.4.3/node_modules/emery/dist/emery.esm.js\");\n/* harmony import */ var _keystar_ui_style__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @keystar/ui/style */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/style/dist/keystar-ui-style.esm.js\");\n/* harmony import */ var _keystar_ui_number_field__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @keystar/ui/number-field */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/number-field/dist/keystar-ui-number-field.esm.js\");\n/* harmony import */ var _braintree_sanitize_url__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @braintree/sanitize-url */ \"(ssr)/./node_modules/.pnpm/@braintree+sanitize-url@6.0.4/node_modules/@braintree/sanitize-url/dist/index.js\");\n/* harmony import */ var _react_aria_i18n__WEBPACK_IMPORTED_MODULE_102__ = __webpack_require__(/*! @react-aria/i18n */ \"(ssr)/./node_modules/.pnpm/@react-aria+i18n@3.10.2_react@18.2.0/node_modules/@react-aria/i18n/dist/real-module.mjs\");\n/* harmony import */ var _keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @keystar/ui/dialog */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/dialog/dist/keystar-ui-dialog.esm.js\");\n/* harmony import */ var _keystar_ui_slots__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @keystar/ui/slots */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/slots/dist/keystar-ui-slots.esm.js\");\n/* harmony import */ var _keystar_ui_menu__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @keystar/ui/menu */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/menu/dist/keystar-ui-menu.esm.js\");\n/* harmony import */ var _keystar_ui_link__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @keystar/ui/link */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/link/dist/keystar-ui-link.esm.js\");\n/* harmony import */ var _keystar_ui_progress__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @keystar/ui/progress */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/progress/dist/keystar-ui-progress.esm.js\");\n/* harmony import */ var emery_assertions__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! emery/assertions */ \"(ssr)/./node_modules/.pnpm/emery@1.4.3/node_modules/emery/assertions/dist/emery-assertions.esm.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_26___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_26__);\n/* harmony import */ var _keystar_ui_split_view__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @keystar/ui/split-view */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/split-view/dist/keystar-ui-split-view.esm.js\");\n/* harmony import */ var _keystar_ui_drag_and_drop__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @keystar/ui/drag-and-drop */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/drag-and-drop/dist/keystar-ui-drag-and-drop.esm.js\");\n/* harmony import */ var _keystar_ui_icon__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @keystar/ui/icon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/dist/keystar-ui-icon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_trash2Icon__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @keystar/ui/icon/icons/trash2Icon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/trash2Icon/dist/keystar-ui-icon-icons-trash2Icon.esm.js\");\n/* harmony import */ var _keystar_ui_list_view__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @keystar/ui/list-view */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/list-view/dist/keystar-ui-list-view.esm.js\");\n/* harmony import */ var _keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! @keystar/ui/tooltip */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/tooltip/dist/keystar-ui-tooltip.esm.js\");\n/* harmony import */ var is_hotkey__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! is-hotkey */ \"(ssr)/./node_modules/.pnpm/is-hotkey@0.2.0/node_modules/is-hotkey/lib/index.js\");\n/* harmony import */ var _keystar_ui_icon_icons_editIcon__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! @keystar/ui/icon/icons/editIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/editIcon/dist/keystar-ui-icon-icons-editIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_externalLinkIcon__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! @keystar/ui/icon/icons/externalLinkIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/externalLinkIcon/dist/keystar-ui-icon-icons-externalLinkIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_linkIcon__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! @keystar/ui/icon/icons/linkIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/linkIcon/dist/keystar-ui-icon-icons-linkIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_unlinkIcon__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! @keystar/ui/icon/icons/unlinkIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/unlinkIcon/dist/keystar-ui-icon-icons-unlinkIcon.esm.js\");\n/* harmony import */ var _keystar_ui_overlays__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! @keystar/ui/overlays */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/overlays/dist/keystar-ui-overlays.esm.js\");\n/* harmony import */ var _keystar_ui_action_group__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! @keystar/ui/action-group */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/action-group/dist/keystar-ui-action-group.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_boldIcon__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! @keystar/ui/icon/icons/boldIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/boldIcon/dist/keystar-ui-icon-icons-boldIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_chevronDownIcon__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! @keystar/ui/icon/icons/chevronDownIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/chevronDownIcon/dist/keystar-ui-icon-icons-chevronDownIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_codeIcon__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! @keystar/ui/icon/icons/codeIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/codeIcon/dist/keystar-ui-icon-icons-codeIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_italicIcon__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! @keystar/ui/icon/icons/italicIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/italicIcon/dist/keystar-ui-icon-icons-italicIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_maximizeIcon__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! @keystar/ui/icon/icons/maximizeIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/maximizeIcon/dist/keystar-ui-icon-icons-maximizeIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_minimizeIcon__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! @keystar/ui/icon/icons/minimizeIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/minimizeIcon/dist/keystar-ui-icon-icons-minimizeIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_plusIcon__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! @keystar/ui/icon/icons/plusIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/plusIcon/dist/keystar-ui-icon-icons-plusIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_removeFormattingIcon__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! @keystar/ui/icon/icons/removeFormattingIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/removeFormattingIcon/dist/keystar-ui-icon-icons-removeFormattingIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_strikethroughIcon__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! @keystar/ui/icon/icons/strikethroughIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/strikethroughIcon/dist/keystar-ui-icon-icons-strikethroughIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_subscriptIcon__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! @keystar/ui/icon/icons/subscriptIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/subscriptIcon/dist/keystar-ui-icon-icons-subscriptIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_superscriptIcon__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! @keystar/ui/icon/icons/superscriptIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/superscriptIcon/dist/keystar-ui-icon-icons-superscriptIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_typeIcon__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! @keystar/ui/icon/icons/typeIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/typeIcon/dist/keystar-ui-icon-icons-typeIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_underlineIcon__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! @keystar/ui/icon/icons/underlineIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/underlineIcon/dist/keystar-ui-icon-icons-underlineIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_alignLeftIcon__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! @keystar/ui/icon/icons/alignLeftIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/alignLeftIcon/dist/keystar-ui-icon-icons-alignLeftIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_alignRightIcon__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! @keystar/ui/icon/icons/alignRightIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/alignRightIcon/dist/keystar-ui-icon-icons-alignRightIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_alignCenterIcon__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! @keystar/ui/icon/icons/alignCenterIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/alignCenterIcon/dist/keystar-ui-icon-icons-alignCenterIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_quoteIcon__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! @keystar/ui/icon/icons/quoteIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/quoteIcon/dist/keystar-ui-icon-icons-quoteIcon.esm.js\");\n/* harmony import */ var match_sorter__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! match-sorter */ \"(ssr)/./node_modules/.pnpm/match-sorter@6.3.4/node_modules/match-sorter/dist/match-sorter.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_trashIcon__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! @keystar/ui/icon/icons/trashIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/trashIcon/dist/keystar-ui-icon-icons-trashIcon.esm.js\");\n/* harmony import */ var _emotion_weak_memoize__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! @emotion/weak-memoize */ \"(ssr)/./node_modules/.pnpm/@emotion+weak-memoize@0.3.1/node_modules/@emotion/weak-memoize/dist/emotion-weak-memoize.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_minusIcon__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! @keystar/ui/icon/icons/minusIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/minusIcon/dist/keystar-ui-icon-icons-minusIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_columnsIcon__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! @keystar/ui/icon/icons/columnsIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/columnsIcon/dist/keystar-ui-icon-icons-columnsIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_listIcon__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! @keystar/ui/icon/icons/listIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/listIcon/dist/keystar-ui-icon-icons-listIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_listOrderedIcon__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(/*! @keystar/ui/icon/icons/listOrderedIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/listOrderedIcon/dist/keystar-ui-icon-icons-listOrderedIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_fileUpIcon__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(/*! @keystar/ui/icon/icons/fileUpIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/fileUpIcon/dist/keystar-ui-icon-icons-fileUpIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_imageIcon__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(/*! @keystar/ui/icon/icons/imageIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/imageIcon/dist/keystar-ui-icon-icons-imageIcon.esm.js\");\n/* harmony import */ var _ts_gql_tag_no_transform__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(/*! @ts-gql/tag/no-transform */ \"(ssr)/./node_modules/.pnpm/@ts-gql+tag@0.7.3_graphql@16.8.1/node_modules/@ts-gql/tag/no-transform/dist/tag.esm.js\");\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(/*! cookie */ \"(ssr)/./node_modules/.pnpm/cookie@0.5.0/node_modules/cookie/index.js\");\n/* harmony import */ var _keystar_ui_icon_icons_link2Icon__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(/*! @keystar/ui/icon/icons/link2Icon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/link2Icon/dist/keystar-ui-icon-icons-link2Icon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_link2OffIcon__WEBPACK_IMPORTED_MODULE_69__ = __webpack_require__(/*! @keystar/ui/icon/icons/link2OffIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/link2OffIcon/dist/keystar-ui-icon-icons-link2OffIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_pencilIcon__WEBPACK_IMPORTED_MODULE_70__ = __webpack_require__(/*! @keystar/ui/icon/icons/pencilIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/pencilIcon/dist/keystar-ui-icon-icons-pencilIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_undo2Icon__WEBPACK_IMPORTED_MODULE_71__ = __webpack_require__(/*! @keystar/ui/icon/icons/undo2Icon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/undo2Icon/dist/keystar-ui-icon-icons-undo2Icon.esm.js\");\n/* harmony import */ var _keystar_ui_utils__WEBPACK_IMPORTED_MODULE_72__ = __webpack_require__(/*! @keystar/ui/utils */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/utils/dist/keystar-ui-utils.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_sheetIcon__WEBPACK_IMPORTED_MODULE_73__ = __webpack_require__(/*! @keystar/ui/icon/icons/sheetIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/sheetIcon/dist/keystar-ui-icon-icons-sheetIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_tableIcon__WEBPACK_IMPORTED_MODULE_74__ = __webpack_require__(/*! @keystar/ui/icon/icons/tableIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/tableIcon/dist/keystar-ui-icon-icons-tableIcon.esm.js\");\n/* harmony import */ var _keystar_ui_listbox__WEBPACK_IMPORTED_MODULE_75__ = __webpack_require__(/*! @keystar/ui/listbox */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/listbox/dist/keystar-ui-listbox.esm.js\");\n/* harmony import */ var mdast_util_from_markdown__WEBPACK_IMPORTED_MODULE_76__ = __webpack_require__(/*! mdast-util-from-markdown */ \"(ssr)/./node_modules/.pnpm/mdast-util-from-markdown@0.8.5/node_modules/mdast-util-from-markdown/index.js\");\n/* harmony import */ var mdast_util_from_markdown__WEBPACK_IMPORTED_MODULE_76___default = /*#__PURE__*/__webpack_require__.n(mdast_util_from_markdown__WEBPACK_IMPORTED_MODULE_76__);\n/* harmony import */ var mdast_util_gfm_autolink_literal_from_markdown__WEBPACK_IMPORTED_MODULE_77__ = __webpack_require__(/*! mdast-util-gfm-autolink-literal/from-markdown */ \"(ssr)/./node_modules/.pnpm/mdast-util-gfm-autolink-literal@0.1.3/node_modules/mdast-util-gfm-autolink-literal/from-markdown.js\");\n/* harmony import */ var micromark_extension_gfm_autolink_literal__WEBPACK_IMPORTED_MODULE_78__ = __webpack_require__(/*! micromark-extension-gfm-autolink-literal */ \"(ssr)/./node_modules/.pnpm/micromark-extension-gfm-autolink-literal@0.5.7/node_modules/micromark-extension-gfm-autolink-literal/index.js\");\n/* harmony import */ var mdast_util_gfm_strikethrough_from_markdown__WEBPACK_IMPORTED_MODULE_79__ = __webpack_require__(/*! mdast-util-gfm-strikethrough/from-markdown */ \"(ssr)/./node_modules/.pnpm/mdast-util-gfm-strikethrough@0.2.3/node_modules/mdast-util-gfm-strikethrough/from-markdown.js\");\n/* harmony import */ var micromark_extension_gfm_strikethrough__WEBPACK_IMPORTED_MODULE_80__ = __webpack_require__(/*! micromark-extension-gfm-strikethrough */ \"(ssr)/./node_modules/.pnpm/micromark-extension-gfm-strikethrough@0.6.5/node_modules/micromark-extension-gfm-strikethrough/index.js\");\n/* harmony import */ var micromark_extension_gfm_strikethrough__WEBPACK_IMPORTED_MODULE_80___default = /*#__PURE__*/__webpack_require__.n(micromark_extension_gfm_strikethrough__WEBPACK_IMPORTED_MODULE_80__);\n/* harmony import */ var _keystar_ui_icon_icons_panelLeftOpenIcon__WEBPACK_IMPORTED_MODULE_81__ = __webpack_require__(/*! @keystar/ui/icon/icons/panelLeftOpenIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/panelLeftOpenIcon/dist/keystar-ui-icon-icons-panelLeftOpenIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_panelLeftCloseIcon__WEBPACK_IMPORTED_MODULE_82__ = __webpack_require__(/*! @keystar/ui/icon/icons/panelLeftCloseIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/panelLeftCloseIcon/dist/keystar-ui-icon-icons-panelLeftCloseIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_panelRightOpenIcon__WEBPACK_IMPORTED_MODULE_83__ = __webpack_require__(/*! @keystar/ui/icon/icons/panelRightOpenIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/panelRightOpenIcon/dist/keystar-ui-icon-icons-panelRightOpenIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_panelRightCloseIcon__WEBPACK_IMPORTED_MODULE_84__ = __webpack_require__(/*! @keystar/ui/icon/icons/panelRightCloseIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/panelRightCloseIcon/dist/keystar-ui-icon-icons-panelRightCloseIcon.esm.js\");\n/* harmony import */ var _keystar_ui_badge__WEBPACK_IMPORTED_MODULE_85__ = __webpack_require__(/*! @keystar/ui/badge */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/badge/dist/keystar-ui-badge.esm.js\");\n/* harmony import */ var _keystar_ui_nav_list__WEBPACK_IMPORTED_MODULE_86__ = __webpack_require__(/*! @keystar/ui/nav-list */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/nav-list/dist/keystar-ui-nav-list.esm.js\");\n/* harmony import */ var _keystar_ui_status_light__WEBPACK_IMPORTED_MODULE_87__ = __webpack_require__(/*! @keystar/ui/status-light */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/status-light/dist/keystar-ui-status-light.esm.js\");\n/* harmony import */ var _keystar_ui_core__WEBPACK_IMPORTED_MODULE_88__ = __webpack_require__(/*! @keystar/ui/core */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/core/dist/keystar-ui-core.esm.js\");\n/* harmony import */ var _keystar_ui_avatar__WEBPACK_IMPORTED_MODULE_89__ = __webpack_require__(/*! @keystar/ui/avatar */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/avatar/dist/keystar-ui-avatar.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_logOutIcon__WEBPACK_IMPORTED_MODULE_90__ = __webpack_require__(/*! @keystar/ui/icon/icons/logOutIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/logOutIcon/dist/keystar-ui-icon-icons-logOutIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_gitPullRequestIcon__WEBPACK_IMPORTED_MODULE_91__ = __webpack_require__(/*! @keystar/ui/icon/icons/gitPullRequestIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/gitPullRequestIcon/dist/keystar-ui-icon-icons-gitPullRequestIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_gitBranchPlusIcon__WEBPACK_IMPORTED_MODULE_92__ = __webpack_require__(/*! @keystar/ui/icon/icons/gitBranchPlusIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/gitBranchPlusIcon/dist/keystar-ui-icon-icons-gitBranchPlusIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_githubIcon__WEBPACK_IMPORTED_MODULE_93__ = __webpack_require__(/*! @keystar/ui/icon/icons/githubIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/githubIcon/dist/keystar-ui-icon-icons-githubIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_gitForkIcon__WEBPACK_IMPORTED_MODULE_94__ = __webpack_require__(/*! @keystar/ui/icon/icons/gitForkIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/gitForkIcon/dist/keystar-ui-icon-icons-gitForkIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_monitorIcon__WEBPACK_IMPORTED_MODULE_95__ = __webpack_require__(/*! @keystar/ui/icon/icons/monitorIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/monitorIcon/dist/keystar-ui-icon-icons-monitorIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_moonIcon__WEBPACK_IMPORTED_MODULE_96__ = __webpack_require__(/*! @keystar/ui/icon/icons/moonIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/moonIcon/dist/keystar-ui-icon-icons-moonIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_sunIcon__WEBPACK_IMPORTED_MODULE_97__ = __webpack_require__(/*! @keystar/ui/icon/icons/sunIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/sunIcon/dist/keystar-ui-icon-icons-sunIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_userIcon__WEBPACK_IMPORTED_MODULE_98__ = __webpack_require__(/*! @keystar/ui/icon/icons/userIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/userIcon/dist/keystar-ui-icon-icons-userIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_gitBranchIcon__WEBPACK_IMPORTED_MODULE_99__ = __webpack_require__(/*! @keystar/ui/icon/icons/gitBranchIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/gitBranchIcon/dist/keystar-ui-icon-icons-gitBranchIcon.esm.js\");\n/* harmony import */ var _keystar_ui_radio__WEBPACK_IMPORTED_MODULE_100__ = __webpack_require__(/*! @keystar/ui/radio */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/radio/dist/keystar-ui-radio.esm.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction array(element, opts) {\n  var _opts$label;\n  return {\n    kind: 'array',\n    element,\n    label: (_opts$label = opts === null || opts === void 0 ? void 0 : opts.label) !== null && _opts$label !== void 0 ? _opts$label : 'Items',\n    description: opts === null || opts === void 0 ? void 0 : opts.description,\n    itemLabel: opts === null || opts === void 0 ? void 0 : opts.itemLabel,\n    asChildTag: opts === null || opts === void 0 ? void 0 : opts.asChildTag,\n    slugField: opts === null || opts === void 0 ? void 0 : opts.slugField,\n    validation: opts === null || opts === void 0 ? void 0 : opts.validation\n  };\n}\n\nfunction CheckboxFieldInput(props) {\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_checkbox__WEBPACK_IMPORTED_MODULE_3__.Checkbox, {\n    isSelected: props.value,\n    onChange: props.onChange,\n    autoFocus: props.autoFocus,\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_4__.Text, {\n      children: props.label\n    }), props.description && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_4__.Text, {\n      slot: \"description\",\n      children: props.description\n    })]\n  });\n}\n\nfunction checkbox({\n  label,\n  defaultValue = false,\n  description\n}) {\n  return (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aw)({\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(CheckboxFieldInput, {\n        ...props,\n        label: label,\n        description: description\n      });\n    },\n    defaultValue() {\n      return defaultValue;\n    },\n    parse(value) {\n      if (value === undefined) return defaultValue;\n      if (typeof value !== 'boolean') {\n        throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax('Must be a boolean');\n      }\n      return value;\n    },\n    validate(value) {\n      return value;\n    },\n    serialize(value) {\n      return {\n        value\n      };\n    }\n  });\n}\n\nfunction child(options) {\n  return {\n    kind: 'child',\n    options: options.kind === 'block' ? {\n      ...options,\n      dividers: options.dividers,\n      formatting: options.formatting === 'inherit' ? {\n        blockTypes: 'inherit',\n        headingLevels: 'inherit',\n        inlineMarks: 'inherit',\n        listTypes: 'inherit',\n        alignment: 'inherit',\n        softBreaks: 'inherit'\n      } : options.formatting,\n      links: options.links,\n      images: options.images,\n      tables: options.tables,\n      componentBlocks: options.componentBlocks\n    } : {\n      kind: 'inline',\n      placeholder: options.placeholder,\n      formatting: options.formatting === 'inherit' ? {\n        inlineMarks: 'inherit',\n        softBreaks: 'inherit'\n      } : options.formatting,\n      links: options.links\n    }\n  };\n}\n\nfunction conditional(discriminant, values) {\n  return {\n    kind: 'conditional',\n    discriminant,\n    values: values\n  };\n}\n\nfunction validateDate(validation, value, label) {\n  if (value !== null && !/^\\d{4}-\\d{2}-\\d{2}$/.test(value)) {\n    return `${label} is not a valid date`;\n  }\n  if (validation !== null && validation !== void 0 && validation.isRequired && value === null) {\n    return `${label} is required`;\n  }\n  if ((validation !== null && validation !== void 0 && validation.min || validation !== null && validation !== void 0 && validation.max) && value !== null) {\n    const date = new Date(value);\n    if ((validation === null || validation === void 0 ? void 0 : validation.min) !== undefined) {\n      const min = new Date(validation.min);\n      if (date < min) {\n        return `${label} must be after ${min.toLocaleDateString()}`;\n      }\n    }\n    if ((validation === null || validation === void 0 ? void 0 : validation.max) !== undefined) {\n      const max = new Date(validation.max);\n      if (date > max) {\n        return `${label} must be no later than ${max.toLocaleDateString()}`;\n      }\n    }\n  }\n}\n\nfunction DateFieldInput(props) {\n  var _props$validation;\n  const [blurred, onBlur] = (0,react__WEBPACK_IMPORTED_MODULE_7__.useReducer)(() => true, false);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_text_field__WEBPACK_IMPORTED_MODULE_6__.TextField, {\n    label: props.label,\n    description: props.description,\n    type: \"date\",\n    onChange: val => {\n      props.onChange(val === '' ? null : val);\n    },\n    autoFocus: props.autoFocus,\n    value: props.value === null ? '' : props.value,\n    onBlur: onBlur,\n    isRequired: (_props$validation = props.validation) === null || _props$validation === void 0 ? void 0 : _props$validation.isRequired,\n    errorMessage: blurred || props.forceValidation ? validateDate(props.validation, props.value, props.label) : undefined\n  });\n}\n\nfunction date({\n  label,\n  defaultValue,\n  validation,\n  description\n}) {\n  return (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aw)({\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(DateFieldInput, {\n        validation: validation,\n        label: label,\n        description: description,\n        ...props\n      });\n    },\n    defaultValue() {\n      if (defaultValue === undefined) {\n        return null;\n      }\n      if (typeof defaultValue === 'string') {\n        return defaultValue;\n      }\n      const today = new Date();\n      const year = today.getFullYear();\n      const month = String(today.getMonth() + 1).padStart(2, '0');\n      const day = String(today.getDate()).padStart(2, '0');\n      return `${year}-${month}-${day}`;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax('Must be a string');\n      }\n      return value;\n    },\n    serialize(value) {\n      return {\n        value: value === null ? undefined : value\n      };\n    },\n    validate(value) {\n      const message = validateDate(validation, value, label);\n      if (message !== undefined) {\n        throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax(message);\n      }\n      (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ay)(value, validation, label);\n      return value;\n    }\n  });\n}\n\nfunction validateDatetime(validation, value, label) {\n  if (value !== null && !/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}$/.test(value)) {\n    return `${label} is not a valid datetime`;\n  }\n  if (validation !== null && validation !== void 0 && validation.isRequired && value === null) {\n    return `${label} is required`;\n  }\n  if ((validation !== null && validation !== void 0 && validation.min || validation !== null && validation !== void 0 && validation.max) && value !== null) {\n    const datetime = new Date(value);\n    if ((validation === null || validation === void 0 ? void 0 : validation.min) !== undefined) {\n      const min = new Date(validation.min);\n      if (datetime < min) {\n        return `${label} must be after ${min.toISOString()}`;\n      }\n    }\n    if ((validation === null || validation === void 0 ? void 0 : validation.max) !== undefined) {\n      const max = new Date(validation.max);\n      if (datetime > max) {\n        return `${label} must be no later than ${max.toISOString()}`;\n      }\n    }\n  }\n}\n\n//ui.tsx\nfunction DatetimeFieldInput(props) {\n  var _props$validation;\n  const [blurred, onBlur] = (0,react__WEBPACK_IMPORTED_MODULE_7__.useReducer)(() => true, false);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_text_field__WEBPACK_IMPORTED_MODULE_6__.TextField, {\n    label: props.label,\n    description: props.description,\n    type: \"datetime-local\",\n    onChange: val => {\n      props.onChange(val === '' ? null : val);\n    },\n    autoFocus: props.autoFocus,\n    value: props.value === null ? '' : props.value,\n    onBlur: onBlur,\n    isRequired: (_props$validation = props.validation) === null || _props$validation === void 0 ? void 0 : _props$validation.isRequired,\n    errorMessage: blurred || props.forceValidation ? validateDatetime(props.validation, props.value, props.label) : undefined\n  });\n}\n\nfunction datetime({\n  label,\n  defaultValue,\n  validation,\n  description\n}) {\n  return (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aw)({\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(DatetimeFieldInput, {\n        validation: validation,\n        label: label,\n        description: description,\n        ...props\n      });\n    },\n    defaultValue() {\n      if (defaultValue === undefined) {\n        return null;\n      }\n      if (typeof defaultValue === 'string') {\n        return defaultValue;\n      }\n      if (defaultValue.kind === 'now') {\n        const now = new Date();\n        return now.toISOString();\n      }\n      return null;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax('Must be a string');\n      }\n      return value;\n    },\n    serialize(value) {\n      return {\n        value: value === null ? undefined : value\n      };\n    },\n    validate(value) {\n      const message = validateDatetime(validation, value, label);\n      if (message !== undefined) {\n        throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax(message);\n      }\n      (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ay)(value, validation, label);\n      return value;\n    }\n  });\n}\n\nfunction emptyDocument() {\n  return {\n    kind: 'form',\n    formKind: 'content',\n    Input() {\n      return null;\n    },\n    defaultValue() {\n      return null;\n    },\n    parse() {\n      return null;\n    },\n    contentExtension: '.mdoc',\n    serialize() {\n      return {\n        value: undefined,\n        content: new Uint8Array(),\n        external: new Map(),\n        other: new Map()\n      };\n    },\n    validate(value) {\n      return value;\n    },\n    reader: {\n      parse() {\n        return null;\n      }\n    }\n  };\n}\n\nfunction empty() {\n  return (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aw)({\n    Input() {\n      return null;\n    },\n    defaultValue() {\n      return null;\n    },\n    parse() {\n      return null;\n    },\n    serialize() {\n      return {\n        value: undefined\n      };\n    },\n    validate(value) {\n      return value;\n    }\n  });\n}\n\nfunction image({\n  label,\n  directory,\n  validation,\n  description,\n  publicPath\n}) {\n  return {\n    kind: 'form',\n    formKind: 'asset',\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aF, {\n        label: label,\n        description: description,\n        validation: validation,\n        ...props\n      });\n    },\n    defaultValue() {\n      return null;\n    },\n    filename(value, args) {\n      if (typeof value === 'string') {\n        return value.slice((0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aG)(publicPath, args.slug).length);\n      }\n      return undefined;\n    },\n    parse(value, args) {\n      var _value$match$, _value$match;\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax('Must be a string');\n      }\n      if (args.asset === undefined) {\n        return null;\n      }\n      return {\n        data: args.asset,\n        filename: value.slice((0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aG)(publicPath, args.slug).length),\n        extension: (_value$match$ = (_value$match = value.match(/\\.([^.]+$)/)) === null || _value$match === void 0 ? void 0 : _value$match[1]) !== null && _value$match$ !== void 0 ? _value$match$ : ''\n      };\n    },\n    validate(value) {\n      (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ay)(value, validation, label);\n      return value;\n    },\n    serialize(value, args) {\n      if (value === null) {\n        return {\n          value: undefined,\n          asset: undefined\n        };\n      }\n      const filename = args.suggestedFilenamePrefix ? args.suggestedFilenamePrefix + '.' + value.extension : value.filename;\n      return {\n        value: `${(0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aG)(publicPath, args.slug)}${filename}`,\n        asset: {\n          filename,\n          content: value.data\n        }\n      };\n    },\n    directory: directory ? (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aH)(directory) : undefined,\n    reader: {\n      parse(value) {\n        if (typeof value !== 'string' && value !== undefined) {\n          throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax('Must be a string');\n        }\n        const val = value === undefined ? null : value;\n        (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ay)(val, validation, label);\n        return val;\n      }\n    }\n  };\n}\n\nfunction FileFieldInput(props) {\n  var _props$validation, _props$validation2;\n  const {\n    value\n  } = props;\n  const [blurred, onBlur] = (0,react__WEBPACK_IMPORTED_MODULE_7__.useReducer)(() => true, false);\n  const isInEditor = (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aI)();\n  const objectUrl = (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aJ)(value === null ? null : value.data);\n  const labelId = (0,react__WEBPACK_IMPORTED_MODULE_7__.useId)();\n  const descriptionId = (0,react__WEBPACK_IMPORTED_MODULE_7__.useId)();\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_10__.Flex, {\n    \"aria-describedby\": props.description ? descriptionId : undefined,\n    \"aria-labelledby\": labelId,\n    direction: \"column\",\n    gap: \"medium\",\n    role: \"group\",\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_field__WEBPACK_IMPORTED_MODULE_9__.FieldLabel, {\n      id: labelId,\n      elementType: \"span\",\n      isRequired: (_props$validation = props.validation) === null || _props$validation === void 0 ? void 0 : _props$validation.isRequired,\n      children: props.label\n    }), props.description && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_4__.Text, {\n      size: \"small\",\n      color: \"neutralSecondary\",\n      id: descriptionId,\n      children: props.description\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_8__.ButtonGroup, {\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_8__.ActionButton, {\n        onPress: async () => {\n          const file = await (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aK)('');\n          if (file) {\n            var _file$filename$match$, _file$filename$match;\n            props.onChange({\n              data: file.content,\n              filename: file.filename,\n              extension: (_file$filename$match$ = (_file$filename$match = file.filename.match(/\\.([^.]+$)/)) === null || _file$filename$match === void 0 ? void 0 : _file$filename$match[1]) !== null && _file$filename$match$ !== void 0 ? _file$filename$match$ : ''\n            });\n          }\n        },\n        children: \"Choose file\"\n      }), value !== null && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.Fragment, {\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_8__.ActionButton, {\n          prominence: \"low\",\n          onPress: () => {\n            props.onChange(null);\n            onBlur();\n          },\n          children: \"Remove\"\n        }), objectUrl && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_8__.Button, {\n          href: objectUrl,\n          download: value.filename,\n          prominence: \"low\",\n          children: \"Download\"\n        })]\n      })]\n    }), isInEditor && value !== null && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_text_field__WEBPACK_IMPORTED_MODULE_6__.TextField, {\n      label: \"Filename\",\n      onChange: filename => {\n        props.onChange({\n          ...value,\n          filename\n        });\n      },\n      value: value.filename\n    }), (props.forceValidation || blurred) && ((_props$validation2 = props.validation) === null || _props$validation2 === void 0 ? void 0 : _props$validation2.isRequired) && value === null && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_field__WEBPACK_IMPORTED_MODULE_9__.FieldMessage, {\n      children: [props.label, \" is required\"]\n    })]\n  });\n}\n\nfunction file({\n  label,\n  directory,\n  validation,\n  description,\n  publicPath\n}) {\n  return {\n    kind: 'form',\n    formKind: 'asset',\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(FileFieldInput, {\n        label: label,\n        description: description,\n        validation: validation,\n        ...props\n      });\n    },\n    defaultValue() {\n      return null;\n    },\n    filename(value, args) {\n      if (typeof value === 'string') {\n        return value.slice((0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aG)(publicPath, args.slug).length);\n      }\n      return undefined;\n    },\n    parse(value, args) {\n      var _value$match$, _value$match;\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax('Must be a string');\n      }\n      if (args.asset === undefined) {\n        return null;\n      }\n      return {\n        data: args.asset,\n        filename: value.slice((0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aG)(publicPath, args.slug).length),\n        extension: (_value$match$ = (_value$match = value.match(/\\.([^.]+$)/)) === null || _value$match === void 0 ? void 0 : _value$match[1]) !== null && _value$match$ !== void 0 ? _value$match$ : ''\n      };\n    },\n    validate(value) {\n      (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ay)(value, validation, label);\n      return value;\n    },\n    serialize(value, args) {\n      if (value === null) {\n        return {\n          value: undefined,\n          asset: undefined\n        };\n      }\n      const filename = args.suggestedFilenamePrefix ? args.suggestedFilenamePrefix + '.' + value.extension : value.filename;\n      return {\n        value: `${(0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aG)(publicPath, args.slug)}${filename}`,\n        asset: {\n          filename,\n          content: value.data\n        }\n      };\n    },\n    directory: directory ? (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aH)(directory) : undefined,\n    reader: {\n      parse(value) {\n        if (typeof value !== 'string' && value !== undefined) {\n          throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax('Must be a string');\n        }\n        const val = value === undefined ? null : value;\n        (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ay)(val, validation, label);\n        return val;\n      }\n    }\n  };\n}\n\nfunction MultiselectFieldInput(props) {\n  const labelId = (0,react__WEBPACK_IMPORTED_MODULE_7__.useId)();\n  const descriptionId = (0,react__WEBPACK_IMPORTED_MODULE_7__.useId)();\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_10__.Flex, {\n    role: \"group\",\n    \"aria-labelledby\": labelId,\n    \"aria-describedby\": props.description ? descriptionId : undefined,\n    direction: \"column\",\n    gap: \"medium\",\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_field__WEBPACK_IMPORTED_MODULE_9__.FieldLabel, {\n      elementType: \"span\",\n      id: labelId,\n      children: props.label\n    }), props.description && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_4__.Text, {\n      id: descriptionId,\n      size: \"small\",\n      color: \"neutralSecondary\",\n      children: props.description\n    }), props.options.map(option => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_checkbox__WEBPACK_IMPORTED_MODULE_3__.Checkbox, {\n      isSelected: props.value.includes(option.value),\n      onChange: () => {\n        if (props.value.includes(option.value)) {\n          props.onChange(props.value.filter(x => x !== option.value));\n        } else {\n          props.onChange([...props.value, option.value]);\n        }\n      },\n      children: option.label\n    }, option.value))]\n  });\n}\n\nfunction multiselect({\n  label,\n  options,\n  defaultValue = [],\n  description\n}) {\n  const valuesToOption = new Map(options.map(x => [x.value, x]));\n  const field = (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aw)({\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(MultiselectFieldInput, {\n        label: label,\n        description: description,\n        options: options,\n        ...props\n      });\n    },\n    defaultValue() {\n      return defaultValue;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return [];\n      }\n      if (!Array.isArray(value)) {\n        throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax('Must be an array of options');\n      }\n      if (!value.every(x => typeof x === 'string' && valuesToOption.has(x))) {\n        throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax(`Must be an array with one of ${options.map(x => x.value).join(', ')}`);\n      }\n      return value;\n    },\n    validate(value) {\n      return value;\n    },\n    serialize(value) {\n      return {\n        value\n      };\n    }\n  });\n  return {\n    ...field,\n    options\n  };\n}\n\nfunction PathReferenceInput(props) {\n  var _props$validation, _props$validation2;\n  const match = (0,react__WEBPACK_IMPORTED_MODULE_7__.useMemo)(() => props.pattern ? (0,minimatch__WEBPACK_IMPORTED_MODULE_12__.filter)(props.pattern) : () => true, [props.pattern]);\n  const [blurred, onBlur] = (0,react__WEBPACK_IMPORTED_MODULE_7__.useReducer)(() => true, false);\n  const tree = (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.b)().current;\n  const options = (0,react__WEBPACK_IMPORTED_MODULE_7__.useMemo)(() => {\n    const files = tree.kind === 'loaded' ? [...tree.data.entries.values()] : [];\n    return files.filter(val => match(val.path));\n  }, [tree, match]);\n  const _errorMessage = (props.forceValidation || blurred) && (_props$validation = props.validation) !== null && _props$validation !== void 0 && _props$validation.isRequired && props.value === null ? `${props.label} is required` : undefined;\n  // this state & effect shouldn't really exist\n  // it's here because react-aria/stately calls onSelectionChange with null\n  // after selecting an item if we immediately remove the error message\n  // so we delay it with an effect\n  const [errorMessage, setErrorMessage] = (0,react__WEBPACK_IMPORTED_MODULE_7__.useState)(_errorMessage);\n  (0,react__WEBPACK_IMPORTED_MODULE_7__.useEffect)(() => {\n    setErrorMessage(_errorMessage);\n  }, [_errorMessage]);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_combobox__WEBPACK_IMPORTED_MODULE_11__.Combobox, {\n    label: props.label,\n    description: props.description,\n    selectedKey: props.value,\n    onSelectionChange: key => {\n      if (typeof key === 'string' || key === null) {\n        props.onChange(key);\n      }\n    },\n    onBlur: onBlur,\n    isRequired: (_props$validation2 = props.validation) === null || _props$validation2 === void 0 ? void 0 : _props$validation2.isRequired,\n    errorMessage: errorMessage,\n    autoFocus: props.autoFocus,\n    defaultItems: options,\n    width: \"auto\",\n    children: item => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_combobox__WEBPACK_IMPORTED_MODULE_11__.Item, {\n      children: item.path\n    }, item.path)\n  });\n}\n\nfunction pathReference({\n  label,\n  pattern,\n  validation,\n  description\n}) {\n  return (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aw)({\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(PathReferenceInput, {\n        label: label,\n        pattern: pattern,\n        description: description,\n        validation: validation,\n        ...props\n      });\n    },\n    defaultValue() {\n      return null;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax('Must be a string');\n      }\n      return value;\n    },\n    validate(value) {\n      (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ay)(value, validation, label);\n      return value;\n    },\n    serialize(value) {\n      return {\n        value: value === null ? undefined : value\n      };\n    }\n  });\n}\n\nfunction RelationshipInput(props) {\n  var _props$validation, _props$validation2;\n  const [blurred, onBlur] = (0,react__WEBPACK_IMPORTED_MODULE_7__.useReducer)(() => true, false);\n  const slugs = (0,_useSlugsInCollection_b967166d_node_esm_js__WEBPACK_IMPORTED_MODULE_13__.u)(props.collection);\n  const options = (0,react__WEBPACK_IMPORTED_MODULE_7__.useMemo)(() => {\n    return slugs.map(slug => ({\n      slug\n    }));\n  }, [slugs]);\n  const _errorMessage = (props.forceValidation || blurred) && (_props$validation = props.validation) !== null && _props$validation !== void 0 && _props$validation.isRequired && props.value === null ? `${props.label} is required` : undefined;\n  // this state & effect shouldn't really exist\n  // it's here because react-aria/stately calls onSelectionChange with null\n  // after selecting an item if we immediately remove the error message\n  // so we delay it with an effect\n  const [errorMessage, setErrorMessage] = (0,react__WEBPACK_IMPORTED_MODULE_7__.useState)(_errorMessage);\n  (0,react__WEBPACK_IMPORTED_MODULE_7__.useEffect)(() => {\n    setErrorMessage(_errorMessage);\n  }, [_errorMessage]);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_combobox__WEBPACK_IMPORTED_MODULE_11__.Combobox, {\n    label: props.label,\n    description: props.description,\n    selectedKey: props.value,\n    onSelectionChange: key => {\n      if (typeof key === 'string' || key === null) {\n        props.onChange(key);\n      }\n    },\n    onBlur: onBlur,\n    autoFocus: props.autoFocus,\n    defaultItems: options,\n    isRequired: (_props$validation2 = props.validation) === null || _props$validation2 === void 0 ? void 0 : _props$validation2.isRequired,\n    errorMessage: errorMessage,\n    width: \"auto\",\n    children: item => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_react_stately_collections__WEBPACK_IMPORTED_MODULE_101__.Item, {\n      children: item.slug\n    }, item.slug)\n  });\n}\n\nfunction relationship({\n  label,\n  collection,\n  validation,\n  description\n}) {\n  return (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aw)({\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(RelationshipInput, {\n        label: label,\n        collection: collection,\n        description: description,\n        validation: validation,\n        ...props\n      });\n    },\n    defaultValue() {\n      return null;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax('Must be a string');\n      }\n      return value;\n    },\n    validate(value) {\n      (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ay)(value, validation, label);\n      return value;\n    },\n    serialize(value) {\n      return {\n        value: value === null ? undefined : value\n      };\n    }\n  });\n}\n\nfunction SelectFieldInput(props) {\n  let fieldContext = (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aL)();\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_picker__WEBPACK_IMPORTED_MODULE_14__.Picker, {\n    label: props.label,\n    description: props.description,\n    items: props.options,\n    selectedKey: props.value,\n    onSelectionChange: key => {\n      props.onChange(key);\n    },\n    autoFocus: props.autoFocus,\n    width: {\n      mobile: 'auto',\n      tablet: fieldContext.span === 12 ? 'alias.singleLineWidth' : 'auto'\n    },\n    children: item => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_picker__WEBPACK_IMPORTED_MODULE_14__.Item, {\n      children: item.label\n    }, item.value)\n  });\n}\n\nfunction select({\n  label,\n  options,\n  defaultValue,\n  description\n}) {\n  const optionValuesSet = new Set(options.map(x => x.value));\n  if (!optionValuesSet.has(defaultValue)) {\n    throw new Error(`A defaultValue of ${defaultValue} was provided to a select field but it does not match the value of one of the options provided`);\n  }\n  const field = (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aw)({\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(SelectFieldInput, {\n        label: label,\n        options: options,\n        description: description,\n        ...props\n      });\n    },\n    defaultValue() {\n      return defaultValue;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return defaultValue;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax('Must be a string');\n      }\n      if (!optionValuesSet.has(value)) {\n        throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax('Must be a valid option');\n      }\n      return value;\n    },\n    validate(value) {\n      return value;\n    },\n    serialize(value) {\n      return {\n        value\n      };\n    }\n  });\n  return {\n    ...field,\n    options\n  };\n}\n\nconst emptySet = new Set();\nfunction SlugFieldInput(props) {\n  var _props$args$slug$vali, _props$args$slug, _props$args$slug$vali2, _props$args$slug2, _props$args$slug$labe, _props$args$slug3, _props$args$name$vali, _props$args$name$vali2, _props$args$name$vali3, _props$args$name$vali4, _props$args$name$vali5, _props$args$slug$labe2, _props$args$slug4, _props$args$slug5;\n  const slugContext = (0,react__WEBPACK_IMPORTED_MODULE_7__.useContext)(_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aM);\n  const path = (0,react__WEBPACK_IMPORTED_MODULE_7__.useContext)(_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aN);\n  const slugInfo = path.length === 1 && path[0] === (slugContext === null || slugContext === void 0 ? void 0 : slugContext.field) ? slugContext : {\n    slugs: emptySet,\n    glob: '*'\n  };\n  const [blurredName, setBlurredName] = (0,react__WEBPACK_IMPORTED_MODULE_7__.useState)(false);\n  const [blurredSlug, setBlurredSlug] = (0,react__WEBPACK_IMPORTED_MODULE_7__.useState)(false);\n  const [shouldGenerateSlug, setShouldGenerateSlug] = (0,react__WEBPACK_IMPORTED_MODULE_7__.useState)(props.value === props.defaultValue);\n  const generateSlug = name => {\n    const generated = props.naiveGenerateSlug(name);\n    if (slugInfo.slugs.has(generated)) {\n      let i = 1;\n      while (slugInfo.slugs.has(`${generated}-${i}`)) {\n        i++;\n      }\n      return `${generated}-${i}`;\n    }\n    return generated;\n  };\n  const slugErrorMessage = props.forceValidation || blurredSlug ? (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aO)(props.value.slug, (_props$args$slug$vali = (_props$args$slug = props.args.slug) === null || _props$args$slug === void 0 || (_props$args$slug = _props$args$slug.validation) === null || _props$args$slug === void 0 || (_props$args$slug = _props$args$slug.length) === null || _props$args$slug === void 0 ? void 0 : _props$args$slug.min) !== null && _props$args$slug$vali !== void 0 ? _props$args$slug$vali : 1, (_props$args$slug$vali2 = (_props$args$slug2 = props.args.slug) === null || _props$args$slug2 === void 0 || (_props$args$slug2 = _props$args$slug2.validation) === null || _props$args$slug2 === void 0 || (_props$args$slug2 = _props$args$slug2.length) === null || _props$args$slug2 === void 0 ? void 0 : _props$args$slug2.max) !== null && _props$args$slug$vali2 !== void 0 ? _props$args$slug$vali2 : Infinity, (_props$args$slug$labe = (_props$args$slug3 = props.args.slug) === null || _props$args$slug3 === void 0 ? void 0 : _props$args$slug3.label) !== null && _props$args$slug$labe !== void 0 ? _props$args$slug$labe : 'Slug', slugInfo) : undefined;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_10__.Flex, {\n    gap: \"xlarge\",\n    direction: \"column\",\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_text_field__WEBPACK_IMPORTED_MODULE_6__.TextField, {\n      label: props.args.name.label,\n      description: props.args.name.description,\n      autoFocus: props.autoFocus,\n      value: props.value.name,\n      isRequired: !!((_props$args$name$vali = props.args.name.validation) !== null && _props$args$name$vali !== void 0 && (_props$args$name$vali = _props$args$name$vali.length) !== null && _props$args$name$vali !== void 0 && _props$args$name$vali.min),\n      onChange: name => {\n        props.onChange({\n          name,\n          slug: shouldGenerateSlug ? generateSlug(name) : props.value.slug\n        });\n      },\n      onBlur: () => setBlurredName(true),\n      errorMessage: props.forceValidation || blurredName ? (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aO)(props.value.name, (_props$args$name$vali2 = (_props$args$name$vali3 = props.args.name.validation) === null || _props$args$name$vali3 === void 0 || (_props$args$name$vali3 = _props$args$name$vali3.length) === null || _props$args$name$vali3 === void 0 ? void 0 : _props$args$name$vali3.min) !== null && _props$args$name$vali2 !== void 0 ? _props$args$name$vali2 : 0, (_props$args$name$vali4 = (_props$args$name$vali5 = props.args.name.validation) === null || _props$args$name$vali5 === void 0 || (_props$args$name$vali5 = _props$args$name$vali5.length) === null || _props$args$name$vali5 === void 0 ? void 0 : _props$args$name$vali5.max) !== null && _props$args$name$vali4 !== void 0 ? _props$args$name$vali4 : Infinity, props.args.name.label, undefined) : undefined\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_10__.Flex, {\n      gap: \"regular\",\n      alignItems: \"end\",\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_text_field__WEBPACK_IMPORTED_MODULE_6__.TextField, {\n        flex: 1,\n        label: (_props$args$slug$labe2 = (_props$args$slug4 = props.args.slug) === null || _props$args$slug4 === void 0 ? void 0 : _props$args$slug4.label) !== null && _props$args$slug$labe2 !== void 0 ? _props$args$slug$labe2 : 'Slug',\n        description: (_props$args$slug5 = props.args.slug) === null || _props$args$slug5 === void 0 ? void 0 : _props$args$slug5.description,\n        value: props.value.slug,\n        onChange: slug => {\n          setShouldGenerateSlug(false);\n          props.onChange({\n            name: props.value.name,\n            slug\n          });\n        },\n        onBlur: () => setBlurredSlug(true),\n        errorMessage: slugErrorMessage,\n        isRequired: true\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_10__.Flex, {\n        gap: \"regular\",\n        direction: \"column\",\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_8__.ActionButton, {\n          onPress: () => {\n            props.onChange({\n              name: props.value.name,\n              slug: generateSlug(props.value.name)\n            });\n          },\n          children: \"Regenerate\"\n        }), slugErrorMessage !== undefined && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_10__.Box, {\n          height: \"element.xsmall\"\n        })]\n      })]\n    })]\n  });\n}\n\nfunction parseSlugFieldAsNormalField(value) {\n  if (value === undefined) {\n    return {\n      name: '',\n      slug: ''\n    };\n  }\n  if (typeof value !== 'object') {\n    throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax('Must be an object');\n  }\n  if (Object.keys(value).length !== 2) {\n    throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax('Unexpected keys');\n  }\n  if (!('name' in value) || !('slug' in value)) {\n    throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax('Missing name or slug');\n  }\n  if (typeof value.name !== 'string') {\n    throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax('name must be a string');\n  }\n  if (typeof value.slug !== 'string') {\n    throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax('slug must be a string');\n  }\n  return {\n    name: value.name,\n    slug: value.slug\n  };\n}\nfunction parseAsSlugField(value, slug) {\n  if (value === undefined) {\n    return {\n      name: '',\n      slug\n    };\n  }\n  if (typeof value !== 'string') {\n    throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax('Must be a string');\n  }\n  return {\n    name: value,\n    slug\n  };\n}\nfunction slug(args) {\n  var _args$slug, _args$name$defaultVal, _args$name$defaultVal2;\n  const naiveGenerateSlug = ((_args$slug = args.slug) === null || _args$slug === void 0 ? void 0 : _args$slug.generate) || (_sindresorhus_slugify__WEBPACK_IMPORTED_MODULE_15___default());\n  const defaultValue = {\n    name: (_args$name$defaultVal = args.name.defaultValue) !== null && _args$name$defaultVal !== void 0 ? _args$name$defaultVal : '',\n    slug: naiveGenerateSlug((_args$name$defaultVal2 = args.name.defaultValue) !== null && _args$name$defaultVal2 !== void 0 ? _args$name$defaultVal2 : '')\n  };\n  function validate(value, {\n    slugField\n  } = {\n    slugField: undefined\n  }) {\n    var _args$name$validation, _args$name$validation2, _args$name$validation3, _args$name$validation4, _args$slug$validation, _args$slug2, _args$slug$validation2, _args$slug3, _args$slug$label, _args$slug4;\n    const nameMessage = (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aO)(value.name, (_args$name$validation = (_args$name$validation2 = args.name.validation) === null || _args$name$validation2 === void 0 || (_args$name$validation2 = _args$name$validation2.length) === null || _args$name$validation2 === void 0 ? void 0 : _args$name$validation2.min) !== null && _args$name$validation !== void 0 ? _args$name$validation : 0, (_args$name$validation3 = (_args$name$validation4 = args.name.validation) === null || _args$name$validation4 === void 0 || (_args$name$validation4 = _args$name$validation4.length) === null || _args$name$validation4 === void 0 ? void 0 : _args$name$validation4.max) !== null && _args$name$validation3 !== void 0 ? _args$name$validation3 : Infinity, args.name.label, undefined);\n    if (nameMessage !== undefined) {\n      throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax(nameMessage);\n    }\n    const slugMessage = (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aO)(value.slug, (_args$slug$validation = (_args$slug2 = args.slug) === null || _args$slug2 === void 0 || (_args$slug2 = _args$slug2.validation) === null || _args$slug2 === void 0 || (_args$slug2 = _args$slug2.length) === null || _args$slug2 === void 0 ? void 0 : _args$slug2.min) !== null && _args$slug$validation !== void 0 ? _args$slug$validation : 1, (_args$slug$validation2 = (_args$slug3 = args.slug) === null || _args$slug3 === void 0 || (_args$slug3 = _args$slug3.validation) === null || _args$slug3 === void 0 || (_args$slug3 = _args$slug3.length) === null || _args$slug3 === void 0 ? void 0 : _args$slug3.max) !== null && _args$slug$validation2 !== void 0 ? _args$slug$validation2 : Infinity, (_args$slug$label = (_args$slug4 = args.slug) === null || _args$slug4 === void 0 ? void 0 : _args$slug4.label) !== null && _args$slug$label !== void 0 ? _args$slug$label : 'Slug', slugField ? slugField : {\n      slugs: emptySet,\n      glob: '*'\n    });\n    if (slugMessage !== undefined) {\n      throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax(slugMessage);\n    }\n    return value;\n  }\n  const emptySet = new Set();\n  return {\n    kind: 'form',\n    formKind: 'slug',\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(SlugFieldInput, {\n        args: args,\n        naiveGenerateSlug: naiveGenerateSlug,\n        defaultValue: defaultValue,\n        ...props\n      });\n    },\n    defaultValue() {\n      return defaultValue;\n    },\n    parse(value, args) {\n      if ((args === null || args === void 0 ? void 0 : args.slug) !== undefined) {\n        return parseAsSlugField(value, args.slug);\n      }\n      return parseSlugFieldAsNormalField(value);\n    },\n    validate,\n    serialize(value) {\n      return {\n        value\n      };\n    },\n    serializeWithSlug(value) {\n      return {\n        value: value.name,\n        slug: value.slug\n      };\n    },\n    reader: {\n      parse(value) {\n        const parsed = parseSlugFieldAsNormalField(value);\n        return validate(parsed);\n      },\n      parseWithSlug(value, args) {\n        return validate(parseAsSlugField(value, args.slug), {\n          slugField: {\n            glob: args.glob,\n            slugs: emptySet\n          }\n        }).name;\n      }\n    }\n  };\n}\n\nfunction validateUrl(validation, value, label) {\n  if (value !== null && (typeof value !== 'string' || !(0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aP)(value))) {\n    return `${label} is not a valid URL`;\n  }\n  if (validation !== null && validation !== void 0 && validation.isRequired && value === null) {\n    return `${label} is required`;\n  }\n}\n\nfunction UrlFieldInput(props) {\n  var _props$validation;\n  const [blurred, onBlur] = (0,react__WEBPACK_IMPORTED_MODULE_7__.useReducer)(() => true, false);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_text_field__WEBPACK_IMPORTED_MODULE_6__.TextField, {\n    width: \"auto\",\n    maxWidth: \"scale.6000\",\n    label: props.label,\n    description: props.description,\n    autoFocus: props.autoFocus,\n    value: props.value === null ? '' : props.value,\n    onChange: val => {\n      props.onChange(val === '' ? null : val);\n    },\n    onBlur: onBlur,\n    isRequired: (_props$validation = props.validation) === null || _props$validation === void 0 ? void 0 : _props$validation.isRequired,\n    errorMessage: props.forceValidation || blurred ? validateUrl(props.validation, props.value, props.label) : undefined\n  });\n}\n\nfunction url({\n  label,\n  defaultValue,\n  validation,\n  description\n}) {\n  return (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aw)({\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(UrlFieldInput, {\n        label: label,\n        description: description,\n        validation: validation,\n        ...props\n      });\n    },\n    defaultValue() {\n      return defaultValue || null;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax('Must be a string');\n      }\n      return value === '' ? null : value;\n    },\n    validate(value) {\n      const message = validateUrl(validation, value, label);\n      if (message !== undefined) {\n        throw new _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax(message);\n      }\n      (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.ay)(value, validation, label);\n      return value;\n    },\n    serialize(value) {\n      return {\n        value: value === null ? undefined : value\n      };\n    }\n  });\n}\n\nfunction BlocksFieldInput(props) {\n  const labelId = (0,react__WEBPACK_IMPORTED_MODULE_7__.useId)();\n  const descriptionId = (0,react__WEBPACK_IMPORTED_MODULE_7__.useId)();\n  const stringFormatter = (0,_react_aria_i18n__WEBPACK_IMPORTED_MODULE_102__.useLocalizedStringFormatter)(_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.l);\n  const [modalState, setModalState] = (0,react__WEBPACK_IMPORTED_MODULE_7__.useState)({\n    kind: 'closed'\n  });\n  const dismiss = () => {\n    setModalState({\n      kind: 'closed'\n    });\n  };\n  const formId = (0,react__WEBPACK_IMPORTED_MODULE_7__.useId)();\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_10__.Flex, {\n    elementType: \"section\",\n    gap: \"medium\",\n    role: \"group\",\n    \"aria-labelledby\": labelId,\n    \"aria-describedby\": props.schema.description ? descriptionId : undefined,\n    direction: \"column\",\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_field__WEBPACK_IMPORTED_MODULE_9__.FieldLabel, {\n      elementType: \"h3\",\n      id: labelId,\n      children: props.schema.label\n    }), props.schema.description && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_4__.Text, {\n      id: descriptionId,\n      size: \"small\",\n      color: \"neutralSecondary\",\n      children: props.schema.description\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_menu__WEBPACK_IMPORTED_MODULE_22__.MenuTrigger, {\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_8__.ActionButton, {\n        alignSelf: \"start\",\n        children: \"Add\"\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_menu__WEBPACK_IMPORTED_MODULE_22__.Menu, {\n        items: props.schema.element.discriminant.options,\n        onAction: key => {\n          if (typeof key !== 'string') return;\n          const discriminant = key;\n          setModalState({\n            kind: 'new',\n            initial: {\n              discriminant,\n              value: (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.a7)(props.schema.element.values[`${discriminant}`])\n            }\n          });\n        },\n        children: item => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_react_stately_collections__WEBPACK_IMPORTED_MODULE_101__.Item, {\n          children: item.label\n        }, item.value)\n      })]\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aQ, {\n      ...props,\n      labelId: labelId,\n      onOpenItem: idx => {\n        setModalState({\n          kind: 'edit',\n          idx,\n          initial: (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aR)(props.elements[idx])\n        });\n      }\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aS, {\n      ...props\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_20__.DialogContainer, {\n      onDismiss: dismiss,\n      children: (_props$schema$element => {\n        if (modalState.kind === 'closed') {\n          return null;\n        }\n        const discriminant = modalState.initial.discriminant;\n        return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_20__.Dialog, {\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_4__.Heading, {\n            children: [modalState.kind === 'edit' ? 'Edit' : 'Add', ' ', (_props$schema$element = props.schema.element.discriminant.options.find(x => x.value === discriminant)) === null || _props$schema$element === void 0 ? void 0 : _props$schema$element.label]\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_slots__WEBPACK_IMPORTED_MODULE_21__.Content, {\n            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ItemForm, {\n              id: formId,\n              schema: props.schema.element.values[discriminant],\n              initialValue: modalState.initial.value,\n              onSubmit: val => {\n                dismiss();\n                if (modalState.kind === 'new') {\n                  props.onChange([...props.elements.map(x => ({\n                    key: x.key\n                  })), {\n                    key: undefined,\n                    value: (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aT)({\n                      value: val,\n                      discriminant\n                    }, props.schema.element)\n                  }]);\n                  return;\n                }\n                (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aU)(val, props.elements[modalState.idx].value);\n              }\n            })\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_8__.ButtonGroup, {\n            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_8__.Button, {\n              onPress: dismiss,\n              children: stringFormatter.format('cancel')\n            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_8__.Button, {\n              form: formId,\n              prominence: \"high\",\n              type: \"submit\",\n              children: \"Done\"\n            })]\n          })]\n        });\n      })()\n    })]\n  });\n}\nfunction ItemForm(props) {\n  const [value, setValue] = (0,react__WEBPACK_IMPORTED_MODULE_7__.useState)(props.initialValue);\n  const [forceValidation, setForceValidation] = (0,react__WEBPACK_IMPORTED_MODULE_7__.useState)(false);\n  const previewProps = (0,react__WEBPACK_IMPORTED_MODULE_7__.useMemo)(() => (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.Z)(props.schema, setValue, () => undefined), [props.schema, setValue])(value);\n  const {\n    dismiss\n  } = (0,_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_20__.useDialogContainer)();\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_10__.Flex, {\n    id: props.id,\n    elementType: \"form\",\n    onSubmit: event => {\n      if (event.target !== event.currentTarget) return;\n      event.preventDefault();\n      if (!(0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.a1)(props.schema, value, undefined)) {\n        setForceValidation(true);\n        return;\n      }\n      props.onSubmit(value);\n      dismiss();\n    },\n    direction: \"column\",\n    gap: \"xxlarge\",\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aV, {\n      forceValidation: forceValidation,\n      autoFocus: true,\n      ...previewProps\n    })\n  });\n}\n\nfunction blocks(blocks, opts) {\n  const entries = Object.entries(blocks);\n  if (!entries.length) {\n    throw new Error('fields.blocks must have at least one entry');\n  }\n  const select$1 = select({\n    label: 'Kind',\n    defaultValue: entries[0][0],\n    options: Object.entries(blocks).map(([key, {\n      label\n    }]) => ({\n      label,\n      value: key\n    }))\n  });\n  const element = conditional(select$1, Object.fromEntries(entries.map(([key, {\n    schema\n  }]) => [key, schema])));\n  return {\n    ...array(element, {\n      label: opts.label,\n      description: opts.description,\n      validation: opts.validation,\n      itemLabel(props) {\n        const kind = props.discriminant;\n        const block = blocks[kind];\n        if (!block.itemLabel) return block.label;\n        return block.itemLabel(props.value);\n      }\n    }),\n    Input: BlocksFieldInput\n  };\n}\n\nfunction ImageField(props) {\n  const {\n    image,\n    onChange\n  } = props;\n  const [status, setStatus] = (0,react__WEBPACK_IMPORTED_MODULE_7__.useState)(image.src ? 'good' : '');\n  const imageLibraryURL = (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aW)();\n  const onPaste = event => {\n    event.preventDefault();\n    const text = event.clipboardData.getData('text/plain');\n    const parsed = (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.a_)(text);\n    props.onChange(parsed);\n  };\n  const onLoad = (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__._)(data => {\n    onChange(data);\n    setStatus('good');\n  });\n  const config = (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.S)();\n  const hasSetFields = !!(props.image.alt || props.image.width || props.image.height);\n  (0,react__WEBPACK_IMPORTED_MODULE_7__.useEffect)(() => {\n    if (!props.image.src) {\n      setStatus('');\n      return;\n    }\n    if (!(0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aP)(props.image.src)) {\n      return;\n    }\n    if (hasSetFields) {\n      setStatus('good');\n      return;\n    }\n    setStatus('loading');\n    (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aX)(props.image.src, config).then(newData => {\n      onLoad(newData);\n    }).catch(() => {\n      setStatus('error');\n    });\n  }, [config, hasSetFields, onLoad, props.image.src]);\n  const [blurred, setBlurred] = (0,react__WEBPACK_IMPORTED_MODULE_7__.useState)(false);\n  const errorMessage = (blurred || props.forceValidation) && props.isRequired && !image.src ? 'Image URL is required' : undefined;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_10__.VStack, {\n    gap: \"xlarge\",\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_text_field__WEBPACK_IMPORTED_MODULE_6__.TextField, {\n      label: \"Image URL\",\n      errorMessage: errorMessage,\n      autoFocus: props.autoFocus,\n      onPaste: onPaste,\n      onKeyDown: e => {\n        if (e.code === 'Backspace' || e.code === 'Delete') {\n          props.onChange(_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aY);\n        }\n      },\n      onBlur: () => setBlurred(true),\n      value: image.src,\n      description: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_4__.Text, {\n        children: [\"Copy an image URL from the\", ' ', /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_link__WEBPACK_IMPORTED_MODULE_23__.TextLink, {\n          prominence: \"high\",\n          href: imageLibraryURL,\n          target: \"_blank\",\n          rel: \"noreferrer\",\n          children: \"Image Library\"\n        }), ' ', \"and paste it into this field.\"]\n      }),\n      endElement: status === 'loading' ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_10__.Flex, {\n        height: \"element.regular\",\n        width: \"element.regular\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_progress__WEBPACK_IMPORTED_MODULE_24__.ProgressCircle, {\n          size: \"small\",\n          \"aria-label\": \"Checking\\u2026\",\n          isIndeterminate: true\n        })\n      }) : image.src ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_8__.ClearButton, {\n        onPress: () => {\n          props.onChange(_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aY);\n          setStatus('');\n        },\n        preventFocus: true\n      }) : null\n    }), status === 'good' ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.Fragment, {\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_10__.Box, {\n        width: \"scale.1600\",\n        height: \"scale.1600\",\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(\"img\", {\n          alt: image.alt,\n          src: image.src,\n          style: {\n            objectFit: 'contain',\n            height: '100%',\n            width: '100%'\n          }\n        })\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_text_field__WEBPACK_IMPORTED_MODULE_6__.TextArea, {\n        label: \"Alt text\",\n        value: image.alt,\n        onChange: alt => props.onChange({\n          ...image,\n          alt\n        })\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.aZ, {\n        src: image.src,\n        image: image,\n        onChange: dimensions => {\n          onChange({\n            ...props.image,\n            ...dimensions\n          });\n        }\n      })]\n    }) : null]\n  });\n}\nfunction CloudImageFieldInput(props) {\n  var _props$fields$width$v, _props$fields$height$;\n  const labelId = (0,react__WEBPACK_IMPORTED_MODULE_7__.useId)();\n  const descriptionId = (0,react__WEBPACK_IMPORTED_MODULE_7__.useId)();\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_10__.Flex, {\n    role: \"group\",\n    gap: \"medium\",\n    marginY: \"large\",\n    \"aria-labelledby\": labelId,\n    \"aria-describedby\": props.schema.description ? descriptionId : undefined,\n    direction: \"column\",\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_4__.Text, {\n      color: \"neutral\",\n      size: \"medium\",\n      weight: \"medium\",\n      id: labelId,\n      children: props.schema.label\n    }), !!props.schema.description && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_4__.Text, {\n      id: descriptionId,\n      size: \"regular\",\n      color: \"neutralSecondary\",\n      children: props.schema.description\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ImageField, {\n      image: {\n        src: props.fields.src.value,\n        alt: props.fields.alt.value,\n        width: (_props$fields$width$v = props.fields.width.value) !== null && _props$fields$width$v !== void 0 ? _props$fields$width$v : undefined,\n        height: (_props$fields$height$ = props.fields.height.value) !== null && _props$fields$height$ !== void 0 ? _props$fields$height$ : undefined\n      },\n      onChange: data => {\n        var _data$width, _data$height;\n        props.onChange({\n          src: data.src,\n          alt: data.alt,\n          width: (_data$width = data.width) !== null && _data$width !== void 0 ? _data$width : null,\n          height: (_data$height = data.height) !== null && _data$height !== void 0 ? _data$height : null\n        });\n      },\n      autoFocus: props.autoFocus,\n      isRequired: props.isRequired,\n      forceValidation: props.forceValidation\n    })]\n  });\n}\n\nfunction cloudImage({\n  label,\n  description,\n  validation\n}) {\n  return {\n    ...(0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.o)({\n      src: (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.a$)({\n        label: 'URL',\n        validation: {\n          length: {\n            min: validation !== null && validation !== void 0 && validation.isRequired ? 1 : 0\n          }\n        }\n      }),\n      alt: (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.a$)({\n        label: 'Alt text'\n      }),\n      height: (0,_index_20a81495_node_esm_js__WEBPACK_IMPORTED_MODULE_2__.i)({\n        label: 'Height'\n      }),\n      width: (0,_index_20a81495_node_esm_js__WEBPACK_IMPORTED_MODULE_2__.i)({\n        label: 'Width'\n      })\n    }, {\n      label,\n      description\n    }),\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(CloudImageFieldInput, {\n        ...props,\n        isRequired: validation === null || validation === void 0 ? void 0 : validation.isRequired\n      });\n    }\n  };\n}\n\nvar index = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  array: array,\n  checkbox: checkbox,\n  child: child,\n  conditional: conditional,\n  date: date,\n  datetime: datetime,\n  document: _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.b0,\n  emptyDocument: emptyDocument,\n  empty: empty,\n  image: image,\n  file: file,\n  integer: _index_20a81495_node_esm_js__WEBPACK_IMPORTED_MODULE_2__.i,\n  multiselect: multiselect,\n  object: _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.o,\n  pathReference: pathReference,\n  relationship: relationship,\n  select: select,\n  slug: slug,\n  text: _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_0__.a$,\n  url: url,\n  blocks: blocks,\n  cloudImage: cloudImage\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGtleXN0YXRpYytjb3JlQDAuMi4xMl9uZXh0QDE0LjIuMl9yZWFjdC1kb21AMTguMi4wX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3Qva2V5c3RhdGljLWNvcmUubm9kZS5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWsyQjtBQUNwc0I7QUFDbEc7QUFDQTtBQUNaO0FBQ087QUFDQztBQUNLO0FBQ3VCO0FBQ0E7QUFDdkI7QUFDTjtBQUNEO0FBQ25CO0FBQ3lCO0FBQzRCO0FBQzVCO0FBQ2hCO0FBQzdCO0FBQ1k7QUFDTztBQUNEO0FBQzhCO0FBQ2tCO0FBQ3JDO0FBQ1M7QUFDVDtBQUNVO0FBQzVCO0FBQ1g7QUFDVztBQUNQO0FBQ0g7QUFDZ0I7QUFDRztBQUNUO0FBQ2lCO0FBQ1o7QUFDRjtBQUNSO0FBQ0Y7QUFDUTtBQUNjO0FBQ1E7QUFDUjtBQUNFO0FBQ2I7QUFDRztBQUNIO0FBQ0k7QUFDTztBQUNPO0FBQ1A7QUFDRTtBQUNFO0FBQ0E7QUFDSjtBQUNZO0FBQ0g7QUFDSjtBQUNFO0FBQ1A7QUFDSztBQUNBO0FBQ0M7QUFDQztBQUNOO0FBQ3BCO0FBQ29CO0FBQ1g7QUFDVztBQUNFO0FBQ0g7QUFDTztBQUNMO0FBQ0Q7QUFDUjtBQUNwQjtBQUNLO0FBQ0g7QUFDSDtBQUM2QjtBQUNHO0FBQ0Y7QUFDRDtBQUNmO0FBQ2U7QUFDQTtBQUNOO0FBQ1A7QUFDQTtBQUNOO0FBQ1c7QUFDcUI7QUFDTDtBQUNFO0FBQ0w7QUFDRztBQUNDO0FBQ0E7QUFDQztBQUN6QjtBQUNHO0FBQ0k7QUFDUjtBQUNFO0FBQ2U7QUFDUTtBQUNEO0FBQ1A7QUFDQztBQUNBO0FBQ0g7QUFDRDtBQUNDO0FBQ0s7QUFDbkI7O0FBRTNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0JBQXNCLHVEQUFJLENBQUMsMERBQVE7QUFDbkM7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHNEQUFHLENBQUMsd0RBQUk7QUFDcEM7QUFDQSxLQUFLLHFDQUFxQyxzREFBRyxDQUFDLHdEQUFJO0FBQ2xEO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELFNBQVMsK0RBQW1DO0FBQzVDO0FBQ0EsMEJBQTBCLHNEQUFHO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMkRBQWM7QUFDaEM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhCQUE4QixFQUFFLElBQUksRUFBRSxJQUFJLEVBQUU7QUFDNUMsY0FBYyxPQUFPO0FBQ3JCO0FBQ0E7QUFDQSxjQUFjLE9BQU87QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLE9BQU8sZ0JBQWdCLHlCQUF5QjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLE9BQU8sd0JBQXdCLHlCQUF5QjtBQUMxRTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsNEJBQTRCLGlEQUFVO0FBQ3RDLHNCQUFzQixzREFBRyxDQUFDLDZEQUFTO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELFNBQVMsK0RBQW1DO0FBQzVDO0FBQ0EsMEJBQTBCLHNEQUFHO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLEtBQUssR0FBRyxNQUFNLEdBQUcsSUFBSTtBQUNyQyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwyREFBYztBQUNoQztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwyREFBYztBQUNoQztBQUNBLE1BQU0sK0RBQWM7QUFDcEI7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBLDhCQUE4QixFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRTtBQUN4RCxjQUFjLE9BQU87QUFDckI7QUFDQTtBQUNBLGNBQWMsT0FBTztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsT0FBTyxnQkFBZ0Isa0JBQWtCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsT0FBTyx3QkFBd0Isa0JBQWtCO0FBQ25FO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixpREFBVTtBQUN0QyxzQkFBc0Isc0RBQUcsQ0FBQyw2REFBUztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxTQUFTLCtEQUFtQztBQUM1QztBQUNBLDBCQUEwQixzREFBRztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMkRBQWM7QUFDaEM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMkRBQWM7QUFDaEM7QUFDQSxNQUFNLCtEQUFjO0FBQ3BCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTLCtEQUFtQztBQUM1QztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHNEQUFHLENBQUMsMkRBQWU7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDJCQUEyQiwrREFBWTtBQUN2QztB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QUFDQSxXQUFXLDBEQUFPO0FBQ2xCO0FBQ0EsVUFBVSwwREFBTTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMkRBQUk7QUFDWjtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUUwQiIsInNvdXJjZXMiOlsid2VicGFjazovL0BrZXlzdGF0aWMvdGVtcGxhdGVzLW5leHRqcy8uL25vZGVfbW9kdWxlcy8ucG5wbS9Aa2V5c3RhdGljK2NvcmVAMC4yLjEyX25leHRAMTQuMi4yX3JlYWN0LWRvbUAxOC4yLjBfcmVhY3RAMTguMi4wL25vZGVfbW9kdWxlcy9Aa2V5c3RhdGljL2NvcmUvZGlzdC9rZXlzdGF0aWMtY29yZS5ub2RlLmVzbS5qcz9mODc1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGF3IGFzIGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlLCBheCBhcyBGaWVsZERhdGFFcnJvciwgYXkgYXMgYXNzZXJ0UmVxdWlyZWQsIGFGIGFzIEltYWdlRmllbGRJbnB1dCwgYUcgYXMgZ2V0U3JjUHJlZml4LCBhSCBhcyBmaXhQYXRoLCBhSSBhcyB1c2VJc0luRG9jdW1lbnRFZGl0b3IsIGFKIGFzIHVzZU9iamVjdFVSTCwgYUsgYXMgZ2V0VXBsb2FkZWRGaWxlLCBiIGFzIHVzZVRyZWUsIGFMIGFzIHVzZUZpZWxkQ29udGV4dCwgYU0gYXMgU2x1Z0ZpZWxkQ29udGV4dCwgYU4gYXMgUGF0aENvbnRleHQsIGFPIGFzIHZhbGlkYXRlVGV4dCwgYVAgYXMgaXNWYWxpZFVSTCwgbCBhcyBsMTBuTWVzc2FnZXMsIGE3IGFzIGdldEluaXRpYWxQcm9wc1ZhbHVlLCBhUSBhcyBBcnJheUZpZWxkTGlzdFZpZXcsIGFSIGFzIHByZXZpZXdQcm9wc1RvVmFsdWUsIGFTIGFzIEFycmF5RmllbGRWYWxpZGF0aW9uTWVzc2FnZXMsIGFUIGFzIHZhbHVlVG9VcGRhdGVyLCBhVSBhcyBzZXRWYWx1ZVRvUHJldmlld1Byb3BzLCBaIGFzIGNyZWF0ZUdldFByZXZpZXdQcm9wcywgYTEgYXMgY2xpZW50U2lkZVZhbGlkYXRlUHJvcCwgYVYgYXMgRm9ybVZhbHVlQ29udGVudEZyb21QcmV2aWV3UHJvcHMsIGFXIGFzIHVzZUltYWdlTGlicmFyeVVSTCwgXyBhcyB1c2VFdmVudENhbGxiYWNrLCBTIGFzIHVzZUNvbmZpZywgYVggYXMgbG9hZEltYWdlRGF0YSwgYVkgYXMgZW1wdHlJbWFnZURhdGEsIGFaIGFzIEltYWdlRGltZW5zaW9uc0lucHV0LCBhXyBhcyBwYXJzZUltYWdlRGF0YSwgbyBhcyBvYmplY3QsIGEkIGFzIHRleHQsIGIwIGFzIGRvY3VtZW50IH0gZnJvbSAnLi9pbmRleC1mYmFiMzJmNy5ub2RlLmVzbS5qcyc7XG5leHBvcnQgeyBhQyBhcyBCbG9ja1dyYXBwZXIsIGFEIGFzIE5vdEVkaXRhYmxlLCBhRSBhcyBUb29sYmFyU2VwYXJhdG9yLCBhQSBhcyBjb2xsZWN0aW9uLCBheiBhcyBjb25maWcsIGFCIGFzIHNpbmdsZXRvbiB9IGZyb20gJy4vaW5kZXgtZmJhYjMyZjcubm9kZS5lc20uanMnO1xuZXhwb3J0IHsgYyBhcyBjb21wb25lbnQgfSBmcm9tICcuL2FwaS01Zjg5MTFiNS5ub2RlLmVzbS5qcyc7XG5pbXBvcnQgeyBpIGFzIGludGVnZXIgfSBmcm9tICcuL2luZGV4LTIwYTgxNDk1Lm5vZGUuZXNtLmpzJztcbmltcG9ydCB7IENoZWNrYm94IH0gZnJvbSAnQGtleXN0YXIvdWkvY2hlY2tib3gnO1xuaW1wb3J0IHsgVGV4dCwgSGVhZGluZyB9IGZyb20gJ0BrZXlzdGFyL3VpL3R5cG9ncmFwaHknO1xuaW1wb3J0IHsganN4cywganN4LCBGcmFnbWVudCB9IGZyb20gJ3JlYWN0L2pzeC1ydW50aW1lJztcbmltcG9ydCB7IFRleHRGaWVsZCwgVGV4dEFyZWEgfSBmcm9tICdAa2V5c3Rhci91aS90ZXh0LWZpZWxkJztcbmltcG9ydCB7IHVzZVJlZHVjZXIsIHVzZUlkLCB1c2VNZW1vLCB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDb250ZXh0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQnV0dG9uR3JvdXAsIEFjdGlvbkJ1dHRvbiwgQnV0dG9uLCBDbGVhckJ1dHRvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2J1dHRvbic7XG5pbXBvcnQgeyBGaWVsZExhYmVsLCBGaWVsZE1lc3NhZ2UgfSBmcm9tICdAa2V5c3Rhci91aS9maWVsZCc7XG5pbXBvcnQgeyBGbGV4LCBCb3gsIFZTdGFjayB9IGZyb20gJ0BrZXlzdGFyL3VpL2xheW91dCc7XG5pbXBvcnQgeyBDb21ib2JveCwgSXRlbSB9IGZyb20gJ0BrZXlzdGFyL3VpL2NvbWJvYm94JztcbmltcG9ydCB7IGZpbHRlciB9IGZyb20gJ21pbmltYXRjaCc7XG5pbXBvcnQgeyBJdGVtIGFzIEl0ZW0kMSB9IGZyb20gJ0ByZWFjdC1zdGF0ZWx5L2NvbGxlY3Rpb25zJztcbmltcG9ydCB7IHUgYXMgdXNlU2x1Z3NJbkNvbGxlY3Rpb24gfSBmcm9tICcuL3VzZVNsdWdzSW5Db2xsZWN0aW9uLWI5NjcxNjZkLm5vZGUuZXNtLmpzJztcbmltcG9ydCB7IFBpY2tlciwgSXRlbSBhcyBJdGVtJDIgfSBmcm9tICdAa2V5c3Rhci91aS9waWNrZXInO1xuaW1wb3J0IHNsdWdpZnkgZnJvbSAnQHNpbmRyZXNvcmh1cy9zbHVnaWZ5JztcbmltcG9ydCAnZW1lcnknO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9zdHlsZSc7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL251bWJlci1maWVsZCc7XG5pbXBvcnQgJ0BicmFpbnRyZWUvc2FuaXRpemUtdXJsJztcbmltcG9ydCB7IHVzZUxvY2FsaXplZFN0cmluZ0Zvcm1hdHRlciB9IGZyb20gJ0ByZWFjdC1hcmlhL2kxOG4nO1xuaW1wb3J0IHsgRGlhbG9nQ29udGFpbmVyLCBEaWFsb2csIHVzZURpYWxvZ0NvbnRhaW5lciB9IGZyb20gJ0BrZXlzdGFyL3VpL2RpYWxvZyc7XG5pbXBvcnQgeyBDb250ZW50IH0gZnJvbSAnQGtleXN0YXIvdWkvc2xvdHMnO1xuaW1wb3J0IHsgTWVudVRyaWdnZXIsIE1lbnUgfSBmcm9tICdAa2V5c3Rhci91aS9tZW51JztcbmltcG9ydCB7IFRleHRMaW5rIH0gZnJvbSAnQGtleXN0YXIvdWkvbGluayc7XG5pbXBvcnQgeyBQcm9ncmVzc0NpcmNsZSB9IGZyb20gJ0BrZXlzdGFyL3VpL3Byb2dyZXNzJztcbmltcG9ydCAnQG1hcmtkb2MvbWFya2RvYyc7XG5pbXBvcnQgJ3NsYXRlJztcbmltcG9ydCAnZW1lcnkvYXNzZXJ0aW9ucyc7XG5pbXBvcnQgJ2pzLWJhc2U2NCc7XG5pbXBvcnQgJ2NyeXB0byc7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL3NwbGl0LXZpZXcnO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9kcmFnLWFuZC1kcm9wJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvdHJhc2gySWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2xpc3Qtdmlldyc7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL3Rvb2x0aXAnO1xuaW1wb3J0ICdzbGF0ZS1yZWFjdCc7XG5pbXBvcnQgJ2lzLWhvdGtleSc7XG5pbXBvcnQgJ0ByZWFjdC1hcmlhL3V0aWxzJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9lZGl0SWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvZXh0ZXJuYWxMaW5rSWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvbGlua0ljb24nO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL3VubGlua0ljb24nO1xuaW1wb3J0ICdAcmVhY3QtYXJpYS9vdmVybGF5cyc7XG5pbXBvcnQgJ0ByZWFjdC1zdGF0ZWx5L292ZXJsYXlzJztcbmltcG9ydCAnQGtleXN0YXIvdWkvb3ZlcmxheXMnO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9hY3Rpb24tZ3JvdXAnO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL2JvbGRJY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9jaGV2cm9uRG93bkljb24nO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL2NvZGVJY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9pdGFsaWNJY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9tYXhpbWl6ZUljb24nO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL21pbmltaXplSWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvcGx1c0ljb24nO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL3JlbW92ZUZvcm1hdHRpbmdJY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9zdHJpa2V0aHJvdWdoSWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvc3Vic2NyaXB0SWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvc3VwZXJzY3JpcHRJY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy90eXBlSWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvdW5kZXJsaW5lSWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvYWxpZ25MZWZ0SWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvYWxpZ25SaWdodEljb24nO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL2FsaWduQ2VudGVySWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvcXVvdGVJY29uJztcbmltcG9ydCAnbWF0Y2gtc29ydGVyJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy90cmFzaEljb24nO1xuaW1wb3J0ICdAZW1vdGlvbi93ZWFrLW1lbW9pemUnO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL21pbnVzSWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvY29sdW1uc0ljb24nO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL2xpc3RJY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9saXN0T3JkZXJlZEljb24nO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL2ZpbGVVcEljb24nO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL2ltYWdlSWNvbic7XG5pbXBvcnQgJ0B0cy1ncWwvdGFnL25vLXRyYW5zZm9ybSc7XG5pbXBvcnQgJ3VycWwnO1xuaW1wb3J0ICdscnUtY2FjaGUnO1xuaW1wb3J0ICdjb29raWUnO1xuaW1wb3J0ICd6b2QnO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL2xpbmsySWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvbGluazJPZmZJY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9wZW5jaWxJY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy91bmRvMkljb24nO1xuaW1wb3J0ICdAa2V5c3Rhci91aS91dGlscyc7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvc2hlZXRJY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy90YWJsZUljb24nO1xuaW1wb3J0ICdzY3JvbGwtaW50by12aWV3LWlmLW5lZWRlZCc7XG5pbXBvcnQgJ0ByZWFjdC1zdGF0ZWx5L2xpc3QnO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9saXN0Ym94JztcbmltcG9ydCAnc2xhdGUtaGlzdG9yeSc7XG5pbXBvcnQgJ21kYXN0LXV0aWwtZnJvbS1tYXJrZG93bic7XG5pbXBvcnQgJ21kYXN0LXV0aWwtZ2ZtLWF1dG9saW5rLWxpdGVyYWwvZnJvbS1tYXJrZG93bic7XG5pbXBvcnQgJ21pY3JvbWFyay1leHRlbnNpb24tZ2ZtLWF1dG9saW5rLWxpdGVyYWwnO1xuaW1wb3J0ICdtZGFzdC11dGlsLWdmbS1zdHJpa2V0aHJvdWdoL2Zyb20tbWFya2Rvd24nO1xuaW1wb3J0ICdtaWNyb21hcmstZXh0ZW5zaW9uLWdmbS1zdHJpa2V0aHJvdWdoJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9wYW5lbExlZnRPcGVuSWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvcGFuZWxMZWZ0Q2xvc2VJY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9wYW5lbFJpZ2h0T3Blbkljb24nO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL3BhbmVsUmlnaHRDbG9zZUljb24nO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9iYWRnZSc7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL25hdi1saXN0JztcbmltcG9ydCAnQGtleXN0YXIvdWkvc3RhdHVzLWxpZ2h0JztcbmltcG9ydCAnQGtleXN0YXIvdWkvY29yZSc7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2F2YXRhcic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvbG9nT3V0SWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvZ2l0UHVsbFJlcXVlc3RJY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9naXRCcmFuY2hQbHVzSWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvZ2l0aHViSWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvZ2l0Rm9ya0ljb24nO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL21vbml0b3JJY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9tb29uSWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvc3VuSWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvdXNlckljb24nO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL2dpdEJyYW5jaEljb24nO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9yYWRpbyc7XG5cbmZ1bmN0aW9uIGFycmF5KGVsZW1lbnQsIG9wdHMpIHtcbiAgdmFyIF9vcHRzJGxhYmVsO1xuICByZXR1cm4ge1xuICAgIGtpbmQ6ICdhcnJheScsXG4gICAgZWxlbWVudCxcbiAgICBsYWJlbDogKF9vcHRzJGxhYmVsID0gb3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLmxhYmVsKSAhPT0gbnVsbCAmJiBfb3B0cyRsYWJlbCAhPT0gdm9pZCAwID8gX29wdHMkbGFiZWwgOiAnSXRlbXMnLFxuICAgIGRlc2NyaXB0aW9uOiBvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMuZGVzY3JpcHRpb24sXG4gICAgaXRlbUxhYmVsOiBvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMuaXRlbUxhYmVsLFxuICAgIGFzQ2hpbGRUYWc6IG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy5hc0NoaWxkVGFnLFxuICAgIHNsdWdGaWVsZDogb3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLnNsdWdGaWVsZCxcbiAgICB2YWxpZGF0aW9uOiBvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMudmFsaWRhdGlvblxuICB9O1xufVxuXG5mdW5jdGlvbiBDaGVja2JveEZpZWxkSW5wdXQocHJvcHMpIHtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3hzKENoZWNrYm94LCB7XG4gICAgaXNTZWxlY3RlZDogcHJvcHMudmFsdWUsXG4gICAgb25DaGFuZ2U6IHByb3BzLm9uQ2hhbmdlLFxuICAgIGF1dG9Gb2N1czogcHJvcHMuYXV0b0ZvY3VzLFxuICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChUZXh0LCB7XG4gICAgICBjaGlsZHJlbjogcHJvcHMubGFiZWxcbiAgICB9KSwgcHJvcHMuZGVzY3JpcHRpb24gJiYgLyojX19QVVJFX18qL2pzeChUZXh0LCB7XG4gICAgICBzbG90OiBcImRlc2NyaXB0aW9uXCIsXG4gICAgICBjaGlsZHJlbjogcHJvcHMuZGVzY3JpcHRpb25cbiAgICB9KV1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNoZWNrYm94KHtcbiAgbGFiZWwsXG4gIGRlZmF1bHRWYWx1ZSA9IGZhbHNlLFxuICBkZXNjcmlwdGlvblxufSkge1xuICByZXR1cm4gYmFzaWNGb3JtRmllbGRXaXRoU2ltcGxlUmVhZGVyUGFyc2Uoe1xuICAgIElucHV0KHByb3BzKSB7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChDaGVja2JveEZpZWxkSW5wdXQsIHtcbiAgICAgICAgLi4ucHJvcHMsXG4gICAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgfSxcbiAgICBwYXJzZSh2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGEgYm9vbGVhbicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWVcbiAgICAgIH07XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gY2hpbGQob3B0aW9ucykge1xuICByZXR1cm4ge1xuICAgIGtpbmQ6ICdjaGlsZCcsXG4gICAgb3B0aW9uczogb3B0aW9ucy5raW5kID09PSAnYmxvY2snID8ge1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIGRpdmlkZXJzOiBvcHRpb25zLmRpdmlkZXJzLFxuICAgICAgZm9ybWF0dGluZzogb3B0aW9ucy5mb3JtYXR0aW5nID09PSAnaW5oZXJpdCcgPyB7XG4gICAgICAgIGJsb2NrVHlwZXM6ICdpbmhlcml0JyxcbiAgICAgICAgaGVhZGluZ0xldmVsczogJ2luaGVyaXQnLFxuICAgICAgICBpbmxpbmVNYXJrczogJ2luaGVyaXQnLFxuICAgICAgICBsaXN0VHlwZXM6ICdpbmhlcml0JyxcbiAgICAgICAgYWxpZ25tZW50OiAnaW5oZXJpdCcsXG4gICAgICAgIHNvZnRCcmVha3M6ICdpbmhlcml0J1xuICAgICAgfSA6IG9wdGlvbnMuZm9ybWF0dGluZyxcbiAgICAgIGxpbmtzOiBvcHRpb25zLmxpbmtzLFxuICAgICAgaW1hZ2VzOiBvcHRpb25zLmltYWdlcyxcbiAgICAgIHRhYmxlczogb3B0aW9ucy50YWJsZXMsXG4gICAgICBjb21wb25lbnRCbG9ja3M6IG9wdGlvbnMuY29tcG9uZW50QmxvY2tzXG4gICAgfSA6IHtcbiAgICAgIGtpbmQ6ICdpbmxpbmUnLFxuICAgICAgcGxhY2Vob2xkZXI6IG9wdGlvbnMucGxhY2Vob2xkZXIsXG4gICAgICBmb3JtYXR0aW5nOiBvcHRpb25zLmZvcm1hdHRpbmcgPT09ICdpbmhlcml0JyA/IHtcbiAgICAgICAgaW5saW5lTWFya3M6ICdpbmhlcml0JyxcbiAgICAgICAgc29mdEJyZWFrczogJ2luaGVyaXQnXG4gICAgICB9IDogb3B0aW9ucy5mb3JtYXR0aW5nLFxuICAgICAgbGlua3M6IG9wdGlvbnMubGlua3NcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGNvbmRpdGlvbmFsKGRpc2NyaW1pbmFudCwgdmFsdWVzKSB7XG4gIHJldHVybiB7XG4gICAga2luZDogJ2NvbmRpdGlvbmFsJyxcbiAgICBkaXNjcmltaW5hbnQsXG4gICAgdmFsdWVzOiB2YWx1ZXNcbiAgfTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVEYXRlKHZhbGlkYXRpb24sIHZhbHVlLCBsYWJlbCkge1xuICBpZiAodmFsdWUgIT09IG51bGwgJiYgIS9eXFxkezR9LVxcZHsyfS1cXGR7Mn0kLy50ZXN0KHZhbHVlKSkge1xuICAgIHJldHVybiBgJHtsYWJlbH0gaXMgbm90IGEgdmFsaWQgZGF0ZWA7XG4gIH1cbiAgaWYgKHZhbGlkYXRpb24gIT09IG51bGwgJiYgdmFsaWRhdGlvbiAhPT0gdm9pZCAwICYmIHZhbGlkYXRpb24uaXNSZXF1aXJlZCAmJiB2YWx1ZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBgJHtsYWJlbH0gaXMgcmVxdWlyZWRgO1xuICB9XG4gIGlmICgodmFsaWRhdGlvbiAhPT0gbnVsbCAmJiB2YWxpZGF0aW9uICE9PSB2b2lkIDAgJiYgdmFsaWRhdGlvbi5taW4gfHwgdmFsaWRhdGlvbiAhPT0gbnVsbCAmJiB2YWxpZGF0aW9uICE9PSB2b2lkIDAgJiYgdmFsaWRhdGlvbi5tYXgpICYmIHZhbHVlICE9PSBudWxsKSB7XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHZhbHVlKTtcbiAgICBpZiAoKHZhbGlkYXRpb24gPT09IG51bGwgfHwgdmFsaWRhdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsaWRhdGlvbi5taW4pICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IG1pbiA9IG5ldyBEYXRlKHZhbGlkYXRpb24ubWluKTtcbiAgICAgIGlmIChkYXRlIDwgbWluKSB7XG4gICAgICAgIHJldHVybiBgJHtsYWJlbH0gbXVzdCBiZSBhZnRlciAke21pbi50b0xvY2FsZURhdGVTdHJpbmcoKX1gO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoKHZhbGlkYXRpb24gPT09IG51bGwgfHwgdmFsaWRhdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsaWRhdGlvbi5tYXgpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IG1heCA9IG5ldyBEYXRlKHZhbGlkYXRpb24ubWF4KTtcbiAgICAgIGlmIChkYXRlID4gbWF4KSB7XG4gICAgICAgIHJldHVybiBgJHtsYWJlbH0gbXVzdCBiZSBubyBsYXRlciB0aGFuICR7bWF4LnRvTG9jYWxlRGF0ZVN0cmluZygpfWA7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIERhdGVGaWVsZElucHV0KHByb3BzKSB7XG4gIHZhciBfcHJvcHMkdmFsaWRhdGlvbjtcbiAgY29uc3QgW2JsdXJyZWQsIG9uQmx1cl0gPSB1c2VSZWR1Y2VyKCgpID0+IHRydWUsIGZhbHNlKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goVGV4dEZpZWxkLCB7XG4gICAgbGFiZWw6IHByb3BzLmxhYmVsLFxuICAgIGRlc2NyaXB0aW9uOiBwcm9wcy5kZXNjcmlwdGlvbixcbiAgICB0eXBlOiBcImRhdGVcIixcbiAgICBvbkNoYW5nZTogdmFsID0+IHtcbiAgICAgIHByb3BzLm9uQ2hhbmdlKHZhbCA9PT0gJycgPyBudWxsIDogdmFsKTtcbiAgICB9LFxuICAgIGF1dG9Gb2N1czogcHJvcHMuYXV0b0ZvY3VzLFxuICAgIHZhbHVlOiBwcm9wcy52YWx1ZSA9PT0gbnVsbCA/ICcnIDogcHJvcHMudmFsdWUsXG4gICAgb25CbHVyOiBvbkJsdXIsXG4gICAgaXNSZXF1aXJlZDogKF9wcm9wcyR2YWxpZGF0aW9uID0gcHJvcHMudmFsaWRhdGlvbikgPT09IG51bGwgfHwgX3Byb3BzJHZhbGlkYXRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wcm9wcyR2YWxpZGF0aW9uLmlzUmVxdWlyZWQsXG4gICAgZXJyb3JNZXNzYWdlOiBibHVycmVkIHx8IHByb3BzLmZvcmNlVmFsaWRhdGlvbiA/IHZhbGlkYXRlRGF0ZShwcm9wcy52YWxpZGF0aW9uLCBwcm9wcy52YWx1ZSwgcHJvcHMubGFiZWwpIDogdW5kZWZpbmVkXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBkYXRlKHtcbiAgbGFiZWwsXG4gIGRlZmF1bHRWYWx1ZSxcbiAgdmFsaWRhdGlvbixcbiAgZGVzY3JpcHRpb25cbn0pIHtcbiAgcmV0dXJuIGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlKHtcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goRGF0ZUZpZWxkSW5wdXQsIHtcbiAgICAgICAgdmFsaWRhdGlvbjogdmFsaWRhdGlvbixcbiAgICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgICAgIC4uLnByb3BzXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgIGlmIChkZWZhdWx0VmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgZGVmYXVsdFZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgICAgfVxuICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgY29uc3QgeWVhciA9IHRvZGF5LmdldEZ1bGxZZWFyKCk7XG4gICAgICBjb25zdCBtb250aCA9IFN0cmluZyh0b2RheS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgIGNvbnN0IGRheSA9IFN0cmluZyh0b2RheS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YDtcbiAgICB9LFxuICAgIHBhcnNlKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIHN0cmluZycpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgc2VyaWFsaXplKHZhbHVlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdmFsdWUgPT09IG51bGwgPyB1bmRlZmluZWQgOiB2YWx1ZVxuICAgICAgfTtcbiAgICB9LFxuICAgIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gdmFsaWRhdGVEYXRlKHZhbGlkYXRpb24sIHZhbHVlLCBsYWJlbCk7XG4gICAgICBpZiAobWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcihtZXNzYWdlKTtcbiAgICAgIH1cbiAgICAgIGFzc2VydFJlcXVpcmVkKHZhbHVlLCB2YWxpZGF0aW9uLCBsYWJlbCk7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVEYXRldGltZSh2YWxpZGF0aW9uLCB2YWx1ZSwgbGFiZWwpIHtcbiAgaWYgKHZhbHVlICE9PSBudWxsICYmICEvXlxcZHs0fS1cXGR7Mn0tXFxkezJ9VFxcZHsyfTpcXGR7Mn0kLy50ZXN0KHZhbHVlKSkge1xuICAgIHJldHVybiBgJHtsYWJlbH0gaXMgbm90IGEgdmFsaWQgZGF0ZXRpbWVgO1xuICB9XG4gIGlmICh2YWxpZGF0aW9uICE9PSBudWxsICYmIHZhbGlkYXRpb24gIT09IHZvaWQgMCAmJiB2YWxpZGF0aW9uLmlzUmVxdWlyZWQgJiYgdmFsdWUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gYCR7bGFiZWx9IGlzIHJlcXVpcmVkYDtcbiAgfVxuICBpZiAoKHZhbGlkYXRpb24gIT09IG51bGwgJiYgdmFsaWRhdGlvbiAhPT0gdm9pZCAwICYmIHZhbGlkYXRpb24ubWluIHx8IHZhbGlkYXRpb24gIT09IG51bGwgJiYgdmFsaWRhdGlvbiAhPT0gdm9pZCAwICYmIHZhbGlkYXRpb24ubWF4KSAmJiB2YWx1ZSAhPT0gbnVsbCkge1xuICAgIGNvbnN0IGRhdGV0aW1lID0gbmV3IERhdGUodmFsdWUpO1xuICAgIGlmICgodmFsaWRhdGlvbiA9PT0gbnVsbCB8fCB2YWxpZGF0aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWxpZGF0aW9uLm1pbikgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgbWluID0gbmV3IERhdGUodmFsaWRhdGlvbi5taW4pO1xuICAgICAgaWYgKGRhdGV0aW1lIDwgbWluKSB7XG4gICAgICAgIHJldHVybiBgJHtsYWJlbH0gbXVzdCBiZSBhZnRlciAke21pbi50b0lTT1N0cmluZygpfWA7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICgodmFsaWRhdGlvbiA9PT0gbnVsbCB8fCB2YWxpZGF0aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWxpZGF0aW9uLm1heCkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgbWF4ID0gbmV3IERhdGUodmFsaWRhdGlvbi5tYXgpO1xuICAgICAgaWYgKGRhdGV0aW1lID4gbWF4KSB7XG4gICAgICAgIHJldHVybiBgJHtsYWJlbH0gbXVzdCBiZSBubyBsYXRlciB0aGFuICR7bWF4LnRvSVNPU3RyaW5nKCl9YDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLy91aS50c3hcbmZ1bmN0aW9uIERhdGV0aW1lRmllbGRJbnB1dChwcm9wcykge1xuICB2YXIgX3Byb3BzJHZhbGlkYXRpb247XG4gIGNvbnN0IFtibHVycmVkLCBvbkJsdXJdID0gdXNlUmVkdWNlcigoKSA9PiB0cnVlLCBmYWxzZSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFRleHRGaWVsZCwge1xuICAgIGxhYmVsOiBwcm9wcy5sYWJlbCxcbiAgICBkZXNjcmlwdGlvbjogcHJvcHMuZGVzY3JpcHRpb24sXG4gICAgdHlwZTogXCJkYXRldGltZS1sb2NhbFwiLFxuICAgIG9uQ2hhbmdlOiB2YWwgPT4ge1xuICAgICAgcHJvcHMub25DaGFuZ2UodmFsID09PSAnJyA/IG51bGwgOiB2YWwpO1xuICAgIH0sXG4gICAgYXV0b0ZvY3VzOiBwcm9wcy5hdXRvRm9jdXMsXG4gICAgdmFsdWU6IHByb3BzLnZhbHVlID09PSBudWxsID8gJycgOiBwcm9wcy52YWx1ZSxcbiAgICBvbkJsdXI6IG9uQmx1cixcbiAgICBpc1JlcXVpcmVkOiAoX3Byb3BzJHZhbGlkYXRpb24gPSBwcm9wcy52YWxpZGF0aW9uKSA9PT0gbnVsbCB8fCBfcHJvcHMkdmFsaWRhdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Byb3BzJHZhbGlkYXRpb24uaXNSZXF1aXJlZCxcbiAgICBlcnJvck1lc3NhZ2U6IGJsdXJyZWQgfHwgcHJvcHMuZm9yY2VWYWxpZGF0aW9uID8gdmFsaWRhdGVEYXRldGltZShwcm9wcy52YWxpZGF0aW9uLCBwcm9wcy52YWx1ZSwgcHJvcHMubGFiZWwpIDogdW5kZWZpbmVkXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBkYXRldGltZSh7XG4gIGxhYmVsLFxuICBkZWZhdWx0VmFsdWUsXG4gIHZhbGlkYXRpb24sXG4gIGRlc2NyaXB0aW9uXG59KSB7XG4gIHJldHVybiBiYXNpY0Zvcm1GaWVsZFdpdGhTaW1wbGVSZWFkZXJQYXJzZSh7XG4gICAgSW5wdXQocHJvcHMpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KERhdGV0aW1lRmllbGRJbnB1dCwge1xuICAgICAgICB2YWxpZGF0aW9uOiB2YWxpZGF0aW9uLFxuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgLi4ucHJvcHNcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgaWYgKGRlZmF1bHRWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBkZWZhdWx0VmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgICB9XG4gICAgICBpZiAoZGVmYXVsdFZhbHVlLmtpbmQgPT09ICdub3cnKSB7XG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHJldHVybiBub3cudG9JU09TdHJpbmcoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgcGFyc2UodmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBzZXJpYWxpemUodmFsdWUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IHZhbHVlXG4gICAgICB9O1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSB2YWxpZGF0ZURhdGV0aW1lKHZhbGlkYXRpb24sIHZhbHVlLCBsYWJlbCk7XG4gICAgICBpZiAobWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcihtZXNzYWdlKTtcbiAgICAgIH1cbiAgICAgIGFzc2VydFJlcXVpcmVkKHZhbHVlLCB2YWxpZGF0aW9uLCBsYWJlbCk7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gZW1wdHlEb2N1bWVudCgpIHtcbiAgcmV0dXJuIHtcbiAgICBraW5kOiAnZm9ybScsXG4gICAgZm9ybUtpbmQ6ICdjb250ZW50JyxcbiAgICBJbnB1dCgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBwYXJzZSgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgY29udGVudEV4dGVuc2lvbjogJy5tZG9jJyxcbiAgICBzZXJpYWxpemUoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICBjb250ZW50OiBuZXcgVWludDhBcnJheSgpLFxuICAgICAgICBleHRlcm5hbDogbmV3IE1hcCgpLFxuICAgICAgICBvdGhlcjogbmV3IE1hcCgpXG4gICAgICB9O1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHJlYWRlcjoge1xuICAgICAgcGFyc2UoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gZW1wdHkoKSB7XG4gIHJldHVybiBiYXNpY0Zvcm1GaWVsZFdpdGhTaW1wbGVSZWFkZXJQYXJzZSh7XG4gICAgSW5wdXQoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgcGFyc2UoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB1bmRlZmluZWRcbiAgICAgIH07XG4gICAgfSxcbiAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGltYWdlKHtcbiAgbGFiZWwsXG4gIGRpcmVjdG9yeSxcbiAgdmFsaWRhdGlvbixcbiAgZGVzY3JpcHRpb24sXG4gIHB1YmxpY1BhdGhcbn0pIHtcbiAgcmV0dXJuIHtcbiAgICBraW5kOiAnZm9ybScsXG4gICAgZm9ybUtpbmQ6ICdhc3NldCcsXG4gICAgSW5wdXQocHJvcHMpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KEltYWdlRmllbGRJbnB1dCwge1xuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgdmFsaWRhdGlvbjogdmFsaWRhdGlvbixcbiAgICAgICAgLi4ucHJvcHNcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBmaWxlbmFtZSh2YWx1ZSwgYXJncykge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlLnNsaWNlKGdldFNyY1ByZWZpeChwdWJsaWNQYXRoLCBhcmdzLnNsdWcpLmxlbmd0aCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0sXG4gICAgcGFyc2UodmFsdWUsIGFyZ3MpIHtcbiAgICAgIHZhciBfdmFsdWUkbWF0Y2gkLCBfdmFsdWUkbWF0Y2g7XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIHN0cmluZycpO1xuICAgICAgfVxuICAgICAgaWYgKGFyZ3MuYXNzZXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IGFyZ3MuYXNzZXQsXG4gICAgICAgIGZpbGVuYW1lOiB2YWx1ZS5zbGljZShnZXRTcmNQcmVmaXgocHVibGljUGF0aCwgYXJncy5zbHVnKS5sZW5ndGgpLFxuICAgICAgICBleHRlbnNpb246IChfdmFsdWUkbWF0Y2gkID0gKF92YWx1ZSRtYXRjaCA9IHZhbHVlLm1hdGNoKC9cXC4oW14uXSskKS8pKSA9PT0gbnVsbCB8fCBfdmFsdWUkbWF0Y2ggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92YWx1ZSRtYXRjaFsxXSkgIT09IG51bGwgJiYgX3ZhbHVlJG1hdGNoJCAhPT0gdm9pZCAwID8gX3ZhbHVlJG1hdGNoJCA6ICcnXG4gICAgICB9O1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIGFzc2VydFJlcXVpcmVkKHZhbHVlLCB2YWxpZGF0aW9uLCBsYWJlbCk7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBzZXJpYWxpemUodmFsdWUsIGFyZ3MpIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWQsXG4gICAgICAgICAgYXNzZXQ6IHVuZGVmaW5lZFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgY29uc3QgZmlsZW5hbWUgPSBhcmdzLnN1Z2dlc3RlZEZpbGVuYW1lUHJlZml4ID8gYXJncy5zdWdnZXN0ZWRGaWxlbmFtZVByZWZpeCArICcuJyArIHZhbHVlLmV4dGVuc2lvbiA6IHZhbHVlLmZpbGVuYW1lO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IGAke2dldFNyY1ByZWZpeChwdWJsaWNQYXRoLCBhcmdzLnNsdWcpfSR7ZmlsZW5hbWV9YCxcbiAgICAgICAgYXNzZXQ6IHtcbiAgICAgICAgICBmaWxlbmFtZSxcbiAgICAgICAgICBjb250ZW50OiB2YWx1ZS5kYXRhXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSxcbiAgICBkaXJlY3Rvcnk6IGRpcmVjdG9yeSA/IGZpeFBhdGgoZGlyZWN0b3J5KSA6IHVuZGVmaW5lZCxcbiAgICByZWFkZXI6IHtcbiAgICAgIHBhcnNlKHZhbHVlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnICYmIHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ011c3QgYmUgYSBzdHJpbmcnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWwgPSB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHZhbHVlO1xuICAgICAgICBhc3NlcnRSZXF1aXJlZCh2YWwsIHZhbGlkYXRpb24sIGxhYmVsKTtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIEZpbGVGaWVsZElucHV0KHByb3BzKSB7XG4gIHZhciBfcHJvcHMkdmFsaWRhdGlvbiwgX3Byb3BzJHZhbGlkYXRpb24yO1xuICBjb25zdCB7XG4gICAgdmFsdWVcbiAgfSA9IHByb3BzO1xuICBjb25zdCBbYmx1cnJlZCwgb25CbHVyXSA9IHVzZVJlZHVjZXIoKCkgPT4gdHJ1ZSwgZmFsc2UpO1xuICBjb25zdCBpc0luRWRpdG9yID0gdXNlSXNJbkRvY3VtZW50RWRpdG9yKCk7XG4gIGNvbnN0IG9iamVjdFVybCA9IHVzZU9iamVjdFVSTCh2YWx1ZSA9PT0gbnVsbCA/IG51bGwgOiB2YWx1ZS5kYXRhKTtcbiAgY29uc3QgbGFiZWxJZCA9IHVzZUlkKCk7XG4gIGNvbnN0IGRlc2NyaXB0aW9uSWQgPSB1c2VJZCgpO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeHMoRmxleCwge1xuICAgIFwiYXJpYS1kZXNjcmliZWRieVwiOiBwcm9wcy5kZXNjcmlwdGlvbiA/IGRlc2NyaXB0aW9uSWQgOiB1bmRlZmluZWQsXG4gICAgXCJhcmlhLWxhYmVsbGVkYnlcIjogbGFiZWxJZCxcbiAgICBkaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgZ2FwOiBcIm1lZGl1bVwiLFxuICAgIHJvbGU6IFwiZ3JvdXBcIixcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goRmllbGRMYWJlbCwge1xuICAgICAgaWQ6IGxhYmVsSWQsXG4gICAgICBlbGVtZW50VHlwZTogXCJzcGFuXCIsXG4gICAgICBpc1JlcXVpcmVkOiAoX3Byb3BzJHZhbGlkYXRpb24gPSBwcm9wcy52YWxpZGF0aW9uKSA9PT0gbnVsbCB8fCBfcHJvcHMkdmFsaWRhdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Byb3BzJHZhbGlkYXRpb24uaXNSZXF1aXJlZCxcbiAgICAgIGNoaWxkcmVuOiBwcm9wcy5sYWJlbFxuICAgIH0pLCBwcm9wcy5kZXNjcmlwdGlvbiAmJiAvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgIHNpemU6IFwic21hbGxcIixcbiAgICAgIGNvbG9yOiBcIm5ldXRyYWxTZWNvbmRhcnlcIixcbiAgICAgIGlkOiBkZXNjcmlwdGlvbklkLFxuICAgICAgY2hpbGRyZW46IHByb3BzLmRlc2NyaXB0aW9uXG4gICAgfSksIC8qI19fUFVSRV9fKi9qc3hzKEJ1dHRvbkdyb3VwLCB7XG4gICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goQWN0aW9uQnV0dG9uLCB7XG4gICAgICAgIG9uUHJlc3M6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICBjb25zdCBmaWxlID0gYXdhaXQgZ2V0VXBsb2FkZWRGaWxlKCcnKTtcbiAgICAgICAgICBpZiAoZmlsZSkge1xuICAgICAgICAgICAgdmFyIF9maWxlJGZpbGVuYW1lJG1hdGNoJCwgX2ZpbGUkZmlsZW5hbWUkbWF0Y2g7XG4gICAgICAgICAgICBwcm9wcy5vbkNoYW5nZSh7XG4gICAgICAgICAgICAgIGRhdGE6IGZpbGUuY29udGVudCxcbiAgICAgICAgICAgICAgZmlsZW5hbWU6IGZpbGUuZmlsZW5hbWUsXG4gICAgICAgICAgICAgIGV4dGVuc2lvbjogKF9maWxlJGZpbGVuYW1lJG1hdGNoJCA9IChfZmlsZSRmaWxlbmFtZSRtYXRjaCA9IGZpbGUuZmlsZW5hbWUubWF0Y2goL1xcLihbXi5dKyQpLykpID09PSBudWxsIHx8IF9maWxlJGZpbGVuYW1lJG1hdGNoID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZmlsZSRmaWxlbmFtZSRtYXRjaFsxXSkgIT09IG51bGwgJiYgX2ZpbGUkZmlsZW5hbWUkbWF0Y2gkICE9PSB2b2lkIDAgPyBfZmlsZSRmaWxlbmFtZSRtYXRjaCQgOiAnJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjaGlsZHJlbjogXCJDaG9vc2UgZmlsZVwiXG4gICAgICB9KSwgdmFsdWUgIT09IG51bGwgJiYgLyojX19QVVJFX18qL2pzeHMoRnJhZ21lbnQsIHtcbiAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEFjdGlvbkJ1dHRvbiwge1xuICAgICAgICAgIHByb21pbmVuY2U6IFwibG93XCIsXG4gICAgICAgICAgb25QcmVzczogKCkgPT4ge1xuICAgICAgICAgICAgcHJvcHMub25DaGFuZ2UobnVsbCk7XG4gICAgICAgICAgICBvbkJsdXIoKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNoaWxkcmVuOiBcIlJlbW92ZVwiXG4gICAgICAgIH0pLCBvYmplY3RVcmwgJiYgLyojX19QVVJFX18qL2pzeChCdXR0b24sIHtcbiAgICAgICAgICBocmVmOiBvYmplY3RVcmwsXG4gICAgICAgICAgZG93bmxvYWQ6IHZhbHVlLmZpbGVuYW1lLFxuICAgICAgICAgIHByb21pbmVuY2U6IFwibG93XCIsXG4gICAgICAgICAgY2hpbGRyZW46IFwiRG93bmxvYWRcIlxuICAgICAgICB9KV1cbiAgICAgIH0pXVxuICAgIH0pLCBpc0luRWRpdG9yICYmIHZhbHVlICE9PSBudWxsICYmIC8qI19fUFVSRV9fKi9qc3goVGV4dEZpZWxkLCB7XG4gICAgICBsYWJlbDogXCJGaWxlbmFtZVwiLFxuICAgICAgb25DaGFuZ2U6IGZpbGVuYW1lID0+IHtcbiAgICAgICAgcHJvcHMub25DaGFuZ2Uoe1xuICAgICAgICAgIC4uLnZhbHVlLFxuICAgICAgICAgIGZpbGVuYW1lXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHZhbHVlOiB2YWx1ZS5maWxlbmFtZVxuICAgIH0pLCAocHJvcHMuZm9yY2VWYWxpZGF0aW9uIHx8IGJsdXJyZWQpICYmICgoX3Byb3BzJHZhbGlkYXRpb24yID0gcHJvcHMudmFsaWRhdGlvbikgPT09IG51bGwgfHwgX3Byb3BzJHZhbGlkYXRpb24yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcHJvcHMkdmFsaWRhdGlvbjIuaXNSZXF1aXJlZCkgJiYgdmFsdWUgPT09IG51bGwgJiYgLyojX19QVVJFX18qL2pzeHMoRmllbGRNZXNzYWdlLCB7XG4gICAgICBjaGlsZHJlbjogW3Byb3BzLmxhYmVsLCBcIiBpcyByZXF1aXJlZFwiXVxuICAgIH0pXVxuICB9KTtcbn1cblxuZnVuY3Rpb24gZmlsZSh7XG4gIGxhYmVsLFxuICBkaXJlY3RvcnksXG4gIHZhbGlkYXRpb24sXG4gIGRlc2NyaXB0aW9uLFxuICBwdWJsaWNQYXRoXG59KSB7XG4gIHJldHVybiB7XG4gICAga2luZDogJ2Zvcm0nLFxuICAgIGZvcm1LaW5kOiAnYXNzZXQnLFxuICAgIElucHV0KHByb3BzKSB7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChGaWxlRmllbGRJbnB1dCwge1xuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgdmFsaWRhdGlvbjogdmFsaWRhdGlvbixcbiAgICAgICAgLi4ucHJvcHNcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBmaWxlbmFtZSh2YWx1ZSwgYXJncykge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlLnNsaWNlKGdldFNyY1ByZWZpeChwdWJsaWNQYXRoLCBhcmdzLnNsdWcpLmxlbmd0aCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0sXG4gICAgcGFyc2UodmFsdWUsIGFyZ3MpIHtcbiAgICAgIHZhciBfdmFsdWUkbWF0Y2gkLCBfdmFsdWUkbWF0Y2g7XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIHN0cmluZycpO1xuICAgICAgfVxuICAgICAgaWYgKGFyZ3MuYXNzZXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IGFyZ3MuYXNzZXQsXG4gICAgICAgIGZpbGVuYW1lOiB2YWx1ZS5zbGljZShnZXRTcmNQcmVmaXgocHVibGljUGF0aCwgYXJncy5zbHVnKS5sZW5ndGgpLFxuICAgICAgICBleHRlbnNpb246IChfdmFsdWUkbWF0Y2gkID0gKF92YWx1ZSRtYXRjaCA9IHZhbHVlLm1hdGNoKC9cXC4oW14uXSskKS8pKSA9PT0gbnVsbCB8fCBfdmFsdWUkbWF0Y2ggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92YWx1ZSRtYXRjaFsxXSkgIT09IG51bGwgJiYgX3ZhbHVlJG1hdGNoJCAhPT0gdm9pZCAwID8gX3ZhbHVlJG1hdGNoJCA6ICcnXG4gICAgICB9O1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIGFzc2VydFJlcXVpcmVkKHZhbHVlLCB2YWxpZGF0aW9uLCBsYWJlbCk7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBzZXJpYWxpemUodmFsdWUsIGFyZ3MpIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWQsXG4gICAgICAgICAgYXNzZXQ6IHVuZGVmaW5lZFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgY29uc3QgZmlsZW5hbWUgPSBhcmdzLnN1Z2dlc3RlZEZpbGVuYW1lUHJlZml4ID8gYXJncy5zdWdnZXN0ZWRGaWxlbmFtZVByZWZpeCArICcuJyArIHZhbHVlLmV4dGVuc2lvbiA6IHZhbHVlLmZpbGVuYW1lO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IGAke2dldFNyY1ByZWZpeChwdWJsaWNQYXRoLCBhcmdzLnNsdWcpfSR7ZmlsZW5hbWV9YCxcbiAgICAgICAgYXNzZXQ6IHtcbiAgICAgICAgICBmaWxlbmFtZSxcbiAgICAgICAgICBjb250ZW50OiB2YWx1ZS5kYXRhXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSxcbiAgICBkaXJlY3Rvcnk6IGRpcmVjdG9yeSA/IGZpeFBhdGgoZGlyZWN0b3J5KSA6IHVuZGVmaW5lZCxcbiAgICByZWFkZXI6IHtcbiAgICAgIHBhcnNlKHZhbHVlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnICYmIHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ011c3QgYmUgYSBzdHJpbmcnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWwgPSB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHZhbHVlO1xuICAgICAgICBhc3NlcnRSZXF1aXJlZCh2YWwsIHZhbGlkYXRpb24sIGxhYmVsKTtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIE11bHRpc2VsZWN0RmllbGRJbnB1dChwcm9wcykge1xuICBjb25zdCBsYWJlbElkID0gdXNlSWQoKTtcbiAgY29uc3QgZGVzY3JpcHRpb25JZCA9IHVzZUlkKCk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhGbGV4LCB7XG4gICAgcm9sZTogXCJncm91cFwiLFxuICAgIFwiYXJpYS1sYWJlbGxlZGJ5XCI6IGxhYmVsSWQsXG4gICAgXCJhcmlhLWRlc2NyaWJlZGJ5XCI6IHByb3BzLmRlc2NyaXB0aW9uID8gZGVzY3JpcHRpb25JZCA6IHVuZGVmaW5lZCxcbiAgICBkaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgZ2FwOiBcIm1lZGl1bVwiLFxuICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChGaWVsZExhYmVsLCB7XG4gICAgICBlbGVtZW50VHlwZTogXCJzcGFuXCIsXG4gICAgICBpZDogbGFiZWxJZCxcbiAgICAgIGNoaWxkcmVuOiBwcm9wcy5sYWJlbFxuICAgIH0pLCBwcm9wcy5kZXNjcmlwdGlvbiAmJiAvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgIGlkOiBkZXNjcmlwdGlvbklkLFxuICAgICAgc2l6ZTogXCJzbWFsbFwiLFxuICAgICAgY29sb3I6IFwibmV1dHJhbFNlY29uZGFyeVwiLFxuICAgICAgY2hpbGRyZW46IHByb3BzLmRlc2NyaXB0aW9uXG4gICAgfSksIHByb3BzLm9wdGlvbnMubWFwKG9wdGlvbiA9PiAvKiNfX1BVUkVfXyovanN4KENoZWNrYm94LCB7XG4gICAgICBpc1NlbGVjdGVkOiBwcm9wcy52YWx1ZS5pbmNsdWRlcyhvcHRpb24udmFsdWUpLFxuICAgICAgb25DaGFuZ2U6ICgpID0+IHtcbiAgICAgICAgaWYgKHByb3BzLnZhbHVlLmluY2x1ZGVzKG9wdGlvbi52YWx1ZSkpIHtcbiAgICAgICAgICBwcm9wcy5vbkNoYW5nZShwcm9wcy52YWx1ZS5maWx0ZXIoeCA9PiB4ICE9PSBvcHRpb24udmFsdWUpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcm9wcy5vbkNoYW5nZShbLi4ucHJvcHMudmFsdWUsIG9wdGlvbi52YWx1ZV0pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY2hpbGRyZW46IG9wdGlvbi5sYWJlbFxuICAgIH0sIG9wdGlvbi52YWx1ZSkpXVxuICB9KTtcbn1cblxuZnVuY3Rpb24gbXVsdGlzZWxlY3Qoe1xuICBsYWJlbCxcbiAgb3B0aW9ucyxcbiAgZGVmYXVsdFZhbHVlID0gW10sXG4gIGRlc2NyaXB0aW9uXG59KSB7XG4gIGNvbnN0IHZhbHVlc1RvT3B0aW9uID0gbmV3IE1hcChvcHRpb25zLm1hcCh4ID0+IFt4LnZhbHVlLCB4XSkpO1xuICBjb25zdCBmaWVsZCA9IGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlKHtcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goTXVsdGlzZWxlY3RGaWVsZElucHV0LCB7XG4gICAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICBvcHRpb25zOiBvcHRpb25zLFxuICAgICAgICAuLi5wcm9wc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWZhdWx0VmFsdWUoKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgIH0sXG4gICAgcGFyc2UodmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGFuIGFycmF5IG9mIG9wdGlvbnMnKTtcbiAgICAgIH1cbiAgICAgIGlmICghdmFsdWUuZXZlcnkoeCA9PiB0eXBlb2YgeCA9PT0gJ3N0cmluZycgJiYgdmFsdWVzVG9PcHRpb24uaGFzKHgpKSkge1xuICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoYE11c3QgYmUgYW4gYXJyYXkgd2l0aCBvbmUgb2YgJHtvcHRpb25zLm1hcCh4ID0+IHgudmFsdWUpLmpvaW4oJywgJyl9YCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgc2VyaWFsaXplKHZhbHVlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZVxuICAgICAgfTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIC4uLmZpZWxkLFxuICAgIG9wdGlvbnNcbiAgfTtcbn1cblxuZnVuY3Rpb24gUGF0aFJlZmVyZW5jZUlucHV0KHByb3BzKSB7XG4gIHZhciBfcHJvcHMkdmFsaWRhdGlvbiwgX3Byb3BzJHZhbGlkYXRpb24yO1xuICBjb25zdCBtYXRjaCA9IHVzZU1lbW8oKCkgPT4gcHJvcHMucGF0dGVybiA/IGZpbHRlcihwcm9wcy5wYXR0ZXJuKSA6ICgpID0+IHRydWUsIFtwcm9wcy5wYXR0ZXJuXSk7XG4gIGNvbnN0IFtibHVycmVkLCBvbkJsdXJdID0gdXNlUmVkdWNlcigoKSA9PiB0cnVlLCBmYWxzZSk7XG4gIGNvbnN0IHRyZWUgPSB1c2VUcmVlKCkuY3VycmVudDtcbiAgY29uc3Qgb3B0aW9ucyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IGZpbGVzID0gdHJlZS5raW5kID09PSAnbG9hZGVkJyA/IFsuLi50cmVlLmRhdGEuZW50cmllcy52YWx1ZXMoKV0gOiBbXTtcbiAgICByZXR1cm4gZmlsZXMuZmlsdGVyKHZhbCA9PiBtYXRjaCh2YWwucGF0aCkpO1xuICB9LCBbdHJlZSwgbWF0Y2hdKTtcbiAgY29uc3QgX2Vycm9yTWVzc2FnZSA9IChwcm9wcy5mb3JjZVZhbGlkYXRpb24gfHwgYmx1cnJlZCkgJiYgKF9wcm9wcyR2YWxpZGF0aW9uID0gcHJvcHMudmFsaWRhdGlvbikgIT09IG51bGwgJiYgX3Byb3BzJHZhbGlkYXRpb24gIT09IHZvaWQgMCAmJiBfcHJvcHMkdmFsaWRhdGlvbi5pc1JlcXVpcmVkICYmIHByb3BzLnZhbHVlID09PSBudWxsID8gYCR7cHJvcHMubGFiZWx9IGlzIHJlcXVpcmVkYCA6IHVuZGVmaW5lZDtcbiAgLy8gdGhpcyBzdGF0ZSAmIGVmZmVjdCBzaG91bGRuJ3QgcmVhbGx5IGV4aXN0XG4gIC8vIGl0J3MgaGVyZSBiZWNhdXNlIHJlYWN0LWFyaWEvc3RhdGVseSBjYWxscyBvblNlbGVjdGlvbkNoYW5nZSB3aXRoIG51bGxcbiAgLy8gYWZ0ZXIgc2VsZWN0aW5nIGFuIGl0ZW0gaWYgd2UgaW1tZWRpYXRlbHkgcmVtb3ZlIHRoZSBlcnJvciBtZXNzYWdlXG4gIC8vIHNvIHdlIGRlbGF5IGl0IHdpdGggYW4gZWZmZWN0XG4gIGNvbnN0IFtlcnJvck1lc3NhZ2UsIHNldEVycm9yTWVzc2FnZV0gPSB1c2VTdGF0ZShfZXJyb3JNZXNzYWdlKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRFcnJvck1lc3NhZ2UoX2Vycm9yTWVzc2FnZSk7XG4gIH0sIFtfZXJyb3JNZXNzYWdlXSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KENvbWJvYm94LCB7XG4gICAgbGFiZWw6IHByb3BzLmxhYmVsLFxuICAgIGRlc2NyaXB0aW9uOiBwcm9wcy5kZXNjcmlwdGlvbixcbiAgICBzZWxlY3RlZEtleTogcHJvcHMudmFsdWUsXG4gICAgb25TZWxlY3Rpb25DaGFuZ2U6IGtleSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGtleSA9PT0gJ3N0cmluZycgfHwga2V5ID09PSBudWxsKSB7XG4gICAgICAgIHByb3BzLm9uQ2hhbmdlKGtleSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBvbkJsdXI6IG9uQmx1cixcbiAgICBpc1JlcXVpcmVkOiAoX3Byb3BzJHZhbGlkYXRpb24yID0gcHJvcHMudmFsaWRhdGlvbikgPT09IG51bGwgfHwgX3Byb3BzJHZhbGlkYXRpb24yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcHJvcHMkdmFsaWRhdGlvbjIuaXNSZXF1aXJlZCxcbiAgICBlcnJvck1lc3NhZ2U6IGVycm9yTWVzc2FnZSxcbiAgICBhdXRvRm9jdXM6IHByb3BzLmF1dG9Gb2N1cyxcbiAgICBkZWZhdWx0SXRlbXM6IG9wdGlvbnMsXG4gICAgd2lkdGg6IFwiYXV0b1wiLFxuICAgIGNoaWxkcmVuOiBpdGVtID0+IC8qI19fUFVSRV9fKi9qc3goSXRlbSwge1xuICAgICAgY2hpbGRyZW46IGl0ZW0ucGF0aFxuICAgIH0sIGl0ZW0ucGF0aClcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHBhdGhSZWZlcmVuY2Uoe1xuICBsYWJlbCxcbiAgcGF0dGVybixcbiAgdmFsaWRhdGlvbixcbiAgZGVzY3JpcHRpb25cbn0pIHtcbiAgcmV0dXJuIGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlKHtcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goUGF0aFJlZmVyZW5jZUlucHV0LCB7XG4gICAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgICAgcGF0dGVybjogcGF0dGVybixcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICB2YWxpZGF0aW9uOiB2YWxpZGF0aW9uLFxuICAgICAgICAuLi5wcm9wc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWZhdWx0VmFsdWUoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIHBhcnNlKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIHN0cmluZycpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIGFzc2VydFJlcXVpcmVkKHZhbHVlLCB2YWxpZGF0aW9uLCBsYWJlbCk7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBzZXJpYWxpemUodmFsdWUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IHZhbHVlXG4gICAgICB9O1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIFJlbGF0aW9uc2hpcElucHV0KHByb3BzKSB7XG4gIHZhciBfcHJvcHMkdmFsaWRhdGlvbiwgX3Byb3BzJHZhbGlkYXRpb24yO1xuICBjb25zdCBbYmx1cnJlZCwgb25CbHVyXSA9IHVzZVJlZHVjZXIoKCkgPT4gdHJ1ZSwgZmFsc2UpO1xuICBjb25zdCBzbHVncyA9IHVzZVNsdWdzSW5Db2xsZWN0aW9uKHByb3BzLmNvbGxlY3Rpb24pO1xuICBjb25zdCBvcHRpb25zID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHNsdWdzLm1hcChzbHVnID0+ICh7XG4gICAgICBzbHVnXG4gICAgfSkpO1xuICB9LCBbc2x1Z3NdKTtcbiAgY29uc3QgX2Vycm9yTWVzc2FnZSA9IChwcm9wcy5mb3JjZVZhbGlkYXRpb24gfHwgYmx1cnJlZCkgJiYgKF9wcm9wcyR2YWxpZGF0aW9uID0gcHJvcHMudmFsaWRhdGlvbikgIT09IG51bGwgJiYgX3Byb3BzJHZhbGlkYXRpb24gIT09IHZvaWQgMCAmJiBfcHJvcHMkdmFsaWRhdGlvbi5pc1JlcXVpcmVkICYmIHByb3BzLnZhbHVlID09PSBudWxsID8gYCR7cHJvcHMubGFiZWx9IGlzIHJlcXVpcmVkYCA6IHVuZGVmaW5lZDtcbiAgLy8gdGhpcyBzdGF0ZSAmIGVmZmVjdCBzaG91bGRuJ3QgcmVhbGx5IGV4aXN0XG4gIC8vIGl0J3MgaGVyZSBiZWNhdXNlIHJlYWN0LWFyaWEvc3RhdGVseSBjYWxscyBvblNlbGVjdGlvbkNoYW5nZSB3aXRoIG51bGxcbiAgLy8gYWZ0ZXIgc2VsZWN0aW5nIGFuIGl0ZW0gaWYgd2UgaW1tZWRpYXRlbHkgcmVtb3ZlIHRoZSBlcnJvciBtZXNzYWdlXG4gIC8vIHNvIHdlIGRlbGF5IGl0IHdpdGggYW4gZWZmZWN0XG4gIGNvbnN0IFtlcnJvck1lc3NhZ2UsIHNldEVycm9yTWVzc2FnZV0gPSB1c2VTdGF0ZShfZXJyb3JNZXNzYWdlKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRFcnJvck1lc3NhZ2UoX2Vycm9yTWVzc2FnZSk7XG4gIH0sIFtfZXJyb3JNZXNzYWdlXSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KENvbWJvYm94LCB7XG4gICAgbGFiZWw6IHByb3BzLmxhYmVsLFxuICAgIGRlc2NyaXB0aW9uOiBwcm9wcy5kZXNjcmlwdGlvbixcbiAgICBzZWxlY3RlZEtleTogcHJvcHMudmFsdWUsXG4gICAgb25TZWxlY3Rpb25DaGFuZ2U6IGtleSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGtleSA9PT0gJ3N0cmluZycgfHwga2V5ID09PSBudWxsKSB7XG4gICAgICAgIHByb3BzLm9uQ2hhbmdlKGtleSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBvbkJsdXI6IG9uQmx1cixcbiAgICBhdXRvRm9jdXM6IHByb3BzLmF1dG9Gb2N1cyxcbiAgICBkZWZhdWx0SXRlbXM6IG9wdGlvbnMsXG4gICAgaXNSZXF1aXJlZDogKF9wcm9wcyR2YWxpZGF0aW9uMiA9IHByb3BzLnZhbGlkYXRpb24pID09PSBudWxsIHx8IF9wcm9wcyR2YWxpZGF0aW9uMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Byb3BzJHZhbGlkYXRpb24yLmlzUmVxdWlyZWQsXG4gICAgZXJyb3JNZXNzYWdlOiBlcnJvck1lc3NhZ2UsXG4gICAgd2lkdGg6IFwiYXV0b1wiLFxuICAgIGNoaWxkcmVuOiBpdGVtID0+IC8qI19fUFVSRV9fKi9qc3goSXRlbSQxLCB7XG4gICAgICBjaGlsZHJlbjogaXRlbS5zbHVnXG4gICAgfSwgaXRlbS5zbHVnKVxuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVsYXRpb25zaGlwKHtcbiAgbGFiZWwsXG4gIGNvbGxlY3Rpb24sXG4gIHZhbGlkYXRpb24sXG4gIGRlc2NyaXB0aW9uXG59KSB7XG4gIHJldHVybiBiYXNpY0Zvcm1GaWVsZFdpdGhTaW1wbGVSZWFkZXJQYXJzZSh7XG4gICAgSW5wdXQocHJvcHMpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFJlbGF0aW9uc2hpcElucHV0LCB7XG4gICAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgICAgY29sbGVjdGlvbjogY29sbGVjdGlvbixcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICB2YWxpZGF0aW9uOiB2YWxpZGF0aW9uLFxuICAgICAgICAuLi5wcm9wc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWZhdWx0VmFsdWUoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIHBhcnNlKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIHN0cmluZycpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIGFzc2VydFJlcXVpcmVkKHZhbHVlLCB2YWxpZGF0aW9uLCBsYWJlbCk7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBzZXJpYWxpemUodmFsdWUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IHZhbHVlXG4gICAgICB9O1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIFNlbGVjdEZpZWxkSW5wdXQocHJvcHMpIHtcbiAgbGV0IGZpZWxkQ29udGV4dCA9IHVzZUZpZWxkQ29udGV4dCgpO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChQaWNrZXIsIHtcbiAgICBsYWJlbDogcHJvcHMubGFiZWwsXG4gICAgZGVzY3JpcHRpb246IHByb3BzLmRlc2NyaXB0aW9uLFxuICAgIGl0ZW1zOiBwcm9wcy5vcHRpb25zLFxuICAgIHNlbGVjdGVkS2V5OiBwcm9wcy52YWx1ZSxcbiAgICBvblNlbGVjdGlvbkNoYW5nZToga2V5ID0+IHtcbiAgICAgIHByb3BzLm9uQ2hhbmdlKGtleSk7XG4gICAgfSxcbiAgICBhdXRvRm9jdXM6IHByb3BzLmF1dG9Gb2N1cyxcbiAgICB3aWR0aDoge1xuICAgICAgbW9iaWxlOiAnYXV0bycsXG4gICAgICB0YWJsZXQ6IGZpZWxkQ29udGV4dC5zcGFuID09PSAxMiA/ICdhbGlhcy5zaW5nbGVMaW5lV2lkdGgnIDogJ2F1dG8nXG4gICAgfSxcbiAgICBjaGlsZHJlbjogaXRlbSA9PiAvKiNfX1BVUkVfXyovanN4KEl0ZW0kMiwge1xuICAgICAgY2hpbGRyZW46IGl0ZW0ubGFiZWxcbiAgICB9LCBpdGVtLnZhbHVlKVxuICB9KTtcbn1cblxuZnVuY3Rpb24gc2VsZWN0KHtcbiAgbGFiZWwsXG4gIG9wdGlvbnMsXG4gIGRlZmF1bHRWYWx1ZSxcbiAgZGVzY3JpcHRpb25cbn0pIHtcbiAgY29uc3Qgb3B0aW9uVmFsdWVzU2V0ID0gbmV3IFNldChvcHRpb25zLm1hcCh4ID0+IHgudmFsdWUpKTtcbiAgaWYgKCFvcHRpb25WYWx1ZXNTZXQuaGFzKGRlZmF1bHRWYWx1ZSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEEgZGVmYXVsdFZhbHVlIG9mICR7ZGVmYXVsdFZhbHVlfSB3YXMgcHJvdmlkZWQgdG8gYSBzZWxlY3QgZmllbGQgYnV0IGl0IGRvZXMgbm90IG1hdGNoIHRoZSB2YWx1ZSBvZiBvbmUgb2YgdGhlIG9wdGlvbnMgcHJvdmlkZWRgKTtcbiAgfVxuICBjb25zdCBmaWVsZCA9IGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlKHtcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goU2VsZWN0RmllbGRJbnB1dCwge1xuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIG9wdGlvbnM6IG9wdGlvbnMsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgLi4ucHJvcHNcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICB9LFxuICAgIHBhcnNlKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgICB9XG4gICAgICBpZiAoIW9wdGlvblZhbHVlc1NldC5oYXModmFsdWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIHZhbGlkIG9wdGlvbicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWVcbiAgICAgIH07XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHtcbiAgICAuLi5maWVsZCxcbiAgICBvcHRpb25zXG4gIH07XG59XG5cbmNvbnN0IGVtcHR5U2V0ID0gbmV3IFNldCgpO1xuZnVuY3Rpb24gU2x1Z0ZpZWxkSW5wdXQocHJvcHMpIHtcbiAgdmFyIF9wcm9wcyRhcmdzJHNsdWckdmFsaSwgX3Byb3BzJGFyZ3Mkc2x1ZywgX3Byb3BzJGFyZ3Mkc2x1ZyR2YWxpMiwgX3Byb3BzJGFyZ3Mkc2x1ZzIsIF9wcm9wcyRhcmdzJHNsdWckbGFiZSwgX3Byb3BzJGFyZ3Mkc2x1ZzMsIF9wcm9wcyRhcmdzJG5hbWUkdmFsaSwgX3Byb3BzJGFyZ3MkbmFtZSR2YWxpMiwgX3Byb3BzJGFyZ3MkbmFtZSR2YWxpMywgX3Byb3BzJGFyZ3MkbmFtZSR2YWxpNCwgX3Byb3BzJGFyZ3MkbmFtZSR2YWxpNSwgX3Byb3BzJGFyZ3Mkc2x1ZyRsYWJlMiwgX3Byb3BzJGFyZ3Mkc2x1ZzQsIF9wcm9wcyRhcmdzJHNsdWc1O1xuICBjb25zdCBzbHVnQ29udGV4dCA9IHVzZUNvbnRleHQoU2x1Z0ZpZWxkQ29udGV4dCk7XG4gIGNvbnN0IHBhdGggPSB1c2VDb250ZXh0KFBhdGhDb250ZXh0KTtcbiAgY29uc3Qgc2x1Z0luZm8gPSBwYXRoLmxlbmd0aCA9PT0gMSAmJiBwYXRoWzBdID09PSAoc2x1Z0NvbnRleHQgPT09IG51bGwgfHwgc2x1Z0NvbnRleHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNsdWdDb250ZXh0LmZpZWxkKSA/IHNsdWdDb250ZXh0IDoge1xuICAgIHNsdWdzOiBlbXB0eVNldCxcbiAgICBnbG9iOiAnKidcbiAgfTtcbiAgY29uc3QgW2JsdXJyZWROYW1lLCBzZXRCbHVycmVkTmFtZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtibHVycmVkU2x1Zywgc2V0Qmx1cnJlZFNsdWddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvdWxkR2VuZXJhdGVTbHVnLCBzZXRTaG91bGRHZW5lcmF0ZVNsdWddID0gdXNlU3RhdGUocHJvcHMudmFsdWUgPT09IHByb3BzLmRlZmF1bHRWYWx1ZSk7XG4gIGNvbnN0IGdlbmVyYXRlU2x1ZyA9IG5hbWUgPT4ge1xuICAgIGNvbnN0IGdlbmVyYXRlZCA9IHByb3BzLm5haXZlR2VuZXJhdGVTbHVnKG5hbWUpO1xuICAgIGlmIChzbHVnSW5mby5zbHVncy5oYXMoZ2VuZXJhdGVkKSkge1xuICAgICAgbGV0IGkgPSAxO1xuICAgICAgd2hpbGUgKHNsdWdJbmZvLnNsdWdzLmhhcyhgJHtnZW5lcmF0ZWR9LSR7aX1gKSkge1xuICAgICAgICBpKys7XG4gICAgICB9XG4gICAgICByZXR1cm4gYCR7Z2VuZXJhdGVkfS0ke2l9YDtcbiAgICB9XG4gICAgcmV0dXJuIGdlbmVyYXRlZDtcbiAgfTtcbiAgY29uc3Qgc2x1Z0Vycm9yTWVzc2FnZSA9IHByb3BzLmZvcmNlVmFsaWRhdGlvbiB8fCBibHVycmVkU2x1ZyA/IHZhbGlkYXRlVGV4dChwcm9wcy52YWx1ZS5zbHVnLCAoX3Byb3BzJGFyZ3Mkc2x1ZyR2YWxpID0gKF9wcm9wcyRhcmdzJHNsdWcgPSBwcm9wcy5hcmdzLnNsdWcpID09PSBudWxsIHx8IF9wcm9wcyRhcmdzJHNsdWcgPT09IHZvaWQgMCB8fCAoX3Byb3BzJGFyZ3Mkc2x1ZyA9IF9wcm9wcyRhcmdzJHNsdWcudmFsaWRhdGlvbikgPT09IG51bGwgfHwgX3Byb3BzJGFyZ3Mkc2x1ZyA9PT0gdm9pZCAwIHx8IChfcHJvcHMkYXJncyRzbHVnID0gX3Byb3BzJGFyZ3Mkc2x1Zy5sZW5ndGgpID09PSBudWxsIHx8IF9wcm9wcyRhcmdzJHNsdWcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wcm9wcyRhcmdzJHNsdWcubWluKSAhPT0gbnVsbCAmJiBfcHJvcHMkYXJncyRzbHVnJHZhbGkgIT09IHZvaWQgMCA/IF9wcm9wcyRhcmdzJHNsdWckdmFsaSA6IDEsIChfcHJvcHMkYXJncyRzbHVnJHZhbGkyID0gKF9wcm9wcyRhcmdzJHNsdWcyID0gcHJvcHMuYXJncy5zbHVnKSA9PT0gbnVsbCB8fCBfcHJvcHMkYXJncyRzbHVnMiA9PT0gdm9pZCAwIHx8IChfcHJvcHMkYXJncyRzbHVnMiA9IF9wcm9wcyRhcmdzJHNsdWcyLnZhbGlkYXRpb24pID09PSBudWxsIHx8IF9wcm9wcyRhcmdzJHNsdWcyID09PSB2b2lkIDAgfHwgKF9wcm9wcyRhcmdzJHNsdWcyID0gX3Byb3BzJGFyZ3Mkc2x1ZzIubGVuZ3RoKSA9PT0gbnVsbCB8fCBfcHJvcHMkYXJncyRzbHVnMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Byb3BzJGFyZ3Mkc2x1ZzIubWF4KSAhPT0gbnVsbCAmJiBfcHJvcHMkYXJncyRzbHVnJHZhbGkyICE9PSB2b2lkIDAgPyBfcHJvcHMkYXJncyRzbHVnJHZhbGkyIDogSW5maW5pdHksIChfcHJvcHMkYXJncyRzbHVnJGxhYmUgPSAoX3Byb3BzJGFyZ3Mkc2x1ZzMgPSBwcm9wcy5hcmdzLnNsdWcpID09PSBudWxsIHx8IF9wcm9wcyRhcmdzJHNsdWczID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcHJvcHMkYXJncyRzbHVnMy5sYWJlbCkgIT09IG51bGwgJiYgX3Byb3BzJGFyZ3Mkc2x1ZyRsYWJlICE9PSB2b2lkIDAgPyBfcHJvcHMkYXJncyRzbHVnJGxhYmUgOiAnU2x1ZycsIHNsdWdJbmZvKSA6IHVuZGVmaW5lZDtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3hzKEZsZXgsIHtcbiAgICBnYXA6IFwieGxhcmdlXCIsXG4gICAgZGlyZWN0aW9uOiBcImNvbHVtblwiLFxuICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChUZXh0RmllbGQsIHtcbiAgICAgIGxhYmVsOiBwcm9wcy5hcmdzLm5hbWUubGFiZWwsXG4gICAgICBkZXNjcmlwdGlvbjogcHJvcHMuYXJncy5uYW1lLmRlc2NyaXB0aW9uLFxuICAgICAgYXV0b0ZvY3VzOiBwcm9wcy5hdXRvRm9jdXMsXG4gICAgICB2YWx1ZTogcHJvcHMudmFsdWUubmFtZSxcbiAgICAgIGlzUmVxdWlyZWQ6ICEhKChfcHJvcHMkYXJncyRuYW1lJHZhbGkgPSBwcm9wcy5hcmdzLm5hbWUudmFsaWRhdGlvbikgIT09IG51bGwgJiYgX3Byb3BzJGFyZ3MkbmFtZSR2YWxpICE9PSB2b2lkIDAgJiYgKF9wcm9wcyRhcmdzJG5hbWUkdmFsaSA9IF9wcm9wcyRhcmdzJG5hbWUkdmFsaS5sZW5ndGgpICE9PSBudWxsICYmIF9wcm9wcyRhcmdzJG5hbWUkdmFsaSAhPT0gdm9pZCAwICYmIF9wcm9wcyRhcmdzJG5hbWUkdmFsaS5taW4pLFxuICAgICAgb25DaGFuZ2U6IG5hbWUgPT4ge1xuICAgICAgICBwcm9wcy5vbkNoYW5nZSh7XG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICBzbHVnOiBzaG91bGRHZW5lcmF0ZVNsdWcgPyBnZW5lcmF0ZVNsdWcobmFtZSkgOiBwcm9wcy52YWx1ZS5zbHVnXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIG9uQmx1cjogKCkgPT4gc2V0Qmx1cnJlZE5hbWUodHJ1ZSksXG4gICAgICBlcnJvck1lc3NhZ2U6IHByb3BzLmZvcmNlVmFsaWRhdGlvbiB8fCBibHVycmVkTmFtZSA/IHZhbGlkYXRlVGV4dChwcm9wcy52YWx1ZS5uYW1lLCAoX3Byb3BzJGFyZ3MkbmFtZSR2YWxpMiA9IChfcHJvcHMkYXJncyRuYW1lJHZhbGkzID0gcHJvcHMuYXJncy5uYW1lLnZhbGlkYXRpb24pID09PSBudWxsIHx8IF9wcm9wcyRhcmdzJG5hbWUkdmFsaTMgPT09IHZvaWQgMCB8fCAoX3Byb3BzJGFyZ3MkbmFtZSR2YWxpMyA9IF9wcm9wcyRhcmdzJG5hbWUkdmFsaTMubGVuZ3RoKSA9PT0gbnVsbCB8fCBfcHJvcHMkYXJncyRuYW1lJHZhbGkzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcHJvcHMkYXJncyRuYW1lJHZhbGkzLm1pbikgIT09IG51bGwgJiYgX3Byb3BzJGFyZ3MkbmFtZSR2YWxpMiAhPT0gdm9pZCAwID8gX3Byb3BzJGFyZ3MkbmFtZSR2YWxpMiA6IDAsIChfcHJvcHMkYXJncyRuYW1lJHZhbGk0ID0gKF9wcm9wcyRhcmdzJG5hbWUkdmFsaTUgPSBwcm9wcy5hcmdzLm5hbWUudmFsaWRhdGlvbikgPT09IG51bGwgfHwgX3Byb3BzJGFyZ3MkbmFtZSR2YWxpNSA9PT0gdm9pZCAwIHx8IChfcHJvcHMkYXJncyRuYW1lJHZhbGk1ID0gX3Byb3BzJGFyZ3MkbmFtZSR2YWxpNS5sZW5ndGgpID09PSBudWxsIHx8IF9wcm9wcyRhcmdzJG5hbWUkdmFsaTUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wcm9wcyRhcmdzJG5hbWUkdmFsaTUubWF4KSAhPT0gbnVsbCAmJiBfcHJvcHMkYXJncyRuYW1lJHZhbGk0ICE9PSB2b2lkIDAgPyBfcHJvcHMkYXJncyRuYW1lJHZhbGk0IDogSW5maW5pdHksIHByb3BzLmFyZ3MubmFtZS5sYWJlbCwgdW5kZWZpbmVkKSA6IHVuZGVmaW5lZFxuICAgIH0pLCAvKiNfX1BVUkVfXyovanN4cyhGbGV4LCB7XG4gICAgICBnYXA6IFwicmVndWxhclwiLFxuICAgICAgYWxpZ25JdGVtczogXCJlbmRcIixcbiAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChUZXh0RmllbGQsIHtcbiAgICAgICAgZmxleDogMSxcbiAgICAgICAgbGFiZWw6IChfcHJvcHMkYXJncyRzbHVnJGxhYmUyID0gKF9wcm9wcyRhcmdzJHNsdWc0ID0gcHJvcHMuYXJncy5zbHVnKSA9PT0gbnVsbCB8fCBfcHJvcHMkYXJncyRzbHVnNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Byb3BzJGFyZ3Mkc2x1ZzQubGFiZWwpICE9PSBudWxsICYmIF9wcm9wcyRhcmdzJHNsdWckbGFiZTIgIT09IHZvaWQgMCA/IF9wcm9wcyRhcmdzJHNsdWckbGFiZTIgOiAnU2x1ZycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAoX3Byb3BzJGFyZ3Mkc2x1ZzUgPSBwcm9wcy5hcmdzLnNsdWcpID09PSBudWxsIHx8IF9wcm9wcyRhcmdzJHNsdWc1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcHJvcHMkYXJncyRzbHVnNS5kZXNjcmlwdGlvbixcbiAgICAgICAgdmFsdWU6IHByb3BzLnZhbHVlLnNsdWcsXG4gICAgICAgIG9uQ2hhbmdlOiBzbHVnID0+IHtcbiAgICAgICAgICBzZXRTaG91bGRHZW5lcmF0ZVNsdWcoZmFsc2UpO1xuICAgICAgICAgIHByb3BzLm9uQ2hhbmdlKHtcbiAgICAgICAgICAgIG5hbWU6IHByb3BzLnZhbHVlLm5hbWUsXG4gICAgICAgICAgICBzbHVnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uQmx1cjogKCkgPT4gc2V0Qmx1cnJlZFNsdWcodHJ1ZSksXG4gICAgICAgIGVycm9yTWVzc2FnZTogc2x1Z0Vycm9yTWVzc2FnZSxcbiAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZVxuICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3hzKEZsZXgsIHtcbiAgICAgICAgZ2FwOiBcInJlZ3VsYXJcIixcbiAgICAgICAgZGlyZWN0aW9uOiBcImNvbHVtblwiLFxuICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goQWN0aW9uQnV0dG9uLCB7XG4gICAgICAgICAgb25QcmVzczogKCkgPT4ge1xuICAgICAgICAgICAgcHJvcHMub25DaGFuZ2Uoe1xuICAgICAgICAgICAgICBuYW1lOiBwcm9wcy52YWx1ZS5uYW1lLFxuICAgICAgICAgICAgICBzbHVnOiBnZW5lcmF0ZVNsdWcocHJvcHMudmFsdWUubmFtZSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgY2hpbGRyZW46IFwiUmVnZW5lcmF0ZVwiXG4gICAgICAgIH0pLCBzbHVnRXJyb3JNZXNzYWdlICE9PSB1bmRlZmluZWQgJiYgLyojX19QVVJFX18qL2pzeChCb3gsIHtcbiAgICAgICAgICBoZWlnaHQ6IFwiZWxlbWVudC54c21hbGxcIlxuICAgICAgICB9KV1cbiAgICAgIH0pXVxuICAgIH0pXVxuICB9KTtcbn1cblxuZnVuY3Rpb24gcGFyc2VTbHVnRmllbGRBc05vcm1hbEZpZWxkKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgc2x1ZzogJydcbiAgICB9O1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnKSB7XG4gICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGFuIG9iamVjdCcpO1xuICB9XG4gIGlmIChPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoICE9PSAyKSB7XG4gICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdVbmV4cGVjdGVkIGtleXMnKTtcbiAgfVxuICBpZiAoISgnbmFtZScgaW4gdmFsdWUpIHx8ICEoJ3NsdWcnIGluIHZhbHVlKSkge1xuICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTWlzc2luZyBuYW1lIG9yIHNsdWcnKTtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlLm5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCduYW1lIG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlLnNsdWcgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdzbHVnIG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgfVxuICByZXR1cm4ge1xuICAgIG5hbWU6IHZhbHVlLm5hbWUsXG4gICAgc2x1ZzogdmFsdWUuc2x1Z1xuICB9O1xufVxuZnVuY3Rpb24gcGFyc2VBc1NsdWdGaWVsZCh2YWx1ZSwgc2x1Zykge1xuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiAnJyxcbiAgICAgIHNsdWdcbiAgICB9O1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGEgc3RyaW5nJyk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBuYW1lOiB2YWx1ZSxcbiAgICBzbHVnXG4gIH07XG59XG5mdW5jdGlvbiBzbHVnKGFyZ3MpIHtcbiAgdmFyIF9hcmdzJHNsdWcsIF9hcmdzJG5hbWUkZGVmYXVsdFZhbCwgX2FyZ3MkbmFtZSRkZWZhdWx0VmFsMjtcbiAgY29uc3QgbmFpdmVHZW5lcmF0ZVNsdWcgPSAoKF9hcmdzJHNsdWcgPSBhcmdzLnNsdWcpID09PSBudWxsIHx8IF9hcmdzJHNsdWcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hcmdzJHNsdWcuZ2VuZXJhdGUpIHx8IHNsdWdpZnk7XG4gIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IHtcbiAgICBuYW1lOiAoX2FyZ3MkbmFtZSRkZWZhdWx0VmFsID0gYXJncy5uYW1lLmRlZmF1bHRWYWx1ZSkgIT09IG51bGwgJiYgX2FyZ3MkbmFtZSRkZWZhdWx0VmFsICE9PSB2b2lkIDAgPyBfYXJncyRuYW1lJGRlZmF1bHRWYWwgOiAnJyxcbiAgICBzbHVnOiBuYWl2ZUdlbmVyYXRlU2x1ZygoX2FyZ3MkbmFtZSRkZWZhdWx0VmFsMiA9IGFyZ3MubmFtZS5kZWZhdWx0VmFsdWUpICE9PSBudWxsICYmIF9hcmdzJG5hbWUkZGVmYXVsdFZhbDIgIT09IHZvaWQgMCA/IF9hcmdzJG5hbWUkZGVmYXVsdFZhbDIgOiAnJylcbiAgfTtcbiAgZnVuY3Rpb24gdmFsaWRhdGUodmFsdWUsIHtcbiAgICBzbHVnRmllbGRcbiAgfSA9IHtcbiAgICBzbHVnRmllbGQ6IHVuZGVmaW5lZFxuICB9KSB7XG4gICAgdmFyIF9hcmdzJG5hbWUkdmFsaWRhdGlvbiwgX2FyZ3MkbmFtZSR2YWxpZGF0aW9uMiwgX2FyZ3MkbmFtZSR2YWxpZGF0aW9uMywgX2FyZ3MkbmFtZSR2YWxpZGF0aW9uNCwgX2FyZ3Mkc2x1ZyR2YWxpZGF0aW9uLCBfYXJncyRzbHVnMiwgX2FyZ3Mkc2x1ZyR2YWxpZGF0aW9uMiwgX2FyZ3Mkc2x1ZzMsIF9hcmdzJHNsdWckbGFiZWwsIF9hcmdzJHNsdWc0O1xuICAgIGNvbnN0IG5hbWVNZXNzYWdlID0gdmFsaWRhdGVUZXh0KHZhbHVlLm5hbWUsIChfYXJncyRuYW1lJHZhbGlkYXRpb24gPSAoX2FyZ3MkbmFtZSR2YWxpZGF0aW9uMiA9IGFyZ3MubmFtZS52YWxpZGF0aW9uKSA9PT0gbnVsbCB8fCBfYXJncyRuYW1lJHZhbGlkYXRpb24yID09PSB2b2lkIDAgfHwgKF9hcmdzJG5hbWUkdmFsaWRhdGlvbjIgPSBfYXJncyRuYW1lJHZhbGlkYXRpb24yLmxlbmd0aCkgPT09IG51bGwgfHwgX2FyZ3MkbmFtZSR2YWxpZGF0aW9uMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FyZ3MkbmFtZSR2YWxpZGF0aW9uMi5taW4pICE9PSBudWxsICYmIF9hcmdzJG5hbWUkdmFsaWRhdGlvbiAhPT0gdm9pZCAwID8gX2FyZ3MkbmFtZSR2YWxpZGF0aW9uIDogMCwgKF9hcmdzJG5hbWUkdmFsaWRhdGlvbjMgPSAoX2FyZ3MkbmFtZSR2YWxpZGF0aW9uNCA9IGFyZ3MubmFtZS52YWxpZGF0aW9uKSA9PT0gbnVsbCB8fCBfYXJncyRuYW1lJHZhbGlkYXRpb240ID09PSB2b2lkIDAgfHwgKF9hcmdzJG5hbWUkdmFsaWRhdGlvbjQgPSBfYXJncyRuYW1lJHZhbGlkYXRpb240Lmxlbmd0aCkgPT09IG51bGwgfHwgX2FyZ3MkbmFtZSR2YWxpZGF0aW9uNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FyZ3MkbmFtZSR2YWxpZGF0aW9uNC5tYXgpICE9PSBudWxsICYmIF9hcmdzJG5hbWUkdmFsaWRhdGlvbjMgIT09IHZvaWQgMCA/IF9hcmdzJG5hbWUkdmFsaWRhdGlvbjMgOiBJbmZpbml0eSwgYXJncy5uYW1lLmxhYmVsLCB1bmRlZmluZWQpO1xuICAgIGlmIChuYW1lTWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IobmFtZU1lc3NhZ2UpO1xuICAgIH1cbiAgICBjb25zdCBzbHVnTWVzc2FnZSA9IHZhbGlkYXRlVGV4dCh2YWx1ZS5zbHVnLCAoX2FyZ3Mkc2x1ZyR2YWxpZGF0aW9uID0gKF9hcmdzJHNsdWcyID0gYXJncy5zbHVnKSA9PT0gbnVsbCB8fCBfYXJncyRzbHVnMiA9PT0gdm9pZCAwIHx8IChfYXJncyRzbHVnMiA9IF9hcmdzJHNsdWcyLnZhbGlkYXRpb24pID09PSBudWxsIHx8IF9hcmdzJHNsdWcyID09PSB2b2lkIDAgfHwgKF9hcmdzJHNsdWcyID0gX2FyZ3Mkc2x1ZzIubGVuZ3RoKSA9PT0gbnVsbCB8fCBfYXJncyRzbHVnMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FyZ3Mkc2x1ZzIubWluKSAhPT0gbnVsbCAmJiBfYXJncyRzbHVnJHZhbGlkYXRpb24gIT09IHZvaWQgMCA/IF9hcmdzJHNsdWckdmFsaWRhdGlvbiA6IDEsIChfYXJncyRzbHVnJHZhbGlkYXRpb24yID0gKF9hcmdzJHNsdWczID0gYXJncy5zbHVnKSA9PT0gbnVsbCB8fCBfYXJncyRzbHVnMyA9PT0gdm9pZCAwIHx8IChfYXJncyRzbHVnMyA9IF9hcmdzJHNsdWczLnZhbGlkYXRpb24pID09PSBudWxsIHx8IF9hcmdzJHNsdWczID09PSB2b2lkIDAgfHwgKF9hcmdzJHNsdWczID0gX2FyZ3Mkc2x1ZzMubGVuZ3RoKSA9PT0gbnVsbCB8fCBfYXJncyRzbHVnMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FyZ3Mkc2x1ZzMubWF4KSAhPT0gbnVsbCAmJiBfYXJncyRzbHVnJHZhbGlkYXRpb24yICE9PSB2b2lkIDAgPyBfYXJncyRzbHVnJHZhbGlkYXRpb24yIDogSW5maW5pdHksIChfYXJncyRzbHVnJGxhYmVsID0gKF9hcmdzJHNsdWc0ID0gYXJncy5zbHVnKSA9PT0gbnVsbCB8fCBfYXJncyRzbHVnNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FyZ3Mkc2x1ZzQubGFiZWwpICE9PSBudWxsICYmIF9hcmdzJHNsdWckbGFiZWwgIT09IHZvaWQgMCA/IF9hcmdzJHNsdWckbGFiZWwgOiAnU2x1ZycsIHNsdWdGaWVsZCA/IHNsdWdGaWVsZCA6IHtcbiAgICAgIHNsdWdzOiBlbXB0eVNldCxcbiAgICAgIGdsb2I6ICcqJ1xuICAgIH0pO1xuICAgIGlmIChzbHVnTWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3Ioc2x1Z01lc3NhZ2UpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgY29uc3QgZW1wdHlTZXQgPSBuZXcgU2V0KCk7XG4gIHJldHVybiB7XG4gICAga2luZDogJ2Zvcm0nLFxuICAgIGZvcm1LaW5kOiAnc2x1ZycsXG4gICAgSW5wdXQocHJvcHMpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFNsdWdGaWVsZElucHV0LCB7XG4gICAgICAgIGFyZ3M6IGFyZ3MsXG4gICAgICAgIG5haXZlR2VuZXJhdGVTbHVnOiBuYWl2ZUdlbmVyYXRlU2x1ZyxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBkZWZhdWx0VmFsdWUsXG4gICAgICAgIC4uLnByb3BzXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgfSxcbiAgICBwYXJzZSh2YWx1ZSwgYXJncykge1xuICAgICAgaWYgKChhcmdzID09PSBudWxsIHx8IGFyZ3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFyZ3Muc2x1ZykgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gcGFyc2VBc1NsdWdGaWVsZCh2YWx1ZSwgYXJncy5zbHVnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXJzZVNsdWdGaWVsZEFzTm9ybWFsRmllbGQodmFsdWUpO1xuICAgIH0sXG4gICAgdmFsaWRhdGUsXG4gICAgc2VyaWFsaXplKHZhbHVlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZVxuICAgICAgfTtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZVdpdGhTbHVnKHZhbHVlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdmFsdWUubmFtZSxcbiAgICAgICAgc2x1ZzogdmFsdWUuc2x1Z1xuICAgICAgfTtcbiAgICB9LFxuICAgIHJlYWRlcjoge1xuICAgICAgcGFyc2UodmFsdWUpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkID0gcGFyc2VTbHVnRmllbGRBc05vcm1hbEZpZWxkKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlKHBhcnNlZCk7XG4gICAgICB9LFxuICAgICAgcGFyc2VXaXRoU2x1Zyh2YWx1ZSwgYXJncykge1xuICAgICAgICByZXR1cm4gdmFsaWRhdGUocGFyc2VBc1NsdWdGaWVsZCh2YWx1ZSwgYXJncy5zbHVnKSwge1xuICAgICAgICAgIHNsdWdGaWVsZDoge1xuICAgICAgICAgICAgZ2xvYjogYXJncy5nbG9iLFxuICAgICAgICAgICAgc2x1Z3M6IGVtcHR5U2V0XG4gICAgICAgICAgfVxuICAgICAgICB9KS5uYW1lO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVVcmwodmFsaWRhdGlvbiwgdmFsdWUsIGxhYmVsKSB7XG4gIGlmICh2YWx1ZSAhPT0gbnVsbCAmJiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJyB8fCAhaXNWYWxpZFVSTCh2YWx1ZSkpKSB7XG4gICAgcmV0dXJuIGAke2xhYmVsfSBpcyBub3QgYSB2YWxpZCBVUkxgO1xuICB9XG4gIGlmICh2YWxpZGF0aW9uICE9PSBudWxsICYmIHZhbGlkYXRpb24gIT09IHZvaWQgMCAmJiB2YWxpZGF0aW9uLmlzUmVxdWlyZWQgJiYgdmFsdWUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gYCR7bGFiZWx9IGlzIHJlcXVpcmVkYDtcbiAgfVxufVxuXG5mdW5jdGlvbiBVcmxGaWVsZElucHV0KHByb3BzKSB7XG4gIHZhciBfcHJvcHMkdmFsaWRhdGlvbjtcbiAgY29uc3QgW2JsdXJyZWQsIG9uQmx1cl0gPSB1c2VSZWR1Y2VyKCgpID0+IHRydWUsIGZhbHNlKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goVGV4dEZpZWxkLCB7XG4gICAgd2lkdGg6IFwiYXV0b1wiLFxuICAgIG1heFdpZHRoOiBcInNjYWxlLjYwMDBcIixcbiAgICBsYWJlbDogcHJvcHMubGFiZWwsXG4gICAgZGVzY3JpcHRpb246IHByb3BzLmRlc2NyaXB0aW9uLFxuICAgIGF1dG9Gb2N1czogcHJvcHMuYXV0b0ZvY3VzLFxuICAgIHZhbHVlOiBwcm9wcy52YWx1ZSA9PT0gbnVsbCA/ICcnIDogcHJvcHMudmFsdWUsXG4gICAgb25DaGFuZ2U6IHZhbCA9PiB7XG4gICAgICBwcm9wcy5vbkNoYW5nZSh2YWwgPT09ICcnID8gbnVsbCA6IHZhbCk7XG4gICAgfSxcbiAgICBvbkJsdXI6IG9uQmx1cixcbiAgICBpc1JlcXVpcmVkOiAoX3Byb3BzJHZhbGlkYXRpb24gPSBwcm9wcy52YWxpZGF0aW9uKSA9PT0gbnVsbCB8fCBfcHJvcHMkdmFsaWRhdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Byb3BzJHZhbGlkYXRpb24uaXNSZXF1aXJlZCxcbiAgICBlcnJvck1lc3NhZ2U6IHByb3BzLmZvcmNlVmFsaWRhdGlvbiB8fCBibHVycmVkID8gdmFsaWRhdGVVcmwocHJvcHMudmFsaWRhdGlvbiwgcHJvcHMudmFsdWUsIHByb3BzLmxhYmVsKSA6IHVuZGVmaW5lZFxuICB9KTtcbn1cblxuZnVuY3Rpb24gdXJsKHtcbiAgbGFiZWwsXG4gIGRlZmF1bHRWYWx1ZSxcbiAgdmFsaWRhdGlvbixcbiAgZGVzY3JpcHRpb25cbn0pIHtcbiAgcmV0dXJuIGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlKHtcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goVXJsRmllbGRJbnB1dCwge1xuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgdmFsaWRhdGlvbjogdmFsaWRhdGlvbixcbiAgICAgICAgLi4ucHJvcHNcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZSB8fCBudWxsO1xuICAgIH0sXG4gICAgcGFyc2UodmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWUgPT09ICcnID8gbnVsbCA6IHZhbHVlO1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSB2YWxpZGF0ZVVybCh2YWxpZGF0aW9uLCB2YWx1ZSwgbGFiZWwpO1xuICAgICAgaWYgKG1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IobWVzc2FnZSk7XG4gICAgICB9XG4gICAgICBhc3NlcnRSZXF1aXJlZCh2YWx1ZSwgdmFsaWRhdGlvbiwgbGFiZWwpO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgc2VyaWFsaXplKHZhbHVlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdmFsdWUgPT09IG51bGwgPyB1bmRlZmluZWQgOiB2YWx1ZVxuICAgICAgfTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBCbG9ja3NGaWVsZElucHV0KHByb3BzKSB7XG4gIGNvbnN0IGxhYmVsSWQgPSB1c2VJZCgpO1xuICBjb25zdCBkZXNjcmlwdGlvbklkID0gdXNlSWQoKTtcbiAgY29uc3Qgc3RyaW5nRm9ybWF0dGVyID0gdXNlTG9jYWxpemVkU3RyaW5nRm9ybWF0dGVyKGwxMG5NZXNzYWdlcyk7XG4gIGNvbnN0IFttb2RhbFN0YXRlLCBzZXRNb2RhbFN0YXRlXSA9IHVzZVN0YXRlKHtcbiAgICBraW5kOiAnY2xvc2VkJ1xuICB9KTtcbiAgY29uc3QgZGlzbWlzcyA9ICgpID0+IHtcbiAgICBzZXRNb2RhbFN0YXRlKHtcbiAgICAgIGtpbmQ6ICdjbG9zZWQnXG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IGZvcm1JZCA9IHVzZUlkKCk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhGbGV4LCB7XG4gICAgZWxlbWVudFR5cGU6IFwic2VjdGlvblwiLFxuICAgIGdhcDogXCJtZWRpdW1cIixcbiAgICByb2xlOiBcImdyb3VwXCIsXG4gICAgXCJhcmlhLWxhYmVsbGVkYnlcIjogbGFiZWxJZCxcbiAgICBcImFyaWEtZGVzY3JpYmVkYnlcIjogcHJvcHMuc2NoZW1hLmRlc2NyaXB0aW9uID8gZGVzY3JpcHRpb25JZCA6IHVuZGVmaW5lZCxcbiAgICBkaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEZpZWxkTGFiZWwsIHtcbiAgICAgIGVsZW1lbnRUeXBlOiBcImgzXCIsXG4gICAgICBpZDogbGFiZWxJZCxcbiAgICAgIGNoaWxkcmVuOiBwcm9wcy5zY2hlbWEubGFiZWxcbiAgICB9KSwgcHJvcHMuc2NoZW1hLmRlc2NyaXB0aW9uICYmIC8qI19fUFVSRV9fKi9qc3goVGV4dCwge1xuICAgICAgaWQ6IGRlc2NyaXB0aW9uSWQsXG4gICAgICBzaXplOiBcInNtYWxsXCIsXG4gICAgICBjb2xvcjogXCJuZXV0cmFsU2Vjb25kYXJ5XCIsXG4gICAgICBjaGlsZHJlbjogcHJvcHMuc2NoZW1hLmRlc2NyaXB0aW9uXG4gICAgfSksIC8qI19fUFVSRV9fKi9qc3hzKE1lbnVUcmlnZ2VyLCB7XG4gICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goQWN0aW9uQnV0dG9uLCB7XG4gICAgICAgIGFsaWduU2VsZjogXCJzdGFydFwiLFxuICAgICAgICBjaGlsZHJlbjogXCJBZGRcIlxuICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goTWVudSwge1xuICAgICAgICBpdGVtczogcHJvcHMuc2NoZW1hLmVsZW1lbnQuZGlzY3JpbWluYW50Lm9wdGlvbnMsXG4gICAgICAgIG9uQWN0aW9uOiBrZXkgPT4ge1xuICAgICAgICAgIGlmICh0eXBlb2Yga2V5ICE9PSAnc3RyaW5nJykgcmV0dXJuO1xuICAgICAgICAgIGNvbnN0IGRpc2NyaW1pbmFudCA9IGtleTtcbiAgICAgICAgICBzZXRNb2RhbFN0YXRlKHtcbiAgICAgICAgICAgIGtpbmQ6ICduZXcnLFxuICAgICAgICAgICAgaW5pdGlhbDoge1xuICAgICAgICAgICAgICBkaXNjcmltaW5hbnQsXG4gICAgICAgICAgICAgIHZhbHVlOiBnZXRJbml0aWFsUHJvcHNWYWx1ZShwcm9wcy5zY2hlbWEuZWxlbWVudC52YWx1ZXNbYCR7ZGlzY3JpbWluYW50fWBdKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBjaGlsZHJlbjogaXRlbSA9PiAvKiNfX1BVUkVfXyovanN4KEl0ZW0kMSwge1xuICAgICAgICAgIGNoaWxkcmVuOiBpdGVtLmxhYmVsXG4gICAgICAgIH0sIGl0ZW0udmFsdWUpXG4gICAgICB9KV1cbiAgICB9KSwgLyojX19QVVJFX18qL2pzeChBcnJheUZpZWxkTGlzdFZpZXcsIHtcbiAgICAgIC4uLnByb3BzLFxuICAgICAgbGFiZWxJZDogbGFiZWxJZCxcbiAgICAgIG9uT3Blbkl0ZW06IGlkeCA9PiB7XG4gICAgICAgIHNldE1vZGFsU3RhdGUoe1xuICAgICAgICAgIGtpbmQ6ICdlZGl0JyxcbiAgICAgICAgICBpZHgsXG4gICAgICAgICAgaW5pdGlhbDogcHJldmlld1Byb3BzVG9WYWx1ZShwcm9wcy5lbGVtZW50c1tpZHhdKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KSwgLyojX19QVVJFX18qL2pzeChBcnJheUZpZWxkVmFsaWRhdGlvbk1lc3NhZ2VzLCB7XG4gICAgICAuLi5wcm9wc1xuICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KERpYWxvZ0NvbnRhaW5lciwge1xuICAgICAgb25EaXNtaXNzOiBkaXNtaXNzLFxuICAgICAgY2hpbGRyZW46IChfcHJvcHMkc2NoZW1hJGVsZW1lbnQgPT4ge1xuICAgICAgICBpZiAobW9kYWxTdGF0ZS5raW5kID09PSAnY2xvc2VkJykge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRpc2NyaW1pbmFudCA9IG1vZGFsU3RhdGUuaW5pdGlhbC5kaXNjcmltaW5hbnQ7XG4gICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhEaWFsb2csIHtcbiAgICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3hzKEhlYWRpbmcsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbbW9kYWxTdGF0ZS5raW5kID09PSAnZWRpdCcgPyAnRWRpdCcgOiAnQWRkJywgJyAnLCAoX3Byb3BzJHNjaGVtYSRlbGVtZW50ID0gcHJvcHMuc2NoZW1hLmVsZW1lbnQuZGlzY3JpbWluYW50Lm9wdGlvbnMuZmluZCh4ID0+IHgudmFsdWUgPT09IGRpc2NyaW1pbmFudCkpID09PSBudWxsIHx8IF9wcm9wcyRzY2hlbWEkZWxlbWVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Byb3BzJHNjaGVtYSRlbGVtZW50LmxhYmVsXVxuICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KENvbnRlbnQsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KEl0ZW1Gb3JtLCB7XG4gICAgICAgICAgICAgIGlkOiBmb3JtSWQsXG4gICAgICAgICAgICAgIHNjaGVtYTogcHJvcHMuc2NoZW1hLmVsZW1lbnQudmFsdWVzW2Rpc2NyaW1pbmFudF0sXG4gICAgICAgICAgICAgIGluaXRpYWxWYWx1ZTogbW9kYWxTdGF0ZS5pbml0aWFsLnZhbHVlLFxuICAgICAgICAgICAgICBvblN1Ym1pdDogdmFsID0+IHtcbiAgICAgICAgICAgICAgICBkaXNtaXNzKCk7XG4gICAgICAgICAgICAgICAgaWYgKG1vZGFsU3RhdGUua2luZCA9PT0gJ25ldycpIHtcbiAgICAgICAgICAgICAgICAgIHByb3BzLm9uQ2hhbmdlKFsuLi5wcm9wcy5lbGVtZW50cy5tYXAoeCA9PiAoe1xuICAgICAgICAgICAgICAgICAgICBrZXk6IHgua2V5XG4gICAgICAgICAgICAgICAgICB9KSksIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVRvVXBkYXRlcih7XG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbCxcbiAgICAgICAgICAgICAgICAgICAgICBkaXNjcmltaW5hbnRcbiAgICAgICAgICAgICAgICAgICAgfSwgcHJvcHMuc2NoZW1hLmVsZW1lbnQpXG4gICAgICAgICAgICAgICAgICB9XSk7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNldFZhbHVlVG9QcmV2aWV3UHJvcHModmFsLCBwcm9wcy5lbGVtZW50c1ttb2RhbFN0YXRlLmlkeF0udmFsdWUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4cyhCdXR0b25Hcm91cCwge1xuICAgICAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEJ1dHRvbiwge1xuICAgICAgICAgICAgICBvblByZXNzOiBkaXNtaXNzLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogc3RyaW5nRm9ybWF0dGVyLmZvcm1hdCgnY2FuY2VsJylcbiAgICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KEJ1dHRvbiwge1xuICAgICAgICAgICAgICBmb3JtOiBmb3JtSWQsXG4gICAgICAgICAgICAgIHByb21pbmVuY2U6IFwiaGlnaFwiLFxuICAgICAgICAgICAgICB0eXBlOiBcInN1Ym1pdFwiLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogXCJEb25lXCJcbiAgICAgICAgICAgIH0pXVxuICAgICAgICAgIH0pXVxuICAgICAgICB9KTtcbiAgICAgIH0pKClcbiAgICB9KV1cbiAgfSk7XG59XG5mdW5jdGlvbiBJdGVtRm9ybShwcm9wcykge1xuICBjb25zdCBbdmFsdWUsIHNldFZhbHVlXSA9IHVzZVN0YXRlKHByb3BzLmluaXRpYWxWYWx1ZSk7XG4gIGNvbnN0IFtmb3JjZVZhbGlkYXRpb24sIHNldEZvcmNlVmFsaWRhdGlvbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHByZXZpZXdQcm9wcyA9IHVzZU1lbW8oKCkgPT4gY3JlYXRlR2V0UHJldmlld1Byb3BzKHByb3BzLnNjaGVtYSwgc2V0VmFsdWUsICgpID0+IHVuZGVmaW5lZCksIFtwcm9wcy5zY2hlbWEsIHNldFZhbHVlXSkodmFsdWUpO1xuICBjb25zdCB7XG4gICAgZGlzbWlzc1xuICB9ID0gdXNlRGlhbG9nQ29udGFpbmVyKCk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KEZsZXgsIHtcbiAgICBpZDogcHJvcHMuaWQsXG4gICAgZWxlbWVudFR5cGU6IFwiZm9ybVwiLFxuICAgIG9uU3VibWl0OiBldmVudCA9PiB7XG4gICAgICBpZiAoZXZlbnQudGFyZ2V0ICE9PSBldmVudC5jdXJyZW50VGFyZ2V0KSByZXR1cm47XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKCFjbGllbnRTaWRlVmFsaWRhdGVQcm9wKHByb3BzLnNjaGVtYSwgdmFsdWUsIHVuZGVmaW5lZCkpIHtcbiAgICAgICAgc2V0Rm9yY2VWYWxpZGF0aW9uKHRydWUpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBwcm9wcy5vblN1Ym1pdCh2YWx1ZSk7XG4gICAgICBkaXNtaXNzKCk7XG4gICAgfSxcbiAgICBkaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgZ2FwOiBcInh4bGFyZ2VcIixcbiAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChGb3JtVmFsdWVDb250ZW50RnJvbVByZXZpZXdQcm9wcywge1xuICAgICAgZm9yY2VWYWxpZGF0aW9uOiBmb3JjZVZhbGlkYXRpb24sXG4gICAgICBhdXRvRm9jdXM6IHRydWUsXG4gICAgICAuLi5wcmV2aWV3UHJvcHNcbiAgICB9KVxuICB9KTtcbn1cblxuZnVuY3Rpb24gYmxvY2tzKGJsb2Nrcywgb3B0cykge1xuICBjb25zdCBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMoYmxvY2tzKTtcbiAgaWYgKCFlbnRyaWVzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBFcnJvcignZmllbGRzLmJsb2NrcyBtdXN0IGhhdmUgYXQgbGVhc3Qgb25lIGVudHJ5Jyk7XG4gIH1cbiAgY29uc3Qgc2VsZWN0JDEgPSBzZWxlY3Qoe1xuICAgIGxhYmVsOiAnS2luZCcsXG4gICAgZGVmYXVsdFZhbHVlOiBlbnRyaWVzWzBdWzBdLFxuICAgIG9wdGlvbnM6IE9iamVjdC5lbnRyaWVzKGJsb2NrcykubWFwKChba2V5LCB7XG4gICAgICBsYWJlbFxuICAgIH1dKSA9PiAoe1xuICAgICAgbGFiZWwsXG4gICAgICB2YWx1ZToga2V5XG4gICAgfSkpXG4gIH0pO1xuICBjb25zdCBlbGVtZW50ID0gY29uZGl0aW9uYWwoc2VsZWN0JDEsIE9iamVjdC5mcm9tRW50cmllcyhlbnRyaWVzLm1hcCgoW2tleSwge1xuICAgIHNjaGVtYVxuICB9XSkgPT4gW2tleSwgc2NoZW1hXSkpKTtcbiAgcmV0dXJuIHtcbiAgICAuLi5hcnJheShlbGVtZW50LCB7XG4gICAgICBsYWJlbDogb3B0cy5sYWJlbCxcbiAgICAgIGRlc2NyaXB0aW9uOiBvcHRzLmRlc2NyaXB0aW9uLFxuICAgICAgdmFsaWRhdGlvbjogb3B0cy52YWxpZGF0aW9uLFxuICAgICAgaXRlbUxhYmVsKHByb3BzKSB7XG4gICAgICAgIGNvbnN0IGtpbmQgPSBwcm9wcy5kaXNjcmltaW5hbnQ7XG4gICAgICAgIGNvbnN0IGJsb2NrID0gYmxvY2tzW2tpbmRdO1xuICAgICAgICBpZiAoIWJsb2NrLml0ZW1MYWJlbCkgcmV0dXJuIGJsb2NrLmxhYmVsO1xuICAgICAgICByZXR1cm4gYmxvY2suaXRlbUxhYmVsKHByb3BzLnZhbHVlKTtcbiAgICAgIH1cbiAgICB9KSxcbiAgICBJbnB1dDogQmxvY2tzRmllbGRJbnB1dFxuICB9O1xufVxuXG5mdW5jdGlvbiBJbWFnZUZpZWxkKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBpbWFnZSxcbiAgICBvbkNoYW5nZVxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IFtzdGF0dXMsIHNldFN0YXR1c10gPSB1c2VTdGF0ZShpbWFnZS5zcmMgPyAnZ29vZCcgOiAnJyk7XG4gIGNvbnN0IGltYWdlTGlicmFyeVVSTCA9IHVzZUltYWdlTGlicmFyeVVSTCgpO1xuICBjb25zdCBvblBhc3RlID0gZXZlbnQgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgdGV4dCA9IGV2ZW50LmNsaXBib2FyZERhdGEuZ2V0RGF0YSgndGV4dC9wbGFpbicpO1xuICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlSW1hZ2VEYXRhKHRleHQpO1xuICAgIHByb3BzLm9uQ2hhbmdlKHBhcnNlZCk7XG4gIH07XG4gIGNvbnN0IG9uTG9hZCA9IHVzZUV2ZW50Q2FsbGJhY2soZGF0YSA9PiB7XG4gICAgb25DaGFuZ2UoZGF0YSk7XG4gICAgc2V0U3RhdHVzKCdnb29kJyk7XG4gIH0pO1xuICBjb25zdCBjb25maWcgPSB1c2VDb25maWcoKTtcbiAgY29uc3QgaGFzU2V0RmllbGRzID0gISEocHJvcHMuaW1hZ2UuYWx0IHx8IHByb3BzLmltYWdlLndpZHRoIHx8IHByb3BzLmltYWdlLmhlaWdodCk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFwcm9wcy5pbWFnZS5zcmMpIHtcbiAgICAgIHNldFN0YXR1cygnJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghaXNWYWxpZFVSTChwcm9wcy5pbWFnZS5zcmMpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChoYXNTZXRGaWVsZHMpIHtcbiAgICAgIHNldFN0YXR1cygnZ29vZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZXRTdGF0dXMoJ2xvYWRpbmcnKTtcbiAgICBsb2FkSW1hZ2VEYXRhKHByb3BzLmltYWdlLnNyYywgY29uZmlnKS50aGVuKG5ld0RhdGEgPT4ge1xuICAgICAgb25Mb2FkKG5ld0RhdGEpO1xuICAgIH0pLmNhdGNoKCgpID0+IHtcbiAgICAgIHNldFN0YXR1cygnZXJyb3InKTtcbiAgICB9KTtcbiAgfSwgW2NvbmZpZywgaGFzU2V0RmllbGRzLCBvbkxvYWQsIHByb3BzLmltYWdlLnNyY10pO1xuICBjb25zdCBbYmx1cnJlZCwgc2V0Qmx1cnJlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IGVycm9yTWVzc2FnZSA9IChibHVycmVkIHx8IHByb3BzLmZvcmNlVmFsaWRhdGlvbikgJiYgcHJvcHMuaXNSZXF1aXJlZCAmJiAhaW1hZ2Uuc3JjID8gJ0ltYWdlIFVSTCBpcyByZXF1aXJlZCcgOiB1bmRlZmluZWQ7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhWU3RhY2ssIHtcbiAgICBnYXA6IFwieGxhcmdlXCIsXG4gICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KFRleHRGaWVsZCwge1xuICAgICAgbGFiZWw6IFwiSW1hZ2UgVVJMXCIsXG4gICAgICBlcnJvck1lc3NhZ2U6IGVycm9yTWVzc2FnZSxcbiAgICAgIGF1dG9Gb2N1czogcHJvcHMuYXV0b0ZvY3VzLFxuICAgICAgb25QYXN0ZTogb25QYXN0ZSxcbiAgICAgIG9uS2V5RG93bjogZSA9PiB7XG4gICAgICAgIGlmIChlLmNvZGUgPT09ICdCYWNrc3BhY2UnIHx8IGUuY29kZSA9PT0gJ0RlbGV0ZScpIHtcbiAgICAgICAgICBwcm9wcy5vbkNoYW5nZShlbXB0eUltYWdlRGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvbkJsdXI6ICgpID0+IHNldEJsdXJyZWQodHJ1ZSksXG4gICAgICB2YWx1ZTogaW1hZ2Uuc3JjLFxuICAgICAgZGVzY3JpcHRpb246IC8qI19fUFVSRV9fKi9qc3hzKFRleHQsIHtcbiAgICAgICAgY2hpbGRyZW46IFtcIkNvcHkgYW4gaW1hZ2UgVVJMIGZyb20gdGhlXCIsICcgJywgLyojX19QVVJFX18qL2pzeChUZXh0TGluaywge1xuICAgICAgICAgIHByb21pbmVuY2U6IFwiaGlnaFwiLFxuICAgICAgICAgIGhyZWY6IGltYWdlTGlicmFyeVVSTCxcbiAgICAgICAgICB0YXJnZXQ6IFwiX2JsYW5rXCIsXG4gICAgICAgICAgcmVsOiBcIm5vcmVmZXJyZXJcIixcbiAgICAgICAgICBjaGlsZHJlbjogXCJJbWFnZSBMaWJyYXJ5XCJcbiAgICAgICAgfSksICcgJywgXCJhbmQgcGFzdGUgaXQgaW50byB0aGlzIGZpZWxkLlwiXVxuICAgICAgfSksXG4gICAgICBlbmRFbGVtZW50OiBzdGF0dXMgPT09ICdsb2FkaW5nJyA/IC8qI19fUFVSRV9fKi9qc3goRmxleCwge1xuICAgICAgICBoZWlnaHQ6IFwiZWxlbWVudC5yZWd1bGFyXCIsXG4gICAgICAgIHdpZHRoOiBcImVsZW1lbnQucmVndWxhclwiLFxuICAgICAgICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLFxuICAgICAgICBqdXN0aWZ5Q29udGVudDogXCJjZW50ZXJcIixcbiAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goUHJvZ3Jlc3NDaXJjbGUsIHtcbiAgICAgICAgICBzaXplOiBcInNtYWxsXCIsXG4gICAgICAgICAgXCJhcmlhLWxhYmVsXCI6IFwiQ2hlY2tpbmdcXHUyMDI2XCIsXG4gICAgICAgICAgaXNJbmRldGVybWluYXRlOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9KSA6IGltYWdlLnNyYyA/IC8qI19fUFVSRV9fKi9qc3goQ2xlYXJCdXR0b24sIHtcbiAgICAgICAgb25QcmVzczogKCkgPT4ge1xuICAgICAgICAgIHByb3BzLm9uQ2hhbmdlKGVtcHR5SW1hZ2VEYXRhKTtcbiAgICAgICAgICBzZXRTdGF0dXMoJycpO1xuICAgICAgICB9LFxuICAgICAgICBwcmV2ZW50Rm9jdXM6IHRydWVcbiAgICAgIH0pIDogbnVsbFxuICAgIH0pLCBzdGF0dXMgPT09ICdnb29kJyA/IC8qI19fUFVSRV9fKi9qc3hzKEZyYWdtZW50LCB7XG4gICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goQm94LCB7XG4gICAgICAgIHdpZHRoOiBcInNjYWxlLjE2MDBcIixcbiAgICAgICAgaGVpZ2h0OiBcInNjYWxlLjE2MDBcIixcbiAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goXCJpbWdcIiwge1xuICAgICAgICAgIGFsdDogaW1hZ2UuYWx0LFxuICAgICAgICAgIHNyYzogaW1hZ2Uuc3JjLFxuICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICBvYmplY3RGaXQ6ICdjb250YWluJyxcbiAgICAgICAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgICAgICAgd2lkdGg6ICcxMDAlJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KFRleHRBcmVhLCB7XG4gICAgICAgIGxhYmVsOiBcIkFsdCB0ZXh0XCIsXG4gICAgICAgIHZhbHVlOiBpbWFnZS5hbHQsXG4gICAgICAgIG9uQ2hhbmdlOiBhbHQgPT4gcHJvcHMub25DaGFuZ2Uoe1xuICAgICAgICAgIC4uLmltYWdlLFxuICAgICAgICAgIGFsdFxuICAgICAgICB9KVxuICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goSW1hZ2VEaW1lbnNpb25zSW5wdXQsIHtcbiAgICAgICAgc3JjOiBpbWFnZS5zcmMsXG4gICAgICAgIGltYWdlOiBpbWFnZSxcbiAgICAgICAgb25DaGFuZ2U6IGRpbWVuc2lvbnMgPT4ge1xuICAgICAgICAgIG9uQ2hhbmdlKHtcbiAgICAgICAgICAgIC4uLnByb3BzLmltYWdlLFxuICAgICAgICAgICAgLi4uZGltZW5zaW9uc1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KV1cbiAgICB9KSA6IG51bGxdXG4gIH0pO1xufVxuZnVuY3Rpb24gQ2xvdWRJbWFnZUZpZWxkSW5wdXQocHJvcHMpIHtcbiAgdmFyIF9wcm9wcyRmaWVsZHMkd2lkdGgkdiwgX3Byb3BzJGZpZWxkcyRoZWlnaHQkO1xuICBjb25zdCBsYWJlbElkID0gdXNlSWQoKTtcbiAgY29uc3QgZGVzY3JpcHRpb25JZCA9IHVzZUlkKCk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhGbGV4LCB7XG4gICAgcm9sZTogXCJncm91cFwiLFxuICAgIGdhcDogXCJtZWRpdW1cIixcbiAgICBtYXJnaW5ZOiBcImxhcmdlXCIsXG4gICAgXCJhcmlhLWxhYmVsbGVkYnlcIjogbGFiZWxJZCxcbiAgICBcImFyaWEtZGVzY3JpYmVkYnlcIjogcHJvcHMuc2NoZW1hLmRlc2NyaXB0aW9uID8gZGVzY3JpcHRpb25JZCA6IHVuZGVmaW5lZCxcbiAgICBkaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgIGNvbG9yOiBcIm5ldXRyYWxcIixcbiAgICAgIHNpemU6IFwibWVkaXVtXCIsXG4gICAgICB3ZWlnaHQ6IFwibWVkaXVtXCIsXG4gICAgICBpZDogbGFiZWxJZCxcbiAgICAgIGNoaWxkcmVuOiBwcm9wcy5zY2hlbWEubGFiZWxcbiAgICB9KSwgISFwcm9wcy5zY2hlbWEuZGVzY3JpcHRpb24gJiYgLyojX19QVVJFX18qL2pzeChUZXh0LCB7XG4gICAgICBpZDogZGVzY3JpcHRpb25JZCxcbiAgICAgIHNpemU6IFwicmVndWxhclwiLFxuICAgICAgY29sb3I6IFwibmV1dHJhbFNlY29uZGFyeVwiLFxuICAgICAgY2hpbGRyZW46IHByb3BzLnNjaGVtYS5kZXNjcmlwdGlvblxuICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KEltYWdlRmllbGQsIHtcbiAgICAgIGltYWdlOiB7XG4gICAgICAgIHNyYzogcHJvcHMuZmllbGRzLnNyYy52YWx1ZSxcbiAgICAgICAgYWx0OiBwcm9wcy5maWVsZHMuYWx0LnZhbHVlLFxuICAgICAgICB3aWR0aDogKF9wcm9wcyRmaWVsZHMkd2lkdGgkdiA9IHByb3BzLmZpZWxkcy53aWR0aC52YWx1ZSkgIT09IG51bGwgJiYgX3Byb3BzJGZpZWxkcyR3aWR0aCR2ICE9PSB2b2lkIDAgPyBfcHJvcHMkZmllbGRzJHdpZHRoJHYgOiB1bmRlZmluZWQsXG4gICAgICAgIGhlaWdodDogKF9wcm9wcyRmaWVsZHMkaGVpZ2h0JCA9IHByb3BzLmZpZWxkcy5oZWlnaHQudmFsdWUpICE9PSBudWxsICYmIF9wcm9wcyRmaWVsZHMkaGVpZ2h0JCAhPT0gdm9pZCAwID8gX3Byb3BzJGZpZWxkcyRoZWlnaHQkIDogdW5kZWZpbmVkXG4gICAgICB9LFxuICAgICAgb25DaGFuZ2U6IGRhdGEgPT4ge1xuICAgICAgICB2YXIgX2RhdGEkd2lkdGgsIF9kYXRhJGhlaWdodDtcbiAgICAgICAgcHJvcHMub25DaGFuZ2Uoe1xuICAgICAgICAgIHNyYzogZGF0YS5zcmMsXG4gICAgICAgICAgYWx0OiBkYXRhLmFsdCxcbiAgICAgICAgICB3aWR0aDogKF9kYXRhJHdpZHRoID0gZGF0YS53aWR0aCkgIT09IG51bGwgJiYgX2RhdGEkd2lkdGggIT09IHZvaWQgMCA/IF9kYXRhJHdpZHRoIDogbnVsbCxcbiAgICAgICAgICBoZWlnaHQ6IChfZGF0YSRoZWlnaHQgPSBkYXRhLmhlaWdodCkgIT09IG51bGwgJiYgX2RhdGEkaGVpZ2h0ICE9PSB2b2lkIDAgPyBfZGF0YSRoZWlnaHQgOiBudWxsXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGF1dG9Gb2N1czogcHJvcHMuYXV0b0ZvY3VzLFxuICAgICAgaXNSZXF1aXJlZDogcHJvcHMuaXNSZXF1aXJlZCxcbiAgICAgIGZvcmNlVmFsaWRhdGlvbjogcHJvcHMuZm9yY2VWYWxpZGF0aW9uXG4gICAgfSldXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBjbG91ZEltYWdlKHtcbiAgbGFiZWwsXG4gIGRlc2NyaXB0aW9uLFxuICB2YWxpZGF0aW9uXG59KSB7XG4gIHJldHVybiB7XG4gICAgLi4ub2JqZWN0KHtcbiAgICAgIHNyYzogdGV4dCh7XG4gICAgICAgIGxhYmVsOiAnVVJMJyxcbiAgICAgICAgdmFsaWRhdGlvbjoge1xuICAgICAgICAgIGxlbmd0aDoge1xuICAgICAgICAgICAgbWluOiB2YWxpZGF0aW9uICE9PSBudWxsICYmIHZhbGlkYXRpb24gIT09IHZvaWQgMCAmJiB2YWxpZGF0aW9uLmlzUmVxdWlyZWQgPyAxIDogMFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgICBhbHQ6IHRleHQoe1xuICAgICAgICBsYWJlbDogJ0FsdCB0ZXh0J1xuICAgICAgfSksXG4gICAgICBoZWlnaHQ6IGludGVnZXIoe1xuICAgICAgICBsYWJlbDogJ0hlaWdodCdcbiAgICAgIH0pLFxuICAgICAgd2lkdGg6IGludGVnZXIoe1xuICAgICAgICBsYWJlbDogJ1dpZHRoJ1xuICAgICAgfSlcbiAgICB9LCB7XG4gICAgICBsYWJlbCxcbiAgICAgIGRlc2NyaXB0aW9uXG4gICAgfSksXG4gICAgSW5wdXQocHJvcHMpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KENsb3VkSW1hZ2VGaWVsZElucHV0LCB7XG4gICAgICAgIC4uLnByb3BzLFxuICAgICAgICBpc1JlcXVpcmVkOiB2YWxpZGF0aW9uID09PSBudWxsIHx8IHZhbGlkYXRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbGlkYXRpb24uaXNSZXF1aXJlZFxuICAgICAgfSk7XG4gICAgfVxuICB9O1xufVxuXG52YXIgaW5kZXggPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgYXJyYXk6IGFycmF5LFxuICBjaGVja2JveDogY2hlY2tib3gsXG4gIGNoaWxkOiBjaGlsZCxcbiAgY29uZGl0aW9uYWw6IGNvbmRpdGlvbmFsLFxuICBkYXRlOiBkYXRlLFxuICBkYXRldGltZTogZGF0ZXRpbWUsXG4gIGRvY3VtZW50OiBkb2N1bWVudCxcbiAgZW1wdHlEb2N1bWVudDogZW1wdHlEb2N1bWVudCxcbiAgZW1wdHk6IGVtcHR5LFxuICBpbWFnZTogaW1hZ2UsXG4gIGZpbGU6IGZpbGUsXG4gIGludGVnZXI6IGludGVnZXIsXG4gIG11bHRpc2VsZWN0OiBtdWx0aXNlbGVjdCxcbiAgb2JqZWN0OiBvYmplY3QsXG4gIHBhdGhSZWZlcmVuY2U6IHBhdGhSZWZlcmVuY2UsXG4gIHJlbGF0aW9uc2hpcDogcmVsYXRpb25zaGlwLFxuICBzZWxlY3Q6IHNlbGVjdCxcbiAgc2x1Zzogc2x1ZyxcbiAgdGV4dDogdGV4dCxcbiAgdXJsOiB1cmwsXG4gIGJsb2NrczogYmxvY2tzLFxuICBjbG91ZEltYWdlOiBjbG91ZEltYWdlXG59KTtcblxuZXhwb3J0IHsgaW5kZXggYXMgZmllbGRzIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/keystatic-core.node.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/required-files-f12cd7f9.node.esm.js":
/*!*******************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/required-files-f12cd7f9.node.esm.js ***!
  \*******************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   l: () => (/* binding */ loadDataFile)\n/* harmony export */ });\n/* harmony import */ var emery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! emery */ \"(ssr)/./node_modules/.pnpm/emery@1.4.3/node_modules/emery/dist/emery.esm.js\");\n/* harmony import */ var js_yaml__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js-yaml */ \"(ssr)/./node_modules/.pnpm/js-yaml@4.1.0/node_modules/js-yaml/dist/js-yaml.mjs\");\n\n\n\nconst textDecoder = new TextDecoder();\nconst textEncoder = new TextEncoder();\nfunction splitFrontmatter(data) {\n  const str = textDecoder.decode(data);\n  const match = str.match(/^---(?:\\r?\\n([^]*?))?\\r?\\n---\\r?\\n?/);\n  if (match) {\n    var _match$;\n    const encoded = textEncoder.encode(match[0]);\n    return {\n      frontmatter: (_match$ = match[1]) !== null && _match$ !== void 0 ? _match$ : '',\n      content: data.slice(encoded.byteLength)\n    };\n  }\n  return null;\n}\nfunction loadDataFile(data, formatInfo) {\n  const parse = formatInfo.data === 'json' ? JSON.parse : js_yaml__WEBPACK_IMPORTED_MODULE_1__.load;\n  if (!formatInfo.contentField) {\n    const dataFile = textDecoder.decode(data);\n    return {\n      loaded: parse(dataFile)\n    };\n  }\n  const res = splitFrontmatter(data);\n  (0,emery__WEBPACK_IMPORTED_MODULE_0__.assert)(res !== null, 'frontmatter not found');\n  return {\n    loaded: parse(res.frontmatter),\n    extraFakeFile: {\n      path: `${formatInfo.contentField.key}${formatInfo.contentField.config.contentExtension}`,\n      contents: res.content\n    }\n  };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGtleXN0YXRpYytjb3JlQDAuMi4xMl9uZXh0QDE0LjIuMl9yZWFjdC1kb21AMTguMi4wX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvcmVxdWlyZWQtZmlsZXMtZjEyY2Q3Zjkubm9kZS5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQStCO0FBQ0E7O0FBRS9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELHlDQUFJO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSw2Q0FBTTtBQUNSO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNEJBQTRCLEVBQUUsZ0RBQWdEO0FBQzdGO0FBQ0E7QUFDQTtBQUNBOztBQUU2QiIsInNvdXJjZXMiOlsid2VicGFjazovL0BrZXlzdGF0aWMvdGVtcGxhdGVzLW5leHRqcy8uL25vZGVfbW9kdWxlcy8ucG5wbS9Aa2V5c3RhdGljK2NvcmVAMC4yLjEyX25leHRAMTQuMi4yX3JlYWN0LWRvbUAxOC4yLjBfcmVhY3RAMTguMi4wL25vZGVfbW9kdWxlcy9Aa2V5c3RhdGljL2NvcmUvZGlzdC9yZXF1aXJlZC1maWxlcy1mMTJjZDdmOS5ub2RlLmVzbS5qcz80NDhlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFzc2VydCB9IGZyb20gJ2VtZXJ5JztcbmltcG9ydCB7IGxvYWQgfSBmcm9tICdqcy15YW1sJztcblxuY29uc3QgdGV4dERlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcbmNvbnN0IHRleHRFbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG5mdW5jdGlvbiBzcGxpdEZyb250bWF0dGVyKGRhdGEpIHtcbiAgY29uc3Qgc3RyID0gdGV4dERlY29kZXIuZGVjb2RlKGRhdGEpO1xuICBjb25zdCBtYXRjaCA9IHN0ci5tYXRjaCgvXi0tLSg/Olxccj9cXG4oW15dKj8pKT9cXHI/XFxuLS0tXFxyP1xcbj8vKTtcbiAgaWYgKG1hdGNoKSB7XG4gICAgdmFyIF9tYXRjaCQ7XG4gICAgY29uc3QgZW5jb2RlZCA9IHRleHRFbmNvZGVyLmVuY29kZShtYXRjaFswXSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGZyb250bWF0dGVyOiAoX21hdGNoJCA9IG1hdGNoWzFdKSAhPT0gbnVsbCAmJiBfbWF0Y2gkICE9PSB2b2lkIDAgPyBfbWF0Y2gkIDogJycsXG4gICAgICBjb250ZW50OiBkYXRhLnNsaWNlKGVuY29kZWQuYnl0ZUxlbmd0aClcbiAgICB9O1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gbG9hZERhdGFGaWxlKGRhdGEsIGZvcm1hdEluZm8pIHtcbiAgY29uc3QgcGFyc2UgPSBmb3JtYXRJbmZvLmRhdGEgPT09ICdqc29uJyA/IEpTT04ucGFyc2UgOiBsb2FkO1xuICBpZiAoIWZvcm1hdEluZm8uY29udGVudEZpZWxkKSB7XG4gICAgY29uc3QgZGF0YUZpbGUgPSB0ZXh0RGVjb2Rlci5kZWNvZGUoZGF0YSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxvYWRlZDogcGFyc2UoZGF0YUZpbGUpXG4gICAgfTtcbiAgfVxuICBjb25zdCByZXMgPSBzcGxpdEZyb250bWF0dGVyKGRhdGEpO1xuICBhc3NlcnQocmVzICE9PSBudWxsLCAnZnJvbnRtYXR0ZXIgbm90IGZvdW5kJyk7XG4gIHJldHVybiB7XG4gICAgbG9hZGVkOiBwYXJzZShyZXMuZnJvbnRtYXR0ZXIpLFxuICAgIGV4dHJhRmFrZUZpbGU6IHtcbiAgICAgIHBhdGg6IGAke2Zvcm1hdEluZm8uY29udGVudEZpZWxkLmtleX0ke2Zvcm1hdEluZm8uY29udGVudEZpZWxkLmNvbmZpZy5jb250ZW50RXh0ZW5zaW9ufWAsXG4gICAgICBjb250ZW50czogcmVzLmNvbnRlbnRcbiAgICB9XG4gIH07XG59XG5cbmV4cG9ydCB7IGxvYWREYXRhRmlsZSBhcyBsIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/required-files-f12cd7f9.node.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/useSlugsInCollection-b967166d.node.esm.js":
/*!*************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/useSlugsInCollection-b967166d.node.esm.js ***!
  \*************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   u: () => (/* binding */ useSlugsInCollection)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-fbab32f7.node.esm.js */ \"(ssr)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/index-fbab32f7.node.esm.js\");\n\n\n\nfunction useSlugsInCollection(collection) {\n  const config = (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_1__.S)();\n  const tree = (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_1__.b)().current;\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    const loadedTree = tree.kind === 'loaded' ? tree.data.tree : new Map();\n    return (0,_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_1__.d)(config, collection, loadedTree).map(x => x.slug);\n  }, [config, tree, collection]);\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGtleXN0YXRpYytjb3JlQDAuMi4xMl9uZXh0QDE0LjIuMl9yZWFjdC1kb21AMTguMi4wX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvdXNlU2x1Z3NJbkNvbGxlY3Rpb24tYjk2NzE2NmQubm9kZS5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFnQztBQUNvRjs7QUFFcEg7QUFDQSxpQkFBaUIsOERBQVM7QUFDMUIsZUFBZSw4REFBTztBQUN0QixTQUFTLDhDQUFPO0FBQ2hCO0FBQ0EsV0FBVyw4REFBaUM7QUFDNUMsR0FBRztBQUNIOztBQUVxQyIsInNvdXJjZXMiOlsid2VicGFjazovL0BrZXlzdGF0aWMvdGVtcGxhdGVzLW5leHRqcy8uL25vZGVfbW9kdWxlcy8ucG5wbS9Aa2V5c3RhdGljK2NvcmVAMC4yLjEyX25leHRAMTQuMi4yX3JlYWN0LWRvbUAxOC4yLjBfcmVhY3RAMTguMi4wL25vZGVfbW9kdWxlcy9Aa2V5c3RhdGljL2NvcmUvZGlzdC91c2VTbHVnc0luQ29sbGVjdGlvbi1iOTY3MTY2ZC5ub2RlLmVzbS5qcz84ZWIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTIGFzIHVzZUNvbmZpZywgYiBhcyB1c2VUcmVlLCBkIGFzIGdldEVudHJpZXNJbkNvbGxlY3Rpb25XaXRoVHJlZUtleSB9IGZyb20gJy4vaW5kZXgtZmJhYjMyZjcubm9kZS5lc20uanMnO1xuXG5mdW5jdGlvbiB1c2VTbHVnc0luQ29sbGVjdGlvbihjb2xsZWN0aW9uKSB7XG4gIGNvbnN0IGNvbmZpZyA9IHVzZUNvbmZpZygpO1xuICBjb25zdCB0cmVlID0gdXNlVHJlZSgpLmN1cnJlbnQ7XG4gIHJldHVybiB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBsb2FkZWRUcmVlID0gdHJlZS5raW5kID09PSAnbG9hZGVkJyA/IHRyZWUuZGF0YS50cmVlIDogbmV3IE1hcCgpO1xuICAgIHJldHVybiBnZXRFbnRyaWVzSW5Db2xsZWN0aW9uV2l0aFRyZWVLZXkoY29uZmlnLCBjb2xsZWN0aW9uLCBsb2FkZWRUcmVlKS5tYXAoeCA9PiB4LnNsdWcpO1xuICB9LCBbY29uZmlnLCB0cmVlLCBjb2xsZWN0aW9uXSk7XG59XG5cbmV4cG9ydCB7IHVzZVNsdWdzSW5Db2xsZWN0aW9uIGFzIHUgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/useSlugsInCollection-b967166d.node.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/ui/dist/keystatic-core-ui.node.esm.js":
/*!****************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/ui/dist/keystatic-core-ui.node.esm.js ***!
  \****************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Keystatic: () => (/* binding */ Keystatic)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _keystar_ui_button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @keystar/ui/button */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/button/dist/keystar-ui-button.esm.js\");\n/* harmony import */ var _keystar_ui_icon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @keystar/ui/icon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/dist/keystar-ui-icon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_fileX2Icon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @keystar/ui/icon/icons/fileX2Icon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/fileX2Icon/dist/keystar-ui-icon-icons-fileX2Icon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_githubIcon__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @keystar/ui/icon/icons/githubIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/githubIcon/dist/keystar-ui-icon-icons-githubIcon.esm.js\");\n/* harmony import */ var _keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @keystar/ui/layout */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/layout/dist/keystar-ui-layout.esm.js\");\n/* harmony import */ var _keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @keystar/ui/typography */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/typography/dist/keystar-ui-typography.esm.js\");\n/* harmony import */ var _react_aria_i18n__WEBPACK_IMPORTED_MODULE_114__ = __webpack_require__(/*! @react-aria/i18n */ \"(ssr)/./node_modules/.pnpm/@react-aria+i18n@3.10.2_react@18.2.0/node_modules/@react-aria/i18n/dist/real-module.mjs\");\n/* harmony import */ var is_hotkey__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! is-hotkey */ \"(ssr)/./node_modules/.pnpm/is-hotkey@0.2.0/node_modules/is-hotkey/lib/index.js\");\n/* harmony import */ var _keystar_ui_icon_icons_alertCircleIcon__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @keystar/ui/icon/icons/alertCircleIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/alertCircleIcon/dist/keystar-ui-icon-icons-alertCircleIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_listXIcon__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @keystar/ui/icon/icons/listXIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/listXIcon/dist/keystar-ui-icon-icons-listXIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_searchIcon__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @keystar/ui/icon/icons/searchIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/searchIcon/dist/keystar-ui-icon-icons-searchIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_searchXIcon__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @keystar/ui/icon/icons/searchXIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/searchXIcon/dist/keystar-ui-icon-icons-searchXIcon.esm.js\");\n/* harmony import */ var _keystar_ui_link__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @keystar/ui/link */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/link/dist/keystar-ui-link.esm.js\");\n/* harmony import */ var _keystar_ui_progress__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @keystar/ui/progress */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/progress/dist/keystar-ui-progress.esm.js\");\n/* harmony import */ var _keystar_ui_search_field__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @keystar/ui/search-field */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/search-field/dist/keystar-ui-search-field.esm.js\");\n/* harmony import */ var _keystar_ui_status_light__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @keystar/ui/status-light */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/status-light/dist/keystar-ui-status-light.esm.js\");\n/* harmony import */ var _keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @keystar/ui/style */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/style/dist/keystar-ui-style.esm.js\");\n/* harmony import */ var _keystar_ui_table__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @keystar/ui/table */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/table/dist/keystar-ui-table.esm.js\");\n/* harmony import */ var emery__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! emery */ \"(ssr)/./node_modules/.pnpm/emery@1.4.3/node_modules/emery/dist/emery.esm.js\");\n/* harmony import */ var _dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../dist/index-fbab32f7.node.esm.js */ \"(ssr)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/index-fbab32f7.node.esm.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/.pnpm/next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__);\n/* harmony import */ var _keystar_ui_breadcrumbs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @keystar/ui/breadcrumbs */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/breadcrumbs/dist/keystar-ui-breadcrumbs.esm.js\");\n/* harmony import */ var _keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @keystar/ui/dialog */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/dialog/dist/keystar-ui-dialog.esm.js\");\n/* harmony import */ var _keystar_ui_notice__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @keystar/ui/notice */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/notice/dist/keystar-ui-notice.esm.js\");\n/* harmony import */ var _keystar_ui_toast__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @keystar/ui/toast */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/toast/dist/keystar-ui-toast.esm.js\");\n/* harmony import */ var _keystar_ui_checkbox__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @keystar/ui/checkbox */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/checkbox/dist/keystar-ui-checkbox.esm.js\");\n/* harmony import */ var _keystar_ui_text_field__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @keystar/ui/text-field */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/text-field/dist/keystar-ui-text-field.esm.js\");\n/* harmony import */ var _keystar_ui_field__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @keystar/ui/field */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/field/dist/keystar-ui-field.esm.js\");\n/* harmony import */ var _keystar_ui_number_field__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @keystar/ui/number-field */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/number-field/dist/keystar-ui-number-field.esm.js\");\n/* harmony import */ var _keystar_ui_combobox__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @keystar/ui/combobox */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/combobox/dist/keystar-ui-combobox.esm.js\");\n/* harmony import */ var minimatch__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! minimatch */ \"(ssr)/./node_modules/.pnpm/minimatch@7.4.6/node_modules/minimatch/dist/mjs/index.js\");\n/* harmony import */ var _keystar_ui_picker__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @keystar/ui/picker */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/picker/dist/keystar-ui-picker.esm.js\");\n/* harmony import */ var _sindresorhus_slugify__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! @sindresorhus/slugify */ \"(ssr)/./node_modules/.pnpm/@sindresorhus+slugify@1.1.2/node_modules/@sindresorhus/slugify/index.js\");\n/* harmony import */ var _sindresorhus_slugify__WEBPACK_IMPORTED_MODULE_32___default = /*#__PURE__*/__webpack_require__.n(_sindresorhus_slugify__WEBPACK_IMPORTED_MODULE_32__);\n/* harmony import */ var _braintree_sanitize_url__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! @braintree/sanitize-url */ \"(ssr)/./node_modules/.pnpm/@braintree+sanitize-url@6.0.4/node_modules/@braintree/sanitize-url/dist/index.js\");\n/* harmony import */ var _keystar_ui_slots__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! @keystar/ui/slots */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/slots/dist/keystar-ui-slots.esm.js\");\n/* harmony import */ var _keystar_ui_drag_and_drop__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! @keystar/ui/drag-and-drop */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/drag-and-drop/dist/keystar-ui-drag-and-drop.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_trash2Icon__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! @keystar/ui/icon/icons/trash2Icon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/trash2Icon/dist/keystar-ui-icon-icons-trash2Icon.esm.js\");\n/* harmony import */ var _keystar_ui_list_view__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! @keystar/ui/list-view */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/list-view/dist/keystar-ui-list-view.esm.js\");\n/* harmony import */ var _keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! @keystar/ui/tooltip */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/tooltip/dist/keystar-ui-tooltip.esm.js\");\n/* harmony import */ var _keystar_ui_menu__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! @keystar/ui/menu */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/menu/dist/keystar-ui-menu.esm.js\");\n/* harmony import */ var _keystar_ui_action_group__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! @keystar/ui/action-group */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/action-group/dist/keystar-ui-action-group.esm.js\");\n/* harmony import */ var _keystar_ui_badge__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! @keystar/ui/badge */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/badge/dist/keystar-ui-badge.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_copyPlusIcon__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! @keystar/ui/icon/icons/copyPlusIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/copyPlusIcon/dist/keystar-ui-icon-icons-copyPlusIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_externalLinkIcon__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! @keystar/ui/icon/icons/externalLinkIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/externalLinkIcon/dist/keystar-ui-icon-icons-externalLinkIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_historyIcon__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! @keystar/ui/icon/icons/historyIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/historyIcon/dist/keystar-ui-icon-icons-historyIcon.esm.js\");\n/* harmony import */ var urql__WEBPACK_IMPORTED_MODULE_115__ = __webpack_require__(/*! urql */ \"(ssr)/./node_modules/.pnpm/urql@4.0.7_graphql@16.8.1_react@18.2.0/node_modules/urql/dist/urql.es.js\");\n/* harmony import */ var urql__WEBPACK_IMPORTED_MODULE_117__ = __webpack_require__(/*! urql */ \"(ssr)/./node_modules/.pnpm/@urql+core@5.0.1_graphql@16.8.1/node_modules/@urql/core/dist/urql-core.mjs\");\n/* harmony import */ var _ts_gql_tag_no_transform__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! @ts-gql/tag/no-transform */ \"(ssr)/./node_modules/.pnpm/@ts-gql+tag@0.7.3_graphql@16.8.1/node_modules/@ts-gql/tag/no-transform/dist/tag.esm.js\");\n/* harmony import */ var _keystar_ui_split_view__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! @keystar/ui/split-view */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/split-view/dist/keystar-ui-split-view.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_panelLeftOpenIcon__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! @keystar/ui/icon/icons/panelLeftOpenIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/panelLeftOpenIcon/dist/keystar-ui-icon-icons-panelLeftOpenIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_panelLeftCloseIcon__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! @keystar/ui/icon/icons/panelLeftCloseIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/panelLeftCloseIcon/dist/keystar-ui-icon-icons-panelLeftCloseIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_panelRightOpenIcon__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! @keystar/ui/icon/icons/panelRightOpenIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/panelRightOpenIcon/dist/keystar-ui-icon-icons-panelRightOpenIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_panelRightCloseIcon__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! @keystar/ui/icon/icons/panelRightCloseIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/panelRightCloseIcon/dist/keystar-ui-icon-icons-panelRightCloseIcon.esm.js\");\n/* harmony import */ var js_yaml__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! js-yaml */ \"(ssr)/./node_modules/.pnpm/js-yaml@4.1.0/node_modules/js-yaml/dist/js-yaml.mjs\");\n/* harmony import */ var js_base64__WEBPACK_IMPORTED_MODULE_121__ = __webpack_require__(/*! js-base64 */ \"(ssr)/./node_modules/.pnpm/js-base64@3.7.7/node_modules/js-base64/base64.mjs\");\n/* harmony import */ var lru_cache__WEBPACK_IMPORTED_MODULE_116__ = __webpack_require__(/*! lru-cache */ \"(ssr)/./node_modules/.pnpm/lru-cache@7.18.3/node_modules/lru-cache/index.mjs\");\n/* harmony import */ var _dist_required_files_f12cd7f9_node_esm_js__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ../../dist/required-files-f12cd7f9.node.esm.js */ \"(ssr)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/required-files-f12cd7f9.node.esm.js\");\n/* harmony import */ var _keystar_ui_core__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! @keystar/ui/core */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/core/dist/keystar-ui-core.esm.js\");\n/* harmony import */ var _urql_exchange_graphcache__WEBPACK_IMPORTED_MODULE_119__ = __webpack_require__(/*! @urql/exchange-graphcache */ \"(ssr)/./node_modules/.pnpm/@urql+exchange-graphcache@6.5.1_graphql@16.8.1/node_modules/@urql/exchange-graphcache/dist/urql-exchange-graphcache.mjs\");\n/* harmony import */ var _urql_exchange_auth__WEBPACK_IMPORTED_MODULE_118__ = __webpack_require__(/*! @urql/exchange-auth */ \"(ssr)/./node_modules/.pnpm/@urql+exchange-auth@2.1.6_graphql@16.8.1/node_modules/@urql/exchange-auth/dist/urql-exchange-auth.mjs\");\n/* harmony import */ var _urql_exchange_persisted__WEBPACK_IMPORTED_MODULE_120__ = __webpack_require__(/*! @urql/exchange-persisted */ \"(ssr)/./node_modules/.pnpm/@urql+exchange-persisted@4.2.0_graphql@16.8.1/node_modules/@urql/exchange-persisted/dist/urql-exchange-persisted.mjs\");\n/* harmony import */ var fast_deep_equal__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! fast-deep-equal */ \"(ssr)/./node_modules/.pnpm/fast-deep-equal@3.1.3/node_modules/fast-deep-equal/index.js\");\n/* harmony import */ var fast_deep_equal__WEBPACK_IMPORTED_MODULE_54___default = /*#__PURE__*/__webpack_require__.n(fast_deep_equal__WEBPACK_IMPORTED_MODULE_54__);\n/* harmony import */ var _dist_useSlugsInCollection_b967166d_node_esm_js__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! ../../dist/useSlugsInCollection-b967166d.node.esm.js */ \"(ssr)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/useSlugsInCollection-b967166d.node.esm.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_123__ = __webpack_require__(/*! zod */ \"(ssr)/./node_modules/.pnpm/zod@3.22.5/node_modules/zod/lib/index.mjs\");\n/* harmony import */ var idb_keyval__WEBPACK_IMPORTED_MODULE_122__ = __webpack_require__(/*! idb-keyval */ \"(ssr)/./node_modules/.pnpm/idb-keyval@6.2.1/node_modules/idb-keyval/dist/index.js\");\n/* harmony import */ var _keystar_ui_avatar__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! @keystar/ui/avatar */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/avatar/dist/keystar-ui-avatar.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_gitBranchIcon__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! @keystar/ui/icon/icons/gitBranchIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/gitBranchIcon/dist/keystar-ui-icon-icons-gitBranchIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_gitBranchPlusIcon__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! @keystar/ui/icon/icons/gitBranchPlusIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/gitBranchPlusIcon/dist/keystar-ui-icon-icons-gitBranchPlusIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_gitPullRequestIcon__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! @keystar/ui/icon/icons/gitPullRequestIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/gitPullRequestIcon/dist/keystar-ui-icon-icons-gitPullRequestIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_plusIcon__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! @keystar/ui/icon/icons/plusIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/plusIcon/dist/keystar-ui-icon-icons-plusIcon.esm.js\");\n/* harmony import */ var emery_assertions__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! emery/assertions */ \"(ssr)/./node_modules/.pnpm/emery@1.4.3/node_modules/emery/assertions/dist/emery-assertions.esm.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_62___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_62__);\n/* harmony import */ var _keystar_ui_icon_icons_editIcon__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(/*! @keystar/ui/icon/icons/editIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/editIcon/dist/keystar-ui-icon-icons-editIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_linkIcon__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(/*! @keystar/ui/icon/icons/linkIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/linkIcon/dist/keystar-ui-icon-icons-linkIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_unlinkIcon__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(/*! @keystar/ui/icon/icons/unlinkIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/unlinkIcon/dist/keystar-ui-icon-icons-unlinkIcon.esm.js\");\n/* harmony import */ var _keystar_ui_overlays__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(/*! @keystar/ui/overlays */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/overlays/dist/keystar-ui-overlays.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_boldIcon__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(/*! @keystar/ui/icon/icons/boldIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/boldIcon/dist/keystar-ui-icon-icons-boldIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_chevronDownIcon__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(/*! @keystar/ui/icon/icons/chevronDownIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/chevronDownIcon/dist/keystar-ui-icon-icons-chevronDownIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_codeIcon__WEBPACK_IMPORTED_MODULE_69__ = __webpack_require__(/*! @keystar/ui/icon/icons/codeIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/codeIcon/dist/keystar-ui-icon-icons-codeIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_italicIcon__WEBPACK_IMPORTED_MODULE_70__ = __webpack_require__(/*! @keystar/ui/icon/icons/italicIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/italicIcon/dist/keystar-ui-icon-icons-italicIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_maximizeIcon__WEBPACK_IMPORTED_MODULE_71__ = __webpack_require__(/*! @keystar/ui/icon/icons/maximizeIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/maximizeIcon/dist/keystar-ui-icon-icons-maximizeIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_minimizeIcon__WEBPACK_IMPORTED_MODULE_72__ = __webpack_require__(/*! @keystar/ui/icon/icons/minimizeIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/minimizeIcon/dist/keystar-ui-icon-icons-minimizeIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_removeFormattingIcon__WEBPACK_IMPORTED_MODULE_73__ = __webpack_require__(/*! @keystar/ui/icon/icons/removeFormattingIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/removeFormattingIcon/dist/keystar-ui-icon-icons-removeFormattingIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_strikethroughIcon__WEBPACK_IMPORTED_MODULE_74__ = __webpack_require__(/*! @keystar/ui/icon/icons/strikethroughIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/strikethroughIcon/dist/keystar-ui-icon-icons-strikethroughIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_subscriptIcon__WEBPACK_IMPORTED_MODULE_75__ = __webpack_require__(/*! @keystar/ui/icon/icons/subscriptIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/subscriptIcon/dist/keystar-ui-icon-icons-subscriptIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_superscriptIcon__WEBPACK_IMPORTED_MODULE_76__ = __webpack_require__(/*! @keystar/ui/icon/icons/superscriptIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/superscriptIcon/dist/keystar-ui-icon-icons-superscriptIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_typeIcon__WEBPACK_IMPORTED_MODULE_77__ = __webpack_require__(/*! @keystar/ui/icon/icons/typeIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/typeIcon/dist/keystar-ui-icon-icons-typeIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_underlineIcon__WEBPACK_IMPORTED_MODULE_78__ = __webpack_require__(/*! @keystar/ui/icon/icons/underlineIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/underlineIcon/dist/keystar-ui-icon-icons-underlineIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_alignLeftIcon__WEBPACK_IMPORTED_MODULE_79__ = __webpack_require__(/*! @keystar/ui/icon/icons/alignLeftIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/alignLeftIcon/dist/keystar-ui-icon-icons-alignLeftIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_alignRightIcon__WEBPACK_IMPORTED_MODULE_80__ = __webpack_require__(/*! @keystar/ui/icon/icons/alignRightIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/alignRightIcon/dist/keystar-ui-icon-icons-alignRightIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_alignCenterIcon__WEBPACK_IMPORTED_MODULE_81__ = __webpack_require__(/*! @keystar/ui/icon/icons/alignCenterIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/alignCenterIcon/dist/keystar-ui-icon-icons-alignCenterIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_quoteIcon__WEBPACK_IMPORTED_MODULE_82__ = __webpack_require__(/*! @keystar/ui/icon/icons/quoteIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/quoteIcon/dist/keystar-ui-icon-icons-quoteIcon.esm.js\");\n/* harmony import */ var match_sorter__WEBPACK_IMPORTED_MODULE_83__ = __webpack_require__(/*! match-sorter */ \"(ssr)/./node_modules/.pnpm/match-sorter@6.3.4/node_modules/match-sorter/dist/match-sorter.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_trashIcon__WEBPACK_IMPORTED_MODULE_84__ = __webpack_require__(/*! @keystar/ui/icon/icons/trashIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/trashIcon/dist/keystar-ui-icon-icons-trashIcon.esm.js\");\n/* harmony import */ var _emotion_weak_memoize__WEBPACK_IMPORTED_MODULE_85__ = __webpack_require__(/*! @emotion/weak-memoize */ \"(ssr)/./node_modules/.pnpm/@emotion+weak-memoize@0.3.1/node_modules/@emotion/weak-memoize/dist/emotion-weak-memoize.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_minusIcon__WEBPACK_IMPORTED_MODULE_86__ = __webpack_require__(/*! @keystar/ui/icon/icons/minusIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/minusIcon/dist/keystar-ui-icon-icons-minusIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_columnsIcon__WEBPACK_IMPORTED_MODULE_87__ = __webpack_require__(/*! @keystar/ui/icon/icons/columnsIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/columnsIcon/dist/keystar-ui-icon-icons-columnsIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_listIcon__WEBPACK_IMPORTED_MODULE_88__ = __webpack_require__(/*! @keystar/ui/icon/icons/listIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/listIcon/dist/keystar-ui-icon-icons-listIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_listOrderedIcon__WEBPACK_IMPORTED_MODULE_89__ = __webpack_require__(/*! @keystar/ui/icon/icons/listOrderedIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/listOrderedIcon/dist/keystar-ui-icon-icons-listOrderedIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_fileUpIcon__WEBPACK_IMPORTED_MODULE_90__ = __webpack_require__(/*! @keystar/ui/icon/icons/fileUpIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/fileUpIcon/dist/keystar-ui-icon-icons-fileUpIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_imageIcon__WEBPACK_IMPORTED_MODULE_91__ = __webpack_require__(/*! @keystar/ui/icon/icons/imageIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/imageIcon/dist/keystar-ui-icon-icons-imageIcon.esm.js\");\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_92__ = __webpack_require__(/*! cookie */ \"(ssr)/./node_modules/.pnpm/cookie@0.5.0/node_modules/cookie/index.js\");\n/* harmony import */ var _keystar_ui_icon_icons_link2Icon__WEBPACK_IMPORTED_MODULE_93__ = __webpack_require__(/*! @keystar/ui/icon/icons/link2Icon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/link2Icon/dist/keystar-ui-icon-icons-link2Icon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_link2OffIcon__WEBPACK_IMPORTED_MODULE_94__ = __webpack_require__(/*! @keystar/ui/icon/icons/link2OffIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/link2OffIcon/dist/keystar-ui-icon-icons-link2OffIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_pencilIcon__WEBPACK_IMPORTED_MODULE_95__ = __webpack_require__(/*! @keystar/ui/icon/icons/pencilIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/pencilIcon/dist/keystar-ui-icon-icons-pencilIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_undo2Icon__WEBPACK_IMPORTED_MODULE_96__ = __webpack_require__(/*! @keystar/ui/icon/icons/undo2Icon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/undo2Icon/dist/keystar-ui-icon-icons-undo2Icon.esm.js\");\n/* harmony import */ var _keystar_ui_utils__WEBPACK_IMPORTED_MODULE_97__ = __webpack_require__(/*! @keystar/ui/utils */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/utils/dist/keystar-ui-utils.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_sheetIcon__WEBPACK_IMPORTED_MODULE_98__ = __webpack_require__(/*! @keystar/ui/icon/icons/sheetIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/sheetIcon/dist/keystar-ui-icon-icons-sheetIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_tableIcon__WEBPACK_IMPORTED_MODULE_99__ = __webpack_require__(/*! @keystar/ui/icon/icons/tableIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/tableIcon/dist/keystar-ui-icon-icons-tableIcon.esm.js\");\n/* harmony import */ var _keystar_ui_listbox__WEBPACK_IMPORTED_MODULE_100__ = __webpack_require__(/*! @keystar/ui/listbox */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/listbox/dist/keystar-ui-listbox.esm.js\");\n/* harmony import */ var mdast_util_from_markdown__WEBPACK_IMPORTED_MODULE_101__ = __webpack_require__(/*! mdast-util-from-markdown */ \"(ssr)/./node_modules/.pnpm/mdast-util-from-markdown@0.8.5/node_modules/mdast-util-from-markdown/index.js\");\n/* harmony import */ var mdast_util_from_markdown__WEBPACK_IMPORTED_MODULE_101___default = /*#__PURE__*/__webpack_require__.n(mdast_util_from_markdown__WEBPACK_IMPORTED_MODULE_101__);\n/* harmony import */ var mdast_util_gfm_autolink_literal_from_markdown__WEBPACK_IMPORTED_MODULE_102__ = __webpack_require__(/*! mdast-util-gfm-autolink-literal/from-markdown */ \"(ssr)/./node_modules/.pnpm/mdast-util-gfm-autolink-literal@0.1.3/node_modules/mdast-util-gfm-autolink-literal/from-markdown.js\");\n/* harmony import */ var micromark_extension_gfm_autolink_literal__WEBPACK_IMPORTED_MODULE_103__ = __webpack_require__(/*! micromark-extension-gfm-autolink-literal */ \"(ssr)/./node_modules/.pnpm/micromark-extension-gfm-autolink-literal@0.5.7/node_modules/micromark-extension-gfm-autolink-literal/index.js\");\n/* harmony import */ var mdast_util_gfm_strikethrough_from_markdown__WEBPACK_IMPORTED_MODULE_104__ = __webpack_require__(/*! mdast-util-gfm-strikethrough/from-markdown */ \"(ssr)/./node_modules/.pnpm/mdast-util-gfm-strikethrough@0.2.3/node_modules/mdast-util-gfm-strikethrough/from-markdown.js\");\n/* harmony import */ var micromark_extension_gfm_strikethrough__WEBPACK_IMPORTED_MODULE_105__ = __webpack_require__(/*! micromark-extension-gfm-strikethrough */ \"(ssr)/./node_modules/.pnpm/micromark-extension-gfm-strikethrough@0.6.5/node_modules/micromark-extension-gfm-strikethrough/index.js\");\n/* harmony import */ var micromark_extension_gfm_strikethrough__WEBPACK_IMPORTED_MODULE_105___default = /*#__PURE__*/__webpack_require__.n(micromark_extension_gfm_strikethrough__WEBPACK_IMPORTED_MODULE_105__);\n/* harmony import */ var _keystar_ui_nav_list__WEBPACK_IMPORTED_MODULE_106__ = __webpack_require__(/*! @keystar/ui/nav-list */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/nav-list/dist/keystar-ui-nav-list.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_logOutIcon__WEBPACK_IMPORTED_MODULE_107__ = __webpack_require__(/*! @keystar/ui/icon/icons/logOutIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/logOutIcon/dist/keystar-ui-icon-icons-logOutIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_gitForkIcon__WEBPACK_IMPORTED_MODULE_108__ = __webpack_require__(/*! @keystar/ui/icon/icons/gitForkIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/gitForkIcon/dist/keystar-ui-icon-icons-gitForkIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_monitorIcon__WEBPACK_IMPORTED_MODULE_109__ = __webpack_require__(/*! @keystar/ui/icon/icons/monitorIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/monitorIcon/dist/keystar-ui-icon-icons-monitorIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_moonIcon__WEBPACK_IMPORTED_MODULE_110__ = __webpack_require__(/*! @keystar/ui/icon/icons/moonIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/moonIcon/dist/keystar-ui-icon-icons-moonIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_sunIcon__WEBPACK_IMPORTED_MODULE_111__ = __webpack_require__(/*! @keystar/ui/icon/icons/sunIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/sunIcon/dist/keystar-ui-icon-icons-sunIcon.esm.js\");\n/* harmony import */ var _keystar_ui_icon_icons_userIcon__WEBPACK_IMPORTED_MODULE_112__ = __webpack_require__(/*! @keystar/ui/icon/icons/userIcon */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/icon/icons/userIcon/dist/keystar-ui-icon-icons-userIcon.esm.js\");\n/* harmony import */ var _keystar_ui_radio__WEBPACK_IMPORTED_MODULE_113__ = __webpack_require__(/*! @keystar/ui/radio */ \"(ssr)/./node_modules/.pnpm/@keystar+ui@0.4.9_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystar/ui/radio/dist/keystar-ui-radio.esm.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// the collator enables language-sensitive string comparison\nconst collator = new Intl.Collator(undefined, {\n  sensitivity: 'base'\n});\n\n/**\n * Creates a comparison function that should be provided to the `sort()` method\n * of your data array.\n */\nfunction sortByDescriptor(sortDescriptor) {\n  const key = sortDescriptor.column;\n  (0,emery__WEBPACK_IMPORTED_MODULE_18__.assert)(key != null, '`sortDescriptor.column` is required');\n  return (a, b) => {\n    const valueA = a[key];\n    const valueB = b[key];\n    const modifier = sortDescriptor.direction === 'ascending' ? 1 : -1;\n\n    // always push `null` and `undefined` to the bottom\n    if (valueA == null) return 1;\n    if (valueB == null) return -1;\n\n    // the collator is only appropriate for strings, it fails in subtle\n    // ways for floats, dates, etc.\n    if (typeof valueA === 'string' && typeof valueB === 'string') {\n      return collator.compare(valueA, valueB) * modifier;\n    }\n    return compare(valueA, valueB) * modifier;\n  };\n}\n\n/** Default comparison for non-string values */\nfunction compare(a, b) {\n  if (a < b) return -1;\n  if (a > b) return 1;\n  return 0;\n}\n\nfunction EmptyState(props) {\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n    alignItems: \"center\",\n    direction: \"column\",\n    gap: \"large\",\n    justifyContent: \"center\",\n    minHeight: \"scale.3000\",\n    paddingX: {\n      mobile: 'medium',\n      tablet: 'xlarge',\n      desktop: 'xxlarge'\n    },\n    children: 'children' in props ? props.children : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.Fragment, {\n      children: [props.icon && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_2__.Icon, {\n        src: props.icon,\n        size: \"large\",\n        color: \"neutralEmphasis\"\n      }), props.title && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Heading, {\n        align: \"center\",\n        size: \"medium\",\n        children: props.title\n      }), props.message && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n        align: \"center\",\n        children: props.message\n      }), props.actions]\n    })\n  });\n}\n\nclass NotFoundError extends Error {\n  constructor() {\n    super('Not found');\n    this.name = 'NotFoundError';\n  }\n}\nfunction isNotFoundError(err) {\n  return typeof err === 'object' && err !== null && err instanceof NotFoundError;\n}\nfunction notFound() {\n  throw new NotFoundError();\n}\nclass NotFoundErrorBoundaryInner extends (react__WEBPACK_IMPORTED_MODULE_0___default().Component) {\n  constructor(props) {\n    super(props);\n    this.state = {\n      notFound: false,\n      lastHref: props.href\n    };\n  }\n  static getDerivedStateFromError(err) {\n    if (isNotFoundError(err)) {\n      return {\n        notFound: true\n      };\n    }\n    throw err;\n  }\n  static getDerivedStateFromProps(props, state) {\n    if (props.href !== state.lastHref && state.notFound) {\n      return {\n        notFound: false,\n        lastHref: props.href\n      };\n    }\n    return {\n      notFound: state.notFound,\n      lastHref: props.href\n    };\n  }\n  render() {\n    if (this.state.notFound) return this.props.fallback;\n    return this.props.children;\n  }\n}\nfunction NotFoundBoundary(props) {\n  const router = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.u)();\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(NotFoundErrorBoundaryInner, {\n    ...props,\n    href: router.href\n  });\n}\n\nfunction CollectionPage(props) {\n  var _config$collections;\n  const {\n    collection,\n    config\n  } = props;\n  const containerWidth = 'none'; // TODO: use a \"large\" when we have more columns\n  const collectionConfig = (_config$collections = config.collections) === null || _config$collections === void 0 ? void 0 : _config$collections[collection];\n  if (!collectionConfig) notFound();\n  const [searchTerm, setSearchTerm] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)('');\n  let debouncedSearchTerm = useDebouncedValue(searchTerm, 300);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.P, {\n    containerWidth: containerWidth,\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(CollectionPageHeader, {\n      collectionLabel: collectionConfig.label,\n      createHref: `${props.basePath}/collection/${encodeURIComponent(props.collection)}/create`,\n      searchTerm: searchTerm,\n      onSearchTermChange: setSearchTerm\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(CollectionPageContent, {\n      searchTerm: debouncedSearchTerm,\n      ...props\n    })]\n  });\n}\nfunction CollectionPageHeader(props) {\n  const {\n    collectionLabel,\n    createHref\n  } = props;\n  const stringFormatter = (0,_react_aria_i18n__WEBPACK_IMPORTED_MODULE_114__.useLocalizedStringFormatter)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.l);\n  const isAboveMobile = (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.useMediaQuery)(_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.breakpointQueries.above.mobile);\n  const [searchVisible, setSearchVisible] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(isAboveMobile);\n  const searchRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    setSearchVisible(isAboveMobile);\n  }, [isAboveMobile]);\n\n  // entries are presented in a virtualized table view, so we replace the\n  // default (e.g. ctrl+f) browser search behaviour\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const listener = event => {\n      // bail if the search field is already focused; let users invoke the\n      // browser search if they need to\n      if (document.activeElement === searchRef.current) {\n        return;\n      }\n      if ((0,is_hotkey__WEBPACK_IMPORTED_MODULE_7__[\"default\"])('mod+f', event)) {\n        var _searchRef$current;\n        event.preventDefault();\n        (_searchRef$current = searchRef.current) === null || _searchRef$current === void 0 || _searchRef$current.select();\n      }\n    };\n    document.addEventListener('keydown', listener);\n    return () => document.removeEventListener('keydown', listener);\n  }, []);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.a, {\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Heading, {\n      elementType: \"h1\",\n      id: \"page-title\",\n      size: \"small\",\n      flex: true,\n      minWidth: 0,\n      children: collectionLabel\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(\"div\", {\n      role: \"search\",\n      style: {\n        display: searchVisible ? 'block' : 'none'\n      },\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_search_field__WEBPACK_IMPORTED_MODULE_14__.SearchField, {\n        ref: searchRef,\n        \"aria-label\": stringFormatter.format('search') // TODO: l10n \"Search {collection}\"?\n        ,\n        onChange: props.onSearchTermChange,\n        onClear: () => {\n          props.onSearchTermChange('');\n          if (!isAboveMobile) {\n            // the timeout ensures that the \"add\" button isn't pressed\n            setTimeout(() => {\n              setSearchVisible(false);\n            }, 250);\n          }\n        },\n        onBlur: () => {\n          if (!isAboveMobile && props.searchTerm === '') {\n            setSearchVisible(false);\n          }\n        },\n        placeholder: stringFormatter.format('search'),\n        value: props.searchTerm,\n        width: \"scale.2400\"\n      })\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_1__.ActionButton, {\n      \"aria-label\": \"show search\",\n      isHidden: searchVisible || {\n        above: 'mobile'\n      },\n      onPress: () => {\n        setSearchVisible(true);\n        // NOTE: this hack is to force the search field to focus, and invoke\n        // the software keyboard on mobile safari\n        let tempInput = document.createElement('input');\n        tempInput.style.position = 'absolute';\n        tempInput.style.opacity = '0';\n        document.body.appendChild(tempInput);\n        tempInput.focus();\n        setTimeout(() => {\n          var _searchRef$current2;\n          (_searchRef$current2 = searchRef.current) === null || _searchRef$current2 === void 0 || _searchRef$current2.focus();\n          tempInput.remove();\n        }, 0);\n      },\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_2__.Icon, {\n        src: _keystar_ui_icon_icons_searchIcon__WEBPACK_IMPORTED_MODULE_10__.searchIcon\n      })\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_1__.Button, {\n      marginStart: \"auto\",\n      prominence: \"high\",\n      href: createHref,\n      isHidden: searchVisible ? {\n        below: 'tablet'\n      } : undefined,\n      children: stringFormatter.format('add')\n    })]\n  });\n}\nfunction CollectionPageContent(props) {\n  const trees = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.b)();\n  const tree = trees.merged.kind === 'loaded' ? trees.merged.data.current.entries.get((0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.g)(props.config, props.collection)) : null;\n  if (trees.merged.kind === 'error') {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(EmptyState, {\n      icon: _keystar_ui_icon_icons_alertCircleIcon__WEBPACK_IMPORTED_MODULE_8__.alertCircleIcon,\n      title: \"Unable to load collection\",\n      message: trees.merged.error.message,\n      actions: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_1__.Button, {\n        tone: \"accent\",\n        href: props.basePath,\n        children: \"Dashboard\"\n      })\n    });\n  }\n  if (trees.merged.kind === 'loading') {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(EmptyState, {\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_progress__WEBPACK_IMPORTED_MODULE_13__.ProgressCircle, {\n        \"aria-label\": \"Loading Entries\",\n        isIndeterminate: true,\n        size: \"large\"\n      })\n    });\n  }\n  if (!tree) {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(EmptyState, {\n      icon: _keystar_ui_icon_icons_listXIcon__WEBPACK_IMPORTED_MODULE_9__.listXIcon,\n      title: \"Empty collection\",\n      message: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.Fragment, {\n        children: [\"There aren't any entries yet.\", ' ', /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_link__WEBPACK_IMPORTED_MODULE_12__.TextLink, {\n          href: `${props.basePath}/collection/${encodeURIComponent(props.collection)}/create`,\n          children: \"Create the first entry\"\n        }), ' ', \"to see it here.\"]\n      })\n    });\n  }\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(CollectionTable, {\n    ...props,\n    trees: trees.merged.data\n  });\n}\nfunction CollectionTable(props) {\n  let {\n    searchTerm\n  } = props;\n  let {\n    currentBranch,\n    defaultBranch\n  } = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.c)();\n  let isLocalMode = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.i)(props.config);\n  let router = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.u)();\n  let [sortDescriptor, setSortDescriptor] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    column: 'name',\n    direction: 'ascending'\n  });\n  let hideStatusColumn = isLocalMode || currentBranch === defaultBranch;\n  const entriesWithStatus = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    const defaultEntries = new Map((0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.d)(props.config, props.collection, props.trees.default.tree).map(x => [x.slug, x.key]));\n    return (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.d)(props.config, props.collection, props.trees.current.tree).map(entry => {\n      return {\n        name: entry.slug,\n        status: defaultEntries.has(entry.slug) ? defaultEntries.get(entry.slug) === entry.key ? 'Unchanged' : 'Changed' : 'Added'\n      };\n    });\n  }, [props.collection, props.config, props.trees]);\n  const filteredItems = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    return entriesWithStatus.filter(item => item.name.toLowerCase().includes(searchTerm.toLowerCase()));\n  }, [entriesWithStatus, searchTerm]);\n  const sortedItems = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    return [...filteredItems].sort(sortByDescriptor(sortDescriptor));\n  }, [filteredItems, sortDescriptor]);\n  const columns = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    return hideStatusColumn ? [{\n      name: 'Name',\n      key: 'name'\n    }] : [{\n      name: 'Name',\n      key: 'name'\n    }, {\n      name: 'Status',\n      key: 'status',\n      minWidth: 140,\n      width: '20%'\n    }];\n  }, [hideStatusColumn]);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_table__WEBPACK_IMPORTED_MODULE_17__.TableView, {\n    \"aria-labelledby\": \"page-title\",\n    selectionMode: \"none\",\n    onSortChange: setSortDescriptor,\n    sortDescriptor: sortDescriptor,\n    density: \"spacious\",\n    overflowMode: \"truncate\",\n    prominence: \"low\",\n    onRowAction: key => {\n      router.push(getItemPath(props.basePath, props.collection, key));\n    },\n    renderEmptyState: () => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(EmptyState, {\n      icon: _keystar_ui_icon_icons_searchXIcon__WEBPACK_IMPORTED_MODULE_11__.searchXIcon,\n      title: \"No results\",\n      message: `No items matching \"${searchTerm}\" were found.`\n    }),\n    flex: true,\n    marginTop: {\n      tablet: 'large'\n    },\n    marginBottom: {\n      mobile: 'regular',\n      tablet: 'xlarge'\n    },\n    UNSAFE_className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.css)({\n      marginInline: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.tokenSchema.size.space.regular,\n      [_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.breakpointQueries.above.mobile]: {\n        marginInline: `calc(${_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.tokenSchema.size.space.xlarge} - ${_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.tokenSchema.size.space.medium})`\n      },\n      [_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.breakpointQueries.above.tablet]: {\n        marginInline: `calc(${_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.tokenSchema.size.space.xxlarge} - ${_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.tokenSchema.size.space.medium})`\n      },\n      '[role=rowheader]': {\n        cursor: 'pointer'\n      }\n    }),\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_table__WEBPACK_IMPORTED_MODULE_17__.TableHeader, {\n      columns: columns,\n      children: ({\n        name,\n        key,\n        ...options\n      }) => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_table__WEBPACK_IMPORTED_MODULE_17__.Column, {\n        isRowHeader: true,\n        allowsSorting: true,\n        ...options,\n        children: name\n      }, key)\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_table__WEBPACK_IMPORTED_MODULE_17__.TableBody, {\n      items: sortedItems,\n      children: item => hideStatusColumn ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_table__WEBPACK_IMPORTED_MODULE_17__.Row, {\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_table__WEBPACK_IMPORTED_MODULE_17__.Cell, {\n          textValue: item.name,\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n            weight: \"medium\",\n            children: item.name\n          })\n        })\n      }, item.name) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_table__WEBPACK_IMPORTED_MODULE_17__.Row, {\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_table__WEBPACK_IMPORTED_MODULE_17__.Cell, {\n          textValue: item.name,\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n            weight: \"medium\",\n            children: item.name\n          })\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_table__WEBPACK_IMPORTED_MODULE_17__.Cell, {\n          textValue: item.status,\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_status_light__WEBPACK_IMPORTED_MODULE_15__.StatusLight, {\n            tone: statusTones[item.status],\n            children: item.status\n          })\n        })]\n      }, item.name)\n    })]\n  });\n}\nfunction getItemPath(basePath, collection, key) {\n  return `${basePath}/collection/${encodeURIComponent(collection)}/item/${encodeURIComponent(key)}`;\n}\nfunction useDebouncedValue(value, delay = 300) {\n  const [debouncedValue, setDebouncedValue] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(value);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const timer = setTimeout(() => setDebouncedValue(value), delay);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [value, delay]);\n  return debouncedValue;\n}\nconst statusTones = {\n  Added: 'positive',\n  Changed: 'accent',\n  Unchanged: 'neutral'\n};\n\nconst AppSlugContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(undefined);\nconst AppSlugProvider = AppSlugContext.Provider;\nfunction InstallGitHubApp(props) {\n  var _URL$searchParams$get;\n  const router = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.u)();\n  const appSlugFromContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(AppSlugContext);\n  const appSlug = (_URL$searchParams$get = new URL(router.href, 'https://example.com').searchParams.get('slug')) !== null && _URL$searchParams$get !== void 0 ? _URL$searchParams$get : appSlugFromContext === null || appSlugFromContext === void 0 ? void 0 : appSlugFromContext.value;\n  const parsedRepo = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.p)(props.config.storage.repo);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n    direction: \"column\",\n    gap: \"regular\",\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n      alignItems: \"end\",\n      gap: \"regular\",\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_text_field__WEBPACK_IMPORTED_MODULE_26__.TextField, {\n        label: \"Repo Name\",\n        width: \"100%\",\n        isReadOnly: true,\n        value: parsedRepo.name\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_1__.ActionButton, {\n        onPress: () => {\n          navigator.clipboard.writeText(parsedRepo.name);\n        },\n        children: \"Copy Repo Name\"\n      })]\n    }), appSlug ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_1__.Button, {\n      prominence: \"high\",\n      href: `https://github.com/apps/${appSlug}/installations/new`,\n      children: \"Install GitHub App\"\n    }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_notice__WEBPACK_IMPORTED_MODULE_23__.Notice, {\n      tone: \"caution\",\n      children: appSlugFromContext ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n        children: [\"The \", /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(\"code\", {\n          children: appSlugFromContext.envName\n        }), \" environment variable wasn't provided so we can't link to the GitHub app installation page. You should find the App on GitHub and add the repo yourself.\"]\n      }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n        children: \"Find the App on GitHub and add the repo.\"\n      })\n    })]\n  });\n}\n\nfunction ForkRepoDialog(props) {\n  const stringFormatter = (0,_react_aria_i18n__WEBPACK_IMPORTED_MODULE_114__.useLocalizedStringFormatter)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.l);\n  const client = (0,urql__WEBPACK_IMPORTED_MODULE_115__.useClient)();\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    kind: 'idle'\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const listener = async event => {\n      if (event.key === 'ks-refetch-installations' && event.newValue === 'true') {\n        localStorage.removeItem('ks-refetch-installations');\n        try {\n          var _res$data;\n          const auth = await (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.e)(props.config);\n          if (!auth) throw new Error('Unauthorized');\n          const res = await client.query(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.G, (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.p)(props.config.storage.repo)).toPromise();\n          if ((_res$data = res.data) !== null && _res$data !== void 0 && (_res$data = _res$data.repository) !== null && _res$data !== void 0 && (_res$data = _res$data.forks.nodes) !== null && _res$data !== void 0 && _res$data.some(x => (x === null || x === void 0 ? void 0 : x.viewerPermission) === 'ADMIN' || (x === null || x === void 0 ? void 0 : x.viewerPermission) === 'WRITE' || (x === null || x === void 0 ? void 0 : x.viewerPermission) === 'MAINTAIN')) {\n            await new Promise(resolve => setTimeout(resolve, 100));\n            props.onCreate();\n          }\n        } catch (err) {\n          setState({\n            kind: 'error',\n            error: err\n          });\n        }\n      }\n    };\n    addEventListener('storage', listener);\n    return () => removeEventListener('storage', listener);\n  }, [client, props]);\n  const appSlug = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(AppSlugContext);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_22__.Dialog, {\n    size: \"small\",\n    isDismissable: true,\n    onDismiss: () => {\n      props.onDismiss();\n    },\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Heading, {\n      children: \"Fork Repo\"\n    }), state.kind === 'error' ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.Fragment, {\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_slots__WEBPACK_IMPORTED_MODULE_34__.Content, {\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_notice__WEBPACK_IMPORTED_MODULE_23__.Notice, {\n          tone: \"critical\",\n          children: state.error.message\n        })\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_1__.ButtonGroup, {\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_1__.Button, {\n          onPress: props.onDismiss,\n          children: stringFormatter.format('cancel')\n        })\n      })]\n    }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.Fragment, {\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_slots__WEBPACK_IMPORTED_MODULE_34__.Content, {\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n          gap: \"large\",\n          direction: \"column\",\n          marginBottom: \"large\",\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n            children: \"You don't have permission to write to this repo so to save your changes, you need to fork the repo.\"\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n            children: [\"To start,\", ' ', /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_link__WEBPACK_IMPORTED_MODULE_12__.TextLink, {\n              href: `https://github.com/${(0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.s)(props.config.storage.repo)}/fork`,\n              target: \"_blank\",\n              rel: \"noopener noreferrer\",\n              children: \"fork the repo on GitHub\"\n            }), \". Then, come back to this page and\", ' ', /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_link__WEBPACK_IMPORTED_MODULE_12__.TextLink, {\n              href: `https://github.com/apps/${appSlug === null || appSlug === void 0 ? void 0 : appSlug.value}/installations/new?state=close`,\n              target: \"_blank\",\n              rel: \"noopener noreferrer\",\n              children: \"install the Keystatic GitHub App on your fork.\"\n            })]\n          })]\n        })\n      })\n    })]\n  });\n}\n\nclass TrackedMap extends Map {\n  #onGet;\n  constructor(onGet, entries) {\n    super(entries);\n    this.#onGet = onGet;\n  }\n  get(key) {\n    this.#onGet(key);\n    return super.get(key);\n  }\n}\nfunction parseEntry(args, files) {\n  const dataFilepath = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.f)(args.dirpath, args.format);\n  const data = files.get(dataFilepath);\n  if (!data) {\n    throw new Error(`Could not find data file at ${dataFilepath}`);\n  }\n  const {\n    loaded,\n    extraFakeFile\n  } = (0,_dist_required_files_f12cd7f9_node_esm_js__WEBPACK_IMPORTED_MODULE_52__.l)(data, args.format);\n  const filesWithFakeFile = new Map(files);\n  if (extraFakeFile) {\n    filesWithFakeFile.set(`${args.dirpath}/${extraFakeFile.path}`, extraFakeFile.contents);\n  }\n  const usedFiles = new Set([dataFilepath]);\n  const rootSchema = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.o)(args.schema);\n  let initialState;\n  const getFile = filepath => {\n    usedFiles.add(filepath);\n    return filesWithFakeFile.get(filepath);\n  };\n  try {\n    initialState = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.h)(rootSchema, loaded, [], [], (schema, value, path, pathWithArrayFieldSlugs) => {\n      var _args$slug;\n      if (path.length === 1 && path[0] === ((_args$slug = args.slug) === null || _args$slug === void 0 ? void 0 : _args$slug.field)) {\n        if (schema.formKind !== 'slug') {\n          throw new Error(`slugField is not a slug field`);\n        }\n        return schema.parse(value, {\n          slug: args.slug.slug\n        });\n      }\n      if (schema.formKind === 'asset') {\n        var _args$slug2, _args$slug3, _args$slug4;\n        const suggestedFilenamePrefix = pathWithArrayFieldSlugs.join('/');\n        const filepath = schema.filename(value, {\n          suggestedFilenamePrefix,\n          slug: (_args$slug2 = args.slug) === null || _args$slug2 === void 0 ? void 0 : _args$slug2.slug\n        });\n        const asset = filepath ? getFile(`${schema.directory ? `${schema.directory}${((_args$slug3 = args.slug) === null || _args$slug3 === void 0 ? void 0 : _args$slug3.slug) === undefined ? '' : `/${args.slug.slug}`}` : args.dirpath}/${filepath}`) : undefined;\n        return schema.parse(value, {\n          asset,\n          slug: (_args$slug4 = args.slug) === null || _args$slug4 === void 0 ? void 0 : _args$slug4.slug\n        });\n      }\n      if (schema.formKind === 'content') {\n        var _args$slug7;\n        const rootPath = `${args.dirpath}/${pathWithArrayFieldSlugs.join('/')}`;\n        const mainFilepath = rootPath + schema.contentExtension;\n        const mainContents = getFile(mainFilepath);\n        const otherFiles = new TrackedMap(key => {\n          usedFiles.add(`${rootPath}/${key}`);\n        });\n        const otherDirectories = new Map();\n        for (const [filename] of filesWithFakeFile) {\n          if (filename.startsWith(rootPath + '/')) {\n            const relativePath = filename.slice(rootPath.length + 1);\n            otherFiles.set(relativePath, filesWithFakeFile.get(filename));\n          }\n        }\n        for (const dir of (_schema$directories = schema.directories) !== null && _schema$directories !== void 0 ? _schema$directories : []) {\n          var _schema$directories, _args$slug5, _args$slug6;\n          const dirFiles = new TrackedMap(relativePath => usedFiles.add(start + relativePath));\n          const start = `${dir}${((_args$slug5 = args.slug) === null || _args$slug5 === void 0 ? void 0 : _args$slug5.slug) === undefined ? '' : `/${(_args$slug6 = args.slug) === null || _args$slug6 === void 0 ? void 0 : _args$slug6.slug}`}/`;\n          for (const [filename, val] of filesWithFakeFile) {\n            if (filename.startsWith(start)) {\n              const relativePath = filename.slice(start.length);\n              dirFiles.set(relativePath, val);\n            }\n          }\n          if (dirFiles.size) {\n            otherDirectories.set(dir, dirFiles);\n          }\n        }\n        return schema.parse(value, {\n          content: mainContents,\n          other: otherFiles,\n          external: otherDirectories,\n          slug: (_args$slug7 = args.slug) === null || _args$slug7 === void 0 ? void 0 : _args$slug7.slug\n        });\n      }\n      return schema.parse(value, undefined);\n    }, false);\n  } catch (err) {\n    throw (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.t)(err);\n  }\n  if (extraFakeFile) {\n    usedFiles.delete(`${args.dirpath}/${extraFakeFile.path}`);\n  }\n  return {\n    initialState,\n    initialFiles: [...usedFiles]\n  };\n}\nfunction getAllFilesInTree(tree) {\n  return [...tree.values()].flatMap(val => val.children ? getAllFilesInTree(val.children) : [val.entry]);\n}\nfunction useItemData(args) {\n  var _args$slug9;\n  const {\n    current: currentBranch\n  } = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.b)();\n  const baseCommit = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.j)();\n  const isRepoPrivate = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.k)();\n  const branchInfo = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.c)();\n  const rootTree = currentBranch.kind === 'loaded' ? currentBranch.data.tree : undefined;\n  const locationsForTreeKey = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    var _args$slug8;\n    return (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.m)((0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.o)(args.schema), args.dirpath, (_args$slug8 = args.slug) === null || _args$slug8 === void 0 ? void 0 : _args$slug8.slug, args.format);\n  }, [args.dirpath, args.format, args.schema, (_args$slug9 = args.slug) === null || _args$slug9 === void 0 ? void 0 : _args$slug9.slug]);\n  const localTreeKey = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.n)(locationsForTreeKey, rootTree !== null && rootTree !== void 0 ? rootTree : new Map()), [locationsForTreeKey, rootTree]);\n  const tree = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    return rootTree !== null && rootTree !== void 0 ? rootTree : new Map();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [localTreeKey, locationsForTreeKey]);\n  const hasLoaded = currentBranch.kind === 'loaded';\n  return (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.q)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {\n    var _getTreeNodeAtPath;\n    if (!hasLoaded) return _dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.L;\n    const dataFilepathSha = (_getTreeNodeAtPath = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.r)(tree, (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.f)(args.dirpath, args.format))) === null || _getTreeNodeAtPath === void 0 ? void 0 : _getTreeNodeAtPath.entry.sha;\n    if (dataFilepathSha === undefined) {\n      return 'not-found';\n    }\n    const _args = {\n      config: args.config,\n      dirpath: args.dirpath,\n      format: args.format,\n      schema: args.schema,\n      slug: args.slug\n    };\n    const allBlobs = locationsForTreeKey.flatMap(dir => {\n      const node = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.r)(tree, dir);\n      if (!node) return [];\n      return node.children ? getAllFilesInTree(node.children) : [node.entry];\n    }).map(entry => {\n      const blob = fetchBlob(args.config, entry.sha, entry.path, baseCommit, isRepoPrivate, {\n        owner: branchInfo.mainOwner,\n        name: branchInfo.mainRepo\n      });\n      if (blob instanceof Uint8Array) {\n        return [entry.path, blob];\n      }\n      return blob.then(blob => [entry.path, blob]);\n    });\n    if (allBlobs.every(x => Array.isArray(x))) {\n      const {\n        initialFiles,\n        initialState\n      } = parseEntry(_args, new Map(allBlobs));\n      return {\n        initialState,\n        initialFiles,\n        localTreeKey\n      };\n    }\n    return Promise.all(allBlobs).then(async data => {\n      const {\n        initialState,\n        initialFiles\n      } = parseEntry(_args, new Map(data));\n      return {\n        initialState,\n        initialFiles,\n        localTreeKey\n      };\n    });\n  }, [hasLoaded, tree, args.dirpath, args.format, args.config, args.schema, args.slug, locationsForTreeKey, baseCommit, isRepoPrivate, branchInfo.mainOwner, branchInfo.mainRepo, localTreeKey]));\n}\nconst blobCache = new lru_cache__WEBPACK_IMPORTED_MODULE_116__[\"default\"]({\n  max: 200\n});\nasync function hydrateBlobCache(contents) {\n  const sha = await (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.w)(contents);\n  blobCache.set(sha, contents);\n  return sha;\n}\nasync function fetchGitHubBlob(config, oid, filepath, commitSha, isRepoPrivate, repo) {\n  if (!isRepoPrivate) {\n    var _getPathPrefix;\n    return fetch(`https://raw.githubusercontent.com/${(0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.s)(repo)}/${commitSha}/${(_getPathPrefix = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.x)(config.storage)) !== null && _getPathPrefix !== void 0 ? _getPathPrefix : ''}${filepath}`);\n  }\n  const auth = await (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.e)(config);\n  return fetch(config.storage.kind === 'github' ? `https://api.github.com/repos/${(0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.s)(config.storage.repo)}/git/blobs/${oid}` : `${_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.K}/v1/github/blob/${oid}`, {\n    headers: {\n      Authorization: `Bearer ${auth.accessToken}`,\n      Accept: 'application/vnd.github.raw',\n      ...(config.storage.kind === 'cloud' ? _dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.y : {})\n    }\n  });\n}\nfunction fetchBlob(config, oid, filepath, commitSha, isRepoPrivate, repo) {\n  if (blobCache.has(oid)) return blobCache.get(oid);\n  const promise = ((0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.v)(config) || config.storage.kind === 'cloud' ? fetchGitHubBlob(config, oid, filepath, commitSha, isRepoPrivate, repo) : fetch(`/api/keystatic/blob/${oid}/${filepath}`, {\n    headers: {\n      'no-cors': '1'\n    }\n  })).then(x => x.arrayBuffer()).then(x => {\n    const array = new Uint8Array(x);\n    blobCache.set(oid, array);\n    return array;\n  }).catch(err => {\n    blobCache.delete(oid);\n    throw err;\n  });\n  blobCache.set(oid, promise);\n  return promise;\n}\n\n(0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.injectGlobal)({\n  body: {\n    overflow: 'hidden'\n  }\n});\nfunction createUrqlClient(config) {\n  const repo = config.storage.kind === 'github' ? (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.p)(config.storage.repo) : {\n    owner: 'repo-owner',\n    name: 'repo-name'\n  };\n  return (0,urql__WEBPACK_IMPORTED_MODULE_117__.createClient)({\n    url: config.storage.kind === 'github' ? 'https://api.github.com/graphql' : `${_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.K}/v1/github/graphql`,\n    requestPolicy: 'cache-and-network',\n    exchanges: [(0,_urql_exchange_auth__WEBPACK_IMPORTED_MODULE_118__.authExchange)(async utils => {\n      let authState = await (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.e)(config);\n      return {\n        addAuthToOperation(operation) {\n          authState = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.A)(config);\n          if (!authState) {\n            return operation;\n          }\n          return utils.appendHeaders(operation, {\n            Authorization: `Bearer ${authState.accessToken}`,\n            ...(config.storage.kind === 'cloud' ? _dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.y : {})\n          });\n        },\n        didAuthError() {\n          return false;\n        },\n        willAuthError(operation) {\n          var _operation$query$defi;\n          authState = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.A)(config);\n          if (operation.query.definitions[0].kind === 'OperationDefinition' && (_operation$query$defi = operation.query.definitions[0].name) !== null && _operation$query$defi !== void 0 && _operation$query$defi.value.includes('AppShell') && !authState) {\n            if (config.storage.kind === 'github') {\n              window.location.href = '/api/keystatic/github/login';\n            } else {\n              (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.B)('', config);\n            }\n            return true;\n          }\n          if (!authState) {\n            return true;\n          }\n          return false;\n        },\n        async refreshAuth() {\n          authState = await (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.e)(config);\n        }\n      };\n    }), (0,_urql_exchange_graphcache__WEBPACK_IMPORTED_MODULE_119__.cacheExchange)({\n      updates: {\n        Mutation: {\n          createRef(result, args, cache, _info) {\n            cache.updateQuery({\n              query: config.storage.kind === 'github' ? _dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.G : _dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.C,\n              variables: repo\n            }, data => {\n              var _data$repository;\n              if (data !== null && data !== void 0 && (_data$repository = data.repository) !== null && _data$repository !== void 0 && (_data$repository = _data$repository.refs) !== null && _data$repository !== void 0 && _data$repository.nodes && result.createRef && typeof result.createRef === 'object' && 'ref' in result.createRef) {\n                return {\n                  ...data,\n                  repository: {\n                    ...data.repository,\n                    refs: {\n                      ...data.repository.refs,\n                      nodes: [...data.repository.refs.nodes, result.createRef.ref]\n                    }\n                  }\n                };\n              }\n              return data;\n            });\n          },\n          deleteRef(result, args, cache, _info) {\n            cache.updateQuery({\n              query: config.storage.kind === 'github' ? _dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.G : _dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.C,\n              variables: repo\n            }, data => {\n              var _data$repository2;\n              if (data !== null && data !== void 0 && (_data$repository2 = data.repository) !== null && _data$repository2 !== void 0 && (_data$repository2 = _data$repository2.refs) !== null && _data$repository2 !== void 0 && _data$repository2.nodes && result.deleteRef && typeof result.deleteRef === 'object' && '__typename' in result.deleteRef && typeof args.input === 'object' && args.input !== null && 'refId' in args.input && typeof args.input.refId === 'string') {\n                const refId = args.input.refId;\n                return {\n                  ...data,\n                  repository: {\n                    ...data.repository,\n                    refs: {\n                      ...data.repository.refs,\n                      nodes: data.repository.refs.nodes.filter(x => (x === null || x === void 0 ? void 0 : x.id) !== refId)\n                    }\n                  }\n                };\n              }\n              return data;\n            });\n          }\n        }\n      }\n    }), ...(config.storage.kind === 'github' ? [] : [(0,_urql_exchange_persisted__WEBPACK_IMPORTED_MODULE_120__.persistedExchange)({\n      enableForMutation: true,\n      enforcePersistedQueries: true\n    })]), urql__WEBPACK_IMPORTED_MODULE_117__.fetchExchange]\n  });\n}\nfunction Provider({\n  children,\n  config\n}) {\n  const themeContext = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.z)();\n  const {\n    push: navigate\n  } = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.u)();\n  const keystarRouter = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => ({\n    navigate\n  }), [navigate]);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.T, {\n    value: themeContext,\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_core__WEBPACK_IMPORTED_MODULE_53__.KeystarProvider, {\n      locale: config.locale || 'en-US',\n      colorScheme: themeContext.theme,\n      router: keystarRouter,\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_core__WEBPACK_IMPORTED_MODULE_53__.ClientSideOnlyDocumentElement, {}), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(\"link\", {\n        href: \"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap\",\n        rel: \"stylesheet\"\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(urql__WEBPACK_IMPORTED_MODULE_115__.Provider, {\n        value: (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => createUrqlClient(config), [config]),\n        children: children\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_toast__WEBPACK_IMPORTED_MODULE_24__.Toaster, {})]\n    })\n  });\n}\n\nconst textEncoder = new TextEncoder();\nconst frontmatterSplit = textEncoder.encode('---\\n');\nfunction combineFrontmatterAndContents(frontmatter, contents) {\n  const array = new Uint8Array(frontmatter.byteLength + contents.byteLength + frontmatterSplit.byteLength * 2);\n  array.set(frontmatterSplit);\n  array.set(frontmatter, frontmatterSplit.byteLength);\n  array.set(frontmatterSplit, frontmatterSplit.byteLength + frontmatter.byteLength);\n  array.set(contents, frontmatterSplit.byteLength * 2 + frontmatter.byteLength);\n  return array;\n}\nfunction serializeEntryToFiles(args) {\n  var _args$slug, _args$slug2;\n  let {\n    value: stateWithExtraFilesRemoved,\n    extraFiles\n  } = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.D)(args.state, (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.o)(args.schema), (_args$slug = args.slug) === null || _args$slug === void 0 ? void 0 : _args$slug.field, (_args$slug2 = args.slug) === null || _args$slug2 === void 0 ? void 0 : _args$slug2.value, true);\n  const dataFormat = args.format.data;\n  let dataContent = textEncoder.encode(dataFormat === 'json' ? JSON.stringify(stateWithExtraFilesRemoved, null, 2) + '\\n' : (0,js_yaml__WEBPACK_IMPORTED_MODULE_51__.dump)(stateWithExtraFilesRemoved));\n  if (args.format.contentField) {\n    const filename = `${args.format.contentField.key}${args.format.contentField.config.contentExtension}`;\n    let contents;\n    extraFiles = extraFiles.filter(x => {\n      if (x.path !== filename) return true;\n      contents = x.contents;\n      return false;\n    });\n    (0,emery__WEBPACK_IMPORTED_MODULE_18__.assert)(contents !== undefined, 'Expected content field to be present');\n    dataContent = combineFrontmatterAndContents(dataContent, contents);\n  }\n  return [{\n    path: (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.f)(args.basePath, args.format),\n    contents: dataContent\n  }, ...extraFiles.map(file => ({\n    path: `${file.parent ? args.slug ? `${file.parent}/${args.slug.value}` : file.parent : args.basePath}/${file.path}`,\n    contents: file.contents\n  }))];\n}\nfunction useUpsertItem(args) {\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    kind: 'idle'\n  });\n  const baseCommit = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.j)();\n  const branchInfo = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.E);\n  const setTreeSha = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.F)();\n  const [, mutate] = (0,urql__WEBPACK_IMPORTED_MODULE_115__.useMutation)(createCommitMutation);\n  const repoWithWriteAccess = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.R);\n  const appSlug = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(AppSlugContext);\n  const unscopedTreeData = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.H)();\n  return [state, async override => {\n    try {\n      var _getPathPrefix, _args$initialFiles;\n      const unscopedTree = unscopedTreeData.kind === 'loaded' ? unscopedTreeData.data.tree : undefined;\n      if (!unscopedTree) return false;\n      if (repoWithWriteAccess === null && args.config.storage.kind === 'github' && appSlug !== null && appSlug !== void 0 && appSlug.value) {\n        setState({\n          kind: 'needs-fork'\n        });\n        return false;\n      }\n      setState({\n        kind: 'loading'\n      });\n      const pathPrefix = (_getPathPrefix = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.x)(args.config.storage)) !== null && _getPathPrefix !== void 0 ? _getPathPrefix : '';\n      let additions = serializeEntryToFiles({\n        basePath: args.basePath,\n        config: args.config,\n        schema: args.schema,\n        format: args.format,\n        state: args.state,\n        slug: args.slug\n      }).map(addition => ({\n        ...addition,\n        path: pathPrefix + addition.path\n      }));\n      const additionPathToSha = new Map(await Promise.all(additions.map(async addition => [addition.path, await hydrateBlobCache(addition.contents)])));\n      const filesToDelete = new Set((_args$initialFiles = args.initialFiles) === null || _args$initialFiles === void 0 ? void 0 : _args$initialFiles.map(x => pathPrefix + x));\n      for (const file of additions) {\n        filesToDelete.delete(file.path);\n      }\n      additions = additions.filter(addition => {\n        const sha = additionPathToSha.get(addition.path);\n        const existing = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.r)(unscopedTree, addition.path);\n        return (existing === null || existing === void 0 ? void 0 : existing.entry.sha) !== sha;\n      });\n      const deletions = [...filesToDelete].map(path => ({\n        path\n      }));\n      const updatedTree = await (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.I)(unscopedTree, {\n        additions,\n        deletions: [...filesToDelete]\n      });\n      await (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.J)(updatedTree.entries);\n      if (args.config.storage.kind === 'github' || args.config.storage.kind === 'cloud') {\n        var _override$branch, _override$sha, _result$error, _result$data;\n        const branch = {\n          branchName: (_override$branch = override === null || override === void 0 ? void 0 : override.branch) !== null && _override$branch !== void 0 ? _override$branch : branchInfo.currentBranch,\n          repositoryNameWithOwner: `${repoWithWriteAccess.owner}/${repoWithWriteAccess.name}`\n        };\n        const runMutation = expectedHeadOid => mutate({\n          input: {\n            branch,\n            expectedHeadOid,\n            message: {\n              headline: `Update ${args.basePath}`\n            },\n            fileChanges: {\n              additions: additions.map(addition => ({\n                ...addition,\n                contents: (0,js_base64__WEBPACK_IMPORTED_MODULE_121__.fromUint8Array)(addition.contents)\n              })),\n              deletions\n            }\n          }\n        });\n        let result = await runMutation((_override$sha = override === null || override === void 0 ? void 0 : override.sha) !== null && _override$sha !== void 0 ? _override$sha : baseCommit);\n        const gqlError = (_result$error = result.error) === null || _result$error === void 0 || (_result$error = _result$error.graphQLErrors[0]) === null || _result$error === void 0 ? void 0 : _result$error.originalError;\n        if (gqlError && 'type' in gqlError) {\n          if (gqlError.type === 'BRANCH_PROTECTION_RULE_VIOLATION') {\n            setState({\n              kind: 'needs-new-branch',\n              reason: 'Changes must be made via pull request to this branch. Create a new branch to save changes.'\n            });\n            return false;\n          }\n          if (gqlError.type === 'STALE_DATA') {\n            var _refData$data, _args$slug3;\n            // we don't want this to go into the cache yet\n            // so we create a new client just for this\n            const refData = await createUrqlClient(args.config).query(FetchRef, {\n              owner: repoWithWriteAccess.owner,\n              name: repoWithWriteAccess.name,\n              ref: `refs/heads/${branchInfo.currentBranch}`\n            }).toPromise();\n            if (!((_refData$data = refData.data) !== null && _refData$data !== void 0 && (_refData$data = _refData$data.repository) !== null && _refData$data !== void 0 && (_refData$data = _refData$data.ref) !== null && _refData$data !== void 0 && _refData$data.target)) {\n              throw new Error('Branch not found');\n            }\n            const tree = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.M)(await (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.N)(refData.data.repository.ref.target.oid, args.config), args.config);\n            const treeKey = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.n)((0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.m)((0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.o)(args.schema), args.basePath, (_args$slug3 = args.slug) === null || _args$slug3 === void 0 ? void 0 : _args$slug3.value, args.format), tree.tree);\n            if (treeKey === args.currentLocalTreeKey) {\n              result = await runMutation(refData.data.repository.ref.target.oid);\n            } else {\n              setState({\n                kind: 'needs-new-branch',\n                reason: 'This entry has been updated since it was opened. Create a new branch to save changes.'\n              });\n              return false;\n            }\n          }\n        }\n        if (result.error) {\n          throw result.error;\n        }\n        const target = (_result$data = result.data) === null || _result$data === void 0 || (_result$data = _result$data.createCommitOnBranch) === null || _result$data === void 0 || (_result$data = _result$data.ref) === null || _result$data === void 0 ? void 0 : _result$data.target;\n        if (target) {\n          setState({\n            kind: 'updated'\n          });\n          return true;\n        }\n        throw new Error('Failed to update');\n      } else {\n        const res = await fetch('/api/keystatic/update', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'no-cors': '1'\n          },\n          body: JSON.stringify({\n            additions: additions.map(addition => ({\n              ...addition,\n              contents: (0,js_base64__WEBPACK_IMPORTED_MODULE_121__.fromUint8Array)(addition.contents)\n            })),\n            deletions\n          })\n        });\n        if (!res.ok) {\n          throw new Error(await res.text());\n        }\n        const newTree = await res.json();\n        const {\n          tree\n        } = await (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.J)(newTree);\n        setTreeSha(await (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.O)(tree));\n        setState({\n          kind: 'updated'\n        });\n        return true;\n      }\n    } catch (err) {\n      setState({\n        kind: 'error',\n        error: err\n      });\n      return false;\n    }\n  }, () => {\n    setState({\n      kind: 'idle'\n    });\n  }];\n}\nconst createCommitMutation = (0,_ts_gql_tag_no_transform__WEBPACK_IMPORTED_MODULE_45__.gql)`\n  mutation CreateCommit($input: CreateCommitOnBranchInput!) {\n    createCommitOnBranch(input: $input) {\n      ref {\n        id\n        target {\n          id\n          oid\n          ... on Commit {\n            tree {\n              id\n              oid\n            }\n          }\n        }\n      }\n    }\n  }\n`;\nfunction useDeleteItem(args) {\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    kind: 'idle'\n  });\n  const baseCommit = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.j)();\n  const branchInfo = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.E);\n  const [, mutate] = (0,urql__WEBPACK_IMPORTED_MODULE_115__.useMutation)(createCommitMutation);\n  const setTreeSha = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.F)();\n  const repoWithWriteAccess = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.R);\n  const appSlug = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(AppSlugContext);\n  const unscopedTreeData = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.H)();\n  return [state, async () => {\n    try {\n      const unscopedTree = unscopedTreeData.kind === 'loaded' ? unscopedTreeData.data.tree : undefined;\n      if (!unscopedTree) return false;\n      if (repoWithWriteAccess === null && args.storage.kind === 'github' && appSlug !== null && appSlug !== void 0 && appSlug.value) {\n        setState({\n          kind: 'needs-fork'\n        });\n        return false;\n      }\n      setState({\n        kind: 'loading'\n      });\n      const deletions = args.initialFiles.map(x => {\n        var _getPathPrefix2;\n        return ((_getPathPrefix2 = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.x)(args.storage)) !== null && _getPathPrefix2 !== void 0 ? _getPathPrefix2 : '') + x;\n      });\n      const updatedTree = await (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.I)(unscopedTree, {\n        additions: [],\n        deletions\n      });\n      await (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.J)(updatedTree.entries);\n      if (args.storage.kind === 'github' || args.storage.kind === 'cloud') {\n        const {\n          error\n        } = await mutate({\n          input: {\n            branch: {\n              repositoryNameWithOwner: `${repoWithWriteAccess.owner}/${repoWithWriteAccess.name}`,\n              branchName: branchInfo.currentBranch\n            },\n            message: {\n              headline: `Delete ${args.basePath}`\n            },\n            expectedHeadOid: baseCommit,\n            fileChanges: {\n              deletions: deletions.map(path => ({\n                path\n              }))\n            }\n          }\n        });\n        if (error) {\n          throw error;\n        }\n        setState({\n          kind: 'updated'\n        });\n        return true;\n      } else {\n        const res = await fetch('/api/keystatic/update', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'no-cors': '1'\n          },\n          body: JSON.stringify({\n            additions: [],\n            deletions: deletions.map(path => ({\n              path\n            }))\n          })\n        });\n        if (!res.ok) {\n          throw new Error(await res.text());\n        }\n        const newTree = await res.json();\n        const {\n          tree\n        } = await (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.J)(newTree);\n        setTreeSha(await (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.O)(tree));\n        setState({\n          kind: 'updated'\n        });\n        return true;\n      }\n    } catch (err) {\n      setState({\n        kind: 'error',\n        error: err\n      });\n    }\n  }, () => {\n    setState({\n      kind: 'idle'\n    });\n  }];\n}\nconst FetchRef = (0,_ts_gql_tag_no_transform__WEBPACK_IMPORTED_MODULE_45__.gql)`\n  query FetchRef($owner: String!, $name: String!, $ref: String!) {\n    repository(owner: $owner, name: $name) {\n      id\n      ref(qualifiedName: $ref) {\n        id\n        target {\n          id\n          oid\n        }\n      }\n    }\n  }\n`;\n\nfunction useHasChanged(args) {\n  const serialize = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(state => {\n    const slug = args.slugField ? (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.Q)({\n      schema: args.schema.fields,\n      slugField: args.slugField\n    }, state) : undefined;\n    return {\n      slug,\n      state: (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.D)(state, args.schema, args.slugField, slug, true)\n    };\n  }, [args.schema, args.slugField]);\n  const initialFilesForUpdate = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => args.initialState === null ? null : serialize(args.initialState), [args.initialState, serialize]);\n  const filesForUpdate = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => serialize(args.state), [serialize, args.state]);\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    return !fast_deep_equal__WEBPACK_IMPORTED_MODULE_54___default()(initialFilesForUpdate, filesForUpdate);\n  }, [initialFilesForUpdate, filesForUpdate]);\n}\n\nfunction useSlugFieldInfo(collection, slugToExclude) {\n  const config = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.S)();\n  const allSlugs = (0,_dist_useSlugsInCollection_b967166d_node_esm_js__WEBPACK_IMPORTED_MODULE_55__.u)(collection);\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    const slugs = new Set(allSlugs);\n    if (slugToExclude) {\n      slugs.delete(slugToExclude);\n    }\n    const collectionConfig = config.collections[collection];\n    return {\n      field: collectionConfig.slugField,\n      slugs,\n      glob: (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.U)(config, collection)\n    };\n  }, [allSlugs, collection, config, slugToExclude]);\n}\n\nconst units = {\n  seconds: 60,\n  minutes: 60,\n  hours: 24,\n  days: 7,\n  weeks: 4,\n  months: 12,\n  years: Infinity\n};\nfunction formatTimeAgo(targetDate, currentDate, formatter) {\n  let duration = (targetDate.getTime() - currentDate.getTime()) / 1000;\n  for (const [name, amount] of Object.entries(units)) {\n    if (Math.abs(duration) < amount) {\n      return formatter.format(Math.round(duration), name);\n    }\n    duration /= amount;\n  }\n  return 'unknown';\n}\nfunction RelativeTime(props) {\n  const {\n    locale\n  } = (0,_react_aria_i18n__WEBPACK_IMPORTED_MODULE_114__.useLocale)();\n  const [now] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => new Date());\n  const formatted = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    const formatter = new Intl.RelativeTimeFormat(locale);\n    formatter.format(props.date.getTime() - now.getTime(), 'second');\n    return formatTimeAgo(props.date, now, formatter);\n  }, [locale, now, props.date]);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(\"time\", {\n    dateTime: props.date.toISOString(),\n    children: formatted\n  });\n}\nfunction showDraftRestoredToast(savedAt, hasChangedSince) {\n  _keystar_ui_toast__WEBPACK_IMPORTED_MODULE_24__.toastQueue.info( /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n    children: [\"Restored draft from \", /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(RelativeTime, {\n      date: savedAt\n    }), \".\", ' ', hasChangedSince && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n      color: \"accent\",\n      children: \"Other changes have been made to this entry since the draft. You may want to discard the draft changes.\"\n    })]\n  }), {\n    timeout: 8000\n  });\n}\nlet store;\nfunction getStore() {\n  if (!store) {\n    store = (0,idb_keyval__WEBPACK_IMPORTED_MODULE_122__.createStore)('keystatic', 'items');\n  }\n  return store;\n}\n// the as anys are because the indexeddb types dont't accept readonly arrays\n\nfunction setDraft(key, val) {\n  return (0,idb_keyval__WEBPACK_IMPORTED_MODULE_122__.set)(key, val, getStore());\n}\nfunction delDraft(key) {\n  return (0,idb_keyval__WEBPACK_IMPORTED_MODULE_122__.del)(key, getStore());\n}\nfunction getDraft(key) {\n  return (0,idb_keyval__WEBPACK_IMPORTED_MODULE_122__.get)(key, getStore());\n}\n\nconst storedValSchema$2 = zod__WEBPACK_IMPORTED_MODULE_123__.z.object({\n  version: zod__WEBPACK_IMPORTED_MODULE_123__.z.literal(1),\n  savedAt: zod__WEBPACK_IMPORTED_MODULE_123__.z.date(),\n  slug: zod__WEBPACK_IMPORTED_MODULE_123__.z.string(),\n  beforeTreeKey: zod__WEBPACK_IMPORTED_MODULE_123__.z.string(),\n  files: zod__WEBPACK_IMPORTED_MODULE_123__.z.map(zod__WEBPACK_IMPORTED_MODULE_123__.z.string(), zod__WEBPACK_IMPORTED_MODULE_123__.z.instanceof(Uint8Array))\n});\nfunction ItemPage(props) {\n  var _draft$state, _getPathPrefix, _getPathPrefix2;\n  const {\n    collection,\n    config,\n    itemSlug,\n    initialFiles,\n    initialState,\n    localTreeKey,\n    draft\n  } = props;\n  const router = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.u)();\n  const [forceValidation, setForceValidation] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const collectionConfig = config.collections[collection];\n  const schema = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.o)(collectionConfig.schema), [collectionConfig.schema]);\n  const [{\n    state,\n    localTreeKey: localTreeKeyInState\n  }, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n    state: (_draft$state = draft === null || draft === void 0 ? void 0 : draft.state) !== null && _draft$state !== void 0 ? _draft$state : initialState,\n    localTreeKey\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (draft && state === draft.state) {\n      showDraftRestoredToast(draft.savedAt, localTreeKey !== draft.treeKey);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [draft]);\n  if (localTreeKeyInState !== localTreeKey) {\n    setState({\n      state: initialState,\n      localTreeKey\n    });\n  }\n  const previewProps = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.Z)(schema, stateUpdater => {\n    setState(state => ({\n      localTreeKey: state.localTreeKey,\n      state: stateUpdater(state.state)\n    }));\n  }, () => undefined), [schema])(state);\n  const hasChanged = useHasChanged({\n    initialState,\n    schema,\n    state,\n    slugField: collectionConfig.slugField\n  });\n  const baseCommit = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.j)();\n  const slug = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.Q)(collectionConfig, state);\n  const formatInfo = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.V)(config, collection);\n  const currentBasePath = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.W)(config, collection, itemSlug);\n  const futureBasePath = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.W)(config, collection, slug);\n  const branchInfo = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.c)();\n  const [updateResult, _update, resetUpdateItem] = useUpsertItem({\n    state,\n    initialFiles,\n    config,\n    schema: collectionConfig.schema,\n    basePath: futureBasePath,\n    format: formatInfo,\n    currentLocalTreeKey: localTreeKey,\n    slug: {\n      field: collectionConfig.slugField,\n      value: slug\n    }\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const key = ['collection', collection, props.itemSlug];\n    if (hasChanged) {\n      const serialized = serializeEntryToFiles({\n        basePath: futureBasePath,\n        config,\n        format: (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.V)(config, collection),\n        schema: collectionConfig.schema,\n        slug: {\n          field: collectionConfig.slugField,\n          value: slug\n        },\n        state\n      });\n      const files = new Map(serialized.map(x => [x.path, x.contents]));\n      const data = {\n        beforeTreeKey: localTreeKey,\n        slug,\n        files,\n        savedAt: new Date(),\n        version: 1\n      };\n      setDraft(key, data);\n    } else {\n      delDraft(key);\n    }\n  }, [collection, collectionConfig, config, futureBasePath, localTreeKey, props.itemSlug, slug, state, hasChanged]);\n  const update = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__._)(_update);\n  const [deleteResult, deleteItem, resetDeleteItem] = useDeleteItem({\n    initialFiles,\n    storage: config.storage,\n    basePath: currentBasePath\n  });\n  const onReset = () => {\n    setState({\n      state: initialState,\n      localTreeKey\n    });\n  };\n  const viewHref = config.storage.kind !== 'local' ? `${(0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.$)(branchInfo)}${formatInfo.dataLocation === 'index' ? `/tree/${branchInfo.currentBranch}/${(_getPathPrefix = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.x)(config.storage)) !== null && _getPathPrefix !== void 0 ? _getPathPrefix : ''}${currentBasePath}` : `/blob/${branchInfo.currentBranch}/${(_getPathPrefix2 = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.x)(config.storage)) !== null && _getPathPrefix2 !== void 0 ? _getPathPrefix2 : ''}${currentBasePath}${(0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.a0)(formatInfo)}`}` : undefined;\n  const previewHref = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    return collectionConfig.previewUrl ? collectionConfig.previewUrl.replace('{slug}', props.itemSlug).replace('{branch}', branchInfo.currentBranch) : undefined;\n  }, [branchInfo.currentBranch, collectionConfig.previewUrl, props.itemSlug]);\n  const onDelete = async () => {\n    if (await deleteItem()) {\n      router.push(`${props.basePath}/collection/${encodeURIComponent(collection)}`);\n    }\n  };\n  const onDuplicate = async () => {\n    let hasUpdated = true;\n    if (hasChanged) {\n      hasUpdated = await onUpdate();\n    }\n    if (hasUpdated) {\n      router.push(`${props.basePath}/collection/${encodeURIComponent(collection)}/create?duplicate=${slug}`);\n    }\n  };\n  const slugInfo = useSlugFieldInfo(collection, itemSlug);\n  const isSavingDisabled = updateResult.kind === 'loading' || !hasChanged;\n  const onUpdate = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async () => {\n    if (isSavingDisabled) return false;\n    if (!(0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.a1)(schema, state, slugInfo)) {\n      setForceValidation(true);\n      return false;\n    }\n    const slug = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.Q)(collectionConfig, state);\n    const hasUpdated = await update();\n    if (hasUpdated && slug !== itemSlug) {\n      router.replace(`${props.basePath}/collection/${encodeURIComponent(collection)}/item/${encodeURIComponent(slug)}`);\n    }\n    return hasUpdated;\n  }, [collection, collectionConfig, isSavingDisabled, itemSlug, props.basePath, router, schema, slugInfo, state, update]);\n  const formID = 'item-edit-form';\n\n  // allow shortcuts \"cmd+s\" and \"ctrl+s\" to save\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const listener = event => {\n      if (updateResult.kind === 'loading') {\n        return;\n      }\n      if ((0,is_hotkey__WEBPACK_IMPORTED_MODULE_7__[\"default\"])('mod+s', event)) {\n        event.preventDefault();\n        onUpdate();\n      }\n    };\n    document.addEventListener('keydown', listener);\n    return () => document.removeEventListener('keydown', listener);\n  }, [updateResult.kind, onUpdate]);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.Fragment, {\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(ItemPageShell, {\n      headerActions: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(HeaderActions, {\n        formID: formID,\n        isLoading: updateResult.kind === 'loading',\n        hasChanged: hasChanged,\n        onDelete: onDelete,\n        onDuplicate: onDuplicate,\n        onReset: onReset,\n        viewHref: viewHref,\n        previewHref: previewHref\n      }),\n      ...props,\n      children: [updateResult.kind === 'error' && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_notice__WEBPACK_IMPORTED_MODULE_23__.Notice, {\n        tone: \"critical\",\n        children: updateResult.error.message\n      }), deleteResult.kind === 'error' && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_notice__WEBPACK_IMPORTED_MODULE_23__.Notice, {\n        tone: \"critical\",\n        children: deleteResult.error.message\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Box, {\n        id: formID,\n        height: \"100%\",\n        minHeight: 0,\n        minWidth: 0,\n        elementType: \"form\",\n        onSubmit: event => {\n          if (event.target !== event.currentTarget) return;\n          event.preventDefault();\n          onUpdate();\n        },\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.a2, {\n          previewProps: previewProps,\n          forceValidation: forceValidation,\n          entryLayout: collectionConfig.entryLayout,\n          formatInfo: formatInfo,\n          slugField: slugInfo\n        })\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_22__.DialogContainer\n      // ideally this would be a popover on desktop but using a DialogTrigger wouldn't work since\n      // this doesn't open on click but after doing a network request and it failing and manually wiring about a popover and modal would be a pain\n      , {\n        onDismiss: resetUpdateItem,\n        children: updateResult.kind === 'needs-new-branch' && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(CreateBranchDuringUpdateDialog, {\n          branchOid: baseCommit,\n          onCreate: async newBranch => {\n            const itemBasePath = `/keystatic/branch/${encodeURIComponent(newBranch)}/collection/${encodeURIComponent(collection)}/item/`;\n            router.push(itemBasePath + encodeURIComponent(itemSlug));\n            const slug = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.Q)(collectionConfig, state);\n            const hasUpdated = await update({\n              branch: newBranch,\n              sha: baseCommit\n            });\n            if (hasUpdated && slug !== itemSlug) {\n              router.replace(itemBasePath + encodeURIComponent(slug));\n            }\n          },\n          reason: updateResult.reason,\n          onDismiss: resetUpdateItem\n        })\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_22__.DialogContainer\n      // ideally this would be a popover on desktop but using a DialogTrigger\n      // wouldn't work since this doesn't open on click but after doing a\n      // network request and it failing and manually wiring about a popover\n      // and modal would be a pain\n      , {\n        onDismiss: resetUpdateItem,\n        children: updateResult.kind === 'needs-fork' && (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.v)(props.config) && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(ForkRepoDialog, {\n          onCreate: async () => {\n            const slug = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.Q)(collectionConfig, state);\n            const hasUpdated = await update();\n            if (hasUpdated && slug !== itemSlug) {\n              router.replace(`${props.basePath}/collection/${encodeURIComponent(collection)}/item/${encodeURIComponent(slug)}`);\n            }\n          },\n          onDismiss: resetUpdateItem,\n          config: props.config\n        })\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_22__.DialogContainer\n      // ideally this would be a popover on desktop but using a DialogTrigger\n      // wouldn't work since this doesn't open on click but after doing a\n      // network request and it failing and manually wiring about a popover\n      // and modal would be a pain\n      , {\n        onDismiss: resetDeleteItem,\n        children: deleteResult.kind === 'needs-fork' && (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.v)(props.config) && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(ForkRepoDialog, {\n          onCreate: async () => {\n            await deleteItem();\n            router.push(`${props.basePath}/collection/${encodeURIComponent(collection)}`);\n          },\n          onDismiss: resetDeleteItem,\n          config: props.config\n        })\n      })]\n    })\n  });\n}\nfunction HeaderActions(props) {\n  let {\n    formID,\n    hasChanged,\n    isLoading,\n    onDelete,\n    onDuplicate,\n    onReset,\n    previewHref,\n    viewHref\n  } = props;\n  const isBelowTablet = (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.useMediaQuery)(_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.breakpointQueries.below.tablet);\n  const stringFormatter = (0,_react_aria_i18n__WEBPACK_IMPORTED_MODULE_114__.useLocalizedStringFormatter)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.l);\n  const [deleteAlertIsOpen, setDeleteAlertOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [duplicateAlertIsOpen, setDuplicateAlertOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const menuActions = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    let items = [{\n      key: 'reset',\n      label: 'Reset changes',\n      // TODO: l10n\n      icon: _keystar_ui_icon_icons_historyIcon__WEBPACK_IMPORTED_MODULE_44__.historyIcon\n    }, {\n      key: 'delete',\n      label: 'Delete entry…',\n      // TODO: l10n\n      icon: _keystar_ui_icon_icons_trash2Icon__WEBPACK_IMPORTED_MODULE_36__.trash2Icon\n    }, {\n      key: 'duplicate',\n      label: 'Duplicate entry…',\n      // TODO: l10n\n      icon: _keystar_ui_icon_icons_copyPlusIcon__WEBPACK_IMPORTED_MODULE_42__.copyPlusIcon\n    }];\n    if (previewHref) {\n      items.push({\n        key: 'preview',\n        label: 'Preview',\n        icon: _keystar_ui_icon_icons_externalLinkIcon__WEBPACK_IMPORTED_MODULE_43__.externalLinkIcon,\n        href: previewHref,\n        target: '_blank',\n        rel: 'noopener noreferrer'\n      });\n    }\n    if (viewHref) {\n      items.push({\n        key: 'view',\n        label: 'View on GitHub',\n        icon: _keystar_ui_icon_icons_githubIcon__WEBPACK_IMPORTED_MODULE_4__.githubIcon,\n        href: viewHref,\n        target: '_blank',\n        rel: 'noopener noreferrer'\n      });\n    }\n    return items;\n  }, [previewHref, viewHref]);\n  const indicatorElement = (() => {\n    if (isLoading) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_progress__WEBPACK_IMPORTED_MODULE_13__.ProgressCircle, {\n        \"aria-label\": \"Saving changes\",\n        isIndeterminate: true,\n        size: \"small\",\n        alignSelf: \"center\"\n      });\n    }\n    if (hasChanged) {\n      return isBelowTablet ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Box, {\n        backgroundColor: \"pendingEmphasis\",\n        height: \"scale.75\",\n        width: \"scale.75\",\n        borderRadius: \"full\",\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n          visuallyHidden: true,\n          children: \"Unsaved\"\n        })\n      }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_badge__WEBPACK_IMPORTED_MODULE_41__.Badge, {\n        tone: \"pending\",\n        children: \"Unsaved\"\n      });\n    }\n    return null;\n  })();\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.Fragment, {\n    children: [indicatorElement, /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_action_group__WEBPACK_IMPORTED_MODULE_40__.ActionGroup, {\n      buttonLabelBehavior: \"hide\",\n      overflowMode: \"collapse\",\n      prominence: \"low\",\n      density: \"compact\",\n      maxWidth: isBelowTablet ? 'element.regular' : undefined // force switch to action menu on small devices\n      ,\n      items: menuActions,\n      disabledKeys: hasChanged ? [] : ['reset'],\n      onAction: key => {\n        switch (key) {\n          case 'reset':\n            onReset();\n            break;\n          case 'delete':\n            setDeleteAlertOpen(true);\n            break;\n          case 'duplicate':\n            if (hasChanged) {\n              setDuplicateAlertOpen(true);\n            } else {\n              onDuplicate();\n            }\n            break;\n        }\n      },\n      children: item => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_breadcrumbs__WEBPACK_IMPORTED_MODULE_21__.Item, {\n        textValue: item.label,\n        href: item.href,\n        target: item.target,\n        rel: item.rel,\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_2__.Icon, {\n          src: item.icon\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n          children: item.label\n        })]\n      }, item.key)\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_1__.Button, {\n      form: formID,\n      isDisabled: isLoading,\n      prominence: \"high\",\n      type: \"submit\",\n      children: stringFormatter.format('save')\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_22__.DialogContainer, {\n      onDismiss: () => setDeleteAlertOpen(false),\n      children: deleteAlertIsOpen && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_22__.AlertDialog, {\n        title: \"Delete entry\",\n        tone: \"critical\",\n        cancelLabel: \"Cancel\",\n        primaryActionLabel: \"Yes, delete\",\n        autoFocusButton: \"cancel\",\n        onPrimaryAction: onDelete,\n        children: \"Are you sure? This action cannot be undone.\"\n      })\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_22__.DialogContainer, {\n      onDismiss: () => setDuplicateAlertOpen(false),\n      children: duplicateAlertIsOpen && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_22__.AlertDialog, {\n        title: \"Save and duplicate entry\",\n        tone: \"neutral\",\n        cancelLabel: \"Cancel\",\n        primaryActionLabel: \"Save and duplicate\",\n        autoFocusButton: \"primary\",\n        onPrimaryAction: onDuplicate,\n        children: \"You have unsaved changes. Save this entry to duplicate it.\"\n      })\n    })]\n  });\n}\nfunction CreateBranchDuringUpdateDialog(props) {\n  var _data$createRef;\n  const stringFormatter = (0,_react_aria_i18n__WEBPACK_IMPORTED_MODULE_114__.useLocalizedStringFormatter)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.l);\n  const repositoryId = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.a3)();\n  const [branchName, setBranchName] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)('');\n  const [{\n    error,\n    fetching,\n    data\n  }, createBranch] = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.a4)();\n  const isLoading = fetching || !!(data !== null && data !== void 0 && (_data$createRef = data.createRef) !== null && _data$createRef !== void 0 && _data$createRef.__typename);\n  const config = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.S)();\n  const branchPrefix = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.a5)(config);\n  const propsForBranchPrefix = branchPrefix ? {\n    UNSAFE_className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.css)({\n      '& input': {\n        paddingInlineStart: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.tokenSchema.size.space.xsmall\n      }\n    }),\n    startElement: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n      alignItems: \"center\",\n      paddingStart: \"regular\",\n      justifyContent: \"center\",\n      pointerEvents: \"none\",\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n        color: \"neutralSecondary\",\n        children: branchPrefix\n      })\n    })\n  } : {};\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_22__.Dialog, {\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(\"form\", {\n      style: {\n        display: 'contents'\n      },\n      onSubmit: async event => {\n        var _result$data;\n        if (event.target !== event.currentTarget) return;\n        event.preventDefault();\n        const fullBranchName = (branchPrefix !== null && branchPrefix !== void 0 ? branchPrefix : '') + branchName;\n        const name = `refs/heads/${fullBranchName}`;\n        const result = await createBranch({\n          input: {\n            name,\n            oid: props.branchOid,\n            repositoryId\n          }\n        });\n        if ((_result$data = result.data) !== null && _result$data !== void 0 && (_result$data = _result$data.createRef) !== null && _result$data !== void 0 && _result$data.__typename) {\n          props.onCreate(fullBranchName);\n        }\n      },\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Heading, {\n        children: stringFormatter.format('newBranch')\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_slots__WEBPACK_IMPORTED_MODULE_34__.Content, {\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n          gap: \"large\",\n          direction: \"column\",\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_text_field__WEBPACK_IMPORTED_MODULE_26__.TextField, {\n            value: branchName,\n            onChange: setBranchName,\n            label: \"Branch name\",\n            description: props.reason,\n            autoFocus: true,\n            errorMessage: (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.a6)(error),\n            ...propsForBranchPrefix\n          })\n        })\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_1__.ButtonGroup, {\n        children: [isLoading && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_progress__WEBPACK_IMPORTED_MODULE_13__.ProgressCircle, {\n          isIndeterminate: true,\n          size: \"small\",\n          \"aria-label\": \"Creating Branch\"\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_1__.Button, {\n          isDisabled: isLoading,\n          onPress: props.onDismiss,\n          children: stringFormatter.format('cancel')\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_1__.Button, {\n          isDisabled: isLoading,\n          prominence: \"high\",\n          type: \"submit\",\n          children: \"Create branch and save\"\n        })]\n      })]\n    })\n  });\n}\nfunction ItemPageWrapper(props) {\n  var _props$config$collect;\n  const collectionConfig = (_props$config$collect = props.config.collections) === null || _props$config$collect === void 0 ? void 0 : _props$config$collect[props.collection];\n  if (!collectionConfig) notFound();\n  const format = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.V)(props.config, props.collection), [props.config, props.collection]);\n  const slugInfo = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    return {\n      slug: props.itemSlug,\n      field: collectionConfig.slugField\n    };\n  }, [collectionConfig.slugField, props.itemSlug]);\n  const draftData = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.q)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async () => {\n    const raw = await getDraft(['collection', props.collection, props.itemSlug]);\n    if (!raw) throw new Error('No draft found');\n    const stored = storedValSchema$2.parse(raw);\n    const parsed = parseEntry({\n      config: props.config,\n      dirpath: (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.W)(props.config, props.collection, stored.slug),\n      format,\n      schema: collectionConfig.schema,\n      slug: {\n        field: collectionConfig.slugField,\n        slug: stored.slug\n      }\n    }, stored.files);\n    return {\n      state: parsed.initialState,\n      savedAt: stored.savedAt,\n      treeKey: stored.beforeTreeKey\n    };\n  }, [collectionConfig, format, props.collection, props.config, props.itemSlug]));\n  const itemData = useItemData({\n    config: props.config,\n    dirpath: (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.W)(props.config, props.collection, props.itemSlug),\n    schema: collectionConfig.schema,\n    format,\n    slug: slugInfo\n  });\n  if (itemData.kind === 'error') {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(ItemPageShell, {\n      ...props,\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.X, {\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_notice__WEBPACK_IMPORTED_MODULE_23__.Notice, {\n          tone: \"critical\",\n          children: itemData.error.message\n        })\n      })\n    });\n  }\n  if (itemData.kind === 'loading' || draftData.kind === 'loading') {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(ItemPageShell, {\n      ...props,\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        minHeight: \"scale.3000\",\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_progress__WEBPACK_IMPORTED_MODULE_13__.ProgressCircle, {\n          \"aria-label\": \"Loading Item\",\n          isIndeterminate: true,\n          size: \"large\"\n        })\n      })\n    });\n  }\n  if (itemData.data === 'not-found') {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(ItemPageShell, {\n      ...props,\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.X, {\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_notice__WEBPACK_IMPORTED_MODULE_23__.Notice, {\n          tone: \"caution\",\n          children: \"Entry not found.\"\n        })\n      })\n    });\n  }\n  const loadedDraft = draftData.kind === 'loaded' ? draftData.data : undefined;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(ItemPage, {\n    collection: props.collection,\n    basePath: props.basePath,\n    config: props.config,\n    itemSlug: props.itemSlug,\n    initialState: itemData.data.initialState,\n    initialFiles: itemData.data.initialFiles,\n    draft: loadedDraft,\n    localTreeKey: itemData.data.localTreeKey\n  });\n}\nconst ItemPageShell = props => {\n  const router = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.u)();\n  const collectionConfig = props.config.collections[props.collection];\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.P, {\n    containerWidth: (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.Y)(collectionConfig),\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.a, {\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_breadcrumbs__WEBPACK_IMPORTED_MODULE_21__.Breadcrumbs, {\n        flex: true,\n        size: \"medium\",\n        minWidth: 0,\n        onAction: key => {\n          if (key === 'collection') {\n            router.push(`${props.basePath}/collection/${encodeURIComponent(props.collection)}`);\n          }\n        },\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_breadcrumbs__WEBPACK_IMPORTED_MODULE_21__.Item, {\n          children: collectionConfig.label\n        }, \"collection\"), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_breadcrumbs__WEBPACK_IMPORTED_MODULE_21__.Item, {\n          children: props.itemSlug\n        }, \"item\")]\n      }), props.headerActions]\n    }), props.children]\n  });\n};\n\nfunction CreateItemWrapper(props) {\n  var _props$config$collect;\n  const router = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.u)();\n  const duplicateSlug = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    const url = new URL(router.href, 'http://localhost');\n    return url.searchParams.get('duplicate');\n  }, [router.href]);\n  const collectionConfig = (_props$config$collect = props.config.collections) === null || _props$config$collect === void 0 ? void 0 : _props$config$collect[props.collection];\n  if (!collectionConfig) notFound();\n  const format = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.V)(props.config, props.collection), [props.config, props.collection]);\n  const draftData = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.q)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async () => {\n    const raw = await getDraft(['collection-create', props.collection, ...(duplicateSlug ? [duplicateSlug] : [])]);\n    if (!raw) throw new Error('No draft found');\n    const stored = storedValSchema$1.parse(raw);\n    const parsed = parseEntry({\n      config: props.config,\n      dirpath: (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.W)(props.config, props.collection, stored.slug),\n      format,\n      schema: collectionConfig.schema,\n      slug: {\n        field: collectionConfig.slugField,\n        slug: stored.slug\n      }\n    }, stored.files);\n    return {\n      state: parsed.initialState,\n      savedAt: stored.savedAt\n    };\n  }, [collectionConfig, duplicateSlug, format, props.collection, props.config]));\n  const slug = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    if (duplicateSlug) {\n      return {\n        field: collectionConfig.slugField,\n        slug: duplicateSlug\n      };\n    }\n  }, [duplicateSlug, collectionConfig.slugField]);\n  const itemData = useItemData({\n    config: props.config,\n    dirpath: (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.W)(props.config, props.collection, duplicateSlug !== null && duplicateSlug !== void 0 ? duplicateSlug : ''),\n    schema: collectionConfig.schema,\n    format,\n    slug\n  });\n  const duplicateInitalState = duplicateSlug && itemData.kind === 'loaded' && itemData.data !== 'not-found' ? itemData.data.initialState : undefined;\n  const duplicateInitalStateWithUpdatedSlug = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    if (duplicateInitalState) {\n      let slugFieldValue = duplicateInitalState[collectionConfig.slugField];\n      // we'll make a best effort to add something to the slug after duplicated so it's different\n      // but if it fails a user can change it before creating\n      // (e.g. potentially it's not just a text field so appending -copy might not work)\n      try {\n        const slugFieldSchema = collectionConfig.schema[collectionConfig.slugField];\n        if (slugFieldSchema.kind !== 'form' || slugFieldSchema.formKind !== 'slug') {\n          throw new Error('not slug field');\n        }\n        const serialized = slugFieldSchema.serializeWithSlug(slugFieldValue);\n        slugFieldValue = slugFieldSchema.parse(serialized.value, {\n          slug: `${serialized.slug}-copy`\n        });\n      } catch {}\n      return {\n        ...duplicateInitalState,\n        [collectionConfig.slugField]: slugFieldValue\n      };\n    }\n  }, [collectionConfig.schema, collectionConfig.slugField, duplicateInitalState]);\n  if (duplicateSlug && itemData.kind === 'error') {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.X, {\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_notice__WEBPACK_IMPORTED_MODULE_23__.Notice, {\n        tone: \"critical\",\n        children: itemData.error.message\n      })\n    });\n  }\n  if (duplicateSlug && itemData.kind === 'loading' || draftData.kind === 'loading') {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      minHeight: \"scale.3000\",\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_progress__WEBPACK_IMPORTED_MODULE_13__.ProgressCircle, {\n        \"aria-label\": \"Loading Item\",\n        isIndeterminate: true,\n        size: \"large\"\n      })\n    });\n  }\n  if (duplicateSlug && itemData.kind === 'loaded' && itemData.data === 'not-found') {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.X, {\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_notice__WEBPACK_IMPORTED_MODULE_23__.Notice, {\n        tone: \"caution\",\n        children: \"Entry not found.\"\n      })\n    });\n  }\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(CreateItem, {\n    collection: props.collection,\n    config: props.config,\n    basePath: props.basePath,\n    draft: draftData.kind === 'loaded' ? draftData.data : undefined,\n    duplicateSlug: duplicateSlug,\n    initialState: duplicateInitalStateWithUpdatedSlug\n  });\n}\nconst storedValSchema$1 = zod__WEBPACK_IMPORTED_MODULE_123__.z.object({\n  version: zod__WEBPACK_IMPORTED_MODULE_123__.z.literal(1),\n  savedAt: zod__WEBPACK_IMPORTED_MODULE_123__.z.date(),\n  slug: zod__WEBPACK_IMPORTED_MODULE_123__.z.string(),\n  files: zod__WEBPACK_IMPORTED_MODULE_123__.z.map(zod__WEBPACK_IMPORTED_MODULE_123__.z.string(), zod__WEBPACK_IMPORTED_MODULE_123__.z.instanceof(Uint8Array))\n});\nfunction CreateItem(props) {\n  var _props$config$collect2, _props$draft$state, _props$draft;\n  const stringFormatter = (0,_react_aria_i18n__WEBPACK_IMPORTED_MODULE_114__.useLocalizedStringFormatter)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.l);\n  const router = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.u)();\n  const collectionConfig = (_props$config$collect2 = props.config.collections) === null || _props$config$collect2 === void 0 ? void 0 : _props$config$collect2[props.collection];\n  if (!collectionConfig) notFound();\n  const [forceValidation, setForceValidation] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const schema = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.o)(collectionConfig.schema), [collectionConfig.schema]);\n  const initialState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    var _props$initialState;\n    return (_props$initialState = props.initialState) !== null && _props$initialState !== void 0 ? _props$initialState : (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.a7)(schema);\n  }, [props.initialState, schema]);\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)((_props$draft$state = (_props$draft = props.draft) === null || _props$draft === void 0 ? void 0 : _props$draft.state) !== null && _props$draft$state !== void 0 ? _props$draft$state : initialState);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (props.draft && state === props.draft.state) {\n      showDraftRestoredToast(props.draft.savedAt, false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.draft]);\n  const previewProps = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.Z)(schema, setState, () => undefined), [schema])(state);\n  const baseCommit = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.j)();\n  const slug = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.Q)(collectionConfig, state);\n  const formatInfo = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.V)(props.config, props.collection);\n  const basePath = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.W)(props.config, props.collection, slug);\n  const [createResult, _createItem, resetCreateItemState] = useUpsertItem({\n    state,\n    basePath,\n    initialFiles: undefined,\n    config: props.config,\n    schema: collectionConfig.schema,\n    format: formatInfo,\n    currentLocalTreeKey: undefined,\n    slug: {\n      field: collectionConfig.slugField,\n      value: slug\n    }\n  });\n  const createItem = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__._)(_createItem);\n  const hasChanged = useHasChanged({\n    initialState,\n    schema,\n    state,\n    slugField: collectionConfig.slugField\n  });\n  const hasCreated = createResult.kind === 'updated' || createResult.kind === 'loading';\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const key = ['collection-create', props.collection, ...(props.duplicateSlug ? [props.duplicateSlug] : [])];\n    if (hasChanged && !hasCreated) {\n      const serialized = serializeEntryToFiles({\n        basePath,\n        config: props.config,\n        format: formatInfo,\n        schema: collectionConfig.schema,\n        slug: {\n          field: collectionConfig.slugField,\n          value: slug\n        },\n        state\n      });\n      const files = new Map(serialized.map(x => [x.path, x.contents]));\n      const data = {\n        slug,\n        files,\n        savedAt: new Date(),\n        version: 1\n      };\n      setDraft(key, data);\n    } else {\n      delDraft(key);\n    }\n  }, [collectionConfig, slug, state, hasChanged, props.duplicateSlug, props.collection, props.config, basePath, formatInfo, hasCreated]);\n  let collectionPath = `${props.basePath}/collection/${encodeURIComponent(props.collection)}`;\n  const currentSlug = createResult.kind === 'updated' || createResult.kind === 'loading' ? slug : undefined;\n  const slugInfo = useSlugFieldInfo(props.collection, currentSlug);\n  const onCreate = async () => {\n    if (createResult.kind === 'loading') return;\n    if (!(0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.a1)(schema, state, slugInfo)) {\n      setForceValidation(true);\n      return;\n    }\n    if (await createItem()) {\n      const slug = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.Q)(collectionConfig, state);\n      router.push(`${collectionPath}/item/${encodeURIComponent(slug)}`);\n      _keystar_ui_toast__WEBPACK_IMPORTED_MODULE_24__.toastQueue.positive('Entry created', {\n        timeout: 5000\n      }); // TODO: l10n\n    }\n  };\n\n  // note we're still \"loading\" when it's already been created\n  // since we're waiting to go to the item page\n  const isLoading = createResult.kind === 'loading' || createResult.kind === 'updated';\n  const formID = 'item-create-form';\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.Fragment, {\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.P, {\n      containerWidth: (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.Y)(collectionConfig),\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.a, {\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_breadcrumbs__WEBPACK_IMPORTED_MODULE_21__.Breadcrumbs, {\n          size: \"medium\",\n          flex: true,\n          minWidth: 0,\n          onAction: key => {\n            if (key === 'collection') {\n              router.push(collectionPath);\n            }\n          },\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_breadcrumbs__WEBPACK_IMPORTED_MODULE_21__.Item, {\n            children: collectionConfig.label\n          }, \"collection\"), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_breadcrumbs__WEBPACK_IMPORTED_MODULE_21__.Item, {\n            children: stringFormatter.format('add')\n          }, \"current\")]\n        }), isLoading && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_progress__WEBPACK_IMPORTED_MODULE_13__.ProgressCircle, {\n          \"aria-label\": \"Creating entry\",\n          isIndeterminate: true,\n          size: \"small\"\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_38__.TooltipTrigger, {\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_1__.Button, {\n            prominence: \"low\",\n            \"aria-label\": \"Reset\",\n            onPress: () => {\n              setState(initialState);\n              setForceValidation(false);\n            },\n            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_2__.Icon, {\n              src: _keystar_ui_icon_icons_historyIcon__WEBPACK_IMPORTED_MODULE_44__.historyIcon\n            })\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_tooltip__WEBPACK_IMPORTED_MODULE_38__.Tooltip, {\n            children: \"Reset\"\n          })]\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_1__.Button, {\n          isDisabled: isLoading,\n          prominence: \"high\",\n          type: \"submit\",\n          form: formID,\n          marginStart: \"auto\",\n          children: stringFormatter.format('create')\n        })]\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n        id: formID,\n        elementType: \"form\",\n        onSubmit: event => {\n          if (event.target !== event.currentTarget) return;\n          event.preventDefault();\n          onCreate();\n        },\n        direction: \"column\",\n        gap: \"xxlarge\",\n        height: \"100%\",\n        minHeight: 0,\n        minWidth: 0,\n        children: [createResult.kind === 'error' && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_notice__WEBPACK_IMPORTED_MODULE_23__.Notice, {\n          tone: \"critical\",\n          children: createResult.error.message\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.a2, {\n          previewProps: previewProps,\n          forceValidation: forceValidation,\n          entryLayout: collectionConfig.entryLayout,\n          formatInfo: formatInfo,\n          slugField: slugInfo\n        })]\n      })]\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_22__.DialogContainer\n    // ideally this would be a popover on desktop but using a DialogTrigger\n    // wouldn't work since this doesn't open on click but after doing a\n    // network request and it failing and manually wiring about a popover\n    // and modal would be a pain\n    , {\n      onDismiss: resetCreateItemState,\n      children: createResult.kind === 'needs-new-branch' && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(CreateBranchDuringUpdateDialog, {\n        branchOid: baseCommit,\n        onCreate: async newBranch => {\n          router.push(`/keystatic/branch/${encodeURIComponent(newBranch)}/collection/${encodeURIComponent(props.collection)}/create`);\n          if (await createItem({\n            branch: newBranch,\n            sha: baseCommit\n          })) {\n            const slug = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.Q)(collectionConfig, state);\n            router.push(`/keystatic/branch/${encodeURIComponent(newBranch)}/collection/${encodeURIComponent(props.collection)}/item/${encodeURIComponent(slug)}`);\n          }\n        },\n        reason: createResult.reason,\n        onDismiss: resetCreateItemState\n      })\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_22__.DialogContainer\n    // ideally this would be a popover on desktop but using a DialogTrigger\n    // wouldn't work since this doesn't open on click but after doing a\n    // network request and it failing and manually wiring about a popover\n    // and modal would be a pain\n    , {\n      onDismiss: resetCreateItemState,\n      children: createResult.kind === 'needs-fork' && (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.v)(props.config) && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(ForkRepoDialog, {\n        onCreate: async () => {\n          if (await createItem()) {\n            const slug = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.Q)(collectionConfig, state);\n            router.push(`${collectionPath}/item/${encodeURIComponent(slug)}`);\n          }\n        },\n        onDismiss: resetCreateItemState,\n        config: props.config\n      })\n    })]\n  });\n}\n\nconst DashboardSection = ({\n  children,\n  title\n}) => {\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n    elementType: \"section\",\n    direction: \"column\",\n    gap: \"medium\",\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n      casing: \"uppercase\",\n      color: \"neutralTertiary\",\n      size: \"small\",\n      weight: \"bold\",\n      elementType: \"h2\",\n      children: title\n    }), children]\n  });\n};\nconst FILL_COLS = 'fill';\nconst DashboardGrid = props => {\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(\"div\", {\n    className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.css)({\n      display: 'grid',\n      gap: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.tokenSchema.size.space.large,\n      gridAutoRows: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.tokenSchema.size.element.xlarge,\n      gridTemplateColumns: `[${FILL_COLS}-start] 1fr [${FILL_COLS}-end]`,\n      [_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.containerQueries.above.mobile]: {\n        gridTemplateColumns: `[${FILL_COLS}-start] 1fr 1fr [${FILL_COLS}-end]`\n      },\n      [_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.containerQueries.above.tablet]: {\n        gridTemplateColumns: `[${FILL_COLS}-start] 1fr 1fr 1fr [${FILL_COLS}-end]`\n      }\n    }),\n    ...props\n  });\n};\nconst DashboardCard = props => {\n  const ref = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const {\n    linkProps\n  } = (0,_keystar_ui_link__WEBPACK_IMPORTED_MODULE_12__.useLink)(props, ref);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n    alignItems: \"center\",\n    backgroundColor: \"canvas\",\n    padding: \"large\",\n    position: \"relative\",\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n      direction: \"column\",\n      gap: \"medium\",\n      flex: true,\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Heading, {\n        elementType: \"h3\",\n        size: \"small\",\n        truncate: true,\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(\"a\", {\n          ref: ref,\n          href: props.href,\n          ...linkProps,\n          className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.classNames)((0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.css)({\n            color: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.tokenSchema.color.foreground.neutral,\n            outline: 'none',\n            '&:hover': {\n              color: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.tokenSchema.color.foreground.neutralEmphasis,\n              '::before': {\n                backgroundColor: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.tokenSchema.color.alias.backgroundIdle,\n                borderColor: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.tokenSchema.color.border.neutral\n              }\n            },\n            '&:active': {\n              '::before': {\n                backgroundColor: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.tokenSchema.color.alias.backgroundHovered,\n                borderColor: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.tokenSchema.color.alias.borderHovered\n              }\n            },\n            '&:focus-visible::before': {\n              outline: `${_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.tokenSchema.size.alias.focusRing} solid ${_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.tokenSchema.color.alias.focusRing}`,\n              outlineOffset: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.tokenSchema.size.alias.focusRingGap\n            },\n            // fill the available space so that the card is clickable\n            '::before': {\n              border: `${_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.tokenSchema.size.border.regular} solid ${_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.tokenSchema.color.border.muted}`,\n              borderRadius: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.tokenSchema.size.radius.medium,\n              content: '\"\"',\n              position: 'absolute',\n              inset: 0,\n              transition: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.transition)(['background-color', 'border-color'])\n            }\n          })),\n          children: props.label\n        })\n      }), props.children]\n    }), props.endElement]\n  });\n};\n\nfunction useLocalizedString() {\n  let stringFormatter = (0,_react_aria_i18n__WEBPACK_IMPORTED_MODULE_114__.useLocalizedStringFormatter)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.l);\n  return stringFormatter;\n}\n\nfunction BranchSection(props) {\n  let branchInfo = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.c)();\n  let router = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.u)();\n  let localizedString = useLocalizedString();\n  if ((0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.i)(props.config)) {\n    return null;\n  }\n  let repoURL = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.$)(branchInfo);\n  let isDefaultBranch = branchInfo.currentBranch === branchInfo.defaultBranch;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(DashboardSection, {\n    title: localizedString.format('currentBranch'),\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n      alignItems: \"center\",\n      gap: \"regular\",\n      border: \"muted\",\n      borderRadius: \"medium\",\n      backgroundColor: \"canvas\",\n      padding: \"large\",\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_2__.Icon, {\n        src: _keystar_ui_icon_icons_gitBranchIcon__WEBPACK_IMPORTED_MODULE_57__.gitBranchIcon,\n        color: \"neutralTertiary\"\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n        size: \"medium\",\n        weight: \"semibold\",\n        children: branchInfo.currentBranch\n      })]\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n      gap: \"regular\",\n      wrap: true,\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_22__.DialogTrigger, {\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_1__.ActionButton, {\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_2__.Icon, {\n            src: _keystar_ui_icon_icons_gitBranchPlusIcon__WEBPACK_IMPORTED_MODULE_58__.gitBranchPlusIcon\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n            children: localizedString.format('newBranch')\n          })]\n        }), close => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.a8, {\n          onDismiss: close,\n          onCreate: branchName => {\n            close();\n            router.push(router.href.replace(/\\/branch\\/[^/]+/, '/branch/' + encodeURIComponent(branchName)));\n          }\n        })]\n      }), !isDefaultBranch && (branchInfo.pullRequestNumber === undefined ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_1__.ActionButton, {\n        href: `${repoURL}/pull/new/${branchInfo.currentBranch}`,\n        target: \"_blank\",\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_2__.Icon, {\n          src: _keystar_ui_icon_icons_gitPullRequestIcon__WEBPACK_IMPORTED_MODULE_59__.gitPullRequestIcon\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n          children: localizedString.format('createPullRequest')\n        })]\n      }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_1__.ActionButton, {\n        href: `${repoURL}/pull/${branchInfo.pullRequestNumber}`,\n        target: \"_blank\",\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_2__.Icon, {\n          src: _keystar_ui_icon_icons_gitPullRequestIcon__WEBPACK_IMPORTED_MODULE_59__.gitPullRequestIcon\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n          children: [\"Pull request #\", branchInfo.pullRequestNumber]\n        })]\n      }))]\n    })]\n  });\n}\n\nfunction DashboardCards() {\n  const navItems = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.a9)();\n  const hasSections = navItems.some(item => 'children' in item);\n  const items = navItems.map(item => renderItemOrGroup(item));\n  return hasSections ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.Fragment, {\n    children: items\n  }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(DashboardSection, {\n    title: \"Content\",\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(DashboardGrid, {\n      children: items\n    })\n  });\n}\nlet dividerCount = 0;\nfunction renderItemOrGroup(itemOrGroup) {\n  if ('isDivider' in itemOrGroup) {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n      gridColumn: FILL_COLS,\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Divider, {\n        alignSelf: \"center\",\n        size: \"medium\",\n        width: \"alias.singleLineWidth\"\n      })\n    }, dividerCount++);\n  }\n  if ('children' in itemOrGroup) {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(DashboardSection, {\n      title: itemOrGroup.title,\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(DashboardGrid, {\n        children: itemOrGroup.children.map(child => renderItemOrGroup(child))\n      })\n    }, itemOrGroup.title);\n  }\n  let changeElement = (() => {\n    if (!itemOrGroup.changed) {\n      return undefined;\n    }\n    return typeof itemOrGroup.changed === 'number' ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_badge__WEBPACK_IMPORTED_MODULE_41__.Badge, {\n      tone: \"accent\",\n      marginStart: \"auto\",\n      children: (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.aa)(itemOrGroup.changed, {\n        singular: 'change',\n        plural: 'changes'\n      })\n    }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_badge__WEBPACK_IMPORTED_MODULE_41__.Badge, {\n      tone: \"accent\",\n      children: \"Changed\"\n    });\n  })();\n  let endElement = (() => {\n    // entry counts are only available for collections\n    if (typeof itemOrGroup.entryCount !== 'number') {\n      return changeElement;\n    }\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n      gap: \"medium\",\n      alignItems: \"center\",\n      children: [changeElement, /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_1__.ActionButton, {\n        \"aria-label\": \"Add\",\n        href: `${itemOrGroup.href}/create`,\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_2__.Icon, {\n          src: _keystar_ui_icon_icons_plusIcon__WEBPACK_IMPORTED_MODULE_60__.plusIcon\n        })\n      })]\n    });\n  })();\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(DashboardCard, {\n    label: itemOrGroup.label,\n    href: itemOrGroup.href,\n    endElement: endElement,\n    children: typeof itemOrGroup.entryCount === 'number' ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n      color: \"neutralSecondary\",\n      children: (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.aa)(itemOrGroup.entryCount, {\n        singular: 'entry',\n        plural: 'entries'\n      })\n    }) : null\n  }, itemOrGroup.key);\n}\n\nfunction DashboardPage(props) {\n  var _viewer$name;\n  const stringFormatter = (0,_react_aria_i18n__WEBPACK_IMPORTED_MODULE_114__.useLocalizedStringFormatter)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.l);\n  const viewer = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.ab)();\n  const cloudInfo = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.ac)();\n  const user = viewer ? {\n    name: (_viewer$name = viewer.name) !== null && _viewer$name !== void 0 ? _viewer$name : viewer.login,\n    avatarUrl: viewer.avatarUrl\n  } : cloudInfo === null || cloudInfo === void 0 ? void 0 : cloudInfo.user;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.P, {\n    containerWidth: \"large\",\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.a, {\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Heading, {\n        elementType: \"h1\",\n        id: \"page-title\",\n        size: \"small\",\n        children: stringFormatter.format('dashboard')\n      })\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.X, {\n      isScrollable: true,\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n        direction: \"column\",\n        gap: \"xxlarge\",\n        children: [user && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(UserInfo, {\n          user: user,\n          manageAccount: !!cloudInfo\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(BranchSection, {\n          config: props.config\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(DashboardCards, {})]\n      })\n    })]\n  });\n}\nfunction UserInfo({\n  user,\n  manageAccount\n}) {\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n    alignItems: \"center\",\n    gap: \"medium\",\n    isHidden: {\n      below: 'tablet'\n    },\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_avatar__WEBPACK_IMPORTED_MODULE_56__.Avatar, {\n      src: user.avatarUrl,\n      name: user.name,\n      size: \"large\"\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.VStack, {\n      gap: \"medium\",\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Heading, {\n        size: \"medium\",\n        elementType: \"p\",\n        UNSAFE_style: {\n          fontWeight: _keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.tokenSchema.typography.fontWeight.bold\n        },\n        children: [\"Hello, \", user.name, \"!\"]\n      }), manageAccount && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_link__WEBPACK_IMPORTED_MODULE_12__.TextLink, {\n        href: \"https://keystatic.cloud/account\",\n        children: \"Manage Account\"\n      })]\n    })]\n  });\n}\n\nconst MainPanelLayout = props => {\n  let isBelowDesktop = (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.useMediaQuery)(_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.breakpointQueries.below.desktop);\n  let sidebarState = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.ad)();\n  let ref = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  let context = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.ae)(ref);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.af, {\n    value: context,\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_split_view__WEBPACK_IMPORTED_MODULE_46__.SplitView, {\n      autoSaveId: \"keystatic-app-split-view\",\n      isCollapsed: isBelowDesktop || !sidebarState.isOpen,\n      onCollapseChange: sidebarState.toggle,\n      defaultSize: 260,\n      minSize: 180,\n      maxSize: 400\n      // styles\n      ,\n      height: \"100vh\",\n      children: [isBelowDesktop ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.ag, {}) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_split_view__WEBPACK_IMPORTED_MODULE_46__.SplitPanePrimary, {\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.ah, {})\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_split_view__WEBPACK_IMPORTED_MODULE_46__.SplitPaneSecondary, {\n        ref: ref,\n        children: props.children\n      })]\n    })\n  });\n};\n\nconst AppShell = props => {\n  const content = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.ai.Consumer, {\n    children: error => error && !(error !== null && error !== void 0 && error.graphQLErrors.some(err => {\n      var _err$originalError;\n      return (err === null || err === void 0 || (_err$originalError = err.originalError) === null || _err$originalError === void 0 ? void 0 : _err$originalError.type) === 'NOT_FOUND';\n    })) ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(EmptyState, {\n      icon: _keystar_ui_icon_icons_alertCircleIcon__WEBPACK_IMPORTED_MODULE_8__.alertCircleIcon,\n      title: \"Failed to load shell\",\n      message: error.message\n    }) : props.children\n  });\n  const inner = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.aj.Provider, {\n    value: props.config,\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.ak.Provider, {\n      value: {\n        basePath: props.basePath\n      },\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.al, {\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(MainPanelLayout, {\n          children: content\n        })\n      })\n    })\n  });\n  if ((0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.v)(props.config) || props.config.storage.kind === 'cloud') {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.am, {\n      currentBranch: props.currentBranch,\n      config: props.config,\n      children: inner\n    });\n  }\n  if ((0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.i)(props.config)) {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.an, {\n      config: props.config,\n      children: inner\n    });\n  }\n  return null;\n};\n\nfunction SingletonPage({\n  singleton,\n  initialFiles,\n  initialState,\n  localTreeKey,\n  config,\n  draft\n}) {\n  var _getPathPrefix, _getPathPrefix2;\n  const [forceValidation, setForceValidation] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const singletonConfig = config.singletons[singleton];\n  const schema = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.o)(singletonConfig.schema), [singletonConfig.schema]);\n  const singletonPath = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.ap)(config, singleton);\n  const router = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.u)();\n  const [{\n    state,\n    localTreeKey: localTreeKeyInState\n  }, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => {\n    var _draft$state;\n    return {\n      localTreeKey: localTreeKey,\n      state: (_draft$state = draft === null || draft === void 0 ? void 0 : draft.state) !== null && _draft$state !== void 0 ? _draft$state : initialState === null ? (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.a7)(schema) : initialState\n    };\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (draft && state === draft.state) {\n      showDraftRestoredToast(draft.savedAt, localTreeKey !== draft.treeKey);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [draft]);\n  if (localTreeKeyInState !== localTreeKey) {\n    setState({\n      localTreeKey: localTreeKey,\n      state: initialState === null ? (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.a7)(schema) : initialState\n    });\n  }\n  const isCreating = initialState === null;\n  const hasChanged = useHasChanged({\n    initialState,\n    state,\n    schema,\n    slugField: undefined\n  }) || isCreating;\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const key = ['singleton', singleton];\n    if (hasChanged) {\n      const serialized = serializeEntryToFiles({\n        basePath: singletonPath,\n        config,\n        format: (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.ao)(config, singleton),\n        schema: singletonConfig.schema,\n        slug: undefined,\n        state\n      });\n      const files = new Map(serialized.map(x => [x.path, x.contents]));\n      const data = {\n        beforeTreeKey: localTreeKey,\n        files,\n        savedAt: new Date(),\n        version: 1\n      };\n      setDraft(key, data);\n    } else {\n      delDraft(key);\n    }\n  }, [config, localTreeKey, state, hasChanged, singleton, singletonPath, singletonConfig]);\n  const previewProps = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.Z)(schema, stateUpdater => {\n    setState(state => ({\n      localTreeKey: state.localTreeKey,\n      state: stateUpdater(state.state)\n    }));\n  }, () => undefined), [schema])(state);\n  const baseCommit = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.j)();\n  const formatInfo = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.ao)(config, singleton);\n  const [updateResult, _update, resetUpdateItem] = useUpsertItem({\n    state,\n    initialFiles,\n    config,\n    schema: singletonConfig.schema,\n    basePath: singletonPath,\n    format: formatInfo,\n    currentLocalTreeKey: localTreeKey,\n    slug: undefined\n  });\n  const update = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__._)(_update);\n  const onCreate = async () => {\n    if (updateResult.kind === 'loading' || !hasChanged) return;\n    if (!(0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.a1)(schema, state, undefined)) {\n      setForceValidation(true);\n      return;\n    }\n    await update();\n  };\n  const formID = 'singleton-form';\n  const onReset = () => setState({\n    localTreeKey: localTreeKey,\n    state: initialState === null ? (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.a7)(schema) : initialState\n  });\n  const isBelowTablet = (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.useMediaQuery)(_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.breakpointQueries.below.tablet);\n  const branchInfo = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.c)();\n  const previewHref = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    if (!singletonConfig.previewUrl) return undefined;\n    return singletonConfig.previewUrl.replace('{branch}', branchInfo.currentBranch);\n  }, [branchInfo.currentBranch, singletonConfig.previewUrl]);\n  const isGitHub = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.v)(config) || (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.aq)(config);\n  const singletonExists = !!initialState;\n  const viewHref = isGitHub && singletonExists ? `${(0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.$)(branchInfo)}${formatInfo.dataLocation === 'index' ? `/tree/${branchInfo.currentBranch}/${(_getPathPrefix = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.x)(config.storage)) !== null && _getPathPrefix !== void 0 ? _getPathPrefix : ''}${singletonPath}` : `/blob/${(_getPathPrefix2 = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.x)(config.storage)) !== null && _getPathPrefix2 !== void 0 ? _getPathPrefix2 : ''}${branchInfo.currentBranch}/${singletonPath}${(0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.a0)(formatInfo)}`}` : undefined;\n  const menuActions = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    const actions = [{\n      key: 'reset',\n      label: 'Reset',\n      icon: _keystar_ui_icon_icons_historyIcon__WEBPACK_IMPORTED_MODULE_44__.historyIcon\n    }];\n    if (previewHref) {\n      actions.push({\n        key: 'preview',\n        label: 'Preview',\n        icon: _keystar_ui_icon_icons_externalLinkIcon__WEBPACK_IMPORTED_MODULE_43__.externalLinkIcon,\n        href: previewHref,\n        target: '_blank',\n        rel: 'noopener noreferrer'\n      });\n    }\n    if (viewHref) {\n      actions.push({\n        key: 'view',\n        label: 'View on GitHub',\n        icon: _keystar_ui_icon_icons_githubIcon__WEBPACK_IMPORTED_MODULE_4__.githubIcon,\n        href: viewHref,\n        target: '_blank',\n        rel: 'noopener noreferrer'\n      });\n    }\n    return actions;\n  }, [previewHref, viewHref]);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.P, {\n    containerWidth: (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.Y)(singletonConfig),\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.a, {\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n        flex: true,\n        alignItems: \"center\",\n        gap: \"regular\",\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Heading, {\n          elementType: \"h1\",\n          id: \"page-title\",\n          size: \"small\",\n          children: singletonConfig.label\n        }), updateResult.kind === 'loading' ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_progress__WEBPACK_IMPORTED_MODULE_13__.ProgressCircle, {\n          \"aria-label\": `Updating ${singletonConfig.label}`,\n          isIndeterminate: true,\n          size: \"small\",\n          alignSelf: \"center\"\n        }) : hasChanged && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_badge__WEBPACK_IMPORTED_MODULE_41__.Badge, {\n          tone: \"pending\",\n          children: \"Unsaved\"\n        })]\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_action_group__WEBPACK_IMPORTED_MODULE_40__.ActionGroup, {\n        buttonLabelBehavior: \"hide\",\n        overflowMode: \"collapse\",\n        prominence: \"low\",\n        density: \"compact\",\n        maxWidth: isBelowTablet ? 'element.regular' : undefined // force switch to action menu on small devices\n        ,\n        items: menuActions,\n        disabledKeys: hasChanged ? [] : ['reset'],\n        onAction: key => {\n          switch (key) {\n            case 'reset':\n              onReset();\n              break;\n          }\n        },\n        children: item => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_action_group__WEBPACK_IMPORTED_MODULE_40__.Item, {\n          textValue: item.label,\n          href: item.href,\n          target: item.target,\n          rel: item.rel,\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_2__.Icon, {\n            src: item.icon\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n            children: item.label\n          })]\n        }, item.key)\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_1__.Button, {\n        form: formID,\n        isDisabled: updateResult.kind === 'loading',\n        prominence: \"high\",\n        type: \"submit\",\n        children: isCreating ? 'Create' : 'Save'\n      })]\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n      elementType: \"form\",\n      id: formID,\n      onSubmit: event => {\n        if (event.target !== event.currentTarget) return;\n        event.preventDefault();\n        onCreate();\n      },\n      direction: \"column\",\n      gap: \"xxlarge\",\n      height: \"100%\",\n      minHeight: 0,\n      minWidth: 0,\n      children: [updateResult.kind === 'error' && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_notice__WEBPACK_IMPORTED_MODULE_23__.Notice, {\n        tone: \"critical\",\n        children: updateResult.error.message\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.a2, {\n        previewProps: previewProps,\n        forceValidation: forceValidation,\n        entryLayout: singletonConfig.entryLayout,\n        formatInfo: formatInfo,\n        slugField: undefined\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_22__.DialogContainer\n      // ideally this would be a popover on desktop but using a DialogTrigger wouldn't work since\n      // this doesn't open on click but after doing a network request and it failing and manually wiring about a popover and modal would be a pain\n      , {\n        onDismiss: resetUpdateItem,\n        children: updateResult.kind === 'needs-new-branch' && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(CreateBranchDuringUpdateDialog, {\n          branchOid: baseCommit,\n          onCreate: async newBranch => {\n            router.push(`/keystatic/branch/${encodeURIComponent(newBranch)}/singleton/${encodeURIComponent(singleton)}`);\n            update({\n              branch: newBranch,\n              sha: baseCommit\n            });\n          },\n          reason: updateResult.reason,\n          onDismiss: resetUpdateItem\n        })\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_dialog__WEBPACK_IMPORTED_MODULE_22__.DialogContainer\n      // ideally this would be a popover on desktop but using a DialogTrigger\n      // wouldn't work since this doesn't open on click but after doing a\n      // network request and it failing and manually wiring about a popover\n      // and modal would be a pain\n      , {\n        onDismiss: resetUpdateItem,\n        children: updateResult.kind === 'needs-fork' && (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.v)(config) && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(ForkRepoDialog, {\n          onCreate: async () => {\n            update();\n          },\n          onDismiss: resetUpdateItem,\n          config: config\n        })\n      })]\n    })]\n  });\n}\nconst storedValSchema = zod__WEBPACK_IMPORTED_MODULE_123__.z.object({\n  version: zod__WEBPACK_IMPORTED_MODULE_123__.z.literal(1),\n  savedAt: zod__WEBPACK_IMPORTED_MODULE_123__.z.date(),\n  beforeTreeKey: zod__WEBPACK_IMPORTED_MODULE_123__.z.string().optional(),\n  files: zod__WEBPACK_IMPORTED_MODULE_123__.z.map(zod__WEBPACK_IMPORTED_MODULE_123__.z.string(), zod__WEBPACK_IMPORTED_MODULE_123__.z.instanceof(Uint8Array))\n});\nfunction SingletonPageWrapper(props) {\n  var _props$config$singlet;\n  const singletonConfig = (_props$config$singlet = props.config.singletons) === null || _props$config$singlet === void 0 ? void 0 : _props$config$singlet[props.singleton];\n  if (!singletonConfig) notFound();\n  const header = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.a, {\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Heading, {\n      elementType: \"h1\",\n      id: \"page-title\",\n      size: \"small\",\n      children: singletonConfig.label\n    })\n  });\n  const format = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.ao)(props.config, props.singleton), [props.config, props.singleton]);\n  const dirpath = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.ap)(props.config, props.singleton);\n  const draftData = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.q)((0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async () => {\n    const raw = await getDraft(['singleton', props.singleton]);\n    if (!raw) throw new Error('No draft found');\n    const stored = storedValSchema.parse(raw);\n    const parsed = parseEntry({\n      config: props.config,\n      dirpath,\n      format,\n      schema: singletonConfig.schema,\n      slug: undefined\n    }, stored.files);\n    return {\n      state: parsed.initialState,\n      savedAt: stored.savedAt,\n      treeKey: stored.beforeTreeKey\n    };\n  }, [dirpath, format, props.config, props.singleton, singletonConfig.schema]));\n  const itemData = useItemData({\n    config: props.config,\n    dirpath,\n    schema: singletonConfig.schema,\n    format,\n    slug: undefined\n  });\n  if (itemData.kind === 'error') {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.P, {\n      children: [header, /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.X, {\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_notice__WEBPACK_IMPORTED_MODULE_23__.Notice, {\n          margin: \"xxlarge\",\n          tone: \"critical\",\n          children: itemData.error.message\n        })\n      })]\n    });\n  }\n  if (itemData.kind === 'loading' || draftData.kind === 'loading') {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.P, {\n      children: [header, /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.X, {\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          minHeight: \"scale.3000\",\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_progress__WEBPACK_IMPORTED_MODULE_13__.ProgressCircle, {\n            \"aria-label\": `Loading ${singletonConfig.label}`,\n            isIndeterminate: true,\n            size: \"large\"\n          })\n        })\n      })]\n    });\n  }\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(SingletonPage, {\n    singleton: props.singleton,\n    config: props.config,\n    initialState: itemData.data === 'not-found' ? null : itemData.data.initialState,\n    initialFiles: itemData.data === 'not-found' ? [] : itemData.data.initialFiles,\n    localTreeKey: itemData.data === 'not-found' ? undefined : itemData.data.localTreeKey,\n    draft: draftData.kind === 'loaded' ? draftData.data : undefined\n  });\n}\n\nfunction CreatedGitHubApp(props) {\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    margin: \"xxlarge\",\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n      backgroundColor: \"surface\",\n      padding: \"large\",\n      border: \"color.alias.borderIdle\",\n      borderRadius: \"medium\",\n      direction: \"column\",\n      justifyContent: \"center\",\n      gap: \"xlarge\",\n      maxWidth: \"scale.4600\",\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Heading, {\n        children: \"You've installed Keystatic! \\uD83C\\uDF89\"\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n        children: \"To start using Keystatic, you need to install the GitHub app you've created.\"\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n        children: [\"Make sure to add the App to the\", ' ', /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(\"code\", {\n          children: (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.s)(props.config.storage.repo)\n        }), ' ', \"repository.\"]\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(InstallGitHubApp, {\n        config: props.config\n      })]\n    })\n  });\n}\n\nfunction KeystaticSetup(props) {\n  const [deployedURL, setDeployedURL] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)('');\n  const [organization, setOrganization] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)('');\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    margin: \"xxlarge\",\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n      backgroundColor: \"surface\",\n      padding: \"large\",\n      border: \"color.alias.borderIdle\",\n      borderRadius: \"medium\",\n      direction: \"column\",\n      justifyContent: \"center\",\n      gap: \"xlarge\",\n      maxWidth: \"scale.4600\",\n      elementType: \"form\",\n      action: `https://github.com${organization ? `/organizations/${organization}` : ''}/settings/apps/new`,\n      method: \"post\",\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n        justifyContent: \"center\",\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Heading, {\n          children: \"Keystatic Setup\"\n        })\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n        children: \"Keystatic doesn't have the required config.\"\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n        children: \"If you've already created your GitHub app, make sure to add the following environment variables:\"\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Box, {\n        elementType: \"ul\",\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(\"li\", {\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(\"code\", {\n            children: \"KEYSTATIC_GITHUB_CLIENT_ID\"\n          })\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(\"li\", {\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(\"code\", {\n            children: \"KEYSTATIC_GITHUB_CLIENT_SECRET\"\n          })\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(\"li\", {\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(\"code\", {\n            children: \"KEYSTATIC_SECRET\"\n          })\n        })]\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n        children: \"If you haven't created your GitHub app for Keystatic, you can create one below.\"\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_text_field__WEBPACK_IMPORTED_MODULE_26__.TextField, {\n        label: \"Deployed App URL\",\n        description: \"This should the root of your domain. If you're not sure where Keystatic will be deployed, leave this blank and you can update the GitHub app later.\",\n        value: deployedURL,\n        onChange: setDeployedURL\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_text_field__WEBPACK_IMPORTED_MODULE_26__.TextField, {\n        label: \"GitHub organization (if any)\",\n        description: \"You must be an owner or GitHub App manager in the organization to create the GitHub App. Leave this blank to create the app in your personal account.\",\n        value: organization,\n        onChange: setOrganization\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n        children: [\"After visiting GitHub to create the GitHub app, you'll be redirected back here and secrets generated from GitHub will be written to your\", ' ', /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(\"code\", {\n          children: \".env\"\n        }), \" file.\"]\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(\"input\", {\n        type: \"text\",\n        name: \"manifest\",\n        className: (0,_keystar_ui_style__WEBPACK_IMPORTED_MODULE_16__.css)({\n          display: 'none'\n        }),\n        value: JSON.stringify({\n          name: `${(0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.p)(props.config.storage.repo).owner} Keystatic`,\n          url: deployedURL ? `${deployedURL}/keystatic` : `${window.location.origin}/keystatic`,\n          public: true,\n          redirect_url: `${window.location.origin}/api/keystatic/github/created-app`,\n          callback_urls: [`${window.location.origin}/api/keystatic/github/oauth/callback`, `http://127.0.0.1/api/keystatic/github/oauth/callback`, ...(deployedURL ? [`${deployedURL}/api/keystatic/github/oauth/callback`] : [])],\n          request_oauth_on_install: true,\n          default_permissions: {\n            contents: 'write',\n            metadata: 'read',\n            pull_requests: 'read'\n          }\n        })\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_1__.Button, {\n        prominence: \"high\",\n        type: \"submit\",\n        children: \"Create GitHub App\"\n      })]\n    })\n  });\n}\n\nfunction RepoNotFound(props) {\n  const repo = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.s)(props.config.storage.repo);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    margin: \"xxlarge\",\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n      backgroundColor: \"surface\",\n      padding: \"large\",\n      border: \"color.alias.borderIdle\",\n      borderRadius: \"medium\",\n      direction: \"column\",\n      justifyContent: \"center\",\n      gap: \"xlarge\",\n      maxWidth: \"scale.4600\",\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n        justifyContent: \"center\",\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Heading, {\n          children: \"Repo not found\"\n        })\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n        children: [\"Keystatic is configured for the\", ' ', /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(\"a\", {\n          href: `https://github.com/${repo}`,\n          children: repo\n        }), \" GitHub repo but Keystatic isn't able to access this repo. This is either because you don't have access to this repo or you haven't added the GitHub app to it.\"]\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(InstallGitHubApp, {\n        config: props.config\n      })]\n    })\n  });\n}\n\nconst storedStateSchema = zod__WEBPACK_IMPORTED_MODULE_123__.z.object({\n  state: zod__WEBPACK_IMPORTED_MODULE_123__.z.string(),\n  from: zod__WEBPACK_IMPORTED_MODULE_123__.z.string(),\n  code_verifier: zod__WEBPACK_IMPORTED_MODULE_123__.z.string()\n});\nconst tokenResponseSchema = zod__WEBPACK_IMPORTED_MODULE_123__.z.object({\n  access_token: zod__WEBPACK_IMPORTED_MODULE_123__.z.string(),\n  token_type: zod__WEBPACK_IMPORTED_MODULE_123__.z.string(),\n  expires_in: zod__WEBPACK_IMPORTED_MODULE_123__.z.number()\n});\nfunction KeystaticCloudAuthCallback({\n  config\n}) {\n  var _config$cloud2;\n  const router = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.u)();\n  const url = new URL(window.location.href);\n  const code = url.searchParams.get('code');\n  const state = url.searchParams.get('state');\n  const storedState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    const _storedState = localStorage.getItem('keystatic-cloud-state');\n    const storedState = storedStateSchema.safeParse((() => {\n      try {\n        return JSON.parse(_storedState || '');\n      } catch {\n        return null;\n      }\n    })());\n    return storedState;\n  }, []);\n  const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    var _config$cloud;\n    if (code && state && storedState.success && (_config$cloud = config.cloud) !== null && _config$cloud !== void 0 && _config$cloud.project) {\n      const {\n        project\n      } = config.cloud;\n      (async () => {\n        const res = await fetch(`${_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.K}/oauth/token`, {\n          method: 'POST',\n          body: new URLSearchParams({\n            code,\n            client_id: project,\n            redirect_uri: `${window.location.origin}/keystatic/cloud/oauth/callback`,\n            code_verifier: storedState.data.code_verifier,\n            grant_type: 'authorization_code'\n          }).toString(),\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n            ..._dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.y\n          }\n        });\n        if (!res.ok) {\n          throw new Error(`Bad response: ${res.status} ${res.statusText}\\n\\n${await res.text()}`);\n        }\n        const data = await res.json();\n        const parsed = tokenResponseSchema.parse(data);\n        localStorage.setItem('keystatic-cloud-access-token', JSON.stringify({\n          token: parsed.access_token,\n          project,\n          validUntil: Date.now() + parsed.expires_in * 1000\n        }));\n        router.push(`/keystatic/${storedState.data.from}`);\n      })().catch(error => {\n        setError(error);\n      });\n    }\n  }, [code, state, router, storedState, config]);\n  if (!((_config$cloud2 = config.cloud) !== null && _config$cloud2 !== void 0 && _config$cloud2.project)) {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n      children: \"Missing Keystatic Cloud config\"\n    });\n  }\n  if (!code || !state) {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n      children: \"Missing code or state\"\n    });\n  }\n  if (storedState.success === false || state !== storedState.data.state) {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n      children: \"Invalid state\"\n    });\n  }\n  if (error) {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n      children: error.message\n    });\n  }\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    height: \"100vh\",\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_progress__WEBPACK_IMPORTED_MODULE_13__.ProgressCircle, {\n      size: \"large\",\n      isIndeterminate: true,\n      \"aria-label\": \"Authenticating\"\n    })\n  });\n}\n\nfunction parseParamsWithoutBranch(params) {\n  if (params.length === 0) {\n    return {};\n  }\n  if (params.length === 2 && params[0] === 'singleton') {\n    return {\n      singleton: params[1]\n    };\n  }\n  if (params.length < 2 || params[0] !== 'collection') return null;\n  const collection = params[1];\n  if (params.length === 2) {\n    return {\n      collection\n    };\n  }\n  if (params.length === 3 && params[2] === 'create') {\n    return {\n      collection,\n      kind: 'create'\n    };\n  }\n  if (params.length === 4 && params[2] === 'item') {\n    const slug = params[3];\n    return {\n      collection,\n      kind: 'edit',\n      slug\n    };\n  }\n  return null;\n}\nfunction RedirectToBranch(props) {\n  const {\n    push\n  } = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.u)();\n  const {\n    data,\n    error\n  } = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.at);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    var _error$response, _data$repository, _data$repository2, _error$graphQLErrors, _error$graphQLErrors2;\n    if ((error === null || error === void 0 || (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n      if (props.config.storage.kind === 'github') {\n        window.location.href = '/api/keystatic/github/login';\n      } else {\n        (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.B)('', props.config);\n      }\n    }\n    if (data !== null && data !== void 0 && (_data$repository = data.repository) !== null && _data$repository !== void 0 && _data$repository.defaultBranchRef) {\n      push(`/keystatic/branch/${encodeURIComponent(data.repository.defaultBranchRef.name)}`);\n    }\n    if (props.config.storage.kind === 'github' && !(data !== null && data !== void 0 && (_data$repository2 = data.repository) !== null && _data$repository2 !== void 0 && _data$repository2.id) && (error === null || error === void 0 || (_error$graphQLErrors = error.graphQLErrors) === null || _error$graphQLErrors === void 0 || (_error$graphQLErrors = _error$graphQLErrors[0]) === null || _error$graphQLErrors === void 0 || (_error$graphQLErrors = _error$graphQLErrors.originalError) === null || _error$graphQLErrors === void 0 ? void 0 : _error$graphQLErrors.type) === 'NOT_FOUND' || (error === null || error === void 0 || (_error$graphQLErrors2 = error.graphQLErrors) === null || _error$graphQLErrors2 === void 0 || (_error$graphQLErrors2 = _error$graphQLErrors2[0]) === null || _error$graphQLErrors2 === void 0 || (_error$graphQLErrors2 = _error$graphQLErrors2.originalError) === null || _error$graphQLErrors2 === void 0 ? void 0 : _error$graphQLErrors2.type) === 'FORBIDDEN') {\n      window.location.href = '/api/keystatic/github/repo-not-found';\n    }\n  }, [data, error, push, props.config]);\n  return null;\n}\nfunction PageInner({\n  config\n}) {\n  var _config$cloud;\n  const {\n    params\n  } = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.u)();\n  let branch = null,\n    parsedParams,\n    basePath;\n  if (params.join('/') === 'cloud/oauth/callback') {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(KeystaticCloudAuthCallback, {\n      config: config\n    });\n  }\n  let wrapper = x => x;\n  if ((0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.aq)(config) || (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.i)(config) && (_config$cloud = config.cloud) !== null && _config$cloud !== void 0 && _config$cloud.project) {\n    wrapper = element => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.au, {\n      config: config,\n      children: element\n    });\n  }\n  if ((0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.v)(config) || (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.aq)(config)) {\n    const origWrapper = wrapper;\n    wrapper = element => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(AuthWrapper, {\n      config: config,\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.av, {\n        config: config,\n        children: origWrapper(element)\n      })\n    });\n    if (params.length === 0) {\n      return wrapper( /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(RedirectToBranch, {\n        config: config\n      }));\n    }\n    if (params.length === 1 && (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.v)(config)) {\n      if (params[0] === 'setup') return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(KeystaticSetup, {\n        config: config\n      });\n      if (params[0] === 'repo-not-found') {\n        return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(RepoNotFound, {\n          config: config\n        });\n      }\n      if (params[0] === 'created-github-app') {\n        return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(CreatedGitHubApp, {\n          config: config\n        });\n      }\n    }\n    if (params[0] !== 'branch' || params.length < 2) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n        children: \"Not found\"\n      });\n    }\n    branch = params[1];\n    basePath = `/keystatic/branch/${encodeURIComponent(branch)}`;\n    parsedParams = parseParamsWithoutBranch(params.slice(2));\n  } else {\n    parsedParams = parseParamsWithoutBranch(params);\n    basePath = '/keystatic';\n  }\n  return wrapper( /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(AppShell, {\n    config: config,\n    currentBranch: branch || '',\n    basePath: basePath,\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(NotFoundBoundary, {\n      fallback: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.P, {\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.X, {\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(EmptyState, {\n            icon: _keystar_ui_icon_icons_fileX2Icon__WEBPACK_IMPORTED_MODULE_3__.fileX2Icon,\n            title: \"Not found\",\n            message: \"This page could not be found.\"\n          })\n        })\n      }),\n      children: parsedParams === null ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(AlwaysNotFound, {}) : parsedParams.collection ? parsedParams.kind === 'create' ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(CreateItemWrapper, {\n        collection: parsedParams.collection,\n        config: config,\n        basePath: basePath\n      }, parsedParams.collection) : parsedParams.kind === 'edit' ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(ItemPageWrapper, {\n        collection: parsedParams.collection,\n        basePath: basePath,\n        config: config,\n        itemSlug: parsedParams.slug\n      }, parsedParams.collection) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(CollectionPage, {\n        basePath: basePath,\n        collection: parsedParams.collection,\n        config: config\n      }, parsedParams.collection) : parsedParams.singleton ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(SingletonPageWrapper, {\n        config: config,\n        singleton: parsedParams.singleton\n      }, parsedParams.singleton) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(DashboardPage, {\n        config: config,\n        basePath: basePath\n      })\n    })\n  }));\n}\nfunction AlwaysNotFound() {\n  notFound();\n}\nfunction AuthWrapper(props) {\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)('unknown');\n  const router = (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.u)();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.e)(props.config).then(auth => {\n      if (auth) {\n        setState('valid');\n        return;\n      }\n      setState('explicit-auth');\n    });\n  }, [props.config]);\n  if (state === 'valid') {\n    return props.children;\n  }\n  if (state === 'explicit-auth') {\n    if (props.config.storage.kind === 'github') {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        height: \"100vh\",\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_1__.Button, {\n          href: `/api/keystatic/github/login${router.params.length ? `?${new URLSearchParams({\n            from: router.params.map(encodeURIComponent).join('/')\n          })}` : ''}`\n          // even though we'll never be in an iframe, so this isn't really distinct from _self\n          // it makes react-aria avoid using client-side routing which we need here\n          ,\n          target: \"_top\",\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_icon__WEBPACK_IMPORTED_MODULE_2__.Icon, {\n            src: _keystar_ui_icon_icons_githubIcon__WEBPACK_IMPORTED_MODULE_4__.githubIcon\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n            children: \"Log in with GitHub\"\n          })]\n        })\n      });\n    }\n    if (props.config.storage.kind === 'cloud') {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_layout__WEBPACK_IMPORTED_MODULE_5__.Flex, {\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        height: \"100vh\",\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_button__WEBPACK_IMPORTED_MODULE_1__.Button, {\n          onPress: () => {\n            (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.B)(router.params.map(encodeURIComponent).join('/'), props.config);\n          },\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_keystar_ui_typography__WEBPACK_IMPORTED_MODULE_6__.Text, {\n            children: \"Log in with Keystatic Cloud\"\n          })\n        })\n      });\n    }\n  }\n  return null;\n}\nfunction RedirectToLoopback(props) {\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (window.location.hostname === 'localhost') {\n      window.location.href = window.location.href.replace('localhost', '127.0.0.1');\n    }\n  }, []);\n  if (window.location.hostname === 'localhost') {\n    return null;\n  }\n  return props.children;\n}\nfunction Keystatic(props) {\n  if (props.config.storage.kind === 'github') {\n    (0,_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.ar)(props.config.storage.repo);\n  }\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(ClientOnly, {\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(RedirectToLoopback, {\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(AppSlugProvider, {\n        value: props.appSlug,\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_dist_index_fbab32f7_node_esm_js__WEBPACK_IMPORTED_MODULE_19__.as, {\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(Provider, {\n            config: props.config,\n            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(PageInner, {\n              config: props.config\n            })\n          })\n        })\n      })\n    })\n  });\n}\nfunction ClientOnly(props) {\n  const [mounted, setMounted] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    setMounted(true);\n  }, []);\n  if (!mounted) return null;\n  return props.children;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGtleXN0YXRpYytjb3JlQDAuMi4xMl9uZXh0QDE0LjIuMl9yZWFjdC1kb21AMTguMi4wX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL3VpL2Rpc3Qva2V5c3RhdGljLWNvcmUtdWkubm9kZS5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTRHO0FBQ3JDO0FBQy9CO0FBQ3VCO0FBQ0E7QUFDQztBQUNUO0FBQ21CO0FBQ3pDO0FBQ3dDO0FBQ1o7QUFDRTtBQUNFO0FBQ1o7QUFDQztBQUNDO0FBQ0E7QUFDd0Y7QUFDdEQ7QUFDMUQ7QUFDMGdFO0FBQ2ovRDtBQUNJO0FBQzZCO0FBQzdDO0FBQ1k7QUFDMUI7QUFDcUI7QUFDeEI7QUFDTztBQUNKO0FBQ1g7QUFDaUI7QUFDUjtBQUNHO0FBQ0U7QUFDVztBQUNUO0FBQzRCO0FBQ2hDO0FBQytCO0FBQy9DO0FBQ007QUFDSztBQUM2QztBQUM3QjtBQUN5QjtBQUNRO0FBQ1Y7QUFDa0M7QUFDcEQ7QUFDMEM7QUFDdkM7QUFDQztBQUNBO0FBQ0M7QUFDckI7QUFDWTtBQUNmO0FBQ3VEO0FBQ0Q7QUFDeEI7QUFDUDtBQUNVO0FBQ3ZCO0FBQzJEO0FBQ3pFO0FBQ2dDO0FBQ1o7QUFDeUI7QUFDUTtBQUNFO0FBQ3BCO0FBQ2pDO0FBQ0E7QUFDVjtBQUNXO0FBQ2M7QUFDQTtBQUNFO0FBQ2I7QUFDRztBQUNIO0FBQ1c7QUFDTztBQUNQO0FBQ0U7QUFDRTtBQUNBO0FBQ1E7QUFDSDtBQUNKO0FBQ0U7QUFDUDtBQUNLO0FBQ0E7QUFDQztBQUNDO0FBQ047QUFDcEI7QUFDb0I7QUFDWDtBQUNXO0FBQ0U7QUFDSDtBQUNP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REFBSTtBQUN6QztBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxxRUFBcUI7QUFDekI7QUFDQSxzQkFBc0IsdURBQUc7QUFDekIsMkJBQTJCLHVEQUFHO0FBQzlCLDZCQUE2Qix1REFBRztBQUNoQztBQUNBLCtCQUErQix1REFBRyxDQUFDLGlFQUFjO0FBQ2pELGlDQUFpQyx1REFBRztBQUNwQztBQUNBLG1DQUFtQyx1REFBRztBQUN0QztBQUNBLGFBQWE7QUFDYixXQUFXO0FBQ1gsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQSxnQ0FBZ0MsK0NBQVE7QUFDeEMsRUFBRSxnREFBUztBQUNYO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFcUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Aa2V5c3RhdGljL3RlbXBsYXRlcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvLnBucG0vQGtleXN0YXRpYytjb3JlQDAuMi4xMl9uZXh0QDE0LjIuMl9yZWFjdC1kb21AMTguMi4wX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL3VpL2Rpc3Qva2V5c3RhdGljLWNvcmUtdWkubm9kZS5lc20uanM/NDBjMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZVJlZiwgdXNlRWZmZWN0LCB1c2VNZW1vLCBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEFjdGlvbkJ1dHRvbiwgQnV0dG9uLCBCdXR0b25Hcm91cCB9IGZyb20gJ0BrZXlzdGFyL3VpL2J1dHRvbic7XG5pbXBvcnQgeyBJY29uIH0gZnJvbSAnQGtleXN0YXIvdWkvaWNvbic7XG5pbXBvcnQgeyBmaWxlWDJJY29uIH0gZnJvbSAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9maWxlWDJJY29uJztcbmltcG9ydCB7IGdpdGh1Ykljb24gfSBmcm9tICdAa2V5c3Rhci91aS9pY29uL2ljb25zL2dpdGh1Ykljb24nO1xuaW1wb3J0IHsgRmxleCwgQm94LCBEaXZpZGVyLCBWU3RhY2sgfSBmcm9tICdAa2V5c3Rhci91aS9sYXlvdXQnO1xuaW1wb3J0IHsgSGVhZGluZywgVGV4dCB9IGZyb20gJ0BrZXlzdGFyL3VpL3R5cG9ncmFwaHknO1xuaW1wb3J0IHsgdXNlTG9jYWxpemVkU3RyaW5nRm9ybWF0dGVyLCB1c2VMb2NhbGUgfSBmcm9tICdAcmVhY3QtYXJpYS9pMThuJztcbmltcG9ydCBpc0hvdGtleSBmcm9tICdpcy1ob3RrZXknO1xuaW1wb3J0IHsgYWxlcnRDaXJjbGVJY29uIH0gZnJvbSAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9hbGVydENpcmNsZUljb24nO1xuaW1wb3J0IHsgbGlzdFhJY29uIH0gZnJvbSAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9saXN0WEljb24nO1xuaW1wb3J0IHsgc2VhcmNoSWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvc2VhcmNoSWNvbic7XG5pbXBvcnQgeyBzZWFyY2hYSWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvc2VhcmNoWEljb24nO1xuaW1wb3J0IHsgVGV4dExpbmssIHVzZUxpbmsgfSBmcm9tICdAa2V5c3Rhci91aS9saW5rJztcbmltcG9ydCB7IFByb2dyZXNzQ2lyY2xlIH0gZnJvbSAnQGtleXN0YXIvdWkvcHJvZ3Jlc3MnO1xuaW1wb3J0IHsgU2VhcmNoRmllbGQgfSBmcm9tICdAa2V5c3Rhci91aS9zZWFyY2gtZmllbGQnO1xuaW1wb3J0IHsgU3RhdHVzTGlnaHQgfSBmcm9tICdAa2V5c3Rhci91aS9zdGF0dXMtbGlnaHQnO1xuaW1wb3J0IHsgdXNlTWVkaWFRdWVyeSwgYnJlYWtwb2ludFF1ZXJpZXMsIGNzcywgdG9rZW5TY2hlbWEsIGluamVjdEdsb2JhbCwgY29udGFpbmVyUXVlcmllcywgY2xhc3NOYW1lcywgdHJhbnNpdGlvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL3N0eWxlJztcbmltcG9ydCB7IFRhYmxlVmlldywgVGFibGVIZWFkZXIsIENvbHVtbiwgVGFibGVCb2R5LCBSb3csIENlbGwgfSBmcm9tICdAa2V5c3Rhci91aS90YWJsZSc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICdlbWVyeSc7XG5pbXBvcnQgeyB1IGFzIHVzZVJvdXRlciwgUCBhcyBQYWdlUm9vdCwgbCBhcyBsMTBuTWVzc2FnZXMsIGEgYXMgUGFnZUhlYWRlciwgYiBhcyB1c2VUcmVlLCBnIGFzIGdldENvbGxlY3Rpb25QYXRoLCBjIGFzIHVzZUJyYW5jaEluZm8sIGkgYXMgaXNMb2NhbENvbmZpZywgZCBhcyBnZXRFbnRyaWVzSW5Db2xsZWN0aW9uV2l0aFRyZWVLZXksIHAgYXMgcGFyc2VSZXBvQ29uZmlnLCBzIGFzIHNlcmlhbGl6ZVJlcG9Db25maWcsIGUgYXMgZ2V0QXV0aCwgRyBhcyBHaXRIdWJBcHBTaGVsbFF1ZXJ5LCBmIGFzIGdldEVudHJ5RGF0YUZpbGVwYXRoLCBvIGFzIG9iamVjdCwgaCBhcyBwYXJzZVByb3BzLCB0IGFzIHRvRm9ybWF0dGVkRm9ybURhdGFFcnJvciwgaiBhcyB1c2VCYXNlQ29tbWl0LCBrIGFzIHVzZUlzUmVwb1ByaXZhdGUsIG0gYXMgZ2V0RGlyZWN0b3JpZXNGb3JUcmVlS2V5LCBuIGFzIGdldFRyZWVLZXksIHEgYXMgdXNlRGF0YSwgTCBhcyBMT0FESU5HLCByIGFzIGdldFRyZWVOb2RlQXRQYXRoLCB2IGFzIGlzR2l0SHViQ29uZmlnLCB3IGFzIGJsb2JTaGEsIHggYXMgZ2V0UGF0aFByZWZpeCwgSyBhcyBLRVlTVEFUSUNfQ0xPVURfQVBJX1VSTCwgeSBhcyBLRVlTVEFUSUNfQ0xPVURfSEVBREVSUywgeiBhcyB1c2VUaGVtZSwgVCBhcyBUaGVtZVByb3ZpZGVyLCBBIGFzIGdldFN5bmNBdXRoLCBCIGFzIHJlZGlyZWN0VG9DbG91ZEF1dGgsIEMgYXMgQ2xvdWRBcHBTaGVsbFF1ZXJ5LCBEIGFzIHNlcmlhbGl6ZVByb3BzLCBFIGFzIEJyYW5jaEluZm9Db250ZXh0LCBGIGFzIHVzZVNldFRyZWVTaGEsIFIgYXMgUmVwb1dpdGhXcml0ZUFjY2Vzc0NvbnRleHQsIEggYXMgdXNlQ3VycmVudFVuc2NvcGVkVHJlZSwgSSBhcyB1cGRhdGVUcmVlV2l0aENoYW5nZXMsIEogYXMgaHlkcmF0ZVRyZWVDYWNoZVdpdGhFbnRyaWVzLCBNIGFzIHNjb3BlRW50cmllc1dpdGhQYXRoUHJlZml4LCBOIGFzIGZldGNoR2l0SHViVHJlZURhdGEsIE8gYXMgdHJlZVNoYSwgUSBhcyBnZXRTbHVnRnJvbVN0YXRlLCBTIGFzIHVzZUNvbmZpZywgVSBhcyBnZXRTbHVnR2xvYkZvckNvbGxlY3Rpb24sIFYgYXMgZ2V0Q29sbGVjdGlvbkZvcm1hdCwgVyBhcyBnZXRDb2xsZWN0aW9uSXRlbVBhdGgsIFggYXMgUGFnZUJvZHksIFkgYXMgY29udGFpbmVyV2lkdGhGb3JFbnRyeUxheW91dCwgWiBhcyBjcmVhdGVHZXRQcmV2aWV3UHJvcHMsIF8gYXMgdXNlRXZlbnRDYWxsYmFjaywgJCBhcyBnZXRSZXBvVXJsLCBhMCBhcyBnZXREYXRhRmlsZUV4dGVuc2lvbiwgYTEgYXMgY2xpZW50U2lkZVZhbGlkYXRlUHJvcCwgYTIgYXMgRm9ybUZvckVudHJ5LCBhMyBhcyB1c2VSZXBvc2l0b3J5SWQsIGE0IGFzIHVzZUNyZWF0ZUJyYW5jaE11dGF0aW9uLCBhNSBhcyBnZXRCcmFuY2hQcmVmaXgsIGE2IGFzIHByZXR0eUVycm9yRm9yQ3JlYXRlQnJhbmNoTXV0YXRpb24sIGE3IGFzIGdldEluaXRpYWxQcm9wc1ZhbHVlLCBhOCBhcyBDcmVhdGVCcmFuY2hEaWFsb2csIGE5IGFzIHVzZU5hdkl0ZW1zLCBhYSBhcyBwbHVyYWxpemUsIGFiIGFzIHVzZVZpZXdlciwgYWMgYXMgdXNlQ2xvdWRJbmZvLCBhZCBhcyB1c2VTaWRlYmFyLCBhZSBhcyB1c2VDb250ZW50UGFuZWxTdGF0ZSwgYWYgYXMgQ29udGVudFBhbmVsUHJvdmlkZXIsIGFnIGFzIFNpZGViYXJEaWFsb2csIGFoIGFzIFNpZGViYXJQYW5lbCwgYWkgYXMgQXBwU2hlbGxFcnJvckNvbnRleHQsIGFqIGFzIENvbmZpZ0NvbnRleHQsIGFrIGFzIEFwcFN0YXRlQ29udGV4dCwgYWwgYXMgU2lkZWJhclByb3ZpZGVyLCBhbSBhcyBHaXRIdWJBcHBTaGVsbFByb3ZpZGVyLCBhbiBhcyBMb2NhbEFwcFNoZWxsUHJvdmlkZXIsIGFvIGFzIGdldFNpbmdsZXRvbkZvcm1hdCwgYXAgYXMgZ2V0U2luZ2xldG9uUGF0aCwgYXEgYXMgaXNDbG91ZENvbmZpZywgYXIgYXMgYXNzZXJ0VmFsaWRSZXBvQ29uZmlnLCBhcyBhcyBSb3V0ZXJQcm92aWRlciwgYXQgYXMgR2l0SHViQXBwU2hlbGxEYXRhQ29udGV4dCwgYXUgYXMgQ2xvdWRJbmZvUHJvdmlkZXIsIGF2IGFzIEdpdEh1YkFwcFNoZWxsRGF0YVByb3ZpZGVyIH0gZnJvbSAnLi4vLi4vZGlzdC9pbmRleC1mYmFiMzJmNy5ub2RlLmVzbS5qcyc7XG5pbXBvcnQgeyBqc3gsIGpzeHMsIEZyYWdtZW50IH0gZnJvbSAncmVhY3QvanN4LXJ1bnRpbWUnO1xuaW1wb3J0IHsgQnJlYWRjcnVtYnMsIEl0ZW0gfSBmcm9tICdAa2V5c3Rhci91aS9icmVhZGNydW1icyc7XG5pbXBvcnQgeyBEaWFsb2csIERpYWxvZ0NvbnRhaW5lciwgQWxlcnREaWFsb2csIERpYWxvZ1RyaWdnZXIgfSBmcm9tICdAa2V5c3Rhci91aS9kaWFsb2cnO1xuaW1wb3J0IHsgTm90aWNlIH0gZnJvbSAnQGtleXN0YXIvdWkvbm90aWNlJztcbmltcG9ydCB7IFRvYXN0ZXIsIHRvYXN0UXVldWUgfSBmcm9tICdAa2V5c3Rhci91aS90b2FzdCc7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2NoZWNrYm94JztcbmltcG9ydCB7IFRleHRGaWVsZCB9IGZyb20gJ0BrZXlzdGFyL3VpL3RleHQtZmllbGQnO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9maWVsZCc7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL251bWJlci1maWVsZCc7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2NvbWJvYm94JztcbmltcG9ydCAnbWluaW1hdGNoJztcbmltcG9ydCAnQHJlYWN0LXN0YXRlbHkvY29sbGVjdGlvbnMnO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9waWNrZXInO1xuaW1wb3J0ICdAc2luZHJlc29yaHVzL3NsdWdpZnknO1xuaW1wb3J0ICdAYnJhaW50cmVlL3Nhbml0aXplLXVybCc7XG5pbXBvcnQgeyBDb250ZW50IH0gZnJvbSAnQGtleXN0YXIvdWkvc2xvdHMnO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9kcmFnLWFuZC1kcm9wJztcbmltcG9ydCB7IHRyYXNoMkljb24gfSBmcm9tICdAa2V5c3Rhci91aS9pY29uL2ljb25zL3RyYXNoMkljb24nO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9saXN0LXZpZXcnO1xuaW1wb3J0IHsgVG9vbHRpcFRyaWdnZXIsIFRvb2x0aXAgfSBmcm9tICdAa2V5c3Rhci91aS90b29sdGlwJztcbmltcG9ydCAnc2xhdGUnO1xuaW1wb3J0ICdzbGF0ZS1yZWFjdCc7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL21lbnUnO1xuaW1wb3J0IHsgQWN0aW9uR3JvdXAsIEl0ZW0gYXMgSXRlbSQxIH0gZnJvbSAnQGtleXN0YXIvdWkvYWN0aW9uLWdyb3VwJztcbmltcG9ydCB7IEJhZGdlIH0gZnJvbSAnQGtleXN0YXIvdWkvYmFkZ2UnO1xuaW1wb3J0IHsgY29weVBsdXNJY29uIH0gZnJvbSAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9jb3B5UGx1c0ljb24nO1xuaW1wb3J0IHsgZXh0ZXJuYWxMaW5rSWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvZXh0ZXJuYWxMaW5rSWNvbic7XG5pbXBvcnQgeyBoaXN0b3J5SWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvaGlzdG9yeUljb24nO1xuaW1wb3J0IHsgdXNlQ2xpZW50LCBQcm92aWRlciBhcyBQcm92aWRlciQxLCBjcmVhdGVDbGllbnQsIGZldGNoRXhjaGFuZ2UsIHVzZU11dGF0aW9uIH0gZnJvbSAndXJxbCc7XG5pbXBvcnQgeyBncWwgfSBmcm9tICdAdHMtZ3FsL3RhZy9uby10cmFuc2Zvcm0nO1xuaW1wb3J0IHsgU3BsaXRWaWV3LCBTcGxpdFBhbmVQcmltYXJ5LCBTcGxpdFBhbmVTZWNvbmRhcnkgfSBmcm9tICdAa2V5c3Rhci91aS9zcGxpdC12aWV3JztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9wYW5lbExlZnRPcGVuSWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvcGFuZWxMZWZ0Q2xvc2VJY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9wYW5lbFJpZ2h0T3Blbkljb24nO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL3BhbmVsUmlnaHRDbG9zZUljb24nO1xuaW1wb3J0IHsgZHVtcCB9IGZyb20gJ2pzLXlhbWwnO1xuaW1wb3J0IHsgZnJvbVVpbnQ4QXJyYXkgfSBmcm9tICdqcy1iYXNlNjQnO1xuaW1wb3J0IExSVSBmcm9tICdscnUtY2FjaGUnO1xuaW1wb3J0IHsgbCBhcyBsb2FkRGF0YUZpbGUgfSBmcm9tICcuLi8uLi9kaXN0L3JlcXVpcmVkLWZpbGVzLWYxMmNkN2Y5Lm5vZGUuZXNtLmpzJztcbmltcG9ydCB7IEtleXN0YXJQcm92aWRlciwgQ2xpZW50U2lkZU9ubHlEb2N1bWVudEVsZW1lbnQgfSBmcm9tICdAa2V5c3Rhci91aS9jb3JlJztcbmltcG9ydCB7IGNhY2hlRXhjaGFuZ2UgfSBmcm9tICdAdXJxbC9leGNoYW5nZS1ncmFwaGNhY2hlJztcbmltcG9ydCB7IGF1dGhFeGNoYW5nZSB9IGZyb20gJ0B1cnFsL2V4Y2hhbmdlLWF1dGgnO1xuaW1wb3J0IHsgcGVyc2lzdGVkRXhjaGFuZ2UgfSBmcm9tICdAdXJxbC9leGNoYW5nZS1wZXJzaXN0ZWQnO1xuaW1wb3J0IGlzRXF1YWwgZnJvbSAnZmFzdC1kZWVwLWVxdWFsJztcbmltcG9ydCB7IHUgYXMgdXNlU2x1Z3NJbkNvbGxlY3Rpb24gfSBmcm9tICcuLi8uLi9kaXN0L3VzZVNsdWdzSW5Db2xsZWN0aW9uLWI5NjcxNjZkLm5vZGUuZXNtLmpzJztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgc2V0LCBkZWwsIGdldCwgY3JlYXRlU3RvcmUgfSBmcm9tICdpZGIta2V5dmFsJztcbmltcG9ydCB7IEF2YXRhciB9IGZyb20gJ0BrZXlzdGFyL3VpL2F2YXRhcic7XG5pbXBvcnQgeyBnaXRCcmFuY2hJY29uIH0gZnJvbSAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9naXRCcmFuY2hJY29uJztcbmltcG9ydCB7IGdpdEJyYW5jaFBsdXNJY29uIH0gZnJvbSAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9naXRCcmFuY2hQbHVzSWNvbic7XG5pbXBvcnQgeyBnaXRQdWxsUmVxdWVzdEljb24gfSBmcm9tICdAa2V5c3Rhci91aS9pY29uL2ljb25zL2dpdFB1bGxSZXF1ZXN0SWNvbic7XG5pbXBvcnQgeyBwbHVzSWNvbiB9IGZyb20gJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvcGx1c0ljb24nO1xuaW1wb3J0ICdAbWFya2RvYy9tYXJrZG9jJztcbmltcG9ydCAnZW1lcnkvYXNzZXJ0aW9ucyc7XG5pbXBvcnQgJ2NyeXB0byc7XG5pbXBvcnQgJ0ByZWFjdC1hcmlhL3V0aWxzJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9lZGl0SWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvbGlua0ljb24nO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL3VubGlua0ljb24nO1xuaW1wb3J0ICdAcmVhY3QtYXJpYS9vdmVybGF5cyc7XG5pbXBvcnQgJ0ByZWFjdC1zdGF0ZWx5L292ZXJsYXlzJztcbmltcG9ydCAnQGtleXN0YXIvdWkvb3ZlcmxheXMnO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL2JvbGRJY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9jaGV2cm9uRG93bkljb24nO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL2NvZGVJY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9pdGFsaWNJY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9tYXhpbWl6ZUljb24nO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL21pbmltaXplSWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvcmVtb3ZlRm9ybWF0dGluZ0ljb24nO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL3N0cmlrZXRocm91Z2hJY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9zdWJzY3JpcHRJY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9zdXBlcnNjcmlwdEljb24nO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL3R5cGVJY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy91bmRlcmxpbmVJY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9hbGlnbkxlZnRJY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9hbGlnblJpZ2h0SWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvYWxpZ25DZW50ZXJJY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9xdW90ZUljb24nO1xuaW1wb3J0ICdtYXRjaC1zb3J0ZXInO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL3RyYXNoSWNvbic7XG5pbXBvcnQgJ0BlbW90aW9uL3dlYWstbWVtb2l6ZSc7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvbWludXNJY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9jb2x1bW5zSWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvbGlzdEljb24nO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL2xpc3RPcmRlcmVkSWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvZmlsZVVwSWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvaW1hZ2VJY29uJztcbmltcG9ydCAnY29va2llJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9saW5rMkljb24nO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL2xpbmsyT2ZmSWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvcGVuY2lsSWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvdW5kbzJJY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvdXRpbHMnO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL3NoZWV0SWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvdGFibGVJY29uJztcbmltcG9ydCAnc2Nyb2xsLWludG8tdmlldy1pZi1uZWVkZWQnO1xuaW1wb3J0ICdAcmVhY3Qtc3RhdGVseS9saXN0JztcbmltcG9ydCAnQGtleXN0YXIvdWkvbGlzdGJveCc7XG5pbXBvcnQgJ3NsYXRlLWhpc3RvcnknO1xuaW1wb3J0ICdtZGFzdC11dGlsLWZyb20tbWFya2Rvd24nO1xuaW1wb3J0ICdtZGFzdC11dGlsLWdmbS1hdXRvbGluay1saXRlcmFsL2Zyb20tbWFya2Rvd24nO1xuaW1wb3J0ICdtaWNyb21hcmstZXh0ZW5zaW9uLWdmbS1hdXRvbGluay1saXRlcmFsJztcbmltcG9ydCAnbWRhc3QtdXRpbC1nZm0tc3RyaWtldGhyb3VnaC9mcm9tLW1hcmtkb3duJztcbmltcG9ydCAnbWljcm9tYXJrLWV4dGVuc2lvbi1nZm0tc3RyaWtldGhyb3VnaCc7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL25hdi1saXN0JztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9sb2dPdXRJY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9naXRGb3JrSWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL2ljb24vaWNvbnMvbW9uaXRvckljb24nO1xuaW1wb3J0ICdAa2V5c3Rhci91aS9pY29uL2ljb25zL21vb25JY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy9zdW5JY29uJztcbmltcG9ydCAnQGtleXN0YXIvdWkvaWNvbi9pY29ucy91c2VySWNvbic7XG5pbXBvcnQgJ0BrZXlzdGFyL3VpL3JhZGlvJztcblxuLy8gdGhlIGNvbGxhdG9yIGVuYWJsZXMgbGFuZ3VhZ2Utc2Vuc2l0aXZlIHN0cmluZyBjb21wYXJpc29uXG5jb25zdCBjb2xsYXRvciA9IG5ldyBJbnRsLkNvbGxhdG9yKHVuZGVmaW5lZCwge1xuICBzZW5zaXRpdml0eTogJ2Jhc2UnXG59KTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgY29tcGFyaXNvbiBmdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBwcm92aWRlZCB0byB0aGUgYHNvcnQoKWAgbWV0aG9kXG4gKiBvZiB5b3VyIGRhdGEgYXJyYXkuXG4gKi9cbmZ1bmN0aW9uIHNvcnRCeURlc2NyaXB0b3Ioc29ydERlc2NyaXB0b3IpIHtcbiAgY29uc3Qga2V5ID0gc29ydERlc2NyaXB0b3IuY29sdW1uO1xuICBhc3NlcnQoa2V5ICE9IG51bGwsICdgc29ydERlc2NyaXB0b3IuY29sdW1uYCBpcyByZXF1aXJlZCcpO1xuICByZXR1cm4gKGEsIGIpID0+IHtcbiAgICBjb25zdCB2YWx1ZUEgPSBhW2tleV07XG4gICAgY29uc3QgdmFsdWVCID0gYltrZXldO1xuICAgIGNvbnN0IG1vZGlmaWVyID0gc29ydERlc2NyaXB0b3IuZGlyZWN0aW9uID09PSAnYXNjZW5kaW5nJyA/IDEgOiAtMTtcblxuICAgIC8vIGFsd2F5cyBwdXNoIGBudWxsYCBhbmQgYHVuZGVmaW5lZGAgdG8gdGhlIGJvdHRvbVxuICAgIGlmICh2YWx1ZUEgPT0gbnVsbCkgcmV0dXJuIDE7XG4gICAgaWYgKHZhbHVlQiA9PSBudWxsKSByZXR1cm4gLTE7XG5cbiAgICAvLyB0aGUgY29sbGF0b3IgaXMgb25seSBhcHByb3ByaWF0ZSBmb3Igc3RyaW5ncywgaXQgZmFpbHMgaW4gc3VidGxlXG4gICAgLy8gd2F5cyBmb3IgZmxvYXRzLCBkYXRlcywgZXRjLlxuICAgIGlmICh0eXBlb2YgdmFsdWVBID09PSAnc3RyaW5nJyAmJiB0eXBlb2YgdmFsdWVCID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIGNvbGxhdG9yLmNvbXBhcmUodmFsdWVBLCB2YWx1ZUIpICogbW9kaWZpZXI7XG4gICAgfVxuICAgIHJldHVybiBjb21wYXJlKHZhbHVlQSwgdmFsdWVCKSAqIG1vZGlmaWVyO1xuICB9O1xufVxuXG4vKiogRGVmYXVsdCBjb21wYXJpc29uIGZvciBub24tc3RyaW5nIHZhbHVlcyAqL1xuZnVuY3Rpb24gY29tcGFyZShhLCBiKSB7XG4gIGlmIChhIDwgYikgcmV0dXJuIC0xO1xuICBpZiAoYSA+IGIpIHJldHVybiAxO1xuICByZXR1cm4gMDtcbn1cblxuZnVuY3Rpb24gRW1wdHlTdGF0ZShwcm9wcykge1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChGbGV4LCB7XG4gICAgYWxpZ25JdGVtczogXCJjZW50ZXJcIixcbiAgICBkaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgZ2FwOiBcImxhcmdlXCIsXG4gICAganVzdGlmeUNvbnRlbnQ6IFwiY2VudGVyXCIsXG4gICAgbWluSGVpZ2h0OiBcInNjYWxlLjMwMDBcIixcbiAgICBwYWRkaW5nWDoge1xuICAgICAgbW9iaWxlOiAnbWVkaXVtJyxcbiAgICAgIHRhYmxldDogJ3hsYXJnZScsXG4gICAgICBkZXNrdG9wOiAneHhsYXJnZSdcbiAgICB9LFxuICAgIGNoaWxkcmVuOiAnY2hpbGRyZW4nIGluIHByb3BzID8gcHJvcHMuY2hpbGRyZW4gOiAvKiNfX1BVUkVfXyovanN4cyhGcmFnbWVudCwge1xuICAgICAgY2hpbGRyZW46IFtwcm9wcy5pY29uICYmIC8qI19fUFVSRV9fKi9qc3goSWNvbiwge1xuICAgICAgICBzcmM6IHByb3BzLmljb24sXG4gICAgICAgIHNpemU6IFwibGFyZ2VcIixcbiAgICAgICAgY29sb3I6IFwibmV1dHJhbEVtcGhhc2lzXCJcbiAgICAgIH0pLCBwcm9wcy50aXRsZSAmJiAvKiNfX1BVUkVfXyovanN4KEhlYWRpbmcsIHtcbiAgICAgICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgIHNpemU6IFwibWVkaXVtXCIsXG4gICAgICAgIGNoaWxkcmVuOiBwcm9wcy50aXRsZVxuICAgICAgfSksIHByb3BzLm1lc3NhZ2UgJiYgLyojX19QVVJFX18qL2pzeChUZXh0LCB7XG4gICAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICBjaGlsZHJlbjogcHJvcHMubWVzc2FnZVxuICAgICAgfSksIHByb3BzLmFjdGlvbnNdXG4gICAgfSlcbiAgfSk7XG59XG5cbmNsYXNzIE5vdEZvdW5kRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdOb3QgZm91bmQnKTtcbiAgICB0aGlzLm5hbWUgPSAnTm90Rm91bmRFcnJvcic7XG4gIH1cbn1cbmZ1bmN0aW9uIGlzTm90Rm91bmRFcnJvcihlcnIpIHtcbiAgcmV0dXJuIHR5cGVvZiBlcnIgPT09ICdvYmplY3QnICYmIGVyciAhPT0gbnVsbCAmJiBlcnIgaW5zdGFuY2VvZiBOb3RGb3VuZEVycm9yO1xufVxuZnVuY3Rpb24gbm90Rm91bmQoKSB7XG4gIHRocm93IG5ldyBOb3RGb3VuZEVycm9yKCk7XG59XG5jbGFzcyBOb3RGb3VuZEVycm9yQm91bmRhcnlJbm5lciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBub3RGb3VuZDogZmFsc2UsXG4gICAgICBsYXN0SHJlZjogcHJvcHMuaHJlZlxuICAgIH07XG4gIH1cbiAgc3RhdGljIGdldERlcml2ZWRTdGF0ZUZyb21FcnJvcihlcnIpIHtcbiAgICBpZiAoaXNOb3RGb3VuZEVycm9yKGVycikpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5vdEZvdW5kOiB0cnVlXG4gICAgICB9O1xuICAgIH1cbiAgICB0aHJvdyBlcnI7XG4gIH1cbiAgc3RhdGljIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhwcm9wcywgc3RhdGUpIHtcbiAgICBpZiAocHJvcHMuaHJlZiAhPT0gc3RhdGUubGFzdEhyZWYgJiYgc3RhdGUubm90Rm91bmQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5vdEZvdW5kOiBmYWxzZSxcbiAgICAgICAgbGFzdEhyZWY6IHByb3BzLmhyZWZcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBub3RGb3VuZDogc3RhdGUubm90Rm91bmQsXG4gICAgICBsYXN0SHJlZjogcHJvcHMuaHJlZlxuICAgIH07XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGlmICh0aGlzLnN0YXRlLm5vdEZvdW5kKSByZXR1cm4gdGhpcy5wcm9wcy5mYWxsYmFjaztcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5jaGlsZHJlbjtcbiAgfVxufVxuZnVuY3Rpb24gTm90Rm91bmRCb3VuZGFyeShwcm9wcykge1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goTm90Rm91bmRFcnJvckJvdW5kYXJ5SW5uZXIsIHtcbiAgICAuLi5wcm9wcyxcbiAgICBocmVmOiByb3V0ZXIuaHJlZlxuICB9KTtcbn1cblxuZnVuY3Rpb24gQ29sbGVjdGlvblBhZ2UocHJvcHMpIHtcbiAgdmFyIF9jb25maWckY29sbGVjdGlvbnM7XG4gIGNvbnN0IHtcbiAgICBjb2xsZWN0aW9uLFxuICAgIGNvbmZpZ1xuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGNvbnRhaW5lcldpZHRoID0gJ25vbmUnOyAvLyBUT0RPOiB1c2UgYSBcImxhcmdlXCIgd2hlbiB3ZSBoYXZlIG1vcmUgY29sdW1uc1xuICBjb25zdCBjb2xsZWN0aW9uQ29uZmlnID0gKF9jb25maWckY29sbGVjdGlvbnMgPSBjb25maWcuY29sbGVjdGlvbnMpID09PSBudWxsIHx8IF9jb25maWckY29sbGVjdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jb25maWckY29sbGVjdGlvbnNbY29sbGVjdGlvbl07XG4gIGlmICghY29sbGVjdGlvbkNvbmZpZykgbm90Rm91bmQoKTtcbiAgY29uc3QgW3NlYXJjaFRlcm0sIHNldFNlYXJjaFRlcm1dID0gdXNlU3RhdGUoJycpO1xuICBsZXQgZGVib3VuY2VkU2VhcmNoVGVybSA9IHVzZURlYm91bmNlZFZhbHVlKHNlYXJjaFRlcm0sIDMwMCk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhQYWdlUm9vdCwge1xuICAgIGNvbnRhaW5lcldpZHRoOiBjb250YWluZXJXaWR0aCxcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goQ29sbGVjdGlvblBhZ2VIZWFkZXIsIHtcbiAgICAgIGNvbGxlY3Rpb25MYWJlbDogY29sbGVjdGlvbkNvbmZpZy5sYWJlbCxcbiAgICAgIGNyZWF0ZUhyZWY6IGAke3Byb3BzLmJhc2VQYXRofS9jb2xsZWN0aW9uLyR7ZW5jb2RlVVJJQ29tcG9uZW50KHByb3BzLmNvbGxlY3Rpb24pfS9jcmVhdGVgLFxuICAgICAgc2VhcmNoVGVybTogc2VhcmNoVGVybSxcbiAgICAgIG9uU2VhcmNoVGVybUNoYW5nZTogc2V0U2VhcmNoVGVybVxuICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KENvbGxlY3Rpb25QYWdlQ29udGVudCwge1xuICAgICAgc2VhcmNoVGVybTogZGVib3VuY2VkU2VhcmNoVGVybSxcbiAgICAgIC4uLnByb3BzXG4gICAgfSldXG4gIH0pO1xufVxuZnVuY3Rpb24gQ29sbGVjdGlvblBhZ2VIZWFkZXIocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGNvbGxlY3Rpb25MYWJlbCxcbiAgICBjcmVhdGVIcmVmXG4gIH0gPSBwcm9wcztcbiAgY29uc3Qgc3RyaW5nRm9ybWF0dGVyID0gdXNlTG9jYWxpemVkU3RyaW5nRm9ybWF0dGVyKGwxMG5NZXNzYWdlcyk7XG4gIGNvbnN0IGlzQWJvdmVNb2JpbGUgPSB1c2VNZWRpYVF1ZXJ5KGJyZWFrcG9pbnRRdWVyaWVzLmFib3ZlLm1vYmlsZSk7XG4gIGNvbnN0IFtzZWFyY2hWaXNpYmxlLCBzZXRTZWFyY2hWaXNpYmxlXSA9IHVzZVN0YXRlKGlzQWJvdmVNb2JpbGUpO1xuICBjb25zdCBzZWFyY2hSZWYgPSB1c2VSZWYobnVsbCk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0U2VhcmNoVmlzaWJsZShpc0Fib3ZlTW9iaWxlKTtcbiAgfSwgW2lzQWJvdmVNb2JpbGVdKTtcblxuICAvLyBlbnRyaWVzIGFyZSBwcmVzZW50ZWQgaW4gYSB2aXJ0dWFsaXplZCB0YWJsZSB2aWV3LCBzbyB3ZSByZXBsYWNlIHRoZVxuICAvLyBkZWZhdWx0IChlLmcuIGN0cmwrZikgYnJvd3NlciBzZWFyY2ggYmVoYXZpb3VyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgbGlzdGVuZXIgPSBldmVudCA9PiB7XG4gICAgICAvLyBiYWlsIGlmIHRoZSBzZWFyY2ggZmllbGQgaXMgYWxyZWFkeSBmb2N1c2VkOyBsZXQgdXNlcnMgaW52b2tlIHRoZVxuICAgICAgLy8gYnJvd3NlciBzZWFyY2ggaWYgdGhleSBuZWVkIHRvXG4gICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gc2VhcmNoUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKGlzSG90a2V5KCdtb2QrZicsIGV2ZW50KSkge1xuICAgICAgICB2YXIgX3NlYXJjaFJlZiRjdXJyZW50O1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAoX3NlYXJjaFJlZiRjdXJyZW50ID0gc2VhcmNoUmVmLmN1cnJlbnQpID09PSBudWxsIHx8IF9zZWFyY2hSZWYkY3VycmVudCA9PT0gdm9pZCAwIHx8IF9zZWFyY2hSZWYkY3VycmVudC5zZWxlY3QoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBsaXN0ZW5lcik7XG4gICAgcmV0dXJuICgpID0+IGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBsaXN0ZW5lcik7XG4gIH0sIFtdKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3hzKFBhZ2VIZWFkZXIsIHtcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goSGVhZGluZywge1xuICAgICAgZWxlbWVudFR5cGU6IFwiaDFcIixcbiAgICAgIGlkOiBcInBhZ2UtdGl0bGVcIixcbiAgICAgIHNpemU6IFwic21hbGxcIixcbiAgICAgIGZsZXg6IHRydWUsXG4gICAgICBtaW5XaWR0aDogMCxcbiAgICAgIGNoaWxkcmVuOiBjb2xsZWN0aW9uTGFiZWxcbiAgICB9KSwgLyojX19QVVJFX18qL2pzeChcImRpdlwiLCB7XG4gICAgICByb2xlOiBcInNlYXJjaFwiLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgZGlzcGxheTogc2VhcmNoVmlzaWJsZSA/ICdibG9jaycgOiAnbm9uZSdcbiAgICAgIH0sXG4gICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChTZWFyY2hGaWVsZCwge1xuICAgICAgICByZWY6IHNlYXJjaFJlZixcbiAgICAgICAgXCJhcmlhLWxhYmVsXCI6IHN0cmluZ0Zvcm1hdHRlci5mb3JtYXQoJ3NlYXJjaCcpIC8vIFRPRE86IGwxMG4gXCJTZWFyY2gge2NvbGxlY3Rpb259XCI/XG4gICAgICAgICxcbiAgICAgICAgb25DaGFuZ2U6IHByb3BzLm9uU2VhcmNoVGVybUNoYW5nZSxcbiAgICAgICAgb25DbGVhcjogKCkgPT4ge1xuICAgICAgICAgIHByb3BzLm9uU2VhcmNoVGVybUNoYW5nZSgnJyk7XG4gICAgICAgICAgaWYgKCFpc0Fib3ZlTW9iaWxlKSB7XG4gICAgICAgICAgICAvLyB0aGUgdGltZW91dCBlbnN1cmVzIHRoYXQgdGhlIFwiYWRkXCIgYnV0dG9uIGlzbid0IHByZXNzZWRcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICBzZXRTZWFyY2hWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgICAgIH0sIDI1MCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBvbkJsdXI6ICgpID0+IHtcbiAgICAgICAgICBpZiAoIWlzQWJvdmVNb2JpbGUgJiYgcHJvcHMuc2VhcmNoVGVybSA9PT0gJycpIHtcbiAgICAgICAgICAgIHNldFNlYXJjaFZpc2libGUoZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcGxhY2Vob2xkZXI6IHN0cmluZ0Zvcm1hdHRlci5mb3JtYXQoJ3NlYXJjaCcpLFxuICAgICAgICB2YWx1ZTogcHJvcHMuc2VhcmNoVGVybSxcbiAgICAgICAgd2lkdGg6IFwic2NhbGUuMjQwMFwiXG4gICAgICB9KVxuICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KEFjdGlvbkJ1dHRvbiwge1xuICAgICAgXCJhcmlhLWxhYmVsXCI6IFwic2hvdyBzZWFyY2hcIixcbiAgICAgIGlzSGlkZGVuOiBzZWFyY2hWaXNpYmxlIHx8IHtcbiAgICAgICAgYWJvdmU6ICdtb2JpbGUnXG4gICAgICB9LFxuICAgICAgb25QcmVzczogKCkgPT4ge1xuICAgICAgICBzZXRTZWFyY2hWaXNpYmxlKHRydWUpO1xuICAgICAgICAvLyBOT1RFOiB0aGlzIGhhY2sgaXMgdG8gZm9yY2UgdGhlIHNlYXJjaCBmaWVsZCB0byBmb2N1cywgYW5kIGludm9rZVxuICAgICAgICAvLyB0aGUgc29mdHdhcmUga2V5Ym9hcmQgb24gbW9iaWxlIHNhZmFyaVxuICAgICAgICBsZXQgdGVtcElucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgdGVtcElucHV0LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgdGVtcElucHV0LnN0eWxlLm9wYWNpdHkgPSAnMCc7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGVtcElucHV0KTtcbiAgICAgICAgdGVtcElucHV0LmZvY3VzKCk7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHZhciBfc2VhcmNoUmVmJGN1cnJlbnQyO1xuICAgICAgICAgIChfc2VhcmNoUmVmJGN1cnJlbnQyID0gc2VhcmNoUmVmLmN1cnJlbnQpID09PSBudWxsIHx8IF9zZWFyY2hSZWYkY3VycmVudDIgPT09IHZvaWQgMCB8fCBfc2VhcmNoUmVmJGN1cnJlbnQyLmZvY3VzKCk7XG4gICAgICAgICAgdGVtcElucHV0LnJlbW92ZSgpO1xuICAgICAgICB9LCAwKTtcbiAgICAgIH0sXG4gICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChJY29uLCB7XG4gICAgICAgIHNyYzogc2VhcmNoSWNvblxuICAgICAgfSlcbiAgICB9KSwgLyojX19QVVJFX18qL2pzeChCdXR0b24sIHtcbiAgICAgIG1hcmdpblN0YXJ0OiBcImF1dG9cIixcbiAgICAgIHByb21pbmVuY2U6IFwiaGlnaFwiLFxuICAgICAgaHJlZjogY3JlYXRlSHJlZixcbiAgICAgIGlzSGlkZGVuOiBzZWFyY2hWaXNpYmxlID8ge1xuICAgICAgICBiZWxvdzogJ3RhYmxldCdcbiAgICAgIH0gOiB1bmRlZmluZWQsXG4gICAgICBjaGlsZHJlbjogc3RyaW5nRm9ybWF0dGVyLmZvcm1hdCgnYWRkJylcbiAgICB9KV1cbiAgfSk7XG59XG5mdW5jdGlvbiBDb2xsZWN0aW9uUGFnZUNvbnRlbnQocHJvcHMpIHtcbiAgY29uc3QgdHJlZXMgPSB1c2VUcmVlKCk7XG4gIGNvbnN0IHRyZWUgPSB0cmVlcy5tZXJnZWQua2luZCA9PT0gJ2xvYWRlZCcgPyB0cmVlcy5tZXJnZWQuZGF0YS5jdXJyZW50LmVudHJpZXMuZ2V0KGdldENvbGxlY3Rpb25QYXRoKHByb3BzLmNvbmZpZywgcHJvcHMuY29sbGVjdGlvbikpIDogbnVsbDtcbiAgaWYgKHRyZWVzLm1lcmdlZC5raW5kID09PSAnZXJyb3InKSB7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goRW1wdHlTdGF0ZSwge1xuICAgICAgaWNvbjogYWxlcnRDaXJjbGVJY29uLFxuICAgICAgdGl0bGU6IFwiVW5hYmxlIHRvIGxvYWQgY29sbGVjdGlvblwiLFxuICAgICAgbWVzc2FnZTogdHJlZXMubWVyZ2VkLmVycm9yLm1lc3NhZ2UsXG4gICAgICBhY3Rpb25zOiAvKiNfX1BVUkVfXyovanN4KEJ1dHRvbiwge1xuICAgICAgICB0b25lOiBcImFjY2VudFwiLFxuICAgICAgICBocmVmOiBwcm9wcy5iYXNlUGF0aCxcbiAgICAgICAgY2hpbGRyZW46IFwiRGFzaGJvYXJkXCJcbiAgICAgIH0pXG4gICAgfSk7XG4gIH1cbiAgaWYgKHRyZWVzLm1lcmdlZC5raW5kID09PSAnbG9hZGluZycpIHtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChFbXB0eVN0YXRlLCB7XG4gICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChQcm9ncmVzc0NpcmNsZSwge1xuICAgICAgICBcImFyaWEtbGFiZWxcIjogXCJMb2FkaW5nIEVudHJpZXNcIixcbiAgICAgICAgaXNJbmRldGVybWluYXRlOiB0cnVlLFxuICAgICAgICBzaXplOiBcImxhcmdlXCJcbiAgICAgIH0pXG4gICAgfSk7XG4gIH1cbiAgaWYgKCF0cmVlKSB7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goRW1wdHlTdGF0ZSwge1xuICAgICAgaWNvbjogbGlzdFhJY29uLFxuICAgICAgdGl0bGU6IFwiRW1wdHkgY29sbGVjdGlvblwiLFxuICAgICAgbWVzc2FnZTogLyojX19QVVJFX18qL2pzeHMoRnJhZ21lbnQsIHtcbiAgICAgICAgY2hpbGRyZW46IFtcIlRoZXJlIGFyZW4ndCBhbnkgZW50cmllcyB5ZXQuXCIsICcgJywgLyojX19QVVJFX18qL2pzeChUZXh0TGluaywge1xuICAgICAgICAgIGhyZWY6IGAke3Byb3BzLmJhc2VQYXRofS9jb2xsZWN0aW9uLyR7ZW5jb2RlVVJJQ29tcG9uZW50KHByb3BzLmNvbGxlY3Rpb24pfS9jcmVhdGVgLFxuICAgICAgICAgIGNoaWxkcmVuOiBcIkNyZWF0ZSB0aGUgZmlyc3QgZW50cnlcIlxuICAgICAgICB9KSwgJyAnLCBcInRvIHNlZSBpdCBoZXJlLlwiXVxuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChDb2xsZWN0aW9uVGFibGUsIHtcbiAgICAuLi5wcm9wcyxcbiAgICB0cmVlczogdHJlZXMubWVyZ2VkLmRhdGFcbiAgfSk7XG59XG5mdW5jdGlvbiBDb2xsZWN0aW9uVGFibGUocHJvcHMpIHtcbiAgbGV0IHtcbiAgICBzZWFyY2hUZXJtXG4gIH0gPSBwcm9wcztcbiAgbGV0IHtcbiAgICBjdXJyZW50QnJhbmNoLFxuICAgIGRlZmF1bHRCcmFuY2hcbiAgfSA9IHVzZUJyYW5jaEluZm8oKTtcbiAgbGV0IGlzTG9jYWxNb2RlID0gaXNMb2NhbENvbmZpZyhwcm9wcy5jb25maWcpO1xuICBsZXQgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gIGxldCBbc29ydERlc2NyaXB0b3IsIHNldFNvcnREZXNjcmlwdG9yXSA9IHVzZVN0YXRlKHtcbiAgICBjb2x1bW46ICduYW1lJyxcbiAgICBkaXJlY3Rpb246ICdhc2NlbmRpbmcnXG4gIH0pO1xuICBsZXQgaGlkZVN0YXR1c0NvbHVtbiA9IGlzTG9jYWxNb2RlIHx8IGN1cnJlbnRCcmFuY2ggPT09IGRlZmF1bHRCcmFuY2g7XG4gIGNvbnN0IGVudHJpZXNXaXRoU3RhdHVzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgZGVmYXVsdEVudHJpZXMgPSBuZXcgTWFwKGdldEVudHJpZXNJbkNvbGxlY3Rpb25XaXRoVHJlZUtleShwcm9wcy5jb25maWcsIHByb3BzLmNvbGxlY3Rpb24sIHByb3BzLnRyZWVzLmRlZmF1bHQudHJlZSkubWFwKHggPT4gW3guc2x1ZywgeC5rZXldKSk7XG4gICAgcmV0dXJuIGdldEVudHJpZXNJbkNvbGxlY3Rpb25XaXRoVHJlZUtleShwcm9wcy5jb25maWcsIHByb3BzLmNvbGxlY3Rpb24sIHByb3BzLnRyZWVzLmN1cnJlbnQudHJlZSkubWFwKGVudHJ5ID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IGVudHJ5LnNsdWcsXG4gICAgICAgIHN0YXR1czogZGVmYXVsdEVudHJpZXMuaGFzKGVudHJ5LnNsdWcpID8gZGVmYXVsdEVudHJpZXMuZ2V0KGVudHJ5LnNsdWcpID09PSBlbnRyeS5rZXkgPyAnVW5jaGFuZ2VkJyA6ICdDaGFuZ2VkJyA6ICdBZGRlZCdcbiAgICAgIH07XG4gICAgfSk7XG4gIH0sIFtwcm9wcy5jb2xsZWN0aW9uLCBwcm9wcy5jb25maWcsIHByb3BzLnRyZWVzXSk7XG4gIGNvbnN0IGZpbHRlcmVkSXRlbXMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gZW50cmllc1dpdGhTdGF0dXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpKSk7XG4gIH0sIFtlbnRyaWVzV2l0aFN0YXR1cywgc2VhcmNoVGVybV0pO1xuICBjb25zdCBzb3J0ZWRJdGVtcyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBbLi4uZmlsdGVyZWRJdGVtc10uc29ydChzb3J0QnlEZXNjcmlwdG9yKHNvcnREZXNjcmlwdG9yKSk7XG4gIH0sIFtmaWx0ZXJlZEl0ZW1zLCBzb3J0RGVzY3JpcHRvcl0pO1xuICBjb25zdCBjb2x1bW5zID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIGhpZGVTdGF0dXNDb2x1bW4gPyBbe1xuICAgICAgbmFtZTogJ05hbWUnLFxuICAgICAga2V5OiAnbmFtZSdcbiAgICB9XSA6IFt7XG4gICAgICBuYW1lOiAnTmFtZScsXG4gICAgICBrZXk6ICduYW1lJ1xuICAgIH0sIHtcbiAgICAgIG5hbWU6ICdTdGF0dXMnLFxuICAgICAga2V5OiAnc3RhdHVzJyxcbiAgICAgIG1pbldpZHRoOiAxNDAsXG4gICAgICB3aWR0aDogJzIwJSdcbiAgICB9XTtcbiAgfSwgW2hpZGVTdGF0dXNDb2x1bW5dKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3hzKFRhYmxlVmlldywge1xuICAgIFwiYXJpYS1sYWJlbGxlZGJ5XCI6IFwicGFnZS10aXRsZVwiLFxuICAgIHNlbGVjdGlvbk1vZGU6IFwibm9uZVwiLFxuICAgIG9uU29ydENoYW5nZTogc2V0U29ydERlc2NyaXB0b3IsXG4gICAgc29ydERlc2NyaXB0b3I6IHNvcnREZXNjcmlwdG9yLFxuICAgIGRlbnNpdHk6IFwic3BhY2lvdXNcIixcbiAgICBvdmVyZmxvd01vZGU6IFwidHJ1bmNhdGVcIixcbiAgICBwcm9taW5lbmNlOiBcImxvd1wiLFxuICAgIG9uUm93QWN0aW9uOiBrZXkgPT4ge1xuICAgICAgcm91dGVyLnB1c2goZ2V0SXRlbVBhdGgocHJvcHMuYmFzZVBhdGgsIHByb3BzLmNvbGxlY3Rpb24sIGtleSkpO1xuICAgIH0sXG4gICAgcmVuZGVyRW1wdHlTdGF0ZTogKCkgPT4gLyojX19QVVJFX18qL2pzeChFbXB0eVN0YXRlLCB7XG4gICAgICBpY29uOiBzZWFyY2hYSWNvbixcbiAgICAgIHRpdGxlOiBcIk5vIHJlc3VsdHNcIixcbiAgICAgIG1lc3NhZ2U6IGBObyBpdGVtcyBtYXRjaGluZyBcIiR7c2VhcmNoVGVybX1cIiB3ZXJlIGZvdW5kLmBcbiAgICB9KSxcbiAgICBmbGV4OiB0cnVlLFxuICAgIG1hcmdpblRvcDoge1xuICAgICAgdGFibGV0OiAnbGFyZ2UnXG4gICAgfSxcbiAgICBtYXJnaW5Cb3R0b206IHtcbiAgICAgIG1vYmlsZTogJ3JlZ3VsYXInLFxuICAgICAgdGFibGV0OiAneGxhcmdlJ1xuICAgIH0sXG4gICAgVU5TQUZFX2NsYXNzTmFtZTogY3NzKHtcbiAgICAgIG1hcmdpbklubGluZTogdG9rZW5TY2hlbWEuc2l6ZS5zcGFjZS5yZWd1bGFyLFxuICAgICAgW2JyZWFrcG9pbnRRdWVyaWVzLmFib3ZlLm1vYmlsZV06IHtcbiAgICAgICAgbWFyZ2luSW5saW5lOiBgY2FsYygke3Rva2VuU2NoZW1hLnNpemUuc3BhY2UueGxhcmdlfSAtICR7dG9rZW5TY2hlbWEuc2l6ZS5zcGFjZS5tZWRpdW19KWBcbiAgICAgIH0sXG4gICAgICBbYnJlYWtwb2ludFF1ZXJpZXMuYWJvdmUudGFibGV0XToge1xuICAgICAgICBtYXJnaW5JbmxpbmU6IGBjYWxjKCR7dG9rZW5TY2hlbWEuc2l6ZS5zcGFjZS54eGxhcmdlfSAtICR7dG9rZW5TY2hlbWEuc2l6ZS5zcGFjZS5tZWRpdW19KWBcbiAgICAgIH0sXG4gICAgICAnW3JvbGU9cm93aGVhZGVyXSc6IHtcbiAgICAgICAgY3Vyc29yOiAncG9pbnRlcidcbiAgICAgIH1cbiAgICB9KSxcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goVGFibGVIZWFkZXIsIHtcbiAgICAgIGNvbHVtbnM6IGNvbHVtbnMsXG4gICAgICBjaGlsZHJlbjogKHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAga2V5LFxuICAgICAgICAuLi5vcHRpb25zXG4gICAgICB9KSA9PiAvKiNfX1BVUkVfXyovanN4KENvbHVtbiwge1xuICAgICAgICBpc1Jvd0hlYWRlcjogdHJ1ZSxcbiAgICAgICAgYWxsb3dzU29ydGluZzogdHJ1ZSxcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgY2hpbGRyZW46IG5hbWVcbiAgICAgIH0sIGtleSlcbiAgICB9KSwgLyojX19QVVJFX18qL2pzeChUYWJsZUJvZHksIHtcbiAgICAgIGl0ZW1zOiBzb3J0ZWRJdGVtcyxcbiAgICAgIGNoaWxkcmVuOiBpdGVtID0+IGhpZGVTdGF0dXNDb2x1bW4gPyAvKiNfX1BVUkVfXyovanN4KFJvdywge1xuICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChDZWxsLCB7XG4gICAgICAgICAgdGV4dFZhbHVlOiBpdGVtLm5hbWUsXG4gICAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goVGV4dCwge1xuICAgICAgICAgICAgd2VpZ2h0OiBcIm1lZGl1bVwiLFxuICAgICAgICAgICAgY2hpbGRyZW46IGl0ZW0ubmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9LCBpdGVtLm5hbWUpIDogLyojX19QVVJFX18qL2pzeHMoUm93LCB7XG4gICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChDZWxsLCB7XG4gICAgICAgICAgdGV4dFZhbHVlOiBpdGVtLm5hbWUsXG4gICAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goVGV4dCwge1xuICAgICAgICAgICAgd2VpZ2h0OiBcIm1lZGl1bVwiLFxuICAgICAgICAgICAgY2hpbGRyZW46IGl0ZW0ubmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KENlbGwsIHtcbiAgICAgICAgICB0ZXh0VmFsdWU6IGl0ZW0uc3RhdHVzLFxuICAgICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KFN0YXR1c0xpZ2h0LCB7XG4gICAgICAgICAgICB0b25lOiBzdGF0dXNUb25lc1tpdGVtLnN0YXR1c10sXG4gICAgICAgICAgICBjaGlsZHJlbjogaXRlbS5zdGF0dXNcbiAgICAgICAgICB9KVxuICAgICAgICB9KV1cbiAgICAgIH0sIGl0ZW0ubmFtZSlcbiAgICB9KV1cbiAgfSk7XG59XG5mdW5jdGlvbiBnZXRJdGVtUGF0aChiYXNlUGF0aCwgY29sbGVjdGlvbiwga2V5KSB7XG4gIHJldHVybiBgJHtiYXNlUGF0aH0vY29sbGVjdGlvbi8ke2VuY29kZVVSSUNvbXBvbmVudChjb2xsZWN0aW9uKX0vaXRlbS8ke2VuY29kZVVSSUNvbXBvbmVudChrZXkpfWA7XG59XG5mdW5jdGlvbiB1c2VEZWJvdW5jZWRWYWx1ZSh2YWx1ZSwgZGVsYXkgPSAzMDApIHtcbiAgY29uc3QgW2RlYm91bmNlZFZhbHVlLCBzZXREZWJvdW5jZWRWYWx1ZV0gPSB1c2VTdGF0ZSh2YWx1ZSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHNldERlYm91bmNlZFZhbHVlKHZhbHVlKSwgZGVsYXkpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgIH07XG4gIH0sIFt2YWx1ZSwgZGVsYXldKTtcbiAgcmV0dXJuIGRlYm91bmNlZFZhbHVlO1xufVxuY29uc3Qgc3RhdHVzVG9uZXMgPSB7XG4gIEFkZGVkOiAncG9zaXRpdmUnLFxuICBDaGFuZ2VkOiAnYWNjZW50JyxcbiAgVW5jaGFuZ2VkOiAnbmV1dHJhbCdcbn07XG5cbmNvbnN0IEFwcFNsdWdDb250ZXh0ID0gLyojX19QVVJFX18qL2NyZWF0ZUNvbnRleHQodW5kZWZpbmVkKTtcbmNvbnN0IEFwcFNsdWdQcm92aWRlciA9IEFwcFNsdWdDb250ZXh0LlByb3ZpZGVyO1xuZnVuY3Rpb24gSW5zdGFsbEdpdEh1YkFwcChwcm9wcykge1xuICB2YXIgX1VSTCRzZWFyY2hQYXJhbXMkZ2V0O1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgY29uc3QgYXBwU2x1Z0Zyb21Db250ZXh0ID0gdXNlQ29udGV4dChBcHBTbHVnQ29udGV4dCk7XG4gIGNvbnN0IGFwcFNsdWcgPSAoX1VSTCRzZWFyY2hQYXJhbXMkZ2V0ID0gbmV3IFVSTChyb3V0ZXIuaHJlZiwgJ2h0dHBzOi8vZXhhbXBsZS5jb20nKS5zZWFyY2hQYXJhbXMuZ2V0KCdzbHVnJykpICE9PSBudWxsICYmIF9VUkwkc2VhcmNoUGFyYW1zJGdldCAhPT0gdm9pZCAwID8gX1VSTCRzZWFyY2hQYXJhbXMkZ2V0IDogYXBwU2x1Z0Zyb21Db250ZXh0ID09PSBudWxsIHx8IGFwcFNsdWdGcm9tQ29udGV4dCA9PT0gdm9pZCAwID8gdm9pZCAwIDogYXBwU2x1Z0Zyb21Db250ZXh0LnZhbHVlO1xuICBjb25zdCBwYXJzZWRSZXBvID0gcGFyc2VSZXBvQ29uZmlnKHByb3BzLmNvbmZpZy5zdG9yYWdlLnJlcG8pO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeHMoRmxleCwge1xuICAgIGRpcmVjdGlvbjogXCJjb2x1bW5cIixcbiAgICBnYXA6IFwicmVndWxhclwiLFxuICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeHMoRmxleCwge1xuICAgICAgYWxpZ25JdGVtczogXCJlbmRcIixcbiAgICAgIGdhcDogXCJyZWd1bGFyXCIsXG4gICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goVGV4dEZpZWxkLCB7XG4gICAgICAgIGxhYmVsOiBcIlJlcG8gTmFtZVwiLFxuICAgICAgICB3aWR0aDogXCIxMDAlXCIsXG4gICAgICAgIGlzUmVhZE9ubHk6IHRydWUsXG4gICAgICAgIHZhbHVlOiBwYXJzZWRSZXBvLm5hbWVcbiAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KEFjdGlvbkJ1dHRvbiwge1xuICAgICAgICBvblByZXNzOiAoKSA9PiB7XG4gICAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQocGFyc2VkUmVwby5uYW1lKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2hpbGRyZW46IFwiQ29weSBSZXBvIE5hbWVcIlxuICAgICAgfSldXG4gICAgfSksIGFwcFNsdWcgPyAvKiNfX1BVUkVfXyovanN4KEJ1dHRvbiwge1xuICAgICAgcHJvbWluZW5jZTogXCJoaWdoXCIsXG4gICAgICBocmVmOiBgaHR0cHM6Ly9naXRodWIuY29tL2FwcHMvJHthcHBTbHVnfS9pbnN0YWxsYXRpb25zL25ld2AsXG4gICAgICBjaGlsZHJlbjogXCJJbnN0YWxsIEdpdEh1YiBBcHBcIlxuICAgIH0pIDogLyojX19QVVJFX18qL2pzeChOb3RpY2UsIHtcbiAgICAgIHRvbmU6IFwiY2F1dGlvblwiLFxuICAgICAgY2hpbGRyZW46IGFwcFNsdWdGcm9tQ29udGV4dCA/IC8qI19fUFVSRV9fKi9qc3hzKFRleHQsIHtcbiAgICAgICAgY2hpbGRyZW46IFtcIlRoZSBcIiwgLyojX19QVVJFX18qL2pzeChcImNvZGVcIiwge1xuICAgICAgICAgIGNoaWxkcmVuOiBhcHBTbHVnRnJvbUNvbnRleHQuZW52TmFtZVxuICAgICAgICB9KSwgXCIgZW52aXJvbm1lbnQgdmFyaWFibGUgd2Fzbid0IHByb3ZpZGVkIHNvIHdlIGNhbid0IGxpbmsgdG8gdGhlIEdpdEh1YiBhcHAgaW5zdGFsbGF0aW9uIHBhZ2UuIFlvdSBzaG91bGQgZmluZCB0aGUgQXBwIG9uIEdpdEh1YiBhbmQgYWRkIHRoZSByZXBvIHlvdXJzZWxmLlwiXVxuICAgICAgfSkgOiAvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgICAgY2hpbGRyZW46IFwiRmluZCB0aGUgQXBwIG9uIEdpdEh1YiBhbmQgYWRkIHRoZSByZXBvLlwiXG4gICAgICB9KVxuICAgIH0pXVxuICB9KTtcbn1cblxuZnVuY3Rpb24gRm9ya1JlcG9EaWFsb2cocHJvcHMpIHtcbiAgY29uc3Qgc3RyaW5nRm9ybWF0dGVyID0gdXNlTG9jYWxpemVkU3RyaW5nRm9ybWF0dGVyKGwxMG5NZXNzYWdlcyk7XG4gIGNvbnN0IGNsaWVudCA9IHVzZUNsaWVudCgpO1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlKHtcbiAgICBraW5kOiAnaWRsZSdcbiAgfSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgbGlzdGVuZXIgPSBhc3luYyBldmVudCA9PiB7XG4gICAgICBpZiAoZXZlbnQua2V5ID09PSAna3MtcmVmZXRjaC1pbnN0YWxsYXRpb25zJyAmJiBldmVudC5uZXdWYWx1ZSA9PT0gJ3RydWUnKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdrcy1yZWZldGNoLWluc3RhbGxhdGlvbnMnKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB2YXIgX3JlcyRkYXRhO1xuICAgICAgICAgIGNvbnN0IGF1dGggPSBhd2FpdCBnZXRBdXRoKHByb3BzLmNvbmZpZyk7XG4gICAgICAgICAgaWYgKCFhdXRoKSB0aHJvdyBuZXcgRXJyb3IoJ1VuYXV0aG9yaXplZCcpO1xuICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGNsaWVudC5xdWVyeShHaXRIdWJBcHBTaGVsbFF1ZXJ5LCBwYXJzZVJlcG9Db25maWcocHJvcHMuY29uZmlnLnN0b3JhZ2UucmVwbykpLnRvUHJvbWlzZSgpO1xuICAgICAgICAgIGlmICgoX3JlcyRkYXRhID0gcmVzLmRhdGEpICE9PSBudWxsICYmIF9yZXMkZGF0YSAhPT0gdm9pZCAwICYmIChfcmVzJGRhdGEgPSBfcmVzJGRhdGEucmVwb3NpdG9yeSkgIT09IG51bGwgJiYgX3JlcyRkYXRhICE9PSB2b2lkIDAgJiYgKF9yZXMkZGF0YSA9IF9yZXMkZGF0YS5mb3Jrcy5ub2RlcykgIT09IG51bGwgJiYgX3JlcyRkYXRhICE9PSB2b2lkIDAgJiYgX3JlcyRkYXRhLnNvbWUoeCA9PiAoeCA9PT0gbnVsbCB8fCB4ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB4LnZpZXdlclBlcm1pc3Npb24pID09PSAnQURNSU4nIHx8ICh4ID09PSBudWxsIHx8IHggPT09IHZvaWQgMCA/IHZvaWQgMCA6IHgudmlld2VyUGVybWlzc2lvbikgPT09ICdXUklURScgfHwgKHggPT09IG51bGwgfHwgeCA9PT0gdm9pZCAwID8gdm9pZCAwIDogeC52aWV3ZXJQZXJtaXNzaW9uKSA9PT0gJ01BSU5UQUlOJykpIHtcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcbiAgICAgICAgICAgIHByb3BzLm9uQ3JlYXRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgICBraW5kOiAnZXJyb3InLFxuICAgICAgICAgICAgZXJyb3I6IGVyclxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBhZGRFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgbGlzdGVuZXIpO1xuICAgIHJldHVybiAoKSA9PiByZW1vdmVFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgbGlzdGVuZXIpO1xuICB9LCBbY2xpZW50LCBwcm9wc10pO1xuICBjb25zdCBhcHBTbHVnID0gdXNlQ29udGV4dChBcHBTbHVnQ29udGV4dCk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhEaWFsb2csIHtcbiAgICBzaXplOiBcInNtYWxsXCIsXG4gICAgaXNEaXNtaXNzYWJsZTogdHJ1ZSxcbiAgICBvbkRpc21pc3M6ICgpID0+IHtcbiAgICAgIHByb3BzLm9uRGlzbWlzcygpO1xuICAgIH0sXG4gICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEhlYWRpbmcsIHtcbiAgICAgIGNoaWxkcmVuOiBcIkZvcmsgUmVwb1wiXG4gICAgfSksIHN0YXRlLmtpbmQgPT09ICdlcnJvcicgPyAvKiNfX1BVUkVfXyovanN4cyhGcmFnbWVudCwge1xuICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KENvbnRlbnQsIHtcbiAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goTm90aWNlLCB7XG4gICAgICAgICAgdG9uZTogXCJjcml0aWNhbFwiLFxuICAgICAgICAgIGNoaWxkcmVuOiBzdGF0ZS5lcnJvci5tZXNzYWdlXG4gICAgICAgIH0pXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeChCdXR0b25Hcm91cCwge1xuICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChCdXR0b24sIHtcbiAgICAgICAgICBvblByZXNzOiBwcm9wcy5vbkRpc21pc3MsXG4gICAgICAgICAgY2hpbGRyZW46IHN0cmluZ0Zvcm1hdHRlci5mb3JtYXQoJ2NhbmNlbCcpXG4gICAgICAgIH0pXG4gICAgICB9KV1cbiAgICB9KSA6IC8qI19fUFVSRV9fKi9qc3goRnJhZ21lbnQsIHtcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KENvbnRlbnQsIHtcbiAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3hzKEZsZXgsIHtcbiAgICAgICAgICBnYXA6IFwibGFyZ2VcIixcbiAgICAgICAgICBkaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgICAgICAgbWFyZ2luQm90dG9tOiBcImxhcmdlXCIsXG4gICAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBcIllvdSBkb24ndCBoYXZlIHBlcm1pc3Npb24gdG8gd3JpdGUgdG8gdGhpcyByZXBvIHNvIHRvIHNhdmUgeW91ciBjaGFuZ2VzLCB5b3UgbmVlZCB0byBmb3JrIHRoZSByZXBvLlwiXG4gICAgICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3hzKFRleHQsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXCJUbyBzdGFydCxcIiwgJyAnLCAvKiNfX1BVUkVfXyovanN4KFRleHRMaW5rLCB7XG4gICAgICAgICAgICAgIGhyZWY6IGBodHRwczovL2dpdGh1Yi5jb20vJHtzZXJpYWxpemVSZXBvQ29uZmlnKHByb3BzLmNvbmZpZy5zdG9yYWdlLnJlcG8pfS9mb3JrYCxcbiAgICAgICAgICAgICAgdGFyZ2V0OiBcIl9ibGFua1wiLFxuICAgICAgICAgICAgICByZWw6IFwibm9vcGVuZXIgbm9yZWZlcnJlclwiLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogXCJmb3JrIHRoZSByZXBvIG9uIEdpdEh1YlwiXG4gICAgICAgICAgICB9KSwgXCIuIFRoZW4sIGNvbWUgYmFjayB0byB0aGlzIHBhZ2UgYW5kXCIsICcgJywgLyojX19QVVJFX18qL2pzeChUZXh0TGluaywge1xuICAgICAgICAgICAgICBocmVmOiBgaHR0cHM6Ly9naXRodWIuY29tL2FwcHMvJHthcHBTbHVnID09PSBudWxsIHx8IGFwcFNsdWcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFwcFNsdWcudmFsdWV9L2luc3RhbGxhdGlvbnMvbmV3P3N0YXRlPWNsb3NlYCxcbiAgICAgICAgICAgICAgdGFyZ2V0OiBcIl9ibGFua1wiLFxuICAgICAgICAgICAgICByZWw6IFwibm9vcGVuZXIgbm9yZWZlcnJlclwiLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogXCJpbnN0YWxsIHRoZSBLZXlzdGF0aWMgR2l0SHViIEFwcCBvbiB5b3VyIGZvcmsuXCJcbiAgICAgICAgICAgIH0pXVxuICAgICAgICAgIH0pXVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KV1cbiAgfSk7XG59XG5cbmNsYXNzIFRyYWNrZWRNYXAgZXh0ZW5kcyBNYXAge1xuICAjb25HZXQ7XG4gIGNvbnN0cnVjdG9yKG9uR2V0LCBlbnRyaWVzKSB7XG4gICAgc3VwZXIoZW50cmllcyk7XG4gICAgdGhpcy4jb25HZXQgPSBvbkdldDtcbiAgfVxuICBnZXQoa2V5KSB7XG4gICAgdGhpcy4jb25HZXQoa2V5KTtcbiAgICByZXR1cm4gc3VwZXIuZ2V0KGtleSk7XG4gIH1cbn1cbmZ1bmN0aW9uIHBhcnNlRW50cnkoYXJncywgZmlsZXMpIHtcbiAgY29uc3QgZGF0YUZpbGVwYXRoID0gZ2V0RW50cnlEYXRhRmlsZXBhdGgoYXJncy5kaXJwYXRoLCBhcmdzLmZvcm1hdCk7XG4gIGNvbnN0IGRhdGEgPSBmaWxlcy5nZXQoZGF0YUZpbGVwYXRoKTtcbiAgaWYgKCFkYXRhKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZmluZCBkYXRhIGZpbGUgYXQgJHtkYXRhRmlsZXBhdGh9YCk7XG4gIH1cbiAgY29uc3Qge1xuICAgIGxvYWRlZCxcbiAgICBleHRyYUZha2VGaWxlXG4gIH0gPSBsb2FkRGF0YUZpbGUoZGF0YSwgYXJncy5mb3JtYXQpO1xuICBjb25zdCBmaWxlc1dpdGhGYWtlRmlsZSA9IG5ldyBNYXAoZmlsZXMpO1xuICBpZiAoZXh0cmFGYWtlRmlsZSkge1xuICAgIGZpbGVzV2l0aEZha2VGaWxlLnNldChgJHthcmdzLmRpcnBhdGh9LyR7ZXh0cmFGYWtlRmlsZS5wYXRofWAsIGV4dHJhRmFrZUZpbGUuY29udGVudHMpO1xuICB9XG4gIGNvbnN0IHVzZWRGaWxlcyA9IG5ldyBTZXQoW2RhdGFGaWxlcGF0aF0pO1xuICBjb25zdCByb290U2NoZW1hID0gb2JqZWN0KGFyZ3Muc2NoZW1hKTtcbiAgbGV0IGluaXRpYWxTdGF0ZTtcbiAgY29uc3QgZ2V0RmlsZSA9IGZpbGVwYXRoID0+IHtcbiAgICB1c2VkRmlsZXMuYWRkKGZpbGVwYXRoKTtcbiAgICByZXR1cm4gZmlsZXNXaXRoRmFrZUZpbGUuZ2V0KGZpbGVwYXRoKTtcbiAgfTtcbiAgdHJ5IHtcbiAgICBpbml0aWFsU3RhdGUgPSBwYXJzZVByb3BzKHJvb3RTY2hlbWEsIGxvYWRlZCwgW10sIFtdLCAoc2NoZW1hLCB2YWx1ZSwgcGF0aCwgcGF0aFdpdGhBcnJheUZpZWxkU2x1Z3MpID0+IHtcbiAgICAgIHZhciBfYXJncyRzbHVnO1xuICAgICAgaWYgKHBhdGgubGVuZ3RoID09PSAxICYmIHBhdGhbMF0gPT09ICgoX2FyZ3Mkc2x1ZyA9IGFyZ3Muc2x1ZykgPT09IG51bGwgfHwgX2FyZ3Mkc2x1ZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FyZ3Mkc2x1Zy5maWVsZCkpIHtcbiAgICAgICAgaWYgKHNjaGVtYS5mb3JtS2luZCAhPT0gJ3NsdWcnKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBzbHVnRmllbGQgaXMgbm90IGEgc2x1ZyBmaWVsZGApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzY2hlbWEucGFyc2UodmFsdWUsIHtcbiAgICAgICAgICBzbHVnOiBhcmdzLnNsdWcuc2x1Z1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChzY2hlbWEuZm9ybUtpbmQgPT09ICdhc3NldCcpIHtcbiAgICAgICAgdmFyIF9hcmdzJHNsdWcyLCBfYXJncyRzbHVnMywgX2FyZ3Mkc2x1ZzQ7XG4gICAgICAgIGNvbnN0IHN1Z2dlc3RlZEZpbGVuYW1lUHJlZml4ID0gcGF0aFdpdGhBcnJheUZpZWxkU2x1Z3Muam9pbignLycpO1xuICAgICAgICBjb25zdCBmaWxlcGF0aCA9IHNjaGVtYS5maWxlbmFtZSh2YWx1ZSwge1xuICAgICAgICAgIHN1Z2dlc3RlZEZpbGVuYW1lUHJlZml4LFxuICAgICAgICAgIHNsdWc6IChfYXJncyRzbHVnMiA9IGFyZ3Muc2x1ZykgPT09IG51bGwgfHwgX2FyZ3Mkc2x1ZzIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hcmdzJHNsdWcyLnNsdWdcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGFzc2V0ID0gZmlsZXBhdGggPyBnZXRGaWxlKGAke3NjaGVtYS5kaXJlY3RvcnkgPyBgJHtzY2hlbWEuZGlyZWN0b3J5fSR7KChfYXJncyRzbHVnMyA9IGFyZ3Muc2x1ZykgPT09IG51bGwgfHwgX2FyZ3Mkc2x1ZzMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hcmdzJHNsdWczLnNsdWcpID09PSB1bmRlZmluZWQgPyAnJyA6IGAvJHthcmdzLnNsdWcuc2x1Z31gfWAgOiBhcmdzLmRpcnBhdGh9LyR7ZmlsZXBhdGh9YCkgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBzY2hlbWEucGFyc2UodmFsdWUsIHtcbiAgICAgICAgICBhc3NldCxcbiAgICAgICAgICBzbHVnOiAoX2FyZ3Mkc2x1ZzQgPSBhcmdzLnNsdWcpID09PSBudWxsIHx8IF9hcmdzJHNsdWc0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYXJncyRzbHVnNC5zbHVnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHNjaGVtYS5mb3JtS2luZCA9PT0gJ2NvbnRlbnQnKSB7XG4gICAgICAgIHZhciBfYXJncyRzbHVnNztcbiAgICAgICAgY29uc3Qgcm9vdFBhdGggPSBgJHthcmdzLmRpcnBhdGh9LyR7cGF0aFdpdGhBcnJheUZpZWxkU2x1Z3Muam9pbignLycpfWA7XG4gICAgICAgIGNvbnN0IG1haW5GaWxlcGF0aCA9IHJvb3RQYXRoICsgc2NoZW1hLmNvbnRlbnRFeHRlbnNpb247XG4gICAgICAgIGNvbnN0IG1haW5Db250ZW50cyA9IGdldEZpbGUobWFpbkZpbGVwYXRoKTtcbiAgICAgICAgY29uc3Qgb3RoZXJGaWxlcyA9IG5ldyBUcmFja2VkTWFwKGtleSA9PiB7XG4gICAgICAgICAgdXNlZEZpbGVzLmFkZChgJHtyb290UGF0aH0vJHtrZXl9YCk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBvdGhlckRpcmVjdG9yaWVzID0gbmV3IE1hcCgpO1xuICAgICAgICBmb3IgKGNvbnN0IFtmaWxlbmFtZV0gb2YgZmlsZXNXaXRoRmFrZUZpbGUpIHtcbiAgICAgICAgICBpZiAoZmlsZW5hbWUuc3RhcnRzV2l0aChyb290UGF0aCArICcvJykpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlbGF0aXZlUGF0aCA9IGZpbGVuYW1lLnNsaWNlKHJvb3RQYXRoLmxlbmd0aCArIDEpO1xuICAgICAgICAgICAgb3RoZXJGaWxlcy5zZXQocmVsYXRpdmVQYXRoLCBmaWxlc1dpdGhGYWtlRmlsZS5nZXQoZmlsZW5hbWUpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBkaXIgb2YgKF9zY2hlbWEkZGlyZWN0b3JpZXMgPSBzY2hlbWEuZGlyZWN0b3JpZXMpICE9PSBudWxsICYmIF9zY2hlbWEkZGlyZWN0b3JpZXMgIT09IHZvaWQgMCA/IF9zY2hlbWEkZGlyZWN0b3JpZXMgOiBbXSkge1xuICAgICAgICAgIHZhciBfc2NoZW1hJGRpcmVjdG9yaWVzLCBfYXJncyRzbHVnNSwgX2FyZ3Mkc2x1ZzY7XG4gICAgICAgICAgY29uc3QgZGlyRmlsZXMgPSBuZXcgVHJhY2tlZE1hcChyZWxhdGl2ZVBhdGggPT4gdXNlZEZpbGVzLmFkZChzdGFydCArIHJlbGF0aXZlUGF0aCkpO1xuICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gYCR7ZGlyfSR7KChfYXJncyRzbHVnNSA9IGFyZ3Muc2x1ZykgPT09IG51bGwgfHwgX2FyZ3Mkc2x1ZzUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hcmdzJHNsdWc1LnNsdWcpID09PSB1bmRlZmluZWQgPyAnJyA6IGAvJHsoX2FyZ3Mkc2x1ZzYgPSBhcmdzLnNsdWcpID09PSBudWxsIHx8IF9hcmdzJHNsdWc2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYXJncyRzbHVnNi5zbHVnfWB9L2A7XG4gICAgICAgICAgZm9yIChjb25zdCBbZmlsZW5hbWUsIHZhbF0gb2YgZmlsZXNXaXRoRmFrZUZpbGUpIHtcbiAgICAgICAgICAgIGlmIChmaWxlbmFtZS5zdGFydHNXaXRoKHN0YXJ0KSkge1xuICAgICAgICAgICAgICBjb25zdCByZWxhdGl2ZVBhdGggPSBmaWxlbmFtZS5zbGljZShzdGFydC5sZW5ndGgpO1xuICAgICAgICAgICAgICBkaXJGaWxlcy5zZXQocmVsYXRpdmVQYXRoLCB2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZGlyRmlsZXMuc2l6ZSkge1xuICAgICAgICAgICAgb3RoZXJEaXJlY3Rvcmllcy5zZXQoZGlyLCBkaXJGaWxlcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzY2hlbWEucGFyc2UodmFsdWUsIHtcbiAgICAgICAgICBjb250ZW50OiBtYWluQ29udGVudHMsXG4gICAgICAgICAgb3RoZXI6IG90aGVyRmlsZXMsXG4gICAgICAgICAgZXh0ZXJuYWw6IG90aGVyRGlyZWN0b3JpZXMsXG4gICAgICAgICAgc2x1ZzogKF9hcmdzJHNsdWc3ID0gYXJncy5zbHVnKSA9PT0gbnVsbCB8fCBfYXJncyRzbHVnNyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FyZ3Mkc2x1Zzcuc2x1Z1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzY2hlbWEucGFyc2UodmFsdWUsIHVuZGVmaW5lZCk7XG4gICAgfSwgZmFsc2UpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyB0b0Zvcm1hdHRlZEZvcm1EYXRhRXJyb3IoZXJyKTtcbiAgfVxuICBpZiAoZXh0cmFGYWtlRmlsZSkge1xuICAgIHVzZWRGaWxlcy5kZWxldGUoYCR7YXJncy5kaXJwYXRofS8ke2V4dHJhRmFrZUZpbGUucGF0aH1gKTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGluaXRpYWxTdGF0ZSxcbiAgICBpbml0aWFsRmlsZXM6IFsuLi51c2VkRmlsZXNdXG4gIH07XG59XG5mdW5jdGlvbiBnZXRBbGxGaWxlc0luVHJlZSh0cmVlKSB7XG4gIHJldHVybiBbLi4udHJlZS52YWx1ZXMoKV0uZmxhdE1hcCh2YWwgPT4gdmFsLmNoaWxkcmVuID8gZ2V0QWxsRmlsZXNJblRyZWUodmFsLmNoaWxkcmVuKSA6IFt2YWwuZW50cnldKTtcbn1cbmZ1bmN0aW9uIHVzZUl0ZW1EYXRhKGFyZ3MpIHtcbiAgdmFyIF9hcmdzJHNsdWc5O1xuICBjb25zdCB7XG4gICAgY3VycmVudDogY3VycmVudEJyYW5jaFxuICB9ID0gdXNlVHJlZSgpO1xuICBjb25zdCBiYXNlQ29tbWl0ID0gdXNlQmFzZUNvbW1pdCgpO1xuICBjb25zdCBpc1JlcG9Qcml2YXRlID0gdXNlSXNSZXBvUHJpdmF0ZSgpO1xuICBjb25zdCBicmFuY2hJbmZvID0gdXNlQnJhbmNoSW5mbygpO1xuICBjb25zdCByb290VHJlZSA9IGN1cnJlbnRCcmFuY2gua2luZCA9PT0gJ2xvYWRlZCcgPyBjdXJyZW50QnJhbmNoLmRhdGEudHJlZSA6IHVuZGVmaW5lZDtcbiAgY29uc3QgbG9jYXRpb25zRm9yVHJlZUtleSA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIHZhciBfYXJncyRzbHVnODtcbiAgICByZXR1cm4gZ2V0RGlyZWN0b3JpZXNGb3JUcmVlS2V5KG9iamVjdChhcmdzLnNjaGVtYSksIGFyZ3MuZGlycGF0aCwgKF9hcmdzJHNsdWc4ID0gYXJncy5zbHVnKSA9PT0gbnVsbCB8fCBfYXJncyRzbHVnOCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FyZ3Mkc2x1Zzguc2x1ZywgYXJncy5mb3JtYXQpO1xuICB9LCBbYXJncy5kaXJwYXRoLCBhcmdzLmZvcm1hdCwgYXJncy5zY2hlbWEsIChfYXJncyRzbHVnOSA9IGFyZ3Muc2x1ZykgPT09IG51bGwgfHwgX2FyZ3Mkc2x1ZzkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hcmdzJHNsdWc5LnNsdWddKTtcbiAgY29uc3QgbG9jYWxUcmVlS2V5ID0gdXNlTWVtbygoKSA9PiBnZXRUcmVlS2V5KGxvY2F0aW9uc0ZvclRyZWVLZXksIHJvb3RUcmVlICE9PSBudWxsICYmIHJvb3RUcmVlICE9PSB2b2lkIDAgPyByb290VHJlZSA6IG5ldyBNYXAoKSksIFtsb2NhdGlvbnNGb3JUcmVlS2V5LCByb290VHJlZV0pO1xuICBjb25zdCB0cmVlID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHJvb3RUcmVlICE9PSBudWxsICYmIHJvb3RUcmVlICE9PSB2b2lkIDAgPyByb290VHJlZSA6IG5ldyBNYXAoKTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIH0sIFtsb2NhbFRyZWVLZXksIGxvY2F0aW9uc0ZvclRyZWVLZXldKTtcbiAgY29uc3QgaGFzTG9hZGVkID0gY3VycmVudEJyYW5jaC5raW5kID09PSAnbG9hZGVkJztcbiAgcmV0dXJuIHVzZURhdGEodXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHZhciBfZ2V0VHJlZU5vZGVBdFBhdGg7XG4gICAgaWYgKCFoYXNMb2FkZWQpIHJldHVybiBMT0FESU5HO1xuICAgIGNvbnN0IGRhdGFGaWxlcGF0aFNoYSA9IChfZ2V0VHJlZU5vZGVBdFBhdGggPSBnZXRUcmVlTm9kZUF0UGF0aCh0cmVlLCBnZXRFbnRyeURhdGFGaWxlcGF0aChhcmdzLmRpcnBhdGgsIGFyZ3MuZm9ybWF0KSkpID09PSBudWxsIHx8IF9nZXRUcmVlTm9kZUF0UGF0aCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2dldFRyZWVOb2RlQXRQYXRoLmVudHJ5LnNoYTtcbiAgICBpZiAoZGF0YUZpbGVwYXRoU2hhID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiAnbm90LWZvdW5kJztcbiAgICB9XG4gICAgY29uc3QgX2FyZ3MgPSB7XG4gICAgICBjb25maWc6IGFyZ3MuY29uZmlnLFxuICAgICAgZGlycGF0aDogYXJncy5kaXJwYXRoLFxuICAgICAgZm9ybWF0OiBhcmdzLmZvcm1hdCxcbiAgICAgIHNjaGVtYTogYXJncy5zY2hlbWEsXG4gICAgICBzbHVnOiBhcmdzLnNsdWdcbiAgICB9O1xuICAgIGNvbnN0IGFsbEJsb2JzID0gbG9jYXRpb25zRm9yVHJlZUtleS5mbGF0TWFwKGRpciA9PiB7XG4gICAgICBjb25zdCBub2RlID0gZ2V0VHJlZU5vZGVBdFBhdGgodHJlZSwgZGlyKTtcbiAgICAgIGlmICghbm9kZSkgcmV0dXJuIFtdO1xuICAgICAgcmV0dXJuIG5vZGUuY2hpbGRyZW4gPyBnZXRBbGxGaWxlc0luVHJlZShub2RlLmNoaWxkcmVuKSA6IFtub2RlLmVudHJ5XTtcbiAgICB9KS5tYXAoZW50cnkgPT4ge1xuICAgICAgY29uc3QgYmxvYiA9IGZldGNoQmxvYihhcmdzLmNvbmZpZywgZW50cnkuc2hhLCBlbnRyeS5wYXRoLCBiYXNlQ29tbWl0LCBpc1JlcG9Qcml2YXRlLCB7XG4gICAgICAgIG93bmVyOiBicmFuY2hJbmZvLm1haW5Pd25lcixcbiAgICAgICAgbmFtZTogYnJhbmNoSW5mby5tYWluUmVwb1xuICAgICAgfSk7XG4gICAgICBpZiAoYmxvYiBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIFtlbnRyeS5wYXRoLCBibG9iXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBibG9iLnRoZW4oYmxvYiA9PiBbZW50cnkucGF0aCwgYmxvYl0pO1xuICAgIH0pO1xuICAgIGlmIChhbGxCbG9icy5ldmVyeSh4ID0+IEFycmF5LmlzQXJyYXkoeCkpKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGluaXRpYWxGaWxlcyxcbiAgICAgICAgaW5pdGlhbFN0YXRlXG4gICAgICB9ID0gcGFyc2VFbnRyeShfYXJncywgbmV3IE1hcChhbGxCbG9icykpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdGlhbFN0YXRlLFxuICAgICAgICBpbml0aWFsRmlsZXMsXG4gICAgICAgIGxvY2FsVHJlZUtleVxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKGFsbEJsb2JzKS50aGVuKGFzeW5jIGRhdGEgPT4ge1xuICAgICAgY29uc3Qge1xuICAgICAgICBpbml0aWFsU3RhdGUsXG4gICAgICAgIGluaXRpYWxGaWxlc1xuICAgICAgfSA9IHBhcnNlRW50cnkoX2FyZ3MsIG5ldyBNYXAoZGF0YSkpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdGlhbFN0YXRlLFxuICAgICAgICBpbml0aWFsRmlsZXMsXG4gICAgICAgIGxvY2FsVHJlZUtleVxuICAgICAgfTtcbiAgICB9KTtcbiAgfSwgW2hhc0xvYWRlZCwgdHJlZSwgYXJncy5kaXJwYXRoLCBhcmdzLmZvcm1hdCwgYXJncy5jb25maWcsIGFyZ3Muc2NoZW1hLCBhcmdzLnNsdWcsIGxvY2F0aW9uc0ZvclRyZWVLZXksIGJhc2VDb21taXQsIGlzUmVwb1ByaXZhdGUsIGJyYW5jaEluZm8ubWFpbk93bmVyLCBicmFuY2hJbmZvLm1haW5SZXBvLCBsb2NhbFRyZWVLZXldKSk7XG59XG5jb25zdCBibG9iQ2FjaGUgPSBuZXcgTFJVKHtcbiAgbWF4OiAyMDBcbn0pO1xuYXN5bmMgZnVuY3Rpb24gaHlkcmF0ZUJsb2JDYWNoZShjb250ZW50cykge1xuICBjb25zdCBzaGEgPSBhd2FpdCBibG9iU2hhKGNvbnRlbnRzKTtcbiAgYmxvYkNhY2hlLnNldChzaGEsIGNvbnRlbnRzKTtcbiAgcmV0dXJuIHNoYTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGZldGNoR2l0SHViQmxvYihjb25maWcsIG9pZCwgZmlsZXBhdGgsIGNvbW1pdFNoYSwgaXNSZXBvUHJpdmF0ZSwgcmVwbykge1xuICBpZiAoIWlzUmVwb1ByaXZhdGUpIHtcbiAgICB2YXIgX2dldFBhdGhQcmVmaXg7XG4gICAgcmV0dXJuIGZldGNoKGBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vJHtzZXJpYWxpemVSZXBvQ29uZmlnKHJlcG8pfS8ke2NvbW1pdFNoYX0vJHsoX2dldFBhdGhQcmVmaXggPSBnZXRQYXRoUHJlZml4KGNvbmZpZy5zdG9yYWdlKSkgIT09IG51bGwgJiYgX2dldFBhdGhQcmVmaXggIT09IHZvaWQgMCA/IF9nZXRQYXRoUHJlZml4IDogJyd9JHtmaWxlcGF0aH1gKTtcbiAgfVxuICBjb25zdCBhdXRoID0gYXdhaXQgZ2V0QXV0aChjb25maWcpO1xuICByZXR1cm4gZmV0Y2goY29uZmlnLnN0b3JhZ2Uua2luZCA9PT0gJ2dpdGh1YicgPyBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy8ke3NlcmlhbGl6ZVJlcG9Db25maWcoY29uZmlnLnN0b3JhZ2UucmVwbyl9L2dpdC9ibG9icy8ke29pZH1gIDogYCR7S0VZU1RBVElDX0NMT1VEX0FQSV9VUkx9L3YxL2dpdGh1Yi9ibG9iLyR7b2lkfWAsIHtcbiAgICBoZWFkZXJzOiB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YXV0aC5hY2Nlc3NUb2tlbn1gLFxuICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vdm5kLmdpdGh1Yi5yYXcnLFxuICAgICAgLi4uKGNvbmZpZy5zdG9yYWdlLmtpbmQgPT09ICdjbG91ZCcgPyBLRVlTVEFUSUNfQ0xPVURfSEVBREVSUyA6IHt9KVxuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBmZXRjaEJsb2IoY29uZmlnLCBvaWQsIGZpbGVwYXRoLCBjb21taXRTaGEsIGlzUmVwb1ByaXZhdGUsIHJlcG8pIHtcbiAgaWYgKGJsb2JDYWNoZS5oYXMob2lkKSkgcmV0dXJuIGJsb2JDYWNoZS5nZXQob2lkKTtcbiAgY29uc3QgcHJvbWlzZSA9IChpc0dpdEh1YkNvbmZpZyhjb25maWcpIHx8IGNvbmZpZy5zdG9yYWdlLmtpbmQgPT09ICdjbG91ZCcgPyBmZXRjaEdpdEh1YkJsb2IoY29uZmlnLCBvaWQsIGZpbGVwYXRoLCBjb21taXRTaGEsIGlzUmVwb1ByaXZhdGUsIHJlcG8pIDogZmV0Y2goYC9hcGkva2V5c3RhdGljL2Jsb2IvJHtvaWR9LyR7ZmlsZXBhdGh9YCwge1xuICAgIGhlYWRlcnM6IHtcbiAgICAgICduby1jb3JzJzogJzEnXG4gICAgfVxuICB9KSkudGhlbih4ID0+IHguYXJyYXlCdWZmZXIoKSkudGhlbih4ID0+IHtcbiAgICBjb25zdCBhcnJheSA9IG5ldyBVaW50OEFycmF5KHgpO1xuICAgIGJsb2JDYWNoZS5zZXQob2lkLCBhcnJheSk7XG4gICAgcmV0dXJuIGFycmF5O1xuICB9KS5jYXRjaChlcnIgPT4ge1xuICAgIGJsb2JDYWNoZS5kZWxldGUob2lkKTtcbiAgICB0aHJvdyBlcnI7XG4gIH0pO1xuICBibG9iQ2FjaGUuc2V0KG9pZCwgcHJvbWlzZSk7XG4gIHJldHVybiBwcm9taXNlO1xufVxuXG5pbmplY3RHbG9iYWwoe1xuICBib2R5OiB7XG4gICAgb3ZlcmZsb3c6ICdoaWRkZW4nXG4gIH1cbn0pO1xuZnVuY3Rpb24gY3JlYXRlVXJxbENsaWVudChjb25maWcpIHtcbiAgY29uc3QgcmVwbyA9IGNvbmZpZy5zdG9yYWdlLmtpbmQgPT09ICdnaXRodWInID8gcGFyc2VSZXBvQ29uZmlnKGNvbmZpZy5zdG9yYWdlLnJlcG8pIDoge1xuICAgIG93bmVyOiAncmVwby1vd25lcicsXG4gICAgbmFtZTogJ3JlcG8tbmFtZSdcbiAgfTtcbiAgcmV0dXJuIGNyZWF0ZUNsaWVudCh7XG4gICAgdXJsOiBjb25maWcuc3RvcmFnZS5raW5kID09PSAnZ2l0aHViJyA/ICdodHRwczovL2FwaS5naXRodWIuY29tL2dyYXBocWwnIDogYCR7S0VZU1RBVElDX0NMT1VEX0FQSV9VUkx9L3YxL2dpdGh1Yi9ncmFwaHFsYCxcbiAgICByZXF1ZXN0UG9saWN5OiAnY2FjaGUtYW5kLW5ldHdvcmsnLFxuICAgIGV4Y2hhbmdlczogW2F1dGhFeGNoYW5nZShhc3luYyB1dGlscyA9PiB7XG4gICAgICBsZXQgYXV0aFN0YXRlID0gYXdhaXQgZ2V0QXV0aChjb25maWcpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYWRkQXV0aFRvT3BlcmF0aW9uKG9wZXJhdGlvbikge1xuICAgICAgICAgIGF1dGhTdGF0ZSA9IGdldFN5bmNBdXRoKGNvbmZpZyk7XG4gICAgICAgICAgaWYgKCFhdXRoU3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiBvcGVyYXRpb247XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB1dGlscy5hcHBlbmRIZWFkZXJzKG9wZXJhdGlvbiwge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2F1dGhTdGF0ZS5hY2Nlc3NUb2tlbn1gLFxuICAgICAgICAgICAgLi4uKGNvbmZpZy5zdG9yYWdlLmtpbmQgPT09ICdjbG91ZCcgPyBLRVlTVEFUSUNfQ0xPVURfSEVBREVSUyA6IHt9KVxuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBkaWRBdXRoRXJyb3IoKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9LFxuICAgICAgICB3aWxsQXV0aEVycm9yKG9wZXJhdGlvbikge1xuICAgICAgICAgIHZhciBfb3BlcmF0aW9uJHF1ZXJ5JGRlZmk7XG4gICAgICAgICAgYXV0aFN0YXRlID0gZ2V0U3luY0F1dGgoY29uZmlnKTtcbiAgICAgICAgICBpZiAob3BlcmF0aW9uLnF1ZXJ5LmRlZmluaXRpb25zWzBdLmtpbmQgPT09ICdPcGVyYXRpb25EZWZpbml0aW9uJyAmJiAoX29wZXJhdGlvbiRxdWVyeSRkZWZpID0gb3BlcmF0aW9uLnF1ZXJ5LmRlZmluaXRpb25zWzBdLm5hbWUpICE9PSBudWxsICYmIF9vcGVyYXRpb24kcXVlcnkkZGVmaSAhPT0gdm9pZCAwICYmIF9vcGVyYXRpb24kcXVlcnkkZGVmaS52YWx1ZS5pbmNsdWRlcygnQXBwU2hlbGwnKSAmJiAhYXV0aFN0YXRlKSB7XG4gICAgICAgICAgICBpZiAoY29uZmlnLnN0b3JhZ2Uua2luZCA9PT0gJ2dpdGh1YicpIHtcbiAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2FwaS9rZXlzdGF0aWMvZ2l0aHViL2xvZ2luJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlZGlyZWN0VG9DbG91ZEF1dGgoJycsIGNvbmZpZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFhdXRoU3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIHJlZnJlc2hBdXRoKCkge1xuICAgICAgICAgIGF1dGhTdGF0ZSA9IGF3YWl0IGdldEF1dGgoY29uZmlnKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9KSwgY2FjaGVFeGNoYW5nZSh7XG4gICAgICB1cGRhdGVzOiB7XG4gICAgICAgIE11dGF0aW9uOiB7XG4gICAgICAgICAgY3JlYXRlUmVmKHJlc3VsdCwgYXJncywgY2FjaGUsIF9pbmZvKSB7XG4gICAgICAgICAgICBjYWNoZS51cGRhdGVRdWVyeSh7XG4gICAgICAgICAgICAgIHF1ZXJ5OiBjb25maWcuc3RvcmFnZS5raW5kID09PSAnZ2l0aHViJyA/IEdpdEh1YkFwcFNoZWxsUXVlcnkgOiBDbG91ZEFwcFNoZWxsUXVlcnksXG4gICAgICAgICAgICAgIHZhcmlhYmxlczogcmVwb1xuICAgICAgICAgICAgfSwgZGF0YSA9PiB7XG4gICAgICAgICAgICAgIHZhciBfZGF0YSRyZXBvc2l0b3J5O1xuICAgICAgICAgICAgICBpZiAoZGF0YSAhPT0gbnVsbCAmJiBkYXRhICE9PSB2b2lkIDAgJiYgKF9kYXRhJHJlcG9zaXRvcnkgPSBkYXRhLnJlcG9zaXRvcnkpICE9PSBudWxsICYmIF9kYXRhJHJlcG9zaXRvcnkgIT09IHZvaWQgMCAmJiAoX2RhdGEkcmVwb3NpdG9yeSA9IF9kYXRhJHJlcG9zaXRvcnkucmVmcykgIT09IG51bGwgJiYgX2RhdGEkcmVwb3NpdG9yeSAhPT0gdm9pZCAwICYmIF9kYXRhJHJlcG9zaXRvcnkubm9kZXMgJiYgcmVzdWx0LmNyZWF0ZVJlZiAmJiB0eXBlb2YgcmVzdWx0LmNyZWF0ZVJlZiA9PT0gJ29iamVjdCcgJiYgJ3JlZicgaW4gcmVzdWx0LmNyZWF0ZVJlZikge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAuLi5kYXRhLFxuICAgICAgICAgICAgICAgICAgcmVwb3NpdG9yeToge1xuICAgICAgICAgICAgICAgICAgICAuLi5kYXRhLnJlcG9zaXRvcnksXG4gICAgICAgICAgICAgICAgICAgIHJlZnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhLnJlcG9zaXRvcnkucmVmcyxcbiAgICAgICAgICAgICAgICAgICAgICBub2RlczogWy4uLmRhdGEucmVwb3NpdG9yeS5yZWZzLm5vZGVzLCByZXN1bHQuY3JlYXRlUmVmLnJlZl1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRlbGV0ZVJlZihyZXN1bHQsIGFyZ3MsIGNhY2hlLCBfaW5mbykge1xuICAgICAgICAgICAgY2FjaGUudXBkYXRlUXVlcnkoe1xuICAgICAgICAgICAgICBxdWVyeTogY29uZmlnLnN0b3JhZ2Uua2luZCA9PT0gJ2dpdGh1YicgPyBHaXRIdWJBcHBTaGVsbFF1ZXJ5IDogQ2xvdWRBcHBTaGVsbFF1ZXJ5LFxuICAgICAgICAgICAgICB2YXJpYWJsZXM6IHJlcG9cbiAgICAgICAgICAgIH0sIGRhdGEgPT4ge1xuICAgICAgICAgICAgICB2YXIgX2RhdGEkcmVwb3NpdG9yeTI7XG4gICAgICAgICAgICAgIGlmIChkYXRhICE9PSBudWxsICYmIGRhdGEgIT09IHZvaWQgMCAmJiAoX2RhdGEkcmVwb3NpdG9yeTIgPSBkYXRhLnJlcG9zaXRvcnkpICE9PSBudWxsICYmIF9kYXRhJHJlcG9zaXRvcnkyICE9PSB2b2lkIDAgJiYgKF9kYXRhJHJlcG9zaXRvcnkyID0gX2RhdGEkcmVwb3NpdG9yeTIucmVmcykgIT09IG51bGwgJiYgX2RhdGEkcmVwb3NpdG9yeTIgIT09IHZvaWQgMCAmJiBfZGF0YSRyZXBvc2l0b3J5Mi5ub2RlcyAmJiByZXN1bHQuZGVsZXRlUmVmICYmIHR5cGVvZiByZXN1bHQuZGVsZXRlUmVmID09PSAnb2JqZWN0JyAmJiAnX190eXBlbmFtZScgaW4gcmVzdWx0LmRlbGV0ZVJlZiAmJiB0eXBlb2YgYXJncy5pbnB1dCA9PT0gJ29iamVjdCcgJiYgYXJncy5pbnB1dCAhPT0gbnVsbCAmJiAncmVmSWQnIGluIGFyZ3MuaW5wdXQgJiYgdHlwZW9mIGFyZ3MuaW5wdXQucmVmSWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVmSWQgPSBhcmdzLmlucHV0LnJlZklkO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAuLi5kYXRhLFxuICAgICAgICAgICAgICAgICAgcmVwb3NpdG9yeToge1xuICAgICAgICAgICAgICAgICAgICAuLi5kYXRhLnJlcG9zaXRvcnksXG4gICAgICAgICAgICAgICAgICAgIHJlZnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAuLi5kYXRhLnJlcG9zaXRvcnkucmVmcyxcbiAgICAgICAgICAgICAgICAgICAgICBub2RlczogZGF0YS5yZXBvc2l0b3J5LnJlZnMubm9kZXMuZmlsdGVyKHggPT4gKHggPT09IG51bGwgfHwgeCA9PT0gdm9pZCAwID8gdm9pZCAwIDogeC5pZCkgIT09IHJlZklkKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pLCAuLi4oY29uZmlnLnN0b3JhZ2Uua2luZCA9PT0gJ2dpdGh1YicgPyBbXSA6IFtwZXJzaXN0ZWRFeGNoYW5nZSh7XG4gICAgICBlbmFibGVGb3JNdXRhdGlvbjogdHJ1ZSxcbiAgICAgIGVuZm9yY2VQZXJzaXN0ZWRRdWVyaWVzOiB0cnVlXG4gICAgfSldKSwgZmV0Y2hFeGNoYW5nZV1cbiAgfSk7XG59XG5mdW5jdGlvbiBQcm92aWRlcih7XG4gIGNoaWxkcmVuLFxuICBjb25maWdcbn0pIHtcbiAgY29uc3QgdGhlbWVDb250ZXh0ID0gdXNlVGhlbWUoKTtcbiAgY29uc3Qge1xuICAgIHB1c2g6IG5hdmlnYXRlXG4gIH0gPSB1c2VSb3V0ZXIoKTtcbiAgY29uc3Qga2V5c3RhclJvdXRlciA9IHVzZU1lbW8oKCkgPT4gKHtcbiAgICBuYXZpZ2F0ZVxuICB9KSwgW25hdmlnYXRlXSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFRoZW1lUHJvdmlkZXIsIHtcbiAgICB2YWx1ZTogdGhlbWVDb250ZXh0LFxuICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4cyhLZXlzdGFyUHJvdmlkZXIsIHtcbiAgICAgIGxvY2FsZTogY29uZmlnLmxvY2FsZSB8fCAnZW4tVVMnLFxuICAgICAgY29sb3JTY2hlbWU6IHRoZW1lQ29udGV4dC50aGVtZSxcbiAgICAgIHJvdXRlcjoga2V5c3RhclJvdXRlcixcbiAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChDbGllbnRTaWRlT25seURvY3VtZW50RWxlbWVudCwge30pLCAvKiNfX1BVUkVfXyovanN4KFwibGlua1wiLCB7XG4gICAgICAgIGhyZWY6IFwiaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1JbnRlcjp3Z2h0QDQwMDs1MDA7NjAwOzcwMCZkaXNwbGF5PXN3YXBcIixcbiAgICAgICAgcmVsOiBcInN0eWxlc2hlZXRcIlxuICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goUHJvdmlkZXIkMSwge1xuICAgICAgICB2YWx1ZTogdXNlTWVtbygoKSA9PiBjcmVhdGVVcnFsQ2xpZW50KGNvbmZpZyksIFtjb25maWddKSxcbiAgICAgICAgY2hpbGRyZW46IGNoaWxkcmVuXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeChUb2FzdGVyLCB7fSldXG4gICAgfSlcbiAgfSk7XG59XG5cbmNvbnN0IHRleHRFbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG5jb25zdCBmcm9udG1hdHRlclNwbGl0ID0gdGV4dEVuY29kZXIuZW5jb2RlKCctLS1cXG4nKTtcbmZ1bmN0aW9uIGNvbWJpbmVGcm9udG1hdHRlckFuZENvbnRlbnRzKGZyb250bWF0dGVyLCBjb250ZW50cykge1xuICBjb25zdCBhcnJheSA9IG5ldyBVaW50OEFycmF5KGZyb250bWF0dGVyLmJ5dGVMZW5ndGggKyBjb250ZW50cy5ieXRlTGVuZ3RoICsgZnJvbnRtYXR0ZXJTcGxpdC5ieXRlTGVuZ3RoICogMik7XG4gIGFycmF5LnNldChmcm9udG1hdHRlclNwbGl0KTtcbiAgYXJyYXkuc2V0KGZyb250bWF0dGVyLCBmcm9udG1hdHRlclNwbGl0LmJ5dGVMZW5ndGgpO1xuICBhcnJheS5zZXQoZnJvbnRtYXR0ZXJTcGxpdCwgZnJvbnRtYXR0ZXJTcGxpdC5ieXRlTGVuZ3RoICsgZnJvbnRtYXR0ZXIuYnl0ZUxlbmd0aCk7XG4gIGFycmF5LnNldChjb250ZW50cywgZnJvbnRtYXR0ZXJTcGxpdC5ieXRlTGVuZ3RoICogMiArIGZyb250bWF0dGVyLmJ5dGVMZW5ndGgpO1xuICByZXR1cm4gYXJyYXk7XG59XG5mdW5jdGlvbiBzZXJpYWxpemVFbnRyeVRvRmlsZXMoYXJncykge1xuICB2YXIgX2FyZ3Mkc2x1ZywgX2FyZ3Mkc2x1ZzI7XG4gIGxldCB7XG4gICAgdmFsdWU6IHN0YXRlV2l0aEV4dHJhRmlsZXNSZW1vdmVkLFxuICAgIGV4dHJhRmlsZXNcbiAgfSA9IHNlcmlhbGl6ZVByb3BzKGFyZ3Muc3RhdGUsIG9iamVjdChhcmdzLnNjaGVtYSksIChfYXJncyRzbHVnID0gYXJncy5zbHVnKSA9PT0gbnVsbCB8fCBfYXJncyRzbHVnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYXJncyRzbHVnLmZpZWxkLCAoX2FyZ3Mkc2x1ZzIgPSBhcmdzLnNsdWcpID09PSBudWxsIHx8IF9hcmdzJHNsdWcyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYXJncyRzbHVnMi52YWx1ZSwgdHJ1ZSk7XG4gIGNvbnN0IGRhdGFGb3JtYXQgPSBhcmdzLmZvcm1hdC5kYXRhO1xuICBsZXQgZGF0YUNvbnRlbnQgPSB0ZXh0RW5jb2Rlci5lbmNvZGUoZGF0YUZvcm1hdCA9PT0gJ2pzb24nID8gSlNPTi5zdHJpbmdpZnkoc3RhdGVXaXRoRXh0cmFGaWxlc1JlbW92ZWQsIG51bGwsIDIpICsgJ1xcbicgOiBkdW1wKHN0YXRlV2l0aEV4dHJhRmlsZXNSZW1vdmVkKSk7XG4gIGlmIChhcmdzLmZvcm1hdC5jb250ZW50RmllbGQpIHtcbiAgICBjb25zdCBmaWxlbmFtZSA9IGAke2FyZ3MuZm9ybWF0LmNvbnRlbnRGaWVsZC5rZXl9JHthcmdzLmZvcm1hdC5jb250ZW50RmllbGQuY29uZmlnLmNvbnRlbnRFeHRlbnNpb259YDtcbiAgICBsZXQgY29udGVudHM7XG4gICAgZXh0cmFGaWxlcyA9IGV4dHJhRmlsZXMuZmlsdGVyKHggPT4ge1xuICAgICAgaWYgKHgucGF0aCAhPT0gZmlsZW5hbWUpIHJldHVybiB0cnVlO1xuICAgICAgY29udGVudHMgPSB4LmNvbnRlbnRzO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICAgIGFzc2VydChjb250ZW50cyAhPT0gdW5kZWZpbmVkLCAnRXhwZWN0ZWQgY29udGVudCBmaWVsZCB0byBiZSBwcmVzZW50Jyk7XG4gICAgZGF0YUNvbnRlbnQgPSBjb21iaW5lRnJvbnRtYXR0ZXJBbmRDb250ZW50cyhkYXRhQ29udGVudCwgY29udGVudHMpO1xuICB9XG4gIHJldHVybiBbe1xuICAgIHBhdGg6IGdldEVudHJ5RGF0YUZpbGVwYXRoKGFyZ3MuYmFzZVBhdGgsIGFyZ3MuZm9ybWF0KSxcbiAgICBjb250ZW50czogZGF0YUNvbnRlbnRcbiAgfSwgLi4uZXh0cmFGaWxlcy5tYXAoZmlsZSA9PiAoe1xuICAgIHBhdGg6IGAke2ZpbGUucGFyZW50ID8gYXJncy5zbHVnID8gYCR7ZmlsZS5wYXJlbnR9LyR7YXJncy5zbHVnLnZhbHVlfWAgOiBmaWxlLnBhcmVudCA6IGFyZ3MuYmFzZVBhdGh9LyR7ZmlsZS5wYXRofWAsXG4gICAgY29udGVudHM6IGZpbGUuY29udGVudHNcbiAgfSkpXTtcbn1cbmZ1bmN0aW9uIHVzZVVwc2VydEl0ZW0oYXJncykge1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlKHtcbiAgICBraW5kOiAnaWRsZSdcbiAgfSk7XG4gIGNvbnN0IGJhc2VDb21taXQgPSB1c2VCYXNlQ29tbWl0KCk7XG4gIGNvbnN0IGJyYW5jaEluZm8gPSB1c2VDb250ZXh0KEJyYW5jaEluZm9Db250ZXh0KTtcbiAgY29uc3Qgc2V0VHJlZVNoYSA9IHVzZVNldFRyZWVTaGEoKTtcbiAgY29uc3QgWywgbXV0YXRlXSA9IHVzZU11dGF0aW9uKGNyZWF0ZUNvbW1pdE11dGF0aW9uKTtcbiAgY29uc3QgcmVwb1dpdGhXcml0ZUFjY2VzcyA9IHVzZUNvbnRleHQoUmVwb1dpdGhXcml0ZUFjY2Vzc0NvbnRleHQpO1xuICBjb25zdCBhcHBTbHVnID0gdXNlQ29udGV4dChBcHBTbHVnQ29udGV4dCk7XG4gIGNvbnN0IHVuc2NvcGVkVHJlZURhdGEgPSB1c2VDdXJyZW50VW5zY29wZWRUcmVlKCk7XG4gIHJldHVybiBbc3RhdGUsIGFzeW5jIG92ZXJyaWRlID0+IHtcbiAgICB0cnkge1xuICAgICAgdmFyIF9nZXRQYXRoUHJlZml4LCBfYXJncyRpbml0aWFsRmlsZXM7XG4gICAgICBjb25zdCB1bnNjb3BlZFRyZWUgPSB1bnNjb3BlZFRyZWVEYXRhLmtpbmQgPT09ICdsb2FkZWQnID8gdW5zY29wZWRUcmVlRGF0YS5kYXRhLnRyZWUgOiB1bmRlZmluZWQ7XG4gICAgICBpZiAoIXVuc2NvcGVkVHJlZSkgcmV0dXJuIGZhbHNlO1xuICAgICAgaWYgKHJlcG9XaXRoV3JpdGVBY2Nlc3MgPT09IG51bGwgJiYgYXJncy5jb25maWcuc3RvcmFnZS5raW5kID09PSAnZ2l0aHViJyAmJiBhcHBTbHVnICE9PSBudWxsICYmIGFwcFNsdWcgIT09IHZvaWQgMCAmJiBhcHBTbHVnLnZhbHVlKSB7XG4gICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICBraW5kOiAnbmVlZHMtZm9yaydcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHNldFN0YXRlKHtcbiAgICAgICAga2luZDogJ2xvYWRpbmcnXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHBhdGhQcmVmaXggPSAoX2dldFBhdGhQcmVmaXggPSBnZXRQYXRoUHJlZml4KGFyZ3MuY29uZmlnLnN0b3JhZ2UpKSAhPT0gbnVsbCAmJiBfZ2V0UGF0aFByZWZpeCAhPT0gdm9pZCAwID8gX2dldFBhdGhQcmVmaXggOiAnJztcbiAgICAgIGxldCBhZGRpdGlvbnMgPSBzZXJpYWxpemVFbnRyeVRvRmlsZXMoe1xuICAgICAgICBiYXNlUGF0aDogYXJncy5iYXNlUGF0aCxcbiAgICAgICAgY29uZmlnOiBhcmdzLmNvbmZpZyxcbiAgICAgICAgc2NoZW1hOiBhcmdzLnNjaGVtYSxcbiAgICAgICAgZm9ybWF0OiBhcmdzLmZvcm1hdCxcbiAgICAgICAgc3RhdGU6IGFyZ3Muc3RhdGUsXG4gICAgICAgIHNsdWc6IGFyZ3Muc2x1Z1xuICAgICAgfSkubWFwKGFkZGl0aW9uID0+ICh7XG4gICAgICAgIC4uLmFkZGl0aW9uLFxuICAgICAgICBwYXRoOiBwYXRoUHJlZml4ICsgYWRkaXRpb24ucGF0aFxuICAgICAgfSkpO1xuICAgICAgY29uc3QgYWRkaXRpb25QYXRoVG9TaGEgPSBuZXcgTWFwKGF3YWl0IFByb21pc2UuYWxsKGFkZGl0aW9ucy5tYXAoYXN5bmMgYWRkaXRpb24gPT4gW2FkZGl0aW9uLnBhdGgsIGF3YWl0IGh5ZHJhdGVCbG9iQ2FjaGUoYWRkaXRpb24uY29udGVudHMpXSkpKTtcbiAgICAgIGNvbnN0IGZpbGVzVG9EZWxldGUgPSBuZXcgU2V0KChfYXJncyRpbml0aWFsRmlsZXMgPSBhcmdzLmluaXRpYWxGaWxlcykgPT09IG51bGwgfHwgX2FyZ3MkaW5pdGlhbEZpbGVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYXJncyRpbml0aWFsRmlsZXMubWFwKHggPT4gcGF0aFByZWZpeCArIHgpKTtcbiAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBhZGRpdGlvbnMpIHtcbiAgICAgICAgZmlsZXNUb0RlbGV0ZS5kZWxldGUoZmlsZS5wYXRoKTtcbiAgICAgIH1cbiAgICAgIGFkZGl0aW9ucyA9IGFkZGl0aW9ucy5maWx0ZXIoYWRkaXRpb24gPT4ge1xuICAgICAgICBjb25zdCBzaGEgPSBhZGRpdGlvblBhdGhUb1NoYS5nZXQoYWRkaXRpb24ucGF0aCk7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gZ2V0VHJlZU5vZGVBdFBhdGgodW5zY29wZWRUcmVlLCBhZGRpdGlvbi5wYXRoKTtcbiAgICAgICAgcmV0dXJuIChleGlzdGluZyA9PT0gbnVsbCB8fCBleGlzdGluZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXhpc3RpbmcuZW50cnkuc2hhKSAhPT0gc2hhO1xuICAgICAgfSk7XG4gICAgICBjb25zdCBkZWxldGlvbnMgPSBbLi4uZmlsZXNUb0RlbGV0ZV0ubWFwKHBhdGggPT4gKHtcbiAgICAgICAgcGF0aFxuICAgICAgfSkpO1xuICAgICAgY29uc3QgdXBkYXRlZFRyZWUgPSBhd2FpdCB1cGRhdGVUcmVlV2l0aENoYW5nZXModW5zY29wZWRUcmVlLCB7XG4gICAgICAgIGFkZGl0aW9ucyxcbiAgICAgICAgZGVsZXRpb25zOiBbLi4uZmlsZXNUb0RlbGV0ZV1cbiAgICAgIH0pO1xuICAgICAgYXdhaXQgaHlkcmF0ZVRyZWVDYWNoZVdpdGhFbnRyaWVzKHVwZGF0ZWRUcmVlLmVudHJpZXMpO1xuICAgICAgaWYgKGFyZ3MuY29uZmlnLnN0b3JhZ2Uua2luZCA9PT0gJ2dpdGh1YicgfHwgYXJncy5jb25maWcuc3RvcmFnZS5raW5kID09PSAnY2xvdWQnKSB7XG4gICAgICAgIHZhciBfb3ZlcnJpZGUkYnJhbmNoLCBfb3ZlcnJpZGUkc2hhLCBfcmVzdWx0JGVycm9yLCBfcmVzdWx0JGRhdGE7XG4gICAgICAgIGNvbnN0IGJyYW5jaCA9IHtcbiAgICAgICAgICBicmFuY2hOYW1lOiAoX292ZXJyaWRlJGJyYW5jaCA9IG92ZXJyaWRlID09PSBudWxsIHx8IG92ZXJyaWRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvdmVycmlkZS5icmFuY2gpICE9PSBudWxsICYmIF9vdmVycmlkZSRicmFuY2ggIT09IHZvaWQgMCA/IF9vdmVycmlkZSRicmFuY2ggOiBicmFuY2hJbmZvLmN1cnJlbnRCcmFuY2gsXG4gICAgICAgICAgcmVwb3NpdG9yeU5hbWVXaXRoT3duZXI6IGAke3JlcG9XaXRoV3JpdGVBY2Nlc3Mub3duZXJ9LyR7cmVwb1dpdGhXcml0ZUFjY2Vzcy5uYW1lfWBcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcnVuTXV0YXRpb24gPSBleHBlY3RlZEhlYWRPaWQgPT4gbXV0YXRlKHtcbiAgICAgICAgICBpbnB1dDoge1xuICAgICAgICAgICAgYnJhbmNoLFxuICAgICAgICAgICAgZXhwZWN0ZWRIZWFkT2lkLFxuICAgICAgICAgICAgbWVzc2FnZToge1xuICAgICAgICAgICAgICBoZWFkbGluZTogYFVwZGF0ZSAke2FyZ3MuYmFzZVBhdGh9YFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZpbGVDaGFuZ2VzOiB7XG4gICAgICAgICAgICAgIGFkZGl0aW9uczogYWRkaXRpb25zLm1hcChhZGRpdGlvbiA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLmFkZGl0aW9uLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRzOiBmcm9tVWludDhBcnJheShhZGRpdGlvbi5jb250ZW50cylcbiAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICBkZWxldGlvbnNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgcnVuTXV0YXRpb24oKF9vdmVycmlkZSRzaGEgPSBvdmVycmlkZSA9PT0gbnVsbCB8fCBvdmVycmlkZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3ZlcnJpZGUuc2hhKSAhPT0gbnVsbCAmJiBfb3ZlcnJpZGUkc2hhICE9PSB2b2lkIDAgPyBfb3ZlcnJpZGUkc2hhIDogYmFzZUNvbW1pdCk7XG4gICAgICAgIGNvbnN0IGdxbEVycm9yID0gKF9yZXN1bHQkZXJyb3IgPSByZXN1bHQuZXJyb3IpID09PSBudWxsIHx8IF9yZXN1bHQkZXJyb3IgPT09IHZvaWQgMCB8fCAoX3Jlc3VsdCRlcnJvciA9IF9yZXN1bHQkZXJyb3IuZ3JhcGhRTEVycm9yc1swXSkgPT09IG51bGwgfHwgX3Jlc3VsdCRlcnJvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Jlc3VsdCRlcnJvci5vcmlnaW5hbEVycm9yO1xuICAgICAgICBpZiAoZ3FsRXJyb3IgJiYgJ3R5cGUnIGluIGdxbEVycm9yKSB7XG4gICAgICAgICAgaWYgKGdxbEVycm9yLnR5cGUgPT09ICdCUkFOQ0hfUFJPVEVDVElPTl9SVUxFX1ZJT0xBVElPTicpIHtcbiAgICAgICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICAgICAga2luZDogJ25lZWRzLW5ldy1icmFuY2gnLFxuICAgICAgICAgICAgICByZWFzb246ICdDaGFuZ2VzIG11c3QgYmUgbWFkZSB2aWEgcHVsbCByZXF1ZXN0IHRvIHRoaXMgYnJhbmNoLiBDcmVhdGUgYSBuZXcgYnJhbmNoIHRvIHNhdmUgY2hhbmdlcy4nXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGdxbEVycm9yLnR5cGUgPT09ICdTVEFMRV9EQVRBJykge1xuICAgICAgICAgICAgdmFyIF9yZWZEYXRhJGRhdGEsIF9hcmdzJHNsdWczO1xuICAgICAgICAgICAgLy8gd2UgZG9uJ3Qgd2FudCB0aGlzIHRvIGdvIGludG8gdGhlIGNhY2hlIHlldFxuICAgICAgICAgICAgLy8gc28gd2UgY3JlYXRlIGEgbmV3IGNsaWVudCBqdXN0IGZvciB0aGlzXG4gICAgICAgICAgICBjb25zdCByZWZEYXRhID0gYXdhaXQgY3JlYXRlVXJxbENsaWVudChhcmdzLmNvbmZpZykucXVlcnkoRmV0Y2hSZWYsIHtcbiAgICAgICAgICAgICAgb3duZXI6IHJlcG9XaXRoV3JpdGVBY2Nlc3Mub3duZXIsXG4gICAgICAgICAgICAgIG5hbWU6IHJlcG9XaXRoV3JpdGVBY2Nlc3MubmFtZSxcbiAgICAgICAgICAgICAgcmVmOiBgcmVmcy9oZWFkcy8ke2JyYW5jaEluZm8uY3VycmVudEJyYW5jaH1gXG4gICAgICAgICAgICB9KS50b1Byb21pc2UoKTtcbiAgICAgICAgICAgIGlmICghKChfcmVmRGF0YSRkYXRhID0gcmVmRGF0YS5kYXRhKSAhPT0gbnVsbCAmJiBfcmVmRGF0YSRkYXRhICE9PSB2b2lkIDAgJiYgKF9yZWZEYXRhJGRhdGEgPSBfcmVmRGF0YSRkYXRhLnJlcG9zaXRvcnkpICE9PSBudWxsICYmIF9yZWZEYXRhJGRhdGEgIT09IHZvaWQgMCAmJiAoX3JlZkRhdGEkZGF0YSA9IF9yZWZEYXRhJGRhdGEucmVmKSAhPT0gbnVsbCAmJiBfcmVmRGF0YSRkYXRhICE9PSB2b2lkIDAgJiYgX3JlZkRhdGEkZGF0YS50YXJnZXQpKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQnJhbmNoIG5vdCBmb3VuZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdHJlZSA9IHNjb3BlRW50cmllc1dpdGhQYXRoUHJlZml4KGF3YWl0IGZldGNoR2l0SHViVHJlZURhdGEocmVmRGF0YS5kYXRhLnJlcG9zaXRvcnkucmVmLnRhcmdldC5vaWQsIGFyZ3MuY29uZmlnKSwgYXJncy5jb25maWcpO1xuICAgICAgICAgICAgY29uc3QgdHJlZUtleSA9IGdldFRyZWVLZXkoZ2V0RGlyZWN0b3JpZXNGb3JUcmVlS2V5KG9iamVjdChhcmdzLnNjaGVtYSksIGFyZ3MuYmFzZVBhdGgsIChfYXJncyRzbHVnMyA9IGFyZ3Muc2x1ZykgPT09IG51bGwgfHwgX2FyZ3Mkc2x1ZzMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hcmdzJHNsdWczLnZhbHVlLCBhcmdzLmZvcm1hdCksIHRyZWUudHJlZSk7XG4gICAgICAgICAgICBpZiAodHJlZUtleSA9PT0gYXJncy5jdXJyZW50TG9jYWxUcmVlS2V5KSB7XG4gICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHJ1bk11dGF0aW9uKHJlZkRhdGEuZGF0YS5yZXBvc2l0b3J5LnJlZi50YXJnZXQub2lkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBraW5kOiAnbmVlZHMtbmV3LWJyYW5jaCcsXG4gICAgICAgICAgICAgICAgcmVhc29uOiAnVGhpcyBlbnRyeSBoYXMgYmVlbiB1cGRhdGVkIHNpbmNlIGl0IHdhcyBvcGVuZWQuIENyZWF0ZSBhIG5ldyBicmFuY2ggdG8gc2F2ZSBjaGFuZ2VzLidcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3VsdC5lcnJvcikge1xuICAgICAgICAgIHRocm93IHJlc3VsdC5lcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0YXJnZXQgPSAoX3Jlc3VsdCRkYXRhID0gcmVzdWx0LmRhdGEpID09PSBudWxsIHx8IF9yZXN1bHQkZGF0YSA9PT0gdm9pZCAwIHx8IChfcmVzdWx0JGRhdGEgPSBfcmVzdWx0JGRhdGEuY3JlYXRlQ29tbWl0T25CcmFuY2gpID09PSBudWxsIHx8IF9yZXN1bHQkZGF0YSA9PT0gdm9pZCAwIHx8IChfcmVzdWx0JGRhdGEgPSBfcmVzdWx0JGRhdGEucmVmKSA9PT0gbnVsbCB8fCBfcmVzdWx0JGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZXN1bHQkZGF0YS50YXJnZXQ7XG4gICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgICBraW5kOiAndXBkYXRlZCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCcvYXBpL2tleXN0YXRpYy91cGRhdGUnLCB7XG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICduby1jb3JzJzogJzEnXG4gICAgICAgICAgfSxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBhZGRpdGlvbnM6IGFkZGl0aW9ucy5tYXAoYWRkaXRpb24gPT4gKHtcbiAgICAgICAgICAgICAgLi4uYWRkaXRpb24sXG4gICAgICAgICAgICAgIGNvbnRlbnRzOiBmcm9tVWludDhBcnJheShhZGRpdGlvbi5jb250ZW50cylcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgIGRlbGV0aW9uc1xuICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihhd2FpdCByZXMudGV4dCgpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdUcmVlID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIHRyZWVcbiAgICAgICAgfSA9IGF3YWl0IGh5ZHJhdGVUcmVlQ2FjaGVXaXRoRW50cmllcyhuZXdUcmVlKTtcbiAgICAgICAgc2V0VHJlZVNoYShhd2FpdCB0cmVlU2hhKHRyZWUpKTtcbiAgICAgICAgc2V0U3RhdGUoe1xuICAgICAgICAgIGtpbmQ6ICd1cGRhdGVkJ1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBzZXRTdGF0ZSh7XG4gICAgICAgIGtpbmQ6ICdlcnJvcicsXG4gICAgICAgIGVycm9yOiBlcnJcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSwgKCkgPT4ge1xuICAgIHNldFN0YXRlKHtcbiAgICAgIGtpbmQ6ICdpZGxlJ1xuICAgIH0pO1xuICB9XTtcbn1cbmNvbnN0IGNyZWF0ZUNvbW1pdE11dGF0aW9uID0gZ3FsYFxuICBtdXRhdGlvbiBDcmVhdGVDb21taXQoJGlucHV0OiBDcmVhdGVDb21taXRPbkJyYW5jaElucHV0ISkge1xuICAgIGNyZWF0ZUNvbW1pdE9uQnJhbmNoKGlucHV0OiAkaW5wdXQpIHtcbiAgICAgIHJlZiB7XG4gICAgICAgIGlkXG4gICAgICAgIHRhcmdldCB7XG4gICAgICAgICAgaWRcbiAgICAgICAgICBvaWRcbiAgICAgICAgICAuLi4gb24gQ29tbWl0IHtcbiAgICAgICAgICAgIHRyZWUge1xuICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICBvaWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbmA7XG5mdW5jdGlvbiB1c2VEZWxldGVJdGVtKGFyZ3MpIHtcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZSh7XG4gICAga2luZDogJ2lkbGUnXG4gIH0pO1xuICBjb25zdCBiYXNlQ29tbWl0ID0gdXNlQmFzZUNvbW1pdCgpO1xuICBjb25zdCBicmFuY2hJbmZvID0gdXNlQ29udGV4dChCcmFuY2hJbmZvQ29udGV4dCk7XG4gIGNvbnN0IFssIG11dGF0ZV0gPSB1c2VNdXRhdGlvbihjcmVhdGVDb21taXRNdXRhdGlvbik7XG4gIGNvbnN0IHNldFRyZWVTaGEgPSB1c2VTZXRUcmVlU2hhKCk7XG4gIGNvbnN0IHJlcG9XaXRoV3JpdGVBY2Nlc3MgPSB1c2VDb250ZXh0KFJlcG9XaXRoV3JpdGVBY2Nlc3NDb250ZXh0KTtcbiAgY29uc3QgYXBwU2x1ZyA9IHVzZUNvbnRleHQoQXBwU2x1Z0NvbnRleHQpO1xuICBjb25zdCB1bnNjb3BlZFRyZWVEYXRhID0gdXNlQ3VycmVudFVuc2NvcGVkVHJlZSgpO1xuICByZXR1cm4gW3N0YXRlLCBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVuc2NvcGVkVHJlZSA9IHVuc2NvcGVkVHJlZURhdGEua2luZCA9PT0gJ2xvYWRlZCcgPyB1bnNjb3BlZFRyZWVEYXRhLmRhdGEudHJlZSA6IHVuZGVmaW5lZDtcbiAgICAgIGlmICghdW5zY29wZWRUcmVlKSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAocmVwb1dpdGhXcml0ZUFjY2VzcyA9PT0gbnVsbCAmJiBhcmdzLnN0b3JhZ2Uua2luZCA9PT0gJ2dpdGh1YicgJiYgYXBwU2x1ZyAhPT0gbnVsbCAmJiBhcHBTbHVnICE9PSB2b2lkIDAgJiYgYXBwU2x1Zy52YWx1ZSkge1xuICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAga2luZDogJ25lZWRzLWZvcmsnXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBzZXRTdGF0ZSh7XG4gICAgICAgIGtpbmQ6ICdsb2FkaW5nJ1xuICAgICAgfSk7XG4gICAgICBjb25zdCBkZWxldGlvbnMgPSBhcmdzLmluaXRpYWxGaWxlcy5tYXAoeCA9PiB7XG4gICAgICAgIHZhciBfZ2V0UGF0aFByZWZpeDI7XG4gICAgICAgIHJldHVybiAoKF9nZXRQYXRoUHJlZml4MiA9IGdldFBhdGhQcmVmaXgoYXJncy5zdG9yYWdlKSkgIT09IG51bGwgJiYgX2dldFBhdGhQcmVmaXgyICE9PSB2b2lkIDAgPyBfZ2V0UGF0aFByZWZpeDIgOiAnJykgKyB4O1xuICAgICAgfSk7XG4gICAgICBjb25zdCB1cGRhdGVkVHJlZSA9IGF3YWl0IHVwZGF0ZVRyZWVXaXRoQ2hhbmdlcyh1bnNjb3BlZFRyZWUsIHtcbiAgICAgICAgYWRkaXRpb25zOiBbXSxcbiAgICAgICAgZGVsZXRpb25zXG4gICAgICB9KTtcbiAgICAgIGF3YWl0IGh5ZHJhdGVUcmVlQ2FjaGVXaXRoRW50cmllcyh1cGRhdGVkVHJlZS5lbnRyaWVzKTtcbiAgICAgIGlmIChhcmdzLnN0b3JhZ2Uua2luZCA9PT0gJ2dpdGh1YicgfHwgYXJncy5zdG9yYWdlLmtpbmQgPT09ICdjbG91ZCcpIHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIGVycm9yXG4gICAgICAgIH0gPSBhd2FpdCBtdXRhdGUoe1xuICAgICAgICAgIGlucHV0OiB7XG4gICAgICAgICAgICBicmFuY2g6IHtcbiAgICAgICAgICAgICAgcmVwb3NpdG9yeU5hbWVXaXRoT3duZXI6IGAke3JlcG9XaXRoV3JpdGVBY2Nlc3Mub3duZXJ9LyR7cmVwb1dpdGhXcml0ZUFjY2Vzcy5uYW1lfWAsXG4gICAgICAgICAgICAgIGJyYW5jaE5hbWU6IGJyYW5jaEluZm8uY3VycmVudEJyYW5jaFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgICAgICAgaGVhZGxpbmU6IGBEZWxldGUgJHthcmdzLmJhc2VQYXRofWBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBleHBlY3RlZEhlYWRPaWQ6IGJhc2VDb21taXQsXG4gICAgICAgICAgICBmaWxlQ2hhbmdlczoge1xuICAgICAgICAgICAgICBkZWxldGlvbnM6IGRlbGV0aW9ucy5tYXAocGF0aCA9PiAoe1xuICAgICAgICAgICAgICAgIHBhdGhcbiAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgc2V0U3RhdGUoe1xuICAgICAgICAgIGtpbmQ6ICd1cGRhdGVkJ1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnL2FwaS9rZXlzdGF0aWMvdXBkYXRlJywge1xuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnbm8tY29ycyc6ICcxJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgYWRkaXRpb25zOiBbXSxcbiAgICAgICAgICAgIGRlbGV0aW9uczogZGVsZXRpb25zLm1hcChwYXRoID0+ICh7XG4gICAgICAgICAgICAgIHBhdGhcbiAgICAgICAgICAgIH0pKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihhd2FpdCByZXMudGV4dCgpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdUcmVlID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIHRyZWVcbiAgICAgICAgfSA9IGF3YWl0IGh5ZHJhdGVUcmVlQ2FjaGVXaXRoRW50cmllcyhuZXdUcmVlKTtcbiAgICAgICAgc2V0VHJlZVNoYShhd2FpdCB0cmVlU2hhKHRyZWUpKTtcbiAgICAgICAgc2V0U3RhdGUoe1xuICAgICAgICAgIGtpbmQ6ICd1cGRhdGVkJ1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBzZXRTdGF0ZSh7XG4gICAgICAgIGtpbmQ6ICdlcnJvcicsXG4gICAgICAgIGVycm9yOiBlcnJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgKCkgPT4ge1xuICAgIHNldFN0YXRlKHtcbiAgICAgIGtpbmQ6ICdpZGxlJ1xuICAgIH0pO1xuICB9XTtcbn1cbmNvbnN0IEZldGNoUmVmID0gZ3FsYFxuICBxdWVyeSBGZXRjaFJlZigkb3duZXI6IFN0cmluZyEsICRuYW1lOiBTdHJpbmchLCAkcmVmOiBTdHJpbmchKSB7XG4gICAgcmVwb3NpdG9yeShvd25lcjogJG93bmVyLCBuYW1lOiAkbmFtZSkge1xuICAgICAgaWRcbiAgICAgIHJlZihxdWFsaWZpZWROYW1lOiAkcmVmKSB7XG4gICAgICAgIGlkXG4gICAgICAgIHRhcmdldCB7XG4gICAgICAgICAgaWRcbiAgICAgICAgICBvaWRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuYDtcblxuZnVuY3Rpb24gdXNlSGFzQ2hhbmdlZChhcmdzKSB7XG4gIGNvbnN0IHNlcmlhbGl6ZSA9IHVzZUNhbGxiYWNrKHN0YXRlID0+IHtcbiAgICBjb25zdCBzbHVnID0gYXJncy5zbHVnRmllbGQgPyBnZXRTbHVnRnJvbVN0YXRlKHtcbiAgICAgIHNjaGVtYTogYXJncy5zY2hlbWEuZmllbGRzLFxuICAgICAgc2x1Z0ZpZWxkOiBhcmdzLnNsdWdGaWVsZFxuICAgIH0sIHN0YXRlKSA6IHVuZGVmaW5lZDtcbiAgICByZXR1cm4ge1xuICAgICAgc2x1ZyxcbiAgICAgIHN0YXRlOiBzZXJpYWxpemVQcm9wcyhzdGF0ZSwgYXJncy5zY2hlbWEsIGFyZ3Muc2x1Z0ZpZWxkLCBzbHVnLCB0cnVlKVxuICAgIH07XG4gIH0sIFthcmdzLnNjaGVtYSwgYXJncy5zbHVnRmllbGRdKTtcbiAgY29uc3QgaW5pdGlhbEZpbGVzRm9yVXBkYXRlID0gdXNlTWVtbygoKSA9PiBhcmdzLmluaXRpYWxTdGF0ZSA9PT0gbnVsbCA/IG51bGwgOiBzZXJpYWxpemUoYXJncy5pbml0aWFsU3RhdGUpLCBbYXJncy5pbml0aWFsU3RhdGUsIHNlcmlhbGl6ZV0pO1xuICBjb25zdCBmaWxlc0ZvclVwZGF0ZSA9IHVzZU1lbW8oKCkgPT4gc2VyaWFsaXplKGFyZ3Muc3RhdGUpLCBbc2VyaWFsaXplLCBhcmdzLnN0YXRlXSk7XG4gIHJldHVybiB1c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gIWlzRXF1YWwoaW5pdGlhbEZpbGVzRm9yVXBkYXRlLCBmaWxlc0ZvclVwZGF0ZSk7XG4gIH0sIFtpbml0aWFsRmlsZXNGb3JVcGRhdGUsIGZpbGVzRm9yVXBkYXRlXSk7XG59XG5cbmZ1bmN0aW9uIHVzZVNsdWdGaWVsZEluZm8oY29sbGVjdGlvbiwgc2x1Z1RvRXhjbHVkZSkge1xuICBjb25zdCBjb25maWcgPSB1c2VDb25maWcoKTtcbiAgY29uc3QgYWxsU2x1Z3MgPSB1c2VTbHVnc0luQ29sbGVjdGlvbihjb2xsZWN0aW9uKTtcbiAgcmV0dXJuIHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHNsdWdzID0gbmV3IFNldChhbGxTbHVncyk7XG4gICAgaWYgKHNsdWdUb0V4Y2x1ZGUpIHtcbiAgICAgIHNsdWdzLmRlbGV0ZShzbHVnVG9FeGNsdWRlKTtcbiAgICB9XG4gICAgY29uc3QgY29sbGVjdGlvbkNvbmZpZyA9IGNvbmZpZy5jb2xsZWN0aW9uc1tjb2xsZWN0aW9uXTtcbiAgICByZXR1cm4ge1xuICAgICAgZmllbGQ6IGNvbGxlY3Rpb25Db25maWcuc2x1Z0ZpZWxkLFxuICAgICAgc2x1Z3MsXG4gICAgICBnbG9iOiBnZXRTbHVnR2xvYkZvckNvbGxlY3Rpb24oY29uZmlnLCBjb2xsZWN0aW9uKVxuICAgIH07XG4gIH0sIFthbGxTbHVncywgY29sbGVjdGlvbiwgY29uZmlnLCBzbHVnVG9FeGNsdWRlXSk7XG59XG5cbmNvbnN0IHVuaXRzID0ge1xuICBzZWNvbmRzOiA2MCxcbiAgbWludXRlczogNjAsXG4gIGhvdXJzOiAyNCxcbiAgZGF5czogNyxcbiAgd2Vla3M6IDQsXG4gIG1vbnRoczogMTIsXG4gIHllYXJzOiBJbmZpbml0eVxufTtcbmZ1bmN0aW9uIGZvcm1hdFRpbWVBZ28odGFyZ2V0RGF0ZSwgY3VycmVudERhdGUsIGZvcm1hdHRlcikge1xuICBsZXQgZHVyYXRpb24gPSAodGFyZ2V0RGF0ZS5nZXRUaW1lKCkgLSBjdXJyZW50RGF0ZS5nZXRUaW1lKCkpIC8gMTAwMDtcbiAgZm9yIChjb25zdCBbbmFtZSwgYW1vdW50XSBvZiBPYmplY3QuZW50cmllcyh1bml0cykpIHtcbiAgICBpZiAoTWF0aC5hYnMoZHVyYXRpb24pIDwgYW1vdW50KSB7XG4gICAgICByZXR1cm4gZm9ybWF0dGVyLmZvcm1hdChNYXRoLnJvdW5kKGR1cmF0aW9uKSwgbmFtZSk7XG4gICAgfVxuICAgIGR1cmF0aW9uIC89IGFtb3VudDtcbiAgfVxuICByZXR1cm4gJ3Vua25vd24nO1xufVxuZnVuY3Rpb24gUmVsYXRpdmVUaW1lKHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBsb2NhbGVcbiAgfSA9IHVzZUxvY2FsZSgpO1xuICBjb25zdCBbbm93XSA9IHVzZVN0YXRlKCgpID0+IG5ldyBEYXRlKCkpO1xuICBjb25zdCBmb3JtYXR0ZWQgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBmb3JtYXR0ZXIgPSBuZXcgSW50bC5SZWxhdGl2ZVRpbWVGb3JtYXQobG9jYWxlKTtcbiAgICBmb3JtYXR0ZXIuZm9ybWF0KHByb3BzLmRhdGUuZ2V0VGltZSgpIC0gbm93LmdldFRpbWUoKSwgJ3NlY29uZCcpO1xuICAgIHJldHVybiBmb3JtYXRUaW1lQWdvKHByb3BzLmRhdGUsIG5vdywgZm9ybWF0dGVyKTtcbiAgfSwgW2xvY2FsZSwgbm93LCBwcm9wcy5kYXRlXSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFwidGltZVwiLCB7XG4gICAgZGF0ZVRpbWU6IHByb3BzLmRhdGUudG9JU09TdHJpbmcoKSxcbiAgICBjaGlsZHJlbjogZm9ybWF0dGVkXG4gIH0pO1xufVxuZnVuY3Rpb24gc2hvd0RyYWZ0UmVzdG9yZWRUb2FzdChzYXZlZEF0LCBoYXNDaGFuZ2VkU2luY2UpIHtcbiAgdG9hc3RRdWV1ZS5pbmZvKCAvKiNfX1BVUkVfXyovanN4cyhUZXh0LCB7XG4gICAgY2hpbGRyZW46IFtcIlJlc3RvcmVkIGRyYWZ0IGZyb20gXCIsIC8qI19fUFVSRV9fKi9qc3goUmVsYXRpdmVUaW1lLCB7XG4gICAgICBkYXRlOiBzYXZlZEF0XG4gICAgfSksIFwiLlwiLCAnICcsIGhhc0NoYW5nZWRTaW5jZSAmJiAvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgIGNvbG9yOiBcImFjY2VudFwiLFxuICAgICAgY2hpbGRyZW46IFwiT3RoZXIgY2hhbmdlcyBoYXZlIGJlZW4gbWFkZSB0byB0aGlzIGVudHJ5IHNpbmNlIHRoZSBkcmFmdC4gWW91IG1heSB3YW50IHRvIGRpc2NhcmQgdGhlIGRyYWZ0IGNoYW5nZXMuXCJcbiAgICB9KV1cbiAgfSksIHtcbiAgICB0aW1lb3V0OiA4MDAwXG4gIH0pO1xufVxubGV0IHN0b3JlO1xuZnVuY3Rpb24gZ2V0U3RvcmUoKSB7XG4gIGlmICghc3RvcmUpIHtcbiAgICBzdG9yZSA9IGNyZWF0ZVN0b3JlKCdrZXlzdGF0aWMnLCAnaXRlbXMnKTtcbiAgfVxuICByZXR1cm4gc3RvcmU7XG59XG4vLyB0aGUgYXMgYW55cyBhcmUgYmVjYXVzZSB0aGUgaW5kZXhlZGRiIHR5cGVzIGRvbnQndCBhY2NlcHQgcmVhZG9ubHkgYXJyYXlzXG5cbmZ1bmN0aW9uIHNldERyYWZ0KGtleSwgdmFsKSB7XG4gIHJldHVybiBzZXQoa2V5LCB2YWwsIGdldFN0b3JlKCkpO1xufVxuZnVuY3Rpb24gZGVsRHJhZnQoa2V5KSB7XG4gIHJldHVybiBkZWwoa2V5LCBnZXRTdG9yZSgpKTtcbn1cbmZ1bmN0aW9uIGdldERyYWZ0KGtleSkge1xuICByZXR1cm4gZ2V0KGtleSwgZ2V0U3RvcmUoKSk7XG59XG5cbmNvbnN0IHN0b3JlZFZhbFNjaGVtYSQyID0gei5vYmplY3Qoe1xuICB2ZXJzaW9uOiB6LmxpdGVyYWwoMSksXG4gIHNhdmVkQXQ6IHouZGF0ZSgpLFxuICBzbHVnOiB6LnN0cmluZygpLFxuICBiZWZvcmVUcmVlS2V5OiB6LnN0cmluZygpLFxuICBmaWxlczogei5tYXAoei5zdHJpbmcoKSwgei5pbnN0YW5jZW9mKFVpbnQ4QXJyYXkpKVxufSk7XG5mdW5jdGlvbiBJdGVtUGFnZShwcm9wcykge1xuICB2YXIgX2RyYWZ0JHN0YXRlLCBfZ2V0UGF0aFByZWZpeCwgX2dldFBhdGhQcmVmaXgyO1xuICBjb25zdCB7XG4gICAgY29sbGVjdGlvbixcbiAgICBjb25maWcsXG4gICAgaXRlbVNsdWcsXG4gICAgaW5pdGlhbEZpbGVzLFxuICAgIGluaXRpYWxTdGF0ZSxcbiAgICBsb2NhbFRyZWVLZXksXG4gICAgZHJhZnRcbiAgfSA9IHByb3BzO1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgY29uc3QgW2ZvcmNlVmFsaWRhdGlvbiwgc2V0Rm9yY2VWYWxpZGF0aW9uXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgY29sbGVjdGlvbkNvbmZpZyA9IGNvbmZpZy5jb2xsZWN0aW9uc1tjb2xsZWN0aW9uXTtcbiAgY29uc3Qgc2NoZW1hID0gdXNlTWVtbygoKSA9PiBvYmplY3QoY29sbGVjdGlvbkNvbmZpZy5zY2hlbWEpLCBbY29sbGVjdGlvbkNvbmZpZy5zY2hlbWFdKTtcbiAgY29uc3QgW3tcbiAgICBzdGF0ZSxcbiAgICBsb2NhbFRyZWVLZXk6IGxvY2FsVHJlZUtleUluU3RhdGVcbiAgfSwgc2V0U3RhdGVdID0gdXNlU3RhdGUoe1xuICAgIHN0YXRlOiAoX2RyYWZ0JHN0YXRlID0gZHJhZnQgPT09IG51bGwgfHwgZHJhZnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRyYWZ0LnN0YXRlKSAhPT0gbnVsbCAmJiBfZHJhZnQkc3RhdGUgIT09IHZvaWQgMCA/IF9kcmFmdCRzdGF0ZSA6IGluaXRpYWxTdGF0ZSxcbiAgICBsb2NhbFRyZWVLZXlcbiAgfSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGRyYWZ0ICYmIHN0YXRlID09PSBkcmFmdC5zdGF0ZSkge1xuICAgICAgc2hvd0RyYWZ0UmVzdG9yZWRUb2FzdChkcmFmdC5zYXZlZEF0LCBsb2NhbFRyZWVLZXkgIT09IGRyYWZ0LnRyZWVLZXkpO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIH0sIFtkcmFmdF0pO1xuICBpZiAobG9jYWxUcmVlS2V5SW5TdGF0ZSAhPT0gbG9jYWxUcmVlS2V5KSB7XG4gICAgc2V0U3RhdGUoe1xuICAgICAgc3RhdGU6IGluaXRpYWxTdGF0ZSxcbiAgICAgIGxvY2FsVHJlZUtleVxuICAgIH0pO1xuICB9XG4gIGNvbnN0IHByZXZpZXdQcm9wcyA9IHVzZU1lbW8oKCkgPT4gY3JlYXRlR2V0UHJldmlld1Byb3BzKHNjaGVtYSwgc3RhdGVVcGRhdGVyID0+IHtcbiAgICBzZXRTdGF0ZShzdGF0ZSA9PiAoe1xuICAgICAgbG9jYWxUcmVlS2V5OiBzdGF0ZS5sb2NhbFRyZWVLZXksXG4gICAgICBzdGF0ZTogc3RhdGVVcGRhdGVyKHN0YXRlLnN0YXRlKVxuICAgIH0pKTtcbiAgfSwgKCkgPT4gdW5kZWZpbmVkKSwgW3NjaGVtYV0pKHN0YXRlKTtcbiAgY29uc3QgaGFzQ2hhbmdlZCA9IHVzZUhhc0NoYW5nZWQoe1xuICAgIGluaXRpYWxTdGF0ZSxcbiAgICBzY2hlbWEsXG4gICAgc3RhdGUsXG4gICAgc2x1Z0ZpZWxkOiBjb2xsZWN0aW9uQ29uZmlnLnNsdWdGaWVsZFxuICB9KTtcbiAgY29uc3QgYmFzZUNvbW1pdCA9IHVzZUJhc2VDb21taXQoKTtcbiAgY29uc3Qgc2x1ZyA9IGdldFNsdWdGcm9tU3RhdGUoY29sbGVjdGlvbkNvbmZpZywgc3RhdGUpO1xuICBjb25zdCBmb3JtYXRJbmZvID0gZ2V0Q29sbGVjdGlvbkZvcm1hdChjb25maWcsIGNvbGxlY3Rpb24pO1xuICBjb25zdCBjdXJyZW50QmFzZVBhdGggPSBnZXRDb2xsZWN0aW9uSXRlbVBhdGgoY29uZmlnLCBjb2xsZWN0aW9uLCBpdGVtU2x1Zyk7XG4gIGNvbnN0IGZ1dHVyZUJhc2VQYXRoID0gZ2V0Q29sbGVjdGlvbkl0ZW1QYXRoKGNvbmZpZywgY29sbGVjdGlvbiwgc2x1Zyk7XG4gIGNvbnN0IGJyYW5jaEluZm8gPSB1c2VCcmFuY2hJbmZvKCk7XG4gIGNvbnN0IFt1cGRhdGVSZXN1bHQsIF91cGRhdGUsIHJlc2V0VXBkYXRlSXRlbV0gPSB1c2VVcHNlcnRJdGVtKHtcbiAgICBzdGF0ZSxcbiAgICBpbml0aWFsRmlsZXMsXG4gICAgY29uZmlnLFxuICAgIHNjaGVtYTogY29sbGVjdGlvbkNvbmZpZy5zY2hlbWEsXG4gICAgYmFzZVBhdGg6IGZ1dHVyZUJhc2VQYXRoLFxuICAgIGZvcm1hdDogZm9ybWF0SW5mbyxcbiAgICBjdXJyZW50TG9jYWxUcmVlS2V5OiBsb2NhbFRyZWVLZXksXG4gICAgc2x1Zzoge1xuICAgICAgZmllbGQ6IGNvbGxlY3Rpb25Db25maWcuc2x1Z0ZpZWxkLFxuICAgICAgdmFsdWU6IHNsdWdcbiAgICB9XG4gIH0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGtleSA9IFsnY29sbGVjdGlvbicsIGNvbGxlY3Rpb24sIHByb3BzLml0ZW1TbHVnXTtcbiAgICBpZiAoaGFzQ2hhbmdlZCkge1xuICAgICAgY29uc3Qgc2VyaWFsaXplZCA9IHNlcmlhbGl6ZUVudHJ5VG9GaWxlcyh7XG4gICAgICAgIGJhc2VQYXRoOiBmdXR1cmVCYXNlUGF0aCxcbiAgICAgICAgY29uZmlnLFxuICAgICAgICBmb3JtYXQ6IGdldENvbGxlY3Rpb25Gb3JtYXQoY29uZmlnLCBjb2xsZWN0aW9uKSxcbiAgICAgICAgc2NoZW1hOiBjb2xsZWN0aW9uQ29uZmlnLnNjaGVtYSxcbiAgICAgICAgc2x1Zzoge1xuICAgICAgICAgIGZpZWxkOiBjb2xsZWN0aW9uQ29uZmlnLnNsdWdGaWVsZCxcbiAgICAgICAgICB2YWx1ZTogc2x1Z1xuICAgICAgICB9LFxuICAgICAgICBzdGF0ZVxuICAgICAgfSk7XG4gICAgICBjb25zdCBmaWxlcyA9IG5ldyBNYXAoc2VyaWFsaXplZC5tYXAoeCA9PiBbeC5wYXRoLCB4LmNvbnRlbnRzXSkpO1xuICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgYmVmb3JlVHJlZUtleTogbG9jYWxUcmVlS2V5LFxuICAgICAgICBzbHVnLFxuICAgICAgICBmaWxlcyxcbiAgICAgICAgc2F2ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgdmVyc2lvbjogMVxuICAgICAgfTtcbiAgICAgIHNldERyYWZ0KGtleSwgZGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlbERyYWZ0KGtleSk7XG4gICAgfVxuICB9LCBbY29sbGVjdGlvbiwgY29sbGVjdGlvbkNvbmZpZywgY29uZmlnLCBmdXR1cmVCYXNlUGF0aCwgbG9jYWxUcmVlS2V5LCBwcm9wcy5pdGVtU2x1Zywgc2x1Zywgc3RhdGUsIGhhc0NoYW5nZWRdKTtcbiAgY29uc3QgdXBkYXRlID0gdXNlRXZlbnRDYWxsYmFjayhfdXBkYXRlKTtcbiAgY29uc3QgW2RlbGV0ZVJlc3VsdCwgZGVsZXRlSXRlbSwgcmVzZXREZWxldGVJdGVtXSA9IHVzZURlbGV0ZUl0ZW0oe1xuICAgIGluaXRpYWxGaWxlcyxcbiAgICBzdG9yYWdlOiBjb25maWcuc3RvcmFnZSxcbiAgICBiYXNlUGF0aDogY3VycmVudEJhc2VQYXRoXG4gIH0pO1xuICBjb25zdCBvblJlc2V0ID0gKCkgPT4ge1xuICAgIHNldFN0YXRlKHtcbiAgICAgIHN0YXRlOiBpbml0aWFsU3RhdGUsXG4gICAgICBsb2NhbFRyZWVLZXlcbiAgICB9KTtcbiAgfTtcbiAgY29uc3Qgdmlld0hyZWYgPSBjb25maWcuc3RvcmFnZS5raW5kICE9PSAnbG9jYWwnID8gYCR7Z2V0UmVwb1VybChicmFuY2hJbmZvKX0ke2Zvcm1hdEluZm8uZGF0YUxvY2F0aW9uID09PSAnaW5kZXgnID8gYC90cmVlLyR7YnJhbmNoSW5mby5jdXJyZW50QnJhbmNofS8keyhfZ2V0UGF0aFByZWZpeCA9IGdldFBhdGhQcmVmaXgoY29uZmlnLnN0b3JhZ2UpKSAhPT0gbnVsbCAmJiBfZ2V0UGF0aFByZWZpeCAhPT0gdm9pZCAwID8gX2dldFBhdGhQcmVmaXggOiAnJ30ke2N1cnJlbnRCYXNlUGF0aH1gIDogYC9ibG9iLyR7YnJhbmNoSW5mby5jdXJyZW50QnJhbmNofS8keyhfZ2V0UGF0aFByZWZpeDIgPSBnZXRQYXRoUHJlZml4KGNvbmZpZy5zdG9yYWdlKSkgIT09IG51bGwgJiYgX2dldFBhdGhQcmVmaXgyICE9PSB2b2lkIDAgPyBfZ2V0UGF0aFByZWZpeDIgOiAnJ30ke2N1cnJlbnRCYXNlUGF0aH0ke2dldERhdGFGaWxlRXh0ZW5zaW9uKGZvcm1hdEluZm8pfWB9YCA6IHVuZGVmaW5lZDtcbiAgY29uc3QgcHJldmlld0hyZWYgPSB1c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gY29sbGVjdGlvbkNvbmZpZy5wcmV2aWV3VXJsID8gY29sbGVjdGlvbkNvbmZpZy5wcmV2aWV3VXJsLnJlcGxhY2UoJ3tzbHVnfScsIHByb3BzLml0ZW1TbHVnKS5yZXBsYWNlKCd7YnJhbmNofScsIGJyYW5jaEluZm8uY3VycmVudEJyYW5jaCkgOiB1bmRlZmluZWQ7XG4gIH0sIFticmFuY2hJbmZvLmN1cnJlbnRCcmFuY2gsIGNvbGxlY3Rpb25Db25maWcucHJldmlld1VybCwgcHJvcHMuaXRlbVNsdWddKTtcbiAgY29uc3Qgb25EZWxldGUgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKGF3YWl0IGRlbGV0ZUl0ZW0oKSkge1xuICAgICAgcm91dGVyLnB1c2goYCR7cHJvcHMuYmFzZVBhdGh9L2NvbGxlY3Rpb24vJHtlbmNvZGVVUklDb21wb25lbnQoY29sbGVjdGlvbil9YCk7XG4gICAgfVxuICB9O1xuICBjb25zdCBvbkR1cGxpY2F0ZSA9IGFzeW5jICgpID0+IHtcbiAgICBsZXQgaGFzVXBkYXRlZCA9IHRydWU7XG4gICAgaWYgKGhhc0NoYW5nZWQpIHtcbiAgICAgIGhhc1VwZGF0ZWQgPSBhd2FpdCBvblVwZGF0ZSgpO1xuICAgIH1cbiAgICBpZiAoaGFzVXBkYXRlZCkge1xuICAgICAgcm91dGVyLnB1c2goYCR7cHJvcHMuYmFzZVBhdGh9L2NvbGxlY3Rpb24vJHtlbmNvZGVVUklDb21wb25lbnQoY29sbGVjdGlvbil9L2NyZWF0ZT9kdXBsaWNhdGU9JHtzbHVnfWApO1xuICAgIH1cbiAgfTtcbiAgY29uc3Qgc2x1Z0luZm8gPSB1c2VTbHVnRmllbGRJbmZvKGNvbGxlY3Rpb24sIGl0ZW1TbHVnKTtcbiAgY29uc3QgaXNTYXZpbmdEaXNhYmxlZCA9IHVwZGF0ZVJlc3VsdC5raW5kID09PSAnbG9hZGluZycgfHwgIWhhc0NoYW5nZWQ7XG4gIGNvbnN0IG9uVXBkYXRlID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGlmIChpc1NhdmluZ0Rpc2FibGVkKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKCFjbGllbnRTaWRlVmFsaWRhdGVQcm9wKHNjaGVtYSwgc3RhdGUsIHNsdWdJbmZvKSkge1xuICAgICAgc2V0Rm9yY2VWYWxpZGF0aW9uKHRydWUpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBzbHVnID0gZ2V0U2x1Z0Zyb21TdGF0ZShjb2xsZWN0aW9uQ29uZmlnLCBzdGF0ZSk7XG4gICAgY29uc3QgaGFzVXBkYXRlZCA9IGF3YWl0IHVwZGF0ZSgpO1xuICAgIGlmIChoYXNVcGRhdGVkICYmIHNsdWcgIT09IGl0ZW1TbHVnKSB7XG4gICAgICByb3V0ZXIucmVwbGFjZShgJHtwcm9wcy5iYXNlUGF0aH0vY29sbGVjdGlvbi8ke2VuY29kZVVSSUNvbXBvbmVudChjb2xsZWN0aW9uKX0vaXRlbS8ke2VuY29kZVVSSUNvbXBvbmVudChzbHVnKX1gKTtcbiAgICB9XG4gICAgcmV0dXJuIGhhc1VwZGF0ZWQ7XG4gIH0sIFtjb2xsZWN0aW9uLCBjb2xsZWN0aW9uQ29uZmlnLCBpc1NhdmluZ0Rpc2FibGVkLCBpdGVtU2x1ZywgcHJvcHMuYmFzZVBhdGgsIHJvdXRlciwgc2NoZW1hLCBzbHVnSW5mbywgc3RhdGUsIHVwZGF0ZV0pO1xuICBjb25zdCBmb3JtSUQgPSAnaXRlbS1lZGl0LWZvcm0nO1xuXG4gIC8vIGFsbG93IHNob3J0Y3V0cyBcImNtZCtzXCIgYW5kIFwiY3RybCtzXCIgdG8gc2F2ZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGxpc3RlbmVyID0gZXZlbnQgPT4ge1xuICAgICAgaWYgKHVwZGF0ZVJlc3VsdC5raW5kID09PSAnbG9hZGluZycpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKGlzSG90a2V5KCdtb2QrcycsIGV2ZW50KSkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBvblVwZGF0ZSgpO1xuICAgICAgfVxuICAgIH07XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGxpc3RlbmVyKTtcbiAgICByZXR1cm4gKCkgPT4gZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGxpc3RlbmVyKTtcbiAgfSwgW3VwZGF0ZVJlc3VsdC5raW5kLCBvblVwZGF0ZV0pO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChGcmFnbWVudCwge1xuICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4cyhJdGVtUGFnZVNoZWxsLCB7XG4gICAgICBoZWFkZXJBY3Rpb25zOiAvKiNfX1BVUkVfXyovanN4KEhlYWRlckFjdGlvbnMsIHtcbiAgICAgICAgZm9ybUlEOiBmb3JtSUQsXG4gICAgICAgIGlzTG9hZGluZzogdXBkYXRlUmVzdWx0LmtpbmQgPT09ICdsb2FkaW5nJyxcbiAgICAgICAgaGFzQ2hhbmdlZDogaGFzQ2hhbmdlZCxcbiAgICAgICAgb25EZWxldGU6IG9uRGVsZXRlLFxuICAgICAgICBvbkR1cGxpY2F0ZTogb25EdXBsaWNhdGUsXG4gICAgICAgIG9uUmVzZXQ6IG9uUmVzZXQsXG4gICAgICAgIHZpZXdIcmVmOiB2aWV3SHJlZixcbiAgICAgICAgcHJldmlld0hyZWY6IHByZXZpZXdIcmVmXG4gICAgICB9KSxcbiAgICAgIC4uLnByb3BzLFxuICAgICAgY2hpbGRyZW46IFt1cGRhdGVSZXN1bHQua2luZCA9PT0gJ2Vycm9yJyAmJiAvKiNfX1BVUkVfXyovanN4KE5vdGljZSwge1xuICAgICAgICB0b25lOiBcImNyaXRpY2FsXCIsXG4gICAgICAgIGNoaWxkcmVuOiB1cGRhdGVSZXN1bHQuZXJyb3IubWVzc2FnZVxuICAgICAgfSksIGRlbGV0ZVJlc3VsdC5raW5kID09PSAnZXJyb3InICYmIC8qI19fUFVSRV9fKi9qc3goTm90aWNlLCB7XG4gICAgICAgIHRvbmU6IFwiY3JpdGljYWxcIixcbiAgICAgICAgY2hpbGRyZW46IGRlbGV0ZVJlc3VsdC5lcnJvci5tZXNzYWdlXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeChCb3gsIHtcbiAgICAgICAgaWQ6IGZvcm1JRCxcbiAgICAgICAgaGVpZ2h0OiBcIjEwMCVcIixcbiAgICAgICAgbWluSGVpZ2h0OiAwLFxuICAgICAgICBtaW5XaWR0aDogMCxcbiAgICAgICAgZWxlbWVudFR5cGU6IFwiZm9ybVwiLFxuICAgICAgICBvblN1Ym1pdDogZXZlbnQgPT4ge1xuICAgICAgICAgIGlmIChldmVudC50YXJnZXQgIT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHJldHVybjtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIG9uVXBkYXRlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KEZvcm1Gb3JFbnRyeSwge1xuICAgICAgICAgIHByZXZpZXdQcm9wczogcHJldmlld1Byb3BzLFxuICAgICAgICAgIGZvcmNlVmFsaWRhdGlvbjogZm9yY2VWYWxpZGF0aW9uLFxuICAgICAgICAgIGVudHJ5TGF5b3V0OiBjb2xsZWN0aW9uQ29uZmlnLmVudHJ5TGF5b3V0LFxuICAgICAgICAgIGZvcm1hdEluZm86IGZvcm1hdEluZm8sXG4gICAgICAgICAgc2x1Z0ZpZWxkOiBzbHVnSW5mb1xuICAgICAgICB9KVxuICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goRGlhbG9nQ29udGFpbmVyXG4gICAgICAvLyBpZGVhbGx5IHRoaXMgd291bGQgYmUgYSBwb3BvdmVyIG9uIGRlc2t0b3AgYnV0IHVzaW5nIGEgRGlhbG9nVHJpZ2dlciB3b3VsZG4ndCB3b3JrIHNpbmNlXG4gICAgICAvLyB0aGlzIGRvZXNuJ3Qgb3BlbiBvbiBjbGljayBidXQgYWZ0ZXIgZG9pbmcgYSBuZXR3b3JrIHJlcXVlc3QgYW5kIGl0IGZhaWxpbmcgYW5kIG1hbnVhbGx5IHdpcmluZyBhYm91dCBhIHBvcG92ZXIgYW5kIG1vZGFsIHdvdWxkIGJlIGEgcGFpblxuICAgICAgLCB7XG4gICAgICAgIG9uRGlzbWlzczogcmVzZXRVcGRhdGVJdGVtLFxuICAgICAgICBjaGlsZHJlbjogdXBkYXRlUmVzdWx0LmtpbmQgPT09ICduZWVkcy1uZXctYnJhbmNoJyAmJiAvKiNfX1BVUkVfXyovanN4KENyZWF0ZUJyYW5jaER1cmluZ1VwZGF0ZURpYWxvZywge1xuICAgICAgICAgIGJyYW5jaE9pZDogYmFzZUNvbW1pdCxcbiAgICAgICAgICBvbkNyZWF0ZTogYXN5bmMgbmV3QnJhbmNoID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1CYXNlUGF0aCA9IGAva2V5c3RhdGljL2JyYW5jaC8ke2VuY29kZVVSSUNvbXBvbmVudChuZXdCcmFuY2gpfS9jb2xsZWN0aW9uLyR7ZW5jb2RlVVJJQ29tcG9uZW50KGNvbGxlY3Rpb24pfS9pdGVtL2A7XG4gICAgICAgICAgICByb3V0ZXIucHVzaChpdGVtQmFzZVBhdGggKyBlbmNvZGVVUklDb21wb25lbnQoaXRlbVNsdWcpKTtcbiAgICAgICAgICAgIGNvbnN0IHNsdWcgPSBnZXRTbHVnRnJvbVN0YXRlKGNvbGxlY3Rpb25Db25maWcsIHN0YXRlKTtcbiAgICAgICAgICAgIGNvbnN0IGhhc1VwZGF0ZWQgPSBhd2FpdCB1cGRhdGUoe1xuICAgICAgICAgICAgICBicmFuY2g6IG5ld0JyYW5jaCxcbiAgICAgICAgICAgICAgc2hhOiBiYXNlQ29tbWl0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChoYXNVcGRhdGVkICYmIHNsdWcgIT09IGl0ZW1TbHVnKSB7XG4gICAgICAgICAgICAgIHJvdXRlci5yZXBsYWNlKGl0ZW1CYXNlUGF0aCArIGVuY29kZVVSSUNvbXBvbmVudChzbHVnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICByZWFzb246IHVwZGF0ZVJlc3VsdC5yZWFzb24sXG4gICAgICAgICAgb25EaXNtaXNzOiByZXNldFVwZGF0ZUl0ZW1cbiAgICAgICAgfSlcbiAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KERpYWxvZ0NvbnRhaW5lclxuICAgICAgLy8gaWRlYWxseSB0aGlzIHdvdWxkIGJlIGEgcG9wb3ZlciBvbiBkZXNrdG9wIGJ1dCB1c2luZyBhIERpYWxvZ1RyaWdnZXJcbiAgICAgIC8vIHdvdWxkbid0IHdvcmsgc2luY2UgdGhpcyBkb2Vzbid0IG9wZW4gb24gY2xpY2sgYnV0IGFmdGVyIGRvaW5nIGFcbiAgICAgIC8vIG5ldHdvcmsgcmVxdWVzdCBhbmQgaXQgZmFpbGluZyBhbmQgbWFudWFsbHkgd2lyaW5nIGFib3V0IGEgcG9wb3ZlclxuICAgICAgLy8gYW5kIG1vZGFsIHdvdWxkIGJlIGEgcGFpblxuICAgICAgLCB7XG4gICAgICAgIG9uRGlzbWlzczogcmVzZXRVcGRhdGVJdGVtLFxuICAgICAgICBjaGlsZHJlbjogdXBkYXRlUmVzdWx0LmtpbmQgPT09ICduZWVkcy1mb3JrJyAmJiBpc0dpdEh1YkNvbmZpZyhwcm9wcy5jb25maWcpICYmIC8qI19fUFVSRV9fKi9qc3goRm9ya1JlcG9EaWFsb2csIHtcbiAgICAgICAgICBvbkNyZWF0ZTogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2x1ZyA9IGdldFNsdWdGcm9tU3RhdGUoY29sbGVjdGlvbkNvbmZpZywgc3RhdGUpO1xuICAgICAgICAgICAgY29uc3QgaGFzVXBkYXRlZCA9IGF3YWl0IHVwZGF0ZSgpO1xuICAgICAgICAgICAgaWYgKGhhc1VwZGF0ZWQgJiYgc2x1ZyAhPT0gaXRlbVNsdWcpIHtcbiAgICAgICAgICAgICAgcm91dGVyLnJlcGxhY2UoYCR7cHJvcHMuYmFzZVBhdGh9L2NvbGxlY3Rpb24vJHtlbmNvZGVVUklDb21wb25lbnQoY29sbGVjdGlvbil9L2l0ZW0vJHtlbmNvZGVVUklDb21wb25lbnQoc2x1Zyl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBvbkRpc21pc3M6IHJlc2V0VXBkYXRlSXRlbSxcbiAgICAgICAgICBjb25maWc6IHByb3BzLmNvbmZpZ1xuICAgICAgICB9KVxuICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goRGlhbG9nQ29udGFpbmVyXG4gICAgICAvLyBpZGVhbGx5IHRoaXMgd291bGQgYmUgYSBwb3BvdmVyIG9uIGRlc2t0b3AgYnV0IHVzaW5nIGEgRGlhbG9nVHJpZ2dlclxuICAgICAgLy8gd291bGRuJ3Qgd29yayBzaW5jZSB0aGlzIGRvZXNuJ3Qgb3BlbiBvbiBjbGljayBidXQgYWZ0ZXIgZG9pbmcgYVxuICAgICAgLy8gbmV0d29yayByZXF1ZXN0IGFuZCBpdCBmYWlsaW5nIGFuZCBtYW51YWxseSB3aXJpbmcgYWJvdXQgYSBwb3BvdmVyXG4gICAgICAvLyBhbmQgbW9kYWwgd291bGQgYmUgYSBwYWluXG4gICAgICAsIHtcbiAgICAgICAgb25EaXNtaXNzOiByZXNldERlbGV0ZUl0ZW0sXG4gICAgICAgIGNoaWxkcmVuOiBkZWxldGVSZXN1bHQua2luZCA9PT0gJ25lZWRzLWZvcmsnICYmIGlzR2l0SHViQ29uZmlnKHByb3BzLmNvbmZpZykgJiYgLyojX19QVVJFX18qL2pzeChGb3JrUmVwb0RpYWxvZywge1xuICAgICAgICAgIG9uQ3JlYXRlOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCBkZWxldGVJdGVtKCk7XG4gICAgICAgICAgICByb3V0ZXIucHVzaChgJHtwcm9wcy5iYXNlUGF0aH0vY29sbGVjdGlvbi8ke2VuY29kZVVSSUNvbXBvbmVudChjb2xsZWN0aW9uKX1gKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9uRGlzbWlzczogcmVzZXREZWxldGVJdGVtLFxuICAgICAgICAgIGNvbmZpZzogcHJvcHMuY29uZmlnXG4gICAgICAgIH0pXG4gICAgICB9KV1cbiAgICB9KVxuICB9KTtcbn1cbmZ1bmN0aW9uIEhlYWRlckFjdGlvbnMocHJvcHMpIHtcbiAgbGV0IHtcbiAgICBmb3JtSUQsXG4gICAgaGFzQ2hhbmdlZCxcbiAgICBpc0xvYWRpbmcsXG4gICAgb25EZWxldGUsXG4gICAgb25EdXBsaWNhdGUsXG4gICAgb25SZXNldCxcbiAgICBwcmV2aWV3SHJlZixcbiAgICB2aWV3SHJlZlxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGlzQmVsb3dUYWJsZXQgPSB1c2VNZWRpYVF1ZXJ5KGJyZWFrcG9pbnRRdWVyaWVzLmJlbG93LnRhYmxldCk7XG4gIGNvbnN0IHN0cmluZ0Zvcm1hdHRlciA9IHVzZUxvY2FsaXplZFN0cmluZ0Zvcm1hdHRlcihsMTBuTWVzc2FnZXMpO1xuICBjb25zdCBbZGVsZXRlQWxlcnRJc09wZW4sIHNldERlbGV0ZUFsZXJ0T3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkdXBsaWNhdGVBbGVydElzT3Blbiwgc2V0RHVwbGljYXRlQWxlcnRPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgbWVudUFjdGlvbnMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBsZXQgaXRlbXMgPSBbe1xuICAgICAga2V5OiAncmVzZXQnLFxuICAgICAgbGFiZWw6ICdSZXNldCBjaGFuZ2VzJyxcbiAgICAgIC8vIFRPRE86IGwxMG5cbiAgICAgIGljb246IGhpc3RvcnlJY29uXG4gICAgfSwge1xuICAgICAga2V5OiAnZGVsZXRlJyxcbiAgICAgIGxhYmVsOiAnRGVsZXRlIGVudHJ54oCmJyxcbiAgICAgIC8vIFRPRE86IGwxMG5cbiAgICAgIGljb246IHRyYXNoMkljb25cbiAgICB9LCB7XG4gICAgICBrZXk6ICdkdXBsaWNhdGUnLFxuICAgICAgbGFiZWw6ICdEdXBsaWNhdGUgZW50cnnigKYnLFxuICAgICAgLy8gVE9ETzogbDEwblxuICAgICAgaWNvbjogY29weVBsdXNJY29uXG4gICAgfV07XG4gICAgaWYgKHByZXZpZXdIcmVmKSB7XG4gICAgICBpdGVtcy5wdXNoKHtcbiAgICAgICAga2V5OiAncHJldmlldycsXG4gICAgICAgIGxhYmVsOiAnUHJldmlldycsXG4gICAgICAgIGljb246IGV4dGVybmFsTGlua0ljb24sXG4gICAgICAgIGhyZWY6IHByZXZpZXdIcmVmLFxuICAgICAgICB0YXJnZXQ6ICdfYmxhbmsnLFxuICAgICAgICByZWw6ICdub29wZW5lciBub3JlZmVycmVyJ1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh2aWV3SHJlZikge1xuICAgICAgaXRlbXMucHVzaCh7XG4gICAgICAgIGtleTogJ3ZpZXcnLFxuICAgICAgICBsYWJlbDogJ1ZpZXcgb24gR2l0SHViJyxcbiAgICAgICAgaWNvbjogZ2l0aHViSWNvbixcbiAgICAgICAgaHJlZjogdmlld0hyZWYsXG4gICAgICAgIHRhcmdldDogJ19ibGFuaycsXG4gICAgICAgIHJlbDogJ25vb3BlbmVyIG5vcmVmZXJyZXInXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGl0ZW1zO1xuICB9LCBbcHJldmlld0hyZWYsIHZpZXdIcmVmXSk7XG4gIGNvbnN0IGluZGljYXRvckVsZW1lbnQgPSAoKCkgPT4ge1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFByb2dyZXNzQ2lyY2xlLCB7XG4gICAgICAgIFwiYXJpYS1sYWJlbFwiOiBcIlNhdmluZyBjaGFuZ2VzXCIsXG4gICAgICAgIGlzSW5kZXRlcm1pbmF0ZTogdHJ1ZSxcbiAgICAgICAgc2l6ZTogXCJzbWFsbFwiLFxuICAgICAgICBhbGlnblNlbGY6IFwiY2VudGVyXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoaGFzQ2hhbmdlZCkge1xuICAgICAgcmV0dXJuIGlzQmVsb3dUYWJsZXQgPyAvKiNfX1BVUkVfXyovanN4KEJveCwge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwicGVuZGluZ0VtcGhhc2lzXCIsXG4gICAgICAgIGhlaWdodDogXCJzY2FsZS43NVwiLFxuICAgICAgICB3aWR0aDogXCJzY2FsZS43NVwiLFxuICAgICAgICBib3JkZXJSYWRpdXM6IFwiZnVsbFwiLFxuICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChUZXh0LCB7XG4gICAgICAgICAgdmlzdWFsbHlIaWRkZW46IHRydWUsXG4gICAgICAgICAgY2hpbGRyZW46IFwiVW5zYXZlZFwiXG4gICAgICAgIH0pXG4gICAgICB9KSA6IC8qI19fUFVSRV9fKi9qc3goQmFkZ2UsIHtcbiAgICAgICAgdG9uZTogXCJwZW5kaW5nXCIsXG4gICAgICAgIGNoaWxkcmVuOiBcIlVuc2F2ZWRcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9KSgpO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeHMoRnJhZ21lbnQsIHtcbiAgICBjaGlsZHJlbjogW2luZGljYXRvckVsZW1lbnQsIC8qI19fUFVSRV9fKi9qc3goQWN0aW9uR3JvdXAsIHtcbiAgICAgIGJ1dHRvbkxhYmVsQmVoYXZpb3I6IFwiaGlkZVwiLFxuICAgICAgb3ZlcmZsb3dNb2RlOiBcImNvbGxhcHNlXCIsXG4gICAgICBwcm9taW5lbmNlOiBcImxvd1wiLFxuICAgICAgZGVuc2l0eTogXCJjb21wYWN0XCIsXG4gICAgICBtYXhXaWR0aDogaXNCZWxvd1RhYmxldCA/ICdlbGVtZW50LnJlZ3VsYXInIDogdW5kZWZpbmVkIC8vIGZvcmNlIHN3aXRjaCB0byBhY3Rpb24gbWVudSBvbiBzbWFsbCBkZXZpY2VzXG4gICAgICAsXG4gICAgICBpdGVtczogbWVudUFjdGlvbnMsXG4gICAgICBkaXNhYmxlZEtleXM6IGhhc0NoYW5nZWQgPyBbXSA6IFsncmVzZXQnXSxcbiAgICAgIG9uQWN0aW9uOiBrZXkgPT4ge1xuICAgICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICAgIGNhc2UgJ3Jlc2V0JzpcbiAgICAgICAgICAgIG9uUmVzZXQoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgICAgICBzZXREZWxldGVBbGVydE9wZW4odHJ1ZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdkdXBsaWNhdGUnOlxuICAgICAgICAgICAgaWYgKGhhc0NoYW5nZWQpIHtcbiAgICAgICAgICAgICAgc2V0RHVwbGljYXRlQWxlcnRPcGVuKHRydWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgb25EdXBsaWNhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY2hpbGRyZW46IGl0ZW0gPT4gLyojX19QVVJFX18qL2pzeHMoSXRlbSwge1xuICAgICAgICB0ZXh0VmFsdWU6IGl0ZW0ubGFiZWwsXG4gICAgICAgIGhyZWY6IGl0ZW0uaHJlZixcbiAgICAgICAgdGFyZ2V0OiBpdGVtLnRhcmdldCxcbiAgICAgICAgcmVsOiBpdGVtLnJlbCxcbiAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEljb24sIHtcbiAgICAgICAgICBzcmM6IGl0ZW0uaWNvblxuICAgICAgICB9KSwgLyojX19QVVJFX18qL2pzeChUZXh0LCB7XG4gICAgICAgICAgY2hpbGRyZW46IGl0ZW0ubGFiZWxcbiAgICAgICAgfSldXG4gICAgICB9LCBpdGVtLmtleSlcbiAgICB9KSwgLyojX19QVVJFX18qL2pzeChCdXR0b24sIHtcbiAgICAgIGZvcm06IGZvcm1JRCxcbiAgICAgIGlzRGlzYWJsZWQ6IGlzTG9hZGluZyxcbiAgICAgIHByb21pbmVuY2U6IFwiaGlnaFwiLFxuICAgICAgdHlwZTogXCJzdWJtaXRcIixcbiAgICAgIGNoaWxkcmVuOiBzdHJpbmdGb3JtYXR0ZXIuZm9ybWF0KCdzYXZlJylcbiAgICB9KSwgLyojX19QVVJFX18qL2pzeChEaWFsb2dDb250YWluZXIsIHtcbiAgICAgIG9uRGlzbWlzczogKCkgPT4gc2V0RGVsZXRlQWxlcnRPcGVuKGZhbHNlKSxcbiAgICAgIGNoaWxkcmVuOiBkZWxldGVBbGVydElzT3BlbiAmJiAvKiNfX1BVUkVfXyovanN4KEFsZXJ0RGlhbG9nLCB7XG4gICAgICAgIHRpdGxlOiBcIkRlbGV0ZSBlbnRyeVwiLFxuICAgICAgICB0b25lOiBcImNyaXRpY2FsXCIsXG4gICAgICAgIGNhbmNlbExhYmVsOiBcIkNhbmNlbFwiLFxuICAgICAgICBwcmltYXJ5QWN0aW9uTGFiZWw6IFwiWWVzLCBkZWxldGVcIixcbiAgICAgICAgYXV0b0ZvY3VzQnV0dG9uOiBcImNhbmNlbFwiLFxuICAgICAgICBvblByaW1hcnlBY3Rpb246IG9uRGVsZXRlLFxuICAgICAgICBjaGlsZHJlbjogXCJBcmUgeW91IHN1cmU/IFRoaXMgYWN0aW9uIGNhbm5vdCBiZSB1bmRvbmUuXCJcbiAgICAgIH0pXG4gICAgfSksIC8qI19fUFVSRV9fKi9qc3goRGlhbG9nQ29udGFpbmVyLCB7XG4gICAgICBvbkRpc21pc3M6ICgpID0+IHNldER1cGxpY2F0ZUFsZXJ0T3BlbihmYWxzZSksXG4gICAgICBjaGlsZHJlbjogZHVwbGljYXRlQWxlcnRJc09wZW4gJiYgLyojX19QVVJFX18qL2pzeChBbGVydERpYWxvZywge1xuICAgICAgICB0aXRsZTogXCJTYXZlIGFuZCBkdXBsaWNhdGUgZW50cnlcIixcbiAgICAgICAgdG9uZTogXCJuZXV0cmFsXCIsXG4gICAgICAgIGNhbmNlbExhYmVsOiBcIkNhbmNlbFwiLFxuICAgICAgICBwcmltYXJ5QWN0aW9uTGFiZWw6IFwiU2F2ZSBhbmQgZHVwbGljYXRlXCIsXG4gICAgICAgIGF1dG9Gb2N1c0J1dHRvbjogXCJwcmltYXJ5XCIsXG4gICAgICAgIG9uUHJpbWFyeUFjdGlvbjogb25EdXBsaWNhdGUsXG4gICAgICAgIGNoaWxkcmVuOiBcIllvdSBoYXZlIHVuc2F2ZWQgY2hhbmdlcy4gU2F2ZSB0aGlzIGVudHJ5IHRvIGR1cGxpY2F0ZSBpdC5cIlxuICAgICAgfSlcbiAgICB9KV1cbiAgfSk7XG59XG5mdW5jdGlvbiBDcmVhdGVCcmFuY2hEdXJpbmdVcGRhdGVEaWFsb2cocHJvcHMpIHtcbiAgdmFyIF9kYXRhJGNyZWF0ZVJlZjtcbiAgY29uc3Qgc3RyaW5nRm9ybWF0dGVyID0gdXNlTG9jYWxpemVkU3RyaW5nRm9ybWF0dGVyKGwxMG5NZXNzYWdlcyk7XG4gIGNvbnN0IHJlcG9zaXRvcnlJZCA9IHVzZVJlcG9zaXRvcnlJZCgpO1xuICBjb25zdCBbYnJhbmNoTmFtZSwgc2V0QnJhbmNoTmFtZV0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFt7XG4gICAgZXJyb3IsXG4gICAgZmV0Y2hpbmcsXG4gICAgZGF0YVxuICB9LCBjcmVhdGVCcmFuY2hdID0gdXNlQ3JlYXRlQnJhbmNoTXV0YXRpb24oKTtcbiAgY29uc3QgaXNMb2FkaW5nID0gZmV0Y2hpbmcgfHwgISEoZGF0YSAhPT0gbnVsbCAmJiBkYXRhICE9PSB2b2lkIDAgJiYgKF9kYXRhJGNyZWF0ZVJlZiA9IGRhdGEuY3JlYXRlUmVmKSAhPT0gbnVsbCAmJiBfZGF0YSRjcmVhdGVSZWYgIT09IHZvaWQgMCAmJiBfZGF0YSRjcmVhdGVSZWYuX190eXBlbmFtZSk7XG4gIGNvbnN0IGNvbmZpZyA9IHVzZUNvbmZpZygpO1xuICBjb25zdCBicmFuY2hQcmVmaXggPSBnZXRCcmFuY2hQcmVmaXgoY29uZmlnKTtcbiAgY29uc3QgcHJvcHNGb3JCcmFuY2hQcmVmaXggPSBicmFuY2hQcmVmaXggPyB7XG4gICAgVU5TQUZFX2NsYXNzTmFtZTogY3NzKHtcbiAgICAgICcmIGlucHV0Jzoge1xuICAgICAgICBwYWRkaW5nSW5saW5lU3RhcnQ6IHRva2VuU2NoZW1hLnNpemUuc3BhY2UueHNtYWxsXG4gICAgICB9XG4gICAgfSksXG4gICAgc3RhcnRFbGVtZW50OiAvKiNfX1BVUkVfXyovanN4KEZsZXgsIHtcbiAgICAgIGFsaWduSXRlbXM6IFwiY2VudGVyXCIsXG4gICAgICBwYWRkaW5nU3RhcnQ6IFwicmVndWxhclwiLFxuICAgICAganVzdGlmeUNvbnRlbnQ6IFwiY2VudGVyXCIsXG4gICAgICBwb2ludGVyRXZlbnRzOiBcIm5vbmVcIixcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgICAgY29sb3I6IFwibmV1dHJhbFNlY29uZGFyeVwiLFxuICAgICAgICBjaGlsZHJlbjogYnJhbmNoUHJlZml4XG4gICAgICB9KVxuICAgIH0pXG4gIH0gOiB7fTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goRGlhbG9nLCB7XG4gICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3hzKFwiZm9ybVwiLCB7XG4gICAgICBzdHlsZToge1xuICAgICAgICBkaXNwbGF5OiAnY29udGVudHMnXG4gICAgICB9LFxuICAgICAgb25TdWJtaXQ6IGFzeW5jIGV2ZW50ID0+IHtcbiAgICAgICAgdmFyIF9yZXN1bHQkZGF0YTtcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldCAhPT0gZXZlbnQuY3VycmVudFRhcmdldCkgcmV0dXJuO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zdCBmdWxsQnJhbmNoTmFtZSA9IChicmFuY2hQcmVmaXggIT09IG51bGwgJiYgYnJhbmNoUHJlZml4ICE9PSB2b2lkIDAgPyBicmFuY2hQcmVmaXggOiAnJykgKyBicmFuY2hOYW1lO1xuICAgICAgICBjb25zdCBuYW1lID0gYHJlZnMvaGVhZHMvJHtmdWxsQnJhbmNoTmFtZX1gO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGVCcmFuY2goe1xuICAgICAgICAgIGlucHV0OiB7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgb2lkOiBwcm9wcy5icmFuY2hPaWQsXG4gICAgICAgICAgICByZXBvc2l0b3J5SWRcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoKF9yZXN1bHQkZGF0YSA9IHJlc3VsdC5kYXRhKSAhPT0gbnVsbCAmJiBfcmVzdWx0JGRhdGEgIT09IHZvaWQgMCAmJiAoX3Jlc3VsdCRkYXRhID0gX3Jlc3VsdCRkYXRhLmNyZWF0ZVJlZikgIT09IG51bGwgJiYgX3Jlc3VsdCRkYXRhICE9PSB2b2lkIDAgJiYgX3Jlc3VsdCRkYXRhLl9fdHlwZW5hbWUpIHtcbiAgICAgICAgICBwcm9wcy5vbkNyZWF0ZShmdWxsQnJhbmNoTmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goSGVhZGluZywge1xuICAgICAgICBjaGlsZHJlbjogc3RyaW5nRm9ybWF0dGVyLmZvcm1hdCgnbmV3QnJhbmNoJylcbiAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KENvbnRlbnQsIHtcbiAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goRmxleCwge1xuICAgICAgICAgIGdhcDogXCJsYXJnZVwiLFxuICAgICAgICAgIGRpcmVjdGlvbjogXCJjb2x1bW5cIixcbiAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChUZXh0RmllbGQsIHtcbiAgICAgICAgICAgIHZhbHVlOiBicmFuY2hOYW1lLFxuICAgICAgICAgICAgb25DaGFuZ2U6IHNldEJyYW5jaE5hbWUsXG4gICAgICAgICAgICBsYWJlbDogXCJCcmFuY2ggbmFtZVwiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHByb3BzLnJlYXNvbixcbiAgICAgICAgICAgIGF1dG9Gb2N1czogdHJ1ZSxcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZTogcHJldHR5RXJyb3JGb3JDcmVhdGVCcmFuY2hNdXRhdGlvbihlcnJvciksXG4gICAgICAgICAgICAuLi5wcm9wc0ZvckJyYW5jaFByZWZpeFxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeHMoQnV0dG9uR3JvdXAsIHtcbiAgICAgICAgY2hpbGRyZW46IFtpc0xvYWRpbmcgJiYgLyojX19QVVJFX18qL2pzeChQcm9ncmVzc0NpcmNsZSwge1xuICAgICAgICAgIGlzSW5kZXRlcm1pbmF0ZTogdHJ1ZSxcbiAgICAgICAgICBzaXplOiBcInNtYWxsXCIsXG4gICAgICAgICAgXCJhcmlhLWxhYmVsXCI6IFwiQ3JlYXRpbmcgQnJhbmNoXCJcbiAgICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goQnV0dG9uLCB7XG4gICAgICAgICAgaXNEaXNhYmxlZDogaXNMb2FkaW5nLFxuICAgICAgICAgIG9uUHJlc3M6IHByb3BzLm9uRGlzbWlzcyxcbiAgICAgICAgICBjaGlsZHJlbjogc3RyaW5nRm9ybWF0dGVyLmZvcm1hdCgnY2FuY2VsJylcbiAgICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goQnV0dG9uLCB7XG4gICAgICAgICAgaXNEaXNhYmxlZDogaXNMb2FkaW5nLFxuICAgICAgICAgIHByb21pbmVuY2U6IFwiaGlnaFwiLFxuICAgICAgICAgIHR5cGU6IFwic3VibWl0XCIsXG4gICAgICAgICAgY2hpbGRyZW46IFwiQ3JlYXRlIGJyYW5jaCBhbmQgc2F2ZVwiXG4gICAgICAgIH0pXVxuICAgICAgfSldXG4gICAgfSlcbiAgfSk7XG59XG5mdW5jdGlvbiBJdGVtUGFnZVdyYXBwZXIocHJvcHMpIHtcbiAgdmFyIF9wcm9wcyRjb25maWckY29sbGVjdDtcbiAgY29uc3QgY29sbGVjdGlvbkNvbmZpZyA9IChfcHJvcHMkY29uZmlnJGNvbGxlY3QgPSBwcm9wcy5jb25maWcuY29sbGVjdGlvbnMpID09PSBudWxsIHx8IF9wcm9wcyRjb25maWckY29sbGVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Byb3BzJGNvbmZpZyRjb2xsZWN0W3Byb3BzLmNvbGxlY3Rpb25dO1xuICBpZiAoIWNvbGxlY3Rpb25Db25maWcpIG5vdEZvdW5kKCk7XG4gIGNvbnN0IGZvcm1hdCA9IHVzZU1lbW8oKCkgPT4gZ2V0Q29sbGVjdGlvbkZvcm1hdChwcm9wcy5jb25maWcsIHByb3BzLmNvbGxlY3Rpb24pLCBbcHJvcHMuY29uZmlnLCBwcm9wcy5jb2xsZWN0aW9uXSk7XG4gIGNvbnN0IHNsdWdJbmZvID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNsdWc6IHByb3BzLml0ZW1TbHVnLFxuICAgICAgZmllbGQ6IGNvbGxlY3Rpb25Db25maWcuc2x1Z0ZpZWxkXG4gICAgfTtcbiAgfSwgW2NvbGxlY3Rpb25Db25maWcuc2x1Z0ZpZWxkLCBwcm9wcy5pdGVtU2x1Z10pO1xuICBjb25zdCBkcmFmdERhdGEgPSB1c2VEYXRhKHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBjb25zdCByYXcgPSBhd2FpdCBnZXREcmFmdChbJ2NvbGxlY3Rpb24nLCBwcm9wcy5jb2xsZWN0aW9uLCBwcm9wcy5pdGVtU2x1Z10pO1xuICAgIGlmICghcmF3KSB0aHJvdyBuZXcgRXJyb3IoJ05vIGRyYWZ0IGZvdW5kJyk7XG4gICAgY29uc3Qgc3RvcmVkID0gc3RvcmVkVmFsU2NoZW1hJDIucGFyc2UocmF3KTtcbiAgICBjb25zdCBwYXJzZWQgPSBwYXJzZUVudHJ5KHtcbiAgICAgIGNvbmZpZzogcHJvcHMuY29uZmlnLFxuICAgICAgZGlycGF0aDogZ2V0Q29sbGVjdGlvbkl0ZW1QYXRoKHByb3BzLmNvbmZpZywgcHJvcHMuY29sbGVjdGlvbiwgc3RvcmVkLnNsdWcpLFxuICAgICAgZm9ybWF0LFxuICAgICAgc2NoZW1hOiBjb2xsZWN0aW9uQ29uZmlnLnNjaGVtYSxcbiAgICAgIHNsdWc6IHtcbiAgICAgICAgZmllbGQ6IGNvbGxlY3Rpb25Db25maWcuc2x1Z0ZpZWxkLFxuICAgICAgICBzbHVnOiBzdG9yZWQuc2x1Z1xuICAgICAgfVxuICAgIH0sIHN0b3JlZC5maWxlcyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXRlOiBwYXJzZWQuaW5pdGlhbFN0YXRlLFxuICAgICAgc2F2ZWRBdDogc3RvcmVkLnNhdmVkQXQsXG4gICAgICB0cmVlS2V5OiBzdG9yZWQuYmVmb3JlVHJlZUtleVxuICAgIH07XG4gIH0sIFtjb2xsZWN0aW9uQ29uZmlnLCBmb3JtYXQsIHByb3BzLmNvbGxlY3Rpb24sIHByb3BzLmNvbmZpZywgcHJvcHMuaXRlbVNsdWddKSk7XG4gIGNvbnN0IGl0ZW1EYXRhID0gdXNlSXRlbURhdGEoe1xuICAgIGNvbmZpZzogcHJvcHMuY29uZmlnLFxuICAgIGRpcnBhdGg6IGdldENvbGxlY3Rpb25JdGVtUGF0aChwcm9wcy5jb25maWcsIHByb3BzLmNvbGxlY3Rpb24sIHByb3BzLml0ZW1TbHVnKSxcbiAgICBzY2hlbWE6IGNvbGxlY3Rpb25Db25maWcuc2NoZW1hLFxuICAgIGZvcm1hdCxcbiAgICBzbHVnOiBzbHVnSW5mb1xuICB9KTtcbiAgaWYgKGl0ZW1EYXRhLmtpbmQgPT09ICdlcnJvcicpIHtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChJdGVtUGFnZVNoZWxsLCB7XG4gICAgICAuLi5wcm9wcyxcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KFBhZ2VCb2R5LCB7XG4gICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KE5vdGljZSwge1xuICAgICAgICAgIHRvbmU6IFwiY3JpdGljYWxcIixcbiAgICAgICAgICBjaGlsZHJlbjogaXRlbURhdGEuZXJyb3IubWVzc2FnZVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuICBpZiAoaXRlbURhdGEua2luZCA9PT0gJ2xvYWRpbmcnIHx8IGRyYWZ0RGF0YS5raW5kID09PSAnbG9hZGluZycpIHtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChJdGVtUGFnZVNoZWxsLCB7XG4gICAgICAuLi5wcm9wcyxcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KEZsZXgsIHtcbiAgICAgICAgYWxpZ25JdGVtczogXCJjZW50ZXJcIixcbiAgICAgICAganVzdGlmeUNvbnRlbnQ6IFwiY2VudGVyXCIsXG4gICAgICAgIG1pbkhlaWdodDogXCJzY2FsZS4zMDAwXCIsXG4gICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KFByb2dyZXNzQ2lyY2xlLCB7XG4gICAgICAgICAgXCJhcmlhLWxhYmVsXCI6IFwiTG9hZGluZyBJdGVtXCIsXG4gICAgICAgICAgaXNJbmRldGVybWluYXRlOiB0cnVlLFxuICAgICAgICAgIHNpemU6IFwibGFyZ2VcIlxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuICBpZiAoaXRlbURhdGEuZGF0YSA9PT0gJ25vdC1mb3VuZCcpIHtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChJdGVtUGFnZVNoZWxsLCB7XG4gICAgICAuLi5wcm9wcyxcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KFBhZ2VCb2R5LCB7XG4gICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KE5vdGljZSwge1xuICAgICAgICAgIHRvbmU6IFwiY2F1dGlvblwiLFxuICAgICAgICAgIGNoaWxkcmVuOiBcIkVudHJ5IG5vdCBmb3VuZC5cIlxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuICBjb25zdCBsb2FkZWREcmFmdCA9IGRyYWZ0RGF0YS5raW5kID09PSAnbG9hZGVkJyA/IGRyYWZ0RGF0YS5kYXRhIDogdW5kZWZpbmVkO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChJdGVtUGFnZSwge1xuICAgIGNvbGxlY3Rpb246IHByb3BzLmNvbGxlY3Rpb24sXG4gICAgYmFzZVBhdGg6IHByb3BzLmJhc2VQYXRoLFxuICAgIGNvbmZpZzogcHJvcHMuY29uZmlnLFxuICAgIGl0ZW1TbHVnOiBwcm9wcy5pdGVtU2x1ZyxcbiAgICBpbml0aWFsU3RhdGU6IGl0ZW1EYXRhLmRhdGEuaW5pdGlhbFN0YXRlLFxuICAgIGluaXRpYWxGaWxlczogaXRlbURhdGEuZGF0YS5pbml0aWFsRmlsZXMsXG4gICAgZHJhZnQ6IGxvYWRlZERyYWZ0LFxuICAgIGxvY2FsVHJlZUtleTogaXRlbURhdGEuZGF0YS5sb2NhbFRyZWVLZXlcbiAgfSk7XG59XG5jb25zdCBJdGVtUGFnZVNoZWxsID0gcHJvcHMgPT4ge1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgY29uc3QgY29sbGVjdGlvbkNvbmZpZyA9IHByb3BzLmNvbmZpZy5jb2xsZWN0aW9uc1twcm9wcy5jb2xsZWN0aW9uXTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3hzKFBhZ2VSb290LCB7XG4gICAgY29udGFpbmVyV2lkdGg6IGNvbnRhaW5lcldpZHRoRm9yRW50cnlMYXlvdXQoY29sbGVjdGlvbkNvbmZpZyksXG4gICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4cyhQYWdlSGVhZGVyLCB7XG4gICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3hzKEJyZWFkY3J1bWJzLCB7XG4gICAgICAgIGZsZXg6IHRydWUsXG4gICAgICAgIHNpemU6IFwibWVkaXVtXCIsXG4gICAgICAgIG1pbldpZHRoOiAwLFxuICAgICAgICBvbkFjdGlvbjoga2V5ID0+IHtcbiAgICAgICAgICBpZiAoa2V5ID09PSAnY29sbGVjdGlvbicpIHtcbiAgICAgICAgICAgIHJvdXRlci5wdXNoKGAke3Byb3BzLmJhc2VQYXRofS9jb2xsZWN0aW9uLyR7ZW5jb2RlVVJJQ29tcG9uZW50KHByb3BzLmNvbGxlY3Rpb24pfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEl0ZW0sIHtcbiAgICAgICAgICBjaGlsZHJlbjogY29sbGVjdGlvbkNvbmZpZy5sYWJlbFxuICAgICAgICB9LCBcImNvbGxlY3Rpb25cIiksIC8qI19fUFVSRV9fKi9qc3goSXRlbSwge1xuICAgICAgICAgIGNoaWxkcmVuOiBwcm9wcy5pdGVtU2x1Z1xuICAgICAgICB9LCBcIml0ZW1cIildXG4gICAgICB9KSwgcHJvcHMuaGVhZGVyQWN0aW9uc11cbiAgICB9KSwgcHJvcHMuY2hpbGRyZW5dXG4gIH0pO1xufTtcblxuZnVuY3Rpb24gQ3JlYXRlSXRlbVdyYXBwZXIocHJvcHMpIHtcbiAgdmFyIF9wcm9wcyRjb25maWckY29sbGVjdDtcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gIGNvbnN0IGR1cGxpY2F0ZVNsdWcgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHJvdXRlci5ocmVmLCAnaHR0cDovL2xvY2FsaG9zdCcpO1xuICAgIHJldHVybiB1cmwuc2VhcmNoUGFyYW1zLmdldCgnZHVwbGljYXRlJyk7XG4gIH0sIFtyb3V0ZXIuaHJlZl0pO1xuICBjb25zdCBjb2xsZWN0aW9uQ29uZmlnID0gKF9wcm9wcyRjb25maWckY29sbGVjdCA9IHByb3BzLmNvbmZpZy5jb2xsZWN0aW9ucykgPT09IG51bGwgfHwgX3Byb3BzJGNvbmZpZyRjb2xsZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcHJvcHMkY29uZmlnJGNvbGxlY3RbcHJvcHMuY29sbGVjdGlvbl07XG4gIGlmICghY29sbGVjdGlvbkNvbmZpZykgbm90Rm91bmQoKTtcbiAgY29uc3QgZm9ybWF0ID0gdXNlTWVtbygoKSA9PiBnZXRDb2xsZWN0aW9uRm9ybWF0KHByb3BzLmNvbmZpZywgcHJvcHMuY29sbGVjdGlvbiksIFtwcm9wcy5jb25maWcsIHByb3BzLmNvbGxlY3Rpb25dKTtcbiAgY29uc3QgZHJhZnREYXRhID0gdXNlRGF0YSh1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcmF3ID0gYXdhaXQgZ2V0RHJhZnQoWydjb2xsZWN0aW9uLWNyZWF0ZScsIHByb3BzLmNvbGxlY3Rpb24sIC4uLihkdXBsaWNhdGVTbHVnID8gW2R1cGxpY2F0ZVNsdWddIDogW10pXSk7XG4gICAgaWYgKCFyYXcpIHRocm93IG5ldyBFcnJvcignTm8gZHJhZnQgZm91bmQnKTtcbiAgICBjb25zdCBzdG9yZWQgPSBzdG9yZWRWYWxTY2hlbWEkMS5wYXJzZShyYXcpO1xuICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlRW50cnkoe1xuICAgICAgY29uZmlnOiBwcm9wcy5jb25maWcsXG4gICAgICBkaXJwYXRoOiBnZXRDb2xsZWN0aW9uSXRlbVBhdGgocHJvcHMuY29uZmlnLCBwcm9wcy5jb2xsZWN0aW9uLCBzdG9yZWQuc2x1ZyksXG4gICAgICBmb3JtYXQsXG4gICAgICBzY2hlbWE6IGNvbGxlY3Rpb25Db25maWcuc2NoZW1hLFxuICAgICAgc2x1Zzoge1xuICAgICAgICBmaWVsZDogY29sbGVjdGlvbkNvbmZpZy5zbHVnRmllbGQsXG4gICAgICAgIHNsdWc6IHN0b3JlZC5zbHVnXG4gICAgICB9XG4gICAgfSwgc3RvcmVkLmZpbGVzKTtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdGU6IHBhcnNlZC5pbml0aWFsU3RhdGUsXG4gICAgICBzYXZlZEF0OiBzdG9yZWQuc2F2ZWRBdFxuICAgIH07XG4gIH0sIFtjb2xsZWN0aW9uQ29uZmlnLCBkdXBsaWNhdGVTbHVnLCBmb3JtYXQsIHByb3BzLmNvbGxlY3Rpb24sIHByb3BzLmNvbmZpZ10pKTtcbiAgY29uc3Qgc2x1ZyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmIChkdXBsaWNhdGVTbHVnKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBmaWVsZDogY29sbGVjdGlvbkNvbmZpZy5zbHVnRmllbGQsXG4gICAgICAgIHNsdWc6IGR1cGxpY2F0ZVNsdWdcbiAgICAgIH07XG4gICAgfVxuICB9LCBbZHVwbGljYXRlU2x1ZywgY29sbGVjdGlvbkNvbmZpZy5zbHVnRmllbGRdKTtcbiAgY29uc3QgaXRlbURhdGEgPSB1c2VJdGVtRGF0YSh7XG4gICAgY29uZmlnOiBwcm9wcy5jb25maWcsXG4gICAgZGlycGF0aDogZ2V0Q29sbGVjdGlvbkl0ZW1QYXRoKHByb3BzLmNvbmZpZywgcHJvcHMuY29sbGVjdGlvbiwgZHVwbGljYXRlU2x1ZyAhPT0gbnVsbCAmJiBkdXBsaWNhdGVTbHVnICE9PSB2b2lkIDAgPyBkdXBsaWNhdGVTbHVnIDogJycpLFxuICAgIHNjaGVtYTogY29sbGVjdGlvbkNvbmZpZy5zY2hlbWEsXG4gICAgZm9ybWF0LFxuICAgIHNsdWdcbiAgfSk7XG4gIGNvbnN0IGR1cGxpY2F0ZUluaXRhbFN0YXRlID0gZHVwbGljYXRlU2x1ZyAmJiBpdGVtRGF0YS5raW5kID09PSAnbG9hZGVkJyAmJiBpdGVtRGF0YS5kYXRhICE9PSAnbm90LWZvdW5kJyA/IGl0ZW1EYXRhLmRhdGEuaW5pdGlhbFN0YXRlIDogdW5kZWZpbmVkO1xuICBjb25zdCBkdXBsaWNhdGVJbml0YWxTdGF0ZVdpdGhVcGRhdGVkU2x1ZyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmIChkdXBsaWNhdGVJbml0YWxTdGF0ZSkge1xuICAgICAgbGV0IHNsdWdGaWVsZFZhbHVlID0gZHVwbGljYXRlSW5pdGFsU3RhdGVbY29sbGVjdGlvbkNvbmZpZy5zbHVnRmllbGRdO1xuICAgICAgLy8gd2UnbGwgbWFrZSBhIGJlc3QgZWZmb3J0IHRvIGFkZCBzb21ldGhpbmcgdG8gdGhlIHNsdWcgYWZ0ZXIgZHVwbGljYXRlZCBzbyBpdCdzIGRpZmZlcmVudFxuICAgICAgLy8gYnV0IGlmIGl0IGZhaWxzIGEgdXNlciBjYW4gY2hhbmdlIGl0IGJlZm9yZSBjcmVhdGluZ1xuICAgICAgLy8gKGUuZy4gcG90ZW50aWFsbHkgaXQncyBub3QganVzdCBhIHRleHQgZmllbGQgc28gYXBwZW5kaW5nIC1jb3B5IG1pZ2h0IG5vdCB3b3JrKVxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc2x1Z0ZpZWxkU2NoZW1hID0gY29sbGVjdGlvbkNvbmZpZy5zY2hlbWFbY29sbGVjdGlvbkNvbmZpZy5zbHVnRmllbGRdO1xuICAgICAgICBpZiAoc2x1Z0ZpZWxkU2NoZW1hLmtpbmQgIT09ICdmb3JtJyB8fCBzbHVnRmllbGRTY2hlbWEuZm9ybUtpbmQgIT09ICdzbHVnJykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbm90IHNsdWcgZmllbGQnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZXJpYWxpemVkID0gc2x1Z0ZpZWxkU2NoZW1hLnNlcmlhbGl6ZVdpdGhTbHVnKHNsdWdGaWVsZFZhbHVlKTtcbiAgICAgICAgc2x1Z0ZpZWxkVmFsdWUgPSBzbHVnRmllbGRTY2hlbWEucGFyc2Uoc2VyaWFsaXplZC52YWx1ZSwge1xuICAgICAgICAgIHNsdWc6IGAke3NlcmlhbGl6ZWQuc2x1Z30tY29weWBcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIHt9XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5kdXBsaWNhdGVJbml0YWxTdGF0ZSxcbiAgICAgICAgW2NvbGxlY3Rpb25Db25maWcuc2x1Z0ZpZWxkXTogc2x1Z0ZpZWxkVmFsdWVcbiAgICAgIH07XG4gICAgfVxuICB9LCBbY29sbGVjdGlvbkNvbmZpZy5zY2hlbWEsIGNvbGxlY3Rpb25Db25maWcuc2x1Z0ZpZWxkLCBkdXBsaWNhdGVJbml0YWxTdGF0ZV0pO1xuICBpZiAoZHVwbGljYXRlU2x1ZyAmJiBpdGVtRGF0YS5raW5kID09PSAnZXJyb3InKSB7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goUGFnZUJvZHksIHtcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KE5vdGljZSwge1xuICAgICAgICB0b25lOiBcImNyaXRpY2FsXCIsXG4gICAgICAgIGNoaWxkcmVuOiBpdGVtRGF0YS5lcnJvci5tZXNzYWdlXG4gICAgICB9KVxuICAgIH0pO1xuICB9XG4gIGlmIChkdXBsaWNhdGVTbHVnICYmIGl0ZW1EYXRhLmtpbmQgPT09ICdsb2FkaW5nJyB8fCBkcmFmdERhdGEua2luZCA9PT0gJ2xvYWRpbmcnKSB7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goRmxleCwge1xuICAgICAgYWxpZ25JdGVtczogXCJjZW50ZXJcIixcbiAgICAgIGp1c3RpZnlDb250ZW50OiBcImNlbnRlclwiLFxuICAgICAgbWluSGVpZ2h0OiBcInNjYWxlLjMwMDBcIixcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KFByb2dyZXNzQ2lyY2xlLCB7XG4gICAgICAgIFwiYXJpYS1sYWJlbFwiOiBcIkxvYWRpbmcgSXRlbVwiLFxuICAgICAgICBpc0luZGV0ZXJtaW5hdGU6IHRydWUsXG4gICAgICAgIHNpemU6IFwibGFyZ2VcIlxuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuICBpZiAoZHVwbGljYXRlU2x1ZyAmJiBpdGVtRGF0YS5raW5kID09PSAnbG9hZGVkJyAmJiBpdGVtRGF0YS5kYXRhID09PSAnbm90LWZvdW5kJykge1xuICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFBhZ2VCb2R5LCB7XG4gICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChOb3RpY2UsIHtcbiAgICAgICAgdG9uZTogXCJjYXV0aW9uXCIsXG4gICAgICAgIGNoaWxkcmVuOiBcIkVudHJ5IG5vdCBmb3VuZC5cIlxuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChDcmVhdGVJdGVtLCB7XG4gICAgY29sbGVjdGlvbjogcHJvcHMuY29sbGVjdGlvbixcbiAgICBjb25maWc6IHByb3BzLmNvbmZpZyxcbiAgICBiYXNlUGF0aDogcHJvcHMuYmFzZVBhdGgsXG4gICAgZHJhZnQ6IGRyYWZ0RGF0YS5raW5kID09PSAnbG9hZGVkJyA/IGRyYWZ0RGF0YS5kYXRhIDogdW5kZWZpbmVkLFxuICAgIGR1cGxpY2F0ZVNsdWc6IGR1cGxpY2F0ZVNsdWcsXG4gICAgaW5pdGlhbFN0YXRlOiBkdXBsaWNhdGVJbml0YWxTdGF0ZVdpdGhVcGRhdGVkU2x1Z1xuICB9KTtcbn1cbmNvbnN0IHN0b3JlZFZhbFNjaGVtYSQxID0gei5vYmplY3Qoe1xuICB2ZXJzaW9uOiB6LmxpdGVyYWwoMSksXG4gIHNhdmVkQXQ6IHouZGF0ZSgpLFxuICBzbHVnOiB6LnN0cmluZygpLFxuICBmaWxlczogei5tYXAoei5zdHJpbmcoKSwgei5pbnN0YW5jZW9mKFVpbnQ4QXJyYXkpKVxufSk7XG5mdW5jdGlvbiBDcmVhdGVJdGVtKHByb3BzKSB7XG4gIHZhciBfcHJvcHMkY29uZmlnJGNvbGxlY3QyLCBfcHJvcHMkZHJhZnQkc3RhdGUsIF9wcm9wcyRkcmFmdDtcbiAgY29uc3Qgc3RyaW5nRm9ybWF0dGVyID0gdXNlTG9jYWxpemVkU3RyaW5nRm9ybWF0dGVyKGwxMG5NZXNzYWdlcyk7XG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuICBjb25zdCBjb2xsZWN0aW9uQ29uZmlnID0gKF9wcm9wcyRjb25maWckY29sbGVjdDIgPSBwcm9wcy5jb25maWcuY29sbGVjdGlvbnMpID09PSBudWxsIHx8IF9wcm9wcyRjb25maWckY29sbGVjdDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wcm9wcyRjb25maWckY29sbGVjdDJbcHJvcHMuY29sbGVjdGlvbl07XG4gIGlmICghY29sbGVjdGlvbkNvbmZpZykgbm90Rm91bmQoKTtcbiAgY29uc3QgW2ZvcmNlVmFsaWRhdGlvbiwgc2V0Rm9yY2VWYWxpZGF0aW9uXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3Qgc2NoZW1hID0gdXNlTWVtbygoKSA9PiBvYmplY3QoY29sbGVjdGlvbkNvbmZpZy5zY2hlbWEpLCBbY29sbGVjdGlvbkNvbmZpZy5zY2hlbWFdKTtcbiAgY29uc3QgaW5pdGlhbFN0YXRlID0gdXNlTWVtbygoKSA9PiB7XG4gICAgdmFyIF9wcm9wcyRpbml0aWFsU3RhdGU7XG4gICAgcmV0dXJuIChfcHJvcHMkaW5pdGlhbFN0YXRlID0gcHJvcHMuaW5pdGlhbFN0YXRlKSAhPT0gbnVsbCAmJiBfcHJvcHMkaW5pdGlhbFN0YXRlICE9PSB2b2lkIDAgPyBfcHJvcHMkaW5pdGlhbFN0YXRlIDogZ2V0SW5pdGlhbFByb3BzVmFsdWUoc2NoZW1hKTtcbiAgfSwgW3Byb3BzLmluaXRpYWxTdGF0ZSwgc2NoZW1hXSk7XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGUoKF9wcm9wcyRkcmFmdCRzdGF0ZSA9IChfcHJvcHMkZHJhZnQgPSBwcm9wcy5kcmFmdCkgPT09IG51bGwgfHwgX3Byb3BzJGRyYWZ0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcHJvcHMkZHJhZnQuc3RhdGUpICE9PSBudWxsICYmIF9wcm9wcyRkcmFmdCRzdGF0ZSAhPT0gdm9pZCAwID8gX3Byb3BzJGRyYWZ0JHN0YXRlIDogaW5pdGlhbFN0YXRlKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAocHJvcHMuZHJhZnQgJiYgc3RhdGUgPT09IHByb3BzLmRyYWZ0LnN0YXRlKSB7XG4gICAgICBzaG93RHJhZnRSZXN0b3JlZFRvYXN0KHByb3BzLmRyYWZ0LnNhdmVkQXQsIGZhbHNlKTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICB9LCBbcHJvcHMuZHJhZnRdKTtcbiAgY29uc3QgcHJldmlld1Byb3BzID0gdXNlTWVtbygoKSA9PiBjcmVhdGVHZXRQcmV2aWV3UHJvcHMoc2NoZW1hLCBzZXRTdGF0ZSwgKCkgPT4gdW5kZWZpbmVkKSwgW3NjaGVtYV0pKHN0YXRlKTtcbiAgY29uc3QgYmFzZUNvbW1pdCA9IHVzZUJhc2VDb21taXQoKTtcbiAgY29uc3Qgc2x1ZyA9IGdldFNsdWdGcm9tU3RhdGUoY29sbGVjdGlvbkNvbmZpZywgc3RhdGUpO1xuICBjb25zdCBmb3JtYXRJbmZvID0gZ2V0Q29sbGVjdGlvbkZvcm1hdChwcm9wcy5jb25maWcsIHByb3BzLmNvbGxlY3Rpb24pO1xuICBjb25zdCBiYXNlUGF0aCA9IGdldENvbGxlY3Rpb25JdGVtUGF0aChwcm9wcy5jb25maWcsIHByb3BzLmNvbGxlY3Rpb24sIHNsdWcpO1xuICBjb25zdCBbY3JlYXRlUmVzdWx0LCBfY3JlYXRlSXRlbSwgcmVzZXRDcmVhdGVJdGVtU3RhdGVdID0gdXNlVXBzZXJ0SXRlbSh7XG4gICAgc3RhdGUsXG4gICAgYmFzZVBhdGgsXG4gICAgaW5pdGlhbEZpbGVzOiB1bmRlZmluZWQsXG4gICAgY29uZmlnOiBwcm9wcy5jb25maWcsXG4gICAgc2NoZW1hOiBjb2xsZWN0aW9uQ29uZmlnLnNjaGVtYSxcbiAgICBmb3JtYXQ6IGZvcm1hdEluZm8sXG4gICAgY3VycmVudExvY2FsVHJlZUtleTogdW5kZWZpbmVkLFxuICAgIHNsdWc6IHtcbiAgICAgIGZpZWxkOiBjb2xsZWN0aW9uQ29uZmlnLnNsdWdGaWVsZCxcbiAgICAgIHZhbHVlOiBzbHVnXG4gICAgfVxuICB9KTtcbiAgY29uc3QgY3JlYXRlSXRlbSA9IHVzZUV2ZW50Q2FsbGJhY2soX2NyZWF0ZUl0ZW0pO1xuICBjb25zdCBoYXNDaGFuZ2VkID0gdXNlSGFzQ2hhbmdlZCh7XG4gICAgaW5pdGlhbFN0YXRlLFxuICAgIHNjaGVtYSxcbiAgICBzdGF0ZSxcbiAgICBzbHVnRmllbGQ6IGNvbGxlY3Rpb25Db25maWcuc2x1Z0ZpZWxkXG4gIH0pO1xuICBjb25zdCBoYXNDcmVhdGVkID0gY3JlYXRlUmVzdWx0LmtpbmQgPT09ICd1cGRhdGVkJyB8fCBjcmVhdGVSZXN1bHQua2luZCA9PT0gJ2xvYWRpbmcnO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGtleSA9IFsnY29sbGVjdGlvbi1jcmVhdGUnLCBwcm9wcy5jb2xsZWN0aW9uLCAuLi4ocHJvcHMuZHVwbGljYXRlU2x1ZyA/IFtwcm9wcy5kdXBsaWNhdGVTbHVnXSA6IFtdKV07XG4gICAgaWYgKGhhc0NoYW5nZWQgJiYgIWhhc0NyZWF0ZWQpIHtcbiAgICAgIGNvbnN0IHNlcmlhbGl6ZWQgPSBzZXJpYWxpemVFbnRyeVRvRmlsZXMoe1xuICAgICAgICBiYXNlUGF0aCxcbiAgICAgICAgY29uZmlnOiBwcm9wcy5jb25maWcsXG4gICAgICAgIGZvcm1hdDogZm9ybWF0SW5mbyxcbiAgICAgICAgc2NoZW1hOiBjb2xsZWN0aW9uQ29uZmlnLnNjaGVtYSxcbiAgICAgICAgc2x1Zzoge1xuICAgICAgICAgIGZpZWxkOiBjb2xsZWN0aW9uQ29uZmlnLnNsdWdGaWVsZCxcbiAgICAgICAgICB2YWx1ZTogc2x1Z1xuICAgICAgICB9LFxuICAgICAgICBzdGF0ZVxuICAgICAgfSk7XG4gICAgICBjb25zdCBmaWxlcyA9IG5ldyBNYXAoc2VyaWFsaXplZC5tYXAoeCA9PiBbeC5wYXRoLCB4LmNvbnRlbnRzXSkpO1xuICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgc2x1ZyxcbiAgICAgICAgZmlsZXMsXG4gICAgICAgIHNhdmVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIHZlcnNpb246IDFcbiAgICAgIH07XG4gICAgICBzZXREcmFmdChrZXksIGRhdGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWxEcmFmdChrZXkpO1xuICAgIH1cbiAgfSwgW2NvbGxlY3Rpb25Db25maWcsIHNsdWcsIHN0YXRlLCBoYXNDaGFuZ2VkLCBwcm9wcy5kdXBsaWNhdGVTbHVnLCBwcm9wcy5jb2xsZWN0aW9uLCBwcm9wcy5jb25maWcsIGJhc2VQYXRoLCBmb3JtYXRJbmZvLCBoYXNDcmVhdGVkXSk7XG4gIGxldCBjb2xsZWN0aW9uUGF0aCA9IGAke3Byb3BzLmJhc2VQYXRofS9jb2xsZWN0aW9uLyR7ZW5jb2RlVVJJQ29tcG9uZW50KHByb3BzLmNvbGxlY3Rpb24pfWA7XG4gIGNvbnN0IGN1cnJlbnRTbHVnID0gY3JlYXRlUmVzdWx0LmtpbmQgPT09ICd1cGRhdGVkJyB8fCBjcmVhdGVSZXN1bHQua2luZCA9PT0gJ2xvYWRpbmcnID8gc2x1ZyA6IHVuZGVmaW5lZDtcbiAgY29uc3Qgc2x1Z0luZm8gPSB1c2VTbHVnRmllbGRJbmZvKHByb3BzLmNvbGxlY3Rpb24sIGN1cnJlbnRTbHVnKTtcbiAgY29uc3Qgb25DcmVhdGUgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKGNyZWF0ZVJlc3VsdC5raW5kID09PSAnbG9hZGluZycpIHJldHVybjtcbiAgICBpZiAoIWNsaWVudFNpZGVWYWxpZGF0ZVByb3Aoc2NoZW1hLCBzdGF0ZSwgc2x1Z0luZm8pKSB7XG4gICAgICBzZXRGb3JjZVZhbGlkYXRpb24odHJ1ZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChhd2FpdCBjcmVhdGVJdGVtKCkpIHtcbiAgICAgIGNvbnN0IHNsdWcgPSBnZXRTbHVnRnJvbVN0YXRlKGNvbGxlY3Rpb25Db25maWcsIHN0YXRlKTtcbiAgICAgIHJvdXRlci5wdXNoKGAke2NvbGxlY3Rpb25QYXRofS9pdGVtLyR7ZW5jb2RlVVJJQ29tcG9uZW50KHNsdWcpfWApO1xuICAgICAgdG9hc3RRdWV1ZS5wb3NpdGl2ZSgnRW50cnkgY3JlYXRlZCcsIHtcbiAgICAgICAgdGltZW91dDogNTAwMFxuICAgICAgfSk7IC8vIFRPRE86IGwxMG5cbiAgICB9XG4gIH07XG5cbiAgLy8gbm90ZSB3ZSdyZSBzdGlsbCBcImxvYWRpbmdcIiB3aGVuIGl0J3MgYWxyZWFkeSBiZWVuIGNyZWF0ZWRcbiAgLy8gc2luY2Ugd2UncmUgd2FpdGluZyB0byBnbyB0byB0aGUgaXRlbSBwYWdlXG4gIGNvbnN0IGlzTG9hZGluZyA9IGNyZWF0ZVJlc3VsdC5raW5kID09PSAnbG9hZGluZycgfHwgY3JlYXRlUmVzdWx0LmtpbmQgPT09ICd1cGRhdGVkJztcbiAgY29uc3QgZm9ybUlEID0gJ2l0ZW0tY3JlYXRlLWZvcm0nO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeHMoRnJhZ21lbnQsIHtcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3hzKFBhZ2VSb290LCB7XG4gICAgICBjb250YWluZXJXaWR0aDogY29udGFpbmVyV2lkdGhGb3JFbnRyeUxheW91dChjb2xsZWN0aW9uQ29uZmlnKSxcbiAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeHMoUGFnZUhlYWRlciwge1xuICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3hzKEJyZWFkY3J1bWJzLCB7XG4gICAgICAgICAgc2l6ZTogXCJtZWRpdW1cIixcbiAgICAgICAgICBmbGV4OiB0cnVlLFxuICAgICAgICAgIG1pbldpZHRoOiAwLFxuICAgICAgICAgIG9uQWN0aW9uOiBrZXkgPT4ge1xuICAgICAgICAgICAgaWYgKGtleSA9PT0gJ2NvbGxlY3Rpb24nKSB7XG4gICAgICAgICAgICAgIHJvdXRlci5wdXNoKGNvbGxlY3Rpb25QYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChJdGVtLCB7XG4gICAgICAgICAgICBjaGlsZHJlbjogY29sbGVjdGlvbkNvbmZpZy5sYWJlbFxuICAgICAgICAgIH0sIFwiY29sbGVjdGlvblwiKSwgLyojX19QVVJFX18qL2pzeChJdGVtLCB7XG4gICAgICAgICAgICBjaGlsZHJlbjogc3RyaW5nRm9ybWF0dGVyLmZvcm1hdCgnYWRkJylcbiAgICAgICAgICB9LCBcImN1cnJlbnRcIildXG4gICAgICAgIH0pLCBpc0xvYWRpbmcgJiYgLyojX19QVVJFX18qL2pzeChQcm9ncmVzc0NpcmNsZSwge1xuICAgICAgICAgIFwiYXJpYS1sYWJlbFwiOiBcIkNyZWF0aW5nIGVudHJ5XCIsXG4gICAgICAgICAgaXNJbmRldGVybWluYXRlOiB0cnVlLFxuICAgICAgICAgIHNpemU6IFwic21hbGxcIlxuICAgICAgICB9KSwgLyojX19QVVJFX18qL2pzeHMoVG9vbHRpcFRyaWdnZXIsIHtcbiAgICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goQnV0dG9uLCB7XG4gICAgICAgICAgICBwcm9taW5lbmNlOiBcImxvd1wiLFxuICAgICAgICAgICAgXCJhcmlhLWxhYmVsXCI6IFwiUmVzZXRcIixcbiAgICAgICAgICAgIG9uUHJlc3M6ICgpID0+IHtcbiAgICAgICAgICAgICAgc2V0U3RhdGUoaW5pdGlhbFN0YXRlKTtcbiAgICAgICAgICAgICAgc2V0Rm9yY2VWYWxpZGF0aW9uKGZhbHNlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChJY29uLCB7XG4gICAgICAgICAgICAgIHNyYzogaGlzdG9yeUljb25cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goVG9vbHRpcCwge1xuICAgICAgICAgICAgY2hpbGRyZW46IFwiUmVzZXRcIlxuICAgICAgICAgIH0pXVxuICAgICAgICB9KSwgLyojX19QVVJFX18qL2pzeChCdXR0b24sIHtcbiAgICAgICAgICBpc0Rpc2FibGVkOiBpc0xvYWRpbmcsXG4gICAgICAgICAgcHJvbWluZW5jZTogXCJoaWdoXCIsXG4gICAgICAgICAgdHlwZTogXCJzdWJtaXRcIixcbiAgICAgICAgICBmb3JtOiBmb3JtSUQsXG4gICAgICAgICAgbWFyZ2luU3RhcnQ6IFwiYXV0b1wiLFxuICAgICAgICAgIGNoaWxkcmVuOiBzdHJpbmdGb3JtYXR0ZXIuZm9ybWF0KCdjcmVhdGUnKVxuICAgICAgICB9KV1cbiAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4cyhGbGV4LCB7XG4gICAgICAgIGlkOiBmb3JtSUQsXG4gICAgICAgIGVsZW1lbnRUeXBlOiBcImZvcm1cIixcbiAgICAgICAgb25TdWJtaXQ6IGV2ZW50ID0+IHtcbiAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ICE9PSBldmVudC5jdXJyZW50VGFyZ2V0KSByZXR1cm47XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBvbkNyZWF0ZSgpO1xuICAgICAgICB9LFxuICAgICAgICBkaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgICAgIGdhcDogXCJ4eGxhcmdlXCIsXG4gICAgICAgIGhlaWdodDogXCIxMDAlXCIsXG4gICAgICAgIG1pbkhlaWdodDogMCxcbiAgICAgICAgbWluV2lkdGg6IDAsXG4gICAgICAgIGNoaWxkcmVuOiBbY3JlYXRlUmVzdWx0LmtpbmQgPT09ICdlcnJvcicgJiYgLyojX19QVVJFX18qL2pzeChOb3RpY2UsIHtcbiAgICAgICAgICB0b25lOiBcImNyaXRpY2FsXCIsXG4gICAgICAgICAgY2hpbGRyZW46IGNyZWF0ZVJlc3VsdC5lcnJvci5tZXNzYWdlXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KEZvcm1Gb3JFbnRyeSwge1xuICAgICAgICAgIHByZXZpZXdQcm9wczogcHJldmlld1Byb3BzLFxuICAgICAgICAgIGZvcmNlVmFsaWRhdGlvbjogZm9yY2VWYWxpZGF0aW9uLFxuICAgICAgICAgIGVudHJ5TGF5b3V0OiBjb2xsZWN0aW9uQ29uZmlnLmVudHJ5TGF5b3V0LFxuICAgICAgICAgIGZvcm1hdEluZm86IGZvcm1hdEluZm8sXG4gICAgICAgICAgc2x1Z0ZpZWxkOiBzbHVnSW5mb1xuICAgICAgICB9KV1cbiAgICAgIH0pXVxuICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KERpYWxvZ0NvbnRhaW5lclxuICAgIC8vIGlkZWFsbHkgdGhpcyB3b3VsZCBiZSBhIHBvcG92ZXIgb24gZGVza3RvcCBidXQgdXNpbmcgYSBEaWFsb2dUcmlnZ2VyXG4gICAgLy8gd291bGRuJ3Qgd29yayBzaW5jZSB0aGlzIGRvZXNuJ3Qgb3BlbiBvbiBjbGljayBidXQgYWZ0ZXIgZG9pbmcgYVxuICAgIC8vIG5ldHdvcmsgcmVxdWVzdCBhbmQgaXQgZmFpbGluZyBhbmQgbWFudWFsbHkgd2lyaW5nIGFib3V0IGEgcG9wb3ZlclxuICAgIC8vIGFuZCBtb2RhbCB3b3VsZCBiZSBhIHBhaW5cbiAgICAsIHtcbiAgICAgIG9uRGlzbWlzczogcmVzZXRDcmVhdGVJdGVtU3RhdGUsXG4gICAgICBjaGlsZHJlbjogY3JlYXRlUmVzdWx0LmtpbmQgPT09ICduZWVkcy1uZXctYnJhbmNoJyAmJiAvKiNfX1BVUkVfXyovanN4KENyZWF0ZUJyYW5jaER1cmluZ1VwZGF0ZURpYWxvZywge1xuICAgICAgICBicmFuY2hPaWQ6IGJhc2VDb21taXQsXG4gICAgICAgIG9uQ3JlYXRlOiBhc3luYyBuZXdCcmFuY2ggPT4ge1xuICAgICAgICAgIHJvdXRlci5wdXNoKGAva2V5c3RhdGljL2JyYW5jaC8ke2VuY29kZVVSSUNvbXBvbmVudChuZXdCcmFuY2gpfS9jb2xsZWN0aW9uLyR7ZW5jb2RlVVJJQ29tcG9uZW50KHByb3BzLmNvbGxlY3Rpb24pfS9jcmVhdGVgKTtcbiAgICAgICAgICBpZiAoYXdhaXQgY3JlYXRlSXRlbSh7XG4gICAgICAgICAgICBicmFuY2g6IG5ld0JyYW5jaCxcbiAgICAgICAgICAgIHNoYTogYmFzZUNvbW1pdFxuICAgICAgICAgIH0pKSB7XG4gICAgICAgICAgICBjb25zdCBzbHVnID0gZ2V0U2x1Z0Zyb21TdGF0ZShjb2xsZWN0aW9uQ29uZmlnLCBzdGF0ZSk7XG4gICAgICAgICAgICByb3V0ZXIucHVzaChgL2tleXN0YXRpYy9icmFuY2gvJHtlbmNvZGVVUklDb21wb25lbnQobmV3QnJhbmNoKX0vY29sbGVjdGlvbi8ke2VuY29kZVVSSUNvbXBvbmVudChwcm9wcy5jb2xsZWN0aW9uKX0vaXRlbS8ke2VuY29kZVVSSUNvbXBvbmVudChzbHVnKX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlYXNvbjogY3JlYXRlUmVzdWx0LnJlYXNvbixcbiAgICAgICAgb25EaXNtaXNzOiByZXNldENyZWF0ZUl0ZW1TdGF0ZVxuICAgICAgfSlcbiAgICB9KSwgLyojX19QVVJFX18qL2pzeChEaWFsb2dDb250YWluZXJcbiAgICAvLyBpZGVhbGx5IHRoaXMgd291bGQgYmUgYSBwb3BvdmVyIG9uIGRlc2t0b3AgYnV0IHVzaW5nIGEgRGlhbG9nVHJpZ2dlclxuICAgIC8vIHdvdWxkbid0IHdvcmsgc2luY2UgdGhpcyBkb2Vzbid0IG9wZW4gb24gY2xpY2sgYnV0IGFmdGVyIGRvaW5nIGFcbiAgICAvLyBuZXR3b3JrIHJlcXVlc3QgYW5kIGl0IGZhaWxpbmcgYW5kIG1hbnVhbGx5IHdpcmluZyBhYm91dCBhIHBvcG92ZXJcbiAgICAvLyBhbmQgbW9kYWwgd291bGQgYmUgYSBwYWluXG4gICAgLCB7XG4gICAgICBvbkRpc21pc3M6IHJlc2V0Q3JlYXRlSXRlbVN0YXRlLFxuICAgICAgY2hpbGRyZW46IGNyZWF0ZVJlc3VsdC5raW5kID09PSAnbmVlZHMtZm9yaycgJiYgaXNHaXRIdWJDb25maWcocHJvcHMuY29uZmlnKSAmJiAvKiNfX1BVUkVfXyovanN4KEZvcmtSZXBvRGlhbG9nLCB7XG4gICAgICAgIG9uQ3JlYXRlOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgaWYgKGF3YWl0IGNyZWF0ZUl0ZW0oKSkge1xuICAgICAgICAgICAgY29uc3Qgc2x1ZyA9IGdldFNsdWdGcm9tU3RhdGUoY29sbGVjdGlvbkNvbmZpZywgc3RhdGUpO1xuICAgICAgICAgICAgcm91dGVyLnB1c2goYCR7Y29sbGVjdGlvblBhdGh9L2l0ZW0vJHtlbmNvZGVVUklDb21wb25lbnQoc2x1Zyl9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBvbkRpc21pc3M6IHJlc2V0Q3JlYXRlSXRlbVN0YXRlLFxuICAgICAgICBjb25maWc6IHByb3BzLmNvbmZpZ1xuICAgICAgfSlcbiAgICB9KV1cbiAgfSk7XG59XG5cbmNvbnN0IERhc2hib2FyZFNlY3Rpb24gPSAoe1xuICBjaGlsZHJlbixcbiAgdGl0bGVcbn0pID0+IHtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3hzKEZsZXgsIHtcbiAgICBlbGVtZW50VHlwZTogXCJzZWN0aW9uXCIsXG4gICAgZGlyZWN0aW9uOiBcImNvbHVtblwiLFxuICAgIGdhcDogXCJtZWRpdW1cIixcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goVGV4dCwge1xuICAgICAgY2FzaW5nOiBcInVwcGVyY2FzZVwiLFxuICAgICAgY29sb3I6IFwibmV1dHJhbFRlcnRpYXJ5XCIsXG4gICAgICBzaXplOiBcInNtYWxsXCIsXG4gICAgICB3ZWlnaHQ6IFwiYm9sZFwiLFxuICAgICAgZWxlbWVudFR5cGU6IFwiaDJcIixcbiAgICAgIGNoaWxkcmVuOiB0aXRsZVxuICAgIH0pLCBjaGlsZHJlbl1cbiAgfSk7XG59O1xuY29uc3QgRklMTF9DT0xTID0gJ2ZpbGwnO1xuY29uc3QgRGFzaGJvYXJkR3JpZCA9IHByb3BzID0+IHtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogY3NzKHtcbiAgICAgIGRpc3BsYXk6ICdncmlkJyxcbiAgICAgIGdhcDogdG9rZW5TY2hlbWEuc2l6ZS5zcGFjZS5sYXJnZSxcbiAgICAgIGdyaWRBdXRvUm93czogdG9rZW5TY2hlbWEuc2l6ZS5lbGVtZW50LnhsYXJnZSxcbiAgICAgIGdyaWRUZW1wbGF0ZUNvbHVtbnM6IGBbJHtGSUxMX0NPTFN9LXN0YXJ0XSAxZnIgWyR7RklMTF9DT0xTfS1lbmRdYCxcbiAgICAgIFtjb250YWluZXJRdWVyaWVzLmFib3ZlLm1vYmlsZV06IHtcbiAgICAgICAgZ3JpZFRlbXBsYXRlQ29sdW1uczogYFske0ZJTExfQ09MU30tc3RhcnRdIDFmciAxZnIgWyR7RklMTF9DT0xTfS1lbmRdYFxuICAgICAgfSxcbiAgICAgIFtjb250YWluZXJRdWVyaWVzLmFib3ZlLnRhYmxldF06IHtcbiAgICAgICAgZ3JpZFRlbXBsYXRlQ29sdW1uczogYFske0ZJTExfQ09MU30tc3RhcnRdIDFmciAxZnIgMWZyIFske0ZJTExfQ09MU30tZW5kXWBcbiAgICAgIH1cbiAgICB9KSxcbiAgICAuLi5wcm9wc1xuICB9KTtcbn07XG5jb25zdCBEYXNoYm9hcmRDYXJkID0gcHJvcHMgPT4ge1xuICBjb25zdCByZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IHtcbiAgICBsaW5rUHJvcHNcbiAgfSA9IHVzZUxpbmsocHJvcHMsIHJlZik7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhGbGV4LCB7XG4gICAgYWxpZ25JdGVtczogXCJjZW50ZXJcIixcbiAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiY2FudmFzXCIsXG4gICAgcGFkZGluZzogXCJsYXJnZVwiLFxuICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG4gICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4cyhGbGV4LCB7XG4gICAgICBkaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgICBnYXA6IFwibWVkaXVtXCIsXG4gICAgICBmbGV4OiB0cnVlLFxuICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEhlYWRpbmcsIHtcbiAgICAgICAgZWxlbWVudFR5cGU6IFwiaDNcIixcbiAgICAgICAgc2l6ZTogXCJzbWFsbFwiLFxuICAgICAgICB0cnVuY2F0ZTogdHJ1ZSxcbiAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goXCJhXCIsIHtcbiAgICAgICAgICByZWY6IHJlZixcbiAgICAgICAgICBocmVmOiBwcm9wcy5ocmVmLFxuICAgICAgICAgIC4uLmxpbmtQcm9wcyxcbiAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoY3NzKHtcbiAgICAgICAgICAgIGNvbG9yOiB0b2tlblNjaGVtYS5jb2xvci5mb3JlZ3JvdW5kLm5ldXRyYWwsXG4gICAgICAgICAgICBvdXRsaW5lOiAnbm9uZScsXG4gICAgICAgICAgICAnJjpob3Zlcic6IHtcbiAgICAgICAgICAgICAgY29sb3I6IHRva2VuU2NoZW1hLmNvbG9yLmZvcmVncm91bmQubmV1dHJhbEVtcGhhc2lzLFxuICAgICAgICAgICAgICAnOjpiZWZvcmUnOiB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiB0b2tlblNjaGVtYS5jb2xvci5hbGlhcy5iYWNrZ3JvdW5kSWRsZSxcbiAgICAgICAgICAgICAgICBib3JkZXJDb2xvcjogdG9rZW5TY2hlbWEuY29sb3IuYm9yZGVyLm5ldXRyYWxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICcmOmFjdGl2ZSc6IHtcbiAgICAgICAgICAgICAgJzo6YmVmb3JlJzoge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogdG9rZW5TY2hlbWEuY29sb3IuYWxpYXMuYmFja2dyb3VuZEhvdmVyZWQsXG4gICAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6IHRva2VuU2NoZW1hLmNvbG9yLmFsaWFzLmJvcmRlckhvdmVyZWRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICcmOmZvY3VzLXZpc2libGU6OmJlZm9yZSc6IHtcbiAgICAgICAgICAgICAgb3V0bGluZTogYCR7dG9rZW5TY2hlbWEuc2l6ZS5hbGlhcy5mb2N1c1Jpbmd9IHNvbGlkICR7dG9rZW5TY2hlbWEuY29sb3IuYWxpYXMuZm9jdXNSaW5nfWAsXG4gICAgICAgICAgICAgIG91dGxpbmVPZmZzZXQ6IHRva2VuU2NoZW1hLnNpemUuYWxpYXMuZm9jdXNSaW5nR2FwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gZmlsbCB0aGUgYXZhaWxhYmxlIHNwYWNlIHNvIHRoYXQgdGhlIGNhcmQgaXMgY2xpY2thYmxlXG4gICAgICAgICAgICAnOjpiZWZvcmUnOiB7XG4gICAgICAgICAgICAgIGJvcmRlcjogYCR7dG9rZW5TY2hlbWEuc2l6ZS5ib3JkZXIucmVndWxhcn0gc29saWQgJHt0b2tlblNjaGVtYS5jb2xvci5ib3JkZXIubXV0ZWR9YCxcbiAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiB0b2tlblNjaGVtYS5zaXplLnJhZGl1cy5tZWRpdW0sXG4gICAgICAgICAgICAgIGNvbnRlbnQ6ICdcIlwiJyxcbiAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICAgIGluc2V0OiAwLFxuICAgICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2l0aW9uKFsnYmFja2dyb3VuZC1jb2xvcicsICdib3JkZXItY29sb3InXSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSksXG4gICAgICAgICAgY2hpbGRyZW46IHByb3BzLmxhYmVsXG4gICAgICAgIH0pXG4gICAgICB9KSwgcHJvcHMuY2hpbGRyZW5dXG4gICAgfSksIHByb3BzLmVuZEVsZW1lbnRdXG4gIH0pO1xufTtcblxuZnVuY3Rpb24gdXNlTG9jYWxpemVkU3RyaW5nKCkge1xuICBsZXQgc3RyaW5nRm9ybWF0dGVyID0gdXNlTG9jYWxpemVkU3RyaW5nRm9ybWF0dGVyKGwxMG5NZXNzYWdlcyk7XG4gIHJldHVybiBzdHJpbmdGb3JtYXR0ZXI7XG59XG5cbmZ1bmN0aW9uIEJyYW5jaFNlY3Rpb24ocHJvcHMpIHtcbiAgbGV0IGJyYW5jaEluZm8gPSB1c2VCcmFuY2hJbmZvKCk7XG4gIGxldCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgbGV0IGxvY2FsaXplZFN0cmluZyA9IHVzZUxvY2FsaXplZFN0cmluZygpO1xuICBpZiAoaXNMb2NhbENvbmZpZyhwcm9wcy5jb25maWcpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgbGV0IHJlcG9VUkwgPSBnZXRSZXBvVXJsKGJyYW5jaEluZm8pO1xuICBsZXQgaXNEZWZhdWx0QnJhbmNoID0gYnJhbmNoSW5mby5jdXJyZW50QnJhbmNoID09PSBicmFuY2hJbmZvLmRlZmF1bHRCcmFuY2g7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhEYXNoYm9hcmRTZWN0aW9uLCB7XG4gICAgdGl0bGU6IGxvY2FsaXplZFN0cmluZy5mb3JtYXQoJ2N1cnJlbnRCcmFuY2gnKSxcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3hzKEZsZXgsIHtcbiAgICAgIGFsaWduSXRlbXM6IFwiY2VudGVyXCIsXG4gICAgICBnYXA6IFwicmVndWxhclwiLFxuICAgICAgYm9yZGVyOiBcIm11dGVkXCIsXG4gICAgICBib3JkZXJSYWRpdXM6IFwibWVkaXVtXCIsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiY2FudmFzXCIsXG4gICAgICBwYWRkaW5nOiBcImxhcmdlXCIsXG4gICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goSWNvbiwge1xuICAgICAgICBzcmM6IGdpdEJyYW5jaEljb24sXG4gICAgICAgIGNvbG9yOiBcIm5ldXRyYWxUZXJ0aWFyeVwiXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeChUZXh0LCB7XG4gICAgICAgIHNpemU6IFwibWVkaXVtXCIsXG4gICAgICAgIHdlaWdodDogXCJzZW1pYm9sZFwiLFxuICAgICAgICBjaGlsZHJlbjogYnJhbmNoSW5mby5jdXJyZW50QnJhbmNoXG4gICAgICB9KV1cbiAgICB9KSwgLyojX19QVVJFX18qL2pzeHMoRmxleCwge1xuICAgICAgZ2FwOiBcInJlZ3VsYXJcIixcbiAgICAgIHdyYXA6IHRydWUsXG4gICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3hzKERpYWxvZ1RyaWdnZXIsIHtcbiAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4cyhBY3Rpb25CdXR0b24sIHtcbiAgICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goSWNvbiwge1xuICAgICAgICAgICAgc3JjOiBnaXRCcmFuY2hQbHVzSWNvblxuICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBsb2NhbGl6ZWRTdHJpbmcuZm9ybWF0KCduZXdCcmFuY2gnKVxuICAgICAgICAgIH0pXVxuICAgICAgICB9KSwgY2xvc2UgPT4gLyojX19QVVJFX18qL2pzeChDcmVhdGVCcmFuY2hEaWFsb2csIHtcbiAgICAgICAgICBvbkRpc21pc3M6IGNsb3NlLFxuICAgICAgICAgIG9uQ3JlYXRlOiBicmFuY2hOYW1lID0+IHtcbiAgICAgICAgICAgIGNsb3NlKCk7XG4gICAgICAgICAgICByb3V0ZXIucHVzaChyb3V0ZXIuaHJlZi5yZXBsYWNlKC9cXC9icmFuY2hcXC9bXi9dKy8sICcvYnJhbmNoLycgKyBlbmNvZGVVUklDb21wb25lbnQoYnJhbmNoTmFtZSkpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXVxuICAgICAgfSksICFpc0RlZmF1bHRCcmFuY2ggJiYgKGJyYW5jaEluZm8ucHVsbFJlcXVlc3ROdW1iZXIgPT09IHVuZGVmaW5lZCA/IC8qI19fUFVSRV9fKi9qc3hzKEFjdGlvbkJ1dHRvbiwge1xuICAgICAgICBocmVmOiBgJHtyZXBvVVJMfS9wdWxsL25ldy8ke2JyYW5jaEluZm8uY3VycmVudEJyYW5jaH1gLFxuICAgICAgICB0YXJnZXQ6IFwiX2JsYW5rXCIsXG4gICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChJY29uLCB7XG4gICAgICAgICAgc3JjOiBnaXRQdWxsUmVxdWVzdEljb25cbiAgICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goVGV4dCwge1xuICAgICAgICAgIGNoaWxkcmVuOiBsb2NhbGl6ZWRTdHJpbmcuZm9ybWF0KCdjcmVhdGVQdWxsUmVxdWVzdCcpXG4gICAgICAgIH0pXVxuICAgICAgfSkgOiAvKiNfX1BVUkVfXyovanN4cyhBY3Rpb25CdXR0b24sIHtcbiAgICAgICAgaHJlZjogYCR7cmVwb1VSTH0vcHVsbC8ke2JyYW5jaEluZm8ucHVsbFJlcXVlc3ROdW1iZXJ9YCxcbiAgICAgICAgdGFyZ2V0OiBcIl9ibGFua1wiLFxuICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goSWNvbiwge1xuICAgICAgICAgIHNyYzogZ2l0UHVsbFJlcXVlc3RJY29uXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4cyhUZXh0LCB7XG4gICAgICAgICAgY2hpbGRyZW46IFtcIlB1bGwgcmVxdWVzdCAjXCIsIGJyYW5jaEluZm8ucHVsbFJlcXVlc3ROdW1iZXJdXG4gICAgICAgIH0pXVxuICAgICAgfSkpXVxuICAgIH0pXVxuICB9KTtcbn1cblxuZnVuY3Rpb24gRGFzaGJvYXJkQ2FyZHMoKSB7XG4gIGNvbnN0IG5hdkl0ZW1zID0gdXNlTmF2SXRlbXMoKTtcbiAgY29uc3QgaGFzU2VjdGlvbnMgPSBuYXZJdGVtcy5zb21lKGl0ZW0gPT4gJ2NoaWxkcmVuJyBpbiBpdGVtKTtcbiAgY29uc3QgaXRlbXMgPSBuYXZJdGVtcy5tYXAoaXRlbSA9PiByZW5kZXJJdGVtT3JHcm91cChpdGVtKSk7XG4gIHJldHVybiBoYXNTZWN0aW9ucyA/IC8qI19fUFVSRV9fKi9qc3goRnJhZ21lbnQsIHtcbiAgICBjaGlsZHJlbjogaXRlbXNcbiAgfSkgOiAvKiNfX1BVUkVfXyovanN4KERhc2hib2FyZFNlY3Rpb24sIHtcbiAgICB0aXRsZTogXCJDb250ZW50XCIsXG4gICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goRGFzaGJvYXJkR3JpZCwge1xuICAgICAgY2hpbGRyZW46IGl0ZW1zXG4gICAgfSlcbiAgfSk7XG59XG5sZXQgZGl2aWRlckNvdW50ID0gMDtcbmZ1bmN0aW9uIHJlbmRlckl0ZW1Pckdyb3VwKGl0ZW1Pckdyb3VwKSB7XG4gIGlmICgnaXNEaXZpZGVyJyBpbiBpdGVtT3JHcm91cCkge1xuICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KEZsZXgsIHtcbiAgICAgIGdyaWRDb2x1bW46IEZJTExfQ09MUyxcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KERpdmlkZXIsIHtcbiAgICAgICAgYWxpZ25TZWxmOiBcImNlbnRlclwiLFxuICAgICAgICBzaXplOiBcIm1lZGl1bVwiLFxuICAgICAgICB3aWR0aDogXCJhbGlhcy5zaW5nbGVMaW5lV2lkdGhcIlxuICAgICAgfSlcbiAgICB9LCBkaXZpZGVyQ291bnQrKyk7XG4gIH1cbiAgaWYgKCdjaGlsZHJlbicgaW4gaXRlbU9yR3JvdXApIHtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChEYXNoYm9hcmRTZWN0aW9uLCB7XG4gICAgICB0aXRsZTogaXRlbU9yR3JvdXAudGl0bGUsXG4gICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChEYXNoYm9hcmRHcmlkLCB7XG4gICAgICAgIGNoaWxkcmVuOiBpdGVtT3JHcm91cC5jaGlsZHJlbi5tYXAoY2hpbGQgPT4gcmVuZGVySXRlbU9yR3JvdXAoY2hpbGQpKVxuICAgICAgfSlcbiAgICB9LCBpdGVtT3JHcm91cC50aXRsZSk7XG4gIH1cbiAgbGV0IGNoYW5nZUVsZW1lbnQgPSAoKCkgPT4ge1xuICAgIGlmICghaXRlbU9yR3JvdXAuY2hhbmdlZCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGVvZiBpdGVtT3JHcm91cC5jaGFuZ2VkID09PSAnbnVtYmVyJyA/IC8qI19fUFVSRV9fKi9qc3goQmFkZ2UsIHtcbiAgICAgIHRvbmU6IFwiYWNjZW50XCIsXG4gICAgICBtYXJnaW5TdGFydDogXCJhdXRvXCIsXG4gICAgICBjaGlsZHJlbjogcGx1cmFsaXplKGl0ZW1Pckdyb3VwLmNoYW5nZWQsIHtcbiAgICAgICAgc2luZ3VsYXI6ICdjaGFuZ2UnLFxuICAgICAgICBwbHVyYWw6ICdjaGFuZ2VzJ1xuICAgICAgfSlcbiAgICB9KSA6IC8qI19fUFVSRV9fKi9qc3goQmFkZ2UsIHtcbiAgICAgIHRvbmU6IFwiYWNjZW50XCIsXG4gICAgICBjaGlsZHJlbjogXCJDaGFuZ2VkXCJcbiAgICB9KTtcbiAgfSkoKTtcbiAgbGV0IGVuZEVsZW1lbnQgPSAoKCkgPT4ge1xuICAgIC8vIGVudHJ5IGNvdW50cyBhcmUgb25seSBhdmFpbGFibGUgZm9yIGNvbGxlY3Rpb25zXG4gICAgaWYgKHR5cGVvZiBpdGVtT3JHcm91cC5lbnRyeUNvdW50ICE9PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuIGNoYW5nZUVsZW1lbnQ7XG4gICAgfVxuICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhGbGV4LCB7XG4gICAgICBnYXA6IFwibWVkaXVtXCIsXG4gICAgICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLFxuICAgICAgY2hpbGRyZW46IFtjaGFuZ2VFbGVtZW50LCAvKiNfX1BVUkVfXyovanN4KEFjdGlvbkJ1dHRvbiwge1xuICAgICAgICBcImFyaWEtbGFiZWxcIjogXCJBZGRcIixcbiAgICAgICAgaHJlZjogYCR7aXRlbU9yR3JvdXAuaHJlZn0vY3JlYXRlYCxcbiAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goSWNvbiwge1xuICAgICAgICAgIHNyYzogcGx1c0ljb25cbiAgICAgICAgfSlcbiAgICAgIH0pXVxuICAgIH0pO1xuICB9KSgpO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChEYXNoYm9hcmRDYXJkLCB7XG4gICAgbGFiZWw6IGl0ZW1Pckdyb3VwLmxhYmVsLFxuICAgIGhyZWY6IGl0ZW1Pckdyb3VwLmhyZWYsXG4gICAgZW5kRWxlbWVudDogZW5kRWxlbWVudCxcbiAgICBjaGlsZHJlbjogdHlwZW9mIGl0ZW1Pckdyb3VwLmVudHJ5Q291bnQgPT09ICdudW1iZXInID8gLyojX19QVVJFX18qL2pzeChUZXh0LCB7XG4gICAgICBjb2xvcjogXCJuZXV0cmFsU2Vjb25kYXJ5XCIsXG4gICAgICBjaGlsZHJlbjogcGx1cmFsaXplKGl0ZW1Pckdyb3VwLmVudHJ5Q291bnQsIHtcbiAgICAgICAgc2luZ3VsYXI6ICdlbnRyeScsXG4gICAgICAgIHBsdXJhbDogJ2VudHJpZXMnXG4gICAgICB9KVxuICAgIH0pIDogbnVsbFxuICB9LCBpdGVtT3JHcm91cC5rZXkpO1xufVxuXG5mdW5jdGlvbiBEYXNoYm9hcmRQYWdlKHByb3BzKSB7XG4gIHZhciBfdmlld2VyJG5hbWU7XG4gIGNvbnN0IHN0cmluZ0Zvcm1hdHRlciA9IHVzZUxvY2FsaXplZFN0cmluZ0Zvcm1hdHRlcihsMTBuTWVzc2FnZXMpO1xuICBjb25zdCB2aWV3ZXIgPSB1c2VWaWV3ZXIoKTtcbiAgY29uc3QgY2xvdWRJbmZvID0gdXNlQ2xvdWRJbmZvKCk7XG4gIGNvbnN0IHVzZXIgPSB2aWV3ZXIgPyB7XG4gICAgbmFtZTogKF92aWV3ZXIkbmFtZSA9IHZpZXdlci5uYW1lKSAhPT0gbnVsbCAmJiBfdmlld2VyJG5hbWUgIT09IHZvaWQgMCA/IF92aWV3ZXIkbmFtZSA6IHZpZXdlci5sb2dpbixcbiAgICBhdmF0YXJVcmw6IHZpZXdlci5hdmF0YXJVcmxcbiAgfSA6IGNsb3VkSW5mbyA9PT0gbnVsbCB8fCBjbG91ZEluZm8gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNsb3VkSW5mby51c2VyO1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeHMoUGFnZVJvb3QsIHtcbiAgICBjb250YWluZXJXaWR0aDogXCJsYXJnZVwiLFxuICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChQYWdlSGVhZGVyLCB7XG4gICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChIZWFkaW5nLCB7XG4gICAgICAgIGVsZW1lbnRUeXBlOiBcImgxXCIsXG4gICAgICAgIGlkOiBcInBhZ2UtdGl0bGVcIixcbiAgICAgICAgc2l6ZTogXCJzbWFsbFwiLFxuICAgICAgICBjaGlsZHJlbjogc3RyaW5nRm9ybWF0dGVyLmZvcm1hdCgnZGFzaGJvYXJkJylcbiAgICAgIH0pXG4gICAgfSksIC8qI19fUFVSRV9fKi9qc3goUGFnZUJvZHksIHtcbiAgICAgIGlzU2Nyb2xsYWJsZTogdHJ1ZSxcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4cyhGbGV4LCB7XG4gICAgICAgIGRpcmVjdGlvbjogXCJjb2x1bW5cIixcbiAgICAgICAgZ2FwOiBcInh4bGFyZ2VcIixcbiAgICAgICAgY2hpbGRyZW46IFt1c2VyICYmIC8qI19fUFVSRV9fKi9qc3goVXNlckluZm8sIHtcbiAgICAgICAgICB1c2VyOiB1c2VyLFxuICAgICAgICAgIG1hbmFnZUFjY291bnQ6ICEhY2xvdWRJbmZvXG4gICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KEJyYW5jaFNlY3Rpb24sIHtcbiAgICAgICAgICBjb25maWc6IHByb3BzLmNvbmZpZ1xuICAgICAgICB9KSwgLyojX19QVVJFX18qL2pzeChEYXNoYm9hcmRDYXJkcywge30pXVxuICAgICAgfSlcbiAgICB9KV1cbiAgfSk7XG59XG5mdW5jdGlvbiBVc2VySW5mbyh7XG4gIHVzZXIsXG4gIG1hbmFnZUFjY291bnRcbn0pIHtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3hzKEZsZXgsIHtcbiAgICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLFxuICAgIGdhcDogXCJtZWRpdW1cIixcbiAgICBpc0hpZGRlbjoge1xuICAgICAgYmVsb3c6ICd0YWJsZXQnXG4gICAgfSxcbiAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goQXZhdGFyLCB7XG4gICAgICBzcmM6IHVzZXIuYXZhdGFyVXJsLFxuICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgc2l6ZTogXCJsYXJnZVwiXG4gICAgfSksIC8qI19fUFVSRV9fKi9qc3hzKFZTdGFjaywge1xuICAgICAgZ2FwOiBcIm1lZGl1bVwiLFxuICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4cyhIZWFkaW5nLCB7XG4gICAgICAgIHNpemU6IFwibWVkaXVtXCIsXG4gICAgICAgIGVsZW1lbnRUeXBlOiBcInBcIixcbiAgICAgICAgVU5TQUZFX3N0eWxlOiB7XG4gICAgICAgICAgZm9udFdlaWdodDogdG9rZW5TY2hlbWEudHlwb2dyYXBoeS5mb250V2VpZ2h0LmJvbGRcbiAgICAgICAgfSxcbiAgICAgICAgY2hpbGRyZW46IFtcIkhlbGxvLCBcIiwgdXNlci5uYW1lLCBcIiFcIl1cbiAgICAgIH0pLCBtYW5hZ2VBY2NvdW50ICYmIC8qI19fUFVSRV9fKi9qc3goVGV4dExpbmssIHtcbiAgICAgICAgaHJlZjogXCJodHRwczovL2tleXN0YXRpYy5jbG91ZC9hY2NvdW50XCIsXG4gICAgICAgIGNoaWxkcmVuOiBcIk1hbmFnZSBBY2NvdW50XCJcbiAgICAgIH0pXVxuICAgIH0pXVxuICB9KTtcbn1cblxuY29uc3QgTWFpblBhbmVsTGF5b3V0ID0gcHJvcHMgPT4ge1xuICBsZXQgaXNCZWxvd0Rlc2t0b3AgPSB1c2VNZWRpYVF1ZXJ5KGJyZWFrcG9pbnRRdWVyaWVzLmJlbG93LmRlc2t0b3ApO1xuICBsZXQgc2lkZWJhclN0YXRlID0gdXNlU2lkZWJhcigpO1xuICBsZXQgcmVmID0gdXNlUmVmKG51bGwpO1xuICBsZXQgY29udGV4dCA9IHVzZUNvbnRlbnRQYW5lbFN0YXRlKHJlZik7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KENvbnRlbnRQYW5lbFByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IGNvbnRleHQsXG4gICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3hzKFNwbGl0Vmlldywge1xuICAgICAgYXV0b1NhdmVJZDogXCJrZXlzdGF0aWMtYXBwLXNwbGl0LXZpZXdcIixcbiAgICAgIGlzQ29sbGFwc2VkOiBpc0JlbG93RGVza3RvcCB8fCAhc2lkZWJhclN0YXRlLmlzT3BlbixcbiAgICAgIG9uQ29sbGFwc2VDaGFuZ2U6IHNpZGViYXJTdGF0ZS50b2dnbGUsXG4gICAgICBkZWZhdWx0U2l6ZTogMjYwLFxuICAgICAgbWluU2l6ZTogMTgwLFxuICAgICAgbWF4U2l6ZTogNDAwXG4gICAgICAvLyBzdHlsZXNcbiAgICAgICxcbiAgICAgIGhlaWdodDogXCIxMDB2aFwiLFxuICAgICAgY2hpbGRyZW46IFtpc0JlbG93RGVza3RvcCA/IC8qI19fUFVSRV9fKi9qc3goU2lkZWJhckRpYWxvZywge30pIDogLyojX19QVVJFX18qL2pzeChTcGxpdFBhbmVQcmltYXJ5LCB7XG4gICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KFNpZGViYXJQYW5lbCwge30pXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeChTcGxpdFBhbmVTZWNvbmRhcnksIHtcbiAgICAgICAgcmVmOiByZWYsXG4gICAgICAgIGNoaWxkcmVuOiBwcm9wcy5jaGlsZHJlblxuICAgICAgfSldXG4gICAgfSlcbiAgfSk7XG59O1xuXG5jb25zdCBBcHBTaGVsbCA9IHByb3BzID0+IHtcbiAgY29uc3QgY29udGVudCA9IC8qI19fUFVSRV9fKi9qc3goQXBwU2hlbGxFcnJvckNvbnRleHQuQ29uc3VtZXIsIHtcbiAgICBjaGlsZHJlbjogZXJyb3IgPT4gZXJyb3IgJiYgIShlcnJvciAhPT0gbnVsbCAmJiBlcnJvciAhPT0gdm9pZCAwICYmIGVycm9yLmdyYXBoUUxFcnJvcnMuc29tZShlcnIgPT4ge1xuICAgICAgdmFyIF9lcnIkb3JpZ2luYWxFcnJvcjtcbiAgICAgIHJldHVybiAoZXJyID09PSBudWxsIHx8IGVyciA9PT0gdm9pZCAwIHx8IChfZXJyJG9yaWdpbmFsRXJyb3IgPSBlcnIub3JpZ2luYWxFcnJvcikgPT09IG51bGwgfHwgX2VyciRvcmlnaW5hbEVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZXJyJG9yaWdpbmFsRXJyb3IudHlwZSkgPT09ICdOT1RfRk9VTkQnO1xuICAgIH0pKSA/IC8qI19fUFVSRV9fKi9qc3goRW1wdHlTdGF0ZSwge1xuICAgICAgaWNvbjogYWxlcnRDaXJjbGVJY29uLFxuICAgICAgdGl0bGU6IFwiRmFpbGVkIHRvIGxvYWQgc2hlbGxcIixcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcbiAgICB9KSA6IHByb3BzLmNoaWxkcmVuXG4gIH0pO1xuICBjb25zdCBpbm5lciA9IC8qI19fUFVSRV9fKi9qc3goQ29uZmlnQ29udGV4dC5Qcm92aWRlciwge1xuICAgIHZhbHVlOiBwcm9wcy5jb25maWcsXG4gICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goQXBwU3RhdGVDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgICB2YWx1ZToge1xuICAgICAgICBiYXNlUGF0aDogcHJvcHMuYmFzZVBhdGhcbiAgICAgIH0sXG4gICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChTaWRlYmFyUHJvdmlkZXIsIHtcbiAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goTWFpblBhbmVsTGF5b3V0LCB7XG4gICAgICAgICAgY2hpbGRyZW46IGNvbnRlbnRcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSlcbiAgfSk7XG4gIGlmIChpc0dpdEh1YkNvbmZpZyhwcm9wcy5jb25maWcpIHx8IHByb3BzLmNvbmZpZy5zdG9yYWdlLmtpbmQgPT09ICdjbG91ZCcpIHtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChHaXRIdWJBcHBTaGVsbFByb3ZpZGVyLCB7XG4gICAgICBjdXJyZW50QnJhbmNoOiBwcm9wcy5jdXJyZW50QnJhbmNoLFxuICAgICAgY29uZmlnOiBwcm9wcy5jb25maWcsXG4gICAgICBjaGlsZHJlbjogaW5uZXJcbiAgICB9KTtcbiAgfVxuICBpZiAoaXNMb2NhbENvbmZpZyhwcm9wcy5jb25maWcpKSB7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goTG9jYWxBcHBTaGVsbFByb3ZpZGVyLCB7XG4gICAgICBjb25maWc6IHByb3BzLmNvbmZpZyxcbiAgICAgIGNoaWxkcmVuOiBpbm5lclxuICAgIH0pO1xuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuZnVuY3Rpb24gU2luZ2xldG9uUGFnZSh7XG4gIHNpbmdsZXRvbixcbiAgaW5pdGlhbEZpbGVzLFxuICBpbml0aWFsU3RhdGUsXG4gIGxvY2FsVHJlZUtleSxcbiAgY29uZmlnLFxuICBkcmFmdFxufSkge1xuICB2YXIgX2dldFBhdGhQcmVmaXgsIF9nZXRQYXRoUHJlZml4MjtcbiAgY29uc3QgW2ZvcmNlVmFsaWRhdGlvbiwgc2V0Rm9yY2VWYWxpZGF0aW9uXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3Qgc2luZ2xldG9uQ29uZmlnID0gY29uZmlnLnNpbmdsZXRvbnNbc2luZ2xldG9uXTtcbiAgY29uc3Qgc2NoZW1hID0gdXNlTWVtbygoKSA9PiBvYmplY3Qoc2luZ2xldG9uQ29uZmlnLnNjaGVtYSksIFtzaW5nbGV0b25Db25maWcuc2NoZW1hXSk7XG4gIGNvbnN0IHNpbmdsZXRvblBhdGggPSBnZXRTaW5nbGV0b25QYXRoKGNvbmZpZywgc2luZ2xldG9uKTtcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gIGNvbnN0IFt7XG4gICAgc3RhdGUsXG4gICAgbG9jYWxUcmVlS2V5OiBsb2NhbFRyZWVLZXlJblN0YXRlXG4gIH0sIHNldFN0YXRlXSA9IHVzZVN0YXRlKCgpID0+IHtcbiAgICB2YXIgX2RyYWZ0JHN0YXRlO1xuICAgIHJldHVybiB7XG4gICAgICBsb2NhbFRyZWVLZXk6IGxvY2FsVHJlZUtleSxcbiAgICAgIHN0YXRlOiAoX2RyYWZ0JHN0YXRlID0gZHJhZnQgPT09IG51bGwgfHwgZHJhZnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRyYWZ0LnN0YXRlKSAhPT0gbnVsbCAmJiBfZHJhZnQkc3RhdGUgIT09IHZvaWQgMCA/IF9kcmFmdCRzdGF0ZSA6IGluaXRpYWxTdGF0ZSA9PT0gbnVsbCA/IGdldEluaXRpYWxQcm9wc1ZhbHVlKHNjaGVtYSkgOiBpbml0aWFsU3RhdGVcbiAgICB9O1xuICB9KTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZHJhZnQgJiYgc3RhdGUgPT09IGRyYWZ0LnN0YXRlKSB7XG4gICAgICBzaG93RHJhZnRSZXN0b3JlZFRvYXN0KGRyYWZ0LnNhdmVkQXQsIGxvY2FsVHJlZUtleSAhPT0gZHJhZnQudHJlZUtleSk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgfSwgW2RyYWZ0XSk7XG4gIGlmIChsb2NhbFRyZWVLZXlJblN0YXRlICE9PSBsb2NhbFRyZWVLZXkpIHtcbiAgICBzZXRTdGF0ZSh7XG4gICAgICBsb2NhbFRyZWVLZXk6IGxvY2FsVHJlZUtleSxcbiAgICAgIHN0YXRlOiBpbml0aWFsU3RhdGUgPT09IG51bGwgPyBnZXRJbml0aWFsUHJvcHNWYWx1ZShzY2hlbWEpIDogaW5pdGlhbFN0YXRlXG4gICAgfSk7XG4gIH1cbiAgY29uc3QgaXNDcmVhdGluZyA9IGluaXRpYWxTdGF0ZSA9PT0gbnVsbDtcbiAgY29uc3QgaGFzQ2hhbmdlZCA9IHVzZUhhc0NoYW5nZWQoe1xuICAgIGluaXRpYWxTdGF0ZSxcbiAgICBzdGF0ZSxcbiAgICBzY2hlbWEsXG4gICAgc2x1Z0ZpZWxkOiB1bmRlZmluZWRcbiAgfSkgfHwgaXNDcmVhdGluZztcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBrZXkgPSBbJ3NpbmdsZXRvbicsIHNpbmdsZXRvbl07XG4gICAgaWYgKGhhc0NoYW5nZWQpIHtcbiAgICAgIGNvbnN0IHNlcmlhbGl6ZWQgPSBzZXJpYWxpemVFbnRyeVRvRmlsZXMoe1xuICAgICAgICBiYXNlUGF0aDogc2luZ2xldG9uUGF0aCxcbiAgICAgICAgY29uZmlnLFxuICAgICAgICBmb3JtYXQ6IGdldFNpbmdsZXRvbkZvcm1hdChjb25maWcsIHNpbmdsZXRvbiksXG4gICAgICAgIHNjaGVtYTogc2luZ2xldG9uQ29uZmlnLnNjaGVtYSxcbiAgICAgICAgc2x1ZzogdW5kZWZpbmVkLFxuICAgICAgICBzdGF0ZVxuICAgICAgfSk7XG4gICAgICBjb25zdCBmaWxlcyA9IG5ldyBNYXAoc2VyaWFsaXplZC5tYXAoeCA9PiBbeC5wYXRoLCB4LmNvbnRlbnRzXSkpO1xuICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgYmVmb3JlVHJlZUtleTogbG9jYWxUcmVlS2V5LFxuICAgICAgICBmaWxlcyxcbiAgICAgICAgc2F2ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgdmVyc2lvbjogMVxuICAgICAgfTtcbiAgICAgIHNldERyYWZ0KGtleSwgZGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlbERyYWZ0KGtleSk7XG4gICAgfVxuICB9LCBbY29uZmlnLCBsb2NhbFRyZWVLZXksIHN0YXRlLCBoYXNDaGFuZ2VkLCBzaW5nbGV0b24sIHNpbmdsZXRvblBhdGgsIHNpbmdsZXRvbkNvbmZpZ10pO1xuICBjb25zdCBwcmV2aWV3UHJvcHMgPSB1c2VNZW1vKCgpID0+IGNyZWF0ZUdldFByZXZpZXdQcm9wcyhzY2hlbWEsIHN0YXRlVXBkYXRlciA9PiB7XG4gICAgc2V0U3RhdGUoc3RhdGUgPT4gKHtcbiAgICAgIGxvY2FsVHJlZUtleTogc3RhdGUubG9jYWxUcmVlS2V5LFxuICAgICAgc3RhdGU6IHN0YXRlVXBkYXRlcihzdGF0ZS5zdGF0ZSlcbiAgICB9KSk7XG4gIH0sICgpID0+IHVuZGVmaW5lZCksIFtzY2hlbWFdKShzdGF0ZSk7XG4gIGNvbnN0IGJhc2VDb21taXQgPSB1c2VCYXNlQ29tbWl0KCk7XG4gIGNvbnN0IGZvcm1hdEluZm8gPSBnZXRTaW5nbGV0b25Gb3JtYXQoY29uZmlnLCBzaW5nbGV0b24pO1xuICBjb25zdCBbdXBkYXRlUmVzdWx0LCBfdXBkYXRlLCByZXNldFVwZGF0ZUl0ZW1dID0gdXNlVXBzZXJ0SXRlbSh7XG4gICAgc3RhdGUsXG4gICAgaW5pdGlhbEZpbGVzLFxuICAgIGNvbmZpZyxcbiAgICBzY2hlbWE6IHNpbmdsZXRvbkNvbmZpZy5zY2hlbWEsXG4gICAgYmFzZVBhdGg6IHNpbmdsZXRvblBhdGgsXG4gICAgZm9ybWF0OiBmb3JtYXRJbmZvLFxuICAgIGN1cnJlbnRMb2NhbFRyZWVLZXk6IGxvY2FsVHJlZUtleSxcbiAgICBzbHVnOiB1bmRlZmluZWRcbiAgfSk7XG4gIGNvbnN0IHVwZGF0ZSA9IHVzZUV2ZW50Q2FsbGJhY2soX3VwZGF0ZSk7XG4gIGNvbnN0IG9uQ3JlYXRlID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICh1cGRhdGVSZXN1bHQua2luZCA9PT0gJ2xvYWRpbmcnIHx8ICFoYXNDaGFuZ2VkKSByZXR1cm47XG4gICAgaWYgKCFjbGllbnRTaWRlVmFsaWRhdGVQcm9wKHNjaGVtYSwgc3RhdGUsIHVuZGVmaW5lZCkpIHtcbiAgICAgIHNldEZvcmNlVmFsaWRhdGlvbih0cnVlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXdhaXQgdXBkYXRlKCk7XG4gIH07XG4gIGNvbnN0IGZvcm1JRCA9ICdzaW5nbGV0b24tZm9ybSc7XG4gIGNvbnN0IG9uUmVzZXQgPSAoKSA9PiBzZXRTdGF0ZSh7XG4gICAgbG9jYWxUcmVlS2V5OiBsb2NhbFRyZWVLZXksXG4gICAgc3RhdGU6IGluaXRpYWxTdGF0ZSA9PT0gbnVsbCA/IGdldEluaXRpYWxQcm9wc1ZhbHVlKHNjaGVtYSkgOiBpbml0aWFsU3RhdGVcbiAgfSk7XG4gIGNvbnN0IGlzQmVsb3dUYWJsZXQgPSB1c2VNZWRpYVF1ZXJ5KGJyZWFrcG9pbnRRdWVyaWVzLmJlbG93LnRhYmxldCk7XG4gIGNvbnN0IGJyYW5jaEluZm8gPSB1c2VCcmFuY2hJbmZvKCk7XG4gIGNvbnN0IHByZXZpZXdIcmVmID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKCFzaW5nbGV0b25Db25maWcucHJldmlld1VybCkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICByZXR1cm4gc2luZ2xldG9uQ29uZmlnLnByZXZpZXdVcmwucmVwbGFjZSgne2JyYW5jaH0nLCBicmFuY2hJbmZvLmN1cnJlbnRCcmFuY2gpO1xuICB9LCBbYnJhbmNoSW5mby5jdXJyZW50QnJhbmNoLCBzaW5nbGV0b25Db25maWcucHJldmlld1VybF0pO1xuICBjb25zdCBpc0dpdEh1YiA9IGlzR2l0SHViQ29uZmlnKGNvbmZpZykgfHwgaXNDbG91ZENvbmZpZyhjb25maWcpO1xuICBjb25zdCBzaW5nbGV0b25FeGlzdHMgPSAhIWluaXRpYWxTdGF0ZTtcbiAgY29uc3Qgdmlld0hyZWYgPSBpc0dpdEh1YiAmJiBzaW5nbGV0b25FeGlzdHMgPyBgJHtnZXRSZXBvVXJsKGJyYW5jaEluZm8pfSR7Zm9ybWF0SW5mby5kYXRhTG9jYXRpb24gPT09ICdpbmRleCcgPyBgL3RyZWUvJHticmFuY2hJbmZvLmN1cnJlbnRCcmFuY2h9LyR7KF9nZXRQYXRoUHJlZml4ID0gZ2V0UGF0aFByZWZpeChjb25maWcuc3RvcmFnZSkpICE9PSBudWxsICYmIF9nZXRQYXRoUHJlZml4ICE9PSB2b2lkIDAgPyBfZ2V0UGF0aFByZWZpeCA6ICcnfSR7c2luZ2xldG9uUGF0aH1gIDogYC9ibG9iLyR7KF9nZXRQYXRoUHJlZml4MiA9IGdldFBhdGhQcmVmaXgoY29uZmlnLnN0b3JhZ2UpKSAhPT0gbnVsbCAmJiBfZ2V0UGF0aFByZWZpeDIgIT09IHZvaWQgMCA/IF9nZXRQYXRoUHJlZml4MiA6ICcnfSR7YnJhbmNoSW5mby5jdXJyZW50QnJhbmNofS8ke3NpbmdsZXRvblBhdGh9JHtnZXREYXRhRmlsZUV4dGVuc2lvbihmb3JtYXRJbmZvKX1gfWAgOiB1bmRlZmluZWQ7XG4gIGNvbnN0IG1lbnVBY3Rpb25zID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgYWN0aW9ucyA9IFt7XG4gICAgICBrZXk6ICdyZXNldCcsXG4gICAgICBsYWJlbDogJ1Jlc2V0JyxcbiAgICAgIGljb246IGhpc3RvcnlJY29uXG4gICAgfV07XG4gICAgaWYgKHByZXZpZXdIcmVmKSB7XG4gICAgICBhY3Rpb25zLnB1c2goe1xuICAgICAgICBrZXk6ICdwcmV2aWV3JyxcbiAgICAgICAgbGFiZWw6ICdQcmV2aWV3JyxcbiAgICAgICAgaWNvbjogZXh0ZXJuYWxMaW5rSWNvbixcbiAgICAgICAgaHJlZjogcHJldmlld0hyZWYsXG4gICAgICAgIHRhcmdldDogJ19ibGFuaycsXG4gICAgICAgIHJlbDogJ25vb3BlbmVyIG5vcmVmZXJyZXInXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHZpZXdIcmVmKSB7XG4gICAgICBhY3Rpb25zLnB1c2goe1xuICAgICAgICBrZXk6ICd2aWV3JyxcbiAgICAgICAgbGFiZWw6ICdWaWV3IG9uIEdpdEh1YicsXG4gICAgICAgIGljb246IGdpdGh1Ykljb24sXG4gICAgICAgIGhyZWY6IHZpZXdIcmVmLFxuICAgICAgICB0YXJnZXQ6ICdfYmxhbmsnLFxuICAgICAgICByZWw6ICdub29wZW5lciBub3JlZmVycmVyJ1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBhY3Rpb25zO1xuICB9LCBbcHJldmlld0hyZWYsIHZpZXdIcmVmXSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhQYWdlUm9vdCwge1xuICAgIGNvbnRhaW5lcldpZHRoOiBjb250YWluZXJXaWR0aEZvckVudHJ5TGF5b3V0KHNpbmdsZXRvbkNvbmZpZyksXG4gICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4cyhQYWdlSGVhZGVyLCB7XG4gICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3hzKEZsZXgsIHtcbiAgICAgICAgZmxleDogdHJ1ZSxcbiAgICAgICAgYWxpZ25JdGVtczogXCJjZW50ZXJcIixcbiAgICAgICAgZ2FwOiBcInJlZ3VsYXJcIixcbiAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEhlYWRpbmcsIHtcbiAgICAgICAgICBlbGVtZW50VHlwZTogXCJoMVwiLFxuICAgICAgICAgIGlkOiBcInBhZ2UtdGl0bGVcIixcbiAgICAgICAgICBzaXplOiBcInNtYWxsXCIsXG4gICAgICAgICAgY2hpbGRyZW46IHNpbmdsZXRvbkNvbmZpZy5sYWJlbFxuICAgICAgICB9KSwgdXBkYXRlUmVzdWx0LmtpbmQgPT09ICdsb2FkaW5nJyA/IC8qI19fUFVSRV9fKi9qc3goUHJvZ3Jlc3NDaXJjbGUsIHtcbiAgICAgICAgICBcImFyaWEtbGFiZWxcIjogYFVwZGF0aW5nICR7c2luZ2xldG9uQ29uZmlnLmxhYmVsfWAsXG4gICAgICAgICAgaXNJbmRldGVybWluYXRlOiB0cnVlLFxuICAgICAgICAgIHNpemU6IFwic21hbGxcIixcbiAgICAgICAgICBhbGlnblNlbGY6IFwiY2VudGVyXCJcbiAgICAgICAgfSkgOiBoYXNDaGFuZ2VkICYmIC8qI19fUFVSRV9fKi9qc3goQmFkZ2UsIHtcbiAgICAgICAgICB0b25lOiBcInBlbmRpbmdcIixcbiAgICAgICAgICBjaGlsZHJlbjogXCJVbnNhdmVkXCJcbiAgICAgICAgfSldXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeChBY3Rpb25Hcm91cCwge1xuICAgICAgICBidXR0b25MYWJlbEJlaGF2aW9yOiBcImhpZGVcIixcbiAgICAgICAgb3ZlcmZsb3dNb2RlOiBcImNvbGxhcHNlXCIsXG4gICAgICAgIHByb21pbmVuY2U6IFwibG93XCIsXG4gICAgICAgIGRlbnNpdHk6IFwiY29tcGFjdFwiLFxuICAgICAgICBtYXhXaWR0aDogaXNCZWxvd1RhYmxldCA/ICdlbGVtZW50LnJlZ3VsYXInIDogdW5kZWZpbmVkIC8vIGZvcmNlIHN3aXRjaCB0byBhY3Rpb24gbWVudSBvbiBzbWFsbCBkZXZpY2VzXG4gICAgICAgICxcbiAgICAgICAgaXRlbXM6IG1lbnVBY3Rpb25zLFxuICAgICAgICBkaXNhYmxlZEtleXM6IGhhc0NoYW5nZWQgPyBbXSA6IFsncmVzZXQnXSxcbiAgICAgICAgb25BY3Rpb246IGtleSA9PiB7XG4gICAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgIGNhc2UgJ3Jlc2V0JzpcbiAgICAgICAgICAgICAgb25SZXNldCgpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGNoaWxkcmVuOiBpdGVtID0+IC8qI19fUFVSRV9fKi9qc3hzKEl0ZW0kMSwge1xuICAgICAgICAgIHRleHRWYWx1ZTogaXRlbS5sYWJlbCxcbiAgICAgICAgICBocmVmOiBpdGVtLmhyZWYsXG4gICAgICAgICAgdGFyZ2V0OiBpdGVtLnRhcmdldCxcbiAgICAgICAgICByZWw6IGl0ZW0ucmVsLFxuICAgICAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChJY29uLCB7XG4gICAgICAgICAgICBzcmM6IGl0ZW0uaWNvblxuICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBpdGVtLmxhYmVsXG4gICAgICAgICAgfSldXG4gICAgICAgIH0sIGl0ZW0ua2V5KVxuICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goQnV0dG9uLCB7XG4gICAgICAgIGZvcm06IGZvcm1JRCxcbiAgICAgICAgaXNEaXNhYmxlZDogdXBkYXRlUmVzdWx0LmtpbmQgPT09ICdsb2FkaW5nJyxcbiAgICAgICAgcHJvbWluZW5jZTogXCJoaWdoXCIsXG4gICAgICAgIHR5cGU6IFwic3VibWl0XCIsXG4gICAgICAgIGNoaWxkcmVuOiBpc0NyZWF0aW5nID8gJ0NyZWF0ZScgOiAnU2F2ZSdcbiAgICAgIH0pXVxuICAgIH0pLCAvKiNfX1BVUkVfXyovanN4cyhGbGV4LCB7XG4gICAgICBlbGVtZW50VHlwZTogXCJmb3JtXCIsXG4gICAgICBpZDogZm9ybUlELFxuICAgICAgb25TdWJtaXQ6IGV2ZW50ID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldCAhPT0gZXZlbnQuY3VycmVudFRhcmdldCkgcmV0dXJuO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBvbkNyZWF0ZSgpO1xuICAgICAgfSxcbiAgICAgIGRpcmVjdGlvbjogXCJjb2x1bW5cIixcbiAgICAgIGdhcDogXCJ4eGxhcmdlXCIsXG4gICAgICBoZWlnaHQ6IFwiMTAwJVwiLFxuICAgICAgbWluSGVpZ2h0OiAwLFxuICAgICAgbWluV2lkdGg6IDAsXG4gICAgICBjaGlsZHJlbjogW3VwZGF0ZVJlc3VsdC5raW5kID09PSAnZXJyb3InICYmIC8qI19fUFVSRV9fKi9qc3goTm90aWNlLCB7XG4gICAgICAgIHRvbmU6IFwiY3JpdGljYWxcIixcbiAgICAgICAgY2hpbGRyZW46IHVwZGF0ZVJlc3VsdC5lcnJvci5tZXNzYWdlXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeChGb3JtRm9yRW50cnksIHtcbiAgICAgICAgcHJldmlld1Byb3BzOiBwcmV2aWV3UHJvcHMsXG4gICAgICAgIGZvcmNlVmFsaWRhdGlvbjogZm9yY2VWYWxpZGF0aW9uLFxuICAgICAgICBlbnRyeUxheW91dDogc2luZ2xldG9uQ29uZmlnLmVudHJ5TGF5b3V0LFxuICAgICAgICBmb3JtYXRJbmZvOiBmb3JtYXRJbmZvLFxuICAgICAgICBzbHVnRmllbGQ6IHVuZGVmaW5lZFxuICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goRGlhbG9nQ29udGFpbmVyXG4gICAgICAvLyBpZGVhbGx5IHRoaXMgd291bGQgYmUgYSBwb3BvdmVyIG9uIGRlc2t0b3AgYnV0IHVzaW5nIGEgRGlhbG9nVHJpZ2dlciB3b3VsZG4ndCB3b3JrIHNpbmNlXG4gICAgICAvLyB0aGlzIGRvZXNuJ3Qgb3BlbiBvbiBjbGljayBidXQgYWZ0ZXIgZG9pbmcgYSBuZXR3b3JrIHJlcXVlc3QgYW5kIGl0IGZhaWxpbmcgYW5kIG1hbnVhbGx5IHdpcmluZyBhYm91dCBhIHBvcG92ZXIgYW5kIG1vZGFsIHdvdWxkIGJlIGEgcGFpblxuICAgICAgLCB7XG4gICAgICAgIG9uRGlzbWlzczogcmVzZXRVcGRhdGVJdGVtLFxuICAgICAgICBjaGlsZHJlbjogdXBkYXRlUmVzdWx0LmtpbmQgPT09ICduZWVkcy1uZXctYnJhbmNoJyAmJiAvKiNfX1BVUkVfXyovanN4KENyZWF0ZUJyYW5jaER1cmluZ1VwZGF0ZURpYWxvZywge1xuICAgICAgICAgIGJyYW5jaE9pZDogYmFzZUNvbW1pdCxcbiAgICAgICAgICBvbkNyZWF0ZTogYXN5bmMgbmV3QnJhbmNoID0+IHtcbiAgICAgICAgICAgIHJvdXRlci5wdXNoKGAva2V5c3RhdGljL2JyYW5jaC8ke2VuY29kZVVSSUNvbXBvbmVudChuZXdCcmFuY2gpfS9zaW5nbGV0b24vJHtlbmNvZGVVUklDb21wb25lbnQoc2luZ2xldG9uKX1gKTtcbiAgICAgICAgICAgIHVwZGF0ZSh7XG4gICAgICAgICAgICAgIGJyYW5jaDogbmV3QnJhbmNoLFxuICAgICAgICAgICAgICBzaGE6IGJhc2VDb21taXRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVhc29uOiB1cGRhdGVSZXN1bHQucmVhc29uLFxuICAgICAgICAgIG9uRGlzbWlzczogcmVzZXRVcGRhdGVJdGVtXG4gICAgICAgIH0pXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeChEaWFsb2dDb250YWluZXJcbiAgICAgIC8vIGlkZWFsbHkgdGhpcyB3b3VsZCBiZSBhIHBvcG92ZXIgb24gZGVza3RvcCBidXQgdXNpbmcgYSBEaWFsb2dUcmlnZ2VyXG4gICAgICAvLyB3b3VsZG4ndCB3b3JrIHNpbmNlIHRoaXMgZG9lc24ndCBvcGVuIG9uIGNsaWNrIGJ1dCBhZnRlciBkb2luZyBhXG4gICAgICAvLyBuZXR3b3JrIHJlcXVlc3QgYW5kIGl0IGZhaWxpbmcgYW5kIG1hbnVhbGx5IHdpcmluZyBhYm91dCBhIHBvcG92ZXJcbiAgICAgIC8vIGFuZCBtb2RhbCB3b3VsZCBiZSBhIHBhaW5cbiAgICAgICwge1xuICAgICAgICBvbkRpc21pc3M6IHJlc2V0VXBkYXRlSXRlbSxcbiAgICAgICAgY2hpbGRyZW46IHVwZGF0ZVJlc3VsdC5raW5kID09PSAnbmVlZHMtZm9yaycgJiYgaXNHaXRIdWJDb25maWcoY29uZmlnKSAmJiAvKiNfX1BVUkVfXyovanN4KEZvcmtSZXBvRGlhbG9nLCB7XG4gICAgICAgICAgb25DcmVhdGU6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHVwZGF0ZSgpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb25EaXNtaXNzOiByZXNldFVwZGF0ZUl0ZW0sXG4gICAgICAgICAgY29uZmlnOiBjb25maWdcbiAgICAgICAgfSlcbiAgICAgIH0pXVxuICAgIH0pXVxuICB9KTtcbn1cbmNvbnN0IHN0b3JlZFZhbFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgdmVyc2lvbjogei5saXRlcmFsKDEpLFxuICBzYXZlZEF0OiB6LmRhdGUoKSxcbiAgYmVmb3JlVHJlZUtleTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBmaWxlczogei5tYXAoei5zdHJpbmcoKSwgei5pbnN0YW5jZW9mKFVpbnQ4QXJyYXkpKVxufSk7XG5mdW5jdGlvbiBTaW5nbGV0b25QYWdlV3JhcHBlcihwcm9wcykge1xuICB2YXIgX3Byb3BzJGNvbmZpZyRzaW5nbGV0O1xuICBjb25zdCBzaW5nbGV0b25Db25maWcgPSAoX3Byb3BzJGNvbmZpZyRzaW5nbGV0ID0gcHJvcHMuY29uZmlnLnNpbmdsZXRvbnMpID09PSBudWxsIHx8IF9wcm9wcyRjb25maWckc2luZ2xldCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Byb3BzJGNvbmZpZyRzaW5nbGV0W3Byb3BzLnNpbmdsZXRvbl07XG4gIGlmICghc2luZ2xldG9uQ29uZmlnKSBub3RGb3VuZCgpO1xuICBjb25zdCBoZWFkZXIgPSAvKiNfX1BVUkVfXyovanN4KFBhZ2VIZWFkZXIsIHtcbiAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChIZWFkaW5nLCB7XG4gICAgICBlbGVtZW50VHlwZTogXCJoMVwiLFxuICAgICAgaWQ6IFwicGFnZS10aXRsZVwiLFxuICAgICAgc2l6ZTogXCJzbWFsbFwiLFxuICAgICAgY2hpbGRyZW46IHNpbmdsZXRvbkNvbmZpZy5sYWJlbFxuICAgIH0pXG4gIH0pO1xuICBjb25zdCBmb3JtYXQgPSB1c2VNZW1vKCgpID0+IGdldFNpbmdsZXRvbkZvcm1hdChwcm9wcy5jb25maWcsIHByb3BzLnNpbmdsZXRvbiksIFtwcm9wcy5jb25maWcsIHByb3BzLnNpbmdsZXRvbl0pO1xuICBjb25zdCBkaXJwYXRoID0gZ2V0U2luZ2xldG9uUGF0aChwcm9wcy5jb25maWcsIHByb3BzLnNpbmdsZXRvbik7XG4gIGNvbnN0IGRyYWZ0RGF0YSA9IHVzZURhdGEodXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHJhdyA9IGF3YWl0IGdldERyYWZ0KFsnc2luZ2xldG9uJywgcHJvcHMuc2luZ2xldG9uXSk7XG4gICAgaWYgKCFyYXcpIHRocm93IG5ldyBFcnJvcignTm8gZHJhZnQgZm91bmQnKTtcbiAgICBjb25zdCBzdG9yZWQgPSBzdG9yZWRWYWxTY2hlbWEucGFyc2UocmF3KTtcbiAgICBjb25zdCBwYXJzZWQgPSBwYXJzZUVudHJ5KHtcbiAgICAgIGNvbmZpZzogcHJvcHMuY29uZmlnLFxuICAgICAgZGlycGF0aCxcbiAgICAgIGZvcm1hdCxcbiAgICAgIHNjaGVtYTogc2luZ2xldG9uQ29uZmlnLnNjaGVtYSxcbiAgICAgIHNsdWc6IHVuZGVmaW5lZFxuICAgIH0sIHN0b3JlZC5maWxlcyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXRlOiBwYXJzZWQuaW5pdGlhbFN0YXRlLFxuICAgICAgc2F2ZWRBdDogc3RvcmVkLnNhdmVkQXQsXG4gICAgICB0cmVlS2V5OiBzdG9yZWQuYmVmb3JlVHJlZUtleVxuICAgIH07XG4gIH0sIFtkaXJwYXRoLCBmb3JtYXQsIHByb3BzLmNvbmZpZywgcHJvcHMuc2luZ2xldG9uLCBzaW5nbGV0b25Db25maWcuc2NoZW1hXSkpO1xuICBjb25zdCBpdGVtRGF0YSA9IHVzZUl0ZW1EYXRhKHtcbiAgICBjb25maWc6IHByb3BzLmNvbmZpZyxcbiAgICBkaXJwYXRoLFxuICAgIHNjaGVtYTogc2luZ2xldG9uQ29uZmlnLnNjaGVtYSxcbiAgICBmb3JtYXQsXG4gICAgc2x1ZzogdW5kZWZpbmVkXG4gIH0pO1xuICBpZiAoaXRlbURhdGEua2luZCA9PT0gJ2Vycm9yJykge1xuICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhQYWdlUm9vdCwge1xuICAgICAgY2hpbGRyZW46IFtoZWFkZXIsIC8qI19fUFVSRV9fKi9qc3goUGFnZUJvZHksIHtcbiAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goTm90aWNlLCB7XG4gICAgICAgICAgbWFyZ2luOiBcInh4bGFyZ2VcIixcbiAgICAgICAgICB0b25lOiBcImNyaXRpY2FsXCIsXG4gICAgICAgICAgY2hpbGRyZW46IGl0ZW1EYXRhLmVycm9yLm1lc3NhZ2VcbiAgICAgICAgfSlcbiAgICAgIH0pXVxuICAgIH0pO1xuICB9XG4gIGlmIChpdGVtRGF0YS5raW5kID09PSAnbG9hZGluZycgfHwgZHJhZnREYXRhLmtpbmQgPT09ICdsb2FkaW5nJykge1xuICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhQYWdlUm9vdCwge1xuICAgICAgY2hpbGRyZW46IFtoZWFkZXIsIC8qI19fUFVSRV9fKi9qc3goUGFnZUJvZHksIHtcbiAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goRmxleCwge1xuICAgICAgICAgIGFsaWduSXRlbXM6IFwiY2VudGVyXCIsXG4gICAgICAgICAganVzdGlmeUNvbnRlbnQ6IFwiY2VudGVyXCIsXG4gICAgICAgICAgbWluSGVpZ2h0OiBcInNjYWxlLjMwMDBcIixcbiAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChQcm9ncmVzc0NpcmNsZSwge1xuICAgICAgICAgICAgXCJhcmlhLWxhYmVsXCI6IGBMb2FkaW5nICR7c2luZ2xldG9uQ29uZmlnLmxhYmVsfWAsXG4gICAgICAgICAgICBpc0luZGV0ZXJtaW5hdGU6IHRydWUsXG4gICAgICAgICAgICBzaXplOiBcImxhcmdlXCJcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSldXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goU2luZ2xldG9uUGFnZSwge1xuICAgIHNpbmdsZXRvbjogcHJvcHMuc2luZ2xldG9uLFxuICAgIGNvbmZpZzogcHJvcHMuY29uZmlnLFxuICAgIGluaXRpYWxTdGF0ZTogaXRlbURhdGEuZGF0YSA9PT0gJ25vdC1mb3VuZCcgPyBudWxsIDogaXRlbURhdGEuZGF0YS5pbml0aWFsU3RhdGUsXG4gICAgaW5pdGlhbEZpbGVzOiBpdGVtRGF0YS5kYXRhID09PSAnbm90LWZvdW5kJyA/IFtdIDogaXRlbURhdGEuZGF0YS5pbml0aWFsRmlsZXMsXG4gICAgbG9jYWxUcmVlS2V5OiBpdGVtRGF0YS5kYXRhID09PSAnbm90LWZvdW5kJyA/IHVuZGVmaW5lZCA6IGl0ZW1EYXRhLmRhdGEubG9jYWxUcmVlS2V5LFxuICAgIGRyYWZ0OiBkcmFmdERhdGEua2luZCA9PT0gJ2xvYWRlZCcgPyBkcmFmdERhdGEuZGF0YSA6IHVuZGVmaW5lZFxuICB9KTtcbn1cblxuZnVuY3Rpb24gQ3JlYXRlZEdpdEh1YkFwcChwcm9wcykge1xuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChGbGV4LCB7XG4gICAgYWxpZ25JdGVtczogXCJjZW50ZXJcIixcbiAgICBqdXN0aWZ5Q29udGVudDogXCJjZW50ZXJcIixcbiAgICBtYXJnaW46IFwieHhsYXJnZVwiLFxuICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4cyhGbGV4LCB7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwic3VyZmFjZVwiLFxuICAgICAgcGFkZGluZzogXCJsYXJnZVwiLFxuICAgICAgYm9yZGVyOiBcImNvbG9yLmFsaWFzLmJvcmRlcklkbGVcIixcbiAgICAgIGJvcmRlclJhZGl1czogXCJtZWRpdW1cIixcbiAgICAgIGRpcmVjdGlvbjogXCJjb2x1bW5cIixcbiAgICAgIGp1c3RpZnlDb250ZW50OiBcImNlbnRlclwiLFxuICAgICAgZ2FwOiBcInhsYXJnZVwiLFxuICAgICAgbWF4V2lkdGg6IFwic2NhbGUuNDYwMFwiLFxuICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEhlYWRpbmcsIHtcbiAgICAgICAgY2hpbGRyZW46IFwiWW91J3ZlIGluc3RhbGxlZCBLZXlzdGF0aWMhIFxcdUQ4M0NcXHVERjg5XCJcbiAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgICAgY2hpbGRyZW46IFwiVG8gc3RhcnQgdXNpbmcgS2V5c3RhdGljLCB5b3UgbmVlZCB0byBpbnN0YWxsIHRoZSBHaXRIdWIgYXBwIHlvdSd2ZSBjcmVhdGVkLlwiXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeHMoVGV4dCwge1xuICAgICAgICBjaGlsZHJlbjogW1wiTWFrZSBzdXJlIHRvIGFkZCB0aGUgQXBwIHRvIHRoZVwiLCAnICcsIC8qI19fUFVSRV9fKi9qc3goXCJjb2RlXCIsIHtcbiAgICAgICAgICBjaGlsZHJlbjogc2VyaWFsaXplUmVwb0NvbmZpZyhwcm9wcy5jb25maWcuc3RvcmFnZS5yZXBvKVxuICAgICAgICB9KSwgJyAnLCBcInJlcG9zaXRvcnkuXCJdXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeChJbnN0YWxsR2l0SHViQXBwLCB7XG4gICAgICAgIGNvbmZpZzogcHJvcHMuY29uZmlnXG4gICAgICB9KV1cbiAgICB9KVxuICB9KTtcbn1cblxuZnVuY3Rpb24gS2V5c3RhdGljU2V0dXAocHJvcHMpIHtcbiAgY29uc3QgW2RlcGxveWVkVVJMLCBzZXREZXBsb3llZFVSTF0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtvcmdhbml6YXRpb24sIHNldE9yZ2FuaXphdGlvbl0gPSB1c2VTdGF0ZSgnJyk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KEZsZXgsIHtcbiAgICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLFxuICAgIGp1c3RpZnlDb250ZW50OiBcImNlbnRlclwiLFxuICAgIG1hcmdpbjogXCJ4eGxhcmdlXCIsXG4gICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3hzKEZsZXgsIHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogXCJzdXJmYWNlXCIsXG4gICAgICBwYWRkaW5nOiBcImxhcmdlXCIsXG4gICAgICBib3JkZXI6IFwiY29sb3IuYWxpYXMuYm9yZGVySWRsZVwiLFxuICAgICAgYm9yZGVyUmFkaXVzOiBcIm1lZGl1bVwiLFxuICAgICAgZGlyZWN0aW9uOiBcImNvbHVtblwiLFxuICAgICAganVzdGlmeUNvbnRlbnQ6IFwiY2VudGVyXCIsXG4gICAgICBnYXA6IFwieGxhcmdlXCIsXG4gICAgICBtYXhXaWR0aDogXCJzY2FsZS40NjAwXCIsXG4gICAgICBlbGVtZW50VHlwZTogXCJmb3JtXCIsXG4gICAgICBhY3Rpb246IGBodHRwczovL2dpdGh1Yi5jb20ke29yZ2FuaXphdGlvbiA/IGAvb3JnYW5pemF0aW9ucy8ke29yZ2FuaXphdGlvbn1gIDogJyd9L3NldHRpbmdzL2FwcHMvbmV3YCxcbiAgICAgIG1ldGhvZDogXCJwb3N0XCIsXG4gICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goRmxleCwge1xuICAgICAgICBqdXN0aWZ5Q29udGVudDogXCJjZW50ZXJcIixcbiAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goSGVhZGluZywge1xuICAgICAgICAgIGNoaWxkcmVuOiBcIktleXN0YXRpYyBTZXR1cFwiXG4gICAgICAgIH0pXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeChUZXh0LCB7XG4gICAgICAgIGNoaWxkcmVuOiBcIktleXN0YXRpYyBkb2Vzbid0IGhhdmUgdGhlIHJlcXVpcmVkIGNvbmZpZy5cIlxuICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goVGV4dCwge1xuICAgICAgICBjaGlsZHJlbjogXCJJZiB5b3UndmUgYWxyZWFkeSBjcmVhdGVkIHlvdXIgR2l0SHViIGFwcCwgbWFrZSBzdXJlIHRvIGFkZCB0aGUgZm9sbG93aW5nIGVudmlyb25tZW50IHZhcmlhYmxlczpcIlxuICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3hzKEJveCwge1xuICAgICAgICBlbGVtZW50VHlwZTogXCJ1bFwiLFxuICAgICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goXCJsaVwiLCB7XG4gICAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goXCJjb2RlXCIsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBcIktFWVNUQVRJQ19HSVRIVUJfQ0xJRU5UX0lEXCJcbiAgICAgICAgICB9KVxuICAgICAgICB9KSwgLyojX19QVVJFX18qL2pzeChcImxpXCIsIHtcbiAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChcImNvZGVcIiwge1xuICAgICAgICAgICAgY2hpbGRyZW46IFwiS0VZU1RBVElDX0dJVEhVQl9DTElFTlRfU0VDUkVUXCJcbiAgICAgICAgICB9KVxuICAgICAgICB9KSwgLyojX19QVVJFX18qL2pzeChcImxpXCIsIHtcbiAgICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChcImNvZGVcIiwge1xuICAgICAgICAgICAgY2hpbGRyZW46IFwiS0VZU1RBVElDX1NFQ1JFVFwiXG4gICAgICAgICAgfSlcbiAgICAgICAgfSldXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeChUZXh0LCB7XG4gICAgICAgIGNoaWxkcmVuOiBcIklmIHlvdSBoYXZlbid0IGNyZWF0ZWQgeW91ciBHaXRIdWIgYXBwIGZvciBLZXlzdGF0aWMsIHlvdSBjYW4gY3JlYXRlIG9uZSBiZWxvdy5cIlxuICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goVGV4dEZpZWxkLCB7XG4gICAgICAgIGxhYmVsOiBcIkRlcGxveWVkIEFwcCBVUkxcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiVGhpcyBzaG91bGQgdGhlIHJvb3Qgb2YgeW91ciBkb21haW4uIElmIHlvdSdyZSBub3Qgc3VyZSB3aGVyZSBLZXlzdGF0aWMgd2lsbCBiZSBkZXBsb3llZCwgbGVhdmUgdGhpcyBibGFuayBhbmQgeW91IGNhbiB1cGRhdGUgdGhlIEdpdEh1YiBhcHAgbGF0ZXIuXCIsXG4gICAgICAgIHZhbHVlOiBkZXBsb3llZFVSTCxcbiAgICAgICAgb25DaGFuZ2U6IHNldERlcGxveWVkVVJMXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeChUZXh0RmllbGQsIHtcbiAgICAgICAgbGFiZWw6IFwiR2l0SHViIG9yZ2FuaXphdGlvbiAoaWYgYW55KVwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJZb3UgbXVzdCBiZSBhbiBvd25lciBvciBHaXRIdWIgQXBwIG1hbmFnZXIgaW4gdGhlIG9yZ2FuaXphdGlvbiB0byBjcmVhdGUgdGhlIEdpdEh1YiBBcHAuIExlYXZlIHRoaXMgYmxhbmsgdG8gY3JlYXRlIHRoZSBhcHAgaW4geW91ciBwZXJzb25hbCBhY2NvdW50LlwiLFxuICAgICAgICB2YWx1ZTogb3JnYW5pemF0aW9uLFxuICAgICAgICBvbkNoYW5nZTogc2V0T3JnYW5pemF0aW9uXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeHMoVGV4dCwge1xuICAgICAgICBjaGlsZHJlbjogW1wiQWZ0ZXIgdmlzaXRpbmcgR2l0SHViIHRvIGNyZWF0ZSB0aGUgR2l0SHViIGFwcCwgeW91J2xsIGJlIHJlZGlyZWN0ZWQgYmFjayBoZXJlIGFuZCBzZWNyZXRzIGdlbmVyYXRlZCBmcm9tIEdpdEh1YiB3aWxsIGJlIHdyaXR0ZW4gdG8geW91clwiLCAnICcsIC8qI19fUFVSRV9fKi9qc3goXCJjb2RlXCIsIHtcbiAgICAgICAgICBjaGlsZHJlbjogXCIuZW52XCJcbiAgICAgICAgfSksIFwiIGZpbGUuXCJdXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeChcImlucHV0XCIsIHtcbiAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgIG5hbWU6IFwibWFuaWZlc3RcIixcbiAgICAgICAgY2xhc3NOYW1lOiBjc3Moe1xuICAgICAgICAgIGRpc3BsYXk6ICdub25lJ1xuICAgICAgICB9KSxcbiAgICAgICAgdmFsdWU6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBuYW1lOiBgJHtwYXJzZVJlcG9Db25maWcocHJvcHMuY29uZmlnLnN0b3JhZ2UucmVwbykub3duZXJ9IEtleXN0YXRpY2AsXG4gICAgICAgICAgdXJsOiBkZXBsb3llZFVSTCA/IGAke2RlcGxveWVkVVJMfS9rZXlzdGF0aWNgIDogYCR7d2luZG93LmxvY2F0aW9uLm9yaWdpbn0va2V5c3RhdGljYCxcbiAgICAgICAgICBwdWJsaWM6IHRydWUsXG4gICAgICAgICAgcmVkaXJlY3RfdXJsOiBgJHt3aW5kb3cubG9jYXRpb24ub3JpZ2lufS9hcGkva2V5c3RhdGljL2dpdGh1Yi9jcmVhdGVkLWFwcGAsXG4gICAgICAgICAgY2FsbGJhY2tfdXJsczogW2Ake3dpbmRvdy5sb2NhdGlvbi5vcmlnaW59L2FwaS9rZXlzdGF0aWMvZ2l0aHViL29hdXRoL2NhbGxiYWNrYCwgYGh0dHA6Ly8xMjcuMC4wLjEvYXBpL2tleXN0YXRpYy9naXRodWIvb2F1dGgvY2FsbGJhY2tgLCAuLi4oZGVwbG95ZWRVUkwgPyBbYCR7ZGVwbG95ZWRVUkx9L2FwaS9rZXlzdGF0aWMvZ2l0aHViL29hdXRoL2NhbGxiYWNrYF0gOiBbXSldLFxuICAgICAgICAgIHJlcXVlc3Rfb2F1dGhfb25faW5zdGFsbDogdHJ1ZSxcbiAgICAgICAgICBkZWZhdWx0X3Blcm1pc3Npb25zOiB7XG4gICAgICAgICAgICBjb250ZW50czogJ3dyaXRlJyxcbiAgICAgICAgICAgIG1ldGFkYXRhOiAncmVhZCcsXG4gICAgICAgICAgICBwdWxsX3JlcXVlc3RzOiAncmVhZCdcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeChCdXR0b24sIHtcbiAgICAgICAgcHJvbWluZW5jZTogXCJoaWdoXCIsXG4gICAgICAgIHR5cGU6IFwic3VibWl0XCIsXG4gICAgICAgIGNoaWxkcmVuOiBcIkNyZWF0ZSBHaXRIdWIgQXBwXCJcbiAgICAgIH0pXVxuICAgIH0pXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBSZXBvTm90Rm91bmQocHJvcHMpIHtcbiAgY29uc3QgcmVwbyA9IHNlcmlhbGl6ZVJlcG9Db25maWcocHJvcHMuY29uZmlnLnN0b3JhZ2UucmVwbyk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4KEZsZXgsIHtcbiAgICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLFxuICAgIGp1c3RpZnlDb250ZW50OiBcImNlbnRlclwiLFxuICAgIG1hcmdpbjogXCJ4eGxhcmdlXCIsXG4gICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3hzKEZsZXgsIHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogXCJzdXJmYWNlXCIsXG4gICAgICBwYWRkaW5nOiBcImxhcmdlXCIsXG4gICAgICBib3JkZXI6IFwiY29sb3IuYWxpYXMuYm9yZGVySWRsZVwiLFxuICAgICAgYm9yZGVyUmFkaXVzOiBcIm1lZGl1bVwiLFxuICAgICAgZGlyZWN0aW9uOiBcImNvbHVtblwiLFxuICAgICAganVzdGlmeUNvbnRlbnQ6IFwiY2VudGVyXCIsXG4gICAgICBnYXA6IFwieGxhcmdlXCIsXG4gICAgICBtYXhXaWR0aDogXCJzY2FsZS40NjAwXCIsXG4gICAgICBjaGlsZHJlbjogWy8qI19fUFVSRV9fKi9qc3goRmxleCwge1xuICAgICAgICBqdXN0aWZ5Q29udGVudDogXCJjZW50ZXJcIixcbiAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goSGVhZGluZywge1xuICAgICAgICAgIGNoaWxkcmVuOiBcIlJlcG8gbm90IGZvdW5kXCJcbiAgICAgICAgfSlcbiAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4cyhUZXh0LCB7XG4gICAgICAgIGNoaWxkcmVuOiBbXCJLZXlzdGF0aWMgaXMgY29uZmlndXJlZCBmb3IgdGhlXCIsICcgJywgLyojX19QVVJFX18qL2pzeChcImFcIiwge1xuICAgICAgICAgIGhyZWY6IGBodHRwczovL2dpdGh1Yi5jb20vJHtyZXBvfWAsXG4gICAgICAgICAgY2hpbGRyZW46IHJlcG9cbiAgICAgICAgfSksIFwiIEdpdEh1YiByZXBvIGJ1dCBLZXlzdGF0aWMgaXNuJ3QgYWJsZSB0byBhY2Nlc3MgdGhpcyByZXBvLiBUaGlzIGlzIGVpdGhlciBiZWNhdXNlIHlvdSBkb24ndCBoYXZlIGFjY2VzcyB0byB0aGlzIHJlcG8gb3IgeW91IGhhdmVuJ3QgYWRkZWQgdGhlIEdpdEh1YiBhcHAgdG8gaXQuXCJdXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeChJbnN0YWxsR2l0SHViQXBwLCB7XG4gICAgICAgIGNvbmZpZzogcHJvcHMuY29uZmlnXG4gICAgICB9KV1cbiAgICB9KVxuICB9KTtcbn1cblxuY29uc3Qgc3RvcmVkU3RhdGVTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHN0YXRlOiB6LnN0cmluZygpLFxuICBmcm9tOiB6LnN0cmluZygpLFxuICBjb2RlX3ZlcmlmaWVyOiB6LnN0cmluZygpXG59KTtcbmNvbnN0IHRva2VuUmVzcG9uc2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGFjY2Vzc190b2tlbjogei5zdHJpbmcoKSxcbiAgdG9rZW5fdHlwZTogei5zdHJpbmcoKSxcbiAgZXhwaXJlc19pbjogei5udW1iZXIoKVxufSk7XG5mdW5jdGlvbiBLZXlzdGF0aWNDbG91ZEF1dGhDYWxsYmFjayh7XG4gIGNvbmZpZ1xufSkge1xuICB2YXIgX2NvbmZpZyRjbG91ZDI7XG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuICBjb25zdCB1cmwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcbiAgY29uc3QgY29kZSA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdjb2RlJyk7XG4gIGNvbnN0IHN0YXRlID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ3N0YXRlJyk7XG4gIGNvbnN0IHN0b3JlZFN0YXRlID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgX3N0b3JlZFN0YXRlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2tleXN0YXRpYy1jbG91ZC1zdGF0ZScpO1xuICAgIGNvbnN0IHN0b3JlZFN0YXRlID0gc3RvcmVkU3RhdGVTY2hlbWEuc2FmZVBhcnNlKCgoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShfc3RvcmVkU3RhdGUgfHwgJycpO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH0pKCkpO1xuICAgIHJldHVybiBzdG9yZWRTdGF0ZTtcbiAgfSwgW10pO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlKG51bGwpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZhciBfY29uZmlnJGNsb3VkO1xuICAgIGlmIChjb2RlICYmIHN0YXRlICYmIHN0b3JlZFN0YXRlLnN1Y2Nlc3MgJiYgKF9jb25maWckY2xvdWQgPSBjb25maWcuY2xvdWQpICE9PSBudWxsICYmIF9jb25maWckY2xvdWQgIT09IHZvaWQgMCAmJiBfY29uZmlnJGNsb3VkLnByb2plY3QpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgcHJvamVjdFxuICAgICAgfSA9IGNvbmZpZy5jbG91ZDtcbiAgICAgIChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke0tFWVNUQVRJQ19DTE9VRF9BUElfVVJMfS9vYXV0aC90b2tlbmAsIHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBib2R5OiBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgICAgIGNvZGUsXG4gICAgICAgICAgICBjbGllbnRfaWQ6IHByb2plY3QsXG4gICAgICAgICAgICByZWRpcmVjdF91cmk6IGAke3dpbmRvdy5sb2NhdGlvbi5vcmlnaW59L2tleXN0YXRpYy9jbG91ZC9vYXV0aC9jYWxsYmFja2AsXG4gICAgICAgICAgICBjb2RlX3ZlcmlmaWVyOiBzdG9yZWRTdGF0ZS5kYXRhLmNvZGVfdmVyaWZpZXIsXG4gICAgICAgICAgICBncmFudF90eXBlOiAnYXV0aG9yaXphdGlvbl9jb2RlJ1xuICAgICAgICAgIH0pLnRvU3RyaW5nKCksXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxuICAgICAgICAgICAgLi4uS0VZU1RBVElDX0NMT1VEX0hFQURFUlNcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQmFkIHJlc3BvbnNlOiAke3Jlcy5zdGF0dXN9ICR7cmVzLnN0YXR1c1RleHR9XFxuXFxuJHthd2FpdCByZXMudGV4dCgpfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICBjb25zdCBwYXJzZWQgPSB0b2tlblJlc3BvbnNlU2NoZW1hLnBhcnNlKGRhdGEpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgna2V5c3RhdGljLWNsb3VkLWFjY2Vzcy10b2tlbicsIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICB0b2tlbjogcGFyc2VkLmFjY2Vzc190b2tlbixcbiAgICAgICAgICBwcm9qZWN0LFxuICAgICAgICAgIHZhbGlkVW50aWw6IERhdGUubm93KCkgKyBwYXJzZWQuZXhwaXJlc19pbiAqIDEwMDBcbiAgICAgICAgfSkpO1xuICAgICAgICByb3V0ZXIucHVzaChgL2tleXN0YXRpYy8ke3N0b3JlZFN0YXRlLmRhdGEuZnJvbX1gKTtcbiAgICAgIH0pKCkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBzZXRFcnJvcihlcnJvcik7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtjb2RlLCBzdGF0ZSwgcm91dGVyLCBzdG9yZWRTdGF0ZSwgY29uZmlnXSk7XG4gIGlmICghKChfY29uZmlnJGNsb3VkMiA9IGNvbmZpZy5jbG91ZCkgIT09IG51bGwgJiYgX2NvbmZpZyRjbG91ZDIgIT09IHZvaWQgMCAmJiBfY29uZmlnJGNsb3VkMi5wcm9qZWN0KSkge1xuICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgIGNoaWxkcmVuOiBcIk1pc3NpbmcgS2V5c3RhdGljIENsb3VkIGNvbmZpZ1wiXG4gICAgfSk7XG4gIH1cbiAgaWYgKCFjb2RlIHx8ICFzdGF0ZSkge1xuICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgIGNoaWxkcmVuOiBcIk1pc3NpbmcgY29kZSBvciBzdGF0ZVwiXG4gICAgfSk7XG4gIH1cbiAgaWYgKHN0b3JlZFN0YXRlLnN1Y2Nlc3MgPT09IGZhbHNlIHx8IHN0YXRlICE9PSBzdG9yZWRTdGF0ZS5kYXRhLnN0YXRlKSB7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goVGV4dCwge1xuICAgICAgY2hpbGRyZW46IFwiSW52YWxpZCBzdGF0ZVwiXG4gICAgfSk7XG4gIH1cbiAgaWYgKGVycm9yKSB7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goVGV4dCwge1xuICAgICAgY2hpbGRyZW46IGVycm9yLm1lc3NhZ2VcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gLyojX19QVVJFX18qL2pzeChGbGV4LCB7XG4gICAganVzdGlmeUNvbnRlbnQ6IFwiY2VudGVyXCIsXG4gICAgYWxpZ25JdGVtczogXCJjZW50ZXJcIixcbiAgICBoZWlnaHQ6IFwiMTAwdmhcIixcbiAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChQcm9ncmVzc0NpcmNsZSwge1xuICAgICAgc2l6ZTogXCJsYXJnZVwiLFxuICAgICAgaXNJbmRldGVybWluYXRlOiB0cnVlLFxuICAgICAgXCJhcmlhLWxhYmVsXCI6IFwiQXV0aGVudGljYXRpbmdcIlxuICAgIH0pXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBwYXJzZVBhcmFtc1dpdGhvdXRCcmFuY2gocGFyYW1zKSB7XG4gIGlmIChwYXJhbXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG4gIGlmIChwYXJhbXMubGVuZ3RoID09PSAyICYmIHBhcmFtc1swXSA9PT0gJ3NpbmdsZXRvbicpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2luZ2xldG9uOiBwYXJhbXNbMV1cbiAgICB9O1xuICB9XG4gIGlmIChwYXJhbXMubGVuZ3RoIDwgMiB8fCBwYXJhbXNbMF0gIT09ICdjb2xsZWN0aW9uJykgcmV0dXJuIG51bGw7XG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBwYXJhbXNbMV07XG4gIGlmIChwYXJhbXMubGVuZ3RoID09PSAyKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbGxlY3Rpb25cbiAgICB9O1xuICB9XG4gIGlmIChwYXJhbXMubGVuZ3RoID09PSAzICYmIHBhcmFtc1syXSA9PT0gJ2NyZWF0ZScpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29sbGVjdGlvbixcbiAgICAgIGtpbmQ6ICdjcmVhdGUnXG4gICAgfTtcbiAgfVxuICBpZiAocGFyYW1zLmxlbmd0aCA9PT0gNCAmJiBwYXJhbXNbMl0gPT09ICdpdGVtJykge1xuICAgIGNvbnN0IHNsdWcgPSBwYXJhbXNbM107XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbGxlY3Rpb24sXG4gICAgICBraW5kOiAnZWRpdCcsXG4gICAgICBzbHVnXG4gICAgfTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIFJlZGlyZWN0VG9CcmFuY2gocHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIHB1c2hcbiAgfSA9IHVzZVJvdXRlcigpO1xuICBjb25zdCB7XG4gICAgZGF0YSxcbiAgICBlcnJvclxuICB9ID0gdXNlQ29udGV4dChHaXRIdWJBcHBTaGVsbERhdGFDb250ZXh0KTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB2YXIgX2Vycm9yJHJlc3BvbnNlLCBfZGF0YSRyZXBvc2l0b3J5LCBfZGF0YSRyZXBvc2l0b3J5MiwgX2Vycm9yJGdyYXBoUUxFcnJvcnMsIF9lcnJvciRncmFwaFFMRXJyb3JzMjtcbiAgICBpZiAoKGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgfHwgKF9lcnJvciRyZXNwb25zZSA9IGVycm9yLnJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfZXJyb3IkcmVzcG9uc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lcnJvciRyZXNwb25zZS5zdGF0dXMpID09PSA0MDEpIHtcbiAgICAgIGlmIChwcm9wcy5jb25maWcuc3RvcmFnZS5raW5kID09PSAnZ2l0aHViJykge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvYXBpL2tleXN0YXRpYy9naXRodWIvbG9naW4nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVkaXJlY3RUb0Nsb3VkQXV0aCgnJywgcHJvcHMuY29uZmlnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRhdGEgIT09IG51bGwgJiYgZGF0YSAhPT0gdm9pZCAwICYmIChfZGF0YSRyZXBvc2l0b3J5ID0gZGF0YS5yZXBvc2l0b3J5KSAhPT0gbnVsbCAmJiBfZGF0YSRyZXBvc2l0b3J5ICE9PSB2b2lkIDAgJiYgX2RhdGEkcmVwb3NpdG9yeS5kZWZhdWx0QnJhbmNoUmVmKSB7XG4gICAgICBwdXNoKGAva2V5c3RhdGljL2JyYW5jaC8ke2VuY29kZVVSSUNvbXBvbmVudChkYXRhLnJlcG9zaXRvcnkuZGVmYXVsdEJyYW5jaFJlZi5uYW1lKX1gKTtcbiAgICB9XG4gICAgaWYgKHByb3BzLmNvbmZpZy5zdG9yYWdlLmtpbmQgPT09ICdnaXRodWInICYmICEoZGF0YSAhPT0gbnVsbCAmJiBkYXRhICE9PSB2b2lkIDAgJiYgKF9kYXRhJHJlcG9zaXRvcnkyID0gZGF0YS5yZXBvc2l0b3J5KSAhPT0gbnVsbCAmJiBfZGF0YSRyZXBvc2l0b3J5MiAhPT0gdm9pZCAwICYmIF9kYXRhJHJlcG9zaXRvcnkyLmlkKSAmJiAoZXJyb3IgPT09IG51bGwgfHwgZXJyb3IgPT09IHZvaWQgMCB8fCAoX2Vycm9yJGdyYXBoUUxFcnJvcnMgPSBlcnJvci5ncmFwaFFMRXJyb3JzKSA9PT0gbnVsbCB8fCBfZXJyb3IkZ3JhcGhRTEVycm9ycyA9PT0gdm9pZCAwIHx8IChfZXJyb3IkZ3JhcGhRTEVycm9ycyA9IF9lcnJvciRncmFwaFFMRXJyb3JzWzBdKSA9PT0gbnVsbCB8fCBfZXJyb3IkZ3JhcGhRTEVycm9ycyA9PT0gdm9pZCAwIHx8IChfZXJyb3IkZ3JhcGhRTEVycm9ycyA9IF9lcnJvciRncmFwaFFMRXJyb3JzLm9yaWdpbmFsRXJyb3IpID09PSBudWxsIHx8IF9lcnJvciRncmFwaFFMRXJyb3JzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZXJyb3IkZ3JhcGhRTEVycm9ycy50eXBlKSA9PT0gJ05PVF9GT1VORCcgfHwgKGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgfHwgKF9lcnJvciRncmFwaFFMRXJyb3JzMiA9IGVycm9yLmdyYXBoUUxFcnJvcnMpID09PSBudWxsIHx8IF9lcnJvciRncmFwaFFMRXJyb3JzMiA9PT0gdm9pZCAwIHx8IChfZXJyb3IkZ3JhcGhRTEVycm9yczIgPSBfZXJyb3IkZ3JhcGhRTEVycm9yczJbMF0pID09PSBudWxsIHx8IF9lcnJvciRncmFwaFFMRXJyb3JzMiA9PT0gdm9pZCAwIHx8IChfZXJyb3IkZ3JhcGhRTEVycm9yczIgPSBfZXJyb3IkZ3JhcGhRTEVycm9yczIub3JpZ2luYWxFcnJvcikgPT09IG51bGwgfHwgX2Vycm9yJGdyYXBoUUxFcnJvcnMyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZXJyb3IkZ3JhcGhRTEVycm9yczIudHlwZSkgPT09ICdGT1JCSURERU4nKSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvYXBpL2tleXN0YXRpYy9naXRodWIvcmVwby1ub3QtZm91bmQnO1xuICAgIH1cbiAgfSwgW2RhdGEsIGVycm9yLCBwdXNoLCBwcm9wcy5jb25maWddKTtcbiAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBQYWdlSW5uZXIoe1xuICBjb25maWdcbn0pIHtcbiAgdmFyIF9jb25maWckY2xvdWQ7XG4gIGNvbnN0IHtcbiAgICBwYXJhbXNcbiAgfSA9IHVzZVJvdXRlcigpO1xuICBsZXQgYnJhbmNoID0gbnVsbCxcbiAgICBwYXJzZWRQYXJhbXMsXG4gICAgYmFzZVBhdGg7XG4gIGlmIChwYXJhbXMuam9pbignLycpID09PSAnY2xvdWQvb2F1dGgvY2FsbGJhY2snKSB7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goS2V5c3RhdGljQ2xvdWRBdXRoQ2FsbGJhY2ssIHtcbiAgICAgIGNvbmZpZzogY29uZmlnXG4gICAgfSk7XG4gIH1cbiAgbGV0IHdyYXBwZXIgPSB4ID0+IHg7XG4gIGlmIChpc0Nsb3VkQ29uZmlnKGNvbmZpZykgfHwgaXNMb2NhbENvbmZpZyhjb25maWcpICYmIChfY29uZmlnJGNsb3VkID0gY29uZmlnLmNsb3VkKSAhPT0gbnVsbCAmJiBfY29uZmlnJGNsb3VkICE9PSB2b2lkIDAgJiYgX2NvbmZpZyRjbG91ZC5wcm9qZWN0KSB7XG4gICAgd3JhcHBlciA9IGVsZW1lbnQgPT4gLyojX19QVVJFX18qL2pzeChDbG91ZEluZm9Qcm92aWRlciwge1xuICAgICAgY29uZmlnOiBjb25maWcsXG4gICAgICBjaGlsZHJlbjogZWxlbWVudFxuICAgIH0pO1xuICB9XG4gIGlmIChpc0dpdEh1YkNvbmZpZyhjb25maWcpIHx8IGlzQ2xvdWRDb25maWcoY29uZmlnKSkge1xuICAgIGNvbnN0IG9yaWdXcmFwcGVyID0gd3JhcHBlcjtcbiAgICB3cmFwcGVyID0gZWxlbWVudCA9PiAvKiNfX1BVUkVfXyovanN4KEF1dGhXcmFwcGVyLCB7XG4gICAgICBjb25maWc6IGNvbmZpZyxcbiAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KEdpdEh1YkFwcFNoZWxsRGF0YVByb3ZpZGVyLCB7XG4gICAgICAgIGNvbmZpZzogY29uZmlnLFxuICAgICAgICBjaGlsZHJlbjogb3JpZ1dyYXBwZXIoZWxlbWVudClcbiAgICAgIH0pXG4gICAgfSk7XG4gICAgaWYgKHBhcmFtcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB3cmFwcGVyKCAvKiNfX1BVUkVfXyovanN4KFJlZGlyZWN0VG9CcmFuY2gsIHtcbiAgICAgICAgY29uZmlnOiBjb25maWdcbiAgICAgIH0pKTtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5sZW5ndGggPT09IDEgJiYgaXNHaXRIdWJDb25maWcoY29uZmlnKSkge1xuICAgICAgaWYgKHBhcmFtc1swXSA9PT0gJ3NldHVwJykgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goS2V5c3RhdGljU2V0dXAsIHtcbiAgICAgICAgY29uZmlnOiBjb25maWdcbiAgICAgIH0pO1xuICAgICAgaWYgKHBhcmFtc1swXSA9PT0gJ3JlcG8tbm90LWZvdW5kJykge1xuICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChSZXBvTm90Rm91bmQsIHtcbiAgICAgICAgICBjb25maWc6IGNvbmZpZ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChwYXJhbXNbMF0gPT09ICdjcmVhdGVkLWdpdGh1Yi1hcHAnKSB7XG4gICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KENyZWF0ZWRHaXRIdWJBcHAsIHtcbiAgICAgICAgICBjb25maWc6IGNvbmZpZ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHBhcmFtc1swXSAhPT0gJ2JyYW5jaCcgfHwgcGFyYW1zLmxlbmd0aCA8IDIpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgICAgY2hpbGRyZW46IFwiTm90IGZvdW5kXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBicmFuY2ggPSBwYXJhbXNbMV07XG4gICAgYmFzZVBhdGggPSBgL2tleXN0YXRpYy9icmFuY2gvJHtlbmNvZGVVUklDb21wb25lbnQoYnJhbmNoKX1gO1xuICAgIHBhcnNlZFBhcmFtcyA9IHBhcnNlUGFyYW1zV2l0aG91dEJyYW5jaChwYXJhbXMuc2xpY2UoMikpO1xuICB9IGVsc2Uge1xuICAgIHBhcnNlZFBhcmFtcyA9IHBhcnNlUGFyYW1zV2l0aG91dEJyYW5jaChwYXJhbXMpO1xuICAgIGJhc2VQYXRoID0gJy9rZXlzdGF0aWMnO1xuICB9XG4gIHJldHVybiB3cmFwcGVyKCAvKiNfX1BVUkVfXyovanN4KEFwcFNoZWxsLCB7XG4gICAgY29uZmlnOiBjb25maWcsXG4gICAgY3VycmVudEJyYW5jaDogYnJhbmNoIHx8ICcnLFxuICAgIGJhc2VQYXRoOiBiYXNlUGF0aCxcbiAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChOb3RGb3VuZEJvdW5kYXJ5LCB7XG4gICAgICBmYWxsYmFjazogLyojX19QVVJFX18qL2pzeChQYWdlUm9vdCwge1xuICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChQYWdlQm9keSwge1xuICAgICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KEVtcHR5U3RhdGUsIHtcbiAgICAgICAgICAgIGljb246IGZpbGVYMkljb24sXG4gICAgICAgICAgICB0aXRsZTogXCJOb3QgZm91bmRcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGhpcyBwYWdlIGNvdWxkIG5vdCBiZSBmb3VuZC5cIlxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9KSxcbiAgICAgIGNoaWxkcmVuOiBwYXJzZWRQYXJhbXMgPT09IG51bGwgPyAvKiNfX1BVUkVfXyovanN4KEFsd2F5c05vdEZvdW5kLCB7fSkgOiBwYXJzZWRQYXJhbXMuY29sbGVjdGlvbiA/IHBhcnNlZFBhcmFtcy5raW5kID09PSAnY3JlYXRlJyA/IC8qI19fUFVSRV9fKi9qc3goQ3JlYXRlSXRlbVdyYXBwZXIsIHtcbiAgICAgICAgY29sbGVjdGlvbjogcGFyc2VkUGFyYW1zLmNvbGxlY3Rpb24sXG4gICAgICAgIGNvbmZpZzogY29uZmlnLFxuICAgICAgICBiYXNlUGF0aDogYmFzZVBhdGhcbiAgICAgIH0sIHBhcnNlZFBhcmFtcy5jb2xsZWN0aW9uKSA6IHBhcnNlZFBhcmFtcy5raW5kID09PSAnZWRpdCcgPyAvKiNfX1BVUkVfXyovanN4KEl0ZW1QYWdlV3JhcHBlciwge1xuICAgICAgICBjb2xsZWN0aW9uOiBwYXJzZWRQYXJhbXMuY29sbGVjdGlvbixcbiAgICAgICAgYmFzZVBhdGg6IGJhc2VQYXRoLFxuICAgICAgICBjb25maWc6IGNvbmZpZyxcbiAgICAgICAgaXRlbVNsdWc6IHBhcnNlZFBhcmFtcy5zbHVnXG4gICAgICB9LCBwYXJzZWRQYXJhbXMuY29sbGVjdGlvbikgOiAvKiNfX1BVUkVfXyovanN4KENvbGxlY3Rpb25QYWdlLCB7XG4gICAgICAgIGJhc2VQYXRoOiBiYXNlUGF0aCxcbiAgICAgICAgY29sbGVjdGlvbjogcGFyc2VkUGFyYW1zLmNvbGxlY3Rpb24sXG4gICAgICAgIGNvbmZpZzogY29uZmlnXG4gICAgICB9LCBwYXJzZWRQYXJhbXMuY29sbGVjdGlvbikgOiBwYXJzZWRQYXJhbXMuc2luZ2xldG9uID8gLyojX19QVVJFX18qL2pzeChTaW5nbGV0b25QYWdlV3JhcHBlciwge1xuICAgICAgICBjb25maWc6IGNvbmZpZyxcbiAgICAgICAgc2luZ2xldG9uOiBwYXJzZWRQYXJhbXMuc2luZ2xldG9uXG4gICAgICB9LCBwYXJzZWRQYXJhbXMuc2luZ2xldG9uKSA6IC8qI19fUFVSRV9fKi9qc3goRGFzaGJvYXJkUGFnZSwge1xuICAgICAgICBjb25maWc6IGNvbmZpZyxcbiAgICAgICAgYmFzZVBhdGg6IGJhc2VQYXRoXG4gICAgICB9KVxuICAgIH0pXG4gIH0pKTtcbn1cbmZ1bmN0aW9uIEFsd2F5c05vdEZvdW5kKCkge1xuICBub3RGb3VuZCgpO1xufVxuZnVuY3Rpb24gQXV0aFdyYXBwZXIocHJvcHMpIHtcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZSgndW5rbm93bicpO1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBnZXRBdXRoKHByb3BzLmNvbmZpZykudGhlbihhdXRoID0+IHtcbiAgICAgIGlmIChhdXRoKSB7XG4gICAgICAgIHNldFN0YXRlKCd2YWxpZCcpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZXRTdGF0ZSgnZXhwbGljaXQtYXV0aCcpO1xuICAgIH0pO1xuICB9LCBbcHJvcHMuY29uZmlnXSk7XG4gIGlmIChzdGF0ZSA9PT0gJ3ZhbGlkJykge1xuICAgIHJldHVybiBwcm9wcy5jaGlsZHJlbjtcbiAgfVxuICBpZiAoc3RhdGUgPT09ICdleHBsaWNpdC1hdXRoJykge1xuICAgIGlmIChwcm9wcy5jb25maWcuc3RvcmFnZS5raW5kID09PSAnZ2l0aHViJykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goRmxleCwge1xuICAgICAgICBqdXN0aWZ5Q29udGVudDogXCJjZW50ZXJcIixcbiAgICAgICAgYWxpZ25JdGVtczogXCJjZW50ZXJcIixcbiAgICAgICAgaGVpZ2h0OiBcIjEwMHZoXCIsXG4gICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4cyhCdXR0b24sIHtcbiAgICAgICAgICBocmVmOiBgL2FwaS9rZXlzdGF0aWMvZ2l0aHViL2xvZ2luJHtyb3V0ZXIucGFyYW1zLmxlbmd0aCA/IGA/JHtuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgICAgIGZyb206IHJvdXRlci5wYXJhbXMubWFwKGVuY29kZVVSSUNvbXBvbmVudCkuam9pbignLycpXG4gICAgICAgICAgfSl9YCA6ICcnfWBcbiAgICAgICAgICAvLyBldmVuIHRob3VnaCB3ZSdsbCBuZXZlciBiZSBpbiBhbiBpZnJhbWUsIHNvIHRoaXMgaXNuJ3QgcmVhbGx5IGRpc3RpbmN0IGZyb20gX3NlbGZcbiAgICAgICAgICAvLyBpdCBtYWtlcyByZWFjdC1hcmlhIGF2b2lkIHVzaW5nIGNsaWVudC1zaWRlIHJvdXRpbmcgd2hpY2ggd2UgbmVlZCBoZXJlXG4gICAgICAgICAgLFxuICAgICAgICAgIHRhcmdldDogXCJfdG9wXCIsXG4gICAgICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KEljb24sIHtcbiAgICAgICAgICAgIHNyYzogZ2l0aHViSWNvblxuICAgICAgICAgIH0pLCAvKiNfX1BVUkVfXyovanN4KFRleHQsIHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiBcIkxvZyBpbiB3aXRoIEdpdEh1YlwiXG4gICAgICAgICAgfSldXG4gICAgICAgIH0pXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHByb3BzLmNvbmZpZy5zdG9yYWdlLmtpbmQgPT09ICdjbG91ZCcpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KEZsZXgsIHtcbiAgICAgICAganVzdGlmeUNvbnRlbnQ6IFwiY2VudGVyXCIsXG4gICAgICAgIGFsaWduSXRlbXM6IFwiY2VudGVyXCIsXG4gICAgICAgIGhlaWdodDogXCIxMDB2aFwiLFxuICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChCdXR0b24sIHtcbiAgICAgICAgICBvblByZXNzOiAoKSA9PiB7XG4gICAgICAgICAgICByZWRpcmVjdFRvQ2xvdWRBdXRoKHJvdXRlci5wYXJhbXMubWFwKGVuY29kZVVSSUNvbXBvbmVudCkuam9pbignLycpLCBwcm9wcy5jb25maWcpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goVGV4dCwge1xuICAgICAgICAgICAgY2hpbGRyZW46IFwiTG9nIGluIHdpdGggS2V5c3RhdGljIENsb3VkXCJcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gUmVkaXJlY3RUb0xvb3BiYWNrKHByb3BzKSB7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSA9PT0gJ2xvY2FsaG9zdCcpIHtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gd2luZG93LmxvY2F0aW9uLmhyZWYucmVwbGFjZSgnbG9jYWxob3N0JywgJzEyNy4wLjAuMScpO1xuICAgIH1cbiAgfSwgW10pO1xuICBpZiAod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lID09PSAnbG9jYWxob3N0Jykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBwcm9wcy5jaGlsZHJlbjtcbn1cbmZ1bmN0aW9uIEtleXN0YXRpYyhwcm9wcykge1xuICBpZiAocHJvcHMuY29uZmlnLnN0b3JhZ2Uua2luZCA9PT0gJ2dpdGh1YicpIHtcbiAgICBhc3NlcnRWYWxpZFJlcG9Db25maWcocHJvcHMuY29uZmlnLnN0b3JhZ2UucmVwbyk7XG4gIH1cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goQ2xpZW50T25seSwge1xuICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KFJlZGlyZWN0VG9Mb29wYmFjaywge1xuICAgICAgY2hpbGRyZW46IC8qI19fUFVSRV9fKi9qc3goQXBwU2x1Z1Byb3ZpZGVyLCB7XG4gICAgICAgIHZhbHVlOiBwcm9wcy5hcHBTbHVnLFxuICAgICAgICBjaGlsZHJlbjogLyojX19QVVJFX18qL2pzeChSb3V0ZXJQcm92aWRlciwge1xuICAgICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KFByb3ZpZGVyLCB7XG4gICAgICAgICAgICBjb25maWc6IHByb3BzLmNvbmZpZyxcbiAgICAgICAgICAgIGNoaWxkcmVuOiAvKiNfX1BVUkVfXyovanN4KFBhZ2VJbm5lciwge1xuICAgICAgICAgICAgICBjb25maWc6IHByb3BzLmNvbmZpZ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KVxuICB9KTtcbn1cbmZ1bmN0aW9uIENsaWVudE9ubHkocHJvcHMpIHtcbiAgY29uc3QgW21vdW50ZWQsIHNldE1vdW50ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldE1vdW50ZWQodHJ1ZSk7XG4gIH0sIFtdKTtcbiAgaWYgKCFtb3VudGVkKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIHByb3BzLmNoaWxkcmVuO1xufVxuXG5leHBvcnQgeyBLZXlzdGF0aWMgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/ui/dist/keystatic-core-ui.node.esm.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/api/generic/dist/keystatic-core-api-generic.node.react-server.esm.js":
/*!***********************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/api/generic/dist/keystatic-core-api-generic.node.react-server.esm.js ***!
  \***********************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   makeGenericAPIRouteHandler: () => (/* binding */ makeGenericAPIRouteHandler)\n/* harmony export */ });\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cookie */ \"(rsc)/./node_modules/.pnpm/cookie@0.5.0/node_modules/cookie/index.js\");\n/* harmony import */ var iron_webcrypto__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! iron-webcrypto */ \"(rsc)/./node_modules/.pnpm/iron-webcrypto@0.10.1/node_modules/iron-webcrypto/dist/index.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/.pnpm/zod@3.22.5/node_modules/zod/lib/index.mjs\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:path */ \"node:path\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(node_path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! node:fs/promises */ \"node:fs/promises\");\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(node_fs_promises__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _dist_read_local_018858c4_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../dist/read-local-018858c4.node.react-server.esm.js */ \"(rsc)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/read-local-018858c4.node.react-server.esm.js\");\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(node_crypto__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _dist_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../dist/index-90608531.node.react-server.esm.js */ \"(rsc)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/index-90608531.node.react-server.esm.js\");\n/* harmony import */ var emery_assertions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! emery/assertions */ \"(rsc)/./node_modules/.pnpm/emery@1.4.3/node_modules/emery/assertions/dist/emery-assertions.esm.js\");\n/* harmony import */ var emery__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! emery */ \"(rsc)/./node_modules/.pnpm/emery@1.4.3/node_modules/emery/dist/emery.esm.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react/jsx-runtime */ \"(rsc)/./node_modules/.pnpm/next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-jsx-runtime.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var _emotion_weak_memoize__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @emotion/weak-memoize */ \"(rsc)/./node_modules/.pnpm/@emotion+weak-memoize@0.3.1/node_modules/@emotion/weak-memoize/dist/emotion-weak-memoize.esm.js\");\n/* harmony import */ var _sindresorhus_slugify__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @sindresorhus/slugify */ \"(rsc)/./node_modules/.pnpm/@sindresorhus+slugify@1.1.2/node_modules/@sindresorhus/slugify/index.js\");\n/* harmony import */ var _sindresorhus_slugify__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_sindresorhus_slugify__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var _braintree_sanitize_url__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @braintree/sanitize-url */ \"(rsc)/./node_modules/.pnpm/@braintree+sanitize-url@6.0.4/node_modules/@braintree/sanitize-url/dist/index.js\");\n/* harmony import */ var ignore__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ignore */ \"(rsc)/./node_modules/.pnpm/ignore@5.3.1/node_modules/ignore/index.js\");\n/* harmony import */ var ignore__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(ignore__WEBPACK_IMPORTED_MODULE_15__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction redirect(to, initialHeaders) {\n  return {\n    body: null,\n    status: 307,\n    headers: [...(initialHeaders !== null && initialHeaders !== void 0 ? initialHeaders : []), ['Location', to]]\n  };\n}\n\nconst ghAppSchema = zod__WEBPACK_IMPORTED_MODULE_16__.z.object({\n  slug: zod__WEBPACK_IMPORTED_MODULE_16__.z.string(),\n  client_id: zod__WEBPACK_IMPORTED_MODULE_16__.z.string(),\n  client_secret: zod__WEBPACK_IMPORTED_MODULE_16__.z.string()\n});\nconst wait = ms => new Promise(resolve => setTimeout(resolve, ms));\nasync function handleGitHubAppCreation(req, slugEnvVarName) {\n  const searchParams = new URL(req.url, 'https://localhost').searchParams;\n  const code = searchParams.get('code');\n  if (typeof code !== 'string' || !/^[a-zA-Z0-9]+$/.test(code)) {\n    return {\n      status: 400,\n      body: 'Bad Request'\n    };\n  }\n  const ghAppRes = await fetch(`https://api.github.com/app-manifests/${code}/conversions`, {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json'\n    }\n  });\n  if (!ghAppRes.ok) {\n    console.log(ghAppRes);\n    return {\n      status: 500,\n      body: 'An error occurred while creating the GitHub App'\n    };\n  }\n  const ghAppDataRaw = await ghAppRes.json();\n  const ghAppDataResult = ghAppSchema.safeParse(ghAppDataRaw);\n  if (!ghAppDataResult.success) {\n    console.log(ghAppDataRaw);\n    return {\n      status: 500,\n      body: 'An unexpected response was received from GitHub'\n    };\n  }\n  const toAddToEnv = `# Keystatic\nKEYSTATIC_GITHUB_CLIENT_ID=${ghAppDataResult.data.client_id}\nKEYSTATIC_GITHUB_CLIENT_SECRET=${ghAppDataResult.data.client_secret}\nKEYSTATIC_SECRET=${(0,node_crypto__WEBPACK_IMPORTED_MODULE_4__.randomBytes)(40).toString('hex')}\n${slugEnvVarName ? `${slugEnvVarName}=${ghAppDataResult.data.slug}\\n` : ''}`;\n  let prevEnv;\n  try {\n    prevEnv = await node_fs_promises__WEBPACK_IMPORTED_MODULE_2___default().readFile('.env', 'utf-8');\n  } catch (err) {\n    if (err.code !== 'ENOENT') throw err;\n  }\n  const newEnv = prevEnv ? `${prevEnv}\\n\\n${toAddToEnv}` : toAddToEnv;\n  await node_fs_promises__WEBPACK_IMPORTED_MODULE_2___default().writeFile('.env', newEnv);\n  await wait(200);\n  return redirect('/keystatic/created-github-app?slug=' + ghAppDataResult.data.slug);\n}\nfunction localModeApiHandler(config, localBaseDirectory) {\n  const baseDirectory = node_path__WEBPACK_IMPORTED_MODULE_1___default().resolve(localBaseDirectory !== null && localBaseDirectory !== void 0 ? localBaseDirectory : process.cwd());\n  return async (req, params) => {\n    const joined = params.join('/');\n    if (req.method === 'GET' && joined === 'tree') {\n      return tree(req, config, baseDirectory);\n    }\n    if (req.method === 'GET' && params[0] === 'blob') {\n      return blob(req, config, params, baseDirectory);\n    }\n    if (req.method === 'POST' && joined === 'update') {\n      return update(req, config, baseDirectory);\n    }\n    return {\n      status: 404,\n      body: 'Not Found'\n    };\n  };\n}\nasync function tree(req, config, baseDirectory) {\n  if (req.headers.get('no-cors') !== '1') {\n    return {\n      status: 400,\n      body: 'Bad Request'\n    };\n  }\n  return {\n    status: 200,\n    headers: {\n      'content-type': 'application/json'\n    },\n    body: JSON.stringify(await (0,_dist_read_local_018858c4_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_3__.r)(baseDirectory))\n  };\n}\nfunction getIsPathValid(config) {\n  const allowedDirectories = (0,_dist_read_local_018858c4_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_3__.g)(config);\n  return filepath => !filepath.includes('\\\\') && filepath.split('/').every(x => x !== '.' && x !== '..') && allowedDirectories.some(x => filepath.startsWith(x));\n}\nasync function blob(req, config, params, baseDirectory) {\n  if (req.headers.get('no-cors') !== '1') {\n    return {\n      status: 400,\n      body: 'Bad Request'\n    };\n  }\n  const expectedSha = params[1];\n  const filepath = params.slice(2).join('/');\n  const isFilepathValid = getIsPathValid(config);\n  if (!isFilepathValid(filepath)) {\n    return {\n      status: 400,\n      body: 'Bad Request'\n    };\n  }\n  let contents;\n  try {\n    contents = await node_fs_promises__WEBPACK_IMPORTED_MODULE_2___default().readFile(node_path__WEBPACK_IMPORTED_MODULE_1___default().join(baseDirectory, filepath));\n  } catch (err) {\n    if (err.code === 'ENOENT') {\n      return {\n        status: 404,\n        body: 'Not Found'\n      };\n    }\n    throw err;\n  }\n  const sha = await (0,_dist_read_local_018858c4_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_3__.b)(contents);\n  if (sha !== expectedSha) {\n    return {\n      status: 404,\n      body: 'Not Found'\n    };\n  }\n  return {\n    status: 200,\n    body: contents\n  };\n}\nasync function update(req, config, baseDirectory) {\n  if (req.headers.get('no-cors') !== '1' || req.headers.get('content-type') !== 'application/json') {\n    return {\n      status: 400,\n      body: 'Bad Request'\n    };\n  }\n  const isFilepathValid = getIsPathValid(config);\n  const updates = zod__WEBPACK_IMPORTED_MODULE_16__.z.object({\n    additions: zod__WEBPACK_IMPORTED_MODULE_16__.z.array(zod__WEBPACK_IMPORTED_MODULE_16__.z.object({\n      path: zod__WEBPACK_IMPORTED_MODULE_16__.z.string().refine(isFilepathValid),\n      contents: zod__WEBPACK_IMPORTED_MODULE_16__.z.string().transform(x => Buffer.from(x, 'base64'))\n    })),\n    deletions: zod__WEBPACK_IMPORTED_MODULE_16__.z.array(zod__WEBPACK_IMPORTED_MODULE_16__.z.object({\n      path: zod__WEBPACK_IMPORTED_MODULE_16__.z.string().refine(isFilepathValid)\n    }))\n  }).safeParse(await req.json());\n  if (!updates.success) {\n    return {\n      status: 400,\n      body: 'Bad data'\n    };\n  }\n  for (const addition of updates.data.additions) {\n    await node_fs_promises__WEBPACK_IMPORTED_MODULE_2___default().mkdir(node_path__WEBPACK_IMPORTED_MODULE_1___default().dirname(node_path__WEBPACK_IMPORTED_MODULE_1___default().join(baseDirectory, addition.path)), {\n      recursive: true\n    });\n    await node_fs_promises__WEBPACK_IMPORTED_MODULE_2___default().writeFile(node_path__WEBPACK_IMPORTED_MODULE_1___default().join(baseDirectory, addition.path), addition.contents);\n  }\n  for (const deletion of updates.data.deletions) {\n    await node_fs_promises__WEBPACK_IMPORTED_MODULE_2___default().rm(node_path__WEBPACK_IMPORTED_MODULE_1___default().join(baseDirectory, deletion.path), {\n      force: true\n    });\n  }\n  return {\n    status: 200,\n    headers: {\n      'content-type': 'application/json'\n    },\n    body: JSON.stringify(await (0,_dist_read_local_018858c4_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_3__.r)(baseDirectory))\n  };\n}\n\nfunction bytesToHex(bytes) {\n  let str = '';\n  for (const byte of bytes) {\n    str += byte.toString(16).padStart(2, '0');\n  }\n  return str;\n}\n\nconst keystaticRouteRegex = /^branch\\/[^]+(\\/collection\\/[^/]+(|\\/(create|item\\/[^/]+))|\\/singleton\\/[^/]+)?$/;\nconst keyToEnvVar = {\n  clientId: 'KEYSTATIC_GITHUB_CLIENT_ID',\n  clientSecret: 'KEYSTATIC_GITHUB_CLIENT_SECRET',\n  secret: 'KEYSTATIC_SECRET'\n};\nfunction tryOrUndefined(fn) {\n  try {\n    return fn();\n  } catch {\n    return undefined;\n  }\n}\nfunction makeGenericAPIRouteHandler(_config, options) {\n  var _config$clientId, _config$clientSecret, _config$secret;\n  const _config2 = {\n    clientId: (_config$clientId = _config.clientId) !== null && _config$clientId !== void 0 ? _config$clientId : tryOrUndefined(() => process.env.KEYSTATIC_GITHUB_CLIENT_ID),\n    clientSecret: (_config$clientSecret = _config.clientSecret) !== null && _config$clientSecret !== void 0 ? _config$clientSecret : tryOrUndefined(() => process.env.KEYSTATIC_GITHUB_CLIENT_SECRET),\n    secret: (_config$secret = _config.secret) !== null && _config$secret !== void 0 ? _config$secret : tryOrUndefined(() => process.env.KEYSTATIC_SECRET),\n    config: _config.config\n  };\n  const getParams = req => {\n    let url;\n    try {\n      url = new URL(req.url);\n    } catch (err) {\n      throw new Error(`Found incomplete URL in Keystatic API route URL handler${(options === null || options === void 0 ? void 0 : options.slugEnvName) === 'NEXT_PUBLIC_KEYSTATIC_GITHUB_APP_SLUG' ? \". Make sure you're using the latest version of @keystatic/next\" : ''}`);\n    }\n    return url.pathname.replace(/^\\/api\\/keystatic\\/?/, '').split('/').map(x => decodeURIComponent(x)).filter(Boolean);\n  };\n  if (_config2.config.storage.kind === 'local') {\n    const handler = localModeApiHandler(_config2.config, _config.localBaseDirectory);\n    return req => {\n      const params = getParams(req);\n      return handler(req, params);\n    };\n  }\n  if (_config2.config.storage.kind === 'cloud') {\n    return async function keystaticAPIRoute() {\n      return {\n        status: 404,\n        body: 'Not Found'\n      };\n    };\n  }\n  if (!_config2.clientId || !_config2.clientSecret || !_config2.secret) {\n    if (false) {}\n    return async function keystaticAPIRoute(req) {\n      const params = getParams(req);\n      const joined = params.join('/');\n      if (joined === 'github/created-app') {\n        return createdGithubApp(req, options === null || options === void 0 ? void 0 : options.slugEnvName);\n      }\n      if (joined === 'github/login' || joined === 'github/repo-not-found' || joined === 'github/logout') {\n        return redirect('/keystatic/setup');\n      }\n      return {\n        status: 404,\n        body: 'Not Found'\n      };\n    };\n  }\n  const config = {\n    clientId: _config2.clientId,\n    clientSecret: _config2.clientSecret,\n    secret: _config2.secret,\n    config: _config2.config\n  };\n  return async function keystaticAPIRoute(req) {\n    const params = getParams(req);\n    const joined = params.join('/');\n    if (joined === 'github/oauth/callback') {\n      return githubOauthCallback(req, config);\n    }\n    if (joined === 'github/login') {\n      return githubLogin(req, config);\n    }\n    if (joined === 'github/refresh-token') {\n      return githubRefreshToken(req, config);\n    }\n    if (joined === 'github/repo-not-found') {\n      return githubRepoNotFound(req, config);\n    }\n    if (joined === 'github/logout') {\n      return redirect('/keystatic', [['Set-Cookie', immediatelyExpiringCookie('keystatic-gh-access-token')], ['Set-Cookie', immediatelyExpiringCookie('keystatic-gh-refresh-token')]]);\n    }\n    return {\n      status: 404,\n      body: 'Not Found'\n    };\n  };\n}\nconst tokenDataResultType = zod__WEBPACK_IMPORTED_MODULE_16__[\"default\"].object({\n  access_token: zod__WEBPACK_IMPORTED_MODULE_16__[\"default\"].string(),\n  expires_in: zod__WEBPACK_IMPORTED_MODULE_16__[\"default\"].number(),\n  refresh_token: zod__WEBPACK_IMPORTED_MODULE_16__[\"default\"].string(),\n  refresh_token_expires_in: zod__WEBPACK_IMPORTED_MODULE_16__[\"default\"].number(),\n  scope: zod__WEBPACK_IMPORTED_MODULE_16__[\"default\"].string(),\n  token_type: zod__WEBPACK_IMPORTED_MODULE_16__[\"default\"].literal('bearer')\n});\nasync function githubOauthCallback(req, config) {\n  var _req$headers$get;\n  const searchParams = new URL(req.url, 'http://localhost').searchParams;\n  const error = searchParams.get('error');\n  const errorDescription = searchParams.get('error_description');\n  if (typeof errorDescription === 'string') {\n    return {\n      status: 400,\n      body: `An error occurred when trying to authenticate with GitHub:\\n${errorDescription}${error === 'redirect_uri_mismatch' ? `\\n\\nIf you were trying to sign in locally and recently upgraded Keystatic from @keystatic/core@0.0.69 or below, you need to add \\`http://127.0.0.1/api/keystatic/github/oauth/callback\\` as a callback URL in your GitHub app.` : ''}`\n    };\n  }\n  const code = searchParams.get('code');\n  const state = searchParams.get('state');\n  if (typeof code !== 'string') {\n    return {\n      status: 400,\n      body: 'Bad Request'\n    };\n  }\n  const cookies = cookie__WEBPACK_IMPORTED_MODULE_0__.parse((_req$headers$get = req.headers.get('cookie')) !== null && _req$headers$get !== void 0 ? _req$headers$get : '');\n  const fromCookie = state ? cookies['ks-' + state] : undefined;\n  const from = typeof fromCookie === 'string' && keystaticRouteRegex.test(fromCookie) ? fromCookie : undefined;\n  const url = new URL('https://github.com/login/oauth/access_token');\n  url.searchParams.set('client_id', config.clientId);\n  url.searchParams.set('client_secret', config.clientSecret);\n  url.searchParams.set('code', code);\n  const tokenRes = await fetch(url, {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json'\n    }\n  });\n  if (!tokenRes.ok) {\n    return {\n      status: 401,\n      body: 'Authorization failed'\n    };\n  }\n  const _tokenData = await tokenRes.json();\n  const tokenDataParseResult = tokenDataResultType.safeParse(_tokenData);\n  if (!tokenDataParseResult.success) {\n    return {\n      status: 401,\n      body: 'Authorization failed'\n    };\n  }\n  const headers = await getTokenCookies(tokenDataParseResult.data, config);\n  if (state === 'close') {\n    return {\n      headers: [...headers, ['Content-Type', 'text/html']],\n      body: \"<script>localStorage.setItem('ks-refetch-installations', 'true');window.close();</script>\",\n      status: 200\n    };\n  }\n  return redirect(`/keystatic${from ? `/${from}` : ''}`, headers);\n}\nasync function getTokenCookies(tokenData, config) {\n  const headers = [['Set-Cookie', cookie__WEBPACK_IMPORTED_MODULE_0__.serialize('keystatic-gh-access-token', tokenData.access_token, {\n    sameSite: 'lax',\n    secure: \"development\" === 'production',\n    maxAge: tokenData.expires_in,\n    expires: new Date(Date.now() + tokenData.expires_in * 1000),\n    path: '/'\n  })], ['Set-Cookie', cookie__WEBPACK_IMPORTED_MODULE_0__.serialize('keystatic-gh-refresh-token', await iron_webcrypto__WEBPACK_IMPORTED_MODULE_17__.seal(node_crypto__WEBPACK_IMPORTED_MODULE_4__.webcrypto, tokenData.refresh_token, config.secret, {\n    ...iron_webcrypto__WEBPACK_IMPORTED_MODULE_17__.defaults,\n    ttl: tokenData.refresh_token_expires_in * 1000\n  }), {\n    sameSite: 'lax',\n    secure: \"development\" === 'production',\n    httpOnly: true,\n    maxAge: tokenData.refresh_token_expires_in,\n    expires: new Date(Date.now() + tokenData.refresh_token_expires_in * 100),\n    path: '/'\n  })]];\n  return headers;\n}\nasync function getRefreshToken(req, config) {\n  const cookies = cookie__WEBPACK_IMPORTED_MODULE_0__.parse(req.headers.get('cookie') || '');\n  const refreshTokenCookie = cookies['keystatic-gh-refresh-token'];\n  if (!refreshTokenCookie) return;\n  let refreshToken;\n  try {\n    refreshToken = await iron_webcrypto__WEBPACK_IMPORTED_MODULE_17__.unseal(node_crypto__WEBPACK_IMPORTED_MODULE_4__.webcrypto, refreshTokenCookie, config.secret, iron_webcrypto__WEBPACK_IMPORTED_MODULE_17__.defaults);\n  } catch {\n    return;\n  }\n  if (typeof refreshToken !== 'string') return;\n  return refreshToken;\n}\nasync function githubRefreshToken(req, config) {\n  const headers = await refreshGitHubAuth(req, config);\n  if (!headers) {\n    return {\n      status: 401,\n      body: 'Authorization failed'\n    };\n  }\n  return {\n    status: 200,\n    headers,\n    body: ''\n  };\n}\nasync function refreshGitHubAuth(req, config) {\n  const refreshToken = await getRefreshToken(req, config);\n  if (!refreshToken) {\n    return;\n  }\n  const url = new URL('https://github.com/login/oauth/access_token');\n  url.searchParams.set('client_id', config.clientId);\n  url.searchParams.set('client_secret', config.clientSecret);\n  url.searchParams.set('grant_type', 'refresh_token');\n  url.searchParams.set('refresh_token', refreshToken);\n  const tokenRes = await fetch(url, {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json'\n    }\n  });\n  if (!tokenRes.ok) {\n    return;\n  }\n  const _tokenData = await tokenRes.json();\n  const tokenDataParseResult = tokenDataResultType.safeParse(_tokenData);\n  if (!tokenDataParseResult.success) {\n    return;\n  }\n  return getTokenCookies(tokenDataParseResult.data, config);\n}\nasync function githubRepoNotFound(req, config) {\n  const headers = await refreshGitHubAuth(req, config);\n  if (headers) {\n    return redirect('/keystatic/repo-not-found', headers);\n  }\n  return githubLogin(req, config);\n}\nasync function githubLogin(req, config) {\n  const reqUrl = new URL(req.url);\n  const rawFrom = reqUrl.searchParams.get('from');\n  const from = typeof rawFrom === 'string' && keystaticRouteRegex.test(rawFrom) ? rawFrom : '/';\n  const state = bytesToHex(node_crypto__WEBPACK_IMPORTED_MODULE_4__.webcrypto.getRandomValues(new Uint8Array(10)));\n  const url = new URL('https://github.com/login/oauth/authorize');\n  url.searchParams.set('client_id', config.clientId);\n  url.searchParams.set('redirect_uri', `${reqUrl.origin}/api/keystatic/github/oauth/callback`);\n  if (from === '/') {\n    return redirect(url.toString());\n  }\n  url.searchParams.set('state', state);\n  return redirect(url.toString(), [['Set-Cookie', cookie__WEBPACK_IMPORTED_MODULE_0__.serialize('ks-' + state, from, {\n    sameSite: 'lax',\n    secure: \"development\" === 'production',\n    // 1 day\n    maxAge: 60 * 60 * 24,\n    expires: new Date(Date.now() + 60 * 60 * 24 * 1000),\n    path: '/',\n    httpOnly: true\n  })]]);\n}\nasync function createdGithubApp(req, slugEnvVarName) {\n  if (false) {}\n  return handleGitHubAppCreation(req, slugEnvVarName);\n}\nfunction immediatelyExpiringCookie(name) {\n  return cookie__WEBPACK_IMPORTED_MODULE_0__.serialize(name, '', {\n    secure: \"development\" === 'production',\n    sameSite: 'lax',\n    path: '/',\n    maxAge: 0,\n    expires: new Date()\n  });\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGtleXN0YXRpYytjb3JlQDAuMi4xMl9uZXh0QDE0LjIuMl9yZWFjdC1kb21AMTguMi4wX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2FwaS9nZW5lcmljL2Rpc3Qva2V5c3RhdGljLWNvcmUtYXBpLWdlbmVyaWMubm9kZS5yZWFjdC1zZXJ2ZXIuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNEI7QUFDVztBQUNWO0FBQ0E7QUFDSztBQUMyRztBQUN4RjtBQUNoQztBQUNQO0FBQ2lEO0FBQ3JDO0FBQ1g7QUFDVztBQUNYO0FBQ0k7QUFDSDtBQUNXO0FBQ0k7QUFDQTtBQUNFO0FBQ2pCOztBQUVoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxvQkFBb0IsbUNBQUM7QUFDckIsUUFBUSxtQ0FBQztBQUNULGFBQWEsbUNBQUM7QUFDZCxpQkFBaUIsbUNBQUM7QUFDbEIsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLEtBQUs7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QixpQ0FBaUM7QUFDakMsbUJBQW1CLHdEQUFXO0FBQzlCLEVBQUUsb0JBQW9CLGVBQWUsR0FBRywwQkFBMEIsU0FBUztBQUMzRTtBQUNBO0FBQ0Esb0JBQW9CLGdFQUFXO0FBQy9CLElBQUk7QUFDSjtBQUNBO0FBQ0EsOEJBQThCLFFBQVEsTUFBTSxXQUFXO0FBQ3ZELFFBQVEsaUVBQVk7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isd0RBQVk7QUFDcEM7QUFDQTtBQUNB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QTtBQUNBLFNBQVMsNkNBQWdCO0FBQ3pCLFlBQVksYUFBb0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRXNDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGtleXN0YXRpYy90ZW1wbGF0ZXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0BrZXlzdGF0aWMrY29yZUAwLjIuMTJfbmV4dEAxNC4yLjJfcmVhY3QtZG9tQDE4LjIuMF9yZWFjdEAxOC4yLjAvbm9kZV9tb2R1bGVzL0BrZXlzdGF0aWMvY29yZS9hcGkvZ2VuZXJpYy9kaXN0L2tleXN0YXRpYy1jb3JlLWFwaS1nZW5lcmljLm5vZGUucmVhY3Qtc2VydmVyLmVzbS5qcz8wZmY0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb29raWUgZnJvbSAnY29va2llJztcbmltcG9ydCAqIGFzIElyb24gZnJvbSAnaXJvbi13ZWJjcnlwdG8nO1xuaW1wb3J0IHokMSwgeyB6IH0gZnJvbSAnem9kJztcbmltcG9ydCBwYXRoIGZyb20gJ25vZGU6cGF0aCc7XG5pbXBvcnQgZnMgZnJvbSAnbm9kZTpmcy9wcm9taXNlcyc7XG5pbXBvcnQgeyByIGFzIHJlYWRUb0RpckVudHJpZXMsIGIgYXMgYmxvYlNoYSwgZyBhcyBnZXRBbGxvd2VkRGlyZWN0b3JpZXMgfSBmcm9tICcuLi8uLi8uLi9kaXN0L3JlYWQtbG9jYWwtMDE4ODU4YzQubm9kZS5yZWFjdC1zZXJ2ZXIuZXNtLmpzJztcbmltcG9ydCB7IHJhbmRvbUJ5dGVzLCB3ZWJjcnlwdG8gfSBmcm9tICdub2RlOmNyeXB0byc7XG5pbXBvcnQgJ2ZzL3Byb21pc2VzJztcbmltcG9ydCAncGF0aCc7XG5pbXBvcnQgJy4uLy4uLy4uL2Rpc3QvaW5kZXgtOTA2MDg1MzEubm9kZS5yZWFjdC1zZXJ2ZXIuZXNtLmpzJztcbmltcG9ydCAnQG1hcmtkb2MvbWFya2RvYyc7XG5pbXBvcnQgJ3NsYXRlJztcbmltcG9ydCAnZW1lcnkvYXNzZXJ0aW9ucyc7XG5pbXBvcnQgJ2VtZXJ5JztcbmltcG9ydCAnanMtYmFzZTY0JztcbmltcG9ydCAnY3J5cHRvJztcbmltcG9ydCAncmVhY3QvanN4LXJ1bnRpbWUnO1xuaW1wb3J0ICdAZW1vdGlvbi93ZWFrLW1lbW9pemUnO1xuaW1wb3J0ICdAc2luZHJlc29yaHVzL3NsdWdpZnknO1xuaW1wb3J0ICdAYnJhaW50cmVlL3Nhbml0aXplLXVybCc7XG5pbXBvcnQgJ2lnbm9yZSc7XG5cbmZ1bmN0aW9uIHJlZGlyZWN0KHRvLCBpbml0aWFsSGVhZGVycykge1xuICByZXR1cm4ge1xuICAgIGJvZHk6IG51bGwsXG4gICAgc3RhdHVzOiAzMDcsXG4gICAgaGVhZGVyczogWy4uLihpbml0aWFsSGVhZGVycyAhPT0gbnVsbCAmJiBpbml0aWFsSGVhZGVycyAhPT0gdm9pZCAwID8gaW5pdGlhbEhlYWRlcnMgOiBbXSksIFsnTG9jYXRpb24nLCB0b11dXG4gIH07XG59XG5cbmNvbnN0IGdoQXBwU2NoZW1hID0gei5vYmplY3Qoe1xuICBzbHVnOiB6LnN0cmluZygpLFxuICBjbGllbnRfaWQ6IHouc3RyaW5nKCksXG4gIGNsaWVudF9zZWNyZXQ6IHouc3RyaW5nKClcbn0pO1xuY29uc3Qgd2FpdCA9IG1zID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xuYXN5bmMgZnVuY3Rpb24gaGFuZGxlR2l0SHViQXBwQ3JlYXRpb24ocmVxLCBzbHVnRW52VmFyTmFtZSkge1xuICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMKHJlcS51cmwsICdodHRwczovL2xvY2FsaG9zdCcpLnNlYXJjaFBhcmFtcztcbiAgY29uc3QgY29kZSA9IHNlYXJjaFBhcmFtcy5nZXQoJ2NvZGUnKTtcbiAgaWYgKHR5cGVvZiBjb2RlICE9PSAnc3RyaW5nJyB8fCAhL15bYS16QS1aMC05XSskLy50ZXN0KGNvZGUpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogNDAwLFxuICAgICAgYm9keTogJ0JhZCBSZXF1ZXN0J1xuICAgIH07XG4gIH1cbiAgY29uc3QgZ2hBcHBSZXMgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9hcHAtbWFuaWZlc3RzLyR7Y29kZX0vY29udmVyc2lvbnNgLCB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgaGVhZGVyczoge1xuICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbidcbiAgICB9XG4gIH0pO1xuICBpZiAoIWdoQXBwUmVzLm9rKSB7XG4gICAgY29uc29sZS5sb2coZ2hBcHBSZXMpO1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IDUwMCxcbiAgICAgIGJvZHk6ICdBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBjcmVhdGluZyB0aGUgR2l0SHViIEFwcCdcbiAgICB9O1xuICB9XG4gIGNvbnN0IGdoQXBwRGF0YVJhdyA9IGF3YWl0IGdoQXBwUmVzLmpzb24oKTtcbiAgY29uc3QgZ2hBcHBEYXRhUmVzdWx0ID0gZ2hBcHBTY2hlbWEuc2FmZVBhcnNlKGdoQXBwRGF0YVJhdyk7XG4gIGlmICghZ2hBcHBEYXRhUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICBjb25zb2xlLmxvZyhnaEFwcERhdGFSYXcpO1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IDUwMCxcbiAgICAgIGJvZHk6ICdBbiB1bmV4cGVjdGVkIHJlc3BvbnNlIHdhcyByZWNlaXZlZCBmcm9tIEdpdEh1YidcbiAgICB9O1xuICB9XG4gIGNvbnN0IHRvQWRkVG9FbnYgPSBgIyBLZXlzdGF0aWNcbktFWVNUQVRJQ19HSVRIVUJfQ0xJRU5UX0lEPSR7Z2hBcHBEYXRhUmVzdWx0LmRhdGEuY2xpZW50X2lkfVxuS0VZU1RBVElDX0dJVEhVQl9DTElFTlRfU0VDUkVUPSR7Z2hBcHBEYXRhUmVzdWx0LmRhdGEuY2xpZW50X3NlY3JldH1cbktFWVNUQVRJQ19TRUNSRVQ9JHtyYW5kb21CeXRlcyg0MCkudG9TdHJpbmcoJ2hleCcpfVxuJHtzbHVnRW52VmFyTmFtZSA/IGAke3NsdWdFbnZWYXJOYW1lfT0ke2doQXBwRGF0YVJlc3VsdC5kYXRhLnNsdWd9XFxuYCA6ICcnfWA7XG4gIGxldCBwcmV2RW52O1xuICB0cnkge1xuICAgIHByZXZFbnYgPSBhd2FpdCBmcy5yZWFkRmlsZSgnLmVudicsICd1dGYtOCcpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBpZiAoZXJyLmNvZGUgIT09ICdFTk9FTlQnKSB0aHJvdyBlcnI7XG4gIH1cbiAgY29uc3QgbmV3RW52ID0gcHJldkVudiA/IGAke3ByZXZFbnZ9XFxuXFxuJHt0b0FkZFRvRW52fWAgOiB0b0FkZFRvRW52O1xuICBhd2FpdCBmcy53cml0ZUZpbGUoJy5lbnYnLCBuZXdFbnYpO1xuICBhd2FpdCB3YWl0KDIwMCk7XG4gIHJldHVybiByZWRpcmVjdCgnL2tleXN0YXRpYy9jcmVhdGVkLWdpdGh1Yi1hcHA/c2x1Zz0nICsgZ2hBcHBEYXRhUmVzdWx0LmRhdGEuc2x1Zyk7XG59XG5mdW5jdGlvbiBsb2NhbE1vZGVBcGlIYW5kbGVyKGNvbmZpZywgbG9jYWxCYXNlRGlyZWN0b3J5KSB7XG4gIGNvbnN0IGJhc2VEaXJlY3RvcnkgPSBwYXRoLnJlc29sdmUobG9jYWxCYXNlRGlyZWN0b3J5ICE9PSBudWxsICYmIGxvY2FsQmFzZURpcmVjdG9yeSAhPT0gdm9pZCAwID8gbG9jYWxCYXNlRGlyZWN0b3J5IDogcHJvY2Vzcy5jd2QoKSk7XG4gIHJldHVybiBhc3luYyAocmVxLCBwYXJhbXMpID0+IHtcbiAgICBjb25zdCBqb2luZWQgPSBwYXJhbXMuam9pbignLycpO1xuICAgIGlmIChyZXEubWV0aG9kID09PSAnR0VUJyAmJiBqb2luZWQgPT09ICd0cmVlJykge1xuICAgICAgcmV0dXJuIHRyZWUocmVxLCBjb25maWcsIGJhc2VEaXJlY3RvcnkpO1xuICAgIH1cbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ0dFVCcgJiYgcGFyYW1zWzBdID09PSAnYmxvYicpIHtcbiAgICAgIHJldHVybiBibG9iKHJlcSwgY29uZmlnLCBwYXJhbXMsIGJhc2VEaXJlY3RvcnkpO1xuICAgIH1cbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ1BPU1QnICYmIGpvaW5lZCA9PT0gJ3VwZGF0ZScpIHtcbiAgICAgIHJldHVybiB1cGRhdGUocmVxLCBjb25maWcsIGJhc2VEaXJlY3RvcnkpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiA0MDQsXG4gICAgICBib2R5OiAnTm90IEZvdW5kJ1xuICAgIH07XG4gIH07XG59XG5hc3luYyBmdW5jdGlvbiB0cmVlKHJlcSwgY29uZmlnLCBiYXNlRGlyZWN0b3J5KSB7XG4gIGlmIChyZXEuaGVhZGVycy5nZXQoJ25vLWNvcnMnKSAhPT0gJzEnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogNDAwLFxuICAgICAgYm9keTogJ0JhZCBSZXF1ZXN0J1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBzdGF0dXM6IDIwMCxcbiAgICBoZWFkZXJzOiB7XG4gICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgfSxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShhd2FpdCByZWFkVG9EaXJFbnRyaWVzKGJhc2VEaXJlY3RvcnkpKVxuICB9O1xufVxuZnVuY3Rpb24gZ2V0SXNQYXRoVmFsaWQoY29uZmlnKSB7XG4gIGNvbnN0IGFsbG93ZWREaXJlY3RvcmllcyA9IGdldEFsbG93ZWREaXJlY3Rvcmllcyhjb25maWcpO1xuICByZXR1cm4gZmlsZXBhdGggPT4gIWZpbGVwYXRoLmluY2x1ZGVzKCdcXFxcJykgJiYgZmlsZXBhdGguc3BsaXQoJy8nKS5ldmVyeSh4ID0+IHggIT09ICcuJyAmJiB4ICE9PSAnLi4nKSAmJiBhbGxvd2VkRGlyZWN0b3JpZXMuc29tZSh4ID0+IGZpbGVwYXRoLnN0YXJ0c1dpdGgoeCkpO1xufVxuYXN5bmMgZnVuY3Rpb24gYmxvYihyZXEsIGNvbmZpZywgcGFyYW1zLCBiYXNlRGlyZWN0b3J5KSB7XG4gIGlmIChyZXEuaGVhZGVycy5nZXQoJ25vLWNvcnMnKSAhPT0gJzEnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogNDAwLFxuICAgICAgYm9keTogJ0JhZCBSZXF1ZXN0J1xuICAgIH07XG4gIH1cbiAgY29uc3QgZXhwZWN0ZWRTaGEgPSBwYXJhbXNbMV07XG4gIGNvbnN0IGZpbGVwYXRoID0gcGFyYW1zLnNsaWNlKDIpLmpvaW4oJy8nKTtcbiAgY29uc3QgaXNGaWxlcGF0aFZhbGlkID0gZ2V0SXNQYXRoVmFsaWQoY29uZmlnKTtcbiAgaWYgKCFpc0ZpbGVwYXRoVmFsaWQoZmlsZXBhdGgpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogNDAwLFxuICAgICAgYm9keTogJ0JhZCBSZXF1ZXN0J1xuICAgIH07XG4gIH1cbiAgbGV0IGNvbnRlbnRzO1xuICB0cnkge1xuICAgIGNvbnRlbnRzID0gYXdhaXQgZnMucmVhZEZpbGUocGF0aC5qb2luKGJhc2VEaXJlY3RvcnksIGZpbGVwYXRoKSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGlmIChlcnIuY29kZSA9PT0gJ0VOT0VOVCcpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogNDA0LFxuICAgICAgICBib2R5OiAnTm90IEZvdW5kJ1xuICAgICAgfTtcbiAgICB9XG4gICAgdGhyb3cgZXJyO1xuICB9XG4gIGNvbnN0IHNoYSA9IGF3YWl0IGJsb2JTaGEoY29udGVudHMpO1xuICBpZiAoc2hhICE9PSBleHBlY3RlZFNoYSkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IDQwNCxcbiAgICAgIGJvZHk6ICdOb3QgRm91bmQnXG4gICAgfTtcbiAgfVxuICByZXR1cm4ge1xuICAgIHN0YXR1czogMjAwLFxuICAgIGJvZHk6IGNvbnRlbnRzXG4gIH07XG59XG5hc3luYyBmdW5jdGlvbiB1cGRhdGUocmVxLCBjb25maWcsIGJhc2VEaXJlY3RvcnkpIHtcbiAgaWYgKHJlcS5oZWFkZXJzLmdldCgnbm8tY29ycycpICE9PSAnMScgfHwgcmVxLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKSAhPT0gJ2FwcGxpY2F0aW9uL2pzb24nKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogNDAwLFxuICAgICAgYm9keTogJ0JhZCBSZXF1ZXN0J1xuICAgIH07XG4gIH1cbiAgY29uc3QgaXNGaWxlcGF0aFZhbGlkID0gZ2V0SXNQYXRoVmFsaWQoY29uZmlnKTtcbiAgY29uc3QgdXBkYXRlcyA9IHoub2JqZWN0KHtcbiAgICBhZGRpdGlvbnM6IHouYXJyYXkoei5vYmplY3Qoe1xuICAgICAgcGF0aDogei5zdHJpbmcoKS5yZWZpbmUoaXNGaWxlcGF0aFZhbGlkKSxcbiAgICAgIGNvbnRlbnRzOiB6LnN0cmluZygpLnRyYW5zZm9ybSh4ID0+IEJ1ZmZlci5mcm9tKHgsICdiYXNlNjQnKSlcbiAgICB9KSksXG4gICAgZGVsZXRpb25zOiB6LmFycmF5KHoub2JqZWN0KHtcbiAgICAgIHBhdGg6IHouc3RyaW5nKCkucmVmaW5lKGlzRmlsZXBhdGhWYWxpZClcbiAgICB9KSlcbiAgfSkuc2FmZVBhcnNlKGF3YWl0IHJlcS5qc29uKCkpO1xuICBpZiAoIXVwZGF0ZXMuc3VjY2Vzcykge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IDQwMCxcbiAgICAgIGJvZHk6ICdCYWQgZGF0YSdcbiAgICB9O1xuICB9XG4gIGZvciAoY29uc3QgYWRkaXRpb24gb2YgdXBkYXRlcy5kYXRhLmFkZGl0aW9ucykge1xuICAgIGF3YWl0IGZzLm1rZGlyKHBhdGguZGlybmFtZShwYXRoLmpvaW4oYmFzZURpcmVjdG9yeSwgYWRkaXRpb24ucGF0aCkpLCB7XG4gICAgICByZWN1cnNpdmU6IHRydWVcbiAgICB9KTtcbiAgICBhd2FpdCBmcy53cml0ZUZpbGUocGF0aC5qb2luKGJhc2VEaXJlY3RvcnksIGFkZGl0aW9uLnBhdGgpLCBhZGRpdGlvbi5jb250ZW50cyk7XG4gIH1cbiAgZm9yIChjb25zdCBkZWxldGlvbiBvZiB1cGRhdGVzLmRhdGEuZGVsZXRpb25zKSB7XG4gICAgYXdhaXQgZnMucm0ocGF0aC5qb2luKGJhc2VEaXJlY3RvcnksIGRlbGV0aW9uLnBhdGgpLCB7XG4gICAgICBmb3JjZTogdHJ1ZVxuICAgIH0pO1xuICB9XG4gIHJldHVybiB7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgaGVhZGVyczoge1xuICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgIH0sXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYXdhaXQgcmVhZFRvRGlyRW50cmllcyhiYXNlRGlyZWN0b3J5KSlcbiAgfTtcbn1cblxuZnVuY3Rpb24gYnl0ZXNUb0hleChieXRlcykge1xuICBsZXQgc3RyID0gJyc7XG4gIGZvciAoY29uc3QgYnl0ZSBvZiBieXRlcykge1xuICAgIHN0ciArPSBieXRlLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAnMCcpO1xuICB9XG4gIHJldHVybiBzdHI7XG59XG5cbmNvbnN0IGtleXN0YXRpY1JvdXRlUmVnZXggPSAvXmJyYW5jaFxcL1teXSsoXFwvY29sbGVjdGlvblxcL1teL10rKHxcXC8oY3JlYXRlfGl0ZW1cXC9bXi9dKykpfFxcL3NpbmdsZXRvblxcL1teL10rKT8kLztcbmNvbnN0IGtleVRvRW52VmFyID0ge1xuICBjbGllbnRJZDogJ0tFWVNUQVRJQ19HSVRIVUJfQ0xJRU5UX0lEJyxcbiAgY2xpZW50U2VjcmV0OiAnS0VZU1RBVElDX0dJVEhVQl9DTElFTlRfU0VDUkVUJyxcbiAgc2VjcmV0OiAnS0VZU1RBVElDX1NFQ1JFVCdcbn07XG5mdW5jdGlvbiB0cnlPclVuZGVmaW5lZChmbikge1xuICB0cnkge1xuICAgIHJldHVybiBmbigpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5mdW5jdGlvbiBtYWtlR2VuZXJpY0FQSVJvdXRlSGFuZGxlcihfY29uZmlnLCBvcHRpb25zKSB7XG4gIHZhciBfY29uZmlnJGNsaWVudElkLCBfY29uZmlnJGNsaWVudFNlY3JldCwgX2NvbmZpZyRzZWNyZXQ7XG4gIGNvbnN0IF9jb25maWcyID0ge1xuICAgIGNsaWVudElkOiAoX2NvbmZpZyRjbGllbnRJZCA9IF9jb25maWcuY2xpZW50SWQpICE9PSBudWxsICYmIF9jb25maWckY2xpZW50SWQgIT09IHZvaWQgMCA/IF9jb25maWckY2xpZW50SWQgOiB0cnlPclVuZGVmaW5lZCgoKSA9PiBwcm9jZXNzLmVudi5LRVlTVEFUSUNfR0lUSFVCX0NMSUVOVF9JRCksXG4gICAgY2xpZW50U2VjcmV0OiAoX2NvbmZpZyRjbGllbnRTZWNyZXQgPSBfY29uZmlnLmNsaWVudFNlY3JldCkgIT09IG51bGwgJiYgX2NvbmZpZyRjbGllbnRTZWNyZXQgIT09IHZvaWQgMCA/IF9jb25maWckY2xpZW50U2VjcmV0IDogdHJ5T3JVbmRlZmluZWQoKCkgPT4gcHJvY2Vzcy5lbnYuS0VZU1RBVElDX0dJVEhVQl9DTElFTlRfU0VDUkVUKSxcbiAgICBzZWNyZXQ6IChfY29uZmlnJHNlY3JldCA9IF9jb25maWcuc2VjcmV0KSAhPT0gbnVsbCAmJiBfY29uZmlnJHNlY3JldCAhPT0gdm9pZCAwID8gX2NvbmZpZyRzZWNyZXQgOiB0cnlPclVuZGVmaW5lZCgoKSA9PiBwcm9jZXNzLmVudi5LRVlTVEFUSUNfU0VDUkVUKSxcbiAgICBjb25maWc6IF9jb25maWcuY29uZmlnXG4gIH07XG4gIGNvbnN0IGdldFBhcmFtcyA9IHJlcSA9PiB7XG4gICAgbGV0IHVybDtcbiAgICB0cnkge1xuICAgICAgdXJsID0gbmV3IFVSTChyZXEudXJsKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRm91bmQgaW5jb21wbGV0ZSBVUkwgaW4gS2V5c3RhdGljIEFQSSByb3V0ZSBVUkwgaGFuZGxlciR7KG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5zbHVnRW52TmFtZSkgPT09ICdORVhUX1BVQkxJQ19LRVlTVEFUSUNfR0lUSFVCX0FQUF9TTFVHJyA/IFwiLiBNYWtlIHN1cmUgeW91J3JlIHVzaW5nIHRoZSBsYXRlc3QgdmVyc2lvbiBvZiBAa2V5c3RhdGljL25leHRcIiA6ICcnfWApO1xuICAgIH1cbiAgICByZXR1cm4gdXJsLnBhdGhuYW1lLnJlcGxhY2UoL15cXC9hcGlcXC9rZXlzdGF0aWNcXC8/LywgJycpLnNwbGl0KCcvJykubWFwKHggPT4gZGVjb2RlVVJJQ29tcG9uZW50KHgpKS5maWx0ZXIoQm9vbGVhbik7XG4gIH07XG4gIGlmIChfY29uZmlnMi5jb25maWcuc3RvcmFnZS5raW5kID09PSAnbG9jYWwnKSB7XG4gICAgY29uc3QgaGFuZGxlciA9IGxvY2FsTW9kZUFwaUhhbmRsZXIoX2NvbmZpZzIuY29uZmlnLCBfY29uZmlnLmxvY2FsQmFzZURpcmVjdG9yeSk7XG4gICAgcmV0dXJuIHJlcSA9PiB7XG4gICAgICBjb25zdCBwYXJhbXMgPSBnZXRQYXJhbXMocmVxKTtcbiAgICAgIHJldHVybiBoYW5kbGVyKHJlcSwgcGFyYW1zKTtcbiAgICB9O1xuICB9XG4gIGlmIChfY29uZmlnMi5jb25maWcuc3RvcmFnZS5raW5kID09PSAnY2xvdWQnKSB7XG4gICAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uIGtleXN0YXRpY0FQSVJvdXRlKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3RhdHVzOiA0MDQsXG4gICAgICAgIGJvZHk6ICdOb3QgRm91bmQnXG4gICAgICB9O1xuICAgIH07XG4gIH1cbiAgaWYgKCFfY29uZmlnMi5jbGllbnRJZCB8fCAhX2NvbmZpZzIuY2xpZW50U2VjcmV0IHx8ICFfY29uZmlnMi5zZWNyZXQpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgIGNvbnN0IG1pc3NpbmdLZXlzID0gWydjbGllbnRJZCcsICdjbGllbnRTZWNyZXQnLCAnc2VjcmV0J10uZmlsdGVyKHggPT4gIV9jb25maWcyW3hdKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyByZXF1aXJlZCBjb25maWcgaW4gS2V5c3RhdGljIEFQSSBzZXR1cCB3aGVuIHVzaW5nIHRoZSAnZ2l0aHViJyBzdG9yYWdlIG1vZGU6XFxuJHttaXNzaW5nS2V5cy5tYXAoa2V5ID0+IGAtICR7a2V5fSAoY2FuIGJlIHByb3ZpZGVkIHZpYSAke2tleVRvRW52VmFyW2tleV19IGVudiB2YXIpYCkuam9pbignXFxuJyl9XFxuXFxuSWYgeW91J3ZlIGNyZWF0ZWQgeW91ciBHaXRIdWIgYXBwIGxvY2FsbHksIG1ha2Ugc3VyZSB0byBjb3B5IHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgZnJvbSB5b3VyIGxvY2FsIGVudiBmaWxlIHRvIHlvdXIgZGVwbG95ZWQgZW52aXJvbm1lbnRgKTtcbiAgICB9XG4gICAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uIGtleXN0YXRpY0FQSVJvdXRlKHJlcSkge1xuICAgICAgY29uc3QgcGFyYW1zID0gZ2V0UGFyYW1zKHJlcSk7XG4gICAgICBjb25zdCBqb2luZWQgPSBwYXJhbXMuam9pbignLycpO1xuICAgICAgaWYgKGpvaW5lZCA9PT0gJ2dpdGh1Yi9jcmVhdGVkLWFwcCcpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZWRHaXRodWJBcHAocmVxLCBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuc2x1Z0Vudk5hbWUpO1xuICAgICAgfVxuICAgICAgaWYgKGpvaW5lZCA9PT0gJ2dpdGh1Yi9sb2dpbicgfHwgam9pbmVkID09PSAnZ2l0aHViL3JlcG8tbm90LWZvdW5kJyB8fCBqb2luZWQgPT09ICdnaXRodWIvbG9nb3V0Jykge1xuICAgICAgICByZXR1cm4gcmVkaXJlY3QoJy9rZXlzdGF0aWMvc2V0dXAnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogNDA0LFxuICAgICAgICBib2R5OiAnTm90IEZvdW5kJ1xuICAgICAgfTtcbiAgICB9O1xuICB9XG4gIGNvbnN0IGNvbmZpZyA9IHtcbiAgICBjbGllbnRJZDogX2NvbmZpZzIuY2xpZW50SWQsXG4gICAgY2xpZW50U2VjcmV0OiBfY29uZmlnMi5jbGllbnRTZWNyZXQsXG4gICAgc2VjcmV0OiBfY29uZmlnMi5zZWNyZXQsXG4gICAgY29uZmlnOiBfY29uZmlnMi5jb25maWdcbiAgfTtcbiAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uIGtleXN0YXRpY0FQSVJvdXRlKHJlcSkge1xuICAgIGNvbnN0IHBhcmFtcyA9IGdldFBhcmFtcyhyZXEpO1xuICAgIGNvbnN0IGpvaW5lZCA9IHBhcmFtcy5qb2luKCcvJyk7XG4gICAgaWYgKGpvaW5lZCA9PT0gJ2dpdGh1Yi9vYXV0aC9jYWxsYmFjaycpIHtcbiAgICAgIHJldHVybiBnaXRodWJPYXV0aENhbGxiYWNrKHJlcSwgY29uZmlnKTtcbiAgICB9XG4gICAgaWYgKGpvaW5lZCA9PT0gJ2dpdGh1Yi9sb2dpbicpIHtcbiAgICAgIHJldHVybiBnaXRodWJMb2dpbihyZXEsIGNvbmZpZyk7XG4gICAgfVxuICAgIGlmIChqb2luZWQgPT09ICdnaXRodWIvcmVmcmVzaC10b2tlbicpIHtcbiAgICAgIHJldHVybiBnaXRodWJSZWZyZXNoVG9rZW4ocmVxLCBjb25maWcpO1xuICAgIH1cbiAgICBpZiAoam9pbmVkID09PSAnZ2l0aHViL3JlcG8tbm90LWZvdW5kJykge1xuICAgICAgcmV0dXJuIGdpdGh1YlJlcG9Ob3RGb3VuZChyZXEsIGNvbmZpZyk7XG4gICAgfVxuICAgIGlmIChqb2luZWQgPT09ICdnaXRodWIvbG9nb3V0Jykge1xuICAgICAgcmV0dXJuIHJlZGlyZWN0KCcva2V5c3RhdGljJywgW1snU2V0LUNvb2tpZScsIGltbWVkaWF0ZWx5RXhwaXJpbmdDb29raWUoJ2tleXN0YXRpYy1naC1hY2Nlc3MtdG9rZW4nKV0sIFsnU2V0LUNvb2tpZScsIGltbWVkaWF0ZWx5RXhwaXJpbmdDb29raWUoJ2tleXN0YXRpYy1naC1yZWZyZXNoLXRva2VuJyldXSk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IDQwNCxcbiAgICAgIGJvZHk6ICdOb3QgRm91bmQnXG4gICAgfTtcbiAgfTtcbn1cbmNvbnN0IHRva2VuRGF0YVJlc3VsdFR5cGUgPSB6JDEub2JqZWN0KHtcbiAgYWNjZXNzX3Rva2VuOiB6JDEuc3RyaW5nKCksXG4gIGV4cGlyZXNfaW46IHokMS5udW1iZXIoKSxcbiAgcmVmcmVzaF90b2tlbjogeiQxLnN0cmluZygpLFxuICByZWZyZXNoX3Rva2VuX2V4cGlyZXNfaW46IHokMS5udW1iZXIoKSxcbiAgc2NvcGU6IHokMS5zdHJpbmcoKSxcbiAgdG9rZW5fdHlwZTogeiQxLmxpdGVyYWwoJ2JlYXJlcicpXG59KTtcbmFzeW5jIGZ1bmN0aW9uIGdpdGh1Yk9hdXRoQ2FsbGJhY2socmVxLCBjb25maWcpIHtcbiAgdmFyIF9yZXEkaGVhZGVycyRnZXQ7XG4gIGNvbnN0IHNlYXJjaFBhcmFtcyA9IG5ldyBVUkwocmVxLnVybCwgJ2h0dHA6Ly9sb2NhbGhvc3QnKS5zZWFyY2hQYXJhbXM7XG4gIGNvbnN0IGVycm9yID0gc2VhcmNoUGFyYW1zLmdldCgnZXJyb3InKTtcbiAgY29uc3QgZXJyb3JEZXNjcmlwdGlvbiA9IHNlYXJjaFBhcmFtcy5nZXQoJ2Vycm9yX2Rlc2NyaXB0aW9uJyk7XG4gIGlmICh0eXBlb2YgZXJyb3JEZXNjcmlwdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiA0MDAsXG4gICAgICBib2R5OiBgQW4gZXJyb3Igb2NjdXJyZWQgd2hlbiB0cnlpbmcgdG8gYXV0aGVudGljYXRlIHdpdGggR2l0SHViOlxcbiR7ZXJyb3JEZXNjcmlwdGlvbn0ke2Vycm9yID09PSAncmVkaXJlY3RfdXJpX21pc21hdGNoJyA/IGBcXG5cXG5JZiB5b3Ugd2VyZSB0cnlpbmcgdG8gc2lnbiBpbiBsb2NhbGx5IGFuZCByZWNlbnRseSB1cGdyYWRlZCBLZXlzdGF0aWMgZnJvbSBAa2V5c3RhdGljL2NvcmVAMC4wLjY5IG9yIGJlbG93LCB5b3UgbmVlZCB0byBhZGQgXFxgaHR0cDovLzEyNy4wLjAuMS9hcGkva2V5c3RhdGljL2dpdGh1Yi9vYXV0aC9jYWxsYmFja1xcYCBhcyBhIGNhbGxiYWNrIFVSTCBpbiB5b3VyIEdpdEh1YiBhcHAuYCA6ICcnfWBcbiAgICB9O1xuICB9XG4gIGNvbnN0IGNvZGUgPSBzZWFyY2hQYXJhbXMuZ2V0KCdjb2RlJyk7XG4gIGNvbnN0IHN0YXRlID0gc2VhcmNoUGFyYW1zLmdldCgnc3RhdGUnKTtcbiAgaWYgKHR5cGVvZiBjb2RlICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IDQwMCxcbiAgICAgIGJvZHk6ICdCYWQgUmVxdWVzdCdcbiAgICB9O1xuICB9XG4gIGNvbnN0IGNvb2tpZXMgPSBjb29raWUucGFyc2UoKF9yZXEkaGVhZGVycyRnZXQgPSByZXEuaGVhZGVycy5nZXQoJ2Nvb2tpZScpKSAhPT0gbnVsbCAmJiBfcmVxJGhlYWRlcnMkZ2V0ICE9PSB2b2lkIDAgPyBfcmVxJGhlYWRlcnMkZ2V0IDogJycpO1xuICBjb25zdCBmcm9tQ29va2llID0gc3RhdGUgPyBjb29raWVzWydrcy0nICsgc3RhdGVdIDogdW5kZWZpbmVkO1xuICBjb25zdCBmcm9tID0gdHlwZW9mIGZyb21Db29raWUgPT09ICdzdHJpbmcnICYmIGtleXN0YXRpY1JvdXRlUmVnZXgudGVzdChmcm9tQ29va2llKSA/IGZyb21Db29raWUgOiB1bmRlZmluZWQ7XG4gIGNvbnN0IHVybCA9IG5ldyBVUkwoJ2h0dHBzOi8vZ2l0aHViLmNvbS9sb2dpbi9vYXV0aC9hY2Nlc3NfdG9rZW4nKTtcbiAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2NsaWVudF9pZCcsIGNvbmZpZy5jbGllbnRJZCk7XG4gIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdjbGllbnRfc2VjcmV0JywgY29uZmlnLmNsaWVudFNlY3JldCk7XG4gIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdjb2RlJywgY29kZSk7XG4gIGNvbnN0IHRva2VuUmVzID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgaGVhZGVyczoge1xuICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbidcbiAgICB9XG4gIH0pO1xuICBpZiAoIXRva2VuUmVzLm9rKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogNDAxLFxuICAgICAgYm9keTogJ0F1dGhvcml6YXRpb24gZmFpbGVkJ1xuICAgIH07XG4gIH1cbiAgY29uc3QgX3Rva2VuRGF0YSA9IGF3YWl0IHRva2VuUmVzLmpzb24oKTtcbiAgY29uc3QgdG9rZW5EYXRhUGFyc2VSZXN1bHQgPSB0b2tlbkRhdGFSZXN1bHRUeXBlLnNhZmVQYXJzZShfdG9rZW5EYXRhKTtcbiAgaWYgKCF0b2tlbkRhdGFQYXJzZVJlc3VsdC5zdWNjZXNzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogNDAxLFxuICAgICAgYm9keTogJ0F1dGhvcml6YXRpb24gZmFpbGVkJ1xuICAgIH07XG4gIH1cbiAgY29uc3QgaGVhZGVycyA9IGF3YWl0IGdldFRva2VuQ29va2llcyh0b2tlbkRhdGFQYXJzZVJlc3VsdC5kYXRhLCBjb25maWcpO1xuICBpZiAoc3RhdGUgPT09ICdjbG9zZScpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaGVhZGVyczogWy4uLmhlYWRlcnMsIFsnQ29udGVudC1UeXBlJywgJ3RleHQvaHRtbCddXSxcbiAgICAgIGJvZHk6IFwiPHNjcmlwdD5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgna3MtcmVmZXRjaC1pbnN0YWxsYXRpb25zJywgJ3RydWUnKTt3aW5kb3cuY2xvc2UoKTs8L3NjcmlwdD5cIixcbiAgICAgIHN0YXR1czogMjAwXG4gICAgfTtcbiAgfVxuICByZXR1cm4gcmVkaXJlY3QoYC9rZXlzdGF0aWMke2Zyb20gPyBgLyR7ZnJvbX1gIDogJyd9YCwgaGVhZGVycyk7XG59XG5hc3luYyBmdW5jdGlvbiBnZXRUb2tlbkNvb2tpZXModG9rZW5EYXRhLCBjb25maWcpIHtcbiAgY29uc3QgaGVhZGVycyA9IFtbJ1NldC1Db29raWUnLCBjb29raWUuc2VyaWFsaXplKCdrZXlzdGF0aWMtZ2gtYWNjZXNzLXRva2VuJywgdG9rZW5EYXRhLmFjY2Vzc190b2tlbiwge1xuICAgIHNhbWVTaXRlOiAnbGF4JyxcbiAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicsXG4gICAgbWF4QWdlOiB0b2tlbkRhdGEuZXhwaXJlc19pbixcbiAgICBleHBpcmVzOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgdG9rZW5EYXRhLmV4cGlyZXNfaW4gKiAxMDAwKSxcbiAgICBwYXRoOiAnLydcbiAgfSldLCBbJ1NldC1Db29raWUnLCBjb29raWUuc2VyaWFsaXplKCdrZXlzdGF0aWMtZ2gtcmVmcmVzaC10b2tlbicsIGF3YWl0IElyb24uc2VhbCh3ZWJjcnlwdG8sIHRva2VuRGF0YS5yZWZyZXNoX3Rva2VuLCBjb25maWcuc2VjcmV0LCB7XG4gICAgLi4uSXJvbi5kZWZhdWx0cyxcbiAgICB0dGw6IHRva2VuRGF0YS5yZWZyZXNoX3Rva2VuX2V4cGlyZXNfaW4gKiAxMDAwXG4gIH0pLCB7XG4gICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcbiAgICBodHRwT25seTogdHJ1ZSxcbiAgICBtYXhBZ2U6IHRva2VuRGF0YS5yZWZyZXNoX3Rva2VuX2V4cGlyZXNfaW4sXG4gICAgZXhwaXJlczogbmV3IERhdGUoRGF0ZS5ub3coKSArIHRva2VuRGF0YS5yZWZyZXNoX3Rva2VuX2V4cGlyZXNfaW4gKiAxMDApLFxuICAgIHBhdGg6ICcvJ1xuICB9KV1dO1xuICByZXR1cm4gaGVhZGVycztcbn1cbmFzeW5jIGZ1bmN0aW9uIGdldFJlZnJlc2hUb2tlbihyZXEsIGNvbmZpZykge1xuICBjb25zdCBjb29raWVzID0gY29va2llLnBhcnNlKHJlcS5oZWFkZXJzLmdldCgnY29va2llJykgfHwgJycpO1xuICBjb25zdCByZWZyZXNoVG9rZW5Db29raWUgPSBjb29raWVzWydrZXlzdGF0aWMtZ2gtcmVmcmVzaC10b2tlbiddO1xuICBpZiAoIXJlZnJlc2hUb2tlbkNvb2tpZSkgcmV0dXJuO1xuICBsZXQgcmVmcmVzaFRva2VuO1xuICB0cnkge1xuICAgIHJlZnJlc2hUb2tlbiA9IGF3YWl0IElyb24udW5zZWFsKHdlYmNyeXB0bywgcmVmcmVzaFRva2VuQ29va2llLCBjb25maWcuc2VjcmV0LCBJcm9uLmRlZmF1bHRzKTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICh0eXBlb2YgcmVmcmVzaFRva2VuICE9PSAnc3RyaW5nJykgcmV0dXJuO1xuICByZXR1cm4gcmVmcmVzaFRva2VuO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2l0aHViUmVmcmVzaFRva2VuKHJlcSwgY29uZmlnKSB7XG4gIGNvbnN0IGhlYWRlcnMgPSBhd2FpdCByZWZyZXNoR2l0SHViQXV0aChyZXEsIGNvbmZpZyk7XG4gIGlmICghaGVhZGVycykge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IDQwMSxcbiAgICAgIGJvZHk6ICdBdXRob3JpemF0aW9uIGZhaWxlZCdcbiAgICB9O1xuICB9XG4gIHJldHVybiB7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgaGVhZGVycyxcbiAgICBib2R5OiAnJ1xuICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gcmVmcmVzaEdpdEh1YkF1dGgocmVxLCBjb25maWcpIHtcbiAgY29uc3QgcmVmcmVzaFRva2VuID0gYXdhaXQgZ2V0UmVmcmVzaFRva2VuKHJlcSwgY29uZmlnKTtcbiAgaWYgKCFyZWZyZXNoVG9rZW4pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgdXJsID0gbmV3IFVSTCgnaHR0cHM6Ly9naXRodWIuY29tL2xvZ2luL29hdXRoL2FjY2Vzc190b2tlbicpO1xuICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnY2xpZW50X2lkJywgY29uZmlnLmNsaWVudElkKTtcbiAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2NsaWVudF9zZWNyZXQnLCBjb25maWcuY2xpZW50U2VjcmV0KTtcbiAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2dyYW50X3R5cGUnLCAncmVmcmVzaF90b2tlbicpO1xuICB1cmwuc2VhcmNoUGFyYW1zLnNldCgncmVmcmVzaF90b2tlbicsIHJlZnJlc2hUb2tlbik7XG4gIGNvbnN0IHRva2VuUmVzID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgaGVhZGVyczoge1xuICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbidcbiAgICB9XG4gIH0pO1xuICBpZiAoIXRva2VuUmVzLm9rKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IF90b2tlbkRhdGEgPSBhd2FpdCB0b2tlblJlcy5qc29uKCk7XG4gIGNvbnN0IHRva2VuRGF0YVBhcnNlUmVzdWx0ID0gdG9rZW5EYXRhUmVzdWx0VHlwZS5zYWZlUGFyc2UoX3Rva2VuRGF0YSk7XG4gIGlmICghdG9rZW5EYXRhUGFyc2VSZXN1bHQuc3VjY2Vzcykge1xuICAgIHJldHVybjtcbiAgfVxuICByZXR1cm4gZ2V0VG9rZW5Db29raWVzKHRva2VuRGF0YVBhcnNlUmVzdWx0LmRhdGEsIGNvbmZpZyk7XG59XG5hc3luYyBmdW5jdGlvbiBnaXRodWJSZXBvTm90Rm91bmQocmVxLCBjb25maWcpIHtcbiAgY29uc3QgaGVhZGVycyA9IGF3YWl0IHJlZnJlc2hHaXRIdWJBdXRoKHJlcSwgY29uZmlnKTtcbiAgaWYgKGhlYWRlcnMpIHtcbiAgICByZXR1cm4gcmVkaXJlY3QoJy9rZXlzdGF0aWMvcmVwby1ub3QtZm91bmQnLCBoZWFkZXJzKTtcbiAgfVxuICByZXR1cm4gZ2l0aHViTG9naW4ocmVxLCBjb25maWcpO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2l0aHViTG9naW4ocmVxLCBjb25maWcpIHtcbiAgY29uc3QgcmVxVXJsID0gbmV3IFVSTChyZXEudXJsKTtcbiAgY29uc3QgcmF3RnJvbSA9IHJlcVVybC5zZWFyY2hQYXJhbXMuZ2V0KCdmcm9tJyk7XG4gIGNvbnN0IGZyb20gPSB0eXBlb2YgcmF3RnJvbSA9PT0gJ3N0cmluZycgJiYga2V5c3RhdGljUm91dGVSZWdleC50ZXN0KHJhd0Zyb20pID8gcmF3RnJvbSA6ICcvJztcbiAgY29uc3Qgc3RhdGUgPSBieXRlc1RvSGV4KHdlYmNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoMTApKSk7XG4gIGNvbnN0IHVybCA9IG5ldyBVUkwoJ2h0dHBzOi8vZ2l0aHViLmNvbS9sb2dpbi9vYXV0aC9hdXRob3JpemUnKTtcbiAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2NsaWVudF9pZCcsIGNvbmZpZy5jbGllbnRJZCk7XG4gIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdyZWRpcmVjdF91cmknLCBgJHtyZXFVcmwub3JpZ2lufS9hcGkva2V5c3RhdGljL2dpdGh1Yi9vYXV0aC9jYWxsYmFja2ApO1xuICBpZiAoZnJvbSA9PT0gJy8nKSB7XG4gICAgcmV0dXJuIHJlZGlyZWN0KHVybC50b1N0cmluZygpKTtcbiAgfVxuICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnc3RhdGUnLCBzdGF0ZSk7XG4gIHJldHVybiByZWRpcmVjdCh1cmwudG9TdHJpbmcoKSwgW1snU2V0LUNvb2tpZScsIGNvb2tpZS5zZXJpYWxpemUoJ2tzLScgKyBzdGF0ZSwgZnJvbSwge1xuICAgIHNhbWVTaXRlOiAnbGF4JyxcbiAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicsXG4gICAgLy8gMSBkYXlcbiAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCxcbiAgICBleHBpcmVzOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgNjAgKiA2MCAqIDI0ICogMTAwMCksXG4gICAgcGF0aDogJy8nLFxuICAgIGh0dHBPbmx5OiB0cnVlXG4gIH0pXV0pO1xufVxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlZEdpdGh1YkFwcChyZXEsIHNsdWdFbnZWYXJOYW1lKSB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ2RldmVsb3BtZW50Jykge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IDQwMCxcbiAgICAgIGJvZHk6ICdBcHAgc2V0dXAgb25seSBhbGxvd2VkIGluIGRldmVsb3BtZW50J1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIGhhbmRsZUdpdEh1YkFwcENyZWF0aW9uKHJlcSwgc2x1Z0VudlZhck5hbWUpO1xufVxuZnVuY3Rpb24gaW1tZWRpYXRlbHlFeHBpcmluZ0Nvb2tpZShuYW1lKSB7XG4gIHJldHVybiBjb29raWUuc2VyaWFsaXplKG5hbWUsICcnLCB7XG4gICAgc2VjdXJlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLFxuICAgIHNhbWVTaXRlOiAnbGF4JyxcbiAgICBwYXRoOiAnLycsXG4gICAgbWF4QWdlOiAwLFxuICAgIGV4cGlyZXM6IG5ldyBEYXRlKClcbiAgfSk7XG59XG5cbmV4cG9ydCB7IG1ha2VHZW5lcmljQVBJUm91dGVIYW5kbGVyIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/api/generic/dist/keystatic-core-api-generic.node.react-server.esm.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/api-59e5ebd9.node.react-server.esm.js":
/*!*********************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/api-59e5ebd9.node.react-server.esm.js ***!
  \*********************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   c: () => (/* binding */ component)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(rsc)/./node_modules/.pnpm/next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-jsx-runtime.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-90608531.node.react-server.esm.js */ \"(rsc)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/index-90608531.node.react-server.esm.js\");\n/* harmony import */ var emery__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! emery */ \"(rsc)/./node_modules/.pnpm/emery@1.4.3/node_modules/emery/dist/emery.esm.js\");\n/* harmony import */ var _sindresorhus_slugify__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @sindresorhus/slugify */ \"(rsc)/./node_modules/.pnpm/@sindresorhus+slugify@1.1.2/node_modules/@sindresorhus/slugify/index.js\");\n/* harmony import */ var _sindresorhus_slugify__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_sindresorhus_slugify__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _braintree_sanitize_url__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @braintree/sanitize-url */ \"(rsc)/./node_modules/.pnpm/@braintree+sanitize-url@6.0.4/node_modules/@braintree/sanitize-url/dist/index.js\");\n\n\n\n\n\n\n// this is written like this rather than ArrayField<ComponentSchema> to avoid TypeScript erroring about circularity\nfunction component(options) {\n  return options;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGtleXN0YXRpYytjb3JlQDAuMi4xMl9uZXh0QDE0LjIuMl9yZWFjdC1kb21AMTguMi4wX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvYXBpLTU5ZTVlYmQ5Lm5vZGUucmVhY3Qtc2VydmVyLmVzbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUEyQjtBQUN3QjtBQUNwQztBQUNnQjtBQUNFOztBQUVqQztBQUNBO0FBQ0E7QUFDQTs7QUFFMEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Aa2V5c3RhdGljL3RlbXBsYXRlcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvLnBucG0vQGtleXN0YXRpYytjb3JlQDAuMi4xMl9uZXh0QDE0LjIuMl9yZWFjdC1kb21AMTguMi4wX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvYXBpLTU5ZTVlYmQ5Lm5vZGUucmVhY3Qtc2VydmVyLmVzbS5qcz9jNjdmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAncmVhY3QvanN4LXJ1bnRpbWUnO1xuaW1wb3J0ICcuL2luZGV4LTkwNjA4NTMxLm5vZGUucmVhY3Qtc2VydmVyLmVzbS5qcyc7XG5pbXBvcnQgJ2VtZXJ5JztcbmltcG9ydCAnQHNpbmRyZXNvcmh1cy9zbHVnaWZ5JztcbmltcG9ydCAnQGJyYWludHJlZS9zYW5pdGl6ZS11cmwnO1xuXG4vLyB0aGlzIGlzIHdyaXR0ZW4gbGlrZSB0aGlzIHJhdGhlciB0aGFuIEFycmF5RmllbGQ8Q29tcG9uZW50U2NoZW1hPiB0byBhdm9pZCBUeXBlU2NyaXB0IGVycm9yaW5nIGFib3V0IGNpcmN1bGFyaXR5XG5mdW5jdGlvbiBjb21wb25lbnQob3B0aW9ucykge1xuICByZXR1cm4gb3B0aW9ucztcbn1cblxuZXhwb3J0IHsgY29tcG9uZW50IGFzIGMgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/api-59e5ebd9.node.react-server.esm.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/index-8bb79b3a.node.react-server.esm.js":
/*!***********************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/index-8bb79b3a.node.react-server.esm.js ***!
  \***********************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   i: () => (/* binding */ integer)\n/* harmony export */ });\n/* harmony import */ var _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-90608531.node.react-server.esm.js */ \"(rsc)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/index-90608531.node.react-server.esm.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react/jsx-runtime */ \"(rsc)/./node_modules/.pnpm/next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-jsx-runtime.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\nfunction validateInteger(validation, value, label) {\n  if (value !== null && (typeof value !== 'number' || !Number.isInteger(value))) {\n    return `${label} must be a whole number`;\n  }\n  if (validation !== null && validation !== void 0 && validation.isRequired && value === null) {\n    return `${label} is required`;\n  }\n  if (value !== null) {\n    if ((validation === null || validation === void 0 ? void 0 : validation.min) !== undefined && value < validation.min) {\n      return `${label} must be at least ${validation.min}`;\n    }\n    if ((validation === null || validation === void 0 ? void 0 : validation.max) !== undefined && value > validation.max) {\n      return `${label} must be at most ${validation.max}`;\n    }\n  }\n}\n\nfunction integer({\n  label,\n  defaultValue,\n  validation,\n  description\n}) {\n  return (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_0__.ad)({\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_0__.ax, {\n        label: label,\n        description: description,\n        validation: validation,\n        ...props\n      });\n    },\n    defaultValue() {\n      return defaultValue !== null && defaultValue !== void 0 ? defaultValue : null;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value === 'number') {\n        return value;\n      }\n      throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_0__.ac('Must be a number');\n    },\n    validate(value) {\n      const message = validateInteger(validation, value, label);\n      if (message !== undefined) {\n        throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_0__.ac(message);\n      }\n      (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_0__.ag)(value, validation, label);\n      return value;\n    },\n    serialize(value) {\n      return {\n        value: value === null ? undefined : value\n      };\n    }\n  });\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGtleXN0YXRpYytjb3JlQDAuMi4xMl9uZXh0QDE0LjIuMl9yZWFjdC1kb21AMTguMi4wX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvaW5kZXgtOGJiNzliM2Eubm9kZS5yZWFjdC1zZXJ2ZXIuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBMks7QUFDbkk7O0FBRXhDO0FBQ0E7QUFDQSxjQUFjLE9BQU87QUFDckI7QUFDQTtBQUNBLGNBQWMsT0FBTztBQUNyQjtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsT0FBTyxtQkFBbUIsZUFBZTtBQUN6RDtBQUNBO0FBQ0EsZ0JBQWdCLE9BQU8sa0JBQWtCLGVBQWU7QUFDeEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsU0FBUyw0RUFBbUM7QUFDNUM7QUFDQSwwQkFBMEIsc0RBQUcsQ0FBQyx3RUFBaUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isd0VBQWM7QUFDOUIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix3RUFBYztBQUNoQztBQUNBLE1BQU0sNEVBQWM7QUFDcEI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFd0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Aa2V5c3RhdGljL3RlbXBsYXRlcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvLnBucG0vQGtleXN0YXRpYytjb3JlQDAuMi4xMl9uZXh0QDE0LjIuMl9yZWFjdC1kb21AMTguMi4wX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvaW5kZXgtOGJiNzliM2Eubm9kZS5yZWFjdC1zZXJ2ZXIuZXNtLmpzPzNiYWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYWQgYXMgYmFzaWNGb3JtRmllbGRXaXRoU2ltcGxlUmVhZGVyUGFyc2UsIGF4IGFzIEludGVnZXJGaWVsZElucHV0LCBhYyBhcyBGaWVsZERhdGFFcnJvciwgYWcgYXMgYXNzZXJ0UmVxdWlyZWQgfSBmcm9tICcuL2luZGV4LTkwNjA4NTMxLm5vZGUucmVhY3Qtc2VydmVyLmVzbS5qcyc7XG5pbXBvcnQgeyBqc3ggfSBmcm9tICdyZWFjdC9qc3gtcnVudGltZSc7XG5cbmZ1bmN0aW9uIHZhbGlkYXRlSW50ZWdlcih2YWxpZGF0aW9uLCB2YWx1ZSwgbGFiZWwpIHtcbiAgaWYgKHZhbHVlICE9PSBudWxsICYmICh0eXBlb2YgdmFsdWUgIT09ICdudW1iZXInIHx8ICFOdW1iZXIuaXNJbnRlZ2VyKHZhbHVlKSkpIHtcbiAgICByZXR1cm4gYCR7bGFiZWx9IG11c3QgYmUgYSB3aG9sZSBudW1iZXJgO1xuICB9XG4gIGlmICh2YWxpZGF0aW9uICE9PSBudWxsICYmIHZhbGlkYXRpb24gIT09IHZvaWQgMCAmJiB2YWxpZGF0aW9uLmlzUmVxdWlyZWQgJiYgdmFsdWUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gYCR7bGFiZWx9IGlzIHJlcXVpcmVkYDtcbiAgfVxuICBpZiAodmFsdWUgIT09IG51bGwpIHtcbiAgICBpZiAoKHZhbGlkYXRpb24gPT09IG51bGwgfHwgdmFsaWRhdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsaWRhdGlvbi5taW4pICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgPCB2YWxpZGF0aW9uLm1pbikge1xuICAgICAgcmV0dXJuIGAke2xhYmVsfSBtdXN0IGJlIGF0IGxlYXN0ICR7dmFsaWRhdGlvbi5taW59YDtcbiAgICB9XG4gICAgaWYgKCh2YWxpZGF0aW9uID09PSBudWxsIHx8IHZhbGlkYXRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbGlkYXRpb24ubWF4KSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlID4gdmFsaWRhdGlvbi5tYXgpIHtcbiAgICAgIHJldHVybiBgJHtsYWJlbH0gbXVzdCBiZSBhdCBtb3N0ICR7dmFsaWRhdGlvbi5tYXh9YDtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gaW50ZWdlcih7XG4gIGxhYmVsLFxuICBkZWZhdWx0VmFsdWUsXG4gIHZhbGlkYXRpb24sXG4gIGRlc2NyaXB0aW9uXG59KSB7XG4gIHJldHVybiBiYXNpY0Zvcm1GaWVsZFdpdGhTaW1wbGVSZWFkZXJQYXJzZSh7XG4gICAgSW5wdXQocHJvcHMpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KEludGVnZXJGaWVsZElucHV0LCB7XG4gICAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICB2YWxpZGF0aW9uOiB2YWxpZGF0aW9uLFxuICAgICAgICAuLi5wcm9wc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWZhdWx0VmFsdWUoKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdFZhbHVlICE9PSBudWxsICYmIGRlZmF1bHRWYWx1ZSAhPT0gdm9pZCAwID8gZGVmYXVsdFZhbHVlIDogbnVsbDtcbiAgICB9LFxuICAgIHBhcnNlKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIG51bWJlcicpO1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSB2YWxpZGF0ZUludGVnZXIodmFsaWRhdGlvbiwgdmFsdWUsIGxhYmVsKTtcbiAgICAgIGlmIChtZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKG1lc3NhZ2UpO1xuICAgICAgfVxuICAgICAgYXNzZXJ0UmVxdWlyZWQodmFsdWUsIHZhbGlkYXRpb24sIGxhYmVsKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHZhbHVlID09PSBudWxsID8gdW5kZWZpbmVkIDogdmFsdWVcbiAgICAgIH07XG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IHsgaW50ZWdlciBhcyBpIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/index-8bb79b3a.node.react-server.esm.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/index-90608531.node.react-server.esm.js":
/*!***********************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/index-90608531.node.react-server.esm.js ***!
  \***********************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $: () => (/* binding */ getWholeDocumentFeaturesForChildField),\n/* harmony export */   A: () => (/* binding */ getInitialPropsValueFromInitializer),\n/* harmony export */   B: () => (/* binding */ aliasesToLabel),\n/* harmony export */   C: () => (/* binding */ aliasesToCanonicalName),\n/* harmony export */   D: () => (/* binding */ canonicalNameToLabel),\n/* harmony export */   E: () => (/* binding */ labelToCanonicalName),\n/* harmony export */   F: () => (/* binding */ languagesWithAliases),\n/* harmony export */   G: () => (/* binding */ transformProps),\n/* harmony export */   H: () => (/* binding */ getValueAtPropPath),\n/* harmony export */   I: () => (/* binding */ cloneDescendent),\n/* harmony export */   J: () => (/* binding */ areArraysEqual),\n/* harmony export */   K: () => (/* binding */ KEYSTATIC_CLOUD_API_URL),\n/* harmony export */   L: () => (/* binding */ getSchemaAtPropPath),\n/* harmony export */   M: () => (/* binding */ findChildPropPaths),\n/* harmony export */   N: () => (/* binding */ object),\n/* harmony export */   O: () => (/* binding */ getSelectedTableArea),\n/* harmony export */   P: () => (/* binding */ getRelativeRowPath),\n/* harmony export */   Q: () => (/* binding */ cell),\n/* harmony export */   R: () => (/* binding */ clearFormatting),\n/* harmony export */   S: () => (/* binding */ EditorAfterButIgnoringingPointsWithNoContent),\n/* harmony export */   T: () => (/* binding */ getInlineNodes),\n/* harmony export */   U: () => (/* binding */ addMarksToChildren),\n/* harmony export */   V: () => (/* binding */ setLinkForChildren),\n/* harmony export */   W: () => (/* binding */ forceDisableMarkForChildren),\n/* harmony export */   X: () => (/* binding */ addMarkToChildren),\n/* harmony export */   Y: () => (/* binding */ getPlaceholderTextForPropPath),\n/* harmony export */   Z: () => (/* binding */ Prism),\n/* harmony export */   _: () => (/* binding */ _createDocumentEditor),\n/* harmony export */   a: () => (/* binding */ KEYSTATIC_CLOUD_HEADERS),\n/* harmony export */   a0: () => (/* binding */ getEntryDataFilepath),\n/* harmony export */   a1: () => (/* binding */ getDirectoriesForTreeKey),\n/* harmony export */   a2: () => (/* binding */ getTreeKey),\n/* harmony export */   a3: () => (/* binding */ blobSha),\n/* harmony export */   a4: () => (/* binding */ serializeProps),\n/* harmony export */   a5: () => (/* binding */ updateTreeWithChanges),\n/* harmony export */   a6: () => (/* binding */ getSlugGlobForCollection),\n/* harmony export */   a7: () => (/* binding */ getCollectionFormat),\n/* harmony export */   a8: () => (/* binding */ getCollectionItemPath),\n/* harmony export */   a9: () => (/* binding */ getDataFileExtension),\n/* harmony export */   aA: () => (/* binding */ DocumentFieldInput),\n/* harmony export */   aB: () => (/* binding */ parseToEditorState),\n/* harmony export */   aC: () => (/* binding */ collectDirectoriesUsedInSchema),\n/* harmony export */   aD: () => (/* binding */ serializeFromEditorState),\n/* harmony export */   aE: () => (/* binding */ createEditorSchema),\n/* harmony export */   aa: () => (/* binding */ getSingletonFormat),\n/* harmony export */   ab: () => (/* binding */ isCloudConfig),\n/* harmony export */   ac: () => (/* binding */ FieldDataError),\n/* harmony export */   ad: () => (/* binding */ basicFormFieldWithSimpleReaderParse),\n/* harmony export */   ae: () => (/* binding */ CheckboxFieldInput),\n/* harmony export */   af: () => (/* binding */ DateFieldInput),\n/* harmony export */   ag: () => (/* binding */ assertRequired),\n/* harmony export */   ah: () => (/* binding */ DatetimeFieldInput),\n/* harmony export */   ai: () => (/* binding */ ImageFieldInput),\n/* harmony export */   aj: () => (/* binding */ getSrcPrefix),\n/* harmony export */   ak: () => (/* binding */ fixPath),\n/* harmony export */   al: () => (/* binding */ FileFieldInput),\n/* harmony export */   am: () => (/* binding */ MultiselectFieldInput),\n/* harmony export */   an: () => (/* binding */ PathReferenceInput),\n/* harmony export */   ao: () => (/* binding */ RelationshipInput),\n/* harmony export */   ap: () => (/* binding */ SelectFieldInput),\n/* harmony export */   aq: () => (/* binding */ SlugFieldInput),\n/* harmony export */   ar: () => (/* binding */ validateText),\n/* harmony export */   as: () => (/* binding */ UrlFieldInput),\n/* harmony export */   at: () => (/* binding */ BlocksFieldInput),\n/* harmony export */   au: () => (/* binding */ text),\n/* harmony export */   av: () => (/* binding */ CloudImageFieldInput),\n/* harmony export */   aw: () => (/* binding */ document$1),\n/* harmony export */   ax: () => (/* binding */ IntegerFieldInput),\n/* harmony export */   ay: () => (/* binding */ sha1),\n/* harmony export */   az: () => (/* binding */ getDefaultValue),\n/* harmony export */   b: () => (/* binding */ getEntriesInCollectionWithTreeKey),\n/* harmony export */   c: () => (/* binding */ getSingletonPath),\n/* harmony export */   d: () => (/* binding */ getTreeNodeAtPath),\n/* harmony export */   e: () => (/* binding */ treeSha),\n/* harmony export */   f: () => (/* binding */ getBranchPrefix),\n/* harmony export */   g: () => (/* binding */ getPathPrefix),\n/* harmony export */   h: () => (/* binding */ getSplitCloudProject),\n/* harmony export */   i: () => (/* binding */ isGitHubConfig),\n/* harmony export */   j: () => (/* binding */ getRepoUrl),\n/* harmony export */   k: () => (/* binding */ isLocalConfig),\n/* harmony export */   l: () => (/* binding */ getCollectionPath),\n/* harmony export */   m: () => (/* binding */ getKeysForArrayValue),\n/* harmony export */   n: () => (/* binding */ nodeTypeMatcher),\n/* harmony export */   o: () => (/* binding */ getSlugFromState),\n/* harmony export */   p: () => (/* binding */ pluralize),\n/* harmony export */   q: () => (/* binding */ getInitialPropsValue),\n/* harmony export */   r: () => (/* binding */ redirectToCloudAuth),\n/* harmony export */   s: () => (/* binding */ setKeysForArrayValue),\n/* harmony export */   t: () => (/* binding */ treeEntriesToTreeNodes),\n/* harmony export */   u: () => (/* binding */ updateValue),\n/* harmony export */   v: () => (/* binding */ getAncestorComponentChildFieldDocumentFeatures),\n/* harmony export */   w: () => (/* binding */ isBlock),\n/* harmony export */   x: () => (/* binding */ allMarks),\n/* harmony export */   y: () => (/* binding */ isListNode),\n/* harmony export */   z: () => (/* binding */ isElementActive)\n/* harmony export */ });\n/* harmony import */ var _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @markdoc/markdoc */ \"(rsc)/./node_modules/.pnpm/@markdoc+markdoc@0.3.5_@types+react@18.2.79_react@18.2.0/node_modules/@markdoc/markdoc/dist/index.mjs\");\n/* harmony import */ var slate__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! slate */ \"(rsc)/./node_modules/.pnpm/slate@0.91.4/node_modules/slate/dist/index.es.js\");\n/* harmony import */ var emery_assertions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! emery/assertions */ \"(rsc)/./node_modules/.pnpm/emery@1.4.3/node_modules/emery/assertions/dist/emery-assertions.esm.js\");\n/* harmony import */ var emery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! emery */ \"(rsc)/./node_modules/.pnpm/emery@1.4.3/node_modules/emery/dist/emery.esm.js\");\n/* harmony import */ var js_base64__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js-base64 */ \"(rsc)/./node_modules/.pnpm/js-base64@3.7.7/node_modules/js-base64/base64.mjs\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react/jsx-runtime */ \"(rsc)/./node_modules/.pnpm/next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-jsx-runtime.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _emotion_weak_memoize__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @emotion/weak-memoize */ \"(rsc)/./node_modules/.pnpm/@emotion+weak-memoize@0.3.1/node_modules/@emotion/weak-memoize/dist/emotion-weak-memoize.esm.js\");\n\n\n\n\n\n\n\n\n\nfunction fixPath(path) {\n  return path.replace(/^\\.?\\/+/, '').replace(/\\/*$/, '');\n}\nconst collectionPath = /\\/\\*\\*?(?:$|\\/)/;\nfunction getConfiguredCollectionPath(config, collection) {\n  var _collectionConfig$pat;\n  const collectionConfig = config.collections[collection];\n  const path = (_collectionConfig$pat = collectionConfig.path) !== null && _collectionConfig$pat !== void 0 ? _collectionConfig$pat : `${collection}/*/`;\n  if (!collectionPath.test(path)) {\n    throw new Error(`Collection path must end with /* or /** or include /*/ or /**/ but ${collection} has ${path}`);\n  }\n  return path;\n}\nfunction getCollectionPath(config, collection) {\n  const configuredPath = getConfiguredCollectionPath(config, collection);\n  const path = fixPath(configuredPath.replace(/\\*\\*?.*$/, ''));\n  return path;\n}\nfunction getCollectionFormat(config, collection) {\n  var _collectionConfig$for;\n  const collectionConfig = config.collections[collection];\n  return getFormatInfo((_collectionConfig$for = collectionConfig.format) !== null && _collectionConfig$for !== void 0 ? _collectionConfig$for : 'yaml', collectionConfig.schema, getConfiguredCollectionPath(config, collection));\n}\nfunction getSingletonFormat(config, singleton) {\n  var _singletonConfig$form, _singletonConfig$path;\n  const singletonConfig = config.singletons[singleton];\n  return getFormatInfo((_singletonConfig$form = singletonConfig.format) !== null && _singletonConfig$form !== void 0 ? _singletonConfig$form : 'yaml', singletonConfig.schema, (_singletonConfig$path = singletonConfig.path) !== null && _singletonConfig$path !== void 0 ? _singletonConfig$path : `${singleton}/`);\n}\nfunction getCollectionItemPath(config, collection, slug) {\n  const basePath = getCollectionPath(config, collection);\n  const suffix = getCollectionItemSlugSuffix(config, collection);\n  return `${basePath}/${slug}${suffix}`;\n}\nfunction getEntryDataFilepath(dir, formatInfo) {\n  return `${dir}${formatInfo.dataLocation === 'index' ? '/index' : ''}${getDataFileExtension(formatInfo)}`;\n}\nfunction getSlugGlobForCollection(config, collection) {\n  const collectionPath = getConfiguredCollectionPath(config, collection);\n  return collectionPath.includes('**') ? '**' : '*';\n}\nfunction getCollectionItemSlugSuffix(config, collection) {\n  const configuredPath = getConfiguredCollectionPath(config, collection);\n  const path = fixPath(configuredPath.replace(/^[^*]+\\*\\*?/, ''));\n  return path ? `/${path}` : '';\n}\nfunction getSingletonPath(config, singleton) {\n  var _singleton$path, _singleton$path2;\n  if ((_singleton$path = config.singletons[singleton].path) !== null && _singleton$path !== void 0 && _singleton$path.includes('*')) {\n    throw new Error(`Singleton paths cannot include * but ${singleton} has ${config.singletons[singleton].path}`);\n  }\n  return fixPath((_singleton$path2 = config.singletons[singleton].path) !== null && _singleton$path2 !== void 0 ? _singleton$path2 : singleton);\n}\nfunction getDataFileExtension(formatInfo) {\n  return formatInfo.contentField ? formatInfo.contentField.config.contentExtension : '.' + formatInfo.data;\n}\nfunction getFormatInfo(format, schema, path) {\n  var _format$data;\n  const dataLocation = path.endsWith('/') ? 'index' : 'outer';\n  if (typeof format === 'string') {\n    return {\n      dataLocation,\n      contentField: undefined,\n      data: format\n    };\n  }\n  let contentField;\n  if (format.contentField) {\n    const field = schema[format.contentField];\n    (0,emery__WEBPACK_IMPORTED_MODULE_1__.assert)((field === null || field === void 0 ? void 0 : field.kind) === 'form', `${format.contentField} is not a form field`);\n    (0,emery__WEBPACK_IMPORTED_MODULE_1__.assert)(field.formKind === 'content', `${format.contentField} is not a content field`);\n    contentField = {\n      key: format.contentField,\n      config: field\n    };\n  }\n  return {\n    data: (_format$data = format.data) !== null && _format$data !== void 0 ? _format$data : 'yaml',\n    contentField,\n    dataLocation\n  };\n}\nfunction getPathPrefix(storage) {\n  if (storage.kind === 'local' || !storage.pathPrefix) {\n    return undefined;\n  }\n  return fixPath(storage.pathPrefix) + '/';\n}\n\nasync function sha1(content) {\n  return (0,crypto__WEBPACK_IMPORTED_MODULE_2__.createHash)('sha1').update(content).digest('hex');\n}\n\nconst textEncoder$2 = new TextEncoder();\nfunction blobSha(contents) {\n  const blobPrefix = textEncoder$2.encode('blob ' + contents.length + '\\0');\n  const array = new Uint8Array(blobPrefix.byteLength + contents.byteLength);\n  array.set(blobPrefix, 0);\n  array.set(contents, blobPrefix.byteLength);\n  return sha1(array);\n}\nfunction getTreeNodeAtPath(root, path) {\n  const parts = path.split('/');\n  let node = root.get(parts[0]);\n  for (const part of parts.slice(1)) {\n    if (!node) return undefined;\n    if (!node.children) return undefined;\n    node = node.children.get(part);\n  }\n  return node;\n}\nfunction getNodeAtPath(tree, path) {\n  let node = tree;\n  for (const part of path.split('/')) {\n    if (!node.has(part)) {\n      node.set(part, new Map());\n    }\n    const innerNode = node.get(part);\n    (0,emery__WEBPACK_IMPORTED_MODULE_1__.assert)(innerNode instanceof Map, 'expected tree');\n    node = innerNode;\n  }\n  return node;\n}\nfunction getFilename(path) {\n  return path.replace(/.*\\//, '');\n}\nfunction getDirname(path) {\n  return path.replace(/\\/[^/]+$/, '');\n}\nfunction toTreeChanges(changes) {\n  const changesRoot = new Map();\n  for (const deletion of changes.deletions) {\n    const parentTree = getNodeAtPath(changesRoot, getDirname(deletion));\n    parentTree.set(getFilename(deletion), 'delete');\n  }\n  for (const addition of changes.additions) {\n    const parentTree = getNodeAtPath(changesRoot, getDirname(addition.path));\n    parentTree.set(getFilename(addition.path), addition.contents);\n  }\n  return changesRoot;\n}\nconst SPACE_CHAR_CODE = 32;\nconst space = new Uint8Array([SPACE_CHAR_CODE]);\nconst nullchar = new Uint8Array([0]);\nconst tree = textEncoder$2.encode('tree ');\n\n// based on https://github.com/isomorphic-git/isomorphic-git/blob/c09dfa20ffe0ab9e6602e0fa172d72ba8994e443/src/models/GitTree.js#L108-L122\nfunction treeSha(children) {\n  const entries = [...children].map(([name, node]) => ({\n    name,\n    sha: node.entry.sha,\n    mode: node.entry.mode\n  }));\n  entries.sort((a, b) => {\n    const aName = a.mode === '040000' ? a.name + '/' : a.name;\n    const bName = b.mode === '040000' ? b.name + '/' : b.name;\n    return aName === bName ? 0 : aName < bName ? -1 : 1;\n  });\n  const treeObject = entries.flatMap(entry => {\n    const mode = textEncoder$2.encode(entry.mode.replace(/^0/, ''));\n    const name = textEncoder$2.encode(entry.name);\n    const sha = hexToBytes(entry.sha);\n    return [mode, space, name, nullchar, sha];\n  });\n  return sha1(concatBytes([tree, textEncoder$2.encode(treeObject.reduce((sum, val) => sum + val.byteLength, 0).toString()), nullchar, ...treeObject]));\n}\nfunction concatBytes(byteArrays) {\n  const totalLength = byteArrays.reduce((sum, arr) => sum + arr.byteLength, 0);\n  const result = new Uint8Array(totalLength);\n  let offset = 0;\n  for (const arr of byteArrays) {\n    result.set(arr, offset);\n    offset += arr.byteLength;\n  }\n  return result;\n}\nfunction hexToBytes(str) {\n  const bytes = new Uint8Array(str.length / 2);\n  for (var i = 0; i < bytes.byteLength; i += 1) {\n    const start = i * 2;\n    bytes[i] = parseInt(str.slice(start, start + 2), 16);\n  }\n  return bytes;\n}\nasync function createTreeNodeEntry(path, children) {\n  const sha = await treeSha(children);\n  return {\n    path,\n    mode: '040000',\n    type: 'tree',\n    sha\n  };\n}\nasync function createBlobNodeEntry(path, contents) {\n  const sha = 'sha' in contents ? contents.sha : await blobSha(contents);\n  return {\n    path,\n    mode: '100644',\n    type: 'blob',\n    sha,\n    size: contents.byteLength\n  };\n}\nasync function updateTreeWithChanges(tree, changes) {\n  var _await$updateTree;\n  const newTree = (_await$updateTree = await updateTree(tree, toTreeChanges(changes), [])) !== null && _await$updateTree !== void 0 ? _await$updateTree : new Map();\n  return {\n    entries: treeToEntries(newTree),\n    sha: await treeSha(newTree !== null && newTree !== void 0 ? newTree : new Map())\n  };\n}\nfunction treeToEntries(tree) {\n  return [...tree.values()].flatMap(x => x.children ? [x.entry, ...treeToEntries(x.children)] : [x.entry]);\n}\nasync function updateTree(tree, changedTree, path) {\n  const newTree = new Map(tree);\n  for (const [key, value] of changedTree) {\n    if (value === 'delete') {\n      newTree.delete(key);\n    }\n    if (value instanceof Map) {\n      var _newTree$get$children, _newTree$get;\n      const existingChildren = (_newTree$get$children = (_newTree$get = newTree.get(key)) === null || _newTree$get === void 0 ? void 0 : _newTree$get.children) !== null && _newTree$get$children !== void 0 ? _newTree$get$children : new Map();\n      const children = await updateTree(existingChildren, value, path.concat(key));\n      if (children === undefined) {\n        newTree.delete(key);\n        continue;\n      }\n      const entry = await createTreeNodeEntry(path.concat(key).join('/'), children);\n      newTree.set(key, {\n        entry,\n        children\n      });\n    }\n    if (value instanceof Uint8Array || typeof value === 'object' && 'sha' in value) {\n      const entry = await createBlobNodeEntry(path.concat(key).join('/'), value);\n      newTree.set(key, {\n        entry\n      });\n    }\n  }\n  if (newTree.size === 0) {\n    return undefined;\n  }\n  return newTree;\n}\nfunction treeEntriesToTreeNodes(entries) {\n  const root = new Map();\n  const getChildrenAtPath = parts => {\n    var _node;\n    if (parts.length === 0) {\n      return root;\n    }\n    let node = root.get(parts[0]);\n    for (const part of parts.slice(1)) {\n      if (!node) return undefined;\n      if (!node.children) return undefined;\n      node = node.children.get(part);\n    }\n    return (_node = node) === null || _node === void 0 ? void 0 : _node.children;\n  };\n  for (const entry of entries) {\n    const split = entry.path.split('/');\n    const children = getChildrenAtPath(split.slice(0, -1));\n    if (children) {\n      children.set(split[split.length - 1], {\n        entry,\n        children: entry.type === 'tree' ? new Map() : undefined\n      });\n    }\n  }\n  return root;\n}\n\nfunction collectDirectoriesUsedInSchemaInner(schema, directories, seenSchemas) {\n  if (seenSchemas.has(schema)) {\n    return;\n  }\n  seenSchemas.add(schema);\n  if (schema.kind === 'array') {\n    return collectDirectoriesUsedInSchemaInner(schema.element, directories, seenSchemas);\n  }\n  if (schema.kind === 'child') {\n    return;\n  }\n  if (schema.kind === 'form') {\n    if (schema.formKind === 'asset' && schema.directory !== undefined) {\n      directories.add(fixPath(schema.directory));\n    }\n    if (schema.formKind === 'content' && schema.directories !== undefined) {\n      for (const directory of schema.directories) {\n        directories.add(fixPath(directory));\n      }\n    }\n    return;\n  }\n  if (schema.kind === 'object') {\n    for (const field of Object.values(schema.fields)) {\n      collectDirectoriesUsedInSchemaInner(field, directories, seenSchemas);\n    }\n    return;\n  }\n  if (schema.kind === 'conditional') {\n    for (const innerSchema of Object.values(schema.values)) {\n      collectDirectoriesUsedInSchemaInner(innerSchema, directories, seenSchemas);\n    }\n    return;\n  }\n  (0,emery__WEBPACK_IMPORTED_MODULE_1__.assertNever)(schema);\n}\nfunction collectDirectoriesUsedInSchema(schema) {\n  const directories = new Set();\n  collectDirectoriesUsedInSchemaInner(schema, directories, new Set());\n  return directories;\n}\nfunction getDirectoriesForTreeKey(schema, directory, slug, format) {\n  const directories = [fixPath(directory)];\n  if (format.dataLocation === 'outer') {\n    directories.push(fixPath(directory) + getDataFileExtension(format));\n  }\n  const toAdd = slug === undefined ? '' : `/${slug}`;\n  for (const directory of collectDirectoriesUsedInSchema(schema)) {\n    directories.push(directory + toAdd);\n  }\n  return directories;\n}\nfunction getTreeKey(directories, tree) {\n  return directories.map(d => {\n    var _getTreeNodeAtPath;\n    return (_getTreeNodeAtPath = getTreeNodeAtPath(tree, d)) === null || _getTreeNodeAtPath === void 0 ? void 0 : _getTreeNodeAtPath.entry.sha;\n  }).join('-');\n}\n\nvar pkgJson = {\n\tname: \"@keystatic/core\",\n\tversion: \"0.2.12\",\n\tlicense: \"MIT\",\n\trepository: {\n\t\ttype: \"git\",\n\t\turl: \"https://github.com/Thinkmill/keystatic/\",\n\t\tdirectory: \"packages/keystatic\"\n\t},\n\texports: {\n\t\t\"./ui\": {\n\t\t\ttypes: {\n\t\t\t\t\"import\": \"./ui/dist/keystatic-core-ui.cjs.mjs\",\n\t\t\t\t\"default\": \"./ui/dist/keystatic-core-ui.cjs.js\"\n\t\t\t},\n\t\t\tnode: {\n\t\t\t\t\"react-server\": {\n\t\t\t\t\tmodule: \"./ui/dist/keystatic-core-ui.node.react-server.esm.js\",\n\t\t\t\t\t\"import\": \"./ui/dist/keystatic-core-ui.node.react-server.cjs.mjs\",\n\t\t\t\t\t\"default\": \"./ui/dist/keystatic-core-ui.node.react-server.cjs.js\"\n\t\t\t\t},\n\t\t\t\tmodule: \"./ui/dist/keystatic-core-ui.node.esm.js\",\n\t\t\t\t\"import\": \"./ui/dist/keystatic-core-ui.node.cjs.mjs\",\n\t\t\t\t\"default\": \"./ui/dist/keystatic-core-ui.node.cjs.js\"\n\t\t\t},\n\t\t\t\"react-server\": {\n\t\t\t\tmodule: \"./ui/dist/keystatic-core-ui.react-server.esm.js\",\n\t\t\t\t\"import\": \"./ui/dist/keystatic-core-ui.react-server.cjs.mjs\",\n\t\t\t\t\"default\": \"./ui/dist/keystatic-core-ui.react-server.cjs.js\"\n\t\t\t},\n\t\t\tmodule: \"./ui/dist/keystatic-core-ui.esm.js\",\n\t\t\t\"import\": \"./ui/dist/keystatic-core-ui.cjs.mjs\",\n\t\t\t\"default\": \"./ui/dist/keystatic-core-ui.cjs.js\"\n\t\t},\n\t\t\".\": {\n\t\t\ttypes: {\n\t\t\t\t\"import\": \"./dist/keystatic-core.cjs.mjs\",\n\t\t\t\t\"default\": \"./dist/keystatic-core.cjs.js\"\n\t\t\t},\n\t\t\tnode: {\n\t\t\t\t\"react-server\": {\n\t\t\t\t\tmodule: \"./dist/keystatic-core.node.react-server.esm.js\",\n\t\t\t\t\t\"import\": \"./dist/keystatic-core.node.react-server.cjs.mjs\",\n\t\t\t\t\t\"default\": \"./dist/keystatic-core.node.react-server.cjs.js\"\n\t\t\t\t},\n\t\t\t\tmodule: \"./dist/keystatic-core.node.esm.js\",\n\t\t\t\t\"import\": \"./dist/keystatic-core.node.cjs.mjs\",\n\t\t\t\t\"default\": \"./dist/keystatic-core.node.cjs.js\"\n\t\t\t},\n\t\t\t\"react-server\": {\n\t\t\t\tmodule: \"./dist/keystatic-core.react-server.esm.js\",\n\t\t\t\t\"import\": \"./dist/keystatic-core.react-server.cjs.mjs\",\n\t\t\t\t\"default\": \"./dist/keystatic-core.react-server.cjs.js\"\n\t\t\t},\n\t\t\tmodule: \"./dist/keystatic-core.esm.js\",\n\t\t\t\"import\": \"./dist/keystatic-core.cjs.mjs\",\n\t\t\t\"default\": \"./dist/keystatic-core.cjs.js\"\n\t\t},\n\t\t\"./api/utils\": {\n\t\t\ttypes: {\n\t\t\t\t\"import\": \"./api/utils/dist/keystatic-core-api-utils.cjs.mjs\",\n\t\t\t\t\"default\": \"./api/utils/dist/keystatic-core-api-utils.cjs.js\"\n\t\t\t},\n\t\t\tnode: {\n\t\t\t\t\"react-server\": {\n\t\t\t\t\tmodule: \"./api/utils/dist/keystatic-core-api-utils.node.react-server.esm.js\",\n\t\t\t\t\t\"import\": \"./api/utils/dist/keystatic-core-api-utils.node.react-server.cjs.mjs\",\n\t\t\t\t\t\"default\": \"./api/utils/dist/keystatic-core-api-utils.node.react-server.cjs.js\"\n\t\t\t\t},\n\t\t\t\tmodule: \"./api/utils/dist/keystatic-core-api-utils.node.esm.js\",\n\t\t\t\t\"import\": \"./api/utils/dist/keystatic-core-api-utils.node.cjs.mjs\",\n\t\t\t\t\"default\": \"./api/utils/dist/keystatic-core-api-utils.node.cjs.js\"\n\t\t\t},\n\t\t\t\"react-server\": {\n\t\t\t\tmodule: \"./api/utils/dist/keystatic-core-api-utils.react-server.esm.js\",\n\t\t\t\t\"import\": \"./api/utils/dist/keystatic-core-api-utils.react-server.cjs.mjs\",\n\t\t\t\t\"default\": \"./api/utils/dist/keystatic-core-api-utils.react-server.cjs.js\"\n\t\t\t},\n\t\t\tmodule: \"./api/utils/dist/keystatic-core-api-utils.esm.js\",\n\t\t\t\"import\": \"./api/utils/dist/keystatic-core-api-utils.cjs.mjs\",\n\t\t\t\"default\": \"./api/utils/dist/keystatic-core-api-utils.cjs.js\"\n\t\t},\n\t\t\"./renderer\": {\n\t\t\ttypes: {\n\t\t\t\t\"import\": \"./renderer/dist/keystatic-core-renderer.cjs.mjs\",\n\t\t\t\t\"default\": \"./renderer/dist/keystatic-core-renderer.cjs.js\"\n\t\t\t},\n\t\t\tnode: {\n\t\t\t\t\"react-server\": {\n\t\t\t\t\tmodule: \"./renderer/dist/keystatic-core-renderer.node.react-server.esm.js\",\n\t\t\t\t\t\"import\": \"./renderer/dist/keystatic-core-renderer.node.react-server.cjs.mjs\",\n\t\t\t\t\t\"default\": \"./renderer/dist/keystatic-core-renderer.node.react-server.cjs.js\"\n\t\t\t\t},\n\t\t\t\tmodule: \"./renderer/dist/keystatic-core-renderer.node.esm.js\",\n\t\t\t\t\"import\": \"./renderer/dist/keystatic-core-renderer.node.cjs.mjs\",\n\t\t\t\t\"default\": \"./renderer/dist/keystatic-core-renderer.node.cjs.js\"\n\t\t\t},\n\t\t\t\"react-server\": {\n\t\t\t\tmodule: \"./renderer/dist/keystatic-core-renderer.react-server.esm.js\",\n\t\t\t\t\"import\": \"./renderer/dist/keystatic-core-renderer.react-server.cjs.mjs\",\n\t\t\t\t\"default\": \"./renderer/dist/keystatic-core-renderer.react-server.cjs.js\"\n\t\t\t},\n\t\t\tmodule: \"./renderer/dist/keystatic-core-renderer.esm.js\",\n\t\t\t\"import\": \"./renderer/dist/keystatic-core-renderer.cjs.mjs\",\n\t\t\t\"default\": \"./renderer/dist/keystatic-core-renderer.cjs.js\"\n\t\t},\n\t\t\"./api/generic\": {\n\t\t\ttypes: {\n\t\t\t\t\"import\": \"./api/generic/dist/keystatic-core-api-generic.cjs.mjs\",\n\t\t\t\t\"default\": \"./api/generic/dist/keystatic-core-api-generic.cjs.js\"\n\t\t\t},\n\t\t\tnode: {\n\t\t\t\t\"react-server\": {\n\t\t\t\t\tmodule: \"./api/generic/dist/keystatic-core-api-generic.node.react-server.esm.js\",\n\t\t\t\t\t\"import\": \"./api/generic/dist/keystatic-core-api-generic.node.react-server.cjs.mjs\",\n\t\t\t\t\t\"default\": \"./api/generic/dist/keystatic-core-api-generic.node.react-server.cjs.js\"\n\t\t\t\t},\n\t\t\t\tmodule: \"./api/generic/dist/keystatic-core-api-generic.node.esm.js\",\n\t\t\t\t\"import\": \"./api/generic/dist/keystatic-core-api-generic.node.cjs.mjs\",\n\t\t\t\t\"default\": \"./api/generic/dist/keystatic-core-api-generic.node.cjs.js\"\n\t\t\t},\n\t\t\t\"react-server\": {\n\t\t\t\tmodule: \"./api/generic/dist/keystatic-core-api-generic.react-server.esm.js\",\n\t\t\t\t\"import\": \"./api/generic/dist/keystatic-core-api-generic.react-server.cjs.mjs\",\n\t\t\t\t\"default\": \"./api/generic/dist/keystatic-core-api-generic.react-server.cjs.js\"\n\t\t\t},\n\t\t\tmodule: \"./api/generic/dist/keystatic-core-api-generic.esm.js\",\n\t\t\t\"import\": \"./api/generic/dist/keystatic-core-api-generic.cjs.mjs\",\n\t\t\t\"default\": \"./api/generic/dist/keystatic-core-api-generic.cjs.js\"\n\t\t},\n\t\t\"./reader\": {\n\t\t\ttypes: {\n\t\t\t\t\"import\": \"./reader/dist/keystatic-core-reader.cjs.mjs\",\n\t\t\t\t\"default\": \"./reader/dist/keystatic-core-reader.cjs.js\"\n\t\t\t},\n\t\t\tnode: {\n\t\t\t\t\"react-server\": {\n\t\t\t\t\tmodule: \"./reader/dist/keystatic-core-reader.node.react-server.esm.js\",\n\t\t\t\t\t\"import\": \"./reader/dist/keystatic-core-reader.node.react-server.cjs.mjs\",\n\t\t\t\t\t\"default\": \"./reader/dist/keystatic-core-reader.node.react-server.cjs.js\"\n\t\t\t\t},\n\t\t\t\tmodule: \"./reader/dist/keystatic-core-reader.node.esm.js\",\n\t\t\t\t\"import\": \"./reader/dist/keystatic-core-reader.node.cjs.mjs\",\n\t\t\t\t\"default\": \"./reader/dist/keystatic-core-reader.node.cjs.js\"\n\t\t\t},\n\t\t\t\"react-server\": {\n\t\t\t\tmodule: \"./reader/dist/keystatic-core-reader.react-server.esm.js\",\n\t\t\t\t\"import\": \"./reader/dist/keystatic-core-reader.react-server.cjs.mjs\",\n\t\t\t\t\"default\": \"./reader/dist/keystatic-core-reader.react-server.cjs.js\"\n\t\t\t},\n\t\t\tmodule: \"./reader/dist/keystatic-core-reader.esm.js\",\n\t\t\t\"import\": \"./reader/dist/keystatic-core-reader.cjs.mjs\",\n\t\t\t\"default\": \"./reader/dist/keystatic-core-reader.cjs.js\"\n\t\t},\n\t\t\"./reader/github\": {\n\t\t\ttypes: {\n\t\t\t\t\"import\": \"./reader/github/dist/keystatic-core-reader-github.cjs.mjs\",\n\t\t\t\t\"default\": \"./reader/github/dist/keystatic-core-reader-github.cjs.js\"\n\t\t\t},\n\t\t\tnode: {\n\t\t\t\t\"react-server\": {\n\t\t\t\t\tmodule: \"./reader/github/dist/keystatic-core-reader-github.node.react-server.esm.js\",\n\t\t\t\t\t\"import\": \"./reader/github/dist/keystatic-core-reader-github.node.react-server.cjs.mjs\",\n\t\t\t\t\t\"default\": \"./reader/github/dist/keystatic-core-reader-github.node.react-server.cjs.js\"\n\t\t\t\t},\n\t\t\t\tmodule: \"./reader/github/dist/keystatic-core-reader-github.node.esm.js\",\n\t\t\t\t\"import\": \"./reader/github/dist/keystatic-core-reader-github.node.cjs.mjs\",\n\t\t\t\t\"default\": \"./reader/github/dist/keystatic-core-reader-github.node.cjs.js\"\n\t\t\t},\n\t\t\t\"react-server\": {\n\t\t\t\tmodule: \"./reader/github/dist/keystatic-core-reader-github.react-server.esm.js\",\n\t\t\t\t\"import\": \"./reader/github/dist/keystatic-core-reader-github.react-server.cjs.mjs\",\n\t\t\t\t\"default\": \"./reader/github/dist/keystatic-core-reader-github.react-server.cjs.js\"\n\t\t\t},\n\t\t\tmodule: \"./reader/github/dist/keystatic-core-reader-github.esm.js\",\n\t\t\t\"import\": \"./reader/github/dist/keystatic-core-reader-github.cjs.mjs\",\n\t\t\t\"default\": \"./reader/github/dist/keystatic-core-reader-github.cjs.js\"\n\t\t},\n\t\t\"./content-components\": {\n\t\t\ttypes: {\n\t\t\t\t\"import\": \"./content-components/dist/keystatic-core-content-components.cjs.mjs\",\n\t\t\t\t\"default\": \"./content-components/dist/keystatic-core-content-components.cjs.js\"\n\t\t\t},\n\t\t\tnode: {\n\t\t\t\t\"react-server\": {\n\t\t\t\t\tmodule: \"./content-components/dist/keystatic-core-content-components.node.react-server.esm.js\",\n\t\t\t\t\t\"import\": \"./content-components/dist/keystatic-core-content-components.node.react-server.cjs.mjs\",\n\t\t\t\t\t\"default\": \"./content-components/dist/keystatic-core-content-components.node.react-server.cjs.js\"\n\t\t\t\t},\n\t\t\t\tmodule: \"./content-components/dist/keystatic-core-content-components.node.esm.js\",\n\t\t\t\t\"import\": \"./content-components/dist/keystatic-core-content-components.node.cjs.mjs\",\n\t\t\t\t\"default\": \"./content-components/dist/keystatic-core-content-components.node.cjs.js\"\n\t\t\t},\n\t\t\t\"react-server\": {\n\t\t\t\tmodule: \"./content-components/dist/keystatic-core-content-components.react-server.esm.js\",\n\t\t\t\t\"import\": \"./content-components/dist/keystatic-core-content-components.react-server.cjs.mjs\",\n\t\t\t\t\"default\": \"./content-components/dist/keystatic-core-content-components.react-server.cjs.js\"\n\t\t\t},\n\t\t\tmodule: \"./content-components/dist/keystatic-core-content-components.esm.js\",\n\t\t\t\"import\": \"./content-components/dist/keystatic-core-content-components.cjs.mjs\",\n\t\t\t\"default\": \"./content-components/dist/keystatic-core-content-components.cjs.js\"\n\t\t},\n\t\t\"./component-blocks\": {\n\t\t\ttypes: {\n\t\t\t\t\"import\": \"./component-blocks/dist/keystatic-core-component-blocks.cjs.mjs\",\n\t\t\t\t\"default\": \"./component-blocks/dist/keystatic-core-component-blocks.cjs.js\"\n\t\t\t},\n\t\t\tnode: {\n\t\t\t\t\"react-server\": {\n\t\t\t\t\tmodule: \"./component-blocks/dist/keystatic-core-component-blocks.node.react-server.esm.js\",\n\t\t\t\t\t\"import\": \"./component-blocks/dist/keystatic-core-component-blocks.node.react-server.cjs.mjs\",\n\t\t\t\t\t\"default\": \"./component-blocks/dist/keystatic-core-component-blocks.node.react-server.cjs.js\"\n\t\t\t\t},\n\t\t\t\tmodule: \"./component-blocks/dist/keystatic-core-component-blocks.node.esm.js\",\n\t\t\t\t\"import\": \"./component-blocks/dist/keystatic-core-component-blocks.node.cjs.mjs\",\n\t\t\t\t\"default\": \"./component-blocks/dist/keystatic-core-component-blocks.node.cjs.js\"\n\t\t\t},\n\t\t\t\"react-server\": {\n\t\t\t\tmodule: \"./component-blocks/dist/keystatic-core-component-blocks.react-server.esm.js\",\n\t\t\t\t\"import\": \"./component-blocks/dist/keystatic-core-component-blocks.react-server.cjs.mjs\",\n\t\t\t\t\"default\": \"./component-blocks/dist/keystatic-core-component-blocks.react-server.cjs.js\"\n\t\t\t},\n\t\t\tmodule: \"./component-blocks/dist/keystatic-core-component-blocks.esm.js\",\n\t\t\t\"import\": \"./component-blocks/dist/keystatic-core-component-blocks.cjs.mjs\",\n\t\t\t\"default\": \"./component-blocks/dist/keystatic-core-component-blocks.cjs.js\"\n\t\t},\n\t\t\"./form/fields/markdoc\": {\n\t\t\ttypes: {\n\t\t\t\t\"import\": \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.cjs.mjs\",\n\t\t\t\t\"default\": \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.cjs.js\"\n\t\t\t},\n\t\t\tnode: {\n\t\t\t\t\"react-server\": {\n\t\t\t\t\tmodule: \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.node.react-server.esm.js\",\n\t\t\t\t\t\"import\": \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.node.react-server.cjs.mjs\",\n\t\t\t\t\t\"default\": \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.node.react-server.cjs.js\"\n\t\t\t\t},\n\t\t\t\tmodule: \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.node.esm.js\",\n\t\t\t\t\"import\": \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.node.cjs.mjs\",\n\t\t\t\t\"default\": \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.node.cjs.js\"\n\t\t\t},\n\t\t\t\"react-server\": {\n\t\t\t\tmodule: \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.react-server.esm.js\",\n\t\t\t\t\"import\": \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.react-server.cjs.mjs\",\n\t\t\t\t\"default\": \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.react-server.cjs.js\"\n\t\t\t},\n\t\t\tmodule: \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.esm.js\",\n\t\t\t\"import\": \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.cjs.mjs\",\n\t\t\t\"default\": \"./form/fields/markdoc/dist/keystatic-core-form-fields-markdoc.cjs.js\"\n\t\t},\n\t\t\"./package.json\": \"./package.json\"\n\t},\n\tmain: \"dist/keystatic-core.cjs.js\",\n\tmodule: \"dist/keystatic-core.esm.js\",\n\tfiles: [\n\t\t\"dist\",\n\t\t\"api\",\n\t\t\"reader\",\n\t\t\"renderer\",\n\t\t\"ui\",\n\t\t\"form\",\n\t\t\"component-blocks\",\n\t\t\"content-components\"\n\t],\n\tscripts: {\n\t\tsetup: \"ts-gql build && tsx scripts/l10n.ts && tsx scripts/build-prism.ts\",\n\t\tbuild: \"pnpm run setup && next build\",\n\t\tdev: \"next dev\",\n\t\tstart: \"next start\"\n\t},\n\tdependencies: {\n\t\t\"@babel/runtime\": \"^7.18.3\",\n\t\t\"@braintree/sanitize-url\": \"^6.0.2\",\n\t\t\"@emotion/css\": \"^11.9.0\",\n\t\t\"@emotion/weak-memoize\": \"^0.3.0\",\n\t\t\"@floating-ui/react\": \"^0.24.0\",\n\t\t\"@internationalized/string\": \"^3.1.1\",\n\t\t\"@keystar/ui\": \"^0.4.9\",\n\t\t\"@markdoc/markdoc\": \"^0.3.0\",\n\t\t\"@react-aria/focus\": \"^3.14.3\",\n\t\t\"@react-aria/i18n\": \"^3.8.0\",\n\t\t\"@react-aria/interactions\": \"^3.19.1\",\n\t\t\"@react-aria/overlays\": \"^3.18.1\",\n\t\t\"@react-aria/selection\": \"^3.17.1\",\n\t\t\"@react-aria/utils\": \"^3.21.1\",\n\t\t\"@react-aria/visually-hidden\": \"^3.8.6\",\n\t\t\"@react-stately/collections\": \"^3.10.2\",\n\t\t\"@react-stately/list\": \"^3.10.0\",\n\t\t\"@react-stately/overlays\": \"^3.6.3\",\n\t\t\"@react-stately/utils\": \"^3.8.0\",\n\t\t\"@react-types/shared\": \"^3.21.0\",\n\t\t\"@sindresorhus/slugify\": \"^1.1.2\",\n\t\t\"@ts-gql/tag\": \"^0.7.0\",\n\t\t\"@types/node\": \"16.11.13\",\n\t\t\"@types/react\": \"^18.2.8\",\n\t\t\"@types/react-dom\": \"^18.0.11\",\n\t\t\"@urql/core\": \"^4.1.3\",\n\t\t\"@urql/exchange-auth\": \"^2.1.6\",\n\t\t\"@urql/exchange-graphcache\": \"^6.3.3\",\n\t\t\"@urql/exchange-persisted\": \"^4.1.0\",\n\t\tcookie: \"^0.5.0\",\n\t\temery: \"^1.4.1\",\n\t\t\"escape-string-regexp\": \"^4.0.0\",\n\t\t\"fast-deep-equal\": \"^3.1.3\",\n\t\tgraphql: \"^16.6.0\",\n\t\t\"idb-keyval\": \"^6.2.1\",\n\t\tignore: \"^5.2.4\",\n\t\t\"iron-webcrypto\": \"^0.10.1\",\n\t\t\"is-hotkey\": \"^0.2.0\",\n\t\t\"js-base64\": \"^3.7.5\",\n\t\t\"js-yaml\": \"^4.1.0\",\n\t\t\"lru-cache\": \"^7.14.1\",\n\t\t\"match-sorter\": \"^6.3.1\",\n\t\t\"mdast-util-from-markdown\": \"^0.8.5\",\n\t\t\"mdast-util-gfm-autolink-literal\": \"^0.1.3\",\n\t\t\"mdast-util-gfm-strikethrough\": \"^0.2.3\",\n\t\t\"micromark-extension-gfm-autolink-literal\": \"0.5.7\",\n\t\t\"micromark-extension-gfm-strikethrough\": \"0.6.5\",\n\t\tminimatch: \"^7.1.0\",\n\t\t\"prosemirror-commands\": \"^1.5.1\",\n\t\t\"prosemirror-history\": \"^1.3.0\",\n\t\t\"prosemirror-keymap\": \"^1.2.1\",\n\t\t\"prosemirror-model\": \"^1.19.0\",\n\t\t\"prosemirror-state\": \"^1.4.2\",\n\t\t\"prosemirror-tables\": \"^1.3.4\",\n\t\t\"prosemirror-transform\": \"^1.7.1\",\n\t\t\"prosemirror-view\": \"^1.30.2\",\n\t\t\"scroll-into-view-if-needed\": \"^3.0.3\",\n\t\tslate: \"^0.91.4\",\n\t\t\"slate-history\": \"^0.86.0\",\n\t\t\"slate-react\": \"^0.91.9\",\n\t\turql: \"^4.0.0\",\n\t\tzod: \"^3.20.2\"\n\t},\n\tdevDependencies: {\n\t\t\"@jest/expect\": \"^29.7.0\",\n\t\t\"@jest/globals\": \"^29.7.0\",\n\t\t\"@testing-library/user-event\": \"^14.4.3\",\n\t\t\"@ts-gql/compiler\": \"^0.16.1\",\n\t\t\"@ts-gql/eslint-plugin\": \"^0.8.5\",\n\t\t\"@ts-gql/next\": \"^17.0.0\",\n\t\t\"@types/cookie\": \"^0.5.1\",\n\t\t\"@types/is-hotkey\": \"^0.1.7\",\n\t\t\"@types/js-yaml\": \"^4.0.5\",\n\t\t\"@types/prismjs\": \"^1.26.0\",\n\t\t\"@types/signal-exit\": \"^3.0.1\",\n\t\teslint: \"^8.18.0\",\n\t\t\"fast-glob\": \"^3.2.12\",\n\t\t\"jest-diff\": \"^29.0.1\",\n\t\toutdent: \"^0.8.0\",\n\t\t\"pretty-format\": \"^29.0.1\",\n\t\tprismjs: \"^1.29.0\",\n\t\treact: \"^18.2.0\",\n\t\t\"react-dom\": \"^18.2.0\",\n\t\t\"react-element-to-jsx-string\": \"^15.0.0\",\n\t\t\"resize-observer-polyfill\": \"^1.5.1\",\n\t\t\"signal-exit\": \"^3.0.7\",\n\t\t\"slate-hyperscript\": \"^0.77.0\",\n\t\ttsx: \"^3.8.0\",\n\t\ttypescript: \"^5.2.2\"\n\t},\n\tpeerDependencies: {\n\t\treact: \"^18.2.0\",\n\t\t\"react-dom\": \"^18.2.0\"\n\t},\n\tpreconstruct: {\n\t\tentrypoints: [\n\t\t\t\"index.ts\",\n\t\t\t\"api/generic.ts\",\n\t\t\t\"api/utils.ts\",\n\t\t\t\"reader/index.ts\",\n\t\t\t\"reader/github.ts\",\n\t\t\t\"renderer.tsx\",\n\t\t\t\"ui.tsx\",\n\t\t\t\"form/fields/markdoc/index.tsx\",\n\t\t\t\"component-blocks/index.tsx\",\n\t\t\t\"content-components.ts\"\n\t\t]\n\t},\n\t\"ts-gql\": {\n\t\tschema: \"./github.graphql\",\n\t\tmode: \"no-transform\",\n\t\taddTypename: false,\n\t\tscalars: {\n\t\t\tGitObjectID: \"string\"\n\t\t}\n\t},\n\timports: {\n\t\t\"#react-cache-in-react-server\": {\n\t\t\t\"react-server\": \"./src/reader/react-server-cache.ts\",\n\t\t\t\"default\": \"./src/reader/noop-cache.ts\"\n\t\t},\n\t\t\"#sha1\": {\n\t\t\tnode: \"./src/sha1/node.ts\",\n\t\t\t\"default\": \"./src/sha1/webcrypto.ts\"\n\t\t},\n\t\t\"#webcrypto\": {\n\t\t\tnode: \"./src/api/webcrypto/node.ts\",\n\t\t\t\"default\": \"./src/api/webcrypto/default.ts\"\n\t\t},\n\t\t\"#api-handler\": {\n\t\t\tnode: \"./src/api/api-node.ts\",\n\t\t\t\"default\": \"./src/api/api-noop.ts\"\n\t\t},\n\t\t\"#field-ui/*\": {\n\t\t\t\"react-server\": \"./src/form/fields/empty-field-ui.tsx\",\n\t\t\t\"default\": \"./src/form/fields/*/ui.tsx\"\n\t\t},\n\t\t\"#component-block-primitives\": {\n\t\t\t\"react-server\": \"./src/form/fields/document/DocumentEditor/primitives/blank-for-react-server.tsx\",\n\t\t\t\"default\": \"./src/form/fields/document/DocumentEditor/primitives/index.tsx\"\n\t\t},\n\t\t\"#cloud-image-preview\": {\n\t\t\t\"react-server\": \"./src/component-blocks/blank-for-react-server.tsx\",\n\t\t\t\"default\": \"./src/component-blocks/cloud-image-preview.tsx\"\n\t\t}\n\t}\n};\n\nfunction object(fields, opts) {\n  return {\n    ...opts,\n    kind: 'object',\n    fields\n  };\n}\n\nfunction pluralize(count, options) {\n  const {\n    singular,\n    plural = singular + 's',\n    inclusive = true\n  } = options;\n  const variant = count === 1 ? singular : plural;\n  return inclusive ? `${count} ${variant}` : variant;\n}\nfunction getBranchPrefix(config) {\n  return config.storage.kind !== 'local' ? config.storage.branchPrefix : undefined;\n}\nfunction isGitHubConfig(config) {\n  return config.storage.kind === 'github';\n}\nfunction isLocalConfig(config) {\n  return config.storage.kind === 'local';\n}\nfunction isCloudConfig(config) {\n  var _config$cloud;\n  if (config.storage.kind !== 'cloud') return false;\n  if (!((_config$cloud = config.cloud) !== null && _config$cloud !== void 0 && _config$cloud.project) || !config.cloud.project.includes('/')) {\n    throw new Error(`Keystatic is set to \\`storage: { kind: 'cloud' }\\` but \\`cloud.project\\` isn't set.\nconfig({\n  storage: { kind: 'cloud' },\n  cloud: { project: 'team/project' },\n})`);\n  }\n  return true;\n}\nfunction getSplitCloudProject(config) {\n  var _config$cloud2;\n  if (!((_config$cloud2 = config.cloud) !== null && _config$cloud2 !== void 0 && _config$cloud2.project)) return undefined;\n  const [team, project] = config.cloud.project.split('/');\n  return {\n    team,\n    project\n  };\n}\nfunction getRepoPath(config) {\n  return `${config.mainOwner}/${config.mainRepo}`;\n}\nfunction getRepoUrl(config) {\n  return `https://github.com/${getRepoPath(config)}`;\n}\nfunction getSlugFromState(collectionConfig, state) {\n  const value = state[collectionConfig.slugField];\n  const field = collectionConfig.schema[collectionConfig.slugField];\n  if (field.kind !== 'form' || field.formKind !== 'slug') {\n    throw new Error(`slugField is not a slug field`);\n  }\n  return field.serializeWithSlug(value).slug;\n}\nfunction getEntriesInCollectionWithTreeKey(config, collection, rootTree) {\n  var _getTreeNodeAtPath$ch, _getTreeNodeAtPath;\n  const collectionConfig = config.collections[collection];\n  const schema = object(collectionConfig.schema);\n  const formatInfo = getCollectionFormat(config, collection);\n  const extension = getDataFileExtension(formatInfo);\n  const glob = getSlugGlobForCollection(config, collection);\n  const collectionPath = getCollectionPath(config, collection);\n  const directory = (_getTreeNodeAtPath$ch = (_getTreeNodeAtPath = getTreeNodeAtPath(rootTree, collectionPath)) === null || _getTreeNodeAtPath === void 0 ? void 0 : _getTreeNodeAtPath.children) !== null && _getTreeNodeAtPath$ch !== void 0 ? _getTreeNodeAtPath$ch : new Map();\n  const entries = [];\n  const directoriesUsedInSchema = [...collectDirectoriesUsedInSchema(schema)];\n  const suffix = getCollectionItemSlugSuffix(config, collection);\n  const possibleEntries = new Map(directory);\n  if (glob === '**') {\n    const handleDirectory = (dir, prefix) => {\n      for (const [key, entry] of dir) {\n        if (entry.children) {\n          possibleEntries.set(`${prefix}${key}`, entry);\n          handleDirectory(entry.children, `${prefix}${key}/`);\n        } else {\n          possibleEntries.set(`${prefix}${key}`, entry);\n        }\n      }\n    };\n    handleDirectory(directory, '');\n  }\n  for (const [key, entry] of possibleEntries) {\n    if (formatInfo.dataLocation === 'index') {\n      var _actualEntry$children;\n      const actualEntry = getTreeNodeAtPath(rootTree, getCollectionItemPath(config, collection, key));\n      if (!(actualEntry !== null && actualEntry !== void 0 && (_actualEntry$children = actualEntry.children) !== null && _actualEntry$children !== void 0 && _actualEntry$children.has('index' + extension))) continue;\n      entries.push({\n        key: getTreeKey([actualEntry.entry.path, ...directoriesUsedInSchema.map(x => `${x}/${key}`)], rootTree),\n        slug: key\n      });\n    } else {\n      if (suffix) {\n        const newEntry = getTreeNodeAtPath(rootTree, getCollectionItemPath(config, collection, key) + extension);\n        if (!newEntry || newEntry.children) continue;\n        entries.push({\n          key: getTreeKey([entry.entry.path, getCollectionItemPath(config, collection, key), ...directoriesUsedInSchema.map(x => `${x}/${key}`)], rootTree),\n          slug: key\n        });\n      }\n      if (entry.children || !key.endsWith(extension)) continue;\n      const slug = key.slice(0, -extension.length);\n      entries.push({\n        key: getTreeKey([entry.entry.path, getCollectionItemPath(config, collection, slug), ...directoriesUsedInSchema.map(x => `${x}/${slug}`)], rootTree),\n        slug\n      });\n    }\n  }\n  return entries;\n}\nconst KEYSTATIC_CLOUD_API_URL = 'https://api.keystatic.cloud';\nconst KEYSTATIC_CLOUD_HEADERS = {\n  'x-keystatic-version': pkgJson.version\n};\nconst textEncoder$1 = new TextEncoder();\nasync function redirectToCloudAuth(from, config) {\n  var _config$cloud3;\n  if (!((_config$cloud3 = config.cloud) !== null && _config$cloud3 !== void 0 && _config$cloud3.project)) {\n    throw new Error('Not a cloud config');\n  }\n  const code_verifier = (0,js_base64__WEBPACK_IMPORTED_MODULE_5__.fromUint8Array)(crypto.getRandomValues(new Uint8Array(32)), true);\n  const code_challenge = (0,js_base64__WEBPACK_IMPORTED_MODULE_5__.fromUint8Array)(new Uint8Array(await crypto.subtle.digest('SHA-256', textEncoder$1.encode(code_verifier))), true);\n  const state = (0,js_base64__WEBPACK_IMPORTED_MODULE_5__.fromUint8Array)(crypto.getRandomValues(new Uint8Array(32)), true);\n  localStorage.setItem('keystatic-cloud-state', JSON.stringify({\n    state,\n    from,\n    code_verifier\n  }));\n  const url = new URL(`${KEYSTATIC_CLOUD_API_URL}/oauth/authorize`);\n  url.searchParams.set('state', state);\n  url.searchParams.set('client_id', config.cloud.project);\n  url.searchParams.set('redirect_uri', `${window.location.origin}/keystatic/cloud/oauth/callback`);\n  url.searchParams.set('response_type', 'code');\n  url.searchParams.set('code_challenge_method', 'S256');\n  url.searchParams.set('code_challenge', code_challenge);\n  url.searchParams.set('keystatic_version', pkgJson.version);\n  window.location.href = url.toString();\n}\n\nconst tableCellChildren = ['paragraph', 'code', 'heading', 'ordered-list', 'unordered-list', 'divider', 'image'];\nconst blockquoteChildren = [...tableCellChildren, 'table'];\nconst paragraphLike = [...blockquoteChildren, 'blockquote'];\nconst insideOfLayouts = [...paragraphLike, 'component-block'];\nfunction blockContainer(args) {\n  return {\n    kind: 'blocks',\n    allowedChildren: new Set(args.allowedChildren),\n    blockToWrapInlinesIn: args.allowedChildren[0],\n    invalidPositionHandleMode: args.invalidPositionHandleMode\n  };\n}\nfunction inlineContainer(args) {\n  return {\n    kind: 'inlines',\n    invalidPositionHandleMode: args.invalidPositionHandleMode\n  };\n}\nconst editorSchema = {\n  editor: blockContainer({\n    allowedChildren: [...insideOfLayouts, 'layout'],\n    invalidPositionHandleMode: 'move'\n  }),\n  layout: blockContainer({\n    allowedChildren: ['layout-area'],\n    invalidPositionHandleMode: 'move'\n  }),\n  'layout-area': blockContainer({\n    allowedChildren: insideOfLayouts,\n    invalidPositionHandleMode: 'unwrap'\n  }),\n  blockquote: blockContainer({\n    allowedChildren: blockquoteChildren,\n    invalidPositionHandleMode: 'move'\n  }),\n  paragraph: inlineContainer({\n    invalidPositionHandleMode: 'unwrap'\n  }),\n  code: inlineContainer({\n    invalidPositionHandleMode: 'move'\n  }),\n  divider: inlineContainer({\n    invalidPositionHandleMode: 'move'\n  }),\n  heading: inlineContainer({\n    invalidPositionHandleMode: 'unwrap'\n  }),\n  'component-block': blockContainer({\n    allowedChildren: ['component-block-prop', 'component-inline-prop'],\n    invalidPositionHandleMode: 'move'\n  }),\n  'component-inline-prop': inlineContainer({\n    invalidPositionHandleMode: 'unwrap'\n  }),\n  'component-block-prop': blockContainer({\n    allowedChildren: insideOfLayouts,\n    invalidPositionHandleMode: 'unwrap'\n  }),\n  'ordered-list': blockContainer({\n    allowedChildren: ['list-item'],\n    invalidPositionHandleMode: 'move'\n  }),\n  'unordered-list': blockContainer({\n    allowedChildren: ['list-item'],\n    invalidPositionHandleMode: 'move'\n  }),\n  'list-item': blockContainer({\n    allowedChildren: ['list-item-content', 'ordered-list', 'unordered-list'],\n    invalidPositionHandleMode: 'unwrap'\n  }),\n  'list-item-content': inlineContainer({\n    invalidPositionHandleMode: 'unwrap'\n  }),\n  image: inlineContainer({\n    invalidPositionHandleMode: 'move'\n  }),\n  table: blockContainer({\n    invalidPositionHandleMode: 'move',\n    allowedChildren: ['table-head', 'table-body']\n  }),\n  'table-body': blockContainer({\n    invalidPositionHandleMode: 'move',\n    allowedChildren: ['table-row']\n  }),\n  'table-row': blockContainer({\n    invalidPositionHandleMode: 'move',\n    allowedChildren: ['table-cell']\n  }),\n  'table-cell': blockContainer({\n    invalidPositionHandleMode: 'move',\n    allowedChildren: tableCellChildren\n  }),\n  'table-head': blockContainer({\n    invalidPositionHandleMode: 'move',\n    allowedChildren: ['table-row']\n  })\n};\nconst inlineContainerTypes = new Set(Object.entries(editorSchema).filter(([, value]) => value.kind === 'inlines').map(([type]) => type));\nfunction isInlineContainer(node) {\n  return node.type !== undefined && inlineContainerTypes.has(node.type);\n}\nconst blockTypes = new Set(Object.keys(editorSchema).filter(x => x !== 'editor'));\nfunction isBlock(node) {\n  return blockTypes.has(node.type);\n}\n\n// to print the editor schema in Graphviz if you want to visualize it\n// function printEditorSchema(editorSchema: EditorSchema) {\n//   return `digraph G {\n//   concentrate=true;\n//   ${Object.keys(editorSchema)\n//     .map(key => {\n//       let val = editorSchema[key];\n//       if (val.kind === 'inlines') {\n//         return `\"${key}\" -> inlines`;\n//       }\n//       if (val.kind === 'blocks') {\n//         return `\"${key}\" -> {${[...val.allowedChildren].map(x => JSON.stringify(x)).join(' ')}}`;\n//       }\n//     })\n//     .join('\\n  ')}\n// }`;\n// }\n\nfunction getWholeDocumentFeaturesForChildField(editorDocumentFeatures, options) {\n  var _options$formatting, _options$formatting2, _options$formatting3, _options$formatting4, _options$formatting5, _options$formatting6, _options$formatting7;\n  const inlineMarksFromOptions = (_options$formatting = options.formatting) === null || _options$formatting === void 0 ? void 0 : _options$formatting.inlineMarks;\n  const inlineMarks = Object.fromEntries(Object.keys(editorDocumentFeatures.formatting.inlineMarks).map(_mark => {\n    const mark = _mark;\n    return [mark, inlineMarksFromOptions === 'inherit' || (inlineMarksFromOptions === null || inlineMarksFromOptions === void 0 ? void 0 : inlineMarksFromOptions[mark]) === 'inherit' ? editorDocumentFeatures.formatting.inlineMarks[mark] : false];\n  }));\n  const headingLevels = (_options$formatting2 = options.formatting) === null || _options$formatting2 === void 0 ? void 0 : _options$formatting2.headingLevels;\n  return {\n    formatting: {\n      inlineMarks,\n      softBreaks: ((_options$formatting3 = options.formatting) === null || _options$formatting3 === void 0 ? void 0 : _options$formatting3.softBreaks) === 'inherit' && editorDocumentFeatures.formatting.softBreaks,\n      alignment: {\n        center: editorDocumentFeatures.formatting.alignment.center && ((_options$formatting4 = options.formatting) === null || _options$formatting4 === void 0 ? void 0 : _options$formatting4.alignment) === 'inherit',\n        end: editorDocumentFeatures.formatting.alignment.end && ((_options$formatting5 = options.formatting) === null || _options$formatting5 === void 0 ? void 0 : _options$formatting5.alignment) === 'inherit'\n      },\n      blockTypes: ((_options$formatting6 = options.formatting) === null || _options$formatting6 === void 0 ? void 0 : _options$formatting6.blockTypes) === 'inherit' ? editorDocumentFeatures.formatting.blockTypes : {\n        blockquote: false,\n        code: false\n      },\n      headings: headingLevels === 'inherit' ? editorDocumentFeatures.formatting.headings : {\n        levels: headingLevels ? editorDocumentFeatures.formatting.headings.levels.filter(level => headingLevels.includes(level)) : [],\n        schema: editorDocumentFeatures.formatting.headings.schema\n      },\n      listTypes: ((_options$formatting7 = options.formatting) === null || _options$formatting7 === void 0 ? void 0 : _options$formatting7.listTypes) === 'inherit' ? editorDocumentFeatures.formatting.listTypes : {\n        ordered: false,\n        unordered: false\n      }\n    },\n    dividers: options.dividers === 'inherit' ? editorDocumentFeatures.dividers : false,\n    images: options.images === 'inherit' && editorDocumentFeatures.images,\n    layouts: [],\n    links: options.links === 'inherit' && editorDocumentFeatures.links,\n    tables: options.tables === 'inherit' && editorDocumentFeatures.tables\n  };\n}\nfunction getDocumentFeaturesForChildField(editorDocumentFeatures, options) {\n  var _options$formatting8, _options$formatting10, _options$formatting11, _options$formatting12, _options$formatting13, _options$formatting14;\n  // an important note for this: normalization based on document features\n  // is done based on the document features returned here\n  // and the editor document features\n  // so the result for any given child prop will be the things that are\n  // allowed by both these document features\n  // AND the editor document features\n  const inlineMarksFromOptions = (_options$formatting8 = options.formatting) === null || _options$formatting8 === void 0 ? void 0 : _options$formatting8.inlineMarks;\n  const inlineMarks = inlineMarksFromOptions === 'inherit' ? 'inherit' : Object.fromEntries(Object.keys(editorDocumentFeatures.formatting.inlineMarks).map(mark => {\n    return [mark, !!(inlineMarksFromOptions || {})[mark]];\n  }));\n  if (options.kind === 'inline') {\n    var _options$formatting9;\n    return {\n      kind: 'inline',\n      inlineMarks,\n      documentFeatures: {\n        links: options.links === 'inherit'\n      },\n      softBreaks: ((_options$formatting9 = options.formatting) === null || _options$formatting9 === void 0 ? void 0 : _options$formatting9.softBreaks) === 'inherit'\n    };\n  }\n  const headingLevels = (_options$formatting10 = options.formatting) === null || _options$formatting10 === void 0 ? void 0 : _options$formatting10.headingLevels;\n  return {\n    kind: 'block',\n    inlineMarks,\n    softBreaks: ((_options$formatting11 = options.formatting) === null || _options$formatting11 === void 0 ? void 0 : _options$formatting11.softBreaks) === 'inherit',\n    documentFeatures: {\n      layouts: [],\n      dividers: options.dividers === 'inherit' ? editorDocumentFeatures.dividers : false,\n      formatting: {\n        alignment: ((_options$formatting12 = options.formatting) === null || _options$formatting12 === void 0 ? void 0 : _options$formatting12.alignment) === 'inherit' ? editorDocumentFeatures.formatting.alignment : {\n          center: false,\n          end: false\n        },\n        blockTypes: ((_options$formatting13 = options.formatting) === null || _options$formatting13 === void 0 ? void 0 : _options$formatting13.blockTypes) === 'inherit' ? editorDocumentFeatures.formatting.blockTypes : {\n          blockquote: false,\n          code: false\n        },\n        headings: headingLevels === 'inherit' ? editorDocumentFeatures.formatting.headings : {\n          levels: headingLevels ? editorDocumentFeatures.formatting.headings.levels.filter(level => headingLevels.includes(level)) : [],\n          schema: editorDocumentFeatures.formatting.headings.schema\n        },\n        listTypes: ((_options$formatting14 = options.formatting) === null || _options$formatting14 === void 0 ? void 0 : _options$formatting14.listTypes) === 'inherit' ? editorDocumentFeatures.formatting.listTypes : {\n          ordered: false,\n          unordered: false\n        }\n      },\n      links: options.links === 'inherit',\n      images: options.images === 'inherit' ? editorDocumentFeatures.images : false,\n      tables: options.tables === 'inherit'\n    },\n    componentBlocks: options.componentBlocks === 'inherit'\n  };\n}\nfunction getSchemaAtPropPathInner(path, value, schema) {\n  // because we're checking the length here\n  // the non-null asserts on shift below are fine\n  if (path.length === 0) {\n    return schema;\n  }\n  if (schema.kind === 'child' || schema.kind === 'form') {\n    return;\n  }\n  if (schema.kind === 'conditional') {\n    const key = path.shift();\n    if (key === 'discriminant') {\n      return getSchemaAtPropPathInner(path, value.discriminant, schema.discriminant);\n    }\n    if (key === 'value') {\n      const propVal = schema.values[value.discriminant];\n      return getSchemaAtPropPathInner(path, value.value, propVal);\n    }\n    return;\n  }\n  if (schema.kind === 'object') {\n    const key = path.shift();\n    return getSchemaAtPropPathInner(path, value[key], schema.fields[key]);\n  }\n  if (schema.kind === 'array') {\n    const index = path.shift();\n    return getSchemaAtPropPathInner(path, value[index], schema.element);\n  }\n  (0,emery__WEBPACK_IMPORTED_MODULE_1__.assertNever)(schema);\n}\nfunction getSchemaAtPropPath(path, value, props) {\n  return getSchemaAtPropPathInner([...path], value, {\n    kind: 'object',\n    fields: props\n  });\n}\nfunction getAncestorSchemas(rootSchema, path, value) {\n  const ancestors = [];\n  const currentPath = [...path];\n  let currentProp = rootSchema;\n  let currentValue = value;\n  while (currentPath.length) {\n    ancestors.push(currentProp);\n    const key = currentPath.shift(); // this code only runs when path.length is truthy so this non-null assertion is fine\n    if (currentProp.kind === 'array') {\n      currentProp = currentProp.element;\n      currentValue = currentValue[key];\n    } else if (currentProp.kind === 'conditional') {\n      currentProp = currentProp.values[value.discriminant];\n      currentValue = currentValue.value;\n    } else if (currentProp.kind === 'object') {\n      currentValue = currentValue[key];\n      currentProp = currentProp.fields[key];\n    } else if (currentProp.kind === 'child' || currentProp.kind === 'form') {\n      throw new Error(`unexpected prop \"${key}\"`);\n    } else {\n      (0,emery__WEBPACK_IMPORTED_MODULE_1__.assertNever)(currentProp);\n    }\n  }\n  return ancestors;\n}\nfunction getPlaceholderTextForPropPath(propPath, fields, formProps) {\n  const field = getSchemaAtPropPath(propPath, formProps, fields);\n  if ((field === null || field === void 0 ? void 0 : field.kind) === 'child' && (field.options.kind === 'block' && field.options.editIn !== 'modal' || field.options.kind === 'inline')) {\n    return field.options.placeholder;\n  }\n  return '';\n}\nfunction cloneDescendent(node) {\n  if (slate__WEBPACK_IMPORTED_MODULE_6__.Element.isElement(node)) {\n    return {\n      ...node,\n      children: node.children.map(cloneDescendent)\n    };\n  }\n  return {\n    ...node\n  };\n}\n\nconst allMarks = ['bold', 'italic', 'underline', 'strikethrough', 'code', 'superscript', 'subscript', 'keyboard'];\nconst isElementActive = (editor, format) => {\n  const [match] = slate__WEBPACK_IMPORTED_MODULE_6__.Editor.nodes(editor, {\n    match: n => n.type === format\n  });\n  return !!match;\n};\nfunction clearFormatting(editor) {\n  slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.unwrapNodes(editor, {\n    match: node => node.type === 'heading' || node.type === 'blockquote' || node.type === 'code'\n  });\n  slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.unsetNodes(editor, allMarks, {\n    match: slate__WEBPACK_IMPORTED_MODULE_6__.Text.isText\n  });\n}\nfunction moveChildren(editor, parent, to, shouldMoveNode = () => true) {\n  const parentPath = slate__WEBPACK_IMPORTED_MODULE_6__.Path.isPath(parent) ? parent : parent[1];\n  const parentNode = slate__WEBPACK_IMPORTED_MODULE_6__.Path.isPath(parent) ? slate__WEBPACK_IMPORTED_MODULE_6__.Node.get(editor, parentPath) : parent[0];\n  if (!isBlock(parentNode)) return;\n  for (let i = parentNode.children.length - 1; i >= 0; i--) {\n    if (shouldMoveNode(parentNode.children[i], i)) {\n      const childPath = [...parentPath, i];\n      slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.moveNodes(editor, {\n        at: childPath,\n        to\n      });\n    }\n  }\n}\n\n/**\n * This is equivalent to Editor.after except that it ignores points that have no content\n * like the point in a void text node, an empty text node and the last point in a text node\n */\n// TODO: this would probably break if you were trying to get the last point in the editor?\nfunction EditorAfterButIgnoringingPointsWithNoContent(editor, at, {\n  distance = 1\n} = {}) {\n  const anchor = slate__WEBPACK_IMPORTED_MODULE_6__.Editor.point(editor, at, {\n    edge: 'end'\n  });\n  const focus = slate__WEBPACK_IMPORTED_MODULE_6__.Editor.end(editor, []);\n  const range = {\n    anchor,\n    focus\n  };\n  let d = 0;\n  let target;\n  for (const p of slate__WEBPACK_IMPORTED_MODULE_6__.Editor.positions(editor, {\n    at: range\n  })) {\n    if (d > distance) {\n      break;\n    }\n\n    // this is the important change\n    const node = slate__WEBPACK_IMPORTED_MODULE_6__.Node.get(editor, p.path);\n    if (node.text.length === p.offset) {\n      continue;\n    }\n    if (d !== 0) {\n      target = p;\n    }\n    d++;\n  }\n  return target;\n}\nfunction nodeTypeMatcher(...args) {\n  if (args.length === 1) {\n    const type = args[0];\n    return node => node.type === type;\n  }\n  const set = new Set(args);\n  return node => typeof node.type === 'string' && set.has(node.type);\n}\nfunction getAncestorComponentChildFieldDocumentFeatures(editor, editorDocumentFeatures, componentBlocks) {\n  const ancestorComponentProp = slate__WEBPACK_IMPORTED_MODULE_6__.Editor.above(editor, {\n    match: nodeTypeMatcher('component-block-prop', 'component-inline-prop')\n  });\n  if (ancestorComponentProp) {\n    const propPath = ancestorComponentProp[0].propPath;\n    const ancestorComponent = slate__WEBPACK_IMPORTED_MODULE_6__.Editor.parent(editor, ancestorComponentProp[1]);\n    if (ancestorComponent[0].type === 'component-block') {\n      const component = ancestorComponent[0].component;\n      const componentBlock = componentBlocks[component];\n      if (componentBlock && propPath) {\n        const childField = getSchemaAtPropPath(propPath, ancestorComponent[0].props, componentBlock.schema);\n        if ((childField === null || childField === void 0 ? void 0 : childField.kind) === 'child') {\n          return getDocumentFeaturesForChildField(editorDocumentFeatures, childField.options);\n        }\n      }\n    }\n  }\n}\n\n// this is used in react-server environments to avoid bundling UI when the reader API is used\n// if you added a new field and get an error that there's missing a missing export here,\n// you probably just need to add another empty export here\n\nfunction empty() {\n  throw new Error(\"unexpected call to function that shouldn't be called in React server component environment\");\n}\nlet SlugFieldInput = empty,\n  TextFieldInput = empty,\n  UrlFieldInput = empty,\n  SelectFieldInput = empty,\n  RelationshipInput = empty,\n  PathReferenceInput = empty,\n  MultiselectFieldInput = empty,\n  IntegerFieldInput = empty,\n  ImageFieldInput = empty,\n  FileFieldInput = empty,\n  DatetimeFieldInput = empty,\n  DateFieldInput = empty,\n  CloudImageFieldInput = empty,\n  BlocksFieldInput = empty,\n  DocumentFieldInput = empty,\n  CheckboxFieldInput = empty,\n  createEditorSchema = empty,\n  getDefaultValue = empty,\n  parseToEditorState = empty,\n  serializeFromEditorState = empty;\n\nclass FieldDataError extends Error {\n  constructor(message) {\n    super(message);\n    this.name = 'FieldDataError';\n  }\n}\n\nfunction assertRequired(value, validation, label) {\n  if (value === null && validation !== null && validation !== void 0 && validation.isRequired) {\n    throw new FieldDataError(`${label} is required`);\n  }\n}\nfunction basicFormFieldWithSimpleReaderParse(config) {\n  return {\n    kind: 'form',\n    Input: config.Input,\n    defaultValue: config.defaultValue,\n    parse: config.parse,\n    serialize: config.serialize,\n    validate: config.validate,\n    reader: {\n      parse(value) {\n        return config.validate(config.parse(value));\n      }\n    }\n  };\n}\n\nconst arrayValuesToElementKeys = new WeakMap();\nlet counter = 0;\nfunction getKeysForArrayValue(value) {\n  if (!arrayValuesToElementKeys.has(value)) {\n    arrayValuesToElementKeys.set(value, Array.from({\n      length: value.length\n    }, getNewArrayElementKey));\n  }\n  return arrayValuesToElementKeys.get(value);\n}\nfunction setKeysForArrayValue(value, elementIds) {\n  arrayValuesToElementKeys.set(value, elementIds);\n}\nfunction getNewArrayElementKey() {\n  return (counter++).toString();\n}\nconst getInitialPropsValue = _getInitialPropsValue;\nfunction _getInitialPropsValue(schema) {\n  switch (schema.kind) {\n    case 'form':\n      return schema.defaultValue();\n    case 'child':\n      return schema.options.kind === 'block' ? [{\n        type: 'paragraph',\n        children: [{\n          text: ''\n        }]\n      }] : null;\n    case 'conditional':\n      {\n        const defaultValue = schema.discriminant.defaultValue();\n        return {\n          discriminant: defaultValue,\n          value: getInitialPropsValue(schema.values[defaultValue.toString()])\n        };\n      }\n    case 'object':\n      {\n        const obj = {};\n        for (const key of Object.keys(schema.fields)) {\n          obj[key] = getInitialPropsValue(schema.fields[key]);\n        }\n        return obj;\n      }\n    case 'array':\n      {\n        return [];\n      }\n  }\n  (0,emery__WEBPACK_IMPORTED_MODULE_1__.assertNever)(schema);\n}\nfunction getInitialPropsValueFromInitializer(schema, initializer) {\n  switch (schema.kind) {\n    case 'form':\n      return initializer === undefined ? schema.defaultValue() : initializer;\n    case 'child':\n      return initializer !== null && initializer !== void 0 ? initializer : schema.options.kind === 'block' ? [{\n        type: 'paragraph',\n        children: [{\n          text: ''\n        }]\n      }] : null;\n    case 'conditional':\n      {\n        const defaultValue = initializer === undefined ? schema.discriminant.defaultValue() : initializer.discriminant;\n        return {\n          discriminant: defaultValue,\n          value: getInitialPropsValueFromInitializer(schema.values[defaultValue.toString()], initializer === undefined ? undefined : initializer.value)\n        };\n      }\n    case 'object':\n      {\n        const obj = {};\n        for (const key of Object.keys(schema.fields)) {\n          obj[key] = getInitialPropsValueFromInitializer(schema.fields[key], initializer === undefined ? undefined : initializer[key]);\n        }\n        return obj;\n      }\n    case 'array':\n      {\n        return (initializer !== null && initializer !== void 0 ? initializer : []).map(x => getInitialPropsValueFromInitializer(schema.element, x.value));\n      }\n  }\n  (0,emery__WEBPACK_IMPORTED_MODULE_1__.assertNever)(schema);\n}\nfunction updateValue(schema, currentValue, updater) {\n  if (updater === undefined) return currentValue;\n  switch (schema.kind) {\n    case 'form':\n      return updater;\n    case 'child':\n      return updater;\n    case 'conditional':\n      {\n        return {\n          discriminant: updater.discriminant,\n          value: updater.discriminant === currentValue.discriminant ? updateValue(schema.values[updater.discriminant.toString()], currentValue.value, updater.value) : getInitialPropsValueFromInitializer(schema.values[updater.discriminant.toString()], updater.value)\n        };\n      }\n    case 'object':\n      {\n        const obj = {};\n        for (const key of Object.keys(schema.fields)) {\n          obj[key] = updateValue(schema.fields[key], currentValue[key], updater[key]);\n        }\n        return obj;\n      }\n    case 'array':\n      {\n        const currentArrVal = currentValue;\n        const newVal = updater;\n        const uniqueKeys = new Set();\n        for (const x of newVal) {\n          if (x.key !== undefined) {\n            if (uniqueKeys.has(x.key)) {\n              throw new Error('Array elements must have unique keys');\n            }\n            uniqueKeys.add(x.key);\n          }\n        }\n        const keys = newVal.map(x => {\n          if (x.key !== undefined) return x.key;\n          let elementKey = getNewArrayElementKey();\n          // just in case someone gives a key that is above our counter\n          while (uniqueKeys.has(elementKey)) {\n            elementKey = getNewArrayElementKey();\n          }\n          uniqueKeys.add(elementKey);\n          return elementKey;\n        });\n        const prevKeys = getKeysForArrayValue(currentArrVal);\n        const prevValuesByKey = new Map(currentArrVal.map((value, i) => {\n          return [prevKeys[i], value];\n        }));\n        const val = newVal.map((x, i) => {\n          const id = keys[i];\n          if (prevValuesByKey.has(id)) {\n            return updateValue(schema.element, prevValuesByKey.get(id), x.value);\n          }\n          return getInitialPropsValueFromInitializer(schema.element, x.value);\n        });\n        setKeysForArrayValue(val, keys);\n        return val;\n      }\n  }\n  (0,emery__WEBPACK_IMPORTED_MODULE_1__.assertNever)(schema);\n}\n\nfunction getValueAtPropPath(value, inputPath) {\n  const path = [...inputPath];\n  while (path.length) {\n    const key = path.shift();\n    value = value[key];\n  }\n  return value;\n}\nfunction traverseProps(schema, value, visitor, path = []) {\n  if (schema.kind === 'form' || schema.kind === 'child') {\n    visitor(schema, value, path);\n    return;\n  }\n  if (schema.kind === 'object') {\n    for (const [key, childProp] of Object.entries(schema.fields)) {\n      traverseProps(childProp, value[key], visitor, [...path, key]);\n    }\n    visitor(schema, value, path);\n    return;\n  }\n  if (schema.kind === 'array') {\n    for (const [idx, val] of value.entries()) {\n      traverseProps(schema.element, val, visitor, path.concat(idx));\n    }\n    return visitor(schema, value, path);\n  }\n  if (schema.kind === 'conditional') {\n    const discriminant = value.discriminant;\n    visitor(schema, discriminant, path.concat('discriminant'));\n    traverseProps(schema.values[discriminant.toString()], value.value, visitor, path.concat('value'));\n    visitor(schema, value, path);\n    return;\n  }\n  (0,emery_assertions__WEBPACK_IMPORTED_MODULE_0__.assertNever)(schema);\n}\nfunction transformProps(schema, value, visitors, path = []) {\n  if (schema.kind === 'form' || schema.kind === 'child') {\n    if (visitors[schema.kind]) {\n      return visitors[schema.kind](schema, value, path);\n    }\n    return value;\n  }\n  if (schema.kind === 'object') {\n    const val = Object.fromEntries(Object.entries(schema.fields).map(([key, val]) => {\n      return [key, transformProps(val, value[key], visitors, [...path, key])];\n    }));\n    if (visitors.object) {\n      return visitors[schema.kind](schema, val, path);\n    }\n    return val;\n  }\n  if (schema.kind === 'array') {\n    const val = value.map((val, idx) => transformProps(schema.element, val, visitors, path.concat(idx)));\n    if (visitors.array) {\n      return visitors[schema.kind](schema, val, path);\n    }\n    return val;\n  }\n  if (schema.kind === 'conditional') {\n    const discriminant = transformProps(schema.discriminant, value.discriminant, visitors, path.concat('discriminant'));\n    const conditionalVal = transformProps(schema.values[discriminant.toString()], value.value, visitors, path.concat('value'));\n    const val = {\n      discriminant,\n      value: conditionalVal\n    };\n    if (visitors.conditional) {\n      return visitors[schema.kind](schema, val, path);\n    }\n    return val;\n  }\n  (0,emery_assertions__WEBPACK_IMPORTED_MODULE_0__.assertNever)(schema);\n}\nfunction replaceValueAtPropPath(schema, value, newValue, path) {\n  if (path.length === 0) {\n    return newValue;\n  }\n  const [key, ...newPath] = path;\n  if (schema.kind === 'object') {\n    return {\n      ...value,\n      [key]: replaceValueAtPropPath(schema.fields[key], value[key], newValue, newPath)\n    };\n  }\n  if (schema.kind === 'conditional') {\n    const conditionalValue = value;\n    // replaceValueAtPropPath should not be used to only update the discriminant of a conditional field\n    // if you want to update the discriminant of a conditional field, replace the value of the whole conditional field\n    (0,emery_assertions__WEBPACK_IMPORTED_MODULE_0__.assert)(key === 'value');\n    return {\n      discriminant: conditionalValue.discriminant,\n      value: replaceValueAtPropPath(schema.values[key], conditionalValue.value, newValue, newPath)\n    };\n  }\n  if (schema.kind === 'array') {\n    const prevVal = value;\n    const newVal = [...prevVal];\n    setKeysForArrayValue(newVal, getKeysForArrayValue(prevVal));\n    newVal[key] = replaceValueAtPropPath(schema.element, newVal[key], newValue, newPath);\n    return newVal;\n  }\n\n  // we should never reach here since form or child fields don't contain other fields\n  // so the only thing that can happen to them is to be replaced which happens at the start of this function when path.length === 0\n  (0,emery_assertions__WEBPACK_IMPORTED_MODULE_0__.assert)(schema.kind !== 'form' && schema.kind !== 'child');\n  (0,emery_assertions__WEBPACK_IMPORTED_MODULE_0__.assertNever)(schema);\n}\n\n// a v important note\n// marks in the markdown ast/html are represented quite differently to how they are in slate\n// if you had the markdown **something https://keystonejs.com something**\n// the bold node is the parent of the link node\n// but in slate, marks are only represented on text nodes\n\nconst currentlyActiveMarks = new Set();\nconst currentlyDisabledMarks = new Set();\nlet currentLink = null;\nfunction addMarkToChildren(mark, cb) {\n  const wasPreviouslyActive = currentlyActiveMarks.has(mark);\n  currentlyActiveMarks.add(mark);\n  try {\n    return cb();\n  } finally {\n    if (!wasPreviouslyActive) {\n      currentlyActiveMarks.delete(mark);\n    }\n  }\n}\nfunction setLinkForChildren(href, cb) {\n  // we'll only use the outer link\n  if (currentLink !== null) {\n    return cb();\n  }\n  currentLink = href;\n  try {\n    return cb();\n  } finally {\n    currentLink = null;\n  }\n}\nfunction addMarksToChildren(marks, cb) {\n  const marksToRemove = new Set();\n  for (const mark of marks) {\n    if (!currentlyActiveMarks.has(mark)) {\n      marksToRemove.add(mark);\n    }\n    currentlyActiveMarks.add(mark);\n  }\n  try {\n    return cb();\n  } finally {\n    for (const mark of marksToRemove) {\n      currentlyActiveMarks.delete(mark);\n    }\n  }\n}\nfunction forceDisableMarkForChildren(mark, cb) {\n  const wasPreviouslyDisabled = currentlyDisabledMarks.has(mark);\n  currentlyDisabledMarks.add(mark);\n  try {\n    return cb();\n  } finally {\n    if (!wasPreviouslyDisabled) {\n      currentlyDisabledMarks.delete(mark);\n    }\n  }\n}\n\n/**\n * This type is more strict than `Element & { type: 'link'; }` because `children`\n * is constrained to only contain Text nodes. This can't be assumed generally around the editor\n * (because of potentially future inline components or nested links(which are normalized away but the editor needs to not break if it happens))\n * but where this type is used, we're only going to allow links to contain Text and that's important\n * so that we know a block will never be inside an inline because Slate gets unhappy when that happens\n * (really the link inline should probably be a mark rather than an inline,\n * non-void inlines are probably always bad but that would imply changing the document\n * structure which would be such unnecessary breakage)\n */\n\nfunction getInlineNodes(text) {\n  const node = {\n    text\n  };\n  for (const mark of currentlyActiveMarks) {\n    if (!currentlyDisabledMarks.has(mark)) {\n      node[mark] = true;\n    }\n  }\n  if (currentLink !== null) {\n    return [{\n      text: ''\n    }, {\n      type: 'link',\n      href: currentLink,\n      children: [node]\n    }, {\n      text: ''\n    }];\n  }\n  return [node];\n}\n\nclass VariableChildFields extends Error {\n  constructor() {\n    super('There are a variable number of child fields');\n  }\n}\nfunction findSingleChildField(schema) {\n  try {\n    const result = _findConstantChildFields(schema, [], new Set());\n    if (result.length === 1) {\n      return result[0];\n    }\n    return;\n  } catch (err) {\n    if (err instanceof VariableChildFields) {\n      return;\n    }\n    throw err;\n  }\n}\nfunction _findConstantChildFields(schema, path, seenSchemas) {\n  if (seenSchemas.has(schema)) {\n    return [];\n  }\n  seenSchemas.add(schema);\n  switch (schema.kind) {\n    case 'form':\n      return [];\n    case 'child':\n      return [{\n        relativePath: path,\n        options: schema.options,\n        kind: 'child'\n      }];\n    case 'conditional':\n      {\n        if (couldContainChildField(schema)) {\n          throw new VariableChildFields();\n        }\n        return [];\n      }\n    case 'array':\n      {\n        if (schema.asChildTag) {\n          const child = _findConstantChildFields(schema.element, [], seenSchemas);\n          if (child.length > 1) {\n            return [];\n          }\n          return [{\n            kind: 'array',\n            asChildTag: schema.asChildTag,\n            field: schema,\n            relativePath: path,\n            child: child[0]\n          }];\n        }\n        if (couldContainChildField(schema)) {\n          throw new VariableChildFields();\n        }\n        return [];\n      }\n    case 'object':\n      {\n        const paths = [];\n        for (const [key, value] of Object.entries(schema.fields)) {\n          paths.push(..._findConstantChildFields(value, path.concat(key), seenSchemas));\n        }\n        return paths;\n      }\n  }\n}\nfunction couldContainChildField(schema, seen = new Set()) {\n  if (seen.has(schema)) {\n    return false;\n  }\n  seen.add(schema);\n  switch (schema.kind) {\n    case 'form':\n      return false;\n    case 'child':\n      return true;\n    case 'conditional':\n      return Object.values(schema.values).some(value => couldContainChildField(value, seen));\n    case 'object':\n      return Object.keys(schema.fields).some(key => couldContainChildField(schema.fields[key], seen));\n    case 'array':\n      return couldContainChildField(schema.element, seen);\n  }\n}\n\nfunction inlineNodeFromMarkdoc(node) {\n  if (node.type === 'inline') {\n    return inlineChildrenFromMarkdoc(node.children);\n  }\n  if (node.type === 'link') {\n    return setLinkForChildren(node.attributes.href, () => inlineChildrenFromMarkdoc(node.children));\n  }\n  if (node.type === 'text') {\n    return getInlineNodes(node.attributes.content);\n  }\n  if (node.type === 'strong') {\n    return addMarkToChildren('bold', () => inlineChildrenFromMarkdoc(node.children));\n  }\n  if (node.type === 'code') {\n    return addMarkToChildren('code', () => getInlineNodes(node.attributes.content));\n  }\n  if (node.type === 'em') {\n    return addMarkToChildren('italic', () => inlineChildrenFromMarkdoc(node.children));\n  }\n  if (node.type === 's') {\n    return addMarkToChildren('strikethrough', () => inlineChildrenFromMarkdoc(node.children));\n  }\n  if (node.type === 'tag') {\n    if (node.tag === 'u') {\n      return addMarkToChildren('underline', () => inlineChildrenFromMarkdoc(node.children));\n    }\n    if (node.tag === 'kbd') {\n      return addMarkToChildren('keyboard', () => inlineChildrenFromMarkdoc(node.children));\n    }\n    if (node.tag === 'sub') {\n      return addMarkToChildren('subscript', () => inlineChildrenFromMarkdoc(node.children));\n    }\n    if (node.tag === 'sup') {\n      return addMarkToChildren('superscript', () => inlineChildrenFromMarkdoc(node.children));\n    }\n  }\n  if (node.type === 'softbreak') {\n    return getInlineNodes(' ');\n  }\n  if (node.type === 'hardbreak') {\n    return getInlineNodes('\\n');\n  }\n  if (node.tag === 'component-inline-prop' && Array.isArray(node.attributes.propPath) && node.attributes.propPath.every(x => typeof x === 'string' || typeof x === 'number')) {\n    return {\n      type: 'component-inline-prop',\n      children: inlineFromMarkdoc(node.children),\n      propPath: node.attributes.propPath\n    };\n  }\n  throw new Error(`Unknown inline node type: ${node.type}`);\n}\nfunction inlineChildrenFromMarkdoc(nodes) {\n  return nodes.flatMap(inlineNodeFromMarkdoc);\n}\nfunction inlineFromMarkdoc(nodes) {\n  const transformedNodes = nodes.flatMap(inlineNodeFromMarkdoc);\n  const nextNodes = [];\n  let lastNode;\n  for (const [idx, node] of transformedNodes.entries()) {\n    var _lastNode;\n    if (node.type === undefined && node.text === '' && ((_lastNode = lastNode) === null || _lastNode === void 0 ? void 0 : _lastNode.type) === undefined && idx !== transformedNodes.length - 1) {\n      continue;\n    }\n    nextNodes.push(node);\n    lastNode = node;\n  }\n  if (!nextNodes.length) {\n    nextNodes.push({\n      text: ''\n    });\n  }\n  return nextNodes;\n}\nfunction fromMarkdoc(node, componentBlocks) {\n  const nodes = node.children.flatMap(x => fromMarkdocNode(x, componentBlocks));\n  if (nodes.length === 0) {\n    return [{\n      type: 'paragraph',\n      children: [{\n        text: ''\n      }]\n    }];\n  }\n  if (nodes[nodes.length - 1].type !== 'paragraph') {\n    nodes.push({\n      type: 'paragraph',\n      children: [{\n        text: ''\n      }]\n    });\n  }\n  return nodes;\n}\nfunction fromMarkdocNode(node, componentBlocks) {\n  if (node.type === 'blockquote') {\n    return {\n      type: 'blockquote',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'fence') {\n    const {\n      language,\n      content,\n      ...rest\n    } = node.attributes;\n    return {\n      type: 'code',\n      children: [{\n        text: content.replace(/\\n$/, '')\n      }],\n      ...(typeof language === 'string' ? {\n        language\n      } : {}),\n      ...rest\n    };\n  }\n  if (node.type === 'heading') {\n    return {\n      ...node.attributes,\n      level: node.attributes.level,\n      type: 'heading',\n      children: inlineFromMarkdoc(node.children)\n    };\n  }\n  if (node.type === 'list') {\n    return {\n      type: node.attributes.ordered ? 'ordered-list' : 'unordered-list',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'item') {\n    var _node$children$;\n    const children = [{\n      type: 'list-item-content',\n      children: node.children.length ? inlineFromMarkdoc([node.children[0]]) : [{\n        text: ''\n      }]\n    }];\n    if (((_node$children$ = node.children[1]) === null || _node$children$ === void 0 ? void 0 : _node$children$.type) === 'list') {\n      const list = node.children[1];\n      children.push({\n        type: list.attributes.ordered ? 'ordered-list' : 'unordered-list',\n        children: list.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n      });\n    }\n    return {\n      type: 'list-item',\n      children\n    };\n  }\n  if (node.type === 'paragraph') {\n    if (node.children.length === 1 && node.children[0].type === 'inline' && node.children[0].children.length === 1 && node.children[0].children[0].type === 'image') {\n      var _image$attributes$tit;\n      const image = node.children[0].children[0];\n      return {\n        type: 'image',\n        src: decodeURI(image.attributes.src),\n        alt: image.attributes.alt,\n        title: (_image$attributes$tit = image.attributes.title) !== null && _image$attributes$tit !== void 0 ? _image$attributes$tit : '',\n        children: [{\n          text: ''\n        }]\n      };\n    }\n    const children = inlineFromMarkdoc(node.children);\n    if (children.length === 1 && children[0].type === 'component-inline-prop') {\n      return children[0];\n    }\n    return {\n      type: 'paragraph',\n      children,\n      textAlign: node.attributes.textAlign\n    };\n  }\n  if (node.type === 'hr') {\n    return {\n      type: 'divider',\n      children: [{\n        text: ''\n      }]\n    };\n  }\n  if (node.type === 'table') {\n    return {\n      type: 'table',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'tbody') {\n    return {\n      type: 'table-body',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'thead') {\n    if (!node.children.length) return [];\n    return {\n      type: 'table-head',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'tr') {\n    return {\n      type: 'table-row',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'td') {\n    return {\n      type: 'table-cell',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'th') {\n    return {\n      type: 'table-cell',\n      header: true,\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'tag') {\n    if (node.tag === 'table') {\n      return fromMarkdocNode(node.children[0], componentBlocks);\n    }\n    if (node.tag === 'layout') {\n      return {\n        type: 'layout',\n        layout: node.attributes.layout,\n        children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n      };\n    }\n    if (node.tag === 'layout-area') {\n      return {\n        type: 'layout-area',\n        children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n      };\n    }\n    if (node.tag === 'component-block') {\n      return {\n        type: 'component-block',\n        component: node.attributes.component,\n        props: node.attributes.props,\n        children: node.children.length === 0 ? [{\n          type: 'component-inline-prop',\n          children: [{\n            text: ''\n          }]\n        }] : node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n      };\n    }\n    if (node.tag === 'component-block-prop' && Array.isArray(node.attributes.propPath) && node.attributes.propPath.every(x => typeof x === 'string' || typeof x === 'number')) {\n      return {\n        type: 'component-block-prop',\n        children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks)),\n        propPath: node.attributes.propPath\n      };\n    }\n    if (node.tag) {\n      const componentBlock = componentBlocks[node.tag];\n      if (componentBlock) {\n        const singleChildField = findSingleChildField({\n          kind: 'object',\n          fields: componentBlock.schema\n        });\n        if (singleChildField) {\n          const newAttributes = JSON.parse(JSON.stringify(node.attributes));\n          const children = [];\n          toChildrenAndProps$1(node.children, children, newAttributes, singleChildField, [], componentBlocks);\n          return {\n            type: 'component-block',\n            component: node.tag,\n            props: newAttributes,\n            children\n          };\n        }\n        return {\n          type: 'component-block',\n          component: node.tag,\n          props: node.attributes,\n          children: node.children.length === 0 ? [{\n            type: 'component-inline-prop',\n            children: [{\n              text: ''\n            }]\n          }] : node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n        };\n      }\n    }\n    throw new Error(`Unknown tag: ${node.tag}`);\n  }\n  return inlineNodeFromMarkdoc(node);\n}\nfunction toChildrenAndProps$1(fromMarkdoc, resultingChildren, value, singleChildField, parentPropPath, componentBlocks) {\n  if (singleChildField.kind === 'child') {\n    const children = fromMarkdoc.flatMap(x => fromMarkdocNode(x, componentBlocks));\n    resultingChildren.push({\n      type: `component-${singleChildField.options.kind}-prop`,\n      propPath: [...parentPropPath, ...singleChildField.relativePath],\n      children\n    });\n  }\n  if (singleChildField.kind === 'array') {\n    const arr = [];\n    for (let [idx, child] of fromMarkdoc.entries()) {\n      if (child.type === 'paragraph') {\n        child = child.children[0].children[0];\n      }\n      if (child.type !== 'tag') {\n        throw new Error(`expected tag ${singleChildField.asChildTag}, found type: ${child.type}`);\n      }\n      if (child.tag !== singleChildField.asChildTag) {\n        throw new Error(`expected tag ${singleChildField.asChildTag}, found tag: ${child.tag}`);\n      }\n      const attributes = JSON.parse(JSON.stringify(child.attributes));\n      if (singleChildField.child) {\n        toChildrenAndProps$1(child.children, resultingChildren, attributes, singleChildField.child, [...parentPropPath, ...singleChildField.relativePath, idx], componentBlocks);\n      }\n      arr.push(attributes);\n    }\n    const key = singleChildField.relativePath[singleChildField.relativePath.length - 1];\n    const parent = getValueAtPropPath(value, singleChildField.relativePath.slice(0, -1));\n    parent[key] = arr;\n  }\n}\n\nfunction areArraysEqual(a, b) {\n  return a.length === b.length && a.every((x, i) => x === b[i]);\n}\nfunction normalizeTextBasedOnInlineMarksAndSoftBreaks([node, path], editor, inlineMarks, softBreaks) {\n  const marksToRemove = Object.keys(node).filter(x => x !== 'text' && x !== 'insertMenu' && inlineMarks[x] !== true);\n  if (marksToRemove.length) {\n    slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.unsetNodes(editor, marksToRemove, {\n      at: path\n    });\n    return true;\n  }\n  if (!softBreaks) {\n    const hasSoftBreaks = node.text.includes('\\n');\n    if (hasSoftBreaks) {\n      const [parentNode] = slate__WEBPACK_IMPORTED_MODULE_6__.Editor.parent(editor, path);\n      if (parentNode.type !== 'code') {\n        for (const position of slate__WEBPACK_IMPORTED_MODULE_6__.Editor.positions(editor, {\n          at: path\n        })) {\n          const character = slate__WEBPACK_IMPORTED_MODULE_6__.Node.get(editor, position.path).text[position.offset];\n          if (character === '\\n') {\n            slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.delete(editor, {\n              at: position\n            });\n            return true;\n          }\n        }\n      }\n    }\n  }\n  return false;\n}\nfunction normalizeInlineBasedOnLinks([node, path], editor, links) {\n  if (node.type === 'link' && !links) {\n    slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.insertText(editor, ` (${node.href})`, {\n      at: slate__WEBPACK_IMPORTED_MODULE_6__.Editor.end(editor, path)\n    });\n    slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.unwrapNodes(editor, {\n      at: path\n    });\n    return true;\n  }\n  return false;\n}\nfunction normalizeElementBasedOnDocumentFeatures([node, path], editor, {\n  formatting,\n  dividers,\n  layouts,\n  links,\n  images,\n  tables\n}) {\n  if (node.type === 'heading' && (!formatting.headings.levels.length || !formatting.headings.levels.includes(node.level)) || node.type === 'ordered-list' && !formatting.listTypes.ordered || node.type === 'unordered-list' && !formatting.listTypes.unordered || node.type === 'code' && !formatting.blockTypes.code || node.type === 'blockquote' && !formatting.blockTypes.blockquote || node.type === 'image' && !images || node.type === 'table' && !tables || node.type === 'layout' && (layouts.length === 0 || !layouts.some(layout => areArraysEqual(layout, node.layout)))) {\n    slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.unwrapNodes(editor, {\n      at: path\n    });\n    return true;\n  }\n  if ((node.type === 'paragraph' || node.type === 'heading') && (!formatting.alignment.center && node.textAlign === 'center' || !formatting.alignment.end && node.textAlign === 'end' || 'textAlign' in node && node.textAlign !== 'center' && node.textAlign !== 'end')) {\n    slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.unsetNodes(editor, 'textAlign', {\n      at: path\n    });\n    return true;\n  }\n  if (node.type === 'divider' && !dividers) {\n    slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.removeNodes(editor, {\n      at: path\n    });\n    return true;\n  }\n  return normalizeInlineBasedOnLinks([node, path], editor, links);\n}\nfunction withDocumentFeaturesNormalization(documentFeatures, editor) {\n  const {\n    normalizeNode\n  } = editor;\n  editor.normalizeNode = ([node, path]) => {\n    if (slate__WEBPACK_IMPORTED_MODULE_6__.Text.isText(node)) {\n      normalizeTextBasedOnInlineMarksAndSoftBreaks([node, path], editor, documentFeatures.formatting.inlineMarks, documentFeatures.formatting.softBreaks);\n    } else if (slate__WEBPACK_IMPORTED_MODULE_6__.Element.isElement(node)) {\n      normalizeElementBasedOnDocumentFeatures([node, path], editor, documentFeatures);\n    }\n    normalizeNode([node, path]);\n  };\n  return editor;\n}\n\nfunction getSrcPrefix(publicPath, slug) {\n  return typeof publicPath === 'string' ? `${publicPath.replace(/\\/*$/, '')}/${slug === undefined ? '' : slug + '/'}` : '';\n}\n\nfunction deserializeFiles(nodes, componentBlocks, files, otherFiles, mode, documentFeatures, slug) {\n  return nodes.map(node => {\n    if (node.type === 'component-block') {\n      const componentBlock = componentBlocks[node.component];\n      if (!componentBlock) return node;\n      const schema = object(componentBlock.schema);\n      return {\n        ...node,\n        props: deserializeProps(schema, node.props, files, otherFiles, mode, slug)\n      };\n    }\n    if (node.type === 'image' && typeof node.src === 'string' && mode === 'edit') {\n      var _ref;\n      const prefix = getSrcPrefixForImageBlock(documentFeatures, slug);\n      const filename = node.src.slice(prefix.length);\n      const content = (_ref = typeof documentFeatures.images === 'object' && typeof documentFeatures.images.directory === 'string' ? otherFiles.get(fixPath(documentFeatures.images.directory)) : files) === null || _ref === void 0 ? void 0 : _ref.get(filename);\n      if (!content) {\n        return {\n          type: 'paragraph',\n          children: [{\n            text: `Missing image ${filename}`\n          }]\n        };\n      }\n      return {\n        type: 'image',\n        src: {\n          filename,\n          content\n        },\n        alt: node.alt,\n        title: node.title,\n        children: [{\n          text: ''\n        }]\n      };\n    }\n    if (typeof node.type === 'string') {\n      const children = deserializeFiles(node.children, componentBlocks, files, otherFiles, mode, documentFeatures, slug);\n      return {\n        ...node,\n        children\n      };\n    }\n    return node;\n  });\n}\nfunction deserializeProps(schema, value, files, otherFiles, mode, slug) {\n  return transformProps(schema, value, {\n    form: (schema, value) => {\n      if (schema.formKind === 'asset') {\n        var _otherFiles$get;\n        if (mode === 'read') {\n          return schema.reader.parse(value);\n        }\n        const filename = schema.filename(value, {\n          slug,\n          suggestedFilenamePrefix: undefined\n        });\n        return schema.parse(value, {\n          asset: filename ? schema.directory ? (_otherFiles$get = otherFiles.get(schema.directory)) === null || _otherFiles$get === void 0 ? void 0 : _otherFiles$get.get(filename) : files.get(filename) : undefined,\n          slug\n        });\n      }\n      if (schema.formKind === 'content') {\n        throw new Error('Not implemented');\n      }\n      if (mode === 'read') {\n        return schema.reader.parse(value);\n      }\n      return schema.parse(value, undefined);\n    }\n  });\n}\nfunction getSrcPrefixForImageBlock(documentFeatures, slug) {\n  return getSrcPrefix(typeof documentFeatures.images === 'object' ? documentFeatures.images.publicPath : undefined, slug);\n}\n\nfunction serializeProps(rootValue, rootSchema,\n// note you might have a slug without a slug field when serializing props inside a component block or etc. in the editor\nslugField, slug, shouldSuggestFilenamePrefix) {\n  const extraFiles = [];\n  return {\n    value: transformProps(rootSchema, rootValue, {\n      form(schema, value, propPath) {\n        if (propPath.length === 1 && slugField === propPath[0]) {\n          if (schema.formKind !== 'slug') {\n            throw new Error('slugField is a not a slug field');\n          }\n          return schema.serializeWithSlug(value).value;\n        }\n        if (schema.formKind === 'asset') {\n          const {\n            asset,\n            value: forYaml\n          } = schema.serialize(value, {\n            suggestedFilenamePrefix: shouldSuggestFilenamePrefix ? getPropPathPortion(propPath, rootSchema, rootValue) : undefined,\n            slug\n          });\n          if (asset) {\n            extraFiles.push({\n              path: asset.filename,\n              contents: asset.content,\n              parent: schema.directory\n            });\n          }\n          return forYaml;\n        }\n        if (schema.formKind === 'content') {\n          const {\n            other,\n            external,\n            content,\n            value: forYaml\n          } = schema.serialize(value, {\n            slug\n          });\n          if (content) {\n            extraFiles.push({\n              path: getPropPathPortion(propPath, rootSchema, rootValue) + schema.contentExtension,\n              contents: content,\n              parent: undefined\n            });\n          }\n          for (const [key, contents] of other) {\n            extraFiles.push({\n              path: getPropPathPortion(propPath, rootSchema, rootValue) + '/' + key,\n              contents,\n              parent: undefined\n            });\n          }\n          const allowedDirectories = new Set(schema.directories);\n          for (const [directory, contents] of external) {\n            if (!allowedDirectories.has(directory)) {\n              throw new Error(`Invalid directory ${directory} in content field serialization`);\n            }\n            for (const [filename, fileContents] of contents) {\n              extraFiles.push({\n                path: filename,\n                contents: fileContents,\n                parent: directory\n              });\n            }\n          }\n          return forYaml;\n        }\n        return schema.serialize(value).value;\n      },\n      object(_schema, value) {\n        return Object.fromEntries(Object.entries(value).filter(([_, val]) => val !== undefined));\n      },\n      array(_schema, value) {\n        return value.map(val => val === undefined ? null : val);\n      },\n      child() {\n        return undefined;\n      }\n    }),\n    extraFiles\n  };\n}\nfunction getPropPathPortion(path, schema, value) {\n  const end = [];\n  for (const portion of path) {\n    if (schema.kind === 'array') {\n      value = value[portion];\n      if (schema.slugField && schema.element.kind === 'object') {\n        const slug = getSlugFromState({\n          schema: schema.element.fields,\n          slugField: schema.slugField\n        }, value);\n        end.push(slug);\n      } else {\n        end.push(portion);\n      }\n      schema = schema.element;\n      continue;\n    }\n    end.push(portion);\n    if (schema.kind === 'object') {\n      value = value[portion];\n      schema = schema.fields[portion];\n      continue;\n    }\n    if (schema.kind === 'conditional') {\n      if (portion === 'discriminant') {\n        schema = schema.discriminant;\n      } else if (portion === 'value') {\n        schema = schema.values[value.discriminant];\n      }\n      value = value[portion];\n      continue;\n    }\n    throw new Error(`unexpected ${schema.kind}`);\n  }\n  return end.join('/');\n}\n\nfunction toInline(nodes) {\n  return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('inline', {}, nodes.flatMap(toMarkdocInline));\n}\nconst markToMarkdoc = {\n  bold: {\n    type: 'strong'\n  },\n  code: {\n    type: 'code'\n  },\n  italic: {\n    type: 'em'\n  },\n  underline: {\n    type: 'tag',\n    tag: 'u'\n  },\n  keyboard: {\n    type: 'tag',\n    tag: 'kbd'\n  },\n  strikethrough: {\n    type: 's'\n  },\n  subscript: {\n    type: 'tag',\n    tag: 'sub'\n  },\n  superscript: {\n    type: 'tag',\n    tag: 'sup'\n  }\n};\nfunction toMarkdocInline(node) {\n  var _exec, _exec2;\n  if (node.type === 'link') {\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('link', {\n      href: node.href\n    }, node.children.flatMap(toMarkdocInline));\n  }\n  if (node.type !== undefined) {\n    throw new Error(`unexpected inline node type: ${node.type}`);\n  }\n  const marks = Object.keys(node).filter(mark => mark !== 'text' && mark !== 'code').sort();\n  const leadingWhitespace = (_exec = /^\\s+/.exec(node.text)) === null || _exec === void 0 ? void 0 : _exec[0];\n  const trailingWhitespace = (_exec2 = /\\s+$/.exec(node.text)) === null || _exec2 === void 0 ? void 0 : _exec2[0];\n  let children = node.code ? [new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('code', {\n    content: node.text.trim()\n  }, [])] : [new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('text', {\n    content: node.text.trim()\n  })];\n  for (const mark of marks) {\n    const config = markToMarkdoc[mark];\n    if (config) {\n      children = [new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node(config.type, {}, children, config.tag)];\n    }\n  }\n  if (leadingWhitespace !== null && leadingWhitespace !== void 0 && leadingWhitespace.length) {\n    children.unshift(new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('text', {\n      content: leadingWhitespace\n    }, []));\n  }\n  if (trailingWhitespace !== null && trailingWhitespace !== void 0 && trailingWhitespace.length) {\n    children.push(new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('text', {\n      content: trailingWhitespace\n    }, []));\n  }\n  return children;\n}\nfunction toMarkdocDocument(nodes, _config) {\n  const extraFiles = [];\n  const config = {\n    ..._config,\n    extraFiles\n  };\n  const node = new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('document', {}, nodes.flatMap(x => toMarkdoc(x, config)));\n  return {\n    node,\n    extraFiles\n  };\n}\nfunction toChildrenAndProps(childrenAsMarkdoc, resultingChildren, value, singleChildField) {\n  if (singleChildField.kind === 'child') {\n    const child = childrenAsMarkdoc.find(x => areArraysEqual(x.propPath, singleChildField.relativePath));\n    if (child) {\n      resultingChildren.push(...child.children);\n    }\n    return;\n  }\n  if (singleChildField.kind === 'array') {\n    const key = singleChildField.relativePath[singleChildField.relativePath.length - 1];\n    const parent = getValueAtPropPath(value, singleChildField.relativePath.slice(0, -1));\n    const valueAtPropPath = parent[key];\n    delete parent[key];\n    const childNodes = new Map();\n    for (const child of childrenAsMarkdoc) {\n      const innerPropPath = child.propPath.slice(singleChildField.relativePath.length + 1);\n      const num = child.propPath[singleChildField.relativePath.length];\n      if (childNodes.get(num) === undefined) {\n        childNodes.set(num, []);\n      }\n      childNodes.get(num).push({\n        children: child.children,\n        propPath: innerPropPath\n      });\n    }\n    resultingChildren.push(...valueAtPropPath.map((x, i) => {\n      var _childNodes$get;\n      const newChildrenAsMarkdoc = (_childNodes$get = childNodes.get(i)) !== null && _childNodes$get !== void 0 ? _childNodes$get : [];\n      const children = [];\n      toChildrenAndProps(newChildrenAsMarkdoc, children, x, singleChildField.child);\n      return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('tag', x, children, singleChildField.asChildTag);\n    }));\n  }\n}\nfunction toMarkdoc(node, config) {\n  if (node.type === 'paragraph') {\n    const markdocNode = new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('paragraph', node.textAlign ? {\n      textAlign: node.textAlign\n    } : {}, [toInline(node.children)]);\n    if (node.textAlign) {\n      markdocNode.annotations.push({\n        name: 'textAlign',\n        value: node.textAlign,\n        type: 'attribute'\n      });\n    }\n    return markdocNode;\n  }\n  if (node.type === 'image') {\n    config.extraFiles.push({\n      contents: node.src.content,\n      path: node.src.filename,\n      parent: typeof config.documentFeatures.images === 'object' && typeof config.documentFeatures.images.directory === 'string' ? fixPath(config.documentFeatures.images.directory) : undefined\n    });\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('paragraph', {}, [new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('inline', {}, [new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('image', {\n      src: encodeURI(`${getSrcPrefixForImageBlock(config.documentFeatures, config.slug)}${node.src.filename}`),\n      alt: node.alt,\n      title: node.title\n    })])]);\n  }\n  if (node.type === 'code') {\n    const extraAttributes = {};\n    const {\n      children,\n      language,\n      type,\n      ...rest\n    } = node;\n    const schema = typeof config.documentFeatures.formatting.blockTypes.code === 'object' ? config.documentFeatures.formatting.blockTypes.code.schema : undefined;\n    if (schema && Object.keys(schema.fields).length > 0) {\n      const serialized = serializeProps(getInitialPropsValueFromInitializer(schema, rest), schema, undefined, config.slug, false);\n      Object.assign(extraAttributes, serialized.value);\n      config.extraFiles.push(...serialized.extraFiles);\n    }\n    let content = children[0].text + '\\n';\n    const markdocNode = new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('fence', {\n      content,\n      language,\n      ...extraAttributes\n    }, [new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('text', {\n      content\n    })]);\n    for (const [key, value] of Object.entries(extraAttributes)) {\n      markdocNode.annotations.push({\n        name: key,\n        value,\n        type: 'attribute'\n      });\n    }\n    return markdocNode;\n  }\n  const _toMarkdoc = node => toMarkdoc(node, config);\n  if (node.type === 'blockquote') {\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('blockquote', {}, node.children.map(_toMarkdoc));\n  }\n  if (node.type === 'divider') {\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('hr');\n  }\n  if (node.type === 'table') {\n    const head = node.children.find(x => x.type === 'table-head');\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('tag', {}, [new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('table', {}, [new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('thead', {}, head ? head.children.map(_toMarkdoc) : []), _toMarkdoc(node.children.find(x => x.type === 'table-body'))])], 'table');\n  }\n  if (node.type === 'table-body') {\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('tbody', {}, node.children.map(_toMarkdoc));\n  }\n  if (node.type === 'table-row') {\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('tr', {}, node.children.map(_toMarkdoc));\n  }\n  if (node.type === 'table-cell') {\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node(node.header ? 'th' : 'td', {}, node.children.map(_toMarkdoc));\n  }\n  if (node.type === 'heading') {\n    const extraAttributes = {};\n    if (node.textAlign) {\n      extraAttributes.textAlign = node.textAlign;\n    }\n    const {\n      children,\n      level,\n      textAlign,\n      type,\n      ...rest\n    } = node;\n    const schema = config.documentFeatures.formatting.headings.schema;\n    if (Object.keys(schema.fields).length > 0) {\n      Object.assign(extraAttributes, serializeProps(getInitialPropsValueFromInitializer(schema, rest), schema, undefined, config.slug, false).value);\n    }\n    const markdocNode = new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('heading', {\n      level: node.level,\n      ...extraAttributes\n    }, [toInline(node.children)]);\n    for (const [key, value] of Object.entries(extraAttributes)) {\n      markdocNode.annotations.push({\n        name: key,\n        value,\n        type: 'attribute'\n      });\n    }\n    return markdocNode;\n  }\n  if (node.type === 'ordered-list') {\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('list', {\n      ordered: true\n    }, node.children.map(_toMarkdoc));\n  }\n  if (node.type === 'unordered-list') {\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('list', {\n      ordered: false\n    }, node.children.map(_toMarkdoc));\n  }\n  if (node.type === 'layout') {\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('tag', {\n      layout: node.layout\n    }, node.children.map(_toMarkdoc), 'layout');\n  }\n  if (node.type === 'layout-area') {\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('tag', {}, node.children.flatMap(_toMarkdoc), 'layout-area');\n  }\n  if (node.type === 'component-block') {\n    const isVoid = node.children.length === 1 && node.children[0].type === 'component-inline-prop' && node.children[0].propPath === undefined;\n    const componentBlock = config.componentBlocks[node.component];\n    const childrenAsMarkdoc = [];\n    for (const child of node.children) {\n      if ((child.type === 'component-block-prop' || child.type === 'component-inline-prop') && child.propPath !== undefined) {\n        childrenAsMarkdoc.push({\n          type: child.type,\n          propPath: child.propPath,\n          children: child.type === 'component-block-prop' ? child.children.flatMap(_toMarkdoc) : [toInline(child.children)]\n        });\n      }\n    }\n    let attributes = node.props;\n    if (componentBlock) {\n      const serialized = serializeProps(node.props, {\n        kind: 'object',\n        fields: componentBlock.schema\n      }, undefined, config.slug, false);\n      attributes = serialized.value;\n      config.extraFiles.push(...serialized.extraFiles);\n      const singleChildField = findSingleChildField({\n        kind: 'object',\n        fields: componentBlock.schema\n      });\n      if (singleChildField) {\n        const children = [];\n        toChildrenAndProps(childrenAsMarkdoc, children, attributes, singleChildField);\n        return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('tag', attributes, children, node.component);\n      }\n    }\n    const children = isVoid ? [] : childrenAsMarkdoc.map(x => new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('tag', {\n      propPath: x.propPath\n    }, x.children, x.type));\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('tag', attributes, children, node.component);\n  }\n  if (node.type === 'component-block-prop' || node.type === 'component-inline-prop') {\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('tag', {\n      propPath: node.propPath\n    }, node.type === 'component-inline-prop' ? [toInline(node.children)] : node.children.flatMap(_toMarkdoc), node.type);\n  }\n  if (node.type === 'list-item') {\n    const listItemContent = node.children[0];\n    if (listItemContent.type !== 'list-item-content') {\n      throw new Error('list item content must contain a list-item-content');\n    }\n    const inline = toInline(listItemContent.children);\n    const children = [inline];\n    const nestedList = node.children[1];\n    if (nestedList) {\n      children.push(toMarkdoc(nestedList, config));\n    }\n    return new _markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__.Ast.Node('item', {}, children);\n  }\n  if (node.type === 'list-item-content') {\n    throw new Error('list-item-content in unexpected position');\n  }\n  debugger;\n  throw new Error(`unexpected node type: ${node.type}`);\n}\n\nfunction validateText(val, min, max, fieldLabel, slugInfo) {\n  if (val.length < min) {\n    if (min === 1) {\n      return `${fieldLabel} must not be empty`;\n    } else {\n      return `${fieldLabel} must be at least ${min} characters long`;\n    }\n  }\n  if (val.length > max) {\n    return `${fieldLabel} must be no longer than ${max} characters`;\n  }\n  if (slugInfo) {\n    if (val === '') {\n      return `${fieldLabel} must not be empty`;\n    }\n    if (val === '..') {\n      return `${fieldLabel} must not be ..`;\n    }\n    if (val === '.') {\n      return `${fieldLabel} must not be .`;\n    }\n    if (slugInfo.glob === '**') {\n      const split = val.split('/');\n      if (split.some(s => s === '..')) {\n        return `${fieldLabel} must not contain ..`;\n      }\n      if (split.some(s => s === '.')) {\n        return `${fieldLabel} must not be .`;\n      }\n    }\n    if ((slugInfo.glob === '*' ? /[\\\\/]/ : /[\\\\]/).test(val)) {\n      return `${fieldLabel} must not contain slashes`;\n    }\n    if (/^\\s|\\s$/.test(val)) {\n      return `${fieldLabel} must not start or end with spaces`;\n    }\n    if (slugInfo.slugs.has(val)) {\n      return `${fieldLabel} must be unique`;\n    }\n  }\n}\n\nfunction parseAsNormalField(value) {\n  if (value === undefined) {\n    return '';\n  }\n  if (typeof value !== 'string') {\n    throw new FieldDataError('Must be a string');\n  }\n  return value;\n}\nconst emptySet = new Set();\nfunction text({\n  label,\n  defaultValue = '',\n  validation: {\n    length: {\n      max = Infinity,\n      min = 0\n    } = {}\n  } = {},\n  description,\n  multiline = false\n}) {\n  function validate(value, slugField) {\n    const message = validateText(value, min, max, label, slugField);\n    if (message !== undefined) {\n      throw new FieldDataError(message);\n    }\n    return value;\n  }\n  return {\n    kind: 'form',\n    formKind: 'slug',\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(TextFieldInput, {\n        label: label,\n        description: description,\n        min: min,\n        max: max,\n        multiline: multiline,\n        ...props\n      });\n    },\n    defaultValue() {\n      return typeof defaultValue === 'string' ? defaultValue : defaultValue();\n    },\n    parse(value, args) {\n      if ((args === null || args === void 0 ? void 0 : args.slug) !== undefined) {\n        return args.slug;\n      }\n      return parseAsNormalField(value);\n    },\n    serialize(value) {\n      return {\n        value: value === '' ? undefined : value\n      };\n    },\n    serializeWithSlug(value) {\n      return {\n        slug: value,\n        value: undefined\n      };\n    },\n    reader: {\n      parse(value) {\n        const parsed = parseAsNormalField(value);\n        return validate(parsed, undefined);\n      },\n      parseWithSlug(_value, args) {\n        validate(parseAsNormalField(args.slug), {\n          glob: args.glob,\n          slugs: emptySet\n        });\n        return null;\n      }\n    },\n    validate(value, args) {\n      return validate(value, args === null || args === void 0 ? void 0 : args.slugField);\n    }\n  };\n}\n\n/* eslint-disable */\nglobalThis.Prism = {\n  manual: true\n};\n\n/* **********************************************\n     Begin prism-core.js\n********************************************** */\n\n/// <reference lib=\"WebWorker\"/>\n\nvar _self = globalThis;\n\n/**\n * Prism: Lightweight, robust, elegant syntax highlighting\n *\n * @license MIT <https://opensource.org/licenses/MIT>\n * @author Lea Verou <https://lea.verou.me>\n * @namespace\n * @public\n */\nvar Prism = function (_self) {\n  // Private helper vars\n  var lang = /(?:^|\\s)lang(?:uage)?-([\\w-]+)(?=\\s|$)/i;\n  var uniqueId = 0;\n\n  // The grammar object for plaintext\n  var plainTextGrammar = {};\n  var _ = {\n    /**\n     * By default, Prism will attempt to highlight all code elements (by calling {@link Prism.highlightAll}) on the\n     * current page after the page finished loading. This might be a problem if e.g. you wanted to asynchronously load\n     * additional languages or plugins yourself.\n     *\n     * By setting this value to `true`, Prism will not automatically highlight all code elements on the page.\n     *\n     * You obviously have to change this value before the automatic highlighting started. To do this, you can add an\n     * empty Prism object into the global scope before loading the Prism script like this:\n     *\n     * ```js\n     * window.Prism = window.Prism || {};\n     * Prism.manual = true;\n     * // add a new <script> to load Prism's script\n     * ```\n     *\n     * @default false\n     * @type {boolean}\n     * @memberof Prism\n     * @public\n     */\n    manual: _self.Prism && _self.Prism.manual,\n    /**\n     * By default, if Prism is in a web worker, it assumes that it is in a worker it created itself, so it uses\n     * `addEventListener` to communicate with its parent instance. However, if you're using Prism manually in your\n     * own worker, you don't want it to do this.\n     *\n     * By setting this value to `true`, Prism will not add its own listeners to the worker.\n     *\n     * You obviously have to change this value before Prism executes. To do this, you can add an\n     * empty Prism object into the global scope before loading the Prism script like this:\n     *\n     * ```js\n     * window.Prism = window.Prism || {};\n     * Prism.disableWorkerMessageHandler = true;\n     * // Load Prism's script\n     * ```\n     *\n     * @default false\n     * @type {boolean}\n     * @memberof Prism\n     * @public\n     */\n    disableWorkerMessageHandler: _self.Prism && _self.Prism.disableWorkerMessageHandler,\n    /**\n     * A namespace for utility methods.\n     *\n     * All function in this namespace that are not explicitly marked as _public_ are for __internal use only__ and may\n     * change or disappear at any time.\n     *\n     * @namespace\n     * @memberof Prism\n     */\n    util: {\n      encode: function encode(tokens) {\n        if (tokens instanceof Token) {\n          return new Token(tokens.type, encode(tokens.content), tokens.alias);\n        } else if (Array.isArray(tokens)) {\n          return tokens.map(encode);\n        } else {\n          return tokens.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\\u00a0/g, ' ');\n        }\n      },\n      /**\n       * Returns the name of the type of the given value.\n       *\n       * @param {any} o\n       * @returns {string}\n       * @example\n       * type(null)      === 'Null'\n       * type(undefined) === 'Undefined'\n       * type(123)       === 'Number'\n       * type('foo')     === 'String'\n       * type(true)      === 'Boolean'\n       * type([1, 2])    === 'Array'\n       * type({})        === 'Object'\n       * type(String)    === 'Function'\n       * type(/abc+/)    === 'RegExp'\n       */\n      type: function (o) {\n        return Object.prototype.toString.call(o).slice(8, -1);\n      },\n      /**\n       * Returns a unique number for the given object. Later calls will still return the same number.\n       *\n       * @param {Object} obj\n       * @returns {number}\n       */\n      objId: function (obj) {\n        if (!obj['__id']) {\n          Object.defineProperty(obj, '__id', {\n            value: ++uniqueId\n          });\n        }\n        return obj['__id'];\n      },\n      /**\n       * Creates a deep clone of the given object.\n       *\n       * The main intended use of this function is to clone language definitions.\n       *\n       * @param {T} o\n       * @param {Record<number, any>} [visited]\n       * @returns {T}\n       * @template T\n       */\n      clone: function deepClone(o, visited) {\n        visited = visited || {};\n        var clone;\n        var id;\n        switch (_.util.type(o)) {\n          case 'Object':\n            id = _.util.objId(o);\n            if (visited[id]) {\n              return visited[id];\n            }\n            clone = /** @type {Record<string, any>} */{};\n            visited[id] = clone;\n            for (var key in o) {\n              if (o.hasOwnProperty(key)) {\n                clone[key] = deepClone(o[key], visited);\n              }\n            }\n            return /** @type {any} */clone;\n          case 'Array':\n            id = _.util.objId(o);\n            if (visited[id]) {\n              return visited[id];\n            }\n            clone = [];\n            visited[id] = clone;\n            ( /** @type {Array} */ /** @type {any} */o).forEach(function (v, i) {\n              clone[i] = deepClone(v, visited);\n            });\n            return /** @type {any} */clone;\n          default:\n            return o;\n        }\n      },\n      /**\n       * Returns the Prism language of the given element set by a `language-xxxx` or `lang-xxxx` class.\n       *\n       * If no language is set for the element or the element is `null` or `undefined`, `none` will be returned.\n       *\n       * @param {Element} element\n       * @returns {string}\n       */\n      getLanguage: function (element) {\n        while (element) {\n          var m = lang.exec(element.className);\n          if (m) {\n            return m[1].toLowerCase();\n          }\n          element = element.parentElement;\n        }\n        return 'none';\n      },\n      /**\n       * Sets the Prism `language-xxxx` class of the given element.\n       *\n       * @param {Element} element\n       * @param {string} language\n       * @returns {void}\n       */\n      setLanguage: function (element, language) {\n        // remove all `language-xxxx` classes\n        // (this might leave behind a leading space)\n        element.className = element.className.replace(RegExp(lang, 'gi'), '');\n\n        // add the new `language-xxxx` class\n        // (using `classList` will automatically clean up spaces for us)\n        element.classList.add('language-' + language);\n      },\n      /**\n       * Returns the script element that is currently executing.\n       *\n       * This does __not__ work for line script element.\n       *\n       * @returns {HTMLScriptElement | null}\n       */\n      currentScript: function () {\n        if (typeof document === 'undefined') {\n          return null;\n        }\n        if ('currentScript' in document && 1 < 2 /* hack to trip TS' flow analysis */) {\n          return /** @type {any} */document.currentScript;\n        }\n\n        // IE11 workaround\n        // we'll get the src of the current script by parsing IE11's error stack trace\n        // this will not work for inline scripts\n\n        try {\n          throw new Error();\n        } catch (err) {\n          // Get file src url from stack. Specifically works with the format of stack traces in IE.\n          // A stack will look like this:\n          //\n          // Error\n          //    at _.util.currentScript (http://localhost/components/prism-core.js:119:5)\n          //    at Global code (http://localhost/components/prism-core.js:606:1)\n\n          var src = (/at [^(\\r\\n]*\\((.*):[^:]+:[^:]+\\)$/i.exec(err.stack) || [])[1];\n          if (src) {\n            var scripts = document.getElementsByTagName('script');\n            for (var i in scripts) {\n              if (scripts[i].src == src) {\n                return scripts[i];\n              }\n            }\n          }\n          return null;\n        }\n      },\n      /**\n       * Returns whether a given class is active for `element`.\n       *\n       * The class can be activated if `element` or one of its ancestors has the given class and it can be deactivated\n       * if `element` or one of its ancestors has the negated version of the given class. The _negated version_ of the\n       * given class is just the given class with a `no-` prefix.\n       *\n       * Whether the class is active is determined by the closest ancestor of `element` (where `element` itself is\n       * closest ancestor) that has the given class or the negated version of it. If neither `element` nor any of its\n       * ancestors have the given class or the negated version of it, then the default activation will be returned.\n       *\n       * In the paradoxical situation where the closest ancestor contains __both__ the given class and the negated\n       * version of it, the class is considered active.\n       *\n       * @param {Element} element\n       * @param {string} className\n       * @param {boolean} [defaultActivation=false]\n       * @returns {boolean}\n       */\n      isActive: function (element, className, defaultActivation) {\n        var no = 'no-' + className;\n        while (element) {\n          var classList = element.classList;\n          if (classList.contains(className)) {\n            return true;\n          }\n          if (classList.contains(no)) {\n            return false;\n          }\n          element = element.parentElement;\n        }\n        return !!defaultActivation;\n      }\n    },\n    /**\n     * This namespace contains all currently loaded languages and the some helper functions to create and modify languages.\n     *\n     * @namespace\n     * @memberof Prism\n     * @public\n     */\n    languages: {\n      /**\n       * The grammar for plain, unformatted text.\n       */\n      plain: plainTextGrammar,\n      plaintext: plainTextGrammar,\n      text: plainTextGrammar,\n      txt: plainTextGrammar,\n      /**\n       * Creates a deep copy of the language with the given id and appends the given tokens.\n       *\n       * If a token in `redef` also appears in the copied language, then the existing token in the copied language\n       * will be overwritten at its original position.\n       *\n       * ## Best practices\n       *\n       * Since the position of overwriting tokens (token in `redef` that overwrite tokens in the copied language)\n       * doesn't matter, they can technically be in any order. However, this can be confusing to others that trying to\n       * understand the language definition because, normally, the order of tokens matters in Prism grammars.\n       *\n       * Therefore, it is encouraged to order overwriting tokens according to the positions of the overwritten tokens.\n       * Furthermore, all non-overwriting tokens should be placed after the overwriting ones.\n       *\n       * @param {string} id The id of the language to extend. This has to be a key in `Prism.languages`.\n       * @param {Grammar} redef The new tokens to append.\n       * @returns {Grammar} The new language created.\n       * @public\n       * @example\n       * Prism.languages['css-with-colors'] = Prism.languages.extend('css', {\n       *     // Prism.languages.css already has a 'comment' token, so this token will overwrite CSS' 'comment' token\n       *     // at its original position\n       *     'comment': { ... },\n       *     // CSS doesn't have a 'color' token, so this token will be appended\n       *     'color': /\\b(?:red|green|blue)\\b/\n       * });\n       */\n      extend: function (id, redef) {\n        var lang = _.util.clone(_.languages[id]);\n        for (var key in redef) {\n          lang[key] = redef[key];\n        }\n        return lang;\n      },\n      /**\n       * Inserts tokens _before_ another token in a language definition or any other grammar.\n       *\n       * ## Usage\n       *\n       * This helper method makes it easy to modify existing languages. For example, the CSS language definition\n       * not only defines CSS highlighting for CSS documents, but also needs to define highlighting for CSS embedded\n       * in HTML through `<style>` elements. To do this, it needs to modify `Prism.languages.markup` and add the\n       * appropriate tokens. However, `Prism.languages.markup` is a regular JavaScript object literal, so if you do\n       * this:\n       *\n       * ```js\n       * Prism.languages.markup.style = {\n       *     // token\n       * };\n       * ```\n       *\n       * then the `style` token will be added (and processed) at the end. `insertBefore` allows you to insert tokens\n       * before existing tokens. For the CSS example above, you would use it like this:\n       *\n       * ```js\n       * Prism.languages.insertBefore('markup', 'cdata', {\n       *     'style': {\n       *         // token\n       *     }\n       * });\n       * ```\n       *\n       * ## Special cases\n       *\n       * If the grammars of `inside` and `insert` have tokens with the same name, the tokens in `inside`'s grammar\n       * will be ignored.\n       *\n       * This behavior can be used to insert tokens after `before`:\n       *\n       * ```js\n       * Prism.languages.insertBefore('markup', 'comment', {\n       *     'comment': Prism.languages.markup.comment,\n       *     // tokens after 'comment'\n       * });\n       * ```\n       *\n       * ## Limitations\n       *\n       * The main problem `insertBefore` has to solve is iteration order. Since ES2015, the iteration order for object\n       * properties is guaranteed to be the insertion order (except for integer keys) but some browsers behave\n       * differently when keys are deleted and re-inserted. So `insertBefore` can't be implemented by temporarily\n       * deleting properties which is necessary to insert at arbitrary positions.\n       *\n       * To solve this problem, `insertBefore` doesn't actually insert the given tokens into the target object.\n       * Instead, it will create a new object and replace all references to the target object with the new one. This\n       * can be done without temporarily deleting properties, so the iteration order is well-defined.\n       *\n       * However, only references that can be reached from `Prism.languages` or `insert` will be replaced. I.e. if\n       * you hold the target object in a variable, then the value of the variable will not change.\n       *\n       * ```js\n       * var oldMarkup = Prism.languages.markup;\n       * var newMarkup = Prism.languages.insertBefore('markup', 'comment', { ... });\n       *\n       * assert(oldMarkup !== Prism.languages.markup);\n       * assert(newMarkup === Prism.languages.markup);\n       * ```\n       *\n       * @param {string} inside The property of `root` (e.g. a language id in `Prism.languages`) that contains the\n       * object to be modified.\n       * @param {string} before The key to insert before.\n       * @param {Grammar} insert An object containing the key-value pairs to be inserted.\n       * @param {Object<string, any>} [root] The object containing `inside`, i.e. the object that contains the\n       * object to be modified.\n       *\n       * Defaults to `Prism.languages`.\n       * @returns {Grammar} The new grammar object.\n       * @public\n       */\n      insertBefore: function (inside, before, insert, root) {\n        root = root || ( /** @type {any} */_.languages);\n        var grammar = root[inside];\n        /** @type {Grammar} */\n        var ret = {};\n        for (var token in grammar) {\n          if (grammar.hasOwnProperty(token)) {\n            if (token == before) {\n              for (var newToken in insert) {\n                if (insert.hasOwnProperty(newToken)) {\n                  ret[newToken] = insert[newToken];\n                }\n              }\n            }\n\n            // Do not insert token which also occur in insert. See #1525\n            if (!insert.hasOwnProperty(token)) {\n              ret[token] = grammar[token];\n            }\n          }\n        }\n        var old = root[inside];\n        root[inside] = ret;\n\n        // Update references in other language definitions\n        _.languages.DFS(_.languages, function (key, value) {\n          if (value === old && key != inside) {\n            this[key] = ret;\n          }\n        });\n        return ret;\n      },\n      // Traverse a language definition with Depth First Search\n      DFS: function DFS(o, callback, type, visited) {\n        visited = visited || {};\n        var objId = _.util.objId;\n        for (var i in o) {\n          if (o.hasOwnProperty(i)) {\n            callback.call(o, i, o[i], type || i);\n            var property = o[i];\n            var propertyType = _.util.type(property);\n            if (propertyType === 'Object' && !visited[objId(property)]) {\n              visited[objId(property)] = true;\n              DFS(property, callback, null, visited);\n            } else if (propertyType === 'Array' && !visited[objId(property)]) {\n              visited[objId(property)] = true;\n              DFS(property, callback, i, visited);\n            }\n          }\n        }\n      }\n    },\n    plugins: {},\n    /**\n     * This is the most high-level function in Prism’s API.\n     * It fetches all the elements that have a `.language-xxxx` class and then calls {@link Prism.highlightElement} on\n     * each one of them.\n     *\n     * This is equivalent to `Prism.highlightAllUnder(document, async, callback)`.\n     *\n     * @param {boolean} [async=false] Same as in {@link Prism.highlightAllUnder}.\n     * @param {HighlightCallback} [callback] Same as in {@link Prism.highlightAllUnder}.\n     * @memberof Prism\n     * @public\n     */\n    highlightAll: function (async, callback) {\n      _.highlightAllUnder(document, async, callback);\n    },\n    /**\n     * Fetches all the descendants of `container` that have a `.language-xxxx` class and then calls\n     * {@link Prism.highlightElement} on each one of them.\n     *\n     * The following hooks will be run:\n     * 1. `before-highlightall`\n     * 2. `before-all-elements-highlight`\n     * 3. All hooks of {@link Prism.highlightElement} for each element.\n     *\n     * @param {ParentNode} container The root element, whose descendants that have a `.language-xxxx` class will be highlighted.\n     * @param {boolean} [async=false] Whether each element is to be highlighted asynchronously using Web Workers.\n     * @param {HighlightCallback} [callback] An optional callback to be invoked on each element after its highlighting is done.\n     * @memberof Prism\n     * @public\n     */\n    highlightAllUnder: function (container, async, callback) {\n      var env = {\n        callback: callback,\n        container: container,\n        selector: 'code[class*=\"language-\"], [class*=\"language-\"] code, code[class*=\"lang-\"], [class*=\"lang-\"] code'\n      };\n      _.hooks.run('before-highlightall', env);\n      env.elements = Array.prototype.slice.apply(env.container.querySelectorAll(env.selector));\n      _.hooks.run('before-all-elements-highlight', env);\n      for (var i = 0, element; element = env.elements[i++];) {\n        _.highlightElement(element, async === true, env.callback);\n      }\n    },\n    /**\n     * Highlights the code inside a single element.\n     *\n     * The following hooks will be run:\n     * 1. `before-sanity-check`\n     * 2. `before-highlight`\n     * 3. All hooks of {@link Prism.highlight}. These hooks will be run by an asynchronous worker if `async` is `true`.\n     * 4. `before-insert`\n     * 5. `after-highlight`\n     * 6. `complete`\n     *\n     * Some the above hooks will be skipped if the element doesn't contain any text or there is no grammar loaded for\n     * the element's language.\n     *\n     * @param {Element} element The element containing the code.\n     * It must have a class of `language-xxxx` to be processed, where `xxxx` is a valid language identifier.\n     * @param {boolean} [async=false] Whether the element is to be highlighted asynchronously using Web Workers\n     * to improve performance and avoid blocking the UI when highlighting very large chunks of code. This option is\n     * [disabled by default](https://prismjs.com/faq.html#why-is-asynchronous-highlighting-disabled-by-default).\n     *\n     * Note: All language definitions required to highlight the code must be included in the main `prism.js` file for\n     * asynchronous highlighting to work. You can build your own bundle on the\n     * [Download page](https://prismjs.com/download.html).\n     * @param {HighlightCallback} [callback] An optional callback to be invoked after the highlighting is done.\n     * Mostly useful when `async` is `true`, since in that case, the highlighting is done asynchronously.\n     * @memberof Prism\n     * @public\n     */\n    highlightElement: function (element, async, callback) {\n      // Find language\n      var language = _.util.getLanguage(element);\n      var grammar = _.languages[language];\n\n      // Set language on the element, if not present\n      _.util.setLanguage(element, language);\n\n      // Set language on the parent, for styling\n      var parent = element.parentElement;\n      if (parent && parent.nodeName.toLowerCase() === 'pre') {\n        _.util.setLanguage(parent, language);\n      }\n      var code = element.textContent;\n      var env = {\n        element: element,\n        language: language,\n        grammar: grammar,\n        code: code\n      };\n      function insertHighlightedCode(highlightedCode) {\n        env.highlightedCode = highlightedCode;\n        _.hooks.run('before-insert', env);\n        env.element.innerHTML = env.highlightedCode;\n        _.hooks.run('after-highlight', env);\n        _.hooks.run('complete', env);\n        callback && callback.call(env.element);\n      }\n      _.hooks.run('before-sanity-check', env);\n\n      // plugins may change/add the parent/element\n      parent = env.element.parentElement;\n      if (parent && parent.nodeName.toLowerCase() === 'pre' && !parent.hasAttribute('tabindex')) {\n        parent.setAttribute('tabindex', '0');\n      }\n      if (!env.code) {\n        _.hooks.run('complete', env);\n        callback && callback.call(env.element);\n        return;\n      }\n      _.hooks.run('before-highlight', env);\n      if (!env.grammar) {\n        insertHighlightedCode(_.util.encode(env.code));\n        return;\n      }\n      if (async && _self.Worker) {\n        var worker = new Worker(_.filename);\n        worker.onmessage = function (evt) {\n          insertHighlightedCode(evt.data);\n        };\n        worker.postMessage(JSON.stringify({\n          language: env.language,\n          code: env.code,\n          immediateClose: true\n        }));\n      } else {\n        insertHighlightedCode(_.highlight(env.code, env.grammar, env.language));\n      }\n    },\n    /**\n     * Low-level function, only use if you know what you’re doing. It accepts a string of text as input\n     * and the language definitions to use, and returns a string with the HTML produced.\n     *\n     * The following hooks will be run:\n     * 1. `before-tokenize`\n     * 2. `after-tokenize`\n     * 3. `wrap`: On each {@link Token}.\n     *\n     * @param {string} text A string with the code to be highlighted.\n     * @param {Grammar} grammar An object containing the tokens to use.\n     *\n     * Usually a language definition like `Prism.languages.markup`.\n     * @param {string} language The name of the language definition passed to `grammar`.\n     * @returns {string} The highlighted HTML.\n     * @memberof Prism\n     * @public\n     * @example\n     * Prism.highlight('var foo = true;', Prism.languages.javascript, 'javascript');\n     */\n    highlight: function (text, grammar, language) {\n      var env = {\n        code: text,\n        grammar: grammar,\n        language: language\n      };\n      _.hooks.run('before-tokenize', env);\n      if (!env.grammar) {\n        throw new Error('The language \"' + env.language + '\" has no grammar.');\n      }\n      env.tokens = _.tokenize(env.code, env.grammar);\n      _.hooks.run('after-tokenize', env);\n      return Token.stringify(_.util.encode(env.tokens), env.language);\n    },\n    /**\n     * This is the heart of Prism, and the most low-level function you can use. It accepts a string of text as input\n     * and the language definitions to use, and returns an array with the tokenized code.\n     *\n     * When the language definition includes nested tokens, the function is called recursively on each of these tokens.\n     *\n     * This method could be useful in other contexts as well, as a very crude parser.\n     *\n     * @param {string} text A string with the code to be highlighted.\n     * @param {Grammar} grammar An object containing the tokens to use.\n     *\n     * Usually a language definition like `Prism.languages.markup`.\n     * @returns {TokenStream} An array of strings and tokens, a token stream.\n     * @memberof Prism\n     * @public\n     * @example\n     * let code = `var foo = 0;`;\n     * let tokens = Prism.tokenize(code, Prism.languages.javascript);\n     * tokens.forEach(token => {\n     *     if (token instanceof Prism.Token && token.type === 'number') {\n     *         console.log(`Found numeric literal: ${token.content}`);\n     *     }\n     * });\n     */\n    tokenize: function (text, grammar) {\n      var rest = grammar.rest;\n      if (rest) {\n        for (var token in rest) {\n          grammar[token] = rest[token];\n        }\n        delete grammar.rest;\n      }\n      var tokenList = new LinkedList();\n      addAfter(tokenList, tokenList.head, text);\n      matchGrammar(text, tokenList, grammar, tokenList.head, 0);\n      return toArray(tokenList);\n    },\n    /**\n     * @namespace\n     * @memberof Prism\n     * @public\n     */\n    hooks: {\n      all: {},\n      /**\n       * Adds the given callback to the list of callbacks for the given hook.\n       *\n       * The callback will be invoked when the hook it is registered for is run.\n       * Hooks are usually directly run by a highlight function but you can also run hooks yourself.\n       *\n       * One callback function can be registered to multiple hooks and the same hook multiple times.\n       *\n       * @param {string} name The name of the hook.\n       * @param {HookCallback} callback The callback function which is given environment variables.\n       * @public\n       */\n      add: function (name, callback) {\n        var hooks = _.hooks.all;\n        hooks[name] = hooks[name] || [];\n        hooks[name].push(callback);\n      },\n      /**\n       * Runs a hook invoking all registered callbacks with the given environment variables.\n       *\n       * Callbacks will be invoked synchronously and in the order in which they were registered.\n       *\n       * @param {string} name The name of the hook.\n       * @param {Object<string, any>} env The environment variables of the hook passed to all callbacks registered.\n       * @public\n       */\n      run: function (name, env) {\n        var callbacks = _.hooks.all[name];\n        if (!callbacks || !callbacks.length) {\n          return;\n        }\n        for (var i = 0, callback; callback = callbacks[i++];) {\n          callback(env);\n        }\n      }\n    },\n    Token: Token\n  };\n  _self.Prism = _;\n\n  // Typescript note:\n  // The following can be used to import the Token type in JSDoc:\n  //\n  //   @typedef {InstanceType<import(\"./prism-core\")[\"Token\"]>} Token\n\n  /**\n   * Creates a new token.\n   *\n   * @param {string} type See {@link Token#type type}\n   * @param {string | TokenStream} content See {@link Token#content content}\n   * @param {string|string[]} [alias] The alias(es) of the token.\n   * @param {string} [matchedStr=\"\"] A copy of the full string this token was created from.\n   * @class\n   * @global\n   * @public\n   */\n  function Token(type, content, alias, matchedStr) {\n    /**\n     * The type of the token.\n     *\n     * This is usually the key of a pattern in a {@link Grammar}.\n     *\n     * @type {string}\n     * @see GrammarToken\n     * @public\n     */\n    this.type = type;\n    /**\n     * The strings or tokens contained by this token.\n     *\n     * This will be a token stream if the pattern matched also defined an `inside` grammar.\n     *\n     * @type {string | TokenStream}\n     * @public\n     */\n    this.content = content;\n    /**\n     * The alias(es) of the token.\n     *\n     * @type {string|string[]}\n     * @see GrammarToken\n     * @public\n     */\n    this.alias = alias;\n    // Copy of the full string this token was created from\n    this.length = (matchedStr || '').length | 0;\n  }\n\n  /**\n   * A token stream is an array of strings and {@link Token Token} objects.\n   *\n   * Token streams have to fulfill a few properties that are assumed by most functions (mostly internal ones) that process\n   * them.\n   *\n   * 1. No adjacent strings.\n   * 2. No empty strings.\n   *\n   *    The only exception here is the token stream that only contains the empty string and nothing else.\n   *\n   * @typedef {Array<string | Token>} TokenStream\n   * @global\n   * @public\n   */\n\n  /**\n   * Converts the given token or token stream to an HTML representation.\n   *\n   * The following hooks will be run:\n   * 1. `wrap`: On each {@link Token}.\n   *\n   * @param {string | Token | TokenStream} o The token or token stream to be converted.\n   * @param {string} language The name of current language.\n   * @returns {string} The HTML representation of the token or token stream.\n   * @memberof Token\n   * @static\n   */\n  Token.stringify = function stringify(o, language) {\n    if (typeof o == 'string') {\n      return o;\n    }\n    if (Array.isArray(o)) {\n      var s = '';\n      o.forEach(function (e) {\n        s += stringify(e, language);\n      });\n      return s;\n    }\n    var env = {\n      type: o.type,\n      content: stringify(o.content, language),\n      tag: 'span',\n      classes: ['token', o.type],\n      attributes: {},\n      language: language\n    };\n    var aliases = o.alias;\n    if (aliases) {\n      if (Array.isArray(aliases)) {\n        Array.prototype.push.apply(env.classes, aliases);\n      } else {\n        env.classes.push(aliases);\n      }\n    }\n    _.hooks.run('wrap', env);\n    var attributes = '';\n    for (var name in env.attributes) {\n      attributes += ' ' + name + '=\"' + (env.attributes[name] || '').replace(/\"/g, '&quot;') + '\"';\n    }\n    return '<' + env.tag + ' class=\"' + env.classes.join(' ') + '\"' + attributes + '>' + env.content + '</' + env.tag + '>';\n  };\n\n  /**\n   * @param {RegExp} pattern\n   * @param {number} pos\n   * @param {string} text\n   * @param {boolean} lookbehind\n   * @returns {RegExpExecArray | null}\n   */\n  function matchPattern(pattern, pos, text, lookbehind) {\n    pattern.lastIndex = pos;\n    var match = pattern.exec(text);\n    if (match && lookbehind && match[1]) {\n      // change the match to remove the text matched by the Prism lookbehind group\n      var lookbehindLength = match[1].length;\n      match.index += lookbehindLength;\n      match[0] = match[0].slice(lookbehindLength);\n    }\n    return match;\n  }\n\n  /**\n   * @param {string} text\n   * @param {LinkedList<string | Token>} tokenList\n   * @param {any} grammar\n   * @param {LinkedListNode<string | Token>} startNode\n   * @param {number} startPos\n   * @param {RematchOptions} [rematch]\n   * @returns {void}\n   * @private\n   *\n   * @typedef RematchOptions\n   * @property {string} cause\n   * @property {number} reach\n   */\n  function matchGrammar(text, tokenList, grammar, startNode, startPos, rematch) {\n    for (var token in grammar) {\n      if (!grammar.hasOwnProperty(token) || !grammar[token]) {\n        continue;\n      }\n      var patterns = grammar[token];\n      patterns = Array.isArray(patterns) ? patterns : [patterns];\n      for (var j = 0; j < patterns.length; ++j) {\n        if (rematch && rematch.cause == token + ',' + j) {\n          return;\n        }\n        var patternObj = patterns[j];\n        var inside = patternObj.inside;\n        var lookbehind = !!patternObj.lookbehind;\n        var greedy = !!patternObj.greedy;\n        var alias = patternObj.alias;\n        if (greedy && !patternObj.pattern.global) {\n          // Without the global flag, lastIndex won't work\n          var flags = patternObj.pattern.toString().match(/[imsuy]*$/)[0];\n          patternObj.pattern = RegExp(patternObj.pattern.source, flags + 'g');\n        }\n\n        /** @type {RegExp} */\n        var pattern = patternObj.pattern || patternObj;\n        for (\n        // iterate the token list and keep track of the current token/string position\n        var currentNode = startNode.next, pos = startPos; currentNode !== tokenList.tail; pos += currentNode.value.length, currentNode = currentNode.next) {\n          if (rematch && pos >= rematch.reach) {\n            break;\n          }\n          var str = currentNode.value;\n          if (tokenList.length > text.length) {\n            // Something went terribly wrong, ABORT, ABORT!\n            return;\n          }\n          if (str instanceof Token) {\n            continue;\n          }\n          var removeCount = 1; // this is the to parameter of removeBetween\n          var match;\n          if (greedy) {\n            match = matchPattern(pattern, pos, text, lookbehind);\n            if (!match || match.index >= text.length) {\n              break;\n            }\n            var from = match.index;\n            var to = match.index + match[0].length;\n            var p = pos;\n\n            // find the node that contains the match\n            p += currentNode.value.length;\n            while (from >= p) {\n              currentNode = currentNode.next;\n              p += currentNode.value.length;\n            }\n            // adjust pos (and p)\n            p -= currentNode.value.length;\n            pos = p;\n\n            // the current node is a Token, then the match starts inside another Token, which is invalid\n            if (currentNode.value instanceof Token) {\n              continue;\n            }\n\n            // find the last node which is affected by this match\n            for (var k = currentNode; k !== tokenList.tail && (p < to || typeof k.value === 'string'); k = k.next) {\n              removeCount++;\n              p += k.value.length;\n            }\n            removeCount--;\n\n            // replace with the new match\n            str = text.slice(pos, p);\n            match.index -= pos;\n          } else {\n            match = matchPattern(pattern, 0, str, lookbehind);\n            if (!match) {\n              continue;\n            }\n          }\n\n          // eslint-disable-next-line no-redeclare\n          var from = match.index;\n          var matchStr = match[0];\n          var before = str.slice(0, from);\n          var after = str.slice(from + matchStr.length);\n          var reach = pos + str.length;\n          if (rematch && reach > rematch.reach) {\n            rematch.reach = reach;\n          }\n          var removeFrom = currentNode.prev;\n          if (before) {\n            removeFrom = addAfter(tokenList, removeFrom, before);\n            pos += before.length;\n          }\n          removeRange(tokenList, removeFrom, removeCount);\n          var wrapped = new Token(token, inside ? _.tokenize(matchStr, inside) : matchStr, alias, matchStr);\n          currentNode = addAfter(tokenList, removeFrom, wrapped);\n          if (after) {\n            addAfter(tokenList, currentNode, after);\n          }\n          if (removeCount > 1) {\n            // at least one Token object was removed, so we have to do some rematching\n            // this can only happen if the current pattern is greedy\n\n            /** @type {RematchOptions} */\n            var nestedRematch = {\n              cause: token + ',' + j,\n              reach: reach\n            };\n            matchGrammar(text, tokenList, grammar, currentNode.prev, pos, nestedRematch);\n\n            // the reach might have been extended because of the rematching\n            if (rematch && nestedRematch.reach > rematch.reach) {\n              rematch.reach = nestedRematch.reach;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * @typedef LinkedListNode\n   * @property {T} value\n   * @property {LinkedListNode<T> | null} prev The previous node.\n   * @property {LinkedListNode<T> | null} next The next node.\n   * @template T\n   * @private\n   */\n\n  /**\n   * @template T\n   * @private\n   */\n  function LinkedList() {\n    /** @type {LinkedListNode<T>} */\n    var head = {\n      value: null,\n      prev: null,\n      next: null\n    };\n    /** @type {LinkedListNode<T>} */\n    var tail = {\n      value: null,\n      prev: head,\n      next: null\n    };\n    head.next = tail;\n\n    /** @type {LinkedListNode<T>} */\n    this.head = head;\n    /** @type {LinkedListNode<T>} */\n    this.tail = tail;\n    this.length = 0;\n  }\n\n  /**\n   * Adds a new node with the given value to the list.\n   *\n   * @param {LinkedList<T>} list\n   * @param {LinkedListNode<T>} node\n   * @param {T} value\n   * @returns {LinkedListNode<T>} The added node.\n   * @template T\n   */\n  function addAfter(list, node, value) {\n    // assumes that node != list.tail && values.length >= 0\n    var next = node.next;\n    var newNode = {\n      value: value,\n      prev: node,\n      next: next\n    };\n    node.next = newNode;\n    next.prev = newNode;\n    list.length++;\n    return newNode;\n  }\n  /**\n   * Removes `count` nodes after the given node. The given node will not be removed.\n   *\n   * @param {LinkedList<T>} list\n   * @param {LinkedListNode<T>} node\n   * @param {number} count\n   * @template T\n   */\n  function removeRange(list, node, count) {\n    var next = node.next;\n    for (var i = 0; i < count && next !== list.tail; i++) {\n      next = next.next;\n    }\n    node.next = next;\n    next.prev = node;\n    list.length -= i;\n  }\n  /**\n   * @param {LinkedList<T>} list\n   * @returns {T[]}\n   * @template T\n   */\n  function toArray(list) {\n    var array = [];\n    var node = list.head.next;\n    while (node !== list.tail) {\n      array.push(node.value);\n      node = node.next;\n    }\n    return array;\n  }\n  if (!_self.document) {\n    if (!_self.addEventListener) {\n      // in Node.js\n      return _;\n    }\n    if (!_.disableWorkerMessageHandler) {\n      // In worker\n      _self.addEventListener('message', function (evt) {\n        var message = JSON.parse(evt.data);\n        var lang = message.language;\n        var code = message.code;\n        var immediateClose = message.immediateClose;\n        _self.postMessage(_.highlight(code, _.languages[lang], lang));\n        if (immediateClose) {\n          _self.close();\n        }\n      }, false);\n    }\n    return _;\n  }\n\n  // Get current script and highlight\n  var script = _.util.currentScript();\n  if (script) {\n    _.filename = script.src;\n    if (script.hasAttribute('data-manual')) {\n      _.manual = true;\n    }\n  }\n  function highlightAutomaticallyCallback() {\n    if (!_.manual) {\n      _.highlightAll();\n    }\n  }\n  if (!_.manual) {\n    // If the document state is \"loading\", then we'll use DOMContentLoaded.\n    // If the document state is \"interactive\" and the prism.js script is deferred, then we'll also use the\n    // DOMContentLoaded event because there might be some plugins or languages which have also been deferred and they\n    // might take longer one animation frame to execute which can create a race condition where only some plugins have\n    // been loaded when Prism.highlightAll() is executed, depending on how fast resources are loaded.\n    // See https://github.com/PrismJS/prism/issues/2102\n    var readyState = document.readyState;\n    if (readyState === 'loading' || readyState === 'interactive' && script && script.defer) {\n      document.addEventListener('DOMContentLoaded', highlightAutomaticallyCallback);\n    } else {\n      if (window.requestAnimationFrame) {\n        window.requestAnimationFrame(highlightAutomaticallyCallback);\n      } else {\n        window.setTimeout(highlightAutomaticallyCallback, 16);\n      }\n    }\n  }\n  return _;\n}(_self);\n\n// some additional documentation/types\n\n/**\n * The expansion of a simple `RegExp` literal to support additional properties.\n *\n * @typedef GrammarToken\n * @property {RegExp} pattern The regular expression of the token.\n * @property {boolean} [lookbehind=false] If `true`, then the first capturing group of `pattern` will (effectively)\n * behave as a lookbehind group meaning that the captured text will not be part of the matched text of the new token.\n * @property {boolean} [greedy=false] Whether the token is greedy.\n * @property {string|string[]} [alias] An optional alias or list of aliases.\n * @property {Grammar} [inside] The nested grammar of this token.\n *\n * The `inside` grammar will be used to tokenize the text value of each token of this kind.\n *\n * This can be used to make nested and even recursive language definitions.\n *\n * Note: This can cause infinite recursion. Be careful when you embed different languages or even the same language into\n * each another.\n * @global\n * @public\n */\n\n/**\n * @typedef Grammar\n * @type {Object<string, RegExp | GrammarToken | Array<RegExp | GrammarToken>>}\n * @property {Grammar} [rest] An optional grammar object that will be appended to this grammar.\n * @global\n * @public\n */\n\n/**\n * A function which will invoked after an element was successfully highlighted.\n *\n * @callback HighlightCallback\n * @param {Element} element The element successfully highlighted.\n * @returns {void}\n * @global\n * @public\n */\n\n/**\n * @callback HookCallback\n * @param {Object<string, any>} env The environment variables of the hook.\n * @returns {void}\n * @global\n * @public\n */\n\n/* **********************************************\n     Begin prism-markup.js\n********************************************** */\n\nPrism.languages.markup = {\n  'comment': {\n    pattern: /<!--(?:(?!<!--)[\\s\\S])*?-->/,\n    greedy: true\n  },\n  'prolog': {\n    pattern: /<\\?[\\s\\S]+?\\?>/,\n    greedy: true\n  },\n  'doctype': {\n    // https://www.w3.org/TR/xml/#NT-doctypedecl\n    pattern: /<!DOCTYPE(?:[^>\"'[\\]]|\"[^\"]*\"|'[^']*')+(?:\\[(?:[^<\"'\\]]|\"[^\"]*\"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\\]\\s*)?>/i,\n    greedy: true,\n    inside: {\n      'internal-subset': {\n        pattern: /(^[^\\[]*\\[)[\\s\\S]+(?=\\]>$)/,\n        lookbehind: true,\n        greedy: true,\n        inside: null // see below\n      },\n      'string': {\n        pattern: /\"[^\"]*\"|'[^']*'/,\n        greedy: true\n      },\n      'punctuation': /^<!|>$|[[\\]]/,\n      'doctype-tag': /^DOCTYPE/i,\n      'name': /[^\\s<>'\"]+/\n    }\n  },\n  'cdata': {\n    pattern: /<!\\[CDATA\\[[\\s\\S]*?\\]\\]>/i,\n    greedy: true\n  },\n  'tag': {\n    pattern: /<\\/?(?!\\d)[^\\s>\\/=$<%]+(?:\\s(?:\\s*[^\\s>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+(?=[\\s>]))|(?=[\\s/>])))+)?\\s*\\/?>/,\n    greedy: true,\n    inside: {\n      'tag': {\n        pattern: /^<\\/?[^\\s>\\/]+/,\n        inside: {\n          'punctuation': /^<\\/?/,\n          'namespace': /^[^\\s>\\/:]+:/\n        }\n      },\n      'special-attr': [],\n      'attr-value': {\n        pattern: /=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+)/,\n        inside: {\n          'punctuation': [{\n            pattern: /^=/,\n            alias: 'attr-equals'\n          }, {\n            pattern: /^(\\s*)[\"']|[\"']$/,\n            lookbehind: true\n          }]\n        }\n      },\n      'punctuation': /\\/?>/,\n      'attr-name': {\n        pattern: /[^\\s>\\/]+/,\n        inside: {\n          'namespace': /^[^\\s>\\/:]+:/\n        }\n      }\n    }\n  },\n  'entity': [{\n    pattern: /&[\\da-z]{1,8};/i,\n    alias: 'named-entity'\n  }, /&#x?[\\da-f]{1,8};/i]\n};\nPrism.languages.markup['tag'].inside['attr-value'].inside['entity'] = Prism.languages.markup['entity'];\nPrism.languages.markup['doctype'].inside['internal-subset'].inside = Prism.languages.markup;\n\n// Plugin to make entity title show the real entity, idea by Roman Komarov\nPrism.hooks.add('wrap', function (env) {\n  if (env.type === 'entity') {\n    env.attributes['title'] = env.content.replace(/&amp;/, '&');\n  }\n});\nObject.defineProperty(Prism.languages.markup.tag, 'addInlined', {\n  /**\n   * Adds an inlined language to markup.\n   *\n   * An example of an inlined language is CSS with `<style>` tags.\n   *\n   * @param {string} tagName The name of the tag that contains the inlined language. This name will be treated as\n   * case insensitive.\n   * @param {string} lang The language key.\n   * @example\n   * addInlined('style', 'css');\n   */\n  value: function addInlined(tagName, lang) {\n    var includedCdataInside = {};\n    includedCdataInside['language-' + lang] = {\n      pattern: /(^<!\\[CDATA\\[)[\\s\\S]+?(?=\\]\\]>$)/i,\n      lookbehind: true,\n      inside: Prism.languages[lang]\n    };\n    includedCdataInside['cdata'] = /^<!\\[CDATA\\[|\\]\\]>$/i;\n    var inside = {\n      'included-cdata': {\n        pattern: /<!\\[CDATA\\[[\\s\\S]*?\\]\\]>/i,\n        inside: includedCdataInside\n      }\n    };\n    inside['language-' + lang] = {\n      pattern: /[\\s\\S]+/,\n      inside: Prism.languages[lang]\n    };\n    var def = {};\n    def[tagName] = {\n      pattern: RegExp(/(<__[^>]*>)(?:<!\\[CDATA\\[(?:[^\\]]|\\](?!\\]>))*\\]\\]>|(?!<!\\[CDATA\\[)[\\s\\S])*?(?=<\\/__>)/.source.replace(/__/g, function () {\n        return tagName;\n      }), 'i'),\n      lookbehind: true,\n      greedy: true,\n      inside: inside\n    };\n    Prism.languages.insertBefore('markup', 'cdata', def);\n  }\n});\nObject.defineProperty(Prism.languages.markup.tag, 'addAttribute', {\n  /**\n   * Adds an pattern to highlight languages embedded in HTML attributes.\n   *\n   * An example of an inlined language is CSS with `style` attributes.\n   *\n   * @param {string} attrName The name of the tag that contains the inlined language. This name will be treated as\n   * case insensitive.\n   * @param {string} lang The language key.\n   * @example\n   * addAttribute('style', 'css');\n   */\n  value: function (attrName, lang) {\n    Prism.languages.markup.tag.inside['special-attr'].push({\n      pattern: RegExp(/(^|[\"'\\s])/.source + '(?:' + attrName + ')' + /\\s*=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+(?=[\\s>]))/.source, 'i'),\n      lookbehind: true,\n      inside: {\n        'attr-name': /^[^\\s=]+/,\n        'attr-value': {\n          pattern: /=[\\s\\S]+/,\n          inside: {\n            'value': {\n              pattern: /(^=\\s*([\"']|(?![\"'])))\\S[\\s\\S]*(?=\\2$)/,\n              lookbehind: true,\n              alias: [lang, 'language-' + lang],\n              inside: Prism.languages[lang]\n            },\n            'punctuation': [{\n              pattern: /^=/,\n              alias: 'attr-equals'\n            }, /\"|'/]\n          }\n        }\n      }\n    });\n  }\n});\nPrism.languages.html = Prism.languages.markup;\nPrism.languages.mathml = Prism.languages.markup;\nPrism.languages.svg = Prism.languages.markup;\nPrism.languages.xml = Prism.languages.extend('markup', {});\nPrism.languages.ssml = Prism.languages.xml;\nPrism.languages.atom = Prism.languages.xml;\nPrism.languages.rss = Prism.languages.xml;\n\n/* **********************************************\n     Begin prism-css.js\n********************************************** */\n\n(function (Prism) {\n  var string = /(?:\"(?:\\\\(?:\\r\\n|[\\s\\S])|[^\"\\\\\\r\\n])*\"|'(?:\\\\(?:\\r\\n|[\\s\\S])|[^'\\\\\\r\\n])*')/;\n  Prism.languages.css = {\n    'comment': /\\/\\*[\\s\\S]*?\\*\\//,\n    'atrule': {\n      pattern: RegExp('@[\\\\w-](?:' + /[^;{\\s\"']|\\s+(?!\\s)/.source + '|' + string.source + ')*?' + /(?:;|(?=\\s*\\{))/.source),\n      inside: {\n        'rule': /^@[\\w-]+/,\n        'selector-function-argument': {\n          pattern: /(\\bselector\\s*\\(\\s*(?![\\s)]))(?:[^()\\s]|\\s+(?![\\s)])|\\((?:[^()]|\\([^()]*\\))*\\))+(?=\\s*\\))/,\n          lookbehind: true,\n          alias: 'selector'\n        },\n        'keyword': {\n          pattern: /(^|[^\\w-])(?:and|not|only|or)(?![\\w-])/,\n          lookbehind: true\n        }\n        // See rest below\n      }\n    },\n    'url': {\n      // https://drafts.csswg.org/css-values-3/#urls\n      pattern: RegExp('\\\\burl\\\\((?:' + string.source + '|' + /(?:[^\\\\\\r\\n()\"']|\\\\[\\s\\S])*/.source + ')\\\\)', 'i'),\n      greedy: true,\n      inside: {\n        'function': /^url/i,\n        'punctuation': /^\\(|\\)$/,\n        'string': {\n          pattern: RegExp('^' + string.source + '$'),\n          alias: 'url'\n        }\n      }\n    },\n    'selector': {\n      pattern: RegExp('(^|[{}\\\\s])[^{}\\\\s](?:[^{};\"\\'\\\\s]|\\\\s+(?![\\\\s{])|' + string.source + ')*(?=\\\\s*\\\\{)'),\n      lookbehind: true\n    },\n    'string': {\n      pattern: string,\n      greedy: true\n    },\n    'property': {\n      pattern: /(^|[^-\\w\\xA0-\\uFFFF])(?!\\s)[-_a-z\\xA0-\\uFFFF](?:(?!\\s)[-\\w\\xA0-\\uFFFF])*(?=\\s*:)/i,\n      lookbehind: true\n    },\n    'important': /!important\\b/i,\n    'function': {\n      pattern: /(^|[^-a-z0-9])[-a-z0-9]+(?=\\()/i,\n      lookbehind: true\n    },\n    'punctuation': /[(){};:,]/\n  };\n  Prism.languages.css['atrule'].inside.rest = Prism.languages.css;\n  var markup = Prism.languages.markup;\n  if (markup) {\n    markup.tag.addInlined('style', 'css');\n    markup.tag.addAttribute('style', 'css');\n  }\n})(Prism);\n\n/* **********************************************\n     Begin prism-clike.js\n********************************************** */\n\nPrism.languages.clike = {\n  'comment': [{\n    pattern: /(^|[^\\\\])\\/\\*[\\s\\S]*?(?:\\*\\/|$)/,\n    lookbehind: true,\n    greedy: true\n  }, {\n    pattern: /(^|[^\\\\:])\\/\\/.*/,\n    lookbehind: true,\n    greedy: true\n  }],\n  'string': {\n    pattern: /([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\1)[^\\\\\\r\\n])*\\1/,\n    greedy: true\n  },\n  'class-name': {\n    pattern: /(\\b(?:class|extends|implements|instanceof|interface|new|trait)\\s+|\\bcatch\\s+\\()[\\w.\\\\]+/i,\n    lookbehind: true,\n    inside: {\n      'punctuation': /[.\\\\]/\n    }\n  },\n  'keyword': /\\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\\b/,\n  'boolean': /\\b(?:false|true)\\b/,\n  'function': /\\b\\w+(?=\\()/,\n  'number': /\\b0x[\\da-f]+\\b|(?:\\b\\d+(?:\\.\\d*)?|\\B\\.\\d+)(?:e[+-]?\\d+)?/i,\n  'operator': /[<>]=?|[!=]=?=?|--?|\\+\\+?|&&?|\\|\\|?|[?*/~^%]/,\n  'punctuation': /[{}[\\];(),.:]/\n};\n\n/* **********************************************\n     Begin prism-javascript.js\n********************************************** */\n\nPrism.languages.javascript = Prism.languages.extend('clike', {\n  'class-name': [Prism.languages.clike['class-name'], {\n    pattern: /(^|[^$\\w\\xA0-\\uFFFF])(?!\\s)[_$A-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\.(?:constructor|prototype))/,\n    lookbehind: true\n  }],\n  'keyword': [{\n    pattern: /((?:^|\\})\\s*)catch\\b/,\n    lookbehind: true\n  }, {\n    pattern: /(^|[^.]|\\.\\.\\.\\s*)\\b(?:as|assert(?=\\s*\\{)|async(?=\\s*(?:function\\b|\\(|[$\\w\\xA0-\\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\\s*(?:\\{|$))|for|from(?=\\s*(?:['\"]|$))|function|(?:get|set)(?=\\s*(?:[#\\[$\\w\\xA0-\\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\\b/,\n    lookbehind: true\n  }],\n  // Allow for all non-ASCII characters (See http://stackoverflow.com/a/2008444)\n  'function': /#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*(?:\\.\\s*(?:apply|bind|call)\\s*)?\\()/,\n  'number': {\n    pattern: RegExp(/(^|[^\\w$])/.source + '(?:' + (\n    // constant\n    /NaN|Infinity/.source + '|' +\n    // binary integer\n    /0[bB][01]+(?:_[01]+)*n?/.source + '|' +\n    // octal integer\n    /0[oO][0-7]+(?:_[0-7]+)*n?/.source + '|' +\n    // hexadecimal integer\n    /0[xX][\\dA-Fa-f]+(?:_[\\dA-Fa-f]+)*n?/.source + '|' +\n    // decimal bigint\n    /\\d+(?:_\\d+)*n/.source + '|' +\n    // decimal number (integer or float) but no bigint\n    /(?:\\d+(?:_\\d+)*(?:\\.(?:\\d+(?:_\\d+)*)?)?|\\.\\d+(?:_\\d+)*)(?:[Ee][+-]?\\d+(?:_\\d+)*)?/.source) + ')' + /(?![\\w$])/.source),\n    lookbehind: true\n  },\n  'operator': /--|\\+\\+|\\*\\*=?|=>|&&=?|\\|\\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\\.{3}|\\?\\?=?|\\?\\.?|[~:]/\n});\nPrism.languages.javascript['class-name'][0].pattern = /(\\b(?:class|extends|implements|instanceof|interface|new)\\s+)[\\w.\\\\]+/;\nPrism.languages.insertBefore('javascript', 'keyword', {\n  'regex': {\n    pattern: RegExp(\n    // lookbehind\n    // eslint-disable-next-line regexp/no-dupe-characters-character-class\n    /((?:^|[^$\\w\\xA0-\\uFFFF.\"'\\])\\s]|\\b(?:return|yield))\\s*)/.source +\n    // Regex pattern:\n    // There are 2 regex patterns here. The RegExp set notation proposal added support for nested character\n    // classes if the `v` flag is present. Unfortunately, nested CCs are both context-free and incompatible\n    // with the only syntax, so we have to define 2 different regex patterns.\n    /\\//.source + '(?:' + /(?:\\[(?:[^\\]\\\\\\r\\n]|\\\\.)*\\]|\\\\.|[^/\\\\\\[\\r\\n])+\\/[dgimyus]{0,7}/.source + '|' +\n    // `v` flag syntax. This supports 3 levels of nested character classes.\n    /(?:\\[(?:[^[\\]\\\\\\r\\n]|\\\\.|\\[(?:[^[\\]\\\\\\r\\n]|\\\\.|\\[(?:[^[\\]\\\\\\r\\n]|\\\\.)*\\])*\\])*\\]|\\\\.|[^/\\\\\\[\\r\\n])+\\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source + ')' +\n    // lookahead\n    /(?=(?:\\s|\\/\\*(?:[^*]|\\*(?!\\/))*\\*\\/)*(?:$|[\\r\\n,.;:})\\]]|\\/\\/))/.source),\n    lookbehind: true,\n    greedy: true,\n    inside: {\n      'regex-source': {\n        pattern: /^(\\/)[\\s\\S]+(?=\\/[a-z]*$)/,\n        lookbehind: true,\n        alias: 'language-regex',\n        inside: Prism.languages.regex\n      },\n      'regex-delimiter': /^\\/|\\/$/,\n      'regex-flags': /^[a-z]+$/\n    }\n  },\n  // This must be declared before keyword because we use \"function\" inside the look-forward\n  'function-variable': {\n    pattern: /#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*[=:]\\s*(?:async\\s*)?(?:\\bfunction\\b|(?:\\((?:[^()]|\\([^()]*\\))*\\)|(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*)\\s*=>))/,\n    alias: 'function'\n  },\n  'parameter': [{\n    pattern: /(function(?:\\s+(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*)?\\s*\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\))/,\n    lookbehind: true,\n    inside: Prism.languages.javascript\n  }, {\n    pattern: /(^|[^$\\w\\xA0-\\uFFFF])(?!\\s)[_$a-z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*=>)/i,\n    lookbehind: true,\n    inside: Prism.languages.javascript\n  }, {\n    pattern: /(\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\)\\s*=>)/,\n    lookbehind: true,\n    inside: Prism.languages.javascript\n  }, {\n    pattern: /((?:\\b|\\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\\w\\xA0-\\uFFFF]))(?:(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*\\s*)\\(\\s*|\\]\\s*\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\)\\s*\\{)/,\n    lookbehind: true,\n    inside: Prism.languages.javascript\n  }],\n  'constant': /\\b[A-Z](?:[A-Z_]|\\dx?)*\\b/\n});\nPrism.languages.insertBefore('javascript', 'string', {\n  'hashbang': {\n    pattern: /^#!.*/,\n    greedy: true,\n    alias: 'comment'\n  },\n  'template-string': {\n    pattern: /`(?:\\\\[\\s\\S]|\\$\\{(?:[^{}]|\\{(?:[^{}]|\\{[^}]*\\})*\\})+\\}|(?!\\$\\{)[^\\\\`])*`/,\n    greedy: true,\n    inside: {\n      'template-punctuation': {\n        pattern: /^`|`$/,\n        alias: 'string'\n      },\n      'interpolation': {\n        pattern: /((?:^|[^\\\\])(?:\\\\{2})*)\\$\\{(?:[^{}]|\\{(?:[^{}]|\\{[^}]*\\})*\\})+\\}/,\n        lookbehind: true,\n        inside: {\n          'interpolation-punctuation': {\n            pattern: /^\\$\\{|\\}$/,\n            alias: 'punctuation'\n          },\n          rest: Prism.languages.javascript\n        }\n      },\n      'string': /[\\s\\S]+/\n    }\n  },\n  'string-property': {\n    pattern: /((?:^|[,{])[ \\t]*)([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\2)[^\\\\\\r\\n])*\\2(?=\\s*:)/m,\n    lookbehind: true,\n    greedy: true,\n    alias: 'property'\n  }\n});\nPrism.languages.insertBefore('javascript', 'operator', {\n  'literal-property': {\n    pattern: /((?:^|[,{])[ \\t]*)(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*:)/m,\n    lookbehind: true,\n    alias: 'property'\n  }\n});\nif (Prism.languages.markup) {\n  Prism.languages.markup.tag.addInlined('script', 'javascript');\n\n  // add attribute support for all DOM events.\n  // https://developer.mozilla.org/en-US/docs/Web/Events#Standard_events\n  Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source, 'javascript');\n}\nPrism.languages.js = Prism.languages.javascript;\n\n/* **********************************************\n     Begin prism-file-highlight.js\n********************************************** */\n\n(function () {\n  if (typeof Prism === 'undefined' || typeof document === 'undefined') {\n    return;\n  }\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/Element/matches#Polyfill\n  if (!Element.prototype.matches) {\n    Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n  }\n  var LOADING_MESSAGE = 'Loading…';\n  var FAILURE_MESSAGE = function (status, message) {\n    return '✖ Error ' + status + ' while fetching file: ' + message;\n  };\n  var FAILURE_EMPTY_MESSAGE = '✖ Error: File does not exist or is empty';\n  var EXTENSIONS = {\n    'js': 'javascript',\n    'py': 'python',\n    'rb': 'ruby',\n    'ps1': 'powershell',\n    'psm1': 'powershell',\n    'sh': 'bash',\n    'bat': 'batch',\n    'h': 'c',\n    'tex': 'latex'\n  };\n  var STATUS_ATTR = 'data-src-status';\n  var STATUS_LOADING = 'loading';\n  var STATUS_LOADED = 'loaded';\n  var STATUS_FAILED = 'failed';\n  var SELECTOR = 'pre[data-src]:not([' + STATUS_ATTR + '=\"' + STATUS_LOADED + '\"])' + ':not([' + STATUS_ATTR + '=\"' + STATUS_LOADING + '\"])';\n\n  /**\n   * Loads the given file.\n   *\n   * @param {string} src The URL or path of the source file to load.\n   * @param {(result: string) => void} success\n   * @param {(reason: string) => void} error\n   */\n  function loadFile(src, success, error) {\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', src, true);\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState == 4) {\n        if (xhr.status < 400 && xhr.responseText) {\n          success(xhr.responseText);\n        } else {\n          if (xhr.status >= 400) {\n            error(FAILURE_MESSAGE(xhr.status, xhr.statusText));\n          } else {\n            error(FAILURE_EMPTY_MESSAGE);\n          }\n        }\n      }\n    };\n    xhr.send(null);\n  }\n\n  /**\n   * Parses the given range.\n   *\n   * This returns a range with inclusive ends.\n   *\n   * @param {string | null | undefined} range\n   * @returns {[number, number | undefined] | undefined}\n   */\n  function parseRange(range) {\n    var m = /^\\s*(\\d+)\\s*(?:(,)\\s*(?:(\\d+)\\s*)?)?$/.exec(range || '');\n    if (m) {\n      var start = Number(m[1]);\n      var comma = m[2];\n      var end = m[3];\n      if (!comma) {\n        return [start, start];\n      }\n      if (!end) {\n        return [start, undefined];\n      }\n      return [start, Number(end)];\n    }\n    return undefined;\n  }\n  Prism.hooks.add('before-highlightall', function (env) {\n    env.selector += ', ' + SELECTOR;\n  });\n  Prism.hooks.add('before-sanity-check', function (env) {\n    var pre = /** @type {HTMLPreElement} */env.element;\n    if (pre.matches(SELECTOR)) {\n      env.code = ''; // fast-path the whole thing and go to complete\n\n      pre.setAttribute(STATUS_ATTR, STATUS_LOADING); // mark as loading\n\n      // add code element with loading message\n      var code = pre.appendChild(document.createElement('CODE'));\n      code.textContent = LOADING_MESSAGE;\n      var src = pre.getAttribute('data-src');\n      var language = env.language;\n      if (language === 'none') {\n        // the language might be 'none' because there is no language set;\n        // in this case, we want to use the extension as the language\n        var extension = (/\\.(\\w+)$/.exec(src) || [, 'none'])[1];\n        language = EXTENSIONS[extension] || extension;\n      }\n\n      // set language classes\n      Prism.util.setLanguage(code, language);\n      Prism.util.setLanguage(pre, language);\n\n      // preload the language\n      var autoloader = Prism.plugins.autoloader;\n      if (autoloader) {\n        autoloader.loadLanguages(language);\n      }\n\n      // load file\n      loadFile(src, function (text) {\n        // mark as loaded\n        pre.setAttribute(STATUS_ATTR, STATUS_LOADED);\n\n        // handle data-range\n        var range = parseRange(pre.getAttribute('data-range'));\n        if (range) {\n          var lines = text.split(/\\r\\n?|\\n/g);\n\n          // the range is one-based and inclusive on both ends\n          var start = range[0];\n          var end = range[1] == null ? lines.length : range[1];\n          if (start < 0) {\n            start += lines.length;\n          }\n          start = Math.max(0, Math.min(start - 1, lines.length));\n          if (end < 0) {\n            end += lines.length;\n          }\n          end = Math.max(0, Math.min(end, lines.length));\n          text = lines.slice(start, end).join('\\n');\n\n          // add data-start for line numbers\n          if (!pre.hasAttribute('data-start')) {\n            pre.setAttribute('data-start', String(start + 1));\n          }\n        }\n\n        // highlight code\n        code.textContent = text;\n        Prism.highlightElement(code);\n      }, function (error) {\n        // mark as failed\n        pre.setAttribute(STATUS_ATTR, STATUS_FAILED);\n        code.textContent = error;\n      });\n    }\n  });\n  Prism.plugins.fileHighlight = {\n    /**\n     * Executes the File Highlight plugin for all matching `pre` elements under the given container.\n     *\n     * Note: Elements which are already loaded or currently loading will not be touched by this method.\n     *\n     * @param {ParentNode} [container=document]\n     */\n    highlight: function highlight(container) {\n      var elements = (container || document).querySelectorAll(SELECTOR);\n      for (var i = 0, element; element = elements[i++];) {\n        Prism.highlightElement(element);\n      }\n    }\n  };\n  var logged = false;\n  /** @deprecated Use `Prism.plugins.fileHighlight.highlight` instead. */\n  Prism.fileHighlight = function () {\n    if (!logged) {\n      console.warn('Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead.');\n      logged = true;\n    }\n    Prism.plugins.fileHighlight.highlight.apply(this, arguments);\n  };\n})();\nPrism.languages.clike = {\n  'comment': [{\n    pattern: /(^|[^\\\\])\\/\\*[\\s\\S]*?(?:\\*\\/|$)/,\n    lookbehind: true,\n    greedy: true\n  }, {\n    pattern: /(^|[^\\\\:])\\/\\/.*/,\n    lookbehind: true,\n    greedy: true\n  }],\n  'string': {\n    pattern: /([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\1)[^\\\\\\r\\n])*\\1/,\n    greedy: true\n  },\n  'class-name': {\n    pattern: /(\\b(?:class|extends|implements|instanceof|interface|new|trait)\\s+|\\bcatch\\s+\\()[\\w.\\\\]+/i,\n    lookbehind: true,\n    inside: {\n      'punctuation': /[.\\\\]/\n    }\n  },\n  'keyword': /\\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\\b/,\n  'boolean': /\\b(?:false|true)\\b/,\n  'function': /\\b\\w+(?=\\()/,\n  'number': /\\b0x[\\da-f]+\\b|(?:\\b\\d+(?:\\.\\d*)?|\\B\\.\\d+)(?:e[+-]?\\d+)?/i,\n  'operator': /[<>]=?|[!=]=?=?|--?|\\+\\+?|&&?|\\|\\|?|[?*/~^%]/,\n  'punctuation': /[{}[\\];(),.:]/\n};\nPrism.languages.c = Prism.languages.extend('clike', {\n  'comment': {\n    pattern: /\\/\\/(?:[^\\r\\n\\\\]|\\\\(?:\\r\\n?|\\n|(?![\\r\\n])))*|\\/\\*[\\s\\S]*?(?:\\*\\/|$)/,\n    greedy: true\n  },\n  'string': {\n    // https://en.cppreference.com/w/c/language/string_literal\n    pattern: /\"(?:\\\\(?:\\r\\n|[\\s\\S])|[^\"\\\\\\r\\n])*\"/,\n    greedy: true\n  },\n  'class-name': {\n    pattern: /(\\b(?:enum|struct)\\s+(?:__attribute__\\s*\\(\\([\\s\\S]*?\\)\\)\\s*)?)\\w+|\\b[a-z]\\w*_t\\b/,\n    lookbehind: true\n  },\n  'keyword': /\\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\\b/,\n  'function': /\\b[a-z_]\\w*(?=\\s*\\()/i,\n  'number': /(?:\\b0x(?:[\\da-f]+(?:\\.[\\da-f]*)?|\\.[\\da-f]+)(?:p[+-]?\\d+)?|(?:\\b\\d+(?:\\.\\d*)?|\\B\\.\\d+)(?:e[+-]?\\d+)?)[ful]{0,4}/i,\n  'operator': />>=?|<<=?|->|([-+&|:])\\1|[?:~]|[-+*/%&|^!=<>]=?/\n});\nPrism.languages.insertBefore('c', 'string', {\n  'char': {\n    // https://en.cppreference.com/w/c/language/character_constant\n    pattern: /'(?:\\\\(?:\\r\\n|[\\s\\S])|[^'\\\\\\r\\n]){0,32}'/,\n    greedy: true\n  }\n});\nPrism.languages.insertBefore('c', 'string', {\n  'macro': {\n    // allow for multiline macro definitions\n    // spaces after the # character compile fine with gcc\n    pattern: /(^[\\t ]*)#\\s*[a-z](?:[^\\r\\n\\\\/]|\\/(?!\\*)|\\/\\*(?:[^*]|\\*(?!\\/))*\\*\\/|\\\\(?:\\r\\n|[\\s\\S]))*/im,\n    lookbehind: true,\n    greedy: true,\n    alias: 'property',\n    inside: {\n      'string': [{\n        // highlight the path of the include statement as a string\n        pattern: /^(#\\s*include\\s*)<[^>]+>/,\n        lookbehind: true\n      }, Prism.languages.c['string']],\n      'char': Prism.languages.c['char'],\n      'comment': Prism.languages.c['comment'],\n      'macro-name': [{\n        pattern: /(^#\\s*define\\s+)\\w+\\b(?!\\()/i,\n        lookbehind: true\n      }, {\n        pattern: /(^#\\s*define\\s+)\\w+\\b(?=\\()/i,\n        lookbehind: true,\n        alias: 'function'\n      }],\n      // highlight macro directives as keywords\n      'directive': {\n        pattern: /^(#\\s*)[a-z]+/,\n        lookbehind: true,\n        alias: 'keyword'\n      },\n      'directive-hash': /^#/,\n      'punctuation': /##|\\\\(?=[\\r\\n])/,\n      'expression': {\n        pattern: /\\S[\\s\\S]*/,\n        inside: Prism.languages.c\n      }\n    }\n  }\n});\nPrism.languages.insertBefore('c', 'function', {\n  // highlight predefined macros as constants\n  'constant': /\\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\\b/\n});\ndelete Prism.languages.c['boolean'];\n(function (Prism) {\n  var keyword = /\\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\\b/;\n  var modName = /\\b(?!<keyword>)\\w+(?:\\s*\\.\\s*\\w+)*\\b/.source.replace(/<keyword>/g, function () {\n    return keyword.source;\n  });\n  Prism.languages.cpp = Prism.languages.extend('c', {\n    'class-name': [{\n      pattern: RegExp(/(\\b(?:class|concept|enum|struct|typename)\\s+)(?!<keyword>)\\w+/.source.replace(/<keyword>/g, function () {\n        return keyword.source;\n      })),\n      lookbehind: true\n    },\n    // This is intended to capture the class name of method implementations like:\n    //   void foo::bar() const {}\n    // However! The `foo` in the above example could also be a namespace, so we only capture the class name if\n    // it starts with an uppercase letter. This approximation should give decent results.\n    /\\b[A-Z]\\w*(?=\\s*::\\s*\\w+\\s*\\()/,\n    // This will capture the class name before destructors like:\n    //   Foo::~Foo() {}\n    /\\b[A-Z_]\\w*(?=\\s*::\\s*~\\w+\\s*\\()/i,\n    // This also intends to capture the class name of method implementations but here the class has template\n    // parameters, so it can't be a namespace (until C++ adds generic namespaces).\n    /\\b\\w+(?=\\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\\s*::\\s*\\w+\\s*\\()/],\n    'keyword': keyword,\n    'number': {\n      pattern: /(?:\\b0b[01']+|\\b0x(?:[\\da-f']+(?:\\.[\\da-f']*)?|\\.[\\da-f']+)(?:p[+-]?[\\d']+)?|(?:\\b[\\d']+(?:\\.[\\d']*)?|\\B\\.[\\d']+)(?:e[+-]?[\\d']+)?)[ful]{0,4}/i,\n      greedy: true\n    },\n    'operator': />>=?|<<=?|->|--|\\+\\+|&&|\\|\\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\\b/,\n    'boolean': /\\b(?:false|true)\\b/\n  });\n  Prism.languages.insertBefore('cpp', 'string', {\n    'module': {\n      // https://en.cppreference.com/w/cpp/language/modules\n      pattern: RegExp(/(\\b(?:import|module)\\s+)/.source + '(?:' +\n      // header-name\n      /\"(?:\\\\(?:\\r\\n|[\\s\\S])|[^\"\\\\\\r\\n])*\"|<[^<>\\r\\n]*>/.source + '|' +\n      // module name or partition or both\n      /<mod-name>(?:\\s*:\\s*<mod-name>)?|:\\s*<mod-name>/.source.replace(/<mod-name>/g, function () {\n        return modName;\n      }) + ')'),\n      lookbehind: true,\n      greedy: true,\n      inside: {\n        'string': /^[<\"][\\s\\S]+/,\n        'operator': /:/,\n        'punctuation': /\\./\n      }\n    },\n    'raw-string': {\n      pattern: /R\"([^()\\\\ ]{0,16})\\([\\s\\S]*?\\)\\1\"/,\n      alias: 'string',\n      greedy: true\n    }\n  });\n  Prism.languages.insertBefore('cpp', 'keyword', {\n    'generic-function': {\n      pattern: /\\b(?!operator\\b)[a-z_]\\w*\\s*<(?:[^<>]|<[^<>]*>)*>(?=\\s*\\()/i,\n      inside: {\n        'function': /^\\w+/,\n        'generic': {\n          pattern: /<[\\s\\S]+/,\n          alias: 'class-name',\n          inside: Prism.languages.cpp\n        }\n      }\n    }\n  });\n  Prism.languages.insertBefore('cpp', 'operator', {\n    'double-colon': {\n      pattern: /::/,\n      alias: 'punctuation'\n    }\n  });\n  Prism.languages.insertBefore('cpp', 'class-name', {\n    // the base clause is an optional list of parent classes\n    // https://en.cppreference.com/w/cpp/language/class\n    'base-clause': {\n      pattern: /(\\b(?:class|struct)\\s+\\w+\\s*:\\s*)[^;{}\"'\\s]+(?:\\s+[^;{}\"'\\s]+)*(?=\\s*[;{])/,\n      lookbehind: true,\n      greedy: true,\n      inside: Prism.languages.extend('cpp', {})\n    }\n  });\n  Prism.languages.insertBefore('inside', 'double-colon', {\n    // All untokenized words that are not namespaces should be class names\n    'class-name': /\\b[a-z_]\\w*\\b(?!\\s*::)/i\n  }, Prism.languages.cpp['base-clause']);\n})(Prism);\nPrism.languages.arduino = Prism.languages.extend('cpp', {\n  'keyword': /\\b(?:String|array|bool|boolean|break|byte|case|catch|continue|default|do|double|else|finally|for|function|goto|if|in|instanceof|int|integer|long|loop|new|null|return|setup|string|switch|throw|try|void|while|word)\\b/,\n  'constant': /\\b(?:ANALOG_MESSAGE|DEFAULT|DIGITAL_MESSAGE|EXTERNAL|FIRMATA_STRING|HIGH|INPUT|INPUT_PULLUP|INTERNAL|INTERNAL1V1|INTERNAL2V56|LED_BUILTIN|LOW|OUTPUT|REPORT_ANALOG|REPORT_DIGITAL|SET_PIN_MODE|SYSEX_START|SYSTEM_RESET)\\b/,\n  'builtin': /\\b(?:Audio|BSSID|Bridge|Client|Console|EEPROM|Esplora|EsploraTFT|Ethernet|EthernetClient|EthernetServer|EthernetUDP|File|FileIO|FileSystem|Firmata|GPRS|GSM|GSMBand|GSMClient|GSMModem|GSMPIN|GSMScanner|GSMServer|GSMVoiceCall|GSM_SMS|HttpClient|IPAddress|IRread|Keyboard|KeyboardController|LiquidCrystal|LiquidCrystal_I2C|Mailbox|Mouse|MouseController|PImage|Process|RSSI|RobotControl|RobotMotor|SD|SPI|SSID|Scheduler|Serial|Server|Servo|SoftwareSerial|Stepper|Stream|TFT|Task|USBHost|WiFi|WiFiClient|WiFiServer|WiFiUDP|Wire|YunClient|YunServer|abs|addParameter|analogRead|analogReadResolution|analogReference|analogWrite|analogWriteResolution|answerCall|attach|attachGPRS|attachInterrupt|attached|autoscroll|available|background|beep|begin|beginPacket|beginSD|beginSMS|beginSpeaker|beginTFT|beginTransmission|beginWrite|bit|bitClear|bitRead|bitSet|bitWrite|blink|blinkVersion|buffer|changePIN|checkPIN|checkPUK|checkReg|circle|cityNameRead|cityNameWrite|clear|clearScreen|click|close|compassRead|config|connect|connected|constrain|cos|countryNameRead|countryNameWrite|createChar|cursor|debugPrint|delay|delayMicroseconds|detach|detachInterrupt|digitalRead|digitalWrite|disconnect|display|displayLogos|drawBMP|drawCompass|encryptionType|end|endPacket|endSMS|endTransmission|endWrite|exists|exitValue|fill|find|findUntil|flush|gatewayIP|get|getAsynchronously|getBand|getButton|getCurrentCarrier|getIMEI|getKey|getModifiers|getOemKey|getPINUsed|getResult|getSignalStrength|getSocket|getVoiceCallStatus|getXChange|getYChange|hangCall|height|highByte|home|image|interrupts|isActionDone|isDirectory|isListening|isPIN|isPressed|isValid|keyPressed|keyReleased|keyboardRead|knobRead|leftToRight|line|lineFollowConfig|listen|listenOnLocalhost|loadImage|localIP|lowByte|macAddress|maintain|map|max|messageAvailable|micros|millis|min|mkdir|motorsStop|motorsWrite|mouseDragged|mouseMoved|mousePressed|mouseReleased|move|noAutoscroll|noBlink|noBuffer|noCursor|noDisplay|noFill|noInterrupts|noListenOnLocalhost|noStroke|noTone|onReceive|onRequest|open|openNextFile|overflow|parseCommand|parseFloat|parseInt|parsePacket|pauseMode|peek|pinMode|playFile|playMelody|point|pointTo|position|pow|prepare|press|print|printFirmwareVersion|printVersion|println|process|processInput|pulseIn|put|random|randomSeed|read|readAccelerometer|readBlue|readButton|readBytes|readBytesUntil|readGreen|readJoystickButton|readJoystickSwitch|readJoystickX|readJoystickY|readLightSensor|readMessage|readMicrophone|readNetworks|readRed|readSlider|readString|readStringUntil|readTemperature|ready|rect|release|releaseAll|remoteIP|remoteNumber|remotePort|remove|requestFrom|retrieveCallingNumber|rewindDirectory|rightToLeft|rmdir|robotNameRead|robotNameWrite|run|runAsynchronously|runShellCommand|runShellCommandAsynchronously|running|scanNetworks|scrollDisplayLeft|scrollDisplayRight|seek|sendAnalog|sendDigitalPortPair|sendDigitalPorts|sendString|sendSysex|serialEvent|setBand|setBitOrder|setClockDivider|setCursor|setDNS|setDataMode|setFirmwareVersion|setMode|setPINUsed|setSpeed|setTextSize|setTimeout|shiftIn|shiftOut|shutdown|sin|size|sqrt|startLoop|step|stop|stroke|subnetMask|switchPIN|tan|tempoWrite|text|tone|transfer|tuneWrite|turn|updateIR|userNameRead|userNameWrite|voiceCall|waitContinue|width|write|writeBlue|writeGreen|writeJSON|writeMessage|writeMicroseconds|writeRGB|writeRed|yield)\\b/\n});\nPrism.languages.ino = Prism.languages.arduino;\n(function (Prism) {\n  // $ set | grep '^[A-Z][^[:space:]]*=' | cut -d= -f1 | tr '\\n' '|'\n  // + LC_ALL, RANDOM, REPLY, SECONDS.\n  // + make sure PS1..4 are here as they are not always set,\n  // - some useless things.\n  var envVars = '\\\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\\\b';\n  var commandAfterHeredoc = {\n    pattern: /(^([\"']?)\\w+\\2)[ \\t]+\\S.*/,\n    lookbehind: true,\n    alias: 'punctuation',\n    // this looks reasonably well in all themes\n    inside: null // see below\n  };\n  var insideString = {\n    'bash': commandAfterHeredoc,\n    'environment': {\n      pattern: RegExp('\\\\$' + envVars),\n      alias: 'constant'\n    },\n    'variable': [\n    // [0]: Arithmetic Environment\n    {\n      pattern: /\\$?\\(\\([\\s\\S]+?\\)\\)/,\n      greedy: true,\n      inside: {\n        // If there is a $ sign at the beginning highlight $(( and )) as variable\n        'variable': [{\n          pattern: /(^\\$\\(\\([\\s\\S]+)\\)\\)/,\n          lookbehind: true\n        }, /^\\$\\(\\(/],\n        'number': /\\b0x[\\dA-Fa-f]+\\b|(?:\\b\\d+(?:\\.\\d*)?|\\B\\.\\d+)(?:[Ee]-?\\d+)?/,\n        // Operators according to https://www.gnu.org/software/bash/manual/bashref.html#Shell-Arithmetic\n        'operator': /--|\\+\\+|\\*\\*=?|<<=?|>>=?|&&|\\|\\||[=!+\\-*/%<>^&|]=?|[?~:]/,\n        // If there is no $ sign at the beginning highlight (( and )) as punctuation\n        'punctuation': /\\(\\(?|\\)\\)?|,|;/\n      }\n    },\n    // [1]: Command Substitution\n    {\n      pattern: /\\$\\((?:\\([^)]+\\)|[^()])+\\)|`[^`]+`/,\n      greedy: true,\n      inside: {\n        'variable': /^\\$\\(|^`|\\)$|`$/\n      }\n    },\n    // [2]: Brace expansion\n    {\n      pattern: /\\$\\{[^}]+\\}/,\n      greedy: true,\n      inside: {\n        'operator': /:[-=?+]?|[!\\/]|##?|%%?|\\^\\^?|,,?/,\n        'punctuation': /[\\[\\]]/,\n        'environment': {\n          pattern: RegExp('(\\\\{)' + envVars),\n          lookbehind: true,\n          alias: 'constant'\n        }\n      }\n    }, /\\$(?:\\w+|[#?*!@$])/],\n    // Escape sequences from echo and printf's manuals, and escaped quotes.\n    'entity': /\\\\(?:[abceEfnrtv\\\\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/\n  };\n  Prism.languages.bash = {\n    'shebang': {\n      pattern: /^#!\\s*\\/.*/,\n      alias: 'important'\n    },\n    'comment': {\n      pattern: /(^|[^\"{\\\\$])#.*/,\n      lookbehind: true\n    },\n    'function-name': [\n    // a) function foo {\n    // b) foo() {\n    // c) function foo() {\n    // but not “foo {”\n    {\n      // a) and c)\n      pattern: /(\\bfunction\\s+)[\\w-]+(?=(?:\\s*\\(?:\\s*\\))?\\s*\\{)/,\n      lookbehind: true,\n      alias: 'function'\n    }, {\n      // b)\n      pattern: /\\b[\\w-]+(?=\\s*\\(\\s*\\)\\s*\\{)/,\n      alias: 'function'\n    }],\n    // Highlight variable names as variables in for and select beginnings.\n    'for-or-select': {\n      pattern: /(\\b(?:for|select)\\s+)\\w+(?=\\s+in\\s)/,\n      alias: 'variable',\n      lookbehind: true\n    },\n    // Highlight variable names as variables in the left-hand part\n    // of assignments (“=” and “+=”).\n    'assign-left': {\n      pattern: /(^|[\\s;|&]|[<>]\\()\\w+(?:\\.\\w+)*(?=\\+?=)/,\n      inside: {\n        'environment': {\n          pattern: RegExp('(^|[\\\\s;|&]|[<>]\\\\()' + envVars),\n          lookbehind: true,\n          alias: 'constant'\n        }\n      },\n      alias: 'variable',\n      lookbehind: true\n    },\n    // Highlight parameter names as variables\n    'parameter': {\n      pattern: /(^|\\s)-{1,2}(?:\\w+:[+-]?)?\\w+(?:\\.\\w+)*(?=[=\\s]|$)/,\n      alias: 'variable',\n      lookbehind: true\n    },\n    'string': [\n    // Support for Here-documents https://en.wikipedia.org/wiki/Here_document\n    {\n      pattern: /((?:^|[^<])<<-?\\s*)(\\w+)\\s[\\s\\S]*?(?:\\r?\\n|\\r)\\2/,\n      lookbehind: true,\n      greedy: true,\n      inside: insideString\n    },\n    // Here-document with quotes around the tag\n    // → No expansion (so no “inside”).\n    {\n      pattern: /((?:^|[^<])<<-?\\s*)([\"'])(\\w+)\\2\\s[\\s\\S]*?(?:\\r?\\n|\\r)\\3/,\n      lookbehind: true,\n      greedy: true,\n      inside: {\n        'bash': commandAfterHeredoc\n      }\n    },\n    // “Normal” string\n    {\n      // https://www.gnu.org/software/bash/manual/html_node/Double-Quotes.html\n      pattern: /(^|[^\\\\](?:\\\\\\\\)*)\"(?:\\\\[\\s\\S]|\\$\\([^)]+\\)|\\$(?!\\()|`[^`]+`|[^\"\\\\`$])*\"/,\n      lookbehind: true,\n      greedy: true,\n      inside: insideString\n    }, {\n      // https://www.gnu.org/software/bash/manual/html_node/Single-Quotes.html\n      pattern: /(^|[^$\\\\])'[^']*'/,\n      lookbehind: true,\n      greedy: true\n    }, {\n      // https://www.gnu.org/software/bash/manual/html_node/ANSI_002dC-Quoting.html\n      pattern: /\\$'(?:[^'\\\\]|\\\\[\\s\\S])*'/,\n      greedy: true,\n      inside: {\n        'entity': insideString.entity\n      }\n    }],\n    'environment': {\n      pattern: RegExp('\\\\$?' + envVars),\n      alias: 'constant'\n    },\n    'variable': insideString.variable,\n    'function': {\n      pattern: /(^|[\\s;|&]|[<>]\\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\\s;|&])/,\n      lookbehind: true\n    },\n    'keyword': {\n      pattern: /(^|[\\s;|&]|[<>]\\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\\s;|&])/,\n      lookbehind: true\n    },\n    // https://www.gnu.org/software/bash/manual/html_node/Shell-Builtin-Commands.html\n    'builtin': {\n      pattern: /(^|[\\s;|&]|[<>]\\()(?:\\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\\s;|&])/,\n      lookbehind: true,\n      // Alias added to make those easier to distinguish from strings.\n      alias: 'class-name'\n    },\n    'boolean': {\n      pattern: /(^|[\\s;|&]|[<>]\\()(?:false|true)(?=$|[)\\s;|&])/,\n      lookbehind: true\n    },\n    'file-descriptor': {\n      pattern: /\\B&\\d\\b/,\n      alias: 'important'\n    },\n    'operator': {\n      // Lots of redirections here, but not just that.\n      pattern: /\\d?<>|>\\||\\+=|=[=~]?|!=?|<<[<-]?|[&\\d]?>>|\\d[<>]&?|[<>][&=]?|&[>&]?|\\|[&|]?/,\n      inside: {\n        'file-descriptor': {\n          pattern: /^\\d/,\n          alias: 'important'\n        }\n      }\n    },\n    'punctuation': /\\$?\\(\\(?|\\)\\)?|\\.\\.|[{}[\\];\\\\]/,\n    'number': {\n      pattern: /(^|\\s)(?:[1-9]\\d*|0)(?:[.,]\\d+)?\\b/,\n      lookbehind: true\n    }\n  };\n  commandAfterHeredoc.inside = Prism.languages.bash;\n\n  /* Patterns in command substitution. */\n  var toBeCopied = ['comment', 'function-name', 'for-or-select', 'assign-left', 'parameter', 'string', 'environment', 'function', 'keyword', 'builtin', 'boolean', 'file-descriptor', 'operator', 'punctuation', 'number'];\n  var inside = insideString.variable[1].inside;\n  for (var i = 0; i < toBeCopied.length; i++) {\n    inside[toBeCopied[i]] = Prism.languages.bash[toBeCopied[i]];\n  }\n  Prism.languages.sh = Prism.languages.bash;\n  Prism.languages.shell = Prism.languages.bash;\n})(Prism);\n(function (Prism) {\n  /**\n   * Replaces all placeholders \"<<n>>\" of given pattern with the n-th replacement (zero based).\n   *\n   * Note: This is a simple text based replacement. Be careful when using backreferences!\n   *\n   * @param {string} pattern the given pattern.\n   * @param {string[]} replacements a list of replacement which can be inserted into the given pattern.\n   * @returns {string} the pattern with all placeholders replaced with their corresponding replacements.\n   * @example replace(/a<<0>>a/.source, [/b+/.source]) === /a(?:b+)a/.source\n   */\n  function replace(pattern, replacements) {\n    return pattern.replace(/<<(\\d+)>>/g, function (m, index) {\n      return '(?:' + replacements[+index] + ')';\n    });\n  }\n  /**\n   * @param {string} pattern\n   * @param {string[]} replacements\n   * @param {string} [flags]\n   * @returns {RegExp}\n   */\n  function re(pattern, replacements, flags) {\n    return RegExp(replace(pattern, replacements), flags || '');\n  }\n\n  /**\n   * Creates a nested pattern where all occurrences of the string `<<self>>` are replaced with the pattern itself.\n   *\n   * @param {string} pattern\n   * @param {number} depthLog2\n   * @returns {string}\n   */\n  function nested(pattern, depthLog2) {\n    for (var i = 0; i < depthLog2; i++) {\n      pattern = pattern.replace(/<<self>>/g, function () {\n        return '(?:' + pattern + ')';\n      });\n    }\n    return pattern.replace(/<<self>>/g, '[^\\\\s\\\\S]');\n  }\n\n  // https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/\n  var keywordKinds = {\n    // keywords which represent a return or variable type\n    type: 'bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void',\n    // keywords which are used to declare a type\n    typeDeclaration: 'class enum interface record struct',\n    // contextual keywords\n    // (\"var\" and \"dynamic\" are missing because they are used like types)\n    contextual: 'add alias and ascending async await by descending from(?=\\\\s*(?:\\\\w|$)) get global group into init(?=\\\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\\\s*{)',\n    // all other keywords\n    other: 'abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield'\n  };\n\n  // keywords\n  function keywordsToPattern(words) {\n    return '\\\\b(?:' + words.trim().replace(/ /g, '|') + ')\\\\b';\n  }\n  var typeDeclarationKeywords = keywordsToPattern(keywordKinds.typeDeclaration);\n  var keywords = RegExp(keywordsToPattern(keywordKinds.type + ' ' + keywordKinds.typeDeclaration + ' ' + keywordKinds.contextual + ' ' + keywordKinds.other));\n  var nonTypeKeywords = keywordsToPattern(keywordKinds.typeDeclaration + ' ' + keywordKinds.contextual + ' ' + keywordKinds.other);\n  var nonContextualKeywords = keywordsToPattern(keywordKinds.type + ' ' + keywordKinds.typeDeclaration + ' ' + keywordKinds.other);\n\n  // types\n  var generic = nested(/<(?:[^<>;=+\\-*/%&|^]|<<self>>)*>/.source, 2); // the idea behind the other forbidden characters is to prevent false positives. Same for tupleElement.\n  var nestedRound = nested(/\\((?:[^()]|<<self>>)*\\)/.source, 2);\n  var name = /@?\\b[A-Za-z_]\\w*\\b/.source;\n  var genericName = replace(/<<0>>(?:\\s*<<1>>)?/.source, [name, generic]);\n  var identifier = replace(/(?!<<0>>)<<1>>(?:\\s*\\.\\s*<<1>>)*/.source, [nonTypeKeywords, genericName]);\n  var array = /\\[\\s*(?:,\\s*)*\\]/.source;\n  var typeExpressionWithoutTuple = replace(/<<0>>(?:\\s*(?:\\?\\s*)?<<1>>)*(?:\\s*\\?)?/.source, [identifier, array]);\n  var tupleElement = replace(/[^,()<>[\\];=+\\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source, [generic, nestedRound, array]);\n  var tuple = replace(/\\(<<0>>+(?:,<<0>>+)+\\)/.source, [tupleElement]);\n  var typeExpression = replace(/(?:<<0>>|<<1>>)(?:\\s*(?:\\?\\s*)?<<2>>)*(?:\\s*\\?)?/.source, [tuple, identifier, array]);\n  var typeInside = {\n    'keyword': keywords,\n    'punctuation': /[<>()?,.:[\\]]/\n  };\n\n  // strings & characters\n  // https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/language-specification/lexical-structure#character-literals\n  // https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/language-specification/lexical-structure#string-literals\n  var character = /'(?:[^\\r\\n'\\\\]|\\\\.|\\\\[Uux][\\da-fA-F]{1,8})'/.source; // simplified pattern\n  var regularString = /\"(?:\\\\.|[^\\\\\"\\r\\n])*\"/.source;\n  var verbatimString = /@\"(?:\"\"|\\\\[\\s\\S]|[^\\\\\"])*\"(?!\")/.source;\n  Prism.languages.csharp = Prism.languages.extend('clike', {\n    'string': [{\n      pattern: re(/(^|[^$\\\\])<<0>>/.source, [verbatimString]),\n      lookbehind: true,\n      greedy: true\n    }, {\n      pattern: re(/(^|[^@$\\\\])<<0>>/.source, [regularString]),\n      lookbehind: true,\n      greedy: true\n    }],\n    'class-name': [{\n      // Using static\n      // using static System.Math;\n      pattern: re(/(\\busing\\s+static\\s+)<<0>>(?=\\s*;)/.source, [identifier]),\n      lookbehind: true,\n      inside: typeInside\n    }, {\n      // Using alias (type)\n      // using Project = PC.MyCompany.Project;\n      pattern: re(/(\\busing\\s+<<0>>\\s*=\\s*)<<1>>(?=\\s*;)/.source, [name, typeExpression]),\n      lookbehind: true,\n      inside: typeInside\n    }, {\n      // Using alias (alias)\n      // using Project = PC.MyCompany.Project;\n      pattern: re(/(\\busing\\s+)<<0>>(?=\\s*=)/.source, [name]),\n      lookbehind: true\n    }, {\n      // Type declarations\n      // class Foo<A, B>\n      // interface Foo<out A, B>\n      pattern: re(/(\\b<<0>>\\s+)<<1>>/.source, [typeDeclarationKeywords, genericName]),\n      lookbehind: true,\n      inside: typeInside\n    }, {\n      // Single catch exception declaration\n      // catch(Foo)\n      // (things like catch(Foo e) is covered by variable declaration)\n      pattern: re(/(\\bcatch\\s*\\(\\s*)<<0>>/.source, [identifier]),\n      lookbehind: true,\n      inside: typeInside\n    }, {\n      // Name of the type parameter of generic constraints\n      // where Foo : class\n      pattern: re(/(\\bwhere\\s+)<<0>>/.source, [name]),\n      lookbehind: true\n    }, {\n      // Casts and checks via as and is.\n      // as Foo<A>, is Bar<B>\n      // (things like if(a is Foo b) is covered by variable declaration)\n      pattern: re(/(\\b(?:is(?:\\s+not)?|as)\\s+)<<0>>/.source, [typeExpressionWithoutTuple]),\n      lookbehind: true,\n      inside: typeInside\n    }, {\n      // Variable, field and parameter declaration\n      // (Foo bar, Bar baz, Foo[,,] bay, Foo<Bar, FooBar<Bar>> bax)\n      pattern: re(/\\b<<0>>(?=\\s+(?!<<1>>|with\\s*\\{)<<2>>(?:\\s*[=,;:{)\\]]|\\s+(?:in|when)\\b))/.source, [typeExpression, nonContextualKeywords, name]),\n      inside: typeInside\n    }],\n    'keyword': keywords,\n    // https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/language-specification/lexical-structure#literals\n    'number': /(?:\\b0(?:x[\\da-f_]*[\\da-f]|b[01_]*[01])|(?:\\B\\.\\d+(?:_+\\d+)*|\\b\\d+(?:_+\\d+)*(?:\\.\\d+(?:_+\\d+)*)?)(?:e[-+]?\\d+(?:_+\\d+)*)?)(?:[dflmu]|lu|ul)?\\b/i,\n    'operator': />>=?|<<=?|[-=]>|([-+&|])\\1|~|\\?\\?=?|[-+*/%&|^!=<>]=?/,\n    'punctuation': /\\?\\.?|::|[{}[\\];(),.:]/\n  });\n  Prism.languages.insertBefore('csharp', 'number', {\n    'range': {\n      pattern: /\\.\\./,\n      alias: 'operator'\n    }\n  });\n  Prism.languages.insertBefore('csharp', 'punctuation', {\n    'named-parameter': {\n      pattern: re(/([(,]\\s*)<<0>>(?=\\s*:)/.source, [name]),\n      lookbehind: true,\n      alias: 'punctuation'\n    }\n  });\n  Prism.languages.insertBefore('csharp', 'class-name', {\n    'namespace': {\n      // namespace Foo.Bar {}\n      // using Foo.Bar;\n      pattern: re(/(\\b(?:namespace|using)\\s+)<<0>>(?:\\s*\\.\\s*<<0>>)*(?=\\s*[;{])/.source, [name]),\n      lookbehind: true,\n      inside: {\n        'punctuation': /\\./\n      }\n    },\n    'type-expression': {\n      // default(Foo), typeof(Foo<Bar>), sizeof(int)\n      pattern: re(/(\\b(?:default|sizeof|typeof)\\s*\\(\\s*(?!\\s))(?:[^()\\s]|\\s(?!\\s)|<<0>>)*(?=\\s*\\))/.source, [nestedRound]),\n      lookbehind: true,\n      alias: 'class-name',\n      inside: typeInside\n    },\n    'return-type': {\n      // Foo<Bar> ForBar(); Foo IFoo.Bar() => 0\n      // int this[int index] => 0; T IReadOnlyList<T>.this[int index] => this[index];\n      // int Foo => 0; int Foo { get; set } = 0;\n      pattern: re(/<<0>>(?=\\s+(?:<<1>>\\s*(?:=>|[({]|\\.\\s*this\\s*\\[)|this\\s*\\[))/.source, [typeExpression, identifier]),\n      inside: typeInside,\n      alias: 'class-name'\n    },\n    'constructor-invocation': {\n      // new List<Foo<Bar[]>> { }\n      pattern: re(/(\\bnew\\s+)<<0>>(?=\\s*[[({])/.source, [typeExpression]),\n      lookbehind: true,\n      inside: typeInside,\n      alias: 'class-name'\n    },\n    /*'explicit-implementation': {\n    \t// int IFoo<Foo>.Bar => 0; void IFoo<Foo<Foo>>.Foo<T>();\n    \tpattern: replace(/\\b<<0>>(?=\\.<<1>>)/, className, methodOrPropertyDeclaration),\n    \tinside: classNameInside,\n    \talias: 'class-name'\n    },*/\n    'generic-method': {\n      // foo<Bar>()\n      pattern: re(/<<0>>\\s*<<1>>(?=\\s*\\()/.source, [name, generic]),\n      inside: {\n        'function': re(/^<<0>>/.source, [name]),\n        'generic': {\n          pattern: RegExp(generic),\n          alias: 'class-name',\n          inside: typeInside\n        }\n      }\n    },\n    'type-list': {\n      // The list of types inherited or of generic constraints\n      // class Foo<F> : Bar, IList<FooBar>\n      // where F : Bar, IList<int>\n      pattern: re(/\\b((?:<<0>>\\s+<<1>>|record\\s+<<1>>\\s*<<5>>|where\\s+<<2>>)\\s*:\\s*)(?:<<3>>|<<4>>|<<1>>\\s*<<5>>|<<6>>)(?:\\s*,\\s*(?:<<3>>|<<4>>|<<6>>))*(?=\\s*(?:where|[{;]|=>|$))/.source, [typeDeclarationKeywords, genericName, name, typeExpression, keywords.source, nestedRound, /\\bnew\\s*\\(\\s*\\)/.source]),\n      lookbehind: true,\n      inside: {\n        'record-arguments': {\n          pattern: re(/(^(?!new\\s*\\()<<0>>\\s*)<<1>>/.source, [genericName, nestedRound]),\n          lookbehind: true,\n          greedy: true,\n          inside: Prism.languages.csharp\n        },\n        'keyword': keywords,\n        'class-name': {\n          pattern: RegExp(typeExpression),\n          greedy: true,\n          inside: typeInside\n        },\n        'punctuation': /[,()]/\n      }\n    },\n    'preprocessor': {\n      pattern: /(^[\\t ]*)#.*/m,\n      lookbehind: true,\n      alias: 'property',\n      inside: {\n        // highlight preprocessor directives as keywords\n        'directive': {\n          pattern: /(#)\\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\\b/,\n          lookbehind: true,\n          alias: 'keyword'\n        }\n      }\n    }\n  });\n\n  // attributes\n  var regularStringOrCharacter = regularString + '|' + character;\n  var regularStringCharacterOrComment = replace(/\\/(?![*/])|\\/\\/[^\\r\\n]*[\\r\\n]|\\/\\*(?:[^*]|\\*(?!\\/))*\\*\\/|<<0>>/.source, [regularStringOrCharacter]);\n  var roundExpression = nested(replace(/[^\"'/()]|<<0>>|\\(<<self>>*\\)/.source, [regularStringCharacterOrComment]), 2);\n\n  // https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/attributes/#attribute-targets\n  var attrTarget = /\\b(?:assembly|event|field|method|module|param|property|return|type)\\b/.source;\n  var attr = replace(/<<0>>(?:\\s*\\(<<1>>*\\))?/.source, [identifier, roundExpression]);\n  Prism.languages.insertBefore('csharp', 'class-name', {\n    'attribute': {\n      // Attributes\n      // [Foo], [Foo(1), Bar(2, Prop = \"foo\")], [return: Foo(1), Bar(2)], [assembly: Foo(Bar)]\n      pattern: re(/((?:^|[^\\s\\w>)?])\\s*\\[\\s*)(?:<<0>>\\s*:\\s*)?<<1>>(?:\\s*,\\s*<<1>>)*(?=\\s*\\])/.source, [attrTarget, attr]),\n      lookbehind: true,\n      greedy: true,\n      inside: {\n        'target': {\n          pattern: re(/^<<0>>(?=\\s*:)/.source, [attrTarget]),\n          alias: 'keyword'\n        },\n        'attribute-arguments': {\n          pattern: re(/\\(<<0>>*\\)/.source, [roundExpression]),\n          inside: Prism.languages.csharp\n        },\n        'class-name': {\n          pattern: RegExp(identifier),\n          inside: {\n            'punctuation': /\\./\n          }\n        },\n        'punctuation': /[:,]/\n      }\n    }\n  });\n\n  // string interpolation\n  var formatString = /:[^}\\r\\n]+/.source;\n  // multi line\n  var mInterpolationRound = nested(replace(/[^\"'/()]|<<0>>|\\(<<self>>*\\)/.source, [regularStringCharacterOrComment]), 2);\n  var mInterpolation = replace(/\\{(?!\\{)(?:(?![}:])<<0>>)*<<1>>?\\}/.source, [mInterpolationRound, formatString]);\n  // single line\n  var sInterpolationRound = nested(replace(/[^\"'/()]|\\/(?!\\*)|\\/\\*(?:[^*]|\\*(?!\\/))*\\*\\/|<<0>>|\\(<<self>>*\\)/.source, [regularStringOrCharacter]), 2);\n  var sInterpolation = replace(/\\{(?!\\{)(?:(?![}:])<<0>>)*<<1>>?\\}/.source, [sInterpolationRound, formatString]);\n  function createInterpolationInside(interpolation, interpolationRound) {\n    return {\n      'interpolation': {\n        pattern: re(/((?:^|[^{])(?:\\{\\{)*)<<0>>/.source, [interpolation]),\n        lookbehind: true,\n        inside: {\n          'format-string': {\n            pattern: re(/(^\\{(?:(?![}:])<<0>>)*)<<1>>(?=\\}$)/.source, [interpolationRound, formatString]),\n            lookbehind: true,\n            inside: {\n              'punctuation': /^:/\n            }\n          },\n          'punctuation': /^\\{|\\}$/,\n          'expression': {\n            pattern: /[\\s\\S]+/,\n            alias: 'language-csharp',\n            inside: Prism.languages.csharp\n          }\n        }\n      },\n      'string': /[\\s\\S]+/\n    };\n  }\n  Prism.languages.insertBefore('csharp', 'string', {\n    'interpolation-string': [{\n      pattern: re(/(^|[^\\\\])(?:\\$@|@\\$)\"(?:\"\"|\\\\[\\s\\S]|\\{\\{|<<0>>|[^\\\\{\"])*\"/.source, [mInterpolation]),\n      lookbehind: true,\n      greedy: true,\n      inside: createInterpolationInside(mInterpolation, mInterpolationRound)\n    }, {\n      pattern: re(/(^|[^@\\\\])\\$\"(?:\\\\.|\\{\\{|<<0>>|[^\\\\\"{])*\"/.source, [sInterpolation]),\n      lookbehind: true,\n      greedy: true,\n      inside: createInterpolationInside(sInterpolation, sInterpolationRound)\n    }],\n    'char': {\n      pattern: RegExp(character),\n      greedy: true\n    }\n  });\n  Prism.languages.dotnet = Prism.languages.cs = Prism.languages.csharp;\n})(Prism);\nPrism.languages.markup = {\n  'comment': {\n    pattern: /<!--(?:(?!<!--)[\\s\\S])*?-->/,\n    greedy: true\n  },\n  'prolog': {\n    pattern: /<\\?[\\s\\S]+?\\?>/,\n    greedy: true\n  },\n  'doctype': {\n    // https://www.w3.org/TR/xml/#NT-doctypedecl\n    pattern: /<!DOCTYPE(?:[^>\"'[\\]]|\"[^\"]*\"|'[^']*')+(?:\\[(?:[^<\"'\\]]|\"[^\"]*\"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\\]\\s*)?>/i,\n    greedy: true,\n    inside: {\n      'internal-subset': {\n        pattern: /(^[^\\[]*\\[)[\\s\\S]+(?=\\]>$)/,\n        lookbehind: true,\n        greedy: true,\n        inside: null // see below\n      },\n      'string': {\n        pattern: /\"[^\"]*\"|'[^']*'/,\n        greedy: true\n      },\n      'punctuation': /^<!|>$|[[\\]]/,\n      'doctype-tag': /^DOCTYPE/i,\n      'name': /[^\\s<>'\"]+/\n    }\n  },\n  'cdata': {\n    pattern: /<!\\[CDATA\\[[\\s\\S]*?\\]\\]>/i,\n    greedy: true\n  },\n  'tag': {\n    pattern: /<\\/?(?!\\d)[^\\s>\\/=$<%]+(?:\\s(?:\\s*[^\\s>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+(?=[\\s>]))|(?=[\\s/>])))+)?\\s*\\/?>/,\n    greedy: true,\n    inside: {\n      'tag': {\n        pattern: /^<\\/?[^\\s>\\/]+/,\n        inside: {\n          'punctuation': /^<\\/?/,\n          'namespace': /^[^\\s>\\/:]+:/\n        }\n      },\n      'special-attr': [],\n      'attr-value': {\n        pattern: /=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+)/,\n        inside: {\n          'punctuation': [{\n            pattern: /^=/,\n            alias: 'attr-equals'\n          }, {\n            pattern: /^(\\s*)[\"']|[\"']$/,\n            lookbehind: true\n          }]\n        }\n      },\n      'punctuation': /\\/?>/,\n      'attr-name': {\n        pattern: /[^\\s>\\/]+/,\n        inside: {\n          'namespace': /^[^\\s>\\/:]+:/\n        }\n      }\n    }\n  },\n  'entity': [{\n    pattern: /&[\\da-z]{1,8};/i,\n    alias: 'named-entity'\n  }, /&#x?[\\da-f]{1,8};/i]\n};\nPrism.languages.markup['tag'].inside['attr-value'].inside['entity'] = Prism.languages.markup['entity'];\nPrism.languages.markup['doctype'].inside['internal-subset'].inside = Prism.languages.markup;\n\n// Plugin to make entity title show the real entity, idea by Roman Komarov\nPrism.hooks.add('wrap', function (env) {\n  if (env.type === 'entity') {\n    env.attributes['title'] = env.content.replace(/&amp;/, '&');\n  }\n});\nObject.defineProperty(Prism.languages.markup.tag, 'addInlined', {\n  /**\n   * Adds an inlined language to markup.\n   *\n   * An example of an inlined language is CSS with `<style>` tags.\n   *\n   * @param {string} tagName The name of the tag that contains the inlined language. This name will be treated as\n   * case insensitive.\n   * @param {string} lang The language key.\n   * @example\n   * addInlined('style', 'css');\n   */\n  value: function addInlined(tagName, lang) {\n    var includedCdataInside = {};\n    includedCdataInside['language-' + lang] = {\n      pattern: /(^<!\\[CDATA\\[)[\\s\\S]+?(?=\\]\\]>$)/i,\n      lookbehind: true,\n      inside: Prism.languages[lang]\n    };\n    includedCdataInside['cdata'] = /^<!\\[CDATA\\[|\\]\\]>$/i;\n    var inside = {\n      'included-cdata': {\n        pattern: /<!\\[CDATA\\[[\\s\\S]*?\\]\\]>/i,\n        inside: includedCdataInside\n      }\n    };\n    inside['language-' + lang] = {\n      pattern: /[\\s\\S]+/,\n      inside: Prism.languages[lang]\n    };\n    var def = {};\n    def[tagName] = {\n      pattern: RegExp(/(<__[^>]*>)(?:<!\\[CDATA\\[(?:[^\\]]|\\](?!\\]>))*\\]\\]>|(?!<!\\[CDATA\\[)[\\s\\S])*?(?=<\\/__>)/.source.replace(/__/g, function () {\n        return tagName;\n      }), 'i'),\n      lookbehind: true,\n      greedy: true,\n      inside: inside\n    };\n    Prism.languages.insertBefore('markup', 'cdata', def);\n  }\n});\nObject.defineProperty(Prism.languages.markup.tag, 'addAttribute', {\n  /**\n   * Adds an pattern to highlight languages embedded in HTML attributes.\n   *\n   * An example of an inlined language is CSS with `style` attributes.\n   *\n   * @param {string} attrName The name of the tag that contains the inlined language. This name will be treated as\n   * case insensitive.\n   * @param {string} lang The language key.\n   * @example\n   * addAttribute('style', 'css');\n   */\n  value: function (attrName, lang) {\n    Prism.languages.markup.tag.inside['special-attr'].push({\n      pattern: RegExp(/(^|[\"'\\s])/.source + '(?:' + attrName + ')' + /\\s*=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+(?=[\\s>]))/.source, 'i'),\n      lookbehind: true,\n      inside: {\n        'attr-name': /^[^\\s=]+/,\n        'attr-value': {\n          pattern: /=[\\s\\S]+/,\n          inside: {\n            'value': {\n              pattern: /(^=\\s*([\"']|(?![\"'])))\\S[\\s\\S]*(?=\\2$)/,\n              lookbehind: true,\n              alias: [lang, 'language-' + lang],\n              inside: Prism.languages[lang]\n            },\n            'punctuation': [{\n              pattern: /^=/,\n              alias: 'attr-equals'\n            }, /\"|'/]\n          }\n        }\n      }\n    });\n  }\n});\nPrism.languages.html = Prism.languages.markup;\nPrism.languages.mathml = Prism.languages.markup;\nPrism.languages.svg = Prism.languages.markup;\nPrism.languages.xml = Prism.languages.extend('markup', {});\nPrism.languages.ssml = Prism.languages.xml;\nPrism.languages.atom = Prism.languages.xml;\nPrism.languages.rss = Prism.languages.xml;\n(function (Prism) {\n  var string = /(?:\"(?:\\\\(?:\\r\\n|[\\s\\S])|[^\"\\\\\\r\\n])*\"|'(?:\\\\(?:\\r\\n|[\\s\\S])|[^'\\\\\\r\\n])*')/;\n  Prism.languages.css = {\n    'comment': /\\/\\*[\\s\\S]*?\\*\\//,\n    'atrule': {\n      pattern: RegExp('@[\\\\w-](?:' + /[^;{\\s\"']|\\s+(?!\\s)/.source + '|' + string.source + ')*?' + /(?:;|(?=\\s*\\{))/.source),\n      inside: {\n        'rule': /^@[\\w-]+/,\n        'selector-function-argument': {\n          pattern: /(\\bselector\\s*\\(\\s*(?![\\s)]))(?:[^()\\s]|\\s+(?![\\s)])|\\((?:[^()]|\\([^()]*\\))*\\))+(?=\\s*\\))/,\n          lookbehind: true,\n          alias: 'selector'\n        },\n        'keyword': {\n          pattern: /(^|[^\\w-])(?:and|not|only|or)(?![\\w-])/,\n          lookbehind: true\n        }\n        // See rest below\n      }\n    },\n    'url': {\n      // https://drafts.csswg.org/css-values-3/#urls\n      pattern: RegExp('\\\\burl\\\\((?:' + string.source + '|' + /(?:[^\\\\\\r\\n()\"']|\\\\[\\s\\S])*/.source + ')\\\\)', 'i'),\n      greedy: true,\n      inside: {\n        'function': /^url/i,\n        'punctuation': /^\\(|\\)$/,\n        'string': {\n          pattern: RegExp('^' + string.source + '$'),\n          alias: 'url'\n        }\n      }\n    },\n    'selector': {\n      pattern: RegExp('(^|[{}\\\\s])[^{}\\\\s](?:[^{};\"\\'\\\\s]|\\\\s+(?![\\\\s{])|' + string.source + ')*(?=\\\\s*\\\\{)'),\n      lookbehind: true\n    },\n    'string': {\n      pattern: string,\n      greedy: true\n    },\n    'property': {\n      pattern: /(^|[^-\\w\\xA0-\\uFFFF])(?!\\s)[-_a-z\\xA0-\\uFFFF](?:(?!\\s)[-\\w\\xA0-\\uFFFF])*(?=\\s*:)/i,\n      lookbehind: true\n    },\n    'important': /!important\\b/i,\n    'function': {\n      pattern: /(^|[^-a-z0-9])[-a-z0-9]+(?=\\()/i,\n      lookbehind: true\n    },\n    'punctuation': /[(){};:,]/\n  };\n  Prism.languages.css['atrule'].inside.rest = Prism.languages.css;\n  var markup = Prism.languages.markup;\n  if (markup) {\n    markup.tag.addInlined('style', 'css');\n    markup.tag.addAttribute('style', 'css');\n  }\n})(Prism);\n(function (Prism) {\n  Prism.languages.diff = {\n    'coord': [\n    // Match all kinds of coord lines (prefixed by \"+++\", \"---\" or \"***\").\n    /^(?:\\*{3}|-{3}|\\+{3}).*$/m,\n    // Match \"@@ ... @@\" coord lines in unified diff.\n    /^@@.*@@$/m,\n    // Match coord lines in normal diff (starts with a number).\n    /^\\d.*$/m]\n\n    // deleted, inserted, unchanged, diff\n  };\n\n  /**\n   * A map from the name of a block to its line prefix.\n   *\n   * @type {Object<string, string>}\n   */\n  var PREFIXES = {\n    'deleted-sign': '-',\n    'deleted-arrow': '<',\n    'inserted-sign': '+',\n    'inserted-arrow': '>',\n    'unchanged': ' ',\n    'diff': '!'\n  };\n\n  // add a token for each prefix\n  Object.keys(PREFIXES).forEach(function (name) {\n    var prefix = PREFIXES[name];\n    var alias = [];\n    if (!/^\\w+$/.test(name)) {\n      // \"deleted-sign\" -> \"deleted\"\n      alias.push(/\\w+/.exec(name)[0]);\n    }\n    if (name === 'diff') {\n      alias.push('bold');\n    }\n    Prism.languages.diff[name] = {\n      pattern: RegExp('^(?:[' + prefix + '].*(?:\\r\\n?|\\n|(?![\\\\s\\\\S])))+', 'm'),\n      alias: alias,\n      inside: {\n        'line': {\n          pattern: /(.)(?=[\\s\\S]).*(?:\\r\\n?|\\n)?/,\n          lookbehind: true\n        },\n        'prefix': {\n          pattern: /[\\s\\S]/,\n          alias: /\\w+/.exec(name)[0]\n        }\n      }\n    };\n  });\n\n  // make prefixes available to Diff plugin\n  Object.defineProperty(Prism.languages.diff, 'PREFIXES', {\n    value: PREFIXES\n  });\n})(Prism);\nPrism.languages.go = Prism.languages.extend('clike', {\n  'string': {\n    pattern: /(^|[^\\\\])\"(?:\\\\.|[^\"\\\\\\r\\n])*\"|`[^`]*`/,\n    lookbehind: true,\n    greedy: true\n  },\n  'keyword': /\\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\\b/,\n  'boolean': /\\b(?:_|false|iota|nil|true)\\b/,\n  'number': [\n  // binary and octal integers\n  /\\b0(?:b[01_]+|o[0-7_]+)i?\\b/i,\n  // hexadecimal integers and floats\n  /\\b0x(?:[a-f\\d_]+(?:\\.[a-f\\d_]*)?|\\.[a-f\\d_]+)(?:p[+-]?\\d+(?:_\\d+)*)?i?(?!\\w)/i,\n  // decimal integers and floats\n  /(?:\\b\\d[\\d_]*(?:\\.[\\d_]*)?|\\B\\.\\d[\\d_]*)(?:e[+-]?[\\d_]+)?i?(?!\\w)/i],\n  'operator': /[*\\/%^!=]=?|\\+[=+]?|-[=-]?|\\|[=|]?|&(?:=|&|\\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\\.\\.\\./,\n  'builtin': /\\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\\b/\n});\nPrism.languages.insertBefore('go', 'string', {\n  'char': {\n    pattern: /'(?:\\\\.|[^'\\\\\\r\\n]){0,10}'/,\n    greedy: true\n  }\n});\ndelete Prism.languages.go['class-name'];\nPrism.languages.ini = {\n  /**\n   * The component mimics the behavior of the Win32 API parser.\n   *\n   * @see {@link https://github.com/PrismJS/prism/issues/2775#issuecomment-787477723}\n   */\n\n  'comment': {\n    pattern: /(^[ \\f\\t\\v]*)[#;][^\\n\\r]*/m,\n    lookbehind: true\n  },\n  'section': {\n    pattern: /(^[ \\f\\t\\v]*)\\[[^\\n\\r\\]]*\\]?/m,\n    lookbehind: true,\n    inside: {\n      'section-name': {\n        pattern: /(^\\[[ \\f\\t\\v]*)[^ \\f\\t\\v\\]]+(?:[ \\f\\t\\v]+[^ \\f\\t\\v\\]]+)*/,\n        lookbehind: true,\n        alias: 'selector'\n      },\n      'punctuation': /\\[|\\]/\n    }\n  },\n  'key': {\n    pattern: /(^[ \\f\\t\\v]*)[^ \\f\\n\\r\\t\\v=]+(?:[ \\f\\t\\v]+[^ \\f\\n\\r\\t\\v=]+)*(?=[ \\f\\t\\v]*=)/m,\n    lookbehind: true,\n    alias: 'attr-name'\n  },\n  'value': {\n    pattern: /(=[ \\f\\t\\v]*)[^ \\f\\n\\r\\t\\v]+(?:[ \\f\\t\\v]+[^ \\f\\n\\r\\t\\v]+)*/,\n    lookbehind: true,\n    alias: 'attr-value',\n    inside: {\n      'inner-value': {\n        pattern: /^(\"|').+(?=\\1$)/,\n        lookbehind: true\n      }\n    }\n  },\n  'punctuation': /=/\n};\n(function (Prism) {\n  var keywords = /\\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\\s*[(){}[\\]<>=%~.:,;?+\\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\\b/;\n\n  // full package (optional) + parent classes (optional)\n  var classNamePrefix = /(?:[a-z]\\w*\\s*\\.\\s*)*(?:[A-Z]\\w*\\s*\\.\\s*)*/.source;\n\n  // based on the java naming conventions\n  var className = {\n    pattern: RegExp(/(^|[^\\w.])/.source + classNamePrefix + /[A-Z](?:[\\d_A-Z]*[a-z]\\w*)?\\b/.source),\n    lookbehind: true,\n    inside: {\n      'namespace': {\n        pattern: /^[a-z]\\w*(?:\\s*\\.\\s*[a-z]\\w*)*(?:\\s*\\.)?/,\n        inside: {\n          'punctuation': /\\./\n        }\n      },\n      'punctuation': /\\./\n    }\n  };\n  Prism.languages.java = Prism.languages.extend('clike', {\n    'string': {\n      pattern: /(^|[^\\\\])\"(?:\\\\.|[^\"\\\\\\r\\n])*\"/,\n      lookbehind: true,\n      greedy: true\n    },\n    'class-name': [className, {\n      // variables, parameters, and constructor references\n      // this to support class names (or generic parameters) which do not contain a lower case letter (also works for methods)\n      pattern: RegExp(/(^|[^\\w.])/.source + classNamePrefix + /[A-Z]\\w*(?=\\s+\\w+\\s*[;,=()]|\\s*(?:\\[[\\s,]*\\]\\s*)?::\\s*new\\b)/.source),\n      lookbehind: true,\n      inside: className.inside\n    }, {\n      // class names based on keyword\n      // this to support class names (or generic parameters) which do not contain a lower case letter (also works for methods)\n      pattern: RegExp(/(\\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\\s+)/.source + classNamePrefix + /[A-Z]\\w*\\b/.source),\n      lookbehind: true,\n      inside: className.inside\n    }],\n    'keyword': keywords,\n    'function': [Prism.languages.clike.function, {\n      pattern: /(::\\s*)[a-z_]\\w*/,\n      lookbehind: true\n    }],\n    'number': /\\b0b[01][01_]*L?\\b|\\b0x(?:\\.[\\da-f_p+-]+|[\\da-f_]+(?:\\.[\\da-f_p+-]+)?)\\b|(?:\\b\\d[\\d_]*(?:\\.[\\d_]*)?|\\B\\.\\d[\\d_]*)(?:e[+-]?\\d[\\d_]*)?[dfl]?/i,\n    'operator': {\n      pattern: /(^|[^.])(?:<<=?|>>>?=?|->|--|\\+\\+|&&|\\|\\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,\n      lookbehind: true\n    },\n    'constant': /\\b[A-Z][A-Z_\\d]+\\b/\n  });\n  Prism.languages.insertBefore('java', 'string', {\n    'triple-quoted-string': {\n      // http://openjdk.java.net/jeps/355#Description\n      pattern: /\"\"\"[ \\t]*[\\r\\n](?:(?:\"|\"\")?(?:\\\\.|[^\"\\\\]))*\"\"\"/,\n      greedy: true,\n      alias: 'string'\n    },\n    'char': {\n      pattern: /'(?:\\\\.|[^'\\\\\\r\\n]){1,6}'/,\n      greedy: true\n    }\n  });\n  Prism.languages.insertBefore('java', 'class-name', {\n    'annotation': {\n      pattern: /(^|[^.])@\\w+(?:\\s*\\.\\s*\\w+)*/,\n      lookbehind: true,\n      alias: 'punctuation'\n    },\n    'generics': {\n      pattern: /<(?:[\\w\\s,.?]|&(?!&)|<(?:[\\w\\s,.?]|&(?!&)|<(?:[\\w\\s,.?]|&(?!&)|<(?:[\\w\\s,.?]|&(?!&))*>)*>)*>)*>/,\n      inside: {\n        'class-name': className,\n        'keyword': keywords,\n        'punctuation': /[<>(),.:]/,\n        'operator': /[?&|]/\n      }\n    },\n    'import': [{\n      pattern: RegExp(/(\\bimport\\s+)/.source + classNamePrefix + /(?:[A-Z]\\w*|\\*)(?=\\s*;)/.source),\n      lookbehind: true,\n      inside: {\n        'namespace': className.inside.namespace,\n        'punctuation': /\\./,\n        'operator': /\\*/,\n        'class-name': /\\w+/\n      }\n    }, {\n      pattern: RegExp(/(\\bimport\\s+static\\s+)/.source + classNamePrefix + /(?:\\w+|\\*)(?=\\s*;)/.source),\n      lookbehind: true,\n      alias: 'static',\n      inside: {\n        'namespace': className.inside.namespace,\n        'static': /\\b\\w+$/,\n        'punctuation': /\\./,\n        'operator': /\\*/,\n        'class-name': /\\w+/\n      }\n    }],\n    'namespace': {\n      pattern: RegExp(/(\\b(?:exports|import(?:\\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\\s+)(?!<keyword>)[a-z]\\w*(?:\\.[a-z]\\w*)*\\.?/.source.replace(/<keyword>/g, function () {\n        return keywords.source;\n      })),\n      lookbehind: true,\n      inside: {\n        'punctuation': /\\./\n      }\n    }\n  });\n})(Prism);\n(function (Prism) {\n  var specialEscape = {\n    pattern: /\\\\[\\\\(){}[\\]^$+*?|.]/,\n    alias: 'escape'\n  };\n  var escape = /\\\\(?:x[\\da-fA-F]{2}|u[\\da-fA-F]{4}|u\\{[\\da-fA-F]+\\}|0[0-7]{0,2}|[123][0-7]{2}|c[a-zA-Z]|.)/;\n  var charSet = {\n    pattern: /\\.|\\\\[wsd]|\\\\p\\{[^{}]+\\}/i,\n    alias: 'class-name'\n  };\n  var charSetWithoutDot = {\n    pattern: /\\\\[wsd]|\\\\p\\{[^{}]+\\}/i,\n    alias: 'class-name'\n  };\n  var rangeChar = '(?:[^\\\\\\\\-]|' + escape.source + ')';\n  var range = RegExp(rangeChar + '-' + rangeChar);\n\n  // the name of a capturing group\n  var groupName = {\n    pattern: /(<|')[^<>']+(?=[>']$)/,\n    lookbehind: true,\n    alias: 'variable'\n  };\n  Prism.languages.regex = {\n    'char-class': {\n      pattern: /((?:^|[^\\\\])(?:\\\\\\\\)*)\\[(?:[^\\\\\\]]|\\\\[\\s\\S])*\\]/,\n      lookbehind: true,\n      inside: {\n        'char-class-negation': {\n          pattern: /(^\\[)\\^/,\n          lookbehind: true,\n          alias: 'operator'\n        },\n        'char-class-punctuation': {\n          pattern: /^\\[|\\]$/,\n          alias: 'punctuation'\n        },\n        'range': {\n          pattern: range,\n          inside: {\n            'escape': escape,\n            'range-punctuation': {\n              pattern: /-/,\n              alias: 'operator'\n            }\n          }\n        },\n        'special-escape': specialEscape,\n        'char-set': charSetWithoutDot,\n        'escape': escape\n      }\n    },\n    'special-escape': specialEscape,\n    'char-set': charSet,\n    'backreference': [{\n      // a backreference which is not an octal escape\n      pattern: /\\\\(?![123][0-7]{2})[1-9]/,\n      alias: 'keyword'\n    }, {\n      pattern: /\\\\k<[^<>']+>/,\n      alias: 'keyword',\n      inside: {\n        'group-name': groupName\n      }\n    }],\n    'anchor': {\n      pattern: /[$^]|\\\\[ABbGZz]/,\n      alias: 'function'\n    },\n    'escape': escape,\n    'group': [{\n      // https://docs.oracle.com/javase/10/docs/api/java/util/regex/Pattern.html\n      // https://docs.microsoft.com/en-us/dotnet/standard/base-types/regular-expression-language-quick-reference?view=netframework-4.7.2#grouping-constructs\n\n      // (), (?<name>), (?'name'), (?>), (?:), (?=), (?!), (?<=), (?<!), (?is-m), (?i-m:)\n      pattern: /\\((?:\\?(?:<[^<>']+>|'[^<>']+'|[>:]|<?[=!]|[idmnsuxU]+(?:-[idmnsuxU]+)?:?))?/,\n      alias: 'punctuation',\n      inside: {\n        'group-name': groupName\n      }\n    }, {\n      pattern: /\\)/,\n      alias: 'punctuation'\n    }],\n    'quantifier': {\n      pattern: /(?:[+*?]|\\{\\d+(?:,\\d*)?\\})[?+]?/,\n      alias: 'number'\n    },\n    'alternation': {\n      pattern: /\\|/,\n      alias: 'keyword'\n    }\n  };\n})(Prism);\nPrism.languages.javascript = Prism.languages.extend('clike', {\n  'class-name': [Prism.languages.clike['class-name'], {\n    pattern: /(^|[^$\\w\\xA0-\\uFFFF])(?!\\s)[_$A-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\.(?:constructor|prototype))/,\n    lookbehind: true\n  }],\n  'keyword': [{\n    pattern: /((?:^|\\})\\s*)catch\\b/,\n    lookbehind: true\n  }, {\n    pattern: /(^|[^.]|\\.\\.\\.\\s*)\\b(?:as|assert(?=\\s*\\{)|async(?=\\s*(?:function\\b|\\(|[$\\w\\xA0-\\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\\s*(?:\\{|$))|for|from(?=\\s*(?:['\"]|$))|function|(?:get|set)(?=\\s*(?:[#\\[$\\w\\xA0-\\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\\b/,\n    lookbehind: true\n  }],\n  // Allow for all non-ASCII characters (See http://stackoverflow.com/a/2008444)\n  'function': /#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*(?:\\.\\s*(?:apply|bind|call)\\s*)?\\()/,\n  'number': {\n    pattern: RegExp(/(^|[^\\w$])/.source + '(?:' + (\n    // constant\n    /NaN|Infinity/.source + '|' +\n    // binary integer\n    /0[bB][01]+(?:_[01]+)*n?/.source + '|' +\n    // octal integer\n    /0[oO][0-7]+(?:_[0-7]+)*n?/.source + '|' +\n    // hexadecimal integer\n    /0[xX][\\dA-Fa-f]+(?:_[\\dA-Fa-f]+)*n?/.source + '|' +\n    // decimal bigint\n    /\\d+(?:_\\d+)*n/.source + '|' +\n    // decimal number (integer or float) but no bigint\n    /(?:\\d+(?:_\\d+)*(?:\\.(?:\\d+(?:_\\d+)*)?)?|\\.\\d+(?:_\\d+)*)(?:[Ee][+-]?\\d+(?:_\\d+)*)?/.source) + ')' + /(?![\\w$])/.source),\n    lookbehind: true\n  },\n  'operator': /--|\\+\\+|\\*\\*=?|=>|&&=?|\\|\\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\\.{3}|\\?\\?=?|\\?\\.?|[~:]/\n});\nPrism.languages.javascript['class-name'][0].pattern = /(\\b(?:class|extends|implements|instanceof|interface|new)\\s+)[\\w.\\\\]+/;\nPrism.languages.insertBefore('javascript', 'keyword', {\n  'regex': {\n    pattern: RegExp(\n    // lookbehind\n    // eslint-disable-next-line regexp/no-dupe-characters-character-class\n    /((?:^|[^$\\w\\xA0-\\uFFFF.\"'\\])\\s]|\\b(?:return|yield))\\s*)/.source +\n    // Regex pattern:\n    // There are 2 regex patterns here. The RegExp set notation proposal added support for nested character\n    // classes if the `v` flag is present. Unfortunately, nested CCs are both context-free and incompatible\n    // with the only syntax, so we have to define 2 different regex patterns.\n    /\\//.source + '(?:' + /(?:\\[(?:[^\\]\\\\\\r\\n]|\\\\.)*\\]|\\\\.|[^/\\\\\\[\\r\\n])+\\/[dgimyus]{0,7}/.source + '|' +\n    // `v` flag syntax. This supports 3 levels of nested character classes.\n    /(?:\\[(?:[^[\\]\\\\\\r\\n]|\\\\.|\\[(?:[^[\\]\\\\\\r\\n]|\\\\.|\\[(?:[^[\\]\\\\\\r\\n]|\\\\.)*\\])*\\])*\\]|\\\\.|[^/\\\\\\[\\r\\n])+\\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source + ')' +\n    // lookahead\n    /(?=(?:\\s|\\/\\*(?:[^*]|\\*(?!\\/))*\\*\\/)*(?:$|[\\r\\n,.;:})\\]]|\\/\\/))/.source),\n    lookbehind: true,\n    greedy: true,\n    inside: {\n      'regex-source': {\n        pattern: /^(\\/)[\\s\\S]+(?=\\/[a-z]*$)/,\n        lookbehind: true,\n        alias: 'language-regex',\n        inside: Prism.languages.regex\n      },\n      'regex-delimiter': /^\\/|\\/$/,\n      'regex-flags': /^[a-z]+$/\n    }\n  },\n  // This must be declared before keyword because we use \"function\" inside the look-forward\n  'function-variable': {\n    pattern: /#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*[=:]\\s*(?:async\\s*)?(?:\\bfunction\\b|(?:\\((?:[^()]|\\([^()]*\\))*\\)|(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*)\\s*=>))/,\n    alias: 'function'\n  },\n  'parameter': [{\n    pattern: /(function(?:\\s+(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*)?\\s*\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\))/,\n    lookbehind: true,\n    inside: Prism.languages.javascript\n  }, {\n    pattern: /(^|[^$\\w\\xA0-\\uFFFF])(?!\\s)[_$a-z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*=>)/i,\n    lookbehind: true,\n    inside: Prism.languages.javascript\n  }, {\n    pattern: /(\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\)\\s*=>)/,\n    lookbehind: true,\n    inside: Prism.languages.javascript\n  }, {\n    pattern: /((?:\\b|\\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\\w\\xA0-\\uFFFF]))(?:(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*\\s*)\\(\\s*|\\]\\s*\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\)\\s*\\{)/,\n    lookbehind: true,\n    inside: Prism.languages.javascript\n  }],\n  'constant': /\\b[A-Z](?:[A-Z_]|\\dx?)*\\b/\n});\nPrism.languages.insertBefore('javascript', 'string', {\n  'hashbang': {\n    pattern: /^#!.*/,\n    greedy: true,\n    alias: 'comment'\n  },\n  'template-string': {\n    pattern: /`(?:\\\\[\\s\\S]|\\$\\{(?:[^{}]|\\{(?:[^{}]|\\{[^}]*\\})*\\})+\\}|(?!\\$\\{)[^\\\\`])*`/,\n    greedy: true,\n    inside: {\n      'template-punctuation': {\n        pattern: /^`|`$/,\n        alias: 'string'\n      },\n      'interpolation': {\n        pattern: /((?:^|[^\\\\])(?:\\\\{2})*)\\$\\{(?:[^{}]|\\{(?:[^{}]|\\{[^}]*\\})*\\})+\\}/,\n        lookbehind: true,\n        inside: {\n          'interpolation-punctuation': {\n            pattern: /^\\$\\{|\\}$/,\n            alias: 'punctuation'\n          },\n          rest: Prism.languages.javascript\n        }\n      },\n      'string': /[\\s\\S]+/\n    }\n  },\n  'string-property': {\n    pattern: /((?:^|[,{])[ \\t]*)([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\2)[^\\\\\\r\\n])*\\2(?=\\s*:)/m,\n    lookbehind: true,\n    greedy: true,\n    alias: 'property'\n  }\n});\nPrism.languages.insertBefore('javascript', 'operator', {\n  'literal-property': {\n    pattern: /((?:^|[,{])[ \\t]*)(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*:)/m,\n    lookbehind: true,\n    alias: 'property'\n  }\n});\nif (Prism.languages.markup) {\n  Prism.languages.markup.tag.addInlined('script', 'javascript');\n\n  // add attribute support for all DOM events.\n  // https://developer.mozilla.org/en-US/docs/Web/Events#Standard_events\n  Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source, 'javascript');\n}\nPrism.languages.js = Prism.languages.javascript;\n(function (Prism) {\n  var javascript = Prism.util.clone(Prism.languages.javascript);\n  var space = /(?:\\s|\\/\\/.*(?!.)|\\/\\*(?:[^*]|\\*(?!\\/))\\*\\/)/.source;\n  var braces = /(?:\\{(?:\\{(?:\\{[^{}]*\\}|[^{}])*\\}|[^{}])*\\})/.source;\n  var spread = /(?:\\{<S>*\\.{3}(?:[^{}]|<BRACES>)*\\})/.source;\n\n  /**\n   * @param {string} source\n   * @param {string} [flags]\n   */\n  function re(source, flags) {\n    source = source.replace(/<S>/g, function () {\n      return space;\n    }).replace(/<BRACES>/g, function () {\n      return braces;\n    }).replace(/<SPREAD>/g, function () {\n      return spread;\n    });\n    return RegExp(source, flags);\n  }\n  spread = re(spread).source;\n  Prism.languages.jsx = Prism.languages.extend('markup', javascript);\n  Prism.languages.jsx.tag.pattern = re(/<\\/?(?:[\\w.:-]+(?:<S>+(?:[\\w.:$-]+(?:=(?:\"(?:\\\\[\\s\\S]|[^\\\\\"])*\"|'(?:\\\\[\\s\\S]|[^\\\\'])*'|[^\\s{'\"/>=]+|<BRACES>))?|<SPREAD>))*<S>*\\/?)?>/.source);\n  Prism.languages.jsx.tag.inside['tag'].pattern = /^<\\/?[^\\s>\\/]*/;\n  Prism.languages.jsx.tag.inside['attr-value'].pattern = /=(?!\\{)(?:\"(?:\\\\[\\s\\S]|[^\\\\\"])*\"|'(?:\\\\[\\s\\S]|[^\\\\'])*'|[^\\s'\">]+)/;\n  Prism.languages.jsx.tag.inside['tag'].inside['class-name'] = /^[A-Z]\\w*(?:\\.[A-Z]\\w*)*$/;\n  Prism.languages.jsx.tag.inside['comment'] = javascript['comment'];\n  Prism.languages.insertBefore('inside', 'attr-name', {\n    'spread': {\n      pattern: re(/<SPREAD>/.source),\n      inside: Prism.languages.jsx\n    }\n  }, Prism.languages.jsx.tag);\n  Prism.languages.insertBefore('inside', 'special-attr', {\n    'script': {\n      // Allow for two levels of nesting\n      pattern: re(/=<BRACES>/.source),\n      alias: 'language-javascript',\n      inside: {\n        'script-punctuation': {\n          pattern: /^=(?=\\{)/,\n          alias: 'punctuation'\n        },\n        rest: Prism.languages.jsx\n      }\n    }\n  }, Prism.languages.jsx.tag);\n\n  // The following will handle plain text inside tags\n  var stringifyToken = function (token) {\n    if (!token) {\n      return '';\n    }\n    if (typeof token === 'string') {\n      return token;\n    }\n    if (typeof token.content === 'string') {\n      return token.content;\n    }\n    return token.content.map(stringifyToken).join('');\n  };\n  var walkTokens = function (tokens) {\n    var openedTags = [];\n    for (var i = 0; i < tokens.length; i++) {\n      var token = tokens[i];\n      var notTagNorBrace = false;\n      if (typeof token !== 'string') {\n        if (token.type === 'tag' && token.content[0] && token.content[0].type === 'tag') {\n          // We found a tag, now find its kind\n\n          if (token.content[0].content[0].content === '</') {\n            // Closing tag\n            if (openedTags.length > 0 && openedTags[openedTags.length - 1].tagName === stringifyToken(token.content[0].content[1])) {\n              // Pop matching opening tag\n              openedTags.pop();\n            }\n          } else {\n            if (token.content[token.content.length - 1].content === '/>') ; else {\n              // Opening tag\n              openedTags.push({\n                tagName: stringifyToken(token.content[0].content[1]),\n                openedBraces: 0\n              });\n            }\n          }\n        } else if (openedTags.length > 0 && token.type === 'punctuation' && token.content === '{') {\n          // Here we might have entered a JSX context inside a tag\n          openedTags[openedTags.length - 1].openedBraces++;\n        } else if (openedTags.length > 0 && openedTags[openedTags.length - 1].openedBraces > 0 && token.type === 'punctuation' && token.content === '}') {\n          // Here we might have left a JSX context inside a tag\n          openedTags[openedTags.length - 1].openedBraces--;\n        } else {\n          notTagNorBrace = true;\n        }\n      }\n      if (notTagNorBrace || typeof token === 'string') {\n        if (openedTags.length > 0 && openedTags[openedTags.length - 1].openedBraces === 0) {\n          // Here we are inside a tag, and not inside a JSX context.\n          // That's plain text: drop any tokens matched.\n          var plainText = stringifyToken(token);\n\n          // And merge text with adjacent text\n          if (i < tokens.length - 1 && (typeof tokens[i + 1] === 'string' || tokens[i + 1].type === 'plain-text')) {\n            plainText += stringifyToken(tokens[i + 1]);\n            tokens.splice(i + 1, 1);\n          }\n          if (i > 0 && (typeof tokens[i - 1] === 'string' || tokens[i - 1].type === 'plain-text')) {\n            plainText = stringifyToken(tokens[i - 1]) + plainText;\n            tokens.splice(i - 1, 1);\n            i--;\n          }\n          tokens[i] = new Prism.Token('plain-text', plainText, null, plainText);\n        }\n      }\n      if (token.content && typeof token.content !== 'string') {\n        walkTokens(token.content);\n      }\n    }\n  };\n  Prism.hooks.add('after-tokenize', function (env) {\n    if (env.language !== 'jsx' && env.language !== 'tsx') {\n      return;\n    }\n    walkTokens(env.tokens);\n  });\n})(Prism);\n\n// https://www.json.org/json-en.html\nPrism.languages.json = {\n  'property': {\n    pattern: /(^|[^\\\\])\"(?:\\\\.|[^\\\\\"\\r\\n])*\"(?=\\s*:)/,\n    lookbehind: true,\n    greedy: true\n  },\n  'string': {\n    pattern: /(^|[^\\\\])\"(?:\\\\.|[^\\\\\"\\r\\n])*\"(?!\\s*:)/,\n    lookbehind: true,\n    greedy: true\n  },\n  'comment': {\n    pattern: /\\/\\/.*|\\/\\*[\\s\\S]*?(?:\\*\\/|$)/,\n    greedy: true\n  },\n  'number': /-?\\b\\d+(?:\\.\\d+)?(?:e[+-]?\\d+)?\\b/i,\n  'punctuation': /[{}[\\],]/,\n  'operator': /:/,\n  'boolean': /\\b(?:false|true)\\b/,\n  'null': {\n    pattern: /\\bnull\\b/,\n    alias: 'keyword'\n  }\n};\nPrism.languages.webmanifest = Prism.languages.json;\n(function (Prism) {\n  Prism.languages.kotlin = Prism.languages.extend('clike', {\n    'keyword': {\n      // The lookbehind prevents wrong highlighting of e.g. kotlin.properties.get\n      pattern: /(^|[^.])\\b(?:abstract|actual|annotation|as|break|by|catch|class|companion|const|constructor|continue|crossinline|data|do|dynamic|else|enum|expect|external|final|finally|for|fun|get|if|import|in|infix|init|inline|inner|interface|internal|is|lateinit|noinline|null|object|open|operator|out|override|package|private|protected|public|reified|return|sealed|set|super|suspend|tailrec|this|throw|to|try|typealias|val|var|vararg|when|where|while)\\b/,\n      lookbehind: true\n    },\n    'function': [{\n      pattern: /(?:`[^\\r\\n`]+`|\\b\\w+)(?=\\s*\\()/,\n      greedy: true\n    }, {\n      pattern: /(\\.)(?:`[^\\r\\n`]+`|\\w+)(?=\\s*\\{)/,\n      lookbehind: true,\n      greedy: true\n    }],\n    'number': /\\b(?:0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*|0[bB][01]+(?:_[01]+)*|\\d+(?:_\\d+)*(?:\\.\\d+(?:_\\d+)*)?(?:[eE][+-]?\\d+(?:_\\d+)*)?[fFL]?)\\b/,\n    'operator': /\\+[+=]?|-[-=>]?|==?=?|!(?:!|==?)?|[\\/*%<>]=?|[?:]:?|\\.\\.|&&|\\|\\||\\b(?:and|inv|or|shl|shr|ushr|xor)\\b/\n  });\n  delete Prism.languages.kotlin['class-name'];\n  var interpolationInside = {\n    'interpolation-punctuation': {\n      pattern: /^\\$\\{?|\\}$/,\n      alias: 'punctuation'\n    },\n    'expression': {\n      pattern: /[\\s\\S]+/,\n      inside: Prism.languages.kotlin\n    }\n  };\n  Prism.languages.insertBefore('kotlin', 'string', {\n    // https://kotlinlang.org/spec/expressions.html#string-interpolation-expressions\n    'string-literal': [{\n      pattern: /\"\"\"(?:[^$]|\\$(?:(?!\\{)|\\{[^{}]*\\}))*?\"\"\"/,\n      alias: 'multiline',\n      inside: {\n        'interpolation': {\n          pattern: /\\$(?:[a-z_]\\w*|\\{[^{}]*\\})/i,\n          inside: interpolationInside\n        },\n        'string': /[\\s\\S]+/\n      }\n    }, {\n      pattern: /\"(?:[^\"\\\\\\r\\n$]|\\\\.|\\$(?:(?!\\{)|\\{[^{}]*\\}))*\"/,\n      alias: 'singleline',\n      inside: {\n        'interpolation': {\n          pattern: /((?:^|[^\\\\])(?:\\\\{2})*)\\$(?:[a-z_]\\w*|\\{[^{}]*\\})/i,\n          lookbehind: true,\n          inside: interpolationInside\n        },\n        'string': /[\\s\\S]+/\n      }\n    }],\n    'char': {\n      // https://kotlinlang.org/spec/expressions.html#character-literals\n      pattern: /'(?:[^'\\\\\\r\\n]|\\\\(?:.|u[a-fA-F0-9]{0,4}))'/,\n      greedy: true\n    }\n  });\n  delete Prism.languages.kotlin['string'];\n  Prism.languages.insertBefore('kotlin', 'keyword', {\n    'annotation': {\n      pattern: /\\B@(?:\\w+:)?(?:[A-Z]\\w*|\\[[^\\]]+\\])/,\n      alias: 'builtin'\n    }\n  });\n  Prism.languages.insertBefore('kotlin', 'function', {\n    'label': {\n      pattern: /\\b\\w+@|@\\w+\\b/,\n      alias: 'symbol'\n    }\n  });\n  Prism.languages.kt = Prism.languages.kotlin;\n  Prism.languages.kts = Prism.languages.kotlin;\n})(Prism);\n\n/* FIXME :\n :extend() is not handled specifically : its highlighting is buggy.\n Mixin usage must be inside a ruleset to be highlighted.\n At-rules (e.g. import) containing interpolations are buggy.\n Detached rulesets are highlighted as at-rules.\n A comment before a mixin usage prevents the latter to be properly highlighted.\n */\n\nPrism.languages.less = Prism.languages.extend('css', {\n  'comment': [/\\/\\*[\\s\\S]*?\\*\\//, {\n    pattern: /(^|[^\\\\])\\/\\/.*/,\n    lookbehind: true\n  }],\n  'atrule': {\n    pattern: /@[\\w-](?:\\((?:[^(){}]|\\([^(){}]*\\))*\\)|[^(){};\\s]|\\s+(?!\\s))*?(?=\\s*\\{)/,\n    inside: {\n      'punctuation': /[:()]/\n    }\n  },\n  // selectors and mixins are considered the same\n  'selector': {\n    pattern: /(?:@\\{[\\w-]+\\}|[^{};\\s@])(?:@\\{[\\w-]+\\}|\\((?:[^(){}]|\\([^(){}]*\\))*\\)|[^(){};@\\s]|\\s+(?!\\s))*?(?=\\s*\\{)/,\n    inside: {\n      // mixin parameters\n      'variable': /@+[\\w-]+/\n    }\n  },\n  'property': /(?:@\\{[\\w-]+\\}|[\\w-])+(?:\\+_?)?(?=\\s*:)/,\n  'operator': /[+\\-*\\/]/\n});\nPrism.languages.insertBefore('less', 'property', {\n  'variable': [\n  // Variable declaration (the colon must be consumed!)\n  {\n    pattern: /@[\\w-]+\\s*:/,\n    inside: {\n      'punctuation': /:/\n    }\n  },\n  // Variable usage\n  /@@?[\\w-]+/],\n  'mixin-usage': {\n    pattern: /([{;]\\s*)[.#](?!\\d)[\\w-].*?(?=[(;])/,\n    lookbehind: true,\n    alias: 'function'\n  }\n});\nPrism.languages.lua = {\n  'comment': /^#!.+|--(?:\\[(=*)\\[[\\s\\S]*?\\]\\1\\]|.*)/m,\n  // \\z may be used to skip the following space\n  'string': {\n    pattern: /([\"'])(?:(?!\\1)[^\\\\\\r\\n]|\\\\z(?:\\r\\n|\\s)|\\\\(?:\\r\\n|[^z]))*\\1|\\[(=*)\\[[\\s\\S]*?\\]\\2\\]/,\n    greedy: true\n  },\n  'number': /\\b0x[a-f\\d]+(?:\\.[a-f\\d]*)?(?:p[+-]?\\d+)?\\b|\\b\\d+(?:\\.\\B|(?:\\.\\d*)?(?:e[+-]?\\d+)?\\b)|\\B\\.\\d+(?:e[+-]?\\d+)?\\b/i,\n  'keyword': /\\b(?:and|break|do|else|elseif|end|false|for|function|goto|if|in|local|nil|not|or|repeat|return|then|true|until|while)\\b/,\n  'function': /(?!\\d)\\w+(?=\\s*(?:[({]))/,\n  'operator': [/[-+*%^&|#]|\\/\\/?|<[<=]?|>[>=]?|[=~]=?/, {\n    // Match \"..\" but don't break \"...\"\n    pattern: /(^|[^.])\\.\\.(?!\\.)/,\n    lookbehind: true\n  }],\n  'punctuation': /[\\[\\](){},;]|\\.+|:+/\n};\nPrism.languages.makefile = {\n  'comment': {\n    pattern: /(^|[^\\\\])#(?:\\\\(?:\\r\\n|[\\s\\S])|[^\\\\\\r\\n])*/,\n    lookbehind: true\n  },\n  'string': {\n    pattern: /([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\1)[^\\\\\\r\\n])*\\1/,\n    greedy: true\n  },\n  'builtin-target': {\n    pattern: /\\.[A-Z][^:#=\\s]+(?=\\s*:(?!=))/,\n    alias: 'builtin'\n  },\n  'target': {\n    pattern: /^(?:[^:=\\s]|[ \\t]+(?![\\s:]))+(?=\\s*:(?!=))/m,\n    alias: 'symbol',\n    inside: {\n      'variable': /\\$+(?:(?!\\$)[^(){}:#=\\s]+|(?=[({]))/\n    }\n  },\n  'variable': /\\$+(?:(?!\\$)[^(){}:#=\\s]+|\\([@*%<^+?][DF]\\)|(?=[({]))/,\n  // Directives\n  'keyword': /-include\\b|\\b(?:define|else|endef|endif|export|ifn?def|ifn?eq|include|override|private|sinclude|undefine|unexport|vpath)\\b/,\n  'function': {\n    pattern: /(\\()(?:abspath|addsuffix|and|basename|call|dir|error|eval|file|filter(?:-out)?|findstring|firstword|flavor|foreach|guile|if|info|join|lastword|load|notdir|or|origin|patsubst|realpath|shell|sort|strip|subst|suffix|value|warning|wildcard|word(?:list|s)?)(?=[ \\t])/,\n    lookbehind: true\n  },\n  'operator': /(?:::|[?:+!])?=|[|@]/,\n  'punctuation': /[:;(){}]/\n};\n(function (Prism) {\n  // https://yaml.org/spec/1.2/spec.html#c-ns-anchor-property\n  // https://yaml.org/spec/1.2/spec.html#c-ns-alias-node\n  var anchorOrAlias = /[*&][^\\s[\\]{},]+/;\n  // https://yaml.org/spec/1.2/spec.html#c-ns-tag-property\n  var tag = /!(?:<[\\w\\-%#;/?:@&=+$,.!~*'()[\\]]+>|(?:[a-zA-Z\\d-]*!)?[\\w\\-%#;/?:@&=+$.~*'()]+)?/;\n  // https://yaml.org/spec/1.2/spec.html#c-ns-properties(n,c)\n  var properties = '(?:' + tag.source + '(?:[ \\t]+' + anchorOrAlias.source + ')?|' + anchorOrAlias.source + '(?:[ \\t]+' + tag.source + ')?)';\n  // https://yaml.org/spec/1.2/spec.html#ns-plain(n,c)\n  // This is a simplified version that doesn't support \"#\" and multiline keys\n  // All these long scarry character classes are simplified versions of YAML's characters\n  var plainKey = /(?:[^\\s\\x00-\\x08\\x0e-\\x1f!\"#%&'*,\\-:>?@[\\]`{|}\\x7f-\\x84\\x86-\\x9f\\ud800-\\udfff\\ufffe\\uffff]|[?:-]<PLAIN>)(?:[ \\t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g, function () {\n    return /[^\\s\\x00-\\x08\\x0e-\\x1f,[\\]{}\\x7f-\\x84\\x86-\\x9f\\ud800-\\udfff\\ufffe\\uffff]/.source;\n  });\n  var string = /\"(?:[^\"\\\\\\r\\n]|\\\\.)*\"|'(?:[^'\\\\\\r\\n]|\\\\.)*'/.source;\n\n  /**\n   *\n   * @param {string} value\n   * @param {string} [flags]\n   * @returns {RegExp}\n   */\n  function createValuePattern(value, flags) {\n    flags = (flags || '').replace(/m/g, '') + 'm'; // add m flag\n    var pattern = /([:\\-,[{]\\s*(?:\\s<<prop>>[ \\t]+)?)(?:<<value>>)(?=[ \\t]*(?:$|,|\\]|\\}|(?:[\\r\\n]\\s*)?#))/.source.replace(/<<prop>>/g, function () {\n      return properties;\n    }).replace(/<<value>>/g, function () {\n      return value;\n    });\n    return RegExp(pattern, flags);\n  }\n  Prism.languages.yaml = {\n    'scalar': {\n      pattern: RegExp(/([\\-:]\\s*(?:\\s<<prop>>[ \\t]+)?[|>])[ \\t]*(?:((?:\\r?\\n|\\r)[ \\t]+)\\S[^\\r\\n]*(?:\\2[^\\r\\n]+)*)/.source.replace(/<<prop>>/g, function () {\n        return properties;\n      })),\n      lookbehind: true,\n      alias: 'string'\n    },\n    'comment': /#.*/,\n    'key': {\n      pattern: RegExp(/((?:^|[:\\-,[{\\r\\n?])[ \\t]*(?:<<prop>>[ \\t]+)?)<<key>>(?=\\s*:\\s)/.source.replace(/<<prop>>/g, function () {\n        return properties;\n      }).replace(/<<key>>/g, function () {\n        return '(?:' + plainKey + '|' + string + ')';\n      })),\n      lookbehind: true,\n      greedy: true,\n      alias: 'atrule'\n    },\n    'directive': {\n      pattern: /(^[ \\t]*)%.+/m,\n      lookbehind: true,\n      alias: 'important'\n    },\n    'datetime': {\n      pattern: createValuePattern(/\\d{4}-\\d\\d?-\\d\\d?(?:[tT]|[ \\t]+)\\d\\d?:\\d{2}:\\d{2}(?:\\.\\d*)?(?:[ \\t]*(?:Z|[-+]\\d\\d?(?::\\d{2})?))?|\\d{4}-\\d{2}-\\d{2}|\\d\\d?:\\d{2}(?::\\d{2}(?:\\.\\d*)?)?/.source),\n      lookbehind: true,\n      alias: 'number'\n    },\n    'boolean': {\n      pattern: createValuePattern(/false|true/.source, 'i'),\n      lookbehind: true,\n      alias: 'important'\n    },\n    'null': {\n      pattern: createValuePattern(/null|~/.source, 'i'),\n      lookbehind: true,\n      alias: 'important'\n    },\n    'string': {\n      pattern: createValuePattern(string),\n      lookbehind: true,\n      greedy: true\n    },\n    'number': {\n      pattern: createValuePattern(/[+-]?(?:0x[\\da-f]+|0o[0-7]+|(?:\\d+(?:\\.\\d*)?|\\.\\d+)(?:e[+-]?\\d+)?|\\.inf|\\.nan)/.source, 'i'),\n      lookbehind: true\n    },\n    'tag': tag,\n    'important': anchorOrAlias,\n    'punctuation': /---|[:[\\]{}\\-,|>?]|\\.\\.\\./\n  };\n  Prism.languages.yml = Prism.languages.yaml;\n})(Prism);\n(function (Prism) {\n  // Allow only one line break\n  var inner = /(?:\\\\.|[^\\\\\\n\\r]|(?:\\n|\\r\\n?)(?![\\r\\n]))/.source;\n\n  /**\n   * This function is intended for the creation of the bold or italic pattern.\n   *\n   * This also adds a lookbehind group to the given pattern to ensure that the pattern is not backslash-escaped.\n   *\n   * _Note:_ Keep in mind that this adds a capturing group.\n   *\n   * @param {string} pattern\n   * @returns {RegExp}\n   */\n  function createInline(pattern) {\n    pattern = pattern.replace(/<inner>/g, function () {\n      return inner;\n    });\n    return RegExp(/((?:^|[^\\\\])(?:\\\\{2})*)/.source + '(?:' + pattern + ')');\n  }\n  var tableCell = /(?:\\\\.|``(?:[^`\\r\\n]|`(?!`))+``|`[^`\\r\\n]+`|[^\\\\|\\r\\n`])+/.source;\n  var tableRow = /\\|?__(?:\\|__)+\\|?(?:(?:\\n|\\r\\n?)|(?![\\s\\S]))/.source.replace(/__/g, function () {\n    return tableCell;\n  });\n  var tableLine = /\\|?[ \\t]*:?-{3,}:?[ \\t]*(?:\\|[ \\t]*:?-{3,}:?[ \\t]*)+\\|?(?:\\n|\\r\\n?)/.source;\n  Prism.languages.markdown = Prism.languages.extend('markup', {});\n  Prism.languages.insertBefore('markdown', 'prolog', {\n    'front-matter-block': {\n      pattern: /(^(?:\\s*[\\r\\n])?)---(?!.)[\\s\\S]*?[\\r\\n]---(?!.)/,\n      lookbehind: true,\n      greedy: true,\n      inside: {\n        'punctuation': /^---|---$/,\n        'front-matter': {\n          pattern: /\\S+(?:\\s+\\S+)*/,\n          alias: ['yaml', 'language-yaml'],\n          inside: Prism.languages.yaml\n        }\n      }\n    },\n    'blockquote': {\n      // > ...\n      pattern: /^>(?:[\\t ]*>)*/m,\n      alias: 'punctuation'\n    },\n    'table': {\n      pattern: RegExp('^' + tableRow + tableLine + '(?:' + tableRow + ')*', 'm'),\n      inside: {\n        'table-data-rows': {\n          pattern: RegExp('^(' + tableRow + tableLine + ')(?:' + tableRow + ')*$'),\n          lookbehind: true,\n          inside: {\n            'table-data': {\n              pattern: RegExp(tableCell),\n              inside: Prism.languages.markdown\n            },\n            'punctuation': /\\|/\n          }\n        },\n        'table-line': {\n          pattern: RegExp('^(' + tableRow + ')' + tableLine + '$'),\n          lookbehind: true,\n          inside: {\n            'punctuation': /\\||:?-{3,}:?/\n          }\n        },\n        'table-header-row': {\n          pattern: RegExp('^' + tableRow + '$'),\n          inside: {\n            'table-header': {\n              pattern: RegExp(tableCell),\n              alias: 'important',\n              inside: Prism.languages.markdown\n            },\n            'punctuation': /\\|/\n          }\n        }\n      }\n    },\n    'code': [{\n      // Prefixed by 4 spaces or 1 tab and preceded by an empty line\n      pattern: /((?:^|\\n)[ \\t]*\\n|(?:^|\\r\\n?)[ \\t]*\\r\\n?)(?: {4}|\\t).+(?:(?:\\n|\\r\\n?)(?: {4}|\\t).+)*/,\n      lookbehind: true,\n      alias: 'keyword'\n    }, {\n      // ```optional language\n      // code block\n      // ```\n      pattern: /^```[\\s\\S]*?^```$/m,\n      greedy: true,\n      inside: {\n        'code-block': {\n          pattern: /^(```.*(?:\\n|\\r\\n?))[\\s\\S]+?(?=(?:\\n|\\r\\n?)^```$)/m,\n          lookbehind: true\n        },\n        'code-language': {\n          pattern: /^(```).+/,\n          lookbehind: true\n        },\n        'punctuation': /```/\n      }\n    }],\n    'title': [{\n      // title 1\n      // =======\n\n      // title 2\n      // -------\n      pattern: /\\S.*(?:\\n|\\r\\n?)(?:==+|--+)(?=[ \\t]*$)/m,\n      alias: 'important',\n      inside: {\n        punctuation: /==+$|--+$/\n      }\n    }, {\n      // # title 1\n      // ###### title 6\n      pattern: /(^\\s*)#.+/m,\n      lookbehind: true,\n      alias: 'important',\n      inside: {\n        punctuation: /^#+|#+$/\n      }\n    }],\n    'hr': {\n      // ***\n      // ---\n      // * * *\n      // -----------\n      pattern: /(^\\s*)([*-])(?:[\\t ]*\\2){2,}(?=\\s*$)/m,\n      lookbehind: true,\n      alias: 'punctuation'\n    },\n    'list': {\n      // * item\n      // + item\n      // - item\n      // 1. item\n      pattern: /(^\\s*)(?:[*+-]|\\d+\\.)(?=[\\t ].)/m,\n      lookbehind: true,\n      alias: 'punctuation'\n    },\n    'url-reference': {\n      // [id]: http://example.com \"Optional title\"\n      // [id]: http://example.com 'Optional title'\n      // [id]: http://example.com (Optional title)\n      // [id]: <http://example.com> \"Optional title\"\n      pattern: /!?\\[[^\\]]+\\]:[\\t ]+(?:\\S+|<(?:\\\\.|[^>\\\\])+>)(?:[\\t ]+(?:\"(?:\\\\.|[^\"\\\\])*\"|'(?:\\\\.|[^'\\\\])*'|\\((?:\\\\.|[^)\\\\])*\\)))?/,\n      inside: {\n        'variable': {\n          pattern: /^(!?\\[)[^\\]]+/,\n          lookbehind: true\n        },\n        'string': /(?:\"(?:\\\\.|[^\"\\\\])*\"|'(?:\\\\.|[^'\\\\])*'|\\((?:\\\\.|[^)\\\\])*\\))$/,\n        'punctuation': /^[\\[\\]!:]|[<>]/\n      },\n      alias: 'url'\n    },\n    'bold': {\n      // **strong**\n      // __strong__\n\n      // allow one nested instance of italic text using the same delimiter\n      pattern: createInline(/\\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\\b|\\*\\*(?:(?!\\*)<inner>|\\*(?:(?!\\*)<inner>)+\\*)+\\*\\*/.source),\n      lookbehind: true,\n      greedy: true,\n      inside: {\n        'content': {\n          pattern: /(^..)[\\s\\S]+(?=..$)/,\n          lookbehind: true,\n          inside: {} // see below\n        },\n        'punctuation': /\\*\\*|__/\n      }\n    },\n    'italic': {\n      // *em*\n      // _em_\n\n      // allow one nested instance of bold text using the same delimiter\n      pattern: createInline(/\\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\\b|\\*(?:(?!\\*)<inner>|\\*\\*(?:(?!\\*)<inner>)+\\*\\*)+\\*/.source),\n      lookbehind: true,\n      greedy: true,\n      inside: {\n        'content': {\n          pattern: /(^.)[\\s\\S]+(?=.$)/,\n          lookbehind: true,\n          inside: {} // see below\n        },\n        'punctuation': /[*_]/\n      }\n    },\n    'strike': {\n      // ~~strike through~~\n      // ~strike~\n      // eslint-disable-next-line regexp/strict\n      pattern: createInline(/(~~?)(?:(?!~)<inner>)+\\2/.source),\n      lookbehind: true,\n      greedy: true,\n      inside: {\n        'content': {\n          pattern: /(^~~?)[\\s\\S]+(?=\\1$)/,\n          lookbehind: true,\n          inside: {} // see below\n        },\n        'punctuation': /~~?/\n      }\n    },\n    'code-snippet': {\n      // `code`\n      // ``code``\n      pattern: /(^|[^\\\\`])(?:``[^`\\r\\n]+(?:`[^`\\r\\n]+)*``(?!`)|`[^`\\r\\n]+`(?!`))/,\n      lookbehind: true,\n      greedy: true,\n      alias: ['code', 'keyword']\n    },\n    'url': {\n      // [example](http://example.com \"Optional title\")\n      // [example][id]\n      // [example] [id]\n      pattern: createInline(/!?\\[(?:(?!\\])<inner>)+\\](?:\\([^\\s)]+(?:[\\t ]+\"(?:\\\\.|[^\"\\\\])*\")?\\)|[ \\t]?\\[(?:(?!\\])<inner>)+\\])/.source),\n      lookbehind: true,\n      greedy: true,\n      inside: {\n        'operator': /^!/,\n        'content': {\n          pattern: /(^\\[)[^\\]]+(?=\\])/,\n          lookbehind: true,\n          inside: {} // see below\n        },\n        'variable': {\n          pattern: /(^\\][ \\t]?\\[)[^\\]]+(?=\\]$)/,\n          lookbehind: true\n        },\n        'url': {\n          pattern: /(^\\]\\()[^\\s)]+/,\n          lookbehind: true\n        },\n        'string': {\n          pattern: /(^[ \\t]+)\"(?:\\\\.|[^\"\\\\])*\"(?=\\)$)/,\n          lookbehind: true\n        }\n      }\n    }\n  });\n  ['url', 'bold', 'italic', 'strike'].forEach(function (token) {\n    ['url', 'bold', 'italic', 'strike', 'code-snippet'].forEach(function (inside) {\n      if (token !== inside) {\n        Prism.languages.markdown[token].inside.content.inside[inside] = Prism.languages.markdown[inside];\n      }\n    });\n  });\n  Prism.hooks.add('after-tokenize', function (env) {\n    if (env.language !== 'markdown' && env.language !== 'md') {\n      return;\n    }\n    function walkTokens(tokens) {\n      if (!tokens || typeof tokens === 'string') {\n        return;\n      }\n      for (var i = 0, l = tokens.length; i < l; i++) {\n        var token = tokens[i];\n        if (token.type !== 'code') {\n          walkTokens(token.content);\n          continue;\n        }\n\n        /*\n         * Add the correct `language-xxxx` class to this code block. Keep in mind that the `code-language` token\n         * is optional. But the grammar is defined so that there is only one case we have to handle:\n         *\n         * token.content = [\n         *     <span class=\"punctuation\">```</span>,\n         *     <span class=\"code-language\">xxxx</span>,\n         *     '\\n', // exactly one new lines (\\r or \\n or \\r\\n)\n         *     <span class=\"code-block\">...</span>,\n         *     '\\n', // exactly one new lines again\n         *     <span class=\"punctuation\">```</span>\n         * ];\n         */\n\n        var codeLang = token.content[1];\n        var codeBlock = token.content[3];\n        if (codeLang && codeBlock && codeLang.type === 'code-language' && codeBlock.type === 'code-block' && typeof codeLang.content === 'string') {\n          // this might be a language that Prism does not support\n\n          // do some replacements to support C++, C#, and F#\n          var lang = codeLang.content.replace(/\\b#/g, 'sharp').replace(/\\b\\+\\+/g, 'pp');\n          // only use the first word\n          lang = (/[a-z][\\w-]*/i.exec(lang) || [''])[0].toLowerCase();\n          var alias = 'language-' + lang;\n\n          // add alias\n          if (!codeBlock.alias) {\n            codeBlock.alias = [alias];\n          } else if (typeof codeBlock.alias === 'string') {\n            codeBlock.alias = [codeBlock.alias, alias];\n          } else {\n            codeBlock.alias.push(alias);\n          }\n        }\n      }\n    }\n    walkTokens(env.tokens);\n  });\n  Prism.hooks.add('wrap', function (env) {\n    if (env.type !== 'code-block') {\n      return;\n    }\n    var codeLang = '';\n    for (var i = 0, l = env.classes.length; i < l; i++) {\n      var cls = env.classes[i];\n      var match = /language-(.+)/.exec(cls);\n      if (match) {\n        codeLang = match[1];\n        break;\n      }\n    }\n    var grammar = Prism.languages[codeLang];\n    if (!grammar) {\n      if (codeLang && codeLang !== 'none' && Prism.plugins.autoloader) {\n        var id = 'md-' + new Date().valueOf() + '-' + Math.floor(Math.random() * 1e16);\n        env.attributes['id'] = id;\n        Prism.plugins.autoloader.loadLanguages(codeLang, function () {\n          var ele = document.getElementById(id);\n          if (ele) {\n            ele.innerHTML = Prism.highlight(ele.textContent, Prism.languages[codeLang], codeLang);\n          }\n        });\n      }\n    } else {\n      env.content = Prism.highlight(textContent(env.content), grammar, codeLang);\n    }\n  });\n  var tagPattern = RegExp(Prism.languages.markup.tag.pattern.source, 'gi');\n\n  /**\n   * A list of known entity names.\n   *\n   * This will always be incomplete to save space. The current list is the one used by lowdash's unescape function.\n   *\n   * @see {@link https://github.com/lodash/lodash/blob/2da024c3b4f9947a48517639de7560457cd4ec6c/unescape.js#L2}\n   */\n  var KNOWN_ENTITY_NAMES = {\n    'amp': '&',\n    'lt': '<',\n    'gt': '>',\n    'quot': '\"'\n  };\n\n  // IE 11 doesn't support `String.fromCodePoint`\n  var fromCodePoint = String.fromCodePoint || String.fromCharCode;\n\n  /**\n   * Returns the text content of a given HTML source code string.\n   *\n   * @param {string} html\n   * @returns {string}\n   */\n  function textContent(html) {\n    // remove all tags\n    var text = html.replace(tagPattern, '');\n\n    // decode known entities\n    text = text.replace(/&(\\w{1,8}|#x?[\\da-f]{1,8});/gi, function (m, code) {\n      code = code.toLowerCase();\n      if (code[0] === '#') {\n        var value;\n        if (code[1] === 'x') {\n          value = parseInt(code.slice(2), 16);\n        } else {\n          value = Number(code.slice(1));\n        }\n        return fromCodePoint(value);\n      } else {\n        var known = KNOWN_ENTITY_NAMES[code];\n        if (known) {\n          return known;\n        }\n\n        // unable to decode\n        return m;\n      }\n    });\n    return text;\n  }\n  Prism.languages.md = Prism.languages.markdown;\n})(Prism);\nPrism.languages.objectivec = Prism.languages.extend('c', {\n  'string': {\n    pattern: /@?\"(?:\\\\(?:\\r\\n|[\\s\\S])|[^\"\\\\\\r\\n])*\"/,\n    greedy: true\n  },\n  'keyword': /\\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\\b/,\n  'operator': /-[->]?|\\+\\+?|!=?|<<?=?|>>?=?|==?|&&?|\\|\\|?|[~^%?*\\/@]/\n});\ndelete Prism.languages.objectivec['class-name'];\nPrism.languages.objc = Prism.languages.objectivec;\n(function (Prism) {\n  var brackets = /(?:\\((?:[^()\\\\]|\\\\[\\s\\S])*\\)|\\{(?:[^{}\\\\]|\\\\[\\s\\S])*\\}|\\[(?:[^[\\]\\\\]|\\\\[\\s\\S])*\\]|<(?:[^<>\\\\]|\\\\[\\s\\S])*>)/.source;\n  Prism.languages.perl = {\n    'comment': [{\n      // POD\n      pattern: /(^\\s*)=\\w[\\s\\S]*?=cut.*/m,\n      lookbehind: true,\n      greedy: true\n    }, {\n      pattern: /(^|[^\\\\$])#.*/,\n      lookbehind: true,\n      greedy: true\n    }],\n    // TODO Could be nice to handle Heredoc too.\n    'string': [{\n      pattern: RegExp(/\\b(?:q|qq|qw|qx)(?![a-zA-Z0-9])\\s*/.source + '(?:' + [\n      // q/.../\n      /([^a-zA-Z0-9\\s{(\\[<])(?:(?!\\1)[^\\\\]|\\\\[\\s\\S])*\\1/.source,\n      // q a...a\n      // eslint-disable-next-line regexp/strict\n      /([a-zA-Z0-9])(?:(?!\\2)[^\\\\]|\\\\[\\s\\S])*\\2/.source,\n      // q(...)\n      // q{...}\n      // q[...]\n      // q<...>\n      brackets].join('|') + ')'),\n      greedy: true\n    },\n    // \"...\", `...`\n    {\n      pattern: /(\"|`)(?:(?!\\1)[^\\\\]|\\\\[\\s\\S])*\\1/,\n      greedy: true\n    },\n    // '...'\n    // FIXME Multi-line single-quoted strings are not supported as they would break variables containing '\n    {\n      pattern: /'(?:[^'\\\\\\r\\n]|\\\\.)*'/,\n      greedy: true\n    }],\n    'regex': [{\n      pattern: RegExp(/\\b(?:m|qr)(?![a-zA-Z0-9])\\s*/.source + '(?:' + [\n      // m/.../\n      /([^a-zA-Z0-9\\s{(\\[<])(?:(?!\\1)[^\\\\]|\\\\[\\s\\S])*\\1/.source,\n      // m a...a\n      // eslint-disable-next-line regexp/strict\n      /([a-zA-Z0-9])(?:(?!\\2)[^\\\\]|\\\\[\\s\\S])*\\2/.source,\n      // m(...)\n      // m{...}\n      // m[...]\n      // m<...>\n      brackets].join('|') + ')' + /[msixpodualngc]*/.source),\n      greedy: true\n    },\n    // The lookbehinds prevent -s from breaking\n    {\n      pattern: RegExp(/(^|[^-])\\b(?:s|tr|y)(?![a-zA-Z0-9])\\s*/.source + '(?:' + [\n      // s/.../.../\n      // eslint-disable-next-line regexp/strict\n      /([^a-zA-Z0-9\\s{(\\[<])(?:(?!\\2)[^\\\\]|\\\\[\\s\\S])*\\2(?:(?!\\2)[^\\\\]|\\\\[\\s\\S])*\\2/.source,\n      // s a...a...a\n      // eslint-disable-next-line regexp/strict\n      /([a-zA-Z0-9])(?:(?!\\3)[^\\\\]|\\\\[\\s\\S])*\\3(?:(?!\\3)[^\\\\]|\\\\[\\s\\S])*\\3/.source,\n      // s(...)(...)\n      // s{...}{...}\n      // s[...][...]\n      // s<...><...>\n      // s(...)[...]\n      brackets + /\\s*/.source + brackets].join('|') + ')' + /[msixpodualngcer]*/.source),\n      lookbehind: true,\n      greedy: true\n    },\n    // /.../\n    // The look-ahead tries to prevent two divisions on\n    // the same line from being highlighted as regex.\n    // This does not support multi-line regex.\n    {\n      pattern: /\\/(?:[^\\/\\\\\\r\\n]|\\\\.)*\\/[msixpodualngc]*(?=\\s*(?:$|[\\r\\n,.;})&|\\-+*~<>!?^]|(?:and|cmp|eq|ge|gt|le|lt|ne|not|or|x|xor)\\b))/,\n      greedy: true\n    }],\n    // FIXME Not sure about the handling of ::, ', and #\n    'variable': [\n    // ${^POSTMATCH}\n    /[&*$@%]\\{\\^[A-Z]+\\}/,\n    // $^V\n    /[&*$@%]\\^[A-Z_]/,\n    // ${...}\n    /[&*$@%]#?(?=\\{)/,\n    // $foo\n    /[&*$@%]#?(?:(?:::)*'?(?!\\d)[\\w$]+(?![\\w$]))+(?:::)*/,\n    // $1\n    /[&*$@%]\\d+/,\n    // $_, @_, %!\n    // The negative lookahead prevents from breaking the %= operator\n    /(?!%=)[$@%][!\"#$%&'()*+,\\-.\\/:;<=>?@[\\\\\\]^_`{|}~]/],\n    'filehandle': {\n      // <>, <FOO>, _\n      pattern: /<(?![<=])\\S*?>|\\b_\\b/,\n      alias: 'symbol'\n    },\n    'v-string': {\n      // v1.2, 1.2.3\n      pattern: /v\\d+(?:\\.\\d+)*|\\d+(?:\\.\\d+){2,}/,\n      alias: 'string'\n    },\n    'function': {\n      pattern: /(\\bsub[ \\t]+)\\w+/,\n      lookbehind: true\n    },\n    'keyword': /\\b(?:any|break|continue|default|delete|die|do|else|elsif|eval|for|foreach|given|goto|if|last|local|my|next|our|package|print|redo|require|return|say|state|sub|switch|undef|unless|until|use|when|while)\\b/,\n    'number': /\\b(?:0x[\\dA-Fa-f](?:_?[\\dA-Fa-f])*|0b[01](?:_?[01])*|(?:(?:\\d(?:_?\\d)*)?\\.)?\\d(?:_?\\d)*(?:[Ee][+-]?\\d+)?)\\b/,\n    'operator': /-[rwxoRWXOezsfdlpSbctugkTBMAC]\\b|\\+[+=]?|-[-=>]?|\\*\\*?=?|\\/\\/?=?|=[=~>]?|~[~=]?|\\|\\|?=?|&&?=?|<(?:=>?|<=?)?|>>?=?|![~=]?|[%^]=?|\\.(?:=|\\.\\.?)?|[\\\\?]|\\bx(?:=|\\b)|\\b(?:and|cmp|eq|ge|gt|le|lt|ne|not|or|xor)\\b/,\n    'punctuation': /[{}[\\];(),:]/\n  };\n})(Prism);\n(function (Prism) {\n  /**\n   * Returns the placeholder for the given language id and index.\n   *\n   * @param {string} language\n   * @param {string|number} index\n   * @returns {string}\n   */\n  function getPlaceholder(language, index) {\n    return '___' + language.toUpperCase() + index + '___';\n  }\n  Object.defineProperties(Prism.languages['markup-templating'] = {}, {\n    buildPlaceholders: {\n      /**\n       * Tokenize all inline templating expressions matching `placeholderPattern`.\n       *\n       * If `replaceFilter` is provided, only matches of `placeholderPattern` for which `replaceFilter` returns\n       * `true` will be replaced.\n       *\n       * @param {object} env The environment of the `before-tokenize` hook.\n       * @param {string} language The language id.\n       * @param {RegExp} placeholderPattern The matches of this pattern will be replaced by placeholders.\n       * @param {(match: string) => boolean} [replaceFilter]\n       */\n      value: function (env, language, placeholderPattern, replaceFilter) {\n        if (env.language !== language) {\n          return;\n        }\n        var tokenStack = env.tokenStack = [];\n        env.code = env.code.replace(placeholderPattern, function (match) {\n          if (typeof replaceFilter === 'function' && !replaceFilter(match)) {\n            return match;\n          }\n          var i = tokenStack.length;\n          var placeholder;\n\n          // Check for existing strings\n          while (env.code.indexOf(placeholder = getPlaceholder(language, i)) !== -1) {\n            ++i;\n          }\n\n          // Create a sparse array\n          tokenStack[i] = match;\n          return placeholder;\n        });\n\n        // Switch the grammar to markup\n        env.grammar = Prism.languages.markup;\n      }\n    },\n    tokenizePlaceholders: {\n      /**\n       * Replace placeholders with proper tokens after tokenizing.\n       *\n       * @param {object} env The environment of the `after-tokenize` hook.\n       * @param {string} language The language id.\n       */\n      value: function (env, language) {\n        if (env.language !== language || !env.tokenStack) {\n          return;\n        }\n\n        // Switch the grammar back\n        env.grammar = Prism.languages[language];\n        var j = 0;\n        var keys = Object.keys(env.tokenStack);\n        function walkTokens(tokens) {\n          for (var i = 0; i < tokens.length; i++) {\n            // all placeholders are replaced already\n            if (j >= keys.length) {\n              break;\n            }\n            var token = tokens[i];\n            if (typeof token === 'string' || token.content && typeof token.content === 'string') {\n              var k = keys[j];\n              var t = env.tokenStack[k];\n              var s = typeof token === 'string' ? token : token.content;\n              var placeholder = getPlaceholder(language, k);\n              var index = s.indexOf(placeholder);\n              if (index > -1) {\n                ++j;\n                var before = s.substring(0, index);\n                var middle = new Prism.Token(language, Prism.tokenize(t, env.grammar), 'language-' + language, t);\n                var after = s.substring(index + placeholder.length);\n                var replacement = [];\n                if (before) {\n                  replacement.push.apply(replacement, walkTokens([before]));\n                }\n                replacement.push(middle);\n                if (after) {\n                  replacement.push.apply(replacement, walkTokens([after]));\n                }\n                if (typeof token === 'string') {\n                  tokens.splice.apply(tokens, [i, 1].concat(replacement));\n                } else {\n                  token.content = replacement;\n                }\n              }\n            } else if (token.content /* && typeof token.content !== 'string' */) {\n              walkTokens(token.content);\n            }\n          }\n          return tokens;\n        }\n        walkTokens(env.tokens);\n      }\n    }\n  });\n})(Prism);\n\n/**\n * Original by Aaron Harun: http://aahacreative.com/2012/07/31/php-syntax-highlighting-prism/\n * Modified by Miles Johnson: http://milesj.me\n * Rewritten by Tom Pavelec\n *\n * Supports PHP 5.3 - 8.0\n */\n(function (Prism) {\n  var comment = /\\/\\*[\\s\\S]*?\\*\\/|\\/\\/.*|#(?!\\[).*/;\n  var constant = [{\n    pattern: /\\b(?:false|true)\\b/i,\n    alias: 'boolean'\n  }, {\n    pattern: /(::\\s*)\\b[a-z_]\\w*\\b(?!\\s*\\()/i,\n    greedy: true,\n    lookbehind: true\n  }, {\n    pattern: /(\\b(?:case|const)\\s+)\\b[a-z_]\\w*(?=\\s*[;=])/i,\n    greedy: true,\n    lookbehind: true\n  }, /\\b(?:null)\\b/i, /\\b[A-Z_][A-Z0-9_]*\\b(?!\\s*\\()/];\n  var number = /\\b0b[01]+(?:_[01]+)*\\b|\\b0o[0-7]+(?:_[0-7]+)*\\b|\\b0x[\\da-f]+(?:_[\\da-f]+)*\\b|(?:\\b\\d+(?:_\\d+)*\\.?(?:\\d+(?:_\\d+)*)?|\\B\\.\\d+)(?:e[+-]?\\d+)?/i;\n  var operator = /<?=>|\\?\\?=?|\\.{3}|\\??->|[!=]=?=?|::|\\*\\*=?|--|\\+\\+|&&|\\|\\||<<|>>|[?~]|[/^|%*&<>.+-]=?/;\n  var punctuation = /[{}\\[\\](),:;]/;\n  Prism.languages.php = {\n    'delimiter': {\n      pattern: /\\?>$|^<\\?(?:php(?=\\s)|=)?/i,\n      alias: 'important'\n    },\n    'comment': comment,\n    'variable': /\\$+(?:\\w+\\b|(?=\\{))/,\n    'package': {\n      pattern: /(namespace\\s+|use\\s+(?:function\\s+)?)(?:\\\\?\\b[a-z_]\\w*)+\\b(?!\\\\)/i,\n      lookbehind: true,\n      inside: {\n        'punctuation': /\\\\/\n      }\n    },\n    'class-name-definition': {\n      pattern: /(\\b(?:class|enum|interface|trait)\\s+)\\b[a-z_]\\w*(?!\\\\)\\b/i,\n      lookbehind: true,\n      alias: 'class-name'\n    },\n    'function-definition': {\n      pattern: /(\\bfunction\\s+)[a-z_]\\w*(?=\\s*\\()/i,\n      lookbehind: true,\n      alias: 'function'\n    },\n    'keyword': [{\n      pattern: /(\\(\\s*)\\b(?:array|bool|boolean|float|int|integer|object|string)\\b(?=\\s*\\))/i,\n      alias: 'type-casting',\n      greedy: true,\n      lookbehind: true\n    }, {\n      pattern: /([(,?]\\s*)\\b(?:array(?!\\s*\\()|bool|callable|(?:false|null)(?=\\s*\\|)|float|int|iterable|mixed|object|self|static|string)\\b(?=\\s*\\$)/i,\n      alias: 'type-hint',\n      greedy: true,\n      lookbehind: true\n    }, {\n      pattern: /(\\)\\s*:\\s*(?:\\?\\s*)?)\\b(?:array(?!\\s*\\()|bool|callable|(?:false|null)(?=\\s*\\|)|float|int|iterable|mixed|never|object|self|static|string|void)\\b/i,\n      alias: 'return-type',\n      greedy: true,\n      lookbehind: true\n    }, {\n      pattern: /\\b(?:array(?!\\s*\\()|bool|float|int|iterable|mixed|object|string|void)\\b/i,\n      alias: 'type-declaration',\n      greedy: true\n    }, {\n      pattern: /(\\|\\s*)(?:false|null)\\b|\\b(?:false|null)(?=\\s*\\|)/i,\n      alias: 'type-declaration',\n      greedy: true,\n      lookbehind: true\n    }, {\n      pattern: /\\b(?:parent|self|static)(?=\\s*::)/i,\n      alias: 'static-context',\n      greedy: true\n    }, {\n      // yield from\n      pattern: /(\\byield\\s+)from\\b/i,\n      lookbehind: true\n    },\n    // `class` is always a keyword unlike other keywords\n    /\\bclass\\b/i, {\n      // https://www.php.net/manual/en/reserved.keywords.php\n      //\n      // keywords cannot be preceded by \"->\"\n      // the complex lookbehind means `(?<!(?:->|::)\\s*)`\n      pattern: /((?:^|[^\\s>:]|(?:^|[^-])>|(?:^|[^:]):)\\s*)\\b(?:abstract|and|array|as|break|callable|case|catch|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|enum|eval|exit|extends|final|finally|fn|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|match|namespace|never|new|or|parent|print|private|protected|public|readonly|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield|__halt_compiler)\\b/i,\n      lookbehind: true\n    }],\n    'argument-name': {\n      pattern: /([(,]\\s*)\\b[a-z_]\\w*(?=\\s*:(?!:))/i,\n      lookbehind: true\n    },\n    'class-name': [{\n      pattern: /(\\b(?:extends|implements|instanceof|new(?!\\s+self|\\s+static))\\s+|\\bcatch\\s*\\()\\b[a-z_]\\w*(?!\\\\)\\b/i,\n      greedy: true,\n      lookbehind: true\n    }, {\n      pattern: /(\\|\\s*)\\b[a-z_]\\w*(?!\\\\)\\b/i,\n      greedy: true,\n      lookbehind: true\n    }, {\n      pattern: /\\b[a-z_]\\w*(?!\\\\)\\b(?=\\s*\\|)/i,\n      greedy: true\n    }, {\n      pattern: /(\\|\\s*)(?:\\\\?\\b[a-z_]\\w*)+\\b/i,\n      alias: 'class-name-fully-qualified',\n      greedy: true,\n      lookbehind: true,\n      inside: {\n        'punctuation': /\\\\/\n      }\n    }, {\n      pattern: /(?:\\\\?\\b[a-z_]\\w*)+\\b(?=\\s*\\|)/i,\n      alias: 'class-name-fully-qualified',\n      greedy: true,\n      inside: {\n        'punctuation': /\\\\/\n      }\n    }, {\n      pattern: /(\\b(?:extends|implements|instanceof|new(?!\\s+self\\b|\\s+static\\b))\\s+|\\bcatch\\s*\\()(?:\\\\?\\b[a-z_]\\w*)+\\b(?!\\\\)/i,\n      alias: 'class-name-fully-qualified',\n      greedy: true,\n      lookbehind: true,\n      inside: {\n        'punctuation': /\\\\/\n      }\n    }, {\n      pattern: /\\b[a-z_]\\w*(?=\\s*\\$)/i,\n      alias: 'type-declaration',\n      greedy: true\n    }, {\n      pattern: /(?:\\\\?\\b[a-z_]\\w*)+(?=\\s*\\$)/i,\n      alias: ['class-name-fully-qualified', 'type-declaration'],\n      greedy: true,\n      inside: {\n        'punctuation': /\\\\/\n      }\n    }, {\n      pattern: /\\b[a-z_]\\w*(?=\\s*::)/i,\n      alias: 'static-context',\n      greedy: true\n    }, {\n      pattern: /(?:\\\\?\\b[a-z_]\\w*)+(?=\\s*::)/i,\n      alias: ['class-name-fully-qualified', 'static-context'],\n      greedy: true,\n      inside: {\n        'punctuation': /\\\\/\n      }\n    }, {\n      pattern: /([(,?]\\s*)[a-z_]\\w*(?=\\s*\\$)/i,\n      alias: 'type-hint',\n      greedy: true,\n      lookbehind: true\n    }, {\n      pattern: /([(,?]\\s*)(?:\\\\?\\b[a-z_]\\w*)+(?=\\s*\\$)/i,\n      alias: ['class-name-fully-qualified', 'type-hint'],\n      greedy: true,\n      lookbehind: true,\n      inside: {\n        'punctuation': /\\\\/\n      }\n    }, {\n      pattern: /(\\)\\s*:\\s*(?:\\?\\s*)?)\\b[a-z_]\\w*(?!\\\\)\\b/i,\n      alias: 'return-type',\n      greedy: true,\n      lookbehind: true\n    }, {\n      pattern: /(\\)\\s*:\\s*(?:\\?\\s*)?)(?:\\\\?\\b[a-z_]\\w*)+\\b(?!\\\\)/i,\n      alias: ['class-name-fully-qualified', 'return-type'],\n      greedy: true,\n      lookbehind: true,\n      inside: {\n        'punctuation': /\\\\/\n      }\n    }],\n    'constant': constant,\n    'function': {\n      pattern: /(^|[^\\\\\\w])\\\\?[a-z_](?:[\\w\\\\]*\\w)?(?=\\s*\\()/i,\n      lookbehind: true,\n      inside: {\n        'punctuation': /\\\\/\n      }\n    },\n    'property': {\n      pattern: /(->\\s*)\\w+/,\n      lookbehind: true\n    },\n    'number': number,\n    'operator': operator,\n    'punctuation': punctuation\n  };\n  var string_interpolation = {\n    pattern: /\\{\\$(?:\\{(?:\\{[^{}]+\\}|[^{}]+)\\}|[^{}])+\\}|(^|[^\\\\{])\\$+(?:\\w+(?:\\[[^\\r\\n\\[\\]]+\\]|->\\w+)?)/,\n    lookbehind: true,\n    inside: Prism.languages.php\n  };\n  var string = [{\n    pattern: /<<<'([^']+)'[\\r\\n](?:.*[\\r\\n])*?\\1;/,\n    alias: 'nowdoc-string',\n    greedy: true,\n    inside: {\n      'delimiter': {\n        pattern: /^<<<'[^']+'|[a-z_]\\w*;$/i,\n        alias: 'symbol',\n        inside: {\n          'punctuation': /^<<<'?|[';]$/\n        }\n      }\n    }\n  }, {\n    pattern: /<<<(?:\"([^\"]+)\"[\\r\\n](?:.*[\\r\\n])*?\\1;|([a-z_]\\w*)[\\r\\n](?:.*[\\r\\n])*?\\2;)/i,\n    alias: 'heredoc-string',\n    greedy: true,\n    inside: {\n      'delimiter': {\n        pattern: /^<<<(?:\"[^\"]+\"|[a-z_]\\w*)|[a-z_]\\w*;$/i,\n        alias: 'symbol',\n        inside: {\n          'punctuation': /^<<<\"?|[\";]$/\n        }\n      },\n      'interpolation': string_interpolation\n    }\n  }, {\n    pattern: /`(?:\\\\[\\s\\S]|[^\\\\`])*`/,\n    alias: 'backtick-quoted-string',\n    greedy: true\n  }, {\n    pattern: /'(?:\\\\[\\s\\S]|[^\\\\'])*'/,\n    alias: 'single-quoted-string',\n    greedy: true\n  }, {\n    pattern: /\"(?:\\\\[\\s\\S]|[^\\\\\"])*\"/,\n    alias: 'double-quoted-string',\n    greedy: true,\n    inside: {\n      'interpolation': string_interpolation\n    }\n  }];\n  Prism.languages.insertBefore('php', 'variable', {\n    'string': string,\n    'attribute': {\n      pattern: /#\\[(?:[^\"'\\/#]|\\/(?![*/])|\\/\\/.*$|#(?!\\[).*$|\\/\\*(?:[^*]|\\*(?!\\/))*\\*\\/|\"(?:\\\\[\\s\\S]|[^\\\\\"])*\"|'(?:\\\\[\\s\\S]|[^\\\\'])*')+\\](?=\\s*[a-z$#])/im,\n      greedy: true,\n      inside: {\n        'attribute-content': {\n          pattern: /^(#\\[)[\\s\\S]+(?=\\]$)/,\n          lookbehind: true,\n          // inside can appear subset of php\n          inside: {\n            'comment': comment,\n            'string': string,\n            'attribute-class-name': [{\n              pattern: /([^:]|^)\\b[a-z_]\\w*(?!\\\\)\\b/i,\n              alias: 'class-name',\n              greedy: true,\n              lookbehind: true\n            }, {\n              pattern: /([^:]|^)(?:\\\\?\\b[a-z_]\\w*)+/i,\n              alias: ['class-name', 'class-name-fully-qualified'],\n              greedy: true,\n              lookbehind: true,\n              inside: {\n                'punctuation': /\\\\/\n              }\n            }],\n            'constant': constant,\n            'number': number,\n            'operator': operator,\n            'punctuation': punctuation\n          }\n        },\n        'delimiter': {\n          pattern: /^#\\[|\\]$/,\n          alias: 'punctuation'\n        }\n      }\n    }\n  });\n  Prism.hooks.add('before-tokenize', function (env) {\n    if (!/<\\?/.test(env.code)) {\n      return;\n    }\n    var phpPattern = /<\\?(?:[^\"'/#]|\\/(?![*/])|(\"|')(?:\\\\[\\s\\S]|(?!\\1)[^\\\\])*\\1|(?:\\/\\/|#(?!\\[))(?:[^?\\n\\r]|\\?(?!>))*(?=$|\\?>|[\\r\\n])|#\\[|\\/\\*(?:[^*]|\\*(?!\\/))*(?:\\*\\/|$))*?(?:\\?>|$)/g;\n    Prism.languages['markup-templating'].buildPlaceholders(env, 'php', phpPattern);\n  });\n  Prism.hooks.add('after-tokenize', function (env) {\n    Prism.languages['markup-templating'].tokenizePlaceholders(env, 'php');\n  });\n})(Prism);\nPrism.languages.python = {\n  'comment': {\n    pattern: /(^|[^\\\\])#.*/,\n    lookbehind: true,\n    greedy: true\n  },\n  'string-interpolation': {\n    pattern: /(?:f|fr|rf)(?:(\"\"\"|''')[\\s\\S]*?\\1|(\"|')(?:\\\\.|(?!\\2)[^\\\\\\r\\n])*\\2)/i,\n    greedy: true,\n    inside: {\n      'interpolation': {\n        // \"{\" <expression> <optional \"!s\", \"!r\", or \"!a\"> <optional \":\" format specifier> \"}\"\n        pattern: /((?:^|[^{])(?:\\{\\{)*)\\{(?!\\{)(?:[^{}]|\\{(?!\\{)(?:[^{}]|\\{(?!\\{)(?:[^{}])+\\})+\\})+\\}/,\n        lookbehind: true,\n        inside: {\n          'format-spec': {\n            pattern: /(:)[^:(){}]+(?=\\}$)/,\n            lookbehind: true\n          },\n          'conversion-option': {\n            pattern: /![sra](?=[:}]$)/,\n            alias: 'punctuation'\n          },\n          rest: null\n        }\n      },\n      'string': /[\\s\\S]+/\n    }\n  },\n  'triple-quoted-string': {\n    pattern: /(?:[rub]|br|rb)?(\"\"\"|''')[\\s\\S]*?\\1/i,\n    greedy: true,\n    alias: 'string'\n  },\n  'string': {\n    pattern: /(?:[rub]|br|rb)?(\"|')(?:\\\\.|(?!\\1)[^\\\\\\r\\n])*\\1/i,\n    greedy: true\n  },\n  'function': {\n    pattern: /((?:^|\\s)def[ \\t]+)[a-zA-Z_]\\w*(?=\\s*\\()/g,\n    lookbehind: true\n  },\n  'class-name': {\n    pattern: /(\\bclass\\s+)\\w+/i,\n    lookbehind: true\n  },\n  'decorator': {\n    pattern: /(^[\\t ]*)@\\w+(?:\\.\\w+)*/m,\n    lookbehind: true,\n    alias: ['annotation', 'punctuation'],\n    inside: {\n      'punctuation': /\\./\n    }\n  },\n  'keyword': /\\b(?:_(?=\\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\\b/,\n  'builtin': /\\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\\b/,\n  'boolean': /\\b(?:False|None|True)\\b/,\n  'number': /\\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\\b|(?:\\b\\d+(?:_\\d+)*(?:\\.(?:\\d+(?:_\\d+)*)?)?|\\B\\.\\d+(?:_\\d+)*)(?:e[+-]?\\d+(?:_\\d+)*)?j?(?!\\w)/i,\n  'operator': /[-+%=]=?|!=|:=|\\*\\*?=?|\\/\\/?=?|<[<=>]?|>[=>]?|[&|^~]/,\n  'punctuation': /[{}[\\];(),.:]/\n};\nPrism.languages.python['string-interpolation'].inside['interpolation'].inside.rest = Prism.languages.python;\nPrism.languages.py = Prism.languages.python;\nPrism.languages.r = {\n  'comment': /#.*/,\n  'string': {\n    pattern: /(['\"])(?:\\\\.|(?!\\1)[^\\\\\\r\\n])*\\1/,\n    greedy: true\n  },\n  'percent-operator': {\n    // Includes user-defined operators\n    // and %%, %*%, %/%, %in%, %o%, %x%\n    pattern: /%[^%\\s]*%/,\n    alias: 'operator'\n  },\n  'boolean': /\\b(?:FALSE|TRUE)\\b/,\n  'ellipsis': /\\.\\.(?:\\.|\\d+)/,\n  'number': [/\\b(?:Inf|NaN)\\b/, /(?:\\b0x[\\dA-Fa-f]+(?:\\.\\d*)?|\\b\\d+(?:\\.\\d*)?|\\B\\.\\d+)(?:[EePp][+-]?\\d+)?[iL]?/],\n  'keyword': /\\b(?:NA|NA_character_|NA_complex_|NA_integer_|NA_real_|NULL|break|else|for|function|if|in|next|repeat|while)\\b/,\n  'operator': /->?>?|<(?:=|<?-)?|[>=!]=?|::?|&&?|\\|\\|?|[+*\\/^$@~]/,\n  'punctuation': /[(){}\\[\\],;]/\n};\n\n/**\n * Original by Samuel Flores\n *\n * Adds the following new token classes:\n *     constant, builtin, variable, symbol, regex\n */\n(function (Prism) {\n  Prism.languages.ruby = Prism.languages.extend('clike', {\n    'comment': {\n      pattern: /#.*|^=begin\\s[\\s\\S]*?^=end/m,\n      greedy: true\n    },\n    'class-name': {\n      pattern: /(\\b(?:class|module)\\s+|\\bcatch\\s+\\()[\\w.\\\\]+|\\b[A-Z_]\\w*(?=\\s*\\.\\s*new\\b)/,\n      lookbehind: true,\n      inside: {\n        'punctuation': /[.\\\\]/\n      }\n    },\n    'keyword': /\\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\\b/,\n    'operator': /\\.{2,3}|&\\.|===|<?=>|[!=]?~|(?:&&|\\|\\||<<|>>|\\*\\*|[+\\-*/%<>!^&|=])=?|[?:]/,\n    'punctuation': /[(){}[\\].,;]/\n  });\n  Prism.languages.insertBefore('ruby', 'operator', {\n    'double-colon': {\n      pattern: /::/,\n      alias: 'punctuation'\n    }\n  });\n  var interpolation = {\n    pattern: /((?:^|[^\\\\])(?:\\\\{2})*)#\\{(?:[^{}]|\\{[^{}]*\\})*\\}/,\n    lookbehind: true,\n    inside: {\n      'content': {\n        pattern: /^(#\\{)[\\s\\S]+(?=\\}$)/,\n        lookbehind: true,\n        inside: Prism.languages.ruby\n      },\n      'delimiter': {\n        pattern: /^#\\{|\\}$/,\n        alias: 'punctuation'\n      }\n    }\n  };\n  delete Prism.languages.ruby.function;\n  var percentExpression = '(?:' + [/([^a-zA-Z0-9\\s{(\\[<=])(?:(?!\\1)[^\\\\]|\\\\[\\s\\S])*\\1/.source, /\\((?:[^()\\\\]|\\\\[\\s\\S]|\\((?:[^()\\\\]|\\\\[\\s\\S])*\\))*\\)/.source, /\\{(?:[^{}\\\\]|\\\\[\\s\\S]|\\{(?:[^{}\\\\]|\\\\[\\s\\S])*\\})*\\}/.source, /\\[(?:[^\\[\\]\\\\]|\\\\[\\s\\S]|\\[(?:[^\\[\\]\\\\]|\\\\[\\s\\S])*\\])*\\]/.source, /<(?:[^<>\\\\]|\\\\[\\s\\S]|<(?:[^<>\\\\]|\\\\[\\s\\S])*>)*>/.source].join('|') + ')';\n  var symbolName = /(?:\"(?:\\\\.|[^\"\\\\\\r\\n])*\"|(?:\\b[a-zA-Z_]\\w*|[^\\s\\0-\\x7F]+)[?!]?|\\$.)/.source;\n  Prism.languages.insertBefore('ruby', 'keyword', {\n    'regex-literal': [{\n      pattern: RegExp(/%r/.source + percentExpression + /[egimnosux]{0,6}/.source),\n      greedy: true,\n      inside: {\n        'interpolation': interpolation,\n        'regex': /[\\s\\S]+/\n      }\n    }, {\n      pattern: /(^|[^/])\\/(?!\\/)(?:\\[[^\\r\\n\\]]+\\]|\\\\.|[^[/\\\\\\r\\n])+\\/[egimnosux]{0,6}(?=\\s*(?:$|[\\r\\n,.;})#]))/,\n      lookbehind: true,\n      greedy: true,\n      inside: {\n        'interpolation': interpolation,\n        'regex': /[\\s\\S]+/\n      }\n    }],\n    'variable': /[@$]+[a-zA-Z_]\\w*(?:[?!]|\\b)/,\n    'symbol': [{\n      pattern: RegExp(/(^|[^:]):/.source + symbolName),\n      lookbehind: true,\n      greedy: true\n    }, {\n      pattern: RegExp(/([\\r\\n{(,][ \\t]*)/.source + symbolName + /(?=:(?!:))/.source),\n      lookbehind: true,\n      greedy: true\n    }],\n    'method-definition': {\n      pattern: /(\\bdef\\s+)\\w+(?:\\s*\\.\\s*\\w+)?/,\n      lookbehind: true,\n      inside: {\n        'function': /\\b\\w+$/,\n        'keyword': /^self\\b/,\n        'class-name': /^\\w+/,\n        'punctuation': /\\./\n      }\n    }\n  });\n  Prism.languages.insertBefore('ruby', 'string', {\n    'string-literal': [{\n      pattern: RegExp(/%[qQiIwWs]?/.source + percentExpression),\n      greedy: true,\n      inside: {\n        'interpolation': interpolation,\n        'string': /[\\s\\S]+/\n      }\n    }, {\n      pattern: /(\"|')(?:#\\{[^}]+\\}|#(?!\\{)|\\\\(?:\\r\\n|[\\s\\S])|(?!\\1)[^\\\\#\\r\\n])*\\1/,\n      greedy: true,\n      inside: {\n        'interpolation': interpolation,\n        'string': /[\\s\\S]+/\n      }\n    }, {\n      pattern: /<<[-~]?([a-z_]\\w*)[\\r\\n](?:.*[\\r\\n])*?[\\t ]*\\1/i,\n      alias: 'heredoc-string',\n      greedy: true,\n      inside: {\n        'delimiter': {\n          pattern: /^<<[-~]?[a-z_]\\w*|\\b[a-z_]\\w*$/i,\n          inside: {\n            'symbol': /\\b\\w+/,\n            'punctuation': /^<<[-~]?/\n          }\n        },\n        'interpolation': interpolation,\n        'string': /[\\s\\S]+/\n      }\n    }, {\n      pattern: /<<[-~]?'([a-z_]\\w*)'[\\r\\n](?:.*[\\r\\n])*?[\\t ]*\\1/i,\n      alias: 'heredoc-string',\n      greedy: true,\n      inside: {\n        'delimiter': {\n          pattern: /^<<[-~]?'[a-z_]\\w*'|\\b[a-z_]\\w*$/i,\n          inside: {\n            'symbol': /\\b\\w+/,\n            'punctuation': /^<<[-~]?'|'$/\n          }\n        },\n        'string': /[\\s\\S]+/\n      }\n    }],\n    'command-literal': [{\n      pattern: RegExp(/%x/.source + percentExpression),\n      greedy: true,\n      inside: {\n        'interpolation': interpolation,\n        'command': {\n          pattern: /[\\s\\S]+/,\n          alias: 'string'\n        }\n      }\n    }, {\n      pattern: /`(?:#\\{[^}]+\\}|#(?!\\{)|\\\\(?:\\r\\n|[\\s\\S])|[^\\\\`#\\r\\n])*`/,\n      greedy: true,\n      inside: {\n        'interpolation': interpolation,\n        'command': {\n          pattern: /[\\s\\S]+/,\n          alias: 'string'\n        }\n      }\n    }]\n  });\n  delete Prism.languages.ruby.string;\n  Prism.languages.insertBefore('ruby', 'number', {\n    'builtin': /\\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\\b/,\n    'constant': /\\b[A-Z][A-Z0-9_]*(?:[?!]|\\b)/\n  });\n  Prism.languages.rb = Prism.languages.ruby;\n})(Prism);\n(function (Prism) {\n  var multilineComment = /\\/\\*(?:[^*/]|\\*(?!\\/)|\\/(?!\\*)|<self>)*\\*\\//.source;\n  for (var i = 0; i < 2; i++) {\n    // support 4 levels of nested comments\n    multilineComment = multilineComment.replace(/<self>/g, function () {\n      return multilineComment;\n    });\n  }\n  multilineComment = multilineComment.replace(/<self>/g, function () {\n    return /[^\\s\\S]/.source;\n  });\n  Prism.languages.rust = {\n    'comment': [{\n      pattern: RegExp(/(^|[^\\\\])/.source + multilineComment),\n      lookbehind: true,\n      greedy: true\n    }, {\n      pattern: /(^|[^\\\\:])\\/\\/.*/,\n      lookbehind: true,\n      greedy: true\n    }],\n    'string': {\n      pattern: /b?\"(?:\\\\[\\s\\S]|[^\\\\\"])*\"|b?r(#*)\"(?:[^\"]|\"(?!\\1))*\"\\1/,\n      greedy: true\n    },\n    'char': {\n      pattern: /b?'(?:\\\\(?:x[0-7][\\da-fA-F]|u\\{(?:[\\da-fA-F]_*){1,6}\\}|.)|[^\\\\\\r\\n\\t'])'/,\n      greedy: true\n    },\n    'attribute': {\n      pattern: /#!?\\[(?:[^\\[\\]\"]|\"(?:\\\\[\\s\\S]|[^\\\\\"])*\")*\\]/,\n      greedy: true,\n      alias: 'attr-name',\n      inside: {\n        'string': null // see below\n      }\n    },\n    // Closure params should not be confused with bitwise OR |\n    'closure-params': {\n      pattern: /([=(,:]\\s*|\\bmove\\s*)\\|[^|]*\\||\\|[^|]*\\|(?=\\s*(?:\\{|->))/,\n      lookbehind: true,\n      greedy: true,\n      inside: {\n        'closure-punctuation': {\n          pattern: /^\\||\\|$/,\n          alias: 'punctuation'\n        },\n        rest: null // see below\n      }\n    },\n    'lifetime-annotation': {\n      pattern: /'\\w+/,\n      alias: 'symbol'\n    },\n    'fragment-specifier': {\n      pattern: /(\\$\\w+:)[a-z]+/,\n      lookbehind: true,\n      alias: 'punctuation'\n    },\n    'variable': /\\$\\w+/,\n    'function-definition': {\n      pattern: /(\\bfn\\s+)\\w+/,\n      lookbehind: true,\n      alias: 'function'\n    },\n    'type-definition': {\n      pattern: /(\\b(?:enum|struct|trait|type|union)\\s+)\\w+/,\n      lookbehind: true,\n      alias: 'class-name'\n    },\n    'module-declaration': [{\n      pattern: /(\\b(?:crate|mod)\\s+)[a-z][a-z_\\d]*/,\n      lookbehind: true,\n      alias: 'namespace'\n    }, {\n      pattern: /(\\b(?:crate|self|super)\\s*)::\\s*[a-z][a-z_\\d]*\\b(?:\\s*::(?:\\s*[a-z][a-z_\\d]*\\s*::)*)?/,\n      lookbehind: true,\n      alias: 'namespace',\n      inside: {\n        'punctuation': /::/\n      }\n    }],\n    'keyword': [\n    // https://github.com/rust-lang/reference/blob/master/src/keywords.md\n    /\\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\\b/,\n    // primitives and str\n    // https://doc.rust-lang.org/stable/rust-by-example/primitives.html\n    /\\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\\b/],\n    // functions can technically start with an upper-case letter, but this will introduce a lot of false positives\n    // and Rust's naming conventions recommend snake_case anyway.\n    // https://doc.rust-lang.org/1.0.0/style/style/naming/README.html\n    'function': /\\b[a-z_]\\w*(?=\\s*(?:::\\s*<|\\())/,\n    'macro': {\n      pattern: /\\b\\w+!/,\n      alias: 'property'\n    },\n    'constant': /\\b[A-Z_][A-Z_\\d]+\\b/,\n    'class-name': /\\b[A-Z]\\w*\\b/,\n    'namespace': {\n      pattern: /(?:\\b[a-z][a-z_\\d]*\\s*::\\s*)*\\b[a-z][a-z_\\d]*\\s*::(?!\\s*<)/,\n      inside: {\n        'punctuation': /::/\n      }\n    },\n    // Hex, oct, bin, dec numbers with visual separators and type suffix\n    'number': /\\b(?:0x[\\dA-Fa-f](?:_?[\\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\\d(?:_?\\d)*)?\\.)?\\d(?:_?\\d)*(?:[Ee][+-]?\\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\\b/,\n    'boolean': /\\b(?:false|true)\\b/,\n    'punctuation': /->|\\.\\.=|\\.{1,3}|::|[{}[\\];(),:]/,\n    'operator': /[-+*\\/%!^]=?|=[=>]?|&[&=]?|\\|[|=]?|<<?=?|>>?=?|[@?]/\n  };\n  Prism.languages.rust['closure-params'].inside.rest = Prism.languages.rust;\n  Prism.languages.rust['attribute'].inside['string'] = Prism.languages.rust['string'];\n})(Prism);\n(function (Prism) {\n  Prism.languages.sass = Prism.languages.extend('css', {\n    // Sass comments don't need to be closed, only indented\n    'comment': {\n      pattern: /^([ \\t]*)\\/[\\/*].*(?:(?:\\r?\\n|\\r)\\1[ \\t].+)*/m,\n      lookbehind: true,\n      greedy: true\n    }\n  });\n  Prism.languages.insertBefore('sass', 'atrule', {\n    // We want to consume the whole line\n    'atrule-line': {\n      // Includes support for = and + shortcuts\n      pattern: /^(?:[ \\t]*)[@+=].+/m,\n      greedy: true,\n      inside: {\n        'atrule': /(?:@[\\w-]+|[+=])/\n      }\n    }\n  });\n  delete Prism.languages.sass.atrule;\n  var variable = /\\$[-\\w]+|#\\{\\$[-\\w]+\\}/;\n  var operator = [/[+*\\/%]|[=!]=|<=?|>=?|\\b(?:and|not|or)\\b/, {\n    pattern: /(\\s)-(?=\\s)/,\n    lookbehind: true\n  }];\n  Prism.languages.insertBefore('sass', 'property', {\n    // We want to consume the whole line\n    'variable-line': {\n      pattern: /^[ \\t]*\\$.+/m,\n      greedy: true,\n      inside: {\n        'punctuation': /:/,\n        'variable': variable,\n        'operator': operator\n      }\n    },\n    // We want to consume the whole line\n    'property-line': {\n      pattern: /^[ \\t]*(?:[^:\\s]+ *:.*|:[^:\\s].*)/m,\n      greedy: true,\n      inside: {\n        'property': [/[^:\\s]+(?=\\s*:)/, {\n          pattern: /(:)[^:\\s]+/,\n          lookbehind: true\n        }],\n        'punctuation': /:/,\n        'variable': variable,\n        'operator': operator,\n        'important': Prism.languages.sass.important\n      }\n    }\n  });\n  delete Prism.languages.sass.property;\n  delete Prism.languages.sass.important;\n\n  // Now that whole lines for other patterns are consumed,\n  // what's left should be selectors\n  Prism.languages.insertBefore('sass', 'punctuation', {\n    'selector': {\n      pattern: /^([ \\t]*)\\S(?:,[^,\\r\\n]+|[^,\\r\\n]*)(?:,[^,\\r\\n]+)*(?:,(?:\\r?\\n|\\r)\\1[ \\t]+\\S(?:,[^,\\r\\n]+|[^,\\r\\n]*)(?:,[^,\\r\\n]+)*)*/m,\n      lookbehind: true,\n      greedy: true\n    }\n  });\n})(Prism);\nPrism.languages.scss = Prism.languages.extend('css', {\n  'comment': {\n    pattern: /(^|[^\\\\])(?:\\/\\*[\\s\\S]*?\\*\\/|\\/\\/.*)/,\n    lookbehind: true\n  },\n  'atrule': {\n    pattern: /@[\\w-](?:\\([^()]+\\)|[^()\\s]|\\s+(?!\\s))*?(?=\\s+[{;])/,\n    inside: {\n      'rule': /@[\\w-]+/\n      // See rest below\n    }\n  },\n  // url, compassified\n  'url': /(?:[-a-z]+-)?url(?=\\()/i,\n  // CSS selector regex is not appropriate for Sass\n  // since there can be lot more things (var, @ directive, nesting..)\n  // a selector must start at the end of a property or after a brace (end of other rules or nesting)\n  // it can contain some characters that aren't used for defining rules or end of selector, & (parent selector), or interpolated variable\n  // the end of a selector is found when there is no rules in it ( {} or {\\s}) or if there is a property (because an interpolated var\n  // can \"pass\" as a selector- e.g: proper#{$erty})\n  // this one was hard to do, so please be careful if you edit this one :)\n  'selector': {\n    // Initial look-ahead is used to prevent matching of blank selectors\n    pattern: /(?=\\S)[^@;{}()]?(?:[^@;{}()\\s]|\\s+(?!\\s)|#\\{\\$[-\\w]+\\})+(?=\\s*\\{(?:\\}|\\s|[^}][^:{}]*[:{][^}]))/,\n    inside: {\n      'parent': {\n        pattern: /&/,\n        alias: 'important'\n      },\n      'placeholder': /%[-\\w]+/,\n      'variable': /\\$[-\\w]+|#\\{\\$[-\\w]+\\}/\n    }\n  },\n  'property': {\n    pattern: /(?:[-\\w]|\\$[-\\w]|#\\{\\$[-\\w]+\\})+(?=\\s*:)/,\n    inside: {\n      'variable': /\\$[-\\w]+|#\\{\\$[-\\w]+\\}/\n    }\n  }\n});\nPrism.languages.insertBefore('scss', 'atrule', {\n  'keyword': [/@(?:content|debug|each|else(?: if)?|extend|for|forward|function|if|import|include|mixin|return|use|warn|while)\\b/i, {\n    pattern: /( )(?:from|through)(?= )/,\n    lookbehind: true\n  }]\n});\nPrism.languages.insertBefore('scss', 'important', {\n  // var and interpolated vars\n  'variable': /\\$[-\\w]+|#\\{\\$[-\\w]+\\}/\n});\nPrism.languages.insertBefore('scss', 'function', {\n  'module-modifier': {\n    pattern: /\\b(?:as|hide|show|with)\\b/i,\n    alias: 'keyword'\n  },\n  'placeholder': {\n    pattern: /%[-\\w]+/,\n    alias: 'selector'\n  },\n  'statement': {\n    pattern: /\\B!(?:default|optional)\\b/i,\n    alias: 'keyword'\n  },\n  'boolean': /\\b(?:false|true)\\b/,\n  'null': {\n    pattern: /\\bnull\\b/,\n    alias: 'keyword'\n  },\n  'operator': {\n    pattern: /(\\s)(?:[-+*\\/%]|[=!]=|<=?|>=?|and|not|or)(?=\\s)/,\n    lookbehind: true\n  }\n});\nPrism.languages.scss['atrule'].inside.rest = Prism.languages.scss;\nPrism.languages.sql = {\n  'comment': {\n    pattern: /(^|[^\\\\])(?:\\/\\*[\\s\\S]*?\\*\\/|(?:--|\\/\\/|#).*)/,\n    lookbehind: true\n  },\n  'variable': [{\n    pattern: /@([\"'`])(?:\\\\[\\s\\S]|(?!\\1)[^\\\\])+\\1/,\n    greedy: true\n  }, /@[\\w.$]+/],\n  'string': {\n    pattern: /(^|[^@\\\\])(\"|')(?:\\\\[\\s\\S]|(?!\\2)[^\\\\]|\\2\\2)*\\2/,\n    greedy: true,\n    lookbehind: true\n  },\n  'identifier': {\n    pattern: /(^|[^@\\\\])`(?:\\\\[\\s\\S]|[^`\\\\]|``)*`/,\n    greedy: true,\n    lookbehind: true,\n    inside: {\n      'punctuation': /^`|`$/\n    }\n  },\n  'function': /\\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\\s*\\()/i,\n  // Should we highlight user defined functions too?\n  'keyword': /\\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\\b/i,\n  'boolean': /\\b(?:FALSE|NULL|TRUE)\\b/i,\n  'number': /\\b0x[\\da-f]+\\b|\\b\\d+(?:\\.\\d*)?|\\B\\.\\d+\\b/i,\n  'operator': /[-+*\\/=%^~]|&&?|\\|\\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\\b/i,\n  'punctuation': /[;[\\]()`,.]/\n};\nPrism.languages.swift = {\n  'comment': {\n    // Nested comments are supported up to 2 levels\n    pattern: /(^|[^\\\\:])(?:\\/\\/.*|\\/\\*(?:[^/*]|\\/(?!\\*)|\\*(?!\\/)|\\/\\*(?:[^*]|\\*(?!\\/))*\\*\\/)*\\*\\/)/,\n    lookbehind: true,\n    greedy: true\n  },\n  'string-literal': [\n  // https://docs.swift.org/swift-book/LanguageGuide/StringsAndCharacters.html\n  {\n    pattern: RegExp(/(^|[^\"#])/.source + '(?:'\n    // single-line string\n    + /\"(?:\\\\(?:\\((?:[^()]|\\([^()]*\\))*\\)|\\r\\n|[^(])|[^\\\\\\r\\n\"])*\"/.source + '|'\n    // multi-line string\n    + /\"\"\"(?:\\\\(?:\\((?:[^()]|\\([^()]*\\))*\\)|[^(])|[^\\\\\"]|\"(?!\"\"))*\"\"\"/.source + ')' + /(?![\"#])/.source),\n    lookbehind: true,\n    greedy: true,\n    inside: {\n      'interpolation': {\n        pattern: /(\\\\\\()(?:[^()]|\\([^()]*\\))*(?=\\))/,\n        lookbehind: true,\n        inside: null // see below\n      },\n      'interpolation-punctuation': {\n        pattern: /^\\)|\\\\\\($/,\n        alias: 'punctuation'\n      },\n      'punctuation': /\\\\(?=[\\r\\n])/,\n      'string': /[\\s\\S]+/\n    }\n  }, {\n    pattern: RegExp(/(^|[^\"#])(#+)/.source + '(?:'\n    // single-line string\n    + /\"(?:\\\\(?:#+\\((?:[^()]|\\([^()]*\\))*\\)|\\r\\n|[^#])|[^\\\\\\r\\n])*?\"/.source + '|'\n    // multi-line string\n    + /\"\"\"(?:\\\\(?:#+\\((?:[^()]|\\([^()]*\\))*\\)|[^#])|[^\\\\])*?\"\"\"/.source + ')' + '\\\\2'),\n    lookbehind: true,\n    greedy: true,\n    inside: {\n      'interpolation': {\n        pattern: /(\\\\#+\\()(?:[^()]|\\([^()]*\\))*(?=\\))/,\n        lookbehind: true,\n        inside: null // see below\n      },\n      'interpolation-punctuation': {\n        pattern: /^\\)|\\\\#+\\($/,\n        alias: 'punctuation'\n      },\n      'string': /[\\s\\S]+/\n    }\n  }],\n  'directive': {\n    // directives with conditions\n    pattern: RegExp(/#/.source + '(?:' + (/(?:elseif|if)\\b/.source + '(?:[ \\t]*'\n    // This regex is a little complex. It's equivalent to this:\n    //   (?:![ \\t]*)?(?:\\b\\w+\\b(?:[ \\t]*<round>)?|<round>)(?:[ \\t]*(?:&&|\\|\\|))?\n    // where <round> is a general parentheses expression.\n    + /(?:![ \\t]*)?(?:\\b\\w+\\b(?:[ \\t]*\\((?:[^()]|\\([^()]*\\))*\\))?|\\((?:[^()]|\\([^()]*\\))*\\))(?:[ \\t]*(?:&&|\\|\\|))?/.source + ')+') + '|' + /(?:else|endif)\\b/.source + ')'),\n    alias: 'property',\n    inside: {\n      'directive-name': /^#\\w+/,\n      'boolean': /\\b(?:false|true)\\b/,\n      'number': /\\b\\d+(?:\\.\\d+)*\\b/,\n      'operator': /!|&&|\\|\\||[<>]=?/,\n      'punctuation': /[(),]/\n    }\n  },\n  'literal': {\n    pattern: /#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\\b/,\n    alias: 'constant'\n  },\n  'other-directive': {\n    pattern: /#\\w+\\b/,\n    alias: 'property'\n  },\n  'attribute': {\n    pattern: /@\\w+/,\n    alias: 'atrule'\n  },\n  'function-definition': {\n    pattern: /(\\bfunc\\s+)\\w+/,\n    lookbehind: true,\n    alias: 'function'\n  },\n  'label': {\n    // https://docs.swift.org/swift-book/LanguageGuide/ControlFlow.html#ID141\n    pattern: /\\b(break|continue)\\s+\\w+|\\b[a-zA-Z_]\\w*(?=\\s*:\\s*(?:for|repeat|while)\\b)/,\n    lookbehind: true,\n    alias: 'important'\n  },\n  'keyword': /\\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\\b/,\n  'boolean': /\\b(?:false|true)\\b/,\n  'nil': {\n    pattern: /\\bnil\\b/,\n    alias: 'constant'\n  },\n  'short-argument': /\\$\\d+\\b/,\n  'omit': {\n    pattern: /\\b_\\b/,\n    alias: 'keyword'\n  },\n  'number': /\\b(?:[\\d_]+(?:\\.[\\de_]+)?|0x[a-f0-9_]+(?:\\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\\b/i,\n  // A class name must start with an upper-case letter and be either 1 letter long or contain a lower-case letter.\n  'class-name': /\\b[A-Z](?:[A-Z_\\d]*[a-z]\\w*)?\\b/,\n  'function': /\\b[a-z_]\\w*(?=\\s*\\()/i,\n  'constant': /\\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\\b/,\n  // Operators are generic in Swift. Developers can even create new operators (e.g. +++).\n  // https://docs.swift.org/swift-book/ReferenceManual/zzSummaryOfTheGrammar.html#ID481\n  // This regex only supports ASCII operators.\n  'operator': /[-+*/%=!<>&|^~?]+|\\.[.\\-+*/%=!<>&|^~?]+/,\n  'punctuation': /[{}[\\]();,.:\\\\]/\n};\nPrism.languages.swift['string-literal'].forEach(function (rule) {\n  rule.inside['interpolation'].inside = Prism.languages.swift;\n});\n(function (Prism) {\n  Prism.languages.typescript = Prism.languages.extend('javascript', {\n    'class-name': {\n      pattern: /(\\b(?:class|extends|implements|instanceof|interface|new|type)\\s+)(?!keyof\\b)(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?:\\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,\n      lookbehind: true,\n      greedy: true,\n      inside: null // see below\n    },\n    'builtin': /\\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\\b/\n  });\n\n  // The keywords TypeScript adds to JavaScript\n  Prism.languages.typescript.keyword.push(/\\b(?:abstract|declare|is|keyof|readonly|require)\\b/,\n  // keywords that have to be followed by an identifier\n  /\\b(?:asserts|infer|interface|module|namespace|type)\\b(?=\\s*(?:[{_$a-zA-Z\\xA0-\\uFFFF]|$))/,\n  // This is for `import type *, {}`\n  /\\btype\\b(?=\\s*(?:[\\{*]|$))/);\n\n  // doesn't work with TS because TS is too complex\n  delete Prism.languages.typescript['parameter'];\n  delete Prism.languages.typescript['literal-property'];\n\n  // a version of typescript specifically for highlighting types\n  var typeInside = Prism.languages.extend('typescript', {});\n  delete typeInside['class-name'];\n  Prism.languages.typescript['class-name'].inside = typeInside;\n  Prism.languages.insertBefore('typescript', 'function', {\n    'decorator': {\n      pattern: /@[$\\w\\xA0-\\uFFFF]+/,\n      inside: {\n        'at': {\n          pattern: /^@/,\n          alias: 'operator'\n        },\n        'function': /^[\\s\\S]+/\n      }\n    },\n    'generic-function': {\n      // e.g. foo<T extends \"bar\" | \"baz\">( ...\n      pattern: /#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*\\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\\s*\\()/,\n      greedy: true,\n      inside: {\n        'function': /^#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*/,\n        'generic': {\n          pattern: /<[\\s\\S]+/,\n          // everything after the first <\n          alias: 'class-name',\n          inside: typeInside\n        }\n      }\n    }\n  });\n  Prism.languages.ts = Prism.languages.typescript;\n})(Prism);\n(function (Prism) {\n  var typescript = Prism.util.clone(Prism.languages.typescript);\n  Prism.languages.tsx = Prism.languages.extend('jsx', typescript);\n\n  // doesn't work with TS because TS is too complex\n  delete Prism.languages.tsx['parameter'];\n  delete Prism.languages.tsx['literal-property'];\n\n  // This will prevent collisions between TSX tags and TS generic types.\n  // Idea by https://github.com/karlhorky\n  // Discussion: https://github.com/PrismJS/prism/issues/2594#issuecomment-710666928\n  var tag = Prism.languages.tsx.tag;\n  tag.pattern = RegExp(/(^|[^\\w$]|(?=<\\/))/.source + '(?:' + tag.pattern.source + ')', tag.pattern.flags);\n  tag.lookbehind = true;\n})(Prism);\nPrism.languages.basic = {\n  'comment': {\n    pattern: /(?:!|REM\\b).+/i,\n    inside: {\n      'keyword': /^REM/i\n    }\n  },\n  'string': {\n    pattern: /\"(?:\"\"|[!#$%&'()*,\\/:;<=>?^\\w +\\-.])*\"/,\n    greedy: true\n  },\n  'number': /(?:\\b\\d+(?:\\.\\d*)?|\\B\\.\\d+)(?:E[+-]?\\d+)?/i,\n  'keyword': /\\b(?:AS|BEEP|BLOAD|BSAVE|CALL(?: ABSOLUTE)?|CASE|CHAIN|CHDIR|CLEAR|CLOSE|CLS|COM|COMMON|CONST|DATA|DECLARE|DEF(?: FN| SEG|DBL|INT|LNG|SNG|STR)|DIM|DO|DOUBLE|ELSE|ELSEIF|END|ENVIRON|ERASE|ERROR|EXIT|FIELD|FILES|FOR|FUNCTION|GET|GOSUB|GOTO|IF|INPUT|INTEGER|IOCTL|KEY|KILL|LINE INPUT|LOCATE|LOCK|LONG|LOOP|LSET|MKDIR|NAME|NEXT|OFF|ON(?: COM| ERROR| KEY| TIMER)?|OPEN|OPTION BASE|OUT|POKE|PUT|READ|REDIM|REM|RESTORE|RESUME|RETURN|RMDIR|RSET|RUN|SELECT CASE|SHARED|SHELL|SINGLE|SLEEP|STATIC|STEP|STOP|STRING|SUB|SWAP|SYSTEM|THEN|TIMER|TO|TROFF|TRON|TYPE|UNLOCK|UNTIL|USING|VIEW PRINT|WAIT|WEND|WHILE|WRITE)(?:\\$|\\b)/i,\n  'function': /\\b(?:ABS|ACCESS|ACOS|ANGLE|AREA|ARITHMETIC|ARRAY|ASIN|ASK|AT|ATN|BASE|BEGIN|BREAK|CAUSE|CEIL|CHR|CLIP|COLLATE|COLOR|CON|COS|COSH|COT|CSC|DATE|DATUM|DEBUG|DECIMAL|DEF|DEG|DEGREES|DELETE|DET|DEVICE|DISPLAY|DOT|ELAPSED|EPS|ERASABLE|EXLINE|EXP|EXTERNAL|EXTYPE|FILETYPE|FIXED|FP|GO|GRAPH|HANDLER|IDN|IMAGE|IN|INT|INTERNAL|IP|IS|KEYED|LBOUND|LCASE|LEFT|LEN|LENGTH|LET|LINE|LINES|LOG|LOG10|LOG2|LTRIM|MARGIN|MAT|MAX|MAXNUM|MID|MIN|MISSING|MOD|NATIVE|NUL|NUMERIC|OF|OPTION|ORD|ORGANIZATION|OUTIN|OUTPUT|PI|POINT|POINTER|POINTS|POS|PRINT|PROGRAM|PROMPT|RAD|RADIANS|RANDOMIZE|RECORD|RECSIZE|RECTYPE|RELATIVE|REMAINDER|REPEAT|REST|RETRY|REWRITE|RIGHT|RND|ROUND|RTRIM|SAME|SEC|SELECT|SEQUENTIAL|SET|SETTER|SGN|SIN|SINH|SIZE|SKIP|SQR|STANDARD|STATUS|STR|STREAM|STYLE|TAB|TAN|TANH|TEMPLATE|TEXT|THERE|TIME|TIMEOUT|TRACE|TRANSFORM|TRUNCATE|UBOUND|UCASE|USE|VAL|VARIABLE|VIEWPORT|WHEN|WINDOW|WITH|ZER|ZONEWIDTH)(?:\\$|\\b)/i,\n  'operator': /<[=>]?|>=?|[+\\-*\\/^=&]|\\b(?:AND|EQV|IMP|NOT|OR|XOR)\\b/i,\n  'punctuation': /[,;:()]/\n};\nPrism.languages.vbnet = Prism.languages.extend('basic', {\n  'comment': [{\n    pattern: /(?:!|REM\\b).+/i,\n    inside: {\n      'keyword': /^REM/i\n    }\n  }, {\n    pattern: /(^|[^\\\\:])'.*/,\n    lookbehind: true,\n    greedy: true\n  }],\n  'string': {\n    pattern: /(^|[^\"])\"(?:\"\"|[^\"])*\"(?!\")/,\n    lookbehind: true,\n    greedy: true\n  },\n  'keyword': /(?:\\b(?:ADDHANDLER|ADDRESSOF|ALIAS|AND|ANDALSO|AS|BEEP|BLOAD|BOOLEAN|BSAVE|BYREF|BYTE|BYVAL|CALL(?: ABSOLUTE)?|CASE|CATCH|CBOOL|CBYTE|CCHAR|CDATE|CDBL|CDEC|CHAIN|CHAR|CHDIR|CINT|CLASS|CLEAR|CLNG|CLOSE|CLS|COBJ|COM|COMMON|CONST|CONTINUE|CSBYTE|CSHORT|CSNG|CSTR|CTYPE|CUINT|CULNG|CUSHORT|DATA|DATE|DECIMAL|DECLARE|DEF(?: FN| SEG|DBL|INT|LNG|SNG|STR)|DEFAULT|DELEGATE|DIM|DIRECTCAST|DO|DOUBLE|ELSE|ELSEIF|END|ENUM|ENVIRON|ERASE|ERROR|EVENT|EXIT|FALSE|FIELD|FILES|FINALLY|FOR(?: EACH)?|FRIEND|FUNCTION|GET|GETTYPE|GETXMLNAMESPACE|GLOBAL|GOSUB|GOTO|HANDLES|IF|IMPLEMENTS|IMPORTS|IN|INHERITS|INPUT|INTEGER|INTERFACE|IOCTL|IS|ISNOT|KEY|KILL|LET|LIB|LIKE|LINE INPUT|LOCATE|LOCK|LONG|LOOP|LSET|ME|MKDIR|MOD|MODULE|MUSTINHERIT|MUSTOVERRIDE|MYBASE|MYCLASS|NAME|NAMESPACE|NARROWING|NEW|NEXT|NOT|NOTHING|NOTINHERITABLE|NOTOVERRIDABLE|OBJECT|OF|OFF|ON(?: COM| ERROR| KEY| TIMER)?|OPEN|OPERATOR|OPTION(?: BASE)?|OPTIONAL|OR|ORELSE|OUT|OVERLOADS|OVERRIDABLE|OVERRIDES|PARAMARRAY|PARTIAL|POKE|PRIVATE|PROPERTY|PROTECTED|PUBLIC|PUT|RAISEEVENT|READ|READONLY|REDIM|REM|REMOVEHANDLER|RESTORE|RESUME|RETURN|RMDIR|RSET|RUN|SBYTE|SELECT(?: CASE)?|SET|SHADOWS|SHARED|SHELL|SHORT|SINGLE|SLEEP|STATIC|STEP|STOP|STRING|STRUCTURE|SUB|SWAP|SYNCLOCK|SYSTEM|THEN|THROW|TIMER|TO|TROFF|TRON|TRUE|TRY|TRYCAST|TYPE|TYPEOF|UINTEGER|ULONG|UNLOCK|UNTIL|USHORT|USING|VIEW PRINT|WAIT|WEND|WHEN|WHILE|WIDENING|WITH|WITHEVENTS|WRITE|WRITEONLY|XOR)|\\B(?:#CONST|#ELSE|#ELSEIF|#END|#IF))(?:\\$|\\b)/i,\n  'punctuation': /[,;:(){}]/\n});\n\nconst languages = [{\n  label: 'C',\n  value: 'c'\n}, {\n  label: 'C++',\n  value: 'cpp'\n}, {\n  label: 'Arduino',\n  value: 'arduino'\n}, {\n  label: 'Bash',\n  value: 'bash'\n}, {\n  label: 'C#',\n  value: 'csharp'\n}, {\n  label: 'CSS',\n  value: 'css'\n}, {\n  label: 'Diff',\n  value: 'diff'\n}, {\n  label: 'Go',\n  value: 'go'\n}, {\n  label: 'INI',\n  value: 'ini'\n}, {\n  label: 'Java',\n  value: 'java'\n}, {\n  label: 'JavaScript',\n  value: 'javascript'\n}, {\n  label: 'JSX',\n  value: 'jsx'\n}, {\n  label: 'JSON',\n  value: 'json'\n}, {\n  label: 'Kotlin',\n  value: 'kotlin'\n}, {\n  label: 'Less',\n  value: 'less'\n}, {\n  label: 'Lua',\n  value: 'lua'\n}, {\n  label: 'Makefile',\n  value: 'makefile'\n}, {\n  label: 'Markdown',\n  value: 'markdown'\n}, {\n  label: 'Objective-C',\n  value: 'objectivec'\n}, {\n  label: 'Perl',\n  value: 'perl'\n}, {\n  label: 'PHP',\n  value: 'php'\n}, {\n  label: 'Python',\n  value: 'python'\n}, {\n  label: 'R',\n  value: 'r'\n}, {\n  label: 'Ruby',\n  value: 'ruby'\n}, {\n  label: 'Rust',\n  value: 'rust'\n}, {\n  label: 'Sass',\n  value: 'sass'\n}, {\n  label: 'SCSS',\n  value: 'scss'\n}, {\n  label: 'SQL',\n  value: 'sql'\n}, {\n  label: 'Swift',\n  value: 'swift'\n}, {\n  label: 'TypeScript',\n  value: 'typescript'\n}, {\n  label: 'TSX',\n  value: 'tsx'\n}, {\n  label: 'VB.NET',\n  value: 'vbnet'\n}, {\n  label: 'YAML',\n  value: 'yaml'\n}];\nconst canonicalNameToLabel = new Map(languages.map(x => [x.value, x.label]));\nconst labelToCanonicalName = new Map(languages.map(x => [x.label, x.value]));\nconst languageToCanonicalName = new Map(languages.map(lang => [Prism.languages[lang.value], lang.value]));\nconst aliasesToCanonicalName = new Map(Object.keys(Prism.languages).flatMap(lang => {\n  const canonicalName = languageToCanonicalName.get(Prism.languages[lang]);\n  if (canonicalName === undefined) {\n    return [];\n  }\n  return [[lang, canonicalName]];\n}));\nconst languagesToAliases = new Map(languages.map(lang => [lang.value, []]));\nfor (const [alias, canonicalName] of aliasesToCanonicalName) {\n  languagesToAliases.get(canonicalName).push(alias);\n}\nconst languagesWithAliases = [{\n  label: 'Plain text',\n  value: 'plain',\n  aliases: []\n}, ...[...languagesToAliases].map(([canonicalName, aliases]) => ({\n  label: canonicalNameToLabel.get(canonicalName),\n  value: canonicalName,\n  aliases\n}))];\nconst aliasesToLabel = new Map([...aliasesToCanonicalName].map(([alias, canonicalName]) => [alias, canonicalNameToLabel.get(canonicalName)]));\n\nconst codeBlockShortcutPattern = /^```(\\w+)? ?$/;\nfunction withCodeBlock(documentFeatures, componentBlocks, editor) {\n  const {\n    insertBreak,\n    normalizeNode,\n    insertText\n  } = editor;\n  function codeBlockShortcut(block) {\n    var _aliasesToCanonicalNa;\n    if ((block === null || block === void 0 ? void 0 : block[0].type) !== 'paragraph' || block[0].children.length !== 1 || block[0].children[0].type !== undefined) {\n      return false;\n    }\n    const match = codeBlockShortcutPattern.exec(block[0].children[0].text);\n    if (!match) {\n      return false;\n    }\n    const locationDocumentFeatures = getAncestorComponentChildFieldDocumentFeatures(editor, documentFeatures, componentBlocks);\n    if (locationDocumentFeatures && (locationDocumentFeatures.kind === 'inline' || !locationDocumentFeatures.documentFeatures.formatting.blockTypes.code)) {\n      return false;\n    }\n\n    // so that this starts a new undo group\n    editor.history.undos.push({\n      operations: [],\n      selectionBefore: editor.selection\n    });\n    slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.select(editor, block[1]);\n    slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.delete(editor);\n    slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.wrapNodes(editor, {\n      type: 'code',\n      ...(match[1] ? {\n        language: (_aliasesToCanonicalNa = aliasesToCanonicalName.get(match[1].toLowerCase())) !== null && _aliasesToCanonicalNa !== void 0 ? _aliasesToCanonicalNa : match[1]\n      } : {}),\n      children: []\n    }, {\n      match: node => node.type === 'paragraph'\n    });\n    return true;\n  }\n  editor.insertBreak = () => {\n    const block = slate__WEBPACK_IMPORTED_MODULE_6__.Editor.above(editor, {\n      match: isBlock\n    });\n    if ((block === null || block === void 0 ? void 0 : block[0].type) === 'code' && slate__WEBPACK_IMPORTED_MODULE_6__.Text.isText(block[0].children[0])) {\n      const text = block[0].children[0].text;\n      if (text[text.length - 1] === '\\n' && editor.selection && slate__WEBPACK_IMPORTED_MODULE_6__.Range.isCollapsed(editor.selection) && slate__WEBPACK_IMPORTED_MODULE_6__.Point.equals(slate__WEBPACK_IMPORTED_MODULE_6__.Editor.end(editor, block[1]), editor.selection.anchor)) {\n        insertBreak();\n        slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.setNodes(editor, {\n          type: 'paragraph',\n          children: []\n        });\n        slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.delete(editor, {\n          distance: 1,\n          at: {\n            path: [...block[1], 0],\n            offset: text.length - 1\n          }\n        });\n        return;\n      }\n      editor.insertText('\\n');\n      return;\n    }\n    if (editor.selection && slate__WEBPACK_IMPORTED_MODULE_6__.Range.isCollapsed(editor.selection) && codeBlockShortcut(block)) {\n      return;\n    }\n    insertBreak();\n  };\n  editor.insertText = text => {\n    insertText(text);\n    if (text === ' ' && editor.selection && slate__WEBPACK_IMPORTED_MODULE_6__.Range.isCollapsed(editor.selection)) {\n      codeBlockShortcut(slate__WEBPACK_IMPORTED_MODULE_6__.Editor.above(editor, {\n        match: isBlock\n      }));\n    }\n  };\n  editor.normalizeNode = ([node, path]) => {\n    if (node.type === 'code' && slate__WEBPACK_IMPORTED_MODULE_6__.Element.isElement(node)) {\n      for (const [index, childNode] of node.children.entries()) {\n        if (!slate__WEBPACK_IMPORTED_MODULE_6__.Text.isText(childNode)) {\n          if (editor.isVoid(childNode)) {\n            slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.removeNodes(editor, {\n              at: [...path, index]\n            });\n          } else {\n            slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.unwrapNodes(editor, {\n              at: [...path, index]\n            });\n          }\n          return;\n        }\n        const marks = Object.keys(childNode).filter(x => x !== 'text');\n        if (marks.length) {\n          slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.unsetNodes(editor, marks, {\n            at: [...path, index]\n          });\n          return;\n        }\n      }\n    }\n    normalizeNode([node, path]);\n  };\n  return editor;\n}\n\nfunction findChildPropPathsForProp(value, schema, path) {\n  switch (schema.kind) {\n    case 'form':\n      return [];\n    case 'child':\n      return [{\n        path: path,\n        options: schema.options\n      }];\n    case 'conditional':\n      return findChildPropPathsForProp(value.value, schema.values[value.discriminant], path.concat('value'));\n    case 'object':\n      {\n        const paths = [];\n        Object.keys(schema.fields).forEach(key => {\n          paths.push(...findChildPropPathsForProp(value[key], schema.fields[key], path.concat(key)));\n        });\n        return paths;\n      }\n    case 'array':\n      {\n        const paths = [];\n        value.forEach((val, i) => {\n          paths.push(...findChildPropPathsForProp(val, schema.element, path.concat(i)));\n        });\n        return paths;\n      }\n  }\n}\nfunction findChildPropPaths(value, props) {\n  const propPaths = findChildPropPathsForProp(value, {\n    kind: 'object',\n    fields: props\n  }, []);\n  if (!propPaths.length) {\n    return [{\n      path: undefined,\n      options: {\n        kind: 'inline',\n        placeholder: ''\n      }\n    }];\n  }\n  return propPaths;\n}\n\nfunction getAncestorComponentBlock(editor) {\n  if (editor.selection) {\n    const ancestorEntry = slate__WEBPACK_IMPORTED_MODULE_6__.Editor.above(editor, {\n      match: node => isBlock(node) && node.type !== 'paragraph'\n    });\n    if (ancestorEntry && (ancestorEntry[0].type === 'component-block-prop' || ancestorEntry[0].type === 'component-inline-prop')) {\n      return {\n        isInside: true,\n        componentBlock: slate__WEBPACK_IMPORTED_MODULE_6__.Editor.parent(editor, ancestorEntry[1]),\n        prop: ancestorEntry\n      };\n    }\n  }\n  return {\n    isInside: false\n  };\n}\nconst alreadyNormalizedThings = new WeakMap();\nfunction normalizeNodeWithinComponentProp([node, path], editor, fieldOptions) {\n  let alreadyNormalizedNodes = alreadyNormalizedThings.get(fieldOptions);\n  if (!alreadyNormalizedNodes) {\n    alreadyNormalizedNodes = new WeakSet();\n    alreadyNormalizedThings.set(fieldOptions, alreadyNormalizedNodes);\n  }\n  if (alreadyNormalizedNodes.has(node)) {\n    return false;\n  }\n  let didNormalization = false;\n  if (fieldOptions.inlineMarks !== 'inherit' && slate__WEBPACK_IMPORTED_MODULE_6__.Text.isText(node)) {\n    didNormalization = normalizeTextBasedOnInlineMarksAndSoftBreaks([node, path], editor, fieldOptions.inlineMarks, fieldOptions.softBreaks);\n  }\n  if (slate__WEBPACK_IMPORTED_MODULE_6__.Element.isElement(node)) {\n    let childrenHasChanged = node.children.map((node, i) => normalizeNodeWithinComponentProp([node, [...path, i]], editor, fieldOptions))\n    // .map then .some because we don't want to exit early\n    .some(x => x);\n    if (fieldOptions.kind === 'block') {\n      if (node.type === 'component-block') {\n        if (!fieldOptions.componentBlocks) {\n          slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.unwrapNodes(editor, {\n            at: path\n          });\n          didNormalization = true;\n        }\n      } else {\n        didNormalization = normalizeElementBasedOnDocumentFeatures([node, path], editor, fieldOptions.documentFeatures) || childrenHasChanged;\n      }\n    } else {\n      didNormalization = normalizeInlineBasedOnLinks([node, path], editor, fieldOptions.documentFeatures.links);\n    }\n  }\n  if (didNormalization === false) {\n    alreadyNormalizedNodes.add(node);\n  }\n  return didNormalization;\n}\nfunction canSchemaContainChildField(rootSchema) {\n  const queue = new Set([rootSchema]);\n  for (const schema of queue) {\n    if (schema.kind === 'form') ; else if (schema.kind === 'child') {\n      return true;\n    } else if (schema.kind === 'array') {\n      queue.add(schema.element);\n    } else if (schema.kind === 'object') {\n      for (const innerProp of Object.values(schema.fields)) {\n        queue.add(innerProp);\n      }\n    } else if (schema.kind === 'conditional') {\n      for (const innerProp of Object.values(schema.values)) {\n        queue.add(innerProp);\n      }\n    } else {\n      (0,emery__WEBPACK_IMPORTED_MODULE_1__.assertNever)(schema);\n    }\n  }\n  return false;\n}\nfunction doesSchemaOnlyEverContainASingleChildField(rootSchema) {\n  const queue = new Set([rootSchema]);\n  let hasFoundChildField = false;\n  for (const schema of queue) {\n    if (schema.kind === 'form') ; else if (schema.kind === 'child') {\n      if (hasFoundChildField) {\n        return false;\n      }\n      hasFoundChildField = true;\n    } else if (schema.kind === 'array') {\n      if (canSchemaContainChildField(schema.element)) {\n        return false;\n      }\n    } else if (schema.kind === 'object') {\n      for (const innerProp of Object.values(schema.fields)) {\n        queue.add(innerProp);\n      }\n    } else if (schema.kind === 'conditional') {\n      for (const innerProp of Object.values(schema.values)) {\n        queue.add(innerProp);\n      }\n    } else {\n      (0,emery__WEBPACK_IMPORTED_MODULE_1__.assertNever)(schema);\n    }\n  }\n  return hasFoundChildField;\n}\nfunction findArrayFieldsWithSingleChildField(schema, value) {\n  const propPaths = [];\n  traverseProps(schema, value, (schema, value, path) => {\n    if (schema.kind === 'array' && doesSchemaOnlyEverContainASingleChildField(schema.element)) {\n      propPaths.push([path, schema]);\n    }\n  });\n  return propPaths;\n}\nfunction isEmptyChildFieldNode(element) {\n  const firstChild = element.children[0];\n  return element.children.length === 1 && (element.type === 'component-inline-prop' && firstChild.type === undefined && firstChild.text === '' || element.type === 'component-block-prop' && firstChild.type === 'paragraph' && firstChild.children.length === 1 && firstChild.children[0].type === undefined && firstChild.children[0].text === '');\n}\nfunction withComponentBlocks(blockComponents, editorDocumentFeatures, editor) {\n  // note that conflicts between the editor document features\n  // and the child field document features are dealt with elsewhere\n  const memoizedGetDocumentFeaturesForChildField = (0,_emotion_weak_memoize__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(options => {\n    return getDocumentFeaturesForChildField(editorDocumentFeatures, options);\n  });\n  const {\n    normalizeNode,\n    deleteBackward,\n    insertBreak\n  } = editor;\n  editor.deleteBackward = unit => {\n    if (editor.selection) {\n      const ancestorComponentBlock = getAncestorComponentBlock(editor);\n      if (ancestorComponentBlock.isInside && slate__WEBPACK_IMPORTED_MODULE_6__.Range.isCollapsed(editor.selection) && slate__WEBPACK_IMPORTED_MODULE_6__.Editor.isStart(editor, editor.selection.anchor, ancestorComponentBlock.prop[1]) && ancestorComponentBlock.prop[1][ancestorComponentBlock.prop[1].length - 1] === 0) {\n        slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.unwrapNodes(editor, {\n          at: ancestorComponentBlock.componentBlock[1]\n        });\n        return;\n      }\n    }\n    deleteBackward(unit);\n  };\n  editor.insertBreak = () => {\n    const ancestorComponentBlock = getAncestorComponentBlock(editor);\n    if (editor.selection && ancestorComponentBlock.isInside) {\n      const {\n        prop: [componentPropNode, componentPropPath],\n        componentBlock: [componentBlockNode, componentBlockPath]\n      } = ancestorComponentBlock;\n      const isLastProp = componentPropPath[componentPropPath.length - 1] === componentBlockNode.children.length - 1;\n      if (componentPropNode.type === 'component-block-prop') {\n        const [[paragraphNode, paragraphPath]] = slate__WEBPACK_IMPORTED_MODULE_6__.Editor.nodes(editor, {\n          match: node => node.type === 'paragraph'\n        });\n        const isLastParagraph = paragraphPath[paragraphPath.length - 1] === componentPropNode.children.length - 1;\n        if (slate__WEBPACK_IMPORTED_MODULE_6__.Node.string(paragraphNode) === '' && isLastParagraph) {\n          if (isLastProp) {\n            slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.moveNodes(editor, {\n              at: paragraphPath,\n              to: slate__WEBPACK_IMPORTED_MODULE_6__.Path.next(ancestorComponentBlock.componentBlock[1])\n            });\n          } else {\n            slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.move(editor, {\n              distance: 1,\n              unit: 'line'\n            });\n            slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.removeNodes(editor, {\n              at: paragraphPath\n            });\n          }\n          return;\n        }\n      }\n      if (componentPropNode.type === 'component-inline-prop') {\n        slate__WEBPACK_IMPORTED_MODULE_6__.Editor.withoutNormalizing(editor, () => {\n          const componentBlock = blockComponents[componentBlockNode.component];\n          if (componentPropNode.propPath !== undefined && componentBlock !== undefined) {\n            const rootSchema = {\n              kind: 'object',\n              fields: componentBlock.schema\n            };\n            const ancestorFields = getAncestorSchemas(rootSchema, componentPropNode.propPath, componentBlockNode.props);\n            const idx = [...ancestorFields].reverse().findIndex(item => item.kind === 'array');\n            if (idx !== -1) {\n              const arrayFieldIdx = ancestorFields.length - 1 - idx;\n              const arrayField = ancestorFields[arrayFieldIdx];\n              (0,emery__WEBPACK_IMPORTED_MODULE_1__.assert)(arrayField.kind === 'array');\n              const val = getValueAtPropPath(componentBlockNode.props, componentPropNode.propPath.slice(0, arrayFieldIdx));\n              if (doesSchemaOnlyEverContainASingleChildField(arrayField.element)) {\n                if (slate__WEBPACK_IMPORTED_MODULE_6__.Node.string(componentPropNode) === '' && val.length - 1 === componentPropNode.propPath[arrayFieldIdx]) {\n                  slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.removeNodes(editor, {\n                    at: componentPropPath\n                  });\n                  if (isLastProp) {\n                    slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.insertNodes(editor, {\n                      type: 'paragraph',\n                      children: [{\n                        text: ''\n                      }]\n                    }, {\n                      at: slate__WEBPACK_IMPORTED_MODULE_6__.Path.next(componentBlockPath)\n                    });\n                    slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.select(editor, slate__WEBPACK_IMPORTED_MODULE_6__.Path.next(componentBlockPath));\n                  } else {\n                    slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.move(editor, {\n                      distance: 1,\n                      unit: 'line'\n                    });\n                  }\n                } else {\n                  insertBreak();\n                }\n                return;\n              }\n            }\n          }\n          slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.splitNodes(editor, {\n            always: true\n          });\n          const splitNodePath = slate__WEBPACK_IMPORTED_MODULE_6__.Path.next(componentPropPath);\n          if (isLastProp) {\n            slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.moveNodes(editor, {\n              at: splitNodePath,\n              to: slate__WEBPACK_IMPORTED_MODULE_6__.Path.next(componentBlockPath)\n            });\n          } else {\n            moveChildren(editor, splitNodePath, [...slate__WEBPACK_IMPORTED_MODULE_6__.Path.next(splitNodePath), 0]);\n            slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.removeNodes(editor, {\n              at: splitNodePath\n            });\n          }\n        });\n        return;\n      }\n    }\n    insertBreak();\n  };\n  editor.normalizeNode = entry => {\n    const [node, path] = entry;\n    if (node.type === 'component-inline-prop' && !node.propPath && (node.children.length !== 1 || !slate__WEBPACK_IMPORTED_MODULE_6__.Text.isText(node.children[0]) || node.children[0].text !== '')) {\n      slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.removeNodes(editor, {\n        at: path\n      });\n      return;\n    }\n    if (node.type === 'component-block') {\n      const componentBlock = blockComponents[node.component];\n      if (componentBlock) {\n        const rootSchema = {\n          kind: 'object',\n          fields: componentBlock.schema\n        };\n        const updatedProps = addMissingFields(node.props, rootSchema);\n        if (updatedProps !== node.props) {\n          slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.setNodes(editor, {\n            props: updatedProps\n          }, {\n            at: path\n          });\n          return;\n        }\n        for (const [propPath, arrayField] of findArrayFieldsWithSingleChildField(rootSchema, node.props)) {\n          if (node.children.length === 1 && node.children[0].type === 'component-inline-prop' && node.children[0].propPath === undefined) {\n            break;\n          }\n          const nodesWithin = [];\n          for (const [idx, childNode] of node.children.entries()) {\n            if ((childNode.type === 'component-block-prop' || childNode.type === 'component-inline-prop') && childNode.propPath !== undefined) {\n              const subPath = childNode.propPath.concat();\n              while (subPath.length) {\n                if (typeof subPath.pop() === 'number') break;\n              }\n              if (areArraysEqual(propPath, subPath)) {\n                nodesWithin.push([idx, childNode]);\n              }\n            }\n          }\n          const arrVal = getValueAtPropPath(node.props, propPath);\n          const prevKeys = getKeysForArrayValue(arrVal);\n          const prevKeysSet = new Set(prevKeys);\n          const alreadyUsedIndicies = new Set();\n          const newVal = [];\n          const newKeys = [];\n          const getNewKey = () => {\n            let key = getNewArrayElementKey();\n            while (prevKeysSet.has(key)) {\n              key = getNewArrayElementKey();\n            }\n            return key;\n          };\n          for (const [, node] of nodesWithin) {\n            const idxFromValue = node.propPath[propPath.length];\n            (0,emery__WEBPACK_IMPORTED_MODULE_1__.assert)(typeof idxFromValue === 'number');\n            if (arrVal.length <= idxFromValue || alreadyUsedIndicies.has(idxFromValue) && isEmptyChildFieldNode(node)) {\n              newVal.push(getInitialPropsValue(arrayField.element));\n              newKeys.push(getNewKey());\n            } else {\n              alreadyUsedIndicies.add(idxFromValue);\n              newVal.push(arrVal[idxFromValue]);\n              newKeys.push(alreadyUsedIndicies.has(idxFromValue) ? getNewKey() : prevKeys[idxFromValue]);\n            }\n          }\n          setKeysForArrayValue(newVal, newKeys);\n          if (!areArraysEqual(arrVal, newVal)) {\n            const transformedProps = replaceValueAtPropPath(rootSchema, node.props, newVal, propPath);\n            slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.setNodes(editor, {\n              props: transformedProps\n            }, {\n              at: path\n            });\n            for (const [idx, [idxInChildrenOfBlock, nodeWithin]] of nodesWithin.entries()) {\n              const newPropPath = [...nodeWithin.propPath];\n              newPropPath[propPath.length] = idx;\n              slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.setNodes(editor, {\n                propPath: newPropPath\n              }, {\n                at: [...path, idxInChildrenOfBlock]\n              });\n            }\n            return;\n          }\n        }\n        const missingKeys = new Map(findChildPropPaths(node.props, componentBlock.schema).map(x => [JSON.stringify(x.path), x.options.kind]));\n        node.children.forEach(node => {\n          (0,emery__WEBPACK_IMPORTED_MODULE_1__.assert)(node.type === 'component-block-prop' || node.type === 'component-inline-prop');\n          missingKeys.delete(JSON.stringify(node.propPath));\n        });\n        if (missingKeys.size) {\n          slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.insertNodes(editor, [...missingKeys].map(([prop, kind]) => ({\n            type: `component-${kind}-prop`,\n            propPath: prop ? JSON.parse(prop) : prop,\n            children: [{\n              text: ''\n            }]\n          })), {\n            at: [...path, node.children.length]\n          });\n          return;\n        }\n        const foundProps = new Set();\n        const stringifiedInlinePropPaths = {};\n        findChildPropPaths(node.props, blockComponents[node.component].schema).forEach((x, index) => {\n          stringifiedInlinePropPaths[JSON.stringify(x.path)] = {\n            options: x.options,\n            index\n          };\n        });\n        for (const [index, childNode] of node.children.entries()) {\n          if (\n          // children that are not these will be handled by\n          // the generic allowedChildren normalization\n          childNode.type !== 'component-inline-prop' && childNode.type !== 'component-block-prop') {\n            continue;\n          }\n          const childPath = [...path, index];\n          const stringifiedPropPath = JSON.stringify(childNode.propPath);\n          if (stringifiedInlinePropPaths[stringifiedPropPath] === undefined) {\n            slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.removeNodes(editor, {\n              at: childPath\n            });\n            return;\n          }\n          if (foundProps.has(stringifiedPropPath)) {\n            slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.removeNodes(editor, {\n              at: childPath\n            });\n            return;\n          }\n          foundProps.add(stringifiedPropPath);\n          const propInfo = stringifiedInlinePropPaths[stringifiedPropPath];\n          const expectedIndex = propInfo.index;\n          if (index !== expectedIndex) {\n            slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.moveNodes(editor, {\n              at: childPath,\n              to: [...path, expectedIndex]\n            });\n            return;\n          }\n          const expectedChildNodeType = `component-${propInfo.options.kind}-prop`;\n          if (childNode.type !== expectedChildNodeType) {\n            slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.setNodes(editor, {\n              type: expectedChildNodeType\n            }, {\n              at: childPath\n            });\n            return;\n          }\n          const documentFeatures = memoizedGetDocumentFeaturesForChildField(propInfo.options);\n          if (normalizeNodeWithinComponentProp([childNode, childPath], editor, documentFeatures)) {\n            return;\n          }\n        }\n      }\n    }\n    normalizeNode(entry);\n  };\n  return editor;\n}\n\n// the only thing that this will fix is a new field being added to an object field, nothing else.\nfunction addMissingFields(value, schema) {\n  if (schema.kind === 'child' || schema.kind === 'form') {\n    return value;\n  }\n  if (schema.kind === 'conditional') {\n    const conditionalValue = value;\n    const updatedInnerValue = addMissingFields(conditionalValue.value, schema.values[conditionalValue.discriminant.toString()]);\n    if (updatedInnerValue === conditionalValue.value) {\n      return value;\n    }\n    return {\n      discriminant: conditionalValue.discriminant,\n      value: updatedInnerValue\n    };\n  }\n  if (schema.kind === 'array') {\n    const arrValue = value;\n    const newArrValue = arrValue.map(x => addMissingFields(x, schema.element));\n    if (areArraysEqual(arrValue, newArrValue)) {\n      return value;\n    }\n    return newArrValue;\n  }\n  if (schema.kind === 'object') {\n    const objectValue = value;\n    let hasChanged = false;\n    const newObjectValue = {};\n    for (const [key, innerSchema] of Object.entries(schema.fields)) {\n      const innerValue = objectValue[key];\n      if (innerValue === undefined) {\n        hasChanged = true;\n        newObjectValue[key] = getInitialPropsValue(innerSchema);\n        continue;\n      }\n      const newInnerValue = addMissingFields(innerValue, innerSchema);\n      if (newInnerValue !== innerValue) {\n        hasChanged = true;\n      }\n      newObjectValue[key] = newInnerValue;\n    }\n    if (hasChanged) {\n      return newObjectValue;\n    }\n    return value;\n  }\n  (0,emery__WEBPACK_IMPORTED_MODULE_1__.assertNever)(schema);\n}\n\nconst paragraphElement = () => ({\n  type: 'paragraph',\n  children: [{\n    text: ''\n  }]\n});\nfunction withParagraphs(editor) {\n  const {\n    normalizeNode\n  } = editor;\n  editor.normalizeNode = entry => {\n    const [node, path] = entry;\n    if (slate__WEBPACK_IMPORTED_MODULE_6__.Editor.isEditor(node)) {\n      let lastNode = node.children[node.children.length - 1];\n      if ((lastNode === null || lastNode === void 0 ? void 0 : lastNode.type) !== 'paragraph') {\n        slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.insertNodes(editor, paragraphElement(), {\n          at: [...path, node.children.length]\n        });\n        return;\n      }\n    }\n    normalizeNode(entry);\n  };\n  return editor;\n}\n\nfunction withLayouts(editor) {\n  const {\n    normalizeNode,\n    deleteBackward\n  } = editor;\n  editor.deleteBackward = unit => {\n    if (editor.selection && slate__WEBPACK_IMPORTED_MODULE_6__.Range.isCollapsed(editor.selection) &&\n    // this is just an little optimisation\n    // we're only doing things if we're at the start of a layout area\n    // and the start of anything will always be offset 0\n    // so we'll bailout if we're not at offset 0\n    editor.selection.anchor.offset === 0) {\n      const [aboveNode, abovePath] = slate__WEBPACK_IMPORTED_MODULE_6__.Editor.above(editor, {\n        match: node => node.type === 'layout-area'\n      }) || [editor, []];\n      if (aboveNode.type === 'layout-area' && slate__WEBPACK_IMPORTED_MODULE_6__.Point.equals(slate__WEBPACK_IMPORTED_MODULE_6__.Editor.start(editor, abovePath), editor.selection.anchor)) {\n        return;\n      }\n    }\n    deleteBackward(unit);\n  };\n  editor.normalizeNode = entry => {\n    const [node, path] = entry;\n    if (slate__WEBPACK_IMPORTED_MODULE_6__.Element.isElement(node) && node.type === 'layout') {\n      if (node.layout === undefined) {\n        slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.unwrapNodes(editor, {\n          at: path\n        });\n        return;\n      }\n      if (node.children.length < node.layout.length) {\n        slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.insertNodes(editor, Array.from({\n          length: node.layout.length - node.children.length\n        }).map(() => ({\n          type: 'layout-area',\n          children: [paragraphElement()]\n        })), {\n          at: [...path, node.children.length]\n        });\n        return;\n      }\n      if (node.children.length > node.layout.length) {\n        Array.from({\n          length: node.children.length - node.layout.length\n        }).map((_, i) => i).reverse().forEach(i => {\n          const layoutAreaToRemovePath = [...path, i + node.layout.length];\n          const child = node.children[i + node.layout.length];\n          moveChildren(editor, layoutAreaToRemovePath, [...path, node.layout.length - 1, node.children[node.layout.length - 1].children.length], node => node.type !== 'paragraph' || slate__WEBPACK_IMPORTED_MODULE_6__.Node.string(child) !== '');\n          slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.removeNodes(editor, {\n            at: layoutAreaToRemovePath\n          });\n        });\n        return;\n      }\n    }\n    normalizeNode(entry);\n  };\n  return editor;\n}\n\nconst markdownLinkPattern = /(^|\\s)\\[(.+?)\\]\\((\\S+)\\)$/;\nfunction withLink(editorDocumentFeatures, componentBlocks, editor) {\n  const {\n    insertText,\n    isInline,\n    normalizeNode\n  } = editor;\n  editor.isInline = element => {\n    return element.type === 'link' ? true : isInline(element);\n  };\n  if (editorDocumentFeatures.links) {\n    editor.insertText = text => {\n      insertText(text);\n      if (text !== ')' || !editor.selection) {\n        return;\n      }\n      const startOfBlock = slate__WEBPACK_IMPORTED_MODULE_6__.Editor.start(editor, slate__WEBPACK_IMPORTED_MODULE_6__.Editor.above(editor, {\n        match: isBlock\n      })[1]);\n      const startOfBlockToEndOfShortcutString = slate__WEBPACK_IMPORTED_MODULE_6__.Editor.string(editor, {\n        anchor: editor.selection.anchor,\n        focus: startOfBlock\n      });\n      const match = markdownLinkPattern.exec(startOfBlockToEndOfShortcutString);\n      if (!match) {\n        return;\n      }\n      const ancestorComponentChildFieldDocumentFeatures = getAncestorComponentChildFieldDocumentFeatures(editor, editorDocumentFeatures, componentBlocks);\n      if ((ancestorComponentChildFieldDocumentFeatures === null || ancestorComponentChildFieldDocumentFeatures === void 0 ? void 0 : ancestorComponentChildFieldDocumentFeatures.documentFeatures.links) === false) {\n        return;\n      }\n      const [, maybeWhitespace, linkText, href] = match;\n      // by doing this, the insertText(')') above will happen in a different undo than the link replacement\n      // so that means that when someone does an undo after this\n      // it will undo to the state of \"[content](link)\" rather than \"[content](link\" (note the missing closing bracket)\n      editor.history.undos.push({\n        operations: [],\n        selectionBefore: editor.selection\n      });\n      const startOfShortcut = match.index === 0 ? startOfBlock : EditorAfterButIgnoringingPointsWithNoContent(editor, startOfBlock, {\n        distance: match.index\n      });\n      const startOfLinkText = EditorAfterButIgnoringingPointsWithNoContent(editor, startOfShortcut, {\n        distance: maybeWhitespace === '' ? 1 : 2\n      });\n      const endOfLinkText = EditorAfterButIgnoringingPointsWithNoContent(editor, startOfLinkText, {\n        distance: linkText.length\n      });\n      slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.delete(editor, {\n        at: {\n          anchor: endOfLinkText,\n          focus: editor.selection.anchor\n        }\n      });\n      slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.delete(editor, {\n        at: {\n          anchor: startOfShortcut,\n          focus: startOfLinkText\n        }\n      });\n      slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.wrapNodes(editor, {\n        type: 'link',\n        href,\n        children: []\n      }, {\n        at: {\n          anchor: editor.selection.anchor,\n          focus: startOfShortcut\n        },\n        split: true\n      });\n      const nextNode = slate__WEBPACK_IMPORTED_MODULE_6__.Editor.next(editor);\n      if (nextNode) {\n        slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.select(editor, nextNode[1]);\n      }\n    };\n  }\n  editor.normalizeNode = ([node, path]) => {\n    if (node.type === 'link') {\n      if (slate__WEBPACK_IMPORTED_MODULE_6__.Node.string(node) === '') {\n        slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.unwrapNodes(editor, {\n          at: path\n        });\n        return;\n      }\n      for (const [idx, child] of node.children.entries()) {\n        if (child.type === 'link') {\n          // links cannot contain links\n          slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.unwrapNodes(editor, {\n            at: [...path, idx]\n          });\n          return;\n        }\n      }\n    }\n    if (isInlineContainer(node)) {\n      let lastMergableLink = null;\n      for (const [idx, child] of node.children.entries()) {\n        var _lastMergableLink;\n        if (child.type === 'link' && child.href === ((_lastMergableLink = lastMergableLink) === null || _lastMergableLink === void 0 ? void 0 : _lastMergableLink.node.href)) {\n          const firstLinkPath = [...path, lastMergableLink.index];\n          const secondLinkPath = [...path, idx];\n          const to = [...firstLinkPath, lastMergableLink.node.children.length];\n          // note this is going in reverse, js doesn't have double-ended iterators so it's a for(;;)\n          for (let i = child.children.length - 1; i >= 0; i--) {\n            const childPath = [...secondLinkPath, i];\n            slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.moveNodes(editor, {\n              at: childPath,\n              to\n            });\n          }\n          slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.removeNodes(editor, {\n            at: secondLinkPath\n          });\n          return;\n        }\n        if (!slate__WEBPACK_IMPORTED_MODULE_6__.Text.isText(child) || child.text !== '') {\n          lastMergableLink = null;\n        }\n        if (child.type === 'link') {\n          lastMergableLink = {\n            index: idx,\n            node: child\n          };\n        }\n      }\n    }\n    normalizeNode([node, path]);\n  };\n  return editor;\n}\n\nconst isListType = type => type === 'ordered-list' || type === 'unordered-list';\nconst isListNode = node => isListType(node.type);\nfunction getAncestorList(editor) {\n  if (editor.selection) {\n    const listItem = slate__WEBPACK_IMPORTED_MODULE_6__.Editor.above(editor, {\n      match: nodeTypeMatcher('list-item')\n    });\n    const list = slate__WEBPACK_IMPORTED_MODULE_6__.Editor.above(editor, {\n      match: isListNode\n    });\n    if (listItem && list) {\n      return {\n        isInside: true,\n        listItem,\n        list\n      };\n    }\n  }\n  return {\n    isInside: false\n  };\n}\nfunction withList(editor) {\n  const {\n    insertBreak,\n    normalizeNode,\n    deleteBackward\n  } = editor;\n  editor.deleteBackward = unit => {\n    if (editor.selection) {\n      const ancestorList = getAncestorList(editor);\n      if (ancestorList.isInside && slate__WEBPACK_IMPORTED_MODULE_6__.Range.isCollapsed(editor.selection) && slate__WEBPACK_IMPORTED_MODULE_6__.Editor.isStart(editor, editor.selection.anchor, ancestorList.list[1])) {\n        slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.unwrapNodes(editor, {\n          match: isListNode,\n          split: true\n        });\n        return;\n      }\n    }\n    deleteBackward(unit);\n  };\n  editor.insertBreak = () => {\n    const [listItem] = slate__WEBPACK_IMPORTED_MODULE_6__.Editor.nodes(editor, {\n      match: node => node.type === 'list-item',\n      mode: 'lowest'\n    });\n    if (listItem && slate__WEBPACK_IMPORTED_MODULE_6__.Node.string(listItem[0]) === '') {\n      slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.unwrapNodes(editor, {\n        match: isListNode,\n        split: true\n      });\n      return;\n    }\n    insertBreak();\n  };\n  editor.normalizeNode = entry => {\n    const [node, path] = entry;\n    if (slate__WEBPACK_IMPORTED_MODULE_6__.Element.isElement(node) || slate__WEBPACK_IMPORTED_MODULE_6__.Editor.isEditor(node)) {\n      const isElementBeingNormalizedAList = isListNode(node);\n      for (const [childNode, childPath] of slate__WEBPACK_IMPORTED_MODULE_6__.Node.children(editor, path)) {\n        const index = childPath[childPath.length - 1];\n        // merge sibling lists\n        if (isListNode(childNode)) {\n          var _node$children;\n          if (((_node$children = node.children[childPath[childPath.length - 1] + 1]) === null || _node$children === void 0 ? void 0 : _node$children.type) === childNode.type) {\n            const siblingNodePath = slate__WEBPACK_IMPORTED_MODULE_6__.Path.next(childPath);\n            moveChildren(editor, siblingNodePath, [...childPath, childNode.children.length]);\n            slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.removeNodes(editor, {\n              at: siblingNodePath\n            });\n            return;\n          }\n          if (isElementBeingNormalizedAList) {\n            const previousChild = node.children[index - 1];\n            if (slate__WEBPACK_IMPORTED_MODULE_6__.Element.isElement(previousChild)) {\n              slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.moveNodes(editor, {\n                at: childPath,\n                to: [...slate__WEBPACK_IMPORTED_MODULE_6__.Path.previous(childPath), previousChild.children.length - 1]\n              });\n            } else {\n              slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.unwrapNodes(editor, {\n                at: childPath\n              });\n            }\n            return;\n          }\n        }\n        if (node.type === 'list-item' && childNode.type !== 'list-item-content' && index === 0 && isBlock(childNode)) {\n          if (path[path.length - 1] !== 0) {\n            const previousChild = slate__WEBPACK_IMPORTED_MODULE_6__.Node.get(editor, slate__WEBPACK_IMPORTED_MODULE_6__.Path.previous(path));\n            if (slate__WEBPACK_IMPORTED_MODULE_6__.Element.isElement(previousChild)) {\n              slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.moveNodes(editor, {\n                at: path,\n                to: [...slate__WEBPACK_IMPORTED_MODULE_6__.Path.previous(path), previousChild.children.length]\n              });\n              return;\n            }\n          }\n          slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.unwrapNodes(editor, {\n            at: childPath\n          });\n          return;\n        }\n        if (node.type === 'list-item' && childNode.type === 'list-item-content' && index !== 0) {\n          slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.splitNodes(editor, {\n            at: childPath\n          });\n          return;\n        }\n      }\n    }\n    normalizeNode(entry);\n  };\n  return editor;\n}\n\nfunction order(a, b) {\n  return {\n    start: Math.min(a, b),\n    end: Math.max(a, b)\n  };\n}\nfunction getRelativeRowPath(hasHead, rowIndex) {\n  return hasHead ? rowIndex === 0 ? [0, 0] : [1, rowIndex - 1] : [0, rowIndex];\n}\nfunction getSelectedTableArea(editor) {\n  var _Editor$above, _editor$selection, _Editor$above2, _editor$selection2;\n  const anchor = (_Editor$above = slate__WEBPACK_IMPORTED_MODULE_6__.Editor.above(editor, {\n    match: nodeTypeMatcher('table-cell'),\n    at: (_editor$selection = editor.selection) === null || _editor$selection === void 0 ? void 0 : _editor$selection.anchor.path\n  })) === null || _Editor$above === void 0 ? void 0 : _Editor$above[1];\n  const focus = (_Editor$above2 = slate__WEBPACK_IMPORTED_MODULE_6__.Editor.above(editor, {\n    match: nodeTypeMatcher('table-cell'),\n    at: (_editor$selection2 = editor.selection) === null || _editor$selection2 === void 0 ? void 0 : _editor$selection2.focus.path\n  })) === null || _Editor$above2 === void 0 ? void 0 : _Editor$above2[1];\n  const table = slate__WEBPACK_IMPORTED_MODULE_6__.Editor.above(editor, {\n    match: nodeTypeMatcher('table')\n  });\n  if (editor.selection && table && slate__WEBPACK_IMPORTED_MODULE_6__.Element.isElement(table[0].children[0]) && anchor && focus && slate__WEBPACK_IMPORTED_MODULE_6__.Path.equals(anchor.slice(0, -3), focus.slice(0, -3))) {\n    const [start, end] = slate__WEBPACK_IMPORTED_MODULE_6__.Editor.edges(editor, editor.selection);\n    return {\n      tablePath: table[1],\n      table: table[0],\n      singleCell: slate__WEBPACK_IMPORTED_MODULE_6__.Path.equals(anchor, focus) ? slate__WEBPACK_IMPORTED_MODULE_6__.Point.equals(slate__WEBPACK_IMPORTED_MODULE_6__.Editor.start(editor, anchor), start) && slate__WEBPACK_IMPORTED_MODULE_6__.Point.equals(slate__WEBPACK_IMPORTED_MODULE_6__.Editor.end(editor, anchor), end) && !slate__WEBPACK_IMPORTED_MODULE_6__.Point.equals(start, end) ? 'selected' : 'not-selected' : 'many',\n      row: order(anchor[anchor.length - 2] + anchor[anchor.length - 3], focus[focus.length - 2] + focus[anchor.length - 3]),\n      column: order(anchor[anchor.length - 1], focus[focus.length - 1])\n    };\n  }\n}\nconst cell = header => ({\n  type: 'table-cell',\n  ...(header ? {\n    header: true\n  } : {}),\n  children: [{\n    type: 'paragraph',\n    children: [{\n      text: ''\n    }]\n  }]\n});\nfunction cloneDescendant(node) {\n  if (slate__WEBPACK_IMPORTED_MODULE_6__.Text.isText(node)) return {\n    ...node\n  };\n  return {\n    ...node,\n    children: node.children.map(cloneDescendant)\n  };\n}\nfunction withTable(editor) {\n  const {\n    deleteFragment,\n    normalizeNode,\n    getFragment,\n    insertFragment,\n    deleteBackward\n  } = editor;\n  editor.insertFragment = fragment => {\n    const selectedTableArea = getSelectedTableArea(editor);\n    if (!selectedTableArea || fragment.length !== 1 || fragment[0].type !== 'table') {\n      insertFragment(fragment);\n      return;\n    }\n    const newRows = fragment[0].children.flatMap(child => child.type === 'table-head' || child.type === 'table-body' ? child.children : []);\n    if (!newRows.every(nodeTypeMatcher('table-row'))) {\n      insertFragment(fragment);\n      return;\n    }\n    let {\n      row,\n      column,\n      tablePath,\n      table\n    } = selectedTableArea;\n    const existingBody = selectedTableArea.table.children[selectedTableArea.table.children.length === 1 ? 0 : 1];\n    if (newRows[0].type !== 'table-row' || existingBody.type !== 'table-body' || existingBody.children[0].type !== 'table-row') {\n      insertFragment(fragment);\n      return;\n    }\n    const hasHead = table.children[0].type === 'table-head';\n    if (selectedTableArea.singleCell !== 'many') {\n      row = {\n        start: row.start,\n        end: Math.min(row.start + newRows.length - 1, existingBody.children.length - 1 + (hasHead ? 1 : 0))\n      };\n      column = {\n        start: column.start,\n        end: Math.min(column.start + newRows[0].children.length - 1, existingBody.children[0].children.length - 1)\n      };\n    }\n    slate__WEBPACK_IMPORTED_MODULE_6__.Editor.withoutNormalizing(editor, () => {\n      for (let rowIndex = row.start; rowIndex <= row.end; rowIndex++) {\n        const newRow = newRows[(rowIndex - row.start) % newRows.length];\n        for (let cellIndex = column.start; cellIndex <= column.end; cellIndex++) {\n          const relativeCellPath = [...getRelativeRowPath(hasHead, rowIndex), cellIndex];\n          const cell = slate__WEBPACK_IMPORTED_MODULE_6__.Node.get(table, relativeCellPath);\n          const newCell = newRow.children[(cellIndex - column.start) % newRow.children.length];\n          if (cell.type !== 'table-cell' || newCell.type !== 'table-cell') {\n            continue;\n          }\n          const cellPath = [...tablePath, ...relativeCellPath];\n          for (const childIdx of [...cell.children.keys()].reverse()) {\n            slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.removeNodes(editor, {\n              at: [...cellPath, childIdx]\n            });\n          }\n          slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.insertNodes(editor, newCell.children.map(cloneDescendant), {\n            at: [...cellPath, 0]\n          });\n        }\n      }\n      slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.setSelection(editor, {\n        anchor: slate__WEBPACK_IMPORTED_MODULE_6__.Editor.start(editor, [...tablePath, ...getRelativeRowPath(hasHead, row.start), column.start]),\n        focus: slate__WEBPACK_IMPORTED_MODULE_6__.Editor.end(editor, [...tablePath, ...getRelativeRowPath(hasHead, row.end), column.end])\n      });\n    });\n  };\n  editor.deleteBackward = unit => {\n    if (editor.selection && slate__WEBPACK_IMPORTED_MODULE_6__.Range.isCollapsed(editor.selection) && editor.selection.anchor.offset === 0) {\n      const tableCell = slate__WEBPACK_IMPORTED_MODULE_6__.Editor.above(editor, {\n        match: nodeTypeMatcher('table-cell')\n      });\n      if (tableCell && tableCell[0].children[0].type === 'paragraph' && tableCell[0].children[0].children[0].type === undefined && slate__WEBPACK_IMPORTED_MODULE_6__.Path.equals(editor.selection.anchor.path, [...tableCell[1], 0, 0])) {\n        return;\n      }\n    }\n    deleteBackward(unit);\n  };\n  editor.getFragment = () => {\n    const selectedTableArea = getSelectedTableArea(editor);\n    if (selectedTableArea && selectedTableArea.singleCell !== 'not-selected') {\n      var _table$children$;\n      const {\n        table\n      } = selectedTableArea;\n      const first = table.children[0].type === 'table-head' || table.children[0].type === 'table-body' ? table.children[0] : undefined;\n      if (!first) {\n        return getFragment();\n      }\n      const second = ((_table$children$ = table.children[1]) === null || _table$children$ === void 0 ? void 0 : _table$children$.type) === 'table-body' ? table.children[1] : undefined;\n      const body = second || first;\n      const hasHead = first.type === 'table-head';\n      const isSelectionInHead = selectedTableArea.row.start === 0 && !!second;\n      const columnLength = selectedTableArea.column.end - selectedTableArea.column.start + 1;\n      return [{\n        type: 'table',\n        children: [...(isSelectionInHead ? [{\n          type: 'table-head',\n          children: [{\n            type: 'table-row',\n            children: Array.from({\n              length: columnLength\n            }).map((_, columnIndex) => first.children[0].children[columnIndex + selectedTableArea.column.start])\n          }]\n        }] : []), {\n          type: 'table-body',\n          children: Array.from({\n            length: selectedTableArea.row.end - selectedTableArea.row.start + (isSelectionInHead ? 0 : 1)\n          }).map((_, rowIndex) => ({\n            type: 'table-row',\n            children: Array.from({\n              length: columnLength\n            }).map((_, columnIndex) => body.children[rowIndex + selectedTableArea.row.start - (hasHead && !isSelectionInHead ? 1 : 0)].children[columnIndex + selectedTableArea.column.start])\n          }))\n        }]\n      }];\n    }\n    return getFragment();\n  };\n  editor.deleteFragment = direction => {\n    if (!editor.selection || slate__WEBPACK_IMPORTED_MODULE_6__.Range.isCollapsed(editor.selection)) {\n      deleteFragment(direction);\n      return;\n    }\n    const selectedTableArea = getSelectedTableArea(editor);\n    if (!selectedTableArea || selectedTableArea.singleCell === 'not-selected') {\n      deleteFragment(direction);\n      return;\n    }\n    const headOrBody = selectedTableArea.table.children[0];\n    if (!slate__WEBPACK_IMPORTED_MODULE_6__.Element.isElement(headOrBody) || !slate__WEBPACK_IMPORTED_MODULE_6__.Element.isElement(headOrBody.children[0])) {\n      deleteFragment(direction);\n      return;\n    }\n    const maxRowIdx = selectedTableArea.table.children.reduce((sum, headOrBody) => sum + (headOrBody.type === 'table-head' || headOrBody.type === 'table-body' ? headOrBody.children.length : 0), 0) - 1;\n    const {\n      row,\n      column,\n      tablePath\n    } = selectedTableArea;\n    // note the fact that hasWholeColumnSelected uses row and hasWholeRowSelected uses column\n    // is not a mistake. if a whole column has been selected, then the starting row is 0 and the end is the last row\n    const hasWholeColumnSelected = row.start === 0 && row.end === maxRowIdx;\n    const hasWholeRowSelected = column.start === 0 && column.end === headOrBody.children[0].children.length - 1;\n    if (hasWholeColumnSelected && hasWholeRowSelected) {\n      slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.removeNodes(editor, {\n        at: tablePath\n      });\n      return;\n    }\n    const hasHead = headOrBody.type === 'table-head';\n    if (hasWholeRowSelected) {\n      slate__WEBPACK_IMPORTED_MODULE_6__.Editor.withoutNormalizing(editor, () => {\n        for (let i = row.end; i >= row.start; i--) {\n          if (hasHead) {\n            if (i === 0) {\n              slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.removeNodes(editor, {\n                at: [...tablePath, 0]\n              });\n              continue;\n            }\n            slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.removeNodes(editor, {\n              at: [...tablePath, 1, i - 1]\n            });\n            continue;\n          }\n          slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.removeNodes(editor, {\n            at: [...tablePath, 0, i]\n          });\n        }\n      });\n      return;\n    }\n    if (hasWholeColumnSelected) {\n      slate__WEBPACK_IMPORTED_MODULE_6__.Editor.withoutNormalizing(editor, () => {\n        for (let i = column.end; i >= column.start; i--) {\n          for (let rowIdx = 0; rowIdx <= maxRowIdx; rowIdx++) {\n            slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.removeNodes(editor, {\n              at: [...tablePath, ...getRelativeRowPath(hasHead, rowIdx), i]\n            });\n          }\n        }\n        const selectionPath = [...tablePath, 0, 0, column.start];\n        const point = slate__WEBPACK_IMPORTED_MODULE_6__.Editor.start(editor, column.start === 0 ? selectionPath : slate__WEBPACK_IMPORTED_MODULE_6__.Path.previous(selectionPath));\n        slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.select(editor, point);\n      });\n      return;\n    }\n    const selectionStart = slate__WEBPACK_IMPORTED_MODULE_6__.Editor.start(editor, editor.selection).path;\n    slate__WEBPACK_IMPORTED_MODULE_6__.Editor.withoutNormalizing(editor, () => {\n      for (let rowIndex = row.start; rowIndex <= row.end; rowIndex++) {\n        for (let cellIndex = column.start; cellIndex <= column.end; cellIndex++) {\n          const relativeCellPath = [...getRelativeRowPath(hasHead, rowIndex), cellIndex];\n          const cell = slate__WEBPACK_IMPORTED_MODULE_6__.Node.get(selectedTableArea.table, relativeCellPath);\n          if (!slate__WEBPACK_IMPORTED_MODULE_6__.Element.isElement(cell)) {\n            continue;\n          }\n          const cellPath = [...tablePath, ...relativeCellPath];\n          slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.insertNodes(editor, {\n            type: 'paragraph',\n            children: [{\n              text: ''\n            }]\n          }, {\n            at: [...cellPath, 0]\n          });\n          for (const childIdx of [...cell.children.keys()].reverse()) {\n            slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.removeNodes(editor, {\n              at: [...cellPath, childIdx + 1]\n            });\n          }\n        }\n      }\n      slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.select(editor, selectionStart);\n    });\n  };\n  editor.normalizeNode = entry => {\n    const [node, path] = entry;\n    if (node.type === 'table-head' && node.children.length > 1) {\n      moveChildren(editor, path, slate__WEBPACK_IMPORTED_MODULE_6__.Path.next(path), (_, i) => i !== 0);\n      return;\n    }\n    let didUpdateThings = false;\n    for (const parent of ['table-body', 'table-head']) {\n      if (node.type === parent) {\n        for (const [rowIdx, row] of node.children.entries()) {\n          if (row.type === 'table-row') {\n            for (const [cellIdx, cell] of row.children.entries()) {\n              if (cell.type === 'table-cell') {\n                const at = [...path, rowIdx, cellIdx];\n                if (cell.header && parent === 'table-body') {\n                  slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.unsetNodes(editor, 'header', {\n                    at\n                  });\n                  didUpdateThings = true;\n                }\n                if (!cell.header && parent === 'table-head') {\n                  slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.setNodes(editor, {\n                    header: true\n                  }, {\n                    at\n                  });\n                  didUpdateThings = true;\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    if (didUpdateThings) {\n      return;\n    }\n    if (node.type === 'table') {\n      const maxRowCount = node.children.reduce((max, node) => node.type === 'table-head' || node.type === 'table-body' ? node.children.reduce((max, node) => node.type === 'table-row' ? Math.max(max, node.children.length) : max, max) : max, 0);\n      let didInsert = false;\n      for (const [idx, child] of node.children.entries()) {\n        if (child.type === 'table-body' || child.type === 'table-head') {\n          for (const [rowIdx, row] of child.children.entries()) {\n            if (row.type === 'table-row' && row.children.length !== maxRowCount) {\n              slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.insertNodes(editor, Array.from({\n                length: maxRowCount - row.children.length\n              }, () => cell(child.type === 'table-head')), {\n                at: [...path, idx, rowIdx, row.children.length]\n              });\n              didInsert = true;\n            }\n          }\n        }\n      }\n      if (didInsert) {\n        return;\n      }\n      if (node.children.length === 1 && node.children[0].type === 'table-head') {\n        slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.insertNodes(editor, {\n          type: 'table-body',\n          children: Array.from({\n            length: node.children[0].children.length\n          }, () => cell(false))\n        }, {\n          at: [...path, 1]\n        });\n        return;\n      }\n      if (node.children.length === 2 && node.children[1].type === 'table-head') {\n        slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.moveNodes(editor, {\n          at: [...path, 1],\n          to: [...path, 0]\n        });\n        return;\n      }\n      if (node.children.length > 2) {\n        moveChildren(editor, path, slate__WEBPACK_IMPORTED_MODULE_6__.Path.next(path), (_, i) => i !== 0 && i !== 1);\n        return;\n      }\n    }\n    normalizeNode(entry);\n  };\n  return editor;\n}\n\nfunction createDocumentEditorForNormalization(documentFeatures, componentBlocks) {\n  return _createDocumentEditor((0,slate__WEBPACK_IMPORTED_MODULE_6__.createEditor)(), documentFeatures, componentBlocks);\n}\nfunction _createDocumentEditor(baseEditor, documentFeatures, componentBlocks) {\n  return withBlocksSchema(withParagraphs(withLink(documentFeatures, componentBlocks, withList(withTable(withComponentBlocks(componentBlocks, documentFeatures, withVoidElements(withLayouts(withCodeBlock(documentFeatures, componentBlocks, withDocumentFeaturesNormalization(documentFeatures, baseEditor))))))))));\n}\nfunction withBlocksSchema(editor) {\n  const {\n    normalizeNode\n  } = editor;\n  editor.normalizeNode = ([node, path]) => {\n    if (!slate__WEBPACK_IMPORTED_MODULE_6__.Text.isText(node) && node.type !== 'link') {\n      const nodeType = slate__WEBPACK_IMPORTED_MODULE_6__.Editor.isEditor(node) ? 'editor' : node.type;\n      if (typeof nodeType !== 'string' || editorSchema[nodeType] === undefined) {\n        slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.unwrapNodes(editor, {\n          at: path\n        });\n        return;\n      }\n      const info = editorSchema[nodeType];\n      if (info.kind === 'blocks' && node.children.length !== 0 && node.children.every(child => !isBlock(child))) {\n        slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.wrapNodes(editor, {\n          type: info.blockToWrapInlinesIn,\n          children: []\n        }, {\n          at: path,\n          match: node => !isBlock(node)\n        });\n        return;\n      }\n      let didUpdate = false;\n      for (const [index, childNode] of [...node.children.entries()].reverse()) {\n        const childPath = [...path, index];\n        if (info.kind === 'inlines') {\n          if (!slate__WEBPACK_IMPORTED_MODULE_6__.Text.isText(childNode) && isBlock(childNode)) {\n            handleNodeInInvalidPosition(editor, [childNode, childPath], path);\n            didUpdate = true;\n            continue;\n          }\n        } else {\n          if (!isBlock(childNode)) {\n            slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.wrapNodes(editor, {\n              type: info.blockToWrapInlinesIn,\n              children: []\n            }, {\n              at: childPath\n            });\n            didUpdate = true;\n            continue;\n          }\n          if (!info.allowedChildren.has(childNode.type)) {\n            handleNodeInInvalidPosition(editor, [childNode, childPath], path);\n            didUpdate = true;\n            continue;\n          }\n        }\n      }\n      if (didUpdate) {\n        return;\n      }\n    }\n    normalizeNode([node, path]);\n  };\n  return editor;\n}\nfunction handleNodeInInvalidPosition(editor, [node, path], ancestorPath) {\n  const nodeType = node.type;\n  const childNodeInfo = editorSchema[nodeType];\n  // the parent of a block will never be an inline so this casting is okay\n  const ancestorNode = slate__WEBPACK_IMPORTED_MODULE_6__.Node.get(editor, ancestorPath);\n  const parentNodeType = slate__WEBPACK_IMPORTED_MODULE_6__.Editor.isEditor(ancestorNode) ? 'editor' : ancestorNode.type;\n  const parentNodeInfo = editorSchema[parentNodeType];\n  if (!childNodeInfo || childNodeInfo.invalidPositionHandleMode === 'unwrap') {\n    if (parentNodeInfo.kind === 'blocks' && parentNodeInfo.blockToWrapInlinesIn) {\n      slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.setNodes(editor, {\n        type: parentNodeInfo.blockToWrapInlinesIn,\n        ...Object.fromEntries(Object.keys(node).filter(key => key !== 'type' && key !== 'children').map(key => [key, null])) // the Slate types don't understand that null is allowed and it will unset properties with setNodes\n      }, {\n        at: path\n      });\n      return;\n    }\n    slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.unwrapNodes(editor, {\n      at: path\n    });\n    return;\n  }\n  const info = editorSchema[ancestorNode.type || 'editor'];\n  if ((info === null || info === void 0 ? void 0 : info.kind) === 'blocks' && info.allowedChildren.has(nodeType)) {\n    if (ancestorPath.length === 0) {\n      slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.moveNodes(editor, {\n        at: path,\n        to: [path[0] + 1]\n      });\n    } else {\n      slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.moveNodes(editor, {\n        at: path,\n        to: slate__WEBPACK_IMPORTED_MODULE_6__.Path.next(ancestorPath)\n      });\n    }\n    return;\n  }\n  if (slate__WEBPACK_IMPORTED_MODULE_6__.Editor.isEditor(ancestorNode)) {\n    slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.moveNodes(editor, {\n      at: path,\n      to: [path[0] + 1]\n    });\n    slate__WEBPACK_IMPORTED_MODULE_6__.Transforms.unwrapNodes(editor, {\n      at: [path[0] + 1]\n    });\n    return;\n  }\n  handleNodeInInvalidPosition(editor, [node, path], ancestorPath.slice(0, -1));\n}\nfunction withVoidElements(editor) {\n  const {\n    isVoid\n  } = editor;\n  editor.isVoid = node => {\n    return node.type === 'divider' || node.type === 'image' || isVoid(node);\n  };\n  return editor;\n}\n\nconst textEncoder = new TextEncoder();\nconst textDecoder = new TextDecoder();\nconst defaultAltField = text({\n  label: 'Alt text',\n  description: 'This text will be used by screen readers and search engines.'\n});\nconst emptyTitleField = basicFormFieldWithSimpleReaderParse({\n  Input() {\n    return null;\n  },\n  defaultValue() {\n    return '';\n  },\n  parse(value) {\n    if (value === undefined) return '';\n    if (typeof value !== 'string') {\n      throw new FieldDataError('Must be string');\n    }\n    return value;\n  },\n  validate(value) {\n    return value;\n  },\n  serialize(value) {\n    return {\n      value\n    };\n  }\n});\nfunction normaliseDocumentFeatures(config) {\n  var _config$formatting, _formatting$alignment, _formatting$alignment2, _formatting$blockType, _formatting$inlineMar, _formatting$inlineMar2, _formatting$inlineMar3, _formatting$inlineMar4, _formatting$inlineMar5, _formatting$inlineMar6, _formatting$inlineMar7, _formatting$inlineMar8, _formatting$listTypes, _formatting$listTypes2, _imagesConfig$schema$, _imagesConfig$schema, _imagesConfig$schema$2, _imagesConfig$schema2;\n  const formatting = config.formatting === true ? {\n    // alignment: true, // not supported natively in markdown\n    blockTypes: true,\n    headingLevels: true,\n    inlineMarks: true,\n    listTypes: true,\n    softBreaks: true\n  } : (_config$formatting = config.formatting) !== null && _config$formatting !== void 0 ? _config$formatting : {};\n  const imagesConfig = config.images === true ? {} : config.images;\n  return {\n    formatting: {\n      alignment: formatting.alignment === true ? {\n        center: true,\n        end: true\n      } : {\n        center: !!((_formatting$alignment = formatting.alignment) !== null && _formatting$alignment !== void 0 && _formatting$alignment.center),\n        end: !!((_formatting$alignment2 = formatting.alignment) !== null && _formatting$alignment2 !== void 0 && _formatting$alignment2.end)\n      },\n      blockTypes: (formatting === null || formatting === void 0 ? void 0 : formatting.blockTypes) === true ? {\n        blockquote: true,\n        code: {\n          schema: object({})\n        }\n      } : {\n        blockquote: !!((_formatting$blockType = formatting.blockTypes) !== null && _formatting$blockType !== void 0 && _formatting$blockType.blockquote),\n        code: (_formatting$blockType2 => {\n          if (((_formatting$blockType2 = formatting.blockTypes) === null || _formatting$blockType2 === void 0 ? void 0 : _formatting$blockType2.code) === undefined) {\n            return false;\n          }\n          if (formatting.blockTypes.code === true || !formatting.blockTypes.code.schema) {\n            return {\n              schema: object({})\n            };\n          }\n          for (const key of ['type', 'children', 'language']) {\n            if (key in formatting.blockTypes.code.schema) {\n              throw new Error(`\"${key}\" cannot be a key in the schema for code blocks`);\n            }\n          }\n          return {\n            schema: object(formatting.blockTypes.code.schema)\n          };\n        })()\n      },\n      headings: (_obj$schema => {\n        const opt = formatting === null || formatting === void 0 ? void 0 : formatting.headingLevels;\n        const obj = typeof opt === 'object' && 'levels' in opt ? opt : {\n          levels: opt,\n          schema: undefined\n        };\n        if (obj.schema) {\n          for (const key of ['type', 'children', 'level', 'textAlign']) {\n            if (key in obj.schema) {\n              throw new Error(`\"${key}\" cannot be a key in the schema for headings`);\n            }\n          }\n        }\n        return {\n          levels: [...new Set(obj.levels === true ? [1, 2, 3, 4, 5, 6] : obj.levels)],\n          schema: object((_obj$schema = obj.schema) !== null && _obj$schema !== void 0 ? _obj$schema : {})\n        };\n      })(),\n      inlineMarks: formatting.inlineMarks === true ? {\n        bold: true,\n        code: true,\n        italic: true,\n        keyboard: false,\n        // not supported natively in markdown\n        strikethrough: true,\n        subscript: false,\n        // not supported natively in markdown\n        superscript: false,\n        // not supported natively in markdown\n        underline: false // not supported natively in markdown\n      } : {\n        bold: !!((_formatting$inlineMar = formatting.inlineMarks) !== null && _formatting$inlineMar !== void 0 && _formatting$inlineMar.bold),\n        code: !!((_formatting$inlineMar2 = formatting.inlineMarks) !== null && _formatting$inlineMar2 !== void 0 && _formatting$inlineMar2.code),\n        italic: !!((_formatting$inlineMar3 = formatting.inlineMarks) !== null && _formatting$inlineMar3 !== void 0 && _formatting$inlineMar3.italic),\n        strikethrough: !!((_formatting$inlineMar4 = formatting.inlineMarks) !== null && _formatting$inlineMar4 !== void 0 && _formatting$inlineMar4.strikethrough),\n        underline: !!((_formatting$inlineMar5 = formatting.inlineMarks) !== null && _formatting$inlineMar5 !== void 0 && _formatting$inlineMar5.underline),\n        keyboard: !!((_formatting$inlineMar6 = formatting.inlineMarks) !== null && _formatting$inlineMar6 !== void 0 && _formatting$inlineMar6.keyboard),\n        subscript: !!((_formatting$inlineMar7 = formatting.inlineMarks) !== null && _formatting$inlineMar7 !== void 0 && _formatting$inlineMar7.subscript),\n        superscript: !!((_formatting$inlineMar8 = formatting.inlineMarks) !== null && _formatting$inlineMar8 !== void 0 && _formatting$inlineMar8.superscript)\n      },\n      listTypes: formatting.listTypes === true ? {\n        ordered: true,\n        unordered: true\n      } : {\n        ordered: !!((_formatting$listTypes = formatting.listTypes) !== null && _formatting$listTypes !== void 0 && _formatting$listTypes.ordered),\n        unordered: !!((_formatting$listTypes2 = formatting.listTypes) !== null && _formatting$listTypes2 !== void 0 && _formatting$listTypes2.unordered)\n      },\n      softBreaks: !!formatting.softBreaks\n    },\n    links: !!config.links,\n    layouts: [...new Set((config.layouts || []).map(x => JSON.stringify(x)))].map(x => JSON.parse(x)),\n    dividers: !!config.dividers,\n    images: imagesConfig === undefined ? false : {\n      ...imagesConfig,\n      schema: {\n        alt: (_imagesConfig$schema$ = (_imagesConfig$schema = imagesConfig.schema) === null || _imagesConfig$schema === void 0 ? void 0 : _imagesConfig$schema.alt) !== null && _imagesConfig$schema$ !== void 0 ? _imagesConfig$schema$ : defaultAltField,\n        title: (_imagesConfig$schema$2 = (_imagesConfig$schema2 = imagesConfig.schema) === null || _imagesConfig$schema2 === void 0 ? void 0 : _imagesConfig$schema2.title) !== null && _imagesConfig$schema$2 !== void 0 ? _imagesConfig$schema$2 : emptyTitleField\n      }\n    },\n    tables: !!config.tables\n  };\n}\nfunction document$1({\n  label,\n  componentBlocks = {},\n  description,\n  ...documentFeaturesConfig\n}) {\n  const documentFeatures = normaliseDocumentFeatures(documentFeaturesConfig);\n  const parse = mode => (_value, data) => {\n    const markdoc = textDecoder.decode(data.content);\n    const document = fromMarkdoc(_markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__[\"default\"].parse(markdoc), componentBlocks);\n    const editor = createDocumentEditorForNormalization(documentFeatures, componentBlocks);\n    editor.children = document;\n    slate__WEBPACK_IMPORTED_MODULE_6__.Editor.normalize(editor, {\n      force: true\n    });\n    return deserializeFiles(editor.children, componentBlocks, data.other, data.external || new Map(), mode, documentFeatures, data.slug);\n  };\n  return {\n    kind: 'form',\n    formKind: 'content',\n    defaultValue() {\n      return [{\n        type: 'paragraph',\n        children: [{\n          text: ''\n        }]\n      }];\n    },\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(DocumentFieldInput, {\n        componentBlocks: componentBlocks,\n        description: description,\n        label: label,\n        documentFeatures: documentFeatures,\n        ...props\n      });\n    },\n    parse: parse('edit'),\n    contentExtension: '.mdoc',\n    validate(value) {\n      return value;\n    },\n    directories: [...collectDirectoriesUsedInSchema(object(Object.fromEntries(Object.entries(componentBlocks).map(([name, block]) => [name, object(block.schema)])))), ...(typeof documentFeatures.images === 'object' && typeof documentFeatures.images.directory === 'string' ? [fixPath(documentFeatures.images.directory)] : [])],\n    serialize(value, opts) {\n      const {\n        extraFiles,\n        node\n      } = toMarkdocDocument(value, {\n        componentBlocks,\n        documentFeatures,\n        slug: opts.slug\n      });\n      const other = new Map();\n      const external = new Map();\n      for (const file of extraFiles) {\n        if (file.parent === undefined) {\n          other.set(file.path, file.contents);\n          continue;\n        }\n        if (!external.has(file.parent)) {\n          external.set(file.parent, new Map());\n        }\n        external.get(file.parent).set(file.path, file.contents);\n      }\n      return {\n        content: textEncoder.encode(_markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__[\"default\"].format(_markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__[\"default\"].parse(_markdoc_markdoc__WEBPACK_IMPORTED_MODULE_7__[\"default\"].format(node)))),\n        other,\n        external,\n        value: undefined\n      };\n    },\n    reader: {\n      parse: parse('read')\n    }\n  };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGtleXN0YXRpYytjb3JlQDAuMi4xMl9uZXh0QDE0LjIuMl9yZWFjdC1kb21AMTguMi4wX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvaW5kZXgtOTA2MDg1MzEubm9kZS5yZWFjdC1zZXJ2ZXIuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFnRDtBQUMrRDtBQUMzQjtBQUN4QztBQUNEO0FBQ1A7QUFDSTtBQUNROztBQUVoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlJQUF5SSxXQUFXO0FBQ3BKO0FBQ0EsMEZBQTBGLFlBQVksTUFBTSxLQUFLO0FBQ2pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd1NBQXdTLFVBQVU7QUFDbFQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFNBQVMsR0FBRyxLQUFLLEVBQUUsT0FBTztBQUN0QztBQUNBO0FBQ0EsWUFBWSxJQUFJLEVBQUUsb0RBQW9ELEVBQUUsaUNBQWlDO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsS0FBSztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxXQUFXLE1BQU0sa0NBQWtDO0FBQy9HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSw2Q0FBTSwyRUFBMkUscUJBQXFCO0FBQzFHLElBQUksNkNBQU0sa0NBQWtDLHFCQUFxQjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsU0FBUyxrREFBVTtBQUNuQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksNkNBQU07QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isc0JBQXNCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxrREFBVztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsS0FBSztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNB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YjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsa0RBQVc7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLDZEQUFhO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLDZEQUFhO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHdEQUFRO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFLHdEQUFRO0FBQ1YsRUFBRSw2REFBYTtBQUNmOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsOENBQThDLGVBQWU7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxVQUFVO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsUUFBUSxJQUFJO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFD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QSxnQkFBZ0IsWUFBWTtBQUM1QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixJQUFJLElBQUk7QUFDUjtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsc0RBQUc7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtGQUFrRix5QkFBeUI7QUFDM0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsOERBQThELEVBQUUsMEJBQTBCLEVBQUU7QUFDNUY7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxHQUFHO0FBQzVDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FB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Q0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLG1FQUFtRTtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLElBQUksT0FBTyxJQUFJO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSw4QkFBOEIsVUFBVTtBQUN4QztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7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QTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLG9DQUFvQztBQUNwQztBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxxQkFBcUIsS0FBSztBQUMxQixDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FB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O0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsK0RBQWMsQ0FBQyw4REFBYSxDQUFDLCtEQUFjO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRXMwRSIsInNvdXJjZXMiOlsid2VicGFjazovL0BrZXlzdGF0aWMvdGVtcGxhdGVzLW5leHRqcy8uL25vZGVfbW9kdWxlcy8ucG5wbS9Aa2V5c3RhdGljK2NvcmVAMC4yLjEyX25leHRAMTQuMi4yX3JlYWN0LWRvbUAxOC4yLjBfcmVhY3RAMTguMi4wL25vZGVfbW9kdWxlcy9Aa2V5c3RhdGljL2NvcmUvZGlzdC9pbmRleC05MDYwODUzMS5ub2RlLnJlYWN0LXNlcnZlci5lc20uanM/ZThhNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTWFya2RvYywgeyBBc3QgfSBmcm9tICdAbWFya2RvYy9tYXJrZG9jJztcbmltcG9ydCB7IEVsZW1lbnQgYXMgRWxlbWVudCQxLCBQYXRoLCBOb2RlLCBUcmFuc2Zvcm1zLCBFZGl0b3IsIFRleHQsIFJhbmdlLCBQb2ludCwgY3JlYXRlRWRpdG9yIH0gZnJvbSAnc2xhdGUnO1xuaW1wb3J0IHsgYXNzZXJ0TmV2ZXIgYXMgYXNzZXJ0TmV2ZXIkMSwgYXNzZXJ0IGFzIGFzc2VydCQxIH0gZnJvbSAnZW1lcnkvYXNzZXJ0aW9ucyc7XG5pbXBvcnQgeyBhc3NlcnQsIGFzc2VydE5ldmVyIH0gZnJvbSAnZW1lcnknO1xuaW1wb3J0IHsgZnJvbVVpbnQ4QXJyYXkgfSBmcm9tICdqcy1iYXNlNjQnO1xuaW1wb3J0IHsgY3JlYXRlSGFzaCB9IGZyb20gJ2NyeXB0byc7XG5pbXBvcnQgeyBqc3ggfSBmcm9tICdyZWFjdC9qc3gtcnVudGltZSc7XG5pbXBvcnQgd2Vha01lbW9pemUgZnJvbSAnQGVtb3Rpb24vd2Vhay1tZW1vaXplJztcblxuZnVuY3Rpb24gZml4UGF0aChwYXRoKSB7XG4gIHJldHVybiBwYXRoLnJlcGxhY2UoL15cXC4/XFwvKy8sICcnKS5yZXBsYWNlKC9cXC8qJC8sICcnKTtcbn1cbmNvbnN0IGNvbGxlY3Rpb25QYXRoID0gL1xcL1xcKlxcKj8oPzokfFxcLykvO1xuZnVuY3Rpb24gZ2V0Q29uZmlndXJlZENvbGxlY3Rpb25QYXRoKGNvbmZpZywgY29sbGVjdGlvbikge1xuICB2YXIgX2NvbGxlY3Rpb25Db25maWckcGF0O1xuICBjb25zdCBjb2xsZWN0aW9uQ29uZmlnID0gY29uZmlnLmNvbGxlY3Rpb25zW2NvbGxlY3Rpb25dO1xuICBjb25zdCBwYXRoID0gKF9jb2xsZWN0aW9uQ29uZmlnJHBhdCA9IGNvbGxlY3Rpb25Db25maWcucGF0aCkgIT09IG51bGwgJiYgX2NvbGxlY3Rpb25Db25maWckcGF0ICE9PSB2b2lkIDAgPyBfY29sbGVjdGlvbkNvbmZpZyRwYXQgOiBgJHtjb2xsZWN0aW9ufS8qL2A7XG4gIGlmICghY29sbGVjdGlvblBhdGgudGVzdChwYXRoKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ29sbGVjdGlvbiBwYXRoIG11c3QgZW5kIHdpdGggLyogb3IgLyoqIG9yIGluY2x1ZGUgLyovIG9yIC8qKi8gYnV0ICR7Y29sbGVjdGlvbn0gaGFzICR7cGF0aH1gKTtcbiAgfVxuICByZXR1cm4gcGF0aDtcbn1cbmZ1bmN0aW9uIGdldENvbGxlY3Rpb25QYXRoKGNvbmZpZywgY29sbGVjdGlvbikge1xuICBjb25zdCBjb25maWd1cmVkUGF0aCA9IGdldENvbmZpZ3VyZWRDb2xsZWN0aW9uUGF0aChjb25maWcsIGNvbGxlY3Rpb24pO1xuICBjb25zdCBwYXRoID0gZml4UGF0aChjb25maWd1cmVkUGF0aC5yZXBsYWNlKC9cXCpcXCo/LiokLywgJycpKTtcbiAgcmV0dXJuIHBhdGg7XG59XG5mdW5jdGlvbiBnZXRDb2xsZWN0aW9uRm9ybWF0KGNvbmZpZywgY29sbGVjdGlvbikge1xuICB2YXIgX2NvbGxlY3Rpb25Db25maWckZm9yO1xuICBjb25zdCBjb2xsZWN0aW9uQ29uZmlnID0gY29uZmlnLmNvbGxlY3Rpb25zW2NvbGxlY3Rpb25dO1xuICByZXR1cm4gZ2V0Rm9ybWF0SW5mbygoX2NvbGxlY3Rpb25Db25maWckZm9yID0gY29sbGVjdGlvbkNvbmZpZy5mb3JtYXQpICE9PSBudWxsICYmIF9jb2xsZWN0aW9uQ29uZmlnJGZvciAhPT0gdm9pZCAwID8gX2NvbGxlY3Rpb25Db25maWckZm9yIDogJ3lhbWwnLCBjb2xsZWN0aW9uQ29uZmlnLnNjaGVtYSwgZ2V0Q29uZmlndXJlZENvbGxlY3Rpb25QYXRoKGNvbmZpZywgY29sbGVjdGlvbikpO1xufVxuZnVuY3Rpb24gZ2V0U2luZ2xldG9uRm9ybWF0KGNvbmZpZywgc2luZ2xldG9uKSB7XG4gIHZhciBfc2luZ2xldG9uQ29uZmlnJGZvcm0sIF9zaW5nbGV0b25Db25maWckcGF0aDtcbiAgY29uc3Qgc2luZ2xldG9uQ29uZmlnID0gY29uZmlnLnNpbmdsZXRvbnNbc2luZ2xldG9uXTtcbiAgcmV0dXJuIGdldEZvcm1hdEluZm8oKF9zaW5nbGV0b25Db25maWckZm9ybSA9IHNpbmdsZXRvbkNvbmZpZy5mb3JtYXQpICE9PSBudWxsICYmIF9zaW5nbGV0b25Db25maWckZm9ybSAhPT0gdm9pZCAwID8gX3NpbmdsZXRvbkNvbmZpZyRmb3JtIDogJ3lhbWwnLCBzaW5nbGV0b25Db25maWcuc2NoZW1hLCAoX3NpbmdsZXRvbkNvbmZpZyRwYXRoID0gc2luZ2xldG9uQ29uZmlnLnBhdGgpICE9PSBudWxsICYmIF9zaW5nbGV0b25Db25maWckcGF0aCAhPT0gdm9pZCAwID8gX3NpbmdsZXRvbkNvbmZpZyRwYXRoIDogYCR7c2luZ2xldG9ufS9gKTtcbn1cbmZ1bmN0aW9uIGdldENvbGxlY3Rpb25JdGVtUGF0aChjb25maWcsIGNvbGxlY3Rpb24sIHNsdWcpIHtcbiAgY29uc3QgYmFzZVBhdGggPSBnZXRDb2xsZWN0aW9uUGF0aChjb25maWcsIGNvbGxlY3Rpb24pO1xuICBjb25zdCBzdWZmaXggPSBnZXRDb2xsZWN0aW9uSXRlbVNsdWdTdWZmaXgoY29uZmlnLCBjb2xsZWN0aW9uKTtcbiAgcmV0dXJuIGAke2Jhc2VQYXRofS8ke3NsdWd9JHtzdWZmaXh9YDtcbn1cbmZ1bmN0aW9uIGdldEVudHJ5RGF0YUZpbGVwYXRoKGRpciwgZm9ybWF0SW5mbykge1xuICByZXR1cm4gYCR7ZGlyfSR7Zm9ybWF0SW5mby5kYXRhTG9jYXRpb24gPT09ICdpbmRleCcgPyAnL2luZGV4JyA6ICcnfSR7Z2V0RGF0YUZpbGVFeHRlbnNpb24oZm9ybWF0SW5mbyl9YDtcbn1cbmZ1bmN0aW9uIGdldFNsdWdHbG9iRm9yQ29sbGVjdGlvbihjb25maWcsIGNvbGxlY3Rpb24pIHtcbiAgY29uc3QgY29sbGVjdGlvblBhdGggPSBnZXRDb25maWd1cmVkQ29sbGVjdGlvblBhdGgoY29uZmlnLCBjb2xsZWN0aW9uKTtcbiAgcmV0dXJuIGNvbGxlY3Rpb25QYXRoLmluY2x1ZGVzKCcqKicpID8gJyoqJyA6ICcqJztcbn1cbmZ1bmN0aW9uIGdldENvbGxlY3Rpb25JdGVtU2x1Z1N1ZmZpeChjb25maWcsIGNvbGxlY3Rpb24pIHtcbiAgY29uc3QgY29uZmlndXJlZFBhdGggPSBnZXRDb25maWd1cmVkQ29sbGVjdGlvblBhdGgoY29uZmlnLCBjb2xsZWN0aW9uKTtcbiAgY29uc3QgcGF0aCA9IGZpeFBhdGgoY29uZmlndXJlZFBhdGgucmVwbGFjZSgvXlteKl0rXFwqXFwqPy8sICcnKSk7XG4gIHJldHVybiBwYXRoID8gYC8ke3BhdGh9YCA6ICcnO1xufVxuZnVuY3Rpb24gZ2V0U2luZ2xldG9uUGF0aChjb25maWcsIHNpbmdsZXRvbikge1xuICB2YXIgX3NpbmdsZXRvbiRwYXRoLCBfc2luZ2xldG9uJHBhdGgyO1xuICBpZiAoKF9zaW5nbGV0b24kcGF0aCA9IGNvbmZpZy5zaW5nbGV0b25zW3NpbmdsZXRvbl0ucGF0aCkgIT09IG51bGwgJiYgX3NpbmdsZXRvbiRwYXRoICE9PSB2b2lkIDAgJiYgX3NpbmdsZXRvbiRwYXRoLmluY2x1ZGVzKCcqJykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFNpbmdsZXRvbiBwYXRocyBjYW5ub3QgaW5jbHVkZSAqIGJ1dCAke3NpbmdsZXRvbn0gaGFzICR7Y29uZmlnLnNpbmdsZXRvbnNbc2luZ2xldG9uXS5wYXRofWApO1xuICB9XG4gIHJldHVybiBmaXhQYXRoKChfc2luZ2xldG9uJHBhdGgyID0gY29uZmlnLnNpbmdsZXRvbnNbc2luZ2xldG9uXS5wYXRoKSAhPT0gbnVsbCAmJiBfc2luZ2xldG9uJHBhdGgyICE9PSB2b2lkIDAgPyBfc2luZ2xldG9uJHBhdGgyIDogc2luZ2xldG9uKTtcbn1cbmZ1bmN0aW9uIGdldERhdGFGaWxlRXh0ZW5zaW9uKGZvcm1hdEluZm8pIHtcbiAgcmV0dXJuIGZvcm1hdEluZm8uY29udGVudEZpZWxkID8gZm9ybWF0SW5mby5jb250ZW50RmllbGQuY29uZmlnLmNvbnRlbnRFeHRlbnNpb24gOiAnLicgKyBmb3JtYXRJbmZvLmRhdGE7XG59XG5mdW5jdGlvbiBnZXRGb3JtYXRJbmZvKGZvcm1hdCwgc2NoZW1hLCBwYXRoKSB7XG4gIHZhciBfZm9ybWF0JGRhdGE7XG4gIGNvbnN0IGRhdGFMb2NhdGlvbiA9IHBhdGguZW5kc1dpdGgoJy8nKSA/ICdpbmRleCcgOiAnb3V0ZXInO1xuICBpZiAodHlwZW9mIGZvcm1hdCA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZGF0YUxvY2F0aW9uLFxuICAgICAgY29udGVudEZpZWxkOiB1bmRlZmluZWQsXG4gICAgICBkYXRhOiBmb3JtYXRcbiAgICB9O1xuICB9XG4gIGxldCBjb250ZW50RmllbGQ7XG4gIGlmIChmb3JtYXQuY29udGVudEZpZWxkKSB7XG4gICAgY29uc3QgZmllbGQgPSBzY2hlbWFbZm9ybWF0LmNvbnRlbnRGaWVsZF07XG4gICAgYXNzZXJ0KChmaWVsZCA9PT0gbnVsbCB8fCBmaWVsZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZmllbGQua2luZCkgPT09ICdmb3JtJywgYCR7Zm9ybWF0LmNvbnRlbnRGaWVsZH0gaXMgbm90IGEgZm9ybSBmaWVsZGApO1xuICAgIGFzc2VydChmaWVsZC5mb3JtS2luZCA9PT0gJ2NvbnRlbnQnLCBgJHtmb3JtYXQuY29udGVudEZpZWxkfSBpcyBub3QgYSBjb250ZW50IGZpZWxkYCk7XG4gICAgY29udGVudEZpZWxkID0ge1xuICAgICAga2V5OiBmb3JtYXQuY29udGVudEZpZWxkLFxuICAgICAgY29uZmlnOiBmaWVsZFxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBkYXRhOiAoX2Zvcm1hdCRkYXRhID0gZm9ybWF0LmRhdGEpICE9PSBudWxsICYmIF9mb3JtYXQkZGF0YSAhPT0gdm9pZCAwID8gX2Zvcm1hdCRkYXRhIDogJ3lhbWwnLFxuICAgIGNvbnRlbnRGaWVsZCxcbiAgICBkYXRhTG9jYXRpb25cbiAgfTtcbn1cbmZ1bmN0aW9uIGdldFBhdGhQcmVmaXgoc3RvcmFnZSkge1xuICBpZiAoc3RvcmFnZS5raW5kID09PSAnbG9jYWwnIHx8ICFzdG9yYWdlLnBhdGhQcmVmaXgpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiBmaXhQYXRoKHN0b3JhZ2UucGF0aFByZWZpeCkgKyAnLyc7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNoYTEoY29udGVudCkge1xuICByZXR1cm4gY3JlYXRlSGFzaCgnc2hhMScpLnVwZGF0ZShjb250ZW50KS5kaWdlc3QoJ2hleCcpO1xufVxuXG5jb25zdCB0ZXh0RW5jb2RlciQyID0gbmV3IFRleHRFbmNvZGVyKCk7XG5mdW5jdGlvbiBibG9iU2hhKGNvbnRlbnRzKSB7XG4gIGNvbnN0IGJsb2JQcmVmaXggPSB0ZXh0RW5jb2RlciQyLmVuY29kZSgnYmxvYiAnICsgY29udGVudHMubGVuZ3RoICsgJ1xcMCcpO1xuICBjb25zdCBhcnJheSA9IG5ldyBVaW50OEFycmF5KGJsb2JQcmVmaXguYnl0ZUxlbmd0aCArIGNvbnRlbnRzLmJ5dGVMZW5ndGgpO1xuICBhcnJheS5zZXQoYmxvYlByZWZpeCwgMCk7XG4gIGFycmF5LnNldChjb250ZW50cywgYmxvYlByZWZpeC5ieXRlTGVuZ3RoKTtcbiAgcmV0dXJuIHNoYTEoYXJyYXkpO1xufVxuZnVuY3Rpb24gZ2V0VHJlZU5vZGVBdFBhdGgocm9vdCwgcGF0aCkge1xuICBjb25zdCBwYXJ0cyA9IHBhdGguc3BsaXQoJy8nKTtcbiAgbGV0IG5vZGUgPSByb290LmdldChwYXJ0c1swXSk7XG4gIGZvciAoY29uc3QgcGFydCBvZiBwYXJ0cy5zbGljZSgxKSkge1xuICAgIGlmICghbm9kZSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBpZiAoIW5vZGUuY2hpbGRyZW4pIHJldHVybiB1bmRlZmluZWQ7XG4gICAgbm9kZSA9IG5vZGUuY2hpbGRyZW4uZ2V0KHBhcnQpO1xuICB9XG4gIHJldHVybiBub2RlO1xufVxuZnVuY3Rpb24gZ2V0Tm9kZUF0UGF0aCh0cmVlLCBwYXRoKSB7XG4gIGxldCBub2RlID0gdHJlZTtcbiAgZm9yIChjb25zdCBwYXJ0IG9mIHBhdGguc3BsaXQoJy8nKSkge1xuICAgIGlmICghbm9kZS5oYXMocGFydCkpIHtcbiAgICAgIG5vZGUuc2V0KHBhcnQsIG5ldyBNYXAoKSk7XG4gICAgfVxuICAgIGNvbnN0IGlubmVyTm9kZSA9IG5vZGUuZ2V0KHBhcnQpO1xuICAgIGFzc2VydChpbm5lck5vZGUgaW5zdGFuY2VvZiBNYXAsICdleHBlY3RlZCB0cmVlJyk7XG4gICAgbm9kZSA9IGlubmVyTm9kZTtcbiAgfVxuICByZXR1cm4gbm9kZTtcbn1cbmZ1bmN0aW9uIGdldEZpbGVuYW1lKHBhdGgpIHtcbiAgcmV0dXJuIHBhdGgucmVwbGFjZSgvLipcXC8vLCAnJyk7XG59XG5mdW5jdGlvbiBnZXREaXJuYW1lKHBhdGgpIHtcbiAgcmV0dXJuIHBhdGgucmVwbGFjZSgvXFwvW14vXSskLywgJycpO1xufVxuZnVuY3Rpb24gdG9UcmVlQ2hhbmdlcyhjaGFuZ2VzKSB7XG4gIGNvbnN0IGNoYW5nZXNSb290ID0gbmV3IE1hcCgpO1xuICBmb3IgKGNvbnN0IGRlbGV0aW9uIG9mIGNoYW5nZXMuZGVsZXRpb25zKSB7XG4gICAgY29uc3QgcGFyZW50VHJlZSA9IGdldE5vZGVBdFBhdGgoY2hhbmdlc1Jvb3QsIGdldERpcm5hbWUoZGVsZXRpb24pKTtcbiAgICBwYXJlbnRUcmVlLnNldChnZXRGaWxlbmFtZShkZWxldGlvbiksICdkZWxldGUnKTtcbiAgfVxuICBmb3IgKGNvbnN0IGFkZGl0aW9uIG9mIGNoYW5nZXMuYWRkaXRpb25zKSB7XG4gICAgY29uc3QgcGFyZW50VHJlZSA9IGdldE5vZGVBdFBhdGgoY2hhbmdlc1Jvb3QsIGdldERpcm5hbWUoYWRkaXRpb24ucGF0aCkpO1xuICAgIHBhcmVudFRyZWUuc2V0KGdldEZpbGVuYW1lKGFkZGl0aW9uLnBhdGgpLCBhZGRpdGlvbi5jb250ZW50cyk7XG4gIH1cbiAgcmV0dXJuIGNoYW5nZXNSb290O1xufVxuY29uc3QgU1BBQ0VfQ0hBUl9DT0RFID0gMzI7XG5jb25zdCBzcGFjZSA9IG5ldyBVaW50OEFycmF5KFtTUEFDRV9DSEFSX0NPREVdKTtcbmNvbnN0IG51bGxjaGFyID0gbmV3IFVpbnQ4QXJyYXkoWzBdKTtcbmNvbnN0IHRyZWUgPSB0ZXh0RW5jb2RlciQyLmVuY29kZSgndHJlZSAnKTtcblxuLy8gYmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL2lzb21vcnBoaWMtZ2l0L2lzb21vcnBoaWMtZ2l0L2Jsb2IvYzA5ZGZhMjBmZmUwYWI5ZTY2MDJlMGZhMTcyZDcyYmE4OTk0ZTQ0My9zcmMvbW9kZWxzL0dpdFRyZWUuanMjTDEwOC1MMTIyXG5mdW5jdGlvbiB0cmVlU2hhKGNoaWxkcmVuKSB7XG4gIGNvbnN0IGVudHJpZXMgPSBbLi4uY2hpbGRyZW5dLm1hcCgoW25hbWUsIG5vZGVdKSA9PiAoe1xuICAgIG5hbWUsXG4gICAgc2hhOiBub2RlLmVudHJ5LnNoYSxcbiAgICBtb2RlOiBub2RlLmVudHJ5Lm1vZGVcbiAgfSkpO1xuICBlbnRyaWVzLnNvcnQoKGEsIGIpID0+IHtcbiAgICBjb25zdCBhTmFtZSA9IGEubW9kZSA9PT0gJzA0MDAwMCcgPyBhLm5hbWUgKyAnLycgOiBhLm5hbWU7XG4gICAgY29uc3QgYk5hbWUgPSBiLm1vZGUgPT09ICcwNDAwMDAnID8gYi5uYW1lICsgJy8nIDogYi5uYW1lO1xuICAgIHJldHVybiBhTmFtZSA9PT0gYk5hbWUgPyAwIDogYU5hbWUgPCBiTmFtZSA/IC0xIDogMTtcbiAgfSk7XG4gIGNvbnN0IHRyZWVPYmplY3QgPSBlbnRyaWVzLmZsYXRNYXAoZW50cnkgPT4ge1xuICAgIGNvbnN0IG1vZGUgPSB0ZXh0RW5jb2RlciQyLmVuY29kZShlbnRyeS5tb2RlLnJlcGxhY2UoL14wLywgJycpKTtcbiAgICBjb25zdCBuYW1lID0gdGV4dEVuY29kZXIkMi5lbmNvZGUoZW50cnkubmFtZSk7XG4gICAgY29uc3Qgc2hhID0gaGV4VG9CeXRlcyhlbnRyeS5zaGEpO1xuICAgIHJldHVybiBbbW9kZSwgc3BhY2UsIG5hbWUsIG51bGxjaGFyLCBzaGFdO1xuICB9KTtcbiAgcmV0dXJuIHNoYTEoY29uY2F0Qnl0ZXMoW3RyZWUsIHRleHRFbmNvZGVyJDIuZW5jb2RlKHRyZWVPYmplY3QucmVkdWNlKChzdW0sIHZhbCkgPT4gc3VtICsgdmFsLmJ5dGVMZW5ndGgsIDApLnRvU3RyaW5nKCkpLCBudWxsY2hhciwgLi4udHJlZU9iamVjdF0pKTtcbn1cbmZ1bmN0aW9uIGNvbmNhdEJ5dGVzKGJ5dGVBcnJheXMpIHtcbiAgY29uc3QgdG90YWxMZW5ndGggPSBieXRlQXJyYXlzLnJlZHVjZSgoc3VtLCBhcnIpID0+IHN1bSArIGFyci5ieXRlTGVuZ3RoLCAwKTtcbiAgY29uc3QgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodG90YWxMZW5ndGgpO1xuICBsZXQgb2Zmc2V0ID0gMDtcbiAgZm9yIChjb25zdCBhcnIgb2YgYnl0ZUFycmF5cykge1xuICAgIHJlc3VsdC5zZXQoYXJyLCBvZmZzZXQpO1xuICAgIG9mZnNldCArPSBhcnIuYnl0ZUxlbmd0aDtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gaGV4VG9CeXRlcyhzdHIpIHtcbiAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShzdHIubGVuZ3RoIC8gMik7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYnl0ZXMuYnl0ZUxlbmd0aDsgaSArPSAxKSB7XG4gICAgY29uc3Qgc3RhcnQgPSBpICogMjtcbiAgICBieXRlc1tpXSA9IHBhcnNlSW50KHN0ci5zbGljZShzdGFydCwgc3RhcnQgKyAyKSwgMTYpO1xuICB9XG4gIHJldHVybiBieXRlcztcbn1cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVRyZWVOb2RlRW50cnkocGF0aCwgY2hpbGRyZW4pIHtcbiAgY29uc3Qgc2hhID0gYXdhaXQgdHJlZVNoYShjaGlsZHJlbik7XG4gIHJldHVybiB7XG4gICAgcGF0aCxcbiAgICBtb2RlOiAnMDQwMDAwJyxcbiAgICB0eXBlOiAndHJlZScsXG4gICAgc2hhXG4gIH07XG59XG5hc3luYyBmdW5jdGlvbiBjcmVhdGVCbG9iTm9kZUVudHJ5KHBhdGgsIGNvbnRlbnRzKSB7XG4gIGNvbnN0IHNoYSA9ICdzaGEnIGluIGNvbnRlbnRzID8gY29udGVudHMuc2hhIDogYXdhaXQgYmxvYlNoYShjb250ZW50cyk7XG4gIHJldHVybiB7XG4gICAgcGF0aCxcbiAgICBtb2RlOiAnMTAwNjQ0JyxcbiAgICB0eXBlOiAnYmxvYicsXG4gICAgc2hhLFxuICAgIHNpemU6IGNvbnRlbnRzLmJ5dGVMZW5ndGhcbiAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVRyZWVXaXRoQ2hhbmdlcyh0cmVlLCBjaGFuZ2VzKSB7XG4gIHZhciBfYXdhaXQkdXBkYXRlVHJlZTtcbiAgY29uc3QgbmV3VHJlZSA9IChfYXdhaXQkdXBkYXRlVHJlZSA9IGF3YWl0IHVwZGF0ZVRyZWUodHJlZSwgdG9UcmVlQ2hhbmdlcyhjaGFuZ2VzKSwgW10pKSAhPT0gbnVsbCAmJiBfYXdhaXQkdXBkYXRlVHJlZSAhPT0gdm9pZCAwID8gX2F3YWl0JHVwZGF0ZVRyZWUgOiBuZXcgTWFwKCk7XG4gIHJldHVybiB7XG4gICAgZW50cmllczogdHJlZVRvRW50cmllcyhuZXdUcmVlKSxcbiAgICBzaGE6IGF3YWl0IHRyZWVTaGEobmV3VHJlZSAhPT0gbnVsbCAmJiBuZXdUcmVlICE9PSB2b2lkIDAgPyBuZXdUcmVlIDogbmV3IE1hcCgpKVxuICB9O1xufVxuZnVuY3Rpb24gdHJlZVRvRW50cmllcyh0cmVlKSB7XG4gIHJldHVybiBbLi4udHJlZS52YWx1ZXMoKV0uZmxhdE1hcCh4ID0+IHguY2hpbGRyZW4gPyBbeC5lbnRyeSwgLi4udHJlZVRvRW50cmllcyh4LmNoaWxkcmVuKV0gOiBbeC5lbnRyeV0pO1xufVxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlVHJlZSh0cmVlLCBjaGFuZ2VkVHJlZSwgcGF0aCkge1xuICBjb25zdCBuZXdUcmVlID0gbmV3IE1hcCh0cmVlKTtcbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgY2hhbmdlZFRyZWUpIHtcbiAgICBpZiAodmFsdWUgPT09ICdkZWxldGUnKSB7XG4gICAgICBuZXdUcmVlLmRlbGV0ZShrZXkpO1xuICAgIH1cbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBNYXApIHtcbiAgICAgIHZhciBfbmV3VHJlZSRnZXQkY2hpbGRyZW4sIF9uZXdUcmVlJGdldDtcbiAgICAgIGNvbnN0IGV4aXN0aW5nQ2hpbGRyZW4gPSAoX25ld1RyZWUkZ2V0JGNoaWxkcmVuID0gKF9uZXdUcmVlJGdldCA9IG5ld1RyZWUuZ2V0KGtleSkpID09PSBudWxsIHx8IF9uZXdUcmVlJGdldCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX25ld1RyZWUkZ2V0LmNoaWxkcmVuKSAhPT0gbnVsbCAmJiBfbmV3VHJlZSRnZXQkY2hpbGRyZW4gIT09IHZvaWQgMCA/IF9uZXdUcmVlJGdldCRjaGlsZHJlbiA6IG5ldyBNYXAoKTtcbiAgICAgIGNvbnN0IGNoaWxkcmVuID0gYXdhaXQgdXBkYXRlVHJlZShleGlzdGluZ0NoaWxkcmVuLCB2YWx1ZSwgcGF0aC5jb25jYXQoa2V5KSk7XG4gICAgICBpZiAoY2hpbGRyZW4gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBuZXdUcmVlLmRlbGV0ZShrZXkpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGVudHJ5ID0gYXdhaXQgY3JlYXRlVHJlZU5vZGVFbnRyeShwYXRoLmNvbmNhdChrZXkpLmpvaW4oJy8nKSwgY2hpbGRyZW4pO1xuICAgICAgbmV3VHJlZS5zZXQoa2V5LCB7XG4gICAgICAgIGVudHJ5LFxuICAgICAgICBjaGlsZHJlblxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgfHwgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiAnc2hhJyBpbiB2YWx1ZSkge1xuICAgICAgY29uc3QgZW50cnkgPSBhd2FpdCBjcmVhdGVCbG9iTm9kZUVudHJ5KHBhdGguY29uY2F0KGtleSkuam9pbignLycpLCB2YWx1ZSk7XG4gICAgICBuZXdUcmVlLnNldChrZXksIHtcbiAgICAgICAgZW50cnlcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBpZiAobmV3VHJlZS5zaXplID09PSAwKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gbmV3VHJlZTtcbn1cbmZ1bmN0aW9uIHRyZWVFbnRyaWVzVG9UcmVlTm9kZXMoZW50cmllcykge1xuICBjb25zdCByb290ID0gbmV3IE1hcCgpO1xuICBjb25zdCBnZXRDaGlsZHJlbkF0UGF0aCA9IHBhcnRzID0+IHtcbiAgICB2YXIgX25vZGU7XG4gICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHJvb3Q7XG4gICAgfVxuICAgIGxldCBub2RlID0gcm9vdC5nZXQocGFydHNbMF0pO1xuICAgIGZvciAoY29uc3QgcGFydCBvZiBwYXJ0cy5zbGljZSgxKSkge1xuICAgICAgaWYgKCFub2RlKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgaWYgKCFub2RlLmNoaWxkcmVuKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgbm9kZSA9IG5vZGUuY2hpbGRyZW4uZ2V0KHBhcnQpO1xuICAgIH1cbiAgICByZXR1cm4gKF9ub2RlID0gbm9kZSkgPT09IG51bGwgfHwgX25vZGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9ub2RlLmNoaWxkcmVuO1xuICB9O1xuICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICBjb25zdCBzcGxpdCA9IGVudHJ5LnBhdGguc3BsaXQoJy8nKTtcbiAgICBjb25zdCBjaGlsZHJlbiA9IGdldENoaWxkcmVuQXRQYXRoKHNwbGl0LnNsaWNlKDAsIC0xKSk7XG4gICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICBjaGlsZHJlbi5zZXQoc3BsaXRbc3BsaXQubGVuZ3RoIC0gMV0sIHtcbiAgICAgICAgZW50cnksXG4gICAgICAgIGNoaWxkcmVuOiBlbnRyeS50eXBlID09PSAndHJlZScgPyBuZXcgTWFwKCkgOiB1bmRlZmluZWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcm9vdDtcbn1cblxuZnVuY3Rpb24gY29sbGVjdERpcmVjdG9yaWVzVXNlZEluU2NoZW1hSW5uZXIoc2NoZW1hLCBkaXJlY3Rvcmllcywgc2VlblNjaGVtYXMpIHtcbiAgaWYgKHNlZW5TY2hlbWFzLmhhcyhzY2hlbWEpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHNlZW5TY2hlbWFzLmFkZChzY2hlbWEpO1xuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdhcnJheScpIHtcbiAgICByZXR1cm4gY29sbGVjdERpcmVjdG9yaWVzVXNlZEluU2NoZW1hSW5uZXIoc2NoZW1hLmVsZW1lbnQsIGRpcmVjdG9yaWVzLCBzZWVuU2NoZW1hcyk7XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnY2hpbGQnKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChzY2hlbWEua2luZCA9PT0gJ2Zvcm0nKSB7XG4gICAgaWYgKHNjaGVtYS5mb3JtS2luZCA9PT0gJ2Fzc2V0JyAmJiBzY2hlbWEuZGlyZWN0b3J5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGRpcmVjdG9yaWVzLmFkZChmaXhQYXRoKHNjaGVtYS5kaXJlY3RvcnkpKTtcbiAgICB9XG4gICAgaWYgKHNjaGVtYS5mb3JtS2luZCA9PT0gJ2NvbnRlbnQnICYmIHNjaGVtYS5kaXJlY3RvcmllcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBmb3IgKGNvbnN0IGRpcmVjdG9yeSBvZiBzY2hlbWEuZGlyZWN0b3JpZXMpIHtcbiAgICAgICAgZGlyZWN0b3JpZXMuYWRkKGZpeFBhdGgoZGlyZWN0b3J5KSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdvYmplY3QnKSB7XG4gICAgZm9yIChjb25zdCBmaWVsZCBvZiBPYmplY3QudmFsdWVzKHNjaGVtYS5maWVsZHMpKSB7XG4gICAgICBjb2xsZWN0RGlyZWN0b3JpZXNVc2VkSW5TY2hlbWFJbm5lcihmaWVsZCwgZGlyZWN0b3JpZXMsIHNlZW5TY2hlbWFzKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChzY2hlbWEua2luZCA9PT0gJ2NvbmRpdGlvbmFsJykge1xuICAgIGZvciAoY29uc3QgaW5uZXJTY2hlbWEgb2YgT2JqZWN0LnZhbHVlcyhzY2hlbWEudmFsdWVzKSkge1xuICAgICAgY29sbGVjdERpcmVjdG9yaWVzVXNlZEluU2NoZW1hSW5uZXIoaW5uZXJTY2hlbWEsIGRpcmVjdG9yaWVzLCBzZWVuU2NoZW1hcyk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuICBhc3NlcnROZXZlcihzY2hlbWEpO1xufVxuZnVuY3Rpb24gY29sbGVjdERpcmVjdG9yaWVzVXNlZEluU2NoZW1hKHNjaGVtYSkge1xuICBjb25zdCBkaXJlY3RvcmllcyA9IG5ldyBTZXQoKTtcbiAgY29sbGVjdERpcmVjdG9yaWVzVXNlZEluU2NoZW1hSW5uZXIoc2NoZW1hLCBkaXJlY3RvcmllcywgbmV3IFNldCgpKTtcbiAgcmV0dXJuIGRpcmVjdG9yaWVzO1xufVxuZnVuY3Rpb24gZ2V0RGlyZWN0b3JpZXNGb3JUcmVlS2V5KHNjaGVtYSwgZGlyZWN0b3J5LCBzbHVnLCBmb3JtYXQpIHtcbiAgY29uc3QgZGlyZWN0b3JpZXMgPSBbZml4UGF0aChkaXJlY3RvcnkpXTtcbiAgaWYgKGZvcm1hdC5kYXRhTG9jYXRpb24gPT09ICdvdXRlcicpIHtcbiAgICBkaXJlY3Rvcmllcy5wdXNoKGZpeFBhdGgoZGlyZWN0b3J5KSArIGdldERhdGFGaWxlRXh0ZW5zaW9uKGZvcm1hdCkpO1xuICB9XG4gIGNvbnN0IHRvQWRkID0gc2x1ZyA9PT0gdW5kZWZpbmVkID8gJycgOiBgLyR7c2x1Z31gO1xuICBmb3IgKGNvbnN0IGRpcmVjdG9yeSBvZiBjb2xsZWN0RGlyZWN0b3JpZXNVc2VkSW5TY2hlbWEoc2NoZW1hKSkge1xuICAgIGRpcmVjdG9yaWVzLnB1c2goZGlyZWN0b3J5ICsgdG9BZGQpO1xuICB9XG4gIHJldHVybiBkaXJlY3Rvcmllcztcbn1cbmZ1bmN0aW9uIGdldFRyZWVLZXkoZGlyZWN0b3JpZXMsIHRyZWUpIHtcbiAgcmV0dXJuIGRpcmVjdG9yaWVzLm1hcChkID0+IHtcbiAgICB2YXIgX2dldFRyZWVOb2RlQXRQYXRoO1xuICAgIHJldHVybiAoX2dldFRyZWVOb2RlQXRQYXRoID0gZ2V0VHJlZU5vZGVBdFBhdGgodHJlZSwgZCkpID09PSBudWxsIHx8IF9nZXRUcmVlTm9kZUF0UGF0aCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2dldFRyZWVOb2RlQXRQYXRoLmVudHJ5LnNoYTtcbiAgfSkuam9pbignLScpO1xufVxuXG52YXIgcGtnSnNvbiA9IHtcblx0bmFtZTogXCJAa2V5c3RhdGljL2NvcmVcIixcblx0dmVyc2lvbjogXCIwLjIuMTJcIixcblx0bGljZW5zZTogXCJNSVRcIixcblx0cmVwb3NpdG9yeToge1xuXHRcdHR5cGU6IFwiZ2l0XCIsXG5cdFx0dXJsOiBcImh0dHBzOi8vZ2l0aHViLmNvbS9UaGlua21pbGwva2V5c3RhdGljL1wiLFxuXHRcdGRpcmVjdG9yeTogXCJwYWNrYWdlcy9rZXlzdGF0aWNcIlxuXHR9LFxuXHRleHBvcnRzOiB7XG5cdFx0XCIuL3VpXCI6IHtcblx0XHRcdHR5cGVzOiB7XG5cdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi91aS9kaXN0L2tleXN0YXRpYy1jb3JlLXVpLmNqcy5tanNcIixcblx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi91aS9kaXN0L2tleXN0YXRpYy1jb3JlLXVpLmNqcy5qc1wiXG5cdFx0XHR9LFxuXHRcdFx0bm9kZToge1xuXHRcdFx0XHRcInJlYWN0LXNlcnZlclwiOiB7XG5cdFx0XHRcdFx0bW9kdWxlOiBcIi4vdWkvZGlzdC9rZXlzdGF0aWMtY29yZS11aS5ub2RlLnJlYWN0LXNlcnZlci5lc20uanNcIixcblx0XHRcdFx0XHRcImltcG9ydFwiOiBcIi4vdWkvZGlzdC9rZXlzdGF0aWMtY29yZS11aS5ub2RlLnJlYWN0LXNlcnZlci5janMubWpzXCIsXG5cdFx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi91aS9kaXN0L2tleXN0YXRpYy1jb3JlLXVpLm5vZGUucmVhY3Qtc2VydmVyLmNqcy5qc1wiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdG1vZHVsZTogXCIuL3VpL2Rpc3Qva2V5c3RhdGljLWNvcmUtdWkubm9kZS5lc20uanNcIixcblx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL3VpL2Rpc3Qva2V5c3RhdGljLWNvcmUtdWkubm9kZS5janMubWpzXCIsXG5cdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vdWkvZGlzdC9rZXlzdGF0aWMtY29yZS11aS5ub2RlLmNqcy5qc1wiXG5cdFx0XHR9LFxuXHRcdFx0XCJyZWFjdC1zZXJ2ZXJcIjoge1xuXHRcdFx0XHRtb2R1bGU6IFwiLi91aS9kaXN0L2tleXN0YXRpYy1jb3JlLXVpLnJlYWN0LXNlcnZlci5lc20uanNcIixcblx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL3VpL2Rpc3Qva2V5c3RhdGljLWNvcmUtdWkucmVhY3Qtc2VydmVyLmNqcy5tanNcIixcblx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi91aS9kaXN0L2tleXN0YXRpYy1jb3JlLXVpLnJlYWN0LXNlcnZlci5janMuanNcIlxuXHRcdFx0fSxcblx0XHRcdG1vZHVsZTogXCIuL3VpL2Rpc3Qva2V5c3RhdGljLWNvcmUtdWkuZXNtLmpzXCIsXG5cdFx0XHRcImltcG9ydFwiOiBcIi4vdWkvZGlzdC9rZXlzdGF0aWMtY29yZS11aS5janMubWpzXCIsXG5cdFx0XHRcImRlZmF1bHRcIjogXCIuL3VpL2Rpc3Qva2V5c3RhdGljLWNvcmUtdWkuY2pzLmpzXCJcblx0XHR9LFxuXHRcdFwiLlwiOiB7XG5cdFx0XHR0eXBlczoge1xuXHRcdFx0XHRcImltcG9ydFwiOiBcIi4vZGlzdC9rZXlzdGF0aWMtY29yZS5janMubWpzXCIsXG5cdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vZGlzdC9rZXlzdGF0aWMtY29yZS5janMuanNcIlxuXHRcdFx0fSxcblx0XHRcdG5vZGU6IHtcblx0XHRcdFx0XCJyZWFjdC1zZXJ2ZXJcIjoge1xuXHRcdFx0XHRcdG1vZHVsZTogXCIuL2Rpc3Qva2V5c3RhdGljLWNvcmUubm9kZS5yZWFjdC1zZXJ2ZXIuZXNtLmpzXCIsXG5cdFx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL2Rpc3Qva2V5c3RhdGljLWNvcmUubm9kZS5yZWFjdC1zZXJ2ZXIuY2pzLm1qc1wiLFxuXHRcdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vZGlzdC9rZXlzdGF0aWMtY29yZS5ub2RlLnJlYWN0LXNlcnZlci5janMuanNcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRtb2R1bGU6IFwiLi9kaXN0L2tleXN0YXRpYy1jb3JlLm5vZGUuZXNtLmpzXCIsXG5cdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi9kaXN0L2tleXN0YXRpYy1jb3JlLm5vZGUuY2pzLm1qc1wiLFxuXHRcdFx0XHRcImRlZmF1bHRcIjogXCIuL2Rpc3Qva2V5c3RhdGljLWNvcmUubm9kZS5janMuanNcIlxuXHRcdFx0fSxcblx0XHRcdFwicmVhY3Qtc2VydmVyXCI6IHtcblx0XHRcdFx0bW9kdWxlOiBcIi4vZGlzdC9rZXlzdGF0aWMtY29yZS5yZWFjdC1zZXJ2ZXIuZXNtLmpzXCIsXG5cdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi9kaXN0L2tleXN0YXRpYy1jb3JlLnJlYWN0LXNlcnZlci5janMubWpzXCIsXG5cdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vZGlzdC9rZXlzdGF0aWMtY29yZS5yZWFjdC1zZXJ2ZXIuY2pzLmpzXCJcblx0XHRcdH0sXG5cdFx0XHRtb2R1bGU6IFwiLi9kaXN0L2tleXN0YXRpYy1jb3JlLmVzbS5qc1wiLFxuXHRcdFx0XCJpbXBvcnRcIjogXCIuL2Rpc3Qva2V5c3RhdGljLWNvcmUuY2pzLm1qc1wiLFxuXHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9kaXN0L2tleXN0YXRpYy1jb3JlLmNqcy5qc1wiXG5cdFx0fSxcblx0XHRcIi4vYXBpL3V0aWxzXCI6IHtcblx0XHRcdHR5cGVzOiB7XG5cdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi9hcGkvdXRpbHMvZGlzdC9rZXlzdGF0aWMtY29yZS1hcGktdXRpbHMuY2pzLm1qc1wiLFxuXHRcdFx0XHRcImRlZmF1bHRcIjogXCIuL2FwaS91dGlscy9kaXN0L2tleXN0YXRpYy1jb3JlLWFwaS11dGlscy5janMuanNcIlxuXHRcdFx0fSxcblx0XHRcdG5vZGU6IHtcblx0XHRcdFx0XCJyZWFjdC1zZXJ2ZXJcIjoge1xuXHRcdFx0XHRcdG1vZHVsZTogXCIuL2FwaS91dGlscy9kaXN0L2tleXN0YXRpYy1jb3JlLWFwaS11dGlscy5ub2RlLnJlYWN0LXNlcnZlci5lc20uanNcIixcblx0XHRcdFx0XHRcImltcG9ydFwiOiBcIi4vYXBpL3V0aWxzL2Rpc3Qva2V5c3RhdGljLWNvcmUtYXBpLXV0aWxzLm5vZGUucmVhY3Qtc2VydmVyLmNqcy5tanNcIixcblx0XHRcdFx0XHRcImRlZmF1bHRcIjogXCIuL2FwaS91dGlscy9kaXN0L2tleXN0YXRpYy1jb3JlLWFwaS11dGlscy5ub2RlLnJlYWN0LXNlcnZlci5janMuanNcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRtb2R1bGU6IFwiLi9hcGkvdXRpbHMvZGlzdC9rZXlzdGF0aWMtY29yZS1hcGktdXRpbHMubm9kZS5lc20uanNcIixcblx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL2FwaS91dGlscy9kaXN0L2tleXN0YXRpYy1jb3JlLWFwaS11dGlscy5ub2RlLmNqcy5tanNcIixcblx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9hcGkvdXRpbHMvZGlzdC9rZXlzdGF0aWMtY29yZS1hcGktdXRpbHMubm9kZS5janMuanNcIlxuXHRcdFx0fSxcblx0XHRcdFwicmVhY3Qtc2VydmVyXCI6IHtcblx0XHRcdFx0bW9kdWxlOiBcIi4vYXBpL3V0aWxzL2Rpc3Qva2V5c3RhdGljLWNvcmUtYXBpLXV0aWxzLnJlYWN0LXNlcnZlci5lc20uanNcIixcblx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL2FwaS91dGlscy9kaXN0L2tleXN0YXRpYy1jb3JlLWFwaS11dGlscy5yZWFjdC1zZXJ2ZXIuY2pzLm1qc1wiLFxuXHRcdFx0XHRcImRlZmF1bHRcIjogXCIuL2FwaS91dGlscy9kaXN0L2tleXN0YXRpYy1jb3JlLWFwaS11dGlscy5yZWFjdC1zZXJ2ZXIuY2pzLmpzXCJcblx0XHRcdH0sXG5cdFx0XHRtb2R1bGU6IFwiLi9hcGkvdXRpbHMvZGlzdC9rZXlzdGF0aWMtY29yZS1hcGktdXRpbHMuZXNtLmpzXCIsXG5cdFx0XHRcImltcG9ydFwiOiBcIi4vYXBpL3V0aWxzL2Rpc3Qva2V5c3RhdGljLWNvcmUtYXBpLXV0aWxzLmNqcy5tanNcIixcblx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vYXBpL3V0aWxzL2Rpc3Qva2V5c3RhdGljLWNvcmUtYXBpLXV0aWxzLmNqcy5qc1wiXG5cdFx0fSxcblx0XHRcIi4vcmVuZGVyZXJcIjoge1xuXHRcdFx0dHlwZXM6IHtcblx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL3JlbmRlcmVyL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVuZGVyZXIuY2pzLm1qc1wiLFxuXHRcdFx0XHRcImRlZmF1bHRcIjogXCIuL3JlbmRlcmVyL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVuZGVyZXIuY2pzLmpzXCJcblx0XHRcdH0sXG5cdFx0XHRub2RlOiB7XG5cdFx0XHRcdFwicmVhY3Qtc2VydmVyXCI6IHtcblx0XHRcdFx0XHRtb2R1bGU6IFwiLi9yZW5kZXJlci9kaXN0L2tleXN0YXRpYy1jb3JlLXJlbmRlcmVyLm5vZGUucmVhY3Qtc2VydmVyLmVzbS5qc1wiLFxuXHRcdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi9yZW5kZXJlci9kaXN0L2tleXN0YXRpYy1jb3JlLXJlbmRlcmVyLm5vZGUucmVhY3Qtc2VydmVyLmNqcy5tanNcIixcblx0XHRcdFx0XHRcImRlZmF1bHRcIjogXCIuL3JlbmRlcmVyL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVuZGVyZXIubm9kZS5yZWFjdC1zZXJ2ZXIuY2pzLmpzXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0bW9kdWxlOiBcIi4vcmVuZGVyZXIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZW5kZXJlci5ub2RlLmVzbS5qc1wiLFxuXHRcdFx0XHRcImltcG9ydFwiOiBcIi4vcmVuZGVyZXIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZW5kZXJlci5ub2RlLmNqcy5tanNcIixcblx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9yZW5kZXJlci9kaXN0L2tleXN0YXRpYy1jb3JlLXJlbmRlcmVyLm5vZGUuY2pzLmpzXCJcblx0XHRcdH0sXG5cdFx0XHRcInJlYWN0LXNlcnZlclwiOiB7XG5cdFx0XHRcdG1vZHVsZTogXCIuL3JlbmRlcmVyL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVuZGVyZXIucmVhY3Qtc2VydmVyLmVzbS5qc1wiLFxuXHRcdFx0XHRcImltcG9ydFwiOiBcIi4vcmVuZGVyZXIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZW5kZXJlci5yZWFjdC1zZXJ2ZXIuY2pzLm1qc1wiLFxuXHRcdFx0XHRcImRlZmF1bHRcIjogXCIuL3JlbmRlcmVyL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVuZGVyZXIucmVhY3Qtc2VydmVyLmNqcy5qc1wiXG5cdFx0XHR9LFxuXHRcdFx0bW9kdWxlOiBcIi4vcmVuZGVyZXIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZW5kZXJlci5lc20uanNcIixcblx0XHRcdFwiaW1wb3J0XCI6IFwiLi9yZW5kZXJlci9kaXN0L2tleXN0YXRpYy1jb3JlLXJlbmRlcmVyLmNqcy5tanNcIixcblx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vcmVuZGVyZXIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZW5kZXJlci5janMuanNcIlxuXHRcdH0sXG5cdFx0XCIuL2FwaS9nZW5lcmljXCI6IHtcblx0XHRcdHR5cGVzOiB7XG5cdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi9hcGkvZ2VuZXJpYy9kaXN0L2tleXN0YXRpYy1jb3JlLWFwaS1nZW5lcmljLmNqcy5tanNcIixcblx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9hcGkvZ2VuZXJpYy9kaXN0L2tleXN0YXRpYy1jb3JlLWFwaS1nZW5lcmljLmNqcy5qc1wiXG5cdFx0XHR9LFxuXHRcdFx0bm9kZToge1xuXHRcdFx0XHRcInJlYWN0LXNlcnZlclwiOiB7XG5cdFx0XHRcdFx0bW9kdWxlOiBcIi4vYXBpL2dlbmVyaWMvZGlzdC9rZXlzdGF0aWMtY29yZS1hcGktZ2VuZXJpYy5ub2RlLnJlYWN0LXNlcnZlci5lc20uanNcIixcblx0XHRcdFx0XHRcImltcG9ydFwiOiBcIi4vYXBpL2dlbmVyaWMvZGlzdC9rZXlzdGF0aWMtY29yZS1hcGktZ2VuZXJpYy5ub2RlLnJlYWN0LXNlcnZlci5janMubWpzXCIsXG5cdFx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9hcGkvZ2VuZXJpYy9kaXN0L2tleXN0YXRpYy1jb3JlLWFwaS1nZW5lcmljLm5vZGUucmVhY3Qtc2VydmVyLmNqcy5qc1wiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdG1vZHVsZTogXCIuL2FwaS9nZW5lcmljL2Rpc3Qva2V5c3RhdGljLWNvcmUtYXBpLWdlbmVyaWMubm9kZS5lc20uanNcIixcblx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL2FwaS9nZW5lcmljL2Rpc3Qva2V5c3RhdGljLWNvcmUtYXBpLWdlbmVyaWMubm9kZS5janMubWpzXCIsXG5cdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vYXBpL2dlbmVyaWMvZGlzdC9rZXlzdGF0aWMtY29yZS1hcGktZ2VuZXJpYy5ub2RlLmNqcy5qc1wiXG5cdFx0XHR9LFxuXHRcdFx0XCJyZWFjdC1zZXJ2ZXJcIjoge1xuXHRcdFx0XHRtb2R1bGU6IFwiLi9hcGkvZ2VuZXJpYy9kaXN0L2tleXN0YXRpYy1jb3JlLWFwaS1nZW5lcmljLnJlYWN0LXNlcnZlci5lc20uanNcIixcblx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL2FwaS9nZW5lcmljL2Rpc3Qva2V5c3RhdGljLWNvcmUtYXBpLWdlbmVyaWMucmVhY3Qtc2VydmVyLmNqcy5tanNcIixcblx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9hcGkvZ2VuZXJpYy9kaXN0L2tleXN0YXRpYy1jb3JlLWFwaS1nZW5lcmljLnJlYWN0LXNlcnZlci5janMuanNcIlxuXHRcdFx0fSxcblx0XHRcdG1vZHVsZTogXCIuL2FwaS9nZW5lcmljL2Rpc3Qva2V5c3RhdGljLWNvcmUtYXBpLWdlbmVyaWMuZXNtLmpzXCIsXG5cdFx0XHRcImltcG9ydFwiOiBcIi4vYXBpL2dlbmVyaWMvZGlzdC9rZXlzdGF0aWMtY29yZS1hcGktZ2VuZXJpYy5janMubWpzXCIsXG5cdFx0XHRcImRlZmF1bHRcIjogXCIuL2FwaS9nZW5lcmljL2Rpc3Qva2V5c3RhdGljLWNvcmUtYXBpLWdlbmVyaWMuY2pzLmpzXCJcblx0XHR9LFxuXHRcdFwiLi9yZWFkZXJcIjoge1xuXHRcdFx0dHlwZXM6IHtcblx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL3JlYWRlci9kaXN0L2tleXN0YXRpYy1jb3JlLXJlYWRlci5janMubWpzXCIsXG5cdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vcmVhZGVyL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVhZGVyLmNqcy5qc1wiXG5cdFx0XHR9LFxuXHRcdFx0bm9kZToge1xuXHRcdFx0XHRcInJlYWN0LXNlcnZlclwiOiB7XG5cdFx0XHRcdFx0bW9kdWxlOiBcIi4vcmVhZGVyL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVhZGVyLm5vZGUucmVhY3Qtc2VydmVyLmVzbS5qc1wiLFxuXHRcdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi9yZWFkZXIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZWFkZXIubm9kZS5yZWFjdC1zZXJ2ZXIuY2pzLm1qc1wiLFxuXHRcdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vcmVhZGVyL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVhZGVyLm5vZGUucmVhY3Qtc2VydmVyLmNqcy5qc1wiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdG1vZHVsZTogXCIuL3JlYWRlci9kaXN0L2tleXN0YXRpYy1jb3JlLXJlYWRlci5ub2RlLmVzbS5qc1wiLFxuXHRcdFx0XHRcImltcG9ydFwiOiBcIi4vcmVhZGVyL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVhZGVyLm5vZGUuY2pzLm1qc1wiLFxuXHRcdFx0XHRcImRlZmF1bHRcIjogXCIuL3JlYWRlci9kaXN0L2tleXN0YXRpYy1jb3JlLXJlYWRlci5ub2RlLmNqcy5qc1wiXG5cdFx0XHR9LFxuXHRcdFx0XCJyZWFjdC1zZXJ2ZXJcIjoge1xuXHRcdFx0XHRtb2R1bGU6IFwiLi9yZWFkZXIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZWFkZXIucmVhY3Qtc2VydmVyLmVzbS5qc1wiLFxuXHRcdFx0XHRcImltcG9ydFwiOiBcIi4vcmVhZGVyL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVhZGVyLnJlYWN0LXNlcnZlci5janMubWpzXCIsXG5cdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vcmVhZGVyL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVhZGVyLnJlYWN0LXNlcnZlci5janMuanNcIlxuXHRcdFx0fSxcblx0XHRcdG1vZHVsZTogXCIuL3JlYWRlci9kaXN0L2tleXN0YXRpYy1jb3JlLXJlYWRlci5lc20uanNcIixcblx0XHRcdFwiaW1wb3J0XCI6IFwiLi9yZWFkZXIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZWFkZXIuY2pzLm1qc1wiLFxuXHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9yZWFkZXIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZWFkZXIuY2pzLmpzXCJcblx0XHR9LFxuXHRcdFwiLi9yZWFkZXIvZ2l0aHViXCI6IHtcblx0XHRcdHR5cGVzOiB7XG5cdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi9yZWFkZXIvZ2l0aHViL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVhZGVyLWdpdGh1Yi5janMubWpzXCIsXG5cdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vcmVhZGVyL2dpdGh1Yi9kaXN0L2tleXN0YXRpYy1jb3JlLXJlYWRlci1naXRodWIuY2pzLmpzXCJcblx0XHRcdH0sXG5cdFx0XHRub2RlOiB7XG5cdFx0XHRcdFwicmVhY3Qtc2VydmVyXCI6IHtcblx0XHRcdFx0XHRtb2R1bGU6IFwiLi9yZWFkZXIvZ2l0aHViL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVhZGVyLWdpdGh1Yi5ub2RlLnJlYWN0LXNlcnZlci5lc20uanNcIixcblx0XHRcdFx0XHRcImltcG9ydFwiOiBcIi4vcmVhZGVyL2dpdGh1Yi9kaXN0L2tleXN0YXRpYy1jb3JlLXJlYWRlci1naXRodWIubm9kZS5yZWFjdC1zZXJ2ZXIuY2pzLm1qc1wiLFxuXHRcdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vcmVhZGVyL2dpdGh1Yi9kaXN0L2tleXN0YXRpYy1jb3JlLXJlYWRlci1naXRodWIubm9kZS5yZWFjdC1zZXJ2ZXIuY2pzLmpzXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0bW9kdWxlOiBcIi4vcmVhZGVyL2dpdGh1Yi9kaXN0L2tleXN0YXRpYy1jb3JlLXJlYWRlci1naXRodWIubm9kZS5lc20uanNcIixcblx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL3JlYWRlci9naXRodWIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZWFkZXItZ2l0aHViLm5vZGUuY2pzLm1qc1wiLFxuXHRcdFx0XHRcImRlZmF1bHRcIjogXCIuL3JlYWRlci9naXRodWIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZWFkZXItZ2l0aHViLm5vZGUuY2pzLmpzXCJcblx0XHRcdH0sXG5cdFx0XHRcInJlYWN0LXNlcnZlclwiOiB7XG5cdFx0XHRcdG1vZHVsZTogXCIuL3JlYWRlci9naXRodWIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZWFkZXItZ2l0aHViLnJlYWN0LXNlcnZlci5lc20uanNcIixcblx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL3JlYWRlci9naXRodWIvZGlzdC9rZXlzdGF0aWMtY29yZS1yZWFkZXItZ2l0aHViLnJlYWN0LXNlcnZlci5janMubWpzXCIsXG5cdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vcmVhZGVyL2dpdGh1Yi9kaXN0L2tleXN0YXRpYy1jb3JlLXJlYWRlci1naXRodWIucmVhY3Qtc2VydmVyLmNqcy5qc1wiXG5cdFx0XHR9LFxuXHRcdFx0bW9kdWxlOiBcIi4vcmVhZGVyL2dpdGh1Yi9kaXN0L2tleXN0YXRpYy1jb3JlLXJlYWRlci1naXRodWIuZXNtLmpzXCIsXG5cdFx0XHRcImltcG9ydFwiOiBcIi4vcmVhZGVyL2dpdGh1Yi9kaXN0L2tleXN0YXRpYy1jb3JlLXJlYWRlci1naXRodWIuY2pzLm1qc1wiLFxuXHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9yZWFkZXIvZ2l0aHViL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVhZGVyLWdpdGh1Yi5janMuanNcIlxuXHRcdH0sXG5cdFx0XCIuL2NvbnRlbnQtY29tcG9uZW50c1wiOiB7XG5cdFx0XHR0eXBlczoge1xuXHRcdFx0XHRcImltcG9ydFwiOiBcIi4vY29udGVudC1jb21wb25lbnRzL2Rpc3Qva2V5c3RhdGljLWNvcmUtY29udGVudC1jb21wb25lbnRzLmNqcy5tanNcIixcblx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9jb250ZW50LWNvbXBvbmVudHMvZGlzdC9rZXlzdGF0aWMtY29yZS1jb250ZW50LWNvbXBvbmVudHMuY2pzLmpzXCJcblx0XHRcdH0sXG5cdFx0XHRub2RlOiB7XG5cdFx0XHRcdFwicmVhY3Qtc2VydmVyXCI6IHtcblx0XHRcdFx0XHRtb2R1bGU6IFwiLi9jb250ZW50LWNvbXBvbmVudHMvZGlzdC9rZXlzdGF0aWMtY29yZS1jb250ZW50LWNvbXBvbmVudHMubm9kZS5yZWFjdC1zZXJ2ZXIuZXNtLmpzXCIsXG5cdFx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL2NvbnRlbnQtY29tcG9uZW50cy9kaXN0L2tleXN0YXRpYy1jb3JlLWNvbnRlbnQtY29tcG9uZW50cy5ub2RlLnJlYWN0LXNlcnZlci5janMubWpzXCIsXG5cdFx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9jb250ZW50LWNvbXBvbmVudHMvZGlzdC9rZXlzdGF0aWMtY29yZS1jb250ZW50LWNvbXBvbmVudHMubm9kZS5yZWFjdC1zZXJ2ZXIuY2pzLmpzXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0bW9kdWxlOiBcIi4vY29udGVudC1jb21wb25lbnRzL2Rpc3Qva2V5c3RhdGljLWNvcmUtY29udGVudC1jb21wb25lbnRzLm5vZGUuZXNtLmpzXCIsXG5cdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi9jb250ZW50LWNvbXBvbmVudHMvZGlzdC9rZXlzdGF0aWMtY29yZS1jb250ZW50LWNvbXBvbmVudHMubm9kZS5janMubWpzXCIsXG5cdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vY29udGVudC1jb21wb25lbnRzL2Rpc3Qva2V5c3RhdGljLWNvcmUtY29udGVudC1jb21wb25lbnRzLm5vZGUuY2pzLmpzXCJcblx0XHRcdH0sXG5cdFx0XHRcInJlYWN0LXNlcnZlclwiOiB7XG5cdFx0XHRcdG1vZHVsZTogXCIuL2NvbnRlbnQtY29tcG9uZW50cy9kaXN0L2tleXN0YXRpYy1jb3JlLWNvbnRlbnQtY29tcG9uZW50cy5yZWFjdC1zZXJ2ZXIuZXNtLmpzXCIsXG5cdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi9jb250ZW50LWNvbXBvbmVudHMvZGlzdC9rZXlzdGF0aWMtY29yZS1jb250ZW50LWNvbXBvbmVudHMucmVhY3Qtc2VydmVyLmNqcy5tanNcIixcblx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9jb250ZW50LWNvbXBvbmVudHMvZGlzdC9rZXlzdGF0aWMtY29yZS1jb250ZW50LWNvbXBvbmVudHMucmVhY3Qtc2VydmVyLmNqcy5qc1wiXG5cdFx0XHR9LFxuXHRcdFx0bW9kdWxlOiBcIi4vY29udGVudC1jb21wb25lbnRzL2Rpc3Qva2V5c3RhdGljLWNvcmUtY29udGVudC1jb21wb25lbnRzLmVzbS5qc1wiLFxuXHRcdFx0XCJpbXBvcnRcIjogXCIuL2NvbnRlbnQtY29tcG9uZW50cy9kaXN0L2tleXN0YXRpYy1jb3JlLWNvbnRlbnQtY29tcG9uZW50cy5janMubWpzXCIsXG5cdFx0XHRcImRlZmF1bHRcIjogXCIuL2NvbnRlbnQtY29tcG9uZW50cy9kaXN0L2tleXN0YXRpYy1jb3JlLWNvbnRlbnQtY29tcG9uZW50cy5janMuanNcIlxuXHRcdH0sXG5cdFx0XCIuL2NvbXBvbmVudC1ibG9ja3NcIjoge1xuXHRcdFx0dHlwZXM6IHtcblx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL2NvbXBvbmVudC1ibG9ja3MvZGlzdC9rZXlzdGF0aWMtY29yZS1jb21wb25lbnQtYmxvY2tzLmNqcy5tanNcIixcblx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9jb21wb25lbnQtYmxvY2tzL2Rpc3Qva2V5c3RhdGljLWNvcmUtY29tcG9uZW50LWJsb2Nrcy5janMuanNcIlxuXHRcdFx0fSxcblx0XHRcdG5vZGU6IHtcblx0XHRcdFx0XCJyZWFjdC1zZXJ2ZXJcIjoge1xuXHRcdFx0XHRcdG1vZHVsZTogXCIuL2NvbXBvbmVudC1ibG9ja3MvZGlzdC9rZXlzdGF0aWMtY29yZS1jb21wb25lbnQtYmxvY2tzLm5vZGUucmVhY3Qtc2VydmVyLmVzbS5qc1wiLFxuXHRcdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi9jb21wb25lbnQtYmxvY2tzL2Rpc3Qva2V5c3RhdGljLWNvcmUtY29tcG9uZW50LWJsb2Nrcy5ub2RlLnJlYWN0LXNlcnZlci5janMubWpzXCIsXG5cdFx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9jb21wb25lbnQtYmxvY2tzL2Rpc3Qva2V5c3RhdGljLWNvcmUtY29tcG9uZW50LWJsb2Nrcy5ub2RlLnJlYWN0LXNlcnZlci5janMuanNcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRtb2R1bGU6IFwiLi9jb21wb25lbnQtYmxvY2tzL2Rpc3Qva2V5c3RhdGljLWNvcmUtY29tcG9uZW50LWJsb2Nrcy5ub2RlLmVzbS5qc1wiLFxuXHRcdFx0XHRcImltcG9ydFwiOiBcIi4vY29tcG9uZW50LWJsb2Nrcy9kaXN0L2tleXN0YXRpYy1jb3JlLWNvbXBvbmVudC1ibG9ja3Mubm9kZS5janMubWpzXCIsXG5cdFx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vY29tcG9uZW50LWJsb2Nrcy9kaXN0L2tleXN0YXRpYy1jb3JlLWNvbXBvbmVudC1ibG9ja3Mubm9kZS5janMuanNcIlxuXHRcdFx0fSxcblx0XHRcdFwicmVhY3Qtc2VydmVyXCI6IHtcblx0XHRcdFx0bW9kdWxlOiBcIi4vY29tcG9uZW50LWJsb2Nrcy9kaXN0L2tleXN0YXRpYy1jb3JlLWNvbXBvbmVudC1ibG9ja3MucmVhY3Qtc2VydmVyLmVzbS5qc1wiLFxuXHRcdFx0XHRcImltcG9ydFwiOiBcIi4vY29tcG9uZW50LWJsb2Nrcy9kaXN0L2tleXN0YXRpYy1jb3JlLWNvbXBvbmVudC1ibG9ja3MucmVhY3Qtc2VydmVyLmNqcy5tanNcIixcblx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9jb21wb25lbnQtYmxvY2tzL2Rpc3Qva2V5c3RhdGljLWNvcmUtY29tcG9uZW50LWJsb2Nrcy5yZWFjdC1zZXJ2ZXIuY2pzLmpzXCJcblx0XHRcdH0sXG5cdFx0XHRtb2R1bGU6IFwiLi9jb21wb25lbnQtYmxvY2tzL2Rpc3Qva2V5c3RhdGljLWNvcmUtY29tcG9uZW50LWJsb2Nrcy5lc20uanNcIixcblx0XHRcdFwiaW1wb3J0XCI6IFwiLi9jb21wb25lbnQtYmxvY2tzL2Rpc3Qva2V5c3RhdGljLWNvcmUtY29tcG9uZW50LWJsb2Nrcy5janMubWpzXCIsXG5cdFx0XHRcImRlZmF1bHRcIjogXCIuL2NvbXBvbmVudC1ibG9ja3MvZGlzdC9rZXlzdGF0aWMtY29yZS1jb21wb25lbnQtYmxvY2tzLmNqcy5qc1wiXG5cdFx0fSxcblx0XHRcIi4vZm9ybS9maWVsZHMvbWFya2RvY1wiOiB7XG5cdFx0XHR0eXBlczoge1xuXHRcdFx0XHRcImltcG9ydFwiOiBcIi4vZm9ybS9maWVsZHMvbWFya2RvYy9kaXN0L2tleXN0YXRpYy1jb3JlLWZvcm0tZmllbGRzLW1hcmtkb2MuY2pzLm1qc1wiLFxuXHRcdFx0XHRcImRlZmF1bHRcIjogXCIuL2Zvcm0vZmllbGRzL21hcmtkb2MvZGlzdC9rZXlzdGF0aWMtY29yZS1mb3JtLWZpZWxkcy1tYXJrZG9jLmNqcy5qc1wiXG5cdFx0XHR9LFxuXHRcdFx0bm9kZToge1xuXHRcdFx0XHRcInJlYWN0LXNlcnZlclwiOiB7XG5cdFx0XHRcdFx0bW9kdWxlOiBcIi4vZm9ybS9maWVsZHMvbWFya2RvYy9kaXN0L2tleXN0YXRpYy1jb3JlLWZvcm0tZmllbGRzLW1hcmtkb2Mubm9kZS5yZWFjdC1zZXJ2ZXIuZXNtLmpzXCIsXG5cdFx0XHRcdFx0XCJpbXBvcnRcIjogXCIuL2Zvcm0vZmllbGRzL21hcmtkb2MvZGlzdC9rZXlzdGF0aWMtY29yZS1mb3JtLWZpZWxkcy1tYXJrZG9jLm5vZGUucmVhY3Qtc2VydmVyLmNqcy5tanNcIixcblx0XHRcdFx0XHRcImRlZmF1bHRcIjogXCIuL2Zvcm0vZmllbGRzL21hcmtkb2MvZGlzdC9rZXlzdGF0aWMtY29yZS1mb3JtLWZpZWxkcy1tYXJrZG9jLm5vZGUucmVhY3Qtc2VydmVyLmNqcy5qc1wiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdG1vZHVsZTogXCIuL2Zvcm0vZmllbGRzL21hcmtkb2MvZGlzdC9rZXlzdGF0aWMtY29yZS1mb3JtLWZpZWxkcy1tYXJrZG9jLm5vZGUuZXNtLmpzXCIsXG5cdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi9mb3JtL2ZpZWxkcy9tYXJrZG9jL2Rpc3Qva2V5c3RhdGljLWNvcmUtZm9ybS1maWVsZHMtbWFya2RvYy5ub2RlLmNqcy5tanNcIixcblx0XHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9mb3JtL2ZpZWxkcy9tYXJrZG9jL2Rpc3Qva2V5c3RhdGljLWNvcmUtZm9ybS1maWVsZHMtbWFya2RvYy5ub2RlLmNqcy5qc1wiXG5cdFx0XHR9LFxuXHRcdFx0XCJyZWFjdC1zZXJ2ZXJcIjoge1xuXHRcdFx0XHRtb2R1bGU6IFwiLi9mb3JtL2ZpZWxkcy9tYXJrZG9jL2Rpc3Qva2V5c3RhdGljLWNvcmUtZm9ybS1maWVsZHMtbWFya2RvYy5yZWFjdC1zZXJ2ZXIuZXNtLmpzXCIsXG5cdFx0XHRcdFwiaW1wb3J0XCI6IFwiLi9mb3JtL2ZpZWxkcy9tYXJrZG9jL2Rpc3Qva2V5c3RhdGljLWNvcmUtZm9ybS1maWVsZHMtbWFya2RvYy5yZWFjdC1zZXJ2ZXIuY2pzLm1qc1wiLFxuXHRcdFx0XHRcImRlZmF1bHRcIjogXCIuL2Zvcm0vZmllbGRzL21hcmtkb2MvZGlzdC9rZXlzdGF0aWMtY29yZS1mb3JtLWZpZWxkcy1tYXJrZG9jLnJlYWN0LXNlcnZlci5janMuanNcIlxuXHRcdFx0fSxcblx0XHRcdG1vZHVsZTogXCIuL2Zvcm0vZmllbGRzL21hcmtkb2MvZGlzdC9rZXlzdGF0aWMtY29yZS1mb3JtLWZpZWxkcy1tYXJrZG9jLmVzbS5qc1wiLFxuXHRcdFx0XCJpbXBvcnRcIjogXCIuL2Zvcm0vZmllbGRzL21hcmtkb2MvZGlzdC9rZXlzdGF0aWMtY29yZS1mb3JtLWZpZWxkcy1tYXJrZG9jLmNqcy5tanNcIixcblx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vZm9ybS9maWVsZHMvbWFya2RvYy9kaXN0L2tleXN0YXRpYy1jb3JlLWZvcm0tZmllbGRzLW1hcmtkb2MuY2pzLmpzXCJcblx0XHR9LFxuXHRcdFwiLi9wYWNrYWdlLmpzb25cIjogXCIuL3BhY2thZ2UuanNvblwiXG5cdH0sXG5cdG1haW46IFwiZGlzdC9rZXlzdGF0aWMtY29yZS5janMuanNcIixcblx0bW9kdWxlOiBcImRpc3Qva2V5c3RhdGljLWNvcmUuZXNtLmpzXCIsXG5cdGZpbGVzOiBbXG5cdFx0XCJkaXN0XCIsXG5cdFx0XCJhcGlcIixcblx0XHRcInJlYWRlclwiLFxuXHRcdFwicmVuZGVyZXJcIixcblx0XHRcInVpXCIsXG5cdFx0XCJmb3JtXCIsXG5cdFx0XCJjb21wb25lbnQtYmxvY2tzXCIsXG5cdFx0XCJjb250ZW50LWNvbXBvbmVudHNcIlxuXHRdLFxuXHRzY3JpcHRzOiB7XG5cdFx0c2V0dXA6IFwidHMtZ3FsIGJ1aWxkICYmIHRzeCBzY3JpcHRzL2wxMG4udHMgJiYgdHN4IHNjcmlwdHMvYnVpbGQtcHJpc20udHNcIixcblx0XHRidWlsZDogXCJwbnBtIHJ1biBzZXR1cCAmJiBuZXh0IGJ1aWxkXCIsXG5cdFx0ZGV2OiBcIm5leHQgZGV2XCIsXG5cdFx0c3RhcnQ6IFwibmV4dCBzdGFydFwiXG5cdH0sXG5cdGRlcGVuZGVuY2llczoge1xuXHRcdFwiQGJhYmVsL3J1bnRpbWVcIjogXCJeNy4xOC4zXCIsXG5cdFx0XCJAYnJhaW50cmVlL3Nhbml0aXplLXVybFwiOiBcIl42LjAuMlwiLFxuXHRcdFwiQGVtb3Rpb24vY3NzXCI6IFwiXjExLjkuMFwiLFxuXHRcdFwiQGVtb3Rpb24vd2Vhay1tZW1vaXplXCI6IFwiXjAuMy4wXCIsXG5cdFx0XCJAZmxvYXRpbmctdWkvcmVhY3RcIjogXCJeMC4yNC4wXCIsXG5cdFx0XCJAaW50ZXJuYXRpb25hbGl6ZWQvc3RyaW5nXCI6IFwiXjMuMS4xXCIsXG5cdFx0XCJAa2V5c3Rhci91aVwiOiBcIl4wLjQuOVwiLFxuXHRcdFwiQG1hcmtkb2MvbWFya2RvY1wiOiBcIl4wLjMuMFwiLFxuXHRcdFwiQHJlYWN0LWFyaWEvZm9jdXNcIjogXCJeMy4xNC4zXCIsXG5cdFx0XCJAcmVhY3QtYXJpYS9pMThuXCI6IFwiXjMuOC4wXCIsXG5cdFx0XCJAcmVhY3QtYXJpYS9pbnRlcmFjdGlvbnNcIjogXCJeMy4xOS4xXCIsXG5cdFx0XCJAcmVhY3QtYXJpYS9vdmVybGF5c1wiOiBcIl4zLjE4LjFcIixcblx0XHRcIkByZWFjdC1hcmlhL3NlbGVjdGlvblwiOiBcIl4zLjE3LjFcIixcblx0XHRcIkByZWFjdC1hcmlhL3V0aWxzXCI6IFwiXjMuMjEuMVwiLFxuXHRcdFwiQHJlYWN0LWFyaWEvdmlzdWFsbHktaGlkZGVuXCI6IFwiXjMuOC42XCIsXG5cdFx0XCJAcmVhY3Qtc3RhdGVseS9jb2xsZWN0aW9uc1wiOiBcIl4zLjEwLjJcIixcblx0XHRcIkByZWFjdC1zdGF0ZWx5L2xpc3RcIjogXCJeMy4xMC4wXCIsXG5cdFx0XCJAcmVhY3Qtc3RhdGVseS9vdmVybGF5c1wiOiBcIl4zLjYuM1wiLFxuXHRcdFwiQHJlYWN0LXN0YXRlbHkvdXRpbHNcIjogXCJeMy44LjBcIixcblx0XHRcIkByZWFjdC10eXBlcy9zaGFyZWRcIjogXCJeMy4yMS4wXCIsXG5cdFx0XCJAc2luZHJlc29yaHVzL3NsdWdpZnlcIjogXCJeMS4xLjJcIixcblx0XHRcIkB0cy1ncWwvdGFnXCI6IFwiXjAuNy4wXCIsXG5cdFx0XCJAdHlwZXMvbm9kZVwiOiBcIjE2LjExLjEzXCIsXG5cdFx0XCJAdHlwZXMvcmVhY3RcIjogXCJeMTguMi44XCIsXG5cdFx0XCJAdHlwZXMvcmVhY3QtZG9tXCI6IFwiXjE4LjAuMTFcIixcblx0XHRcIkB1cnFsL2NvcmVcIjogXCJeNC4xLjNcIixcblx0XHRcIkB1cnFsL2V4Y2hhbmdlLWF1dGhcIjogXCJeMi4xLjZcIixcblx0XHRcIkB1cnFsL2V4Y2hhbmdlLWdyYXBoY2FjaGVcIjogXCJeNi4zLjNcIixcblx0XHRcIkB1cnFsL2V4Y2hhbmdlLXBlcnNpc3RlZFwiOiBcIl40LjEuMFwiLFxuXHRcdGNvb2tpZTogXCJeMC41LjBcIixcblx0XHRlbWVyeTogXCJeMS40LjFcIixcblx0XHRcImVzY2FwZS1zdHJpbmctcmVnZXhwXCI6IFwiXjQuMC4wXCIsXG5cdFx0XCJmYXN0LWRlZXAtZXF1YWxcIjogXCJeMy4xLjNcIixcblx0XHRncmFwaHFsOiBcIl4xNi42LjBcIixcblx0XHRcImlkYi1rZXl2YWxcIjogXCJeNi4yLjFcIixcblx0XHRpZ25vcmU6IFwiXjUuMi40XCIsXG5cdFx0XCJpcm9uLXdlYmNyeXB0b1wiOiBcIl4wLjEwLjFcIixcblx0XHRcImlzLWhvdGtleVwiOiBcIl4wLjIuMFwiLFxuXHRcdFwianMtYmFzZTY0XCI6IFwiXjMuNy41XCIsXG5cdFx0XCJqcy15YW1sXCI6IFwiXjQuMS4wXCIsXG5cdFx0XCJscnUtY2FjaGVcIjogXCJeNy4xNC4xXCIsXG5cdFx0XCJtYXRjaC1zb3J0ZXJcIjogXCJeNi4zLjFcIixcblx0XHRcIm1kYXN0LXV0aWwtZnJvbS1tYXJrZG93blwiOiBcIl4wLjguNVwiLFxuXHRcdFwibWRhc3QtdXRpbC1nZm0tYXV0b2xpbmstbGl0ZXJhbFwiOiBcIl4wLjEuM1wiLFxuXHRcdFwibWRhc3QtdXRpbC1nZm0tc3RyaWtldGhyb3VnaFwiOiBcIl4wLjIuM1wiLFxuXHRcdFwibWljcm9tYXJrLWV4dGVuc2lvbi1nZm0tYXV0b2xpbmstbGl0ZXJhbFwiOiBcIjAuNS43XCIsXG5cdFx0XCJtaWNyb21hcmstZXh0ZW5zaW9uLWdmbS1zdHJpa2V0aHJvdWdoXCI6IFwiMC42LjVcIixcblx0XHRtaW5pbWF0Y2g6IFwiXjcuMS4wXCIsXG5cdFx0XCJwcm9zZW1pcnJvci1jb21tYW5kc1wiOiBcIl4xLjUuMVwiLFxuXHRcdFwicHJvc2VtaXJyb3ItaGlzdG9yeVwiOiBcIl4xLjMuMFwiLFxuXHRcdFwicHJvc2VtaXJyb3Ita2V5bWFwXCI6IFwiXjEuMi4xXCIsXG5cdFx0XCJwcm9zZW1pcnJvci1tb2RlbFwiOiBcIl4xLjE5LjBcIixcblx0XHRcInByb3NlbWlycm9yLXN0YXRlXCI6IFwiXjEuNC4yXCIsXG5cdFx0XCJwcm9zZW1pcnJvci10YWJsZXNcIjogXCJeMS4zLjRcIixcblx0XHRcInByb3NlbWlycm9yLXRyYW5zZm9ybVwiOiBcIl4xLjcuMVwiLFxuXHRcdFwicHJvc2VtaXJyb3Itdmlld1wiOiBcIl4xLjMwLjJcIixcblx0XHRcInNjcm9sbC1pbnRvLXZpZXctaWYtbmVlZGVkXCI6IFwiXjMuMC4zXCIsXG5cdFx0c2xhdGU6IFwiXjAuOTEuNFwiLFxuXHRcdFwic2xhdGUtaGlzdG9yeVwiOiBcIl4wLjg2LjBcIixcblx0XHRcInNsYXRlLXJlYWN0XCI6IFwiXjAuOTEuOVwiLFxuXHRcdHVycWw6IFwiXjQuMC4wXCIsXG5cdFx0em9kOiBcIl4zLjIwLjJcIlxuXHR9LFxuXHRkZXZEZXBlbmRlbmNpZXM6IHtcblx0XHRcIkBqZXN0L2V4cGVjdFwiOiBcIl4yOS43LjBcIixcblx0XHRcIkBqZXN0L2dsb2JhbHNcIjogXCJeMjkuNy4wXCIsXG5cdFx0XCJAdGVzdGluZy1saWJyYXJ5L3VzZXItZXZlbnRcIjogXCJeMTQuNC4zXCIsXG5cdFx0XCJAdHMtZ3FsL2NvbXBpbGVyXCI6IFwiXjAuMTYuMVwiLFxuXHRcdFwiQHRzLWdxbC9lc2xpbnQtcGx1Z2luXCI6IFwiXjAuOC41XCIsXG5cdFx0XCJAdHMtZ3FsL25leHRcIjogXCJeMTcuMC4wXCIsXG5cdFx0XCJAdHlwZXMvY29va2llXCI6IFwiXjAuNS4xXCIsXG5cdFx0XCJAdHlwZXMvaXMtaG90a2V5XCI6IFwiXjAuMS43XCIsXG5cdFx0XCJAdHlwZXMvanMteWFtbFwiOiBcIl40LjAuNVwiLFxuXHRcdFwiQHR5cGVzL3ByaXNtanNcIjogXCJeMS4yNi4wXCIsXG5cdFx0XCJAdHlwZXMvc2lnbmFsLWV4aXRcIjogXCJeMy4wLjFcIixcblx0XHRlc2xpbnQ6IFwiXjguMTguMFwiLFxuXHRcdFwiZmFzdC1nbG9iXCI6IFwiXjMuMi4xMlwiLFxuXHRcdFwiamVzdC1kaWZmXCI6IFwiXjI5LjAuMVwiLFxuXHRcdG91dGRlbnQ6IFwiXjAuOC4wXCIsXG5cdFx0XCJwcmV0dHktZm9ybWF0XCI6IFwiXjI5LjAuMVwiLFxuXHRcdHByaXNtanM6IFwiXjEuMjkuMFwiLFxuXHRcdHJlYWN0OiBcIl4xOC4yLjBcIixcblx0XHRcInJlYWN0LWRvbVwiOiBcIl4xOC4yLjBcIixcblx0XHRcInJlYWN0LWVsZW1lbnQtdG8tanN4LXN0cmluZ1wiOiBcIl4xNS4wLjBcIixcblx0XHRcInJlc2l6ZS1vYnNlcnZlci1wb2x5ZmlsbFwiOiBcIl4xLjUuMVwiLFxuXHRcdFwic2lnbmFsLWV4aXRcIjogXCJeMy4wLjdcIixcblx0XHRcInNsYXRlLWh5cGVyc2NyaXB0XCI6IFwiXjAuNzcuMFwiLFxuXHRcdHRzeDogXCJeMy44LjBcIixcblx0XHR0eXBlc2NyaXB0OiBcIl41LjIuMlwiXG5cdH0sXG5cdHBlZXJEZXBlbmRlbmNpZXM6IHtcblx0XHRyZWFjdDogXCJeMTguMi4wXCIsXG5cdFx0XCJyZWFjdC1kb21cIjogXCJeMTguMi4wXCJcblx0fSxcblx0cHJlY29uc3RydWN0OiB7XG5cdFx0ZW50cnlwb2ludHM6IFtcblx0XHRcdFwiaW5kZXgudHNcIixcblx0XHRcdFwiYXBpL2dlbmVyaWMudHNcIixcblx0XHRcdFwiYXBpL3V0aWxzLnRzXCIsXG5cdFx0XHRcInJlYWRlci9pbmRleC50c1wiLFxuXHRcdFx0XCJyZWFkZXIvZ2l0aHViLnRzXCIsXG5cdFx0XHRcInJlbmRlcmVyLnRzeFwiLFxuXHRcdFx0XCJ1aS50c3hcIixcblx0XHRcdFwiZm9ybS9maWVsZHMvbWFya2RvYy9pbmRleC50c3hcIixcblx0XHRcdFwiY29tcG9uZW50LWJsb2Nrcy9pbmRleC50c3hcIixcblx0XHRcdFwiY29udGVudC1jb21wb25lbnRzLnRzXCJcblx0XHRdXG5cdH0sXG5cdFwidHMtZ3FsXCI6IHtcblx0XHRzY2hlbWE6IFwiLi9naXRodWIuZ3JhcGhxbFwiLFxuXHRcdG1vZGU6IFwibm8tdHJhbnNmb3JtXCIsXG5cdFx0YWRkVHlwZW5hbWU6IGZhbHNlLFxuXHRcdHNjYWxhcnM6IHtcblx0XHRcdEdpdE9iamVjdElEOiBcInN0cmluZ1wiXG5cdFx0fVxuXHR9LFxuXHRpbXBvcnRzOiB7XG5cdFx0XCIjcmVhY3QtY2FjaGUtaW4tcmVhY3Qtc2VydmVyXCI6IHtcblx0XHRcdFwicmVhY3Qtc2VydmVyXCI6IFwiLi9zcmMvcmVhZGVyL3JlYWN0LXNlcnZlci1jYWNoZS50c1wiLFxuXHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9zcmMvcmVhZGVyL25vb3AtY2FjaGUudHNcIlxuXHRcdH0sXG5cdFx0XCIjc2hhMVwiOiB7XG5cdFx0XHRub2RlOiBcIi4vc3JjL3NoYTEvbm9kZS50c1wiLFxuXHRcdFx0XCJkZWZhdWx0XCI6IFwiLi9zcmMvc2hhMS93ZWJjcnlwdG8udHNcIlxuXHRcdH0sXG5cdFx0XCIjd2ViY3J5cHRvXCI6IHtcblx0XHRcdG5vZGU6IFwiLi9zcmMvYXBpL3dlYmNyeXB0by9ub2RlLnRzXCIsXG5cdFx0XHRcImRlZmF1bHRcIjogXCIuL3NyYy9hcGkvd2ViY3J5cHRvL2RlZmF1bHQudHNcIlxuXHRcdH0sXG5cdFx0XCIjYXBpLWhhbmRsZXJcIjoge1xuXHRcdFx0bm9kZTogXCIuL3NyYy9hcGkvYXBpLW5vZGUudHNcIixcblx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vc3JjL2FwaS9hcGktbm9vcC50c1wiXG5cdFx0fSxcblx0XHRcIiNmaWVsZC11aS8qXCI6IHtcblx0XHRcdFwicmVhY3Qtc2VydmVyXCI6IFwiLi9zcmMvZm9ybS9maWVsZHMvZW1wdHktZmllbGQtdWkudHN4XCIsXG5cdFx0XHRcImRlZmF1bHRcIjogXCIuL3NyYy9mb3JtL2ZpZWxkcy8qL3VpLnRzeFwiXG5cdFx0fSxcblx0XHRcIiNjb21wb25lbnQtYmxvY2stcHJpbWl0aXZlc1wiOiB7XG5cdFx0XHRcInJlYWN0LXNlcnZlclwiOiBcIi4vc3JjL2Zvcm0vZmllbGRzL2RvY3VtZW50L0RvY3VtZW50RWRpdG9yL3ByaW1pdGl2ZXMvYmxhbmstZm9yLXJlYWN0LXNlcnZlci50c3hcIixcblx0XHRcdFwiZGVmYXVsdFwiOiBcIi4vc3JjL2Zvcm0vZmllbGRzL2RvY3VtZW50L0RvY3VtZW50RWRpdG9yL3ByaW1pdGl2ZXMvaW5kZXgudHN4XCJcblx0XHR9LFxuXHRcdFwiI2Nsb3VkLWltYWdlLXByZXZpZXdcIjoge1xuXHRcdFx0XCJyZWFjdC1zZXJ2ZXJcIjogXCIuL3NyYy9jb21wb25lbnQtYmxvY2tzL2JsYW5rLWZvci1yZWFjdC1zZXJ2ZXIudHN4XCIsXG5cdFx0XHRcImRlZmF1bHRcIjogXCIuL3NyYy9jb21wb25lbnQtYmxvY2tzL2Nsb3VkLWltYWdlLXByZXZpZXcudHN4XCJcblx0XHR9XG5cdH1cbn07XG5cbmZ1bmN0aW9uIG9iamVjdChmaWVsZHMsIG9wdHMpIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5vcHRzLFxuICAgIGtpbmQ6ICdvYmplY3QnLFxuICAgIGZpZWxkc1xuICB9O1xufVxuXG5mdW5jdGlvbiBwbHVyYWxpemUoY291bnQsIG9wdGlvbnMpIHtcbiAgY29uc3Qge1xuICAgIHNpbmd1bGFyLFxuICAgIHBsdXJhbCA9IHNpbmd1bGFyICsgJ3MnLFxuICAgIGluY2x1c2l2ZSA9IHRydWVcbiAgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IHZhcmlhbnQgPSBjb3VudCA9PT0gMSA/IHNpbmd1bGFyIDogcGx1cmFsO1xuICByZXR1cm4gaW5jbHVzaXZlID8gYCR7Y291bnR9ICR7dmFyaWFudH1gIDogdmFyaWFudDtcbn1cbmZ1bmN0aW9uIGdldEJyYW5jaFByZWZpeChjb25maWcpIHtcbiAgcmV0dXJuIGNvbmZpZy5zdG9yYWdlLmtpbmQgIT09ICdsb2NhbCcgPyBjb25maWcuc3RvcmFnZS5icmFuY2hQcmVmaXggOiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBpc0dpdEh1YkNvbmZpZyhjb25maWcpIHtcbiAgcmV0dXJuIGNvbmZpZy5zdG9yYWdlLmtpbmQgPT09ICdnaXRodWInO1xufVxuZnVuY3Rpb24gaXNMb2NhbENvbmZpZyhjb25maWcpIHtcbiAgcmV0dXJuIGNvbmZpZy5zdG9yYWdlLmtpbmQgPT09ICdsb2NhbCc7XG59XG5mdW5jdGlvbiBpc0Nsb3VkQ29uZmlnKGNvbmZpZykge1xuICB2YXIgX2NvbmZpZyRjbG91ZDtcbiAgaWYgKGNvbmZpZy5zdG9yYWdlLmtpbmQgIT09ICdjbG91ZCcpIHJldHVybiBmYWxzZTtcbiAgaWYgKCEoKF9jb25maWckY2xvdWQgPSBjb25maWcuY2xvdWQpICE9PSBudWxsICYmIF9jb25maWckY2xvdWQgIT09IHZvaWQgMCAmJiBfY29uZmlnJGNsb3VkLnByb2plY3QpIHx8ICFjb25maWcuY2xvdWQucHJvamVjdC5pbmNsdWRlcygnLycpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBLZXlzdGF0aWMgaXMgc2V0IHRvIFxcYHN0b3JhZ2U6IHsga2luZDogJ2Nsb3VkJyB9XFxgIGJ1dCBcXGBjbG91ZC5wcm9qZWN0XFxgIGlzbid0IHNldC5cbmNvbmZpZyh7XG4gIHN0b3JhZ2U6IHsga2luZDogJ2Nsb3VkJyB9LFxuICBjbG91ZDogeyBwcm9qZWN0OiAndGVhbS9wcm9qZWN0JyB9LFxufSlgKTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGdldFNwbGl0Q2xvdWRQcm9qZWN0KGNvbmZpZykge1xuICB2YXIgX2NvbmZpZyRjbG91ZDI7XG4gIGlmICghKChfY29uZmlnJGNsb3VkMiA9IGNvbmZpZy5jbG91ZCkgIT09IG51bGwgJiYgX2NvbmZpZyRjbG91ZDIgIT09IHZvaWQgMCAmJiBfY29uZmlnJGNsb3VkMi5wcm9qZWN0KSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgY29uc3QgW3RlYW0sIHByb2plY3RdID0gY29uZmlnLmNsb3VkLnByb2plY3Quc3BsaXQoJy8nKTtcbiAgcmV0dXJuIHtcbiAgICB0ZWFtLFxuICAgIHByb2plY3RcbiAgfTtcbn1cbmZ1bmN0aW9uIGdldFJlcG9QYXRoKGNvbmZpZykge1xuICByZXR1cm4gYCR7Y29uZmlnLm1haW5Pd25lcn0vJHtjb25maWcubWFpblJlcG99YDtcbn1cbmZ1bmN0aW9uIGdldFJlcG9VcmwoY29uZmlnKSB7XG4gIHJldHVybiBgaHR0cHM6Ly9naXRodWIuY29tLyR7Z2V0UmVwb1BhdGgoY29uZmlnKX1gO1xufVxuZnVuY3Rpb24gZ2V0U2x1Z0Zyb21TdGF0ZShjb2xsZWN0aW9uQ29uZmlnLCBzdGF0ZSkge1xuICBjb25zdCB2YWx1ZSA9IHN0YXRlW2NvbGxlY3Rpb25Db25maWcuc2x1Z0ZpZWxkXTtcbiAgY29uc3QgZmllbGQgPSBjb2xsZWN0aW9uQ29uZmlnLnNjaGVtYVtjb2xsZWN0aW9uQ29uZmlnLnNsdWdGaWVsZF07XG4gIGlmIChmaWVsZC5raW5kICE9PSAnZm9ybScgfHwgZmllbGQuZm9ybUtpbmQgIT09ICdzbHVnJykge1xuICAgIHRocm93IG5ldyBFcnJvcihgc2x1Z0ZpZWxkIGlzIG5vdCBhIHNsdWcgZmllbGRgKTtcbiAgfVxuICByZXR1cm4gZmllbGQuc2VyaWFsaXplV2l0aFNsdWcodmFsdWUpLnNsdWc7XG59XG5mdW5jdGlvbiBnZXRFbnRyaWVzSW5Db2xsZWN0aW9uV2l0aFRyZWVLZXkoY29uZmlnLCBjb2xsZWN0aW9uLCByb290VHJlZSkge1xuICB2YXIgX2dldFRyZWVOb2RlQXRQYXRoJGNoLCBfZ2V0VHJlZU5vZGVBdFBhdGg7XG4gIGNvbnN0IGNvbGxlY3Rpb25Db25maWcgPSBjb25maWcuY29sbGVjdGlvbnNbY29sbGVjdGlvbl07XG4gIGNvbnN0IHNjaGVtYSA9IG9iamVjdChjb2xsZWN0aW9uQ29uZmlnLnNjaGVtYSk7XG4gIGNvbnN0IGZvcm1hdEluZm8gPSBnZXRDb2xsZWN0aW9uRm9ybWF0KGNvbmZpZywgY29sbGVjdGlvbik7XG4gIGNvbnN0IGV4dGVuc2lvbiA9IGdldERhdGFGaWxlRXh0ZW5zaW9uKGZvcm1hdEluZm8pO1xuICBjb25zdCBnbG9iID0gZ2V0U2x1Z0dsb2JGb3JDb2xsZWN0aW9uKGNvbmZpZywgY29sbGVjdGlvbik7XG4gIGNvbnN0IGNvbGxlY3Rpb25QYXRoID0gZ2V0Q29sbGVjdGlvblBhdGgoY29uZmlnLCBjb2xsZWN0aW9uKTtcbiAgY29uc3QgZGlyZWN0b3J5ID0gKF9nZXRUcmVlTm9kZUF0UGF0aCRjaCA9IChfZ2V0VHJlZU5vZGVBdFBhdGggPSBnZXRUcmVlTm9kZUF0UGF0aChyb290VHJlZSwgY29sbGVjdGlvblBhdGgpKSA9PT0gbnVsbCB8fCBfZ2V0VHJlZU5vZGVBdFBhdGggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9nZXRUcmVlTm9kZUF0UGF0aC5jaGlsZHJlbikgIT09IG51bGwgJiYgX2dldFRyZWVOb2RlQXRQYXRoJGNoICE9PSB2b2lkIDAgPyBfZ2V0VHJlZU5vZGVBdFBhdGgkY2ggOiBuZXcgTWFwKCk7XG4gIGNvbnN0IGVudHJpZXMgPSBbXTtcbiAgY29uc3QgZGlyZWN0b3JpZXNVc2VkSW5TY2hlbWEgPSBbLi4uY29sbGVjdERpcmVjdG9yaWVzVXNlZEluU2NoZW1hKHNjaGVtYSldO1xuICBjb25zdCBzdWZmaXggPSBnZXRDb2xsZWN0aW9uSXRlbVNsdWdTdWZmaXgoY29uZmlnLCBjb2xsZWN0aW9uKTtcbiAgY29uc3QgcG9zc2libGVFbnRyaWVzID0gbmV3IE1hcChkaXJlY3RvcnkpO1xuICBpZiAoZ2xvYiA9PT0gJyoqJykge1xuICAgIGNvbnN0IGhhbmRsZURpcmVjdG9yeSA9IChkaXIsIHByZWZpeCkgPT4ge1xuICAgICAgZm9yIChjb25zdCBba2V5LCBlbnRyeV0gb2YgZGlyKSB7XG4gICAgICAgIGlmIChlbnRyeS5jaGlsZHJlbikge1xuICAgICAgICAgIHBvc3NpYmxlRW50cmllcy5zZXQoYCR7cHJlZml4fSR7a2V5fWAsIGVudHJ5KTtcbiAgICAgICAgICBoYW5kbGVEaXJlY3RvcnkoZW50cnkuY2hpbGRyZW4sIGAke3ByZWZpeH0ke2tleX0vYCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcG9zc2libGVFbnRyaWVzLnNldChgJHtwcmVmaXh9JHtrZXl9YCwgZW50cnkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBoYW5kbGVEaXJlY3RvcnkoZGlyZWN0b3J5LCAnJyk7XG4gIH1cbiAgZm9yIChjb25zdCBba2V5LCBlbnRyeV0gb2YgcG9zc2libGVFbnRyaWVzKSB7XG4gICAgaWYgKGZvcm1hdEluZm8uZGF0YUxvY2F0aW9uID09PSAnaW5kZXgnKSB7XG4gICAgICB2YXIgX2FjdHVhbEVudHJ5JGNoaWxkcmVuO1xuICAgICAgY29uc3QgYWN0dWFsRW50cnkgPSBnZXRUcmVlTm9kZUF0UGF0aChyb290VHJlZSwgZ2V0Q29sbGVjdGlvbkl0ZW1QYXRoKGNvbmZpZywgY29sbGVjdGlvbiwga2V5KSk7XG4gICAgICBpZiAoIShhY3R1YWxFbnRyeSAhPT0gbnVsbCAmJiBhY3R1YWxFbnRyeSAhPT0gdm9pZCAwICYmIChfYWN0dWFsRW50cnkkY2hpbGRyZW4gPSBhY3R1YWxFbnRyeS5jaGlsZHJlbikgIT09IG51bGwgJiYgX2FjdHVhbEVudHJ5JGNoaWxkcmVuICE9PSB2b2lkIDAgJiYgX2FjdHVhbEVudHJ5JGNoaWxkcmVuLmhhcygnaW5kZXgnICsgZXh0ZW5zaW9uKSkpIGNvbnRpbnVlO1xuICAgICAgZW50cmllcy5wdXNoKHtcbiAgICAgICAga2V5OiBnZXRUcmVlS2V5KFthY3R1YWxFbnRyeS5lbnRyeS5wYXRoLCAuLi5kaXJlY3Rvcmllc1VzZWRJblNjaGVtYS5tYXAoeCA9PiBgJHt4fS8ke2tleX1gKV0sIHJvb3RUcmVlKSxcbiAgICAgICAgc2x1Zzoga2V5XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHN1ZmZpeCkge1xuICAgICAgICBjb25zdCBuZXdFbnRyeSA9IGdldFRyZWVOb2RlQXRQYXRoKHJvb3RUcmVlLCBnZXRDb2xsZWN0aW9uSXRlbVBhdGgoY29uZmlnLCBjb2xsZWN0aW9uLCBrZXkpICsgZXh0ZW5zaW9uKTtcbiAgICAgICAgaWYgKCFuZXdFbnRyeSB8fCBuZXdFbnRyeS5jaGlsZHJlbikgY29udGludWU7XG4gICAgICAgIGVudHJpZXMucHVzaCh7XG4gICAgICAgICAga2V5OiBnZXRUcmVlS2V5KFtlbnRyeS5lbnRyeS5wYXRoLCBnZXRDb2xsZWN0aW9uSXRlbVBhdGgoY29uZmlnLCBjb2xsZWN0aW9uLCBrZXkpLCAuLi5kaXJlY3Rvcmllc1VzZWRJblNjaGVtYS5tYXAoeCA9PiBgJHt4fS8ke2tleX1gKV0sIHJvb3RUcmVlKSxcbiAgICAgICAgICBzbHVnOiBrZXlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoZW50cnkuY2hpbGRyZW4gfHwgIWtleS5lbmRzV2l0aChleHRlbnNpb24pKSBjb250aW51ZTtcbiAgICAgIGNvbnN0IHNsdWcgPSBrZXkuc2xpY2UoMCwgLWV4dGVuc2lvbi5sZW5ndGgpO1xuICAgICAgZW50cmllcy5wdXNoKHtcbiAgICAgICAga2V5OiBnZXRUcmVlS2V5KFtlbnRyeS5lbnRyeS5wYXRoLCBnZXRDb2xsZWN0aW9uSXRlbVBhdGgoY29uZmlnLCBjb2xsZWN0aW9uLCBzbHVnKSwgLi4uZGlyZWN0b3JpZXNVc2VkSW5TY2hlbWEubWFwKHggPT4gYCR7eH0vJHtzbHVnfWApXSwgcm9vdFRyZWUpLFxuICAgICAgICBzbHVnXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGVudHJpZXM7XG59XG5jb25zdCBLRVlTVEFUSUNfQ0xPVURfQVBJX1VSTCA9ICdodHRwczovL2FwaS5rZXlzdGF0aWMuY2xvdWQnO1xuY29uc3QgS0VZU1RBVElDX0NMT1VEX0hFQURFUlMgPSB7XG4gICd4LWtleXN0YXRpYy12ZXJzaW9uJzogcGtnSnNvbi52ZXJzaW9uXG59O1xuY29uc3QgdGV4dEVuY29kZXIkMSA9IG5ldyBUZXh0RW5jb2RlcigpO1xuYXN5bmMgZnVuY3Rpb24gcmVkaXJlY3RUb0Nsb3VkQXV0aChmcm9tLCBjb25maWcpIHtcbiAgdmFyIF9jb25maWckY2xvdWQzO1xuICBpZiAoISgoX2NvbmZpZyRjbG91ZDMgPSBjb25maWcuY2xvdWQpICE9PSBudWxsICYmIF9jb25maWckY2xvdWQzICE9PSB2b2lkIDAgJiYgX2NvbmZpZyRjbG91ZDMucHJvamVjdCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBhIGNsb3VkIGNvbmZpZycpO1xuICB9XG4gIGNvbnN0IGNvZGVfdmVyaWZpZXIgPSBmcm9tVWludDhBcnJheShjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDMyKSksIHRydWUpO1xuICBjb25zdCBjb2RlX2NoYWxsZW5nZSA9IGZyb21VaW50OEFycmF5KG5ldyBVaW50OEFycmF5KGF3YWl0IGNyeXB0by5zdWJ0bGUuZGlnZXN0KCdTSEEtMjU2JywgdGV4dEVuY29kZXIkMS5lbmNvZGUoY29kZV92ZXJpZmllcikpKSwgdHJ1ZSk7XG4gIGNvbnN0IHN0YXRlID0gZnJvbVVpbnQ4QXJyYXkoY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheSgzMikpLCB0cnVlKTtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2tleXN0YXRpYy1jbG91ZC1zdGF0ZScsIEpTT04uc3RyaW5naWZ5KHtcbiAgICBzdGF0ZSxcbiAgICBmcm9tLFxuICAgIGNvZGVfdmVyaWZpZXJcbiAgfSkpO1xuICBjb25zdCB1cmwgPSBuZXcgVVJMKGAke0tFWVNUQVRJQ19DTE9VRF9BUElfVVJMfS9vYXV0aC9hdXRob3JpemVgKTtcbiAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3N0YXRlJywgc3RhdGUpO1xuICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnY2xpZW50X2lkJywgY29uZmlnLmNsb3VkLnByb2plY3QpO1xuICB1cmwuc2VhcmNoUGFyYW1zLnNldCgncmVkaXJlY3RfdXJpJywgYCR7d2luZG93LmxvY2F0aW9uLm9yaWdpbn0va2V5c3RhdGljL2Nsb3VkL29hdXRoL2NhbGxiYWNrYCk7XG4gIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdyZXNwb25zZV90eXBlJywgJ2NvZGUnKTtcbiAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2NvZGVfY2hhbGxlbmdlX21ldGhvZCcsICdTMjU2Jyk7XG4gIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdjb2RlX2NoYWxsZW5nZScsIGNvZGVfY2hhbGxlbmdlKTtcbiAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2tleXN0YXRpY192ZXJzaW9uJywgcGtnSnNvbi52ZXJzaW9uKTtcbiAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmwudG9TdHJpbmcoKTtcbn1cblxuY29uc3QgdGFibGVDZWxsQ2hpbGRyZW4gPSBbJ3BhcmFncmFwaCcsICdjb2RlJywgJ2hlYWRpbmcnLCAnb3JkZXJlZC1saXN0JywgJ3Vub3JkZXJlZC1saXN0JywgJ2RpdmlkZXInLCAnaW1hZ2UnXTtcbmNvbnN0IGJsb2NrcXVvdGVDaGlsZHJlbiA9IFsuLi50YWJsZUNlbGxDaGlsZHJlbiwgJ3RhYmxlJ107XG5jb25zdCBwYXJhZ3JhcGhMaWtlID0gWy4uLmJsb2NrcXVvdGVDaGlsZHJlbiwgJ2Jsb2NrcXVvdGUnXTtcbmNvbnN0IGluc2lkZU9mTGF5b3V0cyA9IFsuLi5wYXJhZ3JhcGhMaWtlLCAnY29tcG9uZW50LWJsb2NrJ107XG5mdW5jdGlvbiBibG9ja0NvbnRhaW5lcihhcmdzKSB7XG4gIHJldHVybiB7XG4gICAga2luZDogJ2Jsb2NrcycsXG4gICAgYWxsb3dlZENoaWxkcmVuOiBuZXcgU2V0KGFyZ3MuYWxsb3dlZENoaWxkcmVuKSxcbiAgICBibG9ja1RvV3JhcElubGluZXNJbjogYXJncy5hbGxvd2VkQ2hpbGRyZW5bMF0sXG4gICAgaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZTogYXJncy5pbnZhbGlkUG9zaXRpb25IYW5kbGVNb2RlXG4gIH07XG59XG5mdW5jdGlvbiBpbmxpbmVDb250YWluZXIoYXJncykge1xuICByZXR1cm4ge1xuICAgIGtpbmQ6ICdpbmxpbmVzJyxcbiAgICBpbnZhbGlkUG9zaXRpb25IYW5kbGVNb2RlOiBhcmdzLmludmFsaWRQb3NpdGlvbkhhbmRsZU1vZGVcbiAgfTtcbn1cbmNvbnN0IGVkaXRvclNjaGVtYSA9IHtcbiAgZWRpdG9yOiBibG9ja0NvbnRhaW5lcih7XG4gICAgYWxsb3dlZENoaWxkcmVuOiBbLi4uaW5zaWRlT2ZMYXlvdXRzLCAnbGF5b3V0J10sXG4gICAgaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZTogJ21vdmUnXG4gIH0pLFxuICBsYXlvdXQ6IGJsb2NrQ29udGFpbmVyKHtcbiAgICBhbGxvd2VkQ2hpbGRyZW46IFsnbGF5b3V0LWFyZWEnXSxcbiAgICBpbnZhbGlkUG9zaXRpb25IYW5kbGVNb2RlOiAnbW92ZSdcbiAgfSksXG4gICdsYXlvdXQtYXJlYSc6IGJsb2NrQ29udGFpbmVyKHtcbiAgICBhbGxvd2VkQ2hpbGRyZW46IGluc2lkZU9mTGF5b3V0cyxcbiAgICBpbnZhbGlkUG9zaXRpb25IYW5kbGVNb2RlOiAndW53cmFwJ1xuICB9KSxcbiAgYmxvY2txdW90ZTogYmxvY2tDb250YWluZXIoe1xuICAgIGFsbG93ZWRDaGlsZHJlbjogYmxvY2txdW90ZUNoaWxkcmVuLFxuICAgIGludmFsaWRQb3NpdGlvbkhhbmRsZU1vZGU6ICdtb3ZlJ1xuICB9KSxcbiAgcGFyYWdyYXBoOiBpbmxpbmVDb250YWluZXIoe1xuICAgIGludmFsaWRQb3NpdGlvbkhhbmRsZU1vZGU6ICd1bndyYXAnXG4gIH0pLFxuICBjb2RlOiBpbmxpbmVDb250YWluZXIoe1xuICAgIGludmFsaWRQb3NpdGlvbkhhbmRsZU1vZGU6ICdtb3ZlJ1xuICB9KSxcbiAgZGl2aWRlcjogaW5saW5lQ29udGFpbmVyKHtcbiAgICBpbnZhbGlkUG9zaXRpb25IYW5kbGVNb2RlOiAnbW92ZSdcbiAgfSksXG4gIGhlYWRpbmc6IGlubGluZUNvbnRhaW5lcih7XG4gICAgaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZTogJ3Vud3JhcCdcbiAgfSksXG4gICdjb21wb25lbnQtYmxvY2snOiBibG9ja0NvbnRhaW5lcih7XG4gICAgYWxsb3dlZENoaWxkcmVuOiBbJ2NvbXBvbmVudC1ibG9jay1wcm9wJywgJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCddLFxuICAgIGludmFsaWRQb3NpdGlvbkhhbmRsZU1vZGU6ICdtb3ZlJ1xuICB9KSxcbiAgJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCc6IGlubGluZUNvbnRhaW5lcih7XG4gICAgaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZTogJ3Vud3JhcCdcbiAgfSksXG4gICdjb21wb25lbnQtYmxvY2stcHJvcCc6IGJsb2NrQ29udGFpbmVyKHtcbiAgICBhbGxvd2VkQ2hpbGRyZW46IGluc2lkZU9mTGF5b3V0cyxcbiAgICBpbnZhbGlkUG9zaXRpb25IYW5kbGVNb2RlOiAndW53cmFwJ1xuICB9KSxcbiAgJ29yZGVyZWQtbGlzdCc6IGJsb2NrQ29udGFpbmVyKHtcbiAgICBhbGxvd2VkQ2hpbGRyZW46IFsnbGlzdC1pdGVtJ10sXG4gICAgaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZTogJ21vdmUnXG4gIH0pLFxuICAndW5vcmRlcmVkLWxpc3QnOiBibG9ja0NvbnRhaW5lcih7XG4gICAgYWxsb3dlZENoaWxkcmVuOiBbJ2xpc3QtaXRlbSddLFxuICAgIGludmFsaWRQb3NpdGlvbkhhbmRsZU1vZGU6ICdtb3ZlJ1xuICB9KSxcbiAgJ2xpc3QtaXRlbSc6IGJsb2NrQ29udGFpbmVyKHtcbiAgICBhbGxvd2VkQ2hpbGRyZW46IFsnbGlzdC1pdGVtLWNvbnRlbnQnLCAnb3JkZXJlZC1saXN0JywgJ3Vub3JkZXJlZC1saXN0J10sXG4gICAgaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZTogJ3Vud3JhcCdcbiAgfSksXG4gICdsaXN0LWl0ZW0tY29udGVudCc6IGlubGluZUNvbnRhaW5lcih7XG4gICAgaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZTogJ3Vud3JhcCdcbiAgfSksXG4gIGltYWdlOiBpbmxpbmVDb250YWluZXIoe1xuICAgIGludmFsaWRQb3NpdGlvbkhhbmRsZU1vZGU6ICdtb3ZlJ1xuICB9KSxcbiAgdGFibGU6IGJsb2NrQ29udGFpbmVyKHtcbiAgICBpbnZhbGlkUG9zaXRpb25IYW5kbGVNb2RlOiAnbW92ZScsXG4gICAgYWxsb3dlZENoaWxkcmVuOiBbJ3RhYmxlLWhlYWQnLCAndGFibGUtYm9keSddXG4gIH0pLFxuICAndGFibGUtYm9keSc6IGJsb2NrQ29udGFpbmVyKHtcbiAgICBpbnZhbGlkUG9zaXRpb25IYW5kbGVNb2RlOiAnbW92ZScsXG4gICAgYWxsb3dlZENoaWxkcmVuOiBbJ3RhYmxlLXJvdyddXG4gIH0pLFxuICAndGFibGUtcm93JzogYmxvY2tDb250YWluZXIoe1xuICAgIGludmFsaWRQb3NpdGlvbkhhbmRsZU1vZGU6ICdtb3ZlJyxcbiAgICBhbGxvd2VkQ2hpbGRyZW46IFsndGFibGUtY2VsbCddXG4gIH0pLFxuICAndGFibGUtY2VsbCc6IGJsb2NrQ29udGFpbmVyKHtcbiAgICBpbnZhbGlkUG9zaXRpb25IYW5kbGVNb2RlOiAnbW92ZScsXG4gICAgYWxsb3dlZENoaWxkcmVuOiB0YWJsZUNlbGxDaGlsZHJlblxuICB9KSxcbiAgJ3RhYmxlLWhlYWQnOiBibG9ja0NvbnRhaW5lcih7XG4gICAgaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZTogJ21vdmUnLFxuICAgIGFsbG93ZWRDaGlsZHJlbjogWyd0YWJsZS1yb3cnXVxuICB9KVxufTtcbmNvbnN0IGlubGluZUNvbnRhaW5lclR5cGVzID0gbmV3IFNldChPYmplY3QuZW50cmllcyhlZGl0b3JTY2hlbWEpLmZpbHRlcigoWywgdmFsdWVdKSA9PiB2YWx1ZS5raW5kID09PSAnaW5saW5lcycpLm1hcCgoW3R5cGVdKSA9PiB0eXBlKSk7XG5mdW5jdGlvbiBpc0lubGluZUNvbnRhaW5lcihub2RlKSB7XG4gIHJldHVybiBub2RlLnR5cGUgIT09IHVuZGVmaW5lZCAmJiBpbmxpbmVDb250YWluZXJUeXBlcy5oYXMobm9kZS50eXBlKTtcbn1cbmNvbnN0IGJsb2NrVHlwZXMgPSBuZXcgU2V0KE9iamVjdC5rZXlzKGVkaXRvclNjaGVtYSkuZmlsdGVyKHggPT4geCAhPT0gJ2VkaXRvcicpKTtcbmZ1bmN0aW9uIGlzQmxvY2sobm9kZSkge1xuICByZXR1cm4gYmxvY2tUeXBlcy5oYXMobm9kZS50eXBlKTtcbn1cblxuLy8gdG8gcHJpbnQgdGhlIGVkaXRvciBzY2hlbWEgaW4gR3JhcGh2aXogaWYgeW91IHdhbnQgdG8gdmlzdWFsaXplIGl0XG4vLyBmdW5jdGlvbiBwcmludEVkaXRvclNjaGVtYShlZGl0b3JTY2hlbWE6IEVkaXRvclNjaGVtYSkge1xuLy8gICByZXR1cm4gYGRpZ3JhcGggRyB7XG4vLyAgIGNvbmNlbnRyYXRlPXRydWU7XG4vLyAgICR7T2JqZWN0LmtleXMoZWRpdG9yU2NoZW1hKVxuLy8gICAgIC5tYXAoa2V5ID0+IHtcbi8vICAgICAgIGxldCB2YWwgPSBlZGl0b3JTY2hlbWFba2V5XTtcbi8vICAgICAgIGlmICh2YWwua2luZCA9PT0gJ2lubGluZXMnKSB7XG4vLyAgICAgICAgIHJldHVybiBgXCIke2tleX1cIiAtPiBpbmxpbmVzYDtcbi8vICAgICAgIH1cbi8vICAgICAgIGlmICh2YWwua2luZCA9PT0gJ2Jsb2NrcycpIHtcbi8vICAgICAgICAgcmV0dXJuIGBcIiR7a2V5fVwiIC0+IHske1suLi52YWwuYWxsb3dlZENoaWxkcmVuXS5tYXAoeCA9PiBKU09OLnN0cmluZ2lmeSh4KSkuam9pbignICcpfX1gO1xuLy8gICAgICAgfVxuLy8gICAgIH0pXG4vLyAgICAgLmpvaW4oJ1xcbiAgJyl9XG4vLyB9YDtcbi8vIH1cblxuZnVuY3Rpb24gZ2V0V2hvbGVEb2N1bWVudEZlYXR1cmVzRm9yQ2hpbGRGaWVsZChlZGl0b3JEb2N1bWVudEZlYXR1cmVzLCBvcHRpb25zKSB7XG4gIHZhciBfb3B0aW9ucyRmb3JtYXR0aW5nLCBfb3B0aW9ucyRmb3JtYXR0aW5nMiwgX29wdGlvbnMkZm9ybWF0dGluZzMsIF9vcHRpb25zJGZvcm1hdHRpbmc0LCBfb3B0aW9ucyRmb3JtYXR0aW5nNSwgX29wdGlvbnMkZm9ybWF0dGluZzYsIF9vcHRpb25zJGZvcm1hdHRpbmc3O1xuICBjb25zdCBpbmxpbmVNYXJrc0Zyb21PcHRpb25zID0gKF9vcHRpb25zJGZvcm1hdHRpbmcgPSBvcHRpb25zLmZvcm1hdHRpbmcpID09PSBudWxsIHx8IF9vcHRpb25zJGZvcm1hdHRpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRpb25zJGZvcm1hdHRpbmcuaW5saW5lTWFya3M7XG4gIGNvbnN0IGlubGluZU1hcmtzID0gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5rZXlzKGVkaXRvckRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5pbmxpbmVNYXJrcykubWFwKF9tYXJrID0+IHtcbiAgICBjb25zdCBtYXJrID0gX21hcms7XG4gICAgcmV0dXJuIFttYXJrLCBpbmxpbmVNYXJrc0Zyb21PcHRpb25zID09PSAnaW5oZXJpdCcgfHwgKGlubGluZU1hcmtzRnJvbU9wdGlvbnMgPT09IG51bGwgfHwgaW5saW5lTWFya3NGcm9tT3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogaW5saW5lTWFya3NGcm9tT3B0aW9uc1ttYXJrXSkgPT09ICdpbmhlcml0JyA/IGVkaXRvckRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5pbmxpbmVNYXJrc1ttYXJrXSA6IGZhbHNlXTtcbiAgfSkpO1xuICBjb25zdCBoZWFkaW5nTGV2ZWxzID0gKF9vcHRpb25zJGZvcm1hdHRpbmcyID0gb3B0aW9ucy5mb3JtYXR0aW5nKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRmb3JtYXR0aW5nMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29wdGlvbnMkZm9ybWF0dGluZzIuaGVhZGluZ0xldmVscztcbiAgcmV0dXJuIHtcbiAgICBmb3JtYXR0aW5nOiB7XG4gICAgICBpbmxpbmVNYXJrcyxcbiAgICAgIHNvZnRCcmVha3M6ICgoX29wdGlvbnMkZm9ybWF0dGluZzMgPSBvcHRpb25zLmZvcm1hdHRpbmcpID09PSBudWxsIHx8IF9vcHRpb25zJGZvcm1hdHRpbmczID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3B0aW9ucyRmb3JtYXR0aW5nMy5zb2Z0QnJlYWtzKSA9PT0gJ2luaGVyaXQnICYmIGVkaXRvckRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5zb2Z0QnJlYWtzLFxuICAgICAgYWxpZ25tZW50OiB7XG4gICAgICAgIGNlbnRlcjogZWRpdG9yRG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmFsaWdubWVudC5jZW50ZXIgJiYgKChfb3B0aW9ucyRmb3JtYXR0aW5nNCA9IG9wdGlvbnMuZm9ybWF0dGluZykgPT09IG51bGwgfHwgX29wdGlvbnMkZm9ybWF0dGluZzQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRpb25zJGZvcm1hdHRpbmc0LmFsaWdubWVudCkgPT09ICdpbmhlcml0JyxcbiAgICAgICAgZW5kOiBlZGl0b3JEb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuYWxpZ25tZW50LmVuZCAmJiAoKF9vcHRpb25zJGZvcm1hdHRpbmc1ID0gb3B0aW9ucy5mb3JtYXR0aW5nKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRmb3JtYXR0aW5nNSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29wdGlvbnMkZm9ybWF0dGluZzUuYWxpZ25tZW50KSA9PT0gJ2luaGVyaXQnXG4gICAgICB9LFxuICAgICAgYmxvY2tUeXBlczogKChfb3B0aW9ucyRmb3JtYXR0aW5nNiA9IG9wdGlvbnMuZm9ybWF0dGluZykgPT09IG51bGwgfHwgX29wdGlvbnMkZm9ybWF0dGluZzYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRpb25zJGZvcm1hdHRpbmc2LmJsb2NrVHlwZXMpID09PSAnaW5oZXJpdCcgPyBlZGl0b3JEb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuYmxvY2tUeXBlcyA6IHtcbiAgICAgICAgYmxvY2txdW90ZTogZmFsc2UsXG4gICAgICAgIGNvZGU6IGZhbHNlXG4gICAgICB9LFxuICAgICAgaGVhZGluZ3M6IGhlYWRpbmdMZXZlbHMgPT09ICdpbmhlcml0JyA/IGVkaXRvckRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5oZWFkaW5ncyA6IHtcbiAgICAgICAgbGV2ZWxzOiBoZWFkaW5nTGV2ZWxzID8gZWRpdG9yRG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmhlYWRpbmdzLmxldmVscy5maWx0ZXIobGV2ZWwgPT4gaGVhZGluZ0xldmVscy5pbmNsdWRlcyhsZXZlbCkpIDogW10sXG4gICAgICAgIHNjaGVtYTogZWRpdG9yRG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmhlYWRpbmdzLnNjaGVtYVxuICAgICAgfSxcbiAgICAgIGxpc3RUeXBlczogKChfb3B0aW9ucyRmb3JtYXR0aW5nNyA9IG9wdGlvbnMuZm9ybWF0dGluZykgPT09IG51bGwgfHwgX29wdGlvbnMkZm9ybWF0dGluZzcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRpb25zJGZvcm1hdHRpbmc3Lmxpc3RUeXBlcykgPT09ICdpbmhlcml0JyA/IGVkaXRvckRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5saXN0VHlwZXMgOiB7XG4gICAgICAgIG9yZGVyZWQ6IGZhbHNlLFxuICAgICAgICB1bm9yZGVyZWQ6IGZhbHNlXG4gICAgICB9XG4gICAgfSxcbiAgICBkaXZpZGVyczogb3B0aW9ucy5kaXZpZGVycyA9PT0gJ2luaGVyaXQnID8gZWRpdG9yRG9jdW1lbnRGZWF0dXJlcy5kaXZpZGVycyA6IGZhbHNlLFxuICAgIGltYWdlczogb3B0aW9ucy5pbWFnZXMgPT09ICdpbmhlcml0JyAmJiBlZGl0b3JEb2N1bWVudEZlYXR1cmVzLmltYWdlcyxcbiAgICBsYXlvdXRzOiBbXSxcbiAgICBsaW5rczogb3B0aW9ucy5saW5rcyA9PT0gJ2luaGVyaXQnICYmIGVkaXRvckRvY3VtZW50RmVhdHVyZXMubGlua3MsXG4gICAgdGFibGVzOiBvcHRpb25zLnRhYmxlcyA9PT0gJ2luaGVyaXQnICYmIGVkaXRvckRvY3VtZW50RmVhdHVyZXMudGFibGVzXG4gIH07XG59XG5mdW5jdGlvbiBnZXREb2N1bWVudEZlYXR1cmVzRm9yQ2hpbGRGaWVsZChlZGl0b3JEb2N1bWVudEZlYXR1cmVzLCBvcHRpb25zKSB7XG4gIHZhciBfb3B0aW9ucyRmb3JtYXR0aW5nOCwgX29wdGlvbnMkZm9ybWF0dGluZzEwLCBfb3B0aW9ucyRmb3JtYXR0aW5nMTEsIF9vcHRpb25zJGZvcm1hdHRpbmcxMiwgX29wdGlvbnMkZm9ybWF0dGluZzEzLCBfb3B0aW9ucyRmb3JtYXR0aW5nMTQ7XG4gIC8vIGFuIGltcG9ydGFudCBub3RlIGZvciB0aGlzOiBub3JtYWxpemF0aW9uIGJhc2VkIG9uIGRvY3VtZW50IGZlYXR1cmVzXG4gIC8vIGlzIGRvbmUgYmFzZWQgb24gdGhlIGRvY3VtZW50IGZlYXR1cmVzIHJldHVybmVkIGhlcmVcbiAgLy8gYW5kIHRoZSBlZGl0b3IgZG9jdW1lbnQgZmVhdHVyZXNcbiAgLy8gc28gdGhlIHJlc3VsdCBmb3IgYW55IGdpdmVuIGNoaWxkIHByb3Agd2lsbCBiZSB0aGUgdGhpbmdzIHRoYXQgYXJlXG4gIC8vIGFsbG93ZWQgYnkgYm90aCB0aGVzZSBkb2N1bWVudCBmZWF0dXJlc1xuICAvLyBBTkQgdGhlIGVkaXRvciBkb2N1bWVudCBmZWF0dXJlc1xuICBjb25zdCBpbmxpbmVNYXJrc0Zyb21PcHRpb25zID0gKF9vcHRpb25zJGZvcm1hdHRpbmc4ID0gb3B0aW9ucy5mb3JtYXR0aW5nKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRmb3JtYXR0aW5nOCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29wdGlvbnMkZm9ybWF0dGluZzguaW5saW5lTWFya3M7XG4gIGNvbnN0IGlubGluZU1hcmtzID0gaW5saW5lTWFya3NGcm9tT3B0aW9ucyA9PT0gJ2luaGVyaXQnID8gJ2luaGVyaXQnIDogT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5rZXlzKGVkaXRvckRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5pbmxpbmVNYXJrcykubWFwKG1hcmsgPT4ge1xuICAgIHJldHVybiBbbWFyaywgISEoaW5saW5lTWFya3NGcm9tT3B0aW9ucyB8fCB7fSlbbWFya11dO1xuICB9KSk7XG4gIGlmIChvcHRpb25zLmtpbmQgPT09ICdpbmxpbmUnKSB7XG4gICAgdmFyIF9vcHRpb25zJGZvcm1hdHRpbmc5O1xuICAgIHJldHVybiB7XG4gICAgICBraW5kOiAnaW5saW5lJyxcbiAgICAgIGlubGluZU1hcmtzLFxuICAgICAgZG9jdW1lbnRGZWF0dXJlczoge1xuICAgICAgICBsaW5rczogb3B0aW9ucy5saW5rcyA9PT0gJ2luaGVyaXQnXG4gICAgICB9LFxuICAgICAgc29mdEJyZWFrczogKChfb3B0aW9ucyRmb3JtYXR0aW5nOSA9IG9wdGlvbnMuZm9ybWF0dGluZykgPT09IG51bGwgfHwgX29wdGlvbnMkZm9ybWF0dGluZzkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRpb25zJGZvcm1hdHRpbmc5LnNvZnRCcmVha3MpID09PSAnaW5oZXJpdCdcbiAgICB9O1xuICB9XG4gIGNvbnN0IGhlYWRpbmdMZXZlbHMgPSAoX29wdGlvbnMkZm9ybWF0dGluZzEwID0gb3B0aW9ucy5mb3JtYXR0aW5nKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRmb3JtYXR0aW5nMTAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRpb25zJGZvcm1hdHRpbmcxMC5oZWFkaW5nTGV2ZWxzO1xuICByZXR1cm4ge1xuICAgIGtpbmQ6ICdibG9jaycsXG4gICAgaW5saW5lTWFya3MsXG4gICAgc29mdEJyZWFrczogKChfb3B0aW9ucyRmb3JtYXR0aW5nMTEgPSBvcHRpb25zLmZvcm1hdHRpbmcpID09PSBudWxsIHx8IF9vcHRpb25zJGZvcm1hdHRpbmcxMSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29wdGlvbnMkZm9ybWF0dGluZzExLnNvZnRCcmVha3MpID09PSAnaW5oZXJpdCcsXG4gICAgZG9jdW1lbnRGZWF0dXJlczoge1xuICAgICAgbGF5b3V0czogW10sXG4gICAgICBkaXZpZGVyczogb3B0aW9ucy5kaXZpZGVycyA9PT0gJ2luaGVyaXQnID8gZWRpdG9yRG9jdW1lbnRGZWF0dXJlcy5kaXZpZGVycyA6IGZhbHNlLFxuICAgICAgZm9ybWF0dGluZzoge1xuICAgICAgICBhbGlnbm1lbnQ6ICgoX29wdGlvbnMkZm9ybWF0dGluZzEyID0gb3B0aW9ucy5mb3JtYXR0aW5nKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRmb3JtYXR0aW5nMTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRpb25zJGZvcm1hdHRpbmcxMi5hbGlnbm1lbnQpID09PSAnaW5oZXJpdCcgPyBlZGl0b3JEb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuYWxpZ25tZW50IDoge1xuICAgICAgICAgIGNlbnRlcjogZmFsc2UsXG4gICAgICAgICAgZW5kOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBibG9ja1R5cGVzOiAoKF9vcHRpb25zJGZvcm1hdHRpbmcxMyA9IG9wdGlvbnMuZm9ybWF0dGluZykgPT09IG51bGwgfHwgX29wdGlvbnMkZm9ybWF0dGluZzEzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3B0aW9ucyRmb3JtYXR0aW5nMTMuYmxvY2tUeXBlcykgPT09ICdpbmhlcml0JyA/IGVkaXRvckRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5ibG9ja1R5cGVzIDoge1xuICAgICAgICAgIGJsb2NrcXVvdGU6IGZhbHNlLFxuICAgICAgICAgIGNvZGU6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGhlYWRpbmdzOiBoZWFkaW5nTGV2ZWxzID09PSAnaW5oZXJpdCcgPyBlZGl0b3JEb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuaGVhZGluZ3MgOiB7XG4gICAgICAgICAgbGV2ZWxzOiBoZWFkaW5nTGV2ZWxzID8gZWRpdG9yRG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmhlYWRpbmdzLmxldmVscy5maWx0ZXIobGV2ZWwgPT4gaGVhZGluZ0xldmVscy5pbmNsdWRlcyhsZXZlbCkpIDogW10sXG4gICAgICAgICAgc2NoZW1hOiBlZGl0b3JEb2N1bWVudEZlYXR1cmVzLmZvcm1hdHRpbmcuaGVhZGluZ3Muc2NoZW1hXG4gICAgICAgIH0sXG4gICAgICAgIGxpc3RUeXBlczogKChfb3B0aW9ucyRmb3JtYXR0aW5nMTQgPSBvcHRpb25zLmZvcm1hdHRpbmcpID09PSBudWxsIHx8IF9vcHRpb25zJGZvcm1hdHRpbmcxNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29wdGlvbnMkZm9ybWF0dGluZzE0Lmxpc3RUeXBlcykgPT09ICdpbmhlcml0JyA/IGVkaXRvckRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5saXN0VHlwZXMgOiB7XG4gICAgICAgICAgb3JkZXJlZDogZmFsc2UsXG4gICAgICAgICAgdW5vcmRlcmVkOiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgbGlua3M6IG9wdGlvbnMubGlua3MgPT09ICdpbmhlcml0JyxcbiAgICAgIGltYWdlczogb3B0aW9ucy5pbWFnZXMgPT09ICdpbmhlcml0JyA/IGVkaXRvckRvY3VtZW50RmVhdHVyZXMuaW1hZ2VzIDogZmFsc2UsXG4gICAgICB0YWJsZXM6IG9wdGlvbnMudGFibGVzID09PSAnaW5oZXJpdCdcbiAgICB9LFxuICAgIGNvbXBvbmVudEJsb2Nrczogb3B0aW9ucy5jb21wb25lbnRCbG9ja3MgPT09ICdpbmhlcml0J1xuICB9O1xufVxuZnVuY3Rpb24gZ2V0U2NoZW1hQXRQcm9wUGF0aElubmVyKHBhdGgsIHZhbHVlLCBzY2hlbWEpIHtcbiAgLy8gYmVjYXVzZSB3ZSdyZSBjaGVja2luZyB0aGUgbGVuZ3RoIGhlcmVcbiAgLy8gdGhlIG5vbi1udWxsIGFzc2VydHMgb24gc2hpZnQgYmVsb3cgYXJlIGZpbmVcbiAgaWYgKHBhdGgubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHNjaGVtYTtcbiAgfVxuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdjaGlsZCcgfHwgc2NoZW1hLmtpbmQgPT09ICdmb3JtJykge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdjb25kaXRpb25hbCcpIHtcbiAgICBjb25zdCBrZXkgPSBwYXRoLnNoaWZ0KCk7XG4gICAgaWYgKGtleSA9PT0gJ2Rpc2NyaW1pbmFudCcpIHtcbiAgICAgIHJldHVybiBnZXRTY2hlbWFBdFByb3BQYXRoSW5uZXIocGF0aCwgdmFsdWUuZGlzY3JpbWluYW50LCBzY2hlbWEuZGlzY3JpbWluYW50KTtcbiAgICB9XG4gICAgaWYgKGtleSA9PT0gJ3ZhbHVlJykge1xuICAgICAgY29uc3QgcHJvcFZhbCA9IHNjaGVtYS52YWx1ZXNbdmFsdWUuZGlzY3JpbWluYW50XTtcbiAgICAgIHJldHVybiBnZXRTY2hlbWFBdFByb3BQYXRoSW5uZXIocGF0aCwgdmFsdWUudmFsdWUsIHByb3BWYWwpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnb2JqZWN0Jykge1xuICAgIGNvbnN0IGtleSA9IHBhdGguc2hpZnQoKTtcbiAgICByZXR1cm4gZ2V0U2NoZW1hQXRQcm9wUGF0aElubmVyKHBhdGgsIHZhbHVlW2tleV0sIHNjaGVtYS5maWVsZHNba2V5XSk7XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnYXJyYXknKSB7XG4gICAgY29uc3QgaW5kZXggPSBwYXRoLnNoaWZ0KCk7XG4gICAgcmV0dXJuIGdldFNjaGVtYUF0UHJvcFBhdGhJbm5lcihwYXRoLCB2YWx1ZVtpbmRleF0sIHNjaGVtYS5lbGVtZW50KTtcbiAgfVxuICBhc3NlcnROZXZlcihzY2hlbWEpO1xufVxuZnVuY3Rpb24gZ2V0U2NoZW1hQXRQcm9wUGF0aChwYXRoLCB2YWx1ZSwgcHJvcHMpIHtcbiAgcmV0dXJuIGdldFNjaGVtYUF0UHJvcFBhdGhJbm5lcihbLi4ucGF0aF0sIHZhbHVlLCB7XG4gICAga2luZDogJ29iamVjdCcsXG4gICAgZmllbGRzOiBwcm9wc1xuICB9KTtcbn1cbmZ1bmN0aW9uIGdldEFuY2VzdG9yU2NoZW1hcyhyb290U2NoZW1hLCBwYXRoLCB2YWx1ZSkge1xuICBjb25zdCBhbmNlc3RvcnMgPSBbXTtcbiAgY29uc3QgY3VycmVudFBhdGggPSBbLi4ucGF0aF07XG4gIGxldCBjdXJyZW50UHJvcCA9IHJvb3RTY2hlbWE7XG4gIGxldCBjdXJyZW50VmFsdWUgPSB2YWx1ZTtcbiAgd2hpbGUgKGN1cnJlbnRQYXRoLmxlbmd0aCkge1xuICAgIGFuY2VzdG9ycy5wdXNoKGN1cnJlbnRQcm9wKTtcbiAgICBjb25zdCBrZXkgPSBjdXJyZW50UGF0aC5zaGlmdCgpOyAvLyB0aGlzIGNvZGUgb25seSBydW5zIHdoZW4gcGF0aC5sZW5ndGggaXMgdHJ1dGh5IHNvIHRoaXMgbm9uLW51bGwgYXNzZXJ0aW9uIGlzIGZpbmVcbiAgICBpZiAoY3VycmVudFByb3Aua2luZCA9PT0gJ2FycmF5Jykge1xuICAgICAgY3VycmVudFByb3AgPSBjdXJyZW50UHJvcC5lbGVtZW50O1xuICAgICAgY3VycmVudFZhbHVlID0gY3VycmVudFZhbHVlW2tleV07XG4gICAgfSBlbHNlIGlmIChjdXJyZW50UHJvcC5raW5kID09PSAnY29uZGl0aW9uYWwnKSB7XG4gICAgICBjdXJyZW50UHJvcCA9IGN1cnJlbnRQcm9wLnZhbHVlc1t2YWx1ZS5kaXNjcmltaW5hbnRdO1xuICAgICAgY3VycmVudFZhbHVlID0gY3VycmVudFZhbHVlLnZhbHVlO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudFByb3Aua2luZCA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGN1cnJlbnRWYWx1ZSA9IGN1cnJlbnRWYWx1ZVtrZXldO1xuICAgICAgY3VycmVudFByb3AgPSBjdXJyZW50UHJvcC5maWVsZHNba2V5XTtcbiAgICB9IGVsc2UgaWYgKGN1cnJlbnRQcm9wLmtpbmQgPT09ICdjaGlsZCcgfHwgY3VycmVudFByb3Aua2luZCA9PT0gJ2Zvcm0nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHVuZXhwZWN0ZWQgcHJvcCBcIiR7a2V5fVwiYCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFzc2VydE5ldmVyKGN1cnJlbnRQcm9wKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGFuY2VzdG9ycztcbn1cbmZ1bmN0aW9uIGdldFBsYWNlaG9sZGVyVGV4dEZvclByb3BQYXRoKHByb3BQYXRoLCBmaWVsZHMsIGZvcm1Qcm9wcykge1xuICBjb25zdCBmaWVsZCA9IGdldFNjaGVtYUF0UHJvcFBhdGgocHJvcFBhdGgsIGZvcm1Qcm9wcywgZmllbGRzKTtcbiAgaWYgKChmaWVsZCA9PT0gbnVsbCB8fCBmaWVsZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZmllbGQua2luZCkgPT09ICdjaGlsZCcgJiYgKGZpZWxkLm9wdGlvbnMua2luZCA9PT0gJ2Jsb2NrJyAmJiBmaWVsZC5vcHRpb25zLmVkaXRJbiAhPT0gJ21vZGFsJyB8fCBmaWVsZC5vcHRpb25zLmtpbmQgPT09ICdpbmxpbmUnKSkge1xuICAgIHJldHVybiBmaWVsZC5vcHRpb25zLnBsYWNlaG9sZGVyO1xuICB9XG4gIHJldHVybiAnJztcbn1cbmZ1bmN0aW9uIGNsb25lRGVzY2VuZGVudChub2RlKSB7XG4gIGlmIChFbGVtZW50JDEuaXNFbGVtZW50KG5vZGUpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLm5vZGUsXG4gICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbi5tYXAoY2xvbmVEZXNjZW5kZW50KVxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHtcbiAgICAuLi5ub2RlXG4gIH07XG59XG5cbmNvbnN0IGFsbE1hcmtzID0gWydib2xkJywgJ2l0YWxpYycsICd1bmRlcmxpbmUnLCAnc3RyaWtldGhyb3VnaCcsICdjb2RlJywgJ3N1cGVyc2NyaXB0JywgJ3N1YnNjcmlwdCcsICdrZXlib2FyZCddO1xuY29uc3QgaXNFbGVtZW50QWN0aXZlID0gKGVkaXRvciwgZm9ybWF0KSA9PiB7XG4gIGNvbnN0IFttYXRjaF0gPSBFZGl0b3Iubm9kZXMoZWRpdG9yLCB7XG4gICAgbWF0Y2g6IG4gPT4gbi50eXBlID09PSBmb3JtYXRcbiAgfSk7XG4gIHJldHVybiAhIW1hdGNoO1xufTtcbmZ1bmN0aW9uIGNsZWFyRm9ybWF0dGluZyhlZGl0b3IpIHtcbiAgVHJhbnNmb3Jtcy51bndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICBtYXRjaDogbm9kZSA9PiBub2RlLnR5cGUgPT09ICdoZWFkaW5nJyB8fCBub2RlLnR5cGUgPT09ICdibG9ja3F1b3RlJyB8fCBub2RlLnR5cGUgPT09ICdjb2RlJ1xuICB9KTtcbiAgVHJhbnNmb3Jtcy51bnNldE5vZGVzKGVkaXRvciwgYWxsTWFya3MsIHtcbiAgICBtYXRjaDogVGV4dC5pc1RleHRcbiAgfSk7XG59XG5mdW5jdGlvbiBtb3ZlQ2hpbGRyZW4oZWRpdG9yLCBwYXJlbnQsIHRvLCBzaG91bGRNb3ZlTm9kZSA9ICgpID0+IHRydWUpIHtcbiAgY29uc3QgcGFyZW50UGF0aCA9IFBhdGguaXNQYXRoKHBhcmVudCkgPyBwYXJlbnQgOiBwYXJlbnRbMV07XG4gIGNvbnN0IHBhcmVudE5vZGUgPSBQYXRoLmlzUGF0aChwYXJlbnQpID8gTm9kZS5nZXQoZWRpdG9yLCBwYXJlbnRQYXRoKSA6IHBhcmVudFswXTtcbiAgaWYgKCFpc0Jsb2NrKHBhcmVudE5vZGUpKSByZXR1cm47XG4gIGZvciAobGV0IGkgPSBwYXJlbnROb2RlLmNoaWxkcmVuLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgaWYgKHNob3VsZE1vdmVOb2RlKHBhcmVudE5vZGUuY2hpbGRyZW5baV0sIGkpKSB7XG4gICAgICBjb25zdCBjaGlsZFBhdGggPSBbLi4ucGFyZW50UGF0aCwgaV07XG4gICAgICBUcmFuc2Zvcm1zLm1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgYXQ6IGNoaWxkUGF0aCxcbiAgICAgICAgdG9cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byBFZGl0b3IuYWZ0ZXIgZXhjZXB0IHRoYXQgaXQgaWdub3JlcyBwb2ludHMgdGhhdCBoYXZlIG5vIGNvbnRlbnRcbiAqIGxpa2UgdGhlIHBvaW50IGluIGEgdm9pZCB0ZXh0IG5vZGUsIGFuIGVtcHR5IHRleHQgbm9kZSBhbmQgdGhlIGxhc3QgcG9pbnQgaW4gYSB0ZXh0IG5vZGVcbiAqL1xuLy8gVE9ETzogdGhpcyB3b3VsZCBwcm9iYWJseSBicmVhayBpZiB5b3Ugd2VyZSB0cnlpbmcgdG8gZ2V0IHRoZSBsYXN0IHBvaW50IGluIHRoZSBlZGl0b3I/XG5mdW5jdGlvbiBFZGl0b3JBZnRlckJ1dElnbm9yaW5naW5nUG9pbnRzV2l0aE5vQ29udGVudChlZGl0b3IsIGF0LCB7XG4gIGRpc3RhbmNlID0gMVxufSA9IHt9KSB7XG4gIGNvbnN0IGFuY2hvciA9IEVkaXRvci5wb2ludChlZGl0b3IsIGF0LCB7XG4gICAgZWRnZTogJ2VuZCdcbiAgfSk7XG4gIGNvbnN0IGZvY3VzID0gRWRpdG9yLmVuZChlZGl0b3IsIFtdKTtcbiAgY29uc3QgcmFuZ2UgPSB7XG4gICAgYW5jaG9yLFxuICAgIGZvY3VzXG4gIH07XG4gIGxldCBkID0gMDtcbiAgbGV0IHRhcmdldDtcbiAgZm9yIChjb25zdCBwIG9mIEVkaXRvci5wb3NpdGlvbnMoZWRpdG9yLCB7XG4gICAgYXQ6IHJhbmdlXG4gIH0pKSB7XG4gICAgaWYgKGQgPiBkaXN0YW5jZSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgLy8gdGhpcyBpcyB0aGUgaW1wb3J0YW50IGNoYW5nZVxuICAgIGNvbnN0IG5vZGUgPSBOb2RlLmdldChlZGl0b3IsIHAucGF0aCk7XG4gICAgaWYgKG5vZGUudGV4dC5sZW5ndGggPT09IHAub2Zmc2V0KSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGQgIT09IDApIHtcbiAgICAgIHRhcmdldCA9IHA7XG4gICAgfVxuICAgIGQrKztcbiAgfVxuICByZXR1cm4gdGFyZ2V0O1xufVxuZnVuY3Rpb24gbm9kZVR5cGVNYXRjaGVyKC4uLmFyZ3MpIHtcbiAgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgY29uc3QgdHlwZSA9IGFyZ3NbMF07XG4gICAgcmV0dXJuIG5vZGUgPT4gbm9kZS50eXBlID09PSB0eXBlO1xuICB9XG4gIGNvbnN0IHNldCA9IG5ldyBTZXQoYXJncyk7XG4gIHJldHVybiBub2RlID0+IHR5cGVvZiBub2RlLnR5cGUgPT09ICdzdHJpbmcnICYmIHNldC5oYXMobm9kZS50eXBlKTtcbn1cbmZ1bmN0aW9uIGdldEFuY2VzdG9yQ29tcG9uZW50Q2hpbGRGaWVsZERvY3VtZW50RmVhdHVyZXMoZWRpdG9yLCBlZGl0b3JEb2N1bWVudEZlYXR1cmVzLCBjb21wb25lbnRCbG9ja3MpIHtcbiAgY29uc3QgYW5jZXN0b3JDb21wb25lbnRQcm9wID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgIG1hdGNoOiBub2RlVHlwZU1hdGNoZXIoJ2NvbXBvbmVudC1ibG9jay1wcm9wJywgJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCcpXG4gIH0pO1xuICBpZiAoYW5jZXN0b3JDb21wb25lbnRQcm9wKSB7XG4gICAgY29uc3QgcHJvcFBhdGggPSBhbmNlc3RvckNvbXBvbmVudFByb3BbMF0ucHJvcFBhdGg7XG4gICAgY29uc3QgYW5jZXN0b3JDb21wb25lbnQgPSBFZGl0b3IucGFyZW50KGVkaXRvciwgYW5jZXN0b3JDb21wb25lbnRQcm9wWzFdKTtcbiAgICBpZiAoYW5jZXN0b3JDb21wb25lbnRbMF0udHlwZSA9PT0gJ2NvbXBvbmVudC1ibG9jaycpIHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IGFuY2VzdG9yQ29tcG9uZW50WzBdLmNvbXBvbmVudDtcbiAgICAgIGNvbnN0IGNvbXBvbmVudEJsb2NrID0gY29tcG9uZW50QmxvY2tzW2NvbXBvbmVudF07XG4gICAgICBpZiAoY29tcG9uZW50QmxvY2sgJiYgcHJvcFBhdGgpIHtcbiAgICAgICAgY29uc3QgY2hpbGRGaWVsZCA9IGdldFNjaGVtYUF0UHJvcFBhdGgocHJvcFBhdGgsIGFuY2VzdG9yQ29tcG9uZW50WzBdLnByb3BzLCBjb21wb25lbnRCbG9jay5zY2hlbWEpO1xuICAgICAgICBpZiAoKGNoaWxkRmllbGQgPT09IG51bGwgfHwgY2hpbGRGaWVsZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2hpbGRGaWVsZC5raW5kKSA9PT0gJ2NoaWxkJykge1xuICAgICAgICAgIHJldHVybiBnZXREb2N1bWVudEZlYXR1cmVzRm9yQ2hpbGRGaWVsZChlZGl0b3JEb2N1bWVudEZlYXR1cmVzLCBjaGlsZEZpZWxkLm9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8vIHRoaXMgaXMgdXNlZCBpbiByZWFjdC1zZXJ2ZXIgZW52aXJvbm1lbnRzIHRvIGF2b2lkIGJ1bmRsaW5nIFVJIHdoZW4gdGhlIHJlYWRlciBBUEkgaXMgdXNlZFxuLy8gaWYgeW91IGFkZGVkIGEgbmV3IGZpZWxkIGFuZCBnZXQgYW4gZXJyb3IgdGhhdCB0aGVyZSdzIG1pc3NpbmcgYSBtaXNzaW5nIGV4cG9ydCBoZXJlLFxuLy8geW91IHByb2JhYmx5IGp1c3QgbmVlZCB0byBhZGQgYW5vdGhlciBlbXB0eSBleHBvcnQgaGVyZVxuXG5mdW5jdGlvbiBlbXB0eSgpIHtcbiAgdGhyb3cgbmV3IEVycm9yKFwidW5leHBlY3RlZCBjYWxsIHRvIGZ1bmN0aW9uIHRoYXQgc2hvdWxkbid0IGJlIGNhbGxlZCBpbiBSZWFjdCBzZXJ2ZXIgY29tcG9uZW50IGVudmlyb25tZW50XCIpO1xufVxubGV0IFNsdWdGaWVsZElucHV0ID0gZW1wdHksXG4gIFRleHRGaWVsZElucHV0ID0gZW1wdHksXG4gIFVybEZpZWxkSW5wdXQgPSBlbXB0eSxcbiAgU2VsZWN0RmllbGRJbnB1dCA9IGVtcHR5LFxuICBSZWxhdGlvbnNoaXBJbnB1dCA9IGVtcHR5LFxuICBQYXRoUmVmZXJlbmNlSW5wdXQgPSBlbXB0eSxcbiAgTXVsdGlzZWxlY3RGaWVsZElucHV0ID0gZW1wdHksXG4gIEludGVnZXJGaWVsZElucHV0ID0gZW1wdHksXG4gIEltYWdlRmllbGRJbnB1dCA9IGVtcHR5LFxuICBGaWxlRmllbGRJbnB1dCA9IGVtcHR5LFxuICBEYXRldGltZUZpZWxkSW5wdXQgPSBlbXB0eSxcbiAgRGF0ZUZpZWxkSW5wdXQgPSBlbXB0eSxcbiAgQ2xvdWRJbWFnZUZpZWxkSW5wdXQgPSBlbXB0eSxcbiAgQmxvY2tzRmllbGRJbnB1dCA9IGVtcHR5LFxuICBEb2N1bWVudEZpZWxkSW5wdXQgPSBlbXB0eSxcbiAgQ2hlY2tib3hGaWVsZElucHV0ID0gZW1wdHksXG4gIGNyZWF0ZUVkaXRvclNjaGVtYSA9IGVtcHR5LFxuICBnZXREZWZhdWx0VmFsdWUgPSBlbXB0eSxcbiAgcGFyc2VUb0VkaXRvclN0YXRlID0gZW1wdHksXG4gIHNlcmlhbGl6ZUZyb21FZGl0b3JTdGF0ZSA9IGVtcHR5O1xuXG5jbGFzcyBGaWVsZERhdGFFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9ICdGaWVsZERhdGFFcnJvcic7XG4gIH1cbn1cblxuZnVuY3Rpb24gYXNzZXJ0UmVxdWlyZWQodmFsdWUsIHZhbGlkYXRpb24sIGxhYmVsKSB7XG4gIGlmICh2YWx1ZSA9PT0gbnVsbCAmJiB2YWxpZGF0aW9uICE9PSBudWxsICYmIHZhbGlkYXRpb24gIT09IHZvaWQgMCAmJiB2YWxpZGF0aW9uLmlzUmVxdWlyZWQpIHtcbiAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoYCR7bGFiZWx9IGlzIHJlcXVpcmVkYCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlKGNvbmZpZykge1xuICByZXR1cm4ge1xuICAgIGtpbmQ6ICdmb3JtJyxcbiAgICBJbnB1dDogY29uZmlnLklucHV0LFxuICAgIGRlZmF1bHRWYWx1ZTogY29uZmlnLmRlZmF1bHRWYWx1ZSxcbiAgICBwYXJzZTogY29uZmlnLnBhcnNlLFxuICAgIHNlcmlhbGl6ZTogY29uZmlnLnNlcmlhbGl6ZSxcbiAgICB2YWxpZGF0ZTogY29uZmlnLnZhbGlkYXRlLFxuICAgIHJlYWRlcjoge1xuICAgICAgcGFyc2UodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGNvbmZpZy52YWxpZGF0ZShjb25maWcucGFyc2UodmFsdWUpKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbmNvbnN0IGFycmF5VmFsdWVzVG9FbGVtZW50S2V5cyA9IG5ldyBXZWFrTWFwKCk7XG5sZXQgY291bnRlciA9IDA7XG5mdW5jdGlvbiBnZXRLZXlzRm9yQXJyYXlWYWx1ZSh2YWx1ZSkge1xuICBpZiAoIWFycmF5VmFsdWVzVG9FbGVtZW50S2V5cy5oYXModmFsdWUpKSB7XG4gICAgYXJyYXlWYWx1ZXNUb0VsZW1lbnRLZXlzLnNldCh2YWx1ZSwgQXJyYXkuZnJvbSh7XG4gICAgICBsZW5ndGg6IHZhbHVlLmxlbmd0aFxuICAgIH0sIGdldE5ld0FycmF5RWxlbWVudEtleSkpO1xuICB9XG4gIHJldHVybiBhcnJheVZhbHVlc1RvRWxlbWVudEtleXMuZ2V0KHZhbHVlKTtcbn1cbmZ1bmN0aW9uIHNldEtleXNGb3JBcnJheVZhbHVlKHZhbHVlLCBlbGVtZW50SWRzKSB7XG4gIGFycmF5VmFsdWVzVG9FbGVtZW50S2V5cy5zZXQodmFsdWUsIGVsZW1lbnRJZHMpO1xufVxuZnVuY3Rpb24gZ2V0TmV3QXJyYXlFbGVtZW50S2V5KCkge1xuICByZXR1cm4gKGNvdW50ZXIrKykudG9TdHJpbmcoKTtcbn1cbmNvbnN0IGdldEluaXRpYWxQcm9wc1ZhbHVlID0gX2dldEluaXRpYWxQcm9wc1ZhbHVlO1xuZnVuY3Rpb24gX2dldEluaXRpYWxQcm9wc1ZhbHVlKHNjaGVtYSkge1xuICBzd2l0Y2ggKHNjaGVtYS5raW5kKSB7XG4gICAgY2FzZSAnZm9ybSc6XG4gICAgICByZXR1cm4gc2NoZW1hLmRlZmF1bHRWYWx1ZSgpO1xuICAgIGNhc2UgJ2NoaWxkJzpcbiAgICAgIHJldHVybiBzY2hlbWEub3B0aW9ucy5raW5kID09PSAnYmxvY2snID8gW3tcbiAgICAgICAgdHlwZTogJ3BhcmFncmFwaCcsXG4gICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgIHRleHQ6ICcnXG4gICAgICAgIH1dXG4gICAgICB9XSA6IG51bGw7XG4gICAgY2FzZSAnY29uZGl0aW9uYWwnOlxuICAgICAge1xuICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWUgPSBzY2hlbWEuZGlzY3JpbWluYW50LmRlZmF1bHRWYWx1ZSgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGRpc2NyaW1pbmFudDogZGVmYXVsdFZhbHVlLFxuICAgICAgICAgIHZhbHVlOiBnZXRJbml0aWFsUHJvcHNWYWx1ZShzY2hlbWEudmFsdWVzW2RlZmF1bHRWYWx1ZS50b1N0cmluZygpXSlcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICBjYXNlICdvYmplY3QnOlxuICAgICAge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoc2NoZW1hLmZpZWxkcykpIHtcbiAgICAgICAgICBvYmpba2V5XSA9IGdldEluaXRpYWxQcm9wc1ZhbHVlKHNjaGVtYS5maWVsZHNba2V5XSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgIH1cbiAgICBjYXNlICdhcnJheSc6XG4gICAgICB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgfVxuICBhc3NlcnROZXZlcihzY2hlbWEpO1xufVxuZnVuY3Rpb24gZ2V0SW5pdGlhbFByb3BzVmFsdWVGcm9tSW5pdGlhbGl6ZXIoc2NoZW1hLCBpbml0aWFsaXplcikge1xuICBzd2l0Y2ggKHNjaGVtYS5raW5kKSB7XG4gICAgY2FzZSAnZm9ybSc6XG4gICAgICByZXR1cm4gaW5pdGlhbGl6ZXIgPT09IHVuZGVmaW5lZCA/IHNjaGVtYS5kZWZhdWx0VmFsdWUoKSA6IGluaXRpYWxpemVyO1xuICAgIGNhc2UgJ2NoaWxkJzpcbiAgICAgIHJldHVybiBpbml0aWFsaXplciAhPT0gbnVsbCAmJiBpbml0aWFsaXplciAhPT0gdm9pZCAwID8gaW5pdGlhbGl6ZXIgOiBzY2hlbWEub3B0aW9ucy5raW5kID09PSAnYmxvY2snID8gW3tcbiAgICAgICAgdHlwZTogJ3BhcmFncmFwaCcsXG4gICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgIHRleHQ6ICcnXG4gICAgICAgIH1dXG4gICAgICB9XSA6IG51bGw7XG4gICAgY2FzZSAnY29uZGl0aW9uYWwnOlxuICAgICAge1xuICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWUgPSBpbml0aWFsaXplciA9PT0gdW5kZWZpbmVkID8gc2NoZW1hLmRpc2NyaW1pbmFudC5kZWZhdWx0VmFsdWUoKSA6IGluaXRpYWxpemVyLmRpc2NyaW1pbmFudDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBkaXNjcmltaW5hbnQ6IGRlZmF1bHRWYWx1ZSxcbiAgICAgICAgICB2YWx1ZTogZ2V0SW5pdGlhbFByb3BzVmFsdWVGcm9tSW5pdGlhbGl6ZXIoc2NoZW1hLnZhbHVlc1tkZWZhdWx0VmFsdWUudG9TdHJpbmcoKV0sIGluaXRpYWxpemVyID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiBpbml0aWFsaXplci52YWx1ZSlcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICBjYXNlICdvYmplY3QnOlxuICAgICAge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoc2NoZW1hLmZpZWxkcykpIHtcbiAgICAgICAgICBvYmpba2V5XSA9IGdldEluaXRpYWxQcm9wc1ZhbHVlRnJvbUluaXRpYWxpemVyKHNjaGVtYS5maWVsZHNba2V5XSwgaW5pdGlhbGl6ZXIgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IGluaXRpYWxpemVyW2tleV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgICB9XG4gICAgY2FzZSAnYXJyYXknOlxuICAgICAge1xuICAgICAgICByZXR1cm4gKGluaXRpYWxpemVyICE9PSBudWxsICYmIGluaXRpYWxpemVyICE9PSB2b2lkIDAgPyBpbml0aWFsaXplciA6IFtdKS5tYXAoeCA9PiBnZXRJbml0aWFsUHJvcHNWYWx1ZUZyb21Jbml0aWFsaXplcihzY2hlbWEuZWxlbWVudCwgeC52YWx1ZSkpO1xuICAgICAgfVxuICB9XG4gIGFzc2VydE5ldmVyKHNjaGVtYSk7XG59XG5mdW5jdGlvbiB1cGRhdGVWYWx1ZShzY2hlbWEsIGN1cnJlbnRWYWx1ZSwgdXBkYXRlcikge1xuICBpZiAodXBkYXRlciA9PT0gdW5kZWZpbmVkKSByZXR1cm4gY3VycmVudFZhbHVlO1xuICBzd2l0Y2ggKHNjaGVtYS5raW5kKSB7XG4gICAgY2FzZSAnZm9ybSc6XG4gICAgICByZXR1cm4gdXBkYXRlcjtcbiAgICBjYXNlICdjaGlsZCc6XG4gICAgICByZXR1cm4gdXBkYXRlcjtcbiAgICBjYXNlICdjb25kaXRpb25hbCc6XG4gICAgICB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZGlzY3JpbWluYW50OiB1cGRhdGVyLmRpc2NyaW1pbmFudCxcbiAgICAgICAgICB2YWx1ZTogdXBkYXRlci5kaXNjcmltaW5hbnQgPT09IGN1cnJlbnRWYWx1ZS5kaXNjcmltaW5hbnQgPyB1cGRhdGVWYWx1ZShzY2hlbWEudmFsdWVzW3VwZGF0ZXIuZGlzY3JpbWluYW50LnRvU3RyaW5nKCldLCBjdXJyZW50VmFsdWUudmFsdWUsIHVwZGF0ZXIudmFsdWUpIDogZ2V0SW5pdGlhbFByb3BzVmFsdWVGcm9tSW5pdGlhbGl6ZXIoc2NoZW1hLnZhbHVlc1t1cGRhdGVyLmRpc2NyaW1pbmFudC50b1N0cmluZygpXSwgdXBkYXRlci52YWx1ZSlcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICBjYXNlICdvYmplY3QnOlxuICAgICAge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoc2NoZW1hLmZpZWxkcykpIHtcbiAgICAgICAgICBvYmpba2V5XSA9IHVwZGF0ZVZhbHVlKHNjaGVtYS5maWVsZHNba2V5XSwgY3VycmVudFZhbHVlW2tleV0sIHVwZGF0ZXJba2V5XSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgIH1cbiAgICBjYXNlICdhcnJheSc6XG4gICAgICB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRBcnJWYWwgPSBjdXJyZW50VmFsdWU7XG4gICAgICAgIGNvbnN0IG5ld1ZhbCA9IHVwZGF0ZXI7XG4gICAgICAgIGNvbnN0IHVuaXF1ZUtleXMgPSBuZXcgU2V0KCk7XG4gICAgICAgIGZvciAoY29uc3QgeCBvZiBuZXdWYWwpIHtcbiAgICAgICAgICBpZiAoeC5rZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKHVuaXF1ZUtleXMuaGFzKHgua2V5KSkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FycmF5IGVsZW1lbnRzIG11c3QgaGF2ZSB1bmlxdWUga2V5cycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdW5pcXVlS2V5cy5hZGQoeC5rZXkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXlzID0gbmV3VmFsLm1hcCh4ID0+IHtcbiAgICAgICAgICBpZiAoeC5rZXkgIT09IHVuZGVmaW5lZCkgcmV0dXJuIHgua2V5O1xuICAgICAgICAgIGxldCBlbGVtZW50S2V5ID0gZ2V0TmV3QXJyYXlFbGVtZW50S2V5KCk7XG4gICAgICAgICAgLy8ganVzdCBpbiBjYXNlIHNvbWVvbmUgZ2l2ZXMgYSBrZXkgdGhhdCBpcyBhYm92ZSBvdXIgY291bnRlclxuICAgICAgICAgIHdoaWxlICh1bmlxdWVLZXlzLmhhcyhlbGVtZW50S2V5KSkge1xuICAgICAgICAgICAgZWxlbWVudEtleSA9IGdldE5ld0FycmF5RWxlbWVudEtleSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB1bmlxdWVLZXlzLmFkZChlbGVtZW50S2V5KTtcbiAgICAgICAgICByZXR1cm4gZWxlbWVudEtleTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHByZXZLZXlzID0gZ2V0S2V5c0ZvckFycmF5VmFsdWUoY3VycmVudEFyclZhbCk7XG4gICAgICAgIGNvbnN0IHByZXZWYWx1ZXNCeUtleSA9IG5ldyBNYXAoY3VycmVudEFyclZhbC5tYXAoKHZhbHVlLCBpKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIFtwcmV2S2V5c1tpXSwgdmFsdWVdO1xuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IHZhbCA9IG5ld1ZhbC5tYXAoKHgsIGkpID0+IHtcbiAgICAgICAgICBjb25zdCBpZCA9IGtleXNbaV07XG4gICAgICAgICAgaWYgKHByZXZWYWx1ZXNCeUtleS5oYXMoaWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdXBkYXRlVmFsdWUoc2NoZW1hLmVsZW1lbnQsIHByZXZWYWx1ZXNCeUtleS5nZXQoaWQpLCB4LnZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGdldEluaXRpYWxQcm9wc1ZhbHVlRnJvbUluaXRpYWxpemVyKHNjaGVtYS5lbGVtZW50LCB4LnZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNldEtleXNGb3JBcnJheVZhbHVlKHZhbCwga2V5cyk7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9XG4gIH1cbiAgYXNzZXJ0TmV2ZXIoc2NoZW1hKTtcbn1cblxuZnVuY3Rpb24gZ2V0VmFsdWVBdFByb3BQYXRoKHZhbHVlLCBpbnB1dFBhdGgpIHtcbiAgY29uc3QgcGF0aCA9IFsuLi5pbnB1dFBhdGhdO1xuICB3aGlsZSAocGF0aC5sZW5ndGgpIHtcbiAgICBjb25zdCBrZXkgPSBwYXRoLnNoaWZ0KCk7XG4gICAgdmFsdWUgPSB2YWx1ZVtrZXldO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHRyYXZlcnNlUHJvcHMoc2NoZW1hLCB2YWx1ZSwgdmlzaXRvciwgcGF0aCA9IFtdKSB7XG4gIGlmIChzY2hlbWEua2luZCA9PT0gJ2Zvcm0nIHx8IHNjaGVtYS5raW5kID09PSAnY2hpbGQnKSB7XG4gICAgdmlzaXRvcihzY2hlbWEsIHZhbHVlLCBwYXRoKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnb2JqZWN0Jykge1xuICAgIGZvciAoY29uc3QgW2tleSwgY2hpbGRQcm9wXSBvZiBPYmplY3QuZW50cmllcyhzY2hlbWEuZmllbGRzKSkge1xuICAgICAgdHJhdmVyc2VQcm9wcyhjaGlsZFByb3AsIHZhbHVlW2tleV0sIHZpc2l0b3IsIFsuLi5wYXRoLCBrZXldKTtcbiAgICB9XG4gICAgdmlzaXRvcihzY2hlbWEsIHZhbHVlLCBwYXRoKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnYXJyYXknKSB7XG4gICAgZm9yIChjb25zdCBbaWR4LCB2YWxdIG9mIHZhbHVlLmVudHJpZXMoKSkge1xuICAgICAgdHJhdmVyc2VQcm9wcyhzY2hlbWEuZWxlbWVudCwgdmFsLCB2aXNpdG9yLCBwYXRoLmNvbmNhdChpZHgpKTtcbiAgICB9XG4gICAgcmV0dXJuIHZpc2l0b3Ioc2NoZW1hLCB2YWx1ZSwgcGF0aCk7XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnY29uZGl0aW9uYWwnKSB7XG4gICAgY29uc3QgZGlzY3JpbWluYW50ID0gdmFsdWUuZGlzY3JpbWluYW50O1xuICAgIHZpc2l0b3Ioc2NoZW1hLCBkaXNjcmltaW5hbnQsIHBhdGguY29uY2F0KCdkaXNjcmltaW5hbnQnKSk7XG4gICAgdHJhdmVyc2VQcm9wcyhzY2hlbWEudmFsdWVzW2Rpc2NyaW1pbmFudC50b1N0cmluZygpXSwgdmFsdWUudmFsdWUsIHZpc2l0b3IsIHBhdGguY29uY2F0KCd2YWx1ZScpKTtcbiAgICB2aXNpdG9yKHNjaGVtYSwgdmFsdWUsIHBhdGgpO1xuICAgIHJldHVybjtcbiAgfVxuICBhc3NlcnROZXZlciQxKHNjaGVtYSk7XG59XG5mdW5jdGlvbiB0cmFuc2Zvcm1Qcm9wcyhzY2hlbWEsIHZhbHVlLCB2aXNpdG9ycywgcGF0aCA9IFtdKSB7XG4gIGlmIChzY2hlbWEua2luZCA9PT0gJ2Zvcm0nIHx8IHNjaGVtYS5raW5kID09PSAnY2hpbGQnKSB7XG4gICAgaWYgKHZpc2l0b3JzW3NjaGVtYS5raW5kXSkge1xuICAgICAgcmV0dXJuIHZpc2l0b3JzW3NjaGVtYS5raW5kXShzY2hlbWEsIHZhbHVlLCBwYXRoKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmIChzY2hlbWEua2luZCA9PT0gJ29iamVjdCcpIHtcbiAgICBjb25zdCB2YWwgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoc2NoZW1hLmZpZWxkcykubWFwKChba2V5LCB2YWxdKSA9PiB7XG4gICAgICByZXR1cm4gW2tleSwgdHJhbnNmb3JtUHJvcHModmFsLCB2YWx1ZVtrZXldLCB2aXNpdG9ycywgWy4uLnBhdGgsIGtleV0pXTtcbiAgICB9KSk7XG4gICAgaWYgKHZpc2l0b3JzLm9iamVjdCkge1xuICAgICAgcmV0dXJuIHZpc2l0b3JzW3NjaGVtYS5raW5kXShzY2hlbWEsIHZhbCwgcGF0aCk7XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnYXJyYXknKSB7XG4gICAgY29uc3QgdmFsID0gdmFsdWUubWFwKCh2YWwsIGlkeCkgPT4gdHJhbnNmb3JtUHJvcHMoc2NoZW1hLmVsZW1lbnQsIHZhbCwgdmlzaXRvcnMsIHBhdGguY29uY2F0KGlkeCkpKTtcbiAgICBpZiAodmlzaXRvcnMuYXJyYXkpIHtcbiAgICAgIHJldHVybiB2aXNpdG9yc1tzY2hlbWEua2luZF0oc2NoZW1hLCB2YWwsIHBhdGgpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsO1xuICB9XG4gIGlmIChzY2hlbWEua2luZCA9PT0gJ2NvbmRpdGlvbmFsJykge1xuICAgIGNvbnN0IGRpc2NyaW1pbmFudCA9IHRyYW5zZm9ybVByb3BzKHNjaGVtYS5kaXNjcmltaW5hbnQsIHZhbHVlLmRpc2NyaW1pbmFudCwgdmlzaXRvcnMsIHBhdGguY29uY2F0KCdkaXNjcmltaW5hbnQnKSk7XG4gICAgY29uc3QgY29uZGl0aW9uYWxWYWwgPSB0cmFuc2Zvcm1Qcm9wcyhzY2hlbWEudmFsdWVzW2Rpc2NyaW1pbmFudC50b1N0cmluZygpXSwgdmFsdWUudmFsdWUsIHZpc2l0b3JzLCBwYXRoLmNvbmNhdCgndmFsdWUnKSk7XG4gICAgY29uc3QgdmFsID0ge1xuICAgICAgZGlzY3JpbWluYW50LFxuICAgICAgdmFsdWU6IGNvbmRpdGlvbmFsVmFsXG4gICAgfTtcbiAgICBpZiAodmlzaXRvcnMuY29uZGl0aW9uYWwpIHtcbiAgICAgIHJldHVybiB2aXNpdG9yc1tzY2hlbWEua2luZF0oc2NoZW1hLCB2YWwsIHBhdGgpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsO1xuICB9XG4gIGFzc2VydE5ldmVyJDEoc2NoZW1hKTtcbn1cbmZ1bmN0aW9uIHJlcGxhY2VWYWx1ZUF0UHJvcFBhdGgoc2NoZW1hLCB2YWx1ZSwgbmV3VmFsdWUsIHBhdGgpIHtcbiAgaWYgKHBhdGgubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG5ld1ZhbHVlO1xuICB9XG4gIGNvbnN0IFtrZXksIC4uLm5ld1BhdGhdID0gcGF0aDtcbiAgaWYgKHNjaGVtYS5raW5kID09PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiB7XG4gICAgICAuLi52YWx1ZSxcbiAgICAgIFtrZXldOiByZXBsYWNlVmFsdWVBdFByb3BQYXRoKHNjaGVtYS5maWVsZHNba2V5XSwgdmFsdWVba2V5XSwgbmV3VmFsdWUsIG5ld1BhdGgpXG4gICAgfTtcbiAgfVxuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdjb25kaXRpb25hbCcpIHtcbiAgICBjb25zdCBjb25kaXRpb25hbFZhbHVlID0gdmFsdWU7XG4gICAgLy8gcmVwbGFjZVZhbHVlQXRQcm9wUGF0aCBzaG91bGQgbm90IGJlIHVzZWQgdG8gb25seSB1cGRhdGUgdGhlIGRpc2NyaW1pbmFudCBvZiBhIGNvbmRpdGlvbmFsIGZpZWxkXG4gICAgLy8gaWYgeW91IHdhbnQgdG8gdXBkYXRlIHRoZSBkaXNjcmltaW5hbnQgb2YgYSBjb25kaXRpb25hbCBmaWVsZCwgcmVwbGFjZSB0aGUgdmFsdWUgb2YgdGhlIHdob2xlIGNvbmRpdGlvbmFsIGZpZWxkXG4gICAgYXNzZXJ0JDEoa2V5ID09PSAndmFsdWUnKTtcbiAgICByZXR1cm4ge1xuICAgICAgZGlzY3JpbWluYW50OiBjb25kaXRpb25hbFZhbHVlLmRpc2NyaW1pbmFudCxcbiAgICAgIHZhbHVlOiByZXBsYWNlVmFsdWVBdFByb3BQYXRoKHNjaGVtYS52YWx1ZXNba2V5XSwgY29uZGl0aW9uYWxWYWx1ZS52YWx1ZSwgbmV3VmFsdWUsIG5ld1BhdGgpXG4gICAgfTtcbiAgfVxuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdhcnJheScpIHtcbiAgICBjb25zdCBwcmV2VmFsID0gdmFsdWU7XG4gICAgY29uc3QgbmV3VmFsID0gWy4uLnByZXZWYWxdO1xuICAgIHNldEtleXNGb3JBcnJheVZhbHVlKG5ld1ZhbCwgZ2V0S2V5c0ZvckFycmF5VmFsdWUocHJldlZhbCkpO1xuICAgIG5ld1ZhbFtrZXldID0gcmVwbGFjZVZhbHVlQXRQcm9wUGF0aChzY2hlbWEuZWxlbWVudCwgbmV3VmFsW2tleV0sIG5ld1ZhbHVlLCBuZXdQYXRoKTtcbiAgICByZXR1cm4gbmV3VmFsO1xuICB9XG5cbiAgLy8gd2Ugc2hvdWxkIG5ldmVyIHJlYWNoIGhlcmUgc2luY2UgZm9ybSBvciBjaGlsZCBmaWVsZHMgZG9uJ3QgY29udGFpbiBvdGhlciBmaWVsZHNcbiAgLy8gc28gdGhlIG9ubHkgdGhpbmcgdGhhdCBjYW4gaGFwcGVuIHRvIHRoZW0gaXMgdG8gYmUgcmVwbGFjZWQgd2hpY2ggaGFwcGVucyBhdCB0aGUgc3RhcnQgb2YgdGhpcyBmdW5jdGlvbiB3aGVuIHBhdGgubGVuZ3RoID09PSAwXG4gIGFzc2VydCQxKHNjaGVtYS5raW5kICE9PSAnZm9ybScgJiYgc2NoZW1hLmtpbmQgIT09ICdjaGlsZCcpO1xuICBhc3NlcnROZXZlciQxKHNjaGVtYSk7XG59XG5cbi8vIGEgdiBpbXBvcnRhbnQgbm90ZVxuLy8gbWFya3MgaW4gdGhlIG1hcmtkb3duIGFzdC9odG1sIGFyZSByZXByZXNlbnRlZCBxdWl0ZSBkaWZmZXJlbnRseSB0byBob3cgdGhleSBhcmUgaW4gc2xhdGVcbi8vIGlmIHlvdSBoYWQgdGhlIG1hcmtkb3duICoqc29tZXRoaW5nIGh0dHBzOi8va2V5c3RvbmVqcy5jb20gc29tZXRoaW5nKipcbi8vIHRoZSBib2xkIG5vZGUgaXMgdGhlIHBhcmVudCBvZiB0aGUgbGluayBub2RlXG4vLyBidXQgaW4gc2xhdGUsIG1hcmtzIGFyZSBvbmx5IHJlcHJlc2VudGVkIG9uIHRleHQgbm9kZXNcblxuY29uc3QgY3VycmVudGx5QWN0aXZlTWFya3MgPSBuZXcgU2V0KCk7XG5jb25zdCBjdXJyZW50bHlEaXNhYmxlZE1hcmtzID0gbmV3IFNldCgpO1xubGV0IGN1cnJlbnRMaW5rID0gbnVsbDtcbmZ1bmN0aW9uIGFkZE1hcmtUb0NoaWxkcmVuKG1hcmssIGNiKSB7XG4gIGNvbnN0IHdhc1ByZXZpb3VzbHlBY3RpdmUgPSBjdXJyZW50bHlBY3RpdmVNYXJrcy5oYXMobWFyayk7XG4gIGN1cnJlbnRseUFjdGl2ZU1hcmtzLmFkZChtYXJrKTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gY2IoKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBpZiAoIXdhc1ByZXZpb3VzbHlBY3RpdmUpIHtcbiAgICAgIGN1cnJlbnRseUFjdGl2ZU1hcmtzLmRlbGV0ZShtYXJrKTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIHNldExpbmtGb3JDaGlsZHJlbihocmVmLCBjYikge1xuICAvLyB3ZSdsbCBvbmx5IHVzZSB0aGUgb3V0ZXIgbGlua1xuICBpZiAoY3VycmVudExpbmsgIT09IG51bGwpIHtcbiAgICByZXR1cm4gY2IoKTtcbiAgfVxuICBjdXJyZW50TGluayA9IGhyZWY7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGNiKCk7XG4gIH0gZmluYWxseSB7XG4gICAgY3VycmVudExpbmsgPSBudWxsO1xuICB9XG59XG5mdW5jdGlvbiBhZGRNYXJrc1RvQ2hpbGRyZW4obWFya3MsIGNiKSB7XG4gIGNvbnN0IG1hcmtzVG9SZW1vdmUgPSBuZXcgU2V0KCk7XG4gIGZvciAoY29uc3QgbWFyayBvZiBtYXJrcykge1xuICAgIGlmICghY3VycmVudGx5QWN0aXZlTWFya3MuaGFzKG1hcmspKSB7XG4gICAgICBtYXJrc1RvUmVtb3ZlLmFkZChtYXJrKTtcbiAgICB9XG4gICAgY3VycmVudGx5QWN0aXZlTWFya3MuYWRkKG1hcmspO1xuICB9XG4gIHRyeSB7XG4gICAgcmV0dXJuIGNiKCk7XG4gIH0gZmluYWxseSB7XG4gICAgZm9yIChjb25zdCBtYXJrIG9mIG1hcmtzVG9SZW1vdmUpIHtcbiAgICAgIGN1cnJlbnRseUFjdGl2ZU1hcmtzLmRlbGV0ZShtYXJrKTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGZvcmNlRGlzYWJsZU1hcmtGb3JDaGlsZHJlbihtYXJrLCBjYikge1xuICBjb25zdCB3YXNQcmV2aW91c2x5RGlzYWJsZWQgPSBjdXJyZW50bHlEaXNhYmxlZE1hcmtzLmhhcyhtYXJrKTtcbiAgY3VycmVudGx5RGlzYWJsZWRNYXJrcy5hZGQobWFyayk7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGNiKCk7XG4gIH0gZmluYWxseSB7XG4gICAgaWYgKCF3YXNQcmV2aW91c2x5RGlzYWJsZWQpIHtcbiAgICAgIGN1cnJlbnRseURpc2FibGVkTWFya3MuZGVsZXRlKG1hcmspO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFRoaXMgdHlwZSBpcyBtb3JlIHN0cmljdCB0aGFuIGBFbGVtZW50ICYgeyB0eXBlOiAnbGluayc7IH1gIGJlY2F1c2UgYGNoaWxkcmVuYFxuICogaXMgY29uc3RyYWluZWQgdG8gb25seSBjb250YWluIFRleHQgbm9kZXMuIFRoaXMgY2FuJ3QgYmUgYXNzdW1lZCBnZW5lcmFsbHkgYXJvdW5kIHRoZSBlZGl0b3JcbiAqIChiZWNhdXNlIG9mIHBvdGVudGlhbGx5IGZ1dHVyZSBpbmxpbmUgY29tcG9uZW50cyBvciBuZXN0ZWQgbGlua3Mod2hpY2ggYXJlIG5vcm1hbGl6ZWQgYXdheSBidXQgdGhlIGVkaXRvciBuZWVkcyB0byBub3QgYnJlYWsgaWYgaXQgaGFwcGVucykpXG4gKiBidXQgd2hlcmUgdGhpcyB0eXBlIGlzIHVzZWQsIHdlJ3JlIG9ubHkgZ29pbmcgdG8gYWxsb3cgbGlua3MgdG8gY29udGFpbiBUZXh0IGFuZCB0aGF0J3MgaW1wb3J0YW50XG4gKiBzbyB0aGF0IHdlIGtub3cgYSBibG9jayB3aWxsIG5ldmVyIGJlIGluc2lkZSBhbiBpbmxpbmUgYmVjYXVzZSBTbGF0ZSBnZXRzIHVuaGFwcHkgd2hlbiB0aGF0IGhhcHBlbnNcbiAqIChyZWFsbHkgdGhlIGxpbmsgaW5saW5lIHNob3VsZCBwcm9iYWJseSBiZSBhIG1hcmsgcmF0aGVyIHRoYW4gYW4gaW5saW5lLFxuICogbm9uLXZvaWQgaW5saW5lcyBhcmUgcHJvYmFibHkgYWx3YXlzIGJhZCBidXQgdGhhdCB3b3VsZCBpbXBseSBjaGFuZ2luZyB0aGUgZG9jdW1lbnRcbiAqIHN0cnVjdHVyZSB3aGljaCB3b3VsZCBiZSBzdWNoIHVubmVjZXNzYXJ5IGJyZWFrYWdlKVxuICovXG5cbmZ1bmN0aW9uIGdldElubGluZU5vZGVzKHRleHQpIHtcbiAgY29uc3Qgbm9kZSA9IHtcbiAgICB0ZXh0XG4gIH07XG4gIGZvciAoY29uc3QgbWFyayBvZiBjdXJyZW50bHlBY3RpdmVNYXJrcykge1xuICAgIGlmICghY3VycmVudGx5RGlzYWJsZWRNYXJrcy5oYXMobWFyaykpIHtcbiAgICAgIG5vZGVbbWFya10gPSB0cnVlO1xuICAgIH1cbiAgfVxuICBpZiAoY3VycmVudExpbmsgIT09IG51bGwpIHtcbiAgICByZXR1cm4gW3tcbiAgICAgIHRleHQ6ICcnXG4gICAgfSwge1xuICAgICAgdHlwZTogJ2xpbmsnLFxuICAgICAgaHJlZjogY3VycmVudExpbmssXG4gICAgICBjaGlsZHJlbjogW25vZGVdXG4gICAgfSwge1xuICAgICAgdGV4dDogJydcbiAgICB9XTtcbiAgfVxuICByZXR1cm4gW25vZGVdO1xufVxuXG5jbGFzcyBWYXJpYWJsZUNoaWxkRmllbGRzIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignVGhlcmUgYXJlIGEgdmFyaWFibGUgbnVtYmVyIG9mIGNoaWxkIGZpZWxkcycpO1xuICB9XG59XG5mdW5jdGlvbiBmaW5kU2luZ2xlQ2hpbGRGaWVsZChzY2hlbWEpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXN1bHQgPSBfZmluZENvbnN0YW50Q2hpbGRGaWVsZHMoc2NoZW1hLCBbXSwgbmV3IFNldCgpKTtcbiAgICBpZiAocmVzdWx0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgcmV0dXJuIHJlc3VsdFswXTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBpZiAoZXJyIGluc3RhbmNlb2YgVmFyaWFibGVDaGlsZEZpZWxkcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aHJvdyBlcnI7XG4gIH1cbn1cbmZ1bmN0aW9uIF9maW5kQ29uc3RhbnRDaGlsZEZpZWxkcyhzY2hlbWEsIHBhdGgsIHNlZW5TY2hlbWFzKSB7XG4gIGlmIChzZWVuU2NoZW1hcy5oYXMoc2NoZW1hKSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBzZWVuU2NoZW1hcy5hZGQoc2NoZW1hKTtcbiAgc3dpdGNoIChzY2hlbWEua2luZCkge1xuICAgIGNhc2UgJ2Zvcm0nOlxuICAgICAgcmV0dXJuIFtdO1xuICAgIGNhc2UgJ2NoaWxkJzpcbiAgICAgIHJldHVybiBbe1xuICAgICAgICByZWxhdGl2ZVBhdGg6IHBhdGgsXG4gICAgICAgIG9wdGlvbnM6IHNjaGVtYS5vcHRpb25zLFxuICAgICAgICBraW5kOiAnY2hpbGQnXG4gICAgICB9XTtcbiAgICBjYXNlICdjb25kaXRpb25hbCc6XG4gICAgICB7XG4gICAgICAgIGlmIChjb3VsZENvbnRhaW5DaGlsZEZpZWxkKHNjaGVtYSkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVmFyaWFibGVDaGlsZEZpZWxkcygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICBjYXNlICdhcnJheSc6XG4gICAgICB7XG4gICAgICAgIGlmIChzY2hlbWEuYXNDaGlsZFRhZykge1xuICAgICAgICAgIGNvbnN0IGNoaWxkID0gX2ZpbmRDb25zdGFudENoaWxkRmllbGRzKHNjaGVtYS5lbGVtZW50LCBbXSwgc2VlblNjaGVtYXMpO1xuICAgICAgICAgIGlmIChjaGlsZC5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBbe1xuICAgICAgICAgICAga2luZDogJ2FycmF5JyxcbiAgICAgICAgICAgIGFzQ2hpbGRUYWc6IHNjaGVtYS5hc0NoaWxkVGFnLFxuICAgICAgICAgICAgZmllbGQ6IHNjaGVtYSxcbiAgICAgICAgICAgIHJlbGF0aXZlUGF0aDogcGF0aCxcbiAgICAgICAgICAgIGNoaWxkOiBjaGlsZFswXVxuICAgICAgICAgIH1dO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb3VsZENvbnRhaW5DaGlsZEZpZWxkKHNjaGVtYSkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVmFyaWFibGVDaGlsZEZpZWxkcygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICBjYXNlICdvYmplY3QnOlxuICAgICAge1xuICAgICAgICBjb25zdCBwYXRocyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhzY2hlbWEuZmllbGRzKSkge1xuICAgICAgICAgIHBhdGhzLnB1c2goLi4uX2ZpbmRDb25zdGFudENoaWxkRmllbGRzKHZhbHVlLCBwYXRoLmNvbmNhdChrZXkpLCBzZWVuU2NoZW1hcykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXRocztcbiAgICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gY291bGRDb250YWluQ2hpbGRGaWVsZChzY2hlbWEsIHNlZW4gPSBuZXcgU2V0KCkpIHtcbiAgaWYgKHNlZW4uaGFzKHNjaGVtYSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgc2Vlbi5hZGQoc2NoZW1hKTtcbiAgc3dpdGNoIChzY2hlbWEua2luZCkge1xuICAgIGNhc2UgJ2Zvcm0nOlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGNhc2UgJ2NoaWxkJzpcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIGNhc2UgJ2NvbmRpdGlvbmFsJzpcbiAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKHNjaGVtYS52YWx1ZXMpLnNvbWUodmFsdWUgPT4gY291bGRDb250YWluQ2hpbGRGaWVsZCh2YWx1ZSwgc2VlbikpO1xuICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICByZXR1cm4gT2JqZWN0LmtleXMoc2NoZW1hLmZpZWxkcykuc29tZShrZXkgPT4gY291bGRDb250YWluQ2hpbGRGaWVsZChzY2hlbWEuZmllbGRzW2tleV0sIHNlZW4pKTtcbiAgICBjYXNlICdhcnJheSc6XG4gICAgICByZXR1cm4gY291bGRDb250YWluQ2hpbGRGaWVsZChzY2hlbWEuZWxlbWVudCwgc2Vlbik7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5saW5lTm9kZUZyb21NYXJrZG9jKG5vZGUpIHtcbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2lubGluZScpIHtcbiAgICByZXR1cm4gaW5saW5lQ2hpbGRyZW5Gcm9tTWFya2RvYyhub2RlLmNoaWxkcmVuKTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAnbGluaycpIHtcbiAgICByZXR1cm4gc2V0TGlua0ZvckNoaWxkcmVuKG5vZGUuYXR0cmlidXRlcy5ocmVmLCAoKSA9PiBpbmxpbmVDaGlsZHJlbkZyb21NYXJrZG9jKG5vZGUuY2hpbGRyZW4pKTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAndGV4dCcpIHtcbiAgICByZXR1cm4gZ2V0SW5saW5lTm9kZXMobm9kZS5hdHRyaWJ1dGVzLmNvbnRlbnQpO1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICdzdHJvbmcnKSB7XG4gICAgcmV0dXJuIGFkZE1hcmtUb0NoaWxkcmVuKCdib2xkJywgKCkgPT4gaW5saW5lQ2hpbGRyZW5Gcm9tTWFya2RvYyhub2RlLmNoaWxkcmVuKSk7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2NvZGUnKSB7XG4gICAgcmV0dXJuIGFkZE1hcmtUb0NoaWxkcmVuKCdjb2RlJywgKCkgPT4gZ2V0SW5saW5lTm9kZXMobm9kZS5hdHRyaWJ1dGVzLmNvbnRlbnQpKTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAnZW0nKSB7XG4gICAgcmV0dXJuIGFkZE1hcmtUb0NoaWxkcmVuKCdpdGFsaWMnLCAoKSA9PiBpbmxpbmVDaGlsZHJlbkZyb21NYXJrZG9jKG5vZGUuY2hpbGRyZW4pKTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAncycpIHtcbiAgICByZXR1cm4gYWRkTWFya1RvQ2hpbGRyZW4oJ3N0cmlrZXRocm91Z2gnLCAoKSA9PiBpbmxpbmVDaGlsZHJlbkZyb21NYXJrZG9jKG5vZGUuY2hpbGRyZW4pKTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAndGFnJykge1xuICAgIGlmIChub2RlLnRhZyA9PT0gJ3UnKSB7XG4gICAgICByZXR1cm4gYWRkTWFya1RvQ2hpbGRyZW4oJ3VuZGVybGluZScsICgpID0+IGlubGluZUNoaWxkcmVuRnJvbU1hcmtkb2Mobm9kZS5jaGlsZHJlbikpO1xuICAgIH1cbiAgICBpZiAobm9kZS50YWcgPT09ICdrYmQnKSB7XG4gICAgICByZXR1cm4gYWRkTWFya1RvQ2hpbGRyZW4oJ2tleWJvYXJkJywgKCkgPT4gaW5saW5lQ2hpbGRyZW5Gcm9tTWFya2RvYyhub2RlLmNoaWxkcmVuKSk7XG4gICAgfVxuICAgIGlmIChub2RlLnRhZyA9PT0gJ3N1YicpIHtcbiAgICAgIHJldHVybiBhZGRNYXJrVG9DaGlsZHJlbignc3Vic2NyaXB0JywgKCkgPT4gaW5saW5lQ2hpbGRyZW5Gcm9tTWFya2RvYyhub2RlLmNoaWxkcmVuKSk7XG4gICAgfVxuICAgIGlmIChub2RlLnRhZyA9PT0gJ3N1cCcpIHtcbiAgICAgIHJldHVybiBhZGRNYXJrVG9DaGlsZHJlbignc3VwZXJzY3JpcHQnLCAoKSA9PiBpbmxpbmVDaGlsZHJlbkZyb21NYXJrZG9jKG5vZGUuY2hpbGRyZW4pKTtcbiAgICB9XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ3NvZnRicmVhaycpIHtcbiAgICByZXR1cm4gZ2V0SW5saW5lTm9kZXMoJyAnKTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAnaGFyZGJyZWFrJykge1xuICAgIHJldHVybiBnZXRJbmxpbmVOb2RlcygnXFxuJyk7XG4gIH1cbiAgaWYgKG5vZGUudGFnID09PSAnY29tcG9uZW50LWlubGluZS1wcm9wJyAmJiBBcnJheS5pc0FycmF5KG5vZGUuYXR0cmlidXRlcy5wcm9wUGF0aCkgJiYgbm9kZS5hdHRyaWJ1dGVzLnByb3BQYXRoLmV2ZXJ5KHggPT4gdHlwZW9mIHggPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB4ID09PSAnbnVtYmVyJykpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCcsXG4gICAgICBjaGlsZHJlbjogaW5saW5lRnJvbU1hcmtkb2Mobm9kZS5jaGlsZHJlbiksXG4gICAgICBwcm9wUGF0aDogbm9kZS5hdHRyaWJ1dGVzLnByb3BQYXRoXG4gICAgfTtcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gaW5saW5lIG5vZGUgdHlwZTogJHtub2RlLnR5cGV9YCk7XG59XG5mdW5jdGlvbiBpbmxpbmVDaGlsZHJlbkZyb21NYXJrZG9jKG5vZGVzKSB7XG4gIHJldHVybiBub2Rlcy5mbGF0TWFwKGlubGluZU5vZGVGcm9tTWFya2RvYyk7XG59XG5mdW5jdGlvbiBpbmxpbmVGcm9tTWFya2RvYyhub2Rlcykge1xuICBjb25zdCB0cmFuc2Zvcm1lZE5vZGVzID0gbm9kZXMuZmxhdE1hcChpbmxpbmVOb2RlRnJvbU1hcmtkb2MpO1xuICBjb25zdCBuZXh0Tm9kZXMgPSBbXTtcbiAgbGV0IGxhc3ROb2RlO1xuICBmb3IgKGNvbnN0IFtpZHgsIG5vZGVdIG9mIHRyYW5zZm9ybWVkTm9kZXMuZW50cmllcygpKSB7XG4gICAgdmFyIF9sYXN0Tm9kZTtcbiAgICBpZiAobm9kZS50eXBlID09PSB1bmRlZmluZWQgJiYgbm9kZS50ZXh0ID09PSAnJyAmJiAoKF9sYXN0Tm9kZSA9IGxhc3ROb2RlKSA9PT0gbnVsbCB8fCBfbGFzdE5vZGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9sYXN0Tm9kZS50eXBlKSA9PT0gdW5kZWZpbmVkICYmIGlkeCAhPT0gdHJhbnNmb3JtZWROb2Rlcy5sZW5ndGggLSAxKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgbmV4dE5vZGVzLnB1c2gobm9kZSk7XG4gICAgbGFzdE5vZGUgPSBub2RlO1xuICB9XG4gIGlmICghbmV4dE5vZGVzLmxlbmd0aCkge1xuICAgIG5leHROb2Rlcy5wdXNoKHtcbiAgICAgIHRleHQ6ICcnXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIG5leHROb2Rlcztcbn1cbmZ1bmN0aW9uIGZyb21NYXJrZG9jKG5vZGUsIGNvbXBvbmVudEJsb2Nrcykge1xuICBjb25zdCBub2RlcyA9IG5vZGUuY2hpbGRyZW4uZmxhdE1hcCh4ID0+IGZyb21NYXJrZG9jTm9kZSh4LCBjb21wb25lbnRCbG9ja3MpKTtcbiAgaWYgKG5vZGVzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBbe1xuICAgICAgdHlwZTogJ3BhcmFncmFwaCcsXG4gICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgdGV4dDogJydcbiAgICAgIH1dXG4gICAgfV07XG4gIH1cbiAgaWYgKG5vZGVzW25vZGVzLmxlbmd0aCAtIDFdLnR5cGUgIT09ICdwYXJhZ3JhcGgnKSB7XG4gICAgbm9kZXMucHVzaCh7XG4gICAgICB0eXBlOiAncGFyYWdyYXBoJyxcbiAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICB0ZXh0OiAnJ1xuICAgICAgfV1cbiAgICB9KTtcbiAgfVxuICByZXR1cm4gbm9kZXM7XG59XG5mdW5jdGlvbiBmcm9tTWFya2RvY05vZGUobm9kZSwgY29tcG9uZW50QmxvY2tzKSB7XG4gIGlmIChub2RlLnR5cGUgPT09ICdibG9ja3F1b3RlJykge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnYmxvY2txdW90ZScsXG4gICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbi5mbGF0TWFwKHggPT4gZnJvbU1hcmtkb2NOb2RlKHgsIGNvbXBvbmVudEJsb2NrcykpXG4gICAgfTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAnZmVuY2UnKSB7XG4gICAgY29uc3Qge1xuICAgICAgbGFuZ3VhZ2UsXG4gICAgICBjb250ZW50LFxuICAgICAgLi4ucmVzdFxuICAgIH0gPSBub2RlLmF0dHJpYnV0ZXM7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdjb2RlJyxcbiAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICB0ZXh0OiBjb250ZW50LnJlcGxhY2UoL1xcbiQvLCAnJylcbiAgICAgIH1dLFxuICAgICAgLi4uKHR5cGVvZiBsYW5ndWFnZSA9PT0gJ3N0cmluZycgPyB7XG4gICAgICAgIGxhbmd1YWdlXG4gICAgICB9IDoge30pLFxuICAgICAgLi4ucmVzdFxuICAgIH07XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2hlYWRpbmcnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLm5vZGUuYXR0cmlidXRlcyxcbiAgICAgIGxldmVsOiBub2RlLmF0dHJpYnV0ZXMubGV2ZWwsXG4gICAgICB0eXBlOiAnaGVhZGluZycsXG4gICAgICBjaGlsZHJlbjogaW5saW5lRnJvbU1hcmtkb2Mobm9kZS5jaGlsZHJlbilcbiAgICB9O1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICdsaXN0Jykge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBub2RlLmF0dHJpYnV0ZXMub3JkZXJlZCA/ICdvcmRlcmVkLWxpc3QnIDogJ3Vub3JkZXJlZC1saXN0JyxcbiAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuLmZsYXRNYXAoeCA9PiBmcm9tTWFya2RvY05vZGUoeCwgY29tcG9uZW50QmxvY2tzKSlcbiAgICB9O1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICdpdGVtJykge1xuICAgIHZhciBfbm9kZSRjaGlsZHJlbiQ7XG4gICAgY29uc3QgY2hpbGRyZW4gPSBbe1xuICAgICAgdHlwZTogJ2xpc3QtaXRlbS1jb250ZW50JyxcbiAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuLmxlbmd0aCA/IGlubGluZUZyb21NYXJrZG9jKFtub2RlLmNoaWxkcmVuWzBdXSkgOiBbe1xuICAgICAgICB0ZXh0OiAnJ1xuICAgICAgfV1cbiAgICB9XTtcbiAgICBpZiAoKChfbm9kZSRjaGlsZHJlbiQgPSBub2RlLmNoaWxkcmVuWzFdKSA9PT0gbnVsbCB8fCBfbm9kZSRjaGlsZHJlbiQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9ub2RlJGNoaWxkcmVuJC50eXBlKSA9PT0gJ2xpc3QnKSB7XG4gICAgICBjb25zdCBsaXN0ID0gbm9kZS5jaGlsZHJlblsxXTtcbiAgICAgIGNoaWxkcmVuLnB1c2goe1xuICAgICAgICB0eXBlOiBsaXN0LmF0dHJpYnV0ZXMub3JkZXJlZCA/ICdvcmRlcmVkLWxpc3QnIDogJ3Vub3JkZXJlZC1saXN0JyxcbiAgICAgICAgY2hpbGRyZW46IGxpc3QuY2hpbGRyZW4uZmxhdE1hcCh4ID0+IGZyb21NYXJrZG9jTm9kZSh4LCBjb21wb25lbnRCbG9ja3MpKVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnbGlzdC1pdGVtJyxcbiAgICAgIGNoaWxkcmVuXG4gICAgfTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAncGFyYWdyYXBoJykge1xuICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJiBub2RlLmNoaWxkcmVuWzBdLnR5cGUgPT09ICdpbmxpbmUnICYmIG5vZGUuY2hpbGRyZW5bMF0uY2hpbGRyZW4ubGVuZ3RoID09PSAxICYmIG5vZGUuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0udHlwZSA9PT0gJ2ltYWdlJykge1xuICAgICAgdmFyIF9pbWFnZSRhdHRyaWJ1dGVzJHRpdDtcbiAgICAgIGNvbnN0IGltYWdlID0gbm9kZS5jaGlsZHJlblswXS5jaGlsZHJlblswXTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdpbWFnZScsXG4gICAgICAgIHNyYzogZGVjb2RlVVJJKGltYWdlLmF0dHJpYnV0ZXMuc3JjKSxcbiAgICAgICAgYWx0OiBpbWFnZS5hdHRyaWJ1dGVzLmFsdCxcbiAgICAgICAgdGl0bGU6IChfaW1hZ2UkYXR0cmlidXRlcyR0aXQgPSBpbWFnZS5hdHRyaWJ1dGVzLnRpdGxlKSAhPT0gbnVsbCAmJiBfaW1hZ2UkYXR0cmlidXRlcyR0aXQgIT09IHZvaWQgMCA/IF9pbWFnZSRhdHRyaWJ1dGVzJHRpdCA6ICcnLFxuICAgICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgICB0ZXh0OiAnJ1xuICAgICAgICB9XVxuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgY2hpbGRyZW4gPSBpbmxpbmVGcm9tTWFya2RvYyhub2RlLmNoaWxkcmVuKTtcbiAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID09PSAxICYmIGNoaWxkcmVuWzBdLnR5cGUgPT09ICdjb21wb25lbnQtaW5saW5lLXByb3AnKSB7XG4gICAgICByZXR1cm4gY2hpbGRyZW5bMF07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAncGFyYWdyYXBoJyxcbiAgICAgIGNoaWxkcmVuLFxuICAgICAgdGV4dEFsaWduOiBub2RlLmF0dHJpYnV0ZXMudGV4dEFsaWduXG4gICAgfTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAnaHInKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdkaXZpZGVyJyxcbiAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICB0ZXh0OiAnJ1xuICAgICAgfV1cbiAgICB9O1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICd0YWJsZScpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ3RhYmxlJyxcbiAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuLmZsYXRNYXAoeCA9PiBmcm9tTWFya2RvY05vZGUoeCwgY29tcG9uZW50QmxvY2tzKSlcbiAgICB9O1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICd0Ym9keScpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ3RhYmxlLWJvZHknLFxuICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4uZmxhdE1hcCh4ID0+IGZyb21NYXJrZG9jTm9kZSh4LCBjb21wb25lbnRCbG9ja3MpKVxuICAgIH07XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ3RoZWFkJykge1xuICAgIGlmICghbm9kZS5jaGlsZHJlbi5sZW5ndGgpIHJldHVybiBbXTtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ3RhYmxlLWhlYWQnLFxuICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4uZmxhdE1hcCh4ID0+IGZyb21NYXJrZG9jTm9kZSh4LCBjb21wb25lbnRCbG9ja3MpKVxuICAgIH07XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ3RyJykge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAndGFibGUtcm93JyxcbiAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuLmZsYXRNYXAoeCA9PiBmcm9tTWFya2RvY05vZGUoeCwgY29tcG9uZW50QmxvY2tzKSlcbiAgICB9O1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICd0ZCcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ3RhYmxlLWNlbGwnLFxuICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4uZmxhdE1hcCh4ID0+IGZyb21NYXJrZG9jTm9kZSh4LCBjb21wb25lbnRCbG9ja3MpKVxuICAgIH07XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ3RoJykge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAndGFibGUtY2VsbCcsXG4gICAgICBoZWFkZXI6IHRydWUsXG4gICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbi5mbGF0TWFwKHggPT4gZnJvbU1hcmtkb2NOb2RlKHgsIGNvbXBvbmVudEJsb2NrcykpXG4gICAgfTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAndGFnJykge1xuICAgIGlmIChub2RlLnRhZyA9PT0gJ3RhYmxlJykge1xuICAgICAgcmV0dXJuIGZyb21NYXJrZG9jTm9kZShub2RlLmNoaWxkcmVuWzBdLCBjb21wb25lbnRCbG9ja3MpO1xuICAgIH1cbiAgICBpZiAobm9kZS50YWcgPT09ICdsYXlvdXQnKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnbGF5b3V0JyxcbiAgICAgICAgbGF5b3V0OiBub2RlLmF0dHJpYnV0ZXMubGF5b3V0LFxuICAgICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbi5mbGF0TWFwKHggPT4gZnJvbU1hcmtkb2NOb2RlKHgsIGNvbXBvbmVudEJsb2NrcykpXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAobm9kZS50YWcgPT09ICdsYXlvdXQtYXJlYScpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdsYXlvdXQtYXJlYScsXG4gICAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuLmZsYXRNYXAoeCA9PiBmcm9tTWFya2RvY05vZGUoeCwgY29tcG9uZW50QmxvY2tzKSlcbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChub2RlLnRhZyA9PT0gJ2NvbXBvbmVudC1ibG9jaycpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdjb21wb25lbnQtYmxvY2snLFxuICAgICAgICBjb21wb25lbnQ6IG5vZGUuYXR0cmlidXRlcy5jb21wb25lbnQsXG4gICAgICAgIHByb3BzOiBub2RlLmF0dHJpYnV0ZXMucHJvcHMsXG4gICAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCA/IFt7XG4gICAgICAgICAgdHlwZTogJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCcsXG4gICAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgICB0ZXh0OiAnJ1xuICAgICAgICAgIH1dXG4gICAgICAgIH1dIDogbm9kZS5jaGlsZHJlbi5mbGF0TWFwKHggPT4gZnJvbU1hcmtkb2NOb2RlKHgsIGNvbXBvbmVudEJsb2NrcykpXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAobm9kZS50YWcgPT09ICdjb21wb25lbnQtYmxvY2stcHJvcCcgJiYgQXJyYXkuaXNBcnJheShub2RlLmF0dHJpYnV0ZXMucHJvcFBhdGgpICYmIG5vZGUuYXR0cmlidXRlcy5wcm9wUGF0aC5ldmVyeSh4ID0+IHR5cGVvZiB4ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgeCA9PT0gJ251bWJlcicpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnY29tcG9uZW50LWJsb2NrLXByb3AnLFxuICAgICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbi5mbGF0TWFwKHggPT4gZnJvbU1hcmtkb2NOb2RlKHgsIGNvbXBvbmVudEJsb2NrcykpLFxuICAgICAgICBwcm9wUGF0aDogbm9kZS5hdHRyaWJ1dGVzLnByb3BQYXRoXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAobm9kZS50YWcpIHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudEJsb2NrID0gY29tcG9uZW50QmxvY2tzW25vZGUudGFnXTtcbiAgICAgIGlmIChjb21wb25lbnRCbG9jaykge1xuICAgICAgICBjb25zdCBzaW5nbGVDaGlsZEZpZWxkID0gZmluZFNpbmdsZUNoaWxkRmllbGQoe1xuICAgICAgICAgIGtpbmQ6ICdvYmplY3QnLFxuICAgICAgICAgIGZpZWxkczogY29tcG9uZW50QmxvY2suc2NoZW1hXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoc2luZ2xlQ2hpbGRGaWVsZCkge1xuICAgICAgICAgIGNvbnN0IG5ld0F0dHJpYnV0ZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG5vZGUuYXR0cmlidXRlcykpO1xuICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gW107XG4gICAgICAgICAgdG9DaGlsZHJlbkFuZFByb3BzJDEobm9kZS5jaGlsZHJlbiwgY2hpbGRyZW4sIG5ld0F0dHJpYnV0ZXMsIHNpbmdsZUNoaWxkRmllbGQsIFtdLCBjb21wb25lbnRCbG9ja3MpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnY29tcG9uZW50LWJsb2NrJyxcbiAgICAgICAgICAgIGNvbXBvbmVudDogbm9kZS50YWcsXG4gICAgICAgICAgICBwcm9wczogbmV3QXR0cmlidXRlcyxcbiAgICAgICAgICAgIGNoaWxkcmVuXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6ICdjb21wb25lbnQtYmxvY2snLFxuICAgICAgICAgIGNvbXBvbmVudDogbm9kZS50YWcsXG4gICAgICAgICAgcHJvcHM6IG5vZGUuYXR0cmlidXRlcyxcbiAgICAgICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDAgPyBbe1xuICAgICAgICAgICAgdHlwZTogJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCcsXG4gICAgICAgICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgICAgICAgdGV4dDogJydcbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfV0gOiBub2RlLmNoaWxkcmVuLmZsYXRNYXAoeCA9PiBmcm9tTWFya2RvY05vZGUoeCwgY29tcG9uZW50QmxvY2tzKSlcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHRhZzogJHtub2RlLnRhZ31gKTtcbiAgfVxuICByZXR1cm4gaW5saW5lTm9kZUZyb21NYXJrZG9jKG5vZGUpO1xufVxuZnVuY3Rpb24gdG9DaGlsZHJlbkFuZFByb3BzJDEoZnJvbU1hcmtkb2MsIHJlc3VsdGluZ0NoaWxkcmVuLCB2YWx1ZSwgc2luZ2xlQ2hpbGRGaWVsZCwgcGFyZW50UHJvcFBhdGgsIGNvbXBvbmVudEJsb2Nrcykge1xuICBpZiAoc2luZ2xlQ2hpbGRGaWVsZC5raW5kID09PSAnY2hpbGQnKSB7XG4gICAgY29uc3QgY2hpbGRyZW4gPSBmcm9tTWFya2RvYy5mbGF0TWFwKHggPT4gZnJvbU1hcmtkb2NOb2RlKHgsIGNvbXBvbmVudEJsb2NrcykpO1xuICAgIHJlc3VsdGluZ0NoaWxkcmVuLnB1c2goe1xuICAgICAgdHlwZTogYGNvbXBvbmVudC0ke3NpbmdsZUNoaWxkRmllbGQub3B0aW9ucy5raW5kfS1wcm9wYCxcbiAgICAgIHByb3BQYXRoOiBbLi4ucGFyZW50UHJvcFBhdGgsIC4uLnNpbmdsZUNoaWxkRmllbGQucmVsYXRpdmVQYXRoXSxcbiAgICAgIGNoaWxkcmVuXG4gICAgfSk7XG4gIH1cbiAgaWYgKHNpbmdsZUNoaWxkRmllbGQua2luZCA9PT0gJ2FycmF5Jykge1xuICAgIGNvbnN0IGFyciA9IFtdO1xuICAgIGZvciAobGV0IFtpZHgsIGNoaWxkXSBvZiBmcm9tTWFya2RvYy5lbnRyaWVzKCkpIHtcbiAgICAgIGlmIChjaGlsZC50eXBlID09PSAncGFyYWdyYXBoJykge1xuICAgICAgICBjaGlsZCA9IGNoaWxkLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdO1xuICAgICAgfVxuICAgICAgaWYgKGNoaWxkLnR5cGUgIT09ICd0YWcnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgZXhwZWN0ZWQgdGFnICR7c2luZ2xlQ2hpbGRGaWVsZC5hc0NoaWxkVGFnfSwgZm91bmQgdHlwZTogJHtjaGlsZC50eXBlfWApO1xuICAgICAgfVxuICAgICAgaWYgKGNoaWxkLnRhZyAhPT0gc2luZ2xlQ2hpbGRGaWVsZC5hc0NoaWxkVGFnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgZXhwZWN0ZWQgdGFnICR7c2luZ2xlQ2hpbGRGaWVsZC5hc0NoaWxkVGFnfSwgZm91bmQgdGFnOiAke2NoaWxkLnRhZ31gKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNoaWxkLmF0dHJpYnV0ZXMpKTtcbiAgICAgIGlmIChzaW5nbGVDaGlsZEZpZWxkLmNoaWxkKSB7XG4gICAgICAgIHRvQ2hpbGRyZW5BbmRQcm9wcyQxKGNoaWxkLmNoaWxkcmVuLCByZXN1bHRpbmdDaGlsZHJlbiwgYXR0cmlidXRlcywgc2luZ2xlQ2hpbGRGaWVsZC5jaGlsZCwgWy4uLnBhcmVudFByb3BQYXRoLCAuLi5zaW5nbGVDaGlsZEZpZWxkLnJlbGF0aXZlUGF0aCwgaWR4XSwgY29tcG9uZW50QmxvY2tzKTtcbiAgICAgIH1cbiAgICAgIGFyci5wdXNoKGF0dHJpYnV0ZXMpO1xuICAgIH1cbiAgICBjb25zdCBrZXkgPSBzaW5nbGVDaGlsZEZpZWxkLnJlbGF0aXZlUGF0aFtzaW5nbGVDaGlsZEZpZWxkLnJlbGF0aXZlUGF0aC5sZW5ndGggLSAxXTtcbiAgICBjb25zdCBwYXJlbnQgPSBnZXRWYWx1ZUF0UHJvcFBhdGgodmFsdWUsIHNpbmdsZUNoaWxkRmllbGQucmVsYXRpdmVQYXRoLnNsaWNlKDAsIC0xKSk7XG4gICAgcGFyZW50W2tleV0gPSBhcnI7XG4gIH1cbn1cblxuZnVuY3Rpb24gYXJlQXJyYXlzRXF1YWwoYSwgYikge1xuICByZXR1cm4gYS5sZW5ndGggPT09IGIubGVuZ3RoICYmIGEuZXZlcnkoKHgsIGkpID0+IHggPT09IGJbaV0pO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplVGV4dEJhc2VkT25JbmxpbmVNYXJrc0FuZFNvZnRCcmVha3MoW25vZGUsIHBhdGhdLCBlZGl0b3IsIGlubGluZU1hcmtzLCBzb2Z0QnJlYWtzKSB7XG4gIGNvbnN0IG1hcmtzVG9SZW1vdmUgPSBPYmplY3Qua2V5cyhub2RlKS5maWx0ZXIoeCA9PiB4ICE9PSAndGV4dCcgJiYgeCAhPT0gJ2luc2VydE1lbnUnICYmIGlubGluZU1hcmtzW3hdICE9PSB0cnVlKTtcbiAgaWYgKG1hcmtzVG9SZW1vdmUubGVuZ3RoKSB7XG4gICAgVHJhbnNmb3Jtcy51bnNldE5vZGVzKGVkaXRvciwgbWFya3NUb1JlbW92ZSwge1xuICAgICAgYXQ6IHBhdGhcbiAgICB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoIXNvZnRCcmVha3MpIHtcbiAgICBjb25zdCBoYXNTb2Z0QnJlYWtzID0gbm9kZS50ZXh0LmluY2x1ZGVzKCdcXG4nKTtcbiAgICBpZiAoaGFzU29mdEJyZWFrcykge1xuICAgICAgY29uc3QgW3BhcmVudE5vZGVdID0gRWRpdG9yLnBhcmVudChlZGl0b3IsIHBhdGgpO1xuICAgICAgaWYgKHBhcmVudE5vZGUudHlwZSAhPT0gJ2NvZGUnKSB7XG4gICAgICAgIGZvciAoY29uc3QgcG9zaXRpb24gb2YgRWRpdG9yLnBvc2l0aW9ucyhlZGl0b3IsIHtcbiAgICAgICAgICBhdDogcGF0aFxuICAgICAgICB9KSkge1xuICAgICAgICAgIGNvbnN0IGNoYXJhY3RlciA9IE5vZGUuZ2V0KGVkaXRvciwgcG9zaXRpb24ucGF0aCkudGV4dFtwb3NpdGlvbi5vZmZzZXRdO1xuICAgICAgICAgIGlmIChjaGFyYWN0ZXIgPT09ICdcXG4nKSB7XG4gICAgICAgICAgICBUcmFuc2Zvcm1zLmRlbGV0ZShlZGl0b3IsIHtcbiAgICAgICAgICAgICAgYXQ6IHBvc2l0aW9uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBub3JtYWxpemVJbmxpbmVCYXNlZE9uTGlua3MoW25vZGUsIHBhdGhdLCBlZGl0b3IsIGxpbmtzKSB7XG4gIGlmIChub2RlLnR5cGUgPT09ICdsaW5rJyAmJiAhbGlua3MpIHtcbiAgICBUcmFuc2Zvcm1zLmluc2VydFRleHQoZWRpdG9yLCBgICgke25vZGUuaHJlZn0pYCwge1xuICAgICAgYXQ6IEVkaXRvci5lbmQoZWRpdG9yLCBwYXRoKVxuICAgIH0pO1xuICAgIFRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICBhdDogcGF0aFxuICAgIH0pO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUVsZW1lbnRCYXNlZE9uRG9jdW1lbnRGZWF0dXJlcyhbbm9kZSwgcGF0aF0sIGVkaXRvciwge1xuICBmb3JtYXR0aW5nLFxuICBkaXZpZGVycyxcbiAgbGF5b3V0cyxcbiAgbGlua3MsXG4gIGltYWdlcyxcbiAgdGFibGVzXG59KSB7XG4gIGlmIChub2RlLnR5cGUgPT09ICdoZWFkaW5nJyAmJiAoIWZvcm1hdHRpbmcuaGVhZGluZ3MubGV2ZWxzLmxlbmd0aCB8fCAhZm9ybWF0dGluZy5oZWFkaW5ncy5sZXZlbHMuaW5jbHVkZXMobm9kZS5sZXZlbCkpIHx8IG5vZGUudHlwZSA9PT0gJ29yZGVyZWQtbGlzdCcgJiYgIWZvcm1hdHRpbmcubGlzdFR5cGVzLm9yZGVyZWQgfHwgbm9kZS50eXBlID09PSAndW5vcmRlcmVkLWxpc3QnICYmICFmb3JtYXR0aW5nLmxpc3RUeXBlcy51bm9yZGVyZWQgfHwgbm9kZS50eXBlID09PSAnY29kZScgJiYgIWZvcm1hdHRpbmcuYmxvY2tUeXBlcy5jb2RlIHx8IG5vZGUudHlwZSA9PT0gJ2Jsb2NrcXVvdGUnICYmICFmb3JtYXR0aW5nLmJsb2NrVHlwZXMuYmxvY2txdW90ZSB8fCBub2RlLnR5cGUgPT09ICdpbWFnZScgJiYgIWltYWdlcyB8fCBub2RlLnR5cGUgPT09ICd0YWJsZScgJiYgIXRhYmxlcyB8fCBub2RlLnR5cGUgPT09ICdsYXlvdXQnICYmIChsYXlvdXRzLmxlbmd0aCA9PT0gMCB8fCAhbGF5b3V0cy5zb21lKGxheW91dCA9PiBhcmVBcnJheXNFcXVhbChsYXlvdXQsIG5vZGUubGF5b3V0KSkpKSB7XG4gICAgVHJhbnNmb3Jtcy51bndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgIGF0OiBwYXRoXG4gICAgfSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKChub2RlLnR5cGUgPT09ICdwYXJhZ3JhcGgnIHx8IG5vZGUudHlwZSA9PT0gJ2hlYWRpbmcnKSAmJiAoIWZvcm1hdHRpbmcuYWxpZ25tZW50LmNlbnRlciAmJiBub2RlLnRleHRBbGlnbiA9PT0gJ2NlbnRlcicgfHwgIWZvcm1hdHRpbmcuYWxpZ25tZW50LmVuZCAmJiBub2RlLnRleHRBbGlnbiA9PT0gJ2VuZCcgfHwgJ3RleHRBbGlnbicgaW4gbm9kZSAmJiBub2RlLnRleHRBbGlnbiAhPT0gJ2NlbnRlcicgJiYgbm9kZS50ZXh0QWxpZ24gIT09ICdlbmQnKSkge1xuICAgIFRyYW5zZm9ybXMudW5zZXROb2RlcyhlZGl0b3IsICd0ZXh0QWxpZ24nLCB7XG4gICAgICBhdDogcGF0aFxuICAgIH0pO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICdkaXZpZGVyJyAmJiAhZGl2aWRlcnMpIHtcbiAgICBUcmFuc2Zvcm1zLnJlbW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgYXQ6IHBhdGhcbiAgICB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gbm9ybWFsaXplSW5saW5lQmFzZWRPbkxpbmtzKFtub2RlLCBwYXRoXSwgZWRpdG9yLCBsaW5rcyk7XG59XG5mdW5jdGlvbiB3aXRoRG9jdW1lbnRGZWF0dXJlc05vcm1hbGl6YXRpb24oZG9jdW1lbnRGZWF0dXJlcywgZWRpdG9yKSB7XG4gIGNvbnN0IHtcbiAgICBub3JtYWxpemVOb2RlXG4gIH0gPSBlZGl0b3I7XG4gIGVkaXRvci5ub3JtYWxpemVOb2RlID0gKFtub2RlLCBwYXRoXSkgPT4ge1xuICAgIGlmIChUZXh0LmlzVGV4dChub2RlKSkge1xuICAgICAgbm9ybWFsaXplVGV4dEJhc2VkT25JbmxpbmVNYXJrc0FuZFNvZnRCcmVha3MoW25vZGUsIHBhdGhdLCBlZGl0b3IsIGRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5pbmxpbmVNYXJrcywgZG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLnNvZnRCcmVha3MpO1xuICAgIH0gZWxzZSBpZiAoRWxlbWVudCQxLmlzRWxlbWVudChub2RlKSkge1xuICAgICAgbm9ybWFsaXplRWxlbWVudEJhc2VkT25Eb2N1bWVudEZlYXR1cmVzKFtub2RlLCBwYXRoXSwgZWRpdG9yLCBkb2N1bWVudEZlYXR1cmVzKTtcbiAgICB9XG4gICAgbm9ybWFsaXplTm9kZShbbm9kZSwgcGF0aF0pO1xuICB9O1xuICByZXR1cm4gZWRpdG9yO1xufVxuXG5mdW5jdGlvbiBnZXRTcmNQcmVmaXgocHVibGljUGF0aCwgc2x1Zykge1xuICByZXR1cm4gdHlwZW9mIHB1YmxpY1BhdGggPT09ICdzdHJpbmcnID8gYCR7cHVibGljUGF0aC5yZXBsYWNlKC9cXC8qJC8sICcnKX0vJHtzbHVnID09PSB1bmRlZmluZWQgPyAnJyA6IHNsdWcgKyAnLyd9YCA6ICcnO1xufVxuXG5mdW5jdGlvbiBkZXNlcmlhbGl6ZUZpbGVzKG5vZGVzLCBjb21wb25lbnRCbG9ja3MsIGZpbGVzLCBvdGhlckZpbGVzLCBtb2RlLCBkb2N1bWVudEZlYXR1cmVzLCBzbHVnKSB7XG4gIHJldHVybiBub2Rlcy5tYXAobm9kZSA9PiB7XG4gICAgaWYgKG5vZGUudHlwZSA9PT0gJ2NvbXBvbmVudC1ibG9jaycpIHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudEJsb2NrID0gY29tcG9uZW50QmxvY2tzW25vZGUuY29tcG9uZW50XTtcbiAgICAgIGlmICghY29tcG9uZW50QmxvY2spIHJldHVybiBub2RlO1xuICAgICAgY29uc3Qgc2NoZW1hID0gb2JqZWN0KGNvbXBvbmVudEJsb2NrLnNjaGVtYSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5ub2RlLFxuICAgICAgICBwcm9wczogZGVzZXJpYWxpemVQcm9wcyhzY2hlbWEsIG5vZGUucHJvcHMsIGZpbGVzLCBvdGhlckZpbGVzLCBtb2RlLCBzbHVnKVxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKG5vZGUudHlwZSA9PT0gJ2ltYWdlJyAmJiB0eXBlb2Ygbm9kZS5zcmMgPT09ICdzdHJpbmcnICYmIG1vZGUgPT09ICdlZGl0Jykge1xuICAgICAgdmFyIF9yZWY7XG4gICAgICBjb25zdCBwcmVmaXggPSBnZXRTcmNQcmVmaXhGb3JJbWFnZUJsb2NrKGRvY3VtZW50RmVhdHVyZXMsIHNsdWcpO1xuICAgICAgY29uc3QgZmlsZW5hbWUgPSBub2RlLnNyYy5zbGljZShwcmVmaXgubGVuZ3RoKTtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSAoX3JlZiA9IHR5cGVvZiBkb2N1bWVudEZlYXR1cmVzLmltYWdlcyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIGRvY3VtZW50RmVhdHVyZXMuaW1hZ2VzLmRpcmVjdG9yeSA9PT0gJ3N0cmluZycgPyBvdGhlckZpbGVzLmdldChmaXhQYXRoKGRvY3VtZW50RmVhdHVyZXMuaW1hZ2VzLmRpcmVjdG9yeSkpIDogZmlsZXMpID09PSBudWxsIHx8IF9yZWYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZWYuZ2V0KGZpbGVuYW1lKTtcbiAgICAgIGlmICghY29udGVudCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6ICdwYXJhZ3JhcGgnLFxuICAgICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgICAgdGV4dDogYE1pc3NpbmcgaW1hZ2UgJHtmaWxlbmFtZX1gXG4gICAgICAgICAgfV1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdpbWFnZScsXG4gICAgICAgIHNyYzoge1xuICAgICAgICAgIGZpbGVuYW1lLFxuICAgICAgICAgIGNvbnRlbnRcbiAgICAgICAgfSxcbiAgICAgICAgYWx0OiBub2RlLmFsdCxcbiAgICAgICAgdGl0bGU6IG5vZGUudGl0bGUsXG4gICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgIHRleHQ6ICcnXG4gICAgICAgIH1dXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG5vZGUudHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbnN0IGNoaWxkcmVuID0gZGVzZXJpYWxpemVGaWxlcyhub2RlLmNoaWxkcmVuLCBjb21wb25lbnRCbG9ja3MsIGZpbGVzLCBvdGhlckZpbGVzLCBtb2RlLCBkb2N1bWVudEZlYXR1cmVzLCBzbHVnKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLm5vZGUsXG4gICAgICAgIGNoaWxkcmVuXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gbm9kZTtcbiAgfSk7XG59XG5mdW5jdGlvbiBkZXNlcmlhbGl6ZVByb3BzKHNjaGVtYSwgdmFsdWUsIGZpbGVzLCBvdGhlckZpbGVzLCBtb2RlLCBzbHVnKSB7XG4gIHJldHVybiB0cmFuc2Zvcm1Qcm9wcyhzY2hlbWEsIHZhbHVlLCB7XG4gICAgZm9ybTogKHNjaGVtYSwgdmFsdWUpID0+IHtcbiAgICAgIGlmIChzY2hlbWEuZm9ybUtpbmQgPT09ICdhc3NldCcpIHtcbiAgICAgICAgdmFyIF9vdGhlckZpbGVzJGdldDtcbiAgICAgICAgaWYgKG1vZGUgPT09ICdyZWFkJykge1xuICAgICAgICAgIHJldHVybiBzY2hlbWEucmVhZGVyLnBhcnNlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IHNjaGVtYS5maWxlbmFtZSh2YWx1ZSwge1xuICAgICAgICAgIHNsdWcsXG4gICAgICAgICAgc3VnZ2VzdGVkRmlsZW5hbWVQcmVmaXg6IHVuZGVmaW5lZFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHNjaGVtYS5wYXJzZSh2YWx1ZSwge1xuICAgICAgICAgIGFzc2V0OiBmaWxlbmFtZSA/IHNjaGVtYS5kaXJlY3RvcnkgPyAoX290aGVyRmlsZXMkZ2V0ID0gb3RoZXJGaWxlcy5nZXQoc2NoZW1hLmRpcmVjdG9yeSkpID09PSBudWxsIHx8IF9vdGhlckZpbGVzJGdldCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX290aGVyRmlsZXMkZ2V0LmdldChmaWxlbmFtZSkgOiBmaWxlcy5nZXQoZmlsZW5hbWUpIDogdW5kZWZpbmVkLFxuICAgICAgICAgIHNsdWdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoc2NoZW1hLmZvcm1LaW5kID09PSAnY29udGVudCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgaW1wbGVtZW50ZWQnKTtcbiAgICAgIH1cbiAgICAgIGlmIChtb2RlID09PSAncmVhZCcpIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYS5yZWFkZXIucGFyc2UodmFsdWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNjaGVtYS5wYXJzZSh2YWx1ZSwgdW5kZWZpbmVkKTtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gZ2V0U3JjUHJlZml4Rm9ySW1hZ2VCbG9jayhkb2N1bWVudEZlYXR1cmVzLCBzbHVnKSB7XG4gIHJldHVybiBnZXRTcmNQcmVmaXgodHlwZW9mIGRvY3VtZW50RmVhdHVyZXMuaW1hZ2VzID09PSAnb2JqZWN0JyA/IGRvY3VtZW50RmVhdHVyZXMuaW1hZ2VzLnB1YmxpY1BhdGggOiB1bmRlZmluZWQsIHNsdWcpO1xufVxuXG5mdW5jdGlvbiBzZXJpYWxpemVQcm9wcyhyb290VmFsdWUsIHJvb3RTY2hlbWEsXG4vLyBub3RlIHlvdSBtaWdodCBoYXZlIGEgc2x1ZyB3aXRob3V0IGEgc2x1ZyBmaWVsZCB3aGVuIHNlcmlhbGl6aW5nIHByb3BzIGluc2lkZSBhIGNvbXBvbmVudCBibG9jayBvciBldGMuIGluIHRoZSBlZGl0b3JcbnNsdWdGaWVsZCwgc2x1Zywgc2hvdWxkU3VnZ2VzdEZpbGVuYW1lUHJlZml4KSB7XG4gIGNvbnN0IGV4dHJhRmlsZXMgPSBbXTtcbiAgcmV0dXJuIHtcbiAgICB2YWx1ZTogdHJhbnNmb3JtUHJvcHMocm9vdFNjaGVtYSwgcm9vdFZhbHVlLCB7XG4gICAgICBmb3JtKHNjaGVtYSwgdmFsdWUsIHByb3BQYXRoKSB7XG4gICAgICAgIGlmIChwcm9wUGF0aC5sZW5ndGggPT09IDEgJiYgc2x1Z0ZpZWxkID09PSBwcm9wUGF0aFswXSkge1xuICAgICAgICAgIGlmIChzY2hlbWEuZm9ybUtpbmQgIT09ICdzbHVnJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzbHVnRmllbGQgaXMgYSBub3QgYSBzbHVnIGZpZWxkJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBzY2hlbWEuc2VyaWFsaXplV2l0aFNsdWcodmFsdWUpLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzY2hlbWEuZm9ybUtpbmQgPT09ICdhc3NldCcpIHtcbiAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBhc3NldCxcbiAgICAgICAgICAgIHZhbHVlOiBmb3JZYW1sXG4gICAgICAgICAgfSA9IHNjaGVtYS5zZXJpYWxpemUodmFsdWUsIHtcbiAgICAgICAgICAgIHN1Z2dlc3RlZEZpbGVuYW1lUHJlZml4OiBzaG91bGRTdWdnZXN0RmlsZW5hbWVQcmVmaXggPyBnZXRQcm9wUGF0aFBvcnRpb24ocHJvcFBhdGgsIHJvb3RTY2hlbWEsIHJvb3RWYWx1ZSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBzbHVnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKGFzc2V0KSB7XG4gICAgICAgICAgICBleHRyYUZpbGVzLnB1c2goe1xuICAgICAgICAgICAgICBwYXRoOiBhc3NldC5maWxlbmFtZSxcbiAgICAgICAgICAgICAgY29udGVudHM6IGFzc2V0LmNvbnRlbnQsXG4gICAgICAgICAgICAgIHBhcmVudDogc2NoZW1hLmRpcmVjdG9yeVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBmb3JZYW1sO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzY2hlbWEuZm9ybUtpbmQgPT09ICdjb250ZW50Jykge1xuICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIG90aGVyLFxuICAgICAgICAgICAgZXh0ZXJuYWwsXG4gICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgdmFsdWU6IGZvcllhbWxcbiAgICAgICAgICB9ID0gc2NoZW1hLnNlcmlhbGl6ZSh2YWx1ZSwge1xuICAgICAgICAgICAgc2x1Z1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmIChjb250ZW50KSB7XG4gICAgICAgICAgICBleHRyYUZpbGVzLnB1c2goe1xuICAgICAgICAgICAgICBwYXRoOiBnZXRQcm9wUGF0aFBvcnRpb24ocHJvcFBhdGgsIHJvb3RTY2hlbWEsIHJvb3RWYWx1ZSkgKyBzY2hlbWEuY29udGVudEV4dGVuc2lvbixcbiAgICAgICAgICAgICAgY29udGVudHM6IGNvbnRlbnQsXG4gICAgICAgICAgICAgIHBhcmVudDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChjb25zdCBba2V5LCBjb250ZW50c10gb2Ygb3RoZXIpIHtcbiAgICAgICAgICAgIGV4dHJhRmlsZXMucHVzaCh7XG4gICAgICAgICAgICAgIHBhdGg6IGdldFByb3BQYXRoUG9ydGlvbihwcm9wUGF0aCwgcm9vdFNjaGVtYSwgcm9vdFZhbHVlKSArICcvJyArIGtleSxcbiAgICAgICAgICAgICAgY29udGVudHMsXG4gICAgICAgICAgICAgIHBhcmVudDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgYWxsb3dlZERpcmVjdG9yaWVzID0gbmV3IFNldChzY2hlbWEuZGlyZWN0b3JpZXMpO1xuICAgICAgICAgIGZvciAoY29uc3QgW2RpcmVjdG9yeSwgY29udGVudHNdIG9mIGV4dGVybmFsKSB7XG4gICAgICAgICAgICBpZiAoIWFsbG93ZWREaXJlY3Rvcmllcy5oYXMoZGlyZWN0b3J5KSkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgZGlyZWN0b3J5ICR7ZGlyZWN0b3J5fSBpbiBjb250ZW50IGZpZWxkIHNlcmlhbGl6YXRpb25gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgW2ZpbGVuYW1lLCBmaWxlQ29udGVudHNdIG9mIGNvbnRlbnRzKSB7XG4gICAgICAgICAgICAgIGV4dHJhRmlsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgcGF0aDogZmlsZW5hbWUsXG4gICAgICAgICAgICAgICAgY29udGVudHM6IGZpbGVDb250ZW50cyxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGRpcmVjdG9yeVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGZvcllhbWw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNjaGVtYS5zZXJpYWxpemUodmFsdWUpLnZhbHVlO1xuICAgICAgfSxcbiAgICAgIG9iamVjdChfc2NoZW1hLCB2YWx1ZSkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKHZhbHVlKS5maWx0ZXIoKFtfLCB2YWxdKSA9PiB2YWwgIT09IHVuZGVmaW5lZCkpO1xuICAgICAgfSxcbiAgICAgIGFycmF5KF9zY2hlbWEsIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZS5tYXAodmFsID0+IHZhbCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHZhbCk7XG4gICAgICB9LFxuICAgICAgY2hpbGQoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfSksXG4gICAgZXh0cmFGaWxlc1xuICB9O1xufVxuZnVuY3Rpb24gZ2V0UHJvcFBhdGhQb3J0aW9uKHBhdGgsIHNjaGVtYSwgdmFsdWUpIHtcbiAgY29uc3QgZW5kID0gW107XG4gIGZvciAoY29uc3QgcG9ydGlvbiBvZiBwYXRoKSB7XG4gICAgaWYgKHNjaGVtYS5raW5kID09PSAnYXJyYXknKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlW3BvcnRpb25dO1xuICAgICAgaWYgKHNjaGVtYS5zbHVnRmllbGQgJiYgc2NoZW1hLmVsZW1lbnQua2luZCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgY29uc3Qgc2x1ZyA9IGdldFNsdWdGcm9tU3RhdGUoe1xuICAgICAgICAgIHNjaGVtYTogc2NoZW1hLmVsZW1lbnQuZmllbGRzLFxuICAgICAgICAgIHNsdWdGaWVsZDogc2NoZW1hLnNsdWdGaWVsZFxuICAgICAgICB9LCB2YWx1ZSk7XG4gICAgICAgIGVuZC5wdXNoKHNsdWcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZW5kLnB1c2gocG9ydGlvbik7XG4gICAgICB9XG4gICAgICBzY2hlbWEgPSBzY2hlbWEuZWxlbWVudDtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBlbmQucHVzaChwb3J0aW9uKTtcbiAgICBpZiAoc2NoZW1hLmtpbmQgPT09ICdvYmplY3QnKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlW3BvcnRpb25dO1xuICAgICAgc2NoZW1hID0gc2NoZW1hLmZpZWxkc1twb3J0aW9uXTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoc2NoZW1hLmtpbmQgPT09ICdjb25kaXRpb25hbCcpIHtcbiAgICAgIGlmIChwb3J0aW9uID09PSAnZGlzY3JpbWluYW50Jykge1xuICAgICAgICBzY2hlbWEgPSBzY2hlbWEuZGlzY3JpbWluYW50O1xuICAgICAgfSBlbHNlIGlmIChwb3J0aW9uID09PSAndmFsdWUnKSB7XG4gICAgICAgIHNjaGVtYSA9IHNjaGVtYS52YWx1ZXNbdmFsdWUuZGlzY3JpbWluYW50XTtcbiAgICAgIH1cbiAgICAgIHZhbHVlID0gdmFsdWVbcG9ydGlvbl07XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGB1bmV4cGVjdGVkICR7c2NoZW1hLmtpbmR9YCk7XG4gIH1cbiAgcmV0dXJuIGVuZC5qb2luKCcvJyk7XG59XG5cbmZ1bmN0aW9uIHRvSW5saW5lKG5vZGVzKSB7XG4gIHJldHVybiBuZXcgQXN0Lk5vZGUoJ2lubGluZScsIHt9LCBub2Rlcy5mbGF0TWFwKHRvTWFya2RvY0lubGluZSkpO1xufVxuY29uc3QgbWFya1RvTWFya2RvYyA9IHtcbiAgYm9sZDoge1xuICAgIHR5cGU6ICdzdHJvbmcnXG4gIH0sXG4gIGNvZGU6IHtcbiAgICB0eXBlOiAnY29kZSdcbiAgfSxcbiAgaXRhbGljOiB7XG4gICAgdHlwZTogJ2VtJ1xuICB9LFxuICB1bmRlcmxpbmU6IHtcbiAgICB0eXBlOiAndGFnJyxcbiAgICB0YWc6ICd1J1xuICB9LFxuICBrZXlib2FyZDoge1xuICAgIHR5cGU6ICd0YWcnLFxuICAgIHRhZzogJ2tiZCdcbiAgfSxcbiAgc3RyaWtldGhyb3VnaDoge1xuICAgIHR5cGU6ICdzJ1xuICB9LFxuICBzdWJzY3JpcHQ6IHtcbiAgICB0eXBlOiAndGFnJyxcbiAgICB0YWc6ICdzdWInXG4gIH0sXG4gIHN1cGVyc2NyaXB0OiB7XG4gICAgdHlwZTogJ3RhZycsXG4gICAgdGFnOiAnc3VwJ1xuICB9XG59O1xuZnVuY3Rpb24gdG9NYXJrZG9jSW5saW5lKG5vZGUpIHtcbiAgdmFyIF9leGVjLCBfZXhlYzI7XG4gIGlmIChub2RlLnR5cGUgPT09ICdsaW5rJykge1xuICAgIHJldHVybiBuZXcgQXN0Lk5vZGUoJ2xpbmsnLCB7XG4gICAgICBocmVmOiBub2RlLmhyZWZcbiAgICB9LCBub2RlLmNoaWxkcmVuLmZsYXRNYXAodG9NYXJrZG9jSW5saW5lKSk7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGB1bmV4cGVjdGVkIGlubGluZSBub2RlIHR5cGU6ICR7bm9kZS50eXBlfWApO1xuICB9XG4gIGNvbnN0IG1hcmtzID0gT2JqZWN0LmtleXMobm9kZSkuZmlsdGVyKG1hcmsgPT4gbWFyayAhPT0gJ3RleHQnICYmIG1hcmsgIT09ICdjb2RlJykuc29ydCgpO1xuICBjb25zdCBsZWFkaW5nV2hpdGVzcGFjZSA9IChfZXhlYyA9IC9eXFxzKy8uZXhlYyhub2RlLnRleHQpKSA9PT0gbnVsbCB8fCBfZXhlYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2V4ZWNbMF07XG4gIGNvbnN0IHRyYWlsaW5nV2hpdGVzcGFjZSA9IChfZXhlYzIgPSAvXFxzKyQvLmV4ZWMobm9kZS50ZXh0KSkgPT09IG51bGwgfHwgX2V4ZWMyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZXhlYzJbMF07XG4gIGxldCBjaGlsZHJlbiA9IG5vZGUuY29kZSA/IFtuZXcgQXN0Lk5vZGUoJ2NvZGUnLCB7XG4gICAgY29udGVudDogbm9kZS50ZXh0LnRyaW0oKVxuICB9LCBbXSldIDogW25ldyBBc3QuTm9kZSgndGV4dCcsIHtcbiAgICBjb250ZW50OiBub2RlLnRleHQudHJpbSgpXG4gIH0pXTtcbiAgZm9yIChjb25zdCBtYXJrIG9mIG1hcmtzKSB7XG4gICAgY29uc3QgY29uZmlnID0gbWFya1RvTWFya2RvY1ttYXJrXTtcbiAgICBpZiAoY29uZmlnKSB7XG4gICAgICBjaGlsZHJlbiA9IFtuZXcgQXN0Lk5vZGUoY29uZmlnLnR5cGUsIHt9LCBjaGlsZHJlbiwgY29uZmlnLnRhZyldO1xuICAgIH1cbiAgfVxuICBpZiAobGVhZGluZ1doaXRlc3BhY2UgIT09IG51bGwgJiYgbGVhZGluZ1doaXRlc3BhY2UgIT09IHZvaWQgMCAmJiBsZWFkaW5nV2hpdGVzcGFjZS5sZW5ndGgpIHtcbiAgICBjaGlsZHJlbi51bnNoaWZ0KG5ldyBBc3QuTm9kZSgndGV4dCcsIHtcbiAgICAgIGNvbnRlbnQ6IGxlYWRpbmdXaGl0ZXNwYWNlXG4gICAgfSwgW10pKTtcbiAgfVxuICBpZiAodHJhaWxpbmdXaGl0ZXNwYWNlICE9PSBudWxsICYmIHRyYWlsaW5nV2hpdGVzcGFjZSAhPT0gdm9pZCAwICYmIHRyYWlsaW5nV2hpdGVzcGFjZS5sZW5ndGgpIHtcbiAgICBjaGlsZHJlbi5wdXNoKG5ldyBBc3QuTm9kZSgndGV4dCcsIHtcbiAgICAgIGNvbnRlbnQ6IHRyYWlsaW5nV2hpdGVzcGFjZVxuICAgIH0sIFtdKSk7XG4gIH1cbiAgcmV0dXJuIGNoaWxkcmVuO1xufVxuZnVuY3Rpb24gdG9NYXJrZG9jRG9jdW1lbnQobm9kZXMsIF9jb25maWcpIHtcbiAgY29uc3QgZXh0cmFGaWxlcyA9IFtdO1xuICBjb25zdCBjb25maWcgPSB7XG4gICAgLi4uX2NvbmZpZyxcbiAgICBleHRyYUZpbGVzXG4gIH07XG4gIGNvbnN0IG5vZGUgPSBuZXcgQXN0Lk5vZGUoJ2RvY3VtZW50Jywge30sIG5vZGVzLmZsYXRNYXAoeCA9PiB0b01hcmtkb2MoeCwgY29uZmlnKSkpO1xuICByZXR1cm4ge1xuICAgIG5vZGUsXG4gICAgZXh0cmFGaWxlc1xuICB9O1xufVxuZnVuY3Rpb24gdG9DaGlsZHJlbkFuZFByb3BzKGNoaWxkcmVuQXNNYXJrZG9jLCByZXN1bHRpbmdDaGlsZHJlbiwgdmFsdWUsIHNpbmdsZUNoaWxkRmllbGQpIHtcbiAgaWYgKHNpbmdsZUNoaWxkRmllbGQua2luZCA9PT0gJ2NoaWxkJykge1xuICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5Bc01hcmtkb2MuZmluZCh4ID0+IGFyZUFycmF5c0VxdWFsKHgucHJvcFBhdGgsIHNpbmdsZUNoaWxkRmllbGQucmVsYXRpdmVQYXRoKSk7XG4gICAgaWYgKGNoaWxkKSB7XG4gICAgICByZXN1bHRpbmdDaGlsZHJlbi5wdXNoKC4uLmNoaWxkLmNoaWxkcmVuKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChzaW5nbGVDaGlsZEZpZWxkLmtpbmQgPT09ICdhcnJheScpIHtcbiAgICBjb25zdCBrZXkgPSBzaW5nbGVDaGlsZEZpZWxkLnJlbGF0aXZlUGF0aFtzaW5nbGVDaGlsZEZpZWxkLnJlbGF0aXZlUGF0aC5sZW5ndGggLSAxXTtcbiAgICBjb25zdCBwYXJlbnQgPSBnZXRWYWx1ZUF0UHJvcFBhdGgodmFsdWUsIHNpbmdsZUNoaWxkRmllbGQucmVsYXRpdmVQYXRoLnNsaWNlKDAsIC0xKSk7XG4gICAgY29uc3QgdmFsdWVBdFByb3BQYXRoID0gcGFyZW50W2tleV07XG4gICAgZGVsZXRlIHBhcmVudFtrZXldO1xuICAgIGNvbnN0IGNoaWxkTm9kZXMgPSBuZXcgTWFwKCk7XG4gICAgZm9yIChjb25zdCBjaGlsZCBvZiBjaGlsZHJlbkFzTWFya2RvYykge1xuICAgICAgY29uc3QgaW5uZXJQcm9wUGF0aCA9IGNoaWxkLnByb3BQYXRoLnNsaWNlKHNpbmdsZUNoaWxkRmllbGQucmVsYXRpdmVQYXRoLmxlbmd0aCArIDEpO1xuICAgICAgY29uc3QgbnVtID0gY2hpbGQucHJvcFBhdGhbc2luZ2xlQ2hpbGRGaWVsZC5yZWxhdGl2ZVBhdGgubGVuZ3RoXTtcbiAgICAgIGlmIChjaGlsZE5vZGVzLmdldChudW0pID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY2hpbGROb2Rlcy5zZXQobnVtLCBbXSk7XG4gICAgICB9XG4gICAgICBjaGlsZE5vZGVzLmdldChudW0pLnB1c2goe1xuICAgICAgICBjaGlsZHJlbjogY2hpbGQuY2hpbGRyZW4sXG4gICAgICAgIHByb3BQYXRoOiBpbm5lclByb3BQYXRoXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmVzdWx0aW5nQ2hpbGRyZW4ucHVzaCguLi52YWx1ZUF0UHJvcFBhdGgubWFwKCh4LCBpKSA9PiB7XG4gICAgICB2YXIgX2NoaWxkTm9kZXMkZ2V0O1xuICAgICAgY29uc3QgbmV3Q2hpbGRyZW5Bc01hcmtkb2MgPSAoX2NoaWxkTm9kZXMkZ2V0ID0gY2hpbGROb2Rlcy5nZXQoaSkpICE9PSBudWxsICYmIF9jaGlsZE5vZGVzJGdldCAhPT0gdm9pZCAwID8gX2NoaWxkTm9kZXMkZ2V0IDogW107XG4gICAgICBjb25zdCBjaGlsZHJlbiA9IFtdO1xuICAgICAgdG9DaGlsZHJlbkFuZFByb3BzKG5ld0NoaWxkcmVuQXNNYXJrZG9jLCBjaGlsZHJlbiwgeCwgc2luZ2xlQ2hpbGRGaWVsZC5jaGlsZCk7XG4gICAgICByZXR1cm4gbmV3IEFzdC5Ob2RlKCd0YWcnLCB4LCBjaGlsZHJlbiwgc2luZ2xlQ2hpbGRGaWVsZC5hc0NoaWxkVGFnKTtcbiAgICB9KSk7XG4gIH1cbn1cbmZ1bmN0aW9uIHRvTWFya2RvYyhub2RlLCBjb25maWcpIHtcbiAgaWYgKG5vZGUudHlwZSA9PT0gJ3BhcmFncmFwaCcpIHtcbiAgICBjb25zdCBtYXJrZG9jTm9kZSA9IG5ldyBBc3QuTm9kZSgncGFyYWdyYXBoJywgbm9kZS50ZXh0QWxpZ24gPyB7XG4gICAgICB0ZXh0QWxpZ246IG5vZGUudGV4dEFsaWduXG4gICAgfSA6IHt9LCBbdG9JbmxpbmUobm9kZS5jaGlsZHJlbildKTtcbiAgICBpZiAobm9kZS50ZXh0QWxpZ24pIHtcbiAgICAgIG1hcmtkb2NOb2RlLmFubm90YXRpb25zLnB1c2goe1xuICAgICAgICBuYW1lOiAndGV4dEFsaWduJyxcbiAgICAgICAgdmFsdWU6IG5vZGUudGV4dEFsaWduLFxuICAgICAgICB0eXBlOiAnYXR0cmlidXRlJ1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBtYXJrZG9jTm9kZTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAnaW1hZ2UnKSB7XG4gICAgY29uZmlnLmV4dHJhRmlsZXMucHVzaCh7XG4gICAgICBjb250ZW50czogbm9kZS5zcmMuY29udGVudCxcbiAgICAgIHBhdGg6IG5vZGUuc3JjLmZpbGVuYW1lLFxuICAgICAgcGFyZW50OiB0eXBlb2YgY29uZmlnLmRvY3VtZW50RmVhdHVyZXMuaW1hZ2VzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgY29uZmlnLmRvY3VtZW50RmVhdHVyZXMuaW1hZ2VzLmRpcmVjdG9yeSA9PT0gJ3N0cmluZycgPyBmaXhQYXRoKGNvbmZpZy5kb2N1bWVudEZlYXR1cmVzLmltYWdlcy5kaXJlY3RvcnkpIDogdW5kZWZpbmVkXG4gICAgfSk7XG4gICAgcmV0dXJuIG5ldyBBc3QuTm9kZSgncGFyYWdyYXBoJywge30sIFtuZXcgQXN0Lk5vZGUoJ2lubGluZScsIHt9LCBbbmV3IEFzdC5Ob2RlKCdpbWFnZScsIHtcbiAgICAgIHNyYzogZW5jb2RlVVJJKGAke2dldFNyY1ByZWZpeEZvckltYWdlQmxvY2soY29uZmlnLmRvY3VtZW50RmVhdHVyZXMsIGNvbmZpZy5zbHVnKX0ke25vZGUuc3JjLmZpbGVuYW1lfWApLFxuICAgICAgYWx0OiBub2RlLmFsdCxcbiAgICAgIHRpdGxlOiBub2RlLnRpdGxlXG4gICAgfSldKV0pO1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICdjb2RlJykge1xuICAgIGNvbnN0IGV4dHJhQXR0cmlidXRlcyA9IHt9O1xuICAgIGNvbnN0IHtcbiAgICAgIGNoaWxkcmVuLFxuICAgICAgbGFuZ3VhZ2UsXG4gICAgICB0eXBlLFxuICAgICAgLi4ucmVzdFxuICAgIH0gPSBub2RlO1xuICAgIGNvbnN0IHNjaGVtYSA9IHR5cGVvZiBjb25maWcuZG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmJsb2NrVHlwZXMuY29kZSA9PT0gJ29iamVjdCcgPyBjb25maWcuZG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmJsb2NrVHlwZXMuY29kZS5zY2hlbWEgOiB1bmRlZmluZWQ7XG4gICAgaWYgKHNjaGVtYSAmJiBPYmplY3Qua2V5cyhzY2hlbWEuZmllbGRzKS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBzZXJpYWxpemVkID0gc2VyaWFsaXplUHJvcHMoZ2V0SW5pdGlhbFByb3BzVmFsdWVGcm9tSW5pdGlhbGl6ZXIoc2NoZW1hLCByZXN0KSwgc2NoZW1hLCB1bmRlZmluZWQsIGNvbmZpZy5zbHVnLCBmYWxzZSk7XG4gICAgICBPYmplY3QuYXNzaWduKGV4dHJhQXR0cmlidXRlcywgc2VyaWFsaXplZC52YWx1ZSk7XG4gICAgICBjb25maWcuZXh0cmFGaWxlcy5wdXNoKC4uLnNlcmlhbGl6ZWQuZXh0cmFGaWxlcyk7XG4gICAgfVxuICAgIGxldCBjb250ZW50ID0gY2hpbGRyZW5bMF0udGV4dCArICdcXG4nO1xuICAgIGNvbnN0IG1hcmtkb2NOb2RlID0gbmV3IEFzdC5Ob2RlKCdmZW5jZScsIHtcbiAgICAgIGNvbnRlbnQsXG4gICAgICBsYW5ndWFnZSxcbiAgICAgIC4uLmV4dHJhQXR0cmlidXRlc1xuICAgIH0sIFtuZXcgQXN0Lk5vZGUoJ3RleHQnLCB7XG4gICAgICBjb250ZW50XG4gICAgfSldKTtcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhleHRyYUF0dHJpYnV0ZXMpKSB7XG4gICAgICBtYXJrZG9jTm9kZS5hbm5vdGF0aW9ucy5wdXNoKHtcbiAgICAgICAgbmFtZToga2V5LFxuICAgICAgICB2YWx1ZSxcbiAgICAgICAgdHlwZTogJ2F0dHJpYnV0ZSdcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gbWFya2RvY05vZGU7XG4gIH1cbiAgY29uc3QgX3RvTWFya2RvYyA9IG5vZGUgPT4gdG9NYXJrZG9jKG5vZGUsIGNvbmZpZyk7XG4gIGlmIChub2RlLnR5cGUgPT09ICdibG9ja3F1b3RlJykge1xuICAgIHJldHVybiBuZXcgQXN0Lk5vZGUoJ2Jsb2NrcXVvdGUnLCB7fSwgbm9kZS5jaGlsZHJlbi5tYXAoX3RvTWFya2RvYykpO1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICdkaXZpZGVyJykge1xuICAgIHJldHVybiBuZXcgQXN0Lk5vZGUoJ2hyJyk7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ3RhYmxlJykge1xuICAgIGNvbnN0IGhlYWQgPSBub2RlLmNoaWxkcmVuLmZpbmQoeCA9PiB4LnR5cGUgPT09ICd0YWJsZS1oZWFkJyk7XG4gICAgcmV0dXJuIG5ldyBBc3QuTm9kZSgndGFnJywge30sIFtuZXcgQXN0Lk5vZGUoJ3RhYmxlJywge30sIFtuZXcgQXN0Lk5vZGUoJ3RoZWFkJywge30sIGhlYWQgPyBoZWFkLmNoaWxkcmVuLm1hcChfdG9NYXJrZG9jKSA6IFtdKSwgX3RvTWFya2RvYyhub2RlLmNoaWxkcmVuLmZpbmQoeCA9PiB4LnR5cGUgPT09ICd0YWJsZS1ib2R5JykpXSldLCAndGFibGUnKTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAndGFibGUtYm9keScpIHtcbiAgICByZXR1cm4gbmV3IEFzdC5Ob2RlKCd0Ym9keScsIHt9LCBub2RlLmNoaWxkcmVuLm1hcChfdG9NYXJrZG9jKSk7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ3RhYmxlLXJvdycpIHtcbiAgICByZXR1cm4gbmV3IEFzdC5Ob2RlKCd0cicsIHt9LCBub2RlLmNoaWxkcmVuLm1hcChfdG9NYXJrZG9jKSk7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ3RhYmxlLWNlbGwnKSB7XG4gICAgcmV0dXJuIG5ldyBBc3QuTm9kZShub2RlLmhlYWRlciA/ICd0aCcgOiAndGQnLCB7fSwgbm9kZS5jaGlsZHJlbi5tYXAoX3RvTWFya2RvYykpO1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICdoZWFkaW5nJykge1xuICAgIGNvbnN0IGV4dHJhQXR0cmlidXRlcyA9IHt9O1xuICAgIGlmIChub2RlLnRleHRBbGlnbikge1xuICAgICAgZXh0cmFBdHRyaWJ1dGVzLnRleHRBbGlnbiA9IG5vZGUudGV4dEFsaWduO1xuICAgIH1cbiAgICBjb25zdCB7XG4gICAgICBjaGlsZHJlbixcbiAgICAgIGxldmVsLFxuICAgICAgdGV4dEFsaWduLFxuICAgICAgdHlwZSxcbiAgICAgIC4uLnJlc3RcbiAgICB9ID0gbm9kZTtcbiAgICBjb25zdCBzY2hlbWEgPSBjb25maWcuZG9jdW1lbnRGZWF0dXJlcy5mb3JtYXR0aW5nLmhlYWRpbmdzLnNjaGVtYTtcbiAgICBpZiAoT2JqZWN0LmtleXMoc2NoZW1hLmZpZWxkcykubGVuZ3RoID4gMCkge1xuICAgICAgT2JqZWN0LmFzc2lnbihleHRyYUF0dHJpYnV0ZXMsIHNlcmlhbGl6ZVByb3BzKGdldEluaXRpYWxQcm9wc1ZhbHVlRnJvbUluaXRpYWxpemVyKHNjaGVtYSwgcmVzdCksIHNjaGVtYSwgdW5kZWZpbmVkLCBjb25maWcuc2x1ZywgZmFsc2UpLnZhbHVlKTtcbiAgICB9XG4gICAgY29uc3QgbWFya2RvY05vZGUgPSBuZXcgQXN0Lk5vZGUoJ2hlYWRpbmcnLCB7XG4gICAgICBsZXZlbDogbm9kZS5sZXZlbCxcbiAgICAgIC4uLmV4dHJhQXR0cmlidXRlc1xuICAgIH0sIFt0b0lubGluZShub2RlLmNoaWxkcmVuKV0pO1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGV4dHJhQXR0cmlidXRlcykpIHtcbiAgICAgIG1hcmtkb2NOb2RlLmFubm90YXRpb25zLnB1c2goe1xuICAgICAgICBuYW1lOiBrZXksXG4gICAgICAgIHZhbHVlLFxuICAgICAgICB0eXBlOiAnYXR0cmlidXRlJ1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBtYXJrZG9jTm9kZTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAnb3JkZXJlZC1saXN0Jykge1xuICAgIHJldHVybiBuZXcgQXN0Lk5vZGUoJ2xpc3QnLCB7XG4gICAgICBvcmRlcmVkOiB0cnVlXG4gICAgfSwgbm9kZS5jaGlsZHJlbi5tYXAoX3RvTWFya2RvYykpO1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICd1bm9yZGVyZWQtbGlzdCcpIHtcbiAgICByZXR1cm4gbmV3IEFzdC5Ob2RlKCdsaXN0Jywge1xuICAgICAgb3JkZXJlZDogZmFsc2VcbiAgICB9LCBub2RlLmNoaWxkcmVuLm1hcChfdG9NYXJrZG9jKSk7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2xheW91dCcpIHtcbiAgICByZXR1cm4gbmV3IEFzdC5Ob2RlKCd0YWcnLCB7XG4gICAgICBsYXlvdXQ6IG5vZGUubGF5b3V0XG4gICAgfSwgbm9kZS5jaGlsZHJlbi5tYXAoX3RvTWFya2RvYyksICdsYXlvdXQnKTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAnbGF5b3V0LWFyZWEnKSB7XG4gICAgcmV0dXJuIG5ldyBBc3QuTm9kZSgndGFnJywge30sIG5vZGUuY2hpbGRyZW4uZmxhdE1hcChfdG9NYXJrZG9jKSwgJ2xheW91dC1hcmVhJyk7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2NvbXBvbmVudC1ibG9jaycpIHtcbiAgICBjb25zdCBpc1ZvaWQgPSBub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJiBub2RlLmNoaWxkcmVuWzBdLnR5cGUgPT09ICdjb21wb25lbnQtaW5saW5lLXByb3AnICYmIG5vZGUuY2hpbGRyZW5bMF0ucHJvcFBhdGggPT09IHVuZGVmaW5lZDtcbiAgICBjb25zdCBjb21wb25lbnRCbG9jayA9IGNvbmZpZy5jb21wb25lbnRCbG9ja3Nbbm9kZS5jb21wb25lbnRdO1xuICAgIGNvbnN0IGNoaWxkcmVuQXNNYXJrZG9jID0gW107XG4gICAgZm9yIChjb25zdCBjaGlsZCBvZiBub2RlLmNoaWxkcmVuKSB7XG4gICAgICBpZiAoKGNoaWxkLnR5cGUgPT09ICdjb21wb25lbnQtYmxvY2stcHJvcCcgfHwgY2hpbGQudHlwZSA9PT0gJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCcpICYmIGNoaWxkLnByb3BQYXRoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY2hpbGRyZW5Bc01hcmtkb2MucHVzaCh7XG4gICAgICAgICAgdHlwZTogY2hpbGQudHlwZSxcbiAgICAgICAgICBwcm9wUGF0aDogY2hpbGQucHJvcFBhdGgsXG4gICAgICAgICAgY2hpbGRyZW46IGNoaWxkLnR5cGUgPT09ICdjb21wb25lbnQtYmxvY2stcHJvcCcgPyBjaGlsZC5jaGlsZHJlbi5mbGF0TWFwKF90b01hcmtkb2MpIDogW3RvSW5saW5lKGNoaWxkLmNoaWxkcmVuKV1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGxldCBhdHRyaWJ1dGVzID0gbm9kZS5wcm9wcztcbiAgICBpZiAoY29tcG9uZW50QmxvY2spIHtcbiAgICAgIGNvbnN0IHNlcmlhbGl6ZWQgPSBzZXJpYWxpemVQcm9wcyhub2RlLnByb3BzLCB7XG4gICAgICAgIGtpbmQ6ICdvYmplY3QnLFxuICAgICAgICBmaWVsZHM6IGNvbXBvbmVudEJsb2NrLnNjaGVtYVxuICAgICAgfSwgdW5kZWZpbmVkLCBjb25maWcuc2x1ZywgZmFsc2UpO1xuICAgICAgYXR0cmlidXRlcyA9IHNlcmlhbGl6ZWQudmFsdWU7XG4gICAgICBjb25maWcuZXh0cmFGaWxlcy5wdXNoKC4uLnNlcmlhbGl6ZWQuZXh0cmFGaWxlcyk7XG4gICAgICBjb25zdCBzaW5nbGVDaGlsZEZpZWxkID0gZmluZFNpbmdsZUNoaWxkRmllbGQoe1xuICAgICAgICBraW5kOiAnb2JqZWN0JyxcbiAgICAgICAgZmllbGRzOiBjb21wb25lbnRCbG9jay5zY2hlbWFcbiAgICAgIH0pO1xuICAgICAgaWYgKHNpbmdsZUNoaWxkRmllbGQpIHtcbiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgdG9DaGlsZHJlbkFuZFByb3BzKGNoaWxkcmVuQXNNYXJrZG9jLCBjaGlsZHJlbiwgYXR0cmlidXRlcywgc2luZ2xlQ2hpbGRGaWVsZCk7XG4gICAgICAgIHJldHVybiBuZXcgQXN0Lk5vZGUoJ3RhZycsIGF0dHJpYnV0ZXMsIGNoaWxkcmVuLCBub2RlLmNvbXBvbmVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGNoaWxkcmVuID0gaXNWb2lkID8gW10gOiBjaGlsZHJlbkFzTWFya2RvYy5tYXAoeCA9PiBuZXcgQXN0Lk5vZGUoJ3RhZycsIHtcbiAgICAgIHByb3BQYXRoOiB4LnByb3BQYXRoXG4gICAgfSwgeC5jaGlsZHJlbiwgeC50eXBlKSk7XG4gICAgcmV0dXJuIG5ldyBBc3QuTm9kZSgndGFnJywgYXR0cmlidXRlcywgY2hpbGRyZW4sIG5vZGUuY29tcG9uZW50KTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAnY29tcG9uZW50LWJsb2NrLXByb3AnIHx8IG5vZGUudHlwZSA9PT0gJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCcpIHtcbiAgICByZXR1cm4gbmV3IEFzdC5Ob2RlKCd0YWcnLCB7XG4gICAgICBwcm9wUGF0aDogbm9kZS5wcm9wUGF0aFxuICAgIH0sIG5vZGUudHlwZSA9PT0gJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCcgPyBbdG9JbmxpbmUobm9kZS5jaGlsZHJlbildIDogbm9kZS5jaGlsZHJlbi5mbGF0TWFwKF90b01hcmtkb2MpLCBub2RlLnR5cGUpO1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICdsaXN0LWl0ZW0nKSB7XG4gICAgY29uc3QgbGlzdEl0ZW1Db250ZW50ID0gbm9kZS5jaGlsZHJlblswXTtcbiAgICBpZiAobGlzdEl0ZW1Db250ZW50LnR5cGUgIT09ICdsaXN0LWl0ZW0tY29udGVudCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignbGlzdCBpdGVtIGNvbnRlbnQgbXVzdCBjb250YWluIGEgbGlzdC1pdGVtLWNvbnRlbnQnKTtcbiAgICB9XG4gICAgY29uc3QgaW5saW5lID0gdG9JbmxpbmUobGlzdEl0ZW1Db250ZW50LmNoaWxkcmVuKTtcbiAgICBjb25zdCBjaGlsZHJlbiA9IFtpbmxpbmVdO1xuICAgIGNvbnN0IG5lc3RlZExpc3QgPSBub2RlLmNoaWxkcmVuWzFdO1xuICAgIGlmIChuZXN0ZWRMaXN0KSB7XG4gICAgICBjaGlsZHJlbi5wdXNoKHRvTWFya2RvYyhuZXN0ZWRMaXN0LCBjb25maWcpKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBBc3QuTm9kZSgnaXRlbScsIHt9LCBjaGlsZHJlbik7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2xpc3QtaXRlbS1jb250ZW50Jykge1xuICAgIHRocm93IG5ldyBFcnJvcignbGlzdC1pdGVtLWNvbnRlbnQgaW4gdW5leHBlY3RlZCBwb3NpdGlvbicpO1xuICB9XG4gIGRlYnVnZ2VyO1xuICB0aHJvdyBuZXcgRXJyb3IoYHVuZXhwZWN0ZWQgbm9kZSB0eXBlOiAke25vZGUudHlwZX1gKTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVUZXh0KHZhbCwgbWluLCBtYXgsIGZpZWxkTGFiZWwsIHNsdWdJbmZvKSB7XG4gIGlmICh2YWwubGVuZ3RoIDwgbWluKSB7XG4gICAgaWYgKG1pbiA9PT0gMSkge1xuICAgICAgcmV0dXJuIGAke2ZpZWxkTGFiZWx9IG11c3Qgbm90IGJlIGVtcHR5YDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGAke2ZpZWxkTGFiZWx9IG11c3QgYmUgYXQgbGVhc3QgJHttaW59IGNoYXJhY3RlcnMgbG9uZ2A7XG4gICAgfVxuICB9XG4gIGlmICh2YWwubGVuZ3RoID4gbWF4KSB7XG4gICAgcmV0dXJuIGAke2ZpZWxkTGFiZWx9IG11c3QgYmUgbm8gbG9uZ2VyIHRoYW4gJHttYXh9IGNoYXJhY3RlcnNgO1xuICB9XG4gIGlmIChzbHVnSW5mbykge1xuICAgIGlmICh2YWwgPT09ICcnKSB7XG4gICAgICByZXR1cm4gYCR7ZmllbGRMYWJlbH0gbXVzdCBub3QgYmUgZW1wdHlgO1xuICAgIH1cbiAgICBpZiAodmFsID09PSAnLi4nKSB7XG4gICAgICByZXR1cm4gYCR7ZmllbGRMYWJlbH0gbXVzdCBub3QgYmUgLi5gO1xuICAgIH1cbiAgICBpZiAodmFsID09PSAnLicpIHtcbiAgICAgIHJldHVybiBgJHtmaWVsZExhYmVsfSBtdXN0IG5vdCBiZSAuYDtcbiAgICB9XG4gICAgaWYgKHNsdWdJbmZvLmdsb2IgPT09ICcqKicpIHtcbiAgICAgIGNvbnN0IHNwbGl0ID0gdmFsLnNwbGl0KCcvJyk7XG4gICAgICBpZiAoc3BsaXQuc29tZShzID0+IHMgPT09ICcuLicpKSB7XG4gICAgICAgIHJldHVybiBgJHtmaWVsZExhYmVsfSBtdXN0IG5vdCBjb250YWluIC4uYDtcbiAgICAgIH1cbiAgICAgIGlmIChzcGxpdC5zb21lKHMgPT4gcyA9PT0gJy4nKSkge1xuICAgICAgICByZXR1cm4gYCR7ZmllbGRMYWJlbH0gbXVzdCBub3QgYmUgLmA7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICgoc2x1Z0luZm8uZ2xvYiA9PT0gJyonID8gL1tcXFxcL10vIDogL1tcXFxcXS8pLnRlc3QodmFsKSkge1xuICAgICAgcmV0dXJuIGAke2ZpZWxkTGFiZWx9IG11c3Qgbm90IGNvbnRhaW4gc2xhc2hlc2A7XG4gICAgfVxuICAgIGlmICgvXlxcc3xcXHMkLy50ZXN0KHZhbCkpIHtcbiAgICAgIHJldHVybiBgJHtmaWVsZExhYmVsfSBtdXN0IG5vdCBzdGFydCBvciBlbmQgd2l0aCBzcGFjZXNgO1xuICAgIH1cbiAgICBpZiAoc2x1Z0luZm8uc2x1Z3MuaGFzKHZhbCkpIHtcbiAgICAgIHJldHVybiBgJHtmaWVsZExhYmVsfSBtdXN0IGJlIHVuaXF1ZWA7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHBhcnNlQXNOb3JtYWxGaWVsZCh2YWx1ZSkge1xuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiAnJztcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIHN0cmluZycpO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cbmNvbnN0IGVtcHR5U2V0ID0gbmV3IFNldCgpO1xuZnVuY3Rpb24gdGV4dCh7XG4gIGxhYmVsLFxuICBkZWZhdWx0VmFsdWUgPSAnJyxcbiAgdmFsaWRhdGlvbjoge1xuICAgIGxlbmd0aDoge1xuICAgICAgbWF4ID0gSW5maW5pdHksXG4gICAgICBtaW4gPSAwXG4gICAgfSA9IHt9XG4gIH0gPSB7fSxcbiAgZGVzY3JpcHRpb24sXG4gIG11bHRpbGluZSA9IGZhbHNlXG59KSB7XG4gIGZ1bmN0aW9uIHZhbGlkYXRlKHZhbHVlLCBzbHVnRmllbGQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gdmFsaWRhdGVUZXh0KHZhbHVlLCBtaW4sIG1heCwgbGFiZWwsIHNsdWdGaWVsZCk7XG4gICAgaWYgKG1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKG1lc3NhZ2UpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBraW5kOiAnZm9ybScsXG4gICAgZm9ybUtpbmQ6ICdzbHVnJyxcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goVGV4dEZpZWxkSW5wdXQsIHtcbiAgICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgICAgIG1pbjogbWluLFxuICAgICAgICBtYXg6IG1heCxcbiAgICAgICAgbXVsdGlsaW5lOiBtdWx0aWxpbmUsXG4gICAgICAgIC4uLnByb3BzXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgZGVmYXVsdFZhbHVlID09PSAnc3RyaW5nJyA/IGRlZmF1bHRWYWx1ZSA6IGRlZmF1bHRWYWx1ZSgpO1xuICAgIH0sXG4gICAgcGFyc2UodmFsdWUsIGFyZ3MpIHtcbiAgICAgIGlmICgoYXJncyA9PT0gbnVsbCB8fCBhcmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhcmdzLnNsdWcpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGFyZ3Muc2x1ZztcbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXJzZUFzTm9ybWFsRmllbGQodmFsdWUpO1xuICAgIH0sXG4gICAgc2VyaWFsaXplKHZhbHVlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdmFsdWUgPT09ICcnID8gdW5kZWZpbmVkIDogdmFsdWVcbiAgICAgIH07XG4gICAgfSxcbiAgICBzZXJpYWxpemVXaXRoU2x1Zyh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc2x1ZzogdmFsdWUsXG4gICAgICAgIHZhbHVlOiB1bmRlZmluZWRcbiAgICAgIH07XG4gICAgfSxcbiAgICByZWFkZXI6IHtcbiAgICAgIHBhcnNlKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlQXNOb3JtYWxGaWVsZCh2YWx1ZSk7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZShwYXJzZWQsIHVuZGVmaW5lZCk7XG4gICAgICB9LFxuICAgICAgcGFyc2VXaXRoU2x1ZyhfdmFsdWUsIGFyZ3MpIHtcbiAgICAgICAgdmFsaWRhdGUocGFyc2VBc05vcm1hbEZpZWxkKGFyZ3Muc2x1ZyksIHtcbiAgICAgICAgICBnbG9iOiBhcmdzLmdsb2IsXG4gICAgICAgICAgc2x1Z3M6IGVtcHR5U2V0XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9LFxuICAgIHZhbGlkYXRlKHZhbHVlLCBhcmdzKSB7XG4gICAgICByZXR1cm4gdmFsaWRhdGUodmFsdWUsIGFyZ3MgPT09IG51bGwgfHwgYXJncyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYXJncy5zbHVnRmllbGQpO1xuICAgIH1cbiAgfTtcbn1cblxuLyogZXNsaW50LWRpc2FibGUgKi9cbmdsb2JhbFRoaXMuUHJpc20gPSB7XG4gIG1hbnVhbDogdHJ1ZVxufTtcblxuLyogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICBCZWdpbiBwcmlzbS1jb3JlLmpzXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cbi8vLyA8cmVmZXJlbmNlIGxpYj1cIldlYldvcmtlclwiLz5cblxudmFyIF9zZWxmID0gZ2xvYmFsVGhpcztcblxuLyoqXG4gKiBQcmlzbTogTGlnaHR3ZWlnaHQsIHJvYnVzdCwgZWxlZ2FudCBzeW50YXggaGlnaGxpZ2h0aW5nXG4gKlxuICogQGxpY2Vuc2UgTUlUIDxodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVD5cbiAqIEBhdXRob3IgTGVhIFZlcm91IDxodHRwczovL2xlYS52ZXJvdS5tZT5cbiAqIEBuYW1lc3BhY2VcbiAqIEBwdWJsaWNcbiAqL1xudmFyIFByaXNtID0gZnVuY3Rpb24gKF9zZWxmKSB7XG4gIC8vIFByaXZhdGUgaGVscGVyIHZhcnNcbiAgdmFyIGxhbmcgPSAvKD86XnxcXHMpbGFuZyg/OnVhZ2UpPy0oW1xcdy1dKykoPz1cXHN8JCkvaTtcbiAgdmFyIHVuaXF1ZUlkID0gMDtcblxuICAvLyBUaGUgZ3JhbW1hciBvYmplY3QgZm9yIHBsYWludGV4dFxuICB2YXIgcGxhaW5UZXh0R3JhbW1hciA9IHt9O1xuICB2YXIgXyA9IHtcbiAgICAvKipcbiAgICAgKiBCeSBkZWZhdWx0LCBQcmlzbSB3aWxsIGF0dGVtcHQgdG8gaGlnaGxpZ2h0IGFsbCBjb2RlIGVsZW1lbnRzIChieSBjYWxsaW5nIHtAbGluayBQcmlzbS5oaWdobGlnaHRBbGx9KSBvbiB0aGVcbiAgICAgKiBjdXJyZW50IHBhZ2UgYWZ0ZXIgdGhlIHBhZ2UgZmluaXNoZWQgbG9hZGluZy4gVGhpcyBtaWdodCBiZSBhIHByb2JsZW0gaWYgZS5nLiB5b3Ugd2FudGVkIHRvIGFzeW5jaHJvbm91c2x5IGxvYWRcbiAgICAgKiBhZGRpdGlvbmFsIGxhbmd1YWdlcyBvciBwbHVnaW5zIHlvdXJzZWxmLlxuICAgICAqXG4gICAgICogQnkgc2V0dGluZyB0aGlzIHZhbHVlIHRvIGB0cnVlYCwgUHJpc20gd2lsbCBub3QgYXV0b21hdGljYWxseSBoaWdobGlnaHQgYWxsIGNvZGUgZWxlbWVudHMgb24gdGhlIHBhZ2UuXG4gICAgICpcbiAgICAgKiBZb3Ugb2J2aW91c2x5IGhhdmUgdG8gY2hhbmdlIHRoaXMgdmFsdWUgYmVmb3JlIHRoZSBhdXRvbWF0aWMgaGlnaGxpZ2h0aW5nIHN0YXJ0ZWQuIFRvIGRvIHRoaXMsIHlvdSBjYW4gYWRkIGFuXG4gICAgICogZW1wdHkgUHJpc20gb2JqZWN0IGludG8gdGhlIGdsb2JhbCBzY29wZSBiZWZvcmUgbG9hZGluZyB0aGUgUHJpc20gc2NyaXB0IGxpa2UgdGhpczpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogd2luZG93LlByaXNtID0gd2luZG93LlByaXNtIHx8IHt9O1xuICAgICAqIFByaXNtLm1hbnVhbCA9IHRydWU7XG4gICAgICogLy8gYWRkIGEgbmV3IDxzY3JpcHQ+IHRvIGxvYWQgUHJpc20ncyBzY3JpcHRcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQG1lbWJlcm9mIFByaXNtXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIG1hbnVhbDogX3NlbGYuUHJpc20gJiYgX3NlbGYuUHJpc20ubWFudWFsLFxuICAgIC8qKlxuICAgICAqIEJ5IGRlZmF1bHQsIGlmIFByaXNtIGlzIGluIGEgd2ViIHdvcmtlciwgaXQgYXNzdW1lcyB0aGF0IGl0IGlzIGluIGEgd29ya2VyIGl0IGNyZWF0ZWQgaXRzZWxmLCBzbyBpdCB1c2VzXG4gICAgICogYGFkZEV2ZW50TGlzdGVuZXJgIHRvIGNvbW11bmljYXRlIHdpdGggaXRzIHBhcmVudCBpbnN0YW5jZS4gSG93ZXZlciwgaWYgeW91J3JlIHVzaW5nIFByaXNtIG1hbnVhbGx5IGluIHlvdXJcbiAgICAgKiBvd24gd29ya2VyLCB5b3UgZG9uJ3Qgd2FudCBpdCB0byBkbyB0aGlzLlxuICAgICAqXG4gICAgICogQnkgc2V0dGluZyB0aGlzIHZhbHVlIHRvIGB0cnVlYCwgUHJpc20gd2lsbCBub3QgYWRkIGl0cyBvd24gbGlzdGVuZXJzIHRvIHRoZSB3b3JrZXIuXG4gICAgICpcbiAgICAgKiBZb3Ugb2J2aW91c2x5IGhhdmUgdG8gY2hhbmdlIHRoaXMgdmFsdWUgYmVmb3JlIFByaXNtIGV4ZWN1dGVzLiBUbyBkbyB0aGlzLCB5b3UgY2FuIGFkZCBhblxuICAgICAqIGVtcHR5IFByaXNtIG9iamVjdCBpbnRvIHRoZSBnbG9iYWwgc2NvcGUgYmVmb3JlIGxvYWRpbmcgdGhlIFByaXNtIHNjcmlwdCBsaWtlIHRoaXM6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIHdpbmRvdy5QcmlzbSA9IHdpbmRvdy5QcmlzbSB8fCB7fTtcbiAgICAgKiBQcmlzbS5kaXNhYmxlV29ya2VyTWVzc2FnZUhhbmRsZXIgPSB0cnVlO1xuICAgICAqIC8vIExvYWQgUHJpc20ncyBzY3JpcHRcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQG1lbWJlcm9mIFByaXNtXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGRpc2FibGVXb3JrZXJNZXNzYWdlSGFuZGxlcjogX3NlbGYuUHJpc20gJiYgX3NlbGYuUHJpc20uZGlzYWJsZVdvcmtlck1lc3NhZ2VIYW5kbGVyLFxuICAgIC8qKlxuICAgICAqIEEgbmFtZXNwYWNlIGZvciB1dGlsaXR5IG1ldGhvZHMuXG4gICAgICpcbiAgICAgKiBBbGwgZnVuY3Rpb24gaW4gdGhpcyBuYW1lc3BhY2UgdGhhdCBhcmUgbm90IGV4cGxpY2l0bHkgbWFya2VkIGFzIF9wdWJsaWNfIGFyZSBmb3IgX19pbnRlcm5hbCB1c2Ugb25seV9fIGFuZCBtYXlcbiAgICAgKiBjaGFuZ2Ugb3IgZGlzYXBwZWFyIGF0IGFueSB0aW1lLlxuICAgICAqXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEBtZW1iZXJvZiBQcmlzbVxuICAgICAqL1xuICAgIHV0aWw6IHtcbiAgICAgIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKHRva2Vucykge1xuICAgICAgICBpZiAodG9rZW5zIGluc3RhbmNlb2YgVG9rZW4pIHtcbiAgICAgICAgICByZXR1cm4gbmV3IFRva2VuKHRva2Vucy50eXBlLCBlbmNvZGUodG9rZW5zLmNvbnRlbnQpLCB0b2tlbnMuYWxpYXMpO1xuICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodG9rZW5zKSkge1xuICAgICAgICAgIHJldHVybiB0b2tlbnMubWFwKGVuY29kZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHRva2Vucy5yZXBsYWNlKC8mL2csICcmYW1wOycpLnJlcGxhY2UoLzwvZywgJyZsdDsnKS5yZXBsYWNlKC9cXHUwMGEwL2csICcgJyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIFJldHVybnMgdGhlIG5hbWUgb2YgdGhlIHR5cGUgb2YgdGhlIGdpdmVuIHZhbHVlLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7YW55fSBvXG4gICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICAgICogQGV4YW1wbGVcbiAgICAgICAqIHR5cGUobnVsbCkgICAgICA9PT0gJ051bGwnXG4gICAgICAgKiB0eXBlKHVuZGVmaW5lZCkgPT09ICdVbmRlZmluZWQnXG4gICAgICAgKiB0eXBlKDEyMykgICAgICAgPT09ICdOdW1iZXInXG4gICAgICAgKiB0eXBlKCdmb28nKSAgICAgPT09ICdTdHJpbmcnXG4gICAgICAgKiB0eXBlKHRydWUpICAgICAgPT09ICdCb29sZWFuJ1xuICAgICAgICogdHlwZShbMSwgMl0pICAgID09PSAnQXJyYXknXG4gICAgICAgKiB0eXBlKHt9KSAgICAgICAgPT09ICdPYmplY3QnXG4gICAgICAgKiB0eXBlKFN0cmluZykgICAgPT09ICdGdW5jdGlvbidcbiAgICAgICAqIHR5cGUoL2FiYysvKSAgICA9PT0gJ1JlZ0V4cCdcbiAgICAgICAqL1xuICAgICAgdHlwZTogZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBSZXR1cm5zIGEgdW5pcXVlIG51bWJlciBmb3IgdGhlIGdpdmVuIG9iamVjdC4gTGF0ZXIgY2FsbHMgd2lsbCBzdGlsbCByZXR1cm4gdGhlIHNhbWUgbnVtYmVyLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAgICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICAgKi9cbiAgICAgIG9iaklkOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIGlmICghb2JqWydfX2lkJ10pIHtcbiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCAnX19pZCcsIHtcbiAgICAgICAgICAgIHZhbHVlOiArK3VuaXF1ZUlkXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9ialsnX19pZCddO1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogQ3JlYXRlcyBhIGRlZXAgY2xvbmUgb2YgdGhlIGdpdmVuIG9iamVjdC5cbiAgICAgICAqXG4gICAgICAgKiBUaGUgbWFpbiBpbnRlbmRlZCB1c2Ugb2YgdGhpcyBmdW5jdGlvbiBpcyB0byBjbG9uZSBsYW5ndWFnZSBkZWZpbml0aW9ucy5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge1R9IG9cbiAgICAgICAqIEBwYXJhbSB7UmVjb3JkPG51bWJlciwgYW55Pn0gW3Zpc2l0ZWRdXG4gICAgICAgKiBAcmV0dXJucyB7VH1cbiAgICAgICAqIEB0ZW1wbGF0ZSBUXG4gICAgICAgKi9cbiAgICAgIGNsb25lOiBmdW5jdGlvbiBkZWVwQ2xvbmUobywgdmlzaXRlZCkge1xuICAgICAgICB2aXNpdGVkID0gdmlzaXRlZCB8fCB7fTtcbiAgICAgICAgdmFyIGNsb25lO1xuICAgICAgICB2YXIgaWQ7XG4gICAgICAgIHN3aXRjaCAoXy51dGlsLnR5cGUobykpIHtcbiAgICAgICAgICBjYXNlICdPYmplY3QnOlxuICAgICAgICAgICAgaWQgPSBfLnV0aWwub2JqSWQobyk7XG4gICAgICAgICAgICBpZiAodmlzaXRlZFtpZF0pIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHZpc2l0ZWRbaWRdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xvbmUgPSAvKiogQHR5cGUge1JlY29yZDxzdHJpbmcsIGFueT59ICove307XG4gICAgICAgICAgICB2aXNpdGVkW2lkXSA9IGNsb25lO1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIG8pIHtcbiAgICAgICAgICAgICAgaWYgKG8uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgIGNsb25lW2tleV0gPSBkZWVwQ2xvbmUob1trZXldLCB2aXNpdGVkKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7YW55fSAqL2Nsb25lO1xuICAgICAgICAgIGNhc2UgJ0FycmF5JzpcbiAgICAgICAgICAgIGlkID0gXy51dGlsLm9iaklkKG8pO1xuICAgICAgICAgICAgaWYgKHZpc2l0ZWRbaWRdKSB7XG4gICAgICAgICAgICAgIHJldHVybiB2aXNpdGVkW2lkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsb25lID0gW107XG4gICAgICAgICAgICB2aXNpdGVkW2lkXSA9IGNsb25lO1xuICAgICAgICAgICAgKCAvKiogQHR5cGUge0FycmF5fSAqLyAvKiogQHR5cGUge2FueX0gKi9vKS5mb3JFYWNoKGZ1bmN0aW9uICh2LCBpKSB7XG4gICAgICAgICAgICAgIGNsb25lW2ldID0gZGVlcENsb25lKHYsIHZpc2l0ZWQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHthbnl9ICovY2xvbmU7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBvO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBSZXR1cm5zIHRoZSBQcmlzbSBsYW5ndWFnZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudCBzZXQgYnkgYSBgbGFuZ3VhZ2UteHh4eGAgb3IgYGxhbmcteHh4eGAgY2xhc3MuXG4gICAgICAgKlxuICAgICAgICogSWYgbm8gbGFuZ3VhZ2UgaXMgc2V0IGZvciB0aGUgZWxlbWVudCBvciB0aGUgZWxlbWVudCBpcyBgbnVsbGAgb3IgYHVuZGVmaW5lZGAsIGBub25lYCB3aWxsIGJlIHJldHVybmVkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICAgICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAgICAqL1xuICAgICAgZ2V0TGFuZ3VhZ2U6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHdoaWxlIChlbGVtZW50KSB7XG4gICAgICAgICAgdmFyIG0gPSBsYW5nLmV4ZWMoZWxlbWVudC5jbGFzc05hbWUpO1xuICAgICAgICAgIGlmIChtKSB7XG4gICAgICAgICAgICByZXR1cm4gbVsxXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnbm9uZSc7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBTZXRzIHRoZSBQcmlzbSBgbGFuZ3VhZ2UteHh4eGAgY2xhc3Mgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50XG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbGFuZ3VhZ2VcbiAgICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAgICovXG4gICAgICBzZXRMYW5ndWFnZTogZnVuY3Rpb24gKGVsZW1lbnQsIGxhbmd1YWdlKSB7XG4gICAgICAgIC8vIHJlbW92ZSBhbGwgYGxhbmd1YWdlLXh4eHhgIGNsYXNzZXNcbiAgICAgICAgLy8gKHRoaXMgbWlnaHQgbGVhdmUgYmVoaW5kIGEgbGVhZGluZyBzcGFjZSlcbiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTmFtZS5yZXBsYWNlKFJlZ0V4cChsYW5nLCAnZ2knKSwgJycpO1xuXG4gICAgICAgIC8vIGFkZCB0aGUgbmV3IGBsYW5ndWFnZS14eHh4YCBjbGFzc1xuICAgICAgICAvLyAodXNpbmcgYGNsYXNzTGlzdGAgd2lsbCBhdXRvbWF0aWNhbGx5IGNsZWFuIHVwIHNwYWNlcyBmb3IgdXMpXG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbGFuZ3VhZ2UtJyArIGxhbmd1YWdlKTtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIFJldHVybnMgdGhlIHNjcmlwdCBlbGVtZW50IHRoYXQgaXMgY3VycmVudGx5IGV4ZWN1dGluZy5cbiAgICAgICAqXG4gICAgICAgKiBUaGlzIGRvZXMgX19ub3RfXyB3b3JrIGZvciBsaW5lIHNjcmlwdCBlbGVtZW50LlxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm5zIHtIVE1MU2NyaXB0RWxlbWVudCB8IG51bGx9XG4gICAgICAgKi9cbiAgICAgIGN1cnJlbnRTY3JpcHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJ2N1cnJlbnRTY3JpcHQnIGluIGRvY3VtZW50ICYmIDEgPCAyIC8qIGhhY2sgdG8gdHJpcCBUUycgZmxvdyBhbmFseXNpcyAqLykge1xuICAgICAgICAgIHJldHVybiAvKiogQHR5cGUge2FueX0gKi9kb2N1bWVudC5jdXJyZW50U2NyaXB0O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSUUxMSB3b3JrYXJvdW5kXG4gICAgICAgIC8vIHdlJ2xsIGdldCB0aGUgc3JjIG9mIHRoZSBjdXJyZW50IHNjcmlwdCBieSBwYXJzaW5nIElFMTEncyBlcnJvciBzdGFjayB0cmFjZVxuICAgICAgICAvLyB0aGlzIHdpbGwgbm90IHdvcmsgZm9yIGlubGluZSBzY3JpcHRzXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgLy8gR2V0IGZpbGUgc3JjIHVybCBmcm9tIHN0YWNrLiBTcGVjaWZpY2FsbHkgd29ya3Mgd2l0aCB0aGUgZm9ybWF0IG9mIHN0YWNrIHRyYWNlcyBpbiBJRS5cbiAgICAgICAgICAvLyBBIHN0YWNrIHdpbGwgbG9vayBsaWtlIHRoaXM6XG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyBFcnJvclxuICAgICAgICAgIC8vICAgIGF0IF8udXRpbC5jdXJyZW50U2NyaXB0IChodHRwOi8vbG9jYWxob3N0L2NvbXBvbmVudHMvcHJpc20tY29yZS5qczoxMTk6NSlcbiAgICAgICAgICAvLyAgICBhdCBHbG9iYWwgY29kZSAoaHR0cDovL2xvY2FsaG9zdC9jb21wb25lbnRzL3ByaXNtLWNvcmUuanM6NjA2OjEpXG5cbiAgICAgICAgICB2YXIgc3JjID0gKC9hdCBbXihcXHJcXG5dKlxcKCguKik6W146XSs6W146XStcXCkkL2kuZXhlYyhlcnIuc3RhY2spIHx8IFtdKVsxXTtcbiAgICAgICAgICBpZiAoc3JjKSB7XG4gICAgICAgICAgICB2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gc2NyaXB0cykge1xuICAgICAgICAgICAgICBpZiAoc2NyaXB0c1tpXS5zcmMgPT0gc3JjKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNjcmlwdHNbaV07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIFJldHVybnMgd2hldGhlciBhIGdpdmVuIGNsYXNzIGlzIGFjdGl2ZSBmb3IgYGVsZW1lbnRgLlxuICAgICAgICpcbiAgICAgICAqIFRoZSBjbGFzcyBjYW4gYmUgYWN0aXZhdGVkIGlmIGBlbGVtZW50YCBvciBvbmUgb2YgaXRzIGFuY2VzdG9ycyBoYXMgdGhlIGdpdmVuIGNsYXNzIGFuZCBpdCBjYW4gYmUgZGVhY3RpdmF0ZWRcbiAgICAgICAqIGlmIGBlbGVtZW50YCBvciBvbmUgb2YgaXRzIGFuY2VzdG9ycyBoYXMgdGhlIG5lZ2F0ZWQgdmVyc2lvbiBvZiB0aGUgZ2l2ZW4gY2xhc3MuIFRoZSBfbmVnYXRlZCB2ZXJzaW9uXyBvZiB0aGVcbiAgICAgICAqIGdpdmVuIGNsYXNzIGlzIGp1c3QgdGhlIGdpdmVuIGNsYXNzIHdpdGggYSBgbm8tYCBwcmVmaXguXG4gICAgICAgKlxuICAgICAgICogV2hldGhlciB0aGUgY2xhc3MgaXMgYWN0aXZlIGlzIGRldGVybWluZWQgYnkgdGhlIGNsb3Nlc3QgYW5jZXN0b3Igb2YgYGVsZW1lbnRgICh3aGVyZSBgZWxlbWVudGAgaXRzZWxmIGlzXG4gICAgICAgKiBjbG9zZXN0IGFuY2VzdG9yKSB0aGF0IGhhcyB0aGUgZ2l2ZW4gY2xhc3Mgb3IgdGhlIG5lZ2F0ZWQgdmVyc2lvbiBvZiBpdC4gSWYgbmVpdGhlciBgZWxlbWVudGAgbm9yIGFueSBvZiBpdHNcbiAgICAgICAqIGFuY2VzdG9ycyBoYXZlIHRoZSBnaXZlbiBjbGFzcyBvciB0aGUgbmVnYXRlZCB2ZXJzaW9uIG9mIGl0LCB0aGVuIHRoZSBkZWZhdWx0IGFjdGl2YXRpb24gd2lsbCBiZSByZXR1cm5lZC5cbiAgICAgICAqXG4gICAgICAgKiBJbiB0aGUgcGFyYWRveGljYWwgc2l0dWF0aW9uIHdoZXJlIHRoZSBjbG9zZXN0IGFuY2VzdG9yIGNvbnRhaW5zIF9fYm90aF9fIHRoZSBnaXZlbiBjbGFzcyBhbmQgdGhlIG5lZ2F0ZWRcbiAgICAgICAqIHZlcnNpb24gb2YgaXQsIHRoZSBjbGFzcyBpcyBjb25zaWRlcmVkIGFjdGl2ZS5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWVcbiAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2RlZmF1bHRBY3RpdmF0aW9uPWZhbHNlXVxuICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICAgKi9cbiAgICAgIGlzQWN0aXZlOiBmdW5jdGlvbiAoZWxlbWVudCwgY2xhc3NOYW1lLCBkZWZhdWx0QWN0aXZhdGlvbikge1xuICAgICAgICB2YXIgbm8gPSAnbm8tJyArIGNsYXNzTmFtZTtcbiAgICAgICAgd2hpbGUgKGVsZW1lbnQpIHtcbiAgICAgICAgICB2YXIgY2xhc3NMaXN0ID0gZWxlbWVudC5jbGFzc0xpc3Q7XG4gICAgICAgICAgaWYgKGNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNsYXNzTGlzdC5jb250YWlucyhubykpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gISFkZWZhdWx0QWN0aXZhdGlvbjtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFRoaXMgbmFtZXNwYWNlIGNvbnRhaW5zIGFsbCBjdXJyZW50bHkgbG9hZGVkIGxhbmd1YWdlcyBhbmQgdGhlIHNvbWUgaGVscGVyIGZ1bmN0aW9ucyB0byBjcmVhdGUgYW5kIG1vZGlmeSBsYW5ndWFnZXMuXG4gICAgICpcbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQG1lbWJlcm9mIFByaXNtXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGxhbmd1YWdlczoge1xuICAgICAgLyoqXG4gICAgICAgKiBUaGUgZ3JhbW1hciBmb3IgcGxhaW4sIHVuZm9ybWF0dGVkIHRleHQuXG4gICAgICAgKi9cbiAgICAgIHBsYWluOiBwbGFpblRleHRHcmFtbWFyLFxuICAgICAgcGxhaW50ZXh0OiBwbGFpblRleHRHcmFtbWFyLFxuICAgICAgdGV4dDogcGxhaW5UZXh0R3JhbW1hcixcbiAgICAgIHR4dDogcGxhaW5UZXh0R3JhbW1hcixcbiAgICAgIC8qKlxuICAgICAgICogQ3JlYXRlcyBhIGRlZXAgY29weSBvZiB0aGUgbGFuZ3VhZ2Ugd2l0aCB0aGUgZ2l2ZW4gaWQgYW5kIGFwcGVuZHMgdGhlIGdpdmVuIHRva2Vucy5cbiAgICAgICAqXG4gICAgICAgKiBJZiBhIHRva2VuIGluIGByZWRlZmAgYWxzbyBhcHBlYXJzIGluIHRoZSBjb3BpZWQgbGFuZ3VhZ2UsIHRoZW4gdGhlIGV4aXN0aW5nIHRva2VuIGluIHRoZSBjb3BpZWQgbGFuZ3VhZ2VcbiAgICAgICAqIHdpbGwgYmUgb3ZlcndyaXR0ZW4gYXQgaXRzIG9yaWdpbmFsIHBvc2l0aW9uLlxuICAgICAgICpcbiAgICAgICAqICMjIEJlc3QgcHJhY3RpY2VzXG4gICAgICAgKlxuICAgICAgICogU2luY2UgdGhlIHBvc2l0aW9uIG9mIG92ZXJ3cml0aW5nIHRva2VucyAodG9rZW4gaW4gYHJlZGVmYCB0aGF0IG92ZXJ3cml0ZSB0b2tlbnMgaW4gdGhlIGNvcGllZCBsYW5ndWFnZSlcbiAgICAgICAqIGRvZXNuJ3QgbWF0dGVyLCB0aGV5IGNhbiB0ZWNobmljYWxseSBiZSBpbiBhbnkgb3JkZXIuIEhvd2V2ZXIsIHRoaXMgY2FuIGJlIGNvbmZ1c2luZyB0byBvdGhlcnMgdGhhdCB0cnlpbmcgdG9cbiAgICAgICAqIHVuZGVyc3RhbmQgdGhlIGxhbmd1YWdlIGRlZmluaXRpb24gYmVjYXVzZSwgbm9ybWFsbHksIHRoZSBvcmRlciBvZiB0b2tlbnMgbWF0dGVycyBpbiBQcmlzbSBncmFtbWFycy5cbiAgICAgICAqXG4gICAgICAgKiBUaGVyZWZvcmUsIGl0IGlzIGVuY291cmFnZWQgdG8gb3JkZXIgb3ZlcndyaXRpbmcgdG9rZW5zIGFjY29yZGluZyB0byB0aGUgcG9zaXRpb25zIG9mIHRoZSBvdmVyd3JpdHRlbiB0b2tlbnMuXG4gICAgICAgKiBGdXJ0aGVybW9yZSwgYWxsIG5vbi1vdmVyd3JpdGluZyB0b2tlbnMgc2hvdWxkIGJlIHBsYWNlZCBhZnRlciB0aGUgb3ZlcndyaXRpbmcgb25lcy5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgVGhlIGlkIG9mIHRoZSBsYW5ndWFnZSB0byBleHRlbmQuIFRoaXMgaGFzIHRvIGJlIGEga2V5IGluIGBQcmlzbS5sYW5ndWFnZXNgLlxuICAgICAgICogQHBhcmFtIHtHcmFtbWFyfSByZWRlZiBUaGUgbmV3IHRva2VucyB0byBhcHBlbmQuXG4gICAgICAgKiBAcmV0dXJucyB7R3JhbW1hcn0gVGhlIG5ldyBsYW5ndWFnZSBjcmVhdGVkLlxuICAgICAgICogQHB1YmxpY1xuICAgICAgICogQGV4YW1wbGVcbiAgICAgICAqIFByaXNtLmxhbmd1YWdlc1snY3NzLXdpdGgtY29sb3JzJ10gPSBQcmlzbS5sYW5ndWFnZXMuZXh0ZW5kKCdjc3MnLCB7XG4gICAgICAgKiAgICAgLy8gUHJpc20ubGFuZ3VhZ2VzLmNzcyBhbHJlYWR5IGhhcyBhICdjb21tZW50JyB0b2tlbiwgc28gdGhpcyB0b2tlbiB3aWxsIG92ZXJ3cml0ZSBDU1MnICdjb21tZW50JyB0b2tlblxuICAgICAgICogICAgIC8vIGF0IGl0cyBvcmlnaW5hbCBwb3NpdGlvblxuICAgICAgICogICAgICdjb21tZW50JzogeyAuLi4gfSxcbiAgICAgICAqICAgICAvLyBDU1MgZG9lc24ndCBoYXZlIGEgJ2NvbG9yJyB0b2tlbiwgc28gdGhpcyB0b2tlbiB3aWxsIGJlIGFwcGVuZGVkXG4gICAgICAgKiAgICAgJ2NvbG9yJzogL1xcYig/OnJlZHxncmVlbnxibHVlKVxcYi9cbiAgICAgICAqIH0pO1xuICAgICAgICovXG4gICAgICBleHRlbmQ6IGZ1bmN0aW9uIChpZCwgcmVkZWYpIHtcbiAgICAgICAgdmFyIGxhbmcgPSBfLnV0aWwuY2xvbmUoXy5sYW5ndWFnZXNbaWRdKTtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHJlZGVmKSB7XG4gICAgICAgICAgbGFuZ1trZXldID0gcmVkZWZba2V5XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGFuZztcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIEluc2VydHMgdG9rZW5zIF9iZWZvcmVfIGFub3RoZXIgdG9rZW4gaW4gYSBsYW5ndWFnZSBkZWZpbml0aW9uIG9yIGFueSBvdGhlciBncmFtbWFyLlxuICAgICAgICpcbiAgICAgICAqICMjIFVzYWdlXG4gICAgICAgKlxuICAgICAgICogVGhpcyBoZWxwZXIgbWV0aG9kIG1ha2VzIGl0IGVhc3kgdG8gbW9kaWZ5IGV4aXN0aW5nIGxhbmd1YWdlcy4gRm9yIGV4YW1wbGUsIHRoZSBDU1MgbGFuZ3VhZ2UgZGVmaW5pdGlvblxuICAgICAgICogbm90IG9ubHkgZGVmaW5lcyBDU1MgaGlnaGxpZ2h0aW5nIGZvciBDU1MgZG9jdW1lbnRzLCBidXQgYWxzbyBuZWVkcyB0byBkZWZpbmUgaGlnaGxpZ2h0aW5nIGZvciBDU1MgZW1iZWRkZWRcbiAgICAgICAqIGluIEhUTUwgdGhyb3VnaCBgPHN0eWxlPmAgZWxlbWVudHMuIFRvIGRvIHRoaXMsIGl0IG5lZWRzIHRvIG1vZGlmeSBgUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cGAgYW5kIGFkZCB0aGVcbiAgICAgICAqIGFwcHJvcHJpYXRlIHRva2Vucy4gSG93ZXZlciwgYFByaXNtLmxhbmd1YWdlcy5tYXJrdXBgIGlzIGEgcmVndWxhciBKYXZhU2NyaXB0IG9iamVjdCBsaXRlcmFsLCBzbyBpZiB5b3UgZG9cbiAgICAgICAqIHRoaXM6XG4gICAgICAgKlxuICAgICAgICogYGBganNcbiAgICAgICAqIFByaXNtLmxhbmd1YWdlcy5tYXJrdXAuc3R5bGUgPSB7XG4gICAgICAgKiAgICAgLy8gdG9rZW5cbiAgICAgICAqIH07XG4gICAgICAgKiBgYGBcbiAgICAgICAqXG4gICAgICAgKiB0aGVuIHRoZSBgc3R5bGVgIHRva2VuIHdpbGwgYmUgYWRkZWQgKGFuZCBwcm9jZXNzZWQpIGF0IHRoZSBlbmQuIGBpbnNlcnRCZWZvcmVgIGFsbG93cyB5b3UgdG8gaW5zZXJ0IHRva2Vuc1xuICAgICAgICogYmVmb3JlIGV4aXN0aW5nIHRva2Vucy4gRm9yIHRoZSBDU1MgZXhhbXBsZSBhYm92ZSwgeW91IHdvdWxkIHVzZSBpdCBsaWtlIHRoaXM6XG4gICAgICAgKlxuICAgICAgICogYGBganNcbiAgICAgICAqIFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ21hcmt1cCcsICdjZGF0YScsIHtcbiAgICAgICAqICAgICAnc3R5bGUnOiB7XG4gICAgICAgKiAgICAgICAgIC8vIHRva2VuXG4gICAgICAgKiAgICAgfVxuICAgICAgICogfSk7XG4gICAgICAgKiBgYGBcbiAgICAgICAqXG4gICAgICAgKiAjIyBTcGVjaWFsIGNhc2VzXG4gICAgICAgKlxuICAgICAgICogSWYgdGhlIGdyYW1tYXJzIG9mIGBpbnNpZGVgIGFuZCBgaW5zZXJ0YCBoYXZlIHRva2VucyB3aXRoIHRoZSBzYW1lIG5hbWUsIHRoZSB0b2tlbnMgaW4gYGluc2lkZWAncyBncmFtbWFyXG4gICAgICAgKiB3aWxsIGJlIGlnbm9yZWQuXG4gICAgICAgKlxuICAgICAgICogVGhpcyBiZWhhdmlvciBjYW4gYmUgdXNlZCB0byBpbnNlcnQgdG9rZW5zIGFmdGVyIGBiZWZvcmVgOlxuICAgICAgICpcbiAgICAgICAqIGBgYGpzXG4gICAgICAgKiBQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdtYXJrdXAnLCAnY29tbWVudCcsIHtcbiAgICAgICAqICAgICAnY29tbWVudCc6IFByaXNtLmxhbmd1YWdlcy5tYXJrdXAuY29tbWVudCxcbiAgICAgICAqICAgICAvLyB0b2tlbnMgYWZ0ZXIgJ2NvbW1lbnQnXG4gICAgICAgKiB9KTtcbiAgICAgICAqIGBgYFxuICAgICAgICpcbiAgICAgICAqICMjIExpbWl0YXRpb25zXG4gICAgICAgKlxuICAgICAgICogVGhlIG1haW4gcHJvYmxlbSBgaW5zZXJ0QmVmb3JlYCBoYXMgdG8gc29sdmUgaXMgaXRlcmF0aW9uIG9yZGVyLiBTaW5jZSBFUzIwMTUsIHRoZSBpdGVyYXRpb24gb3JkZXIgZm9yIG9iamVjdFxuICAgICAgICogcHJvcGVydGllcyBpcyBndWFyYW50ZWVkIHRvIGJlIHRoZSBpbnNlcnRpb24gb3JkZXIgKGV4Y2VwdCBmb3IgaW50ZWdlciBrZXlzKSBidXQgc29tZSBicm93c2VycyBiZWhhdmVcbiAgICAgICAqIGRpZmZlcmVudGx5IHdoZW4ga2V5cyBhcmUgZGVsZXRlZCBhbmQgcmUtaW5zZXJ0ZWQuIFNvIGBpbnNlcnRCZWZvcmVgIGNhbid0IGJlIGltcGxlbWVudGVkIGJ5IHRlbXBvcmFyaWx5XG4gICAgICAgKiBkZWxldGluZyBwcm9wZXJ0aWVzIHdoaWNoIGlzIG5lY2Vzc2FyeSB0byBpbnNlcnQgYXQgYXJiaXRyYXJ5IHBvc2l0aW9ucy5cbiAgICAgICAqXG4gICAgICAgKiBUbyBzb2x2ZSB0aGlzIHByb2JsZW0sIGBpbnNlcnRCZWZvcmVgIGRvZXNuJ3QgYWN0dWFsbHkgaW5zZXJ0IHRoZSBnaXZlbiB0b2tlbnMgaW50byB0aGUgdGFyZ2V0IG9iamVjdC5cbiAgICAgICAqIEluc3RlYWQsIGl0IHdpbGwgY3JlYXRlIGEgbmV3IG9iamVjdCBhbmQgcmVwbGFjZSBhbGwgcmVmZXJlbmNlcyB0byB0aGUgdGFyZ2V0IG9iamVjdCB3aXRoIHRoZSBuZXcgb25lLiBUaGlzXG4gICAgICAgKiBjYW4gYmUgZG9uZSB3aXRob3V0IHRlbXBvcmFyaWx5IGRlbGV0aW5nIHByb3BlcnRpZXMsIHNvIHRoZSBpdGVyYXRpb24gb3JkZXIgaXMgd2VsbC1kZWZpbmVkLlxuICAgICAgICpcbiAgICAgICAqIEhvd2V2ZXIsIG9ubHkgcmVmZXJlbmNlcyB0aGF0IGNhbiBiZSByZWFjaGVkIGZyb20gYFByaXNtLmxhbmd1YWdlc2Agb3IgYGluc2VydGAgd2lsbCBiZSByZXBsYWNlZC4gSS5lLiBpZlxuICAgICAgICogeW91IGhvbGQgdGhlIHRhcmdldCBvYmplY3QgaW4gYSB2YXJpYWJsZSwgdGhlbiB0aGUgdmFsdWUgb2YgdGhlIHZhcmlhYmxlIHdpbGwgbm90IGNoYW5nZS5cbiAgICAgICAqXG4gICAgICAgKiBgYGBqc1xuICAgICAgICogdmFyIG9sZE1hcmt1cCA9IFByaXNtLmxhbmd1YWdlcy5tYXJrdXA7XG4gICAgICAgKiB2YXIgbmV3TWFya3VwID0gUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnbWFya3VwJywgJ2NvbW1lbnQnLCB7IC4uLiB9KTtcbiAgICAgICAqXG4gICAgICAgKiBhc3NlcnQob2xkTWFya3VwICE9PSBQcmlzbS5sYW5ndWFnZXMubWFya3VwKTtcbiAgICAgICAqIGFzc2VydChuZXdNYXJrdXAgPT09IFByaXNtLmxhbmd1YWdlcy5tYXJrdXApO1xuICAgICAgICogYGBgXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGluc2lkZSBUaGUgcHJvcGVydHkgb2YgYHJvb3RgIChlLmcuIGEgbGFuZ3VhZ2UgaWQgaW4gYFByaXNtLmxhbmd1YWdlc2ApIHRoYXQgY29udGFpbnMgdGhlXG4gICAgICAgKiBvYmplY3QgdG8gYmUgbW9kaWZpZWQuXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gYmVmb3JlIFRoZSBrZXkgdG8gaW5zZXJ0IGJlZm9yZS5cbiAgICAgICAqIEBwYXJhbSB7R3JhbW1hcn0gaW5zZXJ0IEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBrZXktdmFsdWUgcGFpcnMgdG8gYmUgaW5zZXJ0ZWQuXG4gICAgICAgKiBAcGFyYW0ge09iamVjdDxzdHJpbmcsIGFueT59IFtyb290XSBUaGUgb2JqZWN0IGNvbnRhaW5pbmcgYGluc2lkZWAsIGkuZS4gdGhlIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZVxuICAgICAgICogb2JqZWN0IHRvIGJlIG1vZGlmaWVkLlxuICAgICAgICpcbiAgICAgICAqIERlZmF1bHRzIHRvIGBQcmlzbS5sYW5ndWFnZXNgLlxuICAgICAgICogQHJldHVybnMge0dyYW1tYXJ9IFRoZSBuZXcgZ3JhbW1hciBvYmplY3QuXG4gICAgICAgKiBAcHVibGljXG4gICAgICAgKi9cbiAgICAgIGluc2VydEJlZm9yZTogZnVuY3Rpb24gKGluc2lkZSwgYmVmb3JlLCBpbnNlcnQsIHJvb3QpIHtcbiAgICAgICAgcm9vdCA9IHJvb3QgfHwgKCAvKiogQHR5cGUge2FueX0gKi9fLmxhbmd1YWdlcyk7XG4gICAgICAgIHZhciBncmFtbWFyID0gcm9vdFtpbnNpZGVdO1xuICAgICAgICAvKiogQHR5cGUge0dyYW1tYXJ9ICovXG4gICAgICAgIHZhciByZXQgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgdG9rZW4gaW4gZ3JhbW1hcikge1xuICAgICAgICAgIGlmIChncmFtbWFyLmhhc093blByb3BlcnR5KHRva2VuKSkge1xuICAgICAgICAgICAgaWYgKHRva2VuID09IGJlZm9yZSkge1xuICAgICAgICAgICAgICBmb3IgKHZhciBuZXdUb2tlbiBpbiBpbnNlcnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5zZXJ0Lmhhc093blByb3BlcnR5KG5ld1Rva2VuKSkge1xuICAgICAgICAgICAgICAgICAgcmV0W25ld1Rva2VuXSA9IGluc2VydFtuZXdUb2tlbl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIERvIG5vdCBpbnNlcnQgdG9rZW4gd2hpY2ggYWxzbyBvY2N1ciBpbiBpbnNlcnQuIFNlZSAjMTUyNVxuICAgICAgICAgICAgaWYgKCFpbnNlcnQuaGFzT3duUHJvcGVydHkodG9rZW4pKSB7XG4gICAgICAgICAgICAgIHJldFt0b2tlbl0gPSBncmFtbWFyW3Rva2VuXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG9sZCA9IHJvb3RbaW5zaWRlXTtcbiAgICAgICAgcm9vdFtpbnNpZGVdID0gcmV0O1xuXG4gICAgICAgIC8vIFVwZGF0ZSByZWZlcmVuY2VzIGluIG90aGVyIGxhbmd1YWdlIGRlZmluaXRpb25zXG4gICAgICAgIF8ubGFuZ3VhZ2VzLkRGUyhfLmxhbmd1YWdlcywgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICBpZiAodmFsdWUgPT09IG9sZCAmJiBrZXkgIT0gaW5zaWRlKSB7XG4gICAgICAgICAgICB0aGlzW2tleV0gPSByZXQ7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgIH0sXG4gICAgICAvLyBUcmF2ZXJzZSBhIGxhbmd1YWdlIGRlZmluaXRpb24gd2l0aCBEZXB0aCBGaXJzdCBTZWFyY2hcbiAgICAgIERGUzogZnVuY3Rpb24gREZTKG8sIGNhbGxiYWNrLCB0eXBlLCB2aXNpdGVkKSB7XG4gICAgICAgIHZpc2l0ZWQgPSB2aXNpdGVkIHx8IHt9O1xuICAgICAgICB2YXIgb2JqSWQgPSBfLnV0aWwub2JqSWQ7XG4gICAgICAgIGZvciAodmFyIGkgaW4gbykge1xuICAgICAgICAgIGlmIChvLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgICBjYWxsYmFjay5jYWxsKG8sIGksIG9baV0sIHR5cGUgfHwgaSk7XG4gICAgICAgICAgICB2YXIgcHJvcGVydHkgPSBvW2ldO1xuICAgICAgICAgICAgdmFyIHByb3BlcnR5VHlwZSA9IF8udXRpbC50eXBlKHByb3BlcnR5KTtcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0eVR5cGUgPT09ICdPYmplY3QnICYmICF2aXNpdGVkW29iaklkKHByb3BlcnR5KV0pIHtcbiAgICAgICAgICAgICAgdmlzaXRlZFtvYmpJZChwcm9wZXJ0eSldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgREZTKHByb3BlcnR5LCBjYWxsYmFjaywgbnVsbCwgdmlzaXRlZCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHByb3BlcnR5VHlwZSA9PT0gJ0FycmF5JyAmJiAhdmlzaXRlZFtvYmpJZChwcm9wZXJ0eSldKSB7XG4gICAgICAgICAgICAgIHZpc2l0ZWRbb2JqSWQocHJvcGVydHkpXSA9IHRydWU7XG4gICAgICAgICAgICAgIERGUyhwcm9wZXJ0eSwgY2FsbGJhY2ssIGksIHZpc2l0ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgcGx1Z2luczoge30sXG4gICAgLyoqXG4gICAgICogVGhpcyBpcyB0aGUgbW9zdCBoaWdoLWxldmVsIGZ1bmN0aW9uIGluIFByaXNt4oCZcyBBUEkuXG4gICAgICogSXQgZmV0Y2hlcyBhbGwgdGhlIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIGAubGFuZ3VhZ2UteHh4eGAgY2xhc3MgYW5kIHRoZW4gY2FsbHMge0BsaW5rIFByaXNtLmhpZ2hsaWdodEVsZW1lbnR9IG9uXG4gICAgICogZWFjaCBvbmUgb2YgdGhlbS5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byBgUHJpc20uaGlnaGxpZ2h0QWxsVW5kZXIoZG9jdW1lbnQsIGFzeW5jLCBjYWxsYmFjaylgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbYXN5bmM9ZmFsc2VdIFNhbWUgYXMgaW4ge0BsaW5rIFByaXNtLmhpZ2hsaWdodEFsbFVuZGVyfS5cbiAgICAgKiBAcGFyYW0ge0hpZ2hsaWdodENhbGxiYWNrfSBbY2FsbGJhY2tdIFNhbWUgYXMgaW4ge0BsaW5rIFByaXNtLmhpZ2hsaWdodEFsbFVuZGVyfS5cbiAgICAgKiBAbWVtYmVyb2YgUHJpc21cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgaGlnaGxpZ2h0QWxsOiBmdW5jdGlvbiAoYXN5bmMsIGNhbGxiYWNrKSB7XG4gICAgICBfLmhpZ2hsaWdodEFsbFVuZGVyKGRvY3VtZW50LCBhc3luYywgY2FsbGJhY2spO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogRmV0Y2hlcyBhbGwgdGhlIGRlc2NlbmRhbnRzIG9mIGBjb250YWluZXJgIHRoYXQgaGF2ZSBhIGAubGFuZ3VhZ2UteHh4eGAgY2xhc3MgYW5kIHRoZW4gY2FsbHNcbiAgICAgKiB7QGxpbmsgUHJpc20uaGlnaGxpZ2h0RWxlbWVudH0gb24gZWFjaCBvbmUgb2YgdGhlbS5cbiAgICAgKlxuICAgICAqIFRoZSBmb2xsb3dpbmcgaG9va3Mgd2lsbCBiZSBydW46XG4gICAgICogMS4gYGJlZm9yZS1oaWdobGlnaHRhbGxgXG4gICAgICogMi4gYGJlZm9yZS1hbGwtZWxlbWVudHMtaGlnaGxpZ2h0YFxuICAgICAqIDMuIEFsbCBob29rcyBvZiB7QGxpbmsgUHJpc20uaGlnaGxpZ2h0RWxlbWVudH0gZm9yIGVhY2ggZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UGFyZW50Tm9kZX0gY29udGFpbmVyIFRoZSByb290IGVsZW1lbnQsIHdob3NlIGRlc2NlbmRhbnRzIHRoYXQgaGF2ZSBhIGAubGFuZ3VhZ2UteHh4eGAgY2xhc3Mgd2lsbCBiZSBoaWdobGlnaHRlZC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFthc3luYz1mYWxzZV0gV2hldGhlciBlYWNoIGVsZW1lbnQgaXMgdG8gYmUgaGlnaGxpZ2h0ZWQgYXN5bmNocm9ub3VzbHkgdXNpbmcgV2ViIFdvcmtlcnMuXG4gICAgICogQHBhcmFtIHtIaWdobGlnaHRDYWxsYmFja30gW2NhbGxiYWNrXSBBbiBvcHRpb25hbCBjYWxsYmFjayB0byBiZSBpbnZva2VkIG9uIGVhY2ggZWxlbWVudCBhZnRlciBpdHMgaGlnaGxpZ2h0aW5nIGlzIGRvbmUuXG4gICAgICogQG1lbWJlcm9mIFByaXNtXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGhpZ2hsaWdodEFsbFVuZGVyOiBmdW5jdGlvbiAoY29udGFpbmVyLCBhc3luYywgY2FsbGJhY2spIHtcbiAgICAgIHZhciBlbnYgPSB7XG4gICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayxcbiAgICAgICAgY29udGFpbmVyOiBjb250YWluZXIsXG4gICAgICAgIHNlbGVjdG9yOiAnY29kZVtjbGFzcyo9XCJsYW5ndWFnZS1cIl0sIFtjbGFzcyo9XCJsYW5ndWFnZS1cIl0gY29kZSwgY29kZVtjbGFzcyo9XCJsYW5nLVwiXSwgW2NsYXNzKj1cImxhbmctXCJdIGNvZGUnXG4gICAgICB9O1xuICAgICAgXy5ob29rcy5ydW4oJ2JlZm9yZS1oaWdobGlnaHRhbGwnLCBlbnYpO1xuICAgICAgZW52LmVsZW1lbnRzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGVudi5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbChlbnYuc2VsZWN0b3IpKTtcbiAgICAgIF8uaG9va3MucnVuKCdiZWZvcmUtYWxsLWVsZW1lbnRzLWhpZ2hsaWdodCcsIGVudik7XG4gICAgICBmb3IgKHZhciBpID0gMCwgZWxlbWVudDsgZWxlbWVudCA9IGVudi5lbGVtZW50c1tpKytdOykge1xuICAgICAgICBfLmhpZ2hsaWdodEVsZW1lbnQoZWxlbWVudCwgYXN5bmMgPT09IHRydWUsIGVudi5jYWxsYmFjayk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBIaWdobGlnaHRzIHRoZSBjb2RlIGluc2lkZSBhIHNpbmdsZSBlbGVtZW50LlxuICAgICAqXG4gICAgICogVGhlIGZvbGxvd2luZyBob29rcyB3aWxsIGJlIHJ1bjpcbiAgICAgKiAxLiBgYmVmb3JlLXNhbml0eS1jaGVja2BcbiAgICAgKiAyLiBgYmVmb3JlLWhpZ2hsaWdodGBcbiAgICAgKiAzLiBBbGwgaG9va3Mgb2Yge0BsaW5rIFByaXNtLmhpZ2hsaWdodH0uIFRoZXNlIGhvb2tzIHdpbGwgYmUgcnVuIGJ5IGFuIGFzeW5jaHJvbm91cyB3b3JrZXIgaWYgYGFzeW5jYCBpcyBgdHJ1ZWAuXG4gICAgICogNC4gYGJlZm9yZS1pbnNlcnRgXG4gICAgICogNS4gYGFmdGVyLWhpZ2hsaWdodGBcbiAgICAgKiA2LiBgY29tcGxldGVgXG4gICAgICpcbiAgICAgKiBTb21lIHRoZSBhYm92ZSBob29rcyB3aWxsIGJlIHNraXBwZWQgaWYgdGhlIGVsZW1lbnQgZG9lc24ndCBjb250YWluIGFueSB0ZXh0IG9yIHRoZXJlIGlzIG5vIGdyYW1tYXIgbG9hZGVkIGZvclxuICAgICAqIHRoZSBlbGVtZW50J3MgbGFuZ3VhZ2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgVGhlIGVsZW1lbnQgY29udGFpbmluZyB0aGUgY29kZS5cbiAgICAgKiBJdCBtdXN0IGhhdmUgYSBjbGFzcyBvZiBgbGFuZ3VhZ2UteHh4eGAgdG8gYmUgcHJvY2Vzc2VkLCB3aGVyZSBgeHh4eGAgaXMgYSB2YWxpZCBsYW5ndWFnZSBpZGVudGlmaWVyLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2FzeW5jPWZhbHNlXSBXaGV0aGVyIHRoZSBlbGVtZW50IGlzIHRvIGJlIGhpZ2hsaWdodGVkIGFzeW5jaHJvbm91c2x5IHVzaW5nIFdlYiBXb3JrZXJzXG4gICAgICogdG8gaW1wcm92ZSBwZXJmb3JtYW5jZSBhbmQgYXZvaWQgYmxvY2tpbmcgdGhlIFVJIHdoZW4gaGlnaGxpZ2h0aW5nIHZlcnkgbGFyZ2UgY2h1bmtzIG9mIGNvZGUuIFRoaXMgb3B0aW9uIGlzXG4gICAgICogW2Rpc2FibGVkIGJ5IGRlZmF1bHRdKGh0dHBzOi8vcHJpc21qcy5jb20vZmFxLmh0bWwjd2h5LWlzLWFzeW5jaHJvbm91cy1oaWdobGlnaHRpbmctZGlzYWJsZWQtYnktZGVmYXVsdCkuXG4gICAgICpcbiAgICAgKiBOb3RlOiBBbGwgbGFuZ3VhZ2UgZGVmaW5pdGlvbnMgcmVxdWlyZWQgdG8gaGlnaGxpZ2h0IHRoZSBjb2RlIG11c3QgYmUgaW5jbHVkZWQgaW4gdGhlIG1haW4gYHByaXNtLmpzYCBmaWxlIGZvclxuICAgICAqIGFzeW5jaHJvbm91cyBoaWdobGlnaHRpbmcgdG8gd29yay4gWW91IGNhbiBidWlsZCB5b3VyIG93biBidW5kbGUgb24gdGhlXG4gICAgICogW0Rvd25sb2FkIHBhZ2VdKGh0dHBzOi8vcHJpc21qcy5jb20vZG93bmxvYWQuaHRtbCkuXG4gICAgICogQHBhcmFtIHtIaWdobGlnaHRDYWxsYmFja30gW2NhbGxiYWNrXSBBbiBvcHRpb25hbCBjYWxsYmFjayB0byBiZSBpbnZva2VkIGFmdGVyIHRoZSBoaWdobGlnaHRpbmcgaXMgZG9uZS5cbiAgICAgKiBNb3N0bHkgdXNlZnVsIHdoZW4gYGFzeW5jYCBpcyBgdHJ1ZWAsIHNpbmNlIGluIHRoYXQgY2FzZSwgdGhlIGhpZ2hsaWdodGluZyBpcyBkb25lIGFzeW5jaHJvbm91c2x5LlxuICAgICAqIEBtZW1iZXJvZiBQcmlzbVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBoaWdobGlnaHRFbGVtZW50OiBmdW5jdGlvbiAoZWxlbWVudCwgYXN5bmMsIGNhbGxiYWNrKSB7XG4gICAgICAvLyBGaW5kIGxhbmd1YWdlXG4gICAgICB2YXIgbGFuZ3VhZ2UgPSBfLnV0aWwuZ2V0TGFuZ3VhZ2UoZWxlbWVudCk7XG4gICAgICB2YXIgZ3JhbW1hciA9IF8ubGFuZ3VhZ2VzW2xhbmd1YWdlXTtcblxuICAgICAgLy8gU2V0IGxhbmd1YWdlIG9uIHRoZSBlbGVtZW50LCBpZiBub3QgcHJlc2VudFxuICAgICAgXy51dGlsLnNldExhbmd1YWdlKGVsZW1lbnQsIGxhbmd1YWdlKTtcblxuICAgICAgLy8gU2V0IGxhbmd1YWdlIG9uIHRoZSBwYXJlbnQsIGZvciBzdHlsaW5nXG4gICAgICB2YXIgcGFyZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgaWYgKHBhcmVudCAmJiBwYXJlbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3ByZScpIHtcbiAgICAgICAgXy51dGlsLnNldExhbmd1YWdlKHBhcmVudCwgbGFuZ3VhZ2UpO1xuICAgICAgfVxuICAgICAgdmFyIGNvZGUgPSBlbGVtZW50LnRleHRDb250ZW50O1xuICAgICAgdmFyIGVudiA9IHtcbiAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgbGFuZ3VhZ2U6IGxhbmd1YWdlLFxuICAgICAgICBncmFtbWFyOiBncmFtbWFyLFxuICAgICAgICBjb2RlOiBjb2RlXG4gICAgICB9O1xuICAgICAgZnVuY3Rpb24gaW5zZXJ0SGlnaGxpZ2h0ZWRDb2RlKGhpZ2hsaWdodGVkQ29kZSkge1xuICAgICAgICBlbnYuaGlnaGxpZ2h0ZWRDb2RlID0gaGlnaGxpZ2h0ZWRDb2RlO1xuICAgICAgICBfLmhvb2tzLnJ1bignYmVmb3JlLWluc2VydCcsIGVudik7XG4gICAgICAgIGVudi5lbGVtZW50LmlubmVySFRNTCA9IGVudi5oaWdobGlnaHRlZENvZGU7XG4gICAgICAgIF8uaG9va3MucnVuKCdhZnRlci1oaWdobGlnaHQnLCBlbnYpO1xuICAgICAgICBfLmhvb2tzLnJ1bignY29tcGxldGUnLCBlbnYpO1xuICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjay5jYWxsKGVudi5lbGVtZW50KTtcbiAgICAgIH1cbiAgICAgIF8uaG9va3MucnVuKCdiZWZvcmUtc2FuaXR5LWNoZWNrJywgZW52KTtcblxuICAgICAgLy8gcGx1Z2lucyBtYXkgY2hhbmdlL2FkZCB0aGUgcGFyZW50L2VsZW1lbnRcbiAgICAgIHBhcmVudCA9IGVudi5lbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICBpZiAocGFyZW50ICYmIHBhcmVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAncHJlJyAmJiAhcGFyZW50Lmhhc0F0dHJpYnV0ZSgndGFiaW5kZXgnKSkge1xuICAgICAgICBwYXJlbnQuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG4gICAgICB9XG4gICAgICBpZiAoIWVudi5jb2RlKSB7XG4gICAgICAgIF8uaG9va3MucnVuKCdjb21wbGV0ZScsIGVudik7XG4gICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrLmNhbGwoZW52LmVsZW1lbnQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBfLmhvb2tzLnJ1bignYmVmb3JlLWhpZ2hsaWdodCcsIGVudik7XG4gICAgICBpZiAoIWVudi5ncmFtbWFyKSB7XG4gICAgICAgIGluc2VydEhpZ2hsaWdodGVkQ29kZShfLnV0aWwuZW5jb2RlKGVudi5jb2RlKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChhc3luYyAmJiBfc2VsZi5Xb3JrZXIpIHtcbiAgICAgICAgdmFyIHdvcmtlciA9IG5ldyBXb3JrZXIoXy5maWxlbmFtZSk7XG4gICAgICAgIHdvcmtlci5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgaW5zZXJ0SGlnaGxpZ2h0ZWRDb2RlKGV2dC5kYXRhKTtcbiAgICAgICAgfTtcbiAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBsYW5ndWFnZTogZW52Lmxhbmd1YWdlLFxuICAgICAgICAgIGNvZGU6IGVudi5jb2RlLFxuICAgICAgICAgIGltbWVkaWF0ZUNsb3NlOiB0cnVlXG4gICAgICAgIH0pKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGluc2VydEhpZ2hsaWdodGVkQ29kZShfLmhpZ2hsaWdodChlbnYuY29kZSwgZW52LmdyYW1tYXIsIGVudi5sYW5ndWFnZSkpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogTG93LWxldmVsIGZ1bmN0aW9uLCBvbmx5IHVzZSBpZiB5b3Uga25vdyB3aGF0IHlvdeKAmXJlIGRvaW5nLiBJdCBhY2NlcHRzIGEgc3RyaW5nIG9mIHRleHQgYXMgaW5wdXRcbiAgICAgKiBhbmQgdGhlIGxhbmd1YWdlIGRlZmluaXRpb25zIHRvIHVzZSwgYW5kIHJldHVybnMgYSBzdHJpbmcgd2l0aCB0aGUgSFRNTCBwcm9kdWNlZC5cbiAgICAgKlxuICAgICAqIFRoZSBmb2xsb3dpbmcgaG9va3Mgd2lsbCBiZSBydW46XG4gICAgICogMS4gYGJlZm9yZS10b2tlbml6ZWBcbiAgICAgKiAyLiBgYWZ0ZXItdG9rZW5pemVgXG4gICAgICogMy4gYHdyYXBgOiBPbiBlYWNoIHtAbGluayBUb2tlbn0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBBIHN0cmluZyB3aXRoIHRoZSBjb2RlIHRvIGJlIGhpZ2hsaWdodGVkLlxuICAgICAqIEBwYXJhbSB7R3JhbW1hcn0gZ3JhbW1hciBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgdG9rZW5zIHRvIHVzZS5cbiAgICAgKlxuICAgICAqIFVzdWFsbHkgYSBsYW5ndWFnZSBkZWZpbml0aW9uIGxpa2UgYFByaXNtLmxhbmd1YWdlcy5tYXJrdXBgLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsYW5ndWFnZSBUaGUgbmFtZSBvZiB0aGUgbGFuZ3VhZ2UgZGVmaW5pdGlvbiBwYXNzZWQgdG8gYGdyYW1tYXJgLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBoaWdobGlnaHRlZCBIVE1MLlxuICAgICAqIEBtZW1iZXJvZiBQcmlzbVxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIFByaXNtLmhpZ2hsaWdodCgndmFyIGZvbyA9IHRydWU7JywgUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHQsICdqYXZhc2NyaXB0Jyk7XG4gICAgICovXG4gICAgaGlnaGxpZ2h0OiBmdW5jdGlvbiAodGV4dCwgZ3JhbW1hciwgbGFuZ3VhZ2UpIHtcbiAgICAgIHZhciBlbnYgPSB7XG4gICAgICAgIGNvZGU6IHRleHQsXG4gICAgICAgIGdyYW1tYXI6IGdyYW1tYXIsXG4gICAgICAgIGxhbmd1YWdlOiBsYW5ndWFnZVxuICAgICAgfTtcbiAgICAgIF8uaG9va3MucnVuKCdiZWZvcmUtdG9rZW5pemUnLCBlbnYpO1xuICAgICAgaWYgKCFlbnYuZ3JhbW1hcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBsYW5ndWFnZSBcIicgKyBlbnYubGFuZ3VhZ2UgKyAnXCIgaGFzIG5vIGdyYW1tYXIuJyk7XG4gICAgICB9XG4gICAgICBlbnYudG9rZW5zID0gXy50b2tlbml6ZShlbnYuY29kZSwgZW52LmdyYW1tYXIpO1xuICAgICAgXy5ob29rcy5ydW4oJ2FmdGVyLXRva2VuaXplJywgZW52KTtcbiAgICAgIHJldHVybiBUb2tlbi5zdHJpbmdpZnkoXy51dGlsLmVuY29kZShlbnYudG9rZW5zKSwgZW52Lmxhbmd1YWdlKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFRoaXMgaXMgdGhlIGhlYXJ0IG9mIFByaXNtLCBhbmQgdGhlIG1vc3QgbG93LWxldmVsIGZ1bmN0aW9uIHlvdSBjYW4gdXNlLiBJdCBhY2NlcHRzIGEgc3RyaW5nIG9mIHRleHQgYXMgaW5wdXRcbiAgICAgKiBhbmQgdGhlIGxhbmd1YWdlIGRlZmluaXRpb25zIHRvIHVzZSwgYW5kIHJldHVybnMgYW4gYXJyYXkgd2l0aCB0aGUgdG9rZW5pemVkIGNvZGUuXG4gICAgICpcbiAgICAgKiBXaGVuIHRoZSBsYW5ndWFnZSBkZWZpbml0aW9uIGluY2x1ZGVzIG5lc3RlZCB0b2tlbnMsIHRoZSBmdW5jdGlvbiBpcyBjYWxsZWQgcmVjdXJzaXZlbHkgb24gZWFjaCBvZiB0aGVzZSB0b2tlbnMuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBjb3VsZCBiZSB1c2VmdWwgaW4gb3RoZXIgY29udGV4dHMgYXMgd2VsbCwgYXMgYSB2ZXJ5IGNydWRlIHBhcnNlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IEEgc3RyaW5nIHdpdGggdGhlIGNvZGUgdG8gYmUgaGlnaGxpZ2h0ZWQuXG4gICAgICogQHBhcmFtIHtHcmFtbWFyfSBncmFtbWFyIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSB0b2tlbnMgdG8gdXNlLlxuICAgICAqXG4gICAgICogVXN1YWxseSBhIGxhbmd1YWdlIGRlZmluaXRpb24gbGlrZSBgUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cGAuXG4gICAgICogQHJldHVybnMge1Rva2VuU3RyZWFtfSBBbiBhcnJheSBvZiBzdHJpbmdzIGFuZCB0b2tlbnMsIGEgdG9rZW4gc3RyZWFtLlxuICAgICAqIEBtZW1iZXJvZiBQcmlzbVxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGxldCBjb2RlID0gYHZhciBmb28gPSAwO2A7XG4gICAgICogbGV0IHRva2VucyA9IFByaXNtLnRva2VuaXplKGNvZGUsIFByaXNtLmxhbmd1YWdlcy5qYXZhc2NyaXB0KTtcbiAgICAgKiB0b2tlbnMuZm9yRWFjaCh0b2tlbiA9PiB7XG4gICAgICogICAgIGlmICh0b2tlbiBpbnN0YW5jZW9mIFByaXNtLlRva2VuICYmIHRva2VuLnR5cGUgPT09ICdudW1iZXInKSB7XG4gICAgICogICAgICAgICBjb25zb2xlLmxvZyhgRm91bmQgbnVtZXJpYyBsaXRlcmFsOiAke3Rva2VuLmNvbnRlbnR9YCk7XG4gICAgICogICAgIH1cbiAgICAgKiB9KTtcbiAgICAgKi9cbiAgICB0b2tlbml6ZTogZnVuY3Rpb24gKHRleHQsIGdyYW1tYXIpIHtcbiAgICAgIHZhciByZXN0ID0gZ3JhbW1hci5yZXN0O1xuICAgICAgaWYgKHJlc3QpIHtcbiAgICAgICAgZm9yICh2YXIgdG9rZW4gaW4gcmVzdCkge1xuICAgICAgICAgIGdyYW1tYXJbdG9rZW5dID0gcmVzdFt0b2tlbl07XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIGdyYW1tYXIucmVzdDtcbiAgICAgIH1cbiAgICAgIHZhciB0b2tlbkxpc3QgPSBuZXcgTGlua2VkTGlzdCgpO1xuICAgICAgYWRkQWZ0ZXIodG9rZW5MaXN0LCB0b2tlbkxpc3QuaGVhZCwgdGV4dCk7XG4gICAgICBtYXRjaEdyYW1tYXIodGV4dCwgdG9rZW5MaXN0LCBncmFtbWFyLCB0b2tlbkxpc3QuaGVhZCwgMCk7XG4gICAgICByZXR1cm4gdG9BcnJheSh0b2tlbkxpc3QpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEBtZW1iZXJvZiBQcmlzbVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBob29rczoge1xuICAgICAgYWxsOiB7fSxcbiAgICAgIC8qKlxuICAgICAgICogQWRkcyB0aGUgZ2l2ZW4gY2FsbGJhY2sgdG8gdGhlIGxpc3Qgb2YgY2FsbGJhY2tzIGZvciB0aGUgZ2l2ZW4gaG9vay5cbiAgICAgICAqXG4gICAgICAgKiBUaGUgY2FsbGJhY2sgd2lsbCBiZSBpbnZva2VkIHdoZW4gdGhlIGhvb2sgaXQgaXMgcmVnaXN0ZXJlZCBmb3IgaXMgcnVuLlxuICAgICAgICogSG9va3MgYXJlIHVzdWFsbHkgZGlyZWN0bHkgcnVuIGJ5IGEgaGlnaGxpZ2h0IGZ1bmN0aW9uIGJ1dCB5b3UgY2FuIGFsc28gcnVuIGhvb2tzIHlvdXJzZWxmLlxuICAgICAgICpcbiAgICAgICAqIE9uZSBjYWxsYmFjayBmdW5jdGlvbiBjYW4gYmUgcmVnaXN0ZXJlZCB0byBtdWx0aXBsZSBob29rcyBhbmQgdGhlIHNhbWUgaG9vayBtdWx0aXBsZSB0aW1lcy5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgaG9vay5cbiAgICAgICAqIEBwYXJhbSB7SG9va0NhbGxiYWNrfSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgZnVuY3Rpb24gd2hpY2ggaXMgZ2l2ZW4gZW52aXJvbm1lbnQgdmFyaWFibGVzLlxuICAgICAgICogQHB1YmxpY1xuICAgICAgICovXG4gICAgICBhZGQ6IGZ1bmN0aW9uIChuYW1lLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgaG9va3MgPSBfLmhvb2tzLmFsbDtcbiAgICAgICAgaG9va3NbbmFtZV0gPSBob29rc1tuYW1lXSB8fCBbXTtcbiAgICAgICAgaG9va3NbbmFtZV0ucHVzaChjYWxsYmFjayk7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBSdW5zIGEgaG9vayBpbnZva2luZyBhbGwgcmVnaXN0ZXJlZCBjYWxsYmFja3Mgd2l0aCB0aGUgZ2l2ZW4gZW52aXJvbm1lbnQgdmFyaWFibGVzLlxuICAgICAgICpcbiAgICAgICAqIENhbGxiYWNrcyB3aWxsIGJlIGludm9rZWQgc3luY2hyb25vdXNseSBhbmQgaW4gdGhlIG9yZGVyIGluIHdoaWNoIHRoZXkgd2VyZSByZWdpc3RlcmVkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBob29rLlxuICAgICAgICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCBhbnk+fSBlbnYgVGhlIGVudmlyb25tZW50IHZhcmlhYmxlcyBvZiB0aGUgaG9vayBwYXNzZWQgdG8gYWxsIGNhbGxiYWNrcyByZWdpc3RlcmVkLlxuICAgICAgICogQHB1YmxpY1xuICAgICAgICovXG4gICAgICBydW46IGZ1bmN0aW9uIChuYW1lLCBlbnYpIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrcyA9IF8uaG9va3MuYWxsW25hbWVdO1xuICAgICAgICBpZiAoIWNhbGxiYWNrcyB8fCAhY2FsbGJhY2tzLmxlbmd0aCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMCwgY2FsbGJhY2s7IGNhbGxiYWNrID0gY2FsbGJhY2tzW2krK107KSB7XG4gICAgICAgICAgY2FsbGJhY2soZW52KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgVG9rZW46IFRva2VuXG4gIH07XG4gIF9zZWxmLlByaXNtID0gXztcblxuICAvLyBUeXBlc2NyaXB0IG5vdGU6XG4gIC8vIFRoZSBmb2xsb3dpbmcgY2FuIGJlIHVzZWQgdG8gaW1wb3J0IHRoZSBUb2tlbiB0eXBlIGluIEpTRG9jOlxuICAvL1xuICAvLyAgIEB0eXBlZGVmIHtJbnN0YW5jZVR5cGU8aW1wb3J0KFwiLi9wcmlzbS1jb3JlXCIpW1wiVG9rZW5cIl0+fSBUb2tlblxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IHRva2VuLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBTZWUge0BsaW5rIFRva2VuI3R5cGUgdHlwZX1cbiAgICogQHBhcmFtIHtzdHJpbmcgfCBUb2tlblN0cmVhbX0gY29udGVudCBTZWUge0BsaW5rIFRva2VuI2NvbnRlbnQgY29udGVudH1cbiAgICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IFthbGlhc10gVGhlIGFsaWFzKGVzKSBvZiB0aGUgdG9rZW4uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbbWF0Y2hlZFN0cj1cIlwiXSBBIGNvcHkgb2YgdGhlIGZ1bGwgc3RyaW5nIHRoaXMgdG9rZW4gd2FzIGNyZWF0ZWQgZnJvbS5cbiAgICogQGNsYXNzXG4gICAqIEBnbG9iYWxcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZnVuY3Rpb24gVG9rZW4odHlwZSwgY29udGVudCwgYWxpYXMsIG1hdGNoZWRTdHIpIHtcbiAgICAvKipcbiAgICAgKiBUaGUgdHlwZSBvZiB0aGUgdG9rZW4uXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIHVzdWFsbHkgdGhlIGtleSBvZiBhIHBhdHRlcm4gaW4gYSB7QGxpbmsgR3JhbW1hcn0uXG4gICAgICpcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqIEBzZWUgR3JhbW1hclRva2VuXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgLyoqXG4gICAgICogVGhlIHN0cmluZ3Mgb3IgdG9rZW5zIGNvbnRhaW5lZCBieSB0aGlzIHRva2VuLlxuICAgICAqXG4gICAgICogVGhpcyB3aWxsIGJlIGEgdG9rZW4gc3RyZWFtIGlmIHRoZSBwYXR0ZXJuIG1hdGNoZWQgYWxzbyBkZWZpbmVkIGFuIGBpbnNpZGVgIGdyYW1tYXIuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7c3RyaW5nIHwgVG9rZW5TdHJlYW19XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG4gICAgLyoqXG4gICAgICogVGhlIGFsaWFzKGVzKSBvZiB0aGUgdG9rZW4uXG4gICAgICpcbiAgICAgKiBAdHlwZSB7c3RyaW5nfHN0cmluZ1tdfVxuICAgICAqIEBzZWUgR3JhbW1hclRva2VuXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHRoaXMuYWxpYXMgPSBhbGlhcztcbiAgICAvLyBDb3B5IG9mIHRoZSBmdWxsIHN0cmluZyB0aGlzIHRva2VuIHdhcyBjcmVhdGVkIGZyb21cbiAgICB0aGlzLmxlbmd0aCA9IChtYXRjaGVkU3RyIHx8ICcnKS5sZW5ndGggfCAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgdG9rZW4gc3RyZWFtIGlzIGFuIGFycmF5IG9mIHN0cmluZ3MgYW5kIHtAbGluayBUb2tlbiBUb2tlbn0gb2JqZWN0cy5cbiAgICpcbiAgICogVG9rZW4gc3RyZWFtcyBoYXZlIHRvIGZ1bGZpbGwgYSBmZXcgcHJvcGVydGllcyB0aGF0IGFyZSBhc3N1bWVkIGJ5IG1vc3QgZnVuY3Rpb25zIChtb3N0bHkgaW50ZXJuYWwgb25lcykgdGhhdCBwcm9jZXNzXG4gICAqIHRoZW0uXG4gICAqXG4gICAqIDEuIE5vIGFkamFjZW50IHN0cmluZ3MuXG4gICAqIDIuIE5vIGVtcHR5IHN0cmluZ3MuXG4gICAqXG4gICAqICAgIFRoZSBvbmx5IGV4Y2VwdGlvbiBoZXJlIGlzIHRoZSB0b2tlbiBzdHJlYW0gdGhhdCBvbmx5IGNvbnRhaW5zIHRoZSBlbXB0eSBzdHJpbmcgYW5kIG5vdGhpbmcgZWxzZS5cbiAgICpcbiAgICogQHR5cGVkZWYge0FycmF5PHN0cmluZyB8IFRva2VuPn0gVG9rZW5TdHJlYW1cbiAgICogQGdsb2JhbFxuICAgKiBAcHVibGljXG4gICAqL1xuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyB0aGUgZ2l2ZW4gdG9rZW4gb3IgdG9rZW4gc3RyZWFtIHRvIGFuIEhUTUwgcmVwcmVzZW50YXRpb24uXG4gICAqXG4gICAqIFRoZSBmb2xsb3dpbmcgaG9va3Mgd2lsbCBiZSBydW46XG4gICAqIDEuIGB3cmFwYDogT24gZWFjaCB7QGxpbmsgVG9rZW59LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZyB8IFRva2VuIHwgVG9rZW5TdHJlYW19IG8gVGhlIHRva2VuIG9yIHRva2VuIHN0cmVhbSB0byBiZSBjb252ZXJ0ZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBsYW5ndWFnZSBUaGUgbmFtZSBvZiBjdXJyZW50IGxhbmd1YWdlLlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgSFRNTCByZXByZXNlbnRhdGlvbiBvZiB0aGUgdG9rZW4gb3IgdG9rZW4gc3RyZWFtLlxuICAgKiBAbWVtYmVyb2YgVG9rZW5cbiAgICogQHN0YXRpY1xuICAgKi9cbiAgVG9rZW4uc3RyaW5naWZ5ID0gZnVuY3Rpb24gc3RyaW5naWZ5KG8sIGxhbmd1YWdlKSB7XG4gICAgaWYgKHR5cGVvZiBvID09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gbztcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkobykpIHtcbiAgICAgIHZhciBzID0gJyc7XG4gICAgICBvLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcyArPSBzdHJpbmdpZnkoZSwgbGFuZ3VhZ2UpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcztcbiAgICB9XG4gICAgdmFyIGVudiA9IHtcbiAgICAgIHR5cGU6IG8udHlwZSxcbiAgICAgIGNvbnRlbnQ6IHN0cmluZ2lmeShvLmNvbnRlbnQsIGxhbmd1YWdlKSxcbiAgICAgIHRhZzogJ3NwYW4nLFxuICAgICAgY2xhc3NlczogWyd0b2tlbicsIG8udHlwZV0sXG4gICAgICBhdHRyaWJ1dGVzOiB7fSxcbiAgICAgIGxhbmd1YWdlOiBsYW5ndWFnZVxuICAgIH07XG4gICAgdmFyIGFsaWFzZXMgPSBvLmFsaWFzO1xuICAgIGlmIChhbGlhc2VzKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShhbGlhc2VzKSkge1xuICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShlbnYuY2xhc3NlcywgYWxpYXNlcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbnYuY2xhc3Nlcy5wdXNoKGFsaWFzZXMpO1xuICAgICAgfVxuICAgIH1cbiAgICBfLmhvb2tzLnJ1bignd3JhcCcsIGVudik7XG4gICAgdmFyIGF0dHJpYnV0ZXMgPSAnJztcbiAgICBmb3IgKHZhciBuYW1lIGluIGVudi5hdHRyaWJ1dGVzKSB7XG4gICAgICBhdHRyaWJ1dGVzICs9ICcgJyArIG5hbWUgKyAnPVwiJyArIChlbnYuYXR0cmlidXRlc1tuYW1lXSB8fCAnJykucmVwbGFjZSgvXCIvZywgJyZxdW90OycpICsgJ1wiJztcbiAgICB9XG4gICAgcmV0dXJuICc8JyArIGVudi50YWcgKyAnIGNsYXNzPVwiJyArIGVudi5jbGFzc2VzLmpvaW4oJyAnKSArICdcIicgKyBhdHRyaWJ1dGVzICsgJz4nICsgZW52LmNvbnRlbnQgKyAnPC8nICsgZW52LnRhZyArICc+JztcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtSZWdFeHB9IHBhdHRlcm5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHBvc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGxvb2tiZWhpbmRcbiAgICogQHJldHVybnMge1JlZ0V4cEV4ZWNBcnJheSB8IG51bGx9XG4gICAqL1xuICBmdW5jdGlvbiBtYXRjaFBhdHRlcm4ocGF0dGVybiwgcG9zLCB0ZXh0LCBsb29rYmVoaW5kKSB7XG4gICAgcGF0dGVybi5sYXN0SW5kZXggPSBwb3M7XG4gICAgdmFyIG1hdGNoID0gcGF0dGVybi5leGVjKHRleHQpO1xuICAgIGlmIChtYXRjaCAmJiBsb29rYmVoaW5kICYmIG1hdGNoWzFdKSB7XG4gICAgICAvLyBjaGFuZ2UgdGhlIG1hdGNoIHRvIHJlbW92ZSB0aGUgdGV4dCBtYXRjaGVkIGJ5IHRoZSBQcmlzbSBsb29rYmVoaW5kIGdyb3VwXG4gICAgICB2YXIgbG9va2JlaGluZExlbmd0aCA9IG1hdGNoWzFdLmxlbmd0aDtcbiAgICAgIG1hdGNoLmluZGV4ICs9IGxvb2tiZWhpbmRMZW5ndGg7XG4gICAgICBtYXRjaFswXSA9IG1hdGNoWzBdLnNsaWNlKGxvb2tiZWhpbmRMZW5ndGgpO1xuICAgIH1cbiAgICByZXR1cm4gbWF0Y2g7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHRcbiAgICogQHBhcmFtIHtMaW5rZWRMaXN0PHN0cmluZyB8IFRva2VuPn0gdG9rZW5MaXN0XG4gICAqIEBwYXJhbSB7YW55fSBncmFtbWFyXG4gICAqIEBwYXJhbSB7TGlua2VkTGlzdE5vZGU8c3RyaW5nIHwgVG9rZW4+fSBzdGFydE5vZGVcbiAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0UG9zXG4gICAqIEBwYXJhbSB7UmVtYXRjaE9wdGlvbnN9IFtyZW1hdGNoXVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogQHR5cGVkZWYgUmVtYXRjaE9wdGlvbnNcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IGNhdXNlXG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSByZWFjaFxuICAgKi9cbiAgZnVuY3Rpb24gbWF0Y2hHcmFtbWFyKHRleHQsIHRva2VuTGlzdCwgZ3JhbW1hciwgc3RhcnROb2RlLCBzdGFydFBvcywgcmVtYXRjaCkge1xuICAgIGZvciAodmFyIHRva2VuIGluIGdyYW1tYXIpIHtcbiAgICAgIGlmICghZ3JhbW1hci5oYXNPd25Qcm9wZXJ0eSh0b2tlbikgfHwgIWdyYW1tYXJbdG9rZW5dKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdmFyIHBhdHRlcm5zID0gZ3JhbW1hclt0b2tlbl07XG4gICAgICBwYXR0ZXJucyA9IEFycmF5LmlzQXJyYXkocGF0dGVybnMpID8gcGF0dGVybnMgOiBbcGF0dGVybnNdO1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBwYXR0ZXJucy5sZW5ndGg7ICsraikge1xuICAgICAgICBpZiAocmVtYXRjaCAmJiByZW1hdGNoLmNhdXNlID09IHRva2VuICsgJywnICsgaikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGF0dGVybk9iaiA9IHBhdHRlcm5zW2pdO1xuICAgICAgICB2YXIgaW5zaWRlID0gcGF0dGVybk9iai5pbnNpZGU7XG4gICAgICAgIHZhciBsb29rYmVoaW5kID0gISFwYXR0ZXJuT2JqLmxvb2tiZWhpbmQ7XG4gICAgICAgIHZhciBncmVlZHkgPSAhIXBhdHRlcm5PYmouZ3JlZWR5O1xuICAgICAgICB2YXIgYWxpYXMgPSBwYXR0ZXJuT2JqLmFsaWFzO1xuICAgICAgICBpZiAoZ3JlZWR5ICYmICFwYXR0ZXJuT2JqLnBhdHRlcm4uZ2xvYmFsKSB7XG4gICAgICAgICAgLy8gV2l0aG91dCB0aGUgZ2xvYmFsIGZsYWcsIGxhc3RJbmRleCB3b24ndCB3b3JrXG4gICAgICAgICAgdmFyIGZsYWdzID0gcGF0dGVybk9iai5wYXR0ZXJuLnRvU3RyaW5nKCkubWF0Y2goL1tpbXN1eV0qJC8pWzBdO1xuICAgICAgICAgIHBhdHRlcm5PYmoucGF0dGVybiA9IFJlZ0V4cChwYXR0ZXJuT2JqLnBhdHRlcm4uc291cmNlLCBmbGFncyArICdnJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiogQHR5cGUge1JlZ0V4cH0gKi9cbiAgICAgICAgdmFyIHBhdHRlcm4gPSBwYXR0ZXJuT2JqLnBhdHRlcm4gfHwgcGF0dGVybk9iajtcbiAgICAgICAgZm9yIChcbiAgICAgICAgLy8gaXRlcmF0ZSB0aGUgdG9rZW4gbGlzdCBhbmQga2VlcCB0cmFjayBvZiB0aGUgY3VycmVudCB0b2tlbi9zdHJpbmcgcG9zaXRpb25cbiAgICAgICAgdmFyIGN1cnJlbnROb2RlID0gc3RhcnROb2RlLm5leHQsIHBvcyA9IHN0YXJ0UG9zOyBjdXJyZW50Tm9kZSAhPT0gdG9rZW5MaXN0LnRhaWw7IHBvcyArPSBjdXJyZW50Tm9kZS52YWx1ZS5sZW5ndGgsIGN1cnJlbnROb2RlID0gY3VycmVudE5vZGUubmV4dCkge1xuICAgICAgICAgIGlmIChyZW1hdGNoICYmIHBvcyA+PSByZW1hdGNoLnJlYWNoKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIHN0ciA9IGN1cnJlbnROb2RlLnZhbHVlO1xuICAgICAgICAgIGlmICh0b2tlbkxpc3QubGVuZ3RoID4gdGV4dC5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIFNvbWV0aGluZyB3ZW50IHRlcnJpYmx5IHdyb25nLCBBQk9SVCwgQUJPUlQhXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzdHIgaW5zdGFuY2VvZiBUb2tlbikge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciByZW1vdmVDb3VudCA9IDE7IC8vIHRoaXMgaXMgdGhlIHRvIHBhcmFtZXRlciBvZiByZW1vdmVCZXR3ZWVuXG4gICAgICAgICAgdmFyIG1hdGNoO1xuICAgICAgICAgIGlmIChncmVlZHkpIHtcbiAgICAgICAgICAgIG1hdGNoID0gbWF0Y2hQYXR0ZXJuKHBhdHRlcm4sIHBvcywgdGV4dCwgbG9va2JlaGluZCk7XG4gICAgICAgICAgICBpZiAoIW1hdGNoIHx8IG1hdGNoLmluZGV4ID49IHRleHQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGZyb20gPSBtYXRjaC5pbmRleDtcbiAgICAgICAgICAgIHZhciB0byA9IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIHAgPSBwb3M7XG5cbiAgICAgICAgICAgIC8vIGZpbmQgdGhlIG5vZGUgdGhhdCBjb250YWlucyB0aGUgbWF0Y2hcbiAgICAgICAgICAgIHAgKz0gY3VycmVudE5vZGUudmFsdWUubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKGZyb20gPj0gcCkge1xuICAgICAgICAgICAgICBjdXJyZW50Tm9kZSA9IGN1cnJlbnROb2RlLm5leHQ7XG4gICAgICAgICAgICAgIHAgKz0gY3VycmVudE5vZGUudmFsdWUubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gYWRqdXN0IHBvcyAoYW5kIHApXG4gICAgICAgICAgICBwIC09IGN1cnJlbnROb2RlLnZhbHVlLmxlbmd0aDtcbiAgICAgICAgICAgIHBvcyA9IHA7XG5cbiAgICAgICAgICAgIC8vIHRoZSBjdXJyZW50IG5vZGUgaXMgYSBUb2tlbiwgdGhlbiB0aGUgbWF0Y2ggc3RhcnRzIGluc2lkZSBhbm90aGVyIFRva2VuLCB3aGljaCBpcyBpbnZhbGlkXG4gICAgICAgICAgICBpZiAoY3VycmVudE5vZGUudmFsdWUgaW5zdGFuY2VvZiBUb2tlbikge1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gZmluZCB0aGUgbGFzdCBub2RlIHdoaWNoIGlzIGFmZmVjdGVkIGJ5IHRoaXMgbWF0Y2hcbiAgICAgICAgICAgIGZvciAodmFyIGsgPSBjdXJyZW50Tm9kZTsgayAhPT0gdG9rZW5MaXN0LnRhaWwgJiYgKHAgPCB0byB8fCB0eXBlb2Ygay52YWx1ZSA9PT0gJ3N0cmluZycpOyBrID0gay5uZXh0KSB7XG4gICAgICAgICAgICAgIHJlbW92ZUNvdW50Kys7XG4gICAgICAgICAgICAgIHAgKz0gay52YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZW1vdmVDb3VudC0tO1xuXG4gICAgICAgICAgICAvLyByZXBsYWNlIHdpdGggdGhlIG5ldyBtYXRjaFxuICAgICAgICAgICAgc3RyID0gdGV4dC5zbGljZShwb3MsIHApO1xuICAgICAgICAgICAgbWF0Y2guaW5kZXggLT0gcG9zO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtYXRjaCA9IG1hdGNoUGF0dGVybihwYXR0ZXJuLCAwLCBzdHIsIGxvb2tiZWhpbmQpO1xuICAgICAgICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVkZWNsYXJlXG4gICAgICAgICAgdmFyIGZyb20gPSBtYXRjaC5pbmRleDtcbiAgICAgICAgICB2YXIgbWF0Y2hTdHIgPSBtYXRjaFswXTtcbiAgICAgICAgICB2YXIgYmVmb3JlID0gc3RyLnNsaWNlKDAsIGZyb20pO1xuICAgICAgICAgIHZhciBhZnRlciA9IHN0ci5zbGljZShmcm9tICsgbWF0Y2hTdHIubGVuZ3RoKTtcbiAgICAgICAgICB2YXIgcmVhY2ggPSBwb3MgKyBzdHIubGVuZ3RoO1xuICAgICAgICAgIGlmIChyZW1hdGNoICYmIHJlYWNoID4gcmVtYXRjaC5yZWFjaCkge1xuICAgICAgICAgICAgcmVtYXRjaC5yZWFjaCA9IHJlYWNoO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgcmVtb3ZlRnJvbSA9IGN1cnJlbnROb2RlLnByZXY7XG4gICAgICAgICAgaWYgKGJlZm9yZSkge1xuICAgICAgICAgICAgcmVtb3ZlRnJvbSA9IGFkZEFmdGVyKHRva2VuTGlzdCwgcmVtb3ZlRnJvbSwgYmVmb3JlKTtcbiAgICAgICAgICAgIHBvcyArPSBiZWZvcmUubGVuZ3RoO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZW1vdmVSYW5nZSh0b2tlbkxpc3QsIHJlbW92ZUZyb20sIHJlbW92ZUNvdW50KTtcbiAgICAgICAgICB2YXIgd3JhcHBlZCA9IG5ldyBUb2tlbih0b2tlbiwgaW5zaWRlID8gXy50b2tlbml6ZShtYXRjaFN0ciwgaW5zaWRlKSA6IG1hdGNoU3RyLCBhbGlhcywgbWF0Y2hTdHIpO1xuICAgICAgICAgIGN1cnJlbnROb2RlID0gYWRkQWZ0ZXIodG9rZW5MaXN0LCByZW1vdmVGcm9tLCB3cmFwcGVkKTtcbiAgICAgICAgICBpZiAoYWZ0ZXIpIHtcbiAgICAgICAgICAgIGFkZEFmdGVyKHRva2VuTGlzdCwgY3VycmVudE5vZGUsIGFmdGVyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHJlbW92ZUNvdW50ID4gMSkge1xuICAgICAgICAgICAgLy8gYXQgbGVhc3Qgb25lIFRva2VuIG9iamVjdCB3YXMgcmVtb3ZlZCwgc28gd2UgaGF2ZSB0byBkbyBzb21lIHJlbWF0Y2hpbmdcbiAgICAgICAgICAgIC8vIHRoaXMgY2FuIG9ubHkgaGFwcGVuIGlmIHRoZSBjdXJyZW50IHBhdHRlcm4gaXMgZ3JlZWR5XG5cbiAgICAgICAgICAgIC8qKiBAdHlwZSB7UmVtYXRjaE9wdGlvbnN9ICovXG4gICAgICAgICAgICB2YXIgbmVzdGVkUmVtYXRjaCA9IHtcbiAgICAgICAgICAgICAgY2F1c2U6IHRva2VuICsgJywnICsgaixcbiAgICAgICAgICAgICAgcmVhY2g6IHJlYWNoXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbWF0Y2hHcmFtbWFyKHRleHQsIHRva2VuTGlzdCwgZ3JhbW1hciwgY3VycmVudE5vZGUucHJldiwgcG9zLCBuZXN0ZWRSZW1hdGNoKTtcblxuICAgICAgICAgICAgLy8gdGhlIHJlYWNoIG1pZ2h0IGhhdmUgYmVlbiBleHRlbmRlZCBiZWNhdXNlIG9mIHRoZSByZW1hdGNoaW5nXG4gICAgICAgICAgICBpZiAocmVtYXRjaCAmJiBuZXN0ZWRSZW1hdGNoLnJlYWNoID4gcmVtYXRjaC5yZWFjaCkge1xuICAgICAgICAgICAgICByZW1hdGNoLnJlYWNoID0gbmVzdGVkUmVtYXRjaC5yZWFjaDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHR5cGVkZWYgTGlua2VkTGlzdE5vZGVcbiAgICogQHByb3BlcnR5IHtUfSB2YWx1ZVxuICAgKiBAcHJvcGVydHkge0xpbmtlZExpc3ROb2RlPFQ+IHwgbnVsbH0gcHJldiBUaGUgcHJldmlvdXMgbm9kZS5cbiAgICogQHByb3BlcnR5IHtMaW5rZWRMaXN0Tm9kZTxUPiB8IG51bGx9IG5leHQgVGhlIG5leHQgbm9kZS5cbiAgICogQHRlbXBsYXRlIFRcbiAgICogQHByaXZhdGVcbiAgICovXG5cbiAgLyoqXG4gICAqIEB0ZW1wbGF0ZSBUXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBmdW5jdGlvbiBMaW5rZWRMaXN0KCkge1xuICAgIC8qKiBAdHlwZSB7TGlua2VkTGlzdE5vZGU8VD59ICovXG4gICAgdmFyIGhlYWQgPSB7XG4gICAgICB2YWx1ZTogbnVsbCxcbiAgICAgIHByZXY6IG51bGwsXG4gICAgICBuZXh0OiBudWxsXG4gICAgfTtcbiAgICAvKiogQHR5cGUge0xpbmtlZExpc3ROb2RlPFQ+fSAqL1xuICAgIHZhciB0YWlsID0ge1xuICAgICAgdmFsdWU6IG51bGwsXG4gICAgICBwcmV2OiBoZWFkLFxuICAgICAgbmV4dDogbnVsbFxuICAgIH07XG4gICAgaGVhZC5uZXh0ID0gdGFpbDtcblxuICAgIC8qKiBAdHlwZSB7TGlua2VkTGlzdE5vZGU8VD59ICovXG4gICAgdGhpcy5oZWFkID0gaGVhZDtcbiAgICAvKiogQHR5cGUge0xpbmtlZExpc3ROb2RlPFQ+fSAqL1xuICAgIHRoaXMudGFpbCA9IHRhaWw7XG4gICAgdGhpcy5sZW5ndGggPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBuZXcgbm9kZSB3aXRoIHRoZSBnaXZlbiB2YWx1ZSB0byB0aGUgbGlzdC5cbiAgICpcbiAgICogQHBhcmFtIHtMaW5rZWRMaXN0PFQ+fSBsaXN0XG4gICAqIEBwYXJhbSB7TGlua2VkTGlzdE5vZGU8VD59IG5vZGVcbiAgICogQHBhcmFtIHtUfSB2YWx1ZVxuICAgKiBAcmV0dXJucyB7TGlua2VkTGlzdE5vZGU8VD59IFRoZSBhZGRlZCBub2RlLlxuICAgKiBAdGVtcGxhdGUgVFxuICAgKi9cbiAgZnVuY3Rpb24gYWRkQWZ0ZXIobGlzdCwgbm9kZSwgdmFsdWUpIHtcbiAgICAvLyBhc3N1bWVzIHRoYXQgbm9kZSAhPSBsaXN0LnRhaWwgJiYgdmFsdWVzLmxlbmd0aCA+PSAwXG4gICAgdmFyIG5leHQgPSBub2RlLm5leHQ7XG4gICAgdmFyIG5ld05vZGUgPSB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBwcmV2OiBub2RlLFxuICAgICAgbmV4dDogbmV4dFxuICAgIH07XG4gICAgbm9kZS5uZXh0ID0gbmV3Tm9kZTtcbiAgICBuZXh0LnByZXYgPSBuZXdOb2RlO1xuICAgIGxpc3QubGVuZ3RoKys7XG4gICAgcmV0dXJuIG5ld05vZGU7XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZXMgYGNvdW50YCBub2RlcyBhZnRlciB0aGUgZ2l2ZW4gbm9kZS4gVGhlIGdpdmVuIG5vZGUgd2lsbCBub3QgYmUgcmVtb3ZlZC5cbiAgICpcbiAgICogQHBhcmFtIHtMaW5rZWRMaXN0PFQ+fSBsaXN0XG4gICAqIEBwYXJhbSB7TGlua2VkTGlzdE5vZGU8VD59IG5vZGVcbiAgICogQHBhcmFtIHtudW1iZXJ9IGNvdW50XG4gICAqIEB0ZW1wbGF0ZSBUXG4gICAqL1xuICBmdW5jdGlvbiByZW1vdmVSYW5nZShsaXN0LCBub2RlLCBjb3VudCkge1xuICAgIHZhciBuZXh0ID0gbm9kZS5uZXh0O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQgJiYgbmV4dCAhPT0gbGlzdC50YWlsOyBpKyspIHtcbiAgICAgIG5leHQgPSBuZXh0Lm5leHQ7XG4gICAgfVxuICAgIG5vZGUubmV4dCA9IG5leHQ7XG4gICAgbmV4dC5wcmV2ID0gbm9kZTtcbiAgICBsaXN0Lmxlbmd0aCAtPSBpO1xuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0ge0xpbmtlZExpc3Q8VD59IGxpc3RcbiAgICogQHJldHVybnMge1RbXX1cbiAgICogQHRlbXBsYXRlIFRcbiAgICovXG4gIGZ1bmN0aW9uIHRvQXJyYXkobGlzdCkge1xuICAgIHZhciBhcnJheSA9IFtdO1xuICAgIHZhciBub2RlID0gbGlzdC5oZWFkLm5leHQ7XG4gICAgd2hpbGUgKG5vZGUgIT09IGxpc3QudGFpbCkge1xuICAgICAgYXJyYXkucHVzaChub2RlLnZhbHVlKTtcbiAgICAgIG5vZGUgPSBub2RlLm5leHQ7XG4gICAgfVxuICAgIHJldHVybiBhcnJheTtcbiAgfVxuICBpZiAoIV9zZWxmLmRvY3VtZW50KSB7XG4gICAgaWYgKCFfc2VsZi5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAvLyBpbiBOb2RlLmpzXG4gICAgICByZXR1cm4gXztcbiAgICB9XG4gICAgaWYgKCFfLmRpc2FibGVXb3JrZXJNZXNzYWdlSGFuZGxlcikge1xuICAgICAgLy8gSW4gd29ya2VyXG4gICAgICBfc2VsZi5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICB2YXIgbWVzc2FnZSA9IEpTT04ucGFyc2UoZXZ0LmRhdGEpO1xuICAgICAgICB2YXIgbGFuZyA9IG1lc3NhZ2UubGFuZ3VhZ2U7XG4gICAgICAgIHZhciBjb2RlID0gbWVzc2FnZS5jb2RlO1xuICAgICAgICB2YXIgaW1tZWRpYXRlQ2xvc2UgPSBtZXNzYWdlLmltbWVkaWF0ZUNsb3NlO1xuICAgICAgICBfc2VsZi5wb3N0TWVzc2FnZShfLmhpZ2hsaWdodChjb2RlLCBfLmxhbmd1YWdlc1tsYW5nXSwgbGFuZykpO1xuICAgICAgICBpZiAoaW1tZWRpYXRlQ2xvc2UpIHtcbiAgICAgICAgICBfc2VsZi5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9LCBmYWxzZSk7XG4gICAgfVxuICAgIHJldHVybiBfO1xuICB9XG5cbiAgLy8gR2V0IGN1cnJlbnQgc2NyaXB0IGFuZCBoaWdobGlnaHRcbiAgdmFyIHNjcmlwdCA9IF8udXRpbC5jdXJyZW50U2NyaXB0KCk7XG4gIGlmIChzY3JpcHQpIHtcbiAgICBfLmZpbGVuYW1lID0gc2NyaXB0LnNyYztcbiAgICBpZiAoc2NyaXB0Lmhhc0F0dHJpYnV0ZSgnZGF0YS1tYW51YWwnKSkge1xuICAgICAgXy5tYW51YWwgPSB0cnVlO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBoaWdobGlnaHRBdXRvbWF0aWNhbGx5Q2FsbGJhY2soKSB7XG4gICAgaWYgKCFfLm1hbnVhbCkge1xuICAgICAgXy5oaWdobGlnaHRBbGwoKTtcbiAgICB9XG4gIH1cbiAgaWYgKCFfLm1hbnVhbCkge1xuICAgIC8vIElmIHRoZSBkb2N1bWVudCBzdGF0ZSBpcyBcImxvYWRpbmdcIiwgdGhlbiB3ZSdsbCB1c2UgRE9NQ29udGVudExvYWRlZC5cbiAgICAvLyBJZiB0aGUgZG9jdW1lbnQgc3RhdGUgaXMgXCJpbnRlcmFjdGl2ZVwiIGFuZCB0aGUgcHJpc20uanMgc2NyaXB0IGlzIGRlZmVycmVkLCB0aGVuIHdlJ2xsIGFsc28gdXNlIHRoZVxuICAgIC8vIERPTUNvbnRlbnRMb2FkZWQgZXZlbnQgYmVjYXVzZSB0aGVyZSBtaWdodCBiZSBzb21lIHBsdWdpbnMgb3IgbGFuZ3VhZ2VzIHdoaWNoIGhhdmUgYWxzbyBiZWVuIGRlZmVycmVkIGFuZCB0aGV5XG4gICAgLy8gbWlnaHQgdGFrZSBsb25nZXIgb25lIGFuaW1hdGlvbiBmcmFtZSB0byBleGVjdXRlIHdoaWNoIGNhbiBjcmVhdGUgYSByYWNlIGNvbmRpdGlvbiB3aGVyZSBvbmx5IHNvbWUgcGx1Z2lucyBoYXZlXG4gICAgLy8gYmVlbiBsb2FkZWQgd2hlbiBQcmlzbS5oaWdobGlnaHRBbGwoKSBpcyBleGVjdXRlZCwgZGVwZW5kaW5nIG9uIGhvdyBmYXN0IHJlc291cmNlcyBhcmUgbG9hZGVkLlxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vUHJpc21KUy9wcmlzbS9pc3N1ZXMvMjEwMlxuICAgIHZhciByZWFkeVN0YXRlID0gZG9jdW1lbnQucmVhZHlTdGF0ZTtcbiAgICBpZiAocmVhZHlTdGF0ZSA9PT0gJ2xvYWRpbmcnIHx8IHJlYWR5U3RhdGUgPT09ICdpbnRlcmFjdGl2ZScgJiYgc2NyaXB0ICYmIHNjcmlwdC5kZWZlcikge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGhpZ2hsaWdodEF1dG9tYXRpY2FsbHlDYWxsYmFjayk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKSB7XG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoaGlnaGxpZ2h0QXV0b21hdGljYWxseUNhbGxiYWNrKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGhpZ2hsaWdodEF1dG9tYXRpY2FsbHlDYWxsYmFjaywgMTYpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gXztcbn0oX3NlbGYpO1xuXG4vLyBzb21lIGFkZGl0aW9uYWwgZG9jdW1lbnRhdGlvbi90eXBlc1xuXG4vKipcbiAqIFRoZSBleHBhbnNpb24gb2YgYSBzaW1wbGUgYFJlZ0V4cGAgbGl0ZXJhbCB0byBzdXBwb3J0IGFkZGl0aW9uYWwgcHJvcGVydGllcy5cbiAqXG4gKiBAdHlwZWRlZiBHcmFtbWFyVG9rZW5cbiAqIEBwcm9wZXJ0eSB7UmVnRXhwfSBwYXR0ZXJuIFRoZSByZWd1bGFyIGV4cHJlc3Npb24gb2YgdGhlIHRva2VuLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbbG9va2JlaGluZD1mYWxzZV0gSWYgYHRydWVgLCB0aGVuIHRoZSBmaXJzdCBjYXB0dXJpbmcgZ3JvdXAgb2YgYHBhdHRlcm5gIHdpbGwgKGVmZmVjdGl2ZWx5KVxuICogYmVoYXZlIGFzIGEgbG9va2JlaGluZCBncm91cCBtZWFuaW5nIHRoYXQgdGhlIGNhcHR1cmVkIHRleHQgd2lsbCBub3QgYmUgcGFydCBvZiB0aGUgbWF0Y2hlZCB0ZXh0IG9mIHRoZSBuZXcgdG9rZW4uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtncmVlZHk9ZmFsc2VdIFdoZXRoZXIgdGhlIHRva2VuIGlzIGdyZWVkeS5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfHN0cmluZ1tdfSBbYWxpYXNdIEFuIG9wdGlvbmFsIGFsaWFzIG9yIGxpc3Qgb2YgYWxpYXNlcy5cbiAqIEBwcm9wZXJ0eSB7R3JhbW1hcn0gW2luc2lkZV0gVGhlIG5lc3RlZCBncmFtbWFyIG9mIHRoaXMgdG9rZW4uXG4gKlxuICogVGhlIGBpbnNpZGVgIGdyYW1tYXIgd2lsbCBiZSB1c2VkIHRvIHRva2VuaXplIHRoZSB0ZXh0IHZhbHVlIG9mIGVhY2ggdG9rZW4gb2YgdGhpcyBraW5kLlxuICpcbiAqIFRoaXMgY2FuIGJlIHVzZWQgdG8gbWFrZSBuZXN0ZWQgYW5kIGV2ZW4gcmVjdXJzaXZlIGxhbmd1YWdlIGRlZmluaXRpb25zLlxuICpcbiAqIE5vdGU6IFRoaXMgY2FuIGNhdXNlIGluZmluaXRlIHJlY3Vyc2lvbi4gQmUgY2FyZWZ1bCB3aGVuIHlvdSBlbWJlZCBkaWZmZXJlbnQgbGFuZ3VhZ2VzIG9yIGV2ZW4gdGhlIHNhbWUgbGFuZ3VhZ2UgaW50b1xuICogZWFjaCBhbm90aGVyLlxuICogQGdsb2JhbFxuICogQHB1YmxpY1xuICovXG5cbi8qKlxuICogQHR5cGVkZWYgR3JhbW1hclxuICogQHR5cGUge09iamVjdDxzdHJpbmcsIFJlZ0V4cCB8IEdyYW1tYXJUb2tlbiB8IEFycmF5PFJlZ0V4cCB8IEdyYW1tYXJUb2tlbj4+fVxuICogQHByb3BlcnR5IHtHcmFtbWFyfSBbcmVzdF0gQW4gb3B0aW9uYWwgZ3JhbW1hciBvYmplY3QgdGhhdCB3aWxsIGJlIGFwcGVuZGVkIHRvIHRoaXMgZ3JhbW1hci5cbiAqIEBnbG9iYWxcbiAqIEBwdWJsaWNcbiAqL1xuXG4vKipcbiAqIEEgZnVuY3Rpb24gd2hpY2ggd2lsbCBpbnZva2VkIGFmdGVyIGFuIGVsZW1lbnQgd2FzIHN1Y2Nlc3NmdWxseSBoaWdobGlnaHRlZC5cbiAqXG4gKiBAY2FsbGJhY2sgSGlnaGxpZ2h0Q2FsbGJhY2tcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCBUaGUgZWxlbWVudCBzdWNjZXNzZnVsbHkgaGlnaGxpZ2h0ZWQuXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqIEBnbG9iYWxcbiAqIEBwdWJsaWNcbiAqL1xuXG4vKipcbiAqIEBjYWxsYmFjayBIb29rQ2FsbGJhY2tcbiAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgYW55Pn0gZW52IFRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgb2YgdGhlIGhvb2suXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqIEBnbG9iYWxcbiAqIEBwdWJsaWNcbiAqL1xuXG4vKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgIEJlZ2luIHByaXNtLW1hcmt1cC5qc1xuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXG5QcmlzbS5sYW5ndWFnZXMubWFya3VwID0ge1xuICAnY29tbWVudCc6IHtcbiAgICBwYXR0ZXJuOiAvPCEtLSg/Oig/ITwhLS0pW1xcc1xcU10pKj8tLT4vLFxuICAgIGdyZWVkeTogdHJ1ZVxuICB9LFxuICAncHJvbG9nJzoge1xuICAgIHBhdHRlcm46IC88XFw/W1xcc1xcU10rP1xcPz4vLFxuICAgIGdyZWVkeTogdHJ1ZVxuICB9LFxuICAnZG9jdHlwZSc6IHtcbiAgICAvLyBodHRwczovL3d3dy53My5vcmcvVFIveG1sLyNOVC1kb2N0eXBlZGVjbFxuICAgIHBhdHRlcm46IC88IURPQ1RZUEUoPzpbXj5cIidbXFxdXXxcIlteXCJdKlwifCdbXiddKicpKyg/OlxcWyg/OltePFwiJ1xcXV18XCJbXlwiXSpcInwnW14nXSonfDwoPyEhLS0pfDwhLS0oPzpbXi1dfC0oPyEtPikpKi0tPikqXFxdXFxzKik/Pi9pLFxuICAgIGdyZWVkeTogdHJ1ZSxcbiAgICBpbnNpZGU6IHtcbiAgICAgICdpbnRlcm5hbC1zdWJzZXQnOiB7XG4gICAgICAgIHBhdHRlcm46IC8oXlteXFxbXSpcXFspW1xcc1xcU10rKD89XFxdPiQpLyxcbiAgICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgICBpbnNpZGU6IG51bGwgLy8gc2VlIGJlbG93XG4gICAgICB9LFxuICAgICAgJ3N0cmluZyc6IHtcbiAgICAgICAgcGF0dGVybjogL1wiW15cIl0qXCJ8J1teJ10qJy8sXG4gICAgICAgIGdyZWVkeTogdHJ1ZVxuICAgICAgfSxcbiAgICAgICdwdW5jdHVhdGlvbic6IC9ePCF8PiR8W1tcXF1dLyxcbiAgICAgICdkb2N0eXBlLXRhZyc6IC9eRE9DVFlQRS9pLFxuICAgICAgJ25hbWUnOiAvW15cXHM8PidcIl0rL1xuICAgIH1cbiAgfSxcbiAgJ2NkYXRhJzoge1xuICAgIHBhdHRlcm46IC88IVxcW0NEQVRBXFxbW1xcc1xcU10qP1xcXVxcXT4vaSxcbiAgICBncmVlZHk6IHRydWVcbiAgfSxcbiAgJ3RhZyc6IHtcbiAgICBwYXR0ZXJuOiAvPFxcLz8oPyFcXGQpW15cXHM+XFwvPSQ8JV0rKD86XFxzKD86XFxzKlteXFxzPlxcLz1dKyg/Olxccyo9XFxzKig/OlwiW15cIl0qXCJ8J1teJ10qJ3xbXlxccydcIj49XSsoPz1bXFxzPl0pKXwoPz1bXFxzLz5dKSkpKyk/XFxzKlxcLz8+LyxcbiAgICBncmVlZHk6IHRydWUsXG4gICAgaW5zaWRlOiB7XG4gICAgICAndGFnJzoge1xuICAgICAgICBwYXR0ZXJuOiAvXjxcXC8/W15cXHM+XFwvXSsvLFxuICAgICAgICBpbnNpZGU6IHtcbiAgICAgICAgICAncHVuY3R1YXRpb24nOiAvXjxcXC8/LyxcbiAgICAgICAgICAnbmFtZXNwYWNlJzogL15bXlxccz5cXC86XSs6L1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgJ3NwZWNpYWwtYXR0cic6IFtdLFxuICAgICAgJ2F0dHItdmFsdWUnOiB7XG4gICAgICAgIHBhdHRlcm46IC89XFxzKig/OlwiW15cIl0qXCJ8J1teJ10qJ3xbXlxccydcIj49XSspLyxcbiAgICAgICAgaW5zaWRlOiB7XG4gICAgICAgICAgJ3B1bmN0dWF0aW9uJzogW3tcbiAgICAgICAgICAgIHBhdHRlcm46IC9ePS8sXG4gICAgICAgICAgICBhbGlhczogJ2F0dHItZXF1YWxzJ1xuICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgIHBhdHRlcm46IC9eKFxccyopW1wiJ118W1wiJ10kLyxcbiAgICAgICAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICAgICAgICB9XVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgJ3B1bmN0dWF0aW9uJzogL1xcLz8+LyxcbiAgICAgICdhdHRyLW5hbWUnOiB7XG4gICAgICAgIHBhdHRlcm46IC9bXlxccz5cXC9dKy8sXG4gICAgICAgIGluc2lkZToge1xuICAgICAgICAgICduYW1lc3BhY2UnOiAvXlteXFxzPlxcLzpdKzovXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gICdlbnRpdHknOiBbe1xuICAgIHBhdHRlcm46IC8mW1xcZGEtel17MSw4fTsvaSxcbiAgICBhbGlhczogJ25hbWVkLWVudGl0eSdcbiAgfSwgLyYjeD9bXFxkYS1mXXsxLDh9Oy9pXVxufTtcblByaXNtLmxhbmd1YWdlcy5tYXJrdXBbJ3RhZyddLmluc2lkZVsnYXR0ci12YWx1ZSddLmluc2lkZVsnZW50aXR5J10gPSBQcmlzbS5sYW5ndWFnZXMubWFya3VwWydlbnRpdHknXTtcblByaXNtLmxhbmd1YWdlcy5tYXJrdXBbJ2RvY3R5cGUnXS5pbnNpZGVbJ2ludGVybmFsLXN1YnNldCddLmluc2lkZSA9IFByaXNtLmxhbmd1YWdlcy5tYXJrdXA7XG5cbi8vIFBsdWdpbiB0byBtYWtlIGVudGl0eSB0aXRsZSBzaG93IHRoZSByZWFsIGVudGl0eSwgaWRlYSBieSBSb21hbiBLb21hcm92XG5QcmlzbS5ob29rcy5hZGQoJ3dyYXAnLCBmdW5jdGlvbiAoZW52KSB7XG4gIGlmIChlbnYudHlwZSA9PT0gJ2VudGl0eScpIHtcbiAgICBlbnYuYXR0cmlidXRlc1sndGl0bGUnXSA9IGVudi5jb250ZW50LnJlcGxhY2UoLyZhbXA7LywgJyYnKTtcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cC50YWcsICdhZGRJbmxpbmVkJywge1xuICAvKipcbiAgICogQWRkcyBhbiBpbmxpbmVkIGxhbmd1YWdlIHRvIG1hcmt1cC5cbiAgICpcbiAgICogQW4gZXhhbXBsZSBvZiBhbiBpbmxpbmVkIGxhbmd1YWdlIGlzIENTUyB3aXRoIGA8c3R5bGU+YCB0YWdzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnTmFtZSBUaGUgbmFtZSBvZiB0aGUgdGFnIHRoYXQgY29udGFpbnMgdGhlIGlubGluZWQgbGFuZ3VhZ2UuIFRoaXMgbmFtZSB3aWxsIGJlIHRyZWF0ZWQgYXNcbiAgICogY2FzZSBpbnNlbnNpdGl2ZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGxhbmcgVGhlIGxhbmd1YWdlIGtleS5cbiAgICogQGV4YW1wbGVcbiAgICogYWRkSW5saW5lZCgnc3R5bGUnLCAnY3NzJyk7XG4gICAqL1xuICB2YWx1ZTogZnVuY3Rpb24gYWRkSW5saW5lZCh0YWdOYW1lLCBsYW5nKSB7XG4gICAgdmFyIGluY2x1ZGVkQ2RhdGFJbnNpZGUgPSB7fTtcbiAgICBpbmNsdWRlZENkYXRhSW5zaWRlWydsYW5ndWFnZS0nICsgbGFuZ10gPSB7XG4gICAgICBwYXR0ZXJuOiAvKF48IVxcW0NEQVRBXFxbKVtcXHNcXFNdKz8oPz1cXF1cXF0+JCkvaSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBpbnNpZGU6IFByaXNtLmxhbmd1YWdlc1tsYW5nXVxuICAgIH07XG4gICAgaW5jbHVkZWRDZGF0YUluc2lkZVsnY2RhdGEnXSA9IC9ePCFcXFtDREFUQVxcW3xcXF1cXF0+JC9pO1xuICAgIHZhciBpbnNpZGUgPSB7XG4gICAgICAnaW5jbHVkZWQtY2RhdGEnOiB7XG4gICAgICAgIHBhdHRlcm46IC88IVxcW0NEQVRBXFxbW1xcc1xcU10qP1xcXVxcXT4vaSxcbiAgICAgICAgaW5zaWRlOiBpbmNsdWRlZENkYXRhSW5zaWRlXG4gICAgICB9XG4gICAgfTtcbiAgICBpbnNpZGVbJ2xhbmd1YWdlLScgKyBsYW5nXSA9IHtcbiAgICAgIHBhdHRlcm46IC9bXFxzXFxTXSsvLFxuICAgICAgaW5zaWRlOiBQcmlzbS5sYW5ndWFnZXNbbGFuZ11cbiAgICB9O1xuICAgIHZhciBkZWYgPSB7fTtcbiAgICBkZWZbdGFnTmFtZV0gPSB7XG4gICAgICBwYXR0ZXJuOiBSZWdFeHAoLyg8X19bXj5dKj4pKD86PCFcXFtDREFUQVxcWyg/OlteXFxdXXxcXF0oPyFcXF0+KSkqXFxdXFxdPnwoPyE8IVxcW0NEQVRBXFxbKVtcXHNcXFNdKSo/KD89PFxcL19fPikvLnNvdXJjZS5yZXBsYWNlKC9fXy9nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0YWdOYW1lO1xuICAgICAgfSksICdpJyksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiBpbnNpZGVcbiAgICB9O1xuICAgIFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ21hcmt1cCcsICdjZGF0YScsIGRlZik7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFByaXNtLmxhbmd1YWdlcy5tYXJrdXAudGFnLCAnYWRkQXR0cmlidXRlJywge1xuICAvKipcbiAgICogQWRkcyBhbiBwYXR0ZXJuIHRvIGhpZ2hsaWdodCBsYW5ndWFnZXMgZW1iZWRkZWQgaW4gSFRNTCBhdHRyaWJ1dGVzLlxuICAgKlxuICAgKiBBbiBleGFtcGxlIG9mIGFuIGlubGluZWQgbGFuZ3VhZ2UgaXMgQ1NTIHdpdGggYHN0eWxlYCBhdHRyaWJ1dGVzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXR0ck5hbWUgVGhlIG5hbWUgb2YgdGhlIHRhZyB0aGF0IGNvbnRhaW5zIHRoZSBpbmxpbmVkIGxhbmd1YWdlLiBUaGlzIG5hbWUgd2lsbCBiZSB0cmVhdGVkIGFzXG4gICAqIGNhc2UgaW5zZW5zaXRpdmUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBsYW5nIFRoZSBsYW5ndWFnZSBrZXkuXG4gICAqIEBleGFtcGxlXG4gICAqIGFkZEF0dHJpYnV0ZSgnc3R5bGUnLCAnY3NzJyk7XG4gICAqL1xuICB2YWx1ZTogZnVuY3Rpb24gKGF0dHJOYW1lLCBsYW5nKSB7XG4gICAgUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cC50YWcuaW5zaWRlWydzcGVjaWFsLWF0dHInXS5wdXNoKHtcbiAgICAgIHBhdHRlcm46IFJlZ0V4cCgvKF58W1wiJ1xcc10pLy5zb3VyY2UgKyAnKD86JyArIGF0dHJOYW1lICsgJyknICsgL1xccyo9XFxzKig/OlwiW15cIl0qXCJ8J1teJ10qJ3xbXlxccydcIj49XSsoPz1bXFxzPl0pKS8uc291cmNlLCAnaScpLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAnYXR0ci1uYW1lJzogL15bXlxccz1dKy8sXG4gICAgICAgICdhdHRyLXZhbHVlJzoge1xuICAgICAgICAgIHBhdHRlcm46IC89W1xcc1xcU10rLyxcbiAgICAgICAgICBpbnNpZGU6IHtcbiAgICAgICAgICAgICd2YWx1ZSc6IHtcbiAgICAgICAgICAgICAgcGF0dGVybjogLyhePVxccyooW1wiJ118KD8hW1wiJ10pKSlcXFNbXFxzXFxTXSooPz1cXDIkKS8sXG4gICAgICAgICAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICAgICAgICAgIGFsaWFzOiBbbGFuZywgJ2xhbmd1YWdlLScgKyBsYW5nXSxcbiAgICAgICAgICAgICAgaW5zaWRlOiBQcmlzbS5sYW5ndWFnZXNbbGFuZ11cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAncHVuY3R1YXRpb24nOiBbe1xuICAgICAgICAgICAgICBwYXR0ZXJuOiAvXj0vLFxuICAgICAgICAgICAgICBhbGlhczogJ2F0dHItZXF1YWxzJ1xuICAgICAgICAgICAgfSwgL1wifCcvXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG59KTtcblByaXNtLmxhbmd1YWdlcy5odG1sID0gUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cDtcblByaXNtLmxhbmd1YWdlcy5tYXRobWwgPSBQcmlzbS5sYW5ndWFnZXMubWFya3VwO1xuUHJpc20ubGFuZ3VhZ2VzLnN2ZyA9IFByaXNtLmxhbmd1YWdlcy5tYXJrdXA7XG5QcmlzbS5sYW5ndWFnZXMueG1sID0gUHJpc20ubGFuZ3VhZ2VzLmV4dGVuZCgnbWFya3VwJywge30pO1xuUHJpc20ubGFuZ3VhZ2VzLnNzbWwgPSBQcmlzbS5sYW5ndWFnZXMueG1sO1xuUHJpc20ubGFuZ3VhZ2VzLmF0b20gPSBQcmlzbS5sYW5ndWFnZXMueG1sO1xuUHJpc20ubGFuZ3VhZ2VzLnJzcyA9IFByaXNtLmxhbmd1YWdlcy54bWw7XG5cbi8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgQmVnaW4gcHJpc20tY3NzLmpzXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cbihmdW5jdGlvbiAoUHJpc20pIHtcbiAgdmFyIHN0cmluZyA9IC8oPzpcIig/OlxcXFwoPzpcXHJcXG58W1xcc1xcU10pfFteXCJcXFxcXFxyXFxuXSkqXCJ8Jyg/OlxcXFwoPzpcXHJcXG58W1xcc1xcU10pfFteJ1xcXFxcXHJcXG5dKSonKS87XG4gIFByaXNtLmxhbmd1YWdlcy5jc3MgPSB7XG4gICAgJ2NvbW1lbnQnOiAvXFwvXFwqW1xcc1xcU10qP1xcKlxcLy8sXG4gICAgJ2F0cnVsZSc6IHtcbiAgICAgIHBhdHRlcm46IFJlZ0V4cCgnQFtcXFxcdy1dKD86JyArIC9bXjt7XFxzXCInXXxcXHMrKD8hXFxzKS8uc291cmNlICsgJ3wnICsgc3RyaW5nLnNvdXJjZSArICcpKj8nICsgLyg/Ojt8KD89XFxzKlxceykpLy5zb3VyY2UpLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdydWxlJzogL15AW1xcdy1dKy8sXG4gICAgICAgICdzZWxlY3Rvci1mdW5jdGlvbi1hcmd1bWVudCc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvKFxcYnNlbGVjdG9yXFxzKlxcKFxccyooPyFbXFxzKV0pKSg/OlteKClcXHNdfFxccysoPyFbXFxzKV0pfFxcKCg/OlteKCldfFxcKFteKCldKlxcKSkqXFwpKSsoPz1cXHMqXFwpKS8sXG4gICAgICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgICAgICBhbGlhczogJ3NlbGVjdG9yJ1xuICAgICAgICB9LFxuICAgICAgICAna2V5d29yZCc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvKF58W15cXHctXSkoPzphbmR8bm90fG9ubHl8b3IpKD8hW1xcdy1dKS8sXG4gICAgICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIC8vIFNlZSByZXN0IGJlbG93XG4gICAgICB9XG4gICAgfSxcbiAgICAndXJsJzoge1xuICAgICAgLy8gaHR0cHM6Ly9kcmFmdHMuY3Nzd2cub3JnL2Nzcy12YWx1ZXMtMy8jdXJsc1xuICAgICAgcGF0dGVybjogUmVnRXhwKCdcXFxcYnVybFxcXFwoKD86JyArIHN0cmluZy5zb3VyY2UgKyAnfCcgKyAvKD86W15cXFxcXFxyXFxuKClcIiddfFxcXFxbXFxzXFxTXSkqLy5zb3VyY2UgKyAnKVxcXFwpJywgJ2knKSxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAnZnVuY3Rpb24nOiAvXnVybC9pLFxuICAgICAgICAncHVuY3R1YXRpb24nOiAvXlxcKHxcXCkkLyxcbiAgICAgICAgJ3N0cmluZyc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiBSZWdFeHAoJ14nICsgc3RyaW5nLnNvdXJjZSArICckJyksXG4gICAgICAgICAgYWxpYXM6ICd1cmwnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgICdzZWxlY3Rvcic6IHtcbiAgICAgIHBhdHRlcm46IFJlZ0V4cCgnKF58W3t9XFxcXHNdKVtee31cXFxcc10oPzpbXnt9O1wiXFwnXFxcXHNdfFxcXFxzKyg/IVtcXFxcc3tdKXwnICsgc3RyaW5nLnNvdXJjZSArICcpKig/PVxcXFxzKlxcXFx7KScpLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgIH0sXG4gICAgJ3N0cmluZyc6IHtcbiAgICAgIHBhdHRlcm46IHN0cmluZyxcbiAgICAgIGdyZWVkeTogdHJ1ZVxuICAgIH0sXG4gICAgJ3Byb3BlcnR5Jzoge1xuICAgICAgcGF0dGVybjogLyhefFteLVxcd1xceEEwLVxcdUZGRkZdKSg/IVxccylbLV9hLXpcXHhBMC1cXHVGRkZGXSg/Oig/IVxccylbLVxcd1xceEEwLVxcdUZGRkZdKSooPz1cXHMqOikvaSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICB9LFxuICAgICdpbXBvcnRhbnQnOiAvIWltcG9ydGFudFxcYi9pLFxuICAgICdmdW5jdGlvbic6IHtcbiAgICAgIHBhdHRlcm46IC8oXnxbXi1hLXowLTldKVstYS16MC05XSsoPz1cXCgpL2ksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgfSxcbiAgICAncHVuY3R1YXRpb24nOiAvWygpe307OixdL1xuICB9O1xuICBQcmlzbS5sYW5ndWFnZXMuY3NzWydhdHJ1bGUnXS5pbnNpZGUucmVzdCA9IFByaXNtLmxhbmd1YWdlcy5jc3M7XG4gIHZhciBtYXJrdXAgPSBQcmlzbS5sYW5ndWFnZXMubWFya3VwO1xuICBpZiAobWFya3VwKSB7XG4gICAgbWFya3VwLnRhZy5hZGRJbmxpbmVkKCdzdHlsZScsICdjc3MnKTtcbiAgICBtYXJrdXAudGFnLmFkZEF0dHJpYnV0ZSgnc3R5bGUnLCAnY3NzJyk7XG4gIH1cbn0pKFByaXNtKTtcblxuLyogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICBCZWdpbiBwcmlzbS1jbGlrZS5qc1xuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXG5QcmlzbS5sYW5ndWFnZXMuY2xpa2UgPSB7XG4gICdjb21tZW50JzogW3tcbiAgICBwYXR0ZXJuOiAvKF58W15cXFxcXSlcXC9cXCpbXFxzXFxTXSo/KD86XFwqXFwvfCQpLyxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGdyZWVkeTogdHJ1ZVxuICB9LCB7XG4gICAgcGF0dGVybjogLyhefFteXFxcXDpdKVxcL1xcLy4qLyxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGdyZWVkeTogdHJ1ZVxuICB9XSxcbiAgJ3N0cmluZyc6IHtcbiAgICBwYXR0ZXJuOiAvKFtcIiddKSg/OlxcXFwoPzpcXHJcXG58W1xcc1xcU10pfCg/IVxcMSlbXlxcXFxcXHJcXG5dKSpcXDEvLFxuICAgIGdyZWVkeTogdHJ1ZVxuICB9LFxuICAnY2xhc3MtbmFtZSc6IHtcbiAgICBwYXR0ZXJuOiAvKFxcYig/OmNsYXNzfGV4dGVuZHN8aW1wbGVtZW50c3xpbnN0YW5jZW9mfGludGVyZmFjZXxuZXd8dHJhaXQpXFxzK3xcXGJjYXRjaFxccytcXCgpW1xcdy5cXFxcXSsvaSxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGluc2lkZToge1xuICAgICAgJ3B1bmN0dWF0aW9uJzogL1suXFxcXF0vXG4gICAgfVxuICB9LFxuICAna2V5d29yZCc6IC9cXGIoPzpicmVha3xjYXRjaHxjb250aW51ZXxkb3xlbHNlfGZpbmFsbHl8Zm9yfGZ1bmN0aW9ufGlmfGlufGluc3RhbmNlb2Z8bmV3fG51bGx8cmV0dXJufHRocm93fHRyeXx3aGlsZSlcXGIvLFxuICAnYm9vbGVhbic6IC9cXGIoPzpmYWxzZXx0cnVlKVxcYi8sXG4gICdmdW5jdGlvbic6IC9cXGJcXHcrKD89XFwoKS8sXG4gICdudW1iZXInOiAvXFxiMHhbXFxkYS1mXStcXGJ8KD86XFxiXFxkKyg/OlxcLlxcZCopP3xcXEJcXC5cXGQrKSg/OmVbKy1dP1xcZCspPy9pLFxuICAnb3BlcmF0b3InOiAvWzw+XT0/fFshPV09Pz0/fC0tP3xcXCtcXCs/fCYmP3xcXHxcXHw/fFs/Ki9+XiVdLyxcbiAgJ3B1bmN0dWF0aW9uJzogL1t7fVtcXF07KCksLjpdL1xufTtcblxuLyogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICBCZWdpbiBwcmlzbS1qYXZhc2NyaXB0LmpzXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cblByaXNtLmxhbmd1YWdlcy5qYXZhc2NyaXB0ID0gUHJpc20ubGFuZ3VhZ2VzLmV4dGVuZCgnY2xpa2UnLCB7XG4gICdjbGFzcy1uYW1lJzogW1ByaXNtLmxhbmd1YWdlcy5jbGlrZVsnY2xhc3MtbmFtZSddLCB7XG4gICAgcGF0dGVybjogLyhefFteJFxcd1xceEEwLVxcdUZGRkZdKSg/IVxccylbXyRBLVpcXHhBMC1cXHVGRkZGXSg/Oig/IVxccylbJFxcd1xceEEwLVxcdUZGRkZdKSooPz1cXC4oPzpjb25zdHJ1Y3Rvcnxwcm90b3R5cGUpKS8sXG4gICAgbG9va2JlaGluZDogdHJ1ZVxuICB9XSxcbiAgJ2tleXdvcmQnOiBbe1xuICAgIHBhdHRlcm46IC8oKD86XnxcXH0pXFxzKiljYXRjaFxcYi8sXG4gICAgbG9va2JlaGluZDogdHJ1ZVxuICB9LCB7XG4gICAgcGF0dGVybjogLyhefFteLl18XFwuXFwuXFwuXFxzKilcXGIoPzphc3xhc3NlcnQoPz1cXHMqXFx7KXxhc3luYyg/PVxccyooPzpmdW5jdGlvblxcYnxcXCh8WyRcXHdcXHhBMC1cXHVGRkZGXXwkKSl8YXdhaXR8YnJlYWt8Y2FzZXxjbGFzc3xjb25zdHxjb250aW51ZXxkZWJ1Z2dlcnxkZWZhdWx0fGRlbGV0ZXxkb3xlbHNlfGVudW18ZXhwb3J0fGV4dGVuZHN8ZmluYWxseSg/PVxccyooPzpcXHt8JCkpfGZvcnxmcm9tKD89XFxzKig/OlsnXCJdfCQpKXxmdW5jdGlvbnwoPzpnZXR8c2V0KSg/PVxccyooPzpbI1xcWyRcXHdcXHhBMC1cXHVGRkZGXXwkKSl8aWZ8aW1wbGVtZW50c3xpbXBvcnR8aW58aW5zdGFuY2VvZnxpbnRlcmZhY2V8bGV0fG5ld3xudWxsfG9mfHBhY2thZ2V8cHJpdmF0ZXxwcm90ZWN0ZWR8cHVibGljfHJldHVybnxzdGF0aWN8c3VwZXJ8c3dpdGNofHRoaXN8dGhyb3d8dHJ5fHR5cGVvZnx1bmRlZmluZWR8dmFyfHZvaWR8d2hpbGV8d2l0aHx5aWVsZClcXGIvLFxuICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgfV0sXG4gIC8vIEFsbG93IGZvciBhbGwgbm9uLUFTQ0lJIGNoYXJhY3RlcnMgKFNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMDA4NDQ0KVxuICAnZnVuY3Rpb24nOiAvIz8oPyFcXHMpW18kYS16QS1aXFx4QTAtXFx1RkZGRl0oPzooPyFcXHMpWyRcXHdcXHhBMC1cXHVGRkZGXSkqKD89XFxzKig/OlxcLlxccyooPzphcHBseXxiaW5kfGNhbGwpXFxzKik/XFwoKS8sXG4gICdudW1iZXInOiB7XG4gICAgcGF0dGVybjogUmVnRXhwKC8oXnxbXlxcdyRdKS8uc291cmNlICsgJyg/OicgKyAoXG4gICAgLy8gY29uc3RhbnRcbiAgICAvTmFOfEluZmluaXR5Ly5zb3VyY2UgKyAnfCcgK1xuICAgIC8vIGJpbmFyeSBpbnRlZ2VyXG4gICAgLzBbYkJdWzAxXSsoPzpfWzAxXSspKm4/Ly5zb3VyY2UgKyAnfCcgK1xuICAgIC8vIG9jdGFsIGludGVnZXJcbiAgICAvMFtvT11bMC03XSsoPzpfWzAtN10rKSpuPy8uc291cmNlICsgJ3wnICtcbiAgICAvLyBoZXhhZGVjaW1hbCBpbnRlZ2VyXG4gICAgLzBbeFhdW1xcZEEtRmEtZl0rKD86X1tcXGRBLUZhLWZdKykqbj8vLnNvdXJjZSArICd8JyArXG4gICAgLy8gZGVjaW1hbCBiaWdpbnRcbiAgICAvXFxkKyg/Ol9cXGQrKSpuLy5zb3VyY2UgKyAnfCcgK1xuICAgIC8vIGRlY2ltYWwgbnVtYmVyIChpbnRlZ2VyIG9yIGZsb2F0KSBidXQgbm8gYmlnaW50XG4gICAgLyg/OlxcZCsoPzpfXFxkKykqKD86XFwuKD86XFxkKyg/Ol9cXGQrKSopPyk/fFxcLlxcZCsoPzpfXFxkKykqKSg/OltFZV1bKy1dP1xcZCsoPzpfXFxkKykqKT8vLnNvdXJjZSkgKyAnKScgKyAvKD8hW1xcdyRdKS8uc291cmNlKSxcbiAgICBsb29rYmVoaW5kOiB0cnVlXG4gIH0sXG4gICdvcGVyYXRvcic6IC8tLXxcXCtcXCt8XFwqXFwqPT98PT58JiY9P3xcXHxcXHw9P3xbIT1dPT18PDw9P3w+Pj4/PT98Wy0rKi8lJnxeIT08Pl09P3xcXC57M318XFw/XFw/PT98XFw/XFwuP3xbfjpdL1xufSk7XG5QcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdFsnY2xhc3MtbmFtZSddWzBdLnBhdHRlcm4gPSAvKFxcYig/OmNsYXNzfGV4dGVuZHN8aW1wbGVtZW50c3xpbnN0YW5jZW9mfGludGVyZmFjZXxuZXcpXFxzKylbXFx3LlxcXFxdKy87XG5QcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdqYXZhc2NyaXB0JywgJ2tleXdvcmQnLCB7XG4gICdyZWdleCc6IHtcbiAgICBwYXR0ZXJuOiBSZWdFeHAoXG4gICAgLy8gbG9va2JlaGluZFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWdleHAvbm8tZHVwZS1jaGFyYWN0ZXJzLWNoYXJhY3Rlci1jbGFzc1xuICAgIC8oKD86XnxbXiRcXHdcXHhBMC1cXHVGRkZGLlwiJ1xcXSlcXHNdfFxcYig/OnJldHVybnx5aWVsZCkpXFxzKikvLnNvdXJjZSArXG4gICAgLy8gUmVnZXggcGF0dGVybjpcbiAgICAvLyBUaGVyZSBhcmUgMiByZWdleCBwYXR0ZXJucyBoZXJlLiBUaGUgUmVnRXhwIHNldCBub3RhdGlvbiBwcm9wb3NhbCBhZGRlZCBzdXBwb3J0IGZvciBuZXN0ZWQgY2hhcmFjdGVyXG4gICAgLy8gY2xhc3NlcyBpZiB0aGUgYHZgIGZsYWcgaXMgcHJlc2VudC4gVW5mb3J0dW5hdGVseSwgbmVzdGVkIENDcyBhcmUgYm90aCBjb250ZXh0LWZyZWUgYW5kIGluY29tcGF0aWJsZVxuICAgIC8vIHdpdGggdGhlIG9ubHkgc3ludGF4LCBzbyB3ZSBoYXZlIHRvIGRlZmluZSAyIGRpZmZlcmVudCByZWdleCBwYXR0ZXJucy5cbiAgICAvXFwvLy5zb3VyY2UgKyAnKD86JyArIC8oPzpcXFsoPzpbXlxcXVxcXFxcXHJcXG5dfFxcXFwuKSpcXF18XFxcXC58W14vXFxcXFxcW1xcclxcbl0pK1xcL1tkZ2lteXVzXXswLDd9Ly5zb3VyY2UgKyAnfCcgK1xuICAgIC8vIGB2YCBmbGFnIHN5bnRheC4gVGhpcyBzdXBwb3J0cyAzIGxldmVscyBvZiBuZXN0ZWQgY2hhcmFjdGVyIGNsYXNzZXMuXG4gICAgLyg/OlxcWyg/OlteW1xcXVxcXFxcXHJcXG5dfFxcXFwufFxcWyg/OlteW1xcXVxcXFxcXHJcXG5dfFxcXFwufFxcWyg/OlteW1xcXVxcXFxcXHJcXG5dfFxcXFwuKSpcXF0pKlxcXSkqXFxdfFxcXFwufFteL1xcXFxcXFtcXHJcXG5dKStcXC9bZGdpbXl1c117MCw3fXZbZGdpbXl1c117MCw3fS8uc291cmNlICsgJyknICtcbiAgICAvLyBsb29rYWhlYWRcbiAgICAvKD89KD86XFxzfFxcL1xcKig/OlteKl18XFwqKD8hXFwvKSkqXFwqXFwvKSooPzokfFtcXHJcXG4sLjs6fSlcXF1dfFxcL1xcLykpLy5zb3VyY2UpLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgZ3JlZWR5OiB0cnVlLFxuICAgIGluc2lkZToge1xuICAgICAgJ3JlZ2V4LXNvdXJjZSc6IHtcbiAgICAgICAgcGF0dGVybjogL14oXFwvKVtcXHNcXFNdKyg/PVxcL1thLXpdKiQpLyxcbiAgICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgICAgYWxpYXM6ICdsYW5ndWFnZS1yZWdleCcsXG4gICAgICAgIGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLnJlZ2V4XG4gICAgICB9LFxuICAgICAgJ3JlZ2V4LWRlbGltaXRlcic6IC9eXFwvfFxcLyQvLFxuICAgICAgJ3JlZ2V4LWZsYWdzJzogL15bYS16XSskL1xuICAgIH1cbiAgfSxcbiAgLy8gVGhpcyBtdXN0IGJlIGRlY2xhcmVkIGJlZm9yZSBrZXl3b3JkIGJlY2F1c2Ugd2UgdXNlIFwiZnVuY3Rpb25cIiBpbnNpZGUgdGhlIGxvb2stZm9yd2FyZFxuICAnZnVuY3Rpb24tdmFyaWFibGUnOiB7XG4gICAgcGF0dGVybjogLyM/KD8hXFxzKVtfJGEtekEtWlxceEEwLVxcdUZGRkZdKD86KD8hXFxzKVskXFx3XFx4QTAtXFx1RkZGRl0pKig/PVxccypbPTpdXFxzKig/OmFzeW5jXFxzKik/KD86XFxiZnVuY3Rpb25cXGJ8KD86XFwoKD86W14oKV18XFwoW14oKV0qXFwpKSpcXCl8KD8hXFxzKVtfJGEtekEtWlxceEEwLVxcdUZGRkZdKD86KD8hXFxzKVskXFx3XFx4QTAtXFx1RkZGRl0pKilcXHMqPT4pKS8sXG4gICAgYWxpYXM6ICdmdW5jdGlvbidcbiAgfSxcbiAgJ3BhcmFtZXRlcic6IFt7XG4gICAgcGF0dGVybjogLyhmdW5jdGlvbig/OlxccysoPyFcXHMpW18kYS16QS1aXFx4QTAtXFx1RkZGRl0oPzooPyFcXHMpWyRcXHdcXHhBMC1cXHVGRkZGXSkqKT9cXHMqXFwoXFxzKikoPyFcXHMpKD86W14oKVxcc118XFxzKyg/IVtcXHMpXSl8XFwoW14oKV0qXFwpKSsoPz1cXHMqXFwpKS8sXG4gICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICBpbnNpZGU6IFByaXNtLmxhbmd1YWdlcy5qYXZhc2NyaXB0XG4gIH0sIHtcbiAgICBwYXR0ZXJuOiAvKF58W14kXFx3XFx4QTAtXFx1RkZGRl0pKD8hXFxzKVtfJGEtelxceEEwLVxcdUZGRkZdKD86KD8hXFxzKVskXFx3XFx4QTAtXFx1RkZGRl0pKig/PVxccyo9PikvaSxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHRcbiAgfSwge1xuICAgIHBhdHRlcm46IC8oXFwoXFxzKikoPyFcXHMpKD86W14oKVxcc118XFxzKyg/IVtcXHMpXSl8XFwoW14oKV0qXFwpKSsoPz1cXHMqXFwpXFxzKj0+KS8sXG4gICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICBpbnNpZGU6IFByaXNtLmxhbmd1YWdlcy5qYXZhc2NyaXB0XG4gIH0sIHtcbiAgICBwYXR0ZXJuOiAvKCg/OlxcYnxcXHN8XikoPyEoPzphc3xhc3luY3xhd2FpdHxicmVha3xjYXNlfGNhdGNofGNsYXNzfGNvbnN0fGNvbnRpbnVlfGRlYnVnZ2VyfGRlZmF1bHR8ZGVsZXRlfGRvfGVsc2V8ZW51bXxleHBvcnR8ZXh0ZW5kc3xmaW5hbGx5fGZvcnxmcm9tfGZ1bmN0aW9ufGdldHxpZnxpbXBsZW1lbnRzfGltcG9ydHxpbnxpbnN0YW5jZW9mfGludGVyZmFjZXxsZXR8bmV3fG51bGx8b2Z8cGFja2FnZXxwcml2YXRlfHByb3RlY3RlZHxwdWJsaWN8cmV0dXJufHNldHxzdGF0aWN8c3VwZXJ8c3dpdGNofHRoaXN8dGhyb3d8dHJ5fHR5cGVvZnx1bmRlZmluZWR8dmFyfHZvaWR8d2hpbGV8d2l0aHx5aWVsZCkoPyFbJFxcd1xceEEwLVxcdUZGRkZdKSkoPzooPyFcXHMpW18kYS16QS1aXFx4QTAtXFx1RkZGRl0oPzooPyFcXHMpWyRcXHdcXHhBMC1cXHVGRkZGXSkqXFxzKilcXChcXHMqfFxcXVxccypcXChcXHMqKSg/IVxccykoPzpbXigpXFxzXXxcXHMrKD8hW1xccyldKXxcXChbXigpXSpcXCkpKyg/PVxccypcXClcXHMqXFx7KS8sXG4gICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICBpbnNpZGU6IFByaXNtLmxhbmd1YWdlcy5qYXZhc2NyaXB0XG4gIH1dLFxuICAnY29uc3RhbnQnOiAvXFxiW0EtWl0oPzpbQS1aX118XFxkeD8pKlxcYi9cbn0pO1xuUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnamF2YXNjcmlwdCcsICdzdHJpbmcnLCB7XG4gICdoYXNoYmFuZyc6IHtcbiAgICBwYXR0ZXJuOiAvXiMhLiovLFxuICAgIGdyZWVkeTogdHJ1ZSxcbiAgICBhbGlhczogJ2NvbW1lbnQnXG4gIH0sXG4gICd0ZW1wbGF0ZS1zdHJpbmcnOiB7XG4gICAgcGF0dGVybjogL2AoPzpcXFxcW1xcc1xcU118XFwkXFx7KD86W157fV18XFx7KD86W157fV18XFx7W159XSpcXH0pKlxcfSkrXFx9fCg/IVxcJFxceylbXlxcXFxgXSkqYC8sXG4gICAgZ3JlZWR5OiB0cnVlLFxuICAgIGluc2lkZToge1xuICAgICAgJ3RlbXBsYXRlLXB1bmN0dWF0aW9uJzoge1xuICAgICAgICBwYXR0ZXJuOiAvXmB8YCQvLFxuICAgICAgICBhbGlhczogJ3N0cmluZydcbiAgICAgIH0sXG4gICAgICAnaW50ZXJwb2xhdGlvbic6IHtcbiAgICAgICAgcGF0dGVybjogLygoPzpefFteXFxcXF0pKD86XFxcXHsyfSkqKVxcJFxceyg/Oltee31dfFxceyg/Oltee31dfFxce1tefV0qXFx9KSpcXH0pK1xcfS8sXG4gICAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICAgIGluc2lkZToge1xuICAgICAgICAgICdpbnRlcnBvbGF0aW9uLXB1bmN0dWF0aW9uJzoge1xuICAgICAgICAgICAgcGF0dGVybjogL15cXCRcXHt8XFx9JC8sXG4gICAgICAgICAgICBhbGlhczogJ3B1bmN0dWF0aW9uJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVzdDogUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHRcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgICdzdHJpbmcnOiAvW1xcc1xcU10rL1xuICAgIH1cbiAgfSxcbiAgJ3N0cmluZy1wcm9wZXJ0eSc6IHtcbiAgICBwYXR0ZXJuOiAvKCg/Ol58Wyx7XSlbIFxcdF0qKShbXCInXSkoPzpcXFxcKD86XFxyXFxufFtcXHNcXFNdKXwoPyFcXDIpW15cXFxcXFxyXFxuXSkqXFwyKD89XFxzKjopL20sXG4gICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICBncmVlZHk6IHRydWUsXG4gICAgYWxpYXM6ICdwcm9wZXJ0eSdcbiAgfVxufSk7XG5QcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdqYXZhc2NyaXB0JywgJ29wZXJhdG9yJywge1xuICAnbGl0ZXJhbC1wcm9wZXJ0eSc6IHtcbiAgICBwYXR0ZXJuOiAvKCg/Ol58Wyx7XSlbIFxcdF0qKSg/IVxccylbXyRhLXpBLVpcXHhBMC1cXHVGRkZGXSg/Oig/IVxccylbJFxcd1xceEEwLVxcdUZGRkZdKSooPz1cXHMqOikvbSxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGFsaWFzOiAncHJvcGVydHknXG4gIH1cbn0pO1xuaWYgKFByaXNtLmxhbmd1YWdlcy5tYXJrdXApIHtcbiAgUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cC50YWcuYWRkSW5saW5lZCgnc2NyaXB0JywgJ2phdmFzY3JpcHQnKTtcblxuICAvLyBhZGQgYXR0cmlidXRlIHN1cHBvcnQgZm9yIGFsbCBET00gZXZlbnRzLlxuICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9FdmVudHMjU3RhbmRhcmRfZXZlbnRzXG4gIFByaXNtLmxhbmd1YWdlcy5tYXJrdXAudGFnLmFkZEF0dHJpYnV0ZSgvb24oPzphYm9ydHxibHVyfGNoYW5nZXxjbGlja3xjb21wb3NpdGlvbig/OmVuZHxzdGFydHx1cGRhdGUpfGRibGNsaWNrfGVycm9yfGZvY3VzKD86aW58b3V0KT98a2V5KD86ZG93bnx1cCl8bG9hZHxtb3VzZSg/OmRvd258ZW50ZXJ8bGVhdmV8bW92ZXxvdXR8b3Zlcnx1cCl8cmVzZXR8cmVzaXplfHNjcm9sbHxzZWxlY3R8c2xvdGNoYW5nZXxzdWJtaXR8dW5sb2FkfHdoZWVsKS8uc291cmNlLCAnamF2YXNjcmlwdCcpO1xufVxuUHJpc20ubGFuZ3VhZ2VzLmpzID0gUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHQ7XG5cbi8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgQmVnaW4gcHJpc20tZmlsZS1oaWdobGlnaHQuanNcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cblxuKGZ1bmN0aW9uICgpIHtcbiAgaWYgKHR5cGVvZiBQcmlzbSA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9FbGVtZW50L21hdGNoZXMjUG9seWZpbGxcbiAgaWYgKCFFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzKSB7XG4gICAgRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcyA9IEVsZW1lbnQucHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yIHx8IEVsZW1lbnQucHJvdG90eXBlLndlYmtpdE1hdGNoZXNTZWxlY3RvcjtcbiAgfVxuICB2YXIgTE9BRElOR19NRVNTQUdFID0gJ0xvYWRpbmfigKYnO1xuICB2YXIgRkFJTFVSRV9NRVNTQUdFID0gZnVuY3Rpb24gKHN0YXR1cywgbWVzc2FnZSkge1xuICAgIHJldHVybiAn4pyWIEVycm9yICcgKyBzdGF0dXMgKyAnIHdoaWxlIGZldGNoaW5nIGZpbGU6ICcgKyBtZXNzYWdlO1xuICB9O1xuICB2YXIgRkFJTFVSRV9FTVBUWV9NRVNTQUdFID0gJ+KcliBFcnJvcjogRmlsZSBkb2VzIG5vdCBleGlzdCBvciBpcyBlbXB0eSc7XG4gIHZhciBFWFRFTlNJT05TID0ge1xuICAgICdqcyc6ICdqYXZhc2NyaXB0JyxcbiAgICAncHknOiAncHl0aG9uJyxcbiAgICAncmInOiAncnVieScsXG4gICAgJ3BzMSc6ICdwb3dlcnNoZWxsJyxcbiAgICAncHNtMSc6ICdwb3dlcnNoZWxsJyxcbiAgICAnc2gnOiAnYmFzaCcsXG4gICAgJ2JhdCc6ICdiYXRjaCcsXG4gICAgJ2gnOiAnYycsXG4gICAgJ3RleCc6ICdsYXRleCdcbiAgfTtcbiAgdmFyIFNUQVRVU19BVFRSID0gJ2RhdGEtc3JjLXN0YXR1cyc7XG4gIHZhciBTVEFUVVNfTE9BRElORyA9ICdsb2FkaW5nJztcbiAgdmFyIFNUQVRVU19MT0FERUQgPSAnbG9hZGVkJztcbiAgdmFyIFNUQVRVU19GQUlMRUQgPSAnZmFpbGVkJztcbiAgdmFyIFNFTEVDVE9SID0gJ3ByZVtkYXRhLXNyY106bm90KFsnICsgU1RBVFVTX0FUVFIgKyAnPVwiJyArIFNUQVRVU19MT0FERUQgKyAnXCJdKScgKyAnOm5vdChbJyArIFNUQVRVU19BVFRSICsgJz1cIicgKyBTVEFUVVNfTE9BRElORyArICdcIl0pJztcblxuICAvKipcbiAgICogTG9hZHMgdGhlIGdpdmVuIGZpbGUuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgVGhlIFVSTCBvciBwYXRoIG9mIHRoZSBzb3VyY2UgZmlsZSB0byBsb2FkLlxuICAgKiBAcGFyYW0geyhyZXN1bHQ6IHN0cmluZykgPT4gdm9pZH0gc3VjY2Vzc1xuICAgKiBAcGFyYW0geyhyZWFzb246IHN0cmluZykgPT4gdm9pZH0gZXJyb3JcbiAgICovXG4gIGZ1bmN0aW9uIGxvYWRGaWxlKHNyYywgc3VjY2VzcywgZXJyb3IpIHtcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oJ0dFVCcsIHNyYywgdHJ1ZSk7XG4gICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PSA0KSB7XG4gICAgICAgIGlmICh4aHIuc3RhdHVzIDwgNDAwICYmIHhoci5yZXNwb25zZVRleHQpIHtcbiAgICAgICAgICBzdWNjZXNzKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh4aHIuc3RhdHVzID49IDQwMCkge1xuICAgICAgICAgICAgZXJyb3IoRkFJTFVSRV9NRVNTQUdFKHhoci5zdGF0dXMsIHhoci5zdGF0dXNUZXh0KSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVycm9yKEZBSUxVUkVfRU1QVFlfTUVTU0FHRSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICB4aHIuc2VuZChudWxsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIGdpdmVuIHJhbmdlLlxuICAgKlxuICAgKiBUaGlzIHJldHVybnMgYSByYW5nZSB3aXRoIGluY2x1c2l2ZSBlbmRzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZyB8IG51bGwgfCB1bmRlZmluZWR9IHJhbmdlXG4gICAqIEByZXR1cm5zIHtbbnVtYmVyLCBudW1iZXIgfCB1bmRlZmluZWRdIHwgdW5kZWZpbmVkfVxuICAgKi9cbiAgZnVuY3Rpb24gcGFyc2VSYW5nZShyYW5nZSkge1xuICAgIHZhciBtID0gL15cXHMqKFxcZCspXFxzKig/OigsKVxccyooPzooXFxkKylcXHMqKT8pPyQvLmV4ZWMocmFuZ2UgfHwgJycpO1xuICAgIGlmIChtKSB7XG4gICAgICB2YXIgc3RhcnQgPSBOdW1iZXIobVsxXSk7XG4gICAgICB2YXIgY29tbWEgPSBtWzJdO1xuICAgICAgdmFyIGVuZCA9IG1bM107XG4gICAgICBpZiAoIWNvbW1hKSB7XG4gICAgICAgIHJldHVybiBbc3RhcnQsIHN0YXJ0XTtcbiAgICAgIH1cbiAgICAgIGlmICghZW5kKSB7XG4gICAgICAgIHJldHVybiBbc3RhcnQsIHVuZGVmaW5lZF07XG4gICAgICB9XG4gICAgICByZXR1cm4gW3N0YXJ0LCBOdW1iZXIoZW5kKV07XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgUHJpc20uaG9va3MuYWRkKCdiZWZvcmUtaGlnaGxpZ2h0YWxsJywgZnVuY3Rpb24gKGVudikge1xuICAgIGVudi5zZWxlY3RvciArPSAnLCAnICsgU0VMRUNUT1I7XG4gIH0pO1xuICBQcmlzbS5ob29rcy5hZGQoJ2JlZm9yZS1zYW5pdHktY2hlY2snLCBmdW5jdGlvbiAoZW52KSB7XG4gICAgdmFyIHByZSA9IC8qKiBAdHlwZSB7SFRNTFByZUVsZW1lbnR9ICovZW52LmVsZW1lbnQ7XG4gICAgaWYgKHByZS5tYXRjaGVzKFNFTEVDVE9SKSkge1xuICAgICAgZW52LmNvZGUgPSAnJzsgLy8gZmFzdC1wYXRoIHRoZSB3aG9sZSB0aGluZyBhbmQgZ28gdG8gY29tcGxldGVcblxuICAgICAgcHJlLnNldEF0dHJpYnV0ZShTVEFUVVNfQVRUUiwgU1RBVFVTX0xPQURJTkcpOyAvLyBtYXJrIGFzIGxvYWRpbmdcblxuICAgICAgLy8gYWRkIGNvZGUgZWxlbWVudCB3aXRoIGxvYWRpbmcgbWVzc2FnZVxuICAgICAgdmFyIGNvZGUgPSBwcmUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnQ09ERScpKTtcbiAgICAgIGNvZGUudGV4dENvbnRlbnQgPSBMT0FESU5HX01FU1NBR0U7XG4gICAgICB2YXIgc3JjID0gcHJlLmdldEF0dHJpYnV0ZSgnZGF0YS1zcmMnKTtcbiAgICAgIHZhciBsYW5ndWFnZSA9IGVudi5sYW5ndWFnZTtcbiAgICAgIGlmIChsYW5ndWFnZSA9PT0gJ25vbmUnKSB7XG4gICAgICAgIC8vIHRoZSBsYW5ndWFnZSBtaWdodCBiZSAnbm9uZScgYmVjYXVzZSB0aGVyZSBpcyBubyBsYW5ndWFnZSBzZXQ7XG4gICAgICAgIC8vIGluIHRoaXMgY2FzZSwgd2Ugd2FudCB0byB1c2UgdGhlIGV4dGVuc2lvbiBhcyB0aGUgbGFuZ3VhZ2VcbiAgICAgICAgdmFyIGV4dGVuc2lvbiA9ICgvXFwuKFxcdyspJC8uZXhlYyhzcmMpIHx8IFssICdub25lJ10pWzFdO1xuICAgICAgICBsYW5ndWFnZSA9IEVYVEVOU0lPTlNbZXh0ZW5zaW9uXSB8fCBleHRlbnNpb247XG4gICAgICB9XG5cbiAgICAgIC8vIHNldCBsYW5ndWFnZSBjbGFzc2VzXG4gICAgICBQcmlzbS51dGlsLnNldExhbmd1YWdlKGNvZGUsIGxhbmd1YWdlKTtcbiAgICAgIFByaXNtLnV0aWwuc2V0TGFuZ3VhZ2UocHJlLCBsYW5ndWFnZSk7XG5cbiAgICAgIC8vIHByZWxvYWQgdGhlIGxhbmd1YWdlXG4gICAgICB2YXIgYXV0b2xvYWRlciA9IFByaXNtLnBsdWdpbnMuYXV0b2xvYWRlcjtcbiAgICAgIGlmIChhdXRvbG9hZGVyKSB7XG4gICAgICAgIGF1dG9sb2FkZXIubG9hZExhbmd1YWdlcyhsYW5ndWFnZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIGxvYWQgZmlsZVxuICAgICAgbG9hZEZpbGUoc3JjLCBmdW5jdGlvbiAodGV4dCkge1xuICAgICAgICAvLyBtYXJrIGFzIGxvYWRlZFxuICAgICAgICBwcmUuc2V0QXR0cmlidXRlKFNUQVRVU19BVFRSLCBTVEFUVVNfTE9BREVEKTtcblxuICAgICAgICAvLyBoYW5kbGUgZGF0YS1yYW5nZVxuICAgICAgICB2YXIgcmFuZ2UgPSBwYXJzZVJhbmdlKHByZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtcmFuZ2UnKSk7XG4gICAgICAgIGlmIChyYW5nZSkge1xuICAgICAgICAgIHZhciBsaW5lcyA9IHRleHQuc3BsaXQoL1xcclxcbj98XFxuL2cpO1xuXG4gICAgICAgICAgLy8gdGhlIHJhbmdlIGlzIG9uZS1iYXNlZCBhbmQgaW5jbHVzaXZlIG9uIGJvdGggZW5kc1xuICAgICAgICAgIHZhciBzdGFydCA9IHJhbmdlWzBdO1xuICAgICAgICAgIHZhciBlbmQgPSByYW5nZVsxXSA9PSBudWxsID8gbGluZXMubGVuZ3RoIDogcmFuZ2VbMV07XG4gICAgICAgICAgaWYgKHN0YXJ0IDwgMCkge1xuICAgICAgICAgICAgc3RhcnQgKz0gbGluZXMubGVuZ3RoO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzdGFydCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHN0YXJ0IC0gMSwgbGluZXMubGVuZ3RoKSk7XG4gICAgICAgICAgaWYgKGVuZCA8IDApIHtcbiAgICAgICAgICAgIGVuZCArPSBsaW5lcy5sZW5ndGg7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVuZCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGVuZCwgbGluZXMubGVuZ3RoKSk7XG4gICAgICAgICAgdGV4dCA9IGxpbmVzLnNsaWNlKHN0YXJ0LCBlbmQpLmpvaW4oJ1xcbicpO1xuXG4gICAgICAgICAgLy8gYWRkIGRhdGEtc3RhcnQgZm9yIGxpbmUgbnVtYmVyc1xuICAgICAgICAgIGlmICghcHJlLmhhc0F0dHJpYnV0ZSgnZGF0YS1zdGFydCcpKSB7XG4gICAgICAgICAgICBwcmUuc2V0QXR0cmlidXRlKCdkYXRhLXN0YXJ0JywgU3RyaW5nKHN0YXJ0ICsgMSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGhpZ2hsaWdodCBjb2RlXG4gICAgICAgIGNvZGUudGV4dENvbnRlbnQgPSB0ZXh0O1xuICAgICAgICBQcmlzbS5oaWdobGlnaHRFbGVtZW50KGNvZGUpO1xuICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIC8vIG1hcmsgYXMgZmFpbGVkXG4gICAgICAgIHByZS5zZXRBdHRyaWJ1dGUoU1RBVFVTX0FUVFIsIFNUQVRVU19GQUlMRUQpO1xuICAgICAgICBjb2RlLnRleHRDb250ZW50ID0gZXJyb3I7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBQcmlzbS5wbHVnaW5zLmZpbGVIaWdobGlnaHQgPSB7XG4gICAgLyoqXG4gICAgICogRXhlY3V0ZXMgdGhlIEZpbGUgSGlnaGxpZ2h0IHBsdWdpbiBmb3IgYWxsIG1hdGNoaW5nIGBwcmVgIGVsZW1lbnRzIHVuZGVyIHRoZSBnaXZlbiBjb250YWluZXIuXG4gICAgICpcbiAgICAgKiBOb3RlOiBFbGVtZW50cyB3aGljaCBhcmUgYWxyZWFkeSBsb2FkZWQgb3IgY3VycmVudGx5IGxvYWRpbmcgd2lsbCBub3QgYmUgdG91Y2hlZCBieSB0aGlzIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UGFyZW50Tm9kZX0gW2NvbnRhaW5lcj1kb2N1bWVudF1cbiAgICAgKi9cbiAgICBoaWdobGlnaHQ6IGZ1bmN0aW9uIGhpZ2hsaWdodChjb250YWluZXIpIHtcbiAgICAgIHZhciBlbGVtZW50cyA9IChjb250YWluZXIgfHwgZG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3JBbGwoU0VMRUNUT1IpO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGVsZW1lbnQ7IGVsZW1lbnQgPSBlbGVtZW50c1tpKytdOykge1xuICAgICAgICBQcmlzbS5oaWdobGlnaHRFbGVtZW50KGVsZW1lbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgdmFyIGxvZ2dlZCA9IGZhbHNlO1xuICAvKiogQGRlcHJlY2F0ZWQgVXNlIGBQcmlzbS5wbHVnaW5zLmZpbGVIaWdobGlnaHQuaGlnaGxpZ2h0YCBpbnN0ZWFkLiAqL1xuICBQcmlzbS5maWxlSGlnaGxpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghbG9nZ2VkKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1ByaXNtLmZpbGVIaWdobGlnaHQgaXMgZGVwcmVjYXRlZC4gVXNlIGBQcmlzbS5wbHVnaW5zLmZpbGVIaWdobGlnaHQuaGlnaGxpZ2h0YCBpbnN0ZWFkLicpO1xuICAgICAgbG9nZ2VkID0gdHJ1ZTtcbiAgICB9XG4gICAgUHJpc20ucGx1Z2lucy5maWxlSGlnaGxpZ2h0LmhpZ2hsaWdodC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xufSkoKTtcblByaXNtLmxhbmd1YWdlcy5jbGlrZSA9IHtcbiAgJ2NvbW1lbnQnOiBbe1xuICAgIHBhdHRlcm46IC8oXnxbXlxcXFxdKVxcL1xcKltcXHNcXFNdKj8oPzpcXCpcXC98JCkvLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgZ3JlZWR5OiB0cnVlXG4gIH0sIHtcbiAgICBwYXR0ZXJuOiAvKF58W15cXFxcOl0pXFwvXFwvLiovLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgZ3JlZWR5OiB0cnVlXG4gIH1dLFxuICAnc3RyaW5nJzoge1xuICAgIHBhdHRlcm46IC8oW1wiJ10pKD86XFxcXCg/OlxcclxcbnxbXFxzXFxTXSl8KD8hXFwxKVteXFxcXFxcclxcbl0pKlxcMS8sXG4gICAgZ3JlZWR5OiB0cnVlXG4gIH0sXG4gICdjbGFzcy1uYW1lJzoge1xuICAgIHBhdHRlcm46IC8oXFxiKD86Y2xhc3N8ZXh0ZW5kc3xpbXBsZW1lbnRzfGluc3RhbmNlb2Z8aW50ZXJmYWNlfG5ld3x0cmFpdClcXHMrfFxcYmNhdGNoXFxzK1xcKClbXFx3LlxcXFxdKy9pLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgaW5zaWRlOiB7XG4gICAgICAncHVuY3R1YXRpb24nOiAvWy5cXFxcXS9cbiAgICB9XG4gIH0sXG4gICdrZXl3b3JkJzogL1xcYig/OmJyZWFrfGNhdGNofGNvbnRpbnVlfGRvfGVsc2V8ZmluYWxseXxmb3J8ZnVuY3Rpb258aWZ8aW58aW5zdGFuY2VvZnxuZXd8bnVsbHxyZXR1cm58dGhyb3d8dHJ5fHdoaWxlKVxcYi8sXG4gICdib29sZWFuJzogL1xcYig/OmZhbHNlfHRydWUpXFxiLyxcbiAgJ2Z1bmN0aW9uJzogL1xcYlxcdysoPz1cXCgpLyxcbiAgJ251bWJlcic6IC9cXGIweFtcXGRhLWZdK1xcYnwoPzpcXGJcXGQrKD86XFwuXFxkKik/fFxcQlxcLlxcZCspKD86ZVsrLV0/XFxkKyk/L2ksXG4gICdvcGVyYXRvcic6IC9bPD5dPT98WyE9XT0/PT98LS0/fFxcK1xcKz98JiY/fFxcfFxcfD98Wz8qL35eJV0vLFxuICAncHVuY3R1YXRpb24nOiAvW3t9W1xcXTsoKSwuOl0vXG59O1xuUHJpc20ubGFuZ3VhZ2VzLmMgPSBQcmlzbS5sYW5ndWFnZXMuZXh0ZW5kKCdjbGlrZScsIHtcbiAgJ2NvbW1lbnQnOiB7XG4gICAgcGF0dGVybjogL1xcL1xcLyg/OlteXFxyXFxuXFxcXF18XFxcXCg/Olxcclxcbj98XFxufCg/IVtcXHJcXG5dKSkpKnxcXC9cXCpbXFxzXFxTXSo/KD86XFwqXFwvfCQpLyxcbiAgICBncmVlZHk6IHRydWVcbiAgfSxcbiAgJ3N0cmluZyc6IHtcbiAgICAvLyBodHRwczovL2VuLmNwcHJlZmVyZW5jZS5jb20vdy9jL2xhbmd1YWdlL3N0cmluZ19saXRlcmFsXG4gICAgcGF0dGVybjogL1wiKD86XFxcXCg/OlxcclxcbnxbXFxzXFxTXSl8W15cIlxcXFxcXHJcXG5dKSpcIi8sXG4gICAgZ3JlZWR5OiB0cnVlXG4gIH0sXG4gICdjbGFzcy1uYW1lJzoge1xuICAgIHBhdHRlcm46IC8oXFxiKD86ZW51bXxzdHJ1Y3QpXFxzKyg/Ol9fYXR0cmlidXRlX19cXHMqXFwoXFwoW1xcc1xcU10qP1xcKVxcKVxccyopPylcXHcrfFxcYlthLXpdXFx3Kl90XFxiLyxcbiAgICBsb29rYmVoaW5kOiB0cnVlXG4gIH0sXG4gICdrZXl3b3JkJzogL1xcYig/Ol9BbGlnbmFzfF9BbGlnbm9mfF9BdG9taWN8X0Jvb2x8X0NvbXBsZXh8X0dlbmVyaWN8X0ltYWdpbmFyeXxfTm9yZXR1cm58X1N0YXRpY19hc3NlcnR8X1RocmVhZF9sb2NhbHxfX2F0dHJpYnV0ZV9ffGFzbXxhdXRvfGJyZWFrfGNhc2V8Y2hhcnxjb25zdHxjb250aW51ZXxkZWZhdWx0fGRvfGRvdWJsZXxlbHNlfGVudW18ZXh0ZXJufGZsb2F0fGZvcnxnb3RvfGlmfGlubGluZXxpbnR8bG9uZ3xyZWdpc3RlcnxyZXR1cm58c2hvcnR8c2lnbmVkfHNpemVvZnxzdGF0aWN8c3RydWN0fHN3aXRjaHx0eXBlZGVmfHR5cGVvZnx1bmlvbnx1bnNpZ25lZHx2b2lkfHZvbGF0aWxlfHdoaWxlKVxcYi8sXG4gICdmdW5jdGlvbic6IC9cXGJbYS16X11cXHcqKD89XFxzKlxcKCkvaSxcbiAgJ251bWJlcic6IC8oPzpcXGIweCg/OltcXGRhLWZdKyg/OlxcLltcXGRhLWZdKik/fFxcLltcXGRhLWZdKykoPzpwWystXT9cXGQrKT98KD86XFxiXFxkKyg/OlxcLlxcZCopP3xcXEJcXC5cXGQrKSg/OmVbKy1dP1xcZCspPylbZnVsXXswLDR9L2ksXG4gICdvcGVyYXRvcic6IC8+Pj0/fDw8PT98LT58KFstKyZ8Ol0pXFwxfFs/On5dfFstKyovJSZ8XiE9PD5dPT8vXG59KTtcblByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ2MnLCAnc3RyaW5nJywge1xuICAnY2hhcic6IHtcbiAgICAvLyBodHRwczovL2VuLmNwcHJlZmVyZW5jZS5jb20vdy9jL2xhbmd1YWdlL2NoYXJhY3Rlcl9jb25zdGFudFxuICAgIHBhdHRlcm46IC8nKD86XFxcXCg/OlxcclxcbnxbXFxzXFxTXSl8W14nXFxcXFxcclxcbl0pezAsMzJ9Jy8sXG4gICAgZ3JlZWR5OiB0cnVlXG4gIH1cbn0pO1xuUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnYycsICdzdHJpbmcnLCB7XG4gICdtYWNybyc6IHtcbiAgICAvLyBhbGxvdyBmb3IgbXVsdGlsaW5lIG1hY3JvIGRlZmluaXRpb25zXG4gICAgLy8gc3BhY2VzIGFmdGVyIHRoZSAjIGNoYXJhY3RlciBjb21waWxlIGZpbmUgd2l0aCBnY2NcbiAgICBwYXR0ZXJuOiAvKF5bXFx0IF0qKSNcXHMqW2Etel0oPzpbXlxcclxcblxcXFwvXXxcXC8oPyFcXCopfFxcL1xcKig/OlteKl18XFwqKD8hXFwvKSkqXFwqXFwvfFxcXFwoPzpcXHJcXG58W1xcc1xcU10pKSovaW0sXG4gICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICBncmVlZHk6IHRydWUsXG4gICAgYWxpYXM6ICdwcm9wZXJ0eScsXG4gICAgaW5zaWRlOiB7XG4gICAgICAnc3RyaW5nJzogW3tcbiAgICAgICAgLy8gaGlnaGxpZ2h0IHRoZSBwYXRoIG9mIHRoZSBpbmNsdWRlIHN0YXRlbWVudCBhcyBhIHN0cmluZ1xuICAgICAgICBwYXR0ZXJuOiAvXigjXFxzKmluY2x1ZGVcXHMqKTxbXj5dKz4vLFxuICAgICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgICB9LCBQcmlzbS5sYW5ndWFnZXMuY1snc3RyaW5nJ11dLFxuICAgICAgJ2NoYXInOiBQcmlzbS5sYW5ndWFnZXMuY1snY2hhciddLFxuICAgICAgJ2NvbW1lbnQnOiBQcmlzbS5sYW5ndWFnZXMuY1snY29tbWVudCddLFxuICAgICAgJ21hY3JvLW5hbWUnOiBbe1xuICAgICAgICBwYXR0ZXJuOiAvKF4jXFxzKmRlZmluZVxccyspXFx3K1xcYig/IVxcKCkvaSxcbiAgICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgICAgfSwge1xuICAgICAgICBwYXR0ZXJuOiAvKF4jXFxzKmRlZmluZVxccyspXFx3K1xcYig/PVxcKCkvaSxcbiAgICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgICAgYWxpYXM6ICdmdW5jdGlvbidcbiAgICAgIH1dLFxuICAgICAgLy8gaGlnaGxpZ2h0IG1hY3JvIGRpcmVjdGl2ZXMgYXMga2V5d29yZHNcbiAgICAgICdkaXJlY3RpdmUnOiB7XG4gICAgICAgIHBhdHRlcm46IC9eKCNcXHMqKVthLXpdKy8sXG4gICAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICAgIGFsaWFzOiAna2V5d29yZCdcbiAgICAgIH0sXG4gICAgICAnZGlyZWN0aXZlLWhhc2gnOiAvXiMvLFxuICAgICAgJ3B1bmN0dWF0aW9uJzogLyMjfFxcXFwoPz1bXFxyXFxuXSkvLFxuICAgICAgJ2V4cHJlc3Npb24nOiB7XG4gICAgICAgIHBhdHRlcm46IC9cXFNbXFxzXFxTXSovLFxuICAgICAgICBpbnNpZGU6IFByaXNtLmxhbmd1YWdlcy5jXG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcblByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ2MnLCAnZnVuY3Rpb24nLCB7XG4gIC8vIGhpZ2hsaWdodCBwcmVkZWZpbmVkIG1hY3JvcyBhcyBjb25zdGFudHNcbiAgJ2NvbnN0YW50JzogL1xcYig/OkVPRnxOVUxMfFNFRUtfQ1VSfFNFRUtfRU5EfFNFRUtfU0VUfF9fREFURV9ffF9fRklMRV9ffF9fTElORV9ffF9fVElNRVNUQU1QX198X19USU1FX198X19mdW5jX198c3RkZXJyfHN0ZGlufHN0ZG91dClcXGIvXG59KTtcbmRlbGV0ZSBQcmlzbS5sYW5ndWFnZXMuY1snYm9vbGVhbiddO1xuKGZ1bmN0aW9uIChQcmlzbSkge1xuICB2YXIga2V5d29yZCA9IC9cXGIoPzphbGlnbmFzfGFsaWdub2Z8YXNtfGF1dG98Ym9vbHxicmVha3xjYXNlfGNhdGNofGNoYXJ8Y2hhcjE2X3R8Y2hhcjMyX3R8Y2hhcjhfdHxjbGFzc3xjb19hd2FpdHxjb19yZXR1cm58Y29feWllbGR8Y29tcGx8Y29uY2VwdHxjb25zdHxjb25zdF9jYXN0fGNvbnN0ZXZhbHxjb25zdGV4cHJ8Y29uc3Rpbml0fGNvbnRpbnVlfGRlY2x0eXBlfGRlZmF1bHR8ZGVsZXRlfGRvfGRvdWJsZXxkeW5hbWljX2Nhc3R8ZWxzZXxlbnVtfGV4cGxpY2l0fGV4cG9ydHxleHRlcm58ZmluYWx8ZmxvYXR8Zm9yfGZyaWVuZHxnb3RvfGlmfGltcG9ydHxpbmxpbmV8aW50fGludDE2X3R8aW50MzJfdHxpbnQ2NF90fGludDhfdHxsb25nfG1vZHVsZXxtdXRhYmxlfG5hbWVzcGFjZXxuZXd8bm9leGNlcHR8bnVsbHB0cnxvcGVyYXRvcnxvdmVycmlkZXxwcml2YXRlfHByb3RlY3RlZHxwdWJsaWN8cmVnaXN0ZXJ8cmVpbnRlcnByZXRfY2FzdHxyZXF1aXJlc3xyZXR1cm58c2hvcnR8c2lnbmVkfHNpemVvZnxzdGF0aWN8c3RhdGljX2Fzc2VydHxzdGF0aWNfY2FzdHxzdHJ1Y3R8c3dpdGNofHRlbXBsYXRlfHRoaXN8dGhyZWFkX2xvY2FsfHRocm93fHRyeXx0eXBlZGVmfHR5cGVpZHx0eXBlbmFtZXx1aW50MTZfdHx1aW50MzJfdHx1aW50NjRfdHx1aW50OF90fHVuaW9ufHVuc2lnbmVkfHVzaW5nfHZpcnR1YWx8dm9pZHx2b2xhdGlsZXx3Y2hhcl90fHdoaWxlKVxcYi87XG4gIHZhciBtb2ROYW1lID0gL1xcYig/ITxrZXl3b3JkPilcXHcrKD86XFxzKlxcLlxccypcXHcrKSpcXGIvLnNvdXJjZS5yZXBsYWNlKC88a2V5d29yZD4vZywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBrZXl3b3JkLnNvdXJjZTtcbiAgfSk7XG4gIFByaXNtLmxhbmd1YWdlcy5jcHAgPSBQcmlzbS5sYW5ndWFnZXMuZXh0ZW5kKCdjJywge1xuICAgICdjbGFzcy1uYW1lJzogW3tcbiAgICAgIHBhdHRlcm46IFJlZ0V4cCgvKFxcYig/OmNsYXNzfGNvbmNlcHR8ZW51bXxzdHJ1Y3R8dHlwZW5hbWUpXFxzKykoPyE8a2V5d29yZD4pXFx3Ky8uc291cmNlLnJlcGxhY2UoLzxrZXl3b3JkPi9nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBrZXl3b3JkLnNvdXJjZTtcbiAgICAgIH0pKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICB9LFxuICAgIC8vIFRoaXMgaXMgaW50ZW5kZWQgdG8gY2FwdHVyZSB0aGUgY2xhc3MgbmFtZSBvZiBtZXRob2QgaW1wbGVtZW50YXRpb25zIGxpa2U6XG4gICAgLy8gICB2b2lkIGZvbzo6YmFyKCkgY29uc3Qge31cbiAgICAvLyBIb3dldmVyISBUaGUgYGZvb2AgaW4gdGhlIGFib3ZlIGV4YW1wbGUgY291bGQgYWxzbyBiZSBhIG5hbWVzcGFjZSwgc28gd2Ugb25seSBjYXB0dXJlIHRoZSBjbGFzcyBuYW1lIGlmXG4gICAgLy8gaXQgc3RhcnRzIHdpdGggYW4gdXBwZXJjYXNlIGxldHRlci4gVGhpcyBhcHByb3hpbWF0aW9uIHNob3VsZCBnaXZlIGRlY2VudCByZXN1bHRzLlxuICAgIC9cXGJbQS1aXVxcdyooPz1cXHMqOjpcXHMqXFx3K1xccypcXCgpLyxcbiAgICAvLyBUaGlzIHdpbGwgY2FwdHVyZSB0aGUgY2xhc3MgbmFtZSBiZWZvcmUgZGVzdHJ1Y3RvcnMgbGlrZTpcbiAgICAvLyAgIEZvbzo6fkZvbygpIHt9XG4gICAgL1xcYltBLVpfXVxcdyooPz1cXHMqOjpcXHMqflxcdytcXHMqXFwoKS9pLFxuICAgIC8vIFRoaXMgYWxzbyBpbnRlbmRzIHRvIGNhcHR1cmUgdGhlIGNsYXNzIG5hbWUgb2YgbWV0aG9kIGltcGxlbWVudGF0aW9ucyBidXQgaGVyZSB0aGUgY2xhc3MgaGFzIHRlbXBsYXRlXG4gICAgLy8gcGFyYW1ldGVycywgc28gaXQgY2FuJ3QgYmUgYSBuYW1lc3BhY2UgKHVudGlsIEMrKyBhZGRzIGdlbmVyaWMgbmFtZXNwYWNlcykuXG4gICAgL1xcYlxcdysoPz1cXHMqPCg/OltePD5dfDwoPzpbXjw+XXw8W148Pl0qPikqPikqPlxccyo6OlxccypcXHcrXFxzKlxcKCkvXSxcbiAgICAna2V5d29yZCc6IGtleXdvcmQsXG4gICAgJ251bWJlcic6IHtcbiAgICAgIHBhdHRlcm46IC8oPzpcXGIwYlswMSddK3xcXGIweCg/OltcXGRhLWYnXSsoPzpcXC5bXFxkYS1mJ10qKT98XFwuW1xcZGEtZiddKykoPzpwWystXT9bXFxkJ10rKT98KD86XFxiW1xcZCddKyg/OlxcLltcXGQnXSopP3xcXEJcXC5bXFxkJ10rKSg/OmVbKy1dP1tcXGQnXSspPylbZnVsXXswLDR9L2ksXG4gICAgICBncmVlZHk6IHRydWVcbiAgICB9LFxuICAgICdvcGVyYXRvcic6IC8+Pj0/fDw8PT98LT58LS18XFwrXFwrfCYmfFxcfFxcfHxbPzp+XXw8PT58Wy0rKi8lJnxeIT08Pl09P3xcXGIoPzphbmR8YW5kX2VxfGJpdGFuZHxiaXRvcnxub3R8bm90X2VxfG9yfG9yX2VxfHhvcnx4b3JfZXEpXFxiLyxcbiAgICAnYm9vbGVhbic6IC9cXGIoPzpmYWxzZXx0cnVlKVxcYi9cbiAgfSk7XG4gIFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ2NwcCcsICdzdHJpbmcnLCB7XG4gICAgJ21vZHVsZSc6IHtcbiAgICAgIC8vIGh0dHBzOi8vZW4uY3BwcmVmZXJlbmNlLmNvbS93L2NwcC9sYW5ndWFnZS9tb2R1bGVzXG4gICAgICBwYXR0ZXJuOiBSZWdFeHAoLyhcXGIoPzppbXBvcnR8bW9kdWxlKVxccyspLy5zb3VyY2UgKyAnKD86JyArXG4gICAgICAvLyBoZWFkZXItbmFtZVxuICAgICAgL1wiKD86XFxcXCg/OlxcclxcbnxbXFxzXFxTXSl8W15cIlxcXFxcXHJcXG5dKSpcInw8W148Plxcclxcbl0qPi8uc291cmNlICsgJ3wnICtcbiAgICAgIC8vIG1vZHVsZSBuYW1lIG9yIHBhcnRpdGlvbiBvciBib3RoXG4gICAgICAvPG1vZC1uYW1lPig/Olxccyo6XFxzKjxtb2QtbmFtZT4pP3w6XFxzKjxtb2QtbmFtZT4vLnNvdXJjZS5yZXBsYWNlKC88bW9kLW5hbWU+L2csIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG1vZE5hbWU7XG4gICAgICB9KSArICcpJyksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdzdHJpbmcnOiAvXls8XCJdW1xcc1xcU10rLyxcbiAgICAgICAgJ29wZXJhdG9yJzogLzovLFxuICAgICAgICAncHVuY3R1YXRpb24nOiAvXFwuL1xuICAgICAgfVxuICAgIH0sXG4gICAgJ3Jhdy1zdHJpbmcnOiB7XG4gICAgICBwYXR0ZXJuOiAvUlwiKFteKClcXFxcIF17MCwxNn0pXFwoW1xcc1xcU10qP1xcKVxcMVwiLyxcbiAgICAgIGFsaWFzOiAnc3RyaW5nJyxcbiAgICAgIGdyZWVkeTogdHJ1ZVxuICAgIH1cbiAgfSk7XG4gIFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ2NwcCcsICdrZXl3b3JkJywge1xuICAgICdnZW5lcmljLWZ1bmN0aW9uJzoge1xuICAgICAgcGF0dGVybjogL1xcYig/IW9wZXJhdG9yXFxiKVthLXpfXVxcdypcXHMqPCg/OltePD5dfDxbXjw+XSo+KSo+KD89XFxzKlxcKCkvaSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAnZnVuY3Rpb24nOiAvXlxcdysvLFxuICAgICAgICAnZ2VuZXJpYyc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvPFtcXHNcXFNdKy8sXG4gICAgICAgICAgYWxpYXM6ICdjbGFzcy1uYW1lJyxcbiAgICAgICAgICBpbnNpZGU6IFByaXNtLmxhbmd1YWdlcy5jcHBcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ2NwcCcsICdvcGVyYXRvcicsIHtcbiAgICAnZG91YmxlLWNvbG9uJzoge1xuICAgICAgcGF0dGVybjogLzo6LyxcbiAgICAgIGFsaWFzOiAncHVuY3R1YXRpb24nXG4gICAgfVxuICB9KTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnY3BwJywgJ2NsYXNzLW5hbWUnLCB7XG4gICAgLy8gdGhlIGJhc2UgY2xhdXNlIGlzIGFuIG9wdGlvbmFsIGxpc3Qgb2YgcGFyZW50IGNsYXNzZXNcbiAgICAvLyBodHRwczovL2VuLmNwcHJlZmVyZW5jZS5jb20vdy9jcHAvbGFuZ3VhZ2UvY2xhc3NcbiAgICAnYmFzZS1jbGF1c2UnOiB7XG4gICAgICBwYXR0ZXJuOiAvKFxcYig/OmNsYXNzfHN0cnVjdClcXHMrXFx3K1xccyo6XFxzKilbXjt7fVwiJ1xcc10rKD86XFxzK1teO3t9XCInXFxzXSspKig/PVxccypbO3tdKS8sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMuZXh0ZW5kKCdjcHAnLCB7fSlcbiAgICB9XG4gIH0pO1xuICBQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdpbnNpZGUnLCAnZG91YmxlLWNvbG9uJywge1xuICAgIC8vIEFsbCB1bnRva2VuaXplZCB3b3JkcyB0aGF0IGFyZSBub3QgbmFtZXNwYWNlcyBzaG91bGQgYmUgY2xhc3MgbmFtZXNcbiAgICAnY2xhc3MtbmFtZSc6IC9cXGJbYS16X11cXHcqXFxiKD8hXFxzKjo6KS9pXG4gIH0sIFByaXNtLmxhbmd1YWdlcy5jcHBbJ2Jhc2UtY2xhdXNlJ10pO1xufSkoUHJpc20pO1xuUHJpc20ubGFuZ3VhZ2VzLmFyZHVpbm8gPSBQcmlzbS5sYW5ndWFnZXMuZXh0ZW5kKCdjcHAnLCB7XG4gICdrZXl3b3JkJzogL1xcYig/OlN0cmluZ3xhcnJheXxib29sfGJvb2xlYW58YnJlYWt8Ynl0ZXxjYXNlfGNhdGNofGNvbnRpbnVlfGRlZmF1bHR8ZG98ZG91YmxlfGVsc2V8ZmluYWxseXxmb3J8ZnVuY3Rpb258Z290b3xpZnxpbnxpbnN0YW5jZW9mfGludHxpbnRlZ2VyfGxvbmd8bG9vcHxuZXd8bnVsbHxyZXR1cm58c2V0dXB8c3RyaW5nfHN3aXRjaHx0aHJvd3x0cnl8dm9pZHx3aGlsZXx3b3JkKVxcYi8sXG4gICdjb25zdGFudCc6IC9cXGIoPzpBTkFMT0dfTUVTU0FHRXxERUZBVUxUfERJR0lUQUxfTUVTU0FHRXxFWFRFUk5BTHxGSVJNQVRBX1NUUklOR3xISUdIfElOUFVUfElOUFVUX1BVTExVUHxJTlRFUk5BTHxJTlRFUk5BTDFWMXxJTlRFUk5BTDJWNTZ8TEVEX0JVSUxUSU58TE9XfE9VVFBVVHxSRVBPUlRfQU5BTE9HfFJFUE9SVF9ESUdJVEFMfFNFVF9QSU5fTU9ERXxTWVNFWF9TVEFSVHxTWVNURU1fUkVTRVQpXFxiLyxcbiAgJ2J1aWx0aW4nOiAvXFxiKD86QXVkaW98QlNTSUR8QnJpZGdlfENsaWVudHxDb25zb2xlfEVFUFJPTXxFc3Bsb3JhfEVzcGxvcmFURlR8RXRoZXJuZXR8RXRoZXJuZXRDbGllbnR8RXRoZXJuZXRTZXJ2ZXJ8RXRoZXJuZXRVRFB8RmlsZXxGaWxlSU98RmlsZVN5c3RlbXxGaXJtYXRhfEdQUlN8R1NNfEdTTUJhbmR8R1NNQ2xpZW50fEdTTU1vZGVtfEdTTVBJTnxHU01TY2FubmVyfEdTTVNlcnZlcnxHU01Wb2ljZUNhbGx8R1NNX1NNU3xIdHRwQ2xpZW50fElQQWRkcmVzc3xJUnJlYWR8S2V5Ym9hcmR8S2V5Ym9hcmRDb250cm9sbGVyfExpcXVpZENyeXN0YWx8TGlxdWlkQ3J5c3RhbF9JMkN8TWFpbGJveHxNb3VzZXxNb3VzZUNvbnRyb2xsZXJ8UEltYWdlfFByb2Nlc3N8UlNTSXxSb2JvdENvbnRyb2x8Um9ib3RNb3RvcnxTRHxTUEl8U1NJRHxTY2hlZHVsZXJ8U2VyaWFsfFNlcnZlcnxTZXJ2b3xTb2Z0d2FyZVNlcmlhbHxTdGVwcGVyfFN0cmVhbXxURlR8VGFza3xVU0JIb3N0fFdpRml8V2lGaUNsaWVudHxXaUZpU2VydmVyfFdpRmlVRFB8V2lyZXxZdW5DbGllbnR8WXVuU2VydmVyfGFic3xhZGRQYXJhbWV0ZXJ8YW5hbG9nUmVhZHxhbmFsb2dSZWFkUmVzb2x1dGlvbnxhbmFsb2dSZWZlcmVuY2V8YW5hbG9nV3JpdGV8YW5hbG9nV3JpdGVSZXNvbHV0aW9ufGFuc3dlckNhbGx8YXR0YWNofGF0dGFjaEdQUlN8YXR0YWNoSW50ZXJydXB0fGF0dGFjaGVkfGF1dG9zY3JvbGx8YXZhaWxhYmxlfGJhY2tncm91bmR8YmVlcHxiZWdpbnxiZWdpblBhY2tldHxiZWdpblNEfGJlZ2luU01TfGJlZ2luU3BlYWtlcnxiZWdpblRGVHxiZWdpblRyYW5zbWlzc2lvbnxiZWdpbldyaXRlfGJpdHxiaXRDbGVhcnxiaXRSZWFkfGJpdFNldHxiaXRXcml0ZXxibGlua3xibGlua1ZlcnNpb258YnVmZmVyfGNoYW5nZVBJTnxjaGVja1BJTnxjaGVja1BVS3xjaGVja1JlZ3xjaXJjbGV8Y2l0eU5hbWVSZWFkfGNpdHlOYW1lV3JpdGV8Y2xlYXJ8Y2xlYXJTY3JlZW58Y2xpY2t8Y2xvc2V8Y29tcGFzc1JlYWR8Y29uZmlnfGNvbm5lY3R8Y29ubmVjdGVkfGNvbnN0cmFpbnxjb3N8Y291bnRyeU5hbWVSZWFkfGNvdW50cnlOYW1lV3JpdGV8Y3JlYXRlQ2hhcnxjdXJzb3J8ZGVidWdQcmludHxkZWxheXxkZWxheU1pY3Jvc2Vjb25kc3xkZXRhY2h8ZGV0YWNoSW50ZXJydXB0fGRpZ2l0YWxSZWFkfGRpZ2l0YWxXcml0ZXxkaXNjb25uZWN0fGRpc3BsYXl8ZGlzcGxheUxvZ29zfGRyYXdCTVB8ZHJhd0NvbXBhc3N8ZW5jcnlwdGlvblR5cGV8ZW5kfGVuZFBhY2tldHxlbmRTTVN8ZW5kVHJhbnNtaXNzaW9ufGVuZFdyaXRlfGV4aXN0c3xleGl0VmFsdWV8ZmlsbHxmaW5kfGZpbmRVbnRpbHxmbHVzaHxnYXRld2F5SVB8Z2V0fGdldEFzeW5jaHJvbm91c2x5fGdldEJhbmR8Z2V0QnV0dG9ufGdldEN1cnJlbnRDYXJyaWVyfGdldElNRUl8Z2V0S2V5fGdldE1vZGlmaWVyc3xnZXRPZW1LZXl8Z2V0UElOVXNlZHxnZXRSZXN1bHR8Z2V0U2lnbmFsU3RyZW5ndGh8Z2V0U29ja2V0fGdldFZvaWNlQ2FsbFN0YXR1c3xnZXRYQ2hhbmdlfGdldFlDaGFuZ2V8aGFuZ0NhbGx8aGVpZ2h0fGhpZ2hCeXRlfGhvbWV8aW1hZ2V8aW50ZXJydXB0c3xpc0FjdGlvbkRvbmV8aXNEaXJlY3Rvcnl8aXNMaXN0ZW5pbmd8aXNQSU58aXNQcmVzc2VkfGlzVmFsaWR8a2V5UHJlc3NlZHxrZXlSZWxlYXNlZHxrZXlib2FyZFJlYWR8a25vYlJlYWR8bGVmdFRvUmlnaHR8bGluZXxsaW5lRm9sbG93Q29uZmlnfGxpc3RlbnxsaXN0ZW5PbkxvY2FsaG9zdHxsb2FkSW1hZ2V8bG9jYWxJUHxsb3dCeXRlfG1hY0FkZHJlc3N8bWFpbnRhaW58bWFwfG1heHxtZXNzYWdlQXZhaWxhYmxlfG1pY3Jvc3xtaWxsaXN8bWlufG1rZGlyfG1vdG9yc1N0b3B8bW90b3JzV3JpdGV8bW91c2VEcmFnZ2VkfG1vdXNlTW92ZWR8bW91c2VQcmVzc2VkfG1vdXNlUmVsZWFzZWR8bW92ZXxub0F1dG9zY3JvbGx8bm9CbGlua3xub0J1ZmZlcnxub0N1cnNvcnxub0Rpc3BsYXl8bm9GaWxsfG5vSW50ZXJydXB0c3xub0xpc3Rlbk9uTG9jYWxob3N0fG5vU3Ryb2tlfG5vVG9uZXxvblJlY2VpdmV8b25SZXF1ZXN0fG9wZW58b3Blbk5leHRGaWxlfG92ZXJmbG93fHBhcnNlQ29tbWFuZHxwYXJzZUZsb2F0fHBhcnNlSW50fHBhcnNlUGFja2V0fHBhdXNlTW9kZXxwZWVrfHBpbk1vZGV8cGxheUZpbGV8cGxheU1lbG9keXxwb2ludHxwb2ludFRvfHBvc2l0aW9ufHBvd3xwcmVwYXJlfHByZXNzfHByaW50fHByaW50RmlybXdhcmVWZXJzaW9ufHByaW50VmVyc2lvbnxwcmludGxufHByb2Nlc3N8cHJvY2Vzc0lucHV0fHB1bHNlSW58cHV0fHJhbmRvbXxyYW5kb21TZWVkfHJlYWR8cmVhZEFjY2VsZXJvbWV0ZXJ8cmVhZEJsdWV8cmVhZEJ1dHRvbnxyZWFkQnl0ZXN8cmVhZEJ5dGVzVW50aWx8cmVhZEdyZWVufHJlYWRKb3lzdGlja0J1dHRvbnxyZWFkSm95c3RpY2tTd2l0Y2h8cmVhZEpveXN0aWNrWHxyZWFkSm95c3RpY2tZfHJlYWRMaWdodFNlbnNvcnxyZWFkTWVzc2FnZXxyZWFkTWljcm9waG9uZXxyZWFkTmV0d29ya3N8cmVhZFJlZHxyZWFkU2xpZGVyfHJlYWRTdHJpbmd8cmVhZFN0cmluZ1VudGlsfHJlYWRUZW1wZXJhdHVyZXxyZWFkeXxyZWN0fHJlbGVhc2V8cmVsZWFzZUFsbHxyZW1vdGVJUHxyZW1vdGVOdW1iZXJ8cmVtb3RlUG9ydHxyZW1vdmV8cmVxdWVzdEZyb218cmV0cmlldmVDYWxsaW5nTnVtYmVyfHJld2luZERpcmVjdG9yeXxyaWdodFRvTGVmdHxybWRpcnxyb2JvdE5hbWVSZWFkfHJvYm90TmFtZVdyaXRlfHJ1bnxydW5Bc3luY2hyb25vdXNseXxydW5TaGVsbENvbW1hbmR8cnVuU2hlbGxDb21tYW5kQXN5bmNocm9ub3VzbHl8cnVubmluZ3xzY2FuTmV0d29ya3N8c2Nyb2xsRGlzcGxheUxlZnR8c2Nyb2xsRGlzcGxheVJpZ2h0fHNlZWt8c2VuZEFuYWxvZ3xzZW5kRGlnaXRhbFBvcnRQYWlyfHNlbmREaWdpdGFsUG9ydHN8c2VuZFN0cmluZ3xzZW5kU3lzZXh8c2VyaWFsRXZlbnR8c2V0QmFuZHxzZXRCaXRPcmRlcnxzZXRDbG9ja0RpdmlkZXJ8c2V0Q3Vyc29yfHNldEROU3xzZXREYXRhTW9kZXxzZXRGaXJtd2FyZVZlcnNpb258c2V0TW9kZXxzZXRQSU5Vc2VkfHNldFNwZWVkfHNldFRleHRTaXplfHNldFRpbWVvdXR8c2hpZnRJbnxzaGlmdE91dHxzaHV0ZG93bnxzaW58c2l6ZXxzcXJ0fHN0YXJ0TG9vcHxzdGVwfHN0b3B8c3Ryb2tlfHN1Ym5ldE1hc2t8c3dpdGNoUElOfHRhbnx0ZW1wb1dyaXRlfHRleHR8dG9uZXx0cmFuc2Zlcnx0dW5lV3JpdGV8dHVybnx1cGRhdGVJUnx1c2VyTmFtZVJlYWR8dXNlck5hbWVXcml0ZXx2b2ljZUNhbGx8d2FpdENvbnRpbnVlfHdpZHRofHdyaXRlfHdyaXRlQmx1ZXx3cml0ZUdyZWVufHdyaXRlSlNPTnx3cml0ZU1lc3NhZ2V8d3JpdGVNaWNyb3NlY29uZHN8d3JpdGVSR0J8d3JpdGVSZWR8eWllbGQpXFxiL1xufSk7XG5QcmlzbS5sYW5ndWFnZXMuaW5vID0gUHJpc20ubGFuZ3VhZ2VzLmFyZHVpbm87XG4oZnVuY3Rpb24gKFByaXNtKSB7XG4gIC8vICQgc2V0IHwgZ3JlcCAnXltBLVpdW15bOnNwYWNlOl1dKj0nIHwgY3V0IC1kPSAtZjEgfCB0ciAnXFxuJyAnfCdcbiAgLy8gKyBMQ19BTEwsIFJBTkRPTSwgUkVQTFksIFNFQ09ORFMuXG4gIC8vICsgbWFrZSBzdXJlIFBTMS4uNCBhcmUgaGVyZSBhcyB0aGV5IGFyZSBub3QgYWx3YXlzIHNldCxcbiAgLy8gLSBzb21lIHVzZWxlc3MgdGhpbmdzLlxuICB2YXIgZW52VmFycyA9ICdcXFxcYig/OkJBU0h8QkFTSE9QVFN8QkFTSF9BTElBU0VTfEJBU0hfQVJHQ3xCQVNIX0FSR1Z8QkFTSF9DTURTfEJBU0hfQ09NUExFVElPTl9DT01QQVRfRElSfEJBU0hfTElORU5PfEJBU0hfUkVNQVRDSHxCQVNIX1NPVVJDRXxCQVNIX1ZFUlNJTkZPfEJBU0hfVkVSU0lPTnxDT0xPUlRFUk18Q09MVU1OU3xDT01QX1dPUkRCUkVBS1N8REJVU19TRVNTSU9OX0JVU19BRERSRVNTfERFRkFVTFRTX1BBVEh8REVTS1RPUF9TRVNTSU9OfERJUlNUQUNLfERJU1BMQVl8RVVJRHxHRE1TRVNTSU9OfEdETV9MQU5HfEdOT01FX0tFWVJJTkdfQ09OVFJPTHxHTk9NRV9LRVlSSU5HX1BJRHxHUEdfQUdFTlRfSU5GT3xHUk9VUFN8SElTVENPTlRST0x8SElTVEZJTEV8SElTVEZJTEVTSVpFfEhJU1RTSVpFfEhPTUV8SE9TVE5BTUV8SE9TVFRZUEV8SUZTfElOU1RBTkNFfEpPQnxMQU5HfExBTkdVQUdFfExDX0FERFJFU1N8TENfQUxMfExDX0lERU5USUZJQ0FUSU9OfExDX01FQVNVUkVNRU5UfExDX01PTkVUQVJZfExDX05BTUV8TENfTlVNRVJJQ3xMQ19QQVBFUnxMQ19URUxFUEhPTkV8TENfVElNRXxMRVNTQ0xPU0V8TEVTU09QRU58TElORVN8TE9HTkFNRXxMU19DT0xPUlN8TUFDSFRZUEV8TUFJTENIRUNLfE1BTkRBVE9SWV9QQVRIfE5PX0FUX0JSSURHRXxPTERQV0R8T1BURVJSfE9QVElORHxPUkJJVF9TT0NLRVRESVJ8T1NUWVBFfFBBUEVSU0laRXxQQVRIfFBJUEVTVEFUVVN8UFBJRHxQUzF8UFMyfFBTM3xQUzR8UFdEfFJBTkRPTXxSRVBMWXxTRUNPTkRTfFNFTElOVVhfSU5JVHxTRVNTSU9OfFNFU1NJT05UWVBFfFNFU1NJT05fTUFOQUdFUnxTSEVMTHxTSEVMTE9QVFN8U0hMVkx8U1NIX0FVVEhfU09DS3xURVJNfFVJRHxVUFNUQVJUX0VWRU5UU3xVUFNUQVJUX0lOU1RBTkNFfFVQU1RBUlRfSk9CfFVQU1RBUlRfU0VTU0lPTnxVU0VSfFdJTkRPV0lEfFhBVVRIT1JJVFl8WERHX0NPTkZJR19ESVJTfFhER19DVVJSRU5UX0RFU0tUT1B8WERHX0RBVEFfRElSU3xYREdfR1JFRVRFUl9EQVRBX0RJUnxYREdfTUVOVV9QUkVGSVh8WERHX1JVTlRJTUVfRElSfFhER19TRUFUfFhER19TRUFUX1BBVEh8WERHX1NFU1NJT05fREVTS1RPUHxYREdfU0VTU0lPTl9JRHxYREdfU0VTU0lPTl9QQVRIfFhER19TRVNTSU9OX1RZUEV8WERHX1ZUTlJ8WE1PRElGSUVSUylcXFxcYic7XG4gIHZhciBjb21tYW5kQWZ0ZXJIZXJlZG9jID0ge1xuICAgIHBhdHRlcm46IC8oXihbXCInXT8pXFx3K1xcMilbIFxcdF0rXFxTLiovLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgYWxpYXM6ICdwdW5jdHVhdGlvbicsXG4gICAgLy8gdGhpcyBsb29rcyByZWFzb25hYmx5IHdlbGwgaW4gYWxsIHRoZW1lc1xuICAgIGluc2lkZTogbnVsbCAvLyBzZWUgYmVsb3dcbiAgfTtcbiAgdmFyIGluc2lkZVN0cmluZyA9IHtcbiAgICAnYmFzaCc6IGNvbW1hbmRBZnRlckhlcmVkb2MsXG4gICAgJ2Vudmlyb25tZW50Jzoge1xuICAgICAgcGF0dGVybjogUmVnRXhwKCdcXFxcJCcgKyBlbnZWYXJzKSxcbiAgICAgIGFsaWFzOiAnY29uc3RhbnQnXG4gICAgfSxcbiAgICAndmFyaWFibGUnOiBbXG4gICAgLy8gWzBdOiBBcml0aG1ldGljIEVudmlyb25tZW50XG4gICAge1xuICAgICAgcGF0dGVybjogL1xcJD9cXChcXChbXFxzXFxTXSs/XFwpXFwpLyxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAvLyBJZiB0aGVyZSBpcyBhICQgc2lnbiBhdCB0aGUgYmVnaW5uaW5nIGhpZ2hsaWdodCAkKCggYW5kICkpIGFzIHZhcmlhYmxlXG4gICAgICAgICd2YXJpYWJsZSc6IFt7XG4gICAgICAgICAgcGF0dGVybjogLyheXFwkXFwoXFwoW1xcc1xcU10rKVxcKVxcKS8sXG4gICAgICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgICAgICB9LCAvXlxcJFxcKFxcKC9dLFxuICAgICAgICAnbnVtYmVyJzogL1xcYjB4W1xcZEEtRmEtZl0rXFxifCg/OlxcYlxcZCsoPzpcXC5cXGQqKT98XFxCXFwuXFxkKykoPzpbRWVdLT9cXGQrKT8vLFxuICAgICAgICAvLyBPcGVyYXRvcnMgYWNjb3JkaW5nIHRvIGh0dHBzOi8vd3d3LmdudS5vcmcvc29mdHdhcmUvYmFzaC9tYW51YWwvYmFzaHJlZi5odG1sI1NoZWxsLUFyaXRobWV0aWNcbiAgICAgICAgJ29wZXJhdG9yJzogLy0tfFxcK1xcK3xcXCpcXCo9P3w8PD0/fD4+PT98JiZ8XFx8XFx8fFs9IStcXC0qLyU8Pl4mfF09P3xbP346XS8sXG4gICAgICAgIC8vIElmIHRoZXJlIGlzIG5vICQgc2lnbiBhdCB0aGUgYmVnaW5uaW5nIGhpZ2hsaWdodCAoKCBhbmQgKSkgYXMgcHVuY3R1YXRpb25cbiAgICAgICAgJ3B1bmN0dWF0aW9uJzogL1xcKFxcKD98XFwpXFwpP3wsfDsvXG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBbMV06IENvbW1hbmQgU3Vic3RpdHV0aW9uXG4gICAge1xuICAgICAgcGF0dGVybjogL1xcJFxcKCg/OlxcKFteKV0rXFwpfFteKCldKStcXCl8YFteYF0rYC8sXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ3ZhcmlhYmxlJzogL15cXCRcXCh8XmB8XFwpJHxgJC9cbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIFsyXTogQnJhY2UgZXhwYW5zaW9uXG4gICAge1xuICAgICAgcGF0dGVybjogL1xcJFxce1tefV0rXFx9LyxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAnb3BlcmF0b3InOiAvOlstPT8rXT98WyFcXC9dfCMjP3wlJT98XFxeXFxeP3wsLD8vLFxuICAgICAgICAncHVuY3R1YXRpb24nOiAvW1xcW1xcXV0vLFxuICAgICAgICAnZW52aXJvbm1lbnQnOiB7XG4gICAgICAgICAgcGF0dGVybjogUmVnRXhwKCcoXFxcXHspJyArIGVudlZhcnMpLFxuICAgICAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICAgICAgYWxpYXM6ICdjb25zdGFudCdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIC9cXCQoPzpcXHcrfFsjPyohQCRdKS9dLFxuICAgIC8vIEVzY2FwZSBzZXF1ZW5jZXMgZnJvbSBlY2hvIGFuZCBwcmludGYncyBtYW51YWxzLCBhbmQgZXNjYXBlZCBxdW90ZXMuXG4gICAgJ2VudGl0eSc6IC9cXFxcKD86W2FiY2VFZm5ydHZcXFxcXCJdfE8/WzAtN117MSwzfXxVWzAtOWEtZkEtRl17OH18dVswLTlhLWZBLUZdezR9fHhbMC05YS1mQS1GXXsxLDJ9KS9cbiAgfTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmJhc2ggPSB7XG4gICAgJ3NoZWJhbmcnOiB7XG4gICAgICBwYXR0ZXJuOiAvXiMhXFxzKlxcLy4qLyxcbiAgICAgIGFsaWFzOiAnaW1wb3J0YW50J1xuICAgIH0sXG4gICAgJ2NvbW1lbnQnOiB7XG4gICAgICBwYXR0ZXJuOiAvKF58W15cIntcXFxcJF0pIy4qLyxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICB9LFxuICAgICdmdW5jdGlvbi1uYW1lJzogW1xuICAgIC8vIGEpIGZ1bmN0aW9uIGZvbyB7XG4gICAgLy8gYikgZm9vKCkge1xuICAgIC8vIGMpIGZ1bmN0aW9uIGZvbygpIHtcbiAgICAvLyBidXQgbm90IOKAnGZvbyB74oCdXG4gICAge1xuICAgICAgLy8gYSkgYW5kIGMpXG4gICAgICBwYXR0ZXJuOiAvKFxcYmZ1bmN0aW9uXFxzKylbXFx3LV0rKD89KD86XFxzKlxcKD86XFxzKlxcKSk/XFxzKlxceykvLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGFsaWFzOiAnZnVuY3Rpb24nXG4gICAgfSwge1xuICAgICAgLy8gYilcbiAgICAgIHBhdHRlcm46IC9cXGJbXFx3LV0rKD89XFxzKlxcKFxccypcXClcXHMqXFx7KS8sXG4gICAgICBhbGlhczogJ2Z1bmN0aW9uJ1xuICAgIH1dLFxuICAgIC8vIEhpZ2hsaWdodCB2YXJpYWJsZSBuYW1lcyBhcyB2YXJpYWJsZXMgaW4gZm9yIGFuZCBzZWxlY3QgYmVnaW5uaW5ncy5cbiAgICAnZm9yLW9yLXNlbGVjdCc6IHtcbiAgICAgIHBhdHRlcm46IC8oXFxiKD86Zm9yfHNlbGVjdClcXHMrKVxcdysoPz1cXHMraW5cXHMpLyxcbiAgICAgIGFsaWFzOiAndmFyaWFibGUnLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgIH0sXG4gICAgLy8gSGlnaGxpZ2h0IHZhcmlhYmxlIG5hbWVzIGFzIHZhcmlhYmxlcyBpbiB0aGUgbGVmdC1oYW5kIHBhcnRcbiAgICAvLyBvZiBhc3NpZ25tZW50cyAo4oCcPeKAnSBhbmQg4oCcKz3igJ0pLlxuICAgICdhc3NpZ24tbGVmdCc6IHtcbiAgICAgIHBhdHRlcm46IC8oXnxbXFxzO3wmXXxbPD5dXFwoKVxcdysoPzpcXC5cXHcrKSooPz1cXCs/PSkvLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdlbnZpcm9ubWVudCc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiBSZWdFeHAoJyhefFtcXFxcczt8Jl18Wzw+XVxcXFwoKScgKyBlbnZWYXJzKSxcbiAgICAgICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgICAgIGFsaWFzOiAnY29uc3RhbnQnXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBhbGlhczogJ3ZhcmlhYmxlJyxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICB9LFxuICAgIC8vIEhpZ2hsaWdodCBwYXJhbWV0ZXIgbmFtZXMgYXMgdmFyaWFibGVzXG4gICAgJ3BhcmFtZXRlcic6IHtcbiAgICAgIHBhdHRlcm46IC8oXnxcXHMpLXsxLDJ9KD86XFx3KzpbKy1dPyk/XFx3Kyg/OlxcLlxcdyspKig/PVs9XFxzXXwkKS8sXG4gICAgICBhbGlhczogJ3ZhcmlhYmxlJyxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICB9LFxuICAgICdzdHJpbmcnOiBbXG4gICAgLy8gU3VwcG9ydCBmb3IgSGVyZS1kb2N1bWVudHMgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSGVyZV9kb2N1bWVudFxuICAgIHtcbiAgICAgIHBhdHRlcm46IC8oKD86XnxbXjxdKTw8LT9cXHMqKShcXHcrKVxcc1tcXHNcXFNdKj8oPzpcXHI/XFxufFxccilcXDIvLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGluc2lkZTogaW5zaWRlU3RyaW5nXG4gICAgfSxcbiAgICAvLyBIZXJlLWRvY3VtZW50IHdpdGggcXVvdGVzIGFyb3VuZCB0aGUgdGFnXG4gICAgLy8g4oaSIE5vIGV4cGFuc2lvbiAoc28gbm8g4oCcaW5zaWRl4oCdKS5cbiAgICB7XG4gICAgICBwYXR0ZXJuOiAvKCg/Ol58W148XSk8PC0/XFxzKikoW1wiJ10pKFxcdyspXFwyXFxzW1xcc1xcU10qPyg/Olxccj9cXG58XFxyKVxcMy8sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdiYXNoJzogY29tbWFuZEFmdGVySGVyZWRvY1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8g4oCcTm9ybWFs4oCdIHN0cmluZ1xuICAgIHtcbiAgICAgIC8vIGh0dHBzOi8vd3d3LmdudS5vcmcvc29mdHdhcmUvYmFzaC9tYW51YWwvaHRtbF9ub2RlL0RvdWJsZS1RdW90ZXMuaHRtbFxuICAgICAgcGF0dGVybjogLyhefFteXFxcXF0oPzpcXFxcXFxcXCkqKVwiKD86XFxcXFtcXHNcXFNdfFxcJFxcKFteKV0rXFwpfFxcJCg/IVxcKCl8YFteYF0rYHxbXlwiXFxcXGAkXSkqXCIvLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGluc2lkZTogaW5zaWRlU3RyaW5nXG4gICAgfSwge1xuICAgICAgLy8gaHR0cHM6Ly93d3cuZ251Lm9yZy9zb2Z0d2FyZS9iYXNoL21hbnVhbC9odG1sX25vZGUvU2luZ2xlLVF1b3Rlcy5odG1sXG4gICAgICBwYXR0ZXJuOiAvKF58W14kXFxcXF0pJ1teJ10qJy8sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgZ3JlZWR5OiB0cnVlXG4gICAgfSwge1xuICAgICAgLy8gaHR0cHM6Ly93d3cuZ251Lm9yZy9zb2Z0d2FyZS9iYXNoL21hbnVhbC9odG1sX25vZGUvQU5TSV8wMDJkQy1RdW90aW5nLmh0bWxcbiAgICAgIHBhdHRlcm46IC9cXCQnKD86W14nXFxcXF18XFxcXFtcXHNcXFNdKSonLyxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAnZW50aXR5JzogaW5zaWRlU3RyaW5nLmVudGl0eVxuICAgICAgfVxuICAgIH1dLFxuICAgICdlbnZpcm9ubWVudCc6IHtcbiAgICAgIHBhdHRlcm46IFJlZ0V4cCgnXFxcXCQ/JyArIGVudlZhcnMpLFxuICAgICAgYWxpYXM6ICdjb25zdGFudCdcbiAgICB9LFxuICAgICd2YXJpYWJsZSc6IGluc2lkZVN0cmluZy52YXJpYWJsZSxcbiAgICAnZnVuY3Rpb24nOiB7XG4gICAgICBwYXR0ZXJuOiAvKF58W1xcczt8Jl18Wzw+XVxcKCkoPzphZGR8YXByb3Bvc3xhcHR8YXB0LWNhY2hlfGFwdC1nZXR8YXB0aXR1ZGV8YXNwZWxsfGF1dG9teXNxbGJhY2t1cHxhd2t8YmFzZW5hbWV8YmFzaHxiY3xiY29uc29sZXxiZ3xiemlwMnxjYWx8Y2FyZ298Y2F0fGNmZGlza3xjaGdycHxjaGtjb25maWd8Y2htb2R8Y2hvd258Y2hyb290fGNrc3VtfGNsZWFyfGNtcHxjb2x1bW58Y29tbXxjb21wb3NlcnxjcHxjcm9ufGNyb250YWJ8Y3NwbGl0fGN1cmx8Y3V0fGRhdGV8ZGN8ZGR8ZGRyZXNjdWV8ZGVib290c3RyYXB8ZGZ8ZGlmZnxkaWZmM3xkaWd8ZGlyfGRpcmNvbG9yc3xkaXJuYW1lfGRpcnN8ZG1lc2d8ZG9ja2VyfGRvY2tlci1jb21wb3NlfGR1fGVncmVwfGVqZWN0fGVudnxldGh0b29sfGV4cGFuZHxleHBlY3R8ZXhwcnxmZGZvcm1hdHxmZGlza3xmZ3xmZ3JlcHxmaWxlfGZpbmR8Zm10fGZvbGR8Zm9ybWF0fGZyZWV8ZnNja3xmdHB8ZnVzZXJ8Z2F3a3xnaXR8Z3BhcnRlZHxncmVwfGdyb3VwYWRkfGdyb3VwZGVsfGdyb3VwbW9kfGdyb3Vwc3xncnViLW1rY29uZmlnfGd6aXB8aGFsdHxoZWFkfGhnfGhpc3Rvcnl8aG9zdHxob3N0bmFtZXxodG9wfGljb252fGlkfGlmY29uZmlnfGlmZG93bnxpZnVwfGltcG9ydHxpbnN0YWxsfGlwfGphdmF8am9ic3xqb2lufGtpbGx8a2lsbGFsbHxsZXNzfGxpbmt8bG58bG9jYXRlfGxvZ25hbWV8bG9ncm90YXRlfGxvb2t8bHBjfGxwcnxscHJpbnR8bHByaW50ZHxscHJpbnRxfGxwcm18bHN8bHNvZnxseW54fG1ha2V8bWFufG1jfG1kYWRtfG1rY29uZmlnfG1rZGlyfG1rZTJmc3xta2ZpZm98bWtmc3xta2lzb2ZzfG1rbm9kfG1rc3dhcHxtbXZ8bW9yZXxtb3N0fG1vdW50fG10b29sc3xtdHJ8bXV0dHxtdnxuYW5vfG5jfG5ldHN0YXR8bmljZXxubHxub2RlfG5vaHVwfG5vdGlmeS1zZW5kfG5wbXxuc2xvb2t1cHxvcHxvcGVufHBhcnRlZHxwYXNzd2R8cGFzdGV8cGF0aGNoa3xwaW5nfHBraWxsfHBucG18cG9kbWFufHBvZG1hbi1jb21wb3NlfHBvcGR8cHJ8cHJpbnRjYXB8cHJpbnRlbnZ8cHN8cHVzaGR8cHZ8cXVvdGF8cXVvdGFjaGVja3xxdW90YWN0bHxyYW18cmFyfHJjcHxyZWJvb3R8cmVtc3luY3xyZW5hbWV8cmVuaWNlfHJldnxybXxybWRpcnxycG18cnN5bmN8c2NwfHNjcmVlbnxzZGlmZnxzZWR8c2VuZG1haWx8c2VxfHNlcnZpY2V8c2Z0cHxzaHxzaGVsbGNoZWNrfHNodWZ8c2h1dGRvd258c2xlZXB8c2xvY2F0ZXxzb3J0fHNwbGl0fHNzaHxzdGF0fHN0cmFjZXxzdXxzdWRvfHN1bXxzdXNwZW5kfHN3YXBvbnxzeW5jfHN5c2N0bHx0YWN8dGFpbHx0YXJ8dGVlfHRpbWV8dGltZW91dHx0b3B8dG91Y2h8dHJ8dHJhY2Vyb3V0ZXx0c29ydHx0dHl8dW1vdW50fHVuYW1lfHVuZXhwYW5kfHVuaXF8dW5pdHN8dW5yYXJ8dW5zaGFyfHVuemlwfHVwZGF0ZS1ncnVifHVwdGltZXx1c2VyYWRkfHVzZXJkZWx8dXNlcm1vZHx1c2Vyc3x1dWRlY29kZXx1dWVuY29kZXx2fHZjcGtnfHZkaXJ8dml8dmltfHZpcnNofHZtc3RhdHx3YWl0fHdhdGNofHdjfHdnZXR8d2hlcmVpc3x3aGljaHx3aG98d2hvYW1pfHdyaXRlfHhhcmdzfHhkZy1vcGVufHlhcm58eWVzfHplbml0eXx6aXB8enNofHp5cHBlcikoPz0kfFspXFxzO3wmXSkvLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgIH0sXG4gICAgJ2tleXdvcmQnOiB7XG4gICAgICBwYXR0ZXJuOiAvKF58W1xcczt8Jl18Wzw+XVxcKCkoPzpjYXNlfGRvfGRvbmV8ZWxpZnxlbHNlfGVzYWN8Zml8Zm9yfGZ1bmN0aW9ufGlmfGlufHNlbGVjdHx0aGVufHVudGlsfHdoaWxlKSg/PSR8WylcXHM7fCZdKS8sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgfSxcbiAgICAvLyBodHRwczovL3d3dy5nbnUub3JnL3NvZnR3YXJlL2Jhc2gvbWFudWFsL2h0bWxfbm9kZS9TaGVsbC1CdWlsdGluLUNvbW1hbmRzLmh0bWxcbiAgICAnYnVpbHRpbic6IHtcbiAgICAgIHBhdHRlcm46IC8oXnxbXFxzO3wmXXxbPD5dXFwoKSg/OlxcLnw6fGFsaWFzfGJpbmR8YnJlYWt8YnVpbHRpbnxjYWxsZXJ8Y2R8Y29tbWFuZHxjb250aW51ZXxkZWNsYXJlfGVjaG98ZW5hYmxlfGV2YWx8ZXhlY3xleGl0fGV4cG9ydHxnZXRvcHRzfGhhc2h8aGVscHxsZXR8bG9jYWx8bG9nb3V0fG1hcGZpbGV8cHJpbnRmfHB3ZHxyZWFkfHJlYWRhcnJheXxyZWFkb25seXxyZXR1cm58c2V0fHNoaWZ0fHNob3B0fHNvdXJjZXx0ZXN0fHRpbWVzfHRyYXB8dHlwZXx0eXBlc2V0fHVsaW1pdHx1bWFza3x1bmFsaWFzfHVuc2V0KSg/PSR8WylcXHM7fCZdKS8sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgLy8gQWxpYXMgYWRkZWQgdG8gbWFrZSB0aG9zZSBlYXNpZXIgdG8gZGlzdGluZ3Vpc2ggZnJvbSBzdHJpbmdzLlxuICAgICAgYWxpYXM6ICdjbGFzcy1uYW1lJ1xuICAgIH0sXG4gICAgJ2Jvb2xlYW4nOiB7XG4gICAgICBwYXR0ZXJuOiAvKF58W1xcczt8Jl18Wzw+XVxcKCkoPzpmYWxzZXx0cnVlKSg/PSR8WylcXHM7fCZdKS8sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgfSxcbiAgICAnZmlsZS1kZXNjcmlwdG9yJzoge1xuICAgICAgcGF0dGVybjogL1xcQiZcXGRcXGIvLFxuICAgICAgYWxpYXM6ICdpbXBvcnRhbnQnXG4gICAgfSxcbiAgICAnb3BlcmF0b3InOiB7XG4gICAgICAvLyBMb3RzIG9mIHJlZGlyZWN0aW9ucyBoZXJlLCBidXQgbm90IGp1c3QgdGhhdC5cbiAgICAgIHBhdHRlcm46IC9cXGQ/PD58PlxcfHxcXCs9fD1bPX5dP3whPT98PDxbPC1dP3xbJlxcZF0/Pj58XFxkWzw+XSY/fFs8Pl1bJj1dP3wmWz4mXT98XFx8WyZ8XT8vLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdmaWxlLWRlc2NyaXB0b3InOiB7XG4gICAgICAgICAgcGF0dGVybjogL15cXGQvLFxuICAgICAgICAgIGFsaWFzOiAnaW1wb3J0YW50J1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICAncHVuY3R1YXRpb24nOiAvXFwkP1xcKFxcKD98XFwpXFwpP3xcXC5cXC58W3t9W1xcXTtcXFxcXS8sXG4gICAgJ251bWJlcic6IHtcbiAgICAgIHBhdHRlcm46IC8oXnxcXHMpKD86WzEtOV1cXGQqfDApKD86Wy4sXVxcZCspP1xcYi8sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgfVxuICB9O1xuICBjb21tYW5kQWZ0ZXJIZXJlZG9jLmluc2lkZSA9IFByaXNtLmxhbmd1YWdlcy5iYXNoO1xuXG4gIC8qIFBhdHRlcm5zIGluIGNvbW1hbmQgc3Vic3RpdHV0aW9uLiAqL1xuICB2YXIgdG9CZUNvcGllZCA9IFsnY29tbWVudCcsICdmdW5jdGlvbi1uYW1lJywgJ2Zvci1vci1zZWxlY3QnLCAnYXNzaWduLWxlZnQnLCAncGFyYW1ldGVyJywgJ3N0cmluZycsICdlbnZpcm9ubWVudCcsICdmdW5jdGlvbicsICdrZXl3b3JkJywgJ2J1aWx0aW4nLCAnYm9vbGVhbicsICdmaWxlLWRlc2NyaXB0b3InLCAnb3BlcmF0b3InLCAncHVuY3R1YXRpb24nLCAnbnVtYmVyJ107XG4gIHZhciBpbnNpZGUgPSBpbnNpZGVTdHJpbmcudmFyaWFibGVbMV0uaW5zaWRlO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHRvQmVDb3BpZWQubGVuZ3RoOyBpKyspIHtcbiAgICBpbnNpZGVbdG9CZUNvcGllZFtpXV0gPSBQcmlzbS5sYW5ndWFnZXMuYmFzaFt0b0JlQ29waWVkW2ldXTtcbiAgfVxuICBQcmlzbS5sYW5ndWFnZXMuc2ggPSBQcmlzbS5sYW5ndWFnZXMuYmFzaDtcbiAgUHJpc20ubGFuZ3VhZ2VzLnNoZWxsID0gUHJpc20ubGFuZ3VhZ2VzLmJhc2g7XG59KShQcmlzbSk7XG4oZnVuY3Rpb24gKFByaXNtKSB7XG4gIC8qKlxuICAgKiBSZXBsYWNlcyBhbGwgcGxhY2Vob2xkZXJzIFwiPDxuPj5cIiBvZiBnaXZlbiBwYXR0ZXJuIHdpdGggdGhlIG4tdGggcmVwbGFjZW1lbnQgKHplcm8gYmFzZWQpLlxuICAgKlxuICAgKiBOb3RlOiBUaGlzIGlzIGEgc2ltcGxlIHRleHQgYmFzZWQgcmVwbGFjZW1lbnQuIEJlIGNhcmVmdWwgd2hlbiB1c2luZyBiYWNrcmVmZXJlbmNlcyFcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBhdHRlcm4gdGhlIGdpdmVuIHBhdHRlcm4uXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHJlcGxhY2VtZW50cyBhIGxpc3Qgb2YgcmVwbGFjZW1lbnQgd2hpY2ggY2FuIGJlIGluc2VydGVkIGludG8gdGhlIGdpdmVuIHBhdHRlcm4uXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBwYXR0ZXJuIHdpdGggYWxsIHBsYWNlaG9sZGVycyByZXBsYWNlZCB3aXRoIHRoZWlyIGNvcnJlc3BvbmRpbmcgcmVwbGFjZW1lbnRzLlxuICAgKiBAZXhhbXBsZSByZXBsYWNlKC9hPDwwPj5hLy5zb3VyY2UsIFsvYisvLnNvdXJjZV0pID09PSAvYSg/OmIrKWEvLnNvdXJjZVxuICAgKi9cbiAgZnVuY3Rpb24gcmVwbGFjZShwYXR0ZXJuLCByZXBsYWNlbWVudHMpIHtcbiAgICByZXR1cm4gcGF0dGVybi5yZXBsYWNlKC88PChcXGQrKT4+L2csIGZ1bmN0aW9uIChtLCBpbmRleCkge1xuICAgICAgcmV0dXJuICcoPzonICsgcmVwbGFjZW1lbnRzWytpbmRleF0gKyAnKSc7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwYXR0ZXJuXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHJlcGxhY2VtZW50c1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW2ZsYWdzXVxuICAgKiBAcmV0dXJucyB7UmVnRXhwfVxuICAgKi9cbiAgZnVuY3Rpb24gcmUocGF0dGVybiwgcmVwbGFjZW1lbnRzLCBmbGFncykge1xuICAgIHJldHVybiBSZWdFeHAocmVwbGFjZShwYXR0ZXJuLCByZXBsYWNlbWVudHMpLCBmbGFncyB8fCAnJyk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5lc3RlZCBwYXR0ZXJuIHdoZXJlIGFsbCBvY2N1cnJlbmNlcyBvZiB0aGUgc3RyaW5nIGA8PHNlbGY+PmAgYXJlIHJlcGxhY2VkIHdpdGggdGhlIHBhdHRlcm4gaXRzZWxmLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0dGVyblxuICAgKiBAcGFyYW0ge251bWJlcn0gZGVwdGhMb2cyXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBmdW5jdGlvbiBuZXN0ZWQocGF0dGVybiwgZGVwdGhMb2cyKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkZXB0aExvZzI7IGkrKykge1xuICAgICAgcGF0dGVybiA9IHBhdHRlcm4ucmVwbGFjZSgvPDxzZWxmPj4vZywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJyg/OicgKyBwYXR0ZXJuICsgJyknO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBwYXR0ZXJuLnJlcGxhY2UoLzw8c2VsZj4+L2csICdbXlxcXFxzXFxcXFNdJyk7XG4gIH1cblxuICAvLyBodHRwczovL2RvY3MubWljcm9zb2Z0LmNvbS9lbi11cy9kb3RuZXQvY3NoYXJwL2xhbmd1YWdlLXJlZmVyZW5jZS9rZXl3b3Jkcy9cbiAgdmFyIGtleXdvcmRLaW5kcyA9IHtcbiAgICAvLyBrZXl3b3JkcyB3aGljaCByZXByZXNlbnQgYSByZXR1cm4gb3IgdmFyaWFibGUgdHlwZVxuICAgIHR5cGU6ICdib29sIGJ5dGUgY2hhciBkZWNpbWFsIGRvdWJsZSBkeW5hbWljIGZsb2F0IGludCBsb25nIG9iamVjdCBzYnl0ZSBzaG9ydCBzdHJpbmcgdWludCB1bG9uZyB1c2hvcnQgdmFyIHZvaWQnLFxuICAgIC8vIGtleXdvcmRzIHdoaWNoIGFyZSB1c2VkIHRvIGRlY2xhcmUgYSB0eXBlXG4gICAgdHlwZURlY2xhcmF0aW9uOiAnY2xhc3MgZW51bSBpbnRlcmZhY2UgcmVjb3JkIHN0cnVjdCcsXG4gICAgLy8gY29udGV4dHVhbCBrZXl3b3Jkc1xuICAgIC8vIChcInZhclwiIGFuZCBcImR5bmFtaWNcIiBhcmUgbWlzc2luZyBiZWNhdXNlIHRoZXkgYXJlIHVzZWQgbGlrZSB0eXBlcylcbiAgICBjb250ZXh0dWFsOiAnYWRkIGFsaWFzIGFuZCBhc2NlbmRpbmcgYXN5bmMgYXdhaXQgYnkgZGVzY2VuZGluZyBmcm9tKD89XFxcXHMqKD86XFxcXHd8JCkpIGdldCBnbG9iYWwgZ3JvdXAgaW50byBpbml0KD89XFxcXHMqOykgam9pbiBsZXQgbmFtZW9mIG5vdCBub3RudWxsIG9uIG9yIG9yZGVyYnkgcGFydGlhbCByZW1vdmUgc2VsZWN0IHNldCB1bm1hbmFnZWQgdmFsdWUgd2hlbiB3aGVyZSB3aXRoKD89XFxcXHMqeyknLFxuICAgIC8vIGFsbCBvdGhlciBrZXl3b3Jkc1xuICAgIG90aGVyOiAnYWJzdHJhY3QgYXMgYmFzZSBicmVhayBjYXNlIGNhdGNoIGNoZWNrZWQgY29uc3QgY29udGludWUgZGVmYXVsdCBkZWxlZ2F0ZSBkbyBlbHNlIGV2ZW50IGV4cGxpY2l0IGV4dGVybiBmaW5hbGx5IGZpeGVkIGZvciBmb3JlYWNoIGdvdG8gaWYgaW1wbGljaXQgaW4gaW50ZXJuYWwgaXMgbG9jayBuYW1lc3BhY2UgbmV3IG51bGwgb3BlcmF0b3Igb3V0IG92ZXJyaWRlIHBhcmFtcyBwcml2YXRlIHByb3RlY3RlZCBwdWJsaWMgcmVhZG9ubHkgcmVmIHJldHVybiBzZWFsZWQgc2l6ZW9mIHN0YWNrYWxsb2Mgc3RhdGljIHN3aXRjaCB0aGlzIHRocm93IHRyeSB0eXBlb2YgdW5jaGVja2VkIHVuc2FmZSB1c2luZyB2aXJ0dWFsIHZvbGF0aWxlIHdoaWxlIHlpZWxkJ1xuICB9O1xuXG4gIC8vIGtleXdvcmRzXG4gIGZ1bmN0aW9uIGtleXdvcmRzVG9QYXR0ZXJuKHdvcmRzKSB7XG4gICAgcmV0dXJuICdcXFxcYig/OicgKyB3b3Jkcy50cmltKCkucmVwbGFjZSgvIC9nLCAnfCcpICsgJylcXFxcYic7XG4gIH1cbiAgdmFyIHR5cGVEZWNsYXJhdGlvbktleXdvcmRzID0ga2V5d29yZHNUb1BhdHRlcm4oa2V5d29yZEtpbmRzLnR5cGVEZWNsYXJhdGlvbik7XG4gIHZhciBrZXl3b3JkcyA9IFJlZ0V4cChrZXl3b3Jkc1RvUGF0dGVybihrZXl3b3JkS2luZHMudHlwZSArICcgJyArIGtleXdvcmRLaW5kcy50eXBlRGVjbGFyYXRpb24gKyAnICcgKyBrZXl3b3JkS2luZHMuY29udGV4dHVhbCArICcgJyArIGtleXdvcmRLaW5kcy5vdGhlcikpO1xuICB2YXIgbm9uVHlwZUtleXdvcmRzID0ga2V5d29yZHNUb1BhdHRlcm4oa2V5d29yZEtpbmRzLnR5cGVEZWNsYXJhdGlvbiArICcgJyArIGtleXdvcmRLaW5kcy5jb250ZXh0dWFsICsgJyAnICsga2V5d29yZEtpbmRzLm90aGVyKTtcbiAgdmFyIG5vbkNvbnRleHR1YWxLZXl3b3JkcyA9IGtleXdvcmRzVG9QYXR0ZXJuKGtleXdvcmRLaW5kcy50eXBlICsgJyAnICsga2V5d29yZEtpbmRzLnR5cGVEZWNsYXJhdGlvbiArICcgJyArIGtleXdvcmRLaW5kcy5vdGhlcik7XG5cbiAgLy8gdHlwZXNcbiAgdmFyIGdlbmVyaWMgPSBuZXN0ZWQoLzwoPzpbXjw+Oz0rXFwtKi8lJnxeXXw8PHNlbGY+PikqPi8uc291cmNlLCAyKTsgLy8gdGhlIGlkZWEgYmVoaW5kIHRoZSBvdGhlciBmb3JiaWRkZW4gY2hhcmFjdGVycyBpcyB0byBwcmV2ZW50IGZhbHNlIHBvc2l0aXZlcy4gU2FtZSBmb3IgdHVwbGVFbGVtZW50LlxuICB2YXIgbmVzdGVkUm91bmQgPSBuZXN0ZWQoL1xcKCg/OlteKCldfDw8c2VsZj4+KSpcXCkvLnNvdXJjZSwgMik7XG4gIHZhciBuYW1lID0gL0A/XFxiW0EtWmEtel9dXFx3KlxcYi8uc291cmNlO1xuICB2YXIgZ2VuZXJpY05hbWUgPSByZXBsYWNlKC88PDA+Pig/Olxccyo8PDE+Pik/Ly5zb3VyY2UsIFtuYW1lLCBnZW5lcmljXSk7XG4gIHZhciBpZGVudGlmaWVyID0gcmVwbGFjZSgvKD8hPDwwPj4pPDwxPj4oPzpcXHMqXFwuXFxzKjw8MT4+KSovLnNvdXJjZSwgW25vblR5cGVLZXl3b3JkcywgZ2VuZXJpY05hbWVdKTtcbiAgdmFyIGFycmF5ID0gL1xcW1xccyooPzosXFxzKikqXFxdLy5zb3VyY2U7XG4gIHZhciB0eXBlRXhwcmVzc2lvbldpdGhvdXRUdXBsZSA9IHJlcGxhY2UoLzw8MD4+KD86XFxzKig/OlxcP1xccyopPzw8MT4+KSooPzpcXHMqXFw/KT8vLnNvdXJjZSwgW2lkZW50aWZpZXIsIGFycmF5XSk7XG4gIHZhciB0dXBsZUVsZW1lbnQgPSByZXBsYWNlKC9bXiwoKTw+W1xcXTs9K1xcLSovJSZ8Xl18PDwwPj58PDwxPj58PDwyPj4vLnNvdXJjZSwgW2dlbmVyaWMsIG5lc3RlZFJvdW5kLCBhcnJheV0pO1xuICB2YXIgdHVwbGUgPSByZXBsYWNlKC9cXCg8PDA+PisoPzosPDwwPj4rKStcXCkvLnNvdXJjZSwgW3R1cGxlRWxlbWVudF0pO1xuICB2YXIgdHlwZUV4cHJlc3Npb24gPSByZXBsYWNlKC8oPzo8PDA+Pnw8PDE+PikoPzpcXHMqKD86XFw/XFxzKik/PDwyPj4pKig/OlxccypcXD8pPy8uc291cmNlLCBbdHVwbGUsIGlkZW50aWZpZXIsIGFycmF5XSk7XG4gIHZhciB0eXBlSW5zaWRlID0ge1xuICAgICdrZXl3b3JkJzoga2V5d29yZHMsXG4gICAgJ3B1bmN0dWF0aW9uJzogL1s8PigpPywuOltcXF1dL1xuICB9O1xuXG4gIC8vIHN0cmluZ3MgJiBjaGFyYWN0ZXJzXG4gIC8vIGh0dHBzOi8vZG9jcy5taWNyb3NvZnQuY29tL2VuLXVzL2RvdG5ldC9jc2hhcnAvbGFuZ3VhZ2UtcmVmZXJlbmNlL2xhbmd1YWdlLXNwZWNpZmljYXRpb24vbGV4aWNhbC1zdHJ1Y3R1cmUjY2hhcmFjdGVyLWxpdGVyYWxzXG4gIC8vIGh0dHBzOi8vZG9jcy5taWNyb3NvZnQuY29tL2VuLXVzL2RvdG5ldC9jc2hhcnAvbGFuZ3VhZ2UtcmVmZXJlbmNlL2xhbmd1YWdlLXNwZWNpZmljYXRpb24vbGV4aWNhbC1zdHJ1Y3R1cmUjc3RyaW5nLWxpdGVyYWxzXG4gIHZhciBjaGFyYWN0ZXIgPSAvJyg/OlteXFxyXFxuJ1xcXFxdfFxcXFwufFxcXFxbVXV4XVtcXGRhLWZBLUZdezEsOH0pJy8uc291cmNlOyAvLyBzaW1wbGlmaWVkIHBhdHRlcm5cbiAgdmFyIHJlZ3VsYXJTdHJpbmcgPSAvXCIoPzpcXFxcLnxbXlxcXFxcIlxcclxcbl0pKlwiLy5zb3VyY2U7XG4gIHZhciB2ZXJiYXRpbVN0cmluZyA9IC9AXCIoPzpcIlwifFxcXFxbXFxzXFxTXXxbXlxcXFxcIl0pKlwiKD8hXCIpLy5zb3VyY2U7XG4gIFByaXNtLmxhbmd1YWdlcy5jc2hhcnAgPSBQcmlzbS5sYW5ndWFnZXMuZXh0ZW5kKCdjbGlrZScsIHtcbiAgICAnc3RyaW5nJzogW3tcbiAgICAgIHBhdHRlcm46IHJlKC8oXnxbXiRcXFxcXSk8PDA+Pi8uc291cmNlLCBbdmVyYmF0aW1TdHJpbmddKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBncmVlZHk6IHRydWVcbiAgICB9LCB7XG4gICAgICBwYXR0ZXJuOiByZSgvKF58W15AJFxcXFxdKTw8MD4+Ly5zb3VyY2UsIFtyZWd1bGFyU3RyaW5nXSksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgZ3JlZWR5OiB0cnVlXG4gICAgfV0sXG4gICAgJ2NsYXNzLW5hbWUnOiBbe1xuICAgICAgLy8gVXNpbmcgc3RhdGljXG4gICAgICAvLyB1c2luZyBzdGF0aWMgU3lzdGVtLk1hdGg7XG4gICAgICBwYXR0ZXJuOiByZSgvKFxcYnVzaW5nXFxzK3N0YXRpY1xccyspPDwwPj4oPz1cXHMqOykvLnNvdXJjZSwgW2lkZW50aWZpZXJdKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBpbnNpZGU6IHR5cGVJbnNpZGVcbiAgICB9LCB7XG4gICAgICAvLyBVc2luZyBhbGlhcyAodHlwZSlcbiAgICAgIC8vIHVzaW5nIFByb2plY3QgPSBQQy5NeUNvbXBhbnkuUHJvamVjdDtcbiAgICAgIHBhdHRlcm46IHJlKC8oXFxidXNpbmdcXHMrPDwwPj5cXHMqPVxccyopPDwxPj4oPz1cXHMqOykvLnNvdXJjZSwgW25hbWUsIHR5cGVFeHByZXNzaW9uXSksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgaW5zaWRlOiB0eXBlSW5zaWRlXG4gICAgfSwge1xuICAgICAgLy8gVXNpbmcgYWxpYXMgKGFsaWFzKVxuICAgICAgLy8gdXNpbmcgUHJvamVjdCA9IFBDLk15Q29tcGFueS5Qcm9qZWN0O1xuICAgICAgcGF0dGVybjogcmUoLyhcXGJ1c2luZ1xccyspPDwwPj4oPz1cXHMqPSkvLnNvdXJjZSwgW25hbWVdKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICB9LCB7XG4gICAgICAvLyBUeXBlIGRlY2xhcmF0aW9uc1xuICAgICAgLy8gY2xhc3MgRm9vPEEsIEI+XG4gICAgICAvLyBpbnRlcmZhY2UgRm9vPG91dCBBLCBCPlxuICAgICAgcGF0dGVybjogcmUoLyhcXGI8PDA+PlxccyspPDwxPj4vLnNvdXJjZSwgW3R5cGVEZWNsYXJhdGlvbktleXdvcmRzLCBnZW5lcmljTmFtZV0pLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGluc2lkZTogdHlwZUluc2lkZVxuICAgIH0sIHtcbiAgICAgIC8vIFNpbmdsZSBjYXRjaCBleGNlcHRpb24gZGVjbGFyYXRpb25cbiAgICAgIC8vIGNhdGNoKEZvbylcbiAgICAgIC8vICh0aGluZ3MgbGlrZSBjYXRjaChGb28gZSkgaXMgY292ZXJlZCBieSB2YXJpYWJsZSBkZWNsYXJhdGlvbilcbiAgICAgIHBhdHRlcm46IHJlKC8oXFxiY2F0Y2hcXHMqXFwoXFxzKik8PDA+Pi8uc291cmNlLCBbaWRlbnRpZmllcl0pLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGluc2lkZTogdHlwZUluc2lkZVxuICAgIH0sIHtcbiAgICAgIC8vIE5hbWUgb2YgdGhlIHR5cGUgcGFyYW1ldGVyIG9mIGdlbmVyaWMgY29uc3RyYWludHNcbiAgICAgIC8vIHdoZXJlIEZvbyA6IGNsYXNzXG4gICAgICBwYXR0ZXJuOiByZSgvKFxcYndoZXJlXFxzKyk8PDA+Pi8uc291cmNlLCBbbmFtZV0pLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgIH0sIHtcbiAgICAgIC8vIENhc3RzIGFuZCBjaGVja3MgdmlhIGFzIGFuZCBpcy5cbiAgICAgIC8vIGFzIEZvbzxBPiwgaXMgQmFyPEI+XG4gICAgICAvLyAodGhpbmdzIGxpa2UgaWYoYSBpcyBGb28gYikgaXMgY292ZXJlZCBieSB2YXJpYWJsZSBkZWNsYXJhdGlvbilcbiAgICAgIHBhdHRlcm46IHJlKC8oXFxiKD86aXMoPzpcXHMrbm90KT98YXMpXFxzKyk8PDA+Pi8uc291cmNlLCBbdHlwZUV4cHJlc3Npb25XaXRob3V0VHVwbGVdKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBpbnNpZGU6IHR5cGVJbnNpZGVcbiAgICB9LCB7XG4gICAgICAvLyBWYXJpYWJsZSwgZmllbGQgYW5kIHBhcmFtZXRlciBkZWNsYXJhdGlvblxuICAgICAgLy8gKEZvbyBiYXIsIEJhciBiYXosIEZvb1ssLF0gYmF5LCBGb288QmFyLCBGb29CYXI8QmFyPj4gYmF4KVxuICAgICAgcGF0dGVybjogcmUoL1xcYjw8MD4+KD89XFxzKyg/ITw8MT4+fHdpdGhcXHMqXFx7KTw8Mj4+KD86XFxzKls9LDs6eylcXF1dfFxccysoPzppbnx3aGVuKVxcYikpLy5zb3VyY2UsIFt0eXBlRXhwcmVzc2lvbiwgbm9uQ29udGV4dHVhbEtleXdvcmRzLCBuYW1lXSksXG4gICAgICBpbnNpZGU6IHR5cGVJbnNpZGVcbiAgICB9XSxcbiAgICAna2V5d29yZCc6IGtleXdvcmRzLFxuICAgIC8vIGh0dHBzOi8vZG9jcy5taWNyb3NvZnQuY29tL2VuLXVzL2RvdG5ldC9jc2hhcnAvbGFuZ3VhZ2UtcmVmZXJlbmNlL2xhbmd1YWdlLXNwZWNpZmljYXRpb24vbGV4aWNhbC1zdHJ1Y3R1cmUjbGl0ZXJhbHNcbiAgICAnbnVtYmVyJzogLyg/OlxcYjAoPzp4W1xcZGEtZl9dKltcXGRhLWZdfGJbMDFfXSpbMDFdKXwoPzpcXEJcXC5cXGQrKD86XytcXGQrKSp8XFxiXFxkKyg/Ol8rXFxkKykqKD86XFwuXFxkKyg/Ol8rXFxkKykqKT8pKD86ZVstK10/XFxkKyg/Ol8rXFxkKykqKT8pKD86W2RmbG11XXxsdXx1bCk/XFxiL2ksXG4gICAgJ29wZXJhdG9yJzogLz4+PT98PDw9P3xbLT1dPnwoWy0rJnxdKVxcMXx+fFxcP1xcPz0/fFstKyovJSZ8XiE9PD5dPT8vLFxuICAgICdwdW5jdHVhdGlvbic6IC9cXD9cXC4/fDo6fFt7fVtcXF07KCksLjpdL1xuICB9KTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnY3NoYXJwJywgJ251bWJlcicsIHtcbiAgICAncmFuZ2UnOiB7XG4gICAgICBwYXR0ZXJuOiAvXFwuXFwuLyxcbiAgICAgIGFsaWFzOiAnb3BlcmF0b3InXG4gICAgfVxuICB9KTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnY3NoYXJwJywgJ3B1bmN0dWF0aW9uJywge1xuICAgICduYW1lZC1wYXJhbWV0ZXInOiB7XG4gICAgICBwYXR0ZXJuOiByZSgvKFsoLF1cXHMqKTw8MD4+KD89XFxzKjopLy5zb3VyY2UsIFtuYW1lXSksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgYWxpYXM6ICdwdW5jdHVhdGlvbidcbiAgICB9XG4gIH0pO1xuICBQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdjc2hhcnAnLCAnY2xhc3MtbmFtZScsIHtcbiAgICAnbmFtZXNwYWNlJzoge1xuICAgICAgLy8gbmFtZXNwYWNlIEZvby5CYXIge31cbiAgICAgIC8vIHVzaW5nIEZvby5CYXI7XG4gICAgICBwYXR0ZXJuOiByZSgvKFxcYig/Om5hbWVzcGFjZXx1c2luZylcXHMrKTw8MD4+KD86XFxzKlxcLlxccyo8PDA+PikqKD89XFxzKls7e10pLy5zb3VyY2UsIFtuYW1lXSksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdwdW5jdHVhdGlvbic6IC9cXC4vXG4gICAgICB9XG4gICAgfSxcbiAgICAndHlwZS1leHByZXNzaW9uJzoge1xuICAgICAgLy8gZGVmYXVsdChGb28pLCB0eXBlb2YoRm9vPEJhcj4pLCBzaXplb2YoaW50KVxuICAgICAgcGF0dGVybjogcmUoLyhcXGIoPzpkZWZhdWx0fHNpemVvZnx0eXBlb2YpXFxzKlxcKFxccyooPyFcXHMpKSg/OlteKClcXHNdfFxccyg/IVxccyl8PDwwPj4pKig/PVxccypcXCkpLy5zb3VyY2UsIFtuZXN0ZWRSb3VuZF0pLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGFsaWFzOiAnY2xhc3MtbmFtZScsXG4gICAgICBpbnNpZGU6IHR5cGVJbnNpZGVcbiAgICB9LFxuICAgICdyZXR1cm4tdHlwZSc6IHtcbiAgICAgIC8vIEZvbzxCYXI+IEZvckJhcigpOyBGb28gSUZvby5CYXIoKSA9PiAwXG4gICAgICAvLyBpbnQgdGhpc1tpbnQgaW5kZXhdID0+IDA7IFQgSVJlYWRPbmx5TGlzdDxUPi50aGlzW2ludCBpbmRleF0gPT4gdGhpc1tpbmRleF07XG4gICAgICAvLyBpbnQgRm9vID0+IDA7IGludCBGb28geyBnZXQ7IHNldCB9ID0gMDtcbiAgICAgIHBhdHRlcm46IHJlKC88PDA+Pig/PVxccysoPzo8PDE+PlxccyooPzo9PnxbKHtdfFxcLlxccyp0aGlzXFxzKlxcWyl8dGhpc1xccypcXFspKS8uc291cmNlLCBbdHlwZUV4cHJlc3Npb24sIGlkZW50aWZpZXJdKSxcbiAgICAgIGluc2lkZTogdHlwZUluc2lkZSxcbiAgICAgIGFsaWFzOiAnY2xhc3MtbmFtZSdcbiAgICB9LFxuICAgICdjb25zdHJ1Y3Rvci1pbnZvY2F0aW9uJzoge1xuICAgICAgLy8gbmV3IExpc3Q8Rm9vPEJhcltdPj4geyB9XG4gICAgICBwYXR0ZXJuOiByZSgvKFxcYm5ld1xccyspPDwwPj4oPz1cXHMqW1soe10pLy5zb3VyY2UsIFt0eXBlRXhwcmVzc2lvbl0pLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGluc2lkZTogdHlwZUluc2lkZSxcbiAgICAgIGFsaWFzOiAnY2xhc3MtbmFtZSdcbiAgICB9LFxuICAgIC8qJ2V4cGxpY2l0LWltcGxlbWVudGF0aW9uJzoge1xuICAgIFx0Ly8gaW50IElGb288Rm9vPi5CYXIgPT4gMDsgdm9pZCBJRm9vPEZvbzxGb28+Pi5Gb288VD4oKTtcbiAgICBcdHBhdHRlcm46IHJlcGxhY2UoL1xcYjw8MD4+KD89XFwuPDwxPj4pLywgY2xhc3NOYW1lLCBtZXRob2RPclByb3BlcnR5RGVjbGFyYXRpb24pLFxuICAgIFx0aW5zaWRlOiBjbGFzc05hbWVJbnNpZGUsXG4gICAgXHRhbGlhczogJ2NsYXNzLW5hbWUnXG4gICAgfSwqL1xuICAgICdnZW5lcmljLW1ldGhvZCc6IHtcbiAgICAgIC8vIGZvbzxCYXI+KClcbiAgICAgIHBhdHRlcm46IHJlKC88PDA+Plxccyo8PDE+Pig/PVxccypcXCgpLy5zb3VyY2UsIFtuYW1lLCBnZW5lcmljXSksXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ2Z1bmN0aW9uJzogcmUoL148PDA+Pi8uc291cmNlLCBbbmFtZV0pLFxuICAgICAgICAnZ2VuZXJpYyc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiBSZWdFeHAoZ2VuZXJpYyksXG4gICAgICAgICAgYWxpYXM6ICdjbGFzcy1uYW1lJyxcbiAgICAgICAgICBpbnNpZGU6IHR5cGVJbnNpZGVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgJ3R5cGUtbGlzdCc6IHtcbiAgICAgIC8vIFRoZSBsaXN0IG9mIHR5cGVzIGluaGVyaXRlZCBvciBvZiBnZW5lcmljIGNvbnN0cmFpbnRzXG4gICAgICAvLyBjbGFzcyBGb288Rj4gOiBCYXIsIElMaXN0PEZvb0Jhcj5cbiAgICAgIC8vIHdoZXJlIEYgOiBCYXIsIElMaXN0PGludD5cbiAgICAgIHBhdHRlcm46IHJlKC9cXGIoKD86PDwwPj5cXHMrPDwxPj58cmVjb3JkXFxzKzw8MT4+XFxzKjw8NT4+fHdoZXJlXFxzKzw8Mj4+KVxccyo6XFxzKikoPzo8PDM+Pnw8PDQ+Pnw8PDE+Plxccyo8PDU+Pnw8PDY+PikoPzpcXHMqLFxccyooPzo8PDM+Pnw8PDQ+Pnw8PDY+PikpKig/PVxccyooPzp3aGVyZXxbeztdfD0+fCQpKS8uc291cmNlLCBbdHlwZURlY2xhcmF0aW9uS2V5d29yZHMsIGdlbmVyaWNOYW1lLCBuYW1lLCB0eXBlRXhwcmVzc2lvbiwga2V5d29yZHMuc291cmNlLCBuZXN0ZWRSb3VuZCwgL1xcYm5ld1xccypcXChcXHMqXFwpLy5zb3VyY2VdKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ3JlY29yZC1hcmd1bWVudHMnOiB7XG4gICAgICAgICAgcGF0dGVybjogcmUoLyheKD8hbmV3XFxzKlxcKCk8PDA+PlxccyopPDwxPj4vLnNvdXJjZSwgW2dlbmVyaWNOYW1lLCBuZXN0ZWRSb3VuZF0pLFxuICAgICAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgICAgIGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLmNzaGFycFxuICAgICAgICB9LFxuICAgICAgICAna2V5d29yZCc6IGtleXdvcmRzLFxuICAgICAgICAnY2xhc3MtbmFtZSc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiBSZWdFeHAodHlwZUV4cHJlc3Npb24pLFxuICAgICAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgICAgICBpbnNpZGU6IHR5cGVJbnNpZGVcbiAgICAgICAgfSxcbiAgICAgICAgJ3B1bmN0dWF0aW9uJzogL1ssKCldL1xuICAgICAgfVxuICAgIH0sXG4gICAgJ3ByZXByb2Nlc3Nvcic6IHtcbiAgICAgIHBhdHRlcm46IC8oXltcXHQgXSopIy4qL20sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgYWxpYXM6ICdwcm9wZXJ0eScsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgLy8gaGlnaGxpZ2h0IHByZXByb2Nlc3NvciBkaXJlY3RpdmVzIGFzIGtleXdvcmRzXG4gICAgICAgICdkaXJlY3RpdmUnOiB7XG4gICAgICAgICAgcGF0dGVybjogLygjKVxcYig/OmRlZmluZXxlbGlmfGVsc2V8ZW5kaWZ8ZW5kcmVnaW9ufGVycm9yfGlmfGxpbmV8bnVsbGFibGV8cHJhZ21hfHJlZ2lvbnx1bmRlZnx3YXJuaW5nKVxcYi8sXG4gICAgICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgICAgICBhbGlhczogJ2tleXdvcmQnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIC8vIGF0dHJpYnV0ZXNcbiAgdmFyIHJlZ3VsYXJTdHJpbmdPckNoYXJhY3RlciA9IHJlZ3VsYXJTdHJpbmcgKyAnfCcgKyBjaGFyYWN0ZXI7XG4gIHZhciByZWd1bGFyU3RyaW5nQ2hhcmFjdGVyT3JDb21tZW50ID0gcmVwbGFjZSgvXFwvKD8hWyovXSl8XFwvXFwvW15cXHJcXG5dKltcXHJcXG5dfFxcL1xcKig/OlteKl18XFwqKD8hXFwvKSkqXFwqXFwvfDw8MD4+Ly5zb3VyY2UsIFtyZWd1bGFyU3RyaW5nT3JDaGFyYWN0ZXJdKTtcbiAgdmFyIHJvdW5kRXhwcmVzc2lvbiA9IG5lc3RlZChyZXBsYWNlKC9bXlwiJy8oKV18PDwwPj58XFwoPDxzZWxmPj4qXFwpLy5zb3VyY2UsIFtyZWd1bGFyU3RyaW5nQ2hhcmFjdGVyT3JDb21tZW50XSksIDIpO1xuXG4gIC8vIGh0dHBzOi8vZG9jcy5taWNyb3NvZnQuY29tL2VuLXVzL2RvdG5ldC9jc2hhcnAvcHJvZ3JhbW1pbmctZ3VpZGUvY29uY2VwdHMvYXR0cmlidXRlcy8jYXR0cmlidXRlLXRhcmdldHNcbiAgdmFyIGF0dHJUYXJnZXQgPSAvXFxiKD86YXNzZW1ibHl8ZXZlbnR8ZmllbGR8bWV0aG9kfG1vZHVsZXxwYXJhbXxwcm9wZXJ0eXxyZXR1cm58dHlwZSlcXGIvLnNvdXJjZTtcbiAgdmFyIGF0dHIgPSByZXBsYWNlKC88PDA+Pig/OlxccypcXCg8PDE+PipcXCkpPy8uc291cmNlLCBbaWRlbnRpZmllciwgcm91bmRFeHByZXNzaW9uXSk7XG4gIFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ2NzaGFycCcsICdjbGFzcy1uYW1lJywge1xuICAgICdhdHRyaWJ1dGUnOiB7XG4gICAgICAvLyBBdHRyaWJ1dGVzXG4gICAgICAvLyBbRm9vXSwgW0ZvbygxKSwgQmFyKDIsIFByb3AgPSBcImZvb1wiKV0sIFtyZXR1cm46IEZvbygxKSwgQmFyKDIpXSwgW2Fzc2VtYmx5OiBGb28oQmFyKV1cbiAgICAgIHBhdHRlcm46IHJlKC8oKD86XnxbXlxcc1xcdz4pP10pXFxzKlxcW1xccyopKD86PDwwPj5cXHMqOlxccyopPzw8MT4+KD86XFxzKixcXHMqPDwxPj4pKig/PVxccypcXF0pLy5zb3VyY2UsIFthdHRyVGFyZ2V0LCBhdHRyXSksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICd0YXJnZXQnOiB7XG4gICAgICAgICAgcGF0dGVybjogcmUoL148PDA+Pig/PVxccyo6KS8uc291cmNlLCBbYXR0clRhcmdldF0pLFxuICAgICAgICAgIGFsaWFzOiAna2V5d29yZCdcbiAgICAgICAgfSxcbiAgICAgICAgJ2F0dHJpYnV0ZS1hcmd1bWVudHMnOiB7XG4gICAgICAgICAgcGF0dGVybjogcmUoL1xcKDw8MD4+KlxcKS8uc291cmNlLCBbcm91bmRFeHByZXNzaW9uXSksXG4gICAgICAgICAgaW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMuY3NoYXJwXG4gICAgICAgIH0sXG4gICAgICAgICdjbGFzcy1uYW1lJzoge1xuICAgICAgICAgIHBhdHRlcm46IFJlZ0V4cChpZGVudGlmaWVyKSxcbiAgICAgICAgICBpbnNpZGU6IHtcbiAgICAgICAgICAgICdwdW5jdHVhdGlvbic6IC9cXC4vXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAncHVuY3R1YXRpb24nOiAvWzosXS9cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIC8vIHN0cmluZyBpbnRlcnBvbGF0aW9uXG4gIHZhciBmb3JtYXRTdHJpbmcgPSAvOltefVxcclxcbl0rLy5zb3VyY2U7XG4gIC8vIG11bHRpIGxpbmVcbiAgdmFyIG1JbnRlcnBvbGF0aW9uUm91bmQgPSBuZXN0ZWQocmVwbGFjZSgvW15cIicvKCldfDw8MD4+fFxcKDw8c2VsZj4+KlxcKS8uc291cmNlLCBbcmVndWxhclN0cmluZ0NoYXJhY3Rlck9yQ29tbWVudF0pLCAyKTtcbiAgdmFyIG1JbnRlcnBvbGF0aW9uID0gcmVwbGFjZSgvXFx7KD8hXFx7KSg/Oig/IVt9Ol0pPDwwPj4pKjw8MT4+P1xcfS8uc291cmNlLCBbbUludGVycG9sYXRpb25Sb3VuZCwgZm9ybWF0U3RyaW5nXSk7XG4gIC8vIHNpbmdsZSBsaW5lXG4gIHZhciBzSW50ZXJwb2xhdGlvblJvdW5kID0gbmVzdGVkKHJlcGxhY2UoL1teXCInLygpXXxcXC8oPyFcXCopfFxcL1xcKig/OlteKl18XFwqKD8hXFwvKSkqXFwqXFwvfDw8MD4+fFxcKDw8c2VsZj4+KlxcKS8uc291cmNlLCBbcmVndWxhclN0cmluZ09yQ2hhcmFjdGVyXSksIDIpO1xuICB2YXIgc0ludGVycG9sYXRpb24gPSByZXBsYWNlKC9cXHsoPyFcXHspKD86KD8hW306XSk8PDA+PikqPDwxPj4/XFx9Ly5zb3VyY2UsIFtzSW50ZXJwb2xhdGlvblJvdW5kLCBmb3JtYXRTdHJpbmddKTtcbiAgZnVuY3Rpb24gY3JlYXRlSW50ZXJwb2xhdGlvbkluc2lkZShpbnRlcnBvbGF0aW9uLCBpbnRlcnBvbGF0aW9uUm91bmQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ2ludGVycG9sYXRpb24nOiB7XG4gICAgICAgIHBhdHRlcm46IHJlKC8oKD86XnxbXntdKSg/Olxce1xceykqKTw8MD4+Ly5zb3VyY2UsIFtpbnRlcnBvbGF0aW9uXSksXG4gICAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICAgIGluc2lkZToge1xuICAgICAgICAgICdmb3JtYXQtc3RyaW5nJzoge1xuICAgICAgICAgICAgcGF0dGVybjogcmUoLyheXFx7KD86KD8hW306XSk8PDA+PikqKTw8MT4+KD89XFx9JCkvLnNvdXJjZSwgW2ludGVycG9sYXRpb25Sb3VuZCwgZm9ybWF0U3RyaW5nXSksXG4gICAgICAgICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgICAgICAgaW5zaWRlOiB7XG4gICAgICAgICAgICAgICdwdW5jdHVhdGlvbic6IC9eOi9cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgICdwdW5jdHVhdGlvbic6IC9eXFx7fFxcfSQvLFxuICAgICAgICAgICdleHByZXNzaW9uJzoge1xuICAgICAgICAgICAgcGF0dGVybjogL1tcXHNcXFNdKy8sXG4gICAgICAgICAgICBhbGlhczogJ2xhbmd1YWdlLWNzaGFycCcsXG4gICAgICAgICAgICBpbnNpZGU6IFByaXNtLmxhbmd1YWdlcy5jc2hhcnBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAnc3RyaW5nJzogL1tcXHNcXFNdKy9cbiAgICB9O1xuICB9XG4gIFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ2NzaGFycCcsICdzdHJpbmcnLCB7XG4gICAgJ2ludGVycG9sYXRpb24tc3RyaW5nJzogW3tcbiAgICAgIHBhdHRlcm46IHJlKC8oXnxbXlxcXFxdKSg/OlxcJEB8QFxcJClcIig/OlwiXCJ8XFxcXFtcXHNcXFNdfFxce1xce3w8PDA+PnxbXlxcXFx7XCJdKSpcIi8uc291cmNlLCBbbUludGVycG9sYXRpb25dKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBpbnNpZGU6IGNyZWF0ZUludGVycG9sYXRpb25JbnNpZGUobUludGVycG9sYXRpb24sIG1JbnRlcnBvbGF0aW9uUm91bmQpXG4gICAgfSwge1xuICAgICAgcGF0dGVybjogcmUoLyhefFteQFxcXFxdKVxcJFwiKD86XFxcXC58XFx7XFx7fDw8MD4+fFteXFxcXFwie10pKlwiLy5zb3VyY2UsIFtzSW50ZXJwb2xhdGlvbl0pLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGluc2lkZTogY3JlYXRlSW50ZXJwb2xhdGlvbkluc2lkZShzSW50ZXJwb2xhdGlvbiwgc0ludGVycG9sYXRpb25Sb3VuZClcbiAgICB9XSxcbiAgICAnY2hhcic6IHtcbiAgICAgIHBhdHRlcm46IFJlZ0V4cChjaGFyYWN0ZXIpLFxuICAgICAgZ3JlZWR5OiB0cnVlXG4gICAgfVxuICB9KTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmRvdG5ldCA9IFByaXNtLmxhbmd1YWdlcy5jcyA9IFByaXNtLmxhbmd1YWdlcy5jc2hhcnA7XG59KShQcmlzbSk7XG5QcmlzbS5sYW5ndWFnZXMubWFya3VwID0ge1xuICAnY29tbWVudCc6IHtcbiAgICBwYXR0ZXJuOiAvPCEtLSg/Oig/ITwhLS0pW1xcc1xcU10pKj8tLT4vLFxuICAgIGdyZWVkeTogdHJ1ZVxuICB9LFxuICAncHJvbG9nJzoge1xuICAgIHBhdHRlcm46IC88XFw/W1xcc1xcU10rP1xcPz4vLFxuICAgIGdyZWVkeTogdHJ1ZVxuICB9LFxuICAnZG9jdHlwZSc6IHtcbiAgICAvLyBodHRwczovL3d3dy53My5vcmcvVFIveG1sLyNOVC1kb2N0eXBlZGVjbFxuICAgIHBhdHRlcm46IC88IURPQ1RZUEUoPzpbXj5cIidbXFxdXXxcIlteXCJdKlwifCdbXiddKicpKyg/OlxcWyg/OltePFwiJ1xcXV18XCJbXlwiXSpcInwnW14nXSonfDwoPyEhLS0pfDwhLS0oPzpbXi1dfC0oPyEtPikpKi0tPikqXFxdXFxzKik/Pi9pLFxuICAgIGdyZWVkeTogdHJ1ZSxcbiAgICBpbnNpZGU6IHtcbiAgICAgICdpbnRlcm5hbC1zdWJzZXQnOiB7XG4gICAgICAgIHBhdHRlcm46IC8oXlteXFxbXSpcXFspW1xcc1xcU10rKD89XFxdPiQpLyxcbiAgICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgICBpbnNpZGU6IG51bGwgLy8gc2VlIGJlbG93XG4gICAgICB9LFxuICAgICAgJ3N0cmluZyc6IHtcbiAgICAgICAgcGF0dGVybjogL1wiW15cIl0qXCJ8J1teJ10qJy8sXG4gICAgICAgIGdyZWVkeTogdHJ1ZVxuICAgICAgfSxcbiAgICAgICdwdW5jdHVhdGlvbic6IC9ePCF8PiR8W1tcXF1dLyxcbiAgICAgICdkb2N0eXBlLXRhZyc6IC9eRE9DVFlQRS9pLFxuICAgICAgJ25hbWUnOiAvW15cXHM8PidcIl0rL1xuICAgIH1cbiAgfSxcbiAgJ2NkYXRhJzoge1xuICAgIHBhdHRlcm46IC88IVxcW0NEQVRBXFxbW1xcc1xcU10qP1xcXVxcXT4vaSxcbiAgICBncmVlZHk6IHRydWVcbiAgfSxcbiAgJ3RhZyc6IHtcbiAgICBwYXR0ZXJuOiAvPFxcLz8oPyFcXGQpW15cXHM+XFwvPSQ8JV0rKD86XFxzKD86XFxzKlteXFxzPlxcLz1dKyg/Olxccyo9XFxzKig/OlwiW15cIl0qXCJ8J1teJ10qJ3xbXlxccydcIj49XSsoPz1bXFxzPl0pKXwoPz1bXFxzLz5dKSkpKyk/XFxzKlxcLz8+LyxcbiAgICBncmVlZHk6IHRydWUsXG4gICAgaW5zaWRlOiB7XG4gICAgICAndGFnJzoge1xuICAgICAgICBwYXR0ZXJuOiAvXjxcXC8/W15cXHM+XFwvXSsvLFxuICAgICAgICBpbnNpZGU6IHtcbiAgICAgICAgICAncHVuY3R1YXRpb24nOiAvXjxcXC8/LyxcbiAgICAgICAgICAnbmFtZXNwYWNlJzogL15bXlxccz5cXC86XSs6L1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgJ3NwZWNpYWwtYXR0cic6IFtdLFxuICAgICAgJ2F0dHItdmFsdWUnOiB7XG4gICAgICAgIHBhdHRlcm46IC89XFxzKig/OlwiW15cIl0qXCJ8J1teJ10qJ3xbXlxccydcIj49XSspLyxcbiAgICAgICAgaW5zaWRlOiB7XG4gICAgICAgICAgJ3B1bmN0dWF0aW9uJzogW3tcbiAgICAgICAgICAgIHBhdHRlcm46IC9ePS8sXG4gICAgICAgICAgICBhbGlhczogJ2F0dHItZXF1YWxzJ1xuICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgIHBhdHRlcm46IC9eKFxccyopW1wiJ118W1wiJ10kLyxcbiAgICAgICAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICAgICAgICB9XVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgJ3B1bmN0dWF0aW9uJzogL1xcLz8+LyxcbiAgICAgICdhdHRyLW5hbWUnOiB7XG4gICAgICAgIHBhdHRlcm46IC9bXlxccz5cXC9dKy8sXG4gICAgICAgIGluc2lkZToge1xuICAgICAgICAgICduYW1lc3BhY2UnOiAvXlteXFxzPlxcLzpdKzovXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gICdlbnRpdHknOiBbe1xuICAgIHBhdHRlcm46IC8mW1xcZGEtel17MSw4fTsvaSxcbiAgICBhbGlhczogJ25hbWVkLWVudGl0eSdcbiAgfSwgLyYjeD9bXFxkYS1mXXsxLDh9Oy9pXVxufTtcblByaXNtLmxhbmd1YWdlcy5tYXJrdXBbJ3RhZyddLmluc2lkZVsnYXR0ci12YWx1ZSddLmluc2lkZVsnZW50aXR5J10gPSBQcmlzbS5sYW5ndWFnZXMubWFya3VwWydlbnRpdHknXTtcblByaXNtLmxhbmd1YWdlcy5tYXJrdXBbJ2RvY3R5cGUnXS5pbnNpZGVbJ2ludGVybmFsLXN1YnNldCddLmluc2lkZSA9IFByaXNtLmxhbmd1YWdlcy5tYXJrdXA7XG5cbi8vIFBsdWdpbiB0byBtYWtlIGVudGl0eSB0aXRsZSBzaG93IHRoZSByZWFsIGVudGl0eSwgaWRlYSBieSBSb21hbiBLb21hcm92XG5QcmlzbS5ob29rcy5hZGQoJ3dyYXAnLCBmdW5jdGlvbiAoZW52KSB7XG4gIGlmIChlbnYudHlwZSA9PT0gJ2VudGl0eScpIHtcbiAgICBlbnYuYXR0cmlidXRlc1sndGl0bGUnXSA9IGVudi5jb250ZW50LnJlcGxhY2UoLyZhbXA7LywgJyYnKTtcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cC50YWcsICdhZGRJbmxpbmVkJywge1xuICAvKipcbiAgICogQWRkcyBhbiBpbmxpbmVkIGxhbmd1YWdlIHRvIG1hcmt1cC5cbiAgICpcbiAgICogQW4gZXhhbXBsZSBvZiBhbiBpbmxpbmVkIGxhbmd1YWdlIGlzIENTUyB3aXRoIGA8c3R5bGU+YCB0YWdzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnTmFtZSBUaGUgbmFtZSBvZiB0aGUgdGFnIHRoYXQgY29udGFpbnMgdGhlIGlubGluZWQgbGFuZ3VhZ2UuIFRoaXMgbmFtZSB3aWxsIGJlIHRyZWF0ZWQgYXNcbiAgICogY2FzZSBpbnNlbnNpdGl2ZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGxhbmcgVGhlIGxhbmd1YWdlIGtleS5cbiAgICogQGV4YW1wbGVcbiAgICogYWRkSW5saW5lZCgnc3R5bGUnLCAnY3NzJyk7XG4gICAqL1xuICB2YWx1ZTogZnVuY3Rpb24gYWRkSW5saW5lZCh0YWdOYW1lLCBsYW5nKSB7XG4gICAgdmFyIGluY2x1ZGVkQ2RhdGFJbnNpZGUgPSB7fTtcbiAgICBpbmNsdWRlZENkYXRhSW5zaWRlWydsYW5ndWFnZS0nICsgbGFuZ10gPSB7XG4gICAgICBwYXR0ZXJuOiAvKF48IVxcW0NEQVRBXFxbKVtcXHNcXFNdKz8oPz1cXF1cXF0+JCkvaSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBpbnNpZGU6IFByaXNtLmxhbmd1YWdlc1tsYW5nXVxuICAgIH07XG4gICAgaW5jbHVkZWRDZGF0YUluc2lkZVsnY2RhdGEnXSA9IC9ePCFcXFtDREFUQVxcW3xcXF1cXF0+JC9pO1xuICAgIHZhciBpbnNpZGUgPSB7XG4gICAgICAnaW5jbHVkZWQtY2RhdGEnOiB7XG4gICAgICAgIHBhdHRlcm46IC88IVxcW0NEQVRBXFxbW1xcc1xcU10qP1xcXVxcXT4vaSxcbiAgICAgICAgaW5zaWRlOiBpbmNsdWRlZENkYXRhSW5zaWRlXG4gICAgICB9XG4gICAgfTtcbiAgICBpbnNpZGVbJ2xhbmd1YWdlLScgKyBsYW5nXSA9IHtcbiAgICAgIHBhdHRlcm46IC9bXFxzXFxTXSsvLFxuICAgICAgaW5zaWRlOiBQcmlzbS5sYW5ndWFnZXNbbGFuZ11cbiAgICB9O1xuICAgIHZhciBkZWYgPSB7fTtcbiAgICBkZWZbdGFnTmFtZV0gPSB7XG4gICAgICBwYXR0ZXJuOiBSZWdFeHAoLyg8X19bXj5dKj4pKD86PCFcXFtDREFUQVxcWyg/OlteXFxdXXxcXF0oPyFcXF0+KSkqXFxdXFxdPnwoPyE8IVxcW0NEQVRBXFxbKVtcXHNcXFNdKSo/KD89PFxcL19fPikvLnNvdXJjZS5yZXBsYWNlKC9fXy9nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0YWdOYW1lO1xuICAgICAgfSksICdpJyksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiBpbnNpZGVcbiAgICB9O1xuICAgIFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ21hcmt1cCcsICdjZGF0YScsIGRlZik7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFByaXNtLmxhbmd1YWdlcy5tYXJrdXAudGFnLCAnYWRkQXR0cmlidXRlJywge1xuICAvKipcbiAgICogQWRkcyBhbiBwYXR0ZXJuIHRvIGhpZ2hsaWdodCBsYW5ndWFnZXMgZW1iZWRkZWQgaW4gSFRNTCBhdHRyaWJ1dGVzLlxuICAgKlxuICAgKiBBbiBleGFtcGxlIG9mIGFuIGlubGluZWQgbGFuZ3VhZ2UgaXMgQ1NTIHdpdGggYHN0eWxlYCBhdHRyaWJ1dGVzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXR0ck5hbWUgVGhlIG5hbWUgb2YgdGhlIHRhZyB0aGF0IGNvbnRhaW5zIHRoZSBpbmxpbmVkIGxhbmd1YWdlLiBUaGlzIG5hbWUgd2lsbCBiZSB0cmVhdGVkIGFzXG4gICAqIGNhc2UgaW5zZW5zaXRpdmUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBsYW5nIFRoZSBsYW5ndWFnZSBrZXkuXG4gICAqIEBleGFtcGxlXG4gICAqIGFkZEF0dHJpYnV0ZSgnc3R5bGUnLCAnY3NzJyk7XG4gICAqL1xuICB2YWx1ZTogZnVuY3Rpb24gKGF0dHJOYW1lLCBsYW5nKSB7XG4gICAgUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cC50YWcuaW5zaWRlWydzcGVjaWFsLWF0dHInXS5wdXNoKHtcbiAgICAgIHBhdHRlcm46IFJlZ0V4cCgvKF58W1wiJ1xcc10pLy5zb3VyY2UgKyAnKD86JyArIGF0dHJOYW1lICsgJyknICsgL1xccyo9XFxzKig/OlwiW15cIl0qXCJ8J1teJ10qJ3xbXlxccydcIj49XSsoPz1bXFxzPl0pKS8uc291cmNlLCAnaScpLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAnYXR0ci1uYW1lJzogL15bXlxccz1dKy8sXG4gICAgICAgICdhdHRyLXZhbHVlJzoge1xuICAgICAgICAgIHBhdHRlcm46IC89W1xcc1xcU10rLyxcbiAgICAgICAgICBpbnNpZGU6IHtcbiAgICAgICAgICAgICd2YWx1ZSc6IHtcbiAgICAgICAgICAgICAgcGF0dGVybjogLyhePVxccyooW1wiJ118KD8hW1wiJ10pKSlcXFNbXFxzXFxTXSooPz1cXDIkKS8sXG4gICAgICAgICAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICAgICAgICAgIGFsaWFzOiBbbGFuZywgJ2xhbmd1YWdlLScgKyBsYW5nXSxcbiAgICAgICAgICAgICAgaW5zaWRlOiBQcmlzbS5sYW5ndWFnZXNbbGFuZ11cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAncHVuY3R1YXRpb24nOiBbe1xuICAgICAgICAgICAgICBwYXR0ZXJuOiAvXj0vLFxuICAgICAgICAgICAgICBhbGlhczogJ2F0dHItZXF1YWxzJ1xuICAgICAgICAgICAgfSwgL1wifCcvXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG59KTtcblByaXNtLmxhbmd1YWdlcy5odG1sID0gUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cDtcblByaXNtLmxhbmd1YWdlcy5tYXRobWwgPSBQcmlzbS5sYW5ndWFnZXMubWFya3VwO1xuUHJpc20ubGFuZ3VhZ2VzLnN2ZyA9IFByaXNtLmxhbmd1YWdlcy5tYXJrdXA7XG5QcmlzbS5sYW5ndWFnZXMueG1sID0gUHJpc20ubGFuZ3VhZ2VzLmV4dGVuZCgnbWFya3VwJywge30pO1xuUHJpc20ubGFuZ3VhZ2VzLnNzbWwgPSBQcmlzbS5sYW5ndWFnZXMueG1sO1xuUHJpc20ubGFuZ3VhZ2VzLmF0b20gPSBQcmlzbS5sYW5ndWFnZXMueG1sO1xuUHJpc20ubGFuZ3VhZ2VzLnJzcyA9IFByaXNtLmxhbmd1YWdlcy54bWw7XG4oZnVuY3Rpb24gKFByaXNtKSB7XG4gIHZhciBzdHJpbmcgPSAvKD86XCIoPzpcXFxcKD86XFxyXFxufFtcXHNcXFNdKXxbXlwiXFxcXFxcclxcbl0pKlwifCcoPzpcXFxcKD86XFxyXFxufFtcXHNcXFNdKXxbXidcXFxcXFxyXFxuXSkqJykvO1xuICBQcmlzbS5sYW5ndWFnZXMuY3NzID0ge1xuICAgICdjb21tZW50JzogL1xcL1xcKltcXHNcXFNdKj9cXCpcXC8vLFxuICAgICdhdHJ1bGUnOiB7XG4gICAgICBwYXR0ZXJuOiBSZWdFeHAoJ0BbXFxcXHctXSg/OicgKyAvW147e1xcc1wiJ118XFxzKyg/IVxccykvLnNvdXJjZSArICd8JyArIHN0cmluZy5zb3VyY2UgKyAnKSo/JyArIC8oPzo7fCg/PVxccypcXHspKS8uc291cmNlKSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAncnVsZSc6IC9eQFtcXHctXSsvLFxuICAgICAgICAnc2VsZWN0b3ItZnVuY3Rpb24tYXJndW1lbnQnOiB7XG4gICAgICAgICAgcGF0dGVybjogLyhcXGJzZWxlY3RvclxccypcXChcXHMqKD8hW1xccyldKSkoPzpbXigpXFxzXXxcXHMrKD8hW1xccyldKXxcXCgoPzpbXigpXXxcXChbXigpXSpcXCkpKlxcKSkrKD89XFxzKlxcKSkvLFxuICAgICAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICAgICAgYWxpYXM6ICdzZWxlY3RvcidcbiAgICAgICAgfSxcbiAgICAgICAgJ2tleXdvcmQnOiB7XG4gICAgICAgICAgcGF0dGVybjogLyhefFteXFx3LV0pKD86YW5kfG5vdHxvbmx5fG9yKSg/IVtcXHctXSkvLFxuICAgICAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICAgICAgfVxuICAgICAgICAvLyBTZWUgcmVzdCBiZWxvd1xuICAgICAgfVxuICAgIH0sXG4gICAgJ3VybCc6IHtcbiAgICAgIC8vIGh0dHBzOi8vZHJhZnRzLmNzc3dnLm9yZy9jc3MtdmFsdWVzLTMvI3VybHNcbiAgICAgIHBhdHRlcm46IFJlZ0V4cCgnXFxcXGJ1cmxcXFxcKCg/OicgKyBzdHJpbmcuc291cmNlICsgJ3wnICsgLyg/OlteXFxcXFxcclxcbigpXCInXXxcXFxcW1xcc1xcU10pKi8uc291cmNlICsgJylcXFxcKScsICdpJyksXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ2Z1bmN0aW9uJzogL151cmwvaSxcbiAgICAgICAgJ3B1bmN0dWF0aW9uJzogL15cXCh8XFwpJC8sXG4gICAgICAgICdzdHJpbmcnOiB7XG4gICAgICAgICAgcGF0dGVybjogUmVnRXhwKCdeJyArIHN0cmluZy5zb3VyY2UgKyAnJCcpLFxuICAgICAgICAgIGFsaWFzOiAndXJsJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICAnc2VsZWN0b3InOiB7XG4gICAgICBwYXR0ZXJuOiBSZWdFeHAoJyhefFt7fVxcXFxzXSlbXnt9XFxcXHNdKD86W157fTtcIlxcJ1xcXFxzXXxcXFxccysoPyFbXFxcXHN7XSl8JyArIHN0cmluZy5zb3VyY2UgKyAnKSooPz1cXFxccypcXFxceyknKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICB9LFxuICAgICdzdHJpbmcnOiB7XG4gICAgICBwYXR0ZXJuOiBzdHJpbmcsXG4gICAgICBncmVlZHk6IHRydWVcbiAgICB9LFxuICAgICdwcm9wZXJ0eSc6IHtcbiAgICAgIHBhdHRlcm46IC8oXnxbXi1cXHdcXHhBMC1cXHVGRkZGXSkoPyFcXHMpWy1fYS16XFx4QTAtXFx1RkZGRl0oPzooPyFcXHMpWy1cXHdcXHhBMC1cXHVGRkZGXSkqKD89XFxzKjopL2ksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgfSxcbiAgICAnaW1wb3J0YW50JzogLyFpbXBvcnRhbnRcXGIvaSxcbiAgICAnZnVuY3Rpb24nOiB7XG4gICAgICBwYXR0ZXJuOiAvKF58W14tYS16MC05XSlbLWEtejAtOV0rKD89XFwoKS9pLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgIH0sXG4gICAgJ3B1bmN0dWF0aW9uJzogL1soKXt9OzosXS9cbiAgfTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmNzc1snYXRydWxlJ10uaW5zaWRlLnJlc3QgPSBQcmlzbS5sYW5ndWFnZXMuY3NzO1xuICB2YXIgbWFya3VwID0gUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cDtcbiAgaWYgKG1hcmt1cCkge1xuICAgIG1hcmt1cC50YWcuYWRkSW5saW5lZCgnc3R5bGUnLCAnY3NzJyk7XG4gICAgbWFya3VwLnRhZy5hZGRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2NzcycpO1xuICB9XG59KShQcmlzbSk7XG4oZnVuY3Rpb24gKFByaXNtKSB7XG4gIFByaXNtLmxhbmd1YWdlcy5kaWZmID0ge1xuICAgICdjb29yZCc6IFtcbiAgICAvLyBNYXRjaCBhbGwga2luZHMgb2YgY29vcmQgbGluZXMgKHByZWZpeGVkIGJ5IFwiKysrXCIsIFwiLS0tXCIgb3IgXCIqKipcIikuXG4gICAgL14oPzpcXCp7M318LXszfXxcXCt7M30pLiokL20sXG4gICAgLy8gTWF0Y2ggXCJAQCAuLi4gQEBcIiBjb29yZCBsaW5lcyBpbiB1bmlmaWVkIGRpZmYuXG4gICAgL15AQC4qQEAkL20sXG4gICAgLy8gTWF0Y2ggY29vcmQgbGluZXMgaW4gbm9ybWFsIGRpZmYgKHN0YXJ0cyB3aXRoIGEgbnVtYmVyKS5cbiAgICAvXlxcZC4qJC9tXVxuXG4gICAgLy8gZGVsZXRlZCwgaW5zZXJ0ZWQsIHVuY2hhbmdlZCwgZGlmZlxuICB9O1xuXG4gIC8qKlxuICAgKiBBIG1hcCBmcm9tIHRoZSBuYW1lIG9mIGEgYmxvY2sgdG8gaXRzIGxpbmUgcHJlZml4LlxuICAgKlxuICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgc3RyaW5nPn1cbiAgICovXG4gIHZhciBQUkVGSVhFUyA9IHtcbiAgICAnZGVsZXRlZC1zaWduJzogJy0nLFxuICAgICdkZWxldGVkLWFycm93JzogJzwnLFxuICAgICdpbnNlcnRlZC1zaWduJzogJysnLFxuICAgICdpbnNlcnRlZC1hcnJvdyc6ICc+JyxcbiAgICAndW5jaGFuZ2VkJzogJyAnLFxuICAgICdkaWZmJzogJyEnXG4gIH07XG5cbiAgLy8gYWRkIGEgdG9rZW4gZm9yIGVhY2ggcHJlZml4XG4gIE9iamVjdC5rZXlzKFBSRUZJWEVTKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdmFyIHByZWZpeCA9IFBSRUZJWEVTW25hbWVdO1xuICAgIHZhciBhbGlhcyA9IFtdO1xuICAgIGlmICghL15cXHcrJC8udGVzdChuYW1lKSkge1xuICAgICAgLy8gXCJkZWxldGVkLXNpZ25cIiAtPiBcImRlbGV0ZWRcIlxuICAgICAgYWxpYXMucHVzaCgvXFx3Ky8uZXhlYyhuYW1lKVswXSk7XG4gICAgfVxuICAgIGlmIChuYW1lID09PSAnZGlmZicpIHtcbiAgICAgIGFsaWFzLnB1c2goJ2JvbGQnKTtcbiAgICB9XG4gICAgUHJpc20ubGFuZ3VhZ2VzLmRpZmZbbmFtZV0gPSB7XG4gICAgICBwYXR0ZXJuOiBSZWdFeHAoJ14oPzpbJyArIHByZWZpeCArICddLiooPzpcXHJcXG4/fFxcbnwoPyFbXFxcXHNcXFxcU10pKSkrJywgJ20nKSxcbiAgICAgIGFsaWFzOiBhbGlhcyxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAnbGluZSc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvKC4pKD89W1xcc1xcU10pLiooPzpcXHJcXG4/fFxcbik/LyxcbiAgICAgICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgICdwcmVmaXgnOiB7XG4gICAgICAgICAgcGF0dGVybjogL1tcXHNcXFNdLyxcbiAgICAgICAgICBhbGlhczogL1xcdysvLmV4ZWMobmFtZSlbMF1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH0pO1xuXG4gIC8vIG1ha2UgcHJlZml4ZXMgYXZhaWxhYmxlIHRvIERpZmYgcGx1Z2luXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQcmlzbS5sYW5ndWFnZXMuZGlmZiwgJ1BSRUZJWEVTJywge1xuICAgIHZhbHVlOiBQUkVGSVhFU1xuICB9KTtcbn0pKFByaXNtKTtcblByaXNtLmxhbmd1YWdlcy5nbyA9IFByaXNtLmxhbmd1YWdlcy5leHRlbmQoJ2NsaWtlJywge1xuICAnc3RyaW5nJzoge1xuICAgIHBhdHRlcm46IC8oXnxbXlxcXFxdKVwiKD86XFxcXC58W15cIlxcXFxcXHJcXG5dKSpcInxgW15gXSpgLyxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGdyZWVkeTogdHJ1ZVxuICB9LFxuICAna2V5d29yZCc6IC9cXGIoPzpicmVha3xjYXNlfGNoYW58Y29uc3R8Y29udGludWV8ZGVmYXVsdHxkZWZlcnxlbHNlfGZhbGx0aHJvdWdofGZvcnxmdW5jfGdvKD86dG8pP3xpZnxpbXBvcnR8aW50ZXJmYWNlfG1hcHxwYWNrYWdlfHJhbmdlfHJldHVybnxzZWxlY3R8c3RydWN0fHN3aXRjaHx0eXBlfHZhcilcXGIvLFxuICAnYm9vbGVhbic6IC9cXGIoPzpffGZhbHNlfGlvdGF8bmlsfHRydWUpXFxiLyxcbiAgJ251bWJlcic6IFtcbiAgLy8gYmluYXJ5IGFuZCBvY3RhbCBpbnRlZ2Vyc1xuICAvXFxiMCg/OmJbMDFfXSt8b1swLTdfXSspaT9cXGIvaSxcbiAgLy8gaGV4YWRlY2ltYWwgaW50ZWdlcnMgYW5kIGZsb2F0c1xuICAvXFxiMHgoPzpbYS1mXFxkX10rKD86XFwuW2EtZlxcZF9dKik/fFxcLlthLWZcXGRfXSspKD86cFsrLV0/XFxkKyg/Ol9cXGQrKSopP2k/KD8hXFx3KS9pLFxuICAvLyBkZWNpbWFsIGludGVnZXJzIGFuZCBmbG9hdHNcbiAgLyg/OlxcYlxcZFtcXGRfXSooPzpcXC5bXFxkX10qKT98XFxCXFwuXFxkW1xcZF9dKikoPzplWystXT9bXFxkX10rKT9pPyg/IVxcdykvaV0sXG4gICdvcGVyYXRvcic6IC9bKlxcLyVeIT1dPT98XFwrWz0rXT98LVs9LV0/fFxcfFs9fF0/fCYoPzo9fCZ8XFxePT8pP3w+KD86Pj0/fD0pP3w8KD86PD0/fD18LSk/fDo9fFxcLlxcLlxcLi8sXG4gICdidWlsdGluJzogL1xcYig/OmFwcGVuZHxib29sfGJ5dGV8Y2FwfGNsb3NlfGNvbXBsZXh8Y29tcGxleCg/OjY0fDEyOCl8Y29weXxkZWxldGV8ZXJyb3J8ZmxvYXQoPzozMnw2NCl8dT9pbnQoPzo4fDE2fDMyfDY0KT98aW1hZ3xsZW58bWFrZXxuZXd8cGFuaWN8cHJpbnQoPzpsbik/fHJlYWx8cmVjb3ZlcnxydW5lfHN0cmluZ3x1aW50cHRyKVxcYi9cbn0pO1xuUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnZ28nLCAnc3RyaW5nJywge1xuICAnY2hhcic6IHtcbiAgICBwYXR0ZXJuOiAvJyg/OlxcXFwufFteJ1xcXFxcXHJcXG5dKXswLDEwfScvLFxuICAgIGdyZWVkeTogdHJ1ZVxuICB9XG59KTtcbmRlbGV0ZSBQcmlzbS5sYW5ndWFnZXMuZ29bJ2NsYXNzLW5hbWUnXTtcblByaXNtLmxhbmd1YWdlcy5pbmkgPSB7XG4gIC8qKlxuICAgKiBUaGUgY29tcG9uZW50IG1pbWljcyB0aGUgYmVoYXZpb3Igb2YgdGhlIFdpbjMyIEFQSSBwYXJzZXIuXG4gICAqXG4gICAqIEBzZWUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9QcmlzbUpTL3ByaXNtL2lzc3Vlcy8yNzc1I2lzc3VlY29tbWVudC03ODc0Nzc3MjN9XG4gICAqL1xuXG4gICdjb21tZW50Jzoge1xuICAgIHBhdHRlcm46IC8oXlsgXFxmXFx0XFx2XSopWyM7XVteXFxuXFxyXSovbSxcbiAgICBsb29rYmVoaW5kOiB0cnVlXG4gIH0sXG4gICdzZWN0aW9uJzoge1xuICAgIHBhdHRlcm46IC8oXlsgXFxmXFx0XFx2XSopXFxbW15cXG5cXHJcXF1dKlxcXT8vbSxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGluc2lkZToge1xuICAgICAgJ3NlY3Rpb24tbmFtZSc6IHtcbiAgICAgICAgcGF0dGVybjogLyheXFxbWyBcXGZcXHRcXHZdKilbXiBcXGZcXHRcXHZcXF1dKyg/OlsgXFxmXFx0XFx2XStbXiBcXGZcXHRcXHZcXF1dKykqLyxcbiAgICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgICAgYWxpYXM6ICdzZWxlY3RvcidcbiAgICAgIH0sXG4gICAgICAncHVuY3R1YXRpb24nOiAvXFxbfFxcXS9cbiAgICB9XG4gIH0sXG4gICdrZXknOiB7XG4gICAgcGF0dGVybjogLyheWyBcXGZcXHRcXHZdKilbXiBcXGZcXG5cXHJcXHRcXHY9XSsoPzpbIFxcZlxcdFxcdl0rW14gXFxmXFxuXFxyXFx0XFx2PV0rKSooPz1bIFxcZlxcdFxcdl0qPSkvbSxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGFsaWFzOiAnYXR0ci1uYW1lJ1xuICB9LFxuICAndmFsdWUnOiB7XG4gICAgcGF0dGVybjogLyg9WyBcXGZcXHRcXHZdKilbXiBcXGZcXG5cXHJcXHRcXHZdKyg/OlsgXFxmXFx0XFx2XStbXiBcXGZcXG5cXHJcXHRcXHZdKykqLyxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGFsaWFzOiAnYXR0ci12YWx1ZScsXG4gICAgaW5zaWRlOiB7XG4gICAgICAnaW5uZXItdmFsdWUnOiB7XG4gICAgICAgIHBhdHRlcm46IC9eKFwifCcpLisoPz1cXDEkKS8sXG4gICAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gICdwdW5jdHVhdGlvbic6IC89L1xufTtcbihmdW5jdGlvbiAoUHJpc20pIHtcbiAgdmFyIGtleXdvcmRzID0gL1xcYig/OmFic3RyYWN0fGFzc2VydHxib29sZWFufGJyZWFrfGJ5dGV8Y2FzZXxjYXRjaHxjaGFyfGNsYXNzfGNvbnN0fGNvbnRpbnVlfGRlZmF1bHR8ZG98ZG91YmxlfGVsc2V8ZW51bXxleHBvcnRzfGV4dGVuZHN8ZmluYWx8ZmluYWxseXxmbG9hdHxmb3J8Z290b3xpZnxpbXBsZW1lbnRzfGltcG9ydHxpbnN0YW5jZW9mfGludHxpbnRlcmZhY2V8bG9uZ3xtb2R1bGV8bmF0aXZlfG5ld3xub24tc2VhbGVkfG51bGx8b3BlbnxvcGVuc3xwYWNrYWdlfHBlcm1pdHN8cHJpdmF0ZXxwcm90ZWN0ZWR8cHJvdmlkZXN8cHVibGljfHJlY29yZCg/IVxccypbKCl7fVtcXF08Pj0lfi46LDs/K1xcLSovJnxeXSl8cmVxdWlyZXN8cmV0dXJufHNlYWxlZHxzaG9ydHxzdGF0aWN8c3RyaWN0ZnB8c3VwZXJ8c3dpdGNofHN5bmNocm9uaXplZHx0aGlzfHRocm93fHRocm93c3x0b3x0cmFuc2llbnR8dHJhbnNpdGl2ZXx0cnl8dXNlc3x2YXJ8dm9pZHx2b2xhdGlsZXx3aGlsZXx3aXRofHlpZWxkKVxcYi87XG5cbiAgLy8gZnVsbCBwYWNrYWdlIChvcHRpb25hbCkgKyBwYXJlbnQgY2xhc3NlcyAob3B0aW9uYWwpXG4gIHZhciBjbGFzc05hbWVQcmVmaXggPSAvKD86W2Etel1cXHcqXFxzKlxcLlxccyopKig/OltBLVpdXFx3KlxccypcXC5cXHMqKSovLnNvdXJjZTtcblxuICAvLyBiYXNlZCBvbiB0aGUgamF2YSBuYW1pbmcgY29udmVudGlvbnNcbiAgdmFyIGNsYXNzTmFtZSA9IHtcbiAgICBwYXR0ZXJuOiBSZWdFeHAoLyhefFteXFx3Ll0pLy5zb3VyY2UgKyBjbGFzc05hbWVQcmVmaXggKyAvW0EtWl0oPzpbXFxkX0EtWl0qW2Etel1cXHcqKT9cXGIvLnNvdXJjZSksXG4gICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICBpbnNpZGU6IHtcbiAgICAgICduYW1lc3BhY2UnOiB7XG4gICAgICAgIHBhdHRlcm46IC9eW2Etel1cXHcqKD86XFxzKlxcLlxccypbYS16XVxcdyopKig/OlxccypcXC4pPy8sXG4gICAgICAgIGluc2lkZToge1xuICAgICAgICAgICdwdW5jdHVhdGlvbic6IC9cXC4vXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAncHVuY3R1YXRpb24nOiAvXFwuL1xuICAgIH1cbiAgfTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmphdmEgPSBQcmlzbS5sYW5ndWFnZXMuZXh0ZW5kKCdjbGlrZScsIHtcbiAgICAnc3RyaW5nJzoge1xuICAgICAgcGF0dGVybjogLyhefFteXFxcXF0pXCIoPzpcXFxcLnxbXlwiXFxcXFxcclxcbl0pKlwiLyxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBncmVlZHk6IHRydWVcbiAgICB9LFxuICAgICdjbGFzcy1uYW1lJzogW2NsYXNzTmFtZSwge1xuICAgICAgLy8gdmFyaWFibGVzLCBwYXJhbWV0ZXJzLCBhbmQgY29uc3RydWN0b3IgcmVmZXJlbmNlc1xuICAgICAgLy8gdGhpcyB0byBzdXBwb3J0IGNsYXNzIG5hbWVzIChvciBnZW5lcmljIHBhcmFtZXRlcnMpIHdoaWNoIGRvIG5vdCBjb250YWluIGEgbG93ZXIgY2FzZSBsZXR0ZXIgKGFsc28gd29ya3MgZm9yIG1ldGhvZHMpXG4gICAgICBwYXR0ZXJuOiBSZWdFeHAoLyhefFteXFx3Ll0pLy5zb3VyY2UgKyBjbGFzc05hbWVQcmVmaXggKyAvW0EtWl1cXHcqKD89XFxzK1xcdytcXHMqWzssPSgpXXxcXHMqKD86XFxbW1xccyxdKlxcXVxccyopPzo6XFxzKm5ld1xcYikvLnNvdXJjZSksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgaW5zaWRlOiBjbGFzc05hbWUuaW5zaWRlXG4gICAgfSwge1xuICAgICAgLy8gY2xhc3MgbmFtZXMgYmFzZWQgb24ga2V5d29yZFxuICAgICAgLy8gdGhpcyB0byBzdXBwb3J0IGNsYXNzIG5hbWVzIChvciBnZW5lcmljIHBhcmFtZXRlcnMpIHdoaWNoIGRvIG5vdCBjb250YWluIGEgbG93ZXIgY2FzZSBsZXR0ZXIgKGFsc28gd29ya3MgZm9yIG1ldGhvZHMpXG4gICAgICBwYXR0ZXJuOiBSZWdFeHAoLyhcXGIoPzpjbGFzc3xlbnVtfGV4dGVuZHN8aW1wbGVtZW50c3xpbnN0YW5jZW9mfGludGVyZmFjZXxuZXd8cmVjb3JkfHRocm93cylcXHMrKS8uc291cmNlICsgY2xhc3NOYW1lUHJlZml4ICsgL1tBLVpdXFx3KlxcYi8uc291cmNlKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBpbnNpZGU6IGNsYXNzTmFtZS5pbnNpZGVcbiAgICB9XSxcbiAgICAna2V5d29yZCc6IGtleXdvcmRzLFxuICAgICdmdW5jdGlvbic6IFtQcmlzbS5sYW5ndWFnZXMuY2xpa2UuZnVuY3Rpb24sIHtcbiAgICAgIHBhdHRlcm46IC8oOjpcXHMqKVthLXpfXVxcdyovLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgIH1dLFxuICAgICdudW1iZXInOiAvXFxiMGJbMDFdWzAxX10qTD9cXGJ8XFxiMHgoPzpcXC5bXFxkYS1mX3ArLV0rfFtcXGRhLWZfXSsoPzpcXC5bXFxkYS1mX3ArLV0rKT8pXFxifCg/OlxcYlxcZFtcXGRfXSooPzpcXC5bXFxkX10qKT98XFxCXFwuXFxkW1xcZF9dKikoPzplWystXT9cXGRbXFxkX10qKT9bZGZsXT8vaSxcbiAgICAnb3BlcmF0b3InOiB7XG4gICAgICBwYXR0ZXJuOiAvKF58W14uXSkoPzo8PD0/fD4+Pj89P3wtPnwtLXxcXCtcXCt8JiZ8XFx8XFx8fDo6fFs/On5dfFstKyovJSZ8XiE9PD5dPT8pL20sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgfSxcbiAgICAnY29uc3RhbnQnOiAvXFxiW0EtWl1bQS1aX1xcZF0rXFxiL1xuICB9KTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnamF2YScsICdzdHJpbmcnLCB7XG4gICAgJ3RyaXBsZS1xdW90ZWQtc3RyaW5nJzoge1xuICAgICAgLy8gaHR0cDovL29wZW5qZGsuamF2YS5uZXQvamVwcy8zNTUjRGVzY3JpcHRpb25cbiAgICAgIHBhdHRlcm46IC9cIlwiXCJbIFxcdF0qW1xcclxcbl0oPzooPzpcInxcIlwiKT8oPzpcXFxcLnxbXlwiXFxcXF0pKSpcIlwiXCIvLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgYWxpYXM6ICdzdHJpbmcnXG4gICAgfSxcbiAgICAnY2hhcic6IHtcbiAgICAgIHBhdHRlcm46IC8nKD86XFxcXC58W14nXFxcXFxcclxcbl0pezEsNn0nLyxcbiAgICAgIGdyZWVkeTogdHJ1ZVxuICAgIH1cbiAgfSk7XG4gIFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ2phdmEnLCAnY2xhc3MtbmFtZScsIHtcbiAgICAnYW5ub3RhdGlvbic6IHtcbiAgICAgIHBhdHRlcm46IC8oXnxbXi5dKUBcXHcrKD86XFxzKlxcLlxccypcXHcrKSovLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGFsaWFzOiAncHVuY3R1YXRpb24nXG4gICAgfSxcbiAgICAnZ2VuZXJpY3MnOiB7XG4gICAgICBwYXR0ZXJuOiAvPCg/OltcXHdcXHMsLj9dfCYoPyEmKXw8KD86W1xcd1xccywuP118Jig/ISYpfDwoPzpbXFx3XFxzLC4/XXwmKD8hJil8PCg/OltcXHdcXHMsLj9dfCYoPyEmKSkqPikqPikqPikqPi8sXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ2NsYXNzLW5hbWUnOiBjbGFzc05hbWUsXG4gICAgICAgICdrZXl3b3JkJzoga2V5d29yZHMsXG4gICAgICAgICdwdW5jdHVhdGlvbic6IC9bPD4oKSwuOl0vLFxuICAgICAgICAnb3BlcmF0b3InOiAvWz8mfF0vXG4gICAgICB9XG4gICAgfSxcbiAgICAnaW1wb3J0JzogW3tcbiAgICAgIHBhdHRlcm46IFJlZ0V4cCgvKFxcYmltcG9ydFxccyspLy5zb3VyY2UgKyBjbGFzc05hbWVQcmVmaXggKyAvKD86W0EtWl1cXHcqfFxcKikoPz1cXHMqOykvLnNvdXJjZSksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICduYW1lc3BhY2UnOiBjbGFzc05hbWUuaW5zaWRlLm5hbWVzcGFjZSxcbiAgICAgICAgJ3B1bmN0dWF0aW9uJzogL1xcLi8sXG4gICAgICAgICdvcGVyYXRvcic6IC9cXCovLFxuICAgICAgICAnY2xhc3MtbmFtZSc6IC9cXHcrL1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIHBhdHRlcm46IFJlZ0V4cCgvKFxcYmltcG9ydFxccytzdGF0aWNcXHMrKS8uc291cmNlICsgY2xhc3NOYW1lUHJlZml4ICsgLyg/Olxcdyt8XFwqKSg/PVxccyo7KS8uc291cmNlKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBhbGlhczogJ3N0YXRpYycsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ25hbWVzcGFjZSc6IGNsYXNzTmFtZS5pbnNpZGUubmFtZXNwYWNlLFxuICAgICAgICAnc3RhdGljJzogL1xcYlxcdyskLyxcbiAgICAgICAgJ3B1bmN0dWF0aW9uJzogL1xcLi8sXG4gICAgICAgICdvcGVyYXRvcic6IC9cXCovLFxuICAgICAgICAnY2xhc3MtbmFtZSc6IC9cXHcrL1xuICAgICAgfVxuICAgIH1dLFxuICAgICduYW1lc3BhY2UnOiB7XG4gICAgICBwYXR0ZXJuOiBSZWdFeHAoLyhcXGIoPzpleHBvcnRzfGltcG9ydCg/OlxccytzdGF0aWMpP3xtb2R1bGV8b3BlbnxvcGVuc3xwYWNrYWdlfHByb3ZpZGVzfHJlcXVpcmVzfHRvfHRyYW5zaXRpdmV8dXNlc3x3aXRoKVxccyspKD8hPGtleXdvcmQ+KVthLXpdXFx3Kig/OlxcLlthLXpdXFx3KikqXFwuPy8uc291cmNlLnJlcGxhY2UoLzxrZXl3b3JkPi9nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBrZXl3b3Jkcy5zb3VyY2U7XG4gICAgICB9KSksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdwdW5jdHVhdGlvbic6IC9cXC4vXG4gICAgICB9XG4gICAgfVxuICB9KTtcbn0pKFByaXNtKTtcbihmdW5jdGlvbiAoUHJpc20pIHtcbiAgdmFyIHNwZWNpYWxFc2NhcGUgPSB7XG4gICAgcGF0dGVybjogL1xcXFxbXFxcXCgpe31bXFxdXiQrKj98Ll0vLFxuICAgIGFsaWFzOiAnZXNjYXBlJ1xuICB9O1xuICB2YXIgZXNjYXBlID0gL1xcXFwoPzp4W1xcZGEtZkEtRl17Mn18dVtcXGRhLWZBLUZdezR9fHVcXHtbXFxkYS1mQS1GXStcXH18MFswLTddezAsMn18WzEyM11bMC03XXsyfXxjW2EtekEtWl18LikvO1xuICB2YXIgY2hhclNldCA9IHtcbiAgICBwYXR0ZXJuOiAvXFwufFxcXFxbd3NkXXxcXFxccFxce1tee31dK1xcfS9pLFxuICAgIGFsaWFzOiAnY2xhc3MtbmFtZSdcbiAgfTtcbiAgdmFyIGNoYXJTZXRXaXRob3V0RG90ID0ge1xuICAgIHBhdHRlcm46IC9cXFxcW3dzZF18XFxcXHBcXHtbXnt9XStcXH0vaSxcbiAgICBhbGlhczogJ2NsYXNzLW5hbWUnXG4gIH07XG4gIHZhciByYW5nZUNoYXIgPSAnKD86W15cXFxcXFxcXC1dfCcgKyBlc2NhcGUuc291cmNlICsgJyknO1xuICB2YXIgcmFuZ2UgPSBSZWdFeHAocmFuZ2VDaGFyICsgJy0nICsgcmFuZ2VDaGFyKTtcblxuICAvLyB0aGUgbmFtZSBvZiBhIGNhcHR1cmluZyBncm91cFxuICB2YXIgZ3JvdXBOYW1lID0ge1xuICAgIHBhdHRlcm46IC8oPHwnKVtePD4nXSsoPz1bPiddJCkvLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgYWxpYXM6ICd2YXJpYWJsZSdcbiAgfTtcbiAgUHJpc20ubGFuZ3VhZ2VzLnJlZ2V4ID0ge1xuICAgICdjaGFyLWNsYXNzJzoge1xuICAgICAgcGF0dGVybjogLygoPzpefFteXFxcXF0pKD86XFxcXFxcXFwpKilcXFsoPzpbXlxcXFxcXF1dfFxcXFxbXFxzXFxTXSkqXFxdLyxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ2NoYXItY2xhc3MtbmVnYXRpb24nOiB7XG4gICAgICAgICAgcGF0dGVybjogLyheXFxbKVxcXi8sXG4gICAgICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgICAgICBhbGlhczogJ29wZXJhdG9yJ1xuICAgICAgICB9LFxuICAgICAgICAnY2hhci1jbGFzcy1wdW5jdHVhdGlvbic6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvXlxcW3xcXF0kLyxcbiAgICAgICAgICBhbGlhczogJ3B1bmN0dWF0aW9uJ1xuICAgICAgICB9LFxuICAgICAgICAncmFuZ2UnOiB7XG4gICAgICAgICAgcGF0dGVybjogcmFuZ2UsXG4gICAgICAgICAgaW5zaWRlOiB7XG4gICAgICAgICAgICAnZXNjYXBlJzogZXNjYXBlLFxuICAgICAgICAgICAgJ3JhbmdlLXB1bmN0dWF0aW9uJzoge1xuICAgICAgICAgICAgICBwYXR0ZXJuOiAvLS8sXG4gICAgICAgICAgICAgIGFsaWFzOiAnb3BlcmF0b3InXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAnc3BlY2lhbC1lc2NhcGUnOiBzcGVjaWFsRXNjYXBlLFxuICAgICAgICAnY2hhci1zZXQnOiBjaGFyU2V0V2l0aG91dERvdCxcbiAgICAgICAgJ2VzY2FwZSc6IGVzY2FwZVxuICAgICAgfVxuICAgIH0sXG4gICAgJ3NwZWNpYWwtZXNjYXBlJzogc3BlY2lhbEVzY2FwZSxcbiAgICAnY2hhci1zZXQnOiBjaGFyU2V0LFxuICAgICdiYWNrcmVmZXJlbmNlJzogW3tcbiAgICAgIC8vIGEgYmFja3JlZmVyZW5jZSB3aGljaCBpcyBub3QgYW4gb2N0YWwgZXNjYXBlXG4gICAgICBwYXR0ZXJuOiAvXFxcXCg/IVsxMjNdWzAtN117Mn0pWzEtOV0vLFxuICAgICAgYWxpYXM6ICdrZXl3b3JkJ1xuICAgIH0sIHtcbiAgICAgIHBhdHRlcm46IC9cXFxcazxbXjw+J10rPi8sXG4gICAgICBhbGlhczogJ2tleXdvcmQnLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdncm91cC1uYW1lJzogZ3JvdXBOYW1lXG4gICAgICB9XG4gICAgfV0sXG4gICAgJ2FuY2hvcic6IHtcbiAgICAgIHBhdHRlcm46IC9bJF5dfFxcXFxbQUJiR1p6XS8sXG4gICAgICBhbGlhczogJ2Z1bmN0aW9uJ1xuICAgIH0sXG4gICAgJ2VzY2FwZSc6IGVzY2FwZSxcbiAgICAnZ3JvdXAnOiBbe1xuICAgICAgLy8gaHR0cHM6Ly9kb2NzLm9yYWNsZS5jb20vamF2YXNlLzEwL2RvY3MvYXBpL2phdmEvdXRpbC9yZWdleC9QYXR0ZXJuLmh0bWxcbiAgICAgIC8vIGh0dHBzOi8vZG9jcy5taWNyb3NvZnQuY29tL2VuLXVzL2RvdG5ldC9zdGFuZGFyZC9iYXNlLXR5cGVzL3JlZ3VsYXItZXhwcmVzc2lvbi1sYW5ndWFnZS1xdWljay1yZWZlcmVuY2U/dmlldz1uZXRmcmFtZXdvcmstNC43LjIjZ3JvdXBpbmctY29uc3RydWN0c1xuXG4gICAgICAvLyAoKSwgKD88bmFtZT4pLCAoPyduYW1lJyksICg/PiksICg/OiksICg/PSksICg/ISksICg/PD0pLCAoPzwhKSwgKD9pcy1tKSwgKD9pLW06KVxuICAgICAgcGF0dGVybjogL1xcKCg/OlxcPyg/OjxbXjw+J10rPnwnW148PiddKyd8Wz46XXw8P1s9IV18W2lkbW5zdXhVXSsoPzotW2lkbW5zdXhVXSspPzo/KSk/LyxcbiAgICAgIGFsaWFzOiAncHVuY3R1YXRpb24nLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdncm91cC1uYW1lJzogZ3JvdXBOYW1lXG4gICAgICB9XG4gICAgfSwge1xuICAgICAgcGF0dGVybjogL1xcKS8sXG4gICAgICBhbGlhczogJ3B1bmN0dWF0aW9uJ1xuICAgIH1dLFxuICAgICdxdWFudGlmaWVyJzoge1xuICAgICAgcGF0dGVybjogLyg/OlsrKj9dfFxce1xcZCsoPzosXFxkKik/XFx9KVs/K10/LyxcbiAgICAgIGFsaWFzOiAnbnVtYmVyJ1xuICAgIH0sXG4gICAgJ2FsdGVybmF0aW9uJzoge1xuICAgICAgcGF0dGVybjogL1xcfC8sXG4gICAgICBhbGlhczogJ2tleXdvcmQnXG4gICAgfVxuICB9O1xufSkoUHJpc20pO1xuUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHQgPSBQcmlzbS5sYW5ndWFnZXMuZXh0ZW5kKCdjbGlrZScsIHtcbiAgJ2NsYXNzLW5hbWUnOiBbUHJpc20ubGFuZ3VhZ2VzLmNsaWtlWydjbGFzcy1uYW1lJ10sIHtcbiAgICBwYXR0ZXJuOiAvKF58W14kXFx3XFx4QTAtXFx1RkZGRl0pKD8hXFxzKVtfJEEtWlxceEEwLVxcdUZGRkZdKD86KD8hXFxzKVskXFx3XFx4QTAtXFx1RkZGRl0pKig/PVxcLig/OmNvbnN0cnVjdG9yfHByb3RvdHlwZSkpLyxcbiAgICBsb29rYmVoaW5kOiB0cnVlXG4gIH1dLFxuICAna2V5d29yZCc6IFt7XG4gICAgcGF0dGVybjogLygoPzpefFxcfSlcXHMqKWNhdGNoXFxiLyxcbiAgICBsb29rYmVoaW5kOiB0cnVlXG4gIH0sIHtcbiAgICBwYXR0ZXJuOiAvKF58W14uXXxcXC5cXC5cXC5cXHMqKVxcYig/OmFzfGFzc2VydCg/PVxccypcXHspfGFzeW5jKD89XFxzKig/OmZ1bmN0aW9uXFxifFxcKHxbJFxcd1xceEEwLVxcdUZGRkZdfCQpKXxhd2FpdHxicmVha3xjYXNlfGNsYXNzfGNvbnN0fGNvbnRpbnVlfGRlYnVnZ2VyfGRlZmF1bHR8ZGVsZXRlfGRvfGVsc2V8ZW51bXxleHBvcnR8ZXh0ZW5kc3xmaW5hbGx5KD89XFxzKig/Olxce3wkKSl8Zm9yfGZyb20oPz1cXHMqKD86WydcIl18JCkpfGZ1bmN0aW9ufCg/OmdldHxzZXQpKD89XFxzKig/OlsjXFxbJFxcd1xceEEwLVxcdUZGRkZdfCQpKXxpZnxpbXBsZW1lbnRzfGltcG9ydHxpbnxpbnN0YW5jZW9mfGludGVyZmFjZXxsZXR8bmV3fG51bGx8b2Z8cGFja2FnZXxwcml2YXRlfHByb3RlY3RlZHxwdWJsaWN8cmV0dXJufHN0YXRpY3xzdXBlcnxzd2l0Y2h8dGhpc3x0aHJvd3x0cnl8dHlwZW9mfHVuZGVmaW5lZHx2YXJ8dm9pZHx3aGlsZXx3aXRofHlpZWxkKVxcYi8sXG4gICAgbG9va2JlaGluZDogdHJ1ZVxuICB9XSxcbiAgLy8gQWxsb3cgZm9yIGFsbCBub24tQVNDSUkgY2hhcmFjdGVycyAoU2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIwMDg0NDQpXG4gICdmdW5jdGlvbic6IC8jPyg/IVxccylbXyRhLXpBLVpcXHhBMC1cXHVGRkZGXSg/Oig/IVxccylbJFxcd1xceEEwLVxcdUZGRkZdKSooPz1cXHMqKD86XFwuXFxzKig/OmFwcGx5fGJpbmR8Y2FsbClcXHMqKT9cXCgpLyxcbiAgJ251bWJlcic6IHtcbiAgICBwYXR0ZXJuOiBSZWdFeHAoLyhefFteXFx3JF0pLy5zb3VyY2UgKyAnKD86JyArIChcbiAgICAvLyBjb25zdGFudFxuICAgIC9OYU58SW5maW5pdHkvLnNvdXJjZSArICd8JyArXG4gICAgLy8gYmluYXJ5IGludGVnZXJcbiAgICAvMFtiQl1bMDFdKyg/Ol9bMDFdKykqbj8vLnNvdXJjZSArICd8JyArXG4gICAgLy8gb2N0YWwgaW50ZWdlclxuICAgIC8wW29PXVswLTddKyg/Ol9bMC03XSspKm4/Ly5zb3VyY2UgKyAnfCcgK1xuICAgIC8vIGhleGFkZWNpbWFsIGludGVnZXJcbiAgICAvMFt4WF1bXFxkQS1GYS1mXSsoPzpfW1xcZEEtRmEtZl0rKSpuPy8uc291cmNlICsgJ3wnICtcbiAgICAvLyBkZWNpbWFsIGJpZ2ludFxuICAgIC9cXGQrKD86X1xcZCspKm4vLnNvdXJjZSArICd8JyArXG4gICAgLy8gZGVjaW1hbCBudW1iZXIgKGludGVnZXIgb3IgZmxvYXQpIGJ1dCBubyBiaWdpbnRcbiAgICAvKD86XFxkKyg/Ol9cXGQrKSooPzpcXC4oPzpcXGQrKD86X1xcZCspKik/KT98XFwuXFxkKyg/Ol9cXGQrKSopKD86W0VlXVsrLV0/XFxkKyg/Ol9cXGQrKSopPy8uc291cmNlKSArICcpJyArIC8oPyFbXFx3JF0pLy5zb3VyY2UpLFxuICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgfSxcbiAgJ29wZXJhdG9yJzogLy0tfFxcK1xcK3xcXCpcXCo9P3w9PnwmJj0/fFxcfFxcfD0/fFshPV09PXw8PD0/fD4+Pj89P3xbLSsqLyUmfF4hPTw+XT0/fFxcLnszfXxcXD9cXD89P3xcXD9cXC4/fFt+Ol0vXG59KTtcblByaXNtLmxhbmd1YWdlcy5qYXZhc2NyaXB0WydjbGFzcy1uYW1lJ11bMF0ucGF0dGVybiA9IC8oXFxiKD86Y2xhc3N8ZXh0ZW5kc3xpbXBsZW1lbnRzfGluc3RhbmNlb2Z8aW50ZXJmYWNlfG5ldylcXHMrKVtcXHcuXFxcXF0rLztcblByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ2phdmFzY3JpcHQnLCAna2V5d29yZCcsIHtcbiAgJ3JlZ2V4Jzoge1xuICAgIHBhdHRlcm46IFJlZ0V4cChcbiAgICAvLyBsb29rYmVoaW5kXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlZ2V4cC9uby1kdXBlLWNoYXJhY3RlcnMtY2hhcmFjdGVyLWNsYXNzXG4gICAgLygoPzpefFteJFxcd1xceEEwLVxcdUZGRkYuXCInXFxdKVxcc118XFxiKD86cmV0dXJufHlpZWxkKSlcXHMqKS8uc291cmNlICtcbiAgICAvLyBSZWdleCBwYXR0ZXJuOlxuICAgIC8vIFRoZXJlIGFyZSAyIHJlZ2V4IHBhdHRlcm5zIGhlcmUuIFRoZSBSZWdFeHAgc2V0IG5vdGF0aW9uIHByb3Bvc2FsIGFkZGVkIHN1cHBvcnQgZm9yIG5lc3RlZCBjaGFyYWN0ZXJcbiAgICAvLyBjbGFzc2VzIGlmIHRoZSBgdmAgZmxhZyBpcyBwcmVzZW50LiBVbmZvcnR1bmF0ZWx5LCBuZXN0ZWQgQ0NzIGFyZSBib3RoIGNvbnRleHQtZnJlZSBhbmQgaW5jb21wYXRpYmxlXG4gICAgLy8gd2l0aCB0aGUgb25seSBzeW50YXgsIHNvIHdlIGhhdmUgdG8gZGVmaW5lIDIgZGlmZmVyZW50IHJlZ2V4IHBhdHRlcm5zLlxuICAgIC9cXC8vLnNvdXJjZSArICcoPzonICsgLyg/OlxcWyg/OlteXFxdXFxcXFxcclxcbl18XFxcXC4pKlxcXXxcXFxcLnxbXi9cXFxcXFxbXFxyXFxuXSkrXFwvW2RnaW15dXNdezAsN30vLnNvdXJjZSArICd8JyArXG4gICAgLy8gYHZgIGZsYWcgc3ludGF4LiBUaGlzIHN1cHBvcnRzIDMgbGV2ZWxzIG9mIG5lc3RlZCBjaGFyYWN0ZXIgY2xhc3Nlcy5cbiAgICAvKD86XFxbKD86W15bXFxdXFxcXFxcclxcbl18XFxcXC58XFxbKD86W15bXFxdXFxcXFxcclxcbl18XFxcXC58XFxbKD86W15bXFxdXFxcXFxcclxcbl18XFxcXC4pKlxcXSkqXFxdKSpcXF18XFxcXC58W14vXFxcXFxcW1xcclxcbl0pK1xcL1tkZ2lteXVzXXswLDd9dltkZ2lteXVzXXswLDd9Ly5zb3VyY2UgKyAnKScgK1xuICAgIC8vIGxvb2thaGVhZFxuICAgIC8oPz0oPzpcXHN8XFwvXFwqKD86W14qXXxcXCooPyFcXC8pKSpcXCpcXC8pKig/OiR8W1xcclxcbiwuOzp9KVxcXV18XFwvXFwvKSkvLnNvdXJjZSksXG4gICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICBncmVlZHk6IHRydWUsXG4gICAgaW5zaWRlOiB7XG4gICAgICAncmVnZXgtc291cmNlJzoge1xuICAgICAgICBwYXR0ZXJuOiAvXihcXC8pW1xcc1xcU10rKD89XFwvW2Etel0qJCkvLFxuICAgICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgICBhbGlhczogJ2xhbmd1YWdlLXJlZ2V4JyxcbiAgICAgICAgaW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMucmVnZXhcbiAgICAgIH0sXG4gICAgICAncmVnZXgtZGVsaW1pdGVyJzogL15cXC98XFwvJC8sXG4gICAgICAncmVnZXgtZmxhZ3MnOiAvXlthLXpdKyQvXG4gICAgfVxuICB9LFxuICAvLyBUaGlzIG11c3QgYmUgZGVjbGFyZWQgYmVmb3JlIGtleXdvcmQgYmVjYXVzZSB3ZSB1c2UgXCJmdW5jdGlvblwiIGluc2lkZSB0aGUgbG9vay1mb3J3YXJkXG4gICdmdW5jdGlvbi12YXJpYWJsZSc6IHtcbiAgICBwYXR0ZXJuOiAvIz8oPyFcXHMpW18kYS16QS1aXFx4QTAtXFx1RkZGRl0oPzooPyFcXHMpWyRcXHdcXHhBMC1cXHVGRkZGXSkqKD89XFxzKls9Ol1cXHMqKD86YXN5bmNcXHMqKT8oPzpcXGJmdW5jdGlvblxcYnwoPzpcXCgoPzpbXigpXXxcXChbXigpXSpcXCkpKlxcKXwoPyFcXHMpW18kYS16QS1aXFx4QTAtXFx1RkZGRl0oPzooPyFcXHMpWyRcXHdcXHhBMC1cXHVGRkZGXSkqKVxccyo9PikpLyxcbiAgICBhbGlhczogJ2Z1bmN0aW9uJ1xuICB9LFxuICAncGFyYW1ldGVyJzogW3tcbiAgICBwYXR0ZXJuOiAvKGZ1bmN0aW9uKD86XFxzKyg/IVxccylbXyRhLXpBLVpcXHhBMC1cXHVGRkZGXSg/Oig/IVxccylbJFxcd1xceEEwLVxcdUZGRkZdKSopP1xccypcXChcXHMqKSg/IVxccykoPzpbXigpXFxzXXxcXHMrKD8hW1xccyldKXxcXChbXigpXSpcXCkpKyg/PVxccypcXCkpLyxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHRcbiAgfSwge1xuICAgIHBhdHRlcm46IC8oXnxbXiRcXHdcXHhBMC1cXHVGRkZGXSkoPyFcXHMpW18kYS16XFx4QTAtXFx1RkZGRl0oPzooPyFcXHMpWyRcXHdcXHhBMC1cXHVGRkZGXSkqKD89XFxzKj0+KS9pLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgaW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdFxuICB9LCB7XG4gICAgcGF0dGVybjogLyhcXChcXHMqKSg/IVxccykoPzpbXigpXFxzXXxcXHMrKD8hW1xccyldKXxcXChbXigpXSpcXCkpKyg/PVxccypcXClcXHMqPT4pLyxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHRcbiAgfSwge1xuICAgIHBhdHRlcm46IC8oKD86XFxifFxcc3xeKSg/ISg/OmFzfGFzeW5jfGF3YWl0fGJyZWFrfGNhc2V8Y2F0Y2h8Y2xhc3N8Y29uc3R8Y29udGludWV8ZGVidWdnZXJ8ZGVmYXVsdHxkZWxldGV8ZG98ZWxzZXxlbnVtfGV4cG9ydHxleHRlbmRzfGZpbmFsbHl8Zm9yfGZyb218ZnVuY3Rpb258Z2V0fGlmfGltcGxlbWVudHN8aW1wb3J0fGlufGluc3RhbmNlb2Z8aW50ZXJmYWNlfGxldHxuZXd8bnVsbHxvZnxwYWNrYWdlfHByaXZhdGV8cHJvdGVjdGVkfHB1YmxpY3xyZXR1cm58c2V0fHN0YXRpY3xzdXBlcnxzd2l0Y2h8dGhpc3x0aHJvd3x0cnl8dHlwZW9mfHVuZGVmaW5lZHx2YXJ8dm9pZHx3aGlsZXx3aXRofHlpZWxkKSg/IVskXFx3XFx4QTAtXFx1RkZGRl0pKSg/Oig/IVxccylbXyRhLXpBLVpcXHhBMC1cXHVGRkZGXSg/Oig/IVxccylbJFxcd1xceEEwLVxcdUZGRkZdKSpcXHMqKVxcKFxccyp8XFxdXFxzKlxcKFxccyopKD8hXFxzKSg/OlteKClcXHNdfFxccysoPyFbXFxzKV0pfFxcKFteKCldKlxcKSkrKD89XFxzKlxcKVxccypcXHspLyxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHRcbiAgfV0sXG4gICdjb25zdGFudCc6IC9cXGJbQS1aXSg/OltBLVpfXXxcXGR4PykqXFxiL1xufSk7XG5QcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdqYXZhc2NyaXB0JywgJ3N0cmluZycsIHtcbiAgJ2hhc2hiYW5nJzoge1xuICAgIHBhdHRlcm46IC9eIyEuKi8sXG4gICAgZ3JlZWR5OiB0cnVlLFxuICAgIGFsaWFzOiAnY29tbWVudCdcbiAgfSxcbiAgJ3RlbXBsYXRlLXN0cmluZyc6IHtcbiAgICBwYXR0ZXJuOiAvYCg/OlxcXFxbXFxzXFxTXXxcXCRcXHsoPzpbXnt9XXxcXHsoPzpbXnt9XXxcXHtbXn1dKlxcfSkqXFx9KStcXH18KD8hXFwkXFx7KVteXFxcXGBdKSpgLyxcbiAgICBncmVlZHk6IHRydWUsXG4gICAgaW5zaWRlOiB7XG4gICAgICAndGVtcGxhdGUtcHVuY3R1YXRpb24nOiB7XG4gICAgICAgIHBhdHRlcm46IC9eYHxgJC8sXG4gICAgICAgIGFsaWFzOiAnc3RyaW5nJ1xuICAgICAgfSxcbiAgICAgICdpbnRlcnBvbGF0aW9uJzoge1xuICAgICAgICBwYXR0ZXJuOiAvKCg/Ol58W15cXFxcXSkoPzpcXFxcezJ9KSopXFwkXFx7KD86W157fV18XFx7KD86W157fV18XFx7W159XSpcXH0pKlxcfSkrXFx9LyxcbiAgICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgICAgaW5zaWRlOiB7XG4gICAgICAgICAgJ2ludGVycG9sYXRpb24tcHVuY3R1YXRpb24nOiB7XG4gICAgICAgICAgICBwYXR0ZXJuOiAvXlxcJFxce3xcXH0kLyxcbiAgICAgICAgICAgIGFsaWFzOiAncHVuY3R1YXRpb24nXG4gICAgICAgICAgfSxcbiAgICAgICAgICByZXN0OiBQcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdFxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgJ3N0cmluZyc6IC9bXFxzXFxTXSsvXG4gICAgfVxuICB9LFxuICAnc3RyaW5nLXByb3BlcnR5Jzoge1xuICAgIHBhdHRlcm46IC8oKD86XnxbLHtdKVsgXFx0XSopKFtcIiddKSg/OlxcXFwoPzpcXHJcXG58W1xcc1xcU10pfCg/IVxcMilbXlxcXFxcXHJcXG5dKSpcXDIoPz1cXHMqOikvbSxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGdyZWVkeTogdHJ1ZSxcbiAgICBhbGlhczogJ3Byb3BlcnR5J1xuICB9XG59KTtcblByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ2phdmFzY3JpcHQnLCAnb3BlcmF0b3InLCB7XG4gICdsaXRlcmFsLXByb3BlcnR5Jzoge1xuICAgIHBhdHRlcm46IC8oKD86XnxbLHtdKVsgXFx0XSopKD8hXFxzKVtfJGEtekEtWlxceEEwLVxcdUZGRkZdKD86KD8hXFxzKVskXFx3XFx4QTAtXFx1RkZGRl0pKig/PVxccyo6KS9tLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgYWxpYXM6ICdwcm9wZXJ0eSdcbiAgfVxufSk7XG5pZiAoUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cCkge1xuICBQcmlzbS5sYW5ndWFnZXMubWFya3VwLnRhZy5hZGRJbmxpbmVkKCdzY3JpcHQnLCAnamF2YXNjcmlwdCcpO1xuXG4gIC8vIGFkZCBhdHRyaWJ1dGUgc3VwcG9ydCBmb3IgYWxsIERPTSBldmVudHMuXG4gIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0V2ZW50cyNTdGFuZGFyZF9ldmVudHNcbiAgUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cC50YWcuYWRkQXR0cmlidXRlKC9vbig/OmFib3J0fGJsdXJ8Y2hhbmdlfGNsaWNrfGNvbXBvc2l0aW9uKD86ZW5kfHN0YXJ0fHVwZGF0ZSl8ZGJsY2xpY2t8ZXJyb3J8Zm9jdXMoPzppbnxvdXQpP3xrZXkoPzpkb3dufHVwKXxsb2FkfG1vdXNlKD86ZG93bnxlbnRlcnxsZWF2ZXxtb3ZlfG91dHxvdmVyfHVwKXxyZXNldHxyZXNpemV8c2Nyb2xsfHNlbGVjdHxzbG90Y2hhbmdlfHN1Ym1pdHx1bmxvYWR8d2hlZWwpLy5zb3VyY2UsICdqYXZhc2NyaXB0Jyk7XG59XG5QcmlzbS5sYW5ndWFnZXMuanMgPSBQcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdDtcbihmdW5jdGlvbiAoUHJpc20pIHtcbiAgdmFyIGphdmFzY3JpcHQgPSBQcmlzbS51dGlsLmNsb25lKFByaXNtLmxhbmd1YWdlcy5qYXZhc2NyaXB0KTtcbiAgdmFyIHNwYWNlID0gLyg/Olxcc3xcXC9cXC8uKig/IS4pfFxcL1xcKig/OlteKl18XFwqKD8hXFwvKSlcXCpcXC8pLy5zb3VyY2U7XG4gIHZhciBicmFjZXMgPSAvKD86XFx7KD86XFx7KD86XFx7W157fV0qXFx9fFtee31dKSpcXH18W157fV0pKlxcfSkvLnNvdXJjZTtcbiAgdmFyIHNwcmVhZCA9IC8oPzpcXHs8Uz4qXFwuezN9KD86W157fV18PEJSQUNFUz4pKlxcfSkvLnNvdXJjZTtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNvdXJjZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2ZsYWdzXVxuICAgKi9cbiAgZnVuY3Rpb24gcmUoc291cmNlLCBmbGFncykge1xuICAgIHNvdXJjZSA9IHNvdXJjZS5yZXBsYWNlKC88Uz4vZywgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHNwYWNlO1xuICAgIH0pLnJlcGxhY2UoLzxCUkFDRVM+L2csIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBicmFjZXM7XG4gICAgfSkucmVwbGFjZSgvPFNQUkVBRD4vZywgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHNwcmVhZDtcbiAgICB9KTtcbiAgICByZXR1cm4gUmVnRXhwKHNvdXJjZSwgZmxhZ3MpO1xuICB9XG4gIHNwcmVhZCA9IHJlKHNwcmVhZCkuc291cmNlO1xuICBQcmlzbS5sYW5ndWFnZXMuanN4ID0gUHJpc20ubGFuZ3VhZ2VzLmV4dGVuZCgnbWFya3VwJywgamF2YXNjcmlwdCk7XG4gIFByaXNtLmxhbmd1YWdlcy5qc3gudGFnLnBhdHRlcm4gPSByZSgvPFxcLz8oPzpbXFx3LjotXSsoPzo8Uz4rKD86W1xcdy46JC1dKyg/Oj0oPzpcIig/OlxcXFxbXFxzXFxTXXxbXlxcXFxcIl0pKlwifCcoPzpcXFxcW1xcc1xcU118W15cXFxcJ10pKid8W15cXHN7J1wiLz49XSt8PEJSQUNFUz4pKT98PFNQUkVBRD4pKSo8Uz4qXFwvPyk/Pi8uc291cmNlKTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmpzeC50YWcuaW5zaWRlWyd0YWcnXS5wYXR0ZXJuID0gL148XFwvP1teXFxzPlxcL10qLztcbiAgUHJpc20ubGFuZ3VhZ2VzLmpzeC50YWcuaW5zaWRlWydhdHRyLXZhbHVlJ10ucGF0dGVybiA9IC89KD8hXFx7KSg/OlwiKD86XFxcXFtcXHNcXFNdfFteXFxcXFwiXSkqXCJ8Jyg/OlxcXFxbXFxzXFxTXXxbXlxcXFwnXSkqJ3xbXlxccydcIj5dKykvO1xuICBQcmlzbS5sYW5ndWFnZXMuanN4LnRhZy5pbnNpZGVbJ3RhZyddLmluc2lkZVsnY2xhc3MtbmFtZSddID0gL15bQS1aXVxcdyooPzpcXC5bQS1aXVxcdyopKiQvO1xuICBQcmlzbS5sYW5ndWFnZXMuanN4LnRhZy5pbnNpZGVbJ2NvbW1lbnQnXSA9IGphdmFzY3JpcHRbJ2NvbW1lbnQnXTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnaW5zaWRlJywgJ2F0dHItbmFtZScsIHtcbiAgICAnc3ByZWFkJzoge1xuICAgICAgcGF0dGVybjogcmUoLzxTUFJFQUQ+Ly5zb3VyY2UpLFxuICAgICAgaW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMuanN4XG4gICAgfVxuICB9LCBQcmlzbS5sYW5ndWFnZXMuanN4LnRhZyk7XG4gIFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ2luc2lkZScsICdzcGVjaWFsLWF0dHInLCB7XG4gICAgJ3NjcmlwdCc6IHtcbiAgICAgIC8vIEFsbG93IGZvciB0d28gbGV2ZWxzIG9mIG5lc3RpbmdcbiAgICAgIHBhdHRlcm46IHJlKC89PEJSQUNFUz4vLnNvdXJjZSksXG4gICAgICBhbGlhczogJ2xhbmd1YWdlLWphdmFzY3JpcHQnLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdzY3JpcHQtcHVuY3R1YXRpb24nOiB7XG4gICAgICAgICAgcGF0dGVybjogL149KD89XFx7KS8sXG4gICAgICAgICAgYWxpYXM6ICdwdW5jdHVhdGlvbidcbiAgICAgICAgfSxcbiAgICAgICAgcmVzdDogUHJpc20ubGFuZ3VhZ2VzLmpzeFxuICAgICAgfVxuICAgIH1cbiAgfSwgUHJpc20ubGFuZ3VhZ2VzLmpzeC50YWcpO1xuXG4gIC8vIFRoZSBmb2xsb3dpbmcgd2lsbCBoYW5kbGUgcGxhaW4gdGV4dCBpbnNpZGUgdGFnc1xuICB2YXIgc3RyaW5naWZ5VG9rZW4gPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICBpZiAoIXRva2VuKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdG9rZW4gPT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gdG9rZW47XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdG9rZW4uY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiB0b2tlbi5jb250ZW50O1xuICAgIH1cbiAgICByZXR1cm4gdG9rZW4uY29udGVudC5tYXAoc3RyaW5naWZ5VG9rZW4pLmpvaW4oJycpO1xuICB9O1xuICB2YXIgd2Fsa1Rva2VucyA9IGZ1bmN0aW9uICh0b2tlbnMpIHtcbiAgICB2YXIgb3BlbmVkVGFncyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdG9rZW4gPSB0b2tlbnNbaV07XG4gICAgICB2YXIgbm90VGFnTm9yQnJhY2UgPSBmYWxzZTtcbiAgICAgIGlmICh0eXBlb2YgdG9rZW4gIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICh0b2tlbi50eXBlID09PSAndGFnJyAmJiB0b2tlbi5jb250ZW50WzBdICYmIHRva2VuLmNvbnRlbnRbMF0udHlwZSA9PT0gJ3RhZycpIHtcbiAgICAgICAgICAvLyBXZSBmb3VuZCBhIHRhZywgbm93IGZpbmQgaXRzIGtpbmRcblxuICAgICAgICAgIGlmICh0b2tlbi5jb250ZW50WzBdLmNvbnRlbnRbMF0uY29udGVudCA9PT0gJzwvJykge1xuICAgICAgICAgICAgLy8gQ2xvc2luZyB0YWdcbiAgICAgICAgICAgIGlmIChvcGVuZWRUYWdzLmxlbmd0aCA+IDAgJiYgb3BlbmVkVGFnc1tvcGVuZWRUYWdzLmxlbmd0aCAtIDFdLnRhZ05hbWUgPT09IHN0cmluZ2lmeVRva2VuKHRva2VuLmNvbnRlbnRbMF0uY29udGVudFsxXSkpIHtcbiAgICAgICAgICAgICAgLy8gUG9wIG1hdGNoaW5nIG9wZW5pbmcgdGFnXG4gICAgICAgICAgICAgIG9wZW5lZFRhZ3MucG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0b2tlbi5jb250ZW50W3Rva2VuLmNvbnRlbnQubGVuZ3RoIC0gMV0uY29udGVudCA9PT0gJy8+JykgOyBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gT3BlbmluZyB0YWdcbiAgICAgICAgICAgICAgb3BlbmVkVGFncy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0YWdOYW1lOiBzdHJpbmdpZnlUb2tlbih0b2tlbi5jb250ZW50WzBdLmNvbnRlbnRbMV0pLFxuICAgICAgICAgICAgICAgIG9wZW5lZEJyYWNlczogMFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAob3BlbmVkVGFncy5sZW5ndGggPiAwICYmIHRva2VuLnR5cGUgPT09ICdwdW5jdHVhdGlvbicgJiYgdG9rZW4uY29udGVudCA9PT0gJ3snKSB7XG4gICAgICAgICAgLy8gSGVyZSB3ZSBtaWdodCBoYXZlIGVudGVyZWQgYSBKU1ggY29udGV4dCBpbnNpZGUgYSB0YWdcbiAgICAgICAgICBvcGVuZWRUYWdzW29wZW5lZFRhZ3MubGVuZ3RoIC0gMV0ub3BlbmVkQnJhY2VzKys7XG4gICAgICAgIH0gZWxzZSBpZiAob3BlbmVkVGFncy5sZW5ndGggPiAwICYmIG9wZW5lZFRhZ3Nbb3BlbmVkVGFncy5sZW5ndGggLSAxXS5vcGVuZWRCcmFjZXMgPiAwICYmIHRva2VuLnR5cGUgPT09ICdwdW5jdHVhdGlvbicgJiYgdG9rZW4uY29udGVudCA9PT0gJ30nKSB7XG4gICAgICAgICAgLy8gSGVyZSB3ZSBtaWdodCBoYXZlIGxlZnQgYSBKU1ggY29udGV4dCBpbnNpZGUgYSB0YWdcbiAgICAgICAgICBvcGVuZWRUYWdzW29wZW5lZFRhZ3MubGVuZ3RoIC0gMV0ub3BlbmVkQnJhY2VzLS07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbm90VGFnTm9yQnJhY2UgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobm90VGFnTm9yQnJhY2UgfHwgdHlwZW9mIHRva2VuID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAob3BlbmVkVGFncy5sZW5ndGggPiAwICYmIG9wZW5lZFRhZ3Nbb3BlbmVkVGFncy5sZW5ndGggLSAxXS5vcGVuZWRCcmFjZXMgPT09IDApIHtcbiAgICAgICAgICAvLyBIZXJlIHdlIGFyZSBpbnNpZGUgYSB0YWcsIGFuZCBub3QgaW5zaWRlIGEgSlNYIGNvbnRleHQuXG4gICAgICAgICAgLy8gVGhhdCdzIHBsYWluIHRleHQ6IGRyb3AgYW55IHRva2VucyBtYXRjaGVkLlxuICAgICAgICAgIHZhciBwbGFpblRleHQgPSBzdHJpbmdpZnlUb2tlbih0b2tlbik7XG5cbiAgICAgICAgICAvLyBBbmQgbWVyZ2UgdGV4dCB3aXRoIGFkamFjZW50IHRleHRcbiAgICAgICAgICBpZiAoaSA8IHRva2Vucy5sZW5ndGggLSAxICYmICh0eXBlb2YgdG9rZW5zW2kgKyAxXSA9PT0gJ3N0cmluZycgfHwgdG9rZW5zW2kgKyAxXS50eXBlID09PSAncGxhaW4tdGV4dCcpKSB7XG4gICAgICAgICAgICBwbGFpblRleHQgKz0gc3RyaW5naWZ5VG9rZW4odG9rZW5zW2kgKyAxXSk7XG4gICAgICAgICAgICB0b2tlbnMuc3BsaWNlKGkgKyAxLCAxKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGkgPiAwICYmICh0eXBlb2YgdG9rZW5zW2kgLSAxXSA9PT0gJ3N0cmluZycgfHwgdG9rZW5zW2kgLSAxXS50eXBlID09PSAncGxhaW4tdGV4dCcpKSB7XG4gICAgICAgICAgICBwbGFpblRleHQgPSBzdHJpbmdpZnlUb2tlbih0b2tlbnNbaSAtIDFdKSArIHBsYWluVGV4dDtcbiAgICAgICAgICAgIHRva2Vucy5zcGxpY2UoaSAtIDEsIDEpO1xuICAgICAgICAgICAgaS0tO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0b2tlbnNbaV0gPSBuZXcgUHJpc20uVG9rZW4oJ3BsYWluLXRleHQnLCBwbGFpblRleHQsIG51bGwsIHBsYWluVGV4dCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0b2tlbi5jb250ZW50ICYmIHR5cGVvZiB0b2tlbi5jb250ZW50ICE9PSAnc3RyaW5nJykge1xuICAgICAgICB3YWxrVG9rZW5zKHRva2VuLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgUHJpc20uaG9va3MuYWRkKCdhZnRlci10b2tlbml6ZScsIGZ1bmN0aW9uIChlbnYpIHtcbiAgICBpZiAoZW52Lmxhbmd1YWdlICE9PSAnanN4JyAmJiBlbnYubGFuZ3VhZ2UgIT09ICd0c3gnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHdhbGtUb2tlbnMoZW52LnRva2Vucyk7XG4gIH0pO1xufSkoUHJpc20pO1xuXG4vLyBodHRwczovL3d3dy5qc29uLm9yZy9qc29uLWVuLmh0bWxcblByaXNtLmxhbmd1YWdlcy5qc29uID0ge1xuICAncHJvcGVydHknOiB7XG4gICAgcGF0dGVybjogLyhefFteXFxcXF0pXCIoPzpcXFxcLnxbXlxcXFxcIlxcclxcbl0pKlwiKD89XFxzKjopLyxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGdyZWVkeTogdHJ1ZVxuICB9LFxuICAnc3RyaW5nJzoge1xuICAgIHBhdHRlcm46IC8oXnxbXlxcXFxdKVwiKD86XFxcXC58W15cXFxcXCJcXHJcXG5dKSpcIig/IVxccyo6KS8sXG4gICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICBncmVlZHk6IHRydWVcbiAgfSxcbiAgJ2NvbW1lbnQnOiB7XG4gICAgcGF0dGVybjogL1xcL1xcLy4qfFxcL1xcKltcXHNcXFNdKj8oPzpcXCpcXC98JCkvLFxuICAgIGdyZWVkeTogdHJ1ZVxuICB9LFxuICAnbnVtYmVyJzogLy0/XFxiXFxkKyg/OlxcLlxcZCspPyg/OmVbKy1dP1xcZCspP1xcYi9pLFxuICAncHVuY3R1YXRpb24nOiAvW3t9W1xcXSxdLyxcbiAgJ29wZXJhdG9yJzogLzovLFxuICAnYm9vbGVhbic6IC9cXGIoPzpmYWxzZXx0cnVlKVxcYi8sXG4gICdudWxsJzoge1xuICAgIHBhdHRlcm46IC9cXGJudWxsXFxiLyxcbiAgICBhbGlhczogJ2tleXdvcmQnXG4gIH1cbn07XG5QcmlzbS5sYW5ndWFnZXMud2VibWFuaWZlc3QgPSBQcmlzbS5sYW5ndWFnZXMuanNvbjtcbihmdW5jdGlvbiAoUHJpc20pIHtcbiAgUHJpc20ubGFuZ3VhZ2VzLmtvdGxpbiA9IFByaXNtLmxhbmd1YWdlcy5leHRlbmQoJ2NsaWtlJywge1xuICAgICdrZXl3b3JkJzoge1xuICAgICAgLy8gVGhlIGxvb2tiZWhpbmQgcHJldmVudHMgd3JvbmcgaGlnaGxpZ2h0aW5nIG9mIGUuZy4ga290bGluLnByb3BlcnRpZXMuZ2V0XG4gICAgICBwYXR0ZXJuOiAvKF58W14uXSlcXGIoPzphYnN0cmFjdHxhY3R1YWx8YW5ub3RhdGlvbnxhc3xicmVha3xieXxjYXRjaHxjbGFzc3xjb21wYW5pb258Y29uc3R8Y29uc3RydWN0b3J8Y29udGludWV8Y3Jvc3NpbmxpbmV8ZGF0YXxkb3xkeW5hbWljfGVsc2V8ZW51bXxleHBlY3R8ZXh0ZXJuYWx8ZmluYWx8ZmluYWxseXxmb3J8ZnVufGdldHxpZnxpbXBvcnR8aW58aW5maXh8aW5pdHxpbmxpbmV8aW5uZXJ8aW50ZXJmYWNlfGludGVybmFsfGlzfGxhdGVpbml0fG5vaW5saW5lfG51bGx8b2JqZWN0fG9wZW58b3BlcmF0b3J8b3V0fG92ZXJyaWRlfHBhY2thZ2V8cHJpdmF0ZXxwcm90ZWN0ZWR8cHVibGljfHJlaWZpZWR8cmV0dXJufHNlYWxlZHxzZXR8c3VwZXJ8c3VzcGVuZHx0YWlscmVjfHRoaXN8dGhyb3d8dG98dHJ5fHR5cGVhbGlhc3x2YWx8dmFyfHZhcmFyZ3x3aGVufHdoZXJlfHdoaWxlKVxcYi8sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgfSxcbiAgICAnZnVuY3Rpb24nOiBbe1xuICAgICAgcGF0dGVybjogLyg/OmBbXlxcclxcbmBdK2B8XFxiXFx3KykoPz1cXHMqXFwoKS8sXG4gICAgICBncmVlZHk6IHRydWVcbiAgICB9LCB7XG4gICAgICBwYXR0ZXJuOiAvKFxcLikoPzpgW15cXHJcXG5gXStgfFxcdyspKD89XFxzKlxceykvLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGdyZWVkeTogdHJ1ZVxuICAgIH1dLFxuICAgICdudW1iZXInOiAvXFxiKD86MFt4WF1bXFxkYS1mQS1GXSsoPzpfW1xcZGEtZkEtRl0rKSp8MFtiQl1bMDFdKyg/Ol9bMDFdKykqfFxcZCsoPzpfXFxkKykqKD86XFwuXFxkKyg/Ol9cXGQrKSopPyg/OltlRV1bKy1dP1xcZCsoPzpfXFxkKykqKT9bZkZMXT8pXFxiLyxcbiAgICAnb3BlcmF0b3InOiAvXFwrWys9XT98LVstPT5dP3w9PT89P3whKD86IXw9PT8pP3xbXFwvKiU8Pl09P3xbPzpdOj98XFwuXFwufCYmfFxcfFxcfHxcXGIoPzphbmR8aW52fG9yfHNobHxzaHJ8dXNocnx4b3IpXFxiL1xuICB9KTtcbiAgZGVsZXRlIFByaXNtLmxhbmd1YWdlcy5rb3RsaW5bJ2NsYXNzLW5hbWUnXTtcbiAgdmFyIGludGVycG9sYXRpb25JbnNpZGUgPSB7XG4gICAgJ2ludGVycG9sYXRpb24tcHVuY3R1YXRpb24nOiB7XG4gICAgICBwYXR0ZXJuOiAvXlxcJFxcez98XFx9JC8sXG4gICAgICBhbGlhczogJ3B1bmN0dWF0aW9uJ1xuICAgIH0sXG4gICAgJ2V4cHJlc3Npb24nOiB7XG4gICAgICBwYXR0ZXJuOiAvW1xcc1xcU10rLyxcbiAgICAgIGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLmtvdGxpblxuICAgIH1cbiAgfTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgna290bGluJywgJ3N0cmluZycsIHtcbiAgICAvLyBodHRwczovL2tvdGxpbmxhbmcub3JnL3NwZWMvZXhwcmVzc2lvbnMuaHRtbCNzdHJpbmctaW50ZXJwb2xhdGlvbi1leHByZXNzaW9uc1xuICAgICdzdHJpbmctbGl0ZXJhbCc6IFt7XG4gICAgICBwYXR0ZXJuOiAvXCJcIlwiKD86W14kXXxcXCQoPzooPyFcXHspfFxce1tee31dKlxcfSkpKj9cIlwiXCIvLFxuICAgICAgYWxpYXM6ICdtdWx0aWxpbmUnLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdpbnRlcnBvbGF0aW9uJzoge1xuICAgICAgICAgIHBhdHRlcm46IC9cXCQoPzpbYS16X11cXHcqfFxce1tee31dKlxcfSkvaSxcbiAgICAgICAgICBpbnNpZGU6IGludGVycG9sYXRpb25JbnNpZGVcbiAgICAgICAgfSxcbiAgICAgICAgJ3N0cmluZyc6IC9bXFxzXFxTXSsvXG4gICAgICB9XG4gICAgfSwge1xuICAgICAgcGF0dGVybjogL1wiKD86W15cIlxcXFxcXHJcXG4kXXxcXFxcLnxcXCQoPzooPyFcXHspfFxce1tee31dKlxcfSkpKlwiLyxcbiAgICAgIGFsaWFzOiAnc2luZ2xlbGluZScsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ2ludGVycG9sYXRpb24nOiB7XG4gICAgICAgICAgcGF0dGVybjogLygoPzpefFteXFxcXF0pKD86XFxcXHsyfSkqKVxcJCg/OlthLXpfXVxcdyp8XFx7W157fV0qXFx9KS9pLFxuICAgICAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICAgICAgaW5zaWRlOiBpbnRlcnBvbGF0aW9uSW5zaWRlXG4gICAgICAgIH0sXG4gICAgICAgICdzdHJpbmcnOiAvW1xcc1xcU10rL1xuICAgICAgfVxuICAgIH1dLFxuICAgICdjaGFyJzoge1xuICAgICAgLy8gaHR0cHM6Ly9rb3RsaW5sYW5nLm9yZy9zcGVjL2V4cHJlc3Npb25zLmh0bWwjY2hhcmFjdGVyLWxpdGVyYWxzXG4gICAgICBwYXR0ZXJuOiAvJyg/OlteJ1xcXFxcXHJcXG5dfFxcXFwoPzoufHVbYS1mQS1GMC05XXswLDR9KSknLyxcbiAgICAgIGdyZWVkeTogdHJ1ZVxuICAgIH1cbiAgfSk7XG4gIGRlbGV0ZSBQcmlzbS5sYW5ndWFnZXMua290bGluWydzdHJpbmcnXTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgna290bGluJywgJ2tleXdvcmQnLCB7XG4gICAgJ2Fubm90YXRpb24nOiB7XG4gICAgICBwYXR0ZXJuOiAvXFxCQCg/Olxcdys6KT8oPzpbQS1aXVxcdyp8XFxbW15cXF1dK1xcXSkvLFxuICAgICAgYWxpYXM6ICdidWlsdGluJ1xuICAgIH1cbiAgfSk7XG4gIFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ2tvdGxpbicsICdmdW5jdGlvbicsIHtcbiAgICAnbGFiZWwnOiB7XG4gICAgICBwYXR0ZXJuOiAvXFxiXFx3K0B8QFxcdytcXGIvLFxuICAgICAgYWxpYXM6ICdzeW1ib2wnXG4gICAgfVxuICB9KTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmt0ID0gUHJpc20ubGFuZ3VhZ2VzLmtvdGxpbjtcbiAgUHJpc20ubGFuZ3VhZ2VzLmt0cyA9IFByaXNtLmxhbmd1YWdlcy5rb3RsaW47XG59KShQcmlzbSk7XG5cbi8qIEZJWE1FIDpcbiA6ZXh0ZW5kKCkgaXMgbm90IGhhbmRsZWQgc3BlY2lmaWNhbGx5IDogaXRzIGhpZ2hsaWdodGluZyBpcyBidWdneS5cbiBNaXhpbiB1c2FnZSBtdXN0IGJlIGluc2lkZSBhIHJ1bGVzZXQgdG8gYmUgaGlnaGxpZ2h0ZWQuXG4gQXQtcnVsZXMgKGUuZy4gaW1wb3J0KSBjb250YWluaW5nIGludGVycG9sYXRpb25zIGFyZSBidWdneS5cbiBEZXRhY2hlZCBydWxlc2V0cyBhcmUgaGlnaGxpZ2h0ZWQgYXMgYXQtcnVsZXMuXG4gQSBjb21tZW50IGJlZm9yZSBhIG1peGluIHVzYWdlIHByZXZlbnRzIHRoZSBsYXR0ZXIgdG8gYmUgcHJvcGVybHkgaGlnaGxpZ2h0ZWQuXG4gKi9cblxuUHJpc20ubGFuZ3VhZ2VzLmxlc3MgPSBQcmlzbS5sYW5ndWFnZXMuZXh0ZW5kKCdjc3MnLCB7XG4gICdjb21tZW50JzogWy9cXC9cXCpbXFxzXFxTXSo/XFwqXFwvLywge1xuICAgIHBhdHRlcm46IC8oXnxbXlxcXFxdKVxcL1xcLy4qLyxcbiAgICBsb29rYmVoaW5kOiB0cnVlXG4gIH1dLFxuICAnYXRydWxlJzoge1xuICAgIHBhdHRlcm46IC9AW1xcdy1dKD86XFwoKD86W14oKXt9XXxcXChbXigpe31dKlxcKSkqXFwpfFteKCl7fTtcXHNdfFxccysoPyFcXHMpKSo/KD89XFxzKlxceykvLFxuICAgIGluc2lkZToge1xuICAgICAgJ3B1bmN0dWF0aW9uJzogL1s6KCldL1xuICAgIH1cbiAgfSxcbiAgLy8gc2VsZWN0b3JzIGFuZCBtaXhpbnMgYXJlIGNvbnNpZGVyZWQgdGhlIHNhbWVcbiAgJ3NlbGVjdG9yJzoge1xuICAgIHBhdHRlcm46IC8oPzpAXFx7W1xcdy1dK1xcfXxbXnt9O1xcc0BdKSg/OkBcXHtbXFx3LV0rXFx9fFxcKCg/OlteKCl7fV18XFwoW14oKXt9XSpcXCkpKlxcKXxbXigpe307QFxcc118XFxzKyg/IVxccykpKj8oPz1cXHMqXFx7KS8sXG4gICAgaW5zaWRlOiB7XG4gICAgICAvLyBtaXhpbiBwYXJhbWV0ZXJzXG4gICAgICAndmFyaWFibGUnOiAvQCtbXFx3LV0rL1xuICAgIH1cbiAgfSxcbiAgJ3Byb3BlcnR5JzogLyg/OkBcXHtbXFx3LV0rXFx9fFtcXHctXSkrKD86XFwrXz8pPyg/PVxccyo6KS8sXG4gICdvcGVyYXRvcic6IC9bK1xcLSpcXC9dL1xufSk7XG5QcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdsZXNzJywgJ3Byb3BlcnR5Jywge1xuICAndmFyaWFibGUnOiBbXG4gIC8vIFZhcmlhYmxlIGRlY2xhcmF0aW9uICh0aGUgY29sb24gbXVzdCBiZSBjb25zdW1lZCEpXG4gIHtcbiAgICBwYXR0ZXJuOiAvQFtcXHctXStcXHMqOi8sXG4gICAgaW5zaWRlOiB7XG4gICAgICAncHVuY3R1YXRpb24nOiAvOi9cbiAgICB9XG4gIH0sXG4gIC8vIFZhcmlhYmxlIHVzYWdlXG4gIC9AQD9bXFx3LV0rL10sXG4gICdtaXhpbi11c2FnZSc6IHtcbiAgICBwYXR0ZXJuOiAvKFt7O11cXHMqKVsuI10oPyFcXGQpW1xcdy1dLio/KD89Wyg7XSkvLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgYWxpYXM6ICdmdW5jdGlvbidcbiAgfVxufSk7XG5QcmlzbS5sYW5ndWFnZXMubHVhID0ge1xuICAnY29tbWVudCc6IC9eIyEuK3wtLSg/OlxcWyg9KilcXFtbXFxzXFxTXSo/XFxdXFwxXFxdfC4qKS9tLFxuICAvLyBcXHogbWF5IGJlIHVzZWQgdG8gc2tpcCB0aGUgZm9sbG93aW5nIHNwYWNlXG4gICdzdHJpbmcnOiB7XG4gICAgcGF0dGVybjogLyhbXCInXSkoPzooPyFcXDEpW15cXFxcXFxyXFxuXXxcXFxceig/OlxcclxcbnxcXHMpfFxcXFwoPzpcXHJcXG58W156XSkpKlxcMXxcXFsoPSopXFxbW1xcc1xcU10qP1xcXVxcMlxcXS8sXG4gICAgZ3JlZWR5OiB0cnVlXG4gIH0sXG4gICdudW1iZXInOiAvXFxiMHhbYS1mXFxkXSsoPzpcXC5bYS1mXFxkXSopPyg/OnBbKy1dP1xcZCspP1xcYnxcXGJcXGQrKD86XFwuXFxCfCg/OlxcLlxcZCopPyg/OmVbKy1dP1xcZCspP1xcYil8XFxCXFwuXFxkKyg/OmVbKy1dP1xcZCspP1xcYi9pLFxuICAna2V5d29yZCc6IC9cXGIoPzphbmR8YnJlYWt8ZG98ZWxzZXxlbHNlaWZ8ZW5kfGZhbHNlfGZvcnxmdW5jdGlvbnxnb3RvfGlmfGlufGxvY2FsfG5pbHxub3R8b3J8cmVwZWF0fHJldHVybnx0aGVufHRydWV8dW50aWx8d2hpbGUpXFxiLyxcbiAgJ2Z1bmN0aW9uJzogLyg/IVxcZClcXHcrKD89XFxzKig/Olsoe10pKS8sXG4gICdvcGVyYXRvcic6IFsvWy0rKiVeJnwjXXxcXC9cXC8/fDxbPD1dP3w+Wz49XT98Wz1+XT0/Lywge1xuICAgIC8vIE1hdGNoIFwiLi5cIiBidXQgZG9uJ3QgYnJlYWsgXCIuLi5cIlxuICAgIHBhdHRlcm46IC8oXnxbXi5dKVxcLlxcLig/IVxcLikvLFxuICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgfV0sXG4gICdwdW5jdHVhdGlvbic6IC9bXFxbXFxdKCl7fSw7XXxcXC4rfDorL1xufTtcblByaXNtLmxhbmd1YWdlcy5tYWtlZmlsZSA9IHtcbiAgJ2NvbW1lbnQnOiB7XG4gICAgcGF0dGVybjogLyhefFteXFxcXF0pIyg/OlxcXFwoPzpcXHJcXG58W1xcc1xcU10pfFteXFxcXFxcclxcbl0pKi8sXG4gICAgbG9va2JlaGluZDogdHJ1ZVxuICB9LFxuICAnc3RyaW5nJzoge1xuICAgIHBhdHRlcm46IC8oW1wiJ10pKD86XFxcXCg/OlxcclxcbnxbXFxzXFxTXSl8KD8hXFwxKVteXFxcXFxcclxcbl0pKlxcMS8sXG4gICAgZ3JlZWR5OiB0cnVlXG4gIH0sXG4gICdidWlsdGluLXRhcmdldCc6IHtcbiAgICBwYXR0ZXJuOiAvXFwuW0EtWl1bXjojPVxcc10rKD89XFxzKjooPyE9KSkvLFxuICAgIGFsaWFzOiAnYnVpbHRpbidcbiAgfSxcbiAgJ3RhcmdldCc6IHtcbiAgICBwYXR0ZXJuOiAvXig/OlteOj1cXHNdfFsgXFx0XSsoPyFbXFxzOl0pKSsoPz1cXHMqOig/IT0pKS9tLFxuICAgIGFsaWFzOiAnc3ltYm9sJyxcbiAgICBpbnNpZGU6IHtcbiAgICAgICd2YXJpYWJsZSc6IC9cXCQrKD86KD8hXFwkKVteKCl7fTojPVxcc10rfCg/PVsoe10pKS9cbiAgICB9XG4gIH0sXG4gICd2YXJpYWJsZSc6IC9cXCQrKD86KD8hXFwkKVteKCl7fTojPVxcc10rfFxcKFtAKiU8Xis/XVtERl1cXCl8KD89Wyh7XSkpLyxcbiAgLy8gRGlyZWN0aXZlc1xuICAna2V5d29yZCc6IC8taW5jbHVkZVxcYnxcXGIoPzpkZWZpbmV8ZWxzZXxlbmRlZnxlbmRpZnxleHBvcnR8aWZuP2RlZnxpZm4/ZXF8aW5jbHVkZXxvdmVycmlkZXxwcml2YXRlfHNpbmNsdWRlfHVuZGVmaW5lfHVuZXhwb3J0fHZwYXRoKVxcYi8sXG4gICdmdW5jdGlvbic6IHtcbiAgICBwYXR0ZXJuOiAvKFxcKCkoPzphYnNwYXRofGFkZHN1ZmZpeHxhbmR8YmFzZW5hbWV8Y2FsbHxkaXJ8ZXJyb3J8ZXZhbHxmaWxlfGZpbHRlcig/Oi1vdXQpP3xmaW5kc3RyaW5nfGZpcnN0d29yZHxmbGF2b3J8Zm9yZWFjaHxndWlsZXxpZnxpbmZvfGpvaW58bGFzdHdvcmR8bG9hZHxub3RkaXJ8b3J8b3JpZ2lufHBhdHN1YnN0fHJlYWxwYXRofHNoZWxsfHNvcnR8c3RyaXB8c3Vic3R8c3VmZml4fHZhbHVlfHdhcm5pbmd8d2lsZGNhcmR8d29yZCg/Omxpc3R8cyk/KSg/PVsgXFx0XSkvLFxuICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgfSxcbiAgJ29wZXJhdG9yJzogLyg/Ojo6fFs/OishXSk/PXxbfEBdLyxcbiAgJ3B1bmN0dWF0aW9uJzogL1s6Oygpe31dL1xufTtcbihmdW5jdGlvbiAoUHJpc20pIHtcbiAgLy8gaHR0cHM6Ly95YW1sLm9yZy9zcGVjLzEuMi9zcGVjLmh0bWwjYy1ucy1hbmNob3ItcHJvcGVydHlcbiAgLy8gaHR0cHM6Ly95YW1sLm9yZy9zcGVjLzEuMi9zcGVjLmh0bWwjYy1ucy1hbGlhcy1ub2RlXG4gIHZhciBhbmNob3JPckFsaWFzID0gL1sqJl1bXlxcc1tcXF17fSxdKy87XG4gIC8vIGh0dHBzOi8veWFtbC5vcmcvc3BlYy8xLjIvc3BlYy5odG1sI2MtbnMtdGFnLXByb3BlcnR5XG4gIHZhciB0YWcgPSAvISg/OjxbXFx3XFwtJSM7Lz86QCY9KyQsLiF+KicoKVtcXF1dKz58KD86W2EtekEtWlxcZC1dKiEpP1tcXHdcXC0lIzsvPzpAJj0rJC5+KicoKV0rKT8vO1xuICAvLyBodHRwczovL3lhbWwub3JnL3NwZWMvMS4yL3NwZWMuaHRtbCNjLW5zLXByb3BlcnRpZXMobixjKVxuICB2YXIgcHJvcGVydGllcyA9ICcoPzonICsgdGFnLnNvdXJjZSArICcoPzpbIFxcdF0rJyArIGFuY2hvck9yQWxpYXMuc291cmNlICsgJyk/fCcgKyBhbmNob3JPckFsaWFzLnNvdXJjZSArICcoPzpbIFxcdF0rJyArIHRhZy5zb3VyY2UgKyAnKT8pJztcbiAgLy8gaHR0cHM6Ly95YW1sLm9yZy9zcGVjLzEuMi9zcGVjLmh0bWwjbnMtcGxhaW4obixjKVxuICAvLyBUaGlzIGlzIGEgc2ltcGxpZmllZCB2ZXJzaW9uIHRoYXQgZG9lc24ndCBzdXBwb3J0IFwiI1wiIGFuZCBtdWx0aWxpbmUga2V5c1xuICAvLyBBbGwgdGhlc2UgbG9uZyBzY2FycnkgY2hhcmFjdGVyIGNsYXNzZXMgYXJlIHNpbXBsaWZpZWQgdmVyc2lvbnMgb2YgWUFNTCdzIGNoYXJhY3RlcnNcbiAgdmFyIHBsYWluS2V5ID0gLyg/OlteXFxzXFx4MDAtXFx4MDhcXHgwZS1cXHgxZiFcIiMlJicqLFxcLTo+P0BbXFxdYHt8fVxceDdmLVxceDg0XFx4ODYtXFx4OWZcXHVkODAwLVxcdWRmZmZcXHVmZmZlXFx1ZmZmZl18Wz86LV08UExBSU4+KSg/OlsgXFx0XSooPzooPyFbIzpdKTxQTEFJTj58OjxQTEFJTj4pKSovLnNvdXJjZS5yZXBsYWNlKC88UExBSU4+L2csIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gL1teXFxzXFx4MDAtXFx4MDhcXHgwZS1cXHgxZixbXFxde31cXHg3Zi1cXHg4NFxceDg2LVxceDlmXFx1ZDgwMC1cXHVkZmZmXFx1ZmZmZVxcdWZmZmZdLy5zb3VyY2U7XG4gIH0pO1xuICB2YXIgc3RyaW5nID0gL1wiKD86W15cIlxcXFxcXHJcXG5dfFxcXFwuKSpcInwnKD86W14nXFxcXFxcclxcbl18XFxcXC4pKicvLnNvdXJjZTtcblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbZmxhZ3NdXG4gICAqIEByZXR1cm5zIHtSZWdFeHB9XG4gICAqL1xuICBmdW5jdGlvbiBjcmVhdGVWYWx1ZVBhdHRlcm4odmFsdWUsIGZsYWdzKSB7XG4gICAgZmxhZ3MgPSAoZmxhZ3MgfHwgJycpLnJlcGxhY2UoL20vZywgJycpICsgJ20nOyAvLyBhZGQgbSBmbGFnXG4gICAgdmFyIHBhdHRlcm4gPSAvKFs6XFwtLFt7XVxccyooPzpcXHM8PHByb3A+PlsgXFx0XSspPykoPzo8PHZhbHVlPj4pKD89WyBcXHRdKig/OiR8LHxcXF18XFx9fCg/OltcXHJcXG5dXFxzKik/IykpLy5zb3VyY2UucmVwbGFjZSgvPDxwcm9wPj4vZywgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHByb3BlcnRpZXM7XG4gICAgfSkucmVwbGFjZSgvPDx2YWx1ZT4+L2csIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gUmVnRXhwKHBhdHRlcm4sIGZsYWdzKTtcbiAgfVxuICBQcmlzbS5sYW5ndWFnZXMueWFtbCA9IHtcbiAgICAnc2NhbGFyJzoge1xuICAgICAgcGF0dGVybjogUmVnRXhwKC8oW1xcLTpdXFxzKig/Olxcczw8cHJvcD4+WyBcXHRdKyk/W3w+XSlbIFxcdF0qKD86KCg/Olxccj9cXG58XFxyKVsgXFx0XSspXFxTW15cXHJcXG5dKig/OlxcMlteXFxyXFxuXSspKikvLnNvdXJjZS5yZXBsYWNlKC88PHByb3A+Pi9nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBwcm9wZXJ0aWVzO1xuICAgICAgfSkpLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGFsaWFzOiAnc3RyaW5nJ1xuICAgIH0sXG4gICAgJ2NvbW1lbnQnOiAvIy4qLyxcbiAgICAna2V5Jzoge1xuICAgICAgcGF0dGVybjogUmVnRXhwKC8oKD86XnxbOlxcLSxbe1xcclxcbj9dKVsgXFx0XSooPzo8PHByb3A+PlsgXFx0XSspPyk8PGtleT4+KD89XFxzKjpcXHMpLy5zb3VyY2UucmVwbGFjZSgvPDxwcm9wPj4vZywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gcHJvcGVydGllcztcbiAgICAgIH0pLnJlcGxhY2UoLzw8a2V5Pj4vZywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJyg/OicgKyBwbGFpbktleSArICd8JyArIHN0cmluZyArICcpJztcbiAgICAgIH0pKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBhbGlhczogJ2F0cnVsZSdcbiAgICB9LFxuICAgICdkaXJlY3RpdmUnOiB7XG4gICAgICBwYXR0ZXJuOiAvKF5bIFxcdF0qKSUuKy9tLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGFsaWFzOiAnaW1wb3J0YW50J1xuICAgIH0sXG4gICAgJ2RhdGV0aW1lJzoge1xuICAgICAgcGF0dGVybjogY3JlYXRlVmFsdWVQYXR0ZXJuKC9cXGR7NH0tXFxkXFxkPy1cXGRcXGQ/KD86W3RUXXxbIFxcdF0rKVxcZFxcZD86XFxkezJ9OlxcZHsyfSg/OlxcLlxcZCopPyg/OlsgXFx0XSooPzpafFstK11cXGRcXGQ/KD86OlxcZHsyfSk/KSk/fFxcZHs0fS1cXGR7Mn0tXFxkezJ9fFxcZFxcZD86XFxkezJ9KD86OlxcZHsyfSg/OlxcLlxcZCopPyk/Ly5zb3VyY2UpLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGFsaWFzOiAnbnVtYmVyJ1xuICAgIH0sXG4gICAgJ2Jvb2xlYW4nOiB7XG4gICAgICBwYXR0ZXJuOiBjcmVhdGVWYWx1ZVBhdHRlcm4oL2ZhbHNlfHRydWUvLnNvdXJjZSwgJ2knKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBhbGlhczogJ2ltcG9ydGFudCdcbiAgICB9LFxuICAgICdudWxsJzoge1xuICAgICAgcGF0dGVybjogY3JlYXRlVmFsdWVQYXR0ZXJuKC9udWxsfH4vLnNvdXJjZSwgJ2knKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBhbGlhczogJ2ltcG9ydGFudCdcbiAgICB9LFxuICAgICdzdHJpbmcnOiB7XG4gICAgICBwYXR0ZXJuOiBjcmVhdGVWYWx1ZVBhdHRlcm4oc3RyaW5nKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBncmVlZHk6IHRydWVcbiAgICB9LFxuICAgICdudW1iZXInOiB7XG4gICAgICBwYXR0ZXJuOiBjcmVhdGVWYWx1ZVBhdHRlcm4oL1srLV0/KD86MHhbXFxkYS1mXSt8MG9bMC03XSt8KD86XFxkKyg/OlxcLlxcZCopP3xcXC5cXGQrKSg/OmVbKy1dP1xcZCspP3xcXC5pbmZ8XFwubmFuKS8uc291cmNlLCAnaScpLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgIH0sXG4gICAgJ3RhZyc6IHRhZyxcbiAgICAnaW1wb3J0YW50JzogYW5jaG9yT3JBbGlhcyxcbiAgICAncHVuY3R1YXRpb24nOiAvLS0tfFs6W1xcXXt9XFwtLHw+P118XFwuXFwuXFwuL1xuICB9O1xuICBQcmlzbS5sYW5ndWFnZXMueW1sID0gUHJpc20ubGFuZ3VhZ2VzLnlhbWw7XG59KShQcmlzbSk7XG4oZnVuY3Rpb24gKFByaXNtKSB7XG4gIC8vIEFsbG93IG9ubHkgb25lIGxpbmUgYnJlYWtcbiAgdmFyIGlubmVyID0gLyg/OlxcXFwufFteXFxcXFxcblxccl18KD86XFxufFxcclxcbj8pKD8hW1xcclxcbl0pKS8uc291cmNlO1xuXG4gIC8qKlxuICAgKiBUaGlzIGZ1bmN0aW9uIGlzIGludGVuZGVkIGZvciB0aGUgY3JlYXRpb24gb2YgdGhlIGJvbGQgb3IgaXRhbGljIHBhdHRlcm4uXG4gICAqXG4gICAqIFRoaXMgYWxzbyBhZGRzIGEgbG9va2JlaGluZCBncm91cCB0byB0aGUgZ2l2ZW4gcGF0dGVybiB0byBlbnN1cmUgdGhhdCB0aGUgcGF0dGVybiBpcyBub3QgYmFja3NsYXNoLWVzY2FwZWQuXG4gICAqXG4gICAqIF9Ob3RlOl8gS2VlcCBpbiBtaW5kIHRoYXQgdGhpcyBhZGRzIGEgY2FwdHVyaW5nIGdyb3VwLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0dGVyblxuICAgKiBAcmV0dXJucyB7UmVnRXhwfVxuICAgKi9cbiAgZnVuY3Rpb24gY3JlYXRlSW5saW5lKHBhdHRlcm4pIHtcbiAgICBwYXR0ZXJuID0gcGF0dGVybi5yZXBsYWNlKC88aW5uZXI+L2csIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBpbm5lcjtcbiAgICB9KTtcbiAgICByZXR1cm4gUmVnRXhwKC8oKD86XnxbXlxcXFxdKSg/OlxcXFx7Mn0pKikvLnNvdXJjZSArICcoPzonICsgcGF0dGVybiArICcpJyk7XG4gIH1cbiAgdmFyIHRhYmxlQ2VsbCA9IC8oPzpcXFxcLnxgYCg/OlteYFxcclxcbl18YCg/IWApKStgYHxgW15gXFxyXFxuXStgfFteXFxcXHxcXHJcXG5gXSkrLy5zb3VyY2U7XG4gIHZhciB0YWJsZVJvdyA9IC9cXHw/X18oPzpcXHxfXykrXFx8Pyg/Oig/OlxcbnxcXHJcXG4/KXwoPyFbXFxzXFxTXSkpLy5zb3VyY2UucmVwbGFjZSgvX18vZywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0YWJsZUNlbGw7XG4gIH0pO1xuICB2YXIgdGFibGVMaW5lID0gL1xcfD9bIFxcdF0qOj8tezMsfTo/WyBcXHRdKig/OlxcfFsgXFx0XSo6Py17Myx9Oj9bIFxcdF0qKStcXHw/KD86XFxufFxcclxcbj8pLy5zb3VyY2U7XG4gIFByaXNtLmxhbmd1YWdlcy5tYXJrZG93biA9IFByaXNtLmxhbmd1YWdlcy5leHRlbmQoJ21hcmt1cCcsIHt9KTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnbWFya2Rvd24nLCAncHJvbG9nJywge1xuICAgICdmcm9udC1tYXR0ZXItYmxvY2snOiB7XG4gICAgICBwYXR0ZXJuOiAvKF4oPzpcXHMqW1xcclxcbl0pPyktLS0oPyEuKVtcXHNcXFNdKj9bXFxyXFxuXS0tLSg/IS4pLyxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ3B1bmN0dWF0aW9uJzogL14tLS18LS0tJC8sXG4gICAgICAgICdmcm9udC1tYXR0ZXInOiB7XG4gICAgICAgICAgcGF0dGVybjogL1xcUysoPzpcXHMrXFxTKykqLyxcbiAgICAgICAgICBhbGlhczogWyd5YW1sJywgJ2xhbmd1YWdlLXlhbWwnXSxcbiAgICAgICAgICBpbnNpZGU6IFByaXNtLmxhbmd1YWdlcy55YW1sXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgICdibG9ja3F1b3RlJzoge1xuICAgICAgLy8gPiAuLi5cbiAgICAgIHBhdHRlcm46IC9ePig/OltcXHQgXSo+KSovbSxcbiAgICAgIGFsaWFzOiAncHVuY3R1YXRpb24nXG4gICAgfSxcbiAgICAndGFibGUnOiB7XG4gICAgICBwYXR0ZXJuOiBSZWdFeHAoJ14nICsgdGFibGVSb3cgKyB0YWJsZUxpbmUgKyAnKD86JyArIHRhYmxlUm93ICsgJykqJywgJ20nKSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAndGFibGUtZGF0YS1yb3dzJzoge1xuICAgICAgICAgIHBhdHRlcm46IFJlZ0V4cCgnXignICsgdGFibGVSb3cgKyB0YWJsZUxpbmUgKyAnKSg/OicgKyB0YWJsZVJvdyArICcpKiQnKSxcbiAgICAgICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgICAgIGluc2lkZToge1xuICAgICAgICAgICAgJ3RhYmxlLWRhdGEnOiB7XG4gICAgICAgICAgICAgIHBhdHRlcm46IFJlZ0V4cCh0YWJsZUNlbGwpLFxuICAgICAgICAgICAgICBpbnNpZGU6IFByaXNtLmxhbmd1YWdlcy5tYXJrZG93blxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdwdW5jdHVhdGlvbic6IC9cXHwvXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAndGFibGUtbGluZSc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiBSZWdFeHAoJ14oJyArIHRhYmxlUm93ICsgJyknICsgdGFibGVMaW5lICsgJyQnKSxcbiAgICAgICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgICAgIGluc2lkZToge1xuICAgICAgICAgICAgJ3B1bmN0dWF0aW9uJzogL1xcfHw6Py17Myx9Oj8vXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAndGFibGUtaGVhZGVyLXJvdyc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiBSZWdFeHAoJ14nICsgdGFibGVSb3cgKyAnJCcpLFxuICAgICAgICAgIGluc2lkZToge1xuICAgICAgICAgICAgJ3RhYmxlLWhlYWRlcic6IHtcbiAgICAgICAgICAgICAgcGF0dGVybjogUmVnRXhwKHRhYmxlQ2VsbCksXG4gICAgICAgICAgICAgIGFsaWFzOiAnaW1wb3J0YW50JyxcbiAgICAgICAgICAgICAgaW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMubWFya2Rvd25cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAncHVuY3R1YXRpb24nOiAvXFx8L1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgJ2NvZGUnOiBbe1xuICAgICAgLy8gUHJlZml4ZWQgYnkgNCBzcGFjZXMgb3IgMSB0YWIgYW5kIHByZWNlZGVkIGJ5IGFuIGVtcHR5IGxpbmVcbiAgICAgIHBhdHRlcm46IC8oKD86XnxcXG4pWyBcXHRdKlxcbnwoPzpefFxcclxcbj8pWyBcXHRdKlxcclxcbj8pKD86IHs0fXxcXHQpLisoPzooPzpcXG58XFxyXFxuPykoPzogezR9fFxcdCkuKykqLyxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBhbGlhczogJ2tleXdvcmQnXG4gICAgfSwge1xuICAgICAgLy8gYGBgb3B0aW9uYWwgbGFuZ3VhZ2VcbiAgICAgIC8vIGNvZGUgYmxvY2tcbiAgICAgIC8vIGBgYFxuICAgICAgcGF0dGVybjogL15gYGBbXFxzXFxTXSo/XmBgYCQvbSxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAnY29kZS1ibG9jayc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvXihgYGAuKig/OlxcbnxcXHJcXG4/KSlbXFxzXFxTXSs/KD89KD86XFxufFxcclxcbj8pXmBgYCQpL20sXG4gICAgICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICAnY29kZS1sYW5ndWFnZSc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvXihgYGApLisvLFxuICAgICAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgJ3B1bmN0dWF0aW9uJzogL2BgYC9cbiAgICAgIH1cbiAgICB9XSxcbiAgICAndGl0bGUnOiBbe1xuICAgICAgLy8gdGl0bGUgMVxuICAgICAgLy8gPT09PT09PVxuXG4gICAgICAvLyB0aXRsZSAyXG4gICAgICAvLyAtLS0tLS0tXG4gICAgICBwYXR0ZXJuOiAvXFxTLiooPzpcXG58XFxyXFxuPykoPzo9PSt8LS0rKSg/PVsgXFx0XSokKS9tLFxuICAgICAgYWxpYXM6ICdpbXBvcnRhbnQnLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgIHB1bmN0dWF0aW9uOiAvPT0rJHwtLSskL1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIC8vICMgdGl0bGUgMVxuICAgICAgLy8gIyMjIyMjIHRpdGxlIDZcbiAgICAgIHBhdHRlcm46IC8oXlxccyopIy4rL20sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgYWxpYXM6ICdpbXBvcnRhbnQnLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgIHB1bmN0dWF0aW9uOiAvXiMrfCMrJC9cbiAgICAgIH1cbiAgICB9XSxcbiAgICAnaHInOiB7XG4gICAgICAvLyAqKipcbiAgICAgIC8vIC0tLVxuICAgICAgLy8gKiAqICpcbiAgICAgIC8vIC0tLS0tLS0tLS0tXG4gICAgICBwYXR0ZXJuOiAvKF5cXHMqKShbKi1dKSg/OltcXHQgXSpcXDIpezIsfSg/PVxccyokKS9tLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGFsaWFzOiAncHVuY3R1YXRpb24nXG4gICAgfSxcbiAgICAnbGlzdCc6IHtcbiAgICAgIC8vICogaXRlbVxuICAgICAgLy8gKyBpdGVtXG4gICAgICAvLyAtIGl0ZW1cbiAgICAgIC8vIDEuIGl0ZW1cbiAgICAgIHBhdHRlcm46IC8oXlxccyopKD86WyorLV18XFxkK1xcLikoPz1bXFx0IF0uKS9tLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGFsaWFzOiAncHVuY3R1YXRpb24nXG4gICAgfSxcbiAgICAndXJsLXJlZmVyZW5jZSc6IHtcbiAgICAgIC8vIFtpZF06IGh0dHA6Ly9leGFtcGxlLmNvbSBcIk9wdGlvbmFsIHRpdGxlXCJcbiAgICAgIC8vIFtpZF06IGh0dHA6Ly9leGFtcGxlLmNvbSAnT3B0aW9uYWwgdGl0bGUnXG4gICAgICAvLyBbaWRdOiBodHRwOi8vZXhhbXBsZS5jb20gKE9wdGlvbmFsIHRpdGxlKVxuICAgICAgLy8gW2lkXTogPGh0dHA6Ly9leGFtcGxlLmNvbT4gXCJPcHRpb25hbCB0aXRsZVwiXG4gICAgICBwYXR0ZXJuOiAvIT9cXFtbXlxcXV0rXFxdOltcXHQgXSsoPzpcXFMrfDwoPzpcXFxcLnxbXj5cXFxcXSkrPikoPzpbXFx0IF0rKD86XCIoPzpcXFxcLnxbXlwiXFxcXF0pKlwifCcoPzpcXFxcLnxbXidcXFxcXSkqJ3xcXCgoPzpcXFxcLnxbXilcXFxcXSkqXFwpKSk/LyxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAndmFyaWFibGUnOiB7XG4gICAgICAgICAgcGF0dGVybjogL14oIT9cXFspW15cXF1dKy8sXG4gICAgICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICAnc3RyaW5nJzogLyg/OlwiKD86XFxcXC58W15cIlxcXFxdKSpcInwnKD86XFxcXC58W14nXFxcXF0pKid8XFwoKD86XFxcXC58W14pXFxcXF0pKlxcKSkkLyxcbiAgICAgICAgJ3B1bmN0dWF0aW9uJzogL15bXFxbXFxdITpdfFs8Pl0vXG4gICAgICB9LFxuICAgICAgYWxpYXM6ICd1cmwnXG4gICAgfSxcbiAgICAnYm9sZCc6IHtcbiAgICAgIC8vICoqc3Ryb25nKipcbiAgICAgIC8vIF9fc3Ryb25nX19cblxuICAgICAgLy8gYWxsb3cgb25lIG5lc3RlZCBpbnN0YW5jZSBvZiBpdGFsaWMgdGV4dCB1c2luZyB0aGUgc2FtZSBkZWxpbWl0ZXJcbiAgICAgIHBhdHRlcm46IGNyZWF0ZUlubGluZSgvXFxiX18oPzooPyFfKTxpbm5lcj58Xyg/Oig/IV8pPGlubmVyPikrXykrX19cXGJ8XFwqXFwqKD86KD8hXFwqKTxpbm5lcj58XFwqKD86KD8hXFwqKTxpbm5lcj4pK1xcKikrXFwqXFwqLy5zb3VyY2UpLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAnY29udGVudCc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvKF4uLilbXFxzXFxTXSsoPz0uLiQpLyxcbiAgICAgICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgICAgIGluc2lkZToge30gLy8gc2VlIGJlbG93XG4gICAgICAgIH0sXG4gICAgICAgICdwdW5jdHVhdGlvbic6IC9cXCpcXCp8X18vXG4gICAgICB9XG4gICAgfSxcbiAgICAnaXRhbGljJzoge1xuICAgICAgLy8gKmVtKlxuICAgICAgLy8gX2VtX1xuXG4gICAgICAvLyBhbGxvdyBvbmUgbmVzdGVkIGluc3RhbmNlIG9mIGJvbGQgdGV4dCB1c2luZyB0aGUgc2FtZSBkZWxpbWl0ZXJcbiAgICAgIHBhdHRlcm46IGNyZWF0ZUlubGluZSgvXFxiXyg/Oig/IV8pPGlubmVyPnxfXyg/Oig/IV8pPGlubmVyPikrX18pK19cXGJ8XFwqKD86KD8hXFwqKTxpbm5lcj58XFwqXFwqKD86KD8hXFwqKTxpbm5lcj4pK1xcKlxcKikrXFwqLy5zb3VyY2UpLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAnY29udGVudCc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvKF4uKVtcXHNcXFNdKyg/PS4kKS8sXG4gICAgICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgICAgICBpbnNpZGU6IHt9IC8vIHNlZSBiZWxvd1xuICAgICAgICB9LFxuICAgICAgICAncHVuY3R1YXRpb24nOiAvWypfXS9cbiAgICAgIH1cbiAgICB9LFxuICAgICdzdHJpa2UnOiB7XG4gICAgICAvLyB+fnN0cmlrZSB0aHJvdWdofn5cbiAgICAgIC8vIH5zdHJpa2V+XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVnZXhwL3N0cmljdFxuICAgICAgcGF0dGVybjogY3JlYXRlSW5saW5lKC8ofn4/KSg/Oig/IX4pPGlubmVyPikrXFwyLy5zb3VyY2UpLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAnY29udGVudCc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvKF5+fj8pW1xcc1xcU10rKD89XFwxJCkvLFxuICAgICAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICAgICAgaW5zaWRlOiB7fSAvLyBzZWUgYmVsb3dcbiAgICAgICAgfSxcbiAgICAgICAgJ3B1bmN0dWF0aW9uJzogL35+Py9cbiAgICAgIH1cbiAgICB9LFxuICAgICdjb2RlLXNuaXBwZXQnOiB7XG4gICAgICAvLyBgY29kZWBcbiAgICAgIC8vIGBgY29kZWBgXG4gICAgICBwYXR0ZXJuOiAvKF58W15cXFxcYF0pKD86YGBbXmBcXHJcXG5dKyg/OmBbXmBcXHJcXG5dKykqYGAoPyFgKXxgW15gXFxyXFxuXStgKD8hYCkpLyxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBhbGlhczogWydjb2RlJywgJ2tleXdvcmQnXVxuICAgIH0sXG4gICAgJ3VybCc6IHtcbiAgICAgIC8vIFtleGFtcGxlXShodHRwOi8vZXhhbXBsZS5jb20gXCJPcHRpb25hbCB0aXRsZVwiKVxuICAgICAgLy8gW2V4YW1wbGVdW2lkXVxuICAgICAgLy8gW2V4YW1wbGVdIFtpZF1cbiAgICAgIHBhdHRlcm46IGNyZWF0ZUlubGluZSgvIT9cXFsoPzooPyFcXF0pPGlubmVyPikrXFxdKD86XFwoW15cXHMpXSsoPzpbXFx0IF0rXCIoPzpcXFxcLnxbXlwiXFxcXF0pKlwiKT9cXCl8WyBcXHRdP1xcWyg/Oig/IVxcXSk8aW5uZXI+KStcXF0pLy5zb3VyY2UpLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAnb3BlcmF0b3InOiAvXiEvLFxuICAgICAgICAnY29udGVudCc6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvKF5cXFspW15cXF1dKyg/PVxcXSkvLFxuICAgICAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICAgICAgaW5zaWRlOiB7fSAvLyBzZWUgYmVsb3dcbiAgICAgICAgfSxcbiAgICAgICAgJ3ZhcmlhYmxlJzoge1xuICAgICAgICAgIHBhdHRlcm46IC8oXlxcXVsgXFx0XT9cXFspW15cXF1dKyg/PVxcXSQpLyxcbiAgICAgICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgICd1cmwnOiB7XG4gICAgICAgICAgcGF0dGVybjogLyheXFxdXFwoKVteXFxzKV0rLyxcbiAgICAgICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgICdzdHJpbmcnOiB7XG4gICAgICAgICAgcGF0dGVybjogLyheWyBcXHRdKylcIig/OlxcXFwufFteXCJcXFxcXSkqXCIoPz1cXCkkKS8sXG4gICAgICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgWyd1cmwnLCAnYm9sZCcsICdpdGFsaWMnLCAnc3RyaWtlJ10uZm9yRWFjaChmdW5jdGlvbiAodG9rZW4pIHtcbiAgICBbJ3VybCcsICdib2xkJywgJ2l0YWxpYycsICdzdHJpa2UnLCAnY29kZS1zbmlwcGV0J10uZm9yRWFjaChmdW5jdGlvbiAoaW5zaWRlKSB7XG4gICAgICBpZiAodG9rZW4gIT09IGluc2lkZSkge1xuICAgICAgICBQcmlzbS5sYW5ndWFnZXMubWFya2Rvd25bdG9rZW5dLmluc2lkZS5jb250ZW50Lmluc2lkZVtpbnNpZGVdID0gUHJpc20ubGFuZ3VhZ2VzLm1hcmtkb3duW2luc2lkZV07XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuICBQcmlzbS5ob29rcy5hZGQoJ2FmdGVyLXRva2VuaXplJywgZnVuY3Rpb24gKGVudikge1xuICAgIGlmIChlbnYubGFuZ3VhZ2UgIT09ICdtYXJrZG93bicgJiYgZW52Lmxhbmd1YWdlICE9PSAnbWQnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGZ1bmN0aW9uIHdhbGtUb2tlbnModG9rZW5zKSB7XG4gICAgICBpZiAoIXRva2VucyB8fCB0eXBlb2YgdG9rZW5zID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRva2Vucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdmFyIHRva2VuID0gdG9rZW5zW2ldO1xuICAgICAgICBpZiAodG9rZW4udHlwZSAhPT0gJ2NvZGUnKSB7XG4gICAgICAgICAgd2Fsa1Rva2Vucyh0b2tlbi5jb250ZW50KTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qXG4gICAgICAgICAqIEFkZCB0aGUgY29ycmVjdCBgbGFuZ3VhZ2UteHh4eGAgY2xhc3MgdG8gdGhpcyBjb2RlIGJsb2NrLiBLZWVwIGluIG1pbmQgdGhhdCB0aGUgYGNvZGUtbGFuZ3VhZ2VgIHRva2VuXG4gICAgICAgICAqIGlzIG9wdGlvbmFsLiBCdXQgdGhlIGdyYW1tYXIgaXMgZGVmaW5lZCBzbyB0aGF0IHRoZXJlIGlzIG9ubHkgb25lIGNhc2Ugd2UgaGF2ZSB0byBoYW5kbGU6XG4gICAgICAgICAqXG4gICAgICAgICAqIHRva2VuLmNvbnRlbnQgPSBbXG4gICAgICAgICAqICAgICA8c3BhbiBjbGFzcz1cInB1bmN0dWF0aW9uXCI+YGBgPC9zcGFuPixcbiAgICAgICAgICogICAgIDxzcGFuIGNsYXNzPVwiY29kZS1sYW5ndWFnZVwiPnh4eHg8L3NwYW4+LFxuICAgICAgICAgKiAgICAgJ1xcbicsIC8vIGV4YWN0bHkgb25lIG5ldyBsaW5lcyAoXFxyIG9yIFxcbiBvciBcXHJcXG4pXG4gICAgICAgICAqICAgICA8c3BhbiBjbGFzcz1cImNvZGUtYmxvY2tcIj4uLi48L3NwYW4+LFxuICAgICAgICAgKiAgICAgJ1xcbicsIC8vIGV4YWN0bHkgb25lIG5ldyBsaW5lcyBhZ2FpblxuICAgICAgICAgKiAgICAgPHNwYW4gY2xhc3M9XCJwdW5jdHVhdGlvblwiPmBgYDwvc3Bhbj5cbiAgICAgICAgICogXTtcbiAgICAgICAgICovXG5cbiAgICAgICAgdmFyIGNvZGVMYW5nID0gdG9rZW4uY29udGVudFsxXTtcbiAgICAgICAgdmFyIGNvZGVCbG9jayA9IHRva2VuLmNvbnRlbnRbM107XG4gICAgICAgIGlmIChjb2RlTGFuZyAmJiBjb2RlQmxvY2sgJiYgY29kZUxhbmcudHlwZSA9PT0gJ2NvZGUtbGFuZ3VhZ2UnICYmIGNvZGVCbG9jay50eXBlID09PSAnY29kZS1ibG9jaycgJiYgdHlwZW9mIGNvZGVMYW5nLmNvbnRlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgLy8gdGhpcyBtaWdodCBiZSBhIGxhbmd1YWdlIHRoYXQgUHJpc20gZG9lcyBub3Qgc3VwcG9ydFxuXG4gICAgICAgICAgLy8gZG8gc29tZSByZXBsYWNlbWVudHMgdG8gc3VwcG9ydCBDKyssIEMjLCBhbmQgRiNcbiAgICAgICAgICB2YXIgbGFuZyA9IGNvZGVMYW5nLmNvbnRlbnQucmVwbGFjZSgvXFxiIy9nLCAnc2hhcnAnKS5yZXBsYWNlKC9cXGJcXCtcXCsvZywgJ3BwJyk7XG4gICAgICAgICAgLy8gb25seSB1c2UgdGhlIGZpcnN0IHdvcmRcbiAgICAgICAgICBsYW5nID0gKC9bYS16XVtcXHctXSovaS5leGVjKGxhbmcpIHx8IFsnJ10pWzBdLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgdmFyIGFsaWFzID0gJ2xhbmd1YWdlLScgKyBsYW5nO1xuXG4gICAgICAgICAgLy8gYWRkIGFsaWFzXG4gICAgICAgICAgaWYgKCFjb2RlQmxvY2suYWxpYXMpIHtcbiAgICAgICAgICAgIGNvZGVCbG9jay5hbGlhcyA9IFthbGlhc107XG4gICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY29kZUJsb2NrLmFsaWFzID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgY29kZUJsb2NrLmFsaWFzID0gW2NvZGVCbG9jay5hbGlhcywgYWxpYXNdO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb2RlQmxvY2suYWxpYXMucHVzaChhbGlhcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHdhbGtUb2tlbnMoZW52LnRva2Vucyk7XG4gIH0pO1xuICBQcmlzbS5ob29rcy5hZGQoJ3dyYXAnLCBmdW5jdGlvbiAoZW52KSB7XG4gICAgaWYgKGVudi50eXBlICE9PSAnY29kZS1ibG9jaycpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGNvZGVMYW5nID0gJyc7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBlbnYuY2xhc3Nlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBjbHMgPSBlbnYuY2xhc3Nlc1tpXTtcbiAgICAgIHZhciBtYXRjaCA9IC9sYW5ndWFnZS0oLispLy5leGVjKGNscyk7XG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgY29kZUxhbmcgPSBtYXRjaFsxXTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBncmFtbWFyID0gUHJpc20ubGFuZ3VhZ2VzW2NvZGVMYW5nXTtcbiAgICBpZiAoIWdyYW1tYXIpIHtcbiAgICAgIGlmIChjb2RlTGFuZyAmJiBjb2RlTGFuZyAhPT0gJ25vbmUnICYmIFByaXNtLnBsdWdpbnMuYXV0b2xvYWRlcikge1xuICAgICAgICB2YXIgaWQgPSAnbWQtJyArIG5ldyBEYXRlKCkudmFsdWVPZigpICsgJy0nICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMWUxNik7XG4gICAgICAgIGVudi5hdHRyaWJ1dGVzWydpZCddID0gaWQ7XG4gICAgICAgIFByaXNtLnBsdWdpbnMuYXV0b2xvYWRlci5sb2FkTGFuZ3VhZ2VzKGNvZGVMYW5nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICAgICAgICBpZiAoZWxlKSB7XG4gICAgICAgICAgICBlbGUuaW5uZXJIVE1MID0gUHJpc20uaGlnaGxpZ2h0KGVsZS50ZXh0Q29udGVudCwgUHJpc20ubGFuZ3VhZ2VzW2NvZGVMYW5nXSwgY29kZUxhbmcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGVudi5jb250ZW50ID0gUHJpc20uaGlnaGxpZ2h0KHRleHRDb250ZW50KGVudi5jb250ZW50KSwgZ3JhbW1hciwgY29kZUxhbmcpO1xuICAgIH1cbiAgfSk7XG4gIHZhciB0YWdQYXR0ZXJuID0gUmVnRXhwKFByaXNtLmxhbmd1YWdlcy5tYXJrdXAudGFnLnBhdHRlcm4uc291cmNlLCAnZ2knKTtcblxuICAvKipcbiAgICogQSBsaXN0IG9mIGtub3duIGVudGl0eSBuYW1lcy5cbiAgICpcbiAgICogVGhpcyB3aWxsIGFsd2F5cyBiZSBpbmNvbXBsZXRlIHRvIHNhdmUgc3BhY2UuIFRoZSBjdXJyZW50IGxpc3QgaXMgdGhlIG9uZSB1c2VkIGJ5IGxvd2Rhc2gncyB1bmVzY2FwZSBmdW5jdGlvbi5cbiAgICpcbiAgICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2xvZGFzaC9sb2Rhc2gvYmxvYi8yZGEwMjRjM2I0Zjk5NDdhNDg1MTc2MzlkZTc1NjA0NTdjZDRlYzZjL3VuZXNjYXBlLmpzI0wyfVxuICAgKi9cbiAgdmFyIEtOT1dOX0VOVElUWV9OQU1FUyA9IHtcbiAgICAnYW1wJzogJyYnLFxuICAgICdsdCc6ICc8JyxcbiAgICAnZ3QnOiAnPicsXG4gICAgJ3F1b3QnOiAnXCInXG4gIH07XG5cbiAgLy8gSUUgMTEgZG9lc24ndCBzdXBwb3J0IGBTdHJpbmcuZnJvbUNvZGVQb2ludGBcbiAgdmFyIGZyb21Db2RlUG9pbnQgPSBTdHJpbmcuZnJvbUNvZGVQb2ludCB8fCBTdHJpbmcuZnJvbUNoYXJDb2RlO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB0ZXh0IGNvbnRlbnQgb2YgYSBnaXZlbiBIVE1MIHNvdXJjZSBjb2RlIHN0cmluZy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGh0bWxcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIGZ1bmN0aW9uIHRleHRDb250ZW50KGh0bWwpIHtcbiAgICAvLyByZW1vdmUgYWxsIHRhZ3NcbiAgICB2YXIgdGV4dCA9IGh0bWwucmVwbGFjZSh0YWdQYXR0ZXJuLCAnJyk7XG5cbiAgICAvLyBkZWNvZGUga25vd24gZW50aXRpZXNcbiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC8mKFxcd3sxLDh9fCN4P1tcXGRhLWZdezEsOH0pOy9naSwgZnVuY3Rpb24gKG0sIGNvZGUpIHtcbiAgICAgIGNvZGUgPSBjb2RlLnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoY29kZVswXSA9PT0gJyMnKSB7XG4gICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgaWYgKGNvZGVbMV0gPT09ICd4Jykge1xuICAgICAgICAgIHZhbHVlID0gcGFyc2VJbnQoY29kZS5zbGljZSgyKSwgMTYpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhbHVlID0gTnVtYmVyKGNvZGUuc2xpY2UoMSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmcm9tQ29kZVBvaW50KHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBrbm93biA9IEtOT1dOX0VOVElUWV9OQU1FU1tjb2RlXTtcbiAgICAgICAgaWYgKGtub3duKSB7XG4gICAgICAgICAgcmV0dXJuIGtub3duO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdW5hYmxlIHRvIGRlY29kZVxuICAgICAgICByZXR1cm4gbTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdGV4dDtcbiAgfVxuICBQcmlzbS5sYW5ndWFnZXMubWQgPSBQcmlzbS5sYW5ndWFnZXMubWFya2Rvd247XG59KShQcmlzbSk7XG5QcmlzbS5sYW5ndWFnZXMub2JqZWN0aXZlYyA9IFByaXNtLmxhbmd1YWdlcy5leHRlbmQoJ2MnLCB7XG4gICdzdHJpbmcnOiB7XG4gICAgcGF0dGVybjogL0A/XCIoPzpcXFxcKD86XFxyXFxufFtcXHNcXFNdKXxbXlwiXFxcXFxcclxcbl0pKlwiLyxcbiAgICBncmVlZHk6IHRydWVcbiAgfSxcbiAgJ2tleXdvcmQnOiAvXFxiKD86YXNtfGF1dG98YnJlYWt8Y2FzZXxjaGFyfGNvbnN0fGNvbnRpbnVlfGRlZmF1bHR8ZG98ZG91YmxlfGVsc2V8ZW51bXxleHRlcm58ZmxvYXR8Zm9yfGdvdG98aWZ8aW58aW5saW5lfGludHxsb25nfHJlZ2lzdGVyfHJldHVybnxzZWxmfHNob3J0fHNpZ25lZHxzaXplb2Z8c3RhdGljfHN0cnVjdHxzdXBlcnxzd2l0Y2h8dHlwZWRlZnx0eXBlb2Z8dW5pb258dW5zaWduZWR8dm9pZHx2b2xhdGlsZXx3aGlsZSlcXGJ8KD86QGludGVyZmFjZXxAZW5kfEBpbXBsZW1lbnRhdGlvbnxAcHJvdG9jb2x8QGNsYXNzfEBwdWJsaWN8QHByb3RlY3RlZHxAcHJpdmF0ZXxAcHJvcGVydHl8QHRyeXxAY2F0Y2h8QGZpbmFsbHl8QHRocm93fEBzeW50aGVzaXplfEBkeW5hbWljfEBzZWxlY3RvcilcXGIvLFxuICAnb3BlcmF0b3InOiAvLVstPl0/fFxcK1xcKz98IT0/fDw8Pz0/fD4+Pz0/fD09P3wmJj98XFx8XFx8P3xbfl4lPypcXC9AXS9cbn0pO1xuZGVsZXRlIFByaXNtLmxhbmd1YWdlcy5vYmplY3RpdmVjWydjbGFzcy1uYW1lJ107XG5QcmlzbS5sYW5ndWFnZXMub2JqYyA9IFByaXNtLmxhbmd1YWdlcy5vYmplY3RpdmVjO1xuKGZ1bmN0aW9uIChQcmlzbSkge1xuICB2YXIgYnJhY2tldHMgPSAvKD86XFwoKD86W14oKVxcXFxdfFxcXFxbXFxzXFxTXSkqXFwpfFxceyg/Oltee31cXFxcXXxcXFxcW1xcc1xcU10pKlxcfXxcXFsoPzpbXltcXF1cXFxcXXxcXFxcW1xcc1xcU10pKlxcXXw8KD86W148PlxcXFxdfFxcXFxbXFxzXFxTXSkqPikvLnNvdXJjZTtcbiAgUHJpc20ubGFuZ3VhZ2VzLnBlcmwgPSB7XG4gICAgJ2NvbW1lbnQnOiBbe1xuICAgICAgLy8gUE9EXG4gICAgICBwYXR0ZXJuOiAvKF5cXHMqKT1cXHdbXFxzXFxTXSo/PWN1dC4qL20sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgZ3JlZWR5OiB0cnVlXG4gICAgfSwge1xuICAgICAgcGF0dGVybjogLyhefFteXFxcXCRdKSMuKi8sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgZ3JlZWR5OiB0cnVlXG4gICAgfV0sXG4gICAgLy8gVE9ETyBDb3VsZCBiZSBuaWNlIHRvIGhhbmRsZSBIZXJlZG9jIHRvby5cbiAgICAnc3RyaW5nJzogW3tcbiAgICAgIHBhdHRlcm46IFJlZ0V4cCgvXFxiKD86cXxxcXxxd3xxeCkoPyFbYS16QS1aMC05XSlcXHMqLy5zb3VyY2UgKyAnKD86JyArIFtcbiAgICAgIC8vIHEvLi4uL1xuICAgICAgLyhbXmEtekEtWjAtOVxcc3soXFxbPF0pKD86KD8hXFwxKVteXFxcXF18XFxcXFtcXHNcXFNdKSpcXDEvLnNvdXJjZSxcbiAgICAgIC8vIHEgYS4uLmFcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWdleHAvc3RyaWN0XG4gICAgICAvKFthLXpBLVowLTldKSg/Oig/IVxcMilbXlxcXFxdfFxcXFxbXFxzXFxTXSkqXFwyLy5zb3VyY2UsXG4gICAgICAvLyBxKC4uLilcbiAgICAgIC8vIHF7Li4ufVxuICAgICAgLy8gcVsuLi5dXG4gICAgICAvLyBxPC4uLj5cbiAgICAgIGJyYWNrZXRzXS5qb2luKCd8JykgKyAnKScpLFxuICAgICAgZ3JlZWR5OiB0cnVlXG4gICAgfSxcbiAgICAvLyBcIi4uLlwiLCBgLi4uYFxuICAgIHtcbiAgICAgIHBhdHRlcm46IC8oXCJ8YCkoPzooPyFcXDEpW15cXFxcXXxcXFxcW1xcc1xcU10pKlxcMS8sXG4gICAgICBncmVlZHk6IHRydWVcbiAgICB9LFxuICAgIC8vICcuLi4nXG4gICAgLy8gRklYTUUgTXVsdGktbGluZSBzaW5nbGUtcXVvdGVkIHN0cmluZ3MgYXJlIG5vdCBzdXBwb3J0ZWQgYXMgdGhleSB3b3VsZCBicmVhayB2YXJpYWJsZXMgY29udGFpbmluZyAnXG4gICAge1xuICAgICAgcGF0dGVybjogLycoPzpbXidcXFxcXFxyXFxuXXxcXFxcLikqJy8sXG4gICAgICBncmVlZHk6IHRydWVcbiAgICB9XSxcbiAgICAncmVnZXgnOiBbe1xuICAgICAgcGF0dGVybjogUmVnRXhwKC9cXGIoPzptfHFyKSg/IVthLXpBLVowLTldKVxccyovLnNvdXJjZSArICcoPzonICsgW1xuICAgICAgLy8gbS8uLi4vXG4gICAgICAvKFteYS16QS1aMC05XFxzeyhcXFs8XSkoPzooPyFcXDEpW15cXFxcXXxcXFxcW1xcc1xcU10pKlxcMS8uc291cmNlLFxuICAgICAgLy8gbSBhLi4uYVxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlZ2V4cC9zdHJpY3RcbiAgICAgIC8oW2EtekEtWjAtOV0pKD86KD8hXFwyKVteXFxcXF18XFxcXFtcXHNcXFNdKSpcXDIvLnNvdXJjZSxcbiAgICAgIC8vIG0oLi4uKVxuICAgICAgLy8gbXsuLi59XG4gICAgICAvLyBtWy4uLl1cbiAgICAgIC8vIG08Li4uPlxuICAgICAgYnJhY2tldHNdLmpvaW4oJ3wnKSArICcpJyArIC9bbXNpeHBvZHVhbG5nY10qLy5zb3VyY2UpLFxuICAgICAgZ3JlZWR5OiB0cnVlXG4gICAgfSxcbiAgICAvLyBUaGUgbG9va2JlaGluZHMgcHJldmVudCAtcyBmcm9tIGJyZWFraW5nXG4gICAge1xuICAgICAgcGF0dGVybjogUmVnRXhwKC8oXnxbXi1dKVxcYig/OnN8dHJ8eSkoPyFbYS16QS1aMC05XSlcXHMqLy5zb3VyY2UgKyAnKD86JyArIFtcbiAgICAgIC8vIHMvLi4uLy4uLi9cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWdleHAvc3RyaWN0XG4gICAgICAvKFteYS16QS1aMC05XFxzeyhcXFs8XSkoPzooPyFcXDIpW15cXFxcXXxcXFxcW1xcc1xcU10pKlxcMig/Oig/IVxcMilbXlxcXFxdfFxcXFxbXFxzXFxTXSkqXFwyLy5zb3VyY2UsXG4gICAgICAvLyBzIGEuLi5hLi4uYVxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlZ2V4cC9zdHJpY3RcbiAgICAgIC8oW2EtekEtWjAtOV0pKD86KD8hXFwzKVteXFxcXF18XFxcXFtcXHNcXFNdKSpcXDMoPzooPyFcXDMpW15cXFxcXXxcXFxcW1xcc1xcU10pKlxcMy8uc291cmNlLFxuICAgICAgLy8gcyguLi4pKC4uLilcbiAgICAgIC8vIHN7Li4ufXsuLi59XG4gICAgICAvLyBzWy4uLl1bLi4uXVxuICAgICAgLy8gczwuLi4+PC4uLj5cbiAgICAgIC8vIHMoLi4uKVsuLi5dXG4gICAgICBicmFja2V0cyArIC9cXHMqLy5zb3VyY2UgKyBicmFja2V0c10uam9pbignfCcpICsgJyknICsgL1ttc2l4cG9kdWFsbmdjZXJdKi8uc291cmNlKSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBncmVlZHk6IHRydWVcbiAgICB9LFxuICAgIC8vIC8uLi4vXG4gICAgLy8gVGhlIGxvb2stYWhlYWQgdHJpZXMgdG8gcHJldmVudCB0d28gZGl2aXNpb25zIG9uXG4gICAgLy8gdGhlIHNhbWUgbGluZSBmcm9tIGJlaW5nIGhpZ2hsaWdodGVkIGFzIHJlZ2V4LlxuICAgIC8vIFRoaXMgZG9lcyBub3Qgc3VwcG9ydCBtdWx0aS1saW5lIHJlZ2V4LlxuICAgIHtcbiAgICAgIHBhdHRlcm46IC9cXC8oPzpbXlxcL1xcXFxcXHJcXG5dfFxcXFwuKSpcXC9bbXNpeHBvZHVhbG5nY10qKD89XFxzKig/OiR8W1xcclxcbiwuO30pJnxcXC0rKn48PiE/Xl18KD86YW5kfGNtcHxlcXxnZXxndHxsZXxsdHxuZXxub3R8b3J8eHx4b3IpXFxiKSkvLFxuICAgICAgZ3JlZWR5OiB0cnVlXG4gICAgfV0sXG4gICAgLy8gRklYTUUgTm90IHN1cmUgYWJvdXQgdGhlIGhhbmRsaW5nIG9mIDo6LCAnLCBhbmQgI1xuICAgICd2YXJpYWJsZSc6IFtcbiAgICAvLyAke15QT1NUTUFUQ0h9XG4gICAgL1smKiRAJV1cXHtcXF5bQS1aXStcXH0vLFxuICAgIC8vICReVlxuICAgIC9bJiokQCVdXFxeW0EtWl9dLyxcbiAgICAvLyAkey4uLn1cbiAgICAvWyYqJEAlXSM/KD89XFx7KS8sXG4gICAgLy8gJGZvb1xuICAgIC9bJiokQCVdIz8oPzooPzo6OikqJz8oPyFcXGQpW1xcdyRdKyg/IVtcXHckXSkpKyg/Ojo6KSovLFxuICAgIC8vICQxXG4gICAgL1smKiRAJV1cXGQrLyxcbiAgICAvLyAkXywgQF8sICUhXG4gICAgLy8gVGhlIG5lZ2F0aXZlIGxvb2thaGVhZCBwcmV2ZW50cyBmcm9tIGJyZWFraW5nIHRoZSAlPSBvcGVyYXRvclxuICAgIC8oPyElPSlbJEAlXVshXCIjJCUmJygpKissXFwtLlxcLzo7PD0+P0BbXFxcXFxcXV5fYHt8fX5dL10sXG4gICAgJ2ZpbGVoYW5kbGUnOiB7XG4gICAgICAvLyA8PiwgPEZPTz4sIF9cbiAgICAgIHBhdHRlcm46IC88KD8hWzw9XSlcXFMqPz58XFxiX1xcYi8sXG4gICAgICBhbGlhczogJ3N5bWJvbCdcbiAgICB9LFxuICAgICd2LXN0cmluZyc6IHtcbiAgICAgIC8vIHYxLjIsIDEuMi4zXG4gICAgICBwYXR0ZXJuOiAvdlxcZCsoPzpcXC5cXGQrKSp8XFxkKyg/OlxcLlxcZCspezIsfS8sXG4gICAgICBhbGlhczogJ3N0cmluZydcbiAgICB9LFxuICAgICdmdW5jdGlvbic6IHtcbiAgICAgIHBhdHRlcm46IC8oXFxic3ViWyBcXHRdKylcXHcrLyxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICB9LFxuICAgICdrZXl3b3JkJzogL1xcYig/OmFueXxicmVha3xjb250aW51ZXxkZWZhdWx0fGRlbGV0ZXxkaWV8ZG98ZWxzZXxlbHNpZnxldmFsfGZvcnxmb3JlYWNofGdpdmVufGdvdG98aWZ8bGFzdHxsb2NhbHxteXxuZXh0fG91cnxwYWNrYWdlfHByaW50fHJlZG98cmVxdWlyZXxyZXR1cm58c2F5fHN0YXRlfHN1Ynxzd2l0Y2h8dW5kZWZ8dW5sZXNzfHVudGlsfHVzZXx3aGVufHdoaWxlKVxcYi8sXG4gICAgJ251bWJlcic6IC9cXGIoPzoweFtcXGRBLUZhLWZdKD86Xz9bXFxkQS1GYS1mXSkqfDBiWzAxXSg/Ol8/WzAxXSkqfCg/Oig/OlxcZCg/Ol8/XFxkKSopP1xcLik/XFxkKD86Xz9cXGQpKig/OltFZV1bKy1dP1xcZCspPylcXGIvLFxuICAgICdvcGVyYXRvcic6IC8tW3J3eG9SV1hPZXpzZmRscFNiY3R1Z2tUQk1BQ11cXGJ8XFwrWys9XT98LVstPT5dP3xcXCpcXCo/PT98XFwvXFwvPz0/fD1bPX4+XT98flt+PV0/fFxcfFxcfD89P3wmJj89P3w8KD86PT4/fDw9Pyk/fD4+Pz0/fCFbfj1dP3xbJV5dPT98XFwuKD86PXxcXC5cXC4/KT98W1xcXFw/XXxcXGJ4KD86PXxcXGIpfFxcYig/OmFuZHxjbXB8ZXF8Z2V8Z3R8bGV8bHR8bmV8bm90fG9yfHhvcilcXGIvLFxuICAgICdwdW5jdHVhdGlvbic6IC9be31bXFxdOygpLDpdL1xuICB9O1xufSkoUHJpc20pO1xuKGZ1bmN0aW9uIChQcmlzbSkge1xuICAvKipcbiAgICogUmV0dXJucyB0aGUgcGxhY2Vob2xkZXIgZm9yIHRoZSBnaXZlbiBsYW5ndWFnZSBpZCBhbmQgaW5kZXguXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBsYW5ndWFnZVxuICAgKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGluZGV4XG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBmdW5jdGlvbiBnZXRQbGFjZWhvbGRlcihsYW5ndWFnZSwgaW5kZXgpIHtcbiAgICByZXR1cm4gJ19fXycgKyBsYW5ndWFnZS50b1VwcGVyQ2FzZSgpICsgaW5kZXggKyAnX19fJztcbiAgfVxuICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhQcmlzbS5sYW5ndWFnZXNbJ21hcmt1cC10ZW1wbGF0aW5nJ10gPSB7fSwge1xuICAgIGJ1aWxkUGxhY2Vob2xkZXJzOiB7XG4gICAgICAvKipcbiAgICAgICAqIFRva2VuaXplIGFsbCBpbmxpbmUgdGVtcGxhdGluZyBleHByZXNzaW9ucyBtYXRjaGluZyBgcGxhY2Vob2xkZXJQYXR0ZXJuYC5cbiAgICAgICAqXG4gICAgICAgKiBJZiBgcmVwbGFjZUZpbHRlcmAgaXMgcHJvdmlkZWQsIG9ubHkgbWF0Y2hlcyBvZiBgcGxhY2Vob2xkZXJQYXR0ZXJuYCBmb3Igd2hpY2ggYHJlcGxhY2VGaWx0ZXJgIHJldHVybnNcbiAgICAgICAqIGB0cnVlYCB3aWxsIGJlIHJlcGxhY2VkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBlbnYgVGhlIGVudmlyb25tZW50IG9mIHRoZSBgYmVmb3JlLXRva2VuaXplYCBob29rLlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGxhbmd1YWdlIFRoZSBsYW5ndWFnZSBpZC5cbiAgICAgICAqIEBwYXJhbSB7UmVnRXhwfSBwbGFjZWhvbGRlclBhdHRlcm4gVGhlIG1hdGNoZXMgb2YgdGhpcyBwYXR0ZXJuIHdpbGwgYmUgcmVwbGFjZWQgYnkgcGxhY2Vob2xkZXJzLlxuICAgICAgICogQHBhcmFtIHsobWF0Y2g6IHN0cmluZykgPT4gYm9vbGVhbn0gW3JlcGxhY2VGaWx0ZXJdXG4gICAgICAgKi9cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZW52LCBsYW5ndWFnZSwgcGxhY2Vob2xkZXJQYXR0ZXJuLCByZXBsYWNlRmlsdGVyKSB7XG4gICAgICAgIGlmIChlbnYubGFuZ3VhZ2UgIT09IGxhbmd1YWdlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0b2tlblN0YWNrID0gZW52LnRva2VuU3RhY2sgPSBbXTtcbiAgICAgICAgZW52LmNvZGUgPSBlbnYuY29kZS5yZXBsYWNlKHBsYWNlaG9sZGVyUGF0dGVybiwgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiByZXBsYWNlRmlsdGVyID09PSAnZnVuY3Rpb24nICYmICFyZXBsYWNlRmlsdGVyKG1hdGNoKSkge1xuICAgICAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgaSA9IHRva2VuU3RhY2subGVuZ3RoO1xuICAgICAgICAgIHZhciBwbGFjZWhvbGRlcjtcblxuICAgICAgICAgIC8vIENoZWNrIGZvciBleGlzdGluZyBzdHJpbmdzXG4gICAgICAgICAgd2hpbGUgKGVudi5jb2RlLmluZGV4T2YocGxhY2Vob2xkZXIgPSBnZXRQbGFjZWhvbGRlcihsYW5ndWFnZSwgaSkpICE9PSAtMSkge1xuICAgICAgICAgICAgKytpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIENyZWF0ZSBhIHNwYXJzZSBhcnJheVxuICAgICAgICAgIHRva2VuU3RhY2tbaV0gPSBtYXRjaDtcbiAgICAgICAgICByZXR1cm4gcGxhY2Vob2xkZXI7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFN3aXRjaCB0aGUgZ3JhbW1hciB0byBtYXJrdXBcbiAgICAgICAgZW52LmdyYW1tYXIgPSBQcmlzbS5sYW5ndWFnZXMubWFya3VwO1xuICAgICAgfVxuICAgIH0sXG4gICAgdG9rZW5pemVQbGFjZWhvbGRlcnM6IHtcbiAgICAgIC8qKlxuICAgICAgICogUmVwbGFjZSBwbGFjZWhvbGRlcnMgd2l0aCBwcm9wZXIgdG9rZW5zIGFmdGVyIHRva2VuaXppbmcuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtvYmplY3R9IGVudiBUaGUgZW52aXJvbm1lbnQgb2YgdGhlIGBhZnRlci10b2tlbml6ZWAgaG9vay5cbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsYW5ndWFnZSBUaGUgbGFuZ3VhZ2UgaWQuXG4gICAgICAgKi9cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZW52LCBsYW5ndWFnZSkge1xuICAgICAgICBpZiAoZW52Lmxhbmd1YWdlICE9PSBsYW5ndWFnZSB8fCAhZW52LnRva2VuU3RhY2spIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTd2l0Y2ggdGhlIGdyYW1tYXIgYmFja1xuICAgICAgICBlbnYuZ3JhbW1hciA9IFByaXNtLmxhbmd1YWdlc1tsYW5ndWFnZV07XG4gICAgICAgIHZhciBqID0gMDtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhlbnYudG9rZW5TdGFjayk7XG4gICAgICAgIGZ1bmN0aW9uIHdhbGtUb2tlbnModG9rZW5zKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIC8vIGFsbCBwbGFjZWhvbGRlcnMgYXJlIHJlcGxhY2VkIGFscmVhZHlcbiAgICAgICAgICAgIGlmIChqID49IGtleXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRva2VuID0gdG9rZW5zW2ldO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0b2tlbiA9PT0gJ3N0cmluZycgfHwgdG9rZW4uY29udGVudCAmJiB0eXBlb2YgdG9rZW4uY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgdmFyIGsgPSBrZXlzW2pdO1xuICAgICAgICAgICAgICB2YXIgdCA9IGVudi50b2tlblN0YWNrW2tdO1xuICAgICAgICAgICAgICB2YXIgcyA9IHR5cGVvZiB0b2tlbiA9PT0gJ3N0cmluZycgPyB0b2tlbiA6IHRva2VuLmNvbnRlbnQ7XG4gICAgICAgICAgICAgIHZhciBwbGFjZWhvbGRlciA9IGdldFBsYWNlaG9sZGVyKGxhbmd1YWdlLCBrKTtcbiAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcy5pbmRleE9mKHBsYWNlaG9sZGVyKTtcbiAgICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICArK2o7XG4gICAgICAgICAgICAgICAgdmFyIGJlZm9yZSA9IHMuc3Vic3RyaW5nKDAsIGluZGV4KTtcbiAgICAgICAgICAgICAgICB2YXIgbWlkZGxlID0gbmV3IFByaXNtLlRva2VuKGxhbmd1YWdlLCBQcmlzbS50b2tlbml6ZSh0LCBlbnYuZ3JhbW1hciksICdsYW5ndWFnZS0nICsgbGFuZ3VhZ2UsIHQpO1xuICAgICAgICAgICAgICAgIHZhciBhZnRlciA9IHMuc3Vic3RyaW5nKGluZGV4ICsgcGxhY2Vob2xkZXIubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICB2YXIgcmVwbGFjZW1lbnQgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAoYmVmb3JlKSB7XG4gICAgICAgICAgICAgICAgICByZXBsYWNlbWVudC5wdXNoLmFwcGx5KHJlcGxhY2VtZW50LCB3YWxrVG9rZW5zKFtiZWZvcmVdKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50LnB1c2gobWlkZGxlKTtcbiAgICAgICAgICAgICAgICBpZiAoYWZ0ZXIpIHtcbiAgICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50LnB1c2guYXBwbHkocmVwbGFjZW1lbnQsIHdhbGtUb2tlbnMoW2FmdGVyXSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRva2VuID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgdG9rZW5zLnNwbGljZS5hcHBseSh0b2tlbnMsIFtpLCAxXS5jb25jYXQocmVwbGFjZW1lbnQpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgdG9rZW4uY29udGVudCA9IHJlcGxhY2VtZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh0b2tlbi5jb250ZW50IC8qICYmIHR5cGVvZiB0b2tlbi5jb250ZW50ICE9PSAnc3RyaW5nJyAqLykge1xuICAgICAgICAgICAgICB3YWxrVG9rZW5zKHRva2VuLmNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdG9rZW5zO1xuICAgICAgICB9XG4gICAgICAgIHdhbGtUb2tlbnMoZW52LnRva2Vucyk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn0pKFByaXNtKTtcblxuLyoqXG4gKiBPcmlnaW5hbCBieSBBYXJvbiBIYXJ1bjogaHR0cDovL2FhaGFjcmVhdGl2ZS5jb20vMjAxMi8wNy8zMS9waHAtc3ludGF4LWhpZ2hsaWdodGluZy1wcmlzbS9cbiAqIE1vZGlmaWVkIGJ5IE1pbGVzIEpvaG5zb246IGh0dHA6Ly9taWxlc2oubWVcbiAqIFJld3JpdHRlbiBieSBUb20gUGF2ZWxlY1xuICpcbiAqIFN1cHBvcnRzIFBIUCA1LjMgLSA4LjBcbiAqL1xuKGZ1bmN0aW9uIChQcmlzbSkge1xuICB2YXIgY29tbWVudCA9IC9cXC9cXCpbXFxzXFxTXSo/XFwqXFwvfFxcL1xcLy4qfCMoPyFcXFspLiovO1xuICB2YXIgY29uc3RhbnQgPSBbe1xuICAgIHBhdHRlcm46IC9cXGIoPzpmYWxzZXx0cnVlKVxcYi9pLFxuICAgIGFsaWFzOiAnYm9vbGVhbidcbiAgfSwge1xuICAgIHBhdHRlcm46IC8oOjpcXHMqKVxcYlthLXpfXVxcdypcXGIoPyFcXHMqXFwoKS9pLFxuICAgIGdyZWVkeTogdHJ1ZSxcbiAgICBsb29rYmVoaW5kOiB0cnVlXG4gIH0sIHtcbiAgICBwYXR0ZXJuOiAvKFxcYig/OmNhc2V8Y29uc3QpXFxzKylcXGJbYS16X11cXHcqKD89XFxzKls7PV0pL2ksXG4gICAgZ3JlZWR5OiB0cnVlLFxuICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgfSwgL1xcYig/Om51bGwpXFxiL2ksIC9cXGJbQS1aX11bQS1aMC05X10qXFxiKD8hXFxzKlxcKCkvXTtcbiAgdmFyIG51bWJlciA9IC9cXGIwYlswMV0rKD86X1swMV0rKSpcXGJ8XFxiMG9bMC03XSsoPzpfWzAtN10rKSpcXGJ8XFxiMHhbXFxkYS1mXSsoPzpfW1xcZGEtZl0rKSpcXGJ8KD86XFxiXFxkKyg/Ol9cXGQrKSpcXC4/KD86XFxkKyg/Ol9cXGQrKSopP3xcXEJcXC5cXGQrKSg/OmVbKy1dP1xcZCspPy9pO1xuICB2YXIgb3BlcmF0b3IgPSAvPD89PnxcXD9cXD89P3xcXC57M318XFw/Py0+fFshPV09Pz0/fDo6fFxcKlxcKj0/fC0tfFxcK1xcK3wmJnxcXHxcXHx8PDx8Pj58Wz9+XXxbL158JSomPD4uKy1dPT8vO1xuICB2YXIgcHVuY3R1YXRpb24gPSAvW3t9XFxbXFxdKCksOjtdLztcbiAgUHJpc20ubGFuZ3VhZ2VzLnBocCA9IHtcbiAgICAnZGVsaW1pdGVyJzoge1xuICAgICAgcGF0dGVybjogL1xcPz4kfF48XFw/KD86cGhwKD89XFxzKXw9KT8vaSxcbiAgICAgIGFsaWFzOiAnaW1wb3J0YW50J1xuICAgIH0sXG4gICAgJ2NvbW1lbnQnOiBjb21tZW50LFxuICAgICd2YXJpYWJsZSc6IC9cXCQrKD86XFx3K1xcYnwoPz1cXHspKS8sXG4gICAgJ3BhY2thZ2UnOiB7XG4gICAgICBwYXR0ZXJuOiAvKG5hbWVzcGFjZVxccyt8dXNlXFxzKyg/OmZ1bmN0aW9uXFxzKyk/KSg/OlxcXFw/XFxiW2Etel9dXFx3KikrXFxiKD8hXFxcXCkvaSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ3B1bmN0dWF0aW9uJzogL1xcXFwvXG4gICAgICB9XG4gICAgfSxcbiAgICAnY2xhc3MtbmFtZS1kZWZpbml0aW9uJzoge1xuICAgICAgcGF0dGVybjogLyhcXGIoPzpjbGFzc3xlbnVtfGludGVyZmFjZXx0cmFpdClcXHMrKVxcYlthLXpfXVxcdyooPyFcXFxcKVxcYi9pLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGFsaWFzOiAnY2xhc3MtbmFtZSdcbiAgICB9LFxuICAgICdmdW5jdGlvbi1kZWZpbml0aW9uJzoge1xuICAgICAgcGF0dGVybjogLyhcXGJmdW5jdGlvblxccyspW2Etel9dXFx3Kig/PVxccypcXCgpL2ksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgYWxpYXM6ICdmdW5jdGlvbidcbiAgICB9LFxuICAgICdrZXl3b3JkJzogW3tcbiAgICAgIHBhdHRlcm46IC8oXFwoXFxzKilcXGIoPzphcnJheXxib29sfGJvb2xlYW58ZmxvYXR8aW50fGludGVnZXJ8b2JqZWN0fHN0cmluZylcXGIoPz1cXHMqXFwpKS9pLFxuICAgICAgYWxpYXM6ICd0eXBlLWNhc3RpbmcnLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgIH0sIHtcbiAgICAgIHBhdHRlcm46IC8oWygsP11cXHMqKVxcYig/OmFycmF5KD8hXFxzKlxcKCl8Ym9vbHxjYWxsYWJsZXwoPzpmYWxzZXxudWxsKSg/PVxccypcXHwpfGZsb2F0fGludHxpdGVyYWJsZXxtaXhlZHxvYmplY3R8c2VsZnxzdGF0aWN8c3RyaW5nKVxcYig/PVxccypcXCQpL2ksXG4gICAgICBhbGlhczogJ3R5cGUtaGludCcsXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgfSwge1xuICAgICAgcGF0dGVybjogLyhcXClcXHMqOlxccyooPzpcXD9cXHMqKT8pXFxiKD86YXJyYXkoPyFcXHMqXFwoKXxib29sfGNhbGxhYmxlfCg/OmZhbHNlfG51bGwpKD89XFxzKlxcfCl8ZmxvYXR8aW50fGl0ZXJhYmxlfG1peGVkfG5ldmVyfG9iamVjdHxzZWxmfHN0YXRpY3xzdHJpbmd8dm9pZClcXGIvaSxcbiAgICAgIGFsaWFzOiAncmV0dXJuLXR5cGUnLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgIH0sIHtcbiAgICAgIHBhdHRlcm46IC9cXGIoPzphcnJheSg/IVxccypcXCgpfGJvb2x8ZmxvYXR8aW50fGl0ZXJhYmxlfG1peGVkfG9iamVjdHxzdHJpbmd8dm9pZClcXGIvaSxcbiAgICAgIGFsaWFzOiAndHlwZS1kZWNsYXJhdGlvbicsXG4gICAgICBncmVlZHk6IHRydWVcbiAgICB9LCB7XG4gICAgICBwYXR0ZXJuOiAvKFxcfFxccyopKD86ZmFsc2V8bnVsbClcXGJ8XFxiKD86ZmFsc2V8bnVsbCkoPz1cXHMqXFx8KS9pLFxuICAgICAgYWxpYXM6ICd0eXBlLWRlY2xhcmF0aW9uJyxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICB9LCB7XG4gICAgICBwYXR0ZXJuOiAvXFxiKD86cGFyZW50fHNlbGZ8c3RhdGljKSg/PVxccyo6OikvaSxcbiAgICAgIGFsaWFzOiAnc3RhdGljLWNvbnRleHQnLFxuICAgICAgZ3JlZWR5OiB0cnVlXG4gICAgfSwge1xuICAgICAgLy8geWllbGQgZnJvbVxuICAgICAgcGF0dGVybjogLyhcXGJ5aWVsZFxccyspZnJvbVxcYi9pLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgIH0sXG4gICAgLy8gYGNsYXNzYCBpcyBhbHdheXMgYSBrZXl3b3JkIHVubGlrZSBvdGhlciBrZXl3b3Jkc1xuICAgIC9cXGJjbGFzc1xcYi9pLCB7XG4gICAgICAvLyBodHRwczovL3d3dy5waHAubmV0L21hbnVhbC9lbi9yZXNlcnZlZC5rZXl3b3Jkcy5waHBcbiAgICAgIC8vXG4gICAgICAvLyBrZXl3b3JkcyBjYW5ub3QgYmUgcHJlY2VkZWQgYnkgXCItPlwiXG4gICAgICAvLyB0aGUgY29tcGxleCBsb29rYmVoaW5kIG1lYW5zIGAoPzwhKD86LT58OjopXFxzKilgXG4gICAgICBwYXR0ZXJuOiAvKCg/Ol58W15cXHM+Ol18KD86XnxbXi1dKT58KD86XnxbXjpdKTopXFxzKilcXGIoPzphYnN0cmFjdHxhbmR8YXJyYXl8YXN8YnJlYWt8Y2FsbGFibGV8Y2FzZXxjYXRjaHxjbG9uZXxjb25zdHxjb250aW51ZXxkZWNsYXJlfGRlZmF1bHR8ZGllfGRvfGVjaG98ZWxzZXxlbHNlaWZ8ZW1wdHl8ZW5kZGVjbGFyZXxlbmRmb3J8ZW5kZm9yZWFjaHxlbmRpZnxlbmRzd2l0Y2h8ZW5kd2hpbGV8ZW51bXxldmFsfGV4aXR8ZXh0ZW5kc3xmaW5hbHxmaW5hbGx5fGZufGZvcnxmb3JlYWNofGZ1bmN0aW9ufGdsb2JhbHxnb3RvfGlmfGltcGxlbWVudHN8aW5jbHVkZXxpbmNsdWRlX29uY2V8aW5zdGFuY2VvZnxpbnN0ZWFkb2Z8aW50ZXJmYWNlfGlzc2V0fGxpc3R8bWF0Y2h8bmFtZXNwYWNlfG5ldmVyfG5ld3xvcnxwYXJlbnR8cHJpbnR8cHJpdmF0ZXxwcm90ZWN0ZWR8cHVibGljfHJlYWRvbmx5fHJlcXVpcmV8cmVxdWlyZV9vbmNlfHJldHVybnxzZWxmfHN0YXRpY3xzd2l0Y2h8dGhyb3d8dHJhaXR8dHJ5fHVuc2V0fHVzZXx2YXJ8d2hpbGV8eG9yfHlpZWxkfF9faGFsdF9jb21waWxlcilcXGIvaSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICB9XSxcbiAgICAnYXJndW1lbnQtbmFtZSc6IHtcbiAgICAgIHBhdHRlcm46IC8oWygsXVxccyopXFxiW2Etel9dXFx3Kig/PVxccyo6KD8hOikpL2ksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgfSxcbiAgICAnY2xhc3MtbmFtZSc6IFt7XG4gICAgICBwYXR0ZXJuOiAvKFxcYig/OmV4dGVuZHN8aW1wbGVtZW50c3xpbnN0YW5jZW9mfG5ldyg/IVxccytzZWxmfFxccytzdGF0aWMpKVxccyt8XFxiY2F0Y2hcXHMqXFwoKVxcYlthLXpfXVxcdyooPyFcXFxcKVxcYi9pLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgIH0sIHtcbiAgICAgIHBhdHRlcm46IC8oXFx8XFxzKilcXGJbYS16X11cXHcqKD8hXFxcXClcXGIvaSxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICB9LCB7XG4gICAgICBwYXR0ZXJuOiAvXFxiW2Etel9dXFx3Kig/IVxcXFwpXFxiKD89XFxzKlxcfCkvaSxcbiAgICAgIGdyZWVkeTogdHJ1ZVxuICAgIH0sIHtcbiAgICAgIHBhdHRlcm46IC8oXFx8XFxzKikoPzpcXFxcP1xcYlthLXpfXVxcdyopK1xcYi9pLFxuICAgICAgYWxpYXM6ICdjbGFzcy1uYW1lLWZ1bGx5LXF1YWxpZmllZCcsXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdwdW5jdHVhdGlvbic6IC9cXFxcL1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIHBhdHRlcm46IC8oPzpcXFxcP1xcYlthLXpfXVxcdyopK1xcYig/PVxccypcXHwpL2ksXG4gICAgICBhbGlhczogJ2NsYXNzLW5hbWUtZnVsbHktcXVhbGlmaWVkJyxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAncHVuY3R1YXRpb24nOiAvXFxcXC9cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBwYXR0ZXJuOiAvKFxcYig/OmV4dGVuZHN8aW1wbGVtZW50c3xpbnN0YW5jZW9mfG5ldyg/IVxccytzZWxmXFxifFxccytzdGF0aWNcXGIpKVxccyt8XFxiY2F0Y2hcXHMqXFwoKSg/OlxcXFw/XFxiW2Etel9dXFx3KikrXFxiKD8hXFxcXCkvaSxcbiAgICAgIGFsaWFzOiAnY2xhc3MtbmFtZS1mdWxseS1xdWFsaWZpZWQnLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAncHVuY3R1YXRpb24nOiAvXFxcXC9cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBwYXR0ZXJuOiAvXFxiW2Etel9dXFx3Kig/PVxccypcXCQpL2ksXG4gICAgICBhbGlhczogJ3R5cGUtZGVjbGFyYXRpb24nLFxuICAgICAgZ3JlZWR5OiB0cnVlXG4gICAgfSwge1xuICAgICAgcGF0dGVybjogLyg/OlxcXFw/XFxiW2Etel9dXFx3KikrKD89XFxzKlxcJCkvaSxcbiAgICAgIGFsaWFzOiBbJ2NsYXNzLW5hbWUtZnVsbHktcXVhbGlmaWVkJywgJ3R5cGUtZGVjbGFyYXRpb24nXSxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAncHVuY3R1YXRpb24nOiAvXFxcXC9cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBwYXR0ZXJuOiAvXFxiW2Etel9dXFx3Kig/PVxccyo6OikvaSxcbiAgICAgIGFsaWFzOiAnc3RhdGljLWNvbnRleHQnLFxuICAgICAgZ3JlZWR5OiB0cnVlXG4gICAgfSwge1xuICAgICAgcGF0dGVybjogLyg/OlxcXFw/XFxiW2Etel9dXFx3KikrKD89XFxzKjo6KS9pLFxuICAgICAgYWxpYXM6IFsnY2xhc3MtbmFtZS1mdWxseS1xdWFsaWZpZWQnLCAnc3RhdGljLWNvbnRleHQnXSxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAncHVuY3R1YXRpb24nOiAvXFxcXC9cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBwYXR0ZXJuOiAvKFsoLD9dXFxzKilbYS16X11cXHcqKD89XFxzKlxcJCkvaSxcbiAgICAgIGFsaWFzOiAndHlwZS1oaW50JyxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICB9LCB7XG4gICAgICBwYXR0ZXJuOiAvKFsoLD9dXFxzKikoPzpcXFxcP1xcYlthLXpfXVxcdyopKyg/PVxccypcXCQpL2ksXG4gICAgICBhbGlhczogWydjbGFzcy1uYW1lLWZ1bGx5LXF1YWxpZmllZCcsICd0eXBlLWhpbnQnXSxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ3B1bmN0dWF0aW9uJzogL1xcXFwvXG4gICAgICB9XG4gICAgfSwge1xuICAgICAgcGF0dGVybjogLyhcXClcXHMqOlxccyooPzpcXD9cXHMqKT8pXFxiW2Etel9dXFx3Kig/IVxcXFwpXFxiL2ksXG4gICAgICBhbGlhczogJ3JldHVybi10eXBlJyxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICB9LCB7XG4gICAgICBwYXR0ZXJuOiAvKFxcKVxccyo6XFxzKig/OlxcP1xccyopPykoPzpcXFxcP1xcYlthLXpfXVxcdyopK1xcYig/IVxcXFwpL2ksXG4gICAgICBhbGlhczogWydjbGFzcy1uYW1lLWZ1bGx5LXF1YWxpZmllZCcsICdyZXR1cm4tdHlwZSddLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAncHVuY3R1YXRpb24nOiAvXFxcXC9cbiAgICAgIH1cbiAgICB9XSxcbiAgICAnY29uc3RhbnQnOiBjb25zdGFudCxcbiAgICAnZnVuY3Rpb24nOiB7XG4gICAgICBwYXR0ZXJuOiAvKF58W15cXFxcXFx3XSlcXFxcP1thLXpfXSg/OltcXHdcXFxcXSpcXHcpPyg/PVxccypcXCgpL2ksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdwdW5jdHVhdGlvbic6IC9cXFxcL1xuICAgICAgfVxuICAgIH0sXG4gICAgJ3Byb3BlcnR5Jzoge1xuICAgICAgcGF0dGVybjogLygtPlxccyopXFx3Ky8sXG4gICAgICBsb29rYmVoaW5kOiB0cnVlXG4gICAgfSxcbiAgICAnbnVtYmVyJzogbnVtYmVyLFxuICAgICdvcGVyYXRvcic6IG9wZXJhdG9yLFxuICAgICdwdW5jdHVhdGlvbic6IHB1bmN0dWF0aW9uXG4gIH07XG4gIHZhciBzdHJpbmdfaW50ZXJwb2xhdGlvbiA9IHtcbiAgICBwYXR0ZXJuOiAvXFx7XFwkKD86XFx7KD86XFx7W157fV0rXFx9fFtee31dKylcXH18W157fV0pK1xcfXwoXnxbXlxcXFx7XSlcXCQrKD86XFx3Kyg/OlxcW1teXFxyXFxuXFxbXFxdXStcXF18LT5cXHcrKT8pLyxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLnBocFxuICB9O1xuICB2YXIgc3RyaW5nID0gW3tcbiAgICBwYXR0ZXJuOiAvPDw8JyhbXiddKyknW1xcclxcbl0oPzouKltcXHJcXG5dKSo/XFwxOy8sXG4gICAgYWxpYXM6ICdub3dkb2Mtc3RyaW5nJyxcbiAgICBncmVlZHk6IHRydWUsXG4gICAgaW5zaWRlOiB7XG4gICAgICAnZGVsaW1pdGVyJzoge1xuICAgICAgICBwYXR0ZXJuOiAvXjw8PCdbXiddKyd8W2Etel9dXFx3KjskL2ksXG4gICAgICAgIGFsaWFzOiAnc3ltYm9sJyxcbiAgICAgICAgaW5zaWRlOiB7XG4gICAgICAgICAgJ3B1bmN0dWF0aW9uJzogL148PDwnP3xbJztdJC9cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIHBhdHRlcm46IC88PDwoPzpcIihbXlwiXSspXCJbXFxyXFxuXSg/Oi4qW1xcclxcbl0pKj9cXDE7fChbYS16X11cXHcqKVtcXHJcXG5dKD86LipbXFxyXFxuXSkqP1xcMjspL2ksXG4gICAgYWxpYXM6ICdoZXJlZG9jLXN0cmluZycsXG4gICAgZ3JlZWR5OiB0cnVlLFxuICAgIGluc2lkZToge1xuICAgICAgJ2RlbGltaXRlcic6IHtcbiAgICAgICAgcGF0dGVybjogL148PDwoPzpcIlteXCJdK1wifFthLXpfXVxcdyopfFthLXpfXVxcdyo7JC9pLFxuICAgICAgICBhbGlhczogJ3N5bWJvbCcsXG4gICAgICAgIGluc2lkZToge1xuICAgICAgICAgICdwdW5jdHVhdGlvbic6IC9ePDw8XCI/fFtcIjtdJC9cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgICdpbnRlcnBvbGF0aW9uJzogc3RyaW5nX2ludGVycG9sYXRpb25cbiAgICB9XG4gIH0sIHtcbiAgICBwYXR0ZXJuOiAvYCg/OlxcXFxbXFxzXFxTXXxbXlxcXFxgXSkqYC8sXG4gICAgYWxpYXM6ICdiYWNrdGljay1xdW90ZWQtc3RyaW5nJyxcbiAgICBncmVlZHk6IHRydWVcbiAgfSwge1xuICAgIHBhdHRlcm46IC8nKD86XFxcXFtcXHNcXFNdfFteXFxcXCddKSonLyxcbiAgICBhbGlhczogJ3NpbmdsZS1xdW90ZWQtc3RyaW5nJyxcbiAgICBncmVlZHk6IHRydWVcbiAgfSwge1xuICAgIHBhdHRlcm46IC9cIig/OlxcXFxbXFxzXFxTXXxbXlxcXFxcIl0pKlwiLyxcbiAgICBhbGlhczogJ2RvdWJsZS1xdW90ZWQtc3RyaW5nJyxcbiAgICBncmVlZHk6IHRydWUsXG4gICAgaW5zaWRlOiB7XG4gICAgICAnaW50ZXJwb2xhdGlvbic6IHN0cmluZ19pbnRlcnBvbGF0aW9uXG4gICAgfVxuICB9XTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgncGhwJywgJ3ZhcmlhYmxlJywge1xuICAgICdzdHJpbmcnOiBzdHJpbmcsXG4gICAgJ2F0dHJpYnV0ZSc6IHtcbiAgICAgIHBhdHRlcm46IC8jXFxbKD86W15cIidcXC8jXXxcXC8oPyFbKi9dKXxcXC9cXC8uKiR8Iyg/IVxcWykuKiR8XFwvXFwqKD86W14qXXxcXCooPyFcXC8pKSpcXCpcXC98XCIoPzpcXFxcW1xcc1xcU118W15cXFxcXCJdKSpcInwnKD86XFxcXFtcXHNcXFNdfFteXFxcXCddKSonKStcXF0oPz1cXHMqW2EteiQjXSkvaW0sXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ2F0dHJpYnV0ZS1jb250ZW50Jzoge1xuICAgICAgICAgIHBhdHRlcm46IC9eKCNcXFspW1xcc1xcU10rKD89XFxdJCkvLFxuICAgICAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICAgICAgLy8gaW5zaWRlIGNhbiBhcHBlYXIgc3Vic2V0IG9mIHBocFxuICAgICAgICAgIGluc2lkZToge1xuICAgICAgICAgICAgJ2NvbW1lbnQnOiBjb21tZW50LFxuICAgICAgICAgICAgJ3N0cmluZyc6IHN0cmluZyxcbiAgICAgICAgICAgICdhdHRyaWJ1dGUtY2xhc3MtbmFtZSc6IFt7XG4gICAgICAgICAgICAgIHBhdHRlcm46IC8oW146XXxeKVxcYlthLXpfXVxcdyooPyFcXFxcKVxcYi9pLFxuICAgICAgICAgICAgICBhbGlhczogJ2NsYXNzLW5hbWUnLFxuICAgICAgICAgICAgICBncmVlZHk6IHRydWUsXG4gICAgICAgICAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgcGF0dGVybjogLyhbXjpdfF4pKD86XFxcXD9cXGJbYS16X11cXHcqKSsvaSxcbiAgICAgICAgICAgICAgYWxpYXM6IFsnY2xhc3MtbmFtZScsICdjbGFzcy1uYW1lLWZ1bGx5LXF1YWxpZmllZCddLFxuICAgICAgICAgICAgICBncmVlZHk6IHRydWUsXG4gICAgICAgICAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICAgICAgICAgIGluc2lkZToge1xuICAgICAgICAgICAgICAgICdwdW5jdHVhdGlvbic6IC9cXFxcL1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICdjb25zdGFudCc6IGNvbnN0YW50LFxuICAgICAgICAgICAgJ251bWJlcic6IG51bWJlcixcbiAgICAgICAgICAgICdvcGVyYXRvcic6IG9wZXJhdG9yLFxuICAgICAgICAgICAgJ3B1bmN0dWF0aW9uJzogcHVuY3R1YXRpb25cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdkZWxpbWl0ZXInOiB7XG4gICAgICAgICAgcGF0dGVybjogL14jXFxbfFxcXSQvLFxuICAgICAgICAgIGFsaWFzOiAncHVuY3R1YXRpb24nXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICBQcmlzbS5ob29rcy5hZGQoJ2JlZm9yZS10b2tlbml6ZScsIGZ1bmN0aW9uIChlbnYpIHtcbiAgICBpZiAoIS88XFw/Ly50ZXN0KGVudi5jb2RlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcGhwUGF0dGVybiA9IC88XFw/KD86W15cIicvI118XFwvKD8hWyovXSl8KFwifCcpKD86XFxcXFtcXHNcXFNdfCg/IVxcMSlbXlxcXFxdKSpcXDF8KD86XFwvXFwvfCMoPyFcXFspKSg/OlteP1xcblxccl18XFw/KD8hPikpKig/PSR8XFw/PnxbXFxyXFxuXSl8I1xcW3xcXC9cXCooPzpbXipdfFxcKig/IVxcLykpKig/OlxcKlxcL3wkKSkqPyg/OlxcPz58JCkvZztcbiAgICBQcmlzbS5sYW5ndWFnZXNbJ21hcmt1cC10ZW1wbGF0aW5nJ10uYnVpbGRQbGFjZWhvbGRlcnMoZW52LCAncGhwJywgcGhwUGF0dGVybik7XG4gIH0pO1xuICBQcmlzbS5ob29rcy5hZGQoJ2FmdGVyLXRva2VuaXplJywgZnVuY3Rpb24gKGVudikge1xuICAgIFByaXNtLmxhbmd1YWdlc1snbWFya3VwLXRlbXBsYXRpbmcnXS50b2tlbml6ZVBsYWNlaG9sZGVycyhlbnYsICdwaHAnKTtcbiAgfSk7XG59KShQcmlzbSk7XG5QcmlzbS5sYW5ndWFnZXMucHl0aG9uID0ge1xuICAnY29tbWVudCc6IHtcbiAgICBwYXR0ZXJuOiAvKF58W15cXFxcXSkjLiovLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgZ3JlZWR5OiB0cnVlXG4gIH0sXG4gICdzdHJpbmctaW50ZXJwb2xhdGlvbic6IHtcbiAgICBwYXR0ZXJuOiAvKD86ZnxmcnxyZikoPzooXCJcIlwifCcnJylbXFxzXFxTXSo/XFwxfChcInwnKSg/OlxcXFwufCg/IVxcMilbXlxcXFxcXHJcXG5dKSpcXDIpL2ksXG4gICAgZ3JlZWR5OiB0cnVlLFxuICAgIGluc2lkZToge1xuICAgICAgJ2ludGVycG9sYXRpb24nOiB7XG4gICAgICAgIC8vIFwie1wiIDxleHByZXNzaW9uPiA8b3B0aW9uYWwgXCIhc1wiLCBcIiFyXCIsIG9yIFwiIWFcIj4gPG9wdGlvbmFsIFwiOlwiIGZvcm1hdCBzcGVjaWZpZXI+IFwifVwiXG4gICAgICAgIHBhdHRlcm46IC8oKD86XnxbXntdKSg/Olxce1xceykqKVxceyg/IVxceykoPzpbXnt9XXxcXHsoPyFcXHspKD86W157fV18XFx7KD8hXFx7KSg/Oltee31dKStcXH0pK1xcfSkrXFx9LyxcbiAgICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgICAgaW5zaWRlOiB7XG4gICAgICAgICAgJ2Zvcm1hdC1zcGVjJzoge1xuICAgICAgICAgICAgcGF0dGVybjogLyg6KVteOigpe31dKyg/PVxcfSQpLyxcbiAgICAgICAgICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgICdjb252ZXJzaW9uLW9wdGlvbic6IHtcbiAgICAgICAgICAgIHBhdHRlcm46IC8hW3NyYV0oPz1bOn1dJCkvLFxuICAgICAgICAgICAgYWxpYXM6ICdwdW5jdHVhdGlvbidcbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlc3Q6IG51bGxcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgICdzdHJpbmcnOiAvW1xcc1xcU10rL1xuICAgIH1cbiAgfSxcbiAgJ3RyaXBsZS1xdW90ZWQtc3RyaW5nJzoge1xuICAgIHBhdHRlcm46IC8oPzpbcnViXXxicnxyYik/KFwiXCJcInwnJycpW1xcc1xcU10qP1xcMS9pLFxuICAgIGdyZWVkeTogdHJ1ZSxcbiAgICBhbGlhczogJ3N0cmluZydcbiAgfSxcbiAgJ3N0cmluZyc6IHtcbiAgICBwYXR0ZXJuOiAvKD86W3J1Yl18YnJ8cmIpPyhcInwnKSg/OlxcXFwufCg/IVxcMSlbXlxcXFxcXHJcXG5dKSpcXDEvaSxcbiAgICBncmVlZHk6IHRydWVcbiAgfSxcbiAgJ2Z1bmN0aW9uJzoge1xuICAgIHBhdHRlcm46IC8oKD86XnxcXHMpZGVmWyBcXHRdKylbYS16QS1aX11cXHcqKD89XFxzKlxcKCkvZyxcbiAgICBsb29rYmVoaW5kOiB0cnVlXG4gIH0sXG4gICdjbGFzcy1uYW1lJzoge1xuICAgIHBhdHRlcm46IC8oXFxiY2xhc3NcXHMrKVxcdysvaSxcbiAgICBsb29rYmVoaW5kOiB0cnVlXG4gIH0sXG4gICdkZWNvcmF0b3InOiB7XG4gICAgcGF0dGVybjogLyheW1xcdCBdKilAXFx3Kyg/OlxcLlxcdyspKi9tLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgYWxpYXM6IFsnYW5ub3RhdGlvbicsICdwdW5jdHVhdGlvbiddLFxuICAgIGluc2lkZToge1xuICAgICAgJ3B1bmN0dWF0aW9uJzogL1xcLi9cbiAgICB9XG4gIH0sXG4gICdrZXl3b3JkJzogL1xcYig/Ol8oPz1cXHMqOil8YW5kfGFzfGFzc2VydHxhc3luY3xhd2FpdHxicmVha3xjYXNlfGNsYXNzfGNvbnRpbnVlfGRlZnxkZWx8ZWxpZnxlbHNlfGV4Y2VwdHxleGVjfGZpbmFsbHl8Zm9yfGZyb218Z2xvYmFsfGlmfGltcG9ydHxpbnxpc3xsYW1iZGF8bWF0Y2h8bm9ubG9jYWx8bm90fG9yfHBhc3N8cHJpbnR8cmFpc2V8cmV0dXJufHRyeXx3aGlsZXx3aXRofHlpZWxkKVxcYi8sXG4gICdidWlsdGluJzogL1xcYig/Ol9faW1wb3J0X198YWJzfGFsbHxhbnl8YXBwbHl8YXNjaWl8YmFzZXN0cmluZ3xiaW58Ym9vbHxidWZmZXJ8Ynl0ZWFycmF5fGJ5dGVzfGNhbGxhYmxlfGNocnxjbGFzc21ldGhvZHxjbXB8Y29lcmNlfGNvbXBpbGV8Y29tcGxleHxkZWxhdHRyfGRpY3R8ZGlyfGRpdm1vZHxlbnVtZXJhdGV8ZXZhbHxleGVjZmlsZXxmaWxlfGZpbHRlcnxmbG9hdHxmb3JtYXR8ZnJvemVuc2V0fGdldGF0dHJ8Z2xvYmFsc3xoYXNhdHRyfGhhc2h8aGVscHxoZXh8aWR8aW5wdXR8aW50fGludGVybnxpc2luc3RhbmNlfGlzc3ViY2xhc3N8aXRlcnxsZW58bGlzdHxsb2NhbHN8bG9uZ3xtYXB8bWF4fG1lbW9yeXZpZXd8bWlufG5leHR8b2JqZWN0fG9jdHxvcGVufG9yZHxwb3d8cHJvcGVydHl8cmFuZ2V8cmF3X2lucHV0fHJlZHVjZXxyZWxvYWR8cmVwcnxyZXZlcnNlZHxyb3VuZHxzZXR8c2V0YXR0cnxzbGljZXxzb3J0ZWR8c3RhdGljbWV0aG9kfHN0cnxzdW18c3VwZXJ8dHVwbGV8dHlwZXx1bmljaHJ8dW5pY29kZXx2YXJzfHhyYW5nZXx6aXApXFxiLyxcbiAgJ2Jvb2xlYW4nOiAvXFxiKD86RmFsc2V8Tm9uZXxUcnVlKVxcYi8sXG4gICdudW1iZXInOiAvXFxiMCg/OmIoPzpfP1swMV0pK3xvKD86Xz9bMC03XSkrfHgoPzpfP1thLWYwLTldKSspXFxifCg/OlxcYlxcZCsoPzpfXFxkKykqKD86XFwuKD86XFxkKyg/Ol9cXGQrKSopPyk/fFxcQlxcLlxcZCsoPzpfXFxkKykqKSg/OmVbKy1dP1xcZCsoPzpfXFxkKykqKT9qPyg/IVxcdykvaSxcbiAgJ29wZXJhdG9yJzogL1stKyU9XT0/fCE9fDo9fFxcKlxcKj89P3xcXC9cXC8/PT98PFs8PT5dP3w+Wz0+XT98WyZ8Xn5dLyxcbiAgJ3B1bmN0dWF0aW9uJzogL1t7fVtcXF07KCksLjpdL1xufTtcblByaXNtLmxhbmd1YWdlcy5weXRob25bJ3N0cmluZy1pbnRlcnBvbGF0aW9uJ10uaW5zaWRlWydpbnRlcnBvbGF0aW9uJ10uaW5zaWRlLnJlc3QgPSBQcmlzbS5sYW5ndWFnZXMucHl0aG9uO1xuUHJpc20ubGFuZ3VhZ2VzLnB5ID0gUHJpc20ubGFuZ3VhZ2VzLnB5dGhvbjtcblByaXNtLmxhbmd1YWdlcy5yID0ge1xuICAnY29tbWVudCc6IC8jLiovLFxuICAnc3RyaW5nJzoge1xuICAgIHBhdHRlcm46IC8oWydcIl0pKD86XFxcXC58KD8hXFwxKVteXFxcXFxcclxcbl0pKlxcMS8sXG4gICAgZ3JlZWR5OiB0cnVlXG4gIH0sXG4gICdwZXJjZW50LW9wZXJhdG9yJzoge1xuICAgIC8vIEluY2x1ZGVzIHVzZXItZGVmaW5lZCBvcGVyYXRvcnNcbiAgICAvLyBhbmQgJSUsICUqJSwgJS8lLCAlaW4lLCAlbyUsICV4JVxuICAgIHBhdHRlcm46IC8lW14lXFxzXSolLyxcbiAgICBhbGlhczogJ29wZXJhdG9yJ1xuICB9LFxuICAnYm9vbGVhbic6IC9cXGIoPzpGQUxTRXxUUlVFKVxcYi8sXG4gICdlbGxpcHNpcyc6IC9cXC5cXC4oPzpcXC58XFxkKykvLFxuICAnbnVtYmVyJzogWy9cXGIoPzpJbmZ8TmFOKVxcYi8sIC8oPzpcXGIweFtcXGRBLUZhLWZdKyg/OlxcLlxcZCopP3xcXGJcXGQrKD86XFwuXFxkKik/fFxcQlxcLlxcZCspKD86W0VlUHBdWystXT9cXGQrKT9baUxdPy9dLFxuICAna2V5d29yZCc6IC9cXGIoPzpOQXxOQV9jaGFyYWN0ZXJffE5BX2NvbXBsZXhffE5BX2ludGVnZXJffE5BX3JlYWxffE5VTEx8YnJlYWt8ZWxzZXxmb3J8ZnVuY3Rpb258aWZ8aW58bmV4dHxyZXBlYXR8d2hpbGUpXFxiLyxcbiAgJ29wZXJhdG9yJzogLy0+Pz4/fDwoPzo9fDw/LSk/fFs+PSFdPT98Ojo/fCYmP3xcXHxcXHw/fFsrKlxcL14kQH5dLyxcbiAgJ3B1bmN0dWF0aW9uJzogL1soKXt9XFxbXFxdLDtdL1xufTtcblxuLyoqXG4gKiBPcmlnaW5hbCBieSBTYW11ZWwgRmxvcmVzXG4gKlxuICogQWRkcyB0aGUgZm9sbG93aW5nIG5ldyB0b2tlbiBjbGFzc2VzOlxuICogICAgIGNvbnN0YW50LCBidWlsdGluLCB2YXJpYWJsZSwgc3ltYm9sLCByZWdleFxuICovXG4oZnVuY3Rpb24gKFByaXNtKSB7XG4gIFByaXNtLmxhbmd1YWdlcy5ydWJ5ID0gUHJpc20ubGFuZ3VhZ2VzLmV4dGVuZCgnY2xpa2UnLCB7XG4gICAgJ2NvbW1lbnQnOiB7XG4gICAgICBwYXR0ZXJuOiAvIy4qfF49YmVnaW5cXHNbXFxzXFxTXSo/Xj1lbmQvbSxcbiAgICAgIGdyZWVkeTogdHJ1ZVxuICAgIH0sXG4gICAgJ2NsYXNzLW5hbWUnOiB7XG4gICAgICBwYXR0ZXJuOiAvKFxcYig/OmNsYXNzfG1vZHVsZSlcXHMrfFxcYmNhdGNoXFxzK1xcKClbXFx3LlxcXFxdK3xcXGJbQS1aX11cXHcqKD89XFxzKlxcLlxccypuZXdcXGIpLyxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ3B1bmN0dWF0aW9uJzogL1suXFxcXF0vXG4gICAgICB9XG4gICAgfSxcbiAgICAna2V5d29yZCc6IC9cXGIoPzpCRUdJTnxFTkR8YWxpYXN8YW5kfGJlZ2lufGJyZWFrfGNhc2V8Y2xhc3N8ZGVmfGRlZmluZV9tZXRob2R8ZGVmaW5lZHxkb3xlYWNofGVsc2V8ZWxzaWZ8ZW5kfGVuc3VyZXxleHRlbmR8Zm9yfGlmfGlufGluY2x1ZGV8bW9kdWxlfG5ld3xuZXh0fG5pbHxub3R8b3J8cHJlcGVuZHxwcml2YXRlfHByb3RlY3RlZHxwdWJsaWN8cmFpc2V8cmVkb3xyZXF1aXJlfHJlc2N1ZXxyZXRyeXxyZXR1cm58c2VsZnxzdXBlcnx0aGVufHRocm93fHVuZGVmfHVubGVzc3x1bnRpbHx3aGVufHdoaWxlfHlpZWxkKVxcYi8sXG4gICAgJ29wZXJhdG9yJzogL1xcLnsyLDN9fCZcXC58PT09fDw/PT58WyE9XT9+fCg/OiYmfFxcfFxcfHw8PHw+PnxcXCpcXCp8WytcXC0qLyU8PiFeJnw9XSk9P3xbPzpdLyxcbiAgICAncHVuY3R1YXRpb24nOiAvWygpe31bXFxdLiw7XS9cbiAgfSk7XG4gIFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ3J1YnknLCAnb3BlcmF0b3InLCB7XG4gICAgJ2RvdWJsZS1jb2xvbic6IHtcbiAgICAgIHBhdHRlcm46IC86Oi8sXG4gICAgICBhbGlhczogJ3B1bmN0dWF0aW9uJ1xuICAgIH1cbiAgfSk7XG4gIHZhciBpbnRlcnBvbGF0aW9uID0ge1xuICAgIHBhdHRlcm46IC8oKD86XnxbXlxcXFxdKSg/OlxcXFx7Mn0pKikjXFx7KD86W157fV18XFx7W157fV0qXFx9KSpcXH0vLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgaW5zaWRlOiB7XG4gICAgICAnY29udGVudCc6IHtcbiAgICAgICAgcGF0dGVybjogL14oI1xceylbXFxzXFxTXSsoPz1cXH0kKS8sXG4gICAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICAgIGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLnJ1YnlcbiAgICAgIH0sXG4gICAgICAnZGVsaW1pdGVyJzoge1xuICAgICAgICBwYXR0ZXJuOiAvXiNcXHt8XFx9JC8sXG4gICAgICAgIGFsaWFzOiAncHVuY3R1YXRpb24nXG4gICAgICB9XG4gICAgfVxuICB9O1xuICBkZWxldGUgUHJpc20ubGFuZ3VhZ2VzLnJ1YnkuZnVuY3Rpb247XG4gIHZhciBwZXJjZW50RXhwcmVzc2lvbiA9ICcoPzonICsgWy8oW15hLXpBLVowLTlcXHN7KFxcWzw9XSkoPzooPyFcXDEpW15cXFxcXXxcXFxcW1xcc1xcU10pKlxcMS8uc291cmNlLCAvXFwoKD86W14oKVxcXFxdfFxcXFxbXFxzXFxTXXxcXCgoPzpbXigpXFxcXF18XFxcXFtcXHNcXFNdKSpcXCkpKlxcKS8uc291cmNlLCAvXFx7KD86W157fVxcXFxdfFxcXFxbXFxzXFxTXXxcXHsoPzpbXnt9XFxcXF18XFxcXFtcXHNcXFNdKSpcXH0pKlxcfS8uc291cmNlLCAvXFxbKD86W15cXFtcXF1cXFxcXXxcXFxcW1xcc1xcU118XFxbKD86W15cXFtcXF1cXFxcXXxcXFxcW1xcc1xcU10pKlxcXSkqXFxdLy5zb3VyY2UsIC88KD86W148PlxcXFxdfFxcXFxbXFxzXFxTXXw8KD86W148PlxcXFxdfFxcXFxbXFxzXFxTXSkqPikqPi8uc291cmNlXS5qb2luKCd8JykgKyAnKSc7XG4gIHZhciBzeW1ib2xOYW1lID0gLyg/OlwiKD86XFxcXC58W15cIlxcXFxcXHJcXG5dKSpcInwoPzpcXGJbYS16QS1aX11cXHcqfFteXFxzXFwwLVxceDdGXSspWz8hXT98XFwkLikvLnNvdXJjZTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgncnVieScsICdrZXl3b3JkJywge1xuICAgICdyZWdleC1saXRlcmFsJzogW3tcbiAgICAgIHBhdHRlcm46IFJlZ0V4cCgvJXIvLnNvdXJjZSArIHBlcmNlbnRFeHByZXNzaW9uICsgL1tlZ2ltbm9zdXhdezAsNn0vLnNvdXJjZSksXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ2ludGVycG9sYXRpb24nOiBpbnRlcnBvbGF0aW9uLFxuICAgICAgICAncmVnZXgnOiAvW1xcc1xcU10rL1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIHBhdHRlcm46IC8oXnxbXi9dKVxcLyg/IVxcLykoPzpcXFtbXlxcclxcblxcXV0rXFxdfFxcXFwufFteWy9cXFxcXFxyXFxuXSkrXFwvW2VnaW1ub3N1eF17MCw2fSg/PVxccyooPzokfFtcXHJcXG4sLjt9KSNdKSkvLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAnaW50ZXJwb2xhdGlvbic6IGludGVycG9sYXRpb24sXG4gICAgICAgICdyZWdleCc6IC9bXFxzXFxTXSsvXG4gICAgICB9XG4gICAgfV0sXG4gICAgJ3ZhcmlhYmxlJzogL1tAJF0rW2EtekEtWl9dXFx3Kig/Ols/IV18XFxiKS8sXG4gICAgJ3N5bWJvbCc6IFt7XG4gICAgICBwYXR0ZXJuOiBSZWdFeHAoLyhefFteOl0pOi8uc291cmNlICsgc3ltYm9sTmFtZSksXG4gICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgZ3JlZWR5OiB0cnVlXG4gICAgfSwge1xuICAgICAgcGF0dGVybjogUmVnRXhwKC8oW1xcclxcbnsoLF1bIFxcdF0qKS8uc291cmNlICsgc3ltYm9sTmFtZSArIC8oPz06KD8hOikpLy5zb3VyY2UpLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGdyZWVkeTogdHJ1ZVxuICAgIH1dLFxuICAgICdtZXRob2QtZGVmaW5pdGlvbic6IHtcbiAgICAgIHBhdHRlcm46IC8oXFxiZGVmXFxzKylcXHcrKD86XFxzKlxcLlxccypcXHcrKT8vLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAnZnVuY3Rpb24nOiAvXFxiXFx3KyQvLFxuICAgICAgICAna2V5d29yZCc6IC9ec2VsZlxcYi8sXG4gICAgICAgICdjbGFzcy1uYW1lJzogL15cXHcrLyxcbiAgICAgICAgJ3B1bmN0dWF0aW9uJzogL1xcLi9cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICBQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdydWJ5JywgJ3N0cmluZycsIHtcbiAgICAnc3RyaW5nLWxpdGVyYWwnOiBbe1xuICAgICAgcGF0dGVybjogUmVnRXhwKC8lW3FRaUl3V3NdPy8uc291cmNlICsgcGVyY2VudEV4cHJlc3Npb24pLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdpbnRlcnBvbGF0aW9uJzogaW50ZXJwb2xhdGlvbixcbiAgICAgICAgJ3N0cmluZyc6IC9bXFxzXFxTXSsvXG4gICAgICB9XG4gICAgfSwge1xuICAgICAgcGF0dGVybjogLyhcInwnKSg/OiNcXHtbXn1dK1xcfXwjKD8hXFx7KXxcXFxcKD86XFxyXFxufFtcXHNcXFNdKXwoPyFcXDEpW15cXFxcI1xcclxcbl0pKlxcMS8sXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ2ludGVycG9sYXRpb24nOiBpbnRlcnBvbGF0aW9uLFxuICAgICAgICAnc3RyaW5nJzogL1tcXHNcXFNdKy9cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBwYXR0ZXJuOiAvPDxbLX5dPyhbYS16X11cXHcqKVtcXHJcXG5dKD86LipbXFxyXFxuXSkqP1tcXHQgXSpcXDEvaSxcbiAgICAgIGFsaWFzOiAnaGVyZWRvYy1zdHJpbmcnLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdkZWxpbWl0ZXInOiB7XG4gICAgICAgICAgcGF0dGVybjogL148PFstfl0/W2Etel9dXFx3KnxcXGJbYS16X11cXHcqJC9pLFxuICAgICAgICAgIGluc2lkZToge1xuICAgICAgICAgICAgJ3N5bWJvbCc6IC9cXGJcXHcrLyxcbiAgICAgICAgICAgICdwdW5jdHVhdGlvbic6IC9ePDxbLX5dPy9cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdpbnRlcnBvbGF0aW9uJzogaW50ZXJwb2xhdGlvbixcbiAgICAgICAgJ3N0cmluZyc6IC9bXFxzXFxTXSsvXG4gICAgICB9XG4gICAgfSwge1xuICAgICAgcGF0dGVybjogLzw8Wy1+XT8nKFthLXpfXVxcdyopJ1tcXHJcXG5dKD86LipbXFxyXFxuXSkqP1tcXHQgXSpcXDEvaSxcbiAgICAgIGFsaWFzOiAnaGVyZWRvYy1zdHJpbmcnLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdkZWxpbWl0ZXInOiB7XG4gICAgICAgICAgcGF0dGVybjogL148PFstfl0/J1thLXpfXVxcdyonfFxcYlthLXpfXVxcdyokL2ksXG4gICAgICAgICAgaW5zaWRlOiB7XG4gICAgICAgICAgICAnc3ltYm9sJzogL1xcYlxcdysvLFxuICAgICAgICAgICAgJ3B1bmN0dWF0aW9uJzogL148PFstfl0/J3wnJC9cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdzdHJpbmcnOiAvW1xcc1xcU10rL1xuICAgICAgfVxuICAgIH1dLFxuICAgICdjb21tYW5kLWxpdGVyYWwnOiBbe1xuICAgICAgcGF0dGVybjogUmVnRXhwKC8leC8uc291cmNlICsgcGVyY2VudEV4cHJlc3Npb24pLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdpbnRlcnBvbGF0aW9uJzogaW50ZXJwb2xhdGlvbixcbiAgICAgICAgJ2NvbW1hbmQnOiB7XG4gICAgICAgICAgcGF0dGVybjogL1tcXHNcXFNdKy8sXG4gICAgICAgICAgYWxpYXM6ICdzdHJpbmcnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBwYXR0ZXJuOiAvYCg/OiNcXHtbXn1dK1xcfXwjKD8hXFx7KXxcXFxcKD86XFxyXFxufFtcXHNcXFNdKXxbXlxcXFxgI1xcclxcbl0pKmAvLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdpbnRlcnBvbGF0aW9uJzogaW50ZXJwb2xhdGlvbixcbiAgICAgICAgJ2NvbW1hbmQnOiB7XG4gICAgICAgICAgcGF0dGVybjogL1tcXHNcXFNdKy8sXG4gICAgICAgICAgYWxpYXM6ICdzdHJpbmcnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XVxuICB9KTtcbiAgZGVsZXRlIFByaXNtLmxhbmd1YWdlcy5ydWJ5LnN0cmluZztcbiAgUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgncnVieScsICdudW1iZXInLCB7XG4gICAgJ2J1aWx0aW4nOiAvXFxiKD86QXJyYXl8QmlnbnVtfEJpbmRpbmd8Q2xhc3N8Q29udGludWF0aW9ufERpcnxFeGNlcHRpb258RmFsc2VDbGFzc3xGaWxlfEZpeG51bXxGbG9hdHxIYXNofElPfEludGVnZXJ8TWF0Y2hEYXRhfE1ldGhvZHxNb2R1bGV8TmlsQ2xhc3N8TnVtZXJpY3xPYmplY3R8UHJvY3xSYW5nZXxSZWdleHB8U3RhdHxTdHJpbmd8U3RydWN0fFN5bWJvbHxUTVN8VGhyZWFkfFRocmVhZEdyb3VwfFRpbWV8VHJ1ZUNsYXNzKVxcYi8sXG4gICAgJ2NvbnN0YW50JzogL1xcYltBLVpdW0EtWjAtOV9dKig/Ols/IV18XFxiKS9cbiAgfSk7XG4gIFByaXNtLmxhbmd1YWdlcy5yYiA9IFByaXNtLmxhbmd1YWdlcy5ydWJ5O1xufSkoUHJpc20pO1xuKGZ1bmN0aW9uIChQcmlzbSkge1xuICB2YXIgbXVsdGlsaW5lQ29tbWVudCA9IC9cXC9cXCooPzpbXiovXXxcXCooPyFcXC8pfFxcLyg/IVxcKil8PHNlbGY+KSpcXCpcXC8vLnNvdXJjZTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCAyOyBpKyspIHtcbiAgICAvLyBzdXBwb3J0IDQgbGV2ZWxzIG9mIG5lc3RlZCBjb21tZW50c1xuICAgIG11bHRpbGluZUNvbW1lbnQgPSBtdWx0aWxpbmVDb21tZW50LnJlcGxhY2UoLzxzZWxmPi9nLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gbXVsdGlsaW5lQ29tbWVudDtcbiAgICB9KTtcbiAgfVxuICBtdWx0aWxpbmVDb21tZW50ID0gbXVsdGlsaW5lQ29tbWVudC5yZXBsYWNlKC88c2VsZj4vZywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAvW15cXHNcXFNdLy5zb3VyY2U7XG4gIH0pO1xuICBQcmlzbS5sYW5ndWFnZXMucnVzdCA9IHtcbiAgICAnY29tbWVudCc6IFt7XG4gICAgICBwYXR0ZXJuOiBSZWdFeHAoLyhefFteXFxcXF0pLy5zb3VyY2UgKyBtdWx0aWxpbmVDb21tZW50KSxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBncmVlZHk6IHRydWVcbiAgICB9LCB7XG4gICAgICBwYXR0ZXJuOiAvKF58W15cXFxcOl0pXFwvXFwvLiovLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGdyZWVkeTogdHJ1ZVxuICAgIH1dLFxuICAgICdzdHJpbmcnOiB7XG4gICAgICBwYXR0ZXJuOiAvYj9cIig/OlxcXFxbXFxzXFxTXXxbXlxcXFxcIl0pKlwifGI/cigjKilcIig/OlteXCJdfFwiKD8hXFwxKSkqXCJcXDEvLFxuICAgICAgZ3JlZWR5OiB0cnVlXG4gICAgfSxcbiAgICAnY2hhcic6IHtcbiAgICAgIHBhdHRlcm46IC9iPycoPzpcXFxcKD86eFswLTddW1xcZGEtZkEtRl18dVxceyg/OltcXGRhLWZBLUZdXyopezEsNn1cXH18Lil8W15cXFxcXFxyXFxuXFx0J10pJy8sXG4gICAgICBncmVlZHk6IHRydWVcbiAgICB9LFxuICAgICdhdHRyaWJ1dGUnOiB7XG4gICAgICBwYXR0ZXJuOiAvIyE/XFxbKD86W15cXFtcXF1cIl18XCIoPzpcXFxcW1xcc1xcU118W15cXFxcXCJdKSpcIikqXFxdLyxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGFsaWFzOiAnYXR0ci1uYW1lJyxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAnc3RyaW5nJzogbnVsbCAvLyBzZWUgYmVsb3dcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIENsb3N1cmUgcGFyYW1zIHNob3VsZCBub3QgYmUgY29uZnVzZWQgd2l0aCBiaXR3aXNlIE9SIHxcbiAgICAnY2xvc3VyZS1wYXJhbXMnOiB7XG4gICAgICBwYXR0ZXJuOiAvKFs9KCw6XVxccyp8XFxibW92ZVxccyopXFx8W158XSpcXHx8XFx8W158XSpcXHwoPz1cXHMqKD86XFx7fC0+KSkvLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAnY2xvc3VyZS1wdW5jdHVhdGlvbic6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvXlxcfHxcXHwkLyxcbiAgICAgICAgICBhbGlhczogJ3B1bmN0dWF0aW9uJ1xuICAgICAgICB9LFxuICAgICAgICByZXN0OiBudWxsIC8vIHNlZSBiZWxvd1xuICAgICAgfVxuICAgIH0sXG4gICAgJ2xpZmV0aW1lLWFubm90YXRpb24nOiB7XG4gICAgICBwYXR0ZXJuOiAvJ1xcdysvLFxuICAgICAgYWxpYXM6ICdzeW1ib2wnXG4gICAgfSxcbiAgICAnZnJhZ21lbnQtc3BlY2lmaWVyJzoge1xuICAgICAgcGF0dGVybjogLyhcXCRcXHcrOilbYS16XSsvLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGFsaWFzOiAncHVuY3R1YXRpb24nXG4gICAgfSxcbiAgICAndmFyaWFibGUnOiAvXFwkXFx3Ky8sXG4gICAgJ2Z1bmN0aW9uLWRlZmluaXRpb24nOiB7XG4gICAgICBwYXR0ZXJuOiAvKFxcYmZuXFxzKylcXHcrLyxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBhbGlhczogJ2Z1bmN0aW9uJ1xuICAgIH0sXG4gICAgJ3R5cGUtZGVmaW5pdGlvbic6IHtcbiAgICAgIHBhdHRlcm46IC8oXFxiKD86ZW51bXxzdHJ1Y3R8dHJhaXR8dHlwZXx1bmlvbilcXHMrKVxcdysvLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGFsaWFzOiAnY2xhc3MtbmFtZSdcbiAgICB9LFxuICAgICdtb2R1bGUtZGVjbGFyYXRpb24nOiBbe1xuICAgICAgcGF0dGVybjogLyhcXGIoPzpjcmF0ZXxtb2QpXFxzKylbYS16XVthLXpfXFxkXSovLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGFsaWFzOiAnbmFtZXNwYWNlJ1xuICAgIH0sIHtcbiAgICAgIHBhdHRlcm46IC8oXFxiKD86Y3JhdGV8c2VsZnxzdXBlcilcXHMqKTo6XFxzKlthLXpdW2Etel9cXGRdKlxcYig/Olxccyo6Oig/OlxccypbYS16XVthLXpfXFxkXSpcXHMqOjopKik/LyxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBhbGlhczogJ25hbWVzcGFjZScsXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ3B1bmN0dWF0aW9uJzogLzo6L1xuICAgICAgfVxuICAgIH1dLFxuICAgICdrZXl3b3JkJzogW1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ydXN0LWxhbmcvcmVmZXJlbmNlL2Jsb2IvbWFzdGVyL3NyYy9rZXl3b3Jkcy5tZFxuICAgIC9cXGIoPzpTZWxmfGFic3RyYWN0fGFzfGFzeW5jfGF3YWl0fGJlY29tZXxib3h8YnJlYWt8Y29uc3R8Y29udGludWV8Y3JhdGV8ZG98ZHlufGVsc2V8ZW51bXxleHRlcm58ZmluYWx8Zm58Zm9yfGlmfGltcGx8aW58bGV0fGxvb3B8bWFjcm98bWF0Y2h8bW9kfG1vdmV8bXV0fG92ZXJyaWRlfHByaXZ8cHVifHJlZnxyZXR1cm58c2VsZnxzdGF0aWN8c3RydWN0fHN1cGVyfHRyYWl0fHRyeXx0eXBlfHR5cGVvZnx1bmlvbnx1bnNhZmV8dW5zaXplZHx1c2V8dmlydHVhbHx3aGVyZXx3aGlsZXx5aWVsZClcXGIvLFxuICAgIC8vIHByaW1pdGl2ZXMgYW5kIHN0clxuICAgIC8vIGh0dHBzOi8vZG9jLnJ1c3QtbGFuZy5vcmcvc3RhYmxlL3J1c3QtYnktZXhhbXBsZS9wcmltaXRpdmVzLmh0bWxcbiAgICAvXFxiKD86Ym9vbHxjaGFyfGYoPzozMnw2NCl8W3VpXSg/Ojh8MTZ8MzJ8NjR8MTI4fHNpemUpfHN0cilcXGIvXSxcbiAgICAvLyBmdW5jdGlvbnMgY2FuIHRlY2huaWNhbGx5IHN0YXJ0IHdpdGggYW4gdXBwZXItY2FzZSBsZXR0ZXIsIGJ1dCB0aGlzIHdpbGwgaW50cm9kdWNlIGEgbG90IG9mIGZhbHNlIHBvc2l0aXZlc1xuICAgIC8vIGFuZCBSdXN0J3MgbmFtaW5nIGNvbnZlbnRpb25zIHJlY29tbWVuZCBzbmFrZV9jYXNlIGFueXdheS5cbiAgICAvLyBodHRwczovL2RvYy5ydXN0LWxhbmcub3JnLzEuMC4wL3N0eWxlL3N0eWxlL25hbWluZy9SRUFETUUuaHRtbFxuICAgICdmdW5jdGlvbic6IC9cXGJbYS16X11cXHcqKD89XFxzKig/Ojo6XFxzKjx8XFwoKSkvLFxuICAgICdtYWNybyc6IHtcbiAgICAgIHBhdHRlcm46IC9cXGJcXHcrIS8sXG4gICAgICBhbGlhczogJ3Byb3BlcnR5J1xuICAgIH0sXG4gICAgJ2NvbnN0YW50JzogL1xcYltBLVpfXVtBLVpfXFxkXStcXGIvLFxuICAgICdjbGFzcy1uYW1lJzogL1xcYltBLVpdXFx3KlxcYi8sXG4gICAgJ25hbWVzcGFjZSc6IHtcbiAgICAgIHBhdHRlcm46IC8oPzpcXGJbYS16XVthLXpfXFxkXSpcXHMqOjpcXHMqKSpcXGJbYS16XVthLXpfXFxkXSpcXHMqOjooPyFcXHMqPCkvLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdwdW5jdHVhdGlvbic6IC86Oi9cbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIEhleCwgb2N0LCBiaW4sIGRlYyBudW1iZXJzIHdpdGggdmlzdWFsIHNlcGFyYXRvcnMgYW5kIHR5cGUgc3VmZml4XG4gICAgJ251bWJlcic6IC9cXGIoPzoweFtcXGRBLUZhLWZdKD86Xz9bXFxkQS1GYS1mXSkqfDBvWzAtN10oPzpfP1swLTddKSp8MGJbMDFdKD86Xz9bMDFdKSp8KD86KD86XFxkKD86Xz9cXGQpKik/XFwuKT9cXGQoPzpfP1xcZCkqKD86W0VlXVsrLV0/XFxkKyk/KSg/Ol8/KD86ZjMyfGY2NHxbaXVdKD86OHwxNnwzMnw2NHxzaXplKT8pKT9cXGIvLFxuICAgICdib29sZWFuJzogL1xcYig/OmZhbHNlfHRydWUpXFxiLyxcbiAgICAncHVuY3R1YXRpb24nOiAvLT58XFwuXFwuPXxcXC57MSwzfXw6Onxbe31bXFxdOygpLDpdLyxcbiAgICAnb3BlcmF0b3InOiAvWy0rKlxcLyUhXl09P3w9Wz0+XT98JlsmPV0/fFxcfFt8PV0/fDw8Pz0/fD4+Pz0/fFtAP10vXG4gIH07XG4gIFByaXNtLmxhbmd1YWdlcy5ydXN0WydjbG9zdXJlLXBhcmFtcyddLmluc2lkZS5yZXN0ID0gUHJpc20ubGFuZ3VhZ2VzLnJ1c3Q7XG4gIFByaXNtLmxhbmd1YWdlcy5ydXN0WydhdHRyaWJ1dGUnXS5pbnNpZGVbJ3N0cmluZyddID0gUHJpc20ubGFuZ3VhZ2VzLnJ1c3RbJ3N0cmluZyddO1xufSkoUHJpc20pO1xuKGZ1bmN0aW9uIChQcmlzbSkge1xuICBQcmlzbS5sYW5ndWFnZXMuc2FzcyA9IFByaXNtLmxhbmd1YWdlcy5leHRlbmQoJ2NzcycsIHtcbiAgICAvLyBTYXNzIGNvbW1lbnRzIGRvbid0IG5lZWQgdG8gYmUgY2xvc2VkLCBvbmx5IGluZGVudGVkXG4gICAgJ2NvbW1lbnQnOiB7XG4gICAgICBwYXR0ZXJuOiAvXihbIFxcdF0qKVxcL1tcXC8qXS4qKD86KD86XFxyP1xcbnxcXHIpXFwxWyBcXHRdLispKi9tLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGdyZWVkeTogdHJ1ZVxuICAgIH1cbiAgfSk7XG4gIFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ3Nhc3MnLCAnYXRydWxlJywge1xuICAgIC8vIFdlIHdhbnQgdG8gY29uc3VtZSB0aGUgd2hvbGUgbGluZVxuICAgICdhdHJ1bGUtbGluZSc6IHtcbiAgICAgIC8vIEluY2x1ZGVzIHN1cHBvcnQgZm9yID0gYW5kICsgc2hvcnRjdXRzXG4gICAgICBwYXR0ZXJuOiAvXig/OlsgXFx0XSopW0ArPV0uKy9tLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdhdHJ1bGUnOiAvKD86QFtcXHctXSt8Wys9XSkvXG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgZGVsZXRlIFByaXNtLmxhbmd1YWdlcy5zYXNzLmF0cnVsZTtcbiAgdmFyIHZhcmlhYmxlID0gL1xcJFstXFx3XSt8I1xce1xcJFstXFx3XStcXH0vO1xuICB2YXIgb3BlcmF0b3IgPSBbL1srKlxcLyVdfFs9IV09fDw9P3w+PT98XFxiKD86YW5kfG5vdHxvcilcXGIvLCB7XG4gICAgcGF0dGVybjogLyhcXHMpLSg/PVxccykvLFxuICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgfV07XG4gIFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ3Nhc3MnLCAncHJvcGVydHknLCB7XG4gICAgLy8gV2Ugd2FudCB0byBjb25zdW1lIHRoZSB3aG9sZSBsaW5lXG4gICAgJ3ZhcmlhYmxlLWxpbmUnOiB7XG4gICAgICBwYXR0ZXJuOiAvXlsgXFx0XSpcXCQuKy9tLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdwdW5jdHVhdGlvbic6IC86LyxcbiAgICAgICAgJ3ZhcmlhYmxlJzogdmFyaWFibGUsXG4gICAgICAgICdvcGVyYXRvcic6IG9wZXJhdG9yXG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBXZSB3YW50IHRvIGNvbnN1bWUgdGhlIHdob2xlIGxpbmVcbiAgICAncHJvcGVydHktbGluZSc6IHtcbiAgICAgIHBhdHRlcm46IC9eWyBcXHRdKig/OlteOlxcc10rICo6Lip8OlteOlxcc10uKikvbSxcbiAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgIGluc2lkZToge1xuICAgICAgICAncHJvcGVydHknOiBbL1teOlxcc10rKD89XFxzKjopLywge1xuICAgICAgICAgIHBhdHRlcm46IC8oOilbXjpcXHNdKy8sXG4gICAgICAgICAgbG9va2JlaGluZDogdHJ1ZVxuICAgICAgICB9XSxcbiAgICAgICAgJ3B1bmN0dWF0aW9uJzogLzovLFxuICAgICAgICAndmFyaWFibGUnOiB2YXJpYWJsZSxcbiAgICAgICAgJ29wZXJhdG9yJzogb3BlcmF0b3IsXG4gICAgICAgICdpbXBvcnRhbnQnOiBQcmlzbS5sYW5ndWFnZXMuc2Fzcy5pbXBvcnRhbnRcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICBkZWxldGUgUHJpc20ubGFuZ3VhZ2VzLnNhc3MucHJvcGVydHk7XG4gIGRlbGV0ZSBQcmlzbS5sYW5ndWFnZXMuc2Fzcy5pbXBvcnRhbnQ7XG5cbiAgLy8gTm93IHRoYXQgd2hvbGUgbGluZXMgZm9yIG90aGVyIHBhdHRlcm5zIGFyZSBjb25zdW1lZCxcbiAgLy8gd2hhdCdzIGxlZnQgc2hvdWxkIGJlIHNlbGVjdG9yc1xuICBQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdzYXNzJywgJ3B1bmN0dWF0aW9uJywge1xuICAgICdzZWxlY3Rvcic6IHtcbiAgICAgIHBhdHRlcm46IC9eKFsgXFx0XSopXFxTKD86LFteLFxcclxcbl0rfFteLFxcclxcbl0qKSg/OixbXixcXHJcXG5dKykqKD86LCg/Olxccj9cXG58XFxyKVxcMVsgXFx0XStcXFMoPzosW14sXFxyXFxuXSt8W14sXFxyXFxuXSopKD86LFteLFxcclxcbl0rKSopKi9tLFxuICAgICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICAgIGdyZWVkeTogdHJ1ZVxuICAgIH1cbiAgfSk7XG59KShQcmlzbSk7XG5QcmlzbS5sYW5ndWFnZXMuc2NzcyA9IFByaXNtLmxhbmd1YWdlcy5leHRlbmQoJ2NzcycsIHtcbiAgJ2NvbW1lbnQnOiB7XG4gICAgcGF0dGVybjogLyhefFteXFxcXF0pKD86XFwvXFwqW1xcc1xcU10qP1xcKlxcL3xcXC9cXC8uKikvLFxuICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgfSxcbiAgJ2F0cnVsZSc6IHtcbiAgICBwYXR0ZXJuOiAvQFtcXHctXSg/OlxcKFteKCldK1xcKXxbXigpXFxzXXxcXHMrKD8hXFxzKSkqPyg/PVxccytbeztdKS8sXG4gICAgaW5zaWRlOiB7XG4gICAgICAncnVsZSc6IC9AW1xcdy1dKy9cbiAgICAgIC8vIFNlZSByZXN0IGJlbG93XG4gICAgfVxuICB9LFxuICAvLyB1cmwsIGNvbXBhc3NpZmllZFxuICAndXJsJzogLyg/OlstYS16XSstKT91cmwoPz1cXCgpL2ksXG4gIC8vIENTUyBzZWxlY3RvciByZWdleCBpcyBub3QgYXBwcm9wcmlhdGUgZm9yIFNhc3NcbiAgLy8gc2luY2UgdGhlcmUgY2FuIGJlIGxvdCBtb3JlIHRoaW5ncyAodmFyLCBAIGRpcmVjdGl2ZSwgbmVzdGluZy4uKVxuICAvLyBhIHNlbGVjdG9yIG11c3Qgc3RhcnQgYXQgdGhlIGVuZCBvZiBhIHByb3BlcnR5IG9yIGFmdGVyIGEgYnJhY2UgKGVuZCBvZiBvdGhlciBydWxlcyBvciBuZXN0aW5nKVxuICAvLyBpdCBjYW4gY29udGFpbiBzb21lIGNoYXJhY3RlcnMgdGhhdCBhcmVuJ3QgdXNlZCBmb3IgZGVmaW5pbmcgcnVsZXMgb3IgZW5kIG9mIHNlbGVjdG9yLCAmIChwYXJlbnQgc2VsZWN0b3IpLCBvciBpbnRlcnBvbGF0ZWQgdmFyaWFibGVcbiAgLy8gdGhlIGVuZCBvZiBhIHNlbGVjdG9yIGlzIGZvdW5kIHdoZW4gdGhlcmUgaXMgbm8gcnVsZXMgaW4gaXQgKCB7fSBvciB7XFxzfSkgb3IgaWYgdGhlcmUgaXMgYSBwcm9wZXJ0eSAoYmVjYXVzZSBhbiBpbnRlcnBvbGF0ZWQgdmFyXG4gIC8vIGNhbiBcInBhc3NcIiBhcyBhIHNlbGVjdG9yLSBlLmc6IHByb3BlciN7JGVydHl9KVxuICAvLyB0aGlzIG9uZSB3YXMgaGFyZCB0byBkbywgc28gcGxlYXNlIGJlIGNhcmVmdWwgaWYgeW91IGVkaXQgdGhpcyBvbmUgOilcbiAgJ3NlbGVjdG9yJzoge1xuICAgIC8vIEluaXRpYWwgbG9vay1haGVhZCBpcyB1c2VkIHRvIHByZXZlbnQgbWF0Y2hpbmcgb2YgYmxhbmsgc2VsZWN0b3JzXG4gICAgcGF0dGVybjogLyg/PVxcUylbXkA7e30oKV0/KD86W15AO3t9KClcXHNdfFxccysoPyFcXHMpfCNcXHtcXCRbLVxcd10rXFx9KSsoPz1cXHMqXFx7KD86XFx9fFxcc3xbXn1dW146e31dKls6e11bXn1dKSkvLFxuICAgIGluc2lkZToge1xuICAgICAgJ3BhcmVudCc6IHtcbiAgICAgICAgcGF0dGVybjogLyYvLFxuICAgICAgICBhbGlhczogJ2ltcG9ydGFudCdcbiAgICAgIH0sXG4gICAgICAncGxhY2Vob2xkZXInOiAvJVstXFx3XSsvLFxuICAgICAgJ3ZhcmlhYmxlJzogL1xcJFstXFx3XSt8I1xce1xcJFstXFx3XStcXH0vXG4gICAgfVxuICB9LFxuICAncHJvcGVydHknOiB7XG4gICAgcGF0dGVybjogLyg/OlstXFx3XXxcXCRbLVxcd118I1xce1xcJFstXFx3XStcXH0pKyg/PVxccyo6KS8sXG4gICAgaW5zaWRlOiB7XG4gICAgICAndmFyaWFibGUnOiAvXFwkWy1cXHddK3wjXFx7XFwkWy1cXHddK1xcfS9cbiAgICB9XG4gIH1cbn0pO1xuUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnc2NzcycsICdhdHJ1bGUnLCB7XG4gICdrZXl3b3JkJzogWy9AKD86Y29udGVudHxkZWJ1Z3xlYWNofGVsc2UoPzogaWYpP3xleHRlbmR8Zm9yfGZvcndhcmR8ZnVuY3Rpb258aWZ8aW1wb3J0fGluY2x1ZGV8bWl4aW58cmV0dXJufHVzZXx3YXJufHdoaWxlKVxcYi9pLCB7XG4gICAgcGF0dGVybjogLyggKSg/OmZyb218dGhyb3VnaCkoPz0gKS8sXG4gICAgbG9va2JlaGluZDogdHJ1ZVxuICB9XVxufSk7XG5QcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdzY3NzJywgJ2ltcG9ydGFudCcsIHtcbiAgLy8gdmFyIGFuZCBpbnRlcnBvbGF0ZWQgdmFyc1xuICAndmFyaWFibGUnOiAvXFwkWy1cXHddK3wjXFx7XFwkWy1cXHddK1xcfS9cbn0pO1xuUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnc2NzcycsICdmdW5jdGlvbicsIHtcbiAgJ21vZHVsZS1tb2RpZmllcic6IHtcbiAgICBwYXR0ZXJuOiAvXFxiKD86YXN8aGlkZXxzaG93fHdpdGgpXFxiL2ksXG4gICAgYWxpYXM6ICdrZXl3b3JkJ1xuICB9LFxuICAncGxhY2Vob2xkZXInOiB7XG4gICAgcGF0dGVybjogLyVbLVxcd10rLyxcbiAgICBhbGlhczogJ3NlbGVjdG9yJ1xuICB9LFxuICAnc3RhdGVtZW50Jzoge1xuICAgIHBhdHRlcm46IC9cXEIhKD86ZGVmYXVsdHxvcHRpb25hbClcXGIvaSxcbiAgICBhbGlhczogJ2tleXdvcmQnXG4gIH0sXG4gICdib29sZWFuJzogL1xcYig/OmZhbHNlfHRydWUpXFxiLyxcbiAgJ251bGwnOiB7XG4gICAgcGF0dGVybjogL1xcYm51bGxcXGIvLFxuICAgIGFsaWFzOiAna2V5d29yZCdcbiAgfSxcbiAgJ29wZXJhdG9yJzoge1xuICAgIHBhdHRlcm46IC8oXFxzKSg/OlstKypcXC8lXXxbPSFdPXw8PT98Pj0/fGFuZHxub3R8b3IpKD89XFxzKS8sXG4gICAgbG9va2JlaGluZDogdHJ1ZVxuICB9XG59KTtcblByaXNtLmxhbmd1YWdlcy5zY3NzWydhdHJ1bGUnXS5pbnNpZGUucmVzdCA9IFByaXNtLmxhbmd1YWdlcy5zY3NzO1xuUHJpc20ubGFuZ3VhZ2VzLnNxbCA9IHtcbiAgJ2NvbW1lbnQnOiB7XG4gICAgcGF0dGVybjogLyhefFteXFxcXF0pKD86XFwvXFwqW1xcc1xcU10qP1xcKlxcL3woPzotLXxcXC9cXC98IykuKikvLFxuICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgfSxcbiAgJ3ZhcmlhYmxlJzogW3tcbiAgICBwYXR0ZXJuOiAvQChbXCInYF0pKD86XFxcXFtcXHNcXFNdfCg/IVxcMSlbXlxcXFxdKStcXDEvLFxuICAgIGdyZWVkeTogdHJ1ZVxuICB9LCAvQFtcXHcuJF0rL10sXG4gICdzdHJpbmcnOiB7XG4gICAgcGF0dGVybjogLyhefFteQFxcXFxdKShcInwnKSg/OlxcXFxbXFxzXFxTXXwoPyFcXDIpW15cXFxcXXxcXDJcXDIpKlxcMi8sXG4gICAgZ3JlZWR5OiB0cnVlLFxuICAgIGxvb2tiZWhpbmQ6IHRydWVcbiAgfSxcbiAgJ2lkZW50aWZpZXInOiB7XG4gICAgcGF0dGVybjogLyhefFteQFxcXFxdKWAoPzpcXFxcW1xcc1xcU118W15gXFxcXF18YGApKmAvLFxuICAgIGdyZWVkeTogdHJ1ZSxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGluc2lkZToge1xuICAgICAgJ3B1bmN0dWF0aW9uJzogL15gfGAkL1xuICAgIH1cbiAgfSxcbiAgJ2Z1bmN0aW9uJzogL1xcYig/OkFWR3xDT1VOVHxGSVJTVHxGT1JNQVR8TEFTVHxMQ0FTRXxMRU58TUFYfE1JRHxNSU58TU9EfE5PV3xST1VORHxTVU18VUNBU0UpKD89XFxzKlxcKCkvaSxcbiAgLy8gU2hvdWxkIHdlIGhpZ2hsaWdodCB1c2VyIGRlZmluZWQgZnVuY3Rpb25zIHRvbz9cbiAgJ2tleXdvcmQnOiAvXFxiKD86QUNUSU9OfEFERHxBRlRFUnxBTEdPUklUSE18QUxMfEFMVEVSfEFOQUxZWkV8QU5ZfEFQUExZfEFTfEFTQ3xBVVRIT1JJWkFUSU9OfEFVVE9fSU5DUkVNRU5UfEJBQ0tVUHxCREJ8QkVHSU58QkVSS0VMRVlEQnxCSUdJTlR8QklOQVJZfEJJVHxCTE9CfEJPT0x8Qk9PTEVBTnxCUkVBS3xCUk9XU0V8QlRSRUV8QlVMS3xCWXxDQUxMfENBU0NBREVEP3xDQVNFfENIQUlOfENIQVIoPzpBQ1RFUnxTRVQpP3xDSEVDSyg/OlBPSU5UKT98Q0xPU0V8Q0xVU1RFUkVEfENPQUxFU0NFfENPTExBVEV8Q09MVU1OUz98Q09NTUVOVHxDT01NSVQoPzpURUQpP3xDT01QVVRFfENPTk5FQ1R8Q09OU0lTVEVOVHxDT05TVFJBSU5UfENPTlRBSU5TKD86VEFCTEUpP3xDT05USU5VRXxDT05WRVJUfENSRUFURXxDUk9TU3xDVVJSRU5UKD86X0RBVEV8X1RJTUV8X1RJTUVTVEFNUHxfVVNFUik/fENVUlNPUnxDWUNMRXxEQVRBKD86QkFTRVM/KT98REFURSg/OlRJTUUpP3xEQVl8REJDQ3xERUFMTE9DQVRFfERFQ3xERUNJTUFMfERFQ0xBUkV8REVGQVVMVHxERUZJTkVSfERFTEFZRUR8REVMRVRFfERFTElNSVRFUlM/fERFTll8REVTQ3xERVNDUklCRXxERVRFUk1JTklTVElDfERJU0FCTEV8RElTQ0FSRHxESVNLfERJU1RJTkNUfERJU1RJTkNUUk9XfERJU1RSSUJVVEVEfERPfERPVUJMRXxEUk9QfERVTU1ZfERVTVAoPzpGSUxFKT98RFVQTElDQVRFfEVMU0UoPzpJRik/fEVOQUJMRXxFTkNMT1NFRHxFTkR8RU5HSU5FfEVOVU18RVJSTFZMfEVSUk9SU3xFU0NBUEVEP3xFWENFUFR8RVhFQyg/OlVURSk/fEVYSVNUU3xFWElUfEVYUExBSU58RVhURU5ERUR8RkVUQ0h8RklFTERTfEZJTEV8RklMTEZBQ1RPUnxGSVJTVHxGSVhFRHxGTE9BVHxGT0xMT1dJTkd8Rk9SKD86IEVBQ0ggUk9XKT98Rk9SQ0V8Rk9SRUlHTnxGUkVFVEVYVCg/OlRBQkxFKT98RlJPTXxGVUxMfEZVTkNUSU9OfEdFT01FVFJZKD86Q09MTEVDVElPTik/fEdMT0JBTHxHT1RPfEdSQU5UfEdST1VQfEhBTkRMRVJ8SEFTSHxIQVZJTkd8SE9MRExPQ0t8SE9VUnxJREVOVElUWSg/OkNPTHxfSU5TRVJUKT98SUZ8SUdOT1JFfElNUE9SVHxJTkRFWHxJTkZJTEV8SU5ORVJ8SU5OT0RCfElOT1VUfElOU0VSVHxJTlR8SU5URUdFUnxJTlRFUlNFQ1R8SU5URVJWQUx8SU5UT3xJTlZPS0VSfElTT0xBVElPTnxJVEVSQVRFfEpPSU58S0VZUz98S0lMTHxMQU5HVUFHRXxMQVNUfExFQVZFfExFRlR8TEVWRUx8TElNSVR8TElORU5PfExJTkVTfExJTkVTVFJJTkd8TE9BRHxMT0NBTHxMT0NLfExPTkcoPzpCTE9CfFRFWFQpfExPT1B8TUFUQ0goPzpFRCk/fE1FRElVTSg/OkJMT0J8SU5UfFRFWFQpfE1FUkdFfE1JRERMRUlOVHxNSU5VVEV8TU9ERXxNT0RJRklFU3xNT0RJRll8TU9OVEh8TVVMVEkoPzpMSU5FU1RSSU5HfFBPSU5UfFBPTFlHT04pfE5BVElPTkFMfE5BVFVSQUx8TkNIQVJ8TkVYVHxOT3xOT05DTFVTVEVSRUR8TlVMTElGfE5VTUVSSUN8T0ZGP3xPRkZTRVRTP3xPTnxPUEVOKD86REFUQVNPVVJDRXxRVUVSWXxST1dTRVQpP3xPUFRJTUlaRXxPUFRJT04oPzpBTExZKT98T1JERVJ8T1VUKD86RVJ8RklMRSk/fE9WRVJ8UEFSVElBTHxQQVJUSVRJT058UEVSQ0VOVHxQSVZPVHxQTEFOfFBPSU5UfFBPTFlHT058UFJFQ0VESU5HfFBSRUNJU0lPTnxQUkVQQVJFfFBSRVZ8UFJJTUFSWXxQUklOVHxQUklWSUxFR0VTfFBST0MoPzpFRFVSRSk/fFBVQkxJQ3xQVVJHRXxRVUlDS3xSQUlTRVJST1J8UkVBRFM/fFJFQUx8UkVDT05GSUdVUkV8UkVGRVJFTkNFU3xSRUxFQVNFfFJFTkFNRXxSRVBFQVQoPzpBQkxFKT98UkVQTEFDRXxSRVBMSUNBVElPTnxSRVFVSVJFfFJFU0lHTkFMfFJFU1RPUkV8UkVTVFJJQ1R8UkVUVVJOKD86SU5HfFMpP3xSRVZPS0V8UklHSFR8Uk9MTEJBQ0t8Uk9VVElORXxST1coPzpDT1VOVHxHVUlEQ09MfFMpP3xSVFJFRXxSVUxFfFNBVkUoPzpQT0lOVCk/fFNDSEVNQXxTRUNPTkR8U0VMRUNUfFNFUklBTCg/OklaQUJMRSk/fFNFU1NJT04oPzpfVVNFUik/fFNFVCg/OlVTRVIpP3xTSEFSRXxTSE9XfFNIVVRET1dOfFNJTVBMRXxTTUFMTElOVHxTTkFQU0hPVHxTT01FfFNPTkFNRXxTUUx8U1RBUlQoPzpJTkcpP3xTVEFUSVNUSUNTfFNUQVRVU3xTVFJJUEVEfFNZU1RFTV9VU0VSfFRBQkxFUz98VEFCTEVTUEFDRXxURU1QKD86T1JBUll8VEFCTEUpP3xURVJNSU5BVEVEfFRFWFQoPzpTSVpFKT98VEhFTnxUSU1FKD86U1RBTVApP3xUSU5ZKD86QkxPQnxJTlR8VEVYVCl8VE9QP3xUUkFOKD86U0FDVElPTlM/KT98VFJJR0dFUnxUUlVOQ0FURXxUU0VRVUFMfFRZUEVTP3xVTkJPVU5ERUR8VU5DT01NSVRURUR8VU5ERUZJTkVEfFVOSU9OfFVOSVFVRXxVTkxPQ0t8VU5QSVZPVHxVTlNJR05FRHxVUERBVEUoPzpURVhUKT98VVNBR0V8VVNFfFVTRVJ8VVNJTkd8VkFMVUVTP3xWQVIoPzpCSU5BUll8Q0hBUnxDSEFSQUNURVJ8WUlORyl8VklFV3xXQUlURk9SfFdBUk5JTkdTfFdIRU58V0hFUkV8V0hJTEV8V0lUSCg/OiBST0xMVVB8SU4pP3xXT1JLfFdSSVRFKD86VEVYVCk/fFlFQVIpXFxiL2ksXG4gICdib29sZWFuJzogL1xcYig/OkZBTFNFfE5VTEx8VFJVRSlcXGIvaSxcbiAgJ251bWJlcic6IC9cXGIweFtcXGRhLWZdK1xcYnxcXGJcXGQrKD86XFwuXFxkKik/fFxcQlxcLlxcZCtcXGIvaSxcbiAgJ29wZXJhdG9yJzogL1stKypcXC89JV5+XXwmJj98XFx8XFx8P3whPT98PCg/Oj0+P3w8fD4pP3w+Wz49XT98XFxiKD86QU5EfEJFVFdFRU58RElWfElMSUtFfElOfElTfExJS0V8Tk9UfE9SfFJFR0VYUHxSTElLRXxTT1VORFMgTElLRXxYT1IpXFxiL2ksXG4gICdwdW5jdHVhdGlvbic6IC9bO1tcXF0oKWAsLl0vXG59O1xuUHJpc20ubGFuZ3VhZ2VzLnN3aWZ0ID0ge1xuICAnY29tbWVudCc6IHtcbiAgICAvLyBOZXN0ZWQgY29tbWVudHMgYXJlIHN1cHBvcnRlZCB1cCB0byAyIGxldmVsc1xuICAgIHBhdHRlcm46IC8oXnxbXlxcXFw6XSkoPzpcXC9cXC8uKnxcXC9cXCooPzpbXi8qXXxcXC8oPyFcXCopfFxcKig/IVxcLyl8XFwvXFwqKD86W14qXXxcXCooPyFcXC8pKSpcXCpcXC8pKlxcKlxcLykvLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgZ3JlZWR5OiB0cnVlXG4gIH0sXG4gICdzdHJpbmctbGl0ZXJhbCc6IFtcbiAgLy8gaHR0cHM6Ly9kb2NzLnN3aWZ0Lm9yZy9zd2lmdC1ib29rL0xhbmd1YWdlR3VpZGUvU3RyaW5nc0FuZENoYXJhY3RlcnMuaHRtbFxuICB7XG4gICAgcGF0dGVybjogUmVnRXhwKC8oXnxbXlwiI10pLy5zb3VyY2UgKyAnKD86J1xuICAgIC8vIHNpbmdsZS1saW5lIHN0cmluZ1xuICAgICsgL1wiKD86XFxcXCg/OlxcKCg/OlteKCldfFxcKFteKCldKlxcKSkqXFwpfFxcclxcbnxbXihdKXxbXlxcXFxcXHJcXG5cIl0pKlwiLy5zb3VyY2UgKyAnfCdcbiAgICAvLyBtdWx0aS1saW5lIHN0cmluZ1xuICAgICsgL1wiXCJcIig/OlxcXFwoPzpcXCgoPzpbXigpXXxcXChbXigpXSpcXCkpKlxcKXxbXihdKXxbXlxcXFxcIl18XCIoPyFcIlwiKSkqXCJcIlwiLy5zb3VyY2UgKyAnKScgKyAvKD8hW1wiI10pLy5zb3VyY2UpLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgZ3JlZWR5OiB0cnVlLFxuICAgIGluc2lkZToge1xuICAgICAgJ2ludGVycG9sYXRpb24nOiB7XG4gICAgICAgIHBhdHRlcm46IC8oXFxcXFxcKCkoPzpbXigpXXxcXChbXigpXSpcXCkpKig/PVxcKSkvLFxuICAgICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgICBpbnNpZGU6IG51bGwgLy8gc2VlIGJlbG93XG4gICAgICB9LFxuICAgICAgJ2ludGVycG9sYXRpb24tcHVuY3R1YXRpb24nOiB7XG4gICAgICAgIHBhdHRlcm46IC9eXFwpfFxcXFxcXCgkLyxcbiAgICAgICAgYWxpYXM6ICdwdW5jdHVhdGlvbidcbiAgICAgIH0sXG4gICAgICAncHVuY3R1YXRpb24nOiAvXFxcXCg/PVtcXHJcXG5dKS8sXG4gICAgICAnc3RyaW5nJzogL1tcXHNcXFNdKy9cbiAgICB9XG4gIH0sIHtcbiAgICBwYXR0ZXJuOiBSZWdFeHAoLyhefFteXCIjXSkoIyspLy5zb3VyY2UgKyAnKD86J1xuICAgIC8vIHNpbmdsZS1saW5lIHN0cmluZ1xuICAgICsgL1wiKD86XFxcXCg/OiMrXFwoKD86W14oKV18XFwoW14oKV0qXFwpKSpcXCl8XFxyXFxufFteI10pfFteXFxcXFxcclxcbl0pKj9cIi8uc291cmNlICsgJ3wnXG4gICAgLy8gbXVsdGktbGluZSBzdHJpbmdcbiAgICArIC9cIlwiXCIoPzpcXFxcKD86IytcXCgoPzpbXigpXXxcXChbXigpXSpcXCkpKlxcKXxbXiNdKXxbXlxcXFxdKSo/XCJcIlwiLy5zb3VyY2UgKyAnKScgKyAnXFxcXDInKSxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGdyZWVkeTogdHJ1ZSxcbiAgICBpbnNpZGU6IHtcbiAgICAgICdpbnRlcnBvbGF0aW9uJzoge1xuICAgICAgICBwYXR0ZXJuOiAvKFxcXFwjK1xcKCkoPzpbXigpXXxcXChbXigpXSpcXCkpKig/PVxcKSkvLFxuICAgICAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgICAgICBpbnNpZGU6IG51bGwgLy8gc2VlIGJlbG93XG4gICAgICB9LFxuICAgICAgJ2ludGVycG9sYXRpb24tcHVuY3R1YXRpb24nOiB7XG4gICAgICAgIHBhdHRlcm46IC9eXFwpfFxcXFwjK1xcKCQvLFxuICAgICAgICBhbGlhczogJ3B1bmN0dWF0aW9uJ1xuICAgICAgfSxcbiAgICAgICdzdHJpbmcnOiAvW1xcc1xcU10rL1xuICAgIH1cbiAgfV0sXG4gICdkaXJlY3RpdmUnOiB7XG4gICAgLy8gZGlyZWN0aXZlcyB3aXRoIGNvbmRpdGlvbnNcbiAgICBwYXR0ZXJuOiBSZWdFeHAoLyMvLnNvdXJjZSArICcoPzonICsgKC8oPzplbHNlaWZ8aWYpXFxiLy5zb3VyY2UgKyAnKD86WyBcXHRdKidcbiAgICAvLyBUaGlzIHJlZ2V4IGlzIGEgbGl0dGxlIGNvbXBsZXguIEl0J3MgZXF1aXZhbGVudCB0byB0aGlzOlxuICAgIC8vICAgKD86IVsgXFx0XSopPyg/OlxcYlxcdytcXGIoPzpbIFxcdF0qPHJvdW5kPik/fDxyb3VuZD4pKD86WyBcXHRdKig/OiYmfFxcfFxcfCkpP1xuICAgIC8vIHdoZXJlIDxyb3VuZD4gaXMgYSBnZW5lcmFsIHBhcmVudGhlc2VzIGV4cHJlc3Npb24uXG4gICAgKyAvKD86IVsgXFx0XSopPyg/OlxcYlxcdytcXGIoPzpbIFxcdF0qXFwoKD86W14oKV18XFwoW14oKV0qXFwpKSpcXCkpP3xcXCgoPzpbXigpXXxcXChbXigpXSpcXCkpKlxcKSkoPzpbIFxcdF0qKD86JiZ8XFx8XFx8KSk/Ly5zb3VyY2UgKyAnKSsnKSArICd8JyArIC8oPzplbHNlfGVuZGlmKVxcYi8uc291cmNlICsgJyknKSxcbiAgICBhbGlhczogJ3Byb3BlcnR5JyxcbiAgICBpbnNpZGU6IHtcbiAgICAgICdkaXJlY3RpdmUtbmFtZSc6IC9eI1xcdysvLFxuICAgICAgJ2Jvb2xlYW4nOiAvXFxiKD86ZmFsc2V8dHJ1ZSlcXGIvLFxuICAgICAgJ251bWJlcic6IC9cXGJcXGQrKD86XFwuXFxkKykqXFxiLyxcbiAgICAgICdvcGVyYXRvcic6IC8hfCYmfFxcfFxcfHxbPD5dPT8vLFxuICAgICAgJ3B1bmN0dWF0aW9uJzogL1soKSxdL1xuICAgIH1cbiAgfSxcbiAgJ2xpdGVyYWwnOiB7XG4gICAgcGF0dGVybjogLyMoPzpjb2xvckxpdGVyYWx8Y29sdW1ufGRzb2hhbmRsZXxmaWxlKD86SUR8TGl0ZXJhbHxQYXRoKT98ZnVuY3Rpb258aW1hZ2VMaXRlcmFsfGxpbmUpXFxiLyxcbiAgICBhbGlhczogJ2NvbnN0YW50J1xuICB9LFxuICAnb3RoZXItZGlyZWN0aXZlJzoge1xuICAgIHBhdHRlcm46IC8jXFx3K1xcYi8sXG4gICAgYWxpYXM6ICdwcm9wZXJ0eSdcbiAgfSxcbiAgJ2F0dHJpYnV0ZSc6IHtcbiAgICBwYXR0ZXJuOiAvQFxcdysvLFxuICAgIGFsaWFzOiAnYXRydWxlJ1xuICB9LFxuICAnZnVuY3Rpb24tZGVmaW5pdGlvbic6IHtcbiAgICBwYXR0ZXJuOiAvKFxcYmZ1bmNcXHMrKVxcdysvLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgYWxpYXM6ICdmdW5jdGlvbidcbiAgfSxcbiAgJ2xhYmVsJzoge1xuICAgIC8vIGh0dHBzOi8vZG9jcy5zd2lmdC5vcmcvc3dpZnQtYm9vay9MYW5ndWFnZUd1aWRlL0NvbnRyb2xGbG93Lmh0bWwjSUQxNDFcbiAgICBwYXR0ZXJuOiAvXFxiKGJyZWFrfGNvbnRpbnVlKVxccytcXHcrfFxcYlthLXpBLVpfXVxcdyooPz1cXHMqOlxccyooPzpmb3J8cmVwZWF0fHdoaWxlKVxcYikvLFxuICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgYWxpYXM6ICdpbXBvcnRhbnQnXG4gIH0sXG4gICdrZXl3b3JkJzogL1xcYig/OkFueXxQcm90b2NvbHxTZWxmfFR5cGV8YWN0b3J8YXN8YXNzaWdubWVudHxhc3NvY2lhdGVkdHlwZXxhc3NvY2lhdGl2aXR5fGFzeW5jfGF3YWl0fGJyZWFrfGNhc2V8Y2F0Y2h8Y2xhc3N8Y29udGludWV8Y29udmVuaWVuY2V8ZGVmYXVsdHxkZWZlcnxkZWluaXR8ZGlkU2V0fGRvfGR5bmFtaWN8ZWxzZXxlbnVtfGV4dGVuc2lvbnxmYWxsdGhyb3VnaHxmaWxlcHJpdmF0ZXxmaW5hbHxmb3J8ZnVuY3xnZXR8Z3VhcmR8aGlnaGVyVGhhbnxpZnxpbXBvcnR8aW58aW5kaXJlY3R8aW5maXh8aW5pdHxpbm91dHxpbnRlcm5hbHxpc3xpc29sYXRlZHxsYXp5fGxlZnR8bGV0fGxvd2VyVGhhbnxtdXRhdGluZ3xub25lfG5vbmlzb2xhdGVkfG5vbm11dGF0aW5nfG9wZW58b3BlcmF0b3J8b3B0aW9uYWx8b3ZlcnJpZGV8cG9zdGZpeHxwcmVjZWRlbmNlZ3JvdXB8cHJlZml4fHByaXZhdGV8cHJvdG9jb2x8cHVibGljfHJlcGVhdHxyZXF1aXJlZHxyZXRocm93c3xyZXR1cm58cmlnaHR8c2FmZXxzZWxmfHNldHxzb21lfHN0YXRpY3xzdHJ1Y3R8c3Vic2NyaXB0fHN1cGVyfHN3aXRjaHx0aHJvd3x0aHJvd3N8dHJ5fHR5cGVhbGlhc3x1bm93bmVkfHVuc2FmZXx2YXJ8d2Vha3x3aGVyZXx3aGlsZXx3aWxsU2V0KVxcYi8sXG4gICdib29sZWFuJzogL1xcYig/OmZhbHNlfHRydWUpXFxiLyxcbiAgJ25pbCc6IHtcbiAgICBwYXR0ZXJuOiAvXFxibmlsXFxiLyxcbiAgICBhbGlhczogJ2NvbnN0YW50J1xuICB9LFxuICAnc2hvcnQtYXJndW1lbnQnOiAvXFwkXFxkK1xcYi8sXG4gICdvbWl0Jzoge1xuICAgIHBhdHRlcm46IC9cXGJfXFxiLyxcbiAgICBhbGlhczogJ2tleXdvcmQnXG4gIH0sXG4gICdudW1iZXInOiAvXFxiKD86W1xcZF9dKyg/OlxcLltcXGRlX10rKT98MHhbYS1mMC05X10rKD86XFwuW2EtZjAtOXBfXSspP3wwYlswMV9dK3wwb1swLTdfXSspXFxiL2ksXG4gIC8vIEEgY2xhc3MgbmFtZSBtdXN0IHN0YXJ0IHdpdGggYW4gdXBwZXItY2FzZSBsZXR0ZXIgYW5kIGJlIGVpdGhlciAxIGxldHRlciBsb25nIG9yIGNvbnRhaW4gYSBsb3dlci1jYXNlIGxldHRlci5cbiAgJ2NsYXNzLW5hbWUnOiAvXFxiW0EtWl0oPzpbQS1aX1xcZF0qW2Etel1cXHcqKT9cXGIvLFxuICAnZnVuY3Rpb24nOiAvXFxiW2Etel9dXFx3Kig/PVxccypcXCgpL2ksXG4gICdjb25zdGFudCc6IC9cXGIoPzpbQS1aX117Mix9fGtbQS1aXVtBLVphLXpfXSspXFxiLyxcbiAgLy8gT3BlcmF0b3JzIGFyZSBnZW5lcmljIGluIFN3aWZ0LiBEZXZlbG9wZXJzIGNhbiBldmVuIGNyZWF0ZSBuZXcgb3BlcmF0b3JzIChlLmcuICsrKykuXG4gIC8vIGh0dHBzOi8vZG9jcy5zd2lmdC5vcmcvc3dpZnQtYm9vay9SZWZlcmVuY2VNYW51YWwvenpTdW1tYXJ5T2ZUaGVHcmFtbWFyLmh0bWwjSUQ0ODFcbiAgLy8gVGhpcyByZWdleCBvbmx5IHN1cHBvcnRzIEFTQ0lJIG9wZXJhdG9ycy5cbiAgJ29wZXJhdG9yJzogL1stKyovJT0hPD4mfF5+P10rfFxcLlsuXFwtKyovJT0hPD4mfF5+P10rLyxcbiAgJ3B1bmN0dWF0aW9uJzogL1t7fVtcXF0oKTssLjpcXFxcXS9cbn07XG5QcmlzbS5sYW5ndWFnZXMuc3dpZnRbJ3N0cmluZy1saXRlcmFsJ10uZm9yRWFjaChmdW5jdGlvbiAocnVsZSkge1xuICBydWxlLmluc2lkZVsnaW50ZXJwb2xhdGlvbiddLmluc2lkZSA9IFByaXNtLmxhbmd1YWdlcy5zd2lmdDtcbn0pO1xuKGZ1bmN0aW9uIChQcmlzbSkge1xuICBQcmlzbS5sYW5ndWFnZXMudHlwZXNjcmlwdCA9IFByaXNtLmxhbmd1YWdlcy5leHRlbmQoJ2phdmFzY3JpcHQnLCB7XG4gICAgJ2NsYXNzLW5hbWUnOiB7XG4gICAgICBwYXR0ZXJuOiAvKFxcYig/OmNsYXNzfGV4dGVuZHN8aW1wbGVtZW50c3xpbnN0YW5jZW9mfGludGVyZmFjZXxuZXd8dHlwZSlcXHMrKSg/IWtleW9mXFxiKSg/IVxccylbXyRhLXpBLVpcXHhBMC1cXHVGRkZGXSg/Oig/IVxccylbJFxcd1xceEEwLVxcdUZGRkZdKSooPzpcXHMqPCg/OltePD5dfDwoPzpbXjw+XXw8W148Pl0qPikqPikqPik/LyxcbiAgICAgIGxvb2tiZWhpbmQ6IHRydWUsXG4gICAgICBncmVlZHk6IHRydWUsXG4gICAgICBpbnNpZGU6IG51bGwgLy8gc2VlIGJlbG93XG4gICAgfSxcbiAgICAnYnVpbHRpbic6IC9cXGIoPzpBcnJheXxGdW5jdGlvbnxQcm9taXNlfGFueXxib29sZWFufGNvbnNvbGV8bmV2ZXJ8bnVtYmVyfHN0cmluZ3xzeW1ib2x8dW5rbm93bilcXGIvXG4gIH0pO1xuXG4gIC8vIFRoZSBrZXl3b3JkcyBUeXBlU2NyaXB0IGFkZHMgdG8gSmF2YVNjcmlwdFxuICBQcmlzbS5sYW5ndWFnZXMudHlwZXNjcmlwdC5rZXl3b3JkLnB1c2goL1xcYig/OmFic3RyYWN0fGRlY2xhcmV8aXN8a2V5b2Z8cmVhZG9ubHl8cmVxdWlyZSlcXGIvLFxuICAvLyBrZXl3b3JkcyB0aGF0IGhhdmUgdG8gYmUgZm9sbG93ZWQgYnkgYW4gaWRlbnRpZmllclxuICAvXFxiKD86YXNzZXJ0c3xpbmZlcnxpbnRlcmZhY2V8bW9kdWxlfG5hbWVzcGFjZXx0eXBlKVxcYig/PVxccyooPzpbe18kYS16QS1aXFx4QTAtXFx1RkZGRl18JCkpLyxcbiAgLy8gVGhpcyBpcyBmb3IgYGltcG9ydCB0eXBlICosIHt9YFxuICAvXFxidHlwZVxcYig/PVxccyooPzpbXFx7Kl18JCkpLyk7XG5cbiAgLy8gZG9lc24ndCB3b3JrIHdpdGggVFMgYmVjYXVzZSBUUyBpcyB0b28gY29tcGxleFxuICBkZWxldGUgUHJpc20ubGFuZ3VhZ2VzLnR5cGVzY3JpcHRbJ3BhcmFtZXRlciddO1xuICBkZWxldGUgUHJpc20ubGFuZ3VhZ2VzLnR5cGVzY3JpcHRbJ2xpdGVyYWwtcHJvcGVydHknXTtcblxuICAvLyBhIHZlcnNpb24gb2YgdHlwZXNjcmlwdCBzcGVjaWZpY2FsbHkgZm9yIGhpZ2hsaWdodGluZyB0eXBlc1xuICB2YXIgdHlwZUluc2lkZSA9IFByaXNtLmxhbmd1YWdlcy5leHRlbmQoJ3R5cGVzY3JpcHQnLCB7fSk7XG4gIGRlbGV0ZSB0eXBlSW5zaWRlWydjbGFzcy1uYW1lJ107XG4gIFByaXNtLmxhbmd1YWdlcy50eXBlc2NyaXB0WydjbGFzcy1uYW1lJ10uaW5zaWRlID0gdHlwZUluc2lkZTtcbiAgUHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgndHlwZXNjcmlwdCcsICdmdW5jdGlvbicsIHtcbiAgICAnZGVjb3JhdG9yJzoge1xuICAgICAgcGF0dGVybjogL0BbJFxcd1xceEEwLVxcdUZGRkZdKy8sXG4gICAgICBpbnNpZGU6IHtcbiAgICAgICAgJ2F0Jzoge1xuICAgICAgICAgIHBhdHRlcm46IC9eQC8sXG4gICAgICAgICAgYWxpYXM6ICdvcGVyYXRvcidcbiAgICAgICAgfSxcbiAgICAgICAgJ2Z1bmN0aW9uJzogL15bXFxzXFxTXSsvXG4gICAgICB9XG4gICAgfSxcbiAgICAnZ2VuZXJpYy1mdW5jdGlvbic6IHtcbiAgICAgIC8vIGUuZy4gZm9vPFQgZXh0ZW5kcyBcImJhclwiIHwgXCJiYXpcIj4oIC4uLlxuICAgICAgcGF0dGVybjogLyM/KD8hXFxzKVtfJGEtekEtWlxceEEwLVxcdUZGRkZdKD86KD8hXFxzKVskXFx3XFx4QTAtXFx1RkZGRl0pKlxccyo8KD86W148Pl18PCg/OltePD5dfDxbXjw+XSo+KSo+KSo+KD89XFxzKlxcKCkvLFxuICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgaW5zaWRlOiB7XG4gICAgICAgICdmdW5jdGlvbic6IC9eIz8oPyFcXHMpW18kYS16QS1aXFx4QTAtXFx1RkZGRl0oPzooPyFcXHMpWyRcXHdcXHhBMC1cXHVGRkZGXSkqLyxcbiAgICAgICAgJ2dlbmVyaWMnOiB7XG4gICAgICAgICAgcGF0dGVybjogLzxbXFxzXFxTXSsvLFxuICAgICAgICAgIC8vIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGZpcnN0IDxcbiAgICAgICAgICBhbGlhczogJ2NsYXNzLW5hbWUnLFxuICAgICAgICAgIGluc2lkZTogdHlwZUluc2lkZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgUHJpc20ubGFuZ3VhZ2VzLnRzID0gUHJpc20ubGFuZ3VhZ2VzLnR5cGVzY3JpcHQ7XG59KShQcmlzbSk7XG4oZnVuY3Rpb24gKFByaXNtKSB7XG4gIHZhciB0eXBlc2NyaXB0ID0gUHJpc20udXRpbC5jbG9uZShQcmlzbS5sYW5ndWFnZXMudHlwZXNjcmlwdCk7XG4gIFByaXNtLmxhbmd1YWdlcy50c3ggPSBQcmlzbS5sYW5ndWFnZXMuZXh0ZW5kKCdqc3gnLCB0eXBlc2NyaXB0KTtcblxuICAvLyBkb2Vzbid0IHdvcmsgd2l0aCBUUyBiZWNhdXNlIFRTIGlzIHRvbyBjb21wbGV4XG4gIGRlbGV0ZSBQcmlzbS5sYW5ndWFnZXMudHN4WydwYXJhbWV0ZXInXTtcbiAgZGVsZXRlIFByaXNtLmxhbmd1YWdlcy50c3hbJ2xpdGVyYWwtcHJvcGVydHknXTtcblxuICAvLyBUaGlzIHdpbGwgcHJldmVudCBjb2xsaXNpb25zIGJldHdlZW4gVFNYIHRhZ3MgYW5kIFRTIGdlbmVyaWMgdHlwZXMuXG4gIC8vIElkZWEgYnkgaHR0cHM6Ly9naXRodWIuY29tL2thcmxob3JreVxuICAvLyBEaXNjdXNzaW9uOiBodHRwczovL2dpdGh1Yi5jb20vUHJpc21KUy9wcmlzbS9pc3N1ZXMvMjU5NCNpc3N1ZWNvbW1lbnQtNzEwNjY2OTI4XG4gIHZhciB0YWcgPSBQcmlzbS5sYW5ndWFnZXMudHN4LnRhZztcbiAgdGFnLnBhdHRlcm4gPSBSZWdFeHAoLyhefFteXFx3JF18KD89PFxcLykpLy5zb3VyY2UgKyAnKD86JyArIHRhZy5wYXR0ZXJuLnNvdXJjZSArICcpJywgdGFnLnBhdHRlcm4uZmxhZ3MpO1xuICB0YWcubG9va2JlaGluZCA9IHRydWU7XG59KShQcmlzbSk7XG5QcmlzbS5sYW5ndWFnZXMuYmFzaWMgPSB7XG4gICdjb21tZW50Jzoge1xuICAgIHBhdHRlcm46IC8oPzohfFJFTVxcYikuKy9pLFxuICAgIGluc2lkZToge1xuICAgICAgJ2tleXdvcmQnOiAvXlJFTS9pXG4gICAgfVxuICB9LFxuICAnc3RyaW5nJzoge1xuICAgIHBhdHRlcm46IC9cIig/OlwiXCJ8WyEjJCUmJygpKixcXC86Ozw9Pj9eXFx3ICtcXC0uXSkqXCIvLFxuICAgIGdyZWVkeTogdHJ1ZVxuICB9LFxuICAnbnVtYmVyJzogLyg/OlxcYlxcZCsoPzpcXC5cXGQqKT98XFxCXFwuXFxkKykoPzpFWystXT9cXGQrKT8vaSxcbiAgJ2tleXdvcmQnOiAvXFxiKD86QVN8QkVFUHxCTE9BRHxCU0FWRXxDQUxMKD86IEFCU09MVVRFKT98Q0FTRXxDSEFJTnxDSERJUnxDTEVBUnxDTE9TRXxDTFN8Q09NfENPTU1PTnxDT05TVHxEQVRBfERFQ0xBUkV8REVGKD86IEZOfCBTRUd8REJMfElOVHxMTkd8U05HfFNUUil8RElNfERPfERPVUJMRXxFTFNFfEVMU0VJRnxFTkR8RU5WSVJPTnxFUkFTRXxFUlJPUnxFWElUfEZJRUxEfEZJTEVTfEZPUnxGVU5DVElPTnxHRVR8R09TVUJ8R09UT3xJRnxJTlBVVHxJTlRFR0VSfElPQ1RMfEtFWXxLSUxMfExJTkUgSU5QVVR8TE9DQVRFfExPQ0t8TE9OR3xMT09QfExTRVR8TUtESVJ8TkFNRXxORVhUfE9GRnxPTig/OiBDT018IEVSUk9SfCBLRVl8IFRJTUVSKT98T1BFTnxPUFRJT04gQkFTRXxPVVR8UE9LRXxQVVR8UkVBRHxSRURJTXxSRU18UkVTVE9SRXxSRVNVTUV8UkVUVVJOfFJNRElSfFJTRVR8UlVOfFNFTEVDVCBDQVNFfFNIQVJFRHxTSEVMTHxTSU5HTEV8U0xFRVB8U1RBVElDfFNURVB8U1RPUHxTVFJJTkd8U1VCfFNXQVB8U1lTVEVNfFRIRU58VElNRVJ8VE98VFJPRkZ8VFJPTnxUWVBFfFVOTE9DS3xVTlRJTHxVU0lOR3xWSUVXIFBSSU5UfFdBSVR8V0VORHxXSElMRXxXUklURSkoPzpcXCR8XFxiKS9pLFxuICAnZnVuY3Rpb24nOiAvXFxiKD86QUJTfEFDQ0VTU3xBQ09TfEFOR0xFfEFSRUF8QVJJVEhNRVRJQ3xBUlJBWXxBU0lOfEFTS3xBVHxBVE58QkFTRXxCRUdJTnxCUkVBS3xDQVVTRXxDRUlMfENIUnxDTElQfENPTExBVEV8Q09MT1J8Q09OfENPU3xDT1NIfENPVHxDU0N8REFURXxEQVRVTXxERUJVR3xERUNJTUFMfERFRnxERUd8REVHUkVFU3xERUxFVEV8REVUfERFVklDRXxESVNQTEFZfERPVHxFTEFQU0VEfEVQU3xFUkFTQUJMRXxFWExJTkV8RVhQfEVYVEVSTkFMfEVYVFlQRXxGSUxFVFlQRXxGSVhFRHxGUHxHT3xHUkFQSHxIQU5ETEVSfElETnxJTUFHRXxJTnxJTlR8SU5URVJOQUx8SVB8SVN8S0VZRUR8TEJPVU5EfExDQVNFfExFRlR8TEVOfExFTkdUSHxMRVR8TElORXxMSU5FU3xMT0d8TE9HMTB8TE9HMnxMVFJJTXxNQVJHSU58TUFUfE1BWHxNQVhOVU18TUlEfE1JTnxNSVNTSU5HfE1PRHxOQVRJVkV8TlVMfE5VTUVSSUN8T0Z8T1BUSU9OfE9SRHxPUkdBTklaQVRJT058T1VUSU58T1VUUFVUfFBJfFBPSU5UfFBPSU5URVJ8UE9JTlRTfFBPU3xQUklOVHxQUk9HUkFNfFBST01QVHxSQUR8UkFESUFOU3xSQU5ET01JWkV8UkVDT1JEfFJFQ1NJWkV8UkVDVFlQRXxSRUxBVElWRXxSRU1BSU5ERVJ8UkVQRUFUfFJFU1R8UkVUUll8UkVXUklURXxSSUdIVHxSTkR8Uk9VTkR8UlRSSU18U0FNRXxTRUN8U0VMRUNUfFNFUVVFTlRJQUx8U0VUfFNFVFRFUnxTR058U0lOfFNJTkh8U0laRXxTS0lQfFNRUnxTVEFOREFSRHxTVEFUVVN8U1RSfFNUUkVBTXxTVFlMRXxUQUJ8VEFOfFRBTkh8VEVNUExBVEV8VEVYVHxUSEVSRXxUSU1FfFRJTUVPVVR8VFJBQ0V8VFJBTlNGT1JNfFRSVU5DQVRFfFVCT1VORHxVQ0FTRXxVU0V8VkFMfFZBUklBQkxFfFZJRVdQT1JUfFdIRU58V0lORE9XfFdJVEh8WkVSfFpPTkVXSURUSCkoPzpcXCR8XFxiKS9pLFxuICAnb3BlcmF0b3InOiAvPFs9Pl0/fD49P3xbK1xcLSpcXC9ePSZdfFxcYig/OkFORHxFUVZ8SU1QfE5PVHxPUnxYT1IpXFxiL2ksXG4gICdwdW5jdHVhdGlvbic6IC9bLDs6KCldL1xufTtcblByaXNtLmxhbmd1YWdlcy52Ym5ldCA9IFByaXNtLmxhbmd1YWdlcy5leHRlbmQoJ2Jhc2ljJywge1xuICAnY29tbWVudCc6IFt7XG4gICAgcGF0dGVybjogLyg/OiF8UkVNXFxiKS4rL2ksXG4gICAgaW5zaWRlOiB7XG4gICAgICAna2V5d29yZCc6IC9eUkVNL2lcbiAgICB9XG4gIH0sIHtcbiAgICBwYXR0ZXJuOiAvKF58W15cXFxcOl0pJy4qLyxcbiAgICBsb29rYmVoaW5kOiB0cnVlLFxuICAgIGdyZWVkeTogdHJ1ZVxuICB9XSxcbiAgJ3N0cmluZyc6IHtcbiAgICBwYXR0ZXJuOiAvKF58W15cIl0pXCIoPzpcIlwifFteXCJdKSpcIig/IVwiKS8sXG4gICAgbG9va2JlaGluZDogdHJ1ZSxcbiAgICBncmVlZHk6IHRydWVcbiAgfSxcbiAgJ2tleXdvcmQnOiAvKD86XFxiKD86QURESEFORExFUnxBRERSRVNTT0Z8QUxJQVN8QU5EfEFOREFMU098QVN8QkVFUHxCTE9BRHxCT09MRUFOfEJTQVZFfEJZUkVGfEJZVEV8QllWQUx8Q0FMTCg/OiBBQlNPTFVURSk/fENBU0V8Q0FUQ0h8Q0JPT0x8Q0JZVEV8Q0NIQVJ8Q0RBVEV8Q0RCTHxDREVDfENIQUlOfENIQVJ8Q0hESVJ8Q0lOVHxDTEFTU3xDTEVBUnxDTE5HfENMT1NFfENMU3xDT0JKfENPTXxDT01NT058Q09OU1R8Q09OVElOVUV8Q1NCWVRFfENTSE9SVHxDU05HfENTVFJ8Q1RZUEV8Q1VJTlR8Q1VMTkd8Q1VTSE9SVHxEQVRBfERBVEV8REVDSU1BTHxERUNMQVJFfERFRig/OiBGTnwgU0VHfERCTHxJTlR8TE5HfFNOR3xTVFIpfERFRkFVTFR8REVMRUdBVEV8RElNfERJUkVDVENBU1R8RE98RE9VQkxFfEVMU0V8RUxTRUlGfEVORHxFTlVNfEVOVklST058RVJBU0V8RVJST1J8RVZFTlR8RVhJVHxGQUxTRXxGSUVMRHxGSUxFU3xGSU5BTExZfEZPUig/OiBFQUNIKT98RlJJRU5EfEZVTkNUSU9OfEdFVHxHRVRUWVBFfEdFVFhNTE5BTUVTUEFDRXxHTE9CQUx8R09TVUJ8R09UT3xIQU5ETEVTfElGfElNUExFTUVOVFN8SU1QT1JUU3xJTnxJTkhFUklUU3xJTlBVVHxJTlRFR0VSfElOVEVSRkFDRXxJT0NUTHxJU3xJU05PVHxLRVl8S0lMTHxMRVR8TElCfExJS0V8TElORSBJTlBVVHxMT0NBVEV8TE9DS3xMT05HfExPT1B8TFNFVHxNRXxNS0RJUnxNT0R8TU9EVUxFfE1VU1RJTkhFUklUfE1VU1RPVkVSUklERXxNWUJBU0V8TVlDTEFTU3xOQU1FfE5BTUVTUEFDRXxOQVJST1dJTkd8TkVXfE5FWFR8Tk9UfE5PVEhJTkd8Tk9USU5IRVJJVEFCTEV8Tk9UT1ZFUlJJREFCTEV8T0JKRUNUfE9GfE9GRnxPTig/OiBDT018IEVSUk9SfCBLRVl8IFRJTUVSKT98T1BFTnxPUEVSQVRPUnxPUFRJT04oPzogQkFTRSk/fE9QVElPTkFMfE9SfE9SRUxTRXxPVVR8T1ZFUkxPQURTfE9WRVJSSURBQkxFfE9WRVJSSURFU3xQQVJBTUFSUkFZfFBBUlRJQUx8UE9LRXxQUklWQVRFfFBST1BFUlRZfFBST1RFQ1RFRHxQVUJMSUN8UFVUfFJBSVNFRVZFTlR8UkVBRHxSRUFET05MWXxSRURJTXxSRU18UkVNT1ZFSEFORExFUnxSRVNUT1JFfFJFU1VNRXxSRVRVUk58Uk1ESVJ8UlNFVHxSVU58U0JZVEV8U0VMRUNUKD86IENBU0UpP3xTRVR8U0hBRE9XU3xTSEFSRUR8U0hFTEx8U0hPUlR8U0lOR0xFfFNMRUVQfFNUQVRJQ3xTVEVQfFNUT1B8U1RSSU5HfFNUUlVDVFVSRXxTVUJ8U1dBUHxTWU5DTE9DS3xTWVNURU18VEhFTnxUSFJPV3xUSU1FUnxUT3xUUk9GRnxUUk9OfFRSVUV8VFJZfFRSWUNBU1R8VFlQRXxUWVBFT0Z8VUlOVEVHRVJ8VUxPTkd8VU5MT0NLfFVOVElMfFVTSE9SVHxVU0lOR3xWSUVXIFBSSU5UfFdBSVR8V0VORHxXSEVOfFdISUxFfFdJREVOSU5HfFdJVEh8V0lUSEVWRU5UU3xXUklURXxXUklURU9OTFl8WE9SKXxcXEIoPzojQ09OU1R8I0VMU0V8I0VMU0VJRnwjRU5EfCNJRikpKD86XFwkfFxcYikvaSxcbiAgJ3B1bmN0dWF0aW9uJzogL1ssOzooKXt9XS9cbn0pO1xuXG5jb25zdCBsYW5ndWFnZXMgPSBbe1xuICBsYWJlbDogJ0MnLFxuICB2YWx1ZTogJ2MnXG59LCB7XG4gIGxhYmVsOiAnQysrJyxcbiAgdmFsdWU6ICdjcHAnXG59LCB7XG4gIGxhYmVsOiAnQXJkdWlubycsXG4gIHZhbHVlOiAnYXJkdWlubydcbn0sIHtcbiAgbGFiZWw6ICdCYXNoJyxcbiAgdmFsdWU6ICdiYXNoJ1xufSwge1xuICBsYWJlbDogJ0MjJyxcbiAgdmFsdWU6ICdjc2hhcnAnXG59LCB7XG4gIGxhYmVsOiAnQ1NTJyxcbiAgdmFsdWU6ICdjc3MnXG59LCB7XG4gIGxhYmVsOiAnRGlmZicsXG4gIHZhbHVlOiAnZGlmZidcbn0sIHtcbiAgbGFiZWw6ICdHbycsXG4gIHZhbHVlOiAnZ28nXG59LCB7XG4gIGxhYmVsOiAnSU5JJyxcbiAgdmFsdWU6ICdpbmknXG59LCB7XG4gIGxhYmVsOiAnSmF2YScsXG4gIHZhbHVlOiAnamF2YSdcbn0sIHtcbiAgbGFiZWw6ICdKYXZhU2NyaXB0JyxcbiAgdmFsdWU6ICdqYXZhc2NyaXB0J1xufSwge1xuICBsYWJlbDogJ0pTWCcsXG4gIHZhbHVlOiAnanN4J1xufSwge1xuICBsYWJlbDogJ0pTT04nLFxuICB2YWx1ZTogJ2pzb24nXG59LCB7XG4gIGxhYmVsOiAnS290bGluJyxcbiAgdmFsdWU6ICdrb3RsaW4nXG59LCB7XG4gIGxhYmVsOiAnTGVzcycsXG4gIHZhbHVlOiAnbGVzcydcbn0sIHtcbiAgbGFiZWw6ICdMdWEnLFxuICB2YWx1ZTogJ2x1YSdcbn0sIHtcbiAgbGFiZWw6ICdNYWtlZmlsZScsXG4gIHZhbHVlOiAnbWFrZWZpbGUnXG59LCB7XG4gIGxhYmVsOiAnTWFya2Rvd24nLFxuICB2YWx1ZTogJ21hcmtkb3duJ1xufSwge1xuICBsYWJlbDogJ09iamVjdGl2ZS1DJyxcbiAgdmFsdWU6ICdvYmplY3RpdmVjJ1xufSwge1xuICBsYWJlbDogJ1BlcmwnLFxuICB2YWx1ZTogJ3BlcmwnXG59LCB7XG4gIGxhYmVsOiAnUEhQJyxcbiAgdmFsdWU6ICdwaHAnXG59LCB7XG4gIGxhYmVsOiAnUHl0aG9uJyxcbiAgdmFsdWU6ICdweXRob24nXG59LCB7XG4gIGxhYmVsOiAnUicsXG4gIHZhbHVlOiAncidcbn0sIHtcbiAgbGFiZWw6ICdSdWJ5JyxcbiAgdmFsdWU6ICdydWJ5J1xufSwge1xuICBsYWJlbDogJ1J1c3QnLFxuICB2YWx1ZTogJ3J1c3QnXG59LCB7XG4gIGxhYmVsOiAnU2FzcycsXG4gIHZhbHVlOiAnc2Fzcydcbn0sIHtcbiAgbGFiZWw6ICdTQ1NTJyxcbiAgdmFsdWU6ICdzY3NzJ1xufSwge1xuICBsYWJlbDogJ1NRTCcsXG4gIHZhbHVlOiAnc3FsJ1xufSwge1xuICBsYWJlbDogJ1N3aWZ0JyxcbiAgdmFsdWU6ICdzd2lmdCdcbn0sIHtcbiAgbGFiZWw6ICdUeXBlU2NyaXB0JyxcbiAgdmFsdWU6ICd0eXBlc2NyaXB0J1xufSwge1xuICBsYWJlbDogJ1RTWCcsXG4gIHZhbHVlOiAndHN4J1xufSwge1xuICBsYWJlbDogJ1ZCLk5FVCcsXG4gIHZhbHVlOiAndmJuZXQnXG59LCB7XG4gIGxhYmVsOiAnWUFNTCcsXG4gIHZhbHVlOiAneWFtbCdcbn1dO1xuY29uc3QgY2Fub25pY2FsTmFtZVRvTGFiZWwgPSBuZXcgTWFwKGxhbmd1YWdlcy5tYXAoeCA9PiBbeC52YWx1ZSwgeC5sYWJlbF0pKTtcbmNvbnN0IGxhYmVsVG9DYW5vbmljYWxOYW1lID0gbmV3IE1hcChsYW5ndWFnZXMubWFwKHggPT4gW3gubGFiZWwsIHgudmFsdWVdKSk7XG5jb25zdCBsYW5ndWFnZVRvQ2Fub25pY2FsTmFtZSA9IG5ldyBNYXAobGFuZ3VhZ2VzLm1hcChsYW5nID0+IFtQcmlzbS5sYW5ndWFnZXNbbGFuZy52YWx1ZV0sIGxhbmcudmFsdWVdKSk7XG5jb25zdCBhbGlhc2VzVG9DYW5vbmljYWxOYW1lID0gbmV3IE1hcChPYmplY3Qua2V5cyhQcmlzbS5sYW5ndWFnZXMpLmZsYXRNYXAobGFuZyA9PiB7XG4gIGNvbnN0IGNhbm9uaWNhbE5hbWUgPSBsYW5ndWFnZVRvQ2Fub25pY2FsTmFtZS5nZXQoUHJpc20ubGFuZ3VhZ2VzW2xhbmddKTtcbiAgaWYgKGNhbm9uaWNhbE5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICByZXR1cm4gW1tsYW5nLCBjYW5vbmljYWxOYW1lXV07XG59KSk7XG5jb25zdCBsYW5ndWFnZXNUb0FsaWFzZXMgPSBuZXcgTWFwKGxhbmd1YWdlcy5tYXAobGFuZyA9PiBbbGFuZy52YWx1ZSwgW11dKSk7XG5mb3IgKGNvbnN0IFthbGlhcywgY2Fub25pY2FsTmFtZV0gb2YgYWxpYXNlc1RvQ2Fub25pY2FsTmFtZSkge1xuICBsYW5ndWFnZXNUb0FsaWFzZXMuZ2V0KGNhbm9uaWNhbE5hbWUpLnB1c2goYWxpYXMpO1xufVxuY29uc3QgbGFuZ3VhZ2VzV2l0aEFsaWFzZXMgPSBbe1xuICBsYWJlbDogJ1BsYWluIHRleHQnLFxuICB2YWx1ZTogJ3BsYWluJyxcbiAgYWxpYXNlczogW11cbn0sIC4uLlsuLi5sYW5ndWFnZXNUb0FsaWFzZXNdLm1hcCgoW2Nhbm9uaWNhbE5hbWUsIGFsaWFzZXNdKSA9PiAoe1xuICBsYWJlbDogY2Fub25pY2FsTmFtZVRvTGFiZWwuZ2V0KGNhbm9uaWNhbE5hbWUpLFxuICB2YWx1ZTogY2Fub25pY2FsTmFtZSxcbiAgYWxpYXNlc1xufSkpXTtcbmNvbnN0IGFsaWFzZXNUb0xhYmVsID0gbmV3IE1hcChbLi4uYWxpYXNlc1RvQ2Fub25pY2FsTmFtZV0ubWFwKChbYWxpYXMsIGNhbm9uaWNhbE5hbWVdKSA9PiBbYWxpYXMsIGNhbm9uaWNhbE5hbWVUb0xhYmVsLmdldChjYW5vbmljYWxOYW1lKV0pKTtcblxuY29uc3QgY29kZUJsb2NrU2hvcnRjdXRQYXR0ZXJuID0gL15gYGAoXFx3Kyk/ID8kLztcbmZ1bmN0aW9uIHdpdGhDb2RlQmxvY2soZG9jdW1lbnRGZWF0dXJlcywgY29tcG9uZW50QmxvY2tzLCBlZGl0b3IpIHtcbiAgY29uc3Qge1xuICAgIGluc2VydEJyZWFrLFxuICAgIG5vcm1hbGl6ZU5vZGUsXG4gICAgaW5zZXJ0VGV4dFxuICB9ID0gZWRpdG9yO1xuICBmdW5jdGlvbiBjb2RlQmxvY2tTaG9ydGN1dChibG9jaykge1xuICAgIHZhciBfYWxpYXNlc1RvQ2Fub25pY2FsTmE7XG4gICAgaWYgKChibG9jayA9PT0gbnVsbCB8fCBibG9jayA9PT0gdm9pZCAwID8gdm9pZCAwIDogYmxvY2tbMF0udHlwZSkgIT09ICdwYXJhZ3JhcGgnIHx8IGJsb2NrWzBdLmNoaWxkcmVuLmxlbmd0aCAhPT0gMSB8fCBibG9ja1swXS5jaGlsZHJlblswXS50eXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgbWF0Y2ggPSBjb2RlQmxvY2tTaG9ydGN1dFBhdHRlcm4uZXhlYyhibG9ja1swXS5jaGlsZHJlblswXS50ZXh0KTtcbiAgICBpZiAoIW1hdGNoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGxvY2F0aW9uRG9jdW1lbnRGZWF0dXJlcyA9IGdldEFuY2VzdG9yQ29tcG9uZW50Q2hpbGRGaWVsZERvY3VtZW50RmVhdHVyZXMoZWRpdG9yLCBkb2N1bWVudEZlYXR1cmVzLCBjb21wb25lbnRCbG9ja3MpO1xuICAgIGlmIChsb2NhdGlvbkRvY3VtZW50RmVhdHVyZXMgJiYgKGxvY2F0aW9uRG9jdW1lbnRGZWF0dXJlcy5raW5kID09PSAnaW5saW5lJyB8fCAhbG9jYXRpb25Eb2N1bWVudEZlYXR1cmVzLmRvY3VtZW50RmVhdHVyZXMuZm9ybWF0dGluZy5ibG9ja1R5cGVzLmNvZGUpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gc28gdGhhdCB0aGlzIHN0YXJ0cyBhIG5ldyB1bmRvIGdyb3VwXG4gICAgZWRpdG9yLmhpc3RvcnkudW5kb3MucHVzaCh7XG4gICAgICBvcGVyYXRpb25zOiBbXSxcbiAgICAgIHNlbGVjdGlvbkJlZm9yZTogZWRpdG9yLnNlbGVjdGlvblxuICAgIH0pO1xuICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgYmxvY2tbMV0pO1xuICAgIFRyYW5zZm9ybXMuZGVsZXRlKGVkaXRvcik7XG4gICAgVHJhbnNmb3Jtcy53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICB0eXBlOiAnY29kZScsXG4gICAgICAuLi4obWF0Y2hbMV0gPyB7XG4gICAgICAgIGxhbmd1YWdlOiAoX2FsaWFzZXNUb0Nhbm9uaWNhbE5hID0gYWxpYXNlc1RvQ2Fub25pY2FsTmFtZS5nZXQobWF0Y2hbMV0udG9Mb3dlckNhc2UoKSkpICE9PSBudWxsICYmIF9hbGlhc2VzVG9DYW5vbmljYWxOYSAhPT0gdm9pZCAwID8gX2FsaWFzZXNUb0Nhbm9uaWNhbE5hIDogbWF0Y2hbMV1cbiAgICAgIH0gOiB7fSksXG4gICAgICBjaGlsZHJlbjogW11cbiAgICB9LCB7XG4gICAgICBtYXRjaDogbm9kZSA9PiBub2RlLnR5cGUgPT09ICdwYXJhZ3JhcGgnXG4gICAgfSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgZWRpdG9yLmluc2VydEJyZWFrID0gKCkgPT4ge1xuICAgIGNvbnN0IGJsb2NrID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgICAgbWF0Y2g6IGlzQmxvY2tcbiAgICB9KTtcbiAgICBpZiAoKGJsb2NrID09PSBudWxsIHx8IGJsb2NrID09PSB2b2lkIDAgPyB2b2lkIDAgOiBibG9ja1swXS50eXBlKSA9PT0gJ2NvZGUnICYmIFRleHQuaXNUZXh0KGJsb2NrWzBdLmNoaWxkcmVuWzBdKSkge1xuICAgICAgY29uc3QgdGV4dCA9IGJsb2NrWzBdLmNoaWxkcmVuWzBdLnRleHQ7XG4gICAgICBpZiAodGV4dFt0ZXh0Lmxlbmd0aCAtIDFdID09PSAnXFxuJyAmJiBlZGl0b3Iuc2VsZWN0aW9uICYmIFJhbmdlLmlzQ29sbGFwc2VkKGVkaXRvci5zZWxlY3Rpb24pICYmIFBvaW50LmVxdWFscyhFZGl0b3IuZW5kKGVkaXRvciwgYmxvY2tbMV0pLCBlZGl0b3Iuc2VsZWN0aW9uLmFuY2hvcikpIHtcbiAgICAgICAgaW5zZXJ0QnJlYWsoKTtcbiAgICAgICAgVHJhbnNmb3Jtcy5zZXROb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICB0eXBlOiAncGFyYWdyYXBoJyxcbiAgICAgICAgICBjaGlsZHJlbjogW11cbiAgICAgICAgfSk7XG4gICAgICAgIFRyYW5zZm9ybXMuZGVsZXRlKGVkaXRvciwge1xuICAgICAgICAgIGRpc3RhbmNlOiAxLFxuICAgICAgICAgIGF0OiB7XG4gICAgICAgICAgICBwYXRoOiBbLi4uYmxvY2tbMV0sIDBdLFxuICAgICAgICAgICAgb2Zmc2V0OiB0ZXh0Lmxlbmd0aCAtIDFcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBlZGl0b3IuaW5zZXJ0VGV4dCgnXFxuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChlZGl0b3Iuc2VsZWN0aW9uICYmIFJhbmdlLmlzQ29sbGFwc2VkKGVkaXRvci5zZWxlY3Rpb24pICYmIGNvZGVCbG9ja1Nob3J0Y3V0KGJsb2NrKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpbnNlcnRCcmVhaygpO1xuICB9O1xuICBlZGl0b3IuaW5zZXJ0VGV4dCA9IHRleHQgPT4ge1xuICAgIGluc2VydFRleHQodGV4dCk7XG4gICAgaWYgKHRleHQgPT09ICcgJyAmJiBlZGl0b3Iuc2VsZWN0aW9uICYmIFJhbmdlLmlzQ29sbGFwc2VkKGVkaXRvci5zZWxlY3Rpb24pKSB7XG4gICAgICBjb2RlQmxvY2tTaG9ydGN1dChFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgICAgIG1hdGNoOiBpc0Jsb2NrXG4gICAgICB9KSk7XG4gICAgfVxuICB9O1xuICBlZGl0b3Iubm9ybWFsaXplTm9kZSA9IChbbm9kZSwgcGF0aF0pID0+IHtcbiAgICBpZiAobm9kZS50eXBlID09PSAnY29kZScgJiYgRWxlbWVudCQxLmlzRWxlbWVudChub2RlKSkge1xuICAgICAgZm9yIChjb25zdCBbaW5kZXgsIGNoaWxkTm9kZV0gb2Ygbm9kZS5jaGlsZHJlbi5lbnRyaWVzKCkpIHtcbiAgICAgICAgaWYgKCFUZXh0LmlzVGV4dChjaGlsZE5vZGUpKSB7XG4gICAgICAgICAgaWYgKGVkaXRvci5pc1ZvaWQoY2hpbGROb2RlKSkge1xuICAgICAgICAgICAgVHJhbnNmb3Jtcy5yZW1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgYXQ6IFsuLi5wYXRoLCBpbmRleF1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBUcmFuc2Zvcm1zLnVud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgICBhdDogWy4uLnBhdGgsIGluZGV4XVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtYXJrcyA9IE9iamVjdC5rZXlzKGNoaWxkTm9kZSkuZmlsdGVyKHggPT4geCAhPT0gJ3RleHQnKTtcbiAgICAgICAgaWYgKG1hcmtzLmxlbmd0aCkge1xuICAgICAgICAgIFRyYW5zZm9ybXMudW5zZXROb2RlcyhlZGl0b3IsIG1hcmtzLCB7XG4gICAgICAgICAgICBhdDogWy4uLnBhdGgsIGluZGV4XVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBub3JtYWxpemVOb2RlKFtub2RlLCBwYXRoXSk7XG4gIH07XG4gIHJldHVybiBlZGl0b3I7XG59XG5cbmZ1bmN0aW9uIGZpbmRDaGlsZFByb3BQYXRoc0ZvclByb3AodmFsdWUsIHNjaGVtYSwgcGF0aCkge1xuICBzd2l0Y2ggKHNjaGVtYS5raW5kKSB7XG4gICAgY2FzZSAnZm9ybSc6XG4gICAgICByZXR1cm4gW107XG4gICAgY2FzZSAnY2hpbGQnOlxuICAgICAgcmV0dXJuIFt7XG4gICAgICAgIHBhdGg6IHBhdGgsXG4gICAgICAgIG9wdGlvbnM6IHNjaGVtYS5vcHRpb25zXG4gICAgICB9XTtcbiAgICBjYXNlICdjb25kaXRpb25hbCc6XG4gICAgICByZXR1cm4gZmluZENoaWxkUHJvcFBhdGhzRm9yUHJvcCh2YWx1ZS52YWx1ZSwgc2NoZW1hLnZhbHVlc1t2YWx1ZS5kaXNjcmltaW5hbnRdLCBwYXRoLmNvbmNhdCgndmFsdWUnKSk7XG4gICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgIHtcbiAgICAgICAgY29uc3QgcGF0aHMgPSBbXTtcbiAgICAgICAgT2JqZWN0LmtleXMoc2NoZW1hLmZpZWxkcykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgIHBhdGhzLnB1c2goLi4uZmluZENoaWxkUHJvcFBhdGhzRm9yUHJvcCh2YWx1ZVtrZXldLCBzY2hlbWEuZmllbGRzW2tleV0sIHBhdGguY29uY2F0KGtleSkpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwYXRocztcbiAgICAgIH1cbiAgICBjYXNlICdhcnJheSc6XG4gICAgICB7XG4gICAgICAgIGNvbnN0IHBhdGhzID0gW107XG4gICAgICAgIHZhbHVlLmZvckVhY2goKHZhbCwgaSkgPT4ge1xuICAgICAgICAgIHBhdGhzLnB1c2goLi4uZmluZENoaWxkUHJvcFBhdGhzRm9yUHJvcCh2YWwsIHNjaGVtYS5lbGVtZW50LCBwYXRoLmNvbmNhdChpKSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHBhdGhzO1xuICAgICAgfVxuICB9XG59XG5mdW5jdGlvbiBmaW5kQ2hpbGRQcm9wUGF0aHModmFsdWUsIHByb3BzKSB7XG4gIGNvbnN0IHByb3BQYXRocyA9IGZpbmRDaGlsZFByb3BQYXRoc0ZvclByb3AodmFsdWUsIHtcbiAgICBraW5kOiAnb2JqZWN0JyxcbiAgICBmaWVsZHM6IHByb3BzXG4gIH0sIFtdKTtcbiAgaWYgKCFwcm9wUGF0aHMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIFt7XG4gICAgICBwYXRoOiB1bmRlZmluZWQsXG4gICAgICBvcHRpb25zOiB7XG4gICAgICAgIGtpbmQ6ICdpbmxpbmUnLFxuICAgICAgICBwbGFjZWhvbGRlcjogJydcbiAgICAgIH1cbiAgICB9XTtcbiAgfVxuICByZXR1cm4gcHJvcFBhdGhzO1xufVxuXG5mdW5jdGlvbiBnZXRBbmNlc3RvckNvbXBvbmVudEJsb2NrKGVkaXRvcikge1xuICBpZiAoZWRpdG9yLnNlbGVjdGlvbikge1xuICAgIGNvbnN0IGFuY2VzdG9yRW50cnkgPSBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgICBtYXRjaDogbm9kZSA9PiBpc0Jsb2NrKG5vZGUpICYmIG5vZGUudHlwZSAhPT0gJ3BhcmFncmFwaCdcbiAgICB9KTtcbiAgICBpZiAoYW5jZXN0b3JFbnRyeSAmJiAoYW5jZXN0b3JFbnRyeVswXS50eXBlID09PSAnY29tcG9uZW50LWJsb2NrLXByb3AnIHx8IGFuY2VzdG9yRW50cnlbMF0udHlwZSA9PT0gJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCcpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc0luc2lkZTogdHJ1ZSxcbiAgICAgICAgY29tcG9uZW50QmxvY2s6IEVkaXRvci5wYXJlbnQoZWRpdG9yLCBhbmNlc3RvckVudHJ5WzFdKSxcbiAgICAgICAgcHJvcDogYW5jZXN0b3JFbnRyeVxuICAgICAgfTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBpc0luc2lkZTogZmFsc2VcbiAgfTtcbn1cbmNvbnN0IGFscmVhZHlOb3JtYWxpemVkVGhpbmdzID0gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIG5vcm1hbGl6ZU5vZGVXaXRoaW5Db21wb25lbnRQcm9wKFtub2RlLCBwYXRoXSwgZWRpdG9yLCBmaWVsZE9wdGlvbnMpIHtcbiAgbGV0IGFscmVhZHlOb3JtYWxpemVkTm9kZXMgPSBhbHJlYWR5Tm9ybWFsaXplZFRoaW5ncy5nZXQoZmllbGRPcHRpb25zKTtcbiAgaWYgKCFhbHJlYWR5Tm9ybWFsaXplZE5vZGVzKSB7XG4gICAgYWxyZWFkeU5vcm1hbGl6ZWROb2RlcyA9IG5ldyBXZWFrU2V0KCk7XG4gICAgYWxyZWFkeU5vcm1hbGl6ZWRUaGluZ3Muc2V0KGZpZWxkT3B0aW9ucywgYWxyZWFkeU5vcm1hbGl6ZWROb2Rlcyk7XG4gIH1cbiAgaWYgKGFscmVhZHlOb3JtYWxpemVkTm9kZXMuaGFzKG5vZGUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGxldCBkaWROb3JtYWxpemF0aW9uID0gZmFsc2U7XG4gIGlmIChmaWVsZE9wdGlvbnMuaW5saW5lTWFya3MgIT09ICdpbmhlcml0JyAmJiBUZXh0LmlzVGV4dChub2RlKSkge1xuICAgIGRpZE5vcm1hbGl6YXRpb24gPSBub3JtYWxpemVUZXh0QmFzZWRPbklubGluZU1hcmtzQW5kU29mdEJyZWFrcyhbbm9kZSwgcGF0aF0sIGVkaXRvciwgZmllbGRPcHRpb25zLmlubGluZU1hcmtzLCBmaWVsZE9wdGlvbnMuc29mdEJyZWFrcyk7XG4gIH1cbiAgaWYgKEVsZW1lbnQkMS5pc0VsZW1lbnQobm9kZSkpIHtcbiAgICBsZXQgY2hpbGRyZW5IYXNDaGFuZ2VkID0gbm9kZS5jaGlsZHJlbi5tYXAoKG5vZGUsIGkpID0+IG5vcm1hbGl6ZU5vZGVXaXRoaW5Db21wb25lbnRQcm9wKFtub2RlLCBbLi4ucGF0aCwgaV1dLCBlZGl0b3IsIGZpZWxkT3B0aW9ucykpXG4gICAgLy8gLm1hcCB0aGVuIC5zb21lIGJlY2F1c2Ugd2UgZG9uJ3Qgd2FudCB0byBleGl0IGVhcmx5XG4gICAgLnNvbWUoeCA9PiB4KTtcbiAgICBpZiAoZmllbGRPcHRpb25zLmtpbmQgPT09ICdibG9jaycpIHtcbiAgICAgIGlmIChub2RlLnR5cGUgPT09ICdjb21wb25lbnQtYmxvY2snKSB7XG4gICAgICAgIGlmICghZmllbGRPcHRpb25zLmNvbXBvbmVudEJsb2Nrcykge1xuICAgICAgICAgIFRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICBhdDogcGF0aFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRpZE5vcm1hbGl6YXRpb24gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkaWROb3JtYWxpemF0aW9uID0gbm9ybWFsaXplRWxlbWVudEJhc2VkT25Eb2N1bWVudEZlYXR1cmVzKFtub2RlLCBwYXRoXSwgZWRpdG9yLCBmaWVsZE9wdGlvbnMuZG9jdW1lbnRGZWF0dXJlcykgfHwgY2hpbGRyZW5IYXNDaGFuZ2VkO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBkaWROb3JtYWxpemF0aW9uID0gbm9ybWFsaXplSW5saW5lQmFzZWRPbkxpbmtzKFtub2RlLCBwYXRoXSwgZWRpdG9yLCBmaWVsZE9wdGlvbnMuZG9jdW1lbnRGZWF0dXJlcy5saW5rcyk7XG4gICAgfVxuICB9XG4gIGlmIChkaWROb3JtYWxpemF0aW9uID09PSBmYWxzZSkge1xuICAgIGFscmVhZHlOb3JtYWxpemVkTm9kZXMuYWRkKG5vZGUpO1xuICB9XG4gIHJldHVybiBkaWROb3JtYWxpemF0aW9uO1xufVxuZnVuY3Rpb24gY2FuU2NoZW1hQ29udGFpbkNoaWxkRmllbGQocm9vdFNjaGVtYSkge1xuICBjb25zdCBxdWV1ZSA9IG5ldyBTZXQoW3Jvb3RTY2hlbWFdKTtcbiAgZm9yIChjb25zdCBzY2hlbWEgb2YgcXVldWUpIHtcbiAgICBpZiAoc2NoZW1hLmtpbmQgPT09ICdmb3JtJykgOyBlbHNlIGlmIChzY2hlbWEua2luZCA9PT0gJ2NoaWxkJykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmIChzY2hlbWEua2luZCA9PT0gJ2FycmF5Jykge1xuICAgICAgcXVldWUuYWRkKHNjaGVtYS5lbGVtZW50KTtcbiAgICB9IGVsc2UgaWYgKHNjaGVtYS5raW5kID09PSAnb2JqZWN0Jykge1xuICAgICAgZm9yIChjb25zdCBpbm5lclByb3Agb2YgT2JqZWN0LnZhbHVlcyhzY2hlbWEuZmllbGRzKSkge1xuICAgICAgICBxdWV1ZS5hZGQoaW5uZXJQcm9wKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHNjaGVtYS5raW5kID09PSAnY29uZGl0aW9uYWwnKSB7XG4gICAgICBmb3IgKGNvbnN0IGlubmVyUHJvcCBvZiBPYmplY3QudmFsdWVzKHNjaGVtYS52YWx1ZXMpKSB7XG4gICAgICAgIHF1ZXVlLmFkZChpbm5lclByb3ApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBhc3NlcnROZXZlcihzY2hlbWEpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBkb2VzU2NoZW1hT25seUV2ZXJDb250YWluQVNpbmdsZUNoaWxkRmllbGQocm9vdFNjaGVtYSkge1xuICBjb25zdCBxdWV1ZSA9IG5ldyBTZXQoW3Jvb3RTY2hlbWFdKTtcbiAgbGV0IGhhc0ZvdW5kQ2hpbGRGaWVsZCA9IGZhbHNlO1xuICBmb3IgKGNvbnN0IHNjaGVtYSBvZiBxdWV1ZSkge1xuICAgIGlmIChzY2hlbWEua2luZCA9PT0gJ2Zvcm0nKSA7IGVsc2UgaWYgKHNjaGVtYS5raW5kID09PSAnY2hpbGQnKSB7XG4gICAgICBpZiAoaGFzRm91bmRDaGlsZEZpZWxkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGhhc0ZvdW5kQ2hpbGRGaWVsZCA9IHRydWU7XG4gICAgfSBlbHNlIGlmIChzY2hlbWEua2luZCA9PT0gJ2FycmF5Jykge1xuICAgICAgaWYgKGNhblNjaGVtYUNvbnRhaW5DaGlsZEZpZWxkKHNjaGVtYS5lbGVtZW50KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChzY2hlbWEua2luZCA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGZvciAoY29uc3QgaW5uZXJQcm9wIG9mIE9iamVjdC52YWx1ZXMoc2NoZW1hLmZpZWxkcykpIHtcbiAgICAgICAgcXVldWUuYWRkKGlubmVyUHJvcCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChzY2hlbWEua2luZCA9PT0gJ2NvbmRpdGlvbmFsJykge1xuICAgICAgZm9yIChjb25zdCBpbm5lclByb3Agb2YgT2JqZWN0LnZhbHVlcyhzY2hlbWEudmFsdWVzKSkge1xuICAgICAgICBxdWV1ZS5hZGQoaW5uZXJQcm9wKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYXNzZXJ0TmV2ZXIoc2NoZW1hKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGhhc0ZvdW5kQ2hpbGRGaWVsZDtcbn1cbmZ1bmN0aW9uIGZpbmRBcnJheUZpZWxkc1dpdGhTaW5nbGVDaGlsZEZpZWxkKHNjaGVtYSwgdmFsdWUpIHtcbiAgY29uc3QgcHJvcFBhdGhzID0gW107XG4gIHRyYXZlcnNlUHJvcHMoc2NoZW1hLCB2YWx1ZSwgKHNjaGVtYSwgdmFsdWUsIHBhdGgpID0+IHtcbiAgICBpZiAoc2NoZW1hLmtpbmQgPT09ICdhcnJheScgJiYgZG9lc1NjaGVtYU9ubHlFdmVyQ29udGFpbkFTaW5nbGVDaGlsZEZpZWxkKHNjaGVtYS5lbGVtZW50KSkge1xuICAgICAgcHJvcFBhdGhzLnB1c2goW3BhdGgsIHNjaGVtYV0pO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBwcm9wUGF0aHM7XG59XG5mdW5jdGlvbiBpc0VtcHR5Q2hpbGRGaWVsZE5vZGUoZWxlbWVudCkge1xuICBjb25zdCBmaXJzdENoaWxkID0gZWxlbWVudC5jaGlsZHJlblswXTtcbiAgcmV0dXJuIGVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoID09PSAxICYmIChlbGVtZW50LnR5cGUgPT09ICdjb21wb25lbnQtaW5saW5lLXByb3AnICYmIGZpcnN0Q2hpbGQudHlwZSA9PT0gdW5kZWZpbmVkICYmIGZpcnN0Q2hpbGQudGV4dCA9PT0gJycgfHwgZWxlbWVudC50eXBlID09PSAnY29tcG9uZW50LWJsb2NrLXByb3AnICYmIGZpcnN0Q2hpbGQudHlwZSA9PT0gJ3BhcmFncmFwaCcgJiYgZmlyc3RDaGlsZC5jaGlsZHJlbi5sZW5ndGggPT09IDEgJiYgZmlyc3RDaGlsZC5jaGlsZHJlblswXS50eXBlID09PSB1bmRlZmluZWQgJiYgZmlyc3RDaGlsZC5jaGlsZHJlblswXS50ZXh0ID09PSAnJyk7XG59XG5mdW5jdGlvbiB3aXRoQ29tcG9uZW50QmxvY2tzKGJsb2NrQ29tcG9uZW50cywgZWRpdG9yRG9jdW1lbnRGZWF0dXJlcywgZWRpdG9yKSB7XG4gIC8vIG5vdGUgdGhhdCBjb25mbGljdHMgYmV0d2VlbiB0aGUgZWRpdG9yIGRvY3VtZW50IGZlYXR1cmVzXG4gIC8vIGFuZCB0aGUgY2hpbGQgZmllbGQgZG9jdW1lbnQgZmVhdHVyZXMgYXJlIGRlYWx0IHdpdGggZWxzZXdoZXJlXG4gIGNvbnN0IG1lbW9pemVkR2V0RG9jdW1lbnRGZWF0dXJlc0ZvckNoaWxkRmllbGQgPSB3ZWFrTWVtb2l6ZShvcHRpb25zID0+IHtcbiAgICByZXR1cm4gZ2V0RG9jdW1lbnRGZWF0dXJlc0ZvckNoaWxkRmllbGQoZWRpdG9yRG9jdW1lbnRGZWF0dXJlcywgb3B0aW9ucyk7XG4gIH0pO1xuICBjb25zdCB7XG4gICAgbm9ybWFsaXplTm9kZSxcbiAgICBkZWxldGVCYWNrd2FyZCxcbiAgICBpbnNlcnRCcmVha1xuICB9ID0gZWRpdG9yO1xuICBlZGl0b3IuZGVsZXRlQmFja3dhcmQgPSB1bml0ID0+IHtcbiAgICBpZiAoZWRpdG9yLnNlbGVjdGlvbikge1xuICAgICAgY29uc3QgYW5jZXN0b3JDb21wb25lbnRCbG9jayA9IGdldEFuY2VzdG9yQ29tcG9uZW50QmxvY2soZWRpdG9yKTtcbiAgICAgIGlmIChhbmNlc3RvckNvbXBvbmVudEJsb2NrLmlzSW5zaWRlICYmIFJhbmdlLmlzQ29sbGFwc2VkKGVkaXRvci5zZWxlY3Rpb24pICYmIEVkaXRvci5pc1N0YXJ0KGVkaXRvciwgZWRpdG9yLnNlbGVjdGlvbi5hbmNob3IsIGFuY2VzdG9yQ29tcG9uZW50QmxvY2sucHJvcFsxXSkgJiYgYW5jZXN0b3JDb21wb25lbnRCbG9jay5wcm9wWzFdW2FuY2VzdG9yQ29tcG9uZW50QmxvY2sucHJvcFsxXS5sZW5ndGggLSAxXSA9PT0gMCkge1xuICAgICAgICBUcmFuc2Zvcm1zLnVud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgIGF0OiBhbmNlc3RvckNvbXBvbmVudEJsb2NrLmNvbXBvbmVudEJsb2NrWzFdXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIGRlbGV0ZUJhY2t3YXJkKHVuaXQpO1xuICB9O1xuICBlZGl0b3IuaW5zZXJ0QnJlYWsgPSAoKSA9PiB7XG4gICAgY29uc3QgYW5jZXN0b3JDb21wb25lbnRCbG9jayA9IGdldEFuY2VzdG9yQ29tcG9uZW50QmxvY2soZWRpdG9yKTtcbiAgICBpZiAoZWRpdG9yLnNlbGVjdGlvbiAmJiBhbmNlc3RvckNvbXBvbmVudEJsb2NrLmlzSW5zaWRlKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHByb3A6IFtjb21wb25lbnRQcm9wTm9kZSwgY29tcG9uZW50UHJvcFBhdGhdLFxuICAgICAgICBjb21wb25lbnRCbG9jazogW2NvbXBvbmVudEJsb2NrTm9kZSwgY29tcG9uZW50QmxvY2tQYXRoXVxuICAgICAgfSA9IGFuY2VzdG9yQ29tcG9uZW50QmxvY2s7XG4gICAgICBjb25zdCBpc0xhc3RQcm9wID0gY29tcG9uZW50UHJvcFBhdGhbY29tcG9uZW50UHJvcFBhdGgubGVuZ3RoIC0gMV0gPT09IGNvbXBvbmVudEJsb2NrTm9kZS5jaGlsZHJlbi5sZW5ndGggLSAxO1xuICAgICAgaWYgKGNvbXBvbmVudFByb3BOb2RlLnR5cGUgPT09ICdjb21wb25lbnQtYmxvY2stcHJvcCcpIHtcbiAgICAgICAgY29uc3QgW1twYXJhZ3JhcGhOb2RlLCBwYXJhZ3JhcGhQYXRoXV0gPSBFZGl0b3Iubm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgbWF0Y2g6IG5vZGUgPT4gbm9kZS50eXBlID09PSAncGFyYWdyYXBoJ1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgaXNMYXN0UGFyYWdyYXBoID0gcGFyYWdyYXBoUGF0aFtwYXJhZ3JhcGhQYXRoLmxlbmd0aCAtIDFdID09PSBjb21wb25lbnRQcm9wTm9kZS5jaGlsZHJlbi5sZW5ndGggLSAxO1xuICAgICAgICBpZiAoTm9kZS5zdHJpbmcocGFyYWdyYXBoTm9kZSkgPT09ICcnICYmIGlzTGFzdFBhcmFncmFwaCkge1xuICAgICAgICAgIGlmIChpc0xhc3RQcm9wKSB7XG4gICAgICAgICAgICBUcmFuc2Zvcm1zLm1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgYXQ6IHBhcmFncmFwaFBhdGgsXG4gICAgICAgICAgICAgIHRvOiBQYXRoLm5leHQoYW5jZXN0b3JDb21wb25lbnRCbG9jay5jb21wb25lbnRCbG9ja1sxXSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBUcmFuc2Zvcm1zLm1vdmUoZWRpdG9yLCB7XG4gICAgICAgICAgICAgIGRpc3RhbmNlOiAxLFxuICAgICAgICAgICAgICB1bml0OiAnbGluZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgVHJhbnNmb3Jtcy5yZW1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgYXQ6IHBhcmFncmFwaFBhdGhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChjb21wb25lbnRQcm9wTm9kZS50eXBlID09PSAnY29tcG9uZW50LWlubGluZS1wcm9wJykge1xuICAgICAgICBFZGl0b3Iud2l0aG91dE5vcm1hbGl6aW5nKGVkaXRvciwgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNvbXBvbmVudEJsb2NrID0gYmxvY2tDb21wb25lbnRzW2NvbXBvbmVudEJsb2NrTm9kZS5jb21wb25lbnRdO1xuICAgICAgICAgIGlmIChjb21wb25lbnRQcm9wTm9kZS5wcm9wUGF0aCAhPT0gdW5kZWZpbmVkICYmIGNvbXBvbmVudEJsb2NrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJvb3RTY2hlbWEgPSB7XG4gICAgICAgICAgICAgIGtpbmQ6ICdvYmplY3QnLFxuICAgICAgICAgICAgICBmaWVsZHM6IGNvbXBvbmVudEJsb2NrLnNjaGVtYVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGFuY2VzdG9yRmllbGRzID0gZ2V0QW5jZXN0b3JTY2hlbWFzKHJvb3RTY2hlbWEsIGNvbXBvbmVudFByb3BOb2RlLnByb3BQYXRoLCBjb21wb25lbnRCbG9ja05vZGUucHJvcHMpO1xuICAgICAgICAgICAgY29uc3QgaWR4ID0gWy4uLmFuY2VzdG9yRmllbGRzXS5yZXZlcnNlKCkuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5raW5kID09PSAnYXJyYXknKTtcbiAgICAgICAgICAgIGlmIChpZHggIT09IC0xKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGFycmF5RmllbGRJZHggPSBhbmNlc3RvckZpZWxkcy5sZW5ndGggLSAxIC0gaWR4O1xuICAgICAgICAgICAgICBjb25zdCBhcnJheUZpZWxkID0gYW5jZXN0b3JGaWVsZHNbYXJyYXlGaWVsZElkeF07XG4gICAgICAgICAgICAgIGFzc2VydChhcnJheUZpZWxkLmtpbmQgPT09ICdhcnJheScpO1xuICAgICAgICAgICAgICBjb25zdCB2YWwgPSBnZXRWYWx1ZUF0UHJvcFBhdGgoY29tcG9uZW50QmxvY2tOb2RlLnByb3BzLCBjb21wb25lbnRQcm9wTm9kZS5wcm9wUGF0aC5zbGljZSgwLCBhcnJheUZpZWxkSWR4KSk7XG4gICAgICAgICAgICAgIGlmIChkb2VzU2NoZW1hT25seUV2ZXJDb250YWluQVNpbmdsZUNoaWxkRmllbGQoYXJyYXlGaWVsZC5lbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIGlmIChOb2RlLnN0cmluZyhjb21wb25lbnRQcm9wTm9kZSkgPT09ICcnICYmIHZhbC5sZW5ndGggLSAxID09PSBjb21wb25lbnRQcm9wTm9kZS5wcm9wUGF0aFthcnJheUZpZWxkSWR4XSkge1xuICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5yZW1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgICAgICAgYXQ6IGNvbXBvbmVudFByb3BQYXRoXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIGlmIChpc0xhc3RQcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3BhcmFncmFwaCcsXG4gICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnJ1xuICAgICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICBhdDogUGF0aC5uZXh0KGNvbXBvbmVudEJsb2NrUGF0aClcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgUGF0aC5uZXh0KGNvbXBvbmVudEJsb2NrUGF0aCkpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5tb3ZlKGVkaXRvciwge1xuICAgICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlOiAxLFxuICAgICAgICAgICAgICAgICAgICAgIHVuaXQ6ICdsaW5lJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgaW5zZXJ0QnJlYWsoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIFRyYW5zZm9ybXMuc3BsaXROb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgIGFsd2F5czogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnN0IHNwbGl0Tm9kZVBhdGggPSBQYXRoLm5leHQoY29tcG9uZW50UHJvcFBhdGgpO1xuICAgICAgICAgIGlmIChpc0xhc3RQcm9wKSB7XG4gICAgICAgICAgICBUcmFuc2Zvcm1zLm1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgYXQ6IHNwbGl0Tm9kZVBhdGgsXG4gICAgICAgICAgICAgIHRvOiBQYXRoLm5leHQoY29tcG9uZW50QmxvY2tQYXRoKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1vdmVDaGlsZHJlbihlZGl0b3IsIHNwbGl0Tm9kZVBhdGgsIFsuLi5QYXRoLm5leHQoc3BsaXROb2RlUGF0aCksIDBdKTtcbiAgICAgICAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgIGF0OiBzcGxpdE5vZGVQYXRoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIGluc2VydEJyZWFrKCk7XG4gIH07XG4gIGVkaXRvci5ub3JtYWxpemVOb2RlID0gZW50cnkgPT4ge1xuICAgIGNvbnN0IFtub2RlLCBwYXRoXSA9IGVudHJ5O1xuICAgIGlmIChub2RlLnR5cGUgPT09ICdjb21wb25lbnQtaW5saW5lLXByb3AnICYmICFub2RlLnByb3BQYXRoICYmIChub2RlLmNoaWxkcmVuLmxlbmd0aCAhPT0gMSB8fCAhVGV4dC5pc1RleHQobm9kZS5jaGlsZHJlblswXSkgfHwgbm9kZS5jaGlsZHJlblswXS50ZXh0ICE9PSAnJykpIHtcbiAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgIGF0OiBwYXRoXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG5vZGUudHlwZSA9PT0gJ2NvbXBvbmVudC1ibG9jaycpIHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudEJsb2NrID0gYmxvY2tDb21wb25lbnRzW25vZGUuY29tcG9uZW50XTtcbiAgICAgIGlmIChjb21wb25lbnRCbG9jaykge1xuICAgICAgICBjb25zdCByb290U2NoZW1hID0ge1xuICAgICAgICAgIGtpbmQ6ICdvYmplY3QnLFxuICAgICAgICAgIGZpZWxkczogY29tcG9uZW50QmxvY2suc2NoZW1hXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRQcm9wcyA9IGFkZE1pc3NpbmdGaWVsZHMobm9kZS5wcm9wcywgcm9vdFNjaGVtYSk7XG4gICAgICAgIGlmICh1cGRhdGVkUHJvcHMgIT09IG5vZGUucHJvcHMpIHtcbiAgICAgICAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgcHJvcHM6IHVwZGF0ZWRQcm9wc1xuICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgIGF0OiBwYXRoXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgW3Byb3BQYXRoLCBhcnJheUZpZWxkXSBvZiBmaW5kQXJyYXlGaWVsZHNXaXRoU2luZ2xlQ2hpbGRGaWVsZChyb290U2NoZW1hLCBub2RlLnByb3BzKSkge1xuICAgICAgICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJiBub2RlLmNoaWxkcmVuWzBdLnR5cGUgPT09ICdjb21wb25lbnQtaW5saW5lLXByb3AnICYmIG5vZGUuY2hpbGRyZW5bMF0ucHJvcFBhdGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IG5vZGVzV2l0aGluID0gW107XG4gICAgICAgICAgZm9yIChjb25zdCBbaWR4LCBjaGlsZE5vZGVdIG9mIG5vZGUuY2hpbGRyZW4uZW50cmllcygpKSB7XG4gICAgICAgICAgICBpZiAoKGNoaWxkTm9kZS50eXBlID09PSAnY29tcG9uZW50LWJsb2NrLXByb3AnIHx8IGNoaWxkTm9kZS50eXBlID09PSAnY29tcG9uZW50LWlubGluZS1wcm9wJykgJiYgY2hpbGROb2RlLnByb3BQYXRoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgY29uc3Qgc3ViUGF0aCA9IGNoaWxkTm9kZS5wcm9wUGF0aC5jb25jYXQoKTtcbiAgICAgICAgICAgICAgd2hpbGUgKHN1YlBhdGgubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzdWJQYXRoLnBvcCgpID09PSAnbnVtYmVyJykgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGFyZUFycmF5c0VxdWFsKHByb3BQYXRoLCBzdWJQYXRoKSkge1xuICAgICAgICAgICAgICAgIG5vZGVzV2l0aGluLnB1c2goW2lkeCwgY2hpbGROb2RlXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgYXJyVmFsID0gZ2V0VmFsdWVBdFByb3BQYXRoKG5vZGUucHJvcHMsIHByb3BQYXRoKTtcbiAgICAgICAgICBjb25zdCBwcmV2S2V5cyA9IGdldEtleXNGb3JBcnJheVZhbHVlKGFyclZhbCk7XG4gICAgICAgICAgY29uc3QgcHJldktleXNTZXQgPSBuZXcgU2V0KHByZXZLZXlzKTtcbiAgICAgICAgICBjb25zdCBhbHJlYWR5VXNlZEluZGljaWVzID0gbmV3IFNldCgpO1xuICAgICAgICAgIGNvbnN0IG5ld1ZhbCA9IFtdO1xuICAgICAgICAgIGNvbnN0IG5ld0tleXMgPSBbXTtcbiAgICAgICAgICBjb25zdCBnZXROZXdLZXkgPSAoKSA9PiB7XG4gICAgICAgICAgICBsZXQga2V5ID0gZ2V0TmV3QXJyYXlFbGVtZW50S2V5KCk7XG4gICAgICAgICAgICB3aGlsZSAocHJldktleXNTZXQuaGFzKGtleSkpIHtcbiAgICAgICAgICAgICAga2V5ID0gZ2V0TmV3QXJyYXlFbGVtZW50S2V5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICAgIH07XG4gICAgICAgICAgZm9yIChjb25zdCBbLCBub2RlXSBvZiBub2Rlc1dpdGhpbikge1xuICAgICAgICAgICAgY29uc3QgaWR4RnJvbVZhbHVlID0gbm9kZS5wcm9wUGF0aFtwcm9wUGF0aC5sZW5ndGhdO1xuICAgICAgICAgICAgYXNzZXJ0KHR5cGVvZiBpZHhGcm9tVmFsdWUgPT09ICdudW1iZXInKTtcbiAgICAgICAgICAgIGlmIChhcnJWYWwubGVuZ3RoIDw9IGlkeEZyb21WYWx1ZSB8fCBhbHJlYWR5VXNlZEluZGljaWVzLmhhcyhpZHhGcm9tVmFsdWUpICYmIGlzRW1wdHlDaGlsZEZpZWxkTm9kZShub2RlKSkge1xuICAgICAgICAgICAgICBuZXdWYWwucHVzaChnZXRJbml0aWFsUHJvcHNWYWx1ZShhcnJheUZpZWxkLmVsZW1lbnQpKTtcbiAgICAgICAgICAgICAgbmV3S2V5cy5wdXNoKGdldE5ld0tleSgpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGFscmVhZHlVc2VkSW5kaWNpZXMuYWRkKGlkeEZyb21WYWx1ZSk7XG4gICAgICAgICAgICAgIG5ld1ZhbC5wdXNoKGFyclZhbFtpZHhGcm9tVmFsdWVdKTtcbiAgICAgICAgICAgICAgbmV3S2V5cy5wdXNoKGFscmVhZHlVc2VkSW5kaWNpZXMuaGFzKGlkeEZyb21WYWx1ZSkgPyBnZXROZXdLZXkoKSA6IHByZXZLZXlzW2lkeEZyb21WYWx1ZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBzZXRLZXlzRm9yQXJyYXlWYWx1ZShuZXdWYWwsIG5ld0tleXMpO1xuICAgICAgICAgIGlmICghYXJlQXJyYXlzRXF1YWwoYXJyVmFsLCBuZXdWYWwpKSB7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm1lZFByb3BzID0gcmVwbGFjZVZhbHVlQXRQcm9wUGF0aChyb290U2NoZW1hLCBub2RlLnByb3BzLCBuZXdWYWwsIHByb3BQYXRoKTtcbiAgICAgICAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgIHByb3BzOiB0cmFuc2Zvcm1lZFByb3BzXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgIGF0OiBwYXRoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2lkeCwgW2lkeEluQ2hpbGRyZW5PZkJsb2NrLCBub2RlV2l0aGluXV0gb2Ygbm9kZXNXaXRoaW4uZW50cmllcygpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IG5ld1Byb3BQYXRoID0gWy4uLm5vZGVXaXRoaW4ucHJvcFBhdGhdO1xuICAgICAgICAgICAgICBuZXdQcm9wUGF0aFtwcm9wUGF0aC5sZW5ndGhdID0gaWR4O1xuICAgICAgICAgICAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgICAgIHByb3BQYXRoOiBuZXdQcm9wUGF0aFxuICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgYXQ6IFsuLi5wYXRoLCBpZHhJbkNoaWxkcmVuT2ZCbG9ja11cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1pc3NpbmdLZXlzID0gbmV3IE1hcChmaW5kQ2hpbGRQcm9wUGF0aHMobm9kZS5wcm9wcywgY29tcG9uZW50QmxvY2suc2NoZW1hKS5tYXAoeCA9PiBbSlNPTi5zdHJpbmdpZnkoeC5wYXRoKSwgeC5vcHRpb25zLmtpbmRdKSk7XG4gICAgICAgIG5vZGUuY2hpbGRyZW4uZm9yRWFjaChub2RlID0+IHtcbiAgICAgICAgICBhc3NlcnQobm9kZS50eXBlID09PSAnY29tcG9uZW50LWJsb2NrLXByb3AnIHx8IG5vZGUudHlwZSA9PT0gJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCcpO1xuICAgICAgICAgIG1pc3NpbmdLZXlzLmRlbGV0ZShKU09OLnN0cmluZ2lmeShub2RlLnByb3BQYXRoKSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAobWlzc2luZ0tleXMuc2l6ZSkge1xuICAgICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCBbLi4ubWlzc2luZ0tleXNdLm1hcCgoW3Byb3AsIGtpbmRdKSA9PiAoe1xuICAgICAgICAgICAgdHlwZTogYGNvbXBvbmVudC0ke2tpbmR9LXByb3BgLFxuICAgICAgICAgICAgcHJvcFBhdGg6IHByb3AgPyBKU09OLnBhcnNlKHByb3ApIDogcHJvcCxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgICAgICB0ZXh0OiAnJ1xuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9KSksIHtcbiAgICAgICAgICAgIGF0OiBbLi4ucGF0aCwgbm9kZS5jaGlsZHJlbi5sZW5ndGhdXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZvdW5kUHJvcHMgPSBuZXcgU2V0KCk7XG4gICAgICAgIGNvbnN0IHN0cmluZ2lmaWVkSW5saW5lUHJvcFBhdGhzID0ge307XG4gICAgICAgIGZpbmRDaGlsZFByb3BQYXRocyhub2RlLnByb3BzLCBibG9ja0NvbXBvbmVudHNbbm9kZS5jb21wb25lbnRdLnNjaGVtYSkuZm9yRWFjaCgoeCwgaW5kZXgpID0+IHtcbiAgICAgICAgICBzdHJpbmdpZmllZElubGluZVByb3BQYXRoc1tKU09OLnN0cmluZ2lmeSh4LnBhdGgpXSA9IHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHgub3B0aW9ucyxcbiAgICAgICAgICAgIGluZGV4XG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIGZvciAoY29uc3QgW2luZGV4LCBjaGlsZE5vZGVdIG9mIG5vZGUuY2hpbGRyZW4uZW50cmllcygpKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgIC8vIGNoaWxkcmVuIHRoYXQgYXJlIG5vdCB0aGVzZSB3aWxsIGJlIGhhbmRsZWQgYnlcbiAgICAgICAgICAvLyB0aGUgZ2VuZXJpYyBhbGxvd2VkQ2hpbGRyZW4gbm9ybWFsaXphdGlvblxuICAgICAgICAgIGNoaWxkTm9kZS50eXBlICE9PSAnY29tcG9uZW50LWlubGluZS1wcm9wJyAmJiBjaGlsZE5vZGUudHlwZSAhPT0gJ2NvbXBvbmVudC1ibG9jay1wcm9wJykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGNoaWxkUGF0aCA9IFsuLi5wYXRoLCBpbmRleF07XG4gICAgICAgICAgY29uc3Qgc3RyaW5naWZpZWRQcm9wUGF0aCA9IEpTT04uc3RyaW5naWZ5KGNoaWxkTm9kZS5wcm9wUGF0aCk7XG4gICAgICAgICAgaWYgKHN0cmluZ2lmaWVkSW5saW5lUHJvcFBhdGhzW3N0cmluZ2lmaWVkUHJvcFBhdGhdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgIGF0OiBjaGlsZFBhdGhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZm91bmRQcm9wcy5oYXMoc3RyaW5naWZpZWRQcm9wUGF0aCkpIHtcbiAgICAgICAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgIGF0OiBjaGlsZFBhdGhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmb3VuZFByb3BzLmFkZChzdHJpbmdpZmllZFByb3BQYXRoKTtcbiAgICAgICAgICBjb25zdCBwcm9wSW5mbyA9IHN0cmluZ2lmaWVkSW5saW5lUHJvcFBhdGhzW3N0cmluZ2lmaWVkUHJvcFBhdGhdO1xuICAgICAgICAgIGNvbnN0IGV4cGVjdGVkSW5kZXggPSBwcm9wSW5mby5pbmRleDtcbiAgICAgICAgICBpZiAoaW5kZXggIT09IGV4cGVjdGVkSW5kZXgpIHtcbiAgICAgICAgICAgIFRyYW5zZm9ybXMubW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgICBhdDogY2hpbGRQYXRoLFxuICAgICAgICAgICAgICB0bzogWy4uLnBhdGgsIGV4cGVjdGVkSW5kZXhdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgZXhwZWN0ZWRDaGlsZE5vZGVUeXBlID0gYGNvbXBvbmVudC0ke3Byb3BJbmZvLm9wdGlvbnMua2luZH0tcHJvcGA7XG4gICAgICAgICAgaWYgKGNoaWxkTm9kZS50eXBlICE9PSBleHBlY3RlZENoaWxkTm9kZVR5cGUpIHtcbiAgICAgICAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgIHR5cGU6IGV4cGVjdGVkQ2hpbGROb2RlVHlwZVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICBhdDogY2hpbGRQYXRoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgZG9jdW1lbnRGZWF0dXJlcyA9IG1lbW9pemVkR2V0RG9jdW1lbnRGZWF0dXJlc0ZvckNoaWxkRmllbGQocHJvcEluZm8ub3B0aW9ucyk7XG4gICAgICAgICAgaWYgKG5vcm1hbGl6ZU5vZGVXaXRoaW5Db21wb25lbnRQcm9wKFtjaGlsZE5vZGUsIGNoaWxkUGF0aF0sIGVkaXRvciwgZG9jdW1lbnRGZWF0dXJlcykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgbm9ybWFsaXplTm9kZShlbnRyeSk7XG4gIH07XG4gIHJldHVybiBlZGl0b3I7XG59XG5cbi8vIHRoZSBvbmx5IHRoaW5nIHRoYXQgdGhpcyB3aWxsIGZpeCBpcyBhIG5ldyBmaWVsZCBiZWluZyBhZGRlZCB0byBhbiBvYmplY3QgZmllbGQsIG5vdGhpbmcgZWxzZS5cbmZ1bmN0aW9uIGFkZE1pc3NpbmdGaWVsZHModmFsdWUsIHNjaGVtYSkge1xuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdjaGlsZCcgfHwgc2NoZW1hLmtpbmQgPT09ICdmb3JtJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdjb25kaXRpb25hbCcpIHtcbiAgICBjb25zdCBjb25kaXRpb25hbFZhbHVlID0gdmFsdWU7XG4gICAgY29uc3QgdXBkYXRlZElubmVyVmFsdWUgPSBhZGRNaXNzaW5nRmllbGRzKGNvbmRpdGlvbmFsVmFsdWUudmFsdWUsIHNjaGVtYS52YWx1ZXNbY29uZGl0aW9uYWxWYWx1ZS5kaXNjcmltaW5hbnQudG9TdHJpbmcoKV0pO1xuICAgIGlmICh1cGRhdGVkSW5uZXJWYWx1ZSA9PT0gY29uZGl0aW9uYWxWYWx1ZS52YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgZGlzY3JpbWluYW50OiBjb25kaXRpb25hbFZhbHVlLmRpc2NyaW1pbmFudCxcbiAgICAgIHZhbHVlOiB1cGRhdGVkSW5uZXJWYWx1ZVxuICAgIH07XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnYXJyYXknKSB7XG4gICAgY29uc3QgYXJyVmFsdWUgPSB2YWx1ZTtcbiAgICBjb25zdCBuZXdBcnJWYWx1ZSA9IGFyclZhbHVlLm1hcCh4ID0+IGFkZE1pc3NpbmdGaWVsZHMoeCwgc2NoZW1hLmVsZW1lbnQpKTtcbiAgICBpZiAoYXJlQXJyYXlzRXF1YWwoYXJyVmFsdWUsIG5ld0FyclZhbHVlKSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gbmV3QXJyVmFsdWU7XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnb2JqZWN0Jykge1xuICAgIGNvbnN0IG9iamVjdFZhbHVlID0gdmFsdWU7XG4gICAgbGV0IGhhc0NoYW5nZWQgPSBmYWxzZTtcbiAgICBjb25zdCBuZXdPYmplY3RWYWx1ZSA9IHt9O1xuICAgIGZvciAoY29uc3QgW2tleSwgaW5uZXJTY2hlbWFdIG9mIE9iamVjdC5lbnRyaWVzKHNjaGVtYS5maWVsZHMpKSB7XG4gICAgICBjb25zdCBpbm5lclZhbHVlID0gb2JqZWN0VmFsdWVba2V5XTtcbiAgICAgIGlmIChpbm5lclZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaGFzQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgIG5ld09iamVjdFZhbHVlW2tleV0gPSBnZXRJbml0aWFsUHJvcHNWYWx1ZShpbm5lclNjaGVtYSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgbmV3SW5uZXJWYWx1ZSA9IGFkZE1pc3NpbmdGaWVsZHMoaW5uZXJWYWx1ZSwgaW5uZXJTY2hlbWEpO1xuICAgICAgaWYgKG5ld0lubmVyVmFsdWUgIT09IGlubmVyVmFsdWUpIHtcbiAgICAgICAgaGFzQ2hhbmdlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBuZXdPYmplY3RWYWx1ZVtrZXldID0gbmV3SW5uZXJWYWx1ZTtcbiAgICB9XG4gICAgaWYgKGhhc0NoYW5nZWQpIHtcbiAgICAgIHJldHVybiBuZXdPYmplY3RWYWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGFzc2VydE5ldmVyKHNjaGVtYSk7XG59XG5cbmNvbnN0IHBhcmFncmFwaEVsZW1lbnQgPSAoKSA9PiAoe1xuICB0eXBlOiAncGFyYWdyYXBoJyxcbiAgY2hpbGRyZW46IFt7XG4gICAgdGV4dDogJydcbiAgfV1cbn0pO1xuZnVuY3Rpb24gd2l0aFBhcmFncmFwaHMoZWRpdG9yKSB7XG4gIGNvbnN0IHtcbiAgICBub3JtYWxpemVOb2RlXG4gIH0gPSBlZGl0b3I7XG4gIGVkaXRvci5ub3JtYWxpemVOb2RlID0gZW50cnkgPT4ge1xuICAgIGNvbnN0IFtub2RlLCBwYXRoXSA9IGVudHJ5O1xuICAgIGlmIChFZGl0b3IuaXNFZGl0b3Iobm9kZSkpIHtcbiAgICAgIGxldCBsYXN0Tm9kZSA9IG5vZGUuY2hpbGRyZW5bbm9kZS5jaGlsZHJlbi5sZW5ndGggLSAxXTtcbiAgICAgIGlmICgobGFzdE5vZGUgPT09IG51bGwgfHwgbGFzdE5vZGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGxhc3ROb2RlLnR5cGUpICE9PSAncGFyYWdyYXBoJykge1xuICAgICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKGVkaXRvciwgcGFyYWdyYXBoRWxlbWVudCgpLCB7XG4gICAgICAgICAgYXQ6IFsuLi5wYXRoLCBub2RlLmNoaWxkcmVuLmxlbmd0aF1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgbm9ybWFsaXplTm9kZShlbnRyeSk7XG4gIH07XG4gIHJldHVybiBlZGl0b3I7XG59XG5cbmZ1bmN0aW9uIHdpdGhMYXlvdXRzKGVkaXRvcikge1xuICBjb25zdCB7XG4gICAgbm9ybWFsaXplTm9kZSxcbiAgICBkZWxldGVCYWNrd2FyZFxuICB9ID0gZWRpdG9yO1xuICBlZGl0b3IuZGVsZXRlQmFja3dhcmQgPSB1bml0ID0+IHtcbiAgICBpZiAoZWRpdG9yLnNlbGVjdGlvbiAmJiBSYW5nZS5pc0NvbGxhcHNlZChlZGl0b3Iuc2VsZWN0aW9uKSAmJlxuICAgIC8vIHRoaXMgaXMganVzdCBhbiBsaXR0bGUgb3B0aW1pc2F0aW9uXG4gICAgLy8gd2UncmUgb25seSBkb2luZyB0aGluZ3MgaWYgd2UncmUgYXQgdGhlIHN0YXJ0IG9mIGEgbGF5b3V0IGFyZWFcbiAgICAvLyBhbmQgdGhlIHN0YXJ0IG9mIGFueXRoaW5nIHdpbGwgYWx3YXlzIGJlIG9mZnNldCAwXG4gICAgLy8gc28gd2UnbGwgYmFpbG91dCBpZiB3ZSdyZSBub3QgYXQgb2Zmc2V0IDBcbiAgICBlZGl0b3Iuc2VsZWN0aW9uLmFuY2hvci5vZmZzZXQgPT09IDApIHtcbiAgICAgIGNvbnN0IFthYm92ZU5vZGUsIGFib3ZlUGF0aF0gPSBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgICAgIG1hdGNoOiBub2RlID0+IG5vZGUudHlwZSA9PT0gJ2xheW91dC1hcmVhJ1xuICAgICAgfSkgfHwgW2VkaXRvciwgW11dO1xuICAgICAgaWYgKGFib3ZlTm9kZS50eXBlID09PSAnbGF5b3V0LWFyZWEnICYmIFBvaW50LmVxdWFscyhFZGl0b3Iuc3RhcnQoZWRpdG9yLCBhYm92ZVBhdGgpLCBlZGl0b3Iuc2VsZWN0aW9uLmFuY2hvcikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBkZWxldGVCYWNrd2FyZCh1bml0KTtcbiAgfTtcbiAgZWRpdG9yLm5vcm1hbGl6ZU5vZGUgPSBlbnRyeSA9PiB7XG4gICAgY29uc3QgW25vZGUsIHBhdGhdID0gZW50cnk7XG4gICAgaWYgKEVsZW1lbnQkMS5pc0VsZW1lbnQobm9kZSkgJiYgbm9kZS50eXBlID09PSAnbGF5b3V0Jykge1xuICAgICAgaWYgKG5vZGUubGF5b3V0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgVHJhbnNmb3Jtcy51bndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICBhdDogcGF0aFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKG5vZGUuY2hpbGRyZW4ubGVuZ3RoIDwgbm9kZS5sYXlvdXQubGVuZ3RoKSB7XG4gICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCBBcnJheS5mcm9tKHtcbiAgICAgICAgICBsZW5ndGg6IG5vZGUubGF5b3V0Lmxlbmd0aCAtIG5vZGUuY2hpbGRyZW4ubGVuZ3RoXG4gICAgICAgIH0pLm1hcCgoKSA9PiAoe1xuICAgICAgICAgIHR5cGU6ICdsYXlvdXQtYXJlYScsXG4gICAgICAgICAgY2hpbGRyZW46IFtwYXJhZ3JhcGhFbGVtZW50KCldXG4gICAgICAgIH0pKSwge1xuICAgICAgICAgIGF0OiBbLi4ucGF0aCwgbm9kZS5jaGlsZHJlbi5sZW5ndGhdXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggPiBub2RlLmxheW91dC5sZW5ndGgpIHtcbiAgICAgICAgQXJyYXkuZnJvbSh7XG4gICAgICAgICAgbGVuZ3RoOiBub2RlLmNoaWxkcmVuLmxlbmd0aCAtIG5vZGUubGF5b3V0Lmxlbmd0aFxuICAgICAgICB9KS5tYXAoKF8sIGkpID0+IGkpLnJldmVyc2UoKS5mb3JFYWNoKGkgPT4ge1xuICAgICAgICAgIGNvbnN0IGxheW91dEFyZWFUb1JlbW92ZVBhdGggPSBbLi4ucGF0aCwgaSArIG5vZGUubGF5b3V0Lmxlbmd0aF07XG4gICAgICAgICAgY29uc3QgY2hpbGQgPSBub2RlLmNoaWxkcmVuW2kgKyBub2RlLmxheW91dC5sZW5ndGhdO1xuICAgICAgICAgIG1vdmVDaGlsZHJlbihlZGl0b3IsIGxheW91dEFyZWFUb1JlbW92ZVBhdGgsIFsuLi5wYXRoLCBub2RlLmxheW91dC5sZW5ndGggLSAxLCBub2RlLmNoaWxkcmVuW25vZGUubGF5b3V0Lmxlbmd0aCAtIDFdLmNoaWxkcmVuLmxlbmd0aF0sIG5vZGUgPT4gbm9kZS50eXBlICE9PSAncGFyYWdyYXBoJyB8fCBOb2RlLnN0cmluZyhjaGlsZCkgIT09ICcnKTtcbiAgICAgICAgICBUcmFuc2Zvcm1zLnJlbW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgYXQ6IGxheW91dEFyZWFUb1JlbW92ZVBhdGhcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgbm9ybWFsaXplTm9kZShlbnRyeSk7XG4gIH07XG4gIHJldHVybiBlZGl0b3I7XG59XG5cbmNvbnN0IG1hcmtkb3duTGlua1BhdHRlcm4gPSAvKF58XFxzKVxcWyguKz8pXFxdXFwoKFxcUyspXFwpJC87XG5mdW5jdGlvbiB3aXRoTGluayhlZGl0b3JEb2N1bWVudEZlYXR1cmVzLCBjb21wb25lbnRCbG9ja3MsIGVkaXRvcikge1xuICBjb25zdCB7XG4gICAgaW5zZXJ0VGV4dCxcbiAgICBpc0lubGluZSxcbiAgICBub3JtYWxpemVOb2RlXG4gIH0gPSBlZGl0b3I7XG4gIGVkaXRvci5pc0lubGluZSA9IGVsZW1lbnQgPT4ge1xuICAgIHJldHVybiBlbGVtZW50LnR5cGUgPT09ICdsaW5rJyA/IHRydWUgOiBpc0lubGluZShlbGVtZW50KTtcbiAgfTtcbiAgaWYgKGVkaXRvckRvY3VtZW50RmVhdHVyZXMubGlua3MpIHtcbiAgICBlZGl0b3IuaW5zZXJ0VGV4dCA9IHRleHQgPT4ge1xuICAgICAgaW5zZXJ0VGV4dCh0ZXh0KTtcbiAgICAgIGlmICh0ZXh0ICE9PSAnKScgfHwgIWVkaXRvci5zZWxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3Qgc3RhcnRPZkJsb2NrID0gRWRpdG9yLnN0YXJ0KGVkaXRvciwgRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgICAgICBtYXRjaDogaXNCbG9ja1xuICAgICAgfSlbMV0pO1xuICAgICAgY29uc3Qgc3RhcnRPZkJsb2NrVG9FbmRPZlNob3J0Y3V0U3RyaW5nID0gRWRpdG9yLnN0cmluZyhlZGl0b3IsIHtcbiAgICAgICAgYW5jaG9yOiBlZGl0b3Iuc2VsZWN0aW9uLmFuY2hvcixcbiAgICAgICAgZm9jdXM6IHN0YXJ0T2ZCbG9ja1xuICAgICAgfSk7XG4gICAgICBjb25zdCBtYXRjaCA9IG1hcmtkb3duTGlua1BhdHRlcm4uZXhlYyhzdGFydE9mQmxvY2tUb0VuZE9mU2hvcnRjdXRTdHJpbmcpO1xuICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBhbmNlc3RvckNvbXBvbmVudENoaWxkRmllbGREb2N1bWVudEZlYXR1cmVzID0gZ2V0QW5jZXN0b3JDb21wb25lbnRDaGlsZEZpZWxkRG9jdW1lbnRGZWF0dXJlcyhlZGl0b3IsIGVkaXRvckRvY3VtZW50RmVhdHVyZXMsIGNvbXBvbmVudEJsb2Nrcyk7XG4gICAgICBpZiAoKGFuY2VzdG9yQ29tcG9uZW50Q2hpbGRGaWVsZERvY3VtZW50RmVhdHVyZXMgPT09IG51bGwgfHwgYW5jZXN0b3JDb21wb25lbnRDaGlsZEZpZWxkRG9jdW1lbnRGZWF0dXJlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYW5jZXN0b3JDb21wb25lbnRDaGlsZEZpZWxkRG9jdW1lbnRGZWF0dXJlcy5kb2N1bWVudEZlYXR1cmVzLmxpbmtzKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgWywgbWF5YmVXaGl0ZXNwYWNlLCBsaW5rVGV4dCwgaHJlZl0gPSBtYXRjaDtcbiAgICAgIC8vIGJ5IGRvaW5nIHRoaXMsIHRoZSBpbnNlcnRUZXh0KCcpJykgYWJvdmUgd2lsbCBoYXBwZW4gaW4gYSBkaWZmZXJlbnQgdW5kbyB0aGFuIHRoZSBsaW5rIHJlcGxhY2VtZW50XG4gICAgICAvLyBzbyB0aGF0IG1lYW5zIHRoYXQgd2hlbiBzb21lb25lIGRvZXMgYW4gdW5kbyBhZnRlciB0aGlzXG4gICAgICAvLyBpdCB3aWxsIHVuZG8gdG8gdGhlIHN0YXRlIG9mIFwiW2NvbnRlbnRdKGxpbmspXCIgcmF0aGVyIHRoYW4gXCJbY29udGVudF0obGlua1wiIChub3RlIHRoZSBtaXNzaW5nIGNsb3NpbmcgYnJhY2tldClcbiAgICAgIGVkaXRvci5oaXN0b3J5LnVuZG9zLnB1c2goe1xuICAgICAgICBvcGVyYXRpb25zOiBbXSxcbiAgICAgICAgc2VsZWN0aW9uQmVmb3JlOiBlZGl0b3Iuc2VsZWN0aW9uXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHN0YXJ0T2ZTaG9ydGN1dCA9IG1hdGNoLmluZGV4ID09PSAwID8gc3RhcnRPZkJsb2NrIDogRWRpdG9yQWZ0ZXJCdXRJZ25vcmluZ2luZ1BvaW50c1dpdGhOb0NvbnRlbnQoZWRpdG9yLCBzdGFydE9mQmxvY2ssIHtcbiAgICAgICAgZGlzdGFuY2U6IG1hdGNoLmluZGV4XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHN0YXJ0T2ZMaW5rVGV4dCA9IEVkaXRvckFmdGVyQnV0SWdub3JpbmdpbmdQb2ludHNXaXRoTm9Db250ZW50KGVkaXRvciwgc3RhcnRPZlNob3J0Y3V0LCB7XG4gICAgICAgIGRpc3RhbmNlOiBtYXliZVdoaXRlc3BhY2UgPT09ICcnID8gMSA6IDJcbiAgICAgIH0pO1xuICAgICAgY29uc3QgZW5kT2ZMaW5rVGV4dCA9IEVkaXRvckFmdGVyQnV0SWdub3JpbmdpbmdQb2ludHNXaXRoTm9Db250ZW50KGVkaXRvciwgc3RhcnRPZkxpbmtUZXh0LCB7XG4gICAgICAgIGRpc3RhbmNlOiBsaW5rVGV4dC5sZW5ndGhcbiAgICAgIH0pO1xuICAgICAgVHJhbnNmb3Jtcy5kZWxldGUoZWRpdG9yLCB7XG4gICAgICAgIGF0OiB7XG4gICAgICAgICAgYW5jaG9yOiBlbmRPZkxpbmtUZXh0LFxuICAgICAgICAgIGZvY3VzOiBlZGl0b3Iuc2VsZWN0aW9uLmFuY2hvclxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFRyYW5zZm9ybXMuZGVsZXRlKGVkaXRvciwge1xuICAgICAgICBhdDoge1xuICAgICAgICAgIGFuY2hvcjogc3RhcnRPZlNob3J0Y3V0LFxuICAgICAgICAgIGZvY3VzOiBzdGFydE9mTGlua1RleHRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBUcmFuc2Zvcm1zLndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgdHlwZTogJ2xpbmsnLFxuICAgICAgICBocmVmLFxuICAgICAgICBjaGlsZHJlbjogW11cbiAgICAgIH0sIHtcbiAgICAgICAgYXQ6IHtcbiAgICAgICAgICBhbmNob3I6IGVkaXRvci5zZWxlY3Rpb24uYW5jaG9yLFxuICAgICAgICAgIGZvY3VzOiBzdGFydE9mU2hvcnRjdXRcbiAgICAgICAgfSxcbiAgICAgICAgc3BsaXQ6IHRydWVcbiAgICAgIH0pO1xuICAgICAgY29uc3QgbmV4dE5vZGUgPSBFZGl0b3IubmV4dChlZGl0b3IpO1xuICAgICAgaWYgKG5leHROb2RlKSB7XG4gICAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgbmV4dE5vZGVbMV0pO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgZWRpdG9yLm5vcm1hbGl6ZU5vZGUgPSAoW25vZGUsIHBhdGhdKSA9PiB7XG4gICAgaWYgKG5vZGUudHlwZSA9PT0gJ2xpbmsnKSB7XG4gICAgICBpZiAoTm9kZS5zdHJpbmcobm9kZSkgPT09ICcnKSB7XG4gICAgICAgIFRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgYXQ6IHBhdGhcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgW2lkeCwgY2hpbGRdIG9mIG5vZGUuY2hpbGRyZW4uZW50cmllcygpKSB7XG4gICAgICAgIGlmIChjaGlsZC50eXBlID09PSAnbGluaycpIHtcbiAgICAgICAgICAvLyBsaW5rcyBjYW5ub3QgY29udGFpbiBsaW5rc1xuICAgICAgICAgIFRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICBhdDogWy4uLnBhdGgsIGlkeF1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzSW5saW5lQ29udGFpbmVyKG5vZGUpKSB7XG4gICAgICBsZXQgbGFzdE1lcmdhYmxlTGluayA9IG51bGw7XG4gICAgICBmb3IgKGNvbnN0IFtpZHgsIGNoaWxkXSBvZiBub2RlLmNoaWxkcmVuLmVudHJpZXMoKSkge1xuICAgICAgICB2YXIgX2xhc3RNZXJnYWJsZUxpbms7XG4gICAgICAgIGlmIChjaGlsZC50eXBlID09PSAnbGluaycgJiYgY2hpbGQuaHJlZiA9PT0gKChfbGFzdE1lcmdhYmxlTGluayA9IGxhc3RNZXJnYWJsZUxpbmspID09PSBudWxsIHx8IF9sYXN0TWVyZ2FibGVMaW5rID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfbGFzdE1lcmdhYmxlTGluay5ub2RlLmhyZWYpKSB7XG4gICAgICAgICAgY29uc3QgZmlyc3RMaW5rUGF0aCA9IFsuLi5wYXRoLCBsYXN0TWVyZ2FibGVMaW5rLmluZGV4XTtcbiAgICAgICAgICBjb25zdCBzZWNvbmRMaW5rUGF0aCA9IFsuLi5wYXRoLCBpZHhdO1xuICAgICAgICAgIGNvbnN0IHRvID0gWy4uLmZpcnN0TGlua1BhdGgsIGxhc3RNZXJnYWJsZUxpbmsubm9kZS5jaGlsZHJlbi5sZW5ndGhdO1xuICAgICAgICAgIC8vIG5vdGUgdGhpcyBpcyBnb2luZyBpbiByZXZlcnNlLCBqcyBkb2Vzbid0IGhhdmUgZG91YmxlLWVuZGVkIGl0ZXJhdG9ycyBzbyBpdCdzIGEgZm9yKDs7KVxuICAgICAgICAgIGZvciAobGV0IGkgPSBjaGlsZC5jaGlsZHJlbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRQYXRoID0gWy4uLnNlY29uZExpbmtQYXRoLCBpXTtcbiAgICAgICAgICAgIFRyYW5zZm9ybXMubW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgICBhdDogY2hpbGRQYXRoLFxuICAgICAgICAgICAgICB0b1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICBhdDogc2Vjb25kTGlua1BhdGhcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFUZXh0LmlzVGV4dChjaGlsZCkgfHwgY2hpbGQudGV4dCAhPT0gJycpIHtcbiAgICAgICAgICBsYXN0TWVyZ2FibGVMaW5rID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hpbGQudHlwZSA9PT0gJ2xpbmsnKSB7XG4gICAgICAgICAgbGFzdE1lcmdhYmxlTGluayA9IHtcbiAgICAgICAgICAgIGluZGV4OiBpZHgsXG4gICAgICAgICAgICBub2RlOiBjaGlsZFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgbm9ybWFsaXplTm9kZShbbm9kZSwgcGF0aF0pO1xuICB9O1xuICByZXR1cm4gZWRpdG9yO1xufVxuXG5jb25zdCBpc0xpc3RUeXBlID0gdHlwZSA9PiB0eXBlID09PSAnb3JkZXJlZC1saXN0JyB8fCB0eXBlID09PSAndW5vcmRlcmVkLWxpc3QnO1xuY29uc3QgaXNMaXN0Tm9kZSA9IG5vZGUgPT4gaXNMaXN0VHlwZShub2RlLnR5cGUpO1xuZnVuY3Rpb24gZ2V0QW5jZXN0b3JMaXN0KGVkaXRvcikge1xuICBpZiAoZWRpdG9yLnNlbGVjdGlvbikge1xuICAgIGNvbnN0IGxpc3RJdGVtID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgICAgbWF0Y2g6IG5vZGVUeXBlTWF0Y2hlcignbGlzdC1pdGVtJylcbiAgICB9KTtcbiAgICBjb25zdCBsaXN0ID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgICAgbWF0Y2g6IGlzTGlzdE5vZGVcbiAgICB9KTtcbiAgICBpZiAobGlzdEl0ZW0gJiYgbGlzdCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaXNJbnNpZGU6IHRydWUsXG4gICAgICAgIGxpc3RJdGVtLFxuICAgICAgICBsaXN0XG4gICAgICB9O1xuICAgIH1cbiAgfVxuICByZXR1cm4ge1xuICAgIGlzSW5zaWRlOiBmYWxzZVxuICB9O1xufVxuZnVuY3Rpb24gd2l0aExpc3QoZWRpdG9yKSB7XG4gIGNvbnN0IHtcbiAgICBpbnNlcnRCcmVhayxcbiAgICBub3JtYWxpemVOb2RlLFxuICAgIGRlbGV0ZUJhY2t3YXJkXG4gIH0gPSBlZGl0b3I7XG4gIGVkaXRvci5kZWxldGVCYWNrd2FyZCA9IHVuaXQgPT4ge1xuICAgIGlmIChlZGl0b3Iuc2VsZWN0aW9uKSB7XG4gICAgICBjb25zdCBhbmNlc3Rvckxpc3QgPSBnZXRBbmNlc3Rvckxpc3QoZWRpdG9yKTtcbiAgICAgIGlmIChhbmNlc3Rvckxpc3QuaXNJbnNpZGUgJiYgUmFuZ2UuaXNDb2xsYXBzZWQoZWRpdG9yLnNlbGVjdGlvbikgJiYgRWRpdG9yLmlzU3RhcnQoZWRpdG9yLCBlZGl0b3Iuc2VsZWN0aW9uLmFuY2hvciwgYW5jZXN0b3JMaXN0Lmxpc3RbMV0pKSB7XG4gICAgICAgIFRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgbWF0Y2g6IGlzTGlzdE5vZGUsXG4gICAgICAgICAgc3BsaXQ6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgZGVsZXRlQmFja3dhcmQodW5pdCk7XG4gIH07XG4gIGVkaXRvci5pbnNlcnRCcmVhayA9ICgpID0+IHtcbiAgICBjb25zdCBbbGlzdEl0ZW1dID0gRWRpdG9yLm5vZGVzKGVkaXRvciwge1xuICAgICAgbWF0Y2g6IG5vZGUgPT4gbm9kZS50eXBlID09PSAnbGlzdC1pdGVtJyxcbiAgICAgIG1vZGU6ICdsb3dlc3QnXG4gICAgfSk7XG4gICAgaWYgKGxpc3RJdGVtICYmIE5vZGUuc3RyaW5nKGxpc3RJdGVtWzBdKSA9PT0gJycpIHtcbiAgICAgIFRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgIG1hdGNoOiBpc0xpc3ROb2RlLFxuICAgICAgICBzcGxpdDogdHJ1ZVxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGluc2VydEJyZWFrKCk7XG4gIH07XG4gIGVkaXRvci5ub3JtYWxpemVOb2RlID0gZW50cnkgPT4ge1xuICAgIGNvbnN0IFtub2RlLCBwYXRoXSA9IGVudHJ5O1xuICAgIGlmIChFbGVtZW50JDEuaXNFbGVtZW50KG5vZGUpIHx8IEVkaXRvci5pc0VkaXRvcihub2RlKSkge1xuICAgICAgY29uc3QgaXNFbGVtZW50QmVpbmdOb3JtYWxpemVkQUxpc3QgPSBpc0xpc3ROb2RlKG5vZGUpO1xuICAgICAgZm9yIChjb25zdCBbY2hpbGROb2RlLCBjaGlsZFBhdGhdIG9mIE5vZGUuY2hpbGRyZW4oZWRpdG9yLCBwYXRoKSkge1xuICAgICAgICBjb25zdCBpbmRleCA9IGNoaWxkUGF0aFtjaGlsZFBhdGgubGVuZ3RoIC0gMV07XG4gICAgICAgIC8vIG1lcmdlIHNpYmxpbmcgbGlzdHNcbiAgICAgICAgaWYgKGlzTGlzdE5vZGUoY2hpbGROb2RlKSkge1xuICAgICAgICAgIHZhciBfbm9kZSRjaGlsZHJlbjtcbiAgICAgICAgICBpZiAoKChfbm9kZSRjaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW5bY2hpbGRQYXRoW2NoaWxkUGF0aC5sZW5ndGggLSAxXSArIDFdKSA9PT0gbnVsbCB8fCBfbm9kZSRjaGlsZHJlbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX25vZGUkY2hpbGRyZW4udHlwZSkgPT09IGNoaWxkTm9kZS50eXBlKSB7XG4gICAgICAgICAgICBjb25zdCBzaWJsaW5nTm9kZVBhdGggPSBQYXRoLm5leHQoY2hpbGRQYXRoKTtcbiAgICAgICAgICAgIG1vdmVDaGlsZHJlbihlZGl0b3IsIHNpYmxpbmdOb2RlUGF0aCwgWy4uLmNoaWxkUGF0aCwgY2hpbGROb2RlLmNoaWxkcmVuLmxlbmd0aF0pO1xuICAgICAgICAgICAgVHJhbnNmb3Jtcy5yZW1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgYXQ6IHNpYmxpbmdOb2RlUGF0aFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc0VsZW1lbnRCZWluZ05vcm1hbGl6ZWRBTGlzdCkge1xuICAgICAgICAgICAgY29uc3QgcHJldmlvdXNDaGlsZCA9IG5vZGUuY2hpbGRyZW5baW5kZXggLSAxXTtcbiAgICAgICAgICAgIGlmIChFbGVtZW50JDEuaXNFbGVtZW50KHByZXZpb3VzQ2hpbGQpKSB7XG4gICAgICAgICAgICAgIFRyYW5zZm9ybXMubW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgICAgIGF0OiBjaGlsZFBhdGgsXG4gICAgICAgICAgICAgICAgdG86IFsuLi5QYXRoLnByZXZpb3VzKGNoaWxkUGF0aCksIHByZXZpb3VzQ2hpbGQuY2hpbGRyZW4ubGVuZ3RoIC0gMV1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBUcmFuc2Zvcm1zLnVud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgICAgIGF0OiBjaGlsZFBhdGhcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlLnR5cGUgPT09ICdsaXN0LWl0ZW0nICYmIGNoaWxkTm9kZS50eXBlICE9PSAnbGlzdC1pdGVtLWNvbnRlbnQnICYmIGluZGV4ID09PSAwICYmIGlzQmxvY2soY2hpbGROb2RlKSkge1xuICAgICAgICAgIGlmIChwYXRoW3BhdGgubGVuZ3RoIC0gMV0gIT09IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzQ2hpbGQgPSBOb2RlLmdldChlZGl0b3IsIFBhdGgucHJldmlvdXMocGF0aCkpO1xuICAgICAgICAgICAgaWYgKEVsZW1lbnQkMS5pc0VsZW1lbnQocHJldmlvdXNDaGlsZCkpIHtcbiAgICAgICAgICAgICAgVHJhbnNmb3Jtcy5tb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgICAgYXQ6IHBhdGgsXG4gICAgICAgICAgICAgICAgdG86IFsuLi5QYXRoLnByZXZpb3VzKHBhdGgpLCBwcmV2aW91c0NoaWxkLmNoaWxkcmVuLmxlbmd0aF1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgVHJhbnNmb3Jtcy51bndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgIGF0OiBjaGlsZFBhdGhcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGUudHlwZSA9PT0gJ2xpc3QtaXRlbScgJiYgY2hpbGROb2RlLnR5cGUgPT09ICdsaXN0LWl0ZW0tY29udGVudCcgJiYgaW5kZXggIT09IDApIHtcbiAgICAgICAgICBUcmFuc2Zvcm1zLnNwbGl0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICBhdDogY2hpbGRQYXRoXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIG5vcm1hbGl6ZU5vZGUoZW50cnkpO1xuICB9O1xuICByZXR1cm4gZWRpdG9yO1xufVxuXG5mdW5jdGlvbiBvcmRlcihhLCBiKSB7XG4gIHJldHVybiB7XG4gICAgc3RhcnQ6IE1hdGgubWluKGEsIGIpLFxuICAgIGVuZDogTWF0aC5tYXgoYSwgYilcbiAgfTtcbn1cbmZ1bmN0aW9uIGdldFJlbGF0aXZlUm93UGF0aChoYXNIZWFkLCByb3dJbmRleCkge1xuICByZXR1cm4gaGFzSGVhZCA/IHJvd0luZGV4ID09PSAwID8gWzAsIDBdIDogWzEsIHJvd0luZGV4IC0gMV0gOiBbMCwgcm93SW5kZXhdO1xufVxuZnVuY3Rpb24gZ2V0U2VsZWN0ZWRUYWJsZUFyZWEoZWRpdG9yKSB7XG4gIHZhciBfRWRpdG9yJGFib3ZlLCBfZWRpdG9yJHNlbGVjdGlvbiwgX0VkaXRvciRhYm92ZTIsIF9lZGl0b3Ikc2VsZWN0aW9uMjtcbiAgY29uc3QgYW5jaG9yID0gKF9FZGl0b3IkYWJvdmUgPSBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgbWF0Y2g6IG5vZGVUeXBlTWF0Y2hlcigndGFibGUtY2VsbCcpLFxuICAgIGF0OiAoX2VkaXRvciRzZWxlY3Rpb24gPSBlZGl0b3Iuc2VsZWN0aW9uKSA9PT0gbnVsbCB8fCBfZWRpdG9yJHNlbGVjdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2VkaXRvciRzZWxlY3Rpb24uYW5jaG9yLnBhdGhcbiAgfSkpID09PSBudWxsIHx8IF9FZGl0b3IkYWJvdmUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9FZGl0b3IkYWJvdmVbMV07XG4gIGNvbnN0IGZvY3VzID0gKF9FZGl0b3IkYWJvdmUyID0gRWRpdG9yLmFib3ZlKGVkaXRvciwge1xuICAgIG1hdGNoOiBub2RlVHlwZU1hdGNoZXIoJ3RhYmxlLWNlbGwnKSxcbiAgICBhdDogKF9lZGl0b3Ikc2VsZWN0aW9uMiA9IGVkaXRvci5zZWxlY3Rpb24pID09PSBudWxsIHx8IF9lZGl0b3Ikc2VsZWN0aW9uMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2VkaXRvciRzZWxlY3Rpb24yLmZvY3VzLnBhdGhcbiAgfSkpID09PSBudWxsIHx8IF9FZGl0b3IkYWJvdmUyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfRWRpdG9yJGFib3ZlMlsxXTtcbiAgY29uc3QgdGFibGUgPSBFZGl0b3IuYWJvdmUoZWRpdG9yLCB7XG4gICAgbWF0Y2g6IG5vZGVUeXBlTWF0Y2hlcigndGFibGUnKVxuICB9KTtcbiAgaWYgKGVkaXRvci5zZWxlY3Rpb24gJiYgdGFibGUgJiYgRWxlbWVudCQxLmlzRWxlbWVudCh0YWJsZVswXS5jaGlsZHJlblswXSkgJiYgYW5jaG9yICYmIGZvY3VzICYmIFBhdGguZXF1YWxzKGFuY2hvci5zbGljZSgwLCAtMyksIGZvY3VzLnNsaWNlKDAsIC0zKSkpIHtcbiAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSBFZGl0b3IuZWRnZXMoZWRpdG9yLCBlZGl0b3Iuc2VsZWN0aW9uKTtcbiAgICByZXR1cm4ge1xuICAgICAgdGFibGVQYXRoOiB0YWJsZVsxXSxcbiAgICAgIHRhYmxlOiB0YWJsZVswXSxcbiAgICAgIHNpbmdsZUNlbGw6IFBhdGguZXF1YWxzKGFuY2hvciwgZm9jdXMpID8gUG9pbnQuZXF1YWxzKEVkaXRvci5zdGFydChlZGl0b3IsIGFuY2hvciksIHN0YXJ0KSAmJiBQb2ludC5lcXVhbHMoRWRpdG9yLmVuZChlZGl0b3IsIGFuY2hvciksIGVuZCkgJiYgIVBvaW50LmVxdWFscyhzdGFydCwgZW5kKSA/ICdzZWxlY3RlZCcgOiAnbm90LXNlbGVjdGVkJyA6ICdtYW55JyxcbiAgICAgIHJvdzogb3JkZXIoYW5jaG9yW2FuY2hvci5sZW5ndGggLSAyXSArIGFuY2hvclthbmNob3IubGVuZ3RoIC0gM10sIGZvY3VzW2ZvY3VzLmxlbmd0aCAtIDJdICsgZm9jdXNbYW5jaG9yLmxlbmd0aCAtIDNdKSxcbiAgICAgIGNvbHVtbjogb3JkZXIoYW5jaG9yW2FuY2hvci5sZW5ndGggLSAxXSwgZm9jdXNbZm9jdXMubGVuZ3RoIC0gMV0pXG4gICAgfTtcbiAgfVxufVxuY29uc3QgY2VsbCA9IGhlYWRlciA9PiAoe1xuICB0eXBlOiAndGFibGUtY2VsbCcsXG4gIC4uLihoZWFkZXIgPyB7XG4gICAgaGVhZGVyOiB0cnVlXG4gIH0gOiB7fSksXG4gIGNoaWxkcmVuOiBbe1xuICAgIHR5cGU6ICdwYXJhZ3JhcGgnLFxuICAgIGNoaWxkcmVuOiBbe1xuICAgICAgdGV4dDogJydcbiAgICB9XVxuICB9XVxufSk7XG5mdW5jdGlvbiBjbG9uZURlc2NlbmRhbnQobm9kZSkge1xuICBpZiAoVGV4dC5pc1RleHQobm9kZSkpIHJldHVybiB7XG4gICAgLi4ubm9kZVxuICB9O1xuICByZXR1cm4ge1xuICAgIC4uLm5vZGUsXG4gICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4ubWFwKGNsb25lRGVzY2VuZGFudClcbiAgfTtcbn1cbmZ1bmN0aW9uIHdpdGhUYWJsZShlZGl0b3IpIHtcbiAgY29uc3Qge1xuICAgIGRlbGV0ZUZyYWdtZW50LFxuICAgIG5vcm1hbGl6ZU5vZGUsXG4gICAgZ2V0RnJhZ21lbnQsXG4gICAgaW5zZXJ0RnJhZ21lbnQsXG4gICAgZGVsZXRlQmFja3dhcmRcbiAgfSA9IGVkaXRvcjtcbiAgZWRpdG9yLmluc2VydEZyYWdtZW50ID0gZnJhZ21lbnQgPT4ge1xuICAgIGNvbnN0IHNlbGVjdGVkVGFibGVBcmVhID0gZ2V0U2VsZWN0ZWRUYWJsZUFyZWEoZWRpdG9yKTtcbiAgICBpZiAoIXNlbGVjdGVkVGFibGVBcmVhIHx8IGZyYWdtZW50Lmxlbmd0aCAhPT0gMSB8fCBmcmFnbWVudFswXS50eXBlICE9PSAndGFibGUnKSB7XG4gICAgICBpbnNlcnRGcmFnbWVudChmcmFnbWVudCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG5ld1Jvd3MgPSBmcmFnbWVudFswXS5jaGlsZHJlbi5mbGF0TWFwKGNoaWxkID0+IGNoaWxkLnR5cGUgPT09ICd0YWJsZS1oZWFkJyB8fCBjaGlsZC50eXBlID09PSAndGFibGUtYm9keScgPyBjaGlsZC5jaGlsZHJlbiA6IFtdKTtcbiAgICBpZiAoIW5ld1Jvd3MuZXZlcnkobm9kZVR5cGVNYXRjaGVyKCd0YWJsZS1yb3cnKSkpIHtcbiAgICAgIGluc2VydEZyYWdtZW50KGZyYWdtZW50KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IHtcbiAgICAgIHJvdyxcbiAgICAgIGNvbHVtbixcbiAgICAgIHRhYmxlUGF0aCxcbiAgICAgIHRhYmxlXG4gICAgfSA9IHNlbGVjdGVkVGFibGVBcmVhO1xuICAgIGNvbnN0IGV4aXN0aW5nQm9keSA9IHNlbGVjdGVkVGFibGVBcmVhLnRhYmxlLmNoaWxkcmVuW3NlbGVjdGVkVGFibGVBcmVhLnRhYmxlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSA/IDAgOiAxXTtcbiAgICBpZiAobmV3Um93c1swXS50eXBlICE9PSAndGFibGUtcm93JyB8fCBleGlzdGluZ0JvZHkudHlwZSAhPT0gJ3RhYmxlLWJvZHknIHx8IGV4aXN0aW5nQm9keS5jaGlsZHJlblswXS50eXBlICE9PSAndGFibGUtcm93Jykge1xuICAgICAgaW5zZXJ0RnJhZ21lbnQoZnJhZ21lbnQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBoYXNIZWFkID0gdGFibGUuY2hpbGRyZW5bMF0udHlwZSA9PT0gJ3RhYmxlLWhlYWQnO1xuICAgIGlmIChzZWxlY3RlZFRhYmxlQXJlYS5zaW5nbGVDZWxsICE9PSAnbWFueScpIHtcbiAgICAgIHJvdyA9IHtcbiAgICAgICAgc3RhcnQ6IHJvdy5zdGFydCxcbiAgICAgICAgZW5kOiBNYXRoLm1pbihyb3cuc3RhcnQgKyBuZXdSb3dzLmxlbmd0aCAtIDEsIGV4aXN0aW5nQm9keS5jaGlsZHJlbi5sZW5ndGggLSAxICsgKGhhc0hlYWQgPyAxIDogMCkpXG4gICAgICB9O1xuICAgICAgY29sdW1uID0ge1xuICAgICAgICBzdGFydDogY29sdW1uLnN0YXJ0LFxuICAgICAgICBlbmQ6IE1hdGgubWluKGNvbHVtbi5zdGFydCArIG5ld1Jvd3NbMF0uY2hpbGRyZW4ubGVuZ3RoIC0gMSwgZXhpc3RpbmdCb2R5LmNoaWxkcmVuWzBdLmNoaWxkcmVuLmxlbmd0aCAtIDEpXG4gICAgICB9O1xuICAgIH1cbiAgICBFZGl0b3Iud2l0aG91dE5vcm1hbGl6aW5nKGVkaXRvciwgKCkgPT4ge1xuICAgICAgZm9yIChsZXQgcm93SW5kZXggPSByb3cuc3RhcnQ7IHJvd0luZGV4IDw9IHJvdy5lbmQ7IHJvd0luZGV4KyspIHtcbiAgICAgICAgY29uc3QgbmV3Um93ID0gbmV3Um93c1socm93SW5kZXggLSByb3cuc3RhcnQpICUgbmV3Um93cy5sZW5ndGhdO1xuICAgICAgICBmb3IgKGxldCBjZWxsSW5kZXggPSBjb2x1bW4uc3RhcnQ7IGNlbGxJbmRleCA8PSBjb2x1bW4uZW5kOyBjZWxsSW5kZXgrKykge1xuICAgICAgICAgIGNvbnN0IHJlbGF0aXZlQ2VsbFBhdGggPSBbLi4uZ2V0UmVsYXRpdmVSb3dQYXRoKGhhc0hlYWQsIHJvd0luZGV4KSwgY2VsbEluZGV4XTtcbiAgICAgICAgICBjb25zdCBjZWxsID0gTm9kZS5nZXQodGFibGUsIHJlbGF0aXZlQ2VsbFBhdGgpO1xuICAgICAgICAgIGNvbnN0IG5ld0NlbGwgPSBuZXdSb3cuY2hpbGRyZW5bKGNlbGxJbmRleCAtIGNvbHVtbi5zdGFydCkgJSBuZXdSb3cuY2hpbGRyZW4ubGVuZ3RoXTtcbiAgICAgICAgICBpZiAoY2VsbC50eXBlICE9PSAndGFibGUtY2VsbCcgfHwgbmV3Q2VsbC50eXBlICE9PSAndGFibGUtY2VsbCcpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBjZWxsUGF0aCA9IFsuLi50YWJsZVBhdGgsIC4uLnJlbGF0aXZlQ2VsbFBhdGhdO1xuICAgICAgICAgIGZvciAoY29uc3QgY2hpbGRJZHggb2YgWy4uLmNlbGwuY2hpbGRyZW4ua2V5cygpXS5yZXZlcnNlKCkpIHtcbiAgICAgICAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgIGF0OiBbLi4uY2VsbFBhdGgsIGNoaWxkSWR4XVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFRyYW5zZm9ybXMuaW5zZXJ0Tm9kZXMoZWRpdG9yLCBuZXdDZWxsLmNoaWxkcmVuLm1hcChjbG9uZURlc2NlbmRhbnQpLCB7XG4gICAgICAgICAgICBhdDogWy4uLmNlbGxQYXRoLCAwXVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBUcmFuc2Zvcm1zLnNldFNlbGVjdGlvbihlZGl0b3IsIHtcbiAgICAgICAgYW5jaG9yOiBFZGl0b3Iuc3RhcnQoZWRpdG9yLCBbLi4udGFibGVQYXRoLCAuLi5nZXRSZWxhdGl2ZVJvd1BhdGgoaGFzSGVhZCwgcm93LnN0YXJ0KSwgY29sdW1uLnN0YXJ0XSksXG4gICAgICAgIGZvY3VzOiBFZGl0b3IuZW5kKGVkaXRvciwgWy4uLnRhYmxlUGF0aCwgLi4uZ2V0UmVsYXRpdmVSb3dQYXRoKGhhc0hlYWQsIHJvdy5lbmQpLCBjb2x1bW4uZW5kXSlcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuICBlZGl0b3IuZGVsZXRlQmFja3dhcmQgPSB1bml0ID0+IHtcbiAgICBpZiAoZWRpdG9yLnNlbGVjdGlvbiAmJiBSYW5nZS5pc0NvbGxhcHNlZChlZGl0b3Iuc2VsZWN0aW9uKSAmJiBlZGl0b3Iuc2VsZWN0aW9uLmFuY2hvci5vZmZzZXQgPT09IDApIHtcbiAgICAgIGNvbnN0IHRhYmxlQ2VsbCA9IEVkaXRvci5hYm92ZShlZGl0b3IsIHtcbiAgICAgICAgbWF0Y2g6IG5vZGVUeXBlTWF0Y2hlcigndGFibGUtY2VsbCcpXG4gICAgICB9KTtcbiAgICAgIGlmICh0YWJsZUNlbGwgJiYgdGFibGVDZWxsWzBdLmNoaWxkcmVuWzBdLnR5cGUgPT09ICdwYXJhZ3JhcGgnICYmIHRhYmxlQ2VsbFswXS5jaGlsZHJlblswXS5jaGlsZHJlblswXS50eXBlID09PSB1bmRlZmluZWQgJiYgUGF0aC5lcXVhbHMoZWRpdG9yLnNlbGVjdGlvbi5hbmNob3IucGF0aCwgWy4uLnRhYmxlQ2VsbFsxXSwgMCwgMF0pKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgZGVsZXRlQmFja3dhcmQodW5pdCk7XG4gIH07XG4gIGVkaXRvci5nZXRGcmFnbWVudCA9ICgpID0+IHtcbiAgICBjb25zdCBzZWxlY3RlZFRhYmxlQXJlYSA9IGdldFNlbGVjdGVkVGFibGVBcmVhKGVkaXRvcik7XG4gICAgaWYgKHNlbGVjdGVkVGFibGVBcmVhICYmIHNlbGVjdGVkVGFibGVBcmVhLnNpbmdsZUNlbGwgIT09ICdub3Qtc2VsZWN0ZWQnKSB7XG4gICAgICB2YXIgX3RhYmxlJGNoaWxkcmVuJDtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgdGFibGVcbiAgICAgIH0gPSBzZWxlY3RlZFRhYmxlQXJlYTtcbiAgICAgIGNvbnN0IGZpcnN0ID0gdGFibGUuY2hpbGRyZW5bMF0udHlwZSA9PT0gJ3RhYmxlLWhlYWQnIHx8IHRhYmxlLmNoaWxkcmVuWzBdLnR5cGUgPT09ICd0YWJsZS1ib2R5JyA/IHRhYmxlLmNoaWxkcmVuWzBdIDogdW5kZWZpbmVkO1xuICAgICAgaWYgKCFmaXJzdCkge1xuICAgICAgICByZXR1cm4gZ2V0RnJhZ21lbnQoKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNlY29uZCA9ICgoX3RhYmxlJGNoaWxkcmVuJCA9IHRhYmxlLmNoaWxkcmVuWzFdKSA9PT0gbnVsbCB8fCBfdGFibGUkY2hpbGRyZW4kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGFibGUkY2hpbGRyZW4kLnR5cGUpID09PSAndGFibGUtYm9keScgPyB0YWJsZS5jaGlsZHJlblsxXSA6IHVuZGVmaW5lZDtcbiAgICAgIGNvbnN0IGJvZHkgPSBzZWNvbmQgfHwgZmlyc3Q7XG4gICAgICBjb25zdCBoYXNIZWFkID0gZmlyc3QudHlwZSA9PT0gJ3RhYmxlLWhlYWQnO1xuICAgICAgY29uc3QgaXNTZWxlY3Rpb25JbkhlYWQgPSBzZWxlY3RlZFRhYmxlQXJlYS5yb3cuc3RhcnQgPT09IDAgJiYgISFzZWNvbmQ7XG4gICAgICBjb25zdCBjb2x1bW5MZW5ndGggPSBzZWxlY3RlZFRhYmxlQXJlYS5jb2x1bW4uZW5kIC0gc2VsZWN0ZWRUYWJsZUFyZWEuY29sdW1uLnN0YXJ0ICsgMTtcbiAgICAgIHJldHVybiBbe1xuICAgICAgICB0eXBlOiAndGFibGUnLFxuICAgICAgICBjaGlsZHJlbjogWy4uLihpc1NlbGVjdGlvbkluSGVhZCA/IFt7XG4gICAgICAgICAgdHlwZTogJ3RhYmxlLWhlYWQnLFxuICAgICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgICAgdHlwZTogJ3RhYmxlLXJvdycsXG4gICAgICAgICAgICBjaGlsZHJlbjogQXJyYXkuZnJvbSh7XG4gICAgICAgICAgICAgIGxlbmd0aDogY29sdW1uTGVuZ3RoXG4gICAgICAgICAgICB9KS5tYXAoKF8sIGNvbHVtbkluZGV4KSA9PiBmaXJzdC5jaGlsZHJlblswXS5jaGlsZHJlbltjb2x1bW5JbmRleCArIHNlbGVjdGVkVGFibGVBcmVhLmNvbHVtbi5zdGFydF0pXG4gICAgICAgICAgfV1cbiAgICAgICAgfV0gOiBbXSksIHtcbiAgICAgICAgICB0eXBlOiAndGFibGUtYm9keScsXG4gICAgICAgICAgY2hpbGRyZW46IEFycmF5LmZyb20oe1xuICAgICAgICAgICAgbGVuZ3RoOiBzZWxlY3RlZFRhYmxlQXJlYS5yb3cuZW5kIC0gc2VsZWN0ZWRUYWJsZUFyZWEucm93LnN0YXJ0ICsgKGlzU2VsZWN0aW9uSW5IZWFkID8gMCA6IDEpXG4gICAgICAgICAgfSkubWFwKChfLCByb3dJbmRleCkgPT4gKHtcbiAgICAgICAgICAgIHR5cGU6ICd0YWJsZS1yb3cnLFxuICAgICAgICAgICAgY2hpbGRyZW46IEFycmF5LmZyb20oe1xuICAgICAgICAgICAgICBsZW5ndGg6IGNvbHVtbkxlbmd0aFxuICAgICAgICAgICAgfSkubWFwKChfLCBjb2x1bW5JbmRleCkgPT4gYm9keS5jaGlsZHJlbltyb3dJbmRleCArIHNlbGVjdGVkVGFibGVBcmVhLnJvdy5zdGFydCAtIChoYXNIZWFkICYmICFpc1NlbGVjdGlvbkluSGVhZCA/IDEgOiAwKV0uY2hpbGRyZW5bY29sdW1uSW5kZXggKyBzZWxlY3RlZFRhYmxlQXJlYS5jb2x1bW4uc3RhcnRdKVxuICAgICAgICAgIH0pKVxuICAgICAgICB9XVxuICAgICAgfV07XG4gICAgfVxuICAgIHJldHVybiBnZXRGcmFnbWVudCgpO1xuICB9O1xuICBlZGl0b3IuZGVsZXRlRnJhZ21lbnQgPSBkaXJlY3Rpb24gPT4ge1xuICAgIGlmICghZWRpdG9yLnNlbGVjdGlvbiB8fCBSYW5nZS5pc0NvbGxhcHNlZChlZGl0b3Iuc2VsZWN0aW9uKSkge1xuICAgICAgZGVsZXRlRnJhZ21lbnQoZGlyZWN0aW9uKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc2VsZWN0ZWRUYWJsZUFyZWEgPSBnZXRTZWxlY3RlZFRhYmxlQXJlYShlZGl0b3IpO1xuICAgIGlmICghc2VsZWN0ZWRUYWJsZUFyZWEgfHwgc2VsZWN0ZWRUYWJsZUFyZWEuc2luZ2xlQ2VsbCA9PT0gJ25vdC1zZWxlY3RlZCcpIHtcbiAgICAgIGRlbGV0ZUZyYWdtZW50KGRpcmVjdGlvbik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGhlYWRPckJvZHkgPSBzZWxlY3RlZFRhYmxlQXJlYS50YWJsZS5jaGlsZHJlblswXTtcbiAgICBpZiAoIUVsZW1lbnQkMS5pc0VsZW1lbnQoaGVhZE9yQm9keSkgfHwgIUVsZW1lbnQkMS5pc0VsZW1lbnQoaGVhZE9yQm9keS5jaGlsZHJlblswXSkpIHtcbiAgICAgIGRlbGV0ZUZyYWdtZW50KGRpcmVjdGlvbik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG1heFJvd0lkeCA9IHNlbGVjdGVkVGFibGVBcmVhLnRhYmxlLmNoaWxkcmVuLnJlZHVjZSgoc3VtLCBoZWFkT3JCb2R5KSA9PiBzdW0gKyAoaGVhZE9yQm9keS50eXBlID09PSAndGFibGUtaGVhZCcgfHwgaGVhZE9yQm9keS50eXBlID09PSAndGFibGUtYm9keScgPyBoZWFkT3JCb2R5LmNoaWxkcmVuLmxlbmd0aCA6IDApLCAwKSAtIDE7XG4gICAgY29uc3Qge1xuICAgICAgcm93LFxuICAgICAgY29sdW1uLFxuICAgICAgdGFibGVQYXRoXG4gICAgfSA9IHNlbGVjdGVkVGFibGVBcmVhO1xuICAgIC8vIG5vdGUgdGhlIGZhY3QgdGhhdCBoYXNXaG9sZUNvbHVtblNlbGVjdGVkIHVzZXMgcm93IGFuZCBoYXNXaG9sZVJvd1NlbGVjdGVkIHVzZXMgY29sdW1uXG4gICAgLy8gaXMgbm90IGEgbWlzdGFrZS4gaWYgYSB3aG9sZSBjb2x1bW4gaGFzIGJlZW4gc2VsZWN0ZWQsIHRoZW4gdGhlIHN0YXJ0aW5nIHJvdyBpcyAwIGFuZCB0aGUgZW5kIGlzIHRoZSBsYXN0IHJvd1xuICAgIGNvbnN0IGhhc1dob2xlQ29sdW1uU2VsZWN0ZWQgPSByb3cuc3RhcnQgPT09IDAgJiYgcm93LmVuZCA9PT0gbWF4Um93SWR4O1xuICAgIGNvbnN0IGhhc1dob2xlUm93U2VsZWN0ZWQgPSBjb2x1bW4uc3RhcnQgPT09IDAgJiYgY29sdW1uLmVuZCA9PT0gaGVhZE9yQm9keS5jaGlsZHJlblswXS5jaGlsZHJlbi5sZW5ndGggLSAxO1xuICAgIGlmIChoYXNXaG9sZUNvbHVtblNlbGVjdGVkICYmIGhhc1dob2xlUm93U2VsZWN0ZWQpIHtcbiAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgIGF0OiB0YWJsZVBhdGhcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBoYXNIZWFkID0gaGVhZE9yQm9keS50eXBlID09PSAndGFibGUtaGVhZCc7XG4gICAgaWYgKGhhc1dob2xlUm93U2VsZWN0ZWQpIHtcbiAgICAgIEVkaXRvci53aXRob3V0Tm9ybWFsaXppbmcoZWRpdG9yLCAoKSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSByb3cuZW5kOyBpID49IHJvdy5zdGFydDsgaS0tKSB7XG4gICAgICAgICAgaWYgKGhhc0hlYWQpIHtcbiAgICAgICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgICAgYXQ6IFsuLi50YWJsZVBhdGgsIDBdXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICAgIGF0OiBbLi4udGFibGVQYXRoLCAxLCBpIC0gMV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIFRyYW5zZm9ybXMucmVtb3ZlTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgICBhdDogWy4uLnRhYmxlUGF0aCwgMCwgaV1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChoYXNXaG9sZUNvbHVtblNlbGVjdGVkKSB7XG4gICAgICBFZGl0b3Iud2l0aG91dE5vcm1hbGl6aW5nKGVkaXRvciwgKCkgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gY29sdW1uLmVuZDsgaSA+PSBjb2x1bW4uc3RhcnQ7IGktLSkge1xuICAgICAgICAgIGZvciAobGV0IHJvd0lkeCA9IDA7IHJvd0lkeCA8PSBtYXhSb3dJZHg7IHJvd0lkeCsrKSB7XG4gICAgICAgICAgICBUcmFuc2Zvcm1zLnJlbW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgICBhdDogWy4uLnRhYmxlUGF0aCwgLi4uZ2V0UmVsYXRpdmVSb3dQYXRoKGhhc0hlYWQsIHJvd0lkeCksIGldXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uUGF0aCA9IFsuLi50YWJsZVBhdGgsIDAsIDAsIGNvbHVtbi5zdGFydF07XG4gICAgICAgIGNvbnN0IHBvaW50ID0gRWRpdG9yLnN0YXJ0KGVkaXRvciwgY29sdW1uLnN0YXJ0ID09PSAwID8gc2VsZWN0aW9uUGF0aCA6IFBhdGgucHJldmlvdXMoc2VsZWN0aW9uUGF0aCkpO1xuICAgICAgICBUcmFuc2Zvcm1zLnNlbGVjdChlZGl0b3IsIHBvaW50KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzZWxlY3Rpb25TdGFydCA9IEVkaXRvci5zdGFydChlZGl0b3IsIGVkaXRvci5zZWxlY3Rpb24pLnBhdGg7XG4gICAgRWRpdG9yLndpdGhvdXROb3JtYWxpemluZyhlZGl0b3IsICgpID0+IHtcbiAgICAgIGZvciAobGV0IHJvd0luZGV4ID0gcm93LnN0YXJ0OyByb3dJbmRleCA8PSByb3cuZW5kOyByb3dJbmRleCsrKSB7XG4gICAgICAgIGZvciAobGV0IGNlbGxJbmRleCA9IGNvbHVtbi5zdGFydDsgY2VsbEluZGV4IDw9IGNvbHVtbi5lbmQ7IGNlbGxJbmRleCsrKSB7XG4gICAgICAgICAgY29uc3QgcmVsYXRpdmVDZWxsUGF0aCA9IFsuLi5nZXRSZWxhdGl2ZVJvd1BhdGgoaGFzSGVhZCwgcm93SW5kZXgpLCBjZWxsSW5kZXhdO1xuICAgICAgICAgIGNvbnN0IGNlbGwgPSBOb2RlLmdldChzZWxlY3RlZFRhYmxlQXJlYS50YWJsZSwgcmVsYXRpdmVDZWxsUGF0aCk7XG4gICAgICAgICAgaWYgKCFFbGVtZW50JDEuaXNFbGVtZW50KGNlbGwpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgY2VsbFBhdGggPSBbLi4udGFibGVQYXRoLCAuLi5yZWxhdGl2ZUNlbGxQYXRoXTtcbiAgICAgICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgdHlwZTogJ3BhcmFncmFwaCcsXG4gICAgICAgICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgICAgICAgdGV4dDogJydcbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfSwge1xuICAgICAgICAgICAgYXQ6IFsuLi5jZWxsUGF0aCwgMF1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBmb3IgKGNvbnN0IGNoaWxkSWR4IG9mIFsuLi5jZWxsLmNoaWxkcmVuLmtleXMoKV0ucmV2ZXJzZSgpKSB7XG4gICAgICAgICAgICBUcmFuc2Zvcm1zLnJlbW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgICBhdDogWy4uLmNlbGxQYXRoLCBjaGlsZElkeCArIDFdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFRyYW5zZm9ybXMuc2VsZWN0KGVkaXRvciwgc2VsZWN0aW9uU3RhcnQpO1xuICAgIH0pO1xuICB9O1xuICBlZGl0b3Iubm9ybWFsaXplTm9kZSA9IGVudHJ5ID0+IHtcbiAgICBjb25zdCBbbm9kZSwgcGF0aF0gPSBlbnRyeTtcbiAgICBpZiAobm9kZS50eXBlID09PSAndGFibGUtaGVhZCcgJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICBtb3ZlQ2hpbGRyZW4oZWRpdG9yLCBwYXRoLCBQYXRoLm5leHQocGF0aCksIChfLCBpKSA9PiBpICE9PSAwKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IGRpZFVwZGF0ZVRoaW5ncyA9IGZhbHNlO1xuICAgIGZvciAoY29uc3QgcGFyZW50IG9mIFsndGFibGUtYm9keScsICd0YWJsZS1oZWFkJ10pIHtcbiAgICAgIGlmIChub2RlLnR5cGUgPT09IHBhcmVudCkge1xuICAgICAgICBmb3IgKGNvbnN0IFtyb3dJZHgsIHJvd10gb2Ygbm9kZS5jaGlsZHJlbi5lbnRyaWVzKCkpIHtcbiAgICAgICAgICBpZiAocm93LnR5cGUgPT09ICd0YWJsZS1yb3cnKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtjZWxsSWR4LCBjZWxsXSBvZiByb3cuY2hpbGRyZW4uZW50cmllcygpKSB7XG4gICAgICAgICAgICAgIGlmIChjZWxsLnR5cGUgPT09ICd0YWJsZS1jZWxsJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGF0ID0gWy4uLnBhdGgsIHJvd0lkeCwgY2VsbElkeF07XG4gICAgICAgICAgICAgICAgaWYgKGNlbGwuaGVhZGVyICYmIHBhcmVudCA9PT0gJ3RhYmxlLWJvZHknKSB7XG4gICAgICAgICAgICAgICAgICBUcmFuc2Zvcm1zLnVuc2V0Tm9kZXMoZWRpdG9yLCAnaGVhZGVyJywge1xuICAgICAgICAgICAgICAgICAgICBhdFxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICBkaWRVcGRhdGVUaGluZ3MgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWNlbGwuaGVhZGVyICYmIHBhcmVudCA9PT0gJ3RhYmxlLWhlYWQnKSB7XG4gICAgICAgICAgICAgICAgICBUcmFuc2Zvcm1zLnNldE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXI6IHRydWVcbiAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgYXRcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgZGlkVXBkYXRlVGhpbmdzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRpZFVwZGF0ZVRoaW5ncykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAobm9kZS50eXBlID09PSAndGFibGUnKSB7XG4gICAgICBjb25zdCBtYXhSb3dDb3VudCA9IG5vZGUuY2hpbGRyZW4ucmVkdWNlKChtYXgsIG5vZGUpID0+IG5vZGUudHlwZSA9PT0gJ3RhYmxlLWhlYWQnIHx8IG5vZGUudHlwZSA9PT0gJ3RhYmxlLWJvZHknID8gbm9kZS5jaGlsZHJlbi5yZWR1Y2UoKG1heCwgbm9kZSkgPT4gbm9kZS50eXBlID09PSAndGFibGUtcm93JyA/IE1hdGgubWF4KG1heCwgbm9kZS5jaGlsZHJlbi5sZW5ndGgpIDogbWF4LCBtYXgpIDogbWF4LCAwKTtcbiAgICAgIGxldCBkaWRJbnNlcnQgPSBmYWxzZTtcbiAgICAgIGZvciAoY29uc3QgW2lkeCwgY2hpbGRdIG9mIG5vZGUuY2hpbGRyZW4uZW50cmllcygpKSB7XG4gICAgICAgIGlmIChjaGlsZC50eXBlID09PSAndGFibGUtYm9keScgfHwgY2hpbGQudHlwZSA9PT0gJ3RhYmxlLWhlYWQnKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBbcm93SWR4LCByb3ddIG9mIGNoaWxkLmNoaWxkcmVuLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgaWYgKHJvdy50eXBlID09PSAndGFibGUtcm93JyAmJiByb3cuY2hpbGRyZW4ubGVuZ3RoICE9PSBtYXhSb3dDb3VudCkge1xuICAgICAgICAgICAgICBUcmFuc2Zvcm1zLmluc2VydE5vZGVzKGVkaXRvciwgQXJyYXkuZnJvbSh7XG4gICAgICAgICAgICAgICAgbGVuZ3RoOiBtYXhSb3dDb3VudCAtIHJvdy5jaGlsZHJlbi5sZW5ndGhcbiAgICAgICAgICAgICAgfSwgKCkgPT4gY2VsbChjaGlsZC50eXBlID09PSAndGFibGUtaGVhZCcpKSwge1xuICAgICAgICAgICAgICAgIGF0OiBbLi4ucGF0aCwgaWR4LCByb3dJZHgsIHJvdy5jaGlsZHJlbi5sZW5ndGhdXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBkaWRJbnNlcnQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGRpZEluc2VydCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDEgJiYgbm9kZS5jaGlsZHJlblswXS50eXBlID09PSAndGFibGUtaGVhZCcpIHtcbiAgICAgICAgVHJhbnNmb3Jtcy5pbnNlcnROb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICB0eXBlOiAndGFibGUtYm9keScsXG4gICAgICAgICAgY2hpbGRyZW46IEFycmF5LmZyb20oe1xuICAgICAgICAgICAgbGVuZ3RoOiBub2RlLmNoaWxkcmVuWzBdLmNoaWxkcmVuLmxlbmd0aFxuICAgICAgICAgIH0sICgpID0+IGNlbGwoZmFsc2UpKVxuICAgICAgICB9LCB7XG4gICAgICAgICAgYXQ6IFsuLi5wYXRoLCAxXVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAyICYmIG5vZGUuY2hpbGRyZW5bMV0udHlwZSA9PT0gJ3RhYmxlLWhlYWQnKSB7XG4gICAgICAgIFRyYW5zZm9ybXMubW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgICAgIGF0OiBbLi4ucGF0aCwgMV0sXG4gICAgICAgICAgdG86IFsuLi5wYXRoLCAwXVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKG5vZGUuY2hpbGRyZW4ubGVuZ3RoID4gMikge1xuICAgICAgICBtb3ZlQ2hpbGRyZW4oZWRpdG9yLCBwYXRoLCBQYXRoLm5leHQocGF0aCksIChfLCBpKSA9PiBpICE9PSAwICYmIGkgIT09IDEpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIG5vcm1hbGl6ZU5vZGUoZW50cnkpO1xuICB9O1xuICByZXR1cm4gZWRpdG9yO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVEb2N1bWVudEVkaXRvckZvck5vcm1hbGl6YXRpb24oZG9jdW1lbnRGZWF0dXJlcywgY29tcG9uZW50QmxvY2tzKSB7XG4gIHJldHVybiBfY3JlYXRlRG9jdW1lbnRFZGl0b3IoY3JlYXRlRWRpdG9yKCksIGRvY3VtZW50RmVhdHVyZXMsIGNvbXBvbmVudEJsb2Nrcyk7XG59XG5mdW5jdGlvbiBfY3JlYXRlRG9jdW1lbnRFZGl0b3IoYmFzZUVkaXRvciwgZG9jdW1lbnRGZWF0dXJlcywgY29tcG9uZW50QmxvY2tzKSB7XG4gIHJldHVybiB3aXRoQmxvY2tzU2NoZW1hKHdpdGhQYXJhZ3JhcGhzKHdpdGhMaW5rKGRvY3VtZW50RmVhdHVyZXMsIGNvbXBvbmVudEJsb2Nrcywgd2l0aExpc3Qod2l0aFRhYmxlKHdpdGhDb21wb25lbnRCbG9ja3MoY29tcG9uZW50QmxvY2tzLCBkb2N1bWVudEZlYXR1cmVzLCB3aXRoVm9pZEVsZW1lbnRzKHdpdGhMYXlvdXRzKHdpdGhDb2RlQmxvY2soZG9jdW1lbnRGZWF0dXJlcywgY29tcG9uZW50QmxvY2tzLCB3aXRoRG9jdW1lbnRGZWF0dXJlc05vcm1hbGl6YXRpb24oZG9jdW1lbnRGZWF0dXJlcywgYmFzZUVkaXRvcikpKSkpKSkpKSk7XG59XG5mdW5jdGlvbiB3aXRoQmxvY2tzU2NoZW1hKGVkaXRvcikge1xuICBjb25zdCB7XG4gICAgbm9ybWFsaXplTm9kZVxuICB9ID0gZWRpdG9yO1xuICBlZGl0b3Iubm9ybWFsaXplTm9kZSA9IChbbm9kZSwgcGF0aF0pID0+IHtcbiAgICBpZiAoIVRleHQuaXNUZXh0KG5vZGUpICYmIG5vZGUudHlwZSAhPT0gJ2xpbmsnKSB7XG4gICAgICBjb25zdCBub2RlVHlwZSA9IEVkaXRvci5pc0VkaXRvcihub2RlKSA/ICdlZGl0b3InIDogbm9kZS50eXBlO1xuICAgICAgaWYgKHR5cGVvZiBub2RlVHlwZSAhPT0gJ3N0cmluZycgfHwgZWRpdG9yU2NoZW1hW25vZGVUeXBlXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIFRyYW5zZm9ybXMudW53cmFwTm9kZXMoZWRpdG9yLCB7XG4gICAgICAgICAgYXQ6IHBhdGhcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGluZm8gPSBlZGl0b3JTY2hlbWFbbm9kZVR5cGVdO1xuICAgICAgaWYgKGluZm8ua2luZCA9PT0gJ2Jsb2NrcycgJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGggIT09IDAgJiYgbm9kZS5jaGlsZHJlbi5ldmVyeShjaGlsZCA9PiAhaXNCbG9jayhjaGlsZCkpKSB7XG4gICAgICAgIFRyYW5zZm9ybXMud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgICAgIHR5cGU6IGluZm8uYmxvY2tUb1dyYXBJbmxpbmVzSW4sXG4gICAgICAgICAgY2hpbGRyZW46IFtdXG4gICAgICAgIH0sIHtcbiAgICAgICAgICBhdDogcGF0aCxcbiAgICAgICAgICBtYXRjaDogbm9kZSA9PiAhaXNCbG9jayhub2RlKVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgbGV0IGRpZFVwZGF0ZSA9IGZhbHNlO1xuICAgICAgZm9yIChjb25zdCBbaW5kZXgsIGNoaWxkTm9kZV0gb2YgWy4uLm5vZGUuY2hpbGRyZW4uZW50cmllcygpXS5yZXZlcnNlKCkpIHtcbiAgICAgICAgY29uc3QgY2hpbGRQYXRoID0gWy4uLnBhdGgsIGluZGV4XTtcbiAgICAgICAgaWYgKGluZm8ua2luZCA9PT0gJ2lubGluZXMnKSB7XG4gICAgICAgICAgaWYgKCFUZXh0LmlzVGV4dChjaGlsZE5vZGUpICYmIGlzQmxvY2soY2hpbGROb2RlKSkge1xuICAgICAgICAgICAgaGFuZGxlTm9kZUluSW52YWxpZFBvc2l0aW9uKGVkaXRvciwgW2NoaWxkTm9kZSwgY2hpbGRQYXRoXSwgcGF0aCk7XG4gICAgICAgICAgICBkaWRVcGRhdGUgPSB0cnVlO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICghaXNCbG9jayhjaGlsZE5vZGUpKSB7XG4gICAgICAgICAgICBUcmFuc2Zvcm1zLndyYXBOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgICAgICAgdHlwZTogaW5mby5ibG9ja1RvV3JhcElubGluZXNJbixcbiAgICAgICAgICAgICAgY2hpbGRyZW46IFtdXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgIGF0OiBjaGlsZFBhdGhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGlkVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWluZm8uYWxsb3dlZENoaWxkcmVuLmhhcyhjaGlsZE5vZGUudHlwZSkpIHtcbiAgICAgICAgICAgIGhhbmRsZU5vZGVJbkludmFsaWRQb3NpdGlvbihlZGl0b3IsIFtjaGlsZE5vZGUsIGNoaWxkUGF0aF0sIHBhdGgpO1xuICAgICAgICAgICAgZGlkVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGRpZFVwZGF0ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIG5vcm1hbGl6ZU5vZGUoW25vZGUsIHBhdGhdKTtcbiAgfTtcbiAgcmV0dXJuIGVkaXRvcjtcbn1cbmZ1bmN0aW9uIGhhbmRsZU5vZGVJbkludmFsaWRQb3NpdGlvbihlZGl0b3IsIFtub2RlLCBwYXRoXSwgYW5jZXN0b3JQYXRoKSB7XG4gIGNvbnN0IG5vZGVUeXBlID0gbm9kZS50eXBlO1xuICBjb25zdCBjaGlsZE5vZGVJbmZvID0gZWRpdG9yU2NoZW1hW25vZGVUeXBlXTtcbiAgLy8gdGhlIHBhcmVudCBvZiBhIGJsb2NrIHdpbGwgbmV2ZXIgYmUgYW4gaW5saW5lIHNvIHRoaXMgY2FzdGluZyBpcyBva2F5XG4gIGNvbnN0IGFuY2VzdG9yTm9kZSA9IE5vZGUuZ2V0KGVkaXRvciwgYW5jZXN0b3JQYXRoKTtcbiAgY29uc3QgcGFyZW50Tm9kZVR5cGUgPSBFZGl0b3IuaXNFZGl0b3IoYW5jZXN0b3JOb2RlKSA/ICdlZGl0b3InIDogYW5jZXN0b3JOb2RlLnR5cGU7XG4gIGNvbnN0IHBhcmVudE5vZGVJbmZvID0gZWRpdG9yU2NoZW1hW3BhcmVudE5vZGVUeXBlXTtcbiAgaWYgKCFjaGlsZE5vZGVJbmZvIHx8IGNoaWxkTm9kZUluZm8uaW52YWxpZFBvc2l0aW9uSGFuZGxlTW9kZSA9PT0gJ3Vud3JhcCcpIHtcbiAgICBpZiAocGFyZW50Tm9kZUluZm8ua2luZCA9PT0gJ2Jsb2NrcycgJiYgcGFyZW50Tm9kZUluZm8uYmxvY2tUb1dyYXBJbmxpbmVzSW4pIHtcbiAgICAgIFRyYW5zZm9ybXMuc2V0Tm9kZXMoZWRpdG9yLCB7XG4gICAgICAgIHR5cGU6IHBhcmVudE5vZGVJbmZvLmJsb2NrVG9XcmFwSW5saW5lc0luLFxuICAgICAgICAuLi5PYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmtleXMobm9kZSkuZmlsdGVyKGtleSA9PiBrZXkgIT09ICd0eXBlJyAmJiBrZXkgIT09ICdjaGlsZHJlbicpLm1hcChrZXkgPT4gW2tleSwgbnVsbF0pKSAvLyB0aGUgU2xhdGUgdHlwZXMgZG9uJ3QgdW5kZXJzdGFuZCB0aGF0IG51bGwgaXMgYWxsb3dlZCBhbmQgaXQgd2lsbCB1bnNldCBwcm9wZXJ0aWVzIHdpdGggc2V0Tm9kZXNcbiAgICAgIH0sIHtcbiAgICAgICAgYXQ6IHBhdGhcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBUcmFuc2Zvcm1zLnVud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgYXQ6IHBhdGhcbiAgICB9KTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgaW5mbyA9IGVkaXRvclNjaGVtYVthbmNlc3Rvck5vZGUudHlwZSB8fCAnZWRpdG9yJ107XG4gIGlmICgoaW5mbyA9PT0gbnVsbCB8fCBpbmZvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpbmZvLmtpbmQpID09PSAnYmxvY2tzJyAmJiBpbmZvLmFsbG93ZWRDaGlsZHJlbi5oYXMobm9kZVR5cGUpKSB7XG4gICAgaWYgKGFuY2VzdG9yUGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgIFRyYW5zZm9ybXMubW92ZU5vZGVzKGVkaXRvciwge1xuICAgICAgICBhdDogcGF0aCxcbiAgICAgICAgdG86IFtwYXRoWzBdICsgMV1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBUcmFuc2Zvcm1zLm1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgICAgYXQ6IHBhdGgsXG4gICAgICAgIHRvOiBQYXRoLm5leHQoYW5jZXN0b3JQYXRoKVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuICBpZiAoRWRpdG9yLmlzRWRpdG9yKGFuY2VzdG9yTm9kZSkpIHtcbiAgICBUcmFuc2Zvcm1zLm1vdmVOb2RlcyhlZGl0b3IsIHtcbiAgICAgIGF0OiBwYXRoLFxuICAgICAgdG86IFtwYXRoWzBdICsgMV1cbiAgICB9KTtcbiAgICBUcmFuc2Zvcm1zLnVud3JhcE5vZGVzKGVkaXRvciwge1xuICAgICAgYXQ6IFtwYXRoWzBdICsgMV1cbiAgICB9KTtcbiAgICByZXR1cm47XG4gIH1cbiAgaGFuZGxlTm9kZUluSW52YWxpZFBvc2l0aW9uKGVkaXRvciwgW25vZGUsIHBhdGhdLCBhbmNlc3RvclBhdGguc2xpY2UoMCwgLTEpKTtcbn1cbmZ1bmN0aW9uIHdpdGhWb2lkRWxlbWVudHMoZWRpdG9yKSB7XG4gIGNvbnN0IHtcbiAgICBpc1ZvaWRcbiAgfSA9IGVkaXRvcjtcbiAgZWRpdG9yLmlzVm9pZCA9IG5vZGUgPT4ge1xuICAgIHJldHVybiBub2RlLnR5cGUgPT09ICdkaXZpZGVyJyB8fCBub2RlLnR5cGUgPT09ICdpbWFnZScgfHwgaXNWb2lkKG5vZGUpO1xuICB9O1xuICByZXR1cm4gZWRpdG9yO1xufVxuXG5jb25zdCB0ZXh0RW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuY29uc3QgdGV4dERlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcbmNvbnN0IGRlZmF1bHRBbHRGaWVsZCA9IHRleHQoe1xuICBsYWJlbDogJ0FsdCB0ZXh0JyxcbiAgZGVzY3JpcHRpb246ICdUaGlzIHRleHQgd2lsbCBiZSB1c2VkIGJ5IHNjcmVlbiByZWFkZXJzIGFuZCBzZWFyY2ggZW5naW5lcy4nXG59KTtcbmNvbnN0IGVtcHR5VGl0bGVGaWVsZCA9IGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlKHtcbiAgSW5wdXQoKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0sXG4gIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICByZXR1cm4gJyc7XG4gIH0sXG4gIHBhcnNlKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHJldHVybiAnJztcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIHN0cmluZycpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH0sXG4gIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LFxuICBzZXJpYWxpemUodmFsdWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsdWVcbiAgICB9O1xuICB9XG59KTtcbmZ1bmN0aW9uIG5vcm1hbGlzZURvY3VtZW50RmVhdHVyZXMoY29uZmlnKSB7XG4gIHZhciBfY29uZmlnJGZvcm1hdHRpbmcsIF9mb3JtYXR0aW5nJGFsaWdubWVudCwgX2Zvcm1hdHRpbmckYWxpZ25tZW50MiwgX2Zvcm1hdHRpbmckYmxvY2tUeXBlLCBfZm9ybWF0dGluZyRpbmxpbmVNYXIsIF9mb3JtYXR0aW5nJGlubGluZU1hcjIsIF9mb3JtYXR0aW5nJGlubGluZU1hcjMsIF9mb3JtYXR0aW5nJGlubGluZU1hcjQsIF9mb3JtYXR0aW5nJGlubGluZU1hcjUsIF9mb3JtYXR0aW5nJGlubGluZU1hcjYsIF9mb3JtYXR0aW5nJGlubGluZU1hcjcsIF9mb3JtYXR0aW5nJGlubGluZU1hcjgsIF9mb3JtYXR0aW5nJGxpc3RUeXBlcywgX2Zvcm1hdHRpbmckbGlzdFR5cGVzMiwgX2ltYWdlc0NvbmZpZyRzY2hlbWEkLCBfaW1hZ2VzQ29uZmlnJHNjaGVtYSwgX2ltYWdlc0NvbmZpZyRzY2hlbWEkMiwgX2ltYWdlc0NvbmZpZyRzY2hlbWEyO1xuICBjb25zdCBmb3JtYXR0aW5nID0gY29uZmlnLmZvcm1hdHRpbmcgPT09IHRydWUgPyB7XG4gICAgLy8gYWxpZ25tZW50OiB0cnVlLCAvLyBub3Qgc3VwcG9ydGVkIG5hdGl2ZWx5IGluIG1hcmtkb3duXG4gICAgYmxvY2tUeXBlczogdHJ1ZSxcbiAgICBoZWFkaW5nTGV2ZWxzOiB0cnVlLFxuICAgIGlubGluZU1hcmtzOiB0cnVlLFxuICAgIGxpc3RUeXBlczogdHJ1ZSxcbiAgICBzb2Z0QnJlYWtzOiB0cnVlXG4gIH0gOiAoX2NvbmZpZyRmb3JtYXR0aW5nID0gY29uZmlnLmZvcm1hdHRpbmcpICE9PSBudWxsICYmIF9jb25maWckZm9ybWF0dGluZyAhPT0gdm9pZCAwID8gX2NvbmZpZyRmb3JtYXR0aW5nIDoge307XG4gIGNvbnN0IGltYWdlc0NvbmZpZyA9IGNvbmZpZy5pbWFnZXMgPT09IHRydWUgPyB7fSA6IGNvbmZpZy5pbWFnZXM7XG4gIHJldHVybiB7XG4gICAgZm9ybWF0dGluZzoge1xuICAgICAgYWxpZ25tZW50OiBmb3JtYXR0aW5nLmFsaWdubWVudCA9PT0gdHJ1ZSA/IHtcbiAgICAgICAgY2VudGVyOiB0cnVlLFxuICAgICAgICBlbmQ6IHRydWVcbiAgICAgIH0gOiB7XG4gICAgICAgIGNlbnRlcjogISEoKF9mb3JtYXR0aW5nJGFsaWdubWVudCA9IGZvcm1hdHRpbmcuYWxpZ25tZW50KSAhPT0gbnVsbCAmJiBfZm9ybWF0dGluZyRhbGlnbm1lbnQgIT09IHZvaWQgMCAmJiBfZm9ybWF0dGluZyRhbGlnbm1lbnQuY2VudGVyKSxcbiAgICAgICAgZW5kOiAhISgoX2Zvcm1hdHRpbmckYWxpZ25tZW50MiA9IGZvcm1hdHRpbmcuYWxpZ25tZW50KSAhPT0gbnVsbCAmJiBfZm9ybWF0dGluZyRhbGlnbm1lbnQyICE9PSB2b2lkIDAgJiYgX2Zvcm1hdHRpbmckYWxpZ25tZW50Mi5lbmQpXG4gICAgICB9LFxuICAgICAgYmxvY2tUeXBlczogKGZvcm1hdHRpbmcgPT09IG51bGwgfHwgZm9ybWF0dGluZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZm9ybWF0dGluZy5ibG9ja1R5cGVzKSA9PT0gdHJ1ZSA/IHtcbiAgICAgICAgYmxvY2txdW90ZTogdHJ1ZSxcbiAgICAgICAgY29kZToge1xuICAgICAgICAgIHNjaGVtYTogb2JqZWN0KHt9KVxuICAgICAgICB9XG4gICAgICB9IDoge1xuICAgICAgICBibG9ja3F1b3RlOiAhISgoX2Zvcm1hdHRpbmckYmxvY2tUeXBlID0gZm9ybWF0dGluZy5ibG9ja1R5cGVzKSAhPT0gbnVsbCAmJiBfZm9ybWF0dGluZyRibG9ja1R5cGUgIT09IHZvaWQgMCAmJiBfZm9ybWF0dGluZyRibG9ja1R5cGUuYmxvY2txdW90ZSksXG4gICAgICAgIGNvZGU6IChfZm9ybWF0dGluZyRibG9ja1R5cGUyID0+IHtcbiAgICAgICAgICBpZiAoKChfZm9ybWF0dGluZyRibG9ja1R5cGUyID0gZm9ybWF0dGluZy5ibG9ja1R5cGVzKSA9PT0gbnVsbCB8fCBfZm9ybWF0dGluZyRibG9ja1R5cGUyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZm9ybWF0dGluZyRibG9ja1R5cGUyLmNvZGUpID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGZvcm1hdHRpbmcuYmxvY2tUeXBlcy5jb2RlID09PSB0cnVlIHx8ICFmb3JtYXR0aW5nLmJsb2NrVHlwZXMuY29kZS5zY2hlbWEpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHNjaGVtYTogb2JqZWN0KHt9KVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgWyd0eXBlJywgJ2NoaWxkcmVuJywgJ2xhbmd1YWdlJ10pIHtcbiAgICAgICAgICAgIGlmIChrZXkgaW4gZm9ybWF0dGluZy5ibG9ja1R5cGVzLmNvZGUuc2NoZW1hKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXCIke2tleX1cIiBjYW5ub3QgYmUgYSBrZXkgaW4gdGhlIHNjaGVtYSBmb3IgY29kZSBibG9ja3NgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNjaGVtYTogb2JqZWN0KGZvcm1hdHRpbmcuYmxvY2tUeXBlcy5jb2RlLnNjaGVtYSlcbiAgICAgICAgICB9O1xuICAgICAgICB9KSgpXG4gICAgICB9LFxuICAgICAgaGVhZGluZ3M6IChfb2JqJHNjaGVtYSA9PiB7XG4gICAgICAgIGNvbnN0IG9wdCA9IGZvcm1hdHRpbmcgPT09IG51bGwgfHwgZm9ybWF0dGluZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZm9ybWF0dGluZy5oZWFkaW5nTGV2ZWxzO1xuICAgICAgICBjb25zdCBvYmogPSB0eXBlb2Ygb3B0ID09PSAnb2JqZWN0JyAmJiAnbGV2ZWxzJyBpbiBvcHQgPyBvcHQgOiB7XG4gICAgICAgICAgbGV2ZWxzOiBvcHQsXG4gICAgICAgICAgc2NoZW1hOiB1bmRlZmluZWRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG9iai5zY2hlbWEpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBbJ3R5cGUnLCAnY2hpbGRyZW4nLCAnbGV2ZWwnLCAndGV4dEFsaWduJ10pIHtcbiAgICAgICAgICAgIGlmIChrZXkgaW4gb2JqLnNjaGVtYSkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFwiJHtrZXl9XCIgY2Fubm90IGJlIGEga2V5IGluIHRoZSBzY2hlbWEgZm9yIGhlYWRpbmdzYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbGV2ZWxzOiBbLi4ubmV3IFNldChvYmoubGV2ZWxzID09PSB0cnVlID8gWzEsIDIsIDMsIDQsIDUsIDZdIDogb2JqLmxldmVscyldLFxuICAgICAgICAgIHNjaGVtYTogb2JqZWN0KChfb2JqJHNjaGVtYSA9IG9iai5zY2hlbWEpICE9PSBudWxsICYmIF9vYmokc2NoZW1hICE9PSB2b2lkIDAgPyBfb2JqJHNjaGVtYSA6IHt9KVxuICAgICAgICB9O1xuICAgICAgfSkoKSxcbiAgICAgIGlubGluZU1hcmtzOiBmb3JtYXR0aW5nLmlubGluZU1hcmtzID09PSB0cnVlID8ge1xuICAgICAgICBib2xkOiB0cnVlLFxuICAgICAgICBjb2RlOiB0cnVlLFxuICAgICAgICBpdGFsaWM6IHRydWUsXG4gICAgICAgIGtleWJvYXJkOiBmYWxzZSxcbiAgICAgICAgLy8gbm90IHN1cHBvcnRlZCBuYXRpdmVseSBpbiBtYXJrZG93blxuICAgICAgICBzdHJpa2V0aHJvdWdoOiB0cnVlLFxuICAgICAgICBzdWJzY3JpcHQ6IGZhbHNlLFxuICAgICAgICAvLyBub3Qgc3VwcG9ydGVkIG5hdGl2ZWx5IGluIG1hcmtkb3duXG4gICAgICAgIHN1cGVyc2NyaXB0OiBmYWxzZSxcbiAgICAgICAgLy8gbm90IHN1cHBvcnRlZCBuYXRpdmVseSBpbiBtYXJrZG93blxuICAgICAgICB1bmRlcmxpbmU6IGZhbHNlIC8vIG5vdCBzdXBwb3J0ZWQgbmF0aXZlbHkgaW4gbWFya2Rvd25cbiAgICAgIH0gOiB7XG4gICAgICAgIGJvbGQ6ICEhKChfZm9ybWF0dGluZyRpbmxpbmVNYXIgPSBmb3JtYXR0aW5nLmlubGluZU1hcmtzKSAhPT0gbnVsbCAmJiBfZm9ybWF0dGluZyRpbmxpbmVNYXIgIT09IHZvaWQgMCAmJiBfZm9ybWF0dGluZyRpbmxpbmVNYXIuYm9sZCksXG4gICAgICAgIGNvZGU6ICEhKChfZm9ybWF0dGluZyRpbmxpbmVNYXIyID0gZm9ybWF0dGluZy5pbmxpbmVNYXJrcykgIT09IG51bGwgJiYgX2Zvcm1hdHRpbmckaW5saW5lTWFyMiAhPT0gdm9pZCAwICYmIF9mb3JtYXR0aW5nJGlubGluZU1hcjIuY29kZSksXG4gICAgICAgIGl0YWxpYzogISEoKF9mb3JtYXR0aW5nJGlubGluZU1hcjMgPSBmb3JtYXR0aW5nLmlubGluZU1hcmtzKSAhPT0gbnVsbCAmJiBfZm9ybWF0dGluZyRpbmxpbmVNYXIzICE9PSB2b2lkIDAgJiYgX2Zvcm1hdHRpbmckaW5saW5lTWFyMy5pdGFsaWMpLFxuICAgICAgICBzdHJpa2V0aHJvdWdoOiAhISgoX2Zvcm1hdHRpbmckaW5saW5lTWFyNCA9IGZvcm1hdHRpbmcuaW5saW5lTWFya3MpICE9PSBudWxsICYmIF9mb3JtYXR0aW5nJGlubGluZU1hcjQgIT09IHZvaWQgMCAmJiBfZm9ybWF0dGluZyRpbmxpbmVNYXI0LnN0cmlrZXRocm91Z2gpLFxuICAgICAgICB1bmRlcmxpbmU6ICEhKChfZm9ybWF0dGluZyRpbmxpbmVNYXI1ID0gZm9ybWF0dGluZy5pbmxpbmVNYXJrcykgIT09IG51bGwgJiYgX2Zvcm1hdHRpbmckaW5saW5lTWFyNSAhPT0gdm9pZCAwICYmIF9mb3JtYXR0aW5nJGlubGluZU1hcjUudW5kZXJsaW5lKSxcbiAgICAgICAga2V5Ym9hcmQ6ICEhKChfZm9ybWF0dGluZyRpbmxpbmVNYXI2ID0gZm9ybWF0dGluZy5pbmxpbmVNYXJrcykgIT09IG51bGwgJiYgX2Zvcm1hdHRpbmckaW5saW5lTWFyNiAhPT0gdm9pZCAwICYmIF9mb3JtYXR0aW5nJGlubGluZU1hcjYua2V5Ym9hcmQpLFxuICAgICAgICBzdWJzY3JpcHQ6ICEhKChfZm9ybWF0dGluZyRpbmxpbmVNYXI3ID0gZm9ybWF0dGluZy5pbmxpbmVNYXJrcykgIT09IG51bGwgJiYgX2Zvcm1hdHRpbmckaW5saW5lTWFyNyAhPT0gdm9pZCAwICYmIF9mb3JtYXR0aW5nJGlubGluZU1hcjcuc3Vic2NyaXB0KSxcbiAgICAgICAgc3VwZXJzY3JpcHQ6ICEhKChfZm9ybWF0dGluZyRpbmxpbmVNYXI4ID0gZm9ybWF0dGluZy5pbmxpbmVNYXJrcykgIT09IG51bGwgJiYgX2Zvcm1hdHRpbmckaW5saW5lTWFyOCAhPT0gdm9pZCAwICYmIF9mb3JtYXR0aW5nJGlubGluZU1hcjguc3VwZXJzY3JpcHQpXG4gICAgICB9LFxuICAgICAgbGlzdFR5cGVzOiBmb3JtYXR0aW5nLmxpc3RUeXBlcyA9PT0gdHJ1ZSA/IHtcbiAgICAgICAgb3JkZXJlZDogdHJ1ZSxcbiAgICAgICAgdW5vcmRlcmVkOiB0cnVlXG4gICAgICB9IDoge1xuICAgICAgICBvcmRlcmVkOiAhISgoX2Zvcm1hdHRpbmckbGlzdFR5cGVzID0gZm9ybWF0dGluZy5saXN0VHlwZXMpICE9PSBudWxsICYmIF9mb3JtYXR0aW5nJGxpc3RUeXBlcyAhPT0gdm9pZCAwICYmIF9mb3JtYXR0aW5nJGxpc3RUeXBlcy5vcmRlcmVkKSxcbiAgICAgICAgdW5vcmRlcmVkOiAhISgoX2Zvcm1hdHRpbmckbGlzdFR5cGVzMiA9IGZvcm1hdHRpbmcubGlzdFR5cGVzKSAhPT0gbnVsbCAmJiBfZm9ybWF0dGluZyRsaXN0VHlwZXMyICE9PSB2b2lkIDAgJiYgX2Zvcm1hdHRpbmckbGlzdFR5cGVzMi51bm9yZGVyZWQpXG4gICAgICB9LFxuICAgICAgc29mdEJyZWFrczogISFmb3JtYXR0aW5nLnNvZnRCcmVha3NcbiAgICB9LFxuICAgIGxpbmtzOiAhIWNvbmZpZy5saW5rcyxcbiAgICBsYXlvdXRzOiBbLi4ubmV3IFNldCgoY29uZmlnLmxheW91dHMgfHwgW10pLm1hcCh4ID0+IEpTT04uc3RyaW5naWZ5KHgpKSldLm1hcCh4ID0+IEpTT04ucGFyc2UoeCkpLFxuICAgIGRpdmlkZXJzOiAhIWNvbmZpZy5kaXZpZGVycyxcbiAgICBpbWFnZXM6IGltYWdlc0NvbmZpZyA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiB7XG4gICAgICAuLi5pbWFnZXNDb25maWcsXG4gICAgICBzY2hlbWE6IHtcbiAgICAgICAgYWx0OiAoX2ltYWdlc0NvbmZpZyRzY2hlbWEkID0gKF9pbWFnZXNDb25maWckc2NoZW1hID0gaW1hZ2VzQ29uZmlnLnNjaGVtYSkgPT09IG51bGwgfHwgX2ltYWdlc0NvbmZpZyRzY2hlbWEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pbWFnZXNDb25maWckc2NoZW1hLmFsdCkgIT09IG51bGwgJiYgX2ltYWdlc0NvbmZpZyRzY2hlbWEkICE9PSB2b2lkIDAgPyBfaW1hZ2VzQ29uZmlnJHNjaGVtYSQgOiBkZWZhdWx0QWx0RmllbGQsXG4gICAgICAgIHRpdGxlOiAoX2ltYWdlc0NvbmZpZyRzY2hlbWEkMiA9IChfaW1hZ2VzQ29uZmlnJHNjaGVtYTIgPSBpbWFnZXNDb25maWcuc2NoZW1hKSA9PT0gbnVsbCB8fCBfaW1hZ2VzQ29uZmlnJHNjaGVtYTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pbWFnZXNDb25maWckc2NoZW1hMi50aXRsZSkgIT09IG51bGwgJiYgX2ltYWdlc0NvbmZpZyRzY2hlbWEkMiAhPT0gdm9pZCAwID8gX2ltYWdlc0NvbmZpZyRzY2hlbWEkMiA6IGVtcHR5VGl0bGVGaWVsZFxuICAgICAgfVxuICAgIH0sXG4gICAgdGFibGVzOiAhIWNvbmZpZy50YWJsZXNcbiAgfTtcbn1cbmZ1bmN0aW9uIGRvY3VtZW50JDEoe1xuICBsYWJlbCxcbiAgY29tcG9uZW50QmxvY2tzID0ge30sXG4gIGRlc2NyaXB0aW9uLFxuICAuLi5kb2N1bWVudEZlYXR1cmVzQ29uZmlnXG59KSB7XG4gIGNvbnN0IGRvY3VtZW50RmVhdHVyZXMgPSBub3JtYWxpc2VEb2N1bWVudEZlYXR1cmVzKGRvY3VtZW50RmVhdHVyZXNDb25maWcpO1xuICBjb25zdCBwYXJzZSA9IG1vZGUgPT4gKF92YWx1ZSwgZGF0YSkgPT4ge1xuICAgIGNvbnN0IG1hcmtkb2MgPSB0ZXh0RGVjb2Rlci5kZWNvZGUoZGF0YS5jb250ZW50KTtcbiAgICBjb25zdCBkb2N1bWVudCA9IGZyb21NYXJrZG9jKE1hcmtkb2MucGFyc2UobWFya2RvYyksIGNvbXBvbmVudEJsb2Nrcyk7XG4gICAgY29uc3QgZWRpdG9yID0gY3JlYXRlRG9jdW1lbnRFZGl0b3JGb3JOb3JtYWxpemF0aW9uKGRvY3VtZW50RmVhdHVyZXMsIGNvbXBvbmVudEJsb2Nrcyk7XG4gICAgZWRpdG9yLmNoaWxkcmVuID0gZG9jdW1lbnQ7XG4gICAgRWRpdG9yLm5vcm1hbGl6ZShlZGl0b3IsIHtcbiAgICAgIGZvcmNlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIGRlc2VyaWFsaXplRmlsZXMoZWRpdG9yLmNoaWxkcmVuLCBjb21wb25lbnRCbG9ja3MsIGRhdGEub3RoZXIsIGRhdGEuZXh0ZXJuYWwgfHwgbmV3IE1hcCgpLCBtb2RlLCBkb2N1bWVudEZlYXR1cmVzLCBkYXRhLnNsdWcpO1xuICB9O1xuICByZXR1cm4ge1xuICAgIGtpbmQ6ICdmb3JtJyxcbiAgICBmb3JtS2luZDogJ2NvbnRlbnQnLFxuICAgIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgIHJldHVybiBbe1xuICAgICAgICB0eXBlOiAncGFyYWdyYXBoJyxcbiAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgdGV4dDogJydcbiAgICAgICAgfV1cbiAgICAgIH1dO1xuICAgIH0sXG4gICAgSW5wdXQocHJvcHMpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KERvY3VtZW50RmllbGRJbnB1dCwge1xuICAgICAgICBjb21wb25lbnRCbG9ja3M6IGNvbXBvbmVudEJsb2NrcyxcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIGRvY3VtZW50RmVhdHVyZXM6IGRvY3VtZW50RmVhdHVyZXMsXG4gICAgICAgIC4uLnByb3BzXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHBhcnNlOiBwYXJzZSgnZWRpdCcpLFxuICAgIGNvbnRlbnRFeHRlbnNpb246ICcubWRvYycsXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIGRpcmVjdG9yaWVzOiBbLi4uY29sbGVjdERpcmVjdG9yaWVzVXNlZEluU2NoZW1hKG9iamVjdChPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoY29tcG9uZW50QmxvY2tzKS5tYXAoKFtuYW1lLCBibG9ja10pID0+IFtuYW1lLCBvYmplY3QoYmxvY2suc2NoZW1hKV0pKSkpLCAuLi4odHlwZW9mIGRvY3VtZW50RmVhdHVyZXMuaW1hZ2VzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgZG9jdW1lbnRGZWF0dXJlcy5pbWFnZXMuZGlyZWN0b3J5ID09PSAnc3RyaW5nJyA/IFtmaXhQYXRoKGRvY3VtZW50RmVhdHVyZXMuaW1hZ2VzLmRpcmVjdG9yeSldIDogW10pXSxcbiAgICBzZXJpYWxpemUodmFsdWUsIG9wdHMpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZXh0cmFGaWxlcyxcbiAgICAgICAgbm9kZVxuICAgICAgfSA9IHRvTWFya2RvY0RvY3VtZW50KHZhbHVlLCB7XG4gICAgICAgIGNvbXBvbmVudEJsb2NrcyxcbiAgICAgICAgZG9jdW1lbnRGZWF0dXJlcyxcbiAgICAgICAgc2x1Zzogb3B0cy5zbHVnXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IG90aGVyID0gbmV3IE1hcCgpO1xuICAgICAgY29uc3QgZXh0ZXJuYWwgPSBuZXcgTWFwKCk7XG4gICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZXh0cmFGaWxlcykge1xuICAgICAgICBpZiAoZmlsZS5wYXJlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIG90aGVyLnNldChmaWxlLnBhdGgsIGZpbGUuY29udGVudHMpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZXh0ZXJuYWwuaGFzKGZpbGUucGFyZW50KSkge1xuICAgICAgICAgIGV4dGVybmFsLnNldChmaWxlLnBhcmVudCwgbmV3IE1hcCgpKTtcbiAgICAgICAgfVxuICAgICAgICBleHRlcm5hbC5nZXQoZmlsZS5wYXJlbnQpLnNldChmaWxlLnBhdGgsIGZpbGUuY29udGVudHMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY29udGVudDogdGV4dEVuY29kZXIuZW5jb2RlKE1hcmtkb2MuZm9ybWF0KE1hcmtkb2MucGFyc2UoTWFya2RvYy5mb3JtYXQobm9kZSkpKSksXG4gICAgICAgIG90aGVyLFxuICAgICAgICBleHRlcm5hbCxcbiAgICAgICAgdmFsdWU6IHVuZGVmaW5lZFxuICAgICAgfTtcbiAgICB9LFxuICAgIHJlYWRlcjoge1xuICAgICAgcGFyc2U6IHBhcnNlKCdyZWFkJylcbiAgICB9XG4gIH07XG59XG5cbmV4cG9ydCB7IGdldFdob2xlRG9jdW1lbnRGZWF0dXJlc0ZvckNoaWxkRmllbGQgYXMgJCwgZ2V0SW5pdGlhbFByb3BzVmFsdWVGcm9tSW5pdGlhbGl6ZXIgYXMgQSwgYWxpYXNlc1RvTGFiZWwgYXMgQiwgYWxpYXNlc1RvQ2Fub25pY2FsTmFtZSBhcyBDLCBjYW5vbmljYWxOYW1lVG9MYWJlbCBhcyBELCBsYWJlbFRvQ2Fub25pY2FsTmFtZSBhcyBFLCBsYW5ndWFnZXNXaXRoQWxpYXNlcyBhcyBGLCB0cmFuc2Zvcm1Qcm9wcyBhcyBHLCBnZXRWYWx1ZUF0UHJvcFBhdGggYXMgSCwgY2xvbmVEZXNjZW5kZW50IGFzIEksIGFyZUFycmF5c0VxdWFsIGFzIEosIEtFWVNUQVRJQ19DTE9VRF9BUElfVVJMIGFzIEssIGdldFNjaGVtYUF0UHJvcFBhdGggYXMgTCwgZmluZENoaWxkUHJvcFBhdGhzIGFzIE0sIG9iamVjdCBhcyBOLCBnZXRTZWxlY3RlZFRhYmxlQXJlYSBhcyBPLCBnZXRSZWxhdGl2ZVJvd1BhdGggYXMgUCwgY2VsbCBhcyBRLCBjbGVhckZvcm1hdHRpbmcgYXMgUiwgRWRpdG9yQWZ0ZXJCdXRJZ25vcmluZ2luZ1BvaW50c1dpdGhOb0NvbnRlbnQgYXMgUywgZ2V0SW5saW5lTm9kZXMgYXMgVCwgYWRkTWFya3NUb0NoaWxkcmVuIGFzIFUsIHNldExpbmtGb3JDaGlsZHJlbiBhcyBWLCBmb3JjZURpc2FibGVNYXJrRm9yQ2hpbGRyZW4gYXMgVywgYWRkTWFya1RvQ2hpbGRyZW4gYXMgWCwgZ2V0UGxhY2Vob2xkZXJUZXh0Rm9yUHJvcFBhdGggYXMgWSwgUHJpc20gYXMgWiwgX2NyZWF0ZURvY3VtZW50RWRpdG9yIGFzIF8sIEtFWVNUQVRJQ19DTE9VRF9IRUFERVJTIGFzIGEsIGdldEVudHJ5RGF0YUZpbGVwYXRoIGFzIGEwLCBnZXREaXJlY3Rvcmllc0ZvclRyZWVLZXkgYXMgYTEsIGdldFRyZWVLZXkgYXMgYTIsIGJsb2JTaGEgYXMgYTMsIHNlcmlhbGl6ZVByb3BzIGFzIGE0LCB1cGRhdGVUcmVlV2l0aENoYW5nZXMgYXMgYTUsIGdldFNsdWdHbG9iRm9yQ29sbGVjdGlvbiBhcyBhNiwgZ2V0Q29sbGVjdGlvbkZvcm1hdCBhcyBhNywgZ2V0Q29sbGVjdGlvbkl0ZW1QYXRoIGFzIGE4LCBnZXREYXRhRmlsZUV4dGVuc2lvbiBhcyBhOSwgRG9jdW1lbnRGaWVsZElucHV0IGFzIGFBLCBwYXJzZVRvRWRpdG9yU3RhdGUgYXMgYUIsIGNvbGxlY3REaXJlY3Rvcmllc1VzZWRJblNjaGVtYSBhcyBhQywgc2VyaWFsaXplRnJvbUVkaXRvclN0YXRlIGFzIGFELCBjcmVhdGVFZGl0b3JTY2hlbWEgYXMgYUUsIGdldFNpbmdsZXRvbkZvcm1hdCBhcyBhYSwgaXNDbG91ZENvbmZpZyBhcyBhYiwgRmllbGREYXRhRXJyb3IgYXMgYWMsIGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlIGFzIGFkLCBDaGVja2JveEZpZWxkSW5wdXQgYXMgYWUsIERhdGVGaWVsZElucHV0IGFzIGFmLCBhc3NlcnRSZXF1aXJlZCBhcyBhZywgRGF0ZXRpbWVGaWVsZElucHV0IGFzIGFoLCBJbWFnZUZpZWxkSW5wdXQgYXMgYWksIGdldFNyY1ByZWZpeCBhcyBhaiwgZml4UGF0aCBhcyBhaywgRmlsZUZpZWxkSW5wdXQgYXMgYWwsIE11bHRpc2VsZWN0RmllbGRJbnB1dCBhcyBhbSwgUGF0aFJlZmVyZW5jZUlucHV0IGFzIGFuLCBSZWxhdGlvbnNoaXBJbnB1dCBhcyBhbywgU2VsZWN0RmllbGRJbnB1dCBhcyBhcCwgU2x1Z0ZpZWxkSW5wdXQgYXMgYXEsIHZhbGlkYXRlVGV4dCBhcyBhciwgVXJsRmllbGRJbnB1dCBhcyBhcywgQmxvY2tzRmllbGRJbnB1dCBhcyBhdCwgdGV4dCBhcyBhdSwgQ2xvdWRJbWFnZUZpZWxkSW5wdXQgYXMgYXYsIGRvY3VtZW50JDEgYXMgYXcsIEludGVnZXJGaWVsZElucHV0IGFzIGF4LCBzaGExIGFzIGF5LCBnZXREZWZhdWx0VmFsdWUgYXMgYXosIGdldEVudHJpZXNJbkNvbGxlY3Rpb25XaXRoVHJlZUtleSBhcyBiLCBnZXRTaW5nbGV0b25QYXRoIGFzIGMsIGdldFRyZWVOb2RlQXRQYXRoIGFzIGQsIHRyZWVTaGEgYXMgZSwgZ2V0QnJhbmNoUHJlZml4IGFzIGYsIGdldFBhdGhQcmVmaXggYXMgZywgZ2V0U3BsaXRDbG91ZFByb2plY3QgYXMgaCwgaXNHaXRIdWJDb25maWcgYXMgaSwgZ2V0UmVwb1VybCBhcyBqLCBpc0xvY2FsQ29uZmlnIGFzIGssIGdldENvbGxlY3Rpb25QYXRoIGFzIGwsIGdldEtleXNGb3JBcnJheVZhbHVlIGFzIG0sIG5vZGVUeXBlTWF0Y2hlciBhcyBuLCBnZXRTbHVnRnJvbVN0YXRlIGFzIG8sIHBsdXJhbGl6ZSBhcyBwLCBnZXRJbml0aWFsUHJvcHNWYWx1ZSBhcyBxLCByZWRpcmVjdFRvQ2xvdWRBdXRoIGFzIHIsIHNldEtleXNGb3JBcnJheVZhbHVlIGFzIHMsIHRyZWVFbnRyaWVzVG9UcmVlTm9kZXMgYXMgdCwgdXBkYXRlVmFsdWUgYXMgdSwgZ2V0QW5jZXN0b3JDb21wb25lbnRDaGlsZEZpZWxkRG9jdW1lbnRGZWF0dXJlcyBhcyB2LCBpc0Jsb2NrIGFzIHcsIGFsbE1hcmtzIGFzIHgsIGlzTGlzdE5vZGUgYXMgeSwgaXNFbGVtZW50QWN0aXZlIGFzIHogfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/index-90608531.node.react-server.esm.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/isValidURL-3f764c70.node.react-server.esm.js":
/*!****************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/isValidURL-3f764c70.node.react-server.esm.js ***!
  \****************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   N: () => (/* binding */ NAVIGATION_DIVIDER_KEY),\n/* harmony export */   a: () => (/* binding */ collection),\n/* harmony export */   c: () => (/* binding */ config),\n/* harmony export */   i: () => (/* binding */ isValidURL),\n/* harmony export */   s: () => (/* binding */ singleton)\n/* harmony export */ });\n/* harmony import */ var _braintree_sanitize_url__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @braintree/sanitize-url */ \"(rsc)/./node_modules/.pnpm/@braintree+sanitize-url@6.0.4/node_modules/@braintree/sanitize-url/dist/index.js\");\n\n\n// Common\n// ----------------------------------------------------------------------------\n\n// Interface\n// ----------------------------------------------------------------------------\n\nconst NAVIGATION_DIVIDER_KEY = '---';\n\n// Storage\n// ----------------------------------------------------------------------------\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction config(config) {\n  return config;\n}\nfunction collection(collection) {\n  return collection;\n}\nfunction singleton(collection) {\n  return collection;\n}\n\nfunction isValidURL(url) {\n  return url === (0,_braintree_sanitize_url__WEBPACK_IMPORTED_MODULE_0__.sanitizeUrl)(url);\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGtleXN0YXRpYytjb3JlQDAuMi4xMl9uZXh0QDE0LjIuMl9yZWFjdC1kb21AMTguMi4wX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvaXNWYWxpZFVSTC0zZjc2NGM3MC5ub2RlLnJlYWN0LXNlcnZlci5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXNEOztBQUV0RDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCLG9FQUFXO0FBQzVCOztBQUVzRyIsInNvdXJjZXMiOlsid2VicGFjazovL0BrZXlzdGF0aWMvdGVtcGxhdGVzLW5leHRqcy8uL25vZGVfbW9kdWxlcy8ucG5wbS9Aa2V5c3RhdGljK2NvcmVAMC4yLjEyX25leHRAMTQuMi4yX3JlYWN0LWRvbUAxOC4yLjBfcmVhY3RAMTguMi4wL25vZGVfbW9kdWxlcy9Aa2V5c3RhdGljL2NvcmUvZGlzdC9pc1ZhbGlkVVJMLTNmNzY0YzcwLm5vZGUucmVhY3Qtc2VydmVyLmVzbS5qcz8wMzQ2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNhbml0aXplVXJsIH0gZnJvbSAnQGJyYWludHJlZS9zYW5pdGl6ZS11cmwnO1xuXG4vLyBDb21tb25cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gSW50ZXJmYWNlXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmNvbnN0IE5BVklHQVRJT05fRElWSURFUl9LRVkgPSAnLS0tJztcblxuLy8gU3RvcmFnZVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBGdW5jdGlvbnNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZnVuY3Rpb24gY29uZmlnKGNvbmZpZykge1xuICByZXR1cm4gY29uZmlnO1xufVxuZnVuY3Rpb24gY29sbGVjdGlvbihjb2xsZWN0aW9uKSB7XG4gIHJldHVybiBjb2xsZWN0aW9uO1xufVxuZnVuY3Rpb24gc2luZ2xldG9uKGNvbGxlY3Rpb24pIHtcbiAgcmV0dXJuIGNvbGxlY3Rpb247XG59XG5cbmZ1bmN0aW9uIGlzVmFsaWRVUkwodXJsKSB7XG4gIHJldHVybiB1cmwgPT09IHNhbml0aXplVXJsKHVybCk7XG59XG5cbmV4cG9ydCB7IE5BVklHQVRJT05fRElWSURFUl9LRVkgYXMgTiwgY29sbGVjdGlvbiBhcyBhLCBjb25maWcgYXMgYywgaXNWYWxpZFVSTCBhcyBpLCBzaW5nbGV0b24gYXMgcyB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/isValidURL-3f764c70.node.react-server.esm.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/keystatic-core.node.react-server.esm.js":
/*!***********************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/keystatic-core.node.react-server.esm.js ***!
  \***********************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BlockWrapper: () => (/* binding */ BlockWrapper),\n/* harmony export */   NotEditable: () => (/* binding */ NotEditable),\n/* harmony export */   ToolbarSeparator: () => (/* binding */ ToolbarSeparator),\n/* harmony export */   collection: () => (/* reexport safe */ _isValidURL_3f764c70_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_0__.a),\n/* harmony export */   component: () => (/* reexport safe */ _api_59e5ebd9_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_1__.c),\n/* harmony export */   config: () => (/* reexport safe */ _isValidURL_3f764c70_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_0__.c),\n/* harmony export */   fields: () => (/* binding */ index),\n/* harmony export */   singleton: () => (/* reexport safe */ _isValidURL_3f764c70_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_0__.s)\n/* harmony export */ });\n/* harmony import */ var _isValidURL_3f764c70_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./isValidURL-3f764c70.node.react-server.esm.js */ \"(rsc)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/isValidURL-3f764c70.node.react-server.esm.js\");\n/* harmony import */ var _api_59e5ebd9_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./api-59e5ebd9.node.react-server.esm.js */ \"(rsc)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/api-59e5ebd9.node.react-server.esm.js\");\n/* harmony import */ var _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index-90608531.node.react-server.esm.js */ \"(rsc)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/index-90608531.node.react-server.esm.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react/jsx-runtime */ \"(rsc)/./node_modules/.pnpm/next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-jsx-runtime.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _index_8bb79b3a_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./index-8bb79b3a.node.react-server.esm.js */ \"(rsc)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/index-8bb79b3a.node.react-server.esm.js\");\n/* harmony import */ var _sindresorhus_slugify__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @sindresorhus/slugify */ \"(rsc)/./node_modules/.pnpm/@sindresorhus+slugify@1.1.2/node_modules/@sindresorhus/slugify/index.js\");\n/* harmony import */ var _sindresorhus_slugify__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_sindresorhus_slugify__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var emery__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! emery */ \"(rsc)/./node_modules/.pnpm/emery@1.4.3/node_modules/emery/dist/emery.esm.js\");\n/* harmony import */ var _braintree_sanitize_url__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @braintree/sanitize-url */ \"(rsc)/./node_modules/.pnpm/@braintree+sanitize-url@6.0.4/node_modules/@braintree/sanitize-url/dist/index.js\");\n/* harmony import */ var emery_assertions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! emery/assertions */ \"(rsc)/./node_modules/.pnpm/emery@1.4.3/node_modules/emery/assertions/dist/emery-assertions.esm.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _emotion_weak_memoize__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @emotion/weak-memoize */ \"(rsc)/./node_modules/.pnpm/@emotion+weak-memoize@0.3.1/node_modules/@emotion/weak-memoize/dist/emotion-weak-memoize.esm.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction array(element, opts) {\n  var _opts$label;\n  return {\n    kind: 'array',\n    element,\n    label: (_opts$label = opts === null || opts === void 0 ? void 0 : opts.label) !== null && _opts$label !== void 0 ? _opts$label : 'Items',\n    description: opts === null || opts === void 0 ? void 0 : opts.description,\n    itemLabel: opts === null || opts === void 0 ? void 0 : opts.itemLabel,\n    asChildTag: opts === null || opts === void 0 ? void 0 : opts.asChildTag,\n    slugField: opts === null || opts === void 0 ? void 0 : opts.slugField,\n    validation: opts === null || opts === void 0 ? void 0 : opts.validation\n  };\n}\n\nfunction checkbox({\n  label,\n  defaultValue = false,\n  description\n}) {\n  return (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ad)({\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ae, {\n        ...props,\n        label: label,\n        description: description\n      });\n    },\n    defaultValue() {\n      return defaultValue;\n    },\n    parse(value) {\n      if (value === undefined) return defaultValue;\n      if (typeof value !== 'boolean') {\n        throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ac('Must be a boolean');\n      }\n      return value;\n    },\n    validate(value) {\n      return value;\n    },\n    serialize(value) {\n      return {\n        value\n      };\n    }\n  });\n}\n\nfunction child(options) {\n  return {\n    kind: 'child',\n    options: options.kind === 'block' ? {\n      ...options,\n      dividers: options.dividers,\n      formatting: options.formatting === 'inherit' ? {\n        blockTypes: 'inherit',\n        headingLevels: 'inherit',\n        inlineMarks: 'inherit',\n        listTypes: 'inherit',\n        alignment: 'inherit',\n        softBreaks: 'inherit'\n      } : options.formatting,\n      links: options.links,\n      images: options.images,\n      tables: options.tables,\n      componentBlocks: options.componentBlocks\n    } : {\n      kind: 'inline',\n      placeholder: options.placeholder,\n      formatting: options.formatting === 'inherit' ? {\n        inlineMarks: 'inherit',\n        softBreaks: 'inherit'\n      } : options.formatting,\n      links: options.links\n    }\n  };\n}\n\nfunction conditional(discriminant, values) {\n  return {\n    kind: 'conditional',\n    discriminant,\n    values: values\n  };\n}\n\nfunction validateDate(validation, value, label) {\n  if (value !== null && !/^\\d{4}-\\d{2}-\\d{2}$/.test(value)) {\n    return `${label} is not a valid date`;\n  }\n  if (validation !== null && validation !== void 0 && validation.isRequired && value === null) {\n    return `${label} is required`;\n  }\n  if ((validation !== null && validation !== void 0 && validation.min || validation !== null && validation !== void 0 && validation.max) && value !== null) {\n    const date = new Date(value);\n    if ((validation === null || validation === void 0 ? void 0 : validation.min) !== undefined) {\n      const min = new Date(validation.min);\n      if (date < min) {\n        return `${label} must be after ${min.toLocaleDateString()}`;\n      }\n    }\n    if ((validation === null || validation === void 0 ? void 0 : validation.max) !== undefined) {\n      const max = new Date(validation.max);\n      if (date > max) {\n        return `${label} must be no later than ${max.toLocaleDateString()}`;\n      }\n    }\n  }\n}\n\nfunction date({\n  label,\n  defaultValue,\n  validation,\n  description\n}) {\n  return (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ad)({\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.af, {\n        validation: validation,\n        label: label,\n        description: description,\n        ...props\n      });\n    },\n    defaultValue() {\n      if (defaultValue === undefined) {\n        return null;\n      }\n      if (typeof defaultValue === 'string') {\n        return defaultValue;\n      }\n      const today = new Date();\n      const year = today.getFullYear();\n      const month = String(today.getMonth() + 1).padStart(2, '0');\n      const day = String(today.getDate()).padStart(2, '0');\n      return `${year}-${month}-${day}`;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ac('Must be a string');\n      }\n      return value;\n    },\n    serialize(value) {\n      return {\n        value: value === null ? undefined : value\n      };\n    },\n    validate(value) {\n      const message = validateDate(validation, value, label);\n      if (message !== undefined) {\n        throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ac(message);\n      }\n      (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ag)(value, validation, label);\n      return value;\n    }\n  });\n}\n\nfunction validateDatetime(validation, value, label) {\n  if (value !== null && !/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}$/.test(value)) {\n    return `${label} is not a valid datetime`;\n  }\n  if (validation !== null && validation !== void 0 && validation.isRequired && value === null) {\n    return `${label} is required`;\n  }\n  if ((validation !== null && validation !== void 0 && validation.min || validation !== null && validation !== void 0 && validation.max) && value !== null) {\n    const datetime = new Date(value);\n    if ((validation === null || validation === void 0 ? void 0 : validation.min) !== undefined) {\n      const min = new Date(validation.min);\n      if (datetime < min) {\n        return `${label} must be after ${min.toISOString()}`;\n      }\n    }\n    if ((validation === null || validation === void 0 ? void 0 : validation.max) !== undefined) {\n      const max = new Date(validation.max);\n      if (datetime > max) {\n        return `${label} must be no later than ${max.toISOString()}`;\n      }\n    }\n  }\n}\n\nfunction datetime({\n  label,\n  defaultValue,\n  validation,\n  description\n}) {\n  return (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ad)({\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ah, {\n        validation: validation,\n        label: label,\n        description: description,\n        ...props\n      });\n    },\n    defaultValue() {\n      if (defaultValue === undefined) {\n        return null;\n      }\n      if (typeof defaultValue === 'string') {\n        return defaultValue;\n      }\n      if (defaultValue.kind === 'now') {\n        const now = new Date();\n        return now.toISOString();\n      }\n      return null;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ac('Must be a string');\n      }\n      return value;\n    },\n    serialize(value) {\n      return {\n        value: value === null ? undefined : value\n      };\n    },\n    validate(value) {\n      const message = validateDatetime(validation, value, label);\n      if (message !== undefined) {\n        throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ac(message);\n      }\n      (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ag)(value, validation, label);\n      return value;\n    }\n  });\n}\n\nfunction emptyDocument() {\n  return {\n    kind: 'form',\n    formKind: 'content',\n    Input() {\n      return null;\n    },\n    defaultValue() {\n      return null;\n    },\n    parse() {\n      return null;\n    },\n    contentExtension: '.mdoc',\n    serialize() {\n      return {\n        value: undefined,\n        content: new Uint8Array(),\n        external: new Map(),\n        other: new Map()\n      };\n    },\n    validate(value) {\n      return value;\n    },\n    reader: {\n      parse() {\n        return null;\n      }\n    }\n  };\n}\n\nfunction empty() {\n  return (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ad)({\n    Input() {\n      return null;\n    },\n    defaultValue() {\n      return null;\n    },\n    parse() {\n      return null;\n    },\n    serialize() {\n      return {\n        value: undefined\n      };\n    },\n    validate(value) {\n      return value;\n    }\n  });\n}\n\nfunction image({\n  label,\n  directory,\n  validation,\n  description,\n  publicPath\n}) {\n  return {\n    kind: 'form',\n    formKind: 'asset',\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ai, {\n        label: label,\n        description: description,\n        validation: validation,\n        ...props\n      });\n    },\n    defaultValue() {\n      return null;\n    },\n    filename(value, args) {\n      if (typeof value === 'string') {\n        return value.slice((0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.aj)(publicPath, args.slug).length);\n      }\n      return undefined;\n    },\n    parse(value, args) {\n      var _value$match$, _value$match;\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ac('Must be a string');\n      }\n      if (args.asset === undefined) {\n        return null;\n      }\n      return {\n        data: args.asset,\n        filename: value.slice((0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.aj)(publicPath, args.slug).length),\n        extension: (_value$match$ = (_value$match = value.match(/\\.([^.]+$)/)) === null || _value$match === void 0 ? void 0 : _value$match[1]) !== null && _value$match$ !== void 0 ? _value$match$ : ''\n      };\n    },\n    validate(value) {\n      (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ag)(value, validation, label);\n      return value;\n    },\n    serialize(value, args) {\n      if (value === null) {\n        return {\n          value: undefined,\n          asset: undefined\n        };\n      }\n      const filename = args.suggestedFilenamePrefix ? args.suggestedFilenamePrefix + '.' + value.extension : value.filename;\n      return {\n        value: `${(0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.aj)(publicPath, args.slug)}${filename}`,\n        asset: {\n          filename,\n          content: value.data\n        }\n      };\n    },\n    directory: directory ? (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ak)(directory) : undefined,\n    reader: {\n      parse(value) {\n        if (typeof value !== 'string' && value !== undefined) {\n          throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ac('Must be a string');\n        }\n        const val = value === undefined ? null : value;\n        (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ag)(val, validation, label);\n        return val;\n      }\n    }\n  };\n}\n\nfunction file({\n  label,\n  directory,\n  validation,\n  description,\n  publicPath\n}) {\n  return {\n    kind: 'form',\n    formKind: 'asset',\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.al, {\n        label: label,\n        description: description,\n        validation: validation,\n        ...props\n      });\n    },\n    defaultValue() {\n      return null;\n    },\n    filename(value, args) {\n      if (typeof value === 'string') {\n        return value.slice((0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.aj)(publicPath, args.slug).length);\n      }\n      return undefined;\n    },\n    parse(value, args) {\n      var _value$match$, _value$match;\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ac('Must be a string');\n      }\n      if (args.asset === undefined) {\n        return null;\n      }\n      return {\n        data: args.asset,\n        filename: value.slice((0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.aj)(publicPath, args.slug).length),\n        extension: (_value$match$ = (_value$match = value.match(/\\.([^.]+$)/)) === null || _value$match === void 0 ? void 0 : _value$match[1]) !== null && _value$match$ !== void 0 ? _value$match$ : ''\n      };\n    },\n    validate(value) {\n      (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ag)(value, validation, label);\n      return value;\n    },\n    serialize(value, args) {\n      if (value === null) {\n        return {\n          value: undefined,\n          asset: undefined\n        };\n      }\n      const filename = args.suggestedFilenamePrefix ? args.suggestedFilenamePrefix + '.' + value.extension : value.filename;\n      return {\n        value: `${(0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.aj)(publicPath, args.slug)}${filename}`,\n        asset: {\n          filename,\n          content: value.data\n        }\n      };\n    },\n    directory: directory ? (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ak)(directory) : undefined,\n    reader: {\n      parse(value) {\n        if (typeof value !== 'string' && value !== undefined) {\n          throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ac('Must be a string');\n        }\n        const val = value === undefined ? null : value;\n        (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ag)(val, validation, label);\n        return val;\n      }\n    }\n  };\n}\n\nfunction multiselect({\n  label,\n  options,\n  defaultValue = [],\n  description\n}) {\n  const valuesToOption = new Map(options.map(x => [x.value, x]));\n  const field = (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ad)({\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.am, {\n        label: label,\n        description: description,\n        options: options,\n        ...props\n      });\n    },\n    defaultValue() {\n      return defaultValue;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return [];\n      }\n      if (!Array.isArray(value)) {\n        throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ac('Must be an array of options');\n      }\n      if (!value.every(x => typeof x === 'string' && valuesToOption.has(x))) {\n        throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ac(`Must be an array with one of ${options.map(x => x.value).join(', ')}`);\n      }\n      return value;\n    },\n    validate(value) {\n      return value;\n    },\n    serialize(value) {\n      return {\n        value\n      };\n    }\n  });\n  return {\n    ...field,\n    options\n  };\n}\n\nfunction pathReference({\n  label,\n  pattern,\n  validation,\n  description\n}) {\n  return (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ad)({\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.an, {\n        label: label,\n        pattern: pattern,\n        description: description,\n        validation: validation,\n        ...props\n      });\n    },\n    defaultValue() {\n      return null;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ac('Must be a string');\n      }\n      return value;\n    },\n    validate(value) {\n      (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ag)(value, validation, label);\n      return value;\n    },\n    serialize(value) {\n      return {\n        value: value === null ? undefined : value\n      };\n    }\n  });\n}\n\nfunction relationship({\n  label,\n  collection,\n  validation,\n  description\n}) {\n  return (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ad)({\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ao, {\n        label: label,\n        collection: collection,\n        description: description,\n        validation: validation,\n        ...props\n      });\n    },\n    defaultValue() {\n      return null;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ac('Must be a string');\n      }\n      return value;\n    },\n    validate(value) {\n      (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ag)(value, validation, label);\n      return value;\n    },\n    serialize(value) {\n      return {\n        value: value === null ? undefined : value\n      };\n    }\n  });\n}\n\nfunction select({\n  label,\n  options,\n  defaultValue,\n  description\n}) {\n  const optionValuesSet = new Set(options.map(x => x.value));\n  if (!optionValuesSet.has(defaultValue)) {\n    throw new Error(`A defaultValue of ${defaultValue} was provided to a select field but it does not match the value of one of the options provided`);\n  }\n  const field = (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ad)({\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ap, {\n        label: label,\n        options: options,\n        description: description,\n        ...props\n      });\n    },\n    defaultValue() {\n      return defaultValue;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return defaultValue;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ac('Must be a string');\n      }\n      if (!optionValuesSet.has(value)) {\n        throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ac('Must be a valid option');\n      }\n      return value;\n    },\n    validate(value) {\n      return value;\n    },\n    serialize(value) {\n      return {\n        value\n      };\n    }\n  });\n  return {\n    ...field,\n    options\n  };\n}\n\nfunction parseSlugFieldAsNormalField(value) {\n  if (value === undefined) {\n    return {\n      name: '',\n      slug: ''\n    };\n  }\n  if (typeof value !== 'object') {\n    throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ac('Must be an object');\n  }\n  if (Object.keys(value).length !== 2) {\n    throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ac('Unexpected keys');\n  }\n  if (!('name' in value) || !('slug' in value)) {\n    throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ac('Missing name or slug');\n  }\n  if (typeof value.name !== 'string') {\n    throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ac('name must be a string');\n  }\n  if (typeof value.slug !== 'string') {\n    throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ac('slug must be a string');\n  }\n  return {\n    name: value.name,\n    slug: value.slug\n  };\n}\nfunction parseAsSlugField(value, slug) {\n  if (value === undefined) {\n    return {\n      name: '',\n      slug\n    };\n  }\n  if (typeof value !== 'string') {\n    throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ac('Must be a string');\n  }\n  return {\n    name: value,\n    slug\n  };\n}\nfunction slug(args) {\n  var _args$slug, _args$name$defaultVal, _args$name$defaultVal2;\n  const naiveGenerateSlug = ((_args$slug = args.slug) === null || _args$slug === void 0 ? void 0 : _args$slug.generate) || (_sindresorhus_slugify__WEBPACK_IMPORTED_MODULE_5___default());\n  const defaultValue = {\n    name: (_args$name$defaultVal = args.name.defaultValue) !== null && _args$name$defaultVal !== void 0 ? _args$name$defaultVal : '',\n    slug: naiveGenerateSlug((_args$name$defaultVal2 = args.name.defaultValue) !== null && _args$name$defaultVal2 !== void 0 ? _args$name$defaultVal2 : '')\n  };\n  function validate(value, {\n    slugField\n  } = {\n    slugField: undefined\n  }) {\n    var _args$name$validation, _args$name$validation2, _args$name$validation3, _args$name$validation4, _args$slug$validation, _args$slug2, _args$slug$validation2, _args$slug3, _args$slug$label, _args$slug4;\n    const nameMessage = (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ar)(value.name, (_args$name$validation = (_args$name$validation2 = args.name.validation) === null || _args$name$validation2 === void 0 || (_args$name$validation2 = _args$name$validation2.length) === null || _args$name$validation2 === void 0 ? void 0 : _args$name$validation2.min) !== null && _args$name$validation !== void 0 ? _args$name$validation : 0, (_args$name$validation3 = (_args$name$validation4 = args.name.validation) === null || _args$name$validation4 === void 0 || (_args$name$validation4 = _args$name$validation4.length) === null || _args$name$validation4 === void 0 ? void 0 : _args$name$validation4.max) !== null && _args$name$validation3 !== void 0 ? _args$name$validation3 : Infinity, args.name.label, undefined);\n    if (nameMessage !== undefined) {\n      throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ac(nameMessage);\n    }\n    const slugMessage = (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ar)(value.slug, (_args$slug$validation = (_args$slug2 = args.slug) === null || _args$slug2 === void 0 || (_args$slug2 = _args$slug2.validation) === null || _args$slug2 === void 0 || (_args$slug2 = _args$slug2.length) === null || _args$slug2 === void 0 ? void 0 : _args$slug2.min) !== null && _args$slug$validation !== void 0 ? _args$slug$validation : 1, (_args$slug$validation2 = (_args$slug3 = args.slug) === null || _args$slug3 === void 0 || (_args$slug3 = _args$slug3.validation) === null || _args$slug3 === void 0 || (_args$slug3 = _args$slug3.length) === null || _args$slug3 === void 0 ? void 0 : _args$slug3.max) !== null && _args$slug$validation2 !== void 0 ? _args$slug$validation2 : Infinity, (_args$slug$label = (_args$slug4 = args.slug) === null || _args$slug4 === void 0 ? void 0 : _args$slug4.label) !== null && _args$slug$label !== void 0 ? _args$slug$label : 'Slug', slugField ? slugField : {\n      slugs: emptySet,\n      glob: '*'\n    });\n    if (slugMessage !== undefined) {\n      throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ac(slugMessage);\n    }\n    return value;\n  }\n  const emptySet = new Set();\n  return {\n    kind: 'form',\n    formKind: 'slug',\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.aq, {\n        args: args,\n        naiveGenerateSlug: naiveGenerateSlug,\n        defaultValue: defaultValue,\n        ...props\n      });\n    },\n    defaultValue() {\n      return defaultValue;\n    },\n    parse(value, args) {\n      if ((args === null || args === void 0 ? void 0 : args.slug) !== undefined) {\n        return parseAsSlugField(value, args.slug);\n      }\n      return parseSlugFieldAsNormalField(value);\n    },\n    validate,\n    serialize(value) {\n      return {\n        value\n      };\n    },\n    serializeWithSlug(value) {\n      return {\n        value: value.name,\n        slug: value.slug\n      };\n    },\n    reader: {\n      parse(value) {\n        const parsed = parseSlugFieldAsNormalField(value);\n        return validate(parsed);\n      },\n      parseWithSlug(value, args) {\n        return validate(parseAsSlugField(value, args.slug), {\n          slugField: {\n            glob: args.glob,\n            slugs: emptySet\n          }\n        }).name;\n      }\n    }\n  };\n}\n\nfunction validateUrl(validation, value, label) {\n  if (value !== null && (typeof value !== 'string' || !(0,_isValidURL_3f764c70_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_0__.i)(value))) {\n    return `${label} is not a valid URL`;\n  }\n  if (validation !== null && validation !== void 0 && validation.isRequired && value === null) {\n    return `${label} is required`;\n  }\n}\n\nfunction url({\n  label,\n  defaultValue,\n  validation,\n  description\n}) {\n  return (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ad)({\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.as, {\n        label: label,\n        description: description,\n        validation: validation,\n        ...props\n      });\n    },\n    defaultValue() {\n      return defaultValue || null;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ac('Must be a string');\n      }\n      return value === '' ? null : value;\n    },\n    validate(value) {\n      const message = validateUrl(validation, value, label);\n      if (message !== undefined) {\n        throw new _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ac(message);\n      }\n      (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ag)(value, validation, label);\n      return value;\n    },\n    serialize(value) {\n      return {\n        value: value === null ? undefined : value\n      };\n    }\n  });\n}\n\nfunction blocks(blocks, opts) {\n  const entries = Object.entries(blocks);\n  if (!entries.length) {\n    throw new Error('fields.blocks must have at least one entry');\n  }\n  const select$1 = select({\n    label: 'Kind',\n    defaultValue: entries[0][0],\n    options: Object.entries(blocks).map(([key, {\n      label\n    }]) => ({\n      label,\n      value: key\n    }))\n  });\n  const element = conditional(select$1, Object.fromEntries(entries.map(([key, {\n    schema\n  }]) => [key, schema])));\n  return {\n    ...array(element, {\n      label: opts.label,\n      description: opts.description,\n      validation: opts.validation,\n      itemLabel(props) {\n        const kind = props.discriminant;\n        const block = blocks[kind];\n        if (!block.itemLabel) return block.label;\n        return block.itemLabel(props.value);\n      }\n    }),\n    Input: _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.at\n  };\n}\n\nfunction cloudImage({\n  label,\n  description,\n  validation\n}) {\n  return {\n    ...(0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.N)({\n      src: (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.au)({\n        label: 'URL',\n        validation: {\n          length: {\n            min: validation !== null && validation !== void 0 && validation.isRequired ? 1 : 0\n          }\n        }\n      }),\n      alt: (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.au)({\n        label: 'Alt text'\n      }),\n      height: (0,_index_8bb79b3a_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_4__.i)({\n        label: 'Height'\n      }),\n      width: (0,_index_8bb79b3a_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_4__.i)({\n        label: 'Width'\n      })\n    }, {\n      label,\n      description\n    }),\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.av, {\n        ...props,\n        isRequired: validation === null || validation === void 0 ? void 0 : validation.isRequired\n      });\n    }\n  };\n}\n\nvar index = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  array: array,\n  checkbox: checkbox,\n  child: child,\n  conditional: conditional,\n  date: date,\n  datetime: datetime,\n  document: _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.aw,\n  emptyDocument: emptyDocument,\n  empty: empty,\n  image: image,\n  file: file,\n  integer: _index_8bb79b3a_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_4__.i,\n  multiselect: multiselect,\n  object: _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.N,\n  pathReference: pathReference,\n  relationship: relationship,\n  select: select,\n  slug: slug,\n  text: _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.au,\n  url: url,\n  blocks: blocks,\n  cloudImage: cloudImage\n});\n\nfunction BlockWrapper() {}\nfunction NotEditable() {}\nfunction ToolbarSeparator() {}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGtleXN0YXRpYytjb3JlQDAuMi4xMl9uZXh0QDE0LjIuMl9yZWFjdC1kb21AMTguMi4wX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3Qva2V5c3RhdGljLWNvcmUubm9kZS5yZWFjdC1zZXJ2ZXIuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUY7QUFDNkI7QUFDckM7QUFDdWU7QUFDeGdCO0FBQ2lDO0FBQzdCO0FBQzdCO0FBQ2tCO0FBQ1A7QUFDWDtBQUNXO0FBQ1A7QUFDSDtBQUNlOztBQUUvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxTQUFTLDRFQUFtQztBQUM1QztBQUNBLDBCQUEwQixzREFBRyxDQUFDLHdFQUFrQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHdFQUFjO0FBQ2hDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4QkFBOEIsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFO0FBQzVDLGNBQWMsT0FBTztBQUNyQjtBQUNBO0FB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QUFDRDtBQUNBLE9BQU8sMkVBQU07QUFDYixXQUFXLDRFQUFJO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLFdBQVcsNEVBQUk7QUFDZjtBQUNBLE9BQU87QUFDUCxjQUFjLDJFQUFPO0FBQ3JCO0FBQ0EsT0FBTztBQUNQLGFBQWEsMkVBQU87QUFDcEI7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSwwQkFBMEIsc0RBQUcsQ0FBQyx3RUFBb0I7QUFDbEQ7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksd0VBQVE7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHVFQUFPO0FBQ2xCO0FBQ0EsVUFBVSx1RUFBTTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsd0VBQUk7QUFDWjtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFd0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Aa2V5c3RhdGljL3RlbXBsYXRlcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvLnBucG0vQGtleXN0YXRpYytjb3JlQDAuMi4xMl9uZXh0QDE0LjIuMl9yZWFjdC1kb21AMTguMi4wX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3Qva2V5c3RhdGljLWNvcmUubm9kZS5yZWFjdC1zZXJ2ZXIuZXNtLmpzPzIxODgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaSBhcyBpc1ZhbGlkVVJMIH0gZnJvbSAnLi9pc1ZhbGlkVVJMLTNmNzY0YzcwLm5vZGUucmVhY3Qtc2VydmVyLmVzbS5qcyc7XG5leHBvcnQgeyBhIGFzIGNvbGxlY3Rpb24sIGMgYXMgY29uZmlnLCBzIGFzIHNpbmdsZXRvbiB9IGZyb20gJy4vaXNWYWxpZFVSTC0zZjc2NGM3MC5ub2RlLnJlYWN0LXNlcnZlci5lc20uanMnO1xuZXhwb3J0IHsgYyBhcyBjb21wb25lbnQgfSBmcm9tICcuL2FwaS01OWU1ZWJkOS5ub2RlLnJlYWN0LXNlcnZlci5lc20uanMnO1xuaW1wb3J0IHsgYWQgYXMgYmFzaWNGb3JtRmllbGRXaXRoU2ltcGxlUmVhZGVyUGFyc2UsIGFlIGFzIENoZWNrYm94RmllbGRJbnB1dCwgYWMgYXMgRmllbGREYXRhRXJyb3IsIGFmIGFzIERhdGVGaWVsZElucHV0LCBhZyBhcyBhc3NlcnRSZXF1aXJlZCwgYWggYXMgRGF0ZXRpbWVGaWVsZElucHV0LCBhaSBhcyBJbWFnZUZpZWxkSW5wdXQsIGFqIGFzIGdldFNyY1ByZWZpeCwgYWsgYXMgZml4UGF0aCwgYWwgYXMgRmlsZUZpZWxkSW5wdXQsIGFtIGFzIE11bHRpc2VsZWN0RmllbGRJbnB1dCwgYW4gYXMgUGF0aFJlZmVyZW5jZUlucHV0LCBhbyBhcyBSZWxhdGlvbnNoaXBJbnB1dCwgYXAgYXMgU2VsZWN0RmllbGRJbnB1dCwgYXEgYXMgU2x1Z0ZpZWxkSW5wdXQsIGFyIGFzIHZhbGlkYXRlVGV4dCwgYXMgYXMgVXJsRmllbGRJbnB1dCwgYXQgYXMgQmxvY2tzRmllbGRJbnB1dCwgTiBhcyBvYmplY3QsIGF1IGFzIHRleHQsIGF2IGFzIENsb3VkSW1hZ2VGaWVsZElucHV0LCBhdyBhcyBkb2N1bWVudCB9IGZyb20gJy4vaW5kZXgtOTA2MDg1MzEubm9kZS5yZWFjdC1zZXJ2ZXIuZXNtLmpzJztcbmltcG9ydCB7IGpzeCB9IGZyb20gJ3JlYWN0L2pzeC1ydW50aW1lJztcbmltcG9ydCB7IGkgYXMgaW50ZWdlciB9IGZyb20gJy4vaW5kZXgtOGJiNzliM2Eubm9kZS5yZWFjdC1zZXJ2ZXIuZXNtLmpzJztcbmltcG9ydCBzbHVnaWZ5IGZyb20gJ0BzaW5kcmVzb3JodXMvc2x1Z2lmeSc7XG5pbXBvcnQgJ2VtZXJ5JztcbmltcG9ydCAnQGJyYWludHJlZS9zYW5pdGl6ZS11cmwnO1xuaW1wb3J0ICdAbWFya2RvYy9tYXJrZG9jJztcbmltcG9ydCAnc2xhdGUnO1xuaW1wb3J0ICdlbWVyeS9hc3NlcnRpb25zJztcbmltcG9ydCAnanMtYmFzZTY0JztcbmltcG9ydCAnY3J5cHRvJztcbmltcG9ydCAnQGVtb3Rpb24vd2Vhay1tZW1vaXplJztcblxuZnVuY3Rpb24gYXJyYXkoZWxlbWVudCwgb3B0cykge1xuICB2YXIgX29wdHMkbGFiZWw7XG4gIHJldHVybiB7XG4gICAga2luZDogJ2FycmF5JyxcbiAgICBlbGVtZW50LFxuICAgIGxhYmVsOiAoX29wdHMkbGFiZWwgPSBvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMubGFiZWwpICE9PSBudWxsICYmIF9vcHRzJGxhYmVsICE9PSB2b2lkIDAgPyBfb3B0cyRsYWJlbCA6ICdJdGVtcycsXG4gICAgZGVzY3JpcHRpb246IG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy5kZXNjcmlwdGlvbixcbiAgICBpdGVtTGFiZWw6IG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy5pdGVtTGFiZWwsXG4gICAgYXNDaGlsZFRhZzogb3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLmFzQ2hpbGRUYWcsXG4gICAgc2x1Z0ZpZWxkOiBvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMuc2x1Z0ZpZWxkLFxuICAgIHZhbGlkYXRpb246IG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy52YWxpZGF0aW9uXG4gIH07XG59XG5cbmZ1bmN0aW9uIGNoZWNrYm94KHtcbiAgbGFiZWwsXG4gIGRlZmF1bHRWYWx1ZSA9IGZhbHNlLFxuICBkZXNjcmlwdGlvblxufSkge1xuICByZXR1cm4gYmFzaWNGb3JtRmllbGRXaXRoU2ltcGxlUmVhZGVyUGFyc2Uoe1xuICAgIElucHV0KHByb3BzKSB7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChDaGVja2JveEZpZWxkSW5wdXQsIHtcbiAgICAgICAgLi4ucHJvcHMsXG4gICAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgfSxcbiAgICBwYXJzZSh2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGEgYm9vbGVhbicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWVcbiAgICAgIH07XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gY2hpbGQob3B0aW9ucykge1xuICByZXR1cm4ge1xuICAgIGtpbmQ6ICdjaGlsZCcsXG4gICAgb3B0aW9uczogb3B0aW9ucy5raW5kID09PSAnYmxvY2snID8ge1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIGRpdmlkZXJzOiBvcHRpb25zLmRpdmlkZXJzLFxuICAgICAgZm9ybWF0dGluZzogb3B0aW9ucy5mb3JtYXR0aW5nID09PSAnaW5oZXJpdCcgPyB7XG4gICAgICAgIGJsb2NrVHlwZXM6ICdpbmhlcml0JyxcbiAgICAgICAgaGVhZGluZ0xldmVsczogJ2luaGVyaXQnLFxuICAgICAgICBpbmxpbmVNYXJrczogJ2luaGVyaXQnLFxuICAgICAgICBsaXN0VHlwZXM6ICdpbmhlcml0JyxcbiAgICAgICAgYWxpZ25tZW50OiAnaW5oZXJpdCcsXG4gICAgICAgIHNvZnRCcmVha3M6ICdpbmhlcml0J1xuICAgICAgfSA6IG9wdGlvbnMuZm9ybWF0dGluZyxcbiAgICAgIGxpbmtzOiBvcHRpb25zLmxpbmtzLFxuICAgICAgaW1hZ2VzOiBvcHRpb25zLmltYWdlcyxcbiAgICAgIHRhYmxlczogb3B0aW9ucy50YWJsZXMsXG4gICAgICBjb21wb25lbnRCbG9ja3M6IG9wdGlvbnMuY29tcG9uZW50QmxvY2tzXG4gICAgfSA6IHtcbiAgICAgIGtpbmQ6ICdpbmxpbmUnLFxuICAgICAgcGxhY2Vob2xkZXI6IG9wdGlvbnMucGxhY2Vob2xkZXIsXG4gICAgICBmb3JtYXR0aW5nOiBvcHRpb25zLmZvcm1hdHRpbmcgPT09ICdpbmhlcml0JyA/IHtcbiAgICAgICAgaW5saW5lTWFya3M6ICdpbmhlcml0JyxcbiAgICAgICAgc29mdEJyZWFrczogJ2luaGVyaXQnXG4gICAgICB9IDogb3B0aW9ucy5mb3JtYXR0aW5nLFxuICAgICAgbGlua3M6IG9wdGlvbnMubGlua3NcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGNvbmRpdGlvbmFsKGRpc2NyaW1pbmFudCwgdmFsdWVzKSB7XG4gIHJldHVybiB7XG4gICAga2luZDogJ2NvbmRpdGlvbmFsJyxcbiAgICBkaXNjcmltaW5hbnQsXG4gICAgdmFsdWVzOiB2YWx1ZXNcbiAgfTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVEYXRlKHZhbGlkYXRpb24sIHZhbHVlLCBsYWJlbCkge1xuICBpZiAodmFsdWUgIT09IG51bGwgJiYgIS9eXFxkezR9LVxcZHsyfS1cXGR7Mn0kLy50ZXN0KHZhbHVlKSkge1xuICAgIHJldHVybiBgJHtsYWJlbH0gaXMgbm90IGEgdmFsaWQgZGF0ZWA7XG4gIH1cbiAgaWYgKHZhbGlkYXRpb24gIT09IG51bGwgJiYgdmFsaWRhdGlvbiAhPT0gdm9pZCAwICYmIHZhbGlkYXRpb24uaXNSZXF1aXJlZCAmJiB2YWx1ZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBgJHtsYWJlbH0gaXMgcmVxdWlyZWRgO1xuICB9XG4gIGlmICgodmFsaWRhdGlvbiAhPT0gbnVsbCAmJiB2YWxpZGF0aW9uICE9PSB2b2lkIDAgJiYgdmFsaWRhdGlvbi5taW4gfHwgdmFsaWRhdGlvbiAhPT0gbnVsbCAmJiB2YWxpZGF0aW9uICE9PSB2b2lkIDAgJiYgdmFsaWRhdGlvbi5tYXgpICYmIHZhbHVlICE9PSBudWxsKSB7XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHZhbHVlKTtcbiAgICBpZiAoKHZhbGlkYXRpb24gPT09IG51bGwgfHwgdmFsaWRhdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsaWRhdGlvbi5taW4pICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IG1pbiA9IG5ldyBEYXRlKHZhbGlkYXRpb24ubWluKTtcbiAgICAgIGlmIChkYXRlIDwgbWluKSB7XG4gICAgICAgIHJldHVybiBgJHtsYWJlbH0gbXVzdCBiZSBhZnRlciAke21pbi50b0xvY2FsZURhdGVTdHJpbmcoKX1gO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoKHZhbGlkYXRpb24gPT09IG51bGwgfHwgdmFsaWRhdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsaWRhdGlvbi5tYXgpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IG1heCA9IG5ldyBEYXRlKHZhbGlkYXRpb24ubWF4KTtcbiAgICAgIGlmIChkYXRlID4gbWF4KSB7XG4gICAgICAgIHJldHVybiBgJHtsYWJlbH0gbXVzdCBiZSBubyBsYXRlciB0aGFuICR7bWF4LnRvTG9jYWxlRGF0ZVN0cmluZygpfWA7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGRhdGUoe1xuICBsYWJlbCxcbiAgZGVmYXVsdFZhbHVlLFxuICB2YWxpZGF0aW9uLFxuICBkZXNjcmlwdGlvblxufSkge1xuICByZXR1cm4gYmFzaWNGb3JtRmllbGRXaXRoU2ltcGxlUmVhZGVyUGFyc2Uoe1xuICAgIElucHV0KHByb3BzKSB7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChEYXRlRmllbGRJbnB1dCwge1xuICAgICAgICB2YWxpZGF0aW9uOiB2YWxpZGF0aW9uLFxuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgLi4ucHJvcHNcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgaWYgKGRlZmF1bHRWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBkZWZhdWx0VmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgICB9XG4gICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICBjb25zdCB5ZWFyID0gdG9kYXkuZ2V0RnVsbFllYXIoKTtcbiAgICAgIGNvbnN0IG1vbnRoID0gU3RyaW5nKHRvZGF5LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgY29uc3QgZGF5ID0gU3RyaW5nKHRvZGF5LmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgIHJldHVybiBgJHt5ZWFyfS0ke21vbnRofS0ke2RheX1gO1xuICAgIH0sXG4gICAgcGFyc2UodmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBzZXJpYWxpemUodmFsdWUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IHZhbHVlXG4gICAgICB9O1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSB2YWxpZGF0ZURhdGUodmFsaWRhdGlvbiwgdmFsdWUsIGxhYmVsKTtcbiAgICAgIGlmIChtZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKG1lc3NhZ2UpO1xuICAgICAgfVxuICAgICAgYXNzZXJ0UmVxdWlyZWQodmFsdWUsIHZhbGlkYXRpb24sIGxhYmVsKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZURhdGV0aW1lKHZhbGlkYXRpb24sIHZhbHVlLCBsYWJlbCkge1xuICBpZiAodmFsdWUgIT09IG51bGwgJiYgIS9eXFxkezR9LVxcZHsyfS1cXGR7Mn1UXFxkezJ9OlxcZHsyfSQvLnRlc3QodmFsdWUpKSB7XG4gICAgcmV0dXJuIGAke2xhYmVsfSBpcyBub3QgYSB2YWxpZCBkYXRldGltZWA7XG4gIH1cbiAgaWYgKHZhbGlkYXRpb24gIT09IG51bGwgJiYgdmFsaWRhdGlvbiAhPT0gdm9pZCAwICYmIHZhbGlkYXRpb24uaXNSZXF1aXJlZCAmJiB2YWx1ZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBgJHtsYWJlbH0gaXMgcmVxdWlyZWRgO1xuICB9XG4gIGlmICgodmFsaWRhdGlvbiAhPT0gbnVsbCAmJiB2YWxpZGF0aW9uICE9PSB2b2lkIDAgJiYgdmFsaWRhdGlvbi5taW4gfHwgdmFsaWRhdGlvbiAhPT0gbnVsbCAmJiB2YWxpZGF0aW9uICE9PSB2b2lkIDAgJiYgdmFsaWRhdGlvbi5tYXgpICYmIHZhbHVlICE9PSBudWxsKSB7XG4gICAgY29uc3QgZGF0ZXRpbWUgPSBuZXcgRGF0ZSh2YWx1ZSk7XG4gICAgaWYgKCh2YWxpZGF0aW9uID09PSBudWxsIHx8IHZhbGlkYXRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbGlkYXRpb24ubWluKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCBtaW4gPSBuZXcgRGF0ZSh2YWxpZGF0aW9uLm1pbik7XG4gICAgICBpZiAoZGF0ZXRpbWUgPCBtaW4pIHtcbiAgICAgICAgcmV0dXJuIGAke2xhYmVsfSBtdXN0IGJlIGFmdGVyICR7bWluLnRvSVNPU3RyaW5nKCl9YDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCh2YWxpZGF0aW9uID09PSBudWxsIHx8IHZhbGlkYXRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbGlkYXRpb24ubWF4KSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCBtYXggPSBuZXcgRGF0ZSh2YWxpZGF0aW9uLm1heCk7XG4gICAgICBpZiAoZGF0ZXRpbWUgPiBtYXgpIHtcbiAgICAgICAgcmV0dXJuIGAke2xhYmVsfSBtdXN0IGJlIG5vIGxhdGVyIHRoYW4gJHttYXgudG9JU09TdHJpbmcoKX1gO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBkYXRldGltZSh7XG4gIGxhYmVsLFxuICBkZWZhdWx0VmFsdWUsXG4gIHZhbGlkYXRpb24sXG4gIGRlc2NyaXB0aW9uXG59KSB7XG4gIHJldHVybiBiYXNpY0Zvcm1GaWVsZFdpdGhTaW1wbGVSZWFkZXJQYXJzZSh7XG4gICAgSW5wdXQocHJvcHMpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KERhdGV0aW1lRmllbGRJbnB1dCwge1xuICAgICAgICB2YWxpZGF0aW9uOiB2YWxpZGF0aW9uLFxuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgLi4ucHJvcHNcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgaWYgKGRlZmF1bHRWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBkZWZhdWx0VmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgICB9XG4gICAgICBpZiAoZGVmYXVsdFZhbHVlLmtpbmQgPT09ICdub3cnKSB7XG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHJldHVybiBub3cudG9JU09TdHJpbmcoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgcGFyc2UodmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBzZXJpYWxpemUodmFsdWUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IHZhbHVlXG4gICAgICB9O1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSB2YWxpZGF0ZURhdGV0aW1lKHZhbGlkYXRpb24sIHZhbHVlLCBsYWJlbCk7XG4gICAgICBpZiAobWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcihtZXNzYWdlKTtcbiAgICAgIH1cbiAgICAgIGFzc2VydFJlcXVpcmVkKHZhbHVlLCB2YWxpZGF0aW9uLCBsYWJlbCk7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gZW1wdHlEb2N1bWVudCgpIHtcbiAgcmV0dXJuIHtcbiAgICBraW5kOiAnZm9ybScsXG4gICAgZm9ybUtpbmQ6ICdjb250ZW50JyxcbiAgICBJbnB1dCgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBwYXJzZSgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgY29udGVudEV4dGVuc2lvbjogJy5tZG9jJyxcbiAgICBzZXJpYWxpemUoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICBjb250ZW50OiBuZXcgVWludDhBcnJheSgpLFxuICAgICAgICBleHRlcm5hbDogbmV3IE1hcCgpLFxuICAgICAgICBvdGhlcjogbmV3IE1hcCgpXG4gICAgICB9O1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHJlYWRlcjoge1xuICAgICAgcGFyc2UoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gZW1wdHkoKSB7XG4gIHJldHVybiBiYXNpY0Zvcm1GaWVsZFdpdGhTaW1wbGVSZWFkZXJQYXJzZSh7XG4gICAgSW5wdXQoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgcGFyc2UoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB1bmRlZmluZWRcbiAgICAgIH07XG4gICAgfSxcbiAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGltYWdlKHtcbiAgbGFiZWwsXG4gIGRpcmVjdG9yeSxcbiAgdmFsaWRhdGlvbixcbiAgZGVzY3JpcHRpb24sXG4gIHB1YmxpY1BhdGhcbn0pIHtcbiAgcmV0dXJuIHtcbiAgICBraW5kOiAnZm9ybScsXG4gICAgZm9ybUtpbmQ6ICdhc3NldCcsXG4gICAgSW5wdXQocHJvcHMpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KEltYWdlRmllbGRJbnB1dCwge1xuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgdmFsaWRhdGlvbjogdmFsaWRhdGlvbixcbiAgICAgICAgLi4ucHJvcHNcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBmaWxlbmFtZSh2YWx1ZSwgYXJncykge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlLnNsaWNlKGdldFNyY1ByZWZpeChwdWJsaWNQYXRoLCBhcmdzLnNsdWcpLmxlbmd0aCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0sXG4gICAgcGFyc2UodmFsdWUsIGFyZ3MpIHtcbiAgICAgIHZhciBfdmFsdWUkbWF0Y2gkLCBfdmFsdWUkbWF0Y2g7XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIHN0cmluZycpO1xuICAgICAgfVxuICAgICAgaWYgKGFyZ3MuYXNzZXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IGFyZ3MuYXNzZXQsXG4gICAgICAgIGZpbGVuYW1lOiB2YWx1ZS5zbGljZShnZXRTcmNQcmVmaXgocHVibGljUGF0aCwgYXJncy5zbHVnKS5sZW5ndGgpLFxuICAgICAgICBleHRlbnNpb246IChfdmFsdWUkbWF0Y2gkID0gKF92YWx1ZSRtYXRjaCA9IHZhbHVlLm1hdGNoKC9cXC4oW14uXSskKS8pKSA9PT0gbnVsbCB8fCBfdmFsdWUkbWF0Y2ggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92YWx1ZSRtYXRjaFsxXSkgIT09IG51bGwgJiYgX3ZhbHVlJG1hdGNoJCAhPT0gdm9pZCAwID8gX3ZhbHVlJG1hdGNoJCA6ICcnXG4gICAgICB9O1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIGFzc2VydFJlcXVpcmVkKHZhbHVlLCB2YWxpZGF0aW9uLCBsYWJlbCk7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBzZXJpYWxpemUodmFsdWUsIGFyZ3MpIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWQsXG4gICAgICAgICAgYXNzZXQ6IHVuZGVmaW5lZFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgY29uc3QgZmlsZW5hbWUgPSBhcmdzLnN1Z2dlc3RlZEZpbGVuYW1lUHJlZml4ID8gYXJncy5zdWdnZXN0ZWRGaWxlbmFtZVByZWZpeCArICcuJyArIHZhbHVlLmV4dGVuc2lvbiA6IHZhbHVlLmZpbGVuYW1lO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IGAke2dldFNyY1ByZWZpeChwdWJsaWNQYXRoLCBhcmdzLnNsdWcpfSR7ZmlsZW5hbWV9YCxcbiAgICAgICAgYXNzZXQ6IHtcbiAgICAgICAgICBmaWxlbmFtZSxcbiAgICAgICAgICBjb250ZW50OiB2YWx1ZS5kYXRhXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSxcbiAgICBkaXJlY3Rvcnk6IGRpcmVjdG9yeSA/IGZpeFBhdGgoZGlyZWN0b3J5KSA6IHVuZGVmaW5lZCxcbiAgICByZWFkZXI6IHtcbiAgICAgIHBhcnNlKHZhbHVlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnICYmIHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ011c3QgYmUgYSBzdHJpbmcnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWwgPSB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHZhbHVlO1xuICAgICAgICBhc3NlcnRSZXF1aXJlZCh2YWwsIHZhbGlkYXRpb24sIGxhYmVsKTtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGZpbGUoe1xuICBsYWJlbCxcbiAgZGlyZWN0b3J5LFxuICB2YWxpZGF0aW9uLFxuICBkZXNjcmlwdGlvbixcbiAgcHVibGljUGF0aFxufSkge1xuICByZXR1cm4ge1xuICAgIGtpbmQ6ICdmb3JtJyxcbiAgICBmb3JtS2luZDogJ2Fzc2V0JyxcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goRmlsZUZpZWxkSW5wdXQsIHtcbiAgICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgICAgIHZhbGlkYXRpb246IHZhbGlkYXRpb24sXG4gICAgICAgIC4uLnByb3BzXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgZmlsZW5hbWUodmFsdWUsIGFyZ3MpIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZS5zbGljZShnZXRTcmNQcmVmaXgocHVibGljUGF0aCwgYXJncy5zbHVnKS5sZW5ndGgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9LFxuICAgIHBhcnNlKHZhbHVlLCBhcmdzKSB7XG4gICAgICB2YXIgX3ZhbHVlJG1hdGNoJCwgX3ZhbHVlJG1hdGNoO1xuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ011c3QgYmUgYSBzdHJpbmcnKTtcbiAgICAgIH1cbiAgICAgIGlmIChhcmdzLmFzc2V0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBhcmdzLmFzc2V0LFxuICAgICAgICBmaWxlbmFtZTogdmFsdWUuc2xpY2UoZ2V0U3JjUHJlZml4KHB1YmxpY1BhdGgsIGFyZ3Muc2x1ZykubGVuZ3RoKSxcbiAgICAgICAgZXh0ZW5zaW9uOiAoX3ZhbHVlJG1hdGNoJCA9IChfdmFsdWUkbWF0Y2ggPSB2YWx1ZS5tYXRjaCgvXFwuKFteLl0rJCkvKSkgPT09IG51bGwgfHwgX3ZhbHVlJG1hdGNoID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdmFsdWUkbWF0Y2hbMV0pICE9PSBudWxsICYmIF92YWx1ZSRtYXRjaCQgIT09IHZvaWQgMCA/IF92YWx1ZSRtYXRjaCQgOiAnJ1xuICAgICAgfTtcbiAgICB9LFxuICAgIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgICBhc3NlcnRSZXF1aXJlZCh2YWx1ZSwgdmFsaWRhdGlvbiwgbGFiZWwpO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgc2VyaWFsaXplKHZhbHVlLCBhcmdzKSB7XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICAgIGFzc2V0OiB1bmRlZmluZWRcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGZpbGVuYW1lID0gYXJncy5zdWdnZXN0ZWRGaWxlbmFtZVByZWZpeCA/IGFyZ3Muc3VnZ2VzdGVkRmlsZW5hbWVQcmVmaXggKyAnLicgKyB2YWx1ZS5leHRlbnNpb24gOiB2YWx1ZS5maWxlbmFtZTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiBgJHtnZXRTcmNQcmVmaXgocHVibGljUGF0aCwgYXJncy5zbHVnKX0ke2ZpbGVuYW1lfWAsXG4gICAgICAgIGFzc2V0OiB7XG4gICAgICAgICAgZmlsZW5hbWUsXG4gICAgICAgICAgY29udGVudDogdmFsdWUuZGF0YVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0sXG4gICAgZGlyZWN0b3J5OiBkaXJlY3RvcnkgPyBmaXhQYXRoKGRpcmVjdG9yeSkgOiB1bmRlZmluZWQsXG4gICAgcmVhZGVyOiB7XG4gICAgICBwYXJzZSh2YWx1ZSkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJyAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmFsID0gdmFsdWUgPT09IHVuZGVmaW5lZCA/IG51bGwgOiB2YWx1ZTtcbiAgICAgICAgYXNzZXJ0UmVxdWlyZWQodmFsLCB2YWxpZGF0aW9uLCBsYWJlbCk7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBtdWx0aXNlbGVjdCh7XG4gIGxhYmVsLFxuICBvcHRpb25zLFxuICBkZWZhdWx0VmFsdWUgPSBbXSxcbiAgZGVzY3JpcHRpb25cbn0pIHtcbiAgY29uc3QgdmFsdWVzVG9PcHRpb24gPSBuZXcgTWFwKG9wdGlvbnMubWFwKHggPT4gW3gudmFsdWUsIHhdKSk7XG4gIGNvbnN0IGZpZWxkID0gYmFzaWNGb3JtRmllbGRXaXRoU2ltcGxlUmVhZGVyUGFyc2Uoe1xuICAgIElucHV0KHByb3BzKSB7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChNdWx0aXNlbGVjdEZpZWxkSW5wdXQsIHtcbiAgICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgICAgIG9wdGlvbnM6IG9wdGlvbnMsXG4gICAgICAgIC4uLnByb3BzXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgfSxcbiAgICBwYXJzZSh2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ011c3QgYmUgYW4gYXJyYXkgb2Ygb3B0aW9ucycpO1xuICAgICAgfVxuICAgICAgaWYgKCF2YWx1ZS5ldmVyeSh4ID0+IHR5cGVvZiB4ID09PSAnc3RyaW5nJyAmJiB2YWx1ZXNUb09wdGlvbi5oYXMoeCkpKSB7XG4gICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcihgTXVzdCBiZSBhbiBhcnJheSB3aXRoIG9uZSBvZiAke29wdGlvbnMubWFwKHggPT4geC52YWx1ZSkuam9pbignLCAnKX1gKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBzZXJpYWxpemUodmFsdWUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlXG4gICAgICB9O1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiB7XG4gICAgLi4uZmllbGQsXG4gICAgb3B0aW9uc1xuICB9O1xufVxuXG5mdW5jdGlvbiBwYXRoUmVmZXJlbmNlKHtcbiAgbGFiZWwsXG4gIHBhdHRlcm4sXG4gIHZhbGlkYXRpb24sXG4gIGRlc2NyaXB0aW9uXG59KSB7XG4gIHJldHVybiBiYXNpY0Zvcm1GaWVsZFdpdGhTaW1wbGVSZWFkZXJQYXJzZSh7XG4gICAgSW5wdXQocHJvcHMpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFBhdGhSZWZlcmVuY2VJbnB1dCwge1xuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIHBhdHRlcm46IHBhdHRlcm4sXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgdmFsaWRhdGlvbjogdmFsaWRhdGlvbixcbiAgICAgICAgLi4ucHJvcHNcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBwYXJzZSh2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ011c3QgYmUgYSBzdHJpbmcnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgICBhc3NlcnRSZXF1aXJlZCh2YWx1ZSwgdmFsaWRhdGlvbiwgbGFiZWwpO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgc2VyaWFsaXplKHZhbHVlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdmFsdWUgPT09IG51bGwgPyB1bmRlZmluZWQgOiB2YWx1ZVxuICAgICAgfTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZWxhdGlvbnNoaXAoe1xuICBsYWJlbCxcbiAgY29sbGVjdGlvbixcbiAgdmFsaWRhdGlvbixcbiAgZGVzY3JpcHRpb25cbn0pIHtcbiAgcmV0dXJuIGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlKHtcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goUmVsYXRpb25zaGlwSW5wdXQsIHtcbiAgICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgICBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uLFxuICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgICAgIHZhbGlkYXRpb246IHZhbGlkYXRpb24sXG4gICAgICAgIC4uLnByb3BzXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgcGFyc2UodmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgYXNzZXJ0UmVxdWlyZWQodmFsdWUsIHZhbGlkYXRpb24sIGxhYmVsKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHZhbHVlID09PSBudWxsID8gdW5kZWZpbmVkIDogdmFsdWVcbiAgICAgIH07XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gc2VsZWN0KHtcbiAgbGFiZWwsXG4gIG9wdGlvbnMsXG4gIGRlZmF1bHRWYWx1ZSxcbiAgZGVzY3JpcHRpb25cbn0pIHtcbiAgY29uc3Qgb3B0aW9uVmFsdWVzU2V0ID0gbmV3IFNldChvcHRpb25zLm1hcCh4ID0+IHgudmFsdWUpKTtcbiAgaWYgKCFvcHRpb25WYWx1ZXNTZXQuaGFzKGRlZmF1bHRWYWx1ZSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEEgZGVmYXVsdFZhbHVlIG9mICR7ZGVmYXVsdFZhbHVlfSB3YXMgcHJvdmlkZWQgdG8gYSBzZWxlY3QgZmllbGQgYnV0IGl0IGRvZXMgbm90IG1hdGNoIHRoZSB2YWx1ZSBvZiBvbmUgb2YgdGhlIG9wdGlvbnMgcHJvdmlkZWRgKTtcbiAgfVxuICBjb25zdCBmaWVsZCA9IGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlKHtcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goU2VsZWN0RmllbGRJbnB1dCwge1xuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIG9wdGlvbnM6IG9wdGlvbnMsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgLi4ucHJvcHNcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICB9LFxuICAgIHBhcnNlKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgICB9XG4gICAgICBpZiAoIW9wdGlvblZhbHVlc1NldC5oYXModmFsdWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIHZhbGlkIG9wdGlvbicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWVcbiAgICAgIH07XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHtcbiAgICAuLi5maWVsZCxcbiAgICBvcHRpb25zXG4gIH07XG59XG5cbmZ1bmN0aW9uIHBhcnNlU2x1Z0ZpZWxkQXNOb3JtYWxGaWVsZCh2YWx1ZSkge1xuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiAnJyxcbiAgICAgIHNsdWc6ICcnXG4gICAgfTtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0Jykge1xuICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhbiBvYmplY3QnKTtcbiAgfVxuICBpZiAoT2JqZWN0LmtleXModmFsdWUpLmxlbmd0aCAhPT0gMikge1xuICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignVW5leHBlY3RlZCBrZXlzJyk7XG4gIH1cbiAgaWYgKCEoJ25hbWUnIGluIHZhbHVlKSB8fCAhKCdzbHVnJyBpbiB2YWx1ZSkpIHtcbiAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ01pc3NpbmcgbmFtZSBvciBzbHVnJyk7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZS5uYW1lICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignbmFtZSBtdXN0IGJlIGEgc3RyaW5nJyk7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZS5zbHVnICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignc2x1ZyBtdXN0IGJlIGEgc3RyaW5nJyk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBuYW1lOiB2YWx1ZS5uYW1lLFxuICAgIHNsdWc6IHZhbHVlLnNsdWdcbiAgfTtcbn1cbmZ1bmN0aW9uIHBhcnNlQXNTbHVnRmllbGQodmFsdWUsIHNsdWcpIHtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogJycsXG4gICAgICBzbHVnXG4gICAgfTtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIHN0cmluZycpO1xuICB9XG4gIHJldHVybiB7XG4gICAgbmFtZTogdmFsdWUsXG4gICAgc2x1Z1xuICB9O1xufVxuZnVuY3Rpb24gc2x1ZyhhcmdzKSB7XG4gIHZhciBfYXJncyRzbHVnLCBfYXJncyRuYW1lJGRlZmF1bHRWYWwsIF9hcmdzJG5hbWUkZGVmYXVsdFZhbDI7XG4gIGNvbnN0IG5haXZlR2VuZXJhdGVTbHVnID0gKChfYXJncyRzbHVnID0gYXJncy5zbHVnKSA9PT0gbnVsbCB8fCBfYXJncyRzbHVnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYXJncyRzbHVnLmdlbmVyYXRlKSB8fCBzbHVnaWZ5O1xuICBjb25zdCBkZWZhdWx0VmFsdWUgPSB7XG4gICAgbmFtZTogKF9hcmdzJG5hbWUkZGVmYXVsdFZhbCA9IGFyZ3MubmFtZS5kZWZhdWx0VmFsdWUpICE9PSBudWxsICYmIF9hcmdzJG5hbWUkZGVmYXVsdFZhbCAhPT0gdm9pZCAwID8gX2FyZ3MkbmFtZSRkZWZhdWx0VmFsIDogJycsXG4gICAgc2x1ZzogbmFpdmVHZW5lcmF0ZVNsdWcoKF9hcmdzJG5hbWUkZGVmYXVsdFZhbDIgPSBhcmdzLm5hbWUuZGVmYXVsdFZhbHVlKSAhPT0gbnVsbCAmJiBfYXJncyRuYW1lJGRlZmF1bHRWYWwyICE9PSB2b2lkIDAgPyBfYXJncyRuYW1lJGRlZmF1bHRWYWwyIDogJycpXG4gIH07XG4gIGZ1bmN0aW9uIHZhbGlkYXRlKHZhbHVlLCB7XG4gICAgc2x1Z0ZpZWxkXG4gIH0gPSB7XG4gICAgc2x1Z0ZpZWxkOiB1bmRlZmluZWRcbiAgfSkge1xuICAgIHZhciBfYXJncyRuYW1lJHZhbGlkYXRpb24sIF9hcmdzJG5hbWUkdmFsaWRhdGlvbjIsIF9hcmdzJG5hbWUkdmFsaWRhdGlvbjMsIF9hcmdzJG5hbWUkdmFsaWRhdGlvbjQsIF9hcmdzJHNsdWckdmFsaWRhdGlvbiwgX2FyZ3Mkc2x1ZzIsIF9hcmdzJHNsdWckdmFsaWRhdGlvbjIsIF9hcmdzJHNsdWczLCBfYXJncyRzbHVnJGxhYmVsLCBfYXJncyRzbHVnNDtcbiAgICBjb25zdCBuYW1lTWVzc2FnZSA9IHZhbGlkYXRlVGV4dCh2YWx1ZS5uYW1lLCAoX2FyZ3MkbmFtZSR2YWxpZGF0aW9uID0gKF9hcmdzJG5hbWUkdmFsaWRhdGlvbjIgPSBhcmdzLm5hbWUudmFsaWRhdGlvbikgPT09IG51bGwgfHwgX2FyZ3MkbmFtZSR2YWxpZGF0aW9uMiA9PT0gdm9pZCAwIHx8IChfYXJncyRuYW1lJHZhbGlkYXRpb24yID0gX2FyZ3MkbmFtZSR2YWxpZGF0aW9uMi5sZW5ndGgpID09PSBudWxsIHx8IF9hcmdzJG5hbWUkdmFsaWRhdGlvbjIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hcmdzJG5hbWUkdmFsaWRhdGlvbjIubWluKSAhPT0gbnVsbCAmJiBfYXJncyRuYW1lJHZhbGlkYXRpb24gIT09IHZvaWQgMCA/IF9hcmdzJG5hbWUkdmFsaWRhdGlvbiA6IDAsIChfYXJncyRuYW1lJHZhbGlkYXRpb24zID0gKF9hcmdzJG5hbWUkdmFsaWRhdGlvbjQgPSBhcmdzLm5hbWUudmFsaWRhdGlvbikgPT09IG51bGwgfHwgX2FyZ3MkbmFtZSR2YWxpZGF0aW9uNCA9PT0gdm9pZCAwIHx8IChfYXJncyRuYW1lJHZhbGlkYXRpb240ID0gX2FyZ3MkbmFtZSR2YWxpZGF0aW9uNC5sZW5ndGgpID09PSBudWxsIHx8IF9hcmdzJG5hbWUkdmFsaWRhdGlvbjQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hcmdzJG5hbWUkdmFsaWRhdGlvbjQubWF4KSAhPT0gbnVsbCAmJiBfYXJncyRuYW1lJHZhbGlkYXRpb24zICE9PSB2b2lkIDAgPyBfYXJncyRuYW1lJHZhbGlkYXRpb24zIDogSW5maW5pdHksIGFyZ3MubmFtZS5sYWJlbCwgdW5kZWZpbmVkKTtcbiAgICBpZiAobmFtZU1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKG5hbWVNZXNzYWdlKTtcbiAgICB9XG4gICAgY29uc3Qgc2x1Z01lc3NhZ2UgPSB2YWxpZGF0ZVRleHQodmFsdWUuc2x1ZywgKF9hcmdzJHNsdWckdmFsaWRhdGlvbiA9IChfYXJncyRzbHVnMiA9IGFyZ3Muc2x1ZykgPT09IG51bGwgfHwgX2FyZ3Mkc2x1ZzIgPT09IHZvaWQgMCB8fCAoX2FyZ3Mkc2x1ZzIgPSBfYXJncyRzbHVnMi52YWxpZGF0aW9uKSA9PT0gbnVsbCB8fCBfYXJncyRzbHVnMiA9PT0gdm9pZCAwIHx8IChfYXJncyRzbHVnMiA9IF9hcmdzJHNsdWcyLmxlbmd0aCkgPT09IG51bGwgfHwgX2FyZ3Mkc2x1ZzIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hcmdzJHNsdWcyLm1pbikgIT09IG51bGwgJiYgX2FyZ3Mkc2x1ZyR2YWxpZGF0aW9uICE9PSB2b2lkIDAgPyBfYXJncyRzbHVnJHZhbGlkYXRpb24gOiAxLCAoX2FyZ3Mkc2x1ZyR2YWxpZGF0aW9uMiA9IChfYXJncyRzbHVnMyA9IGFyZ3Muc2x1ZykgPT09IG51bGwgfHwgX2FyZ3Mkc2x1ZzMgPT09IHZvaWQgMCB8fCAoX2FyZ3Mkc2x1ZzMgPSBfYXJncyRzbHVnMy52YWxpZGF0aW9uKSA9PT0gbnVsbCB8fCBfYXJncyRzbHVnMyA9PT0gdm9pZCAwIHx8IChfYXJncyRzbHVnMyA9IF9hcmdzJHNsdWczLmxlbmd0aCkgPT09IG51bGwgfHwgX2FyZ3Mkc2x1ZzMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hcmdzJHNsdWczLm1heCkgIT09IG51bGwgJiYgX2FyZ3Mkc2x1ZyR2YWxpZGF0aW9uMiAhPT0gdm9pZCAwID8gX2FyZ3Mkc2x1ZyR2YWxpZGF0aW9uMiA6IEluZmluaXR5LCAoX2FyZ3Mkc2x1ZyRsYWJlbCA9IChfYXJncyRzbHVnNCA9IGFyZ3Muc2x1ZykgPT09IG51bGwgfHwgX2FyZ3Mkc2x1ZzQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hcmdzJHNsdWc0LmxhYmVsKSAhPT0gbnVsbCAmJiBfYXJncyRzbHVnJGxhYmVsICE9PSB2b2lkIDAgPyBfYXJncyRzbHVnJGxhYmVsIDogJ1NsdWcnLCBzbHVnRmllbGQgPyBzbHVnRmllbGQgOiB7XG4gICAgICBzbHVnczogZW1wdHlTZXQsXG4gICAgICBnbG9iOiAnKidcbiAgICB9KTtcbiAgICBpZiAoc2x1Z01lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKHNsdWdNZXNzYWdlKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGNvbnN0IGVtcHR5U2V0ID0gbmV3IFNldCgpO1xuICByZXR1cm4ge1xuICAgIGtpbmQ6ICdmb3JtJyxcbiAgICBmb3JtS2luZDogJ3NsdWcnLFxuICAgIElucHV0KHByb3BzKSB7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChTbHVnRmllbGRJbnB1dCwge1xuICAgICAgICBhcmdzOiBhcmdzLFxuICAgICAgICBuYWl2ZUdlbmVyYXRlU2x1ZzogbmFpdmVHZW5lcmF0ZVNsdWcsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogZGVmYXVsdFZhbHVlLFxuICAgICAgICAuLi5wcm9wc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWZhdWx0VmFsdWUoKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgIH0sXG4gICAgcGFyc2UodmFsdWUsIGFyZ3MpIHtcbiAgICAgIGlmICgoYXJncyA9PT0gbnVsbCB8fCBhcmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhcmdzLnNsdWcpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlQXNTbHVnRmllbGQodmFsdWUsIGFyZ3Muc2x1Zyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcGFyc2VTbHVnRmllbGRBc05vcm1hbEZpZWxkKHZhbHVlKTtcbiAgICB9LFxuICAgIHZhbGlkYXRlLFxuICAgIHNlcmlhbGl6ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWVcbiAgICAgIH07XG4gICAgfSxcbiAgICBzZXJpYWxpemVXaXRoU2x1Zyh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHZhbHVlLm5hbWUsXG4gICAgICAgIHNsdWc6IHZhbHVlLnNsdWdcbiAgICAgIH07XG4gICAgfSxcbiAgICByZWFkZXI6IHtcbiAgICAgIHBhcnNlKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlU2x1Z0ZpZWxkQXNOb3JtYWxGaWVsZCh2YWx1ZSk7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZShwYXJzZWQpO1xuICAgICAgfSxcbiAgICAgIHBhcnNlV2l0aFNsdWcodmFsdWUsIGFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlKHBhcnNlQXNTbHVnRmllbGQodmFsdWUsIGFyZ3Muc2x1ZyksIHtcbiAgICAgICAgICBzbHVnRmllbGQ6IHtcbiAgICAgICAgICAgIGdsb2I6IGFyZ3MuZ2xvYixcbiAgICAgICAgICAgIHNsdWdzOiBlbXB0eVNldFxuICAgICAgICAgIH1cbiAgICAgICAgfSkubmFtZTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlVXJsKHZhbGlkYXRpb24sIHZhbHVlLCBsYWJlbCkge1xuICBpZiAodmFsdWUgIT09IG51bGwgJiYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycgfHwgIWlzVmFsaWRVUkwodmFsdWUpKSkge1xuICAgIHJldHVybiBgJHtsYWJlbH0gaXMgbm90IGEgdmFsaWQgVVJMYDtcbiAgfVxuICBpZiAodmFsaWRhdGlvbiAhPT0gbnVsbCAmJiB2YWxpZGF0aW9uICE9PSB2b2lkIDAgJiYgdmFsaWRhdGlvbi5pc1JlcXVpcmVkICYmIHZhbHVlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGAke2xhYmVsfSBpcyByZXF1aXJlZGA7XG4gIH1cbn1cblxuZnVuY3Rpb24gdXJsKHtcbiAgbGFiZWwsXG4gIGRlZmF1bHRWYWx1ZSxcbiAgdmFsaWRhdGlvbixcbiAgZGVzY3JpcHRpb25cbn0pIHtcbiAgcmV0dXJuIGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlKHtcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goVXJsRmllbGRJbnB1dCwge1xuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgdmFsaWRhdGlvbjogdmFsaWRhdGlvbixcbiAgICAgICAgLi4ucHJvcHNcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZSB8fCBudWxsO1xuICAgIH0sXG4gICAgcGFyc2UodmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWUgPT09ICcnID8gbnVsbCA6IHZhbHVlO1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSB2YWxpZGF0ZVVybCh2YWxpZGF0aW9uLCB2YWx1ZSwgbGFiZWwpO1xuICAgICAgaWYgKG1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IobWVzc2FnZSk7XG4gICAgICB9XG4gICAgICBhc3NlcnRSZXF1aXJlZCh2YWx1ZSwgdmFsaWRhdGlvbiwgbGFiZWwpO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgc2VyaWFsaXplKHZhbHVlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdmFsdWUgPT09IG51bGwgPyB1bmRlZmluZWQgOiB2YWx1ZVxuICAgICAgfTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBibG9ja3MoYmxvY2tzLCBvcHRzKSB7XG4gIGNvbnN0IGVudHJpZXMgPSBPYmplY3QuZW50cmllcyhibG9ja3MpO1xuICBpZiAoIWVudHJpZXMubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdmaWVsZHMuYmxvY2tzIG11c3QgaGF2ZSBhdCBsZWFzdCBvbmUgZW50cnknKTtcbiAgfVxuICBjb25zdCBzZWxlY3QkMSA9IHNlbGVjdCh7XG4gICAgbGFiZWw6ICdLaW5kJyxcbiAgICBkZWZhdWx0VmFsdWU6IGVudHJpZXNbMF1bMF0sXG4gICAgb3B0aW9uczogT2JqZWN0LmVudHJpZXMoYmxvY2tzKS5tYXAoKFtrZXksIHtcbiAgICAgIGxhYmVsXG4gICAgfV0pID0+ICh7XG4gICAgICBsYWJlbCxcbiAgICAgIHZhbHVlOiBrZXlcbiAgICB9KSlcbiAgfSk7XG4gIGNvbnN0IGVsZW1lbnQgPSBjb25kaXRpb25hbChzZWxlY3QkMSwgT2JqZWN0LmZyb21FbnRyaWVzKGVudHJpZXMubWFwKChba2V5LCB7XG4gICAgc2NoZW1hXG4gIH1dKSA9PiBba2V5LCBzY2hlbWFdKSkpO1xuICByZXR1cm4ge1xuICAgIC4uLmFycmF5KGVsZW1lbnQsIHtcbiAgICAgIGxhYmVsOiBvcHRzLmxhYmVsLFxuICAgICAgZGVzY3JpcHRpb246IG9wdHMuZGVzY3JpcHRpb24sXG4gICAgICB2YWxpZGF0aW9uOiBvcHRzLnZhbGlkYXRpb24sXG4gICAgICBpdGVtTGFiZWwocHJvcHMpIHtcbiAgICAgICAgY29uc3Qga2luZCA9IHByb3BzLmRpc2NyaW1pbmFudDtcbiAgICAgICAgY29uc3QgYmxvY2sgPSBibG9ja3Nba2luZF07XG4gICAgICAgIGlmICghYmxvY2suaXRlbUxhYmVsKSByZXR1cm4gYmxvY2subGFiZWw7XG4gICAgICAgIHJldHVybiBibG9jay5pdGVtTGFiZWwocHJvcHMudmFsdWUpO1xuICAgICAgfVxuICAgIH0pLFxuICAgIElucHV0OiBCbG9ja3NGaWVsZElucHV0XG4gIH07XG59XG5cbmZ1bmN0aW9uIGNsb3VkSW1hZ2Uoe1xuICBsYWJlbCxcbiAgZGVzY3JpcHRpb24sXG4gIHZhbGlkYXRpb25cbn0pIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5vYmplY3Qoe1xuICAgICAgc3JjOiB0ZXh0KHtcbiAgICAgICAgbGFiZWw6ICdVUkwnLFxuICAgICAgICB2YWxpZGF0aW9uOiB7XG4gICAgICAgICAgbGVuZ3RoOiB7XG4gICAgICAgICAgICBtaW46IHZhbGlkYXRpb24gIT09IG51bGwgJiYgdmFsaWRhdGlvbiAhPT0gdm9pZCAwICYmIHZhbGlkYXRpb24uaXNSZXF1aXJlZCA/IDEgOiAwXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KSxcbiAgICAgIGFsdDogdGV4dCh7XG4gICAgICAgIGxhYmVsOiAnQWx0IHRleHQnXG4gICAgICB9KSxcbiAgICAgIGhlaWdodDogaW50ZWdlcih7XG4gICAgICAgIGxhYmVsOiAnSGVpZ2h0J1xuICAgICAgfSksXG4gICAgICB3aWR0aDogaW50ZWdlcih7XG4gICAgICAgIGxhYmVsOiAnV2lkdGgnXG4gICAgICB9KVxuICAgIH0sIHtcbiAgICAgIGxhYmVsLFxuICAgICAgZGVzY3JpcHRpb25cbiAgICB9KSxcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goQ2xvdWRJbWFnZUZpZWxkSW5wdXQsIHtcbiAgICAgICAgLi4ucHJvcHMsXG4gICAgICAgIGlzUmVxdWlyZWQ6IHZhbGlkYXRpb24gPT09IG51bGwgfHwgdmFsaWRhdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsaWRhdGlvbi5pc1JlcXVpcmVkXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XG5cbnZhciBpbmRleCA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgX19wcm90b19fOiBudWxsLFxuICBhcnJheTogYXJyYXksXG4gIGNoZWNrYm94OiBjaGVja2JveCxcbiAgY2hpbGQ6IGNoaWxkLFxuICBjb25kaXRpb25hbDogY29uZGl0aW9uYWwsXG4gIGRhdGU6IGRhdGUsXG4gIGRhdGV0aW1lOiBkYXRldGltZSxcbiAgZG9jdW1lbnQ6IGRvY3VtZW50LFxuICBlbXB0eURvY3VtZW50OiBlbXB0eURvY3VtZW50LFxuICBlbXB0eTogZW1wdHksXG4gIGltYWdlOiBpbWFnZSxcbiAgZmlsZTogZmlsZSxcbiAgaW50ZWdlcjogaW50ZWdlcixcbiAgbXVsdGlzZWxlY3Q6IG11bHRpc2VsZWN0LFxuICBvYmplY3Q6IG9iamVjdCxcbiAgcGF0aFJlZmVyZW5jZTogcGF0aFJlZmVyZW5jZSxcbiAgcmVsYXRpb25zaGlwOiByZWxhdGlvbnNoaXAsXG4gIHNlbGVjdDogc2VsZWN0LFxuICBzbHVnOiBzbHVnLFxuICB0ZXh0OiB0ZXh0LFxuICB1cmw6IHVybCxcbiAgYmxvY2tzOiBibG9ja3MsXG4gIGNsb3VkSW1hZ2U6IGNsb3VkSW1hZ2Vcbn0pO1xuXG5mdW5jdGlvbiBCbG9ja1dyYXBwZXIoKSB7fVxuZnVuY3Rpb24gTm90RWRpdGFibGUoKSB7fVxuZnVuY3Rpb24gVG9vbGJhclNlcGFyYXRvcigpIHt9XG5cbmV4cG9ydCB7IEJsb2NrV3JhcHBlciwgTm90RWRpdGFibGUsIFRvb2xiYXJTZXBhcmF0b3IsIGluZGV4IGFzIGZpZWxkcyB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/keystatic-core.node.react-server.esm.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/read-local-018858c4.node.react-server.esm.js":
/*!****************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/read-local-018858c4.node.react-server.esm.js ***!
  \****************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   b: () => (/* binding */ blobSha),\n/* harmony export */   g: () => (/* binding */ getAllowedDirectories),\n/* harmony export */   r: () => (/* binding */ readToDirEntries)\n/* harmony export */ });\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index-90608531.node.react-server.esm.js */ \"(rsc)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/index-90608531.node.react-server.esm.js\");\n/* harmony import */ var emery__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! emery */ \"(rsc)/./node_modules/.pnpm/emery@1.4.3/node_modules/emery/dist/emery.esm.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react/jsx-runtime */ \"(rsc)/./node_modules/.pnpm/next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-jsx-runtime.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _sindresorhus_slugify__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @sindresorhus/slugify */ \"(rsc)/./node_modules/.pnpm/@sindresorhus+slugify@1.1.2/node_modules/@sindresorhus/slugify/index.js\");\n/* harmony import */ var _sindresorhus_slugify__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_sindresorhus_slugify__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _braintree_sanitize_url__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @braintree/sanitize-url */ \"(rsc)/./node_modules/.pnpm/@braintree+sanitize-url@6.0.4/node_modules/@braintree/sanitize-url/dist/index.js\");\n/* harmony import */ var ignore__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ignore */ \"(rsc)/./node_modules/.pnpm/ignore@5.3.1/node_modules/ignore/index.js\");\n/* harmony import */ var ignore__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(ignore__WEBPACK_IMPORTED_MODULE_7__);\n\n\n\n\n\n\n\n\n\nfunction blobSha(contents) {\n  const blobPrefix = textEncoder.encode('blob ' + contents.length + '\\0');\n  const array = new Uint8Array(blobPrefix.byteLength + contents.byteLength);\n  array.set(blobPrefix, 0);\n  array.set(contents, blobPrefix.byteLength);\n  return (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ay)(array);\n}\nfunction getNodeAtPath(tree, path) {\n  if (path === '') return tree;\n  let node = tree;\n  for (const part of path.split('/')) {\n    if (!node.has(part)) {\n      node.set(part, new Map());\n    }\n    const innerNode = node.get(part);\n    (0,emery__WEBPACK_IMPORTED_MODULE_3__.assert)(innerNode instanceof Map, 'expected tree');\n    node = innerNode;\n  }\n  return node;\n}\nfunction getFilename(path) {\n  return path.replace(/.*\\//, '');\n}\nfunction getDirname(path) {\n  if (!path.includes('/')) return '';\n  return path.replace(/\\/[^/]+$/, '');\n}\nfunction toTreeChanges(changes) {\n  const changesRoot = new Map();\n  for (const deletion of changes.deletions) {\n    const parentTree = getNodeAtPath(changesRoot, getDirname(deletion));\n    parentTree.set(getFilename(deletion), 'delete');\n  }\n  for (const addition of changes.additions) {\n    const parentTree = getNodeAtPath(changesRoot, getDirname(addition.path));\n    parentTree.set(getFilename(addition.path), addition.contents);\n  }\n  return changesRoot;\n}\nconst textEncoder = new TextEncoder();\nconst SPACE_CHAR_CODE = 32;\nconst space = new Uint8Array([SPACE_CHAR_CODE]);\nconst nullchar = new Uint8Array([0]);\nconst tree = textEncoder.encode('tree ');\n\n// based on https://github.com/isomorphic-git/isomorphic-git/blob/c09dfa20ffe0ab9e6602e0fa172d72ba8994e443/src/models/GitTree.js#L108-L122\nfunction treeSha(children) {\n  const entries = [...children].map(([name, node]) => ({\n    name,\n    sha: node.entry.sha,\n    mode: node.entry.mode\n  }));\n  entries.sort((a, b) => {\n    const aName = a.mode === '040000' ? a.name + '/' : a.name;\n    const bName = b.mode === '040000' ? b.name + '/' : b.name;\n    return aName === bName ? 0 : aName < bName ? -1 : 1;\n  });\n  const treeObject = entries.flatMap(entry => {\n    const mode = textEncoder.encode(entry.mode.replace(/^0/, ''));\n    const name = textEncoder.encode(entry.name);\n    const sha = hexToBytes(entry.sha);\n    return [mode, space, name, nullchar, sha];\n  });\n  return (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.ay)(concatBytes([tree, textEncoder.encode(treeObject.reduce((sum, val) => sum + val.byteLength, 0).toString()), nullchar, ...treeObject]));\n}\nfunction concatBytes(byteArrays) {\n  const totalLength = byteArrays.reduce((sum, arr) => sum + arr.byteLength, 0);\n  const result = new Uint8Array(totalLength);\n  let offset = 0;\n  for (const arr of byteArrays) {\n    result.set(arr, offset);\n    offset += arr.byteLength;\n  }\n  return result;\n}\nfunction hexToBytes(str) {\n  const bytes = new Uint8Array(str.length / 2);\n  for (var i = 0; i < bytes.byteLength; i += 1) {\n    const start = i * 2;\n    bytes[i] = parseInt(str.slice(start, start + 2), 16);\n  }\n  return bytes;\n}\nasync function createTreeNodeEntry(path, children) {\n  const sha = await treeSha(children);\n  return {\n    path,\n    mode: '040000',\n    type: 'tree',\n    sha\n  };\n}\nasync function createBlobNodeEntry(path, contents) {\n  const sha = 'sha' in contents ? contents.sha : await blobSha(contents);\n  return {\n    path,\n    mode: '100644',\n    type: 'blob',\n    sha,\n    size: contents.byteLength\n  };\n}\nasync function updateTreeWithChanges(tree, changes) {\n  var _await$updateTree;\n  const newTree = (_await$updateTree = await updateTree(tree, toTreeChanges(changes), [])) !== null && _await$updateTree !== void 0 ? _await$updateTree : new Map();\n  return {\n    entries: treeToEntries(newTree),\n    sha: await treeSha(newTree !== null && newTree !== void 0 ? newTree : new Map())\n  };\n}\nfunction treeToEntries(tree) {\n  return [...tree.values()].flatMap(x => x.children ? [x.entry, ...treeToEntries(x.children)] : [x.entry]);\n}\nasync function updateTree(tree, changedTree, path) {\n  const newTree = new Map(tree);\n  for (const [key, value] of changedTree) {\n    if (value === 'delete') {\n      newTree.delete(key);\n    }\n    if (value instanceof Map) {\n      var _newTree$get$children, _newTree$get;\n      const existingChildren = (_newTree$get$children = (_newTree$get = newTree.get(key)) === null || _newTree$get === void 0 ? void 0 : _newTree$get.children) !== null && _newTree$get$children !== void 0 ? _newTree$get$children : new Map();\n      const children = await updateTree(existingChildren, value, path.concat(key));\n      if (children === undefined) {\n        newTree.delete(key);\n        continue;\n      }\n      const entry = await createTreeNodeEntry(path.concat(key).join('/'), children);\n      newTree.set(key, {\n        entry,\n        children\n      });\n    }\n    if (typeof value === 'object' && 'sha' in value) {\n      const entry = await createBlobNodeEntry(path.concat(key).join('/'), value);\n      newTree.set(key, {\n        entry\n      });\n    }\n  }\n  if (newTree.size === 0) {\n    return undefined;\n  }\n  return newTree;\n}\n\nasync function readDirEntries(dir) {\n  let entries;\n  try {\n    entries = await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().readdir(dir, {\n      withFileTypes: true\n    });\n  } catch (err) {\n    if (err.code === 'ENOENT') {\n      return [];\n    }\n    throw err;\n  }\n  return entries;\n}\nasync function collectEntriesInDir(baseDir, ancestors) {\n  const currentRelativeDir = ancestors.map(p => p.segment).join('/');\n  const entries = await readDirEntries(path__WEBPACK_IMPORTED_MODULE_1___default().join(baseDir, currentRelativeDir));\n  const gitignore = entries.find(entry => entry.isFile() && entry.name === '.gitignore');\n  const gitignoreFilterForDescendents = gitignore ? ignore__WEBPACK_IMPORTED_MODULE_7___default()().add(await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().readFile(path__WEBPACK_IMPORTED_MODULE_1___default().join(baseDir, currentRelativeDir, gitignore.name), 'utf8')).createFilter() : () => true;\n  const pathSegments = ancestors.map(x => x.segment);\n  return (await Promise.all(entries.filter(entry => {\n    if (!entry.isDirectory() && !entry.isFile() || entry.name === '.git' || entry.name === 'node_modules' || entry.name === '.next') {\n      return false;\n    }\n    const innerPath = `${pathSegments.concat(entry.name).join('/')}${entry.isDirectory() ? '/' : ''}`;\n    if (!gitignoreFilterForDescendents(innerPath)) {\n      return false;\n    }\n    let currentPath = entry.name;\n    for (let i = ancestors.length - 1; i >= 0; i--) {\n      const ancestor = ancestors[i];\n      currentPath = `${ancestor.segment}/${currentPath}`;\n      if (!ancestor.gitignoreFilterForDescendents(currentPath)) {\n        return false;\n      }\n    }\n    return true;\n  }).map(async entry => {\n    if (entry.isDirectory()) {\n      return collectEntriesInDir(baseDir, [...ancestors, {\n        gitignoreFilterForDescendents,\n        segment: entry.name\n      }]);\n    } else {\n      const innerPath = pathSegments.concat(entry.name).join('/');\n      const contents = await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().readFile(path__WEBPACK_IMPORTED_MODULE_1___default().join(baseDir, innerPath));\n      return {\n        path: innerPath,\n        contents: {\n          byteLength: contents.byteLength,\n          sha: await blobSha(contents)\n        }\n      };\n    }\n  }))).flat();\n}\nasync function readToDirEntries(baseDir) {\n  const additions = await collectEntriesInDir(baseDir, []);\n  const {\n    entries\n  } = await updateTreeWithChanges(new Map(), {\n    additions: additions,\n    deletions: []\n  });\n  return entries;\n}\nfunction getAllowedDirectories(config) {\n  const allowedDirectories = [];\n  for (const [collection, collectionConfig] of Object.entries((_config$collections = config.collections) !== null && _config$collections !== void 0 ? _config$collections : {})) {\n    var _config$collections;\n    allowedDirectories.push(...(0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.a1)((0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.N)(collectionConfig.schema), (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.l)(config, collection), undefined, {\n      data: 'yaml',\n      contentField: undefined,\n      dataLocation: 'index'\n    }));\n  }\n  for (const [singleton, singletonConfig] of Object.entries((_config$singletons = config.singletons) !== null && _config$singletons !== void 0 ? _config$singletons : {})) {\n    var _config$singletons;\n    allowedDirectories.push(...(0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.a1)((0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.N)(singletonConfig.schema), (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.c)(config, singleton), undefined, (0,_index_90608531_node_react_server_esm_js__WEBPACK_IMPORTED_MODULE_2__.aa)(config, singleton)));\n  }\n  return [...new Set(allowedDirectories)];\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGtleXN0YXRpYytjb3JlQDAuMi4xMl9uZXh0QDE0LjIuMl9yZWFjdC1kb21AMTguMi4wX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvcmVhZC1sb2NhbC0wMTg4NThjNC5ub2RlLnJlYWN0LXNlcnZlci5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE2QjtBQUNMO0FBQ3FLO0FBQzlKO0FBQ0o7QUFDSTtBQUNFO0FBQ0w7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDRFQUFJO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSw2Q0FBTTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILFNBQVMsNEVBQUk7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixzQkFBc0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwwREFBVTtBQUM5QjtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLGdEQUFTO0FBQ2hEO0FBQ0Esb0RBQW9ELDZDQUFNLGFBQWEsMkRBQVcsQ0FBQyxnREFBUztBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDBDQUEwQyxFQUFFLCtCQUErQjtBQUNwRztBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxRQUFRO0FBQy9DO0FBQ0EsdUJBQXVCLGlCQUFpQixHQUFHLFlBQVk7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQSw2QkFBNkIsMkRBQVcsQ0FBQyxnREFBUztBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhLQUE4SztBQUM5SztBQUNBLCtCQUErQiw0RUFBd0IsQ0FBQywyRUFBTSwyQkFBMkIsMkVBQWlCO0FBQzFHO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLHdLQUF3SztBQUN4SztBQUNBLCtCQUErQiw0RUFBd0IsQ0FBQywyRUFBTSwwQkFBMEIsMkVBQWdCLGdDQUFnQyw0RUFBa0I7QUFDMUo7QUFDQTtBQUNBOztBQUUyRSIsInNvdXJjZXMiOlsid2VicGFjazovL0BrZXlzdGF0aWMvdGVtcGxhdGVzLW5leHRqcy8uL25vZGVfbW9kdWxlcy8ucG5wbS9Aa2V5c3RhdGljK2NvcmVAMC4yLjEyX25leHRAMTQuMi4yX3JlYWN0LWRvbUAxOC4yLjBfcmVhY3RAMTguMi4wL25vZGVfbW9kdWxlcy9Aa2V5c3RhdGljL2NvcmUvZGlzdC9yZWFkLWxvY2FsLTAxODg1OGM0Lm5vZGUucmVhY3Qtc2VydmVyLmVzbS5qcz82MWQ0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmcyBmcm9tICdmcy9wcm9taXNlcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IGF5IGFzIHNoYTEsIGExIGFzIGdldERpcmVjdG9yaWVzRm9yVHJlZUtleSwgbCBhcyBnZXRDb2xsZWN0aW9uUGF0aCwgTiBhcyBvYmplY3QsIGFhIGFzIGdldFNpbmdsZXRvbkZvcm1hdCwgYyBhcyBnZXRTaW5nbGV0b25QYXRoIH0gZnJvbSAnLi9pbmRleC05MDYwODUzMS5ub2RlLnJlYWN0LXNlcnZlci5lc20uanMnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnZW1lcnknO1xuaW1wb3J0ICdyZWFjdC9qc3gtcnVudGltZSc7XG5pbXBvcnQgJ0BzaW5kcmVzb3JodXMvc2x1Z2lmeSc7XG5pbXBvcnQgJ0BicmFpbnRyZWUvc2FuaXRpemUtdXJsJztcbmltcG9ydCBpZ25vcmUgZnJvbSAnaWdub3JlJztcblxuZnVuY3Rpb24gYmxvYlNoYShjb250ZW50cykge1xuICBjb25zdCBibG9iUHJlZml4ID0gdGV4dEVuY29kZXIuZW5jb2RlKCdibG9iICcgKyBjb250ZW50cy5sZW5ndGggKyAnXFwwJyk7XG4gIGNvbnN0IGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYmxvYlByZWZpeC5ieXRlTGVuZ3RoICsgY29udGVudHMuYnl0ZUxlbmd0aCk7XG4gIGFycmF5LnNldChibG9iUHJlZml4LCAwKTtcbiAgYXJyYXkuc2V0KGNvbnRlbnRzLCBibG9iUHJlZml4LmJ5dGVMZW5ndGgpO1xuICByZXR1cm4gc2hhMShhcnJheSk7XG59XG5mdW5jdGlvbiBnZXROb2RlQXRQYXRoKHRyZWUsIHBhdGgpIHtcbiAgaWYgKHBhdGggPT09ICcnKSByZXR1cm4gdHJlZTtcbiAgbGV0IG5vZGUgPSB0cmVlO1xuICBmb3IgKGNvbnN0IHBhcnQgb2YgcGF0aC5zcGxpdCgnLycpKSB7XG4gICAgaWYgKCFub2RlLmhhcyhwYXJ0KSkge1xuICAgICAgbm9kZS5zZXQocGFydCwgbmV3IE1hcCgpKTtcbiAgICB9XG4gICAgY29uc3QgaW5uZXJOb2RlID0gbm9kZS5nZXQocGFydCk7XG4gICAgYXNzZXJ0KGlubmVyTm9kZSBpbnN0YW5jZW9mIE1hcCwgJ2V4cGVjdGVkIHRyZWUnKTtcbiAgICBub2RlID0gaW5uZXJOb2RlO1xuICB9XG4gIHJldHVybiBub2RlO1xufVxuZnVuY3Rpb24gZ2V0RmlsZW5hbWUocGF0aCkge1xuICByZXR1cm4gcGF0aC5yZXBsYWNlKC8uKlxcLy8sICcnKTtcbn1cbmZ1bmN0aW9uIGdldERpcm5hbWUocGF0aCkge1xuICBpZiAoIXBhdGguaW5jbHVkZXMoJy8nKSkgcmV0dXJuICcnO1xuICByZXR1cm4gcGF0aC5yZXBsYWNlKC9cXC9bXi9dKyQvLCAnJyk7XG59XG5mdW5jdGlvbiB0b1RyZWVDaGFuZ2VzKGNoYW5nZXMpIHtcbiAgY29uc3QgY2hhbmdlc1Jvb3QgPSBuZXcgTWFwKCk7XG4gIGZvciAoY29uc3QgZGVsZXRpb24gb2YgY2hhbmdlcy5kZWxldGlvbnMpIHtcbiAgICBjb25zdCBwYXJlbnRUcmVlID0gZ2V0Tm9kZUF0UGF0aChjaGFuZ2VzUm9vdCwgZ2V0RGlybmFtZShkZWxldGlvbikpO1xuICAgIHBhcmVudFRyZWUuc2V0KGdldEZpbGVuYW1lKGRlbGV0aW9uKSwgJ2RlbGV0ZScpO1xuICB9XG4gIGZvciAoY29uc3QgYWRkaXRpb24gb2YgY2hhbmdlcy5hZGRpdGlvbnMpIHtcbiAgICBjb25zdCBwYXJlbnRUcmVlID0gZ2V0Tm9kZUF0UGF0aChjaGFuZ2VzUm9vdCwgZ2V0RGlybmFtZShhZGRpdGlvbi5wYXRoKSk7XG4gICAgcGFyZW50VHJlZS5zZXQoZ2V0RmlsZW5hbWUoYWRkaXRpb24ucGF0aCksIGFkZGl0aW9uLmNvbnRlbnRzKTtcbiAgfVxuICByZXR1cm4gY2hhbmdlc1Jvb3Q7XG59XG5jb25zdCB0ZXh0RW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuY29uc3QgU1BBQ0VfQ0hBUl9DT0RFID0gMzI7XG5jb25zdCBzcGFjZSA9IG5ldyBVaW50OEFycmF5KFtTUEFDRV9DSEFSX0NPREVdKTtcbmNvbnN0IG51bGxjaGFyID0gbmV3IFVpbnQ4QXJyYXkoWzBdKTtcbmNvbnN0IHRyZWUgPSB0ZXh0RW5jb2Rlci5lbmNvZGUoJ3RyZWUgJyk7XG5cbi8vIGJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS9pc29tb3JwaGljLWdpdC9pc29tb3JwaGljLWdpdC9ibG9iL2MwOWRmYTIwZmZlMGFiOWU2NjAyZTBmYTE3MmQ3MmJhODk5NGU0NDMvc3JjL21vZGVscy9HaXRUcmVlLmpzI0wxMDgtTDEyMlxuZnVuY3Rpb24gdHJlZVNoYShjaGlsZHJlbikge1xuICBjb25zdCBlbnRyaWVzID0gWy4uLmNoaWxkcmVuXS5tYXAoKFtuYW1lLCBub2RlXSkgPT4gKHtcbiAgICBuYW1lLFxuICAgIHNoYTogbm9kZS5lbnRyeS5zaGEsXG4gICAgbW9kZTogbm9kZS5lbnRyeS5tb2RlXG4gIH0pKTtcbiAgZW50cmllcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgY29uc3QgYU5hbWUgPSBhLm1vZGUgPT09ICcwNDAwMDAnID8gYS5uYW1lICsgJy8nIDogYS5uYW1lO1xuICAgIGNvbnN0IGJOYW1lID0gYi5tb2RlID09PSAnMDQwMDAwJyA/IGIubmFtZSArICcvJyA6IGIubmFtZTtcbiAgICByZXR1cm4gYU5hbWUgPT09IGJOYW1lID8gMCA6IGFOYW1lIDwgYk5hbWUgPyAtMSA6IDE7XG4gIH0pO1xuICBjb25zdCB0cmVlT2JqZWN0ID0gZW50cmllcy5mbGF0TWFwKGVudHJ5ID0+IHtcbiAgICBjb25zdCBtb2RlID0gdGV4dEVuY29kZXIuZW5jb2RlKGVudHJ5Lm1vZGUucmVwbGFjZSgvXjAvLCAnJykpO1xuICAgIGNvbnN0IG5hbWUgPSB0ZXh0RW5jb2Rlci5lbmNvZGUoZW50cnkubmFtZSk7XG4gICAgY29uc3Qgc2hhID0gaGV4VG9CeXRlcyhlbnRyeS5zaGEpO1xuICAgIHJldHVybiBbbW9kZSwgc3BhY2UsIG5hbWUsIG51bGxjaGFyLCBzaGFdO1xuICB9KTtcbiAgcmV0dXJuIHNoYTEoY29uY2F0Qnl0ZXMoW3RyZWUsIHRleHRFbmNvZGVyLmVuY29kZSh0cmVlT2JqZWN0LnJlZHVjZSgoc3VtLCB2YWwpID0+IHN1bSArIHZhbC5ieXRlTGVuZ3RoLCAwKS50b1N0cmluZygpKSwgbnVsbGNoYXIsIC4uLnRyZWVPYmplY3RdKSk7XG59XG5mdW5jdGlvbiBjb25jYXRCeXRlcyhieXRlQXJyYXlzKSB7XG4gIGNvbnN0IHRvdGFsTGVuZ3RoID0gYnl0ZUFycmF5cy5yZWR1Y2UoKHN1bSwgYXJyKSA9PiBzdW0gKyBhcnIuYnl0ZUxlbmd0aCwgMCk7XG4gIGNvbnN0IHJlc3VsdCA9IG5ldyBVaW50OEFycmF5KHRvdGFsTGVuZ3RoKTtcbiAgbGV0IG9mZnNldCA9IDA7XG4gIGZvciAoY29uc3QgYXJyIG9mIGJ5dGVBcnJheXMpIHtcbiAgICByZXN1bHQuc2V0KGFyciwgb2Zmc2V0KTtcbiAgICBvZmZzZXQgKz0gYXJyLmJ5dGVMZW5ndGg7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGhleFRvQnl0ZXMoc3RyKSB7XG4gIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoc3RyLmxlbmd0aCAvIDIpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVzLmJ5dGVMZW5ndGg7IGkgKz0gMSkge1xuICAgIGNvbnN0IHN0YXJ0ID0gaSAqIDI7XG4gICAgYnl0ZXNbaV0gPSBwYXJzZUludChzdHIuc2xpY2Uoc3RhcnQsIHN0YXJ0ICsgMiksIDE2KTtcbiAgfVxuICByZXR1cm4gYnl0ZXM7XG59XG5hc3luYyBmdW5jdGlvbiBjcmVhdGVUcmVlTm9kZUVudHJ5KHBhdGgsIGNoaWxkcmVuKSB7XG4gIGNvbnN0IHNoYSA9IGF3YWl0IHRyZWVTaGEoY2hpbGRyZW4pO1xuICByZXR1cm4ge1xuICAgIHBhdGgsXG4gICAgbW9kZTogJzA0MDAwMCcsXG4gICAgdHlwZTogJ3RyZWUnLFxuICAgIHNoYVxuICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlQmxvYk5vZGVFbnRyeShwYXRoLCBjb250ZW50cykge1xuICBjb25zdCBzaGEgPSAnc2hhJyBpbiBjb250ZW50cyA/IGNvbnRlbnRzLnNoYSA6IGF3YWl0IGJsb2JTaGEoY29udGVudHMpO1xuICByZXR1cm4ge1xuICAgIHBhdGgsXG4gICAgbW9kZTogJzEwMDY0NCcsXG4gICAgdHlwZTogJ2Jsb2InLFxuICAgIHNoYSxcbiAgICBzaXplOiBjb250ZW50cy5ieXRlTGVuZ3RoXG4gIH07XG59XG5hc3luYyBmdW5jdGlvbiB1cGRhdGVUcmVlV2l0aENoYW5nZXModHJlZSwgY2hhbmdlcykge1xuICB2YXIgX2F3YWl0JHVwZGF0ZVRyZWU7XG4gIGNvbnN0IG5ld1RyZWUgPSAoX2F3YWl0JHVwZGF0ZVRyZWUgPSBhd2FpdCB1cGRhdGVUcmVlKHRyZWUsIHRvVHJlZUNoYW5nZXMoY2hhbmdlcyksIFtdKSkgIT09IG51bGwgJiYgX2F3YWl0JHVwZGF0ZVRyZWUgIT09IHZvaWQgMCA/IF9hd2FpdCR1cGRhdGVUcmVlIDogbmV3IE1hcCgpO1xuICByZXR1cm4ge1xuICAgIGVudHJpZXM6IHRyZWVUb0VudHJpZXMobmV3VHJlZSksXG4gICAgc2hhOiBhd2FpdCB0cmVlU2hhKG5ld1RyZWUgIT09IG51bGwgJiYgbmV3VHJlZSAhPT0gdm9pZCAwID8gbmV3VHJlZSA6IG5ldyBNYXAoKSlcbiAgfTtcbn1cbmZ1bmN0aW9uIHRyZWVUb0VudHJpZXModHJlZSkge1xuICByZXR1cm4gWy4uLnRyZWUudmFsdWVzKCldLmZsYXRNYXAoeCA9PiB4LmNoaWxkcmVuID8gW3guZW50cnksIC4uLnRyZWVUb0VudHJpZXMoeC5jaGlsZHJlbildIDogW3guZW50cnldKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVRyZWUodHJlZSwgY2hhbmdlZFRyZWUsIHBhdGgpIHtcbiAgY29uc3QgbmV3VHJlZSA9IG5ldyBNYXAodHJlZSk7XG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGNoYW5nZWRUcmVlKSB7XG4gICAgaWYgKHZhbHVlID09PSAnZGVsZXRlJykge1xuICAgICAgbmV3VHJlZS5kZWxldGUoa2V5KTtcbiAgICB9XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgTWFwKSB7XG4gICAgICB2YXIgX25ld1RyZWUkZ2V0JGNoaWxkcmVuLCBfbmV3VHJlZSRnZXQ7XG4gICAgICBjb25zdCBleGlzdGluZ0NoaWxkcmVuID0gKF9uZXdUcmVlJGdldCRjaGlsZHJlbiA9IChfbmV3VHJlZSRnZXQgPSBuZXdUcmVlLmdldChrZXkpKSA9PT0gbnVsbCB8fCBfbmV3VHJlZSRnZXQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9uZXdUcmVlJGdldC5jaGlsZHJlbikgIT09IG51bGwgJiYgX25ld1RyZWUkZ2V0JGNoaWxkcmVuICE9PSB2b2lkIDAgPyBfbmV3VHJlZSRnZXQkY2hpbGRyZW4gOiBuZXcgTWFwKCk7XG4gICAgICBjb25zdCBjaGlsZHJlbiA9IGF3YWl0IHVwZGF0ZVRyZWUoZXhpc3RpbmdDaGlsZHJlbiwgdmFsdWUsIHBhdGguY29uY2F0KGtleSkpO1xuICAgICAgaWYgKGNoaWxkcmVuID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmV3VHJlZS5kZWxldGUoa2V5KTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBlbnRyeSA9IGF3YWl0IGNyZWF0ZVRyZWVOb2RlRW50cnkocGF0aC5jb25jYXQoa2V5KS5qb2luKCcvJyksIGNoaWxkcmVuKTtcbiAgICAgIG5ld1RyZWUuc2V0KGtleSwge1xuICAgICAgICBlbnRyeSxcbiAgICAgICAgY2hpbGRyZW5cbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiAnc2hhJyBpbiB2YWx1ZSkge1xuICAgICAgY29uc3QgZW50cnkgPSBhd2FpdCBjcmVhdGVCbG9iTm9kZUVudHJ5KHBhdGguY29uY2F0KGtleSkuam9pbignLycpLCB2YWx1ZSk7XG4gICAgICBuZXdUcmVlLnNldChrZXksIHtcbiAgICAgICAgZW50cnlcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBpZiAobmV3VHJlZS5zaXplID09PSAwKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gbmV3VHJlZTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gcmVhZERpckVudHJpZXMoZGlyKSB7XG4gIGxldCBlbnRyaWVzO1xuICB0cnkge1xuICAgIGVudHJpZXMgPSBhd2FpdCBmcy5yZWFkZGlyKGRpciwge1xuICAgICAgd2l0aEZpbGVUeXBlczogdHJ1ZVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBpZiAoZXJyLmNvZGUgPT09ICdFTk9FTlQnKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIHRocm93IGVycjtcbiAgfVxuICByZXR1cm4gZW50cmllcztcbn1cbmFzeW5jIGZ1bmN0aW9uIGNvbGxlY3RFbnRyaWVzSW5EaXIoYmFzZURpciwgYW5jZXN0b3JzKSB7XG4gIGNvbnN0IGN1cnJlbnRSZWxhdGl2ZURpciA9IGFuY2VzdG9ycy5tYXAocCA9PiBwLnNlZ21lbnQpLmpvaW4oJy8nKTtcbiAgY29uc3QgZW50cmllcyA9IGF3YWl0IHJlYWREaXJFbnRyaWVzKHBhdGguam9pbihiYXNlRGlyLCBjdXJyZW50UmVsYXRpdmVEaXIpKTtcbiAgY29uc3QgZ2l0aWdub3JlID0gZW50cmllcy5maW5kKGVudHJ5ID0+IGVudHJ5LmlzRmlsZSgpICYmIGVudHJ5Lm5hbWUgPT09ICcuZ2l0aWdub3JlJyk7XG4gIGNvbnN0IGdpdGlnbm9yZUZpbHRlckZvckRlc2NlbmRlbnRzID0gZ2l0aWdub3JlID8gaWdub3JlKCkuYWRkKGF3YWl0IGZzLnJlYWRGaWxlKHBhdGguam9pbihiYXNlRGlyLCBjdXJyZW50UmVsYXRpdmVEaXIsIGdpdGlnbm9yZS5uYW1lKSwgJ3V0ZjgnKSkuY3JlYXRlRmlsdGVyKCkgOiAoKSA9PiB0cnVlO1xuICBjb25zdCBwYXRoU2VnbWVudHMgPSBhbmNlc3RvcnMubWFwKHggPT4geC5zZWdtZW50KTtcbiAgcmV0dXJuIChhd2FpdCBQcm9taXNlLmFsbChlbnRyaWVzLmZpbHRlcihlbnRyeSA9PiB7XG4gICAgaWYgKCFlbnRyeS5pc0RpcmVjdG9yeSgpICYmICFlbnRyeS5pc0ZpbGUoKSB8fCBlbnRyeS5uYW1lID09PSAnLmdpdCcgfHwgZW50cnkubmFtZSA9PT0gJ25vZGVfbW9kdWxlcycgfHwgZW50cnkubmFtZSA9PT0gJy5uZXh0Jykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBpbm5lclBhdGggPSBgJHtwYXRoU2VnbWVudHMuY29uY2F0KGVudHJ5Lm5hbWUpLmpvaW4oJy8nKX0ke2VudHJ5LmlzRGlyZWN0b3J5KCkgPyAnLycgOiAnJ31gO1xuICAgIGlmICghZ2l0aWdub3JlRmlsdGVyRm9yRGVzY2VuZGVudHMoaW5uZXJQYXRoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBsZXQgY3VycmVudFBhdGggPSBlbnRyeS5uYW1lO1xuICAgIGZvciAobGV0IGkgPSBhbmNlc3RvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGNvbnN0IGFuY2VzdG9yID0gYW5jZXN0b3JzW2ldO1xuICAgICAgY3VycmVudFBhdGggPSBgJHthbmNlc3Rvci5zZWdtZW50fS8ke2N1cnJlbnRQYXRofWA7XG4gICAgICBpZiAoIWFuY2VzdG9yLmdpdGlnbm9yZUZpbHRlckZvckRlc2NlbmRlbnRzKGN1cnJlbnRQYXRoKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9KS5tYXAoYXN5bmMgZW50cnkgPT4ge1xuICAgIGlmIChlbnRyeS5pc0RpcmVjdG9yeSgpKSB7XG4gICAgICByZXR1cm4gY29sbGVjdEVudHJpZXNJbkRpcihiYXNlRGlyLCBbLi4uYW5jZXN0b3JzLCB7XG4gICAgICAgIGdpdGlnbm9yZUZpbHRlckZvckRlc2NlbmRlbnRzLFxuICAgICAgICBzZWdtZW50OiBlbnRyeS5uYW1lXG4gICAgICB9XSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGlubmVyUGF0aCA9IHBhdGhTZWdtZW50cy5jb25jYXQoZW50cnkubmFtZSkuam9pbignLycpO1xuICAgICAgY29uc3QgY29udGVudHMgPSBhd2FpdCBmcy5yZWFkRmlsZShwYXRoLmpvaW4oYmFzZURpciwgaW5uZXJQYXRoKSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBwYXRoOiBpbm5lclBhdGgsXG4gICAgICAgIGNvbnRlbnRzOiB7XG4gICAgICAgICAgYnl0ZUxlbmd0aDogY29udGVudHMuYnl0ZUxlbmd0aCxcbiAgICAgICAgICBzaGE6IGF3YWl0IGJsb2JTaGEoY29udGVudHMpXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9KSkpLmZsYXQoKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHJlYWRUb0RpckVudHJpZXMoYmFzZURpcikge1xuICBjb25zdCBhZGRpdGlvbnMgPSBhd2FpdCBjb2xsZWN0RW50cmllc0luRGlyKGJhc2VEaXIsIFtdKTtcbiAgY29uc3Qge1xuICAgIGVudHJpZXNcbiAgfSA9IGF3YWl0IHVwZGF0ZVRyZWVXaXRoQ2hhbmdlcyhuZXcgTWFwKCksIHtcbiAgICBhZGRpdGlvbnM6IGFkZGl0aW9ucyxcbiAgICBkZWxldGlvbnM6IFtdXG4gIH0pO1xuICByZXR1cm4gZW50cmllcztcbn1cbmZ1bmN0aW9uIGdldEFsbG93ZWREaXJlY3Rvcmllcyhjb25maWcpIHtcbiAgY29uc3QgYWxsb3dlZERpcmVjdG9yaWVzID0gW107XG4gIGZvciAoY29uc3QgW2NvbGxlY3Rpb24sIGNvbGxlY3Rpb25Db25maWddIG9mIE9iamVjdC5lbnRyaWVzKChfY29uZmlnJGNvbGxlY3Rpb25zID0gY29uZmlnLmNvbGxlY3Rpb25zKSAhPT0gbnVsbCAmJiBfY29uZmlnJGNvbGxlY3Rpb25zICE9PSB2b2lkIDAgPyBfY29uZmlnJGNvbGxlY3Rpb25zIDoge30pKSB7XG4gICAgdmFyIF9jb25maWckY29sbGVjdGlvbnM7XG4gICAgYWxsb3dlZERpcmVjdG9yaWVzLnB1c2goLi4uZ2V0RGlyZWN0b3JpZXNGb3JUcmVlS2V5KG9iamVjdChjb2xsZWN0aW9uQ29uZmlnLnNjaGVtYSksIGdldENvbGxlY3Rpb25QYXRoKGNvbmZpZywgY29sbGVjdGlvbiksIHVuZGVmaW5lZCwge1xuICAgICAgZGF0YTogJ3lhbWwnLFxuICAgICAgY29udGVudEZpZWxkOiB1bmRlZmluZWQsXG4gICAgICBkYXRhTG9jYXRpb246ICdpbmRleCdcbiAgICB9KSk7XG4gIH1cbiAgZm9yIChjb25zdCBbc2luZ2xldG9uLCBzaW5nbGV0b25Db25maWddIG9mIE9iamVjdC5lbnRyaWVzKChfY29uZmlnJHNpbmdsZXRvbnMgPSBjb25maWcuc2luZ2xldG9ucykgIT09IG51bGwgJiYgX2NvbmZpZyRzaW5nbGV0b25zICE9PSB2b2lkIDAgPyBfY29uZmlnJHNpbmdsZXRvbnMgOiB7fSkpIHtcbiAgICB2YXIgX2NvbmZpZyRzaW5nbGV0b25zO1xuICAgIGFsbG93ZWREaXJlY3Rvcmllcy5wdXNoKC4uLmdldERpcmVjdG9yaWVzRm9yVHJlZUtleShvYmplY3Qoc2luZ2xldG9uQ29uZmlnLnNjaGVtYSksIGdldFNpbmdsZXRvblBhdGgoY29uZmlnLCBzaW5nbGV0b24pLCB1bmRlZmluZWQsIGdldFNpbmdsZXRvbkZvcm1hdChjb25maWcsIHNpbmdsZXRvbikpKTtcbiAgfVxuICByZXR1cm4gWy4uLm5ldyBTZXQoYWxsb3dlZERpcmVjdG9yaWVzKV07XG59XG5cbmV4cG9ydCB7IGJsb2JTaGEgYXMgYiwgZ2V0QWxsb3dlZERpcmVjdG9yaWVzIGFzIGcsIHJlYWRUb0RpckVudHJpZXMgYXMgciB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@keystatic+core@0.2.12_next@14.2.2_react-dom@18.2.0_react@18.2.0/node_modules/@keystatic/core/dist/read-local-018858c4.node.react-server.esm.js\n");

/***/ })

};
;