import 'fs/promises';
import 'path';
import { a2 as getDirectoriesForTreeKey, a5 as getCollectionPath, J as object, ag as getSingletonFormat, c as getSingletonPath } from './index-7b29ec39.react-server.js';
import 'react/jsx-runtime';
import 'decimal.js';
import '@sindresorhus/slugify';
import '@braintree/sanitize-url';
import 'ignore';
import '@markdoc/markdoc';
import './index-3a072f32.react-server.js';
import 'slate';
import 'emery/assertions';
import 'emery';
import 'yjs';
import 'js-base64';
import './hex-fad676b3.react-server.js';
import '@emotion/weak-memoize';
import 'y-prosemirror';

function getAllowedDirectories(config) {
  const allowedDirectories = [];
  for (const [collection, collectionConfig] of Object.entries((_config$collections = config.collections) !== null && _config$collections !== void 0 ? _config$collections : {})) {
    var _config$collections;
    allowedDirectories.push(...getDirectoriesForTreeKey(object(collectionConfig.schema), getCollectionPath(config, collection), undefined, {
      data: 'yaml',
      contentField: undefined,
      dataLocation: 'index'
    }));
    if (collectionConfig.template) {
      allowedDirectories.push(collectionConfig.template);
    }
  }
  for (const [singleton, singletonConfig] of Object.entries((_config$singletons = config.singletons) !== null && _config$singletons !== void 0 ? _config$singletons : {})) {
    var _config$singletons;
    allowedDirectories.push(...getDirectoriesForTreeKey(object(singletonConfig.schema), getSingletonPath(config, singleton), undefined, getSingletonFormat(config, singleton)));
  }
  return [...new Set(allowedDirectories)];
}

export { getAllowedDirectories };
